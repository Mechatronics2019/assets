{"version":3,"sources":["webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/mixins/messageFormatterMixin.js","webpack:///./node_modules/markdown-it-link-attributes/index.js","webpack:///./app/javascript/shared/components/Button.vue?1617","webpack:///./app/javascript/shared/components/Button.vue?26c2","webpack:///app/javascript/shared/components/Button.vue","webpack:///./app/javascript/shared/components/Button.vue","webpack:///./app/javascript/dashboard/mixins/customAttributeMixin.js","webpack:///./node_modules/@chatwoot/utils/dist/utils.esm.js","webpack:///./app/javascript/widget/components/PreChat/Form.vue?51b1","webpack:///./app/javascript/widget/views/PreChatForm.vue?708e","webpack:///app/javascript/widget/components/PreChat/Form.vue","webpack:///./app/javascript/widget/components/PreChat/Form.vue?3f24","webpack:///./app/javascript/widget/components/PreChat/Form.vue","webpack:///./app/javascript/widget/components/PreChat/Form.vue?e026","webpack:///./app/javascript/widget/views/PreChatForm.vue?fc86","webpack:///app/javascript/widget/views/PreChatForm.vue","webpack:///./app/javascript/widget/views/PreChatForm.vue"],"names":["module","exports","webpackPolyfill","deprecate","paths","children","Object","defineProperty","enumerable","get","l","i","DESCRIPTORS","global","isForced","inheritIfRequired","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","enforceInternalState","enforce","setSpecies","MATCH","wellKnownSymbol","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","set","it","keys","index","length","USER_MENTIONS_REGEX","processInlineToken","blockToken","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","push","core","after","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","isAPrivateNote","updatedMessage","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","methods","getPlainText","plainText","truncateMessage","description","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","markdownitLinkAttributes","configs","Array","isArray","freeze","defaultRender","link_open","options","env","self","config","link","attrIndex","matcher","findFirstMatchingConfig","attributes","attr","value","attrPush","applyAttributes","renderToken","component","_vm","_c","_self","buttonClassName","style","disabled","on","onClick","_t","getRegexp","regexPatternValue","lastSlash","lastIndexOf","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","window","setTimeout","getContrastingTextColor","bgColor","color","parseInt","formatTime","timeInSeconds","formattedTime","minutes","Math","floor","seconds","hours","_minutes","days","_hours","trimContent","maxLength","ellipsis","trimmedContent","substring","convertSecondsToTimeUnit","unitNames","time","unit","minute","Number","toFixed","hour","day","parseBoolean","candidate","candidateString","String","toLowerCase","Boolean","JSON","parse","error","sortAsc","arr","sort","a","b","_quantileForSorted","sorted","q","min","clamped","base","rest","getQuantileIntervals","data","intervals","map","interval","_extends","assign","hasOwnProperty","MESSAGE_VARIABLES_REGEX","capitalizeName","name","s","toUpperCase","getFirstName","_ref","user","firstName","split","shift","getLastName","_ref2","lastName","pop","getMessageVariables","_ref3","_assignee$email","conversation","contact","_conversation$meta","meta","assignee","sender","id","_conversation$custom_","custom_attributes","conversationCustomAttributes","contactCustomAttributes","email","phone_number","entries","reduce","acc","_ref5","_ref6","replaceVariablesInMessage","_ref7","variables","_","trim","getUndefinedVariablesInMessage","_ref8","matches","filter","variable","createTypingIndicator","onStartTyping","onStopTyping","idleTime","timer","stop","reset","start","staticClass","onSubmit","model","callback","$$v","formValues","expression","directives","rawName","headerMessage","$dm","_e","_v","_l","item","getLabel","getPlaceHolder","getValidation","getOptions","labelClass","inputClass","startsWithPlus","$t","isValidPhoneNumber","required","regex_cue","hasErrorInPhoneInput","hasActiveCampaign","widgetColor","textColor","isCreating","_s","preChatFormOptions"],"mappings":"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","file":"js/56-98c2e0e7d6b088f31eac.chunk.js","sourcesContent":["module.exports = function (module) {\n  if (!module.webpackPolyfill) {\n    module.deprecate = function () {};\n\n    module.paths = []; // module.parent = undefined by default\n\n    if (!module.children) module.children = [];\n    Object.defineProperty(module, \"loaded\", {\n      enumerable: true,\n      get: function get() {\n        return module.l;\n      }\n    });\n    Object.defineProperty(module, \"id\", {\n      enumerable: true,\n      get: function get() {\n        return module.i;\n      }\n    });\n    module.webpackPolyfill = 1;\n  }\n\n  return module;\n};","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) {\n      var state = enforceInternalState(result);\n      state.sticky = true;\n    }\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","\"use strict\"; // Adapted from https://github.com/markdown-it/markdown-it/blob/fbc6b0fed563ba7c00557ab638fd19752f8e759d/docs/architecture.md\n\nfunction findFirstMatchingConfig(link, configs) {\n  var i, config;\n  var href = link.attrs[link.attrIndex(\"href\")][1];\n\n  for (i = 0; i < configs.length; ++i) {\n    config = configs[i]; // If there is a matcher function defined then call it\n    // Matcher Function should return a boolean indicating\n    // whether or not it matched. If it matched, use that\n    // configuration, otherwise, try the next one.\n\n    if (typeof config.matcher === \"function\") {\n      if (config.matcher(href, config)) {\n        return config;\n      } else {\n        continue;\n      }\n    }\n\n    return config;\n  }\n}\n\nfunction applyAttributes(idx, tokens, attributes) {\n  Object.keys(attributes).forEach(function (attr) {\n    var attrIndex;\n    var value = attributes[attr];\n\n    if (attr === \"className\") {\n      // when dealing with applying classes\n      // programatically, some programmers\n      // may prefer to use the className syntax\n      attr = \"class\";\n    }\n\n    attrIndex = tokens[idx].attrIndex(attr);\n\n    if (attrIndex < 0) {\n      // attr doesn't exist, add new attribute\n      tokens[idx].attrPush([attr, value]);\n    } else {\n      // attr already exists, overwrite it\n      tokens[idx].attrs[attrIndex][1] = value; // replace value of existing attr\n    }\n  });\n}\n\nfunction markdownitLinkAttributes(md, configs) {\n  if (!configs) {\n    configs = [];\n  } else {\n    configs = Array.isArray(configs) ? configs : [configs];\n  }\n\n  Object.freeze(configs);\n  var defaultRender = md.renderer.rules.link_open || this.defaultRender;\n\n  md.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n    var config = findFirstMatchingConfig(tokens[idx], configs);\n    var attributes = config && config.attrs;\n\n    if (attributes) {\n      applyAttributes(idx, tokens, attributes);\n    } // pass token to default renderer.\n\n\n    return defaultRender(tokens, idx, options, env, self);\n  };\n}\n\nmarkdownitLinkAttributes.defaultRender = function (tokens, idx, options, env, self) {\n  return self.renderToken(tokens, idx, options);\n};\n\nmodule.exports = markdownitLinkAttributes;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('button',{class:_vm.buttonClassName,style:(_vm.buttonStyles),attrs:{\"disabled\":_vm.disabled},on:{\"click\":_vm.onClick}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Button.vue?vue&type=script&lang=js&\"","<template>\n  <button\n    :class=\"buttonClassName\"\n    :style=\"buttonStyles\"\n    :disabled=\"disabled\"\n    @click=\"onClick\"\n  >\n    <slot />\n  </button>\n</template>\n<script>\nexport default {\n  props: {\n    block: {\n      type: Boolean,\n      default: false,\n    },\n    type: {\n      type: String,\n      default: 'blue',\n    },\n    bgColor: {\n      type: String,\n      default: '',\n    },\n    textColor: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    buttonClassName() {\n      let className = 'text-white py-3 px-4 rounded shadow-sm leading-4';\n      if (this.type === 'clear') {\n        className = 'flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600';\n      }\n\n      if (this.type === 'blue' && !Object.keys(this.buttonStyles).length) {\n        className = `${className} bg-woot-500 hover:bg-woot-700`;\n      }\n      if (this.block) {\n        className = `${className} w-full`;\n      }\n      return className;\n    },\n    buttonStyles() {\n      const styles = {};\n      if (this.bgColor) {\n        styles.backgroundColor = this.bgColor;\n      }\n      if (this.textColor) {\n        styles.color = this.textColor;\n      }\n      return styles;\n    },\n  },\n  methods: {\n    onClick(e) {\n      this.$emit('click', e);\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./Button.vue?vue&type=template&id=05075a0e&\"\nimport script from \"./Button.vue?vue&type=script&lang=js&\"\nexport * from \"./Button.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n  methods: {\n    getRegexp(regexPatternValue) {\n      let lastSlash = regexPatternValue.lastIndexOf('/');\n      return new RegExp(\n        regexPatternValue.slice(1, lastSlash),\n        regexPatternValue.slice(lastSlash + 1)\n      );\n    },\n  },\n};\n","import isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday'; // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\n/**\r\n * @func Callback function to be called after delay\r\n * @delay Delay for debounce in ms\r\n * @immediate should execute immediately\r\n * @returns debounced callback function\r\n */\n\nvar debounce = function debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = null;\n    var args = arguments;\n\n    var later = function later() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n/**\r\n * @name Get contrasting text color\r\n * @description Get contrasting text color from a text color\r\n * @param bgColor  Background color of text.\r\n * @returns contrasting text color\r\n */\n\n\nvar getContrastingTextColor = function getContrastingTextColor(bgColor) {\n  var color = bgColor.replace('#', '');\n  var r = parseInt(color.slice(0, 2), 16);\n  var g = parseInt(color.slice(2, 4), 16);\n  var b = parseInt(color.slice(4, 6), 16); // http://stackoverflow.com/a/3943023/112731\n\n  return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#FFFFFF';\n};\n/**\r\n * @name Get formatted date\r\n * @description Get date in today, yesterday or any other date format\r\n * @param date  date\r\n * @param todayText  Today text\r\n * @param yesterdayText  Yesterday text\r\n * @returns formatted date\r\n */\n\n\nvar formatDate = function formatDate(_ref) {\n  var date = _ref.date,\n      todayText = _ref.todayText,\n      yesterdayText = _ref.yesterdayText;\n  var dateValue = new Date(date);\n  if (isToday(dateValue)) return todayText;\n  if (isYesterday(dateValue)) return yesterdayText;\n  return date;\n};\n/**\r\n * @name formatTime\r\n * @description Format time to Hour, Minute and Second\r\n * @param timeInSeconds  number\r\n * @returns formatted time\r\n */\n\n\nvar formatTime = function formatTime(timeInSeconds) {\n  var formattedTime = '';\n\n  if (timeInSeconds >= 60 && timeInSeconds < 3600) {\n    var minutes = Math.floor(timeInSeconds / 60);\n    formattedTime = minutes + \" Min\";\n    var seconds = minutes === 60 ? 0 : Math.floor(timeInSeconds % 60);\n    return formattedTime + (\"\" + (seconds > 0 ? ' ' + seconds + ' Sec' : ''));\n  }\n\n  if (timeInSeconds >= 3600 && timeInSeconds < 86400) {\n    var hours = Math.floor(timeInSeconds / 3600);\n    formattedTime = hours + \" Hr\";\n\n    var _minutes = timeInSeconds % 3600 < 60 || hours === 24 ? 0 : Math.floor(timeInSeconds % 3600 / 60);\n\n    return formattedTime + (\"\" + (_minutes > 0 ? ' ' + _minutes + ' Min' : ''));\n  }\n\n  if (timeInSeconds >= 86400) {\n    var days = Math.floor(timeInSeconds / 86400);\n    formattedTime = days + \" Day\";\n\n    var _hours = timeInSeconds % 86400 < 3600 || days >= 364 ? 0 : Math.floor(timeInSeconds % 86400 / 3600);\n\n    return formattedTime + (\"\" + (_hours > 0 ? ' ' + _hours + ' Hr' : ''));\n  }\n\n  return Math.floor(timeInSeconds) + \" Sec\";\n};\n/**\r\n * @name trimContent\r\n * @description Trim a string to max length\r\n * @param content String to trim\r\n * @param maxLength Length of the string to trim, default 1024\r\n * @param ellipsis Boolean to add dots at the end of the string, default false\r\n * @returns trimmed string\r\n */\n\n\nvar trimContent = function trimContent(content, maxLength, ellipsis) {\n  if (content === void 0) {\n    content = '';\n  }\n\n  if (maxLength === void 0) {\n    maxLength = 1024;\n  }\n\n  if (ellipsis === void 0) {\n    ellipsis = false;\n  }\n\n  var trimmedContent = content;\n\n  if (content.length > maxLength) {\n    trimmedContent = content.substring(0, maxLength);\n  }\n\n  if (ellipsis) {\n    trimmedContent = trimmedContent + '...';\n  }\n\n  return trimmedContent;\n};\n/**\r\n * @name convertSecondsToTimeUnit\r\n * @description Convert seconds to time unit\r\n * @param seconds  number\r\n * @param unitNames  object\r\n * @returns time and unit\r\n * @example\r\n * convertToUnit(60, { minute: 'm', hour: 'h', day: 'd' }); // { time: 1, unit: 'm' }\r\n * convertToUnit(60, { minute: 'Minutes', hour: 'Hours', day: 'Days' }); // { time: 1, unit: 'Minutes' }\r\n */\n\n\nvar convertSecondsToTimeUnit = function convertSecondsToTimeUnit(seconds, unitNames) {\n  if (seconds === null || seconds === 0) return {\n    time: null,\n    unit: unitNames.minute\n  };\n  if (seconds < 3600) return {\n    time: Number((seconds / 60).toFixed(1)),\n    unit: unitNames.minute\n  };\n  if (seconds < 86400) return {\n    time: Number((seconds / 3600).toFixed(1)),\n    unit: unitNames.hour\n  };\n  return {\n    time: Number((seconds / 86400).toFixed(1)),\n    unit: unitNames.day\n  };\n};\n/**\r\n * Function that parses a string boolean value and returns the corresponding boolean value\r\n * @param {string | number} candidate - The string boolean value to be parsed\r\n * @return {boolean} - The parsed boolean value\r\n */\n\n\nfunction parseBoolean(candidate) {\n  try {\n    // lowercase the string, so TRUE becomes true\n    var candidateString = String(candidate).toLowerCase(); // wrap in boolean to ensure that the return value\n    // is a boolean even if values like 0 or 1 are passed\n\n    return Boolean(JSON.parse(candidateString));\n  } catch (error) {\n    return false;\n  }\n}\n/**\r\n * Sorts an array of numbers in ascending order.\r\n * @param {number[]} arr - The array of numbers to be sorted.\r\n * @returns {number[]} - The sorted array.\r\n */\n\n\nfunction sortAsc(arr) {\n  // .slice() is used to create a copy of the array so that the original array is not mutated\n  return arr.slice().sort(function (a, b) {\n    return a - b;\n  });\n}\n/**\r\n * Calculates the quantile value of an array at a specified percentile.\r\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\r\n * @param {number} q - The percentile to calculate the quantile value for.\r\n * @returns {number} - The quantile value.\r\n */\n\n\nfunction quantile(arr, q) {\n  var sorted = sortAsc(arr); // Sort the array in ascending order\n\n  return _quantileForSorted(sorted, q); // Calculate the quantile value\n}\n/**\r\n * Clamps a value between a minimum and maximum range.\r\n * @param {number} min - The minimum range.\r\n * @param {number} max - The maximum range.\r\n * @param {number} value - The value to be clamped.\r\n * @returns {number} - The clamped value.\r\n */\n\n\nfunction clamp(min, max, value) {\n  if (value < min) {\n    return min;\n  }\n\n  if (value > max) {\n    return max;\n  }\n\n  return value;\n}\n/**\r\n * This method assumes the the array provided is already sorted in ascending order.\r\n * It's a helper method for the quantile method and should not be exported as is.\r\n *\r\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\r\n * @param {number} q - The percentile to calculate the quantile value for.\r\n * @returns {number} - The quantile value.\r\n */\n\n\nfunction _quantileForSorted(sorted, q) {\n  var clamped = clamp(0, 1, q); // Clamp the percentile between 0 and 1\n\n  var pos = (sorted.length - 1) * clamped; // Calculate the index of the element at the specified percentile\n\n  var base = Math.floor(pos); // Find the index of the closest element to the specified percentile\n\n  var rest = pos - base; // Calculate the decimal value between the closest elements\n  // Interpolate the quantile value between the closest elements\n  // Most libraries don't to the interpolation, but I'm just having fun here\n  // also see https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample\n\n  if (sorted[base + 1] !== undefined) {\n    // in case the position was a integer, the rest will be 0 and the interpolation will be skipped\n    return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n  } // Return the closest element if there is no interpolation possible\n\n\n  return sorted[base];\n}\n/**\r\n * Calculates the quantile values for an array of intervals.\r\n * @param {number[]} data - The array of numbers to calculate the quantile values from.\r\n * @param {number[]} intervals - The array of intervals to calculate the quantile values for.\r\n * @returns {number[]} - The array of quantile values for the intervals.\r\n */\n\n\nvar getQuantileIntervals = function getQuantileIntervals(data, intervals) {\n  // Sort the array in ascending order before looping through the intervals.\n  // depending on the size of the array and the number of intervals, this can speed up the process by at least twice\n  // for a random array of 100 numbers and 5 intervals, the speedup is 3x\n  var sorted = sortAsc(data);\n  return intervals.map(function (interval) {\n    return _quantileForSorted(sorted, interval);\n  });\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar MESSAGE_VARIABLES_REGEX = /{{(.*?)}}/g;\n\nvar skipCodeBlocks = function skipCodeBlocks(str) {\n  return str.replace(/```(?:.|\\n)+?```/g, '');\n};\n\nvar capitalizeName = function capitalizeName(name) {\n  return (name || '').replace(/\\b(\\w)/g, function (s) {\n    return s.toUpperCase();\n  });\n};\n\nvar getFirstName = function getFirstName(_ref) {\n  var user = _ref.user;\n  var firstName = user != null && user.name ? user.name.split(' ').shift() : '';\n  return capitalizeName(firstName);\n};\n\nvar getLastName = function getLastName(_ref2) {\n  var user = _ref2.user;\n\n  if (user && user.name) {\n    var lastName = user.name.split(' ').length > 1 ? user.name.split(' ').pop() : '';\n    return capitalizeName(lastName);\n  }\n\n  return '';\n};\n\nvar getMessageVariables = function getMessageVariables(_ref3) {\n  var _assignee$email;\n\n  var conversation = _ref3.conversation,\n      contact = _ref3.contact;\n  var _conversation$meta = conversation.meta,\n      assignee = _conversation$meta.assignee,\n      sender = _conversation$meta.sender,\n      id = conversation.id,\n      _conversation$custom_ = conversation.custom_attributes,\n      conversationCustomAttributes = _conversation$custom_ === void 0 ? {} : _conversation$custom_;\n\n  var _ref4 = contact || {},\n      contactCustomAttributes = _ref4.custom_attributes;\n\n  var standardVariables = {\n    'contact.name': capitalizeName((sender == null ? void 0 : sender.name) || ''),\n    'contact.first_name': getFirstName({\n      user: sender\n    }),\n    'contact.last_name': getLastName({\n      user: sender\n    }),\n    'contact.email': sender == null ? void 0 : sender.email,\n    'contact.phone': sender == null ? void 0 : sender.phone_number,\n    'contact.id': sender == null ? void 0 : sender.id,\n    'conversation.id': id,\n    'agent.name': capitalizeName((assignee == null ? void 0 : assignee.name) || ''),\n    'agent.first_name': getFirstName({\n      user: assignee\n    }),\n    'agent.last_name': getLastName({\n      user: assignee\n    }),\n    'agent.email': (_assignee$email = assignee == null ? void 0 : assignee.email) != null ? _assignee$email : ''\n  };\n  var conversationCustomAttributeVariables = Object.entries(conversationCustomAttributes).reduce(function (acc, _ref5) {\n    var key = _ref5[0],\n        value = _ref5[1];\n    acc[\"conversation.custom_attribute.\" + key] = value;\n    return acc;\n  }, {});\n  var contactCustomAttributeVariables = Object.entries(contactCustomAttributes).reduce(function (acc, _ref6) {\n    var key = _ref6[0],\n        value = _ref6[1];\n    acc[\"contact.custom_attribute.\" + key] = value;\n    return acc;\n  }, {});\n\n  var variables = _extends({}, standardVariables, conversationCustomAttributeVariables, contactCustomAttributeVariables);\n\n  return variables;\n};\n\nvar replaceVariablesInMessage = function replaceVariablesInMessage(_ref7) {\n  var message = _ref7.message,\n      variables = _ref7.variables; // @ts-ignore\n\n  return message == null ? void 0 : message.replace(MESSAGE_VARIABLES_REGEX, function (_, replace) {\n    return variables[replace.trim()] ? variables[replace.trim().toLowerCase()] : '';\n  });\n};\n\nvar getUndefinedVariablesInMessage = function getUndefinedVariablesInMessage(_ref8) {\n  var message = _ref8.message,\n      variables = _ref8.variables;\n  var messageWithOutCodeBlocks = skipCodeBlocks(message);\n  var matches = messageWithOutCodeBlocks.match(MESSAGE_VARIABLES_REGEX);\n  if (!matches) return [];\n  return matches.map(function (match) {\n    return match.replace('{{', '').replace('}}', '').trim();\n  }).filter(function (variable) {\n    return variables[variable] === undefined;\n  });\n};\n/**\r\n * Creates a typing indicator utility.\r\n * @param onStartTyping Callback function to be called when typing starts\r\n * @param onStopTyping Callback function to be called when typing stops after delay\r\n * @param idleTime Delay for idle time in ms before considering typing stopped\r\n * @returns An object with start and stop methods for typing indicator\r\n */\n\n\nvar createTypingIndicator = function createTypingIndicator(onStartTyping, onStopTyping, idleTime) {\n  var timer = null;\n\n  var start = function start() {\n    if (!timer) {\n      onStartTyping();\n    }\n\n    reset();\n  };\n\n  var stop = function stop() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n      onStopTyping();\n    }\n  };\n\n  var reset = function reset() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = setTimeout(function () {\n      stop();\n    }, idleTime);\n  };\n\n  return {\n    start: start,\n    stop: stop\n  };\n};\n\nexport { clamp, convertSecondsToTimeUnit, createTypingIndicator, debounce, formatDate, formatTime, getContrastingTextColor, getMessageVariables, getQuantileIntervals, getUndefinedVariablesInMessage, parseBoolean, quantile, replaceVariablesInMessage, sortAsc, trimContent };","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex flex-1 overflow-auto\"},[_c('pre-chat-form',{attrs:{\"options\":_vm.preChatFormOptions},on:{\"submit\":_vm.onSubmit}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <FormulateForm\n    v-model=\"formValues\"\n    class=\"flex flex-col flex-1 p-6 overflow-y-auto\"\n    @submit=\"onSubmit\"\n  >\n    <div\n      v-if=\"shouldShowHeaderMessage\"\n      v-dompurify-html=\"formatMessage(headerMessage, false)\"\n      class=\"mb-4 text-sm leading-5 pre-chat-header-message\"\n      :class=\"$dm('text-black-800', 'dark:text-slate-50')\"\n    />\n    <FormulateInput\n      v-for=\"item in enabledPreChatFields\"\n      :key=\"item.name\"\n      :name=\"item.name\"\n      :type=\"item.type\"\n      :label=\"getLabel(item)\"\n      :placeholder=\"getPlaceHolder(item)\"\n      :validation=\"getValidation(item)\"\n      :options=\"getOptions(item)\"\n      :label-class=\"context => labelClass(context)\"\n      :input-class=\"context => inputClass(context)\"\n      :validation-messages=\"{\n        startsWithPlus: $t(\n          'PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR'\n        ),\n        isValidPhoneNumber: $t('PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR'),\n        email: $t('PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR'),\n        required: $t('PRE_CHAT_FORM.REQUIRED'),\n        matches: item.regex_cue\n          ? item.regex_cue\n          : $t('PRE_CHAT_FORM.REGEX_ERROR'),\n      }\"\n      :has-error-in-phone-input=\"hasErrorInPhoneInput\"\n    />\n    <FormulateInput\n      v-if=\"!hasActiveCampaign\"\n      name=\"message\"\n      type=\"textarea\"\n      :label-class=\"context => labelClass(context)\"\n      :input-class=\"context => inputClass(context)\"\n      :label=\"$t('PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL')\"\n      :placeholder=\"$t('PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER')\"\n      validation=\"required\"\n      :validation-messages=\"{\n        required: $t('PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR'),\n      }\"\n    />\n\n    <custom-button\n      class=\"mt-2 mb-5 font-medium\"\n      block\n      :bg-color=\"widgetColor\"\n      :text-color=\"textColor\"\n      :disabled=\"isCreating\"\n    >\n      <spinner v-if=\"isCreating\" class=\"p-0\" />\n      {{ $t('START_CONVERSATION') }}\n    </custom-button>\n  </FormulateForm>\n</template>\n\n<script>\nimport CustomButton from 'shared/components/Button.vue';\nimport Spinner from 'shared/components/Spinner.vue';\nimport { mapGetters } from 'vuex';\nimport { getContrastingTextColor } from '@chatwoot/utils';\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport routerMixin from 'widget/mixins/routerMixin';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nimport configMixin from 'widget/mixins/configMixin';\nimport customAttributeMixin from '../../../dashboard/mixins/customAttributeMixin';\n\nexport default {\n  components: {\n    CustomButton,\n    Spinner,\n  },\n  mixins: [\n    routerMixin,\n    darkModeMixin,\n    messageFormatterMixin,\n    configMixin,\n    customAttributeMixin,\n  ],\n  props: {\n    options: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      locale: this.$root.$i18n.locale,\n      hasErrorInPhoneInput: false,\n      message: '',\n      formValues: {},\n      labels: {\n        emailAddress: 'EMAIL_ADDRESS',\n        fullName: 'FULL_NAME',\n        phoneNumber: 'PHONE_NUMBER',\n      },\n    };\n  },\n  computed: {\n    ...mapGetters({\n      widgetColor: 'appConfig/getWidgetColor',\n      isCreating: 'conversation/getIsCreating',\n      activeCampaign: 'campaign/getActiveCampaign',\n      currentUser: 'contacts/getCurrentUser',\n    }),\n    textColor() {\n      return getContrastingTextColor(this.widgetColor);\n    },\n    hasActiveCampaign() {\n      return !isEmptyObject(this.activeCampaign);\n    },\n    shouldShowHeaderMessage() {\n      return this.hasActiveCampaign || this.preChatFormEnabled;\n    },\n    headerMessage() {\n      if (this.preChatFormEnabled) {\n        return this.options.preChatMessage;\n      }\n      if (this.hasActiveCampaign) {\n        return this.$t('PRE_CHAT_FORM.CAMPAIGN_HEADER');\n      }\n      return '';\n    },\n    preChatFields() {\n      return this.preChatFormEnabled ? this.options.preChatFields : [];\n    },\n    filteredPreChatFields() {\n      const isUserEmailAvailable = this.currentUser.has_email;\n      const isUserPhoneNumberAvailable = this.currentUser.has_phone_number;\n      const isUserIdentifierAvailable = !!this.currentUser.identifier;\n\n      const isUserNameAvailable = !!(\n        isUserIdentifierAvailable ||\n        isUserEmailAvailable ||\n        isUserPhoneNumberAvailable\n      );\n      return this.preChatFields.filter(field => {\n        if (isUserEmailAvailable && field.name === 'emailAddress') {\n          return false;\n        }\n        if (isUserPhoneNumberAvailable && field.name === 'phoneNumber') {\n          return false;\n        }\n        if (isUserNameAvailable && field.name === 'fullName') {\n          return false;\n        }\n        return true;\n      });\n    },\n    enabledPreChatFields() {\n      return this.filteredPreChatFields\n        .filter(field => field.enabled)\n        .map(field => ({\n          ...field,\n          type:\n            field.name === 'phoneNumber'\n              ? 'phoneInput'\n              : this.findFieldType(field.type),\n        }));\n    },\n    conversationCustomAttributes() {\n      let conversationAttributes = {};\n      this.enabledPreChatFields.forEach(field => {\n        if (field.field_type === 'conversation_attribute') {\n          conversationAttributes = {\n            ...conversationAttributes,\n            [field.name]: this.getValue(field),\n          };\n        }\n      });\n      return conversationAttributes;\n    },\n    contactCustomAttributes() {\n      let contactAttributes = {};\n      this.enabledPreChatFields.forEach(field => {\n        if (field.field_type === 'contact_attribute') {\n          contactAttributes = {\n            ...contactAttributes,\n            [field.name]: this.getValue(field),\n          };\n        }\n      });\n      return contactAttributes;\n    },\n    inputStyles() {\n      return `mt-1 border rounded w-full py-2 px-3 text-slate-700 outline-none`;\n    },\n    isInputDarkOrLightMode() {\n      return `${this.$dm('bg-white', 'dark:bg-slate-600')} ${this.$dm(\n        'text-slate-700',\n        'dark:text-slate-50'\n      )}`;\n    },\n    inputBorderColor() {\n      return `${this.$dm('border-black-200', 'dark:border-black-500')}`;\n    },\n  },\n  methods: {\n    labelClass(context) {\n      const { hasErrors } = context;\n      if (!hasErrors) {\n        return `text-xs font-medium ${this.$dm(\n          'text-black-800',\n          'dark:text-slate-50'\n        )}`;\n      }\n      return `text-xs font-medium ${this.$dm(\n        'text-red-400',\n        'dark:text-red-400'\n      )}`;\n    },\n    inputClass(context) {\n      const { hasErrors, classification, type } = context;\n      if (classification === 'box' && type === 'checkbox') {\n        return '';\n      }\n      if (type === 'phoneInput') {\n        this.hasErrorInPhoneInput = hasErrors;\n      }\n      if (!hasErrors) {\n        return `${this.inputStyles} hover:border-black-300 focus:border-black-300 ${this.isInputDarkOrLightMode} ${this.inputBorderColor}`;\n      }\n      return `${this.inputStyles} border-red-200 hover:border-red-300 focus:border-red-300 ${this.isInputDarkOrLightMode}`;\n    },\n    isContactFieldRequired(field) {\n      return this.preChatFields.find(option => option.name === field).required;\n    },\n    getLabel({ label }) {\n      return label;\n    },\n    getPlaceHolder({ placeholder }) {\n      return placeholder;\n    },\n    getValue({ name, type }) {\n      if (type === 'select') {\n        return this.enabledPreChatFields.find(option => option.name === name)\n          .values[this.formValues[name]];\n      }\n      return this.formValues[name] || null;\n    },\n    getValidation({ type, name, field_type, regex_pattern }) {\n      let regex = regex_pattern ? this.getRegexp(regex_pattern) : null;\n      const validations = {\n        emailAddress: 'email',\n        phoneNumber: ['startsWithPlus', 'isValidPhoneNumber'],\n        url: 'url',\n        date: 'date',\n        text: null,\n        select: null,\n        number: null,\n        checkbox: false,\n        contact_attribute: regex ? [['matches', regex]] : null,\n        conversation_attribute: regex ? [['matches', regex]] : null,\n      };\n      const validationKeys = Object.keys(validations);\n      const isRequired = this.isContactFieldRequired(name);\n      const validation = isRequired\n        ? ['bail', 'required']\n        : ['bail', 'optional'];\n\n      if (\n        validationKeys.includes(name) ||\n        validationKeys.includes(type) ||\n        validationKeys.includes(field_type)\n      ) {\n        const validationType =\n          validations[type] || validations[name] || validations[field_type];\n        return validationType ? validation.concat(validationType) : validation;\n      }\n\n      return [];\n    },\n    findFieldType(type) {\n      if (type === 'link') {\n        return 'url';\n      }\n      if (type === 'list') {\n        return 'select';\n      }\n\n      return type;\n    },\n    getOptions(item) {\n      if (item.type === 'select') {\n        let values = {};\n        item.values.forEach((value, index) => {\n          values = {\n            ...values,\n            [index]: value,\n          };\n        });\n        return values;\n      }\n      return null;\n    },\n    onSubmit() {\n      const { emailAddress, fullName, phoneNumber, message } = this.formValues;\n      this.$emit('submit', {\n        fullName,\n        phoneNumber,\n        emailAddress,\n        message,\n        activeCampaignId: this.activeCampaign.id,\n        conversationCustomAttributes: this.conversationCustomAttributes,\n        contactCustomAttributes: this.contactCustomAttributes,\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n::v-deep {\n  .wrapper[data-type='checkbox'] {\n    .formulate-input-wrapper {\n      display: flex;\n      align-items: center;\n      line-height: $space-normal;\n\n      label {\n        margin-left: 0.2rem;\n      }\n    }\n  }\n  @media (prefers-color-scheme: dark) {\n    .wrapper {\n      .formulate-input-element--date,\n      .formulate-input-element--checkbox {\n        input {\n          color-scheme: dark;\n        }\n      }\n    }\n  }\n  .wrapper[data-type='textarea'] {\n    .formulate-input-element--textarea {\n      textarea {\n        min-height: 8rem;\n      }\n    }\n  }\n  .pre-chat-header-message {\n    .link {\n      color: $color-woot;\n      text-decoration: underline;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=be741956&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&id=be741956&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be741956\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('FormulateForm',{staticClass:\"flex flex-col flex-1 p-6 overflow-y-auto\",on:{\"submit\":_vm.onSubmit},model:{value:(_vm.formValues),callback:function ($$v) {_vm.formValues=$$v},expression:\"formValues\"}},[(_vm.shouldShowHeaderMessage)?_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.headerMessage, false)),expression:\"formatMessage(headerMessage, false)\"}],staticClass:\"mb-4 text-sm leading-5 pre-chat-header-message\",class:_vm.$dm('text-black-800', 'dark:text-slate-50')}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.enabledPreChatFields),function(item){return _c('FormulateInput',{key:item.name,attrs:{\"name\":item.name,\"type\":item.type,\"label\":_vm.getLabel(item),\"placeholder\":_vm.getPlaceHolder(item),\"validation\":_vm.getValidation(item),\"options\":_vm.getOptions(item),\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"validation-messages\":{\n      startsWithPlus: _vm.$t(\n        'PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.DIAL_CODE_VALID_ERROR'\n      ),\n      isValidPhoneNumber: _vm.$t('PRE_CHAT_FORM.FIELDS.PHONE_NUMBER.VALID_ERROR'),\n      email: _vm.$t('PRE_CHAT_FORM.FIELDS.EMAIL_ADDRESS.VALID_ERROR'),\n      required: _vm.$t('PRE_CHAT_FORM.REQUIRED'),\n      matches: item.regex_cue\n        ? item.regex_cue\n        : _vm.$t('PRE_CHAT_FORM.REGEX_ERROR'),\n    },\"has-error-in-phone-input\":_vm.hasErrorInPhoneInput}})}),_vm._v(\" \"),(!_vm.hasActiveCampaign)?_c('FormulateInput',{attrs:{\"name\":\"message\",\"type\":\"textarea\",\"label-class\":context => _vm.labelClass(context),\"input-class\":context => _vm.inputClass(context),\"label\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.LABEL'),\"placeholder\":_vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.PLACEHOLDER'),\"validation\":\"required\",\"validation-messages\":{\n      required: _vm.$t('PRE_CHAT_FORM.FIELDS.MESSAGE.ERROR'),\n    }}}):_vm._e(),_vm._v(\" \"),_c('custom-button',{staticClass:\"mt-2 mb-5 font-medium\",attrs:{\"block\":\"\",\"bg-color\":_vm.widgetColor,\"text-color\":_vm.textColor,\"disabled\":_vm.isCreating}},[(_vm.isCreating)?_c('spinner',{staticClass:\"p-0\"}):_vm._e(),_vm._v(\"\\n    \"+_vm._s(_vm.$t('START_CONVERSATION'))+\"\\n  \")],1)],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreChatForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreChatForm.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"flex flex-1 overflow-auto\">\n    <pre-chat-form :options=\"preChatFormOptions\" @submit=\"onSubmit\" />\n  </div>\n</template>\n<script>\nimport PreChatForm from '../components/PreChat/Form.vue';\nimport configMixin from '../mixins/configMixin';\nimport routerMixin from '../mixins/routerMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport { ON_CONVERSATION_CREATED } from '../constants/widgetBusEvents';\n\nexport default {\n  components: {\n    PreChatForm,\n  },\n  mixins: [configMixin, routerMixin],\n  mounted() {\n    bus.$on(ON_CONVERSATION_CREATED, () => {\n      // Redirect to messages page after conversation is created\n      this.replaceRoute('messages');\n    });\n  },\n  methods: {\n    onSubmit({\n      fullName,\n      emailAddress,\n      message,\n      activeCampaignId,\n      phoneNumber,\n      contactCustomAttributes,\n      conversationCustomAttributes,\n    }) {\n      if (activeCampaignId) {\n        bus.$emit('execute-campaign', {\n          campaignId: activeCampaignId,\n          customAttributes: conversationCustomAttributes,\n        });\n        this.$store.dispatch('contacts/update', {\n          user: {\n            email: emailAddress,\n            name: fullName,\n            phone_number: phoneNumber,\n          },\n        });\n      } else {\n        this.$store.dispatch('conversation/createConversation', {\n          fullName: fullName,\n          emailAddress: emailAddress,\n          message: message,\n          phoneNumber: phoneNumber,\n          customAttributes: conversationCustomAttributes,\n        });\n      }\n      if (!isEmptyObject(contactCustomAttributes)) {\n        this.$store.dispatch(\n          'contacts/setCustomAttributes',\n          contactCustomAttributes\n        );\n      }\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./PreChatForm.vue?vue&type=template&id=a08096ee&\"\nimport script from \"./PreChatForm.vue?vue&type=script&lang=js&\"\nexport * from \"./PreChatForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}