{"version":3,"sources":["webpack:///./node_modules/date-fns/esm/isSameDay/index.js","webpack:///./node_modules/date-fns/esm/isToday/index.js","webpack:///./node_modules/date-fns/esm/isYesterday/index.js","webpack:///./node_modules/global/window.js","webpack:///./node_modules/video.js/dist/video.es.js","webpack:///./node_modules/@videojs/vhs-utils/es/byte-helpers.js","webpack:///./node_modules/@scmmishra/pico-search/dist/index.mjs","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./node_modules/core-js/modules/es.string.from-code-point.js","webpack:///./node_modules/@xmldom/xmldom/lib/conventions.js","webpack:///./node_modules/wavesurfer.js/dist/wavesurfer.js","webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/global/document.js","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/inheritsLoose.js","webpack:///./node_modules/@videojs/vhs-utils/es/resolve-url.js","webpack:///./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js","webpack:///./node_modules/@xmldom/xmldom/lib/dom.js","webpack:///./node_modules/@videojs/vhs-utils/es/id3-helpers.js","webpack:///./node_modules/opus-recorder/dist/recorder.min.js","webpack:///./node_modules/opus-recorder/dist/encoderWorker.min.js","webpack:///./node_modules/opus-recorder/dist/waveWorker.min.js","webpack:///./node_modules/wavesurfer.js/dist/plugin/wavesurfer.microphone.js","webpack:///./node_modules/videojs-wavesurfer/dist/videojs.wavesurfer.js","webpack:///./node_modules/videojs-record/dist/videojs.record.js","webpack:///./node_modules/recordrtc/RecordRTC.js","webpack:///./node_modules/videojs-record/dist/plugins/videojs.record.opus-recorder.js","webpack:///./node_modules/vue-letter/dist/Letter.esm.js","webpack:///./node_modules/date-fns/esm/parseISO/index.js","webpack:///./node_modules/date-fns/esm/startOfWeek/index.js","webpack:///./node_modules/date-fns/esm/addWeeks/index.js","webpack:///./node_modules/date-fns/esm/isMonday/index.js","webpack:///./node_modules/date-fns/esm/startOfMonth/index.js","webpack:///./node_modules/date-fns/esm/setSeconds/index.js","webpack:///./node_modules/date-fns/esm/setMinutes/index.js","webpack:///./node_modules/date-fns/esm/setHours/index.js","webpack:///./node_modules/keycode/index.js","webpack:///./node_modules/safe-json-parse/tuple.js","webpack:///./node_modules/@videojs/xhr/lib/index.js","webpack:///./node_modules/is-function/index.js","webpack:///./node_modules/@videojs/xhr/lib/http-handler.js","webpack:///./node_modules/videojs-vtt.js/lib/browser-index.js","webpack:///./node_modules/videojs-vtt.js/lib/vtt.js","webpack:///./node_modules/videojs-vtt.js/lib/vttcue.js","webpack:///./node_modules/videojs-vtt.js/lib/vttregion.js","webpack:///./node_modules/@babel/runtime/helpers/construct.js","webpack:///./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/url-toolkit/src/url-toolkit.js","webpack:///./node_modules/@videojs/vhs-utils/es/codecs.js","webpack:///./node_modules/@videojs/vhs-utils/es/media-types.js","webpack:///./node_modules/@xmldom/xmldom/lib/index.js","webpack:///./node_modules/@xmldom/xmldom/lib/dom-parser.js","webpack:///./node_modules/@xmldom/xmldom/lib/entities.js","webpack:///./node_modules/@xmldom/xmldom/lib/sax.js","webpack:///./node_modules/mux.js/lib/tools/parse-sidx.js","webpack:///./node_modules/mux.js/lib/utils/numbers.js","webpack:///./node_modules/mux.js/lib/utils/clock.js","webpack:///./node_modules/lettersanitizer/lib/index.js","webpack:///./node_modules/lettersanitizer/lib/constants.js","webpack:///./node_modules/@videojs/vhs-utils/es/mp4-helpers.js","webpack:///./node_modules/@videojs/vhs-utils/es/opus-helpers.js","webpack:///./node_modules/@videojs/vhs-utils/es/ebml-helpers.js","webpack:///./node_modules/@videojs/vhs-utils/es/nal-helpers.js","webpack:///./node_modules/@videojs/vhs-utils/es/containers.js","webpack:///./node_modules/date-fns/esm/addMonths/index.js","webpack:///./node_modules/date-fns/esm/add/index.js","webpack:///./node_modules/@videojs/vhs-utils/es/stream.js","webpack:///./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack:///./node_modules/mpd-parser/dist/mpd-parser.es.js","webpack:///./node_modules/@videojs/vhs-utils/es/media-groups.js","webpack:///./node_modules/date-fns/esm/addSeconds/index.js"],"names":["isSameDay","dirtyDateLeft","dirtyDateRight","arguments","dateLeftStartOfDay","dateRightStartOfDay","getTime","isToday","dirtyDate","Date","now","isYesterday","win","window","global","self","module","exports","_typeof","obj","Symbol","iterator","constructor","prototype","browserApi","version$5","hooks_","hooks","type","fn","concat","removeHook","index","indexOf","slice","splice","FullscreenApi","prefixed","apiMap","specApi","i","length","_i","history","log$1","createLogger$1","name","logByType","level","log","_len","args","Array","_key","lvl","levels","lvlRegExp","RegExp","unshift","toUpperCase","push","console","info","test","isArray","LogByTypeFactory","createLogger","subname","all","off","debug","warn","error","DEFAULT","hasOwnProperty","Error","filter","fname","historyItem","clear","disable","enable","_len2","_key2","_len3","_key3","_len4","_key4","toString","Object","keys","object","isObject","each","forEach","key","assign","target","sources","apply","source","value","isPlain","call","computedStyle","el","prop","getComputedStyle","computedStyleValue","e","getPropertyValue","match","USER_AGENT","navigator","userAgent","webkitVersionMap","exec","appleWebkitVersion","parseFloat","pop","IS_IPOD","IOS_VERSION","IS_ANDROID","ANDROID_VERSION","major","minor","IS_NATIVE_ANDROID","IS_FIREFOX","IS_EDGE","IS_CHROME","CHROME_VERSION","IE_VERSION","result","version","IS_SAFARI","IS_WINDOWS","TOUCH_ENABLED","Boolean","isReal","maxTouchPoints","DocumentTouch","document","IS_IPAD","IS_IPHONE","IS_IOS","IS_ANY_SAFARI","browser","freeze","__proto__","isNonBlankString","str","trim","throwIfWhitespace","isEl","nodeType","isInFrame","parent","x","createQuerier","method","selector","context","querySelector","ctx","createEl","tagName","properties","attributes","content","createElement","getOwnPropertyNames","propName","val","setAttribute","textContent","attrName","appendContent","text","innerText","prependTo","child","firstChild","insertBefore","appendChild","hasClass","element","classToCheck","classList","contains","className","addClass","classToAdd","add","removeClass","classToRemove","remove","split","c","join","toggleClass","classToToggle","predicate","has","setAttributes","attrValue","removeAttribute","getAttributes","tag","knownBooleans","attrs","attrVal","getAttribute","attribute","blockTextSelection","body","focus","onselectstart","unblockTextSelection","getBoundingClientRect","parentNode","rect","k","undefined","height","width","findPosition","offsetParent","left","top","offsetWidth","offsetHeight","fullscreenElement","offsetLeft","offsetTop","getPointerPosition","event","translated","y","item","nodeName","toLowerCase","transform","values","map","Number","_values","position","boxTarget","box","boxW","boxH","offsetY","offsetX","changedTouches","pageX","pageY","Math","max","min","isTextNode","emptyEl","removeChild","normalizeContent","createTextNode","node","insertContent","isSingleLeftClick","button","buttons","videojs$1","$","$$","Dom","_windowLoaded","autoSetup","options","vids","getElementsByTagName","audios","divs","mediaEls","mediaEl","autoSetupTimeout","player","wait","vjs","setTimeout","setWindowLoaded","removeEventListener","readyState","addEventListener","FakeWeakMap","createStyleElement","style","setTextContent","styleSheet","cssText","_guid","newGUID","WeakMap","this","vdata","floor","performance","data","_proto","set","access","get","_supportsPassive","DomData","_cleanUpEvents","elem","handlers","dispatcher","detachEvent","disabled","_handleMultipleEvents","types","callback","fixEvent","fixed_","returnTrue","returnFalse","isPropagationStopped","isImmediatePropagationStopped","old","preventDefault","srcElement","relatedTarget","fromElement","toElement","returnValue","defaultPrevented","stopPropagation","cancelBubble","stopImmediatePropagation","clientX","doc","documentElement","scrollLeft","clientLeft","clientY","scrollTop","clientTop","which","charCode","keyCode","passiveEvents","on","guid","hash","handlersCopy","m","n","opts","defineProperty","supportsPassive","passive","attachEvent","removeType","t","trigger","elemData","ownerDocument","bubbles","targetData","one","func","any","EVENT_MAP","Events","UPDATE_REFRESH_INTERVAL","bind","uid","bound","throttle","last","EventTarget$2","allowedEvents_","ael","dispatchEvent","queueTrigger","_this","Map","oldTimeout","clearTimeout","timeout","size","objName","name_","isEvented","eventBusEl_","every","isValidEventType","validateTarget","fnName","validateEventType","validateListener","listener","normalizeListenArgs","isTargetingSelf","shift","listen","EventedMixin","_normalizeListenArgs","removeListenerOnDispose","removeRemoverOnTargetDispose","_this2","_normalizeListenArgs2","wrapper","largs","_this3","_normalizeListenArgs3","_len5","_key5","targetOrType","typeOrListener","evented","eventBusKey","eventedCallbacks","el_","StatefulMixin","state","setState","stateUpdates","changes","from","to","stateful","defaultState","handleStateChanged","string","replace","w","toTitleCase$1","mergeOptions$3","MapSham","map_","thisArg","Map$1","SetSham","set_","Set","Component$1","Component","ready","play","player_","isDisposed_","parentComponent_","options_","id_","id","handleLanguagechange","children_","childIndex_","childNameIndex_","setTimeoutIds_","setIntervalIds_","rafIds_","namedRafs_","clearingTimersOnDispose_","initChildren","reportTouchActivity","enableTouchActivity","dispose","readyQueue_","isDisposed","localize","tokens","defaultValue","code","language","languages","primaryCode","primaryLang","localizedString","ret","contentEl","contentEl_","children","getChildById","getChild","getDescendant","names","reduce","acc","currentChild","addChild","component","componentName","componentClassName","componentClass","ComponentClass","getComponent","refNode","childFound","compEl","workingChildren","parentOptions","Tech","some","wchild","isTech","playerOptions","newChild","buildCSSClass","sync","isReady_","triggerReady","readyQueue","show","hide","lockShowing","unlockShowing","num","skipListeners","dimension","dimensions","widthOrHeight","pxIndex","parseInt","currentDimension","computedWidthOrHeight","isNaN","rule","currentDimensions","currentWidth","currentHeight","blur","handleKeyDown","isEventKey","handleKeyPress","emitTapEvents","couldBeTap","touchStart","firstTouch","touches","xdiff","ydiff","sqrt","noTap","reportUserActivity","touchHolding","report","clearInterval","setInterval","touchEnd","timeoutId","clearTimersOnDispose_","interval","intervalId","requestAnimationFrame","supportsRaf_","requestNamedAnimationFrame","_this4","cancelNamedAnimationFrame","cancelAnimationFrame","_this5","_ref","idName","cancelName","registerComponent","ComponentToRegister","reason","isComp","isPrototypeOf","components_","Player","players","playerNames","pname","getRange","valueIndex","ranges","rangeIndex","maxIndex","rangeCheck","createTimeRangesObj","timeRangesObj","start","end","createTimeRanges","bufferedPercent","buffered","duration","bufferedDuration","MediaError","message","defaultMessages","status","errorTypes","errNum","isPromise","then","silencePromise","trackToJson_","track","cues","cue","startTime","endTime","textTrackConverter","tech","trackEls","trackObjs","trackEl","json","src","textTracks","addedTrack","addRemoteTextTrack","addCue","ModalDialog","_Component","handleKeyDown_","close_","close","opened_","hasBeenOpened_","hasBeenFilled_","closeable","uncloseable","MODAL_CLASS_NAME","role","descEl_","description","tabIndex","label","previouslyActiveEl_","desc","open","fillAlways","fill","wasPlaying_","paused","pauseOnOpen","pause","hadControls_","controls","conditionalFocus_","opened","conditionalBlur_","temporary","closeable_","temp","controlText","fillWith","parentEl","nextSiblingEl","nextSibling","empty","closeButton","content_","activeEl","activeElement","playerEl","focusIndex","focusableEls","focusableEls_","shiftKey","allChildren","querySelectorAll","HTMLAnchorElement","HTMLAreaElement","hasAttribute","HTMLInputElement","HTMLSelectElement","HTMLTextAreaElement","HTMLButtonElement","HTMLIFrameElement","HTMLObjectElement","HTMLEmbedElement","TrackList","_EventTarget","tracks","tracks_","addTrack","labelchange_","removeTrack","rtrack","l","getTrackById","change","addtrack","removetrack","labelchange","disableOthers$1","list","enabled","AudioTrackList","_TrackList","changing_","enabledChange_","disableOthers","selected","VideoTrackList","selectedChange_","TextTrackList","queueChange_","triggerSelectedlanguagechange","triggerSelectedlanguagechange_","kind","selectedlanguagechange_","HtmlTrackElementList","trackElements","trackElements_","addTrackElement_","trackElement","getTrackElementByTrack_","trackElement_","removeTrackElement_","TextTrackCueList","setCues_","length_","oldLength","cues_","defineProp","getCueById","VideoTrackKind","alternative","captions","main","sign","subtitles","commentary","AudioTrackKind","TextTrackKind","descriptions","chapters","metadata","TextTrackMode","hidden","showing","Track","trackProps","_loop","newLabel","parseUrl","url","props","a","href","details","protocol","host","location","getAbsoluteURL","getFileExtension","path","pathParts","isCrossOrigin","winLoc","urlInfo","Url","parseCues","srcContent","parser","WebVTT","Parser","vttjs","StringDecoder","errors","oncue","onparsingerror","onflush","parse","groupCollapsed","groupEnd","flush","loadTrack","uri","crossOrigin","cors","withCredentials","tech_","err","response","responseBody","loaded_","TextTrack","_Track","settings","srclang","mode","default_","activeCues_","preload_","preloadTextTracks","activeCues","changed","timeupdateHandler","defineProperties","newMode","ct","currentTime","active","originalCue","VTTCue","originalCue_","removeCue","_removeCue","cuechange","AudioTrack","newEnabled","VideoTrack","newSelected","HTMLTrackElement","load","NONE","LOADING","LOADED","ERROR","NORMAL","audio","ListClass","TrackClass","capitalName","video","getterName","privateName","REMOTE","remoteText","remoteTextEl","ALL","onDurationChange_","onDurationChange","trackProgress_","trackProgress","trackCurrentTime_","trackCurrentTime","stopTrackingCurrentTime_","stopTrackingCurrentTime","disposeSourceHandler_","disposeSourceHandler","hasStarted_","featuresProgressEvents","manualProgressOn","featuresTimeupdateEvents","manualTimeUpdatesOn","nativeCaptions","nativeTextTracks","featuresNativeTextTracks","emulateTextTracks","autoRemoteTextTracks_","initTrackListeners","nativeControlsForTouch","triggerSourceset","manualProgress","manualProgressOff","stopTrackingProgress","progressInterval","numBufferedPercent","bufferedPercent_","duration_","manualTimeUpdates","manualTimeUpdatesOff","currentTimeInterval","manuallyTriggered","clearTracks","removeRemoteTextTrack","cleanupAutoTextTracks","reset","setCrossOrigin","error_","played","setScrubbing","scrubbing","setCurrentTime","trackListChanges","addWebVttScript_","script","onload","onerror","_this6","remoteTracks","remoteTextTracks","handleAddTrack","handleRemoveTrack","updateDisplay","textTracksChanges","addTextTrack","createTrackHelper","createRemoteTextTrack","manualCleanup","_this7","htmlTrackElement","remoteTextTrackEls","getVideoPlaybackQuality","requestPictureInPicture","PromiseClass","Promise","reject","disablePictureInPicture","setDisablePictureInPicture","setPoster","playsinline","setPlaysinline","overrideNativeAudioTracks","overrideNativeVideoTracks","canPlayType","canPlaySource","srcObj","registerTech","techs_","defaultTechOrder_","getTech","videojs","featuresVolumeControl","featuresMuteControl","featuresFullscreenResize","featuresPlaybackRate","featuresSourceset","withSourceHandlers","_Tech","registerSourceHandler","handler","sourceHandlers","can","selectSourceHandler","canHandleSource","sh","originalFn","sourceHandler_","setSource","nativeSourceHandler","currentSource_","handleSource","middlewares","middlewareInstances","TERMINATOR","next","setSourceHelper","mediate","middleware","arg","callMethod","middlewareValue","middlewareIterator","terminated","mws","mw","executeRight","allowedGetters","muted","seekable","volume","ended","allowedSetters","setMuted","setVolume","allowedMediators","lastRun","_middleware","mwFactory","mwrest","_mws$i","mwf","mwi","getOrCreateFactory","_src","MimetypesKind","opus","ogv","mp4","mov","m4v","mkv","m4a","mp3","aac","caf","flac","oga","wav","m3u8","jpg","jpeg","gif","png","svg","webp","getMimetype","ext","filterSource","newsrc","srcobj","fixSource","mimetype","MediaLoader","j","techOrder","techName","isSupported","loadTech_","ClickableComponent","handleMouseOver_","handleMouseOver","handleMouseOut_","handleMouseOut","handleClick_","handleClick","tabIndex_","createControlTextEl","controlTextEl_","controlText_","localizedText","nonIconControl","noUITitleAttributes","enabled_","clickHandler","PosterImage","_ClickableComponent","update","update_","poster","setSrc","backgroundImage","sourceIsEncrypted","usingPlugin","eme","sessions","fontMap","monospace","sansSerif","serif","monospaceSansSerif","monospaceSerif","proportionalSansSerif","proportionalSerif","casual","smallcaps","constructColor","color","opacity","hex","tryUpdateStyle","TextTrackDisplay","updateDisplayHandler","toggleDisplay","preselectTrack","firstDesc","firstCaptions","preferredTrack","modes","trackList","userPref","cache_","selectedLanguage","clearDisplay","processCues","allowMultipleShowingTracks","showingTracks","updateForTrack","descriptionsTrack","captionsSubtitlesTrack","_track","updateDisplayState","overrides","textTrackSettings","getValues","cueDiv","displayState","textOpacity","backgroundColor","backgroundOpacity","windowColor","windowOpacity","edgeStyle","textShadow","fontPercent","fontSize","fontFamily","fontVariant","_i2","_track2","_j","cueEl","LoadingSpinner","isAudio","playerType","dir","Button","BigPlayButton","_Button","mouseused_","handleMouseDown","playPromise","cb","playToggle","playFocus","CloseButton","PlayToggle","replay","handlePlay","handlePause","handleEnded","handleSeeked","defaultImplementation","seconds","guide","s","h","gm","gh","Infinity","implementation","formatTime","TimeDisplay","updateContent","updateTextNode_","span","labelText_","textNode_","time","formattedTime_","oldNode","replaceChild","CurrentTimeDisplay","_TimeDisplay","getCache","DurationDisplay","TimeDivider","div","RemainingTimeDisplay","displayNegative","remainingTimeDisplay","remainingTime","LiveDisplay","updateShowing","SeekToLive","updateLiveEdgeStatus","liveTracker","updateLiveEdgeStatusHandler_","textEl_","atLiveEdge","seekToLiveEdge","clamp","number","Slider","handleMouseDown_","handleMouseUp_","handleMouseUp","handleMouseMove_","handleMouseMove","bar","barName","vertical","playerEvent","progress","getProgress","progress_","sizeKey","toFixed","getPercent","calculateDistance","stepBack","stepForward","bool","vertical_","percentify","LoadProgressBar","partEls_","loadedText","separator","percentageEl_","isLive","seekableEnd","bufferedEnd","percent","percent_","part","dataset","TimeTooltip","seekBarRect","seekBarPoint","tooltipRect","playerRect","seekBarPointPx","spaceLeftOfPoint","spaceRightOfPoint","right","pullTooltipBy","round","write","updateTime","liveWindow","secondsBehind","PlayProgressBar","timeTooltip","MouseTimeDisplay","SeekBar","_Slider","setEventHandlers_","updateInterval","enableIntervalHandler_","enableInterval_","disableIntervalHandler_","disableInterval_","toggleVisibility_","visibilityState","getCurrentTime_","liveCurrentTime","currentTime_","userSeek_","nextSeekedFromUser","seekableStart","videoWasPlaying","mouseDown","newTime","distance","mouseTimeDisplay","handleAction","gotoFraction","codes","STEP_SECONDS","ProgressControl","throttledHandleMouseSeek","handleMouseSeek","handleMouseUpHandler_","handleMouseDownHandler_","seekBar","playProgressBar","seekBarEl","removeListenersAddedOnMousedownAndTouchstart","PictureInPictureToggle","handlePictureInPictureChange","handlePictureInPictureEnabledChange","pictureInPictureEnabled","isInPictureInPicture","exitPictureInPicture","FullscreenToggle","handleFullscreenChange","fsApi_","fullscreenEnabled","isFullscreen","exitFullscreen","requestFullscreen","VolumeLevel","VolumeLevelTooltip","rangeBarRect","rangeBarPoint","volumeBarPointPx","updateVolume","MouseVolumeLevelDisplay","bottom","VolumeBar","updateLastVolume_","updateARIAAttributes","mouseVolumeLevelDisplay","volumeBarEl","volumeBarRect","volumeBarPoint","checkMuted","ariaValue","volumeAsPercentage_","volumeBeforeDrag","lastVolume_","VolumeControl","volumeBar","checkVolumeSupport","throttledHandleMouseMove","orientationClass","MuteToggle","checkMuteSupport","vol","lastVolume","volumeToSet","updateIcon_","updateControlText_","VolumePanel","inline","volumeControl","handleKeyPressHandler_","volumePanelState_","muteToggle","handleVolumeControlKeyUp","sliderActive_","sliderInactive_","Menu","menuButton_","menuButton","focusedChild_","boundHandleBlur_","handleBlur","boundHandleTapClick_","handleTapClick","addEventListenerForItem","removeEventListenerForItem","addItem","childComponent","contentElType","append","btn","buttonPressed_","unpressButton","childComponents","foundComponent","stepChild","MenuButton","buttonClass","handleMenuKeyUp_","handleMenuKeyUp","menu","handleMouseLeave","handleSubmenuKeyDown","createMenu","items","hideThreshold_","title","titleEl","titleComponent","createItems","buildWrapperCSSClass","menuButtonClass","pressButton","handleSubmenuKeyPress","TrackButton","_MenuButton","updateHandler","MenuKeys","MenuItem","selectable","isSelected_","multiSelectable","_selected","TextTrackMenuItem","_MenuItem","kinds","changeHandler","handleTracksChange","selectedLanguageChangeHandler","handleSelectedLanguageChange","onchange","Event","createEvent","initEvent","referenceTrack","shouldBeSelected","OffTextTrackMenuItem","_TextTrackMenuItem","allHidden","TextTrackButton","_TrackButton","TrackMenuItem","label_","kinds_","kind_","ChaptersTrackMenuItem","ChaptersButton","_TextTrackButton","track_","setTrack","findChaptersTrack","updateHandler_","remoteTextTrackEl","_remoteTextTrackEl","getMenuCaption","mi","DescriptionsButton","SubtitlesButton","CaptionSettingsMenuItem","CaptionsButton","SubsCapsMenuItem","parentSpan","SubsCapsButton","language_","AudioTrackMenuItem","audioTracks","featuresNativeAudioTracks","AudioTrackButton","PlaybackRateMenuItem","rate","playbackRate","PlaybackRateMenuButton","labelElId_","updateVisibility","updateLabel","handlePlaybackRateschange","labelEl_","rates","playbackRates","currentRate","newIndex","playbackRateSupported","Spacer","CustomControlSpacer","_Spacer","ControlBar","ErrorDisplay","_ModalDialog","LOCAL_STORAGE_KEY$1","COLOR_BLACK","COLOR_BLUE","COLOR_CYAN","COLOR_GREEN","COLOR_MAGENTA","COLOR_RED","COLOR_WHITE","COLOR_YELLOW","OPACITY_OPAQUE","OPACITY_SEMI","OPACITY_TRANS","selectConfigs","v","parseOptionValue","TextTrackSettings","endDialog","setDefaults","persistTextTrackSettings","saveSettings","config","restoreSettings","createElSelect_","legendId","selectLabelledbyIds","o","optionId","createElFgColor_","createElBgColor_","createElWinColor_","createElColors_","innerHTML","createElFont_","createElControls_","defaultsDescription","initial","accum","selectedIndex","setValues","setSelectedOption","JSON","localStorage","getItem","setItem","stringify","removeItem","ttDisplay","controlBar","subsCapsBtn","subsCapsButton","ccBtn","captionsButton","ResizeManager","RESIZE_OBSERVER_AVAILABLE","ResizeObserver","loadListener_","resizeObserver_","debouncedHandler_","immediate","debounced","_later","cancel","debounce","resizeHandler","observe","contentWindow","unloadListener_","unobserve","disconnect","resizeObserver","defaults","trackingThreshold","liveTolerance","LiveTracker","handleVisibilityChange_","handleVisibilityChange","trackLiveHandler_","trackLive_","handlePlay_","handleFirstTimeupdate_","handleFirstTimeupdate","handleSeeked_","seekToLiveEdge_","reset_","handleDurationchange","toggleTracking","stopTracking","startTracking","deltaTime","lastTime_","pastSeekEnd_","pastSeekEnd","isBehind","seekedBehindLive_","abs","timeupdateSeen_","behindLiveEdge_","liveui","isTracking","hasStarted","trackingInterval_","timeDiff","nextSeekedFromUser_","lastSeekEnd_","seekableEnds","sort","seekableStarts","behindLiveEdge","sourcesetLoad","srcUrls","innerHTMLDescriptorPolyfill","cloneNode","dummy","docFrag","createDocumentFragment","childNodes","Element","getDescriptor","priority","descriptor","getOwnPropertyDescriptor","enumerable","configurable","firstSourceWatch","resetSourceWatch_","innerDescriptor","HTMLMediaElement","getInnerHTMLDescriptor","appendWrapper","appendFn","retval","srcDescriptorPolyfill","setupSourceset","resetSourceset_","srcDescriptor","getSrcDescriptor","oldSetAttribute","oldLoad","currentSrc","defineLazyProperty","getValue","setter","writable","Html5","crossoriginTracks","initNetworkState_","handleLateInit_","enableSourceset","setupSourcesetHandling_","isScrubbing_","hasChildNodes","nodes","nodesLength","removeNodes","proxyNativeTracks_","restoreMetadataTracksInIOSNativePlayer_","setControls","proxyWebkitFullscreen_","disposeMediaElement","metadataTracksPreFullscreenState","takeMetadataTrackSnapshot","storedMode","restoreTrackMode","storedTrack","overrideNative_","override","lowerCaseType","eventName","proxyNativeTracksForType_","elTracks","techTracks","listeners","currentTarget","removeOldTracks","removeTracks","found","playerElIngest","movingMediaElementInDOM","clone","techId","playerId","preload","settingsAttrs","attr","networkState","loadstartFired","setLoadstartFired","triggerLoadstart","eventsToTrigger","isScrubbing","fastSeek","checkProgress","NaN","endFn","beginFn","webkitPresentationMode","nativeIOSFullscreen","supportsFullScreen","webkitEnterFullScreen","enterFullScreen","HAVE_METADATA","exitFullScreen","webkitDisplayingFullscreen","webkitExitFullScreen","resetMediaElement","videoPlaybackQuality","webkitDroppedFrameCount","webkitDecodedFrameCount","droppedVideoFrames","totalVideoFrames","creationTime","timing","navigationStart","TEST_VID","canControlVolume","canControl","canMuteVolume","canControlPlaybackRate","canOverrideAttributes","noop","supportsNativeTextTracks","supportsNativeVideoTracks","videoTracks","supportsNativeAudioTracks","patchCanPlayType","unpatchCanPlayType","r","TECH_EVENTS_RETRIGGER","TECH_EVENTS_QUEUE","canplay","canplaythrough","playing","seeked","BREAKPOINT_ORDER","BREAKPOINT_CLASSES","charAt","substring","DEFAULT_BREAKPOINTS","tiny","xsmall","small","medium","large","xlarge","huge","getTagSettings","closest","boundDocumentFullscreenChange_","documentFullscreenChange_","boundFullWindowOnEscKey_","fullWindowOnEscKey","boundUpdateStyleEl_","updateStyleEl_","boundApplyInitTime_","applyInitTime_","boundUpdateCurrentBreakpoint_","updateCurrentBreakpoint_","boundHandleTechClick_","handleTechClick_","boundHandleTechDoubleClick_","handleTechDoubleClick_","boundHandleTechTouchStart_","handleTechTouchStart_","boundHandleTechTouchMove_","handleTechTouchMove_","boundHandleTechTouchEnd_","handleTechTouchEnd_","boundHandleTechTap_","handleTechTap_","isFullscreen_","isPosterFromTech_","queuedCallbacks_","userActive_","debugEnabled_","tagAttributes","languagesToLower","languages_","resetCache_","poster_","controls_","changingSrc_","playCallbacks_","playTerminatedQueue_","autoplay","plugins","scrubbing_","fullscreenchange","fluid_","playerOptionsCopy","middleware_","flexNotSupported_","majorVersion","userActive","listenForUserActivity_","handleStageClick_","breakpoints","responsive","styleEl_","playerElIngest_","clearCacheForPlayer","divEmbed","tabindex","VIDEOJS_NO_DYNAMIC_STYLE","defaultsStyleEl","head","fill_","fluid","aspectRatio","crossorigin","links","linkEl","techGet_","techCall_","_dimension","privDimension","parsedVal","ratio","aspectRatio_","idClass","ratioParts","videoWidth","videoHeight","ratioMultiplier","width_","height_","_width","_height","techEl","unloadTech_","titleTechName","camelTechName","techName_","normalizeAutoplay","techOptions","loop","techCanOverridePoster","TechClass","handleTechReady_","textTracksJson_","eventObj","seeking","handleTechLoadStart_","handleTechSourceset_","handleTechWaiting_","handleTechEnded_","handleTechSeeking_","handleTechPlay_","handleTechFirstPlay_","handleTechPause_","handleTechDurationChange_","handleTechFullscreenChange_","handleTechFullscreenError_","handleTechEnterPictureInPicture_","handleTechLeavePictureInPicture_","handleTechError_","handleTechPosterChange_","handleTechTextData_","handleTechRateChange_","usingNativeControls","addTechControlsListeners_","safety","removeTechControlsListeners_","manualAutoplay_","promise","resolveMuted","previouslyMuted","restoreMuted","mutedPromise","updateSourceCaches_","matchingSources","findMimetype","sourceElSources","sourceEls","matchingSourceEls","sourceObj","updateSourceCaches","playerSrc","currentSource","eventSrc","lastSource_","techSrc","techGet","request","lastPlaybackRate","queued","_this8","timeWhenWaiting","timeUpdateListener","handleTechCanPlay_","handleTechCanPlayThrough_","handleTechPlaying_","handleTechSeeked_","starttime","userActions","click","doubleClick","userWasActive","cancelable","toggleFullscreenClass_","targetPlayer","isFs","matches","fullscreen","msMatchesSelector","_this9","togglePictureInPictureClass_","initTime","inactivityTimeout","defaultPlaybackRate","media","reduceRight","_this10","resolve","play_","_this11","isSrcReady","waitToPlay_","runPlayTerminatedQueue_","runPlayCallbacks_","queue","q","callbacks","percentAsDecimal","_muted","defaultMuted","_defaultMuted","isFS","oldValue","fullscreenOptions","offHandler","errorHandler","requestFullscreenHelper_","fsOptions","_this12","preferFullWindow","enterFullWindow","exitFullscreenHelper_","_this13","exitFullWindow","isFullWindow","docOrigOverflow","overflow","isPiP","isInPictureInPicture_","hotkeys","isContentEditable","excludeElement","handleHotkeys","_hotkeys$fullscreenKe","fullscreenKey","keydownEvent","_hotkeys$muteKey","muteKey","_hotkeys$playPauseKey","playPauseKey","FSToggle","selectSource","_this14","techs","findFirstPassingTechSourcePair","outerArray","innerArray","tester","outerChoice","innerChoice","finder","_ref2","sourceOrder","b","handleSrc_","isRetry","_this15","resetRetryOnError_","middlewareSource","src_","notSupportedMessage","setTech","retryOnError","retry","stopListeningForErrors","str1","str2","_this16","sourceTech","_this17","doReset_","resetControlBarUI_","resetProgressBar_","resetPlaybackRate_","resetVolumeBar_","_this$controlBar","durationDisplay","currentSources","currentType","techAutoplay","newPoster","usingNativeControls_","_this18","hookFunction","newErr","suppressNotSupportedError","triggerSuppressedError","errorDisplay","userActivity_","mouseInProgress","lastMoveX","lastMoveY","handleActivity","handleMouseUpAndMouseLeave","screenX","screenY","isAudio_","String","toJSON","createModal","_this19","modal","currentBreakpoint","candidateBreakpoint","breakpoints_","breakpoint_","removeCurrentBreakpoint_","currentBreakpointClass","_breakpoints","responsive_","loadMedia","_this20","_this$cache_$media","artwork","tt","getMedia","baseOptions","tagOptions","dataSetup","_safeParseTuple","childName","previousLogLevel_","newRates","html5","userLanguage","navigationUI","BASE_PLUGIN_NAME","pluginStorage","pluginExists","getPlugin","markPluginAsActive","triggerSetupEvent","before","createPluginFactory","PluginSubClass","plugin","instance","getEventHash","Plugin","VERSION","isBasic","p","registerPlugin","basicPluginWrapper","createBasicPlugin","deregisterPlugin","getPlugins","getPluginVersion","hasPlugin","normalizeId","getPlayer","TypeError","defaultView","PlayerComponent","hook","hookOnce","original","getPlayers","nId","_tag","_player","getAllPlayers","comp","use","writeable","extend","superClass","subClassMethods","subClass","methods","super_","mergeOptions","addLanguage","_mergeOptions","createTimeRange","setFormatTime","customImplementation","resetFormatTime","EventTarget","xhr","dom","resolveUrl","resolveManifestRedirect","handleManifestRedirect","req","responseURL","logger","TIME_FUDGE_FACTOR","SAFE_TIME_DELTA","filterRanges","timeRanges","results","findRange","findNextRange","printableRange","range","strArr","timeRangesToArray","timeRangesList","lastBufferedEnd","timeAheadOf","segmentDurationWithParts","playlist","segment","parts","preloadHints","partTargetDuration","getPartsAndSegments","segments","si","pi","segmentIndex","partIndex","getLastParts","lastSegment","getKnownPartCount","preloadSegment","partCount","count","hint","liveEdgeDelay","master","endList","suggestedPresentationDelay","hasParts","serverControl","partHoldBack","holdBack","targetDuration","intervalDuration","endSequence","expired","mediaSequence","backward","precise","backwardDuration","forward","forwardDuration","totalDuration","sumDurations","defaultDuration","durationList","startIndex","endIndex","durations","_ref3","playlistEnd","useSafeLiveEnd","liveEdgePadding","lastSegmentEndTime","isBlacklisted","excludeUntil","isIncompatible","isEnabled","blacklisted","isLowestEnabledRendition","playlists","currentBandwidth","BANDWIDTH","MAX_VALUE","playlistMatch","resolvedUri","someAudioVariant","AUDIO","mediaGroups","groupName","isAudioOnly","variant","CODECS","_ret","Playlist","getMediaInfoForTime","_ref4","startingSegmentIndex","startingPartIndex","experimentalExactManifestTimings","partsAndSegments","partAndSegment","_partAndSegment","_i3","_i4","_partAndSegment2","isDisabled","isAes","estimateSegmentRequestTime","segmentDuration","bandwidth","bytesReceived","createPlaylistID","forEachMediaGroup","mediaType","groupKey","labelKey","mediaProperties","setupMediaPlaylist","playlistErrors_","addPropertiesToMaster","phonyUri","audioOnlyMaster","groupId","setupMediaPlaylists","resolveMediaGroupUris","mergeOptions$2","EventTarget$1","updateSegment","skipped","resolveSegmentUris","baseUri","getAllSegments","isPlaylistUnchanged","updateMaster$1","newMedia","unchangedCheck","oldMedia","mergedPlaylist","skip","skippedSegments","offset","oldSegments","newSegments","currentMap","oldSegment","newSegment","updateSegments","refreshDelay","lastPart","lastDuration","PlaylistLoader","vhs","logger_","_options","_options$withCredenti","_options$handleManife","handleManifestRedirects","vhs_","vhsOptions","customTagParsers","customTagMappers","experimentalLLHLS","handleMediaupdatetimeout_","parameters","canBlockReload","nextMSN","nextPart","_HLS_part","_HLS_msn","canSkipUntil","_HLS_skip","canSkipDateranges","parsedUri","URL","searchParams","addLLHLSQueryDirectives","playlistRequestError","haveMetadata","playlistString","responseText","startingState","parseManifest_","onwarn","oninfo","manifestString","_ref$customTagParsers","_ref$customTagMappers","customParser","addParser","mapper","addTagMapper","manifest","parseManifest","playlistObject","lastRequest","pendingMedia_","media_","updateMediaUpdateTimeout_","stopRequest","mediaUpdateTimeout","finalRenditionTimeout","oldRequest","onreadystatechange","abort","shouldDelay","delay","mediaChange","masterPlaylistRef","started","setupInitialPlaylist","srcUri","masterForMedia","videojsXHR","mergeOptions$1","callbackWrapper","reqResponse","responseType","responseTime","roundTripTime","requestTime","byteLength","headers","responseHeaders","timedout","aborted","statusCode","xhrFactory","XhrFunction","beforeRequest","Vhs","newOptions","originalAbort","segmentXhrHeaders","byterange","Range","BigInt","textRange","formatHexString","formatAsciiString","fromCharCode","createTransferableMessage","transferable","ArrayBuffer","isView","bytes","buffer","byteOffset","initSegmentId","initSegment","segmentKeyId","hexDump","step","utils","tagDump","textRanges","getProgramTime","_ref$time","matchedSegment","segmentEnd","videoTimingInfo","transmuxedPresentationEnd","estimatedStart","transmuxedPresentationStart","findSegmentForPlayerTime","seekTime","programTimeObject","mediaSeconds","programTime","playerTime","dateTimeObject","transmuxerPrependedSeconds","offsetFromSegmentStart","playerTimeToProgramTime","programDateTime","toISOString","seekToProgramTime","_ref2$retryCount","retryCount","seekTo","_ref2$pauseAfterSeek","pauseAfterSeek","verifyProgramDateTimeTags","lastSegmentStart","lastSegmentDuration","findSegmentForProgramTime","mediaOffset","comparisonTimeStamp","segmentDateTime","segmentTimeEpoch","getOffsetFromTimestamp","seekToTime","callbackOnCompleted","dashPlaylistUnchanged","sidx","aSegment","bSegment","aByterange","bByterange","compareSidxEntry","oldSidxMapping","newSidxMapping","currentSidxInfo","savedSidxInfo","sidxInfo","DashPlaylistLoader","srcUrlOrPlaylist","masterPlaylistLoader","masterPlaylistLoader_","isMaster_","refreshXml_","refreshMedia_","loadedPlaylists_","srcUrl","sidxMapping_","childPlaylist_","requestErrored_","addSidxSegments_","sidxKey","fin","sidxMapping","subarray","id3Offset","finished","endRequestAndCallback","_bytes","progressListener","newPart","beforeSend","overrideMimeType","total","loaded","containerRequest","container","internal","blacklistDuration","_playlist$sidx$bytera","mediaRequest_","minimumUpdatePeriodTimeout_","createMupOnMedia_","hasPendingRequest","sidxChanged","isFinalRendition","updateMinimumUpdatePeriodTimeout_","requestMaster_","masterChanged","haveMaster_","masterXml_","date","masterLoaded_","handleMaster_","syncClientServerClock_","done","utcTiming","clientOffset_","serverTime","masterXml","clientOffset","previousManifest","oldMaster","newMaster","manifestUri","noChanges","minimumUpdatePeriod","timelineStarts","playlistUpdate","group","_playlistUpdate","updateMaster","locations","mpl","mup","createMUPTimeout_","mediaGroupSidx","mediaID","mediaChanged","createMediaUpdateTimeout","Config","GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","BACK_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","INITIAL_BANDWIDTH","BANDWIDTH_VARIANCE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BUFFER_HIGH_WATER_LINE","browserWorkerPolyFill","workerObj","factory","objectUrl","createObjectURL","Blob","blob","BlobBuilder","getBlob","worker","Worker","objURL","terminate","revokeObjectURL","getWorkerString","workerCode$1","Stream","init","pipe","destination","flushSource","partialFlush","endTimeline","dinf","esds","ftyp","mfhd","minf","moof","moov","mvex","mvhd","trak","tkhd","mdia","mdhd","hdlr","sdtp","stbl","stsd","traf","trex","trun$1","MAJOR_BRAND","MINOR_VERSION","AVC1_BRAND","VIDEO_HDLR","AUDIO_HDLR","HDLR_TYPES","VMHD","SMHD","DREF","STCO","STSC","STSZ","STTS","videoSample","audioSample","audioTrun","videoTrun","trunHeader","stream","MAX_UINT32$1","pow","numbers","getUint64","uint8","dv","DataView","getBigUint64","MAX_SAFE_INTEGER","getUint32","MAX_UINT32","avc1","avcC","btrt","dref","mdat","mp4a","pasp","smhd","stco","stsc","stsz","stts","styp","tfdt","tfhd","trun","vmhd","Uint8Array","charCodeAt","payload","setUint32","audioobjecttype","samplingfrequencyindex","channelcount","samplerate","sequenceNumber","trackFragments","boxes","flags","samples","dependsOn","isDependedOn","hasRedundancy","avc1Box","sps","pps","sequenceParameterSets","pictureParameterSets","profileIdc","profileCompatibility","levelIdc","sarRatio","hSpacing","vSpacing","samplesize","trackFragmentHeader","trackFragmentDecodeTime","trackFragmentRun","sampleDependencyTable","upperWordBaseMediaDecodeTime","lowerWordBaseMediaDecodeTime","baseMediaDecodeTime","durationPresent","sizePresent","flagsPresent","compositionTimeOffset","bytesOffest","header","sample","isLeading","paddingValue","isNonSyncSample","degradationPriority","silence","secondsToVideoTs","secondsToAudioTs","videoTsToSeconds","audioTsToSeconds","audioTsToVideoTs","videoTsToAudioTs","metadataTsToSeconds","mp4Generator","fileType","movie","sampleForFrame","frame","dataOffset","pts","dts","keyFrame","frameUtils","nalUnits","currentNal","currentFrame","frames","nalCount","nalUnitType","currentGop","gops","baseDataOffset","nalsByteLength","numberOfNals","view","highPrefix","lowPrefix","zeroFill","silence_1","coneOfSilence","metaTable","arr","ONE_SECOND_IN_TS$4","timestamp","sampleRate","timelineStartPts","keepOriginalTimestamps","clock","audioFrameUtils","audioAppendStartTs","videoBaseMediaDecodeTime","baseMediaDecodeTimeTs","frameDuration","silentFrame","firstFrame","audioGapDuration","audioFillFrameCount","audioFillDuration","ceil","adtsFrames","earliestAllowedDts","minSegmentDts","minSegmentPts","array","sum","sumFrameByteLengths","ONE_SECOND_IN_TS$3","trackDecodeInfo","maxSegmentDts","maxSegmentPts","timelineStartInfo","captionPacketParser","payloadType","payloadSize","sei","userData","ccData","newLength","newData","emulationPreventionBytesPositions","sourceIndex","CaptionStream$1","CaptionStream","parse708captions_","parse708captions","captionPackets_","ccStreams_","Cea608Stream","cc708Stream_","Cea708Stream","captionServices","cc","newCaptionPackets","escapedRBSP","latestDts_","ignoreNextEqualDts_","numSameDts_","flushCCStreams","flushType","flushStream","idx","presortIndex","packet","dispatchCea608Packet","dispatchCea708Packet","activeCea608Channel_","ccStream","setsTextOrXDSActive","setsChannel1Active","setsChannel2Active","CHARACTER_TRANSLATION_708","within708TextBlock","Cea708Window","windowNum","clearText","pendingNewLine","winAttr","penAttr","penLoc","penColor","visible","rowLock","columnLock","relativePositioning","anchorVertical","anchorHorizontal","anchorPoint","rowCount","virtualRowCount","columnCount","windowStyle","penStyle","getText","rows","rowIdx","newLine","beforeRowOverflow","isEmpty","addText","backspace","row","substr","Cea708Service","serviceNum","encoding","currentWindow","windows","createTextDecoder","startPts","setCurrentWindow","TextDecoder","textDecoder_","serviceProps","captionServiceEncodings","serviceName","serviceEncodings","current708Packet","services","new708Packet","add708Bytes","push708Packet","ptsVals","byte0","byte1","packet708","packetData","blockSize","seq","sizeCode","pushServiceBlock","service","initService","handleText","multiByteCharacter","extendedCommands","defineWindow","clearWindows","deleteWindows","displayWindows","hideWindows","toggleWindows","setWindowAttributes","setPenAttributes","setPenColor","setPenLocation","isExtended","getPts","byteIndex","flushDisplayed","_char","charCodeArray","newCode","isMultiByte","extended","currentByte","nextByte","decode","firstByte","secondByte","fillOpacity","fillRed","fillGreen","fillBlue","borderType","borderRed","borderGreen","borderBlue","wordWrap","printDirection","scrollDirection","justify","effectSpeed","effectDirection","displayEffect","displayedText","winId","endPts","pushCaption","textTag","penSize","italics","underline","edgeType","fontStyle","fgOpacity","fgRed","fgGreen","fgBlue","bgOpacity","bgRed","bgGreen","bgBlue","edgeRed","edgeGreen","edgeBlue","column","CHARACTER_TRANSLATION","getCharFromCode","ROWS","createDisplayBuffer","BOTTOM_ROW","field","dataChannel","field_","dataChannel_","setConstants","swap","char0","char1","lastControlCode_","PADDING_","RESUME_CAPTION_LOADING_","mode_","END_OF_CAPTION_","clearFormatting","displayed_","nonDisplayed_","startPts_","ROLL_UP_2_ROWS_","rollUpRows_","setRollUp","ROLL_UP_3_ROWS_","ROLL_UP_4_ROWS_","CARRIAGE_RETURN_","shiftRowsUp_","BACKSPACE_","row_","ERASE_DISPLAYED_MEMORY_","ERASE_NON_DISPLAYED_MEMORY_","RESUME_DIRECT_CAPTIONING_","isSpecialCharacter","column_","isExtCharacter","isMidRowCode","addFormatting","isOffsetControlCode","isPAC","formatting_","isColorPAC","isNormalChar","topRow_","BASE_","EXT_","CONTROL_","OFFSET_","_char2","newBaseRow","format","reverse","popOn","baseRow","rollUp","paintOn","captionStream","streamTypes","H264_STREAM_TYPE","ADTS_STREAM_TYPE","METADATA_STREAM_TYPE","TYPE_SHARED","handleRollover$1","reference","direction","TimestampRolloverStream$1","TimestampRolloverStream","lastDTS","referenceDTS","type_","discontinuity","_MetadataStream","timestampRolloverStream","percentEncode$1","parseUtf8","decodeURIComponent","parseSyncSafeInteger$1","tagParsers","TXXX","WXXX","PRIV","owner","unescape","privateData","tagSize","bufferSize","dispatchType","chunk","frameStart","frameSize","dataAlignmentIndicator","d","timeStamp","_TransportPacketStream","_TransportParseStream","_ElementaryStream","metadataStream","MP2T_PACKET_LENGTH$1","bytesInBuffer","everything","parsePsi","parsePat","parsePmt","packetsWaitingForPmt","programMapTable","psi","payloadUnitStartIndicator","pat","section_number","last_section_number","pmtPid","pmt","tableEnd","streamType","pid","processPes_","STREAM_TYPES","h264","adts","segmentHadPmt","timedMetadata","forceFlush","packetFlushable","fragment","trackId","pes","ptsDtsFlags","startPrefix","packetLength","codec","flushStreams_","m2ts","PAT_PID","MP2T_PACKET_LENGTH","TransportPacketStream","TransportParseStream","ElementaryStream","MetadataStream","_AdtsStream","m2ts_1","ONE_SECOND_IN_TS$2","ADTS_SAMPLING_FREQUENCIES$1","handlePartialSegments","frameNum","skipWarn_","frameLength","protectionSkipBytes","oldBuffer","sampleCount","adtsFrameDuration","_H264Stream","_NalByteStream","PROFILES_WITH_OPTIONAL_SPS_DATA","expGolomb","workingData","workingBytesAvailable","workingWord","workingBitsAvailable","bitsAvailable","loadWord","workingBytes","availableBytes","skipBits","skipBytes","readBits","bits","valu","skipLeadingZeros","leadingZeroCount","skipUnsignedExpGolomb","skipExpGolomb","readUnsignedExpGolomb","clz","readExpGolomb","readBoolean","readUnsignedByte","syncPoint","swapBuffer","len","currentPts","currentDts","discardEmulationPreventionBytes","readSequenceParameterSet","skipScalingList","nalByteStream","nalUnitTypeCode","expGolombDecoder","lastScale","nextScale","chromaFormatIdc","picOrderCntType","numRefFramesInPicOrderCntCycle","picWidthInMbsMinus1","picHeightInMapUnitsMinus1","frameMbsOnlyFlag","scalingListCount","frameCropLeftOffset","frameCropRightOffset","frameCropTopOffset","frameCropBottomOffset","_AacStream","H264Stream","NalByteStream","ADTS_SAMPLING_FREQUENCIES","parseId3TagSize","returnSize","getId3Offset","parseSyncSafeInteger","isLikelyAacData","parseAdtsSize","lowThree","middle","parseType","parseSampleRate","parseAacTimestamp","percentEncode","setTimestamp","bytesLeft","tempLength","_VideoSegmentStream","_AudioSegmentStream","_Transmuxer","_CoalesceStream","audioProperties","videoProperties","ONE_SECOND_IN_TS$1","retriggerForStream","addPipelineLogRetriggers","transmuxer","pipeline","arrayEquals","generateSegmentTimingInfo","startDts","endDts","prependedContentDuration","firstSequenceNumber","setEarliestDts","earliestDts","setVideoBaseMediaDecodeTime","setAudioAppendStart","videoClockCyclesOfSilencePrefixed","gopsToAlignWith","minPTS","gopCache_","nalUnit","gopForFusion","firstGop","lastGop","resetStream_","getGopForFusion_","alignedGops","alignGopsAtEnd","alignGopsAtEnd_","alignGopsAtStart_","gop","dtsDistance","nearestGopObj","currentGopObj","nearestDistance","alignIndex","gopIndex","align","alignEndIndex","matchFound","trimIndex","alignGopsWith","newGopsToAlignWith","numberOfTracks","remux","remuxTracks","pendingTracks","videoTrack","pendingBoxes","pendingCaptions","pendingMetadata","pendingBytes","emittedTracks","output","audioTrack","caption","id3","captionStreams","cueTime","setRemux","hasFlushed","transmuxPipeline_","setupAacPipeline","aacStream","audioTimestampRolloverStream","timedMetadataTimestampRolloverStream","adtsStream","coalesceStream","headOfPipeline","audioSegmentStream","getLogTrigger_","hasAudio","hasVideo","setupTsPipeline","packetStream","parseStream","elementaryStream","h264Stream","videoSegmentStream","id3Frame","setBaseMediaDecodeTime","isAac","resetCaptions","getTracks","getTimescaleFromMediaHeader","Transmuxer","VideoSegmentStream","AudioSegmentStream","AUDIO_PROPERTIES","VIDEO_PROPERTIES","bin","parseType_1","toUnsigned$2","findBox_1","findBox","subresults","toUnsigned$1","getUint64$1","parseTfdt","parseSampleFlags_1","parseTrun","dataOffsetPresent","firstSampleFlagsPresent","sampleDurationPresent","sampleSizePresent","sampleFlagsPresent","sampleCompositionTimeOffsetPresent","getInt32","parseTfhd","baseDataOffsetPresent","sampleDescriptionIndexPresent","defaultSampleDurationPresent","defaultSampleSizePresent","defaultSampleFlagsPresent","durationIsEmpty","defaultBaseIsMoof","sampleDescriptionIndex","defaultSampleDuration","defaultSampleSize","defaultSampleFlags","baseDataOffsetIsMoof","commonjsGlobal","globalThis","window_1","mapToSample","approximateOffset","parseCaptionNals","videoTrackId","trafs","mdats","captionNals","mdatTrafPairs","matchingTraf","pair","headerInfo","truns","allSamples","parseSamples","avcStream","seiNal","lastMatchedSample","avcView","logs","seiNals","matchingSample","findSeiNals","captionParser","segmentCache","timescale","parsedCaptions","parsingPartial","isInitialized","isPartial","isNewInit","videoTrackIds","timescales","parsedData","cachedSegment","trackNals","parseEmbeddedCaptions","pushNals","nals","nal","clearParsedCaptions","resetCaptionStream","clearAllCaptions","toUnsigned","toHexString","lowestTime","baseTime","scale","isFinite","traks","tkhdVersion","getUint8","sampleDescriptions","codecConfig","codecBox","probe$2","parsePid","parsePayloadUnitStartIndicator","parseAdaptionField","parseNalUnitType","probe$1","pusi","payloadOffset","parsePesType","parsePesTime","videoPacketContainsKeyFrame","frameBuffer","frameI","frameSyncPoint","foundKeyFrame","handleRollover","probe","ts","ONE_SECOND_IN_TS","SYNC_BYTE","parseAudioPes_","pesType","parsed","endLoop","table","parseVideoPes_","firstKeyFrame","inspectTs_","parsePsi_","tsInspector","baseTimestamp","audioCount","audioTimescale","inspectAac_","segmentInfo","audioBaseTimestamp","dtsTime","ptsTime","videoBaseTimestamp","adjustTimestamp_","MessageHandlers","initArray","typedArray","postMessage","action","gopInfo","timingInfo","videoSegmentTimingInfo","presentation","audioSegmentTimingInfo","trackInfo","audioTimingInfo","wireTransmuxerEvents","pushMp4Captions","trackIds","probeMp4StartTime","probeMp4Tracks","probeTs","baseStartTime","tsStartTime","timeInfo","videoStart","audioStart","clearAllMp4Captions","clearParsedMp4Captions","setTimestampOffset","timestampOffset","appendStart","onmessage","messageHandlers","TransmuxWorker","processTransmux","audioAppendStart","onData","onTrackInfo","onAudioTimingInfo","onVideoTimingInfo","onVideoSegmentTimingInfo","onAudioSegmentTimingInfo","onId3","onCaptions","onDone","onEndedTimeline","onTransmuxerLog","isEndOfTimeline","transmuxedData","waitForEndedTimelineEvent","currentTransmux","_event$data$segment","videoFrameDtsTime","videoFramePtsTime","handleData_","handleGopInfo_","handleDone_","dequeue","transmuxQueue","processAction","enqueueAction","transmux","segmentTransmuxer","term","workerCallback","endAction","listenForEndEvent","isArrayBuffer","transfers","REQUEST_ERRORS","abortAll","activeXhrs","handleErrors","handleKeyResponse","objects","finishProcessingFn","errorObj","Uint32Array","parseInitSegment","_callback","handleSegmentResponse","newBytes","stringToArrayBuffer","lastReachedChar","stats","getRequestStats","encryptedBytes","transmuxAndNotify","trackInfoFn","timingInfoFn","videoSegmentTimingInfoFn","audioSegmentTimingInfoFn","id3Fn","captionsFn","endedTimelineFn","dataFn","doneFn","fmp4Tracks","isMuxed","audioStartFn","audioEndFn","videoStartFn","videoEndFn","probeResult","id3Frames","handleSegmentBytes","_ref5","bytesAsUint8Array","isFmp4","audioCodec","videoCodec","finishLoading","_ref6","decrypt","_ref7","keyBytes","decryptionWorker","decryptionHandler","decrypted","encrypted","iv","waitForCompletion","_ref9","didError","segmentFinish","_ref8","requestId","decryptedBytes","decryptSegment","endOfAllRequests","parseError","handleProgress","_ref11","progressFn","progressEvent","getProgressStats","firstBytesReceivedAt","mediaSegmentRequest","_ref12","xhrOptions","abortFn","keyXhr","mapKeyXhr","initSegmentOptions","initSegmentRequestCallback","handleInitSegmentResponse","initSegmentXhr","segmentRequestOptions","segmentXhr","loadendState","activeXhr","_ref10","calledAbortFn","handleLoadEnd","logFn$1","isMaat","mediaAttributes","unwrapCodecList","codecList","codecs","codecCount","codecObj","codecsForPlaylist","codecInfo","getCodecs","audioGroup","defaultCodecs","logFn","representationToString","representation","safeGetComputedStyle","property","stableSort","sortFn","newArray","cmp","comparePlaylistBandwidth","leftBandwidth","rightBandwidth","simpleSelector","playerBandwidth","playerWidth","playerHeight","limitRenditionByPlayerDimensions","masterPlaylistController","getAudioTrackPlaylists_","audioOnly","sortedPlaylistReps","RESOLUTION","enabledPlaylistReps","rep","bandwidthPlaylistReps","highestRemainingBandwidthRep","bandwidthBestRep","_chosenRep","haveResolution","resolutionBestRepList","resolutionPlusOneList","resolutionPlusOneSmallest","resolutionPlusOneRep","leastPixelDiffRep","resolutionBestRep","experimentalLeastPixelDiffSelector","leastPixelDiffList","pixelDiff","chosenRep","_type","lastBandwidthSelector","pixelRatio","useDevicePixelRatio","devicePixelRatio","systemBandwidth","masterPlaylistController_","addMetadata","inbandTextTracks","metadataArray","videoDuration","Cue","WebKitDataCue","metadataTrack","metadataTrack_","deprecateOldCue","cuesArray","cuesGroupedByStartTime","timeSlot","sortedStartTimes","cueGroup","nextTime","removeCuesFromTrack","finite","MIN_SEGMENT_DURATION_TO_SAVE_STATS","segmentInfoString","startOfSegment","_segmentInfo$playlist","_segmentInfo$playlist2","mediaIndex","timeline","segmentLen","selection","isSyncRequest","independent","hasPartIndex","zeroBasedPartCount","timingInfoPropertyForMedia","shouldWaitForTimelineChange","timelineChangeController","currentTimeline","segmentTimeline","loaderType","audioDisabled","lastMainTimelineChange","lastTimelineChange","pendingAudioTimelineChange","pendingTimelineChange","segmentTooLong","maxDuration","getTroublesomeSegmentDurationMessage","sourceType","timingInfos","typeTimingInfo","isSegmentWayTooLong","isSegmentSlightlyTooLong","segmentTooLongMessage","severity","SegmentLoader","_videojs$EventTarget","mediaSource","throughput","roundTrip","resetStats_","hasPlayed_","hasPlayed","seekable_","seeking_","mediaSource_","loaderType_","currentMediaInfo_","startingMediaInfo_","segmentMetadataTrack_","segmentMetadataTrack","goalBufferLength_","goalBufferLength","sourceType_","sourceUpdater_","sourceUpdater","inbandTextTracks_","state_","timelineChangeController_","shouldSaveSegmentTimingInfo_","captionServices_","checkBufferTimeout_","currentTimeline_","pendingSegment_","xhrOptions_","pendingSegments_","audioDisabled_","isPendingTimestampOffset_","gopBuffer_","timeMapping_","safeAppend_","appendInitSegment_","playlistOfLastInitSegment_","callQueue_","loadQueue_","metadataQueue_","waitingOnRemove_","quotaExceededErrorRetryTimeout_","activeInitSegmentId_","initSegments_","cacheEncryptionKeys_","cacheEncryptionKeys","keyCache_","decrypter_","decrypter","syncController_","syncController","syncPoint_","transmuxer_","createTransmuxer_","triggerSyncInfoUpdate_","isEndOfStream_","ended_","fetchAtBuffer_","newState","hasEnoughInfoToAppend_","processCallQueue_","hasEnoughInfoToLoad_","processLoadQueue_","mediaBytesTransferred","mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaSecondsLoaded","mediaAppends","abort_","setAudio","removeAudio","monitorBuffer_","abortRequests","clearPendingTimelineChange","checkForAbort_","_error","endOfStream","buffered_","getMediaInfo_","videoBuffered","audioBuffered","initSegmentForMap","storedMap","segmentKey","storedKey","couldBeginLoading_","playlist_","init_","resetEverything","newPlaylist","oldPlaylist","syncInfo","setDateTimeMappingForStart","oldId","resyncLoader","resetLoader","mediaSequenceDiff","saveExpiredSegmentInfo","force","removesRemaining","removeFinished","mapping","updatedBuffer","removeGopBuffer","removeVideo","monitorBufferTick_","fillBuffer_","updating","chooseNextRequest_","loadSegment_","appendedLastSegment","appendedLastPart","bufferedTime","preloaded","haveEnoughBuffer","getSyncPoint","targetTime","timelineSegments","getSyncSegmentCandidate","_Playlist$getMediaInf","_partIndex","nextSegment","lastSegmentLastPart","generateSegmentInfo_","forceTimestampOffset","random","overrideCheck","timestampOffsetForSegment_","audioBufferedEnd","audioTimestampOffset","currentTimePts","gopsSafeToAlignWith","videoTimestampOffset","earlyAbortWhenNeeded_","measuredBandwidth","requestTimeRemaining","timeUntilRebuffer$1","timeUntilRebuffer","switchCandidate","compatiblePlaylists","enabledPlaylists","rebufferingEstimates","numRequests","rebufferingImpact","noRebufferingPlaylists","estimate","minRebufferMaxBandwidthSelector","timeSavedBySwitching","minimumTimeSaving","handleAbort_","handleProgress_","simpleSegment","handleTrackInfo_","checkForIllegalMediaSwitch","akeys","bkeys","shallowEqual","handleTimingInfo_","timeType","timingInfoProperty","handleCaptions_","captionData","hasAppendedData_","captionTracks","captionTrack","trackName","_captionTracks$trackN","instreamId","def","captionService","createCaptionsTrackIfNotExists","captionArray","addCaptionData","handleId3_","inBandMetadataTrackDispatchType","createMetadataTrackIfNotExists","processMetadataQueue_","callQueue","fun","loadQueue","getCurrentMediaInfo_","setTimeMapping_","updateMediaSecondsLoaded_","firstVideoFrameTimeForData","useVideoTimingInfo","trueSegmentStart_","currentStart","currentVideoTimestampOffset","updateAppendInitSegmentStatus","updateSourceBufferTimestampOffset_","updateTimingInfoEnd_","saveSegmentTimingInfo","shouldSaveTimelineMapping","appendData_","changedTimestampOffset","getInitSegmentAndUpdateState_","handleQuotaExceededError_","audioBufferStart","audioBufferEnd","videoBufferStart","videoBufferEnd","appendToSourceBuffer_","timeToRemoveUntil","MIN_BACK_BUFFER","handleAppendError_","segmentObj","tempBuffer","appendBuffer","handleSegmentTimingInfo_","segmentTimingInfo","transmuxedDecodeStart","transmuxedDecodeEnd","trimBackBuffer_","updateTransmuxerAndRequestSegment_","shouldUpdateTransmuxerTimestampOffset_","createSimplifiedSegmentObj_","isEndOfStream","isWalkingForward","isDiscontinuity","segmentRequestFinished_","removeToTime","trimTime","maxTrimTime","safeBackBufferTrimTime","previousSegment","saveTransferStats_","saveBandwidthRelatedStats_","handleTimeout_","updateGopBuffer","waitForAppendsToComplete_","timelineMapping","mappingForTimeline","waitForVideo","waitForAudio","waitingOnAppends","checkAppendsDone_","videoQueueCallback","audioQueueCallback","handleAppendsDone_","illegalMediaSwitchError","startingMedia","illegalMediaSwitch","didChange","prioritizedTimingInfo","segmentDurationMessage","recordThroughput_","addSegmentMetadataCue_","badSegmentGuess","badPartGuess","segmentProcessingTime","segmentProcessingThroughput","custom","dateTimeString","resolution","Vhs$1","toTitleCase","bufferTypes","_updating","sourceBuffer","queuePending","shiftQueue","queueIndex","queueEntry","nextQueueIndexOfType","cleanupBuffer","titleType","inSourceBuffers","sourceBuffers","actions","onError","_duration","mime","addSourceBuffer","removeSourceBuffer","changeType","pushQueue","onUpdateend","SourceUpdater","sourceopenListener_","audioTimestampOffset_","videoTimestampOffset_","delayedAudioAppendQueue_","videoAppendQueued_","onVideoUpdateEnd_","onAudioUpdateEnd_","onVideoError_","videoError_","onAudioError_","audioError_","createdSourceBuffers_","initializedEme_","triggeredReady_","initializedEme","hasCreatedSourceBuffers","hasInitializedAnyEme","createSourceBuffers","addOrChangeSourceBuffers","canRemoveSourceBuffer","MediaSource","canChangeType","SourceBuffer","processedAppend_","videoBuffer","que","audioBuffer","bufferA","bufferB","arity","extents","bufferIntersection","setDuration","uint8ToUtf8","uintArray","escape","VTT_LINE_TERMINATORS","_char3","VTTSegmentLoader","_SegmentLoader","subtitlesTrack_","featuresNativeTextTracks_","combinedByteLength","combinedSegment","timestampOffsetForTimeline","skipEmptySegments_","stopForError","loadHandler","requested","parseVTTCues_","updateTimeMapping_","timelines","duplicates","occurrences","dupe","removeDuplicateCuesFromTrack","decoder","decodeBytesToString","timestampmap","MPEGTS","LOCAL","ontimestampmap","mapData","segmentData","mappingObj","diff","firstStart","lastStart","findAdCue","mediaTime","adStartTime","adEndTime","syncPointStrategies","run","timelineToDatetimeMappings","lastDistance","datetimeMapping","z","discontinuityStarts","discontinuitySequence","discontinuitySync","discontinuities","SyncController","syncPoints","runStrategies_","selectSyncPoint_","getExpiredTime","strategy","bestSyncPoint","bestDistance","bestStrategy","newDistance","lastRemovedSegment","firstSegment","playlistTimestamp","didCalculateSegmentTimeMapping","calculateSegmentTimeMapping_","saveDiscontinuitySyncInfo_","dateTime","accuracy","mediaIndexDiff","TimelineChangeController","pendingTimelineChanges_","lastTimelineChanges_","workerCode","createCommonjsModule","basedir","require","base","commonjsRequire","createClass","_defineProperties","Constructor","protoProps","staticProps","__esModule","setPrototypeOf","_setPrototypeOf","inheritsLoose","create","_length","aesTables","AES","tmp","xInv","x2","x4","tEnc","tDec","tables","encTable","decTable","sbox","sboxInv","th","precompute","_tables","keyLen","rcon","encKey","decKey","encrypted0","encrypted1","encrypted2","encrypted3","out","a2","b2","c2","nInnerRounds","kIndex","table0","table1","table2","table3","AsyncStream","_Stream","jobs","timeout_","processJob_","job","ntoh","word","Decrypter","initVector","STEP","encrypted32","Int32Array","asyncStream_","decryptChunk_","padded","init0","init1","init2","init3","wordIx","decipher","decrypted32","audioTrackKind_","characteristics","stopLoaders","segmentLoader","activePlaylistLoader","startLoaders","playlistLoader","segmentLoaders","mediaTypes","blacklistCurrentPlaylist","activeTrack","activeGroup","defaultTrack","onTrackChanged","SUBTITLES","setupListeners","requestOptions","initialize","_settings$mediaTypes$","groups","variantLabel","isMasterPlaylist","_settings$mediaTypes$2","forced","autoselect","_settings$mediaTypes$3","newProps","groupMatch","setupMediaGroups","_settings$segmentLoad3","audioSegmentLoader","mainSegmentLoader","variants","groupKeys","groupPropertyList","onGroupChanged","_settings$segmentLoad","getActiveGroup","previousActiveLoader","lastGroup","lastGroup_","lastTrack_","onGroupChanging","_settings$segmentLoad2","lastTrack","mpc","selectPlaylist","fastQualityChange_","activeTrack_","onAudioTrackChanged","loaderStats","sumLoaderStat","stat","audioSegmentLoader_","mainSegmentLoader_","MasterPlaylistController","externVhs","useCueTags","enableLowInitialPlaylist","experimentalBufferBasedABR","maxPlaylistRetries","useCueTags_","cueTagsTrack_","requestOptions_","pauseLoading","mediaTypes_","handleDurationChange_","handleSourceOpen_","handleSourceEnded_","segmentLoaderSettings","setupMasterPlaylistLoaderListeners_","subtitleSegmentLoader_","setupSegmentLoaderListeners_","startABRTimer_","stopABRTimer_","triggeredFmp4Usage","loadOnPlay_","timeToLoadedData__","mainAppendsToLoadedData__","audioAppendsToLoadedData__","timeToLoadedDataStart","mainAppendsToLoadedData_","audioAppendsToLoadedData_","appendsToLoadedData_","timeToLoadedData_","checkABR_","nextPlaylist","shouldSwitchToMedia_","switchMedia_","cause","newId","abrTimer_","defaultPlaylists","defaultGroup","requestTimeout","triggerPresenceUsage_","setupFirstPlay","updatedPlaylist","selectedMedia","excludeUnsupportedVariants_","selectInitialPlaylist","initialMedia_","handleUpdatedMediaPlaylist","lastExcludeReason_","stuckAtPlaylistEnd_","updateAdCues_","updateDuration","defaultDemuxed","audioGroupKeys","mediaGroup","currentPlaylist","bufferLowWaterLine","bufferHighWaterLine","sharedLogLine","isBuffered","forwardBuffer","maxBufferLowWaterLine","nextBandwidth","currBandwidth","logLine","_logLine","shouldSwitchToMedia","onSyncInfoUpdate_","onEndOfStream","delegateLoaders_","updateCodecs","tryToCreateSourceBuffers_","getCodecsOrExclude_","mediaSecondsLoaded_","smoothQualityChange_","mainMediaInfo","absolutePlaylistEnd","reincluded","errorMessage","delayDuration","fnNames","loaders","dontFilterPlaylist","loader","audioSeekable","mainSeekable","oldEnd","oldStart","updateDuration_","areMediaTypesKnown_","usingAudioLoader","hasMainMediaInfo","hasAudioMediaInfo","playlistCodecs","unsupportedAudio","unsupportedCodecs","supporter","switchMessages","newCodec","oldCodec","codecString","excludeIncompatibleVariants_","ids","unsupported","codecCount_","videoDetails","audioDetails","blacklistReasons","variantCodecs","variantCodecCount","variantVideoDetails","variantAudioDetails","cueOut","_segment$cueOutCont$s","cueOutCont","adOffset","adTotal","updateAdCues","newMax","Representation","vhsHandler","playlistID","changePlaylistFn","qualityChangeFunction","smoothQualityChange","incompatible","currentlyEnabled","timerCancelEvents","PlaybackWatcher","allowSeeksWithinUnsafeLiveWindow","liveRangeSafeTimeDelta","consecutiveUpdates","lastRecordedTime","timer_","checkCurrentTimeTimeout_","playHandler","monitorCurrentTime_","canPlayHandler","waitingHandler","techWaiting_","cancelTimerHandler","cancelTimer_","loaderTypes","loaderChecks","resetSegmentDownloads_","updateend","checkSegmentDownloads_","setSeekingHandlers","seekingAppendCheck_","fixesBadSeeks_","clearSeekingAppendCheck_","watchForBadSeeking_","checkCurrentTime_","isBufferedDifferent","isRangeDifferent","playlistId","waiting_","afterSeekableWindow_","beforeSeekableWindow_","minAppendedDuration","bufferedToCheck","nextRange","currentRange","livePoint","videoUnderflow_","difference","skipTheGap_","allowedEnd","gap","lastVideoRange","videoRange","audioRange","gapFromVideoUnderflow_","scheduledCurrentTime","gaps","findGaps","defaultOptions","errorInterval","getSource","IWillNotUseThisInPlugins","initPlugin","lastCalled","localOptions","loadedMetadataHandler","cleanupEvents","reloadSourceOnError","version$4","STANDARD_PLAYLIST_SELECTOR","INITIAL_PLAYLIST_SELECTOR","movingAverageBandwidthSelector","decay","average","lastSystemBandwidth","comparePlaylistResolution","leftWidth","rightWidth","LOCAL_STORAGE_KEY","handleVhsMediaChange","qualityLevels","selectedIndex_","waitForKeySessionCreation","sourceKeySystems","audioMedia","mainPlaylists","initializeMediaKeys","keySystemsOptionsArr","keySystems","keySystemsArr","contentProtection","keySystemsOptions","keySystemsObj","keySystem","keySystemOptions","pssh","getAllPsshKeySystemsOptions","initializationFinishedPromises","keySessionCreatedPromises","race","setupEmeOptions","sourceOptions","mainPlaylist","audioPlaylist","videoContentType","audioContentType","keySystemContentTypes","emeKeySystems","getVhsLocalStorage","storedObject","supportsNativeHls","canItPlay","supportsNativeDash","supportsTypeNatively","VhsHandler","hls","initialBandwidth","source_","ignoreNextSeekingEvent_","setOptions_","overrideNative","featuresNativeVideoTracks","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","useBandwidthFromLocalStorage","useNetworkInformationApi","option","dataUri","playbackWatcherOptions","playbackWatcher_","defaultSelector","playerBandwidthEst","networkInformation","connection","mozConnection","webkitConnection","tenMbpsAsBitsPerSecond","networkInfoBandwidthEstBitsPerSec","downlink","invThroughput","invBandwidth","mediaRequests_","mediaRequestsAborted_","mediaRequestsTimedout_","mediaRequestsErrored_","mediaTransferDuration_","mediaBytesTransferred_","mediaAppends_","mainAppendsToLoadedData","audioAppendsToLoadedData","appendsToLoadedData","timeToLoadedData","currentTech","playerDimensions","objectToStore","updateVhsLocalStorage","representations","setupEme_","setupQualityLevels_","mediaSourceUrl_","createKeySessions_","audioPlaylistLoader","handleWaitingForKey_","didSetupEmeOptions","qualityLevels_","addQualityLevel","dash","convertToProgramTime","VhsSourceHandler","_videojs$mergeOptions","_videojs$mergeOptions2","_videojs$mergeOptions3","_videojs$mergeOptions4","_videojs$mergeOptions5","legacyOverrideNative","supportedType","padStart","repeat","isTypedArray","isArrayBufferView","toUint8","toBinaryString","BYTE_TABLE","bytesToNumber","Uint16Array","_temp","_ref$signed","signed","_ref$le","le","byte","exponent","numberToBytes","_temp2","_ref2$le","byteCount","countBits","bytesToString","stringToBytes","stringIsBytes","encodeURIComponent","concatTypedArrays","buffers","totalLen","buf","bytesMatch","_temp3","_ref3$offset","_ref3$mask","mask","bByte","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","minLen","arr2","T","O","threshold","_step","_iterator","allowArrayLike","it","F","_e","f","normalCompletion","didErr","_e2","return","_createForOfIteratorHelper","weight","A","g","similarity","_n","u","_n2","_u","_n3","includes","W","S","collection","collectionStrong","toAbsoluteIndex","$fromCodePoint","fromCodePoint","elements","RangeError","oc","MIME_TYPE","HTML","isHTML","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE","SVG","XML","XMLNS","find","ac","_typeof2","__webpack_modules__","__webpack_require__","_style","_interopRequireDefault","_getId","default","CanvasEntry","_classCallCheck","wave","waveCtx","progressCtx","canvasContextAttributes","getContext","elementWidth","totalWidth","elementSize","hasProgressCanvas","clearRect","canvas","waveColor","progressColor","fillStyle","getFillStyle","CanvasGradient","waveGradient","createLinearGradient","addColorStop","setTransform","radius","fillRectToContext","drawRoundedRect","fillRect","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","peaks","absmax","halfH","drawLineToContext","peak","first","canvasStart","canvasEnd","halfOffset","absmaxHalf","halfPixel","quality","toBlob","toDataURL","util","nodeInterop","cache","_getRequireWildcardCache","newObj","hasPropertyDescriptor","_interopRequireWildcard","cacheBabelInterop","cacheNodeInterop","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","ReferenceError","_assertThisInitialized","getPrototypeOf","Drawer","_util$Observer","_inherits","_super","params","withOrientation","lastPos","styles","display","userSelect","webkitUserSelect","fillParent","scrollParent","cursor","hideCursor","overflowX","hideScrollbar","overflowY","setupWrapperEvents","noPrevent","targetTouches","bbox","nominalWidth","parentWidth","getWidth","progressPixels","getProgressPixels","scrollWidth","wrapperBbox","rtl","orientedEvent","scrollbarHeight","clientHeight","interact","fireEvent","handleEvent","setWidth","clearWave","barWidth","drawBars","drawWave","recenterOnPosition","half","clientWidth","maxScroll","autoCenterRate","newWidth","updateSize","_progress","minPxDelta","pos","autoCenter","newPos","autoCenterImmediately","updateProgress","unAll","domElement","channelIndex","Observer","_drawer","_drawer2","MultiCanvas","_Drawer","maxCanvasWidth","maxCanvasElementWidth","canvases","progressWave","EntryClass","drawingContextAttributes","overlap","barRadius","createWrapper","createElements","zIndex","boxSizing","borderRightStyle","pointerEvents","addCanvas","updateCursor","borderRightWidth","cursorWidth","borderRightColor","cursorColor","requiredCanvases","removeCanvas","canvasWidth","lastCanvas","entry","updateDimensions","leftOffset","initWave","initProgress","lastEntry","parentElement","destroy","prepareDraw","hasMinVals","ch","peakIndexScale","barGap","peakIndex","peakIndexRange","peakIndexEnd","newPeak","barMinHeight","reflectedPeaks","drawLine","splitChannelsOptions","channelColors","setFillStyles","applyCanvasTransforms","drawLines","startCanvas","endCanvas","intersection","x1","y1","y2","fillRects","splitChannels","filterChannels","drawIndex","normalizedMax","channels","overallAbsMax","filteredChannels","hideChannel","overlay","setHeight","relativeNormalization","channelPeaks","absMax","barHeight","normalize","getImage","images","_get","receiver","_superPropBase","MediaElementWebAudio","_MediaElement","sourceMediaElement","setPlaybackRate","audioRate","createTimer","createVolumeNode","createScriptNode","createAnalyserNode","createMediaElementSource","mediaElement","connect","analyser","resumeAudioContext","destroyWebAudio","_webaudio","MediaElement","_WebAudio","elementPosition","isMuted","onPlayEnd","mediaListeners","volumechange","onAudioProcess","isPaused","getCurrentTime","mediaControls","prevMedia","_load","elt","_setupMediaListeners","explicitDuration","getDuration","clearPlayEnd","setPlayEnd","_onPlayEnd","un","deviceId","setSinkId","destroyed","removeMediaElementOnDestroy","PeakCache","clearPeakCache","peakCacheRanges","peakCacheLength","uncachedRanges","uncachedRangePairs","peakCacheRangePairs","_max","_min","_observer","fetchHeaders","Headers","fetchRequest","Request","controller","AbortController","requestHeaders","fetchOptions","credentials","redirect","referrer","signal","fetch","progressAvailable","contentLength","onProgress","Response","ReadableStream","ProgressHandler","errMsg","ok","arrayBuffer","catch","_reader","getReader","read","lengthComputable","enqueue","_requestAnimationFrame","prefix","__unused_webpack_module","_absMax","_clamp","_debounce","_fetch","_frame","_silenceMode","_preventClick","_orientation","largest","smallest","_disabledEventEmissions","eventNames","_isDisabledEventEmission","isProxy","mapProp","verticalPropMap","preventClickHandler","_default","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","audioSilentMode","disableRemotePlayback","_mediaelement","_peakcache","_mediaelementWebaudio","_defineProperty","_createClass","WaveSurfer","audioContext","audioScriptProcessor","backend","dragSelection","desynchronized","forceDecode","ignoreSilenceMode","loopSelection","mediaContainer","minPxPerSec","partialRender","screen","deviceXDPI","logicalXDPI","renderer","skipLength","WebAudio","defaultParams","setBackgroundColor","savedVolume","tmpEvents","currentRequest","arraybuffer","drawer","peakCache","supportsWebAudio","Backend","backends","initialisedPluginList","isDestroyed","isReady","prevWidth","_onResize","registerPlugins","createDrawer","createBackend","createPeakCache","addPlugin","deferInit","pluginStaticProp","Instance","destroyPlugin","drawBuffer","getPlayedPercents","newVolume","getVolume","seekAndCenter","recenter","isWebAudioBackend","oldScrollParent","getPlaybackRate","setMute","mute","filters","channelIdx","background","channelIndices","newRanges","addRangeToPeakCache","getPeaks","drawPeaks","pxPerSec","decodeArrayBuffer","loadDecodedBuffer","reader","FileReader","loadArrayBuffer","readAsArrayBuffer","preloadIgnoreReasons","activeReasons","loadBuffer","loadMediaElement","once","getArrayBuffer","setPeaks","urlOrElt","loadElt","fetchFile","percentComplete","noWindow","blobJSON","stop","disconnectSource","cancelAjax","clearTmpEvents","destroyAllPlugins","PLAYING","PAUSED","FINISHED","_defineProperty2","_this$states","addOnAudioProcess","startPosition","getPlayedTime","removeOnAudioProcess","getAudioContext","lastPlay","scheduledPause","states","stateBehaviors","gainNode","mergedPeaks","offlineAc","scriptNode","splitPeaks","sinkStreamDestination","sinkAudioElement","AudioContext","webkitAudioContext","WaveSurferAudioContext","WaveSurferOfflineAudioContext","OfflineAudioContext","webkitOfflineAudioContext","setLength","setFilters","disconnectFilters","prev","curr","createScriptProcessor","scriptBufferSize","createJavaScriptNode","onaudioprocess","createAnalyser","createGain","createGainNode","Audio","createMediaStreamDestination","srcObject","gain","setValueAtTime","errback","getOfflineAudioContext","decodeAudioData","numberOfChannels","newBuffer","createBuffer","sampleSize","sampleStep","chan","getChannelData","closeAudioContext","createSource","createBufferSource","noteGrainOn","noteOff","resume","adjustedTime","later","callNow","__webpack_module_cache__","__webpack_exports__","moduleId","cachedModule","_extends","doccy","minDoc","topLevel","DEFAULT_LOCATION","baseUrl","relativeUrl","nativeURL","protocolLess","removeLocation","buildAbsoluteURL","newUrl","decodeB64ToUint8Array","b64Text","decodedString","atob","Buffer","conventions","notEmptyString","input","orderedSetReducer","current","toOrderedSet","splitOnASCIIWhitespace","copy","dest","Class","pt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","namespaceURI","_nsMap","localName","_onAddAttribute","_removeNamedNode","lastIndex","DOMImplementation","Node","_xmlEncoder","_visitNode","Document","_onUpdateChild","cs","_removeChild","previous","previousSibling","lastChild","isDocTypeNode","isElementNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","assertPreInsertionValidity1to5","hasValidParentNodeType","hasInsertableNodeType","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","assertPreReplacementValidityInDocument","_insertBefore","_inDocumentAssertion","cp","newFirst","newLast","pre","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","isHtml","nodeFilter","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","ns","addSerializedAttribute","qualifiedName","prefixedNodeName","defaultNS","ai","nsi","pubid","publicId","sysid","systemId","sub","internalSubset","_importNode","deep","node2","_cloneNode","attrs2","_ownerElement","setAttributeNode","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","feature","createDocument","doctype","root","createElementNS","createDocumentType","nodeValue","refChild","oldChild","appendData","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importNode","importedNode","getElementById","rtv","getElementsByClassName","classNames","classNamesSet","nodeClassNames","nodeClassNamesSet","createComment","createCDATASection","createProcessingInstruction","createAttribute","specified","createEntityReference","pl","createAttributeNS","getAttributeNode","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","getTextContent","$$length","ID3","getId3Size","toStringTag","isRecordingSupported","bufferLength","encoderApplication","encoderFrameSize","encoderPath","encoderSampleRate","maxFramesPerPage","mediaTrackConstraints","monitorGain","recordingGain","resampleQuality","streamPages","wavBitDepth","sourceNode","encodedSamplePosition","initAudioContext","initWorklet","initEncoder","mediaDevices","getUserMedia","WebAssembly","clearStream","monitorGainNode","recordingGainNode","encoder","encoderNode","command","encodeBuffers","setMonitorGain","setRecordingGain","audioWorklet","AudioWorkletNode","numberOfOutputs","port","inputBuffer","initSourceNode","createMediaStreamSource","initWorker","streamPage","storePage","recordedPages","totalLength","samplePosition","page","finish","getOwnPropertySymbols","propertyIsEnumerable","originalSampleRate","wavSampleRate","addModule","onpause","onresume","setTargetAtTime","onstart","ondataavailable","onstop","Function","MicrophonePlugin","ws","wavesurfer","detectBrowser","reloadBufferFunction","reloadBuffer","constraints","successCallback","errorCallback","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","numberOfInputChannels","numberOfOutputChannels","_onBackendCreated","micContext","gotStream","deviceError","stopDevice","localAudioBuffer","mediaStreamSource","levelChecker","channel","uastring","expr","extractVersion","minVersion","RTCPeerConnection","__WEBPACK_EXTERNAL_MODULE_video_js__","__WEBPACK_EXTERNAL_MODULE_wavesurfer_js__","__WEBPACK_AMD_DEFINE_RESULT__","addZero","digits","isNegative","displayMilliseconds","READY","VOLUMECHANGE","FULLSCREENCHANGE","TIMEUPDATE","ENDED","PAUSE","FINISH","SEEK","REDRAW","AUDIOPROCESS","DEVICE_READY","DEVICE_ERROR","AUDIO_OUTPUT_READY","WAVE_READY","PLAYBACK_FINISH","ABORT","RESIZE","surfer","_addZero","_parseMs","inputTime","guideTime","hr","hours","minutes","sec","ms","milliseconds","days","day","_video","logType","__unused_webpack_exports","__unused_webpack___webpack_module__","parseMilliseconds","roundTowardsZero","microseconds","nanoseconds","definition","Wavesurfer","_event","_log2","_formatTime","_defaults","_wavesurfer","wavesurferPluginName","wavesurferClassName","WEBAUDIO","MEDIAELEMENT","_Plugin","waveReady","waveFinished","liveMode","textTracksEnabled","bigPlayButton","mergedOptions","parseOptions","progressControl","pictureInPictureToggle","onPlayToggle","onWaveError","onWaveFinish","getActivePlugins","microphone","surferReady","onWaveReady","surferProgress","onWaveProgress","surferSeek","onWaveSeek","setupPlaybackEvents","onVolumeChange","onScreenChange","surferOpts","originalWidth","originalHeight","controlBarHeight","waveformHeight","File","loadBlob","loadPeaks","exportImage","currentTimeDisplay","loadingSpinner","startsWith","isPlaying","fullscreenDelay","newHeight","redrawWaveform","_typeof3","__WEBPACK_EXTERNAL_MODULE_recordrtc__","asyncGeneratorStep","gen","_next","_throw","superPropBase","assertThisInitialized","_classCallCheck2","_createClass2","_get2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","AnimationDisplay","imgElement","CameraButton","START_RECORD","onStart","STOP_RECORD","onStop","layoutExclude","recorder","record","isProcessing","retrySnapshot","RETRY","DeviceButton","getDevice","_regenerator","_asyncToGenerator2","_handleClick","ENTER_PIP","LEAVE_PIP","mark","_callee","wrap","_context","pictureInPictureElement","t0","_x","RecordCanvas","canvasElement","RecordIndicator","RecordToggle","isRecording","image","animation","maxLength","maxFileSize","frameWidth","frameHeight","pip","autoMuteDevice","videoBitRate","videoEngine","videoFrameRate","videoMimeType","videoRecorderType","videoWorkerURL","videoWebAssemblyURL","audioEngine","audioRecorderType","audioMimeType","audioBufferSize","audioSampleRate","audioBitRate","audioChannels","audioWorkerURL","audioWebAssemblyURL","audioBufferUpdate","animationFrameRate","animationQuality","imageOutputType","imageOutputFormat","imageOutputQuality","timeSlice","convertEngine","convertWorkerURL","convertOptions","convertAuto","hotKeys","pluginLibraryOptions","FFMPEGWASM","FFMPEGJS","TSEBML","CONVERT_PLUGINS","ConvertEngine","_fileUtil","blobToArrayBuffer","fileObj","addFileInfo","fileName","downloadBlob","convertedData","getConvertEngine","getVideoEngine","isAudioPluginActive","getAudioEngine","_recordRtc","_convertEngine","_recordEngine","AudioEngineClass","RECORDRTC","LIBVORBISJS","LibVorbisEngine","RECORDERJS","RecorderjsEngine","LAMEJS","LamejsEngine","OPUSRECORDER","OpusRecorderEngine","OPUSMEDIARECORDER","OpusMediaRecorderEngine","VMSG","VmsgEngine","VideoEngineClass","WEBMWASM","WebmWasmEngine","AUDIO_PLUGINS","ConvertEngineClass","TsEBMLEngine","FFmpegjsEngine","FFmpegWasmEngine","VIDEO_PLUGINS","RECORD_PLUGINS","RecordEngine","recordedData","RECORD_COMPLETE","AUDIO_SCREEN","SCREEN_ONLY","ANIMATION","AUDIO_VIDEO","VIDEO_ONLY","AUDIO_ONLY","IMAGE_ONLY","getRecorderMode","isModeEnabled","_recordrtc","_recordMode","RecordRTCEngine","_RecordEngine","inputStream","recorderType","engine","MRecordRTC","disableLogs","mimeType","numberOfAudioChannels","bitrate","bitRate","frameRate","onTimeStamp","workerPath","webAssemblyPath","addStream","startRecording","stopRecording","onStopRecording","pauseRecording","resumeRecording","save","audioVideoURL","recordType","getRecordType","recording","currentTimestamp","allTimestamps","audioRecorder","gifRecorder","videoRecorder","maxFileSizeReached","getInternalRecorder","MediaStreamRecorder","getArrayOfBlobs","TIMESTAMP","LOADEDMETADATA","LOADSTART","USERINACTIVE","DURATIONCHANGE","PLAY","FINISH_RECORD","PROGRESS_RECORD","ENUMERATE_READY","ENUMERATE_ERROR","AUDIO_BUFFER_UPDATE","START_CONVERT","FINISH_CONVERT","ENTERPICTUREINPICTURE","LEAVEPICTUREINPICTURE","cameraButton","recordToggle","pictureInPicture","pipToggle","mozSrcObject","v1","v2","isFirefox","isSafari","isChrome","isOpera","isEdge","_window","opera","_mime","msSaveOrOpenBlob","msSaveBlob","hyperlink","download","MouseEvent","onloadend","ev","dateObj","fileExtension","lastModified","lastModifiedDate","EXTRACT_TYPE_REGEXP","Mimetypes","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","awrap","async","skipTempReset","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Record","_assertThisInitialized2","_animationDisplay","_recordCanvas","_deviceButton","_cameraButton","_recordToggle","_recordIndicator","_pictureInPictureToggle","_hotKeys","_browserShim","_compareVersion","_detectBrowser","_engineLoader","AUTO","loadOptions","resetState","deviceIcon","deviceButton","recordIndicator","recordCanvas","animationDisplay","oldVideoJS","onEnterPiPHandler","onEnterPiP","onLeavePiPHandler","onLeavePiP","customUIElements","setupUI","recordOptions","recordImage","recordAudio","recordVideo","recordAnimation","recordScreen","recordTimeSlice","videoFrameWidth","videoFrameHeight","liveDisplay","_recording","_processing","deviceReadyCallback","onDeviceReady","deviceErrorCallback","onDeviceError","engineStopCallback","onRecordComplete","streamVisibleCallback","onStreamVisible","getDisplayMedia","audioScreenConstraints","screenStream","mic","screenOnlyConstraints","_deviceActive","playbackTimeUpdate","EngineClass","engineType","setup","converter","displayVolumeControl","deviceErrorCode","startVideoPreview","captureFrame","muteTracks","createSnapshot","pauseTime","pausedTime","countDown","onCountDown","stopStream","convert","streamDuration","showAnimation","hideAnimation","streamCurrentTime","saveAs","removeRecording","devices","drawCanvas","getAudioTracks","getVideoTracks","displaySnapshot","detected","getSettings","cameraAspectRatio","playerAspectRatio","imagePreviewHeight","imagePreviewWidth","imageXPosition","imageYPosition","ImageCapture","grabFrame","imageBitmap","drawImage","enumerateDevices","enumerateErrorCode","device","exact","sinkId","volumePanel","RecordRTC","mediaStream","RecordRTCConfiguration","initRecorder","initCallback","Recorder","GetRecorderType","mediaRecorder","warningLog","__blob","bytesToSize","autoWriteToDisk","getDataURL","dataURL","parameter","DiskStorage","Store","readFile","_blob","FileReaderSync","readAsDataURL","_mediaRecorder","webWorker","_function","processInWebWorker","handleRecordingDuration","counter","recordingDuration","onRecordingStopped","onStateChanged","WARNING","returnObject","config2","clearRecordedData","setRecordingDuration","toURL","invokeSaveAsDialog","getFromDisk","setAdvertisementArray","arrayOfWebPImages","advertisement","getState","disableLogsCache","Storage","AudioContextConstructor","WhammyRecorder","CanvasRecorder","WebAssemblyRecorder","GifRecorder","StereoAudioRecorder","MediaRecorder","bitsPerSecond","isMediaRecorderCompatible","isTypeSupported","MultiStreamRecorder","_mediaStream","newStream","MediaStream","frameInterval","isSingleRecorder","blobURL","callback00","webkitURL","_audioDataURL","_videoDataURL","writeToDisk","Fetch","audioDataURL","videoDataURL","gifDataURL","audioBlob","videoBlob","gifBlob","that","captureStream","mozCaptureStream","HTMLVideoElement","lastTime","currTime","timeToCall","webkitCancelAnimationFrame","mozCancelAnimationFrame","msCancelAnimationFrame","mozAudioContext","isElectron","toPrecision","file","splitted","fileFullName","process","versions","electron","setSrcObject","webkitMediaStream","getSeekableBlob","inputBlob","EBML","Reader","Decoder","tools","fileReader","refinedMetadataBuf","makeMetadataSeekable","metadatas","metadataSize","newBlob","appVersion","verOffset","ix","nAgt","fullVersion","arrayOfBlobs","updateTimeStamp","timestamps","getMimeType","secondObject","clearRecordedDataCB","allStates","recorderHints","canRecordMimeType","recordingCallback","getNativeBlob","looper","manuallyStopped","timeslice","getAllStates","checkForInactiveTracks","isMediaStreamActive","jsAudioNode","leftchannel","rightchannel","recordingLength","desiredSampRate","mergeLeftRightBuffers","mergeAudioBuffers","interleaved","leftBuffers","rightBuffers","internalInterleavedLength","interpolateArray","newSampleRate","oldSampleRate","fitCount","springFactor","after","atPoint","linearInterpolate","mergeBuffers","channelBuffer","rLength","Float64Array","lng","writeUTFBytes","setUint8","leftChannel","rightChannel","inputIndex","interleave","interleavedLength","setUint16","setInt16","noWorker","workerURL","resetVariables","isAudioProcessStarted","audioInput","legalBufferValues","intervalsBasedBuffers","onAudioProcessStarted","chLeft","Float32Array","chRight","htmlElement","html2canvas","isCanvasSupportsStreamCapturing","globalCanvas","mediaStreamRecorder","_isChrome","webkitRTCPeerConnection","chrome","chromeVersion","matchArray","useWhammyRecorder","HTMLCanvasElement","CanvasRenderingContext2D","canvasMediaStream","webkitCaptureStream","mdStream","whammy","drawCanvasFrame","getWebPImages","framesLength","framesRemaining","onEncodingCallback","compile","isPausedRecording","newCanvas","grabMouse","showMousePointer","onrendered","Whammy","Video","drawFrames","isStopDrawing","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","_callback2","localCanvas","context2d","resultFrames","checkUntilNotBlack","endCheckFrame","sampleColor","maxColorDifference","pixTolerance","frameTolerance","doNotCheckNext","functionToLoop","matchPixCount","endPixCheck","maxPixCount","finishImage","Image","imageData","getImageData","pix","currentColor","onloadedmetadata","WhammyVideo","whammyInWebWorker","getClusterData","clusterTimecode","clusterCounter","clusterFrames","block","keyframe","invisible","lacing","discardable","trackNum","timecode","makeSimpleBlock","numToBuffer","bitsToBuffer","generateEBML","ebml","zeroes","sizeToString","getStrLength","unpadded","parseRIFF","chunks","webm","checkFrames","frameNumber","clusterDuration","cluster","riff","VP8","RIFF","WEBP","parseWebP","indexedDB","db","dbName","onsuccess","setVersion","createObjectStore","putInDB","onupgradeneeded","dataBase","dataStoreName","transaction","getFromStore","portionName","objectStore","put","GIFEncoder","isHTMLObject","isLoadedMetaData","gifEncoder","setRepeat","setDelay","setQuality","onGifRecordingStarted","lastAnimationFrame","drawVideoFrame","clearedRecordedData","lastFrameTime","onGifPreview","addFrame","playsInline","MultiStreamsMixer","arrayOfMediaStreams","elementClass","videos","isStopDrawingFrames","useGainNode","drawVideosToCanvas","videosLength","fullcanvas","remaining","onRender","getVideo","resetVideoStreams","streams","startDrawingFrames","appendStreams","audioSource","audioDestination","releaseStreams","audioSources","getMixedStream","mixedVideoStream","capturedStream","videoStream","getMixedVideoStream","mixedAudioStream","audioTracksLength","getMixedAudioStream","mixer","previewStream","addStreams","getMixer","cameraStream","cvs","onplaying","frameTimeout","cameraTimer","onVideoProcessStarted","_controlledReadableStream","timebaseDen","realtime","pipeTo","WritableStream","arrayOfBuffers","RecordRTCPromisesHandler","recordRTC","audioType","audioSourceNode","onRecordingAvailable","normalizeComponent","template","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","render","staticRenderFns","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","originalRender","existing","beforeCreate","__vue_script__","html","useIframe","iframeTitle","rewriteExternalLinks","rewriteExternalResources","allowedSchemas","preserveCssPriority","computed","sanitizerOptions","sanitizedHtml","iframeSrc","__vue_render__","_vm","_h","$createElement","_c","_self","class","domProps","_s","_withStripped","__vue_component__","install","Vue","installed","GlobalVue","MILLISECONDS_IN_HOUR","patterns","dateTimeDelimiter","timeZoneDelimiter","timezone","dateRegex","timeRegex","timezoneRegex","parseISO","argument","dirtyOptions","additionalDigits","dateStrings","splitDateString","parseYearResult","parseYear","parseDate","restDateString","year","parseTime","setFullYear","getUTCFullYear","getUTCMonth","getUTCDate","setHours","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","parseTimezone","dateString","timeString","token","regex","captures","century","isWeekDate","dayOfYear","parseDateUnit","month","week","dayOfWeek","_year","validateWeekDate","isoWeekYear","setUTCFullYear","fourthOfJanuaryDay","getUTCDay","setUTCDate","dayOfISOWeekYear","daysInMonths","isLeapYearIndex","validateDate","validateDayOfYearDate","parseTimeUnit","validateTime","timezoneString","_hours","validateTimezone","startOfWeek","locale","localeWeekStartsOn","weekStartsOn","defaultWeekStartsOn","getDay","setDate","getDate","addWeeks","dirtyAmount","amount","isMonday","startOfMonth","setSeconds","dirtySeconds","setMinutes","dirtyMinutes","dirtyHours","searchInput","hasKeyCode","foundNamedKey","search","aliases","nameOrCode","alias","reviver","isFunction","createXHR","httpHandler","initParams","_createXHR","called","getBody","responseXML","firefoxBugTakenEffect","getXml","isJson","errorFunc","evt","timeoutTimer","failureResponse","loadFunc","useXDR","rawRequest","getAllResponseHeaders","parseHeaders","XDomainRequest","XMLHttpRequest","onprogress","onabort","ontimeout","username","password","setRequestHeader","send","forEachArray","alert","confirm","prompt","decodeResponseBody","charset","contentTypeHeader","contentType","_contentType$split","getCharset","VTTRegion","cueShim","regionShim","nativeVTTCue","nativeVTTRegion","shim","restore","_objCreate","ParsingError","errorData","parseTimeStamp","computeSeconds","Settings","keyValueDelim","groupDelim","kv","parseCue","regionList","oInput","consumeTimeStamp","Errors","BadTimeStamp","skipWhitespace","region","alt","vals","vals0","integer","line","lineAlign","snapToLines","center","positionAlign","consumeCueSettings","BadSignature","dflt","defaultKey","TEXTAREA_ELEMENT","TAG_NAME","ruby","rt","lang","DEFAULT_COLOR_CLASS","white","lime","cyan","red","yellow","magenta","blue","black","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","shouldAdd","annotation","rootDiv","tagStack","classes","cl","bgColor","colorName","propValue","strongRTLRanges","isStrongRTLChar","determineBidi","nodeStack","pushNodes","nextTextNode","StyleBox","CueStyleBox","styleOptions","writingMode","unicodeBidi","applyStyles","textAlign","font","whiteSpace","textPos","formatStyle","move","BoxPosition","lh","rects","getClientRects","lineHeight","moveBoxToLinePosition","styleBox","containerBox","boxPositions","boxPosition","linePos","textTrackList","computeLinePos","axis","maxPosition","initialAxis","calculatedPercentage","bestPosition","specifiedPosition","percentage","overlapsOppositeAxis","within","overlapsAny","intersectPercentage","findBestPosition","toCSSCompatValues","unit","toMove","overlaps","getSimpleBoxPosition","convertCueToDOMTree","cuetext","paddedOverlay","margin","hasBeenReset","shouldCompute","reportOrThrowError","collectNextLine","parseHeader","parseTimestampMap","xy","anchor","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","onregion","parseRegion","alreadyCollectedLine","hasSubstring","directionSetting","alignSetting","findAlignSetting","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","setting","findDirectionSetting","SyntaxError","getCueAsHTML","scrollSetting","isValidPercentValue","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","findScrollSetting","isNativeReflectConstruct","_construct","Parent","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","URLToolkit","baseURL","relativeURL","alwaysNormalize","basePartsForNormalise","parseURL","normalizePath","buildURLFromParts","relativeParts","scheme","baseParts","netLoc","builtParts","query","baseURLPath","newPath","lastIndexOf","regexs","ogg","muxerVideo","muxerAudio","muxerText","upperMediaTypes","translateLegacyCodec","orig","profile","avcLevel","parseCodecs","codecType","codecsFromDefault","audioGroupId","isAudioCodec","getMimeForCodec","browserSupportsCodec","muxerSupportsCodec","DEFAULT_AUDIO_CODEC","DEFAULT_VIDEO_CODEC","MPEGURL_REGEX","DASH_REGEX","simpleTypeFromSourceType","DOMParser","entities","sax","ParseError","XMLReader","locator","DOMHandler","cdata","lineNumber","columnNumber","_locator","_toString","chars","java","appendElement","hander","currentElement","parseFromString","domBuilder","defaultNSMap","xmlns","entityMap","HTML_ENTITIES","XML_ENTITIES","setDocumentLocator","errorImpl","isCallback","build","msg","buildErrorHandler","xml","startDocument","documentURI","startElement","qName","getURI","getQName","getLocator","endElement","startPrefixMapping","endPrefixMapping","processingInstruction","ins","ignorableWhitespace","characters","charNode","skippedEntity","endDocument","comment","comm","startCDATA","endCDATA","startDTD","impl","dt","warning","fatalError","__DOMHandler","amp","apos","gt","lt","quot","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","forall","exist","nabla","isin","notin","ni","prod","minus","lowast","radic","infin","ang","and","or","cap","cup","there4","sim","cong","asymp","ne","equiv","ge","sup","nsub","sube","supe","oplus","otimes","perp","sdot","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","rho","sigmaf","sigma","tau","upsilon","phi","chi","omega","thetasym","upsih","piv","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","euro","trade","larr","uarr","rarr","darr","harr","crarr","lceil","rceil","lfloor","rfloor","loz","spades","clubs","hearts","diams","nameStartChar","nameChar","tagNamePattern","copyLocator","parseElementStartPart","currentNSMap","entityReplacer","addAttribute","qname","attributeNames","addValue","setTagName","closed","localNSMap","nsp","nsPrefix","_copy","parseHtmlSpecialContent","elStartEnd","elEndStart","fixSelfClosed","closeMap","parseDCC","matchs","lastMatch","endDTD","parseInstruction","ElementAttributes","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","appendText","xt","lineEnd","linePattern","lineStart","parseStack","tagStart","endMatch","locator2","_parse","getLocalName","references","referenceId","earliestPresentationTime","firstOffset","referenceCount","getUint16","referenceType","referencedSize","subsegmentDuration","startsWithSap","sapType","sapDeltaTime","_e3","sanitize","constants_1","sanitizeCssValue","cssValue","quote","sanitizeCssStyle","_properties","_name","allowedCssProperties","setProperty","getPropertyPriority","removeProperty","sanitizeCssRule","selectorText","prependIdToSelectorText","defaultAllowedSchemas","contents","sanitizeText","_a","_b","_d","_f","_g","_ref$dropAllHtmlTags","dropAllHtmlTags","_ref$id","_ref$allowedSchemas","_ref$preserveCssPrior","_ref$noWrapper","noWrapper","schema","commentIter","createNodeIterator","NodeFilter","SHOW_COMMENT","nextNode","removeTags","removeWithContents","toRemove","elementIter","SHOW_ELEMENT","acceptNode","FILTER_ACCEPT","textNode","allowedTags","allowedAttributes","getAttributeNames","insertAdjacentHTML","_toRemove","_element","outerHTML","_k","_l","styleElement","stylesheet","sheet","newRules","cssRules","mediaRule","newRulesMedia","_rule","STYLE_RULE","deleteRule","_newRulesMedia","_rule2","insertRule","sanitizeHtml","address","blockquote","br","cite","col","colgroup","dd","em","h1","h2","h3","h4","h5","h6","img","legend","li","ol","strong","tbody","td","tfoot","thead","tr","ul","DESCRIPTORS","headerSize","_DESCRIPTORS$z","dependsOnEsId","ocrEsId","descriptors","oti","maxBitrate","avgBitrate","paths","normalizePaths","EBML_TAGS","DocType","Segment","SegmentInfo","Tracks","TrackNumber","DefaultDuration","TrackEntry","TrackType","FlagDefault","CodecID","CodecPrivate","Cluster","Timestamp","TimestampScale","BlockGroup","BlockDuration","Block","SimpleBlock","LENGTH_TABLE","removeLength","getLength","valueBytes","getInfinityDataSize","innerid","dataHeader","findEbml","dataStart","dataEnd","NAL_TYPE_ONE","NAL_TYPE_TWO","EMULATION_PREVENTION","positions","dataType","nalLimit","nalStart","nalsFound","nalOffset","nalType","CONSTANTS","_isLikely","docType","matroska","fmp4","ac3","avi","findH264Nal","findH265Nal","isLikelyTypes","isLikelyFn","isLikely","addMonths","requiredArgs","toDate","toInteger","dayOfMonth","endOfDesiredMonth","setMonth","getMonth","daysInMonth","getFullYear","years","months","weeks","dateWithMonths","dateWithDays","addDays","minutesToAdd","secondsToAdd","msToAdd","finalDate","LineStream","nextNewline","TAB","parseByterange","byterangeString","parseAttributes","ParseStream","customParsers","tagMappers","mappedLine","tagType","playlistType","allowed","URI","BYTERANGE","IV","PRECISE","subkey","expression","customType","dataParser","camelCaseKeys","setHoldBack","hb","phb","minTargetDuration","minPartDuration","lineStream","uris","currentUri","defaultMediaGroups","allowCache","lastByterangeEnd","lastPartByterangeEnd","rendition","endlist","inf","METHOD","KEYFORMAT","KEYID","schemeIdUri","keyId","TYPE","NAME","mediaGroupType","AUTOSELECT","LANGUAGE","CHARACTERISTICS","FORCED","targetduration","timeOffset","cueIn","warnOnMissingAttributes_","renditionReports","isPart","otherHint","required","partInf","partTarget","identifier","missing","merge","flatten","lists","findIndex","matchingFunction","_ref$baseUrl","_ref$source","_ref$range","_ref$indexRange","indexRange","startRange","endRange","parseEndNumber","endNumber","segmentRange","static","_attributes$timescale","sourceDuration","periodDuration","dynamic","NOW","availabilityStartTime","_attributes$timescale2","_attributes$periodSta","periodStart","_attributes$minimumUp","_attributes$timeShift","timeShiftBufferDepth","periodStartWC","segmentCount","availableStart","availableEnd","parseByDuration","_attributes$timescale4","_segmentRange$type","_attributes$timescale3","_attributes$startNumb","startNumber","toSegments","sectionDuration","segmentsFromBase","_attributes$initializ","initialization","_attributes$indexRang","presentationTime","_attributes$number","sourceURL","segmentTimeInfo","addSidxSegmentsToPlaylist$1","sidxByteRange","sidxEnd","mediaReferences","SUPPORTED_MEDIA_TYPES","getUniqueTimelineStarts","keyFunction","mediaGroupPlaylists","updateMediaSequenceForPlaylist","positionManifestOnTimeline","oldManifest","newManifest","oldPlaylists","newPlaylists","findPlaylistWithName","firstNewSegment","oldMatchingSegmentIndex","updateSequenceNumbers","generateSidxKey","mergeDiscontiguousPlaylists","_acc$name$segments","sidxMatch","addSidxSegmentsToPlaylists","formatVideoPlaylist","_attributes2","videoOnly","vttOnly","flattenMediaGroupPlaylists","mediaGroupObject","labelContents","toM3u8","_mediaGroups","dashPlaylists","_ref8$sidxMapping","_dashPlaylists$0$attr","videoPlaylists","audioPlaylists","vttPlaylists","VIDEO","organizedAudioGroup","formattedPlaylists","roleLabel","formatted","_attributes","formatAudioPlaylist","organizeAudioPlaylists","organizedVttGroup","_m3u8Attributes","m3u8Attributes","formatVttPlaylist","organizeVttPlaylists","playlistTimelineStarts","subs","svcObj","svc","easyReader","getLiveRValue","parseByTimeline","_attributes$minimumUp2","_attributes$media","sIndex","segmentTime","nextS","identifierPattern","constructTemplateUrl","identifierReplacement","templateValues","RepresentationID","Bandwidth","mapSegment","parseTemplateInfo","Time","presentationTimeOffset","segmentsFromList","_attributes$segmentUr","segmentUrls","segmentUrlMap","segmentUrlObject","segmentUrl","mediaRange","SegmentURLToSegmentObject","generateSegments","segmentAttributes","segmentsFn","segmentsInfo","_segmentAttributes","_segmentAttributes$ti","findChildren","getContent","parseDuration","_match$slice","hour","minute","second","parsers","mediaPresentationDuration","parsedValue","parseFn","keySystemsMap","referenceUrls","baseUrlElements","baseUrlElement","getSegmentInformation","adaptationSet","segmentTemplate","segmentList","segmentBase","segmentTimelineParentNode","segmentInitializationParentNode","segmentInitialization","toRepresentations","periodAttributes","periodBaseUrls","periodSegmentInfo","adaptationSetAttributes","adaptationSetBaseUrls","roleAttributes","accessibility","_value$split","_value$split2","_value$split2$","opt","_opt$split","labelVal","psshNode","psshBuffer","adaptationSetSegmentInfo","repBaseUrlElements","repBaseUrls","representationSegmentInfo","inheritBaseUrls","toAdaptationSets","mpdAttributes","mpdBaseUrls","period","adaptationSets","mpd","parsedManifestInfo","_options$manifestUri","_options$NOW","_options$clientOffset","periodNodes","periods","priorPeriod","priorPeriodAttributes","mpdType","getPeriodStart","representationInfo","inheritAttributes","parseUTCTiming","UTCTimingNode","parseUTCTimingScheme","addSeconds"],"mappings":";4FAAA,uDAyBe,SAASA,EAAUC,EAAeC,GAC/C,YAAa,EAAGC,WAChB,IAAIC,EAAqB,YAAWH,GAChCI,EAAsB,YAAWH,GACrC,OAAOE,EAAmBE,YAAcD,EAAoBC,Y,kCC7B9D,wDA4Be,SAASC,EAAQC,GAE9B,OADA,YAAa,EAAGL,WACT,YAAUK,EAAWC,KAAKC,S,kCC9BnC,kEA6Be,SAASC,EAAYH,GAElC,OADA,YAAa,EAAGL,WACT,YAAUK,EAAW,YAAQC,KAAKC,MAAO,M,sBC/BlD,kBAGEE,EADoB,qBAAXC,OACHA,OACqB,qBAAXC,EACVA,EACmB,qBAATC,KACVA,KAEA,GAGRC,EAAOC,QAAUL,I,oDCZjB,8VAASM,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAuJnX,IArHA,IAmHIK,EAnHAC,EAAY,SAQZC,EAAS,GAcTC,EAAQ,SAAeC,EAAMC,GAO/B,OANAH,EAAOE,GAAQF,EAAOE,IAAS,GAE3BC,IACFH,EAAOE,GAAQF,EAAOE,GAAME,OAAOD,IAG9BH,EAAOE,IA8BZG,EAAa,SAAoBH,EAAMC,GACzC,IAAIG,EAAQL,EAAMC,GAAMK,QAAQJ,GAEhC,QAAIG,IAAU,KAIdN,EAAOE,GAAQF,EAAOE,GAAMM,QAC5BR,EAAOE,GAAMO,OAAOH,EAAO,IACpB,IAsCLI,EAAgB,CAClBC,UAAU,GAGRC,EAAS,CAAC,CAAC,oBAAqB,iBAAkB,oBAAqB,oBAAqB,mBAAoB,kBAAmB,cACvI,CAAC,0BAA2B,uBAAwB,0BAA2B,0BAA2B,yBAA0B,wBAAyB,uBAC7J,CAAC,uBAAwB,sBAAuB,uBAAwB,uBAAwB,sBAAuB,qBAAsB,oBAC7I,CAAC,sBAAuB,mBAAoB,sBAAuB,sBAAuB,qBAAsB,oBAAqB,mBACjIC,EAAUD,EAAO,GAGZE,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,IAEjC,GAAIF,EAAOE,GAAG,KAAM,IAAU,CAC5BhB,EAAac,EAAOE,GACpB,MAKJ,GAAIhB,EAAY,CACd,IAAK,IAAIkB,EAAK,EAAGA,EAAKlB,EAAWiB,OAAQC,IACvCN,EAAcG,EAAQG,IAAOlB,EAAWkB,GAG1CN,EAAcC,SAAWb,EAAW,KAAOe,EAAQ,GAQrD,IAAII,EAAU,GA6Rd,IAAIC,EAlOJ,SAASC,EAAeC,GAEtB,IAEIC,EAFAC,EAAQ,OAyBRC,EAAM,WACR,IAAK,IAAIC,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzBN,EAAU,MAAOC,EAAOG,IA0L1B,OAtLAJ,EAnFqB,SAA0BD,EAAMG,GACrD,OAAO,SAAUrB,EAAMoB,EAAOG,GAC5B,IAAIG,EAAML,EAAIM,OAAOP,GACjBQ,EAAY,IAAIC,OAAO,KAAOH,EAAM,MAUxC,GARa,QAAT1B,GAEFuB,EAAKO,QAAQ9B,EAAK+B,cAAgB,KAIpCR,EAAKO,QAAQZ,EAAO,KAEhBH,EAAS,CACXA,EAAQiB,KAAK,GAAG9B,OAAOqB,IAEvB,IAAIhB,EAASQ,EAAQF,OAAS,IAC9BE,EAAQR,OAAO,EAAGA,EAAS,EAAIA,EAAS,GAK1C,GAAK,IAAS0B,QAAd,CAOA,IAAIhC,EAAK,IAASgC,QAAQjC,GAErBC,GAAe,UAATD,IAGTC,EAAK,IAASgC,QAAQC,MAAQ,IAASD,QAAQZ,KAK5CpB,GAAOyB,GAAQE,EAAUO,KAAKnC,IAInCC,EAAGuB,MAAMY,QAAQb,GAAQ,QAAU,QAAQ,IAASU,QAASV,KAwCnDc,CAAiBnB,EAAMG,GAenCA,EAAIiB,aAAe,SAAUC,GAC3B,OAAOtB,EAAeC,EAAO,KAAOqB,IAuBtClB,EAAIM,OAAS,CACXa,IAAK,uBACLC,IAAK,GACLC,MAAO,uBACPR,KAAM,iBACNS,KAAM,aACNC,MAAO,QACPC,QAASzB,GAeXC,EAAID,MAAQ,SAAUM,GACpB,GAAmB,kBAARA,EAAkB,CAC3B,IAAKL,EAAIM,OAAOmB,eAAepB,GAC7B,MAAM,IAAIqB,MAAM,IAAOrB,EAAM,8BAG/BN,EAAQM,EAGV,OAAON,IAaTC,EAAIN,QAAU,WACZ,OAAOA,EAAU,GAAGb,OAAOa,GAAW,KAa5BiC,OAAS,SAAUC,GAC7B,OAAQlC,GAAW,IAAIiC,QAAO,SAAUE,GAEtC,OAAO,IAAIrB,OAAO,KAAOoB,EAAQ,MAAMd,KAAKe,EAAY,QAS5D7B,EAAIN,QAAQoC,MAAQ,WACdpC,IACFA,EAAQF,OAAS,IAQrBQ,EAAIN,QAAQqC,QAAU,WACJ,OAAZrC,IACFA,EAAQF,OAAS,EACjBE,EAAU,OAQdM,EAAIN,QAAQsC,OAAS,WACH,OAAZtC,IACFA,EAAU,KAWdM,EAAIuB,MAAQ,WACV,IAAK,IAAIU,EAAQ/E,UAAUsC,OAAQU,EAAO,IAAIC,MAAM8B,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFhC,EAAKgC,GAAShF,UAAUgF,GAG1B,OAAOpC,EAAU,QAASC,EAAOG,IAUnCF,EAAIsB,KAAO,WACT,IAAK,IAAIa,EAAQjF,UAAUsC,OAAQU,EAAO,IAAIC,MAAMgC,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFlC,EAAKkC,GAASlF,UAAUkF,GAG1B,OAAOtC,EAAU,OAAQC,EAAOG,IAWlCF,EAAIqB,MAAQ,WACV,IAAK,IAAIgB,EAAQnF,UAAUsC,OAAQU,EAAO,IAAIC,MAAMkC,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFpC,EAAKoC,GAASpF,UAAUoF,GAG1B,OAAOxC,EAAU,QAASC,EAAOG,IAG5BF,EAQGJ,CAAe,WACvBqB,EAAetB,EAAMsB,aAgCrBsB,EAAWC,OAAOlE,UAAUiE,SAc5BE,EAAO,SAAcC,GACvB,OAAOC,GAASD,GAAUF,OAAOC,KAAKC,GAAU,IAalD,SAASE,EAAKF,EAAQ9D,GACpB6D,EAAKC,GAAQG,SAAQ,SAAUC,GAC7B,OAAOlE,EAAG8D,EAAOI,GAAMA,MAwC3B,SAASC,EAAOC,GACd,IAAK,IAAI/C,EAAO/C,UAAUsC,OAAQyD,EAAU,IAAI9C,MAAMF,EAAO,EAAIA,EAAO,EAAI,GAAIG,EAAO,EAAGA,EAAOH,EAAMG,IACrG6C,EAAQ7C,EAAO,GAAKlD,UAAUkD,GAGhC,OAAIoC,OAAOO,OACF,IAASG,WAAM,EAAQ,CAACF,GAAQnE,OAAOoE,KAGhDA,EAAQJ,SAAQ,SAAUM,GACnBA,GAILP,EAAKO,GAAQ,SAAUC,EAAON,GAC5BE,EAAOF,GAAOM,QAGXJ,GAcT,SAASL,GAASS,GAChB,QAASA,GAA4B,WAAnBnF,EAAQmF,GAW5B,SAASC,GAAQD,GACf,OAAOT,GAASS,IAAmC,oBAAzBb,EAASe,KAAKF,IAAgCA,EAAM/E,cAAgBmE,OAyBhG,SAASe,GAAcC,EAAIC,GACzB,IAAKD,IAAOC,EACV,MAAO,GAGT,GAAyC,oBAA9B,IAASC,iBAAiC,CACnD,IAAIC,EAEJ,IACEA,EAAqB,IAASD,iBAAiBF,GAC/C,MAAOI,GACP,MAAO,GAGT,OAAOD,EAAqBA,EAAmBE,iBAAiBJ,IAASE,EAAmBF,GAAQ,GAGtG,MAAO,GAQT,IAqBMK,GArBFC,GAAa,IAASC,WAAa,IAASA,UAAUC,WAAa,GACnEC,GAAmB,yBAAyBC,KAAKJ,IACjDK,GAAqBF,GAAmBG,WAAWH,GAAiBI,OAAS,KAS7EC,GAAU,QAAQzD,KAAKiD,IASvBS,IACEV,GAAQC,GAAWD,MAAM,gBAEhBA,GAAM,GACVA,GAAM,GAGR,KAWLW,GAAa,WAAW3D,KAAKiD,IAS7BW,GAAkB,WAGpB,IAAIZ,EAAQC,GAAWD,MAAM,0CAE7B,IAAKA,EACH,OAAO,KAGT,IAAIa,EAAQb,EAAM,IAAMO,WAAWP,EAAM,IACrCc,EAAQd,EAAM,IAAMO,WAAWP,EAAM,IAEzC,OAAIa,GAASC,EACJP,WAAWP,EAAM,GAAK,IAAMA,EAAM,IAChCa,GAIJ,KAlBa,GA6BlBE,GAAoBJ,IAAcC,GAAkB,GAAKN,GAAqB,IAS9EU,GAAa,WAAWhE,KAAKiD,IAS7BgB,GAAU,OAAOjE,KAAKiD,IAYtBiB,IAAaD,KAAY,UAAUjE,KAAKiD,KAAe,SAASjD,KAAKiD,KASrEkB,GAAiB,WACnB,IAAInB,EAAQC,GAAWD,MAAM,yBAE7B,OAAIA,GAASA,EAAM,GACVO,WAAWP,EAAM,IAGnB,KAPY,GAkBjBoB,GAAa,WACf,IAAIC,EAAS,kBAAkBhB,KAAKJ,IAChCqB,EAAUD,GAAUd,WAAWc,EAAO,IAO1C,OALKC,GAAW,gBAAgBtE,KAAKiD,KAAe,UAAUjD,KAAKiD,MAEjEqB,EAAU,IAGLA,EATQ,GAoBbC,GAAY,UAAUvE,KAAKiD,MAAgBiB,KAAcP,KAAeM,GASxEO,GAAa,WAAWxE,KAAKiD,IAS7BwB,GAAgBC,QAAQC,OAAa,iBAAkB,KAAY,IAASzB,UAAU0B,gBAAkB,IAASC,eAAiB,IAASC,oBAAoB,IAASD,gBASxKE,GAAU,QAAQ/E,KAAKiD,KAAesB,IAAaE,KAAkB,UAAUzE,KAAKiD,IAYpF+B,GAAY,UAAUhF,KAAKiD,MAAgB8B,GAS3CE,GAASD,IAAaD,IAAWtB,GASjCyB,IAAiBX,IAAaU,MAAYf,GAC1CiB,GAAuBzD,OAAO0D,OAAO,CACvCC,UAAW,KACX5B,QAASA,GACTC,YAAaA,GACbC,WAAYA,GACZC,gBAAiBA,GACjBG,kBAAmBA,GACnBC,WAAYA,GACZC,QAASA,GACTC,UAAWA,GACXC,eAAgBA,GAChBC,WAAYA,GACZG,UAAWA,GACXC,WAAYA,GACZC,cAAeA,GACfM,QAASA,GACTC,UAAWA,GACXC,OAAQA,GACRC,cAAeA,KAmBjB,SAASI,GAAiBC,GAMxB,MAAsB,kBAARA,GAAoBb,QAAQa,EAAIC,QAehD,SAASC,GAAkBF,GAEzB,GAAIA,EAAIrH,QAAQ,MAAQ,EACtB,MAAM,IAAI0C,MAAM,2CA2BpB,SAAS+D,KAEP,OAAO,MAAa,IAASG,SAa/B,SAASY,GAAKpD,GACZ,OAAOT,GAASS,IAA6B,IAAnBA,EAAMqD,SAWlC,SAASC,KAGP,IACE,OAAO,IAASC,SAAW,IAAS7I,KACpC,MAAO8I,GACP,OAAO,GAeX,SAASC,GAAcC,GACrB,OAAO,SAAUC,EAAUC,GACzB,IAAKZ,GAAiBW,GACpB,OAAO,IAASD,GAAQ,MAGtBV,GAAiBY,KACnBA,EAAU,IAASC,cAAcD,IAGnC,IAAIE,EAAMV,GAAKQ,GAAWA,EAAU,IACpC,OAAOE,EAAIJ,IAAWI,EAAIJ,GAAQC,IAuBtC,SAASI,GAASC,EAASC,EAAYC,EAAYC,QACjC,IAAZH,IACFA,EAAU,YAGO,IAAfC,IACFA,EAAa,SAGI,IAAfC,IACFA,EAAa,IAGf,IAAI9D,EAAK,IAASgE,cAAcJ,GAwBhC,OAvBA5E,OAAOiF,oBAAoBJ,GAAYxE,SAAQ,SAAU6E,GACvD,IAAIC,EAAMN,EAAWK,IAIc,IAA/BA,EAAS1I,QAAQ,UAAgC,SAAb0I,GAAoC,SAAbA,GAC7D/H,EAAM2B,KAAK,4KAAyLoG,EAAW,OAASC,EAAM,KAC9NnE,EAAGoE,aAAaF,EAAUC,IAEJ,gBAAbD,EACTG,GAAYrE,EAAImE,GACPnE,EAAGkE,KAAcC,GAAoB,aAAbD,IACjClE,EAAGkE,GAAYC,MAGnBnF,OAAOiF,oBAAoBH,GAAYzE,SAAQ,SAAUiF,GACvDtE,EAAGoE,aAAaE,EAAUR,EAAWQ,OAGnCP,GACFQ,GAAcvE,EAAI+D,GAGb/D,EAgBT,SAASqE,GAAYrE,EAAIwE,GAOvB,MAN8B,qBAAnBxE,EAAGqE,YACZrE,EAAGyE,UAAYD,EAEfxE,EAAGqE,YAAcG,EAGZxE,EAaT,SAAS0E,GAAUC,EAAOxB,GACpBA,EAAOyB,WACTzB,EAAO0B,aAAaF,EAAOxB,EAAOyB,YAElCzB,EAAO2B,YAAYH,GAoBvB,SAASI,GAASC,EAASC,GAGzB,OAFAlC,GAAkBkC,GAEdD,EAAQE,UACHF,EAAQE,UAAUC,SAASF,IAlMjBG,EAqMAH,EApMZ,IAAIjI,OAAO,UAAYoI,EAAY,YAoMT9H,KAAK0H,EAAQI,WArMhD,IAAqBA,EAqNrB,SAASC,GAASL,EAASM,GAQzB,OAPIN,EAAQE,UACVF,EAAQE,UAAUK,IAAID,GAEZP,GAASC,EAASM,KAC5BN,EAAQI,WAAaJ,EAAQI,UAAY,IAAME,GAAYxC,QAGtDkC,EAgBT,SAASQ,GAAYR,EAASS,GAE5B,OAAKT,GAKDA,EAAQE,UACVF,EAAQE,UAAUQ,OAAOD,IAEzB1C,GAAkB0C,GAClBT,EAAQI,UAAYJ,EAAQI,UAAUO,MAAM,OAAOxH,QAAO,SAAUyH,GAClE,OAAOA,IAAMH,KACZI,KAAK,MAGHb,IAbL7I,EAAM2B,KAAK,6DACJ,MAgDX,SAASgI,GAAYd,EAASe,EAAeC,GAI3C,IAAIC,EAAMlB,GAASC,EAASe,GAY5B,GAVyB,oBAAdC,IACTA,EAAYA,EAAUhB,EAASe,IAGR,mBAAdC,IACTA,GAAaC,GAKXD,IAAcC,EAUlB,OANID,EACFX,GAASL,EAASe,GAElBP,GAAYR,EAASe,GAGhBf,EAaT,SAASkB,GAAclG,EAAI8D,GACzB9E,OAAOiF,oBAAoBH,GAAYzE,SAAQ,SAAUiF,GACvD,IAAI6B,EAAYrC,EAAWQ,GAET,OAAd6B,GAA2C,qBAAdA,IAA2C,IAAdA,EAC5DnG,EAAGoG,gBAAgB9B,GAEnBtE,EAAGoE,aAAaE,GAAwB,IAAd6B,EAAqB,GAAKA,MAmB1D,SAASE,GAAcC,GACrB,IAAI5L,EAAM,GAIN6L,EAAgB,kEAEpB,GAAID,GAAOA,EAAIxC,YAAcwC,EAAIxC,WAAW9H,OAAS,EAGnD,IAFA,IAAIwK,EAAQF,EAAIxC,WAEP/H,EAAIyK,EAAMxK,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAC1C,IAAIuI,EAAWkC,EAAMzK,GAAGM,KACpBoK,EAAUD,EAAMzK,GAAG6D,MAGM,mBAAlB0G,EAAIhC,KAA4E,IAAjDiC,EAAc/K,QAAQ,IAAM8I,EAAW,OAI/EmC,EAAsB,OAAZA,GAGZ/L,EAAI4J,GAAYmC,EAIpB,OAAO/L,EAgBT,SAASgM,GAAa1G,EAAI2G,GACxB,OAAO3G,EAAG0G,aAAaC,GAgBzB,SAASvC,GAAapE,EAAI2G,EAAW/G,GACnCI,EAAGoE,aAAauC,EAAW/G,GAa7B,SAASwG,GAAgBpG,EAAI2G,GAC3B3G,EAAGoG,gBAAgBO,GAOrB,SAASC,KACP,IAASC,KAAKC,QAEd,IAASC,cAAgB,WACvB,OAAO,GAQX,SAASC,KACP,IAASD,cAAgB,WACvB,OAAO,GAwBX,SAASE,GAAsBjH,GAC7B,GAAIA,GAAMA,EAAGiH,uBAAyBjH,EAAGkH,WAAY,CACnD,IAAIC,EAAOnH,EAAGiH,wBACVtF,EAAS,GAeb,MAdA,CAAC,SAAU,SAAU,OAAQ,QAAS,MAAO,SAAStC,SAAQ,SAAU+H,QACtDC,IAAZF,EAAKC,KACPzF,EAAOyF,GAAKD,EAAKC,OAIhBzF,EAAO2F,SACV3F,EAAO2F,OAASzG,WAAWd,GAAcC,EAAI,YAG1C2B,EAAO4F,QACV5F,EAAO4F,MAAQ1G,WAAWd,GAAcC,EAAI,WAGvC2B,GA8BX,SAAS6F,GAAaxH,GACpB,IAAKA,GAAMA,IAAOA,EAAGyH,aACnB,MAAO,CACLC,KAAM,EACNC,IAAK,EACLJ,MAAO,EACPD,OAAQ,GASZ,IALA,IAAIC,EAAQvH,EAAG4H,YACXN,EAAStH,EAAG6H,aACZH,EAAO,EACPC,EAAM,EAEH3H,EAAGyH,cAAgBzH,IAAO,IAASrE,EAAcmM,oBACtDJ,GAAQ1H,EAAG+H,WACXJ,GAAO3H,EAAGgI,UACVhI,EAAKA,EAAGyH,aAGV,MAAO,CACLC,KAAMA,EACNC,IAAKA,EACLJ,MAAOA,EACPD,OAAQA,GAgCZ,SAASW,GAAmBjI,EAAIkI,GAC9B,IAAIC,EAAa,CACf/E,EAAG,EACHgF,EAAG,GAGL,GAAI7F,GAGF,IAFA,IAAI8F,EAAOrI,EAEJqI,GAAwC,SAAhCA,EAAKC,SAASC,eAA0B,CACrD,IAAIC,EAAYzI,GAAcsI,EAAM,aAEpC,GAAI,UAAU/K,KAAKkL,GAAY,CAC7B,IAAIC,EAASD,EAAU/M,MAAM,GAAI,GAAGkK,MAAM,OAAO+C,IAAIC,QACrDR,EAAW/E,GAAKqF,EAAO,GACvBN,EAAWC,GAAKK,EAAO,QAClB,GAAI,YAAYnL,KAAKkL,GAAY,CACtC,IAAII,EAAUJ,EAAU/M,MAAM,GAAI,GAAGkK,MAAM,OAAO+C,IAAIC,QAEtDR,EAAW/E,GAAKwF,EAAQ,IACxBT,EAAWC,GAAKQ,EAAQ,IAG1BP,EAAOA,EAAKnB,WAIhB,IAAI2B,EAAW,GACXC,EAAYtB,GAAaU,EAAM1I,QAC/BuJ,EAAMvB,GAAaxH,GACnBgJ,EAAOD,EAAIxB,MACX0B,EAAOF,EAAIzB,OACX4B,EAAUhB,EAAMgB,SAAWH,EAAIpB,IAAMmB,EAAUnB,KAC/CwB,EAAUjB,EAAMiB,SAAWJ,EAAIrB,KAAOoB,EAAUpB,MAcpD,OAZIQ,EAAMkB,iBACRD,EAAUjB,EAAMkB,eAAe,GAAGC,MAAQN,EAAIrB,KAC9CwB,EAAUhB,EAAMkB,eAAe,GAAGE,MAAQP,EAAIpB,IAE1CpF,KACF4G,GAAWhB,EAAW/E,EACtB8F,GAAWf,EAAWC,IAI1BS,EAAST,EAAI,EAAImB,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGP,EAAUD,IACnDJ,EAASzF,EAAImG,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGN,EAAUH,IACxCH,EAaT,SAASa,GAAW9J,GAClB,OAAOT,GAASS,IAA6B,IAAnBA,EAAMqD,SAalC,SAAS0G,GAAQ3J,GACf,KAAOA,EAAG4E,YACR5E,EAAG4J,YAAY5J,EAAG4E,YAGpB,OAAO5E,EAoCT,SAAS6J,GAAiB9F,GASxB,MANuB,oBAAZA,IACTA,EAAUA,MAKJpH,MAAMY,QAAQwG,GAAWA,EAAU,CAACA,IAAU2E,KAAI,SAAU9I,GAOlE,MAJqB,oBAAVA,IACTA,EAAQA,KAGNoD,GAAKpD,IAAU8J,GAAW9J,GACrBA,EAGY,kBAAVA,GAAsB,KAAKtC,KAAKsC,GAClC,IAASkK,eAAelK,QADjC,KAGCzB,QAAO,SAAUyB,GAClB,OAAOA,KAiBX,SAAS2E,GAAcvE,EAAI+D,GAIzB,OAHA8F,GAAiB9F,GAAS1E,SAAQ,SAAU0K,GAC1C,OAAO/J,EAAG8E,YAAYiF,MAEjB/J,EAiBT,SAASgK,GAAchK,EAAI+D,GACzB,OAAOQ,GAAcoF,GAAQ3J,GAAK+D,GAapC,SAASkG,GAAkB/B,GAIzB,YAAqBb,IAAjBa,EAAMgC,aAA0C7C,IAAlBa,EAAMiC,UAcnB,IAAjBjC,EAAMgC,aAAkC7C,IAAlBa,EAAMiC,UAQb,YAAfjC,EAAM/M,MAAuC,IAAjB+M,EAAMgC,QAAkC,IAAlBhC,EAAMiC,SAIvC,IAAjBjC,EAAMgC,QAAkC,IAAlBhC,EAAMiC,UA4BlC,IA4DIC,GA5DAC,GAAIhH,GAAc,iBAoBlBiH,GAAKjH,GAAc,oBACnBkH,GAAmBvL,OAAO0D,OAAO,CACnCC,UAAW,KACXV,OAAQA,GACRe,KAAMA,GACNE,UAAWA,GACXS,SAAUA,GACVU,YAAaA,GACbK,UAAWA,GACXK,SAAUA,GACVM,SAAUA,GACVG,YAAaA,GACbM,YAAaA,GACbI,cAAeA,GACfG,cAAeA,GACfK,aAAcA,GACdtC,aAAcA,GACdgC,gBAAiBA,GACjBQ,mBAAoBA,GACpBI,qBAAsBA,GACtBC,sBAAuBA,GACvBO,aAAcA,GACdS,mBAAoBA,GACpByB,WAAYA,GACZC,QAASA,GACTE,iBAAkBA,GAClBtF,cAAeA,GACfyF,cAAeA,GACfC,kBAAmBA,GACnBI,EAAGA,GACHC,GAAIA,KASFE,IAAgB,EAMhBC,GAAY,WACd,IAAoC,IAAhCL,GAAUM,QAAQD,UAAtB,CAIA,IAAIE,EAAOhO,MAAM7B,UAAUW,MAAMqE,KAAK,IAAS8K,qBAAqB,UAChEC,EAASlO,MAAM7B,UAAUW,MAAMqE,KAAK,IAAS8K,qBAAqB,UAClEE,EAAOnO,MAAM7B,UAAUW,MAAMqE,KAAK,IAAS8K,qBAAqB,aAChEG,EAAWJ,EAAKtP,OAAOwP,EAAQC,GAEnC,GAAIC,GAAYA,EAAS/O,OAAS,EAChC,IAAK,IAAID,EAAI,EAAGqE,EAAI2K,EAAS/O,OAAQD,EAAIqE,EAAGrE,IAAK,CAC/C,IAAIiP,EAAUD,EAAShP,GAEvB,IAAIiP,IAAWA,EAAQtE,aAYhB,CACLuE,GAAiB,GACjB,WAZuB5D,IAAnB2D,EAAQE,QAIM,OAHFF,EAAQtE,aAAa,eAKjC0D,GAAUY,QAURR,IACVS,GAAiB,KAerB,SAASA,GAAiBE,EAAMC,GAEzBnJ,OAIDmJ,IACFhB,GAAYgB,GAGd,IAASC,WAAWZ,GAAWU,IASjC,SAASG,KACPd,IAAgB,EAChB,IAASe,oBAAoB,OAAQD,IAGnCrJ,OAC0B,aAAxB,IAASuJ,WACXF,KAUA,IAASG,iBAAiB,OAAQH,KAmBtC,IA2DII,GA3DAC,GAAqB,SAA4BvG,GACnD,IAAIwG,EAAQ,IAAS5H,cAAc,SAEnC,OADA4H,EAAMxG,UAAYA,EACXwG,GAaLC,GAAiB,SAAwB7L,EAAI+D,GAC3C/D,EAAG8L,WACL9L,EAAG8L,WAAWC,QAAUhI,EAExB/D,EAAGqE,YAAcN,GAsBjBiI,GAPe,EAenB,SAASC,KACP,OAAOD,KAUJ,IAASE,UACZR,GAA2B,WACzB,SAASA,IACPS,KAAKC,MAAQ,QAAU7C,KAAK8C,MAAM,IAASC,aAAe,IAASA,YAAYrS,OAASD,KAAKC,OAC7FkS,KAAKI,KAAO,GAGd,IAAIC,EAASd,EAAY5Q,UAwCzB,OAtCA0R,EAAOC,IAAM,SAAanN,EAAKM,GAC7B,IAAI8M,EAASpN,EAAI6M,KAAKC,QAAUH,KAOhC,OALK3M,EAAI6M,KAAKC,SACZ9M,EAAI6M,KAAKC,OAASM,GAGpBP,KAAKI,KAAKG,GAAU9M,EACbuM,MAGTK,EAAOG,IAAM,SAAarN,GACxB,IAAIoN,EAASpN,EAAI6M,KAAKC,OAEtB,GAAIM,EACF,OAAOP,KAAKI,KAAKG,GAKnBvQ,EAAM,mCAAoCmD,IAI5CkN,EAAOvG,IAAM,SAAa3G,GAExB,OADaA,EAAI6M,KAAKC,SACLD,KAAKI,MAGxBC,EAAe,OAAI,SAAiBlN,GAClC,IAAIoN,EAASpN,EAAI6M,KAAKC,OAElBM,WACKP,KAAKI,KAAKG,UACVpN,EAAI6M,KAAKC,SAIbV,EA9CkB,IA6D7B,IAyMIkB,GAzMAC,GAAU,IAASX,QAAU,IAAIA,QAAY,IAAIR,GAqBrD,SAASoB,GAAeC,EAAM5R,GAC5B,GAAK0R,GAAQ5G,IAAI8G,GAAjB,CAIA,IAAIR,EAAOM,GAAQF,IAAII,GAEY,IAA/BR,EAAKS,SAAS7R,GAAMa,gBACfuQ,EAAKS,SAAS7R,GAIjB4R,EAAKxB,oBACPwB,EAAKxB,oBAAoBpQ,EAAMoR,EAAKU,YAAY,GACvCF,EAAKG,aACdH,EAAKG,YAAY,KAAO/R,EAAMoR,EAAKU,aAKnCjO,OAAOiF,oBAAoBsI,EAAKS,UAAUhR,QAAU,WAC/CuQ,EAAKS,gBACLT,EAAKU,kBACLV,EAAKY,UAIkC,IAA5CnO,OAAOiF,oBAAoBsI,GAAMvQ,QACnC6Q,GAAgB,OAAEE,IAoBtB,SAASK,GAAsBhS,EAAI2R,EAAMM,EAAOC,GAC9CD,EAAMhO,SAAQ,SAAUlE,GAEtBC,EAAG2R,EAAM5R,EAAMmS,MAcnB,SAASC,GAASrF,GAChB,GAAIA,EAAMsF,OACR,OAAOtF,EAGT,SAASuF,IACP,OAAO,EAGT,SAASC,IACP,OAAO,EAQT,IAAKxF,IAAUA,EAAMyF,uBAAyBzF,EAAM0F,8BAA+B,CACjF,IAAIC,EAAM3F,GAAS,IAASA,MAO5B,IAAK,IAAI5I,KANT4I,EAAQ,GAMQ2F,EAIF,WAARvO,GAA4B,WAARA,GAA4B,gBAARA,GAAiC,oBAARA,GAAqC,oBAARA,IAGlF,gBAARA,GAAyBuO,EAAIC,iBACjC5F,EAAM5I,GAAOuO,EAAIvO,KAmDvB,GA7CK4I,EAAM1I,SACT0I,EAAM1I,OAAS0I,EAAM6F,YAAc,KAIhC7F,EAAM8F,gBACT9F,EAAM8F,cAAgB9F,EAAM+F,cAAgB/F,EAAM1I,OAAS0I,EAAMgG,UAAYhG,EAAM+F,aAIrF/F,EAAM4F,eAAiB,WACjBD,EAAIC,gBACND,EAAIC,iBAGN5F,EAAMiG,aAAc,EACpBN,EAAIM,aAAc,EAClBjG,EAAMkG,kBAAmB,GAG3BlG,EAAMkG,kBAAmB,EAEzBlG,EAAMmG,gBAAkB,WAClBR,EAAIQ,iBACNR,EAAIQ,kBAGNnG,EAAMoG,cAAe,EACrBT,EAAIS,cAAe,EACnBpG,EAAMyF,qBAAuBF,GAG/BvF,EAAMyF,qBAAuBD,EAE7BxF,EAAMqG,yBAA2B,WAC3BV,EAAIU,0BACNV,EAAIU,2BAGNrG,EAAM0F,8BAAgCH,EACtCvF,EAAMmG,mBAGRnG,EAAM0F,8BAAgCF,EAEhB,OAAlBxF,EAAMsG,cAAsCnH,IAAlBa,EAAMsG,QAAuB,CACzD,IAAIC,EAAM,IAASC,gBACf7H,EAAO,IAASA,KACpBqB,EAAMmB,MAAQnB,EAAMsG,SAAWC,GAAOA,EAAIE,YAAc9H,GAAQA,EAAK8H,YAAc,IAAMF,GAAOA,EAAIG,YAAc/H,GAAQA,EAAK+H,YAAc,GAC7I1G,EAAMoB,MAAQpB,EAAM2G,SAAWJ,GAAOA,EAAIK,WAAajI,GAAQA,EAAKiI,WAAa,IAAML,GAAOA,EAAIM,WAAalI,GAAQA,EAAKkI,WAAa,GAI3I7G,EAAM8G,MAAQ9G,EAAM+G,UAAY/G,EAAMgH,QAGjB,OAAjBhH,EAAMgC,aAAoC7C,IAAjBa,EAAMgC,SAKjChC,EAAMgC,OAAwB,EAAfhC,EAAMgC,OAAa,EAAmB,EAAfhC,EAAMgC,OAAa,EAAmB,EAAfhC,EAAMgC,OAAa,EAAI,GAOxF,OAFAhC,EAAMsF,QAAS,EAERtF,EAST,IAuBIiH,GAAgB,CAAC,aAAc,aAiBnC,SAASC,GAAGrC,EAAM5R,EAAMC,GACtB,GAAIuB,MAAMY,QAAQpC,GAChB,OAAOiS,GAAsBgC,GAAIrC,EAAM5R,EAAMC,GAG1CyR,GAAQ5G,IAAI8G,IACfF,GAAQJ,IAAIM,EAAM,IAGpB,IAAIR,EAAOM,GAAQF,IAAII,GA8CvB,GA5CKR,EAAKS,WACRT,EAAKS,SAAW,IAGbT,EAAKS,SAAS7R,KACjBoR,EAAKS,SAAS7R,GAAQ,IAGnBC,EAAGiU,OACNjU,EAAGiU,KAAOpD,MAGZM,EAAKS,SAAS7R,GAAMgC,KAAK/B,GAEpBmR,EAAKU,aACRV,EAAKY,UAAW,EAEhBZ,EAAKU,WAAa,SAAU/E,EAAOoH,GACjC,IAAI/C,EAAKY,SAAT,CAIAjF,EAAQqF,GAASrF,GACjB,IAAI8E,EAAWT,EAAKS,SAAS9E,EAAM/M,MAEnC,GAAI6R,EAIF,IAFA,IAAIuC,EAAevC,EAASvR,MAAM,GAEzB+T,EAAI,EAAGC,EAAIF,EAAavT,OAAQwT,EAAIC,IACvCvH,EAAM0F,gCADoC4B,IAI5C,IACED,EAAaC,GAAG1P,KAAKiN,EAAM7E,EAAOoH,GAClC,MAAOlP,GACPjE,EAAM4B,MAAMqC,OAQW,IAA/BmM,EAAKS,SAAS7R,GAAMa,OACtB,GAAI+Q,EAAKtB,iBAAkB,CACzB,IAAIf,GAAU,GAjGE,WACpB,GAAgC,mBAArBkC,GAAgC,CACzCA,IAAmB,EAEnB,IACE,IAAI8C,EAAO1Q,OAAO2Q,eAAe,GAAI,UAAW,CAC9ChD,IAAK,WACHC,IAAmB,KAGvB,IAASnB,iBAAiB,OAAQ,KAAMiE,GACxC,IAASnE,oBAAoB,OAAQ,KAAMmE,GAC3C,MAAOtP,KAIX,OAAOwM,IAmFCgD,IAAqBT,GAAc3T,QAAQL,IAAS,IACtDuP,EAAU,CACRmF,SAAS,IAIb9C,EAAKtB,iBAAiBtQ,EAAMoR,EAAKU,WAAYvC,QACpCqC,EAAK+C,aACd/C,EAAK+C,YAAY,KAAO3U,EAAMoR,EAAKU,YAmBzC,SAASrP,GAAImP,EAAM5R,EAAMC,GAEvB,GAAKyR,GAAQ5G,IAAI8G,GAAjB,CAIA,IAAIR,EAAOM,GAAQF,IAAII,GAEvB,GAAKR,EAAKS,SAAV,CAIA,GAAIrQ,MAAMY,QAAQpC,GAChB,OAAOiS,GAAsBxP,GAAKmP,EAAM5R,EAAMC,GAIhD,IAAI2U,EAAa,SAAoB/P,EAAIgQ,GACvCzD,EAAKS,SAASgD,GAAK,GAEnBlD,GAAe9M,EAAIgQ,IAIrB,QAAa3I,IAATlM,EAAJ,CAUA,IAAI6R,EAAWT,EAAKS,SAAS7R,GAE7B,GAAK6R,EAKL,GAAK5R,EAAL,CAMA,GAAIA,EAAGiU,KACL,IAAK,IAAII,EAAI,EAAGA,EAAIzC,EAAShR,OAAQyT,IAC/BzC,EAASyC,GAAGJ,OAASjU,EAAGiU,MAC1BrC,EAAStR,OAAO+T,IAAK,GAK3B3C,GAAeC,EAAM5R,QAbnB4U,EAAWhD,EAAM5R,QAjBjB,IAAK,IAAI6U,KAAKzD,EAAKS,SACbhO,OAAOlE,UAAUmD,eAAe6B,KAAKyM,EAAKS,UAAY,GAAIgD,IAC5DD,EAAWhD,EAAMiD,KAgDzB,SAASC,GAAQlD,EAAM7E,EAAOoH,GAI5B,IAAIY,EAAWrD,GAAQ5G,IAAI8G,GAAQF,GAAQF,IAAII,GAAQ,GACnD5J,EAAS4J,EAAK7F,YAAc6F,EAAKoD,cAsBrC,GAlBqB,kBAAVjI,EACTA,EAAQ,CACN/M,KAAM+M,EACN1I,OAAQuN,GAEA7E,EAAM1I,SAChB0I,EAAM1I,OAASuN,GAIjB7E,EAAQqF,GAASrF,GAEbgI,EAASjD,YACXiD,EAASjD,WAAWnN,KAAKiN,EAAM7E,EAAOoH,GAKpCnM,IAAW+E,EAAMyF,yBAA4C,IAAlBzF,EAAMkI,QACnDH,GAAQnQ,KAAK,KAAMqD,EAAQ+E,EAAOoH,QAC7B,IAAKnM,IAAW+E,EAAMkG,kBAAoBlG,EAAM1I,QAAU0I,EAAM1I,OAAO0I,EAAM/M,MAAO,CACpF0R,GAAQ5G,IAAIiC,EAAM1I,SACrBqN,GAAQJ,IAAIvE,EAAM1I,OAAQ,IAG5B,IAAI6Q,EAAaxD,GAAQF,IAAIzE,EAAM1I,QAE/B0I,EAAM1I,OAAO0I,EAAM/M,QAErBkV,EAAWlD,UAAW,EAEkB,oBAA7BjF,EAAM1I,OAAO0I,EAAM/M,OAC5B+M,EAAM1I,OAAO0I,EAAM/M,QAIrBkV,EAAWlD,UAAW,GAK1B,OAAQjF,EAAMkG,iBAgBhB,SAASkC,GAAIvD,EAAM5R,EAAMC,GACvB,GAAIuB,MAAMY,QAAQpC,GAChB,OAAOiS,GAAsBkD,GAAKvD,EAAM5R,EAAMC,GAGhD,IAAImV,EAAO,SAASA,IAClB3S,GAAImP,EAAM5R,EAAMoV,GAChBnV,EAAGsE,MAAMyM,KAAMzS,YAIjB6W,EAAKlB,KAAOjU,EAAGiU,KAAOjU,EAAGiU,MAAQpD,KACjCmD,GAAGrC,EAAM5R,EAAMoV,GAiBjB,SAASC,GAAIzD,EAAM5R,EAAMC,GACvB,IAAImV,EAAO,SAASA,IAClB3S,GAAImP,EAAM5R,EAAMoV,GAChBnV,EAAGsE,MAAMyM,KAAMzS,YAIjB6W,EAAKlB,KAAOjU,EAAGiU,KAAOjU,EAAGiU,MAAQpD,KAEjCmD,GAAGrC,EAAM5R,EAAMoV,GAGjB,IA+UIE,GA/UAC,GAAsB1R,OAAO0D,OAAO,CACtCC,UAAW,KACX4K,SAAUA,GACV6B,GAAIA,GACJxR,IAAKA,GACLqS,QAASA,GACTK,IAAKA,GACLE,IAAKA,KAOHG,GAA0B,GAsB1BC,GAAO,SAAcpN,EAASpI,EAAIyV,GAE/BzV,EAAGiU,OACNjU,EAAGiU,KAAOpD,MAIZ,IAAI6E,EAAQ1V,EAAGwV,KAAKpN,GAQpB,OADAsN,EAAMzB,KAAOwB,EAAMA,EAAM,IAAMzV,EAAGiU,KAAOjU,EAAGiU,KACrCyB,GAiBLC,GAAW,SAAkB3V,EAAI+P,GACnC,IAAI6F,EAAO,IAAS1E,YAAYrS,MAWhC,OATgB,WACd,IAAIA,EAAM,IAASqS,YAAYrS,MAE3BA,EAAM+W,GAAQ7F,IAChB/P,EAAGsE,WAAM,EAAQhG,WACjBsX,EAAO/W,KAwFTgX,GAAgB,aAgCpBA,GAAcnW,UAAUoW,eAAiB,GAYzCD,GAAcnW,UAAUsU,GAAK,SAAUjU,EAAMC,GAG3C,IAAI+V,EAAMhF,KAAKV,iBAEfU,KAAKV,iBAAmB,aAExB2D,GAAGjD,KAAMhR,EAAMC,GACf+Q,KAAKV,iBAAmB0F,GAW1BF,GAAcnW,UAAU2Q,iBAAmBwF,GAAcnW,UAAUsU,GAanE6B,GAAcnW,UAAU8C,IAAM,SAAUzC,EAAMC,GAC5CwC,GAAIuO,KAAMhR,EAAMC,IAWlB6V,GAAcnW,UAAUyQ,oBAAsB0F,GAAcnW,UAAU8C,IAatEqT,GAAcnW,UAAUwV,IAAM,SAAUnV,EAAMC,GAG5C,IAAI+V,EAAMhF,KAAKV,iBAEfU,KAAKV,iBAAmB,aAExB6E,GAAInE,KAAMhR,EAAMC,GAChB+Q,KAAKV,iBAAmB0F,GAG1BF,GAAcnW,UAAU0V,IAAM,SAAUrV,EAAMC,GAG5C,IAAI+V,EAAMhF,KAAKV,iBAEfU,KAAKV,iBAAmB,aAExB+E,GAAIrE,KAAMhR,EAAMC,GAChB+Q,KAAKV,iBAAmB0F,GAoB1BF,GAAcnW,UAAUmV,QAAU,SAAU/H,GAC1C,IAAI/M,EAAO+M,EAAM/M,MAAQ+M,EAMJ,kBAAVA,IACTA,EAAQ,CACN/M,KAAMA,IAIV+M,EAAQqF,GAASrF,GAEbiE,KAAK+E,eAAe/V,IAASgR,KAAK,KAAOhR,IAC3CgR,KAAK,KAAOhR,GAAM+M,GAGpB+H,GAAQ9D,KAAMjE,IAWhB+I,GAAcnW,UAAUsW,cAAgBH,GAAcnW,UAAUmV,QAGhEgB,GAAcnW,UAAUuW,aAAe,SAAUnJ,GAC/C,IAAIoJ,EAAQnF,KAGPsE,KACHA,GAAY,IAAIc,KAGlB,IAAIpW,EAAO+M,EAAM/M,MAAQ+M,EACrBQ,EAAM+H,GAAU9D,IAAIR,MAEnBzD,IACHA,EAAM,IAAI6I,IACVd,GAAUhE,IAAIN,KAAMzD,IAGtB,IAAI8I,EAAa9I,EAAIiE,IAAIxR,GACzBuN,EAAY,OAAEvN,GACd,IAASsW,aAAaD,GACtB,IAAIE,EAAU,IAASrG,YAAW,WAEf,IAAb3C,EAAIiJ,OACNjJ,EAAM,KACN+H,GAAkB,OAAEa,IAGtBA,EAAMrB,QAAQ/H,KACb,GACHQ,EAAI+D,IAAItR,EAAMuW,IAQhB,IAAIE,GAAU,SAAiBlX,GAC7B,MAAwB,oBAAbA,EAAI2B,KACN3B,EAAI2B,OAGW,kBAAb3B,EAAI2B,KACN3B,EAAI2B,KAGT3B,EAAImX,MACCnX,EAAImX,MAGTnX,EAAIG,aAAeH,EAAIG,YAAYwB,KAC9B3B,EAAIG,YAAYwB,KAGlB5B,EAAQC,IAaboX,GAAY,SAAmB5S,GACjC,OAAOA,aAAkB+R,MAAmB/R,EAAO6S,aAAe,CAAC,KAAM,MAAO,MAAO,WAAWC,OAAM,SAAU5K,GAChH,MAA4B,oBAAdlI,EAAOkI,OAoCrB6K,GAAmB,SAA0B9W,GAC/C,MAEkB,kBAATA,GAAqB,KAAKmC,KAAKnC,IAASwB,MAAMY,QAAQpC,MAAWA,EAAKa,QAqB7EkW,GAAiB,SAAwB1S,EAAQ9E,EAAKyX,GACxD,IAAK3S,IAAWA,EAAO8I,WAAawJ,GAAUtS,GAC5C,MAAM,IAAItB,MAAM,sBAAwB0T,GAAQlX,GAAO,IAAMyX,EAAS,4CAqBtEC,GAAoB,SAA2BjX,EAAMT,EAAKyX,GAC5D,IAAKF,GAAiB9W,GACpB,MAAM,IAAI+C,MAAM,0BAA4B0T,GAAQlX,GAAO,IAAMyX,EAAS,2CAqB1EE,GAAmB,SAA0BC,EAAU5X,EAAKyX,GAC9D,GAAwB,oBAAbG,EACT,MAAM,IAAIpU,MAAM,wBAA0B0T,GAAQlX,GAAO,IAAMyX,EAAS,0BAuBxEI,GAAsB,SAA6BjY,EAAMoC,EAAMyV,GAGjE,IACI3S,EACArE,EACAmX,EAHAE,EAAkB9V,EAAKV,OAAS,GAAKU,EAAK,KAAOpC,GAAQoC,EAAK,KAAOpC,EAAKyX,YAyB9E,OApBIS,GACFhT,EAASlF,EAAKyX,YAGVrV,EAAKV,QAAU,GACjBU,EAAK+V,QAGPtX,EAAOuB,EAAK,GACZ4V,EAAW5V,EAAK,KAEhB8C,EAAS9C,EAAK,GACdvB,EAAOuB,EAAK,GACZ4V,EAAW5V,EAAK,IAGlBwV,GAAe1S,EAAQlF,EAAM6X,GAC7BC,GAAkBjX,EAAMb,EAAM6X,GAC9BE,GAAiBC,EAAUhY,EAAM6X,GAE1B,CACLK,gBAAiBA,EACjBhT,OAAQA,EACRrE,KAAMA,EACNmX,SALFA,EAAW1B,GAAKtW,EAAMgY,KA2BpBI,GAAS,SAAgBlT,EAAQ8D,EAAQnI,EAAMmX,GACjDJ,GAAe1S,EAAQA,EAAQ8D,GAE3B9D,EAAO8I,SACToI,GAAOpN,GAAQ9D,EAAQrE,EAAMmX,GAE7B9S,EAAO8D,GAAQnI,EAAMmX,IAWrBK,GAAe,CAwBjBvD,GAAI,WAGF,IAFA,IAAIkC,EAAQnF,KAEH1P,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB,IAAIgW,EAAuBL,GAAoBpG,KAAMzP,EAAM,MACvD8V,EAAkBI,EAAqBJ,gBACvChT,EAASoT,EAAqBpT,OAC9BrE,EAAOyX,EAAqBzX,KAC5BmX,EAAWM,EAAqBN,SAIpC,GAFAI,GAAOlT,EAAQ,KAAMrE,EAAMmX,IAEtBE,EAAiB,CAEpB,IAAIK,EAA0B,WAC5B,OAAOvB,EAAM1T,IAAI4B,EAAQrE,EAAMmX,IAKjCO,EAAwBxD,KAAOiD,EAASjD,KAIxC,IAAIyD,EAA+B,WACjC,OAAOxB,EAAM1T,IAAI,UAAWiV,IAK9BC,EAA6BzD,KAAOiD,EAASjD,KAC7CqD,GAAOvG,KAAM,KAAM,UAAW0G,GAC9BH,GAAOlT,EAAQ,KAAM,UAAWsT,KA2BpCxC,IAAK,WAGH,IAFA,IAAIyC,EAAS5G,KAEJ1N,EAAQ/E,UAAUsC,OAAQU,EAAO,IAAIC,MAAM8B,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFhC,EAAKgC,GAAShF,UAAUgF,GAG1B,IAAIsU,EAAwBT,GAAoBpG,KAAMzP,EAAM,OACxD8V,EAAkBQ,EAAsBR,gBACxChT,EAASwT,EAAsBxT,OAC/BrE,EAAO6X,EAAsB7X,KAC7BmX,EAAWU,EAAsBV,SAGrC,GAAIE,EACFE,GAAOlT,EAAQ,MAAOrE,EAAMmX,OACvB,CAKL,IAAIW,EAAU,SAASA,IACrBF,EAAOnV,IAAI4B,EAAQrE,EAAM8X,GAEzB,IAAK,IAAItU,EAAQjF,UAAUsC,OAAQkX,EAAQ,IAAIvW,MAAMgC,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACrFsU,EAAMtU,GAASlF,UAAUkF,GAG3B0T,EAAS5S,MAAM,KAAMwT,IAKvBD,EAAQ5D,KAAOiD,EAASjD,KACxBqD,GAAOlT,EAAQ,MAAOrE,EAAM8X,KA4BhCzC,IAAK,WAGH,IAFA,IAAI2C,EAAShH,KAEJtN,EAAQnF,UAAUsC,OAAQU,EAAO,IAAIC,MAAMkC,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFpC,EAAKoC,GAASpF,UAAUoF,GAG1B,IAAIsU,EAAwBb,GAAoBpG,KAAMzP,EAAM,OACxD8V,EAAkBY,EAAsBZ,gBACxChT,EAAS4T,EAAsB5T,OAC/BrE,EAAOiY,EAAsBjY,KAC7BmX,EAAWc,EAAsBd,SAGrC,GAAIE,EACFE,GAAOlT,EAAQ,MAAOrE,EAAMmX,OACvB,CACL,IAAIW,EAAU,SAASA,IACrBE,EAAOvV,IAAI4B,EAAQrE,EAAM8X,GAEzB,IAAK,IAAII,EAAQ3Z,UAAUsC,OAAQkX,EAAQ,IAAIvW,MAAM0W,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACrFJ,EAAMI,GAAS5Z,UAAU4Z,GAG3BhB,EAAS5S,MAAM,KAAMwT,IAKvBD,EAAQ5D,KAAOiD,EAASjD,KACxBqD,GAAOlT,EAAQ,MAAOrE,EAAM8X,KAuBhCrV,IAAK,SAAe2V,EAAcC,EAAgBlB,GAEhD,IAAKiB,GAAgBtB,GAAiBsB,GACpC3V,GAAIuO,KAAK4F,YAAawB,EAAcC,OAC/B,CACL,IAAIhU,EAAS+T,EACTpY,EAAOqY,EAEXtB,GAAe1S,EAAQ2M,KAAM,OAC7BiG,GAAkBjX,EAAMgR,KAAM,OAC9BkG,GAAiBC,EAAUnG,KAAM,OAEjCmG,EAAW1B,GAAKzE,KAAMmG,GAGtBnG,KAAKvO,IAAI,UAAW0U,GAEhB9S,EAAO8I,UACT1K,GAAI4B,EAAQrE,EAAMmX,GAClB1U,GAAI4B,EAAQ,UAAW8S,IACdR,GAAUtS,KACnBA,EAAO5B,IAAIzC,EAAMmX,GACjB9S,EAAO5B,IAAI,UAAW0U,MAiB5BrC,QAAS,SAAmB/H,EAAOoH,GACjC4C,GAAe/F,KAAK4F,YAAa5F,KAAM,WACvC,IAAIhR,EAAO+M,GAA0B,kBAAVA,EAAqBA,EAAM/M,KAAO+M,EAE7D,IAAK+J,GAAiB9W,GAAO,CAC3B,IAAI4C,EAAQ,0BAA4B6T,GAAQzF,MAApC,6FAEZ,IAAIjE,EAGF,MAAM,IAAIhK,MAAMH,IAFfoO,KAAK3P,KAAOL,GAAO4B,MAAMA,GAM9B,OAAOkS,GAAQ9D,KAAK4F,YAAa7J,EAAOoH,KAqB5C,SAASmE,GAAQjU,EAAQkL,QACP,IAAZA,IACFA,EAAU,IAGZ,IACIgJ,EADWhJ,EACYgJ,YAE3B,GAAIA,EAAa,CACf,IAAKlU,EAAOkU,GAAapL,SACvB,MAAM,IAAIpK,MAAM,oBAAuBwV,EAAc,mCAGvDlU,EAAOuS,YAAcvS,EAAOkU,QAE5BlU,EAAOuS,YAAcpO,GAAS,OAAQ,CACpCyB,UAAW,kBAwBf,OApBA7F,EAAOC,EAAQmT,IAEXnT,EAAOmU,kBACTnU,EAAOmU,iBAAiBtU,SAAQ,SAAUiO,GACxCA,OAKJ9N,EAAO4P,GAAG,WAAW,WACnB5P,EAAO5B,MACP,CAAC4B,EAAQA,EAAOoU,IAAKpU,EAAOuS,aAAa1S,SAAQ,SAAU8E,GACrDA,GAAO0I,GAAQ5G,IAAI9B,IACrB0I,GAAgB,OAAE1I,MAGtB,IAASkH,YAAW,WAClB7L,EAAOuS,YAAc,OACpB,MAEEvS,EAeT,IAAIqU,GAAgB,CAOlBC,MAAO,GAePC,SAAU,SAAkBC,GAC1B,IAOIC,EAPA3C,EAAQnF,KA0CZ,MAvC4B,oBAAjB6H,IACTA,EAAeA,KAIjB5U,EAAK4U,GAAc,SAAUpU,EAAON,GAG9BgS,EAAMwC,MAAMxU,KAASM,KACvBqU,EAAUA,GAAW,IACb3U,GAAO,CACb4U,KAAM5C,EAAMwC,MAAMxU,GAClB6U,GAAIvU,IAIR0R,EAAMwC,MAAMxU,GAAOM,KAKjBqU,GAAWnC,GAAU3F,OAYvBA,KAAK8D,QAAQ,CACXgE,QAASA,EACT9Y,KAAM,iBAIH8Y,IAsBX,SAASG,GAAS5U,EAAQ6U,GAUxB,OATA9U,EAAOC,EAAQqU,IAGfrU,EAAOsU,MAAQvU,EAAO,GAAIC,EAAOsU,MAAOO,GAEC,oBAA9B7U,EAAO8U,oBAAqCxC,GAAUtS,IAC/DA,EAAO4P,GAAG,eAAgB5P,EAAO8U,oBAG5B9U,EAkBT,IAAI+I,GAAc,SAAqBgM,GACrC,MAAsB,kBAAXA,EACFA,EAGFA,EAAOC,QAAQ,KAAK,SAAUC,GACnC,OAAOA,EAAElM,kBAcTmM,GAAgB,SAAqBH,GACvC,MAAsB,kBAAXA,EACFA,EAGFA,EAAOC,QAAQ,KAAK,SAAUC,GACnC,OAAOA,EAAEvX,kBA4Cb,SAASyX,KAGP,IAFA,IAAIhT,EAAS,GAEJlF,EAAO/C,UAAUsC,OAAQyD,EAAU,IAAI9C,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClF6C,EAAQ7C,GAAQlD,UAAUkD,GAqB5B,OAlBA6C,EAAQJ,SAAQ,SAAUM,GACnBA,GAILP,EAAKO,GAAQ,SAAUC,EAAON,GACvBO,GAAQD,IAKRC,GAAQ8B,EAAOrC,MAClBqC,EAAOrC,GAAO,IAGhBqC,EAAOrC,GAAOqV,GAAehT,EAAOrC,GAAMM,IARxC+B,EAAOrC,GAAOM,QAWb+B,EAGT,IAAIiT,GAAuB,WACzB,SAASA,IACPzI,KAAK0I,KAAO,GAGd,IAAIrI,EAASoI,EAAQ9Z,UAuBrB,OArBA0R,EAAOvG,IAAM,SAAa3G,GACxB,OAAOA,KAAO6M,KAAK0I,MAGrBrI,EAAe,OAAI,SAAiBlN,GAClC,IAAI2G,EAAMkG,KAAKlG,IAAI3G,GAEnB,cADO6M,KAAK0I,KAAKvV,GACV2G,GAGTuG,EAAOC,IAAM,SAAanN,EAAKM,GAE7B,OADAuM,KAAK0I,KAAKvV,GAAOM,EACVuM,MAGTK,EAAOnN,QAAU,SAAiBiO,EAAUwH,GAC1C,IAAK,IAAIxV,KAAO6M,KAAK0I,KACnBvH,EAASxN,KAAKgV,EAAS3I,KAAK0I,KAAKvV,GAAMA,EAAK6M,OAIzCyI,EA5BkB,GA+BvBG,GAAQ,IAASxD,IAAM,IAASA,IAAMqD,GAEtCI,GAAuB,WACzB,SAASA,IACP7I,KAAK8I,KAAO,GAGd,IAAIzI,EAASwI,EAAQla,UAuBrB,OArBA0R,EAAOvG,IAAM,SAAa3G,GACxB,OAAOA,KAAO6M,KAAK8I,MAGrBzI,EAAe,OAAI,SAAiBlN,GAClC,IAAI2G,EAAMkG,KAAKlG,IAAI3G,GAEnB,cADO6M,KAAK8I,KAAK3V,GACV2G,GAGTuG,EAAOjH,IAAM,SAAajG,GAExB,OADA6M,KAAK8I,KAAK3V,GAAO,EACV6M,MAGTK,EAAOnN,QAAU,SAAiBiO,EAAUwH,GAC1C,IAAK,IAAIxV,KAAO6M,KAAK8I,KACnB3H,EAASxN,KAAKgV,EAASxV,EAAKA,EAAK6M,OAI9B6I,EA5BkB,GA+BvBE,GAAM,IAASA,IAAM,IAASA,IAAMF,GAgBpCG,GAA2B,WA0B7B,SAASC,EAAUlK,EAAQR,EAAS2K,GAkBlC,IAhBKnK,GAAUiB,KAAKmJ,KAClBnJ,KAAKoJ,QAAUrK,EAASiB,KAExBA,KAAKoJ,QAAUrK,EAGjBiB,KAAKqJ,aAAc,EAEnBrJ,KAAKsJ,iBAAmB,KAExBtJ,KAAKuJ,SAAWf,GAAe,GAAIxI,KAAKuJ,UAExChL,EAAUyB,KAAKuJ,SAAWf,GAAexI,KAAKuJ,SAAUhL,GAExDyB,KAAKwJ,IAAMjL,EAAQkL,IAAMlL,EAAQ1K,IAAM0K,EAAQ1K,GAAG4V,IAE7CzJ,KAAKwJ,IAAK,CAEb,IAAIC,EAAK1K,GAAUA,EAAO0K,IAAM1K,EAAO0K,MAAQ,YAC/CzJ,KAAKwJ,IAAMC,EAAK,cAAgB3J,KAGlCE,KAAK0F,MAAQnH,EAAQrO,MAAQ,KAEzBqO,EAAQ1K,GACVmM,KAAKyH,IAAMlJ,EAAQ1K,IACW,IAArB0K,EAAQ/G,WACjBwI,KAAKyH,IAAMzH,KAAKxI,aAIM,IAApB+G,EAAQ+I,UAEVA,GAAQtH,KAAM,CACZuH,YAAavH,KAAKyH,IAAM,MAAQ,OAElCzH,KAAK0J,qBAAuB1J,KAAK0J,qBAAqBjF,KAAKzE,MAC3DA,KAAKiD,GAAGjD,KAAKoJ,QAAS,iBAAkBpJ,KAAK0J,uBAG/CzB,GAASjI,KAAMA,KAAKtR,YAAYwZ,cAChClI,KAAK2J,UAAY,GACjB3J,KAAK4J,YAAc,GACnB5J,KAAK6J,gBAAkB,GACvB7J,KAAK8J,eAAiB,IAAIf,GAC1B/I,KAAK+J,gBAAkB,IAAIhB,GAC3B/I,KAAKgK,QAAU,IAAIjB,GACnB/I,KAAKiK,WAAa,IAAIrB,GACtB5I,KAAKkK,0BAA2B,GAEH,IAAzB3L,EAAQ4L,cACVnK,KAAKmK,eAKPnK,KAAKkJ,MAAMA,IAEyB,IAAhC3K,EAAQ6L,qBACVpK,KAAKqK,sBAUT,IAAIhK,EAAS4I,EAAUta,UA+lDvB,OA7lDA0R,EAAOiK,QAAU,WAEf,IAAItK,KAAKqJ,YAAT,CAyBA,GArBIrJ,KAAKuK,cACPvK,KAAKuK,YAAY1a,OAAS,GAc5BmQ,KAAK8D,QAAQ,CACX9U,KAAM,UACNiV,SAAS,IAEXjE,KAAKqJ,aAAc,EAEfrJ,KAAK2J,UACP,IAAK,IAAI/Z,EAAIoQ,KAAK2J,UAAU9Z,OAAS,EAAGD,GAAK,EAAGA,IAC1CoQ,KAAK2J,UAAU/Z,GAAG0a,SACpBtK,KAAK2J,UAAU/Z,GAAG0a,UAMxBtK,KAAK2J,UAAY,KACjB3J,KAAK4J,YAAc,KACnB5J,KAAK6J,gBAAkB,KACvB7J,KAAKsJ,iBAAmB,KAEpBtJ,KAAKyH,MAEHzH,KAAKyH,IAAI1M,YACXiF,KAAKyH,IAAI1M,WAAW0C,YAAYuC,KAAKyH,KAGvCzH,KAAKyH,IAAM,MAIbzH,KAAKoJ,QAAU,OAUjB/I,EAAOmK,WAAa,WAClB,OAAO3U,QAAQmK,KAAKqJ,cAUtBhJ,EAAOtB,OAAS,WACd,OAAOiB,KAAKoJ,SAed/I,EAAO9B,QAAU,SAAiBhQ,GAChC,OAAKA,GAILyR,KAAKuJ,SAAWf,GAAexI,KAAKuJ,SAAUhb,GACvCyR,KAAKuJ,UAJHvJ,KAAKuJ,UAchBlJ,EAAOxM,GAAK,WACV,OAAOmM,KAAKyH,KAmBdpH,EAAO7I,SAAW,SAAoBC,EAASC,EAAYC,GACzD,OAAOH,GAASC,EAASC,EAAYC,IA0CvC0I,EAAOoK,SAAW,SAAkBrC,EAAQsC,EAAQC,QAC7B,IAAjBA,IACFA,EAAevC,GAGjB,IAAIwC,EAAO5K,KAAKoJ,QAAQyB,UAAY7K,KAAKoJ,QAAQyB,WAC7CC,EAAY9K,KAAKoJ,QAAQ0B,WAAa9K,KAAKoJ,QAAQ0B,YACnDD,EAAWC,GAAaA,EAAUF,GAClCG,EAAcH,GAAQA,EAAKpR,MAAM,KAAK,GACtCwR,EAAcF,GAAaA,EAAUC,GACrCE,EAAkBN,EAqBtB,OAnBIE,GAAYA,EAASzC,GACvB6C,EAAkBJ,EAASzC,GAClB4C,GAAeA,EAAY5C,KACpC6C,EAAkBD,EAAY5C,IAG5BsC,IACFO,EAAkBA,EAAgB5C,QAAQ,cAAc,SAAUlU,EAAO/E,GACvE,IAAIqE,EAAQiX,EAAOtb,EAAQ,GACvB8b,EAAMzX,EAMV,MAJqB,qBAAVA,IACTyX,EAAM/W,GAGD+W,MAIJD,GAST5K,EAAOqJ,qBAAuB,aAU9BrJ,EAAO8K,UAAY,WACjB,OAAOnL,KAAKoL,YAAcpL,KAAKyH,KAUjCpH,EAAOoJ,GAAK,WACV,OAAOzJ,KAAKwJ,KAWdnJ,EAAOnQ,KAAO,WACZ,OAAO8P,KAAK0F,OAUdrF,EAAOgL,SAAW,WAChB,OAAOrL,KAAK2J,WAadtJ,EAAOiL,aAAe,SAAsB7B,GAC1C,OAAOzJ,KAAK4J,YAAYH,IAa1BpJ,EAAOkL,SAAW,SAAkBrb,GAClC,GAAKA,EAIL,OAAO8P,KAAK6J,gBAAgB3Z,IAkB9BmQ,EAAOmL,cAAgB,WACrB,IAAK,IAAIlb,EAAO/C,UAAUsC,OAAQ4b,EAAQ,IAAIjb,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAChFgb,EAAMhb,GAAQlD,UAAUkD,GAI1Bgb,EAAQA,EAAMC,QAAO,SAAUC,EAAKrI,GAClC,OAAOqI,EAAIzc,OAAOoU,KACjB,IAGH,IAFA,IAAIsI,EAAe5L,KAEVpQ,EAAI,EAAGA,EAAI6b,EAAM5b,OAAQD,IAGhC,KAFAgc,EAAeA,EAAaL,SAASE,EAAM7b,OAErBgc,EAAaL,SACjC,OAIJ,OAAOK,GAsBTvL,EAAOwL,SAAW,SAAkBrT,EAAO+F,EAASnP,GASlD,IAAI0c,EACAC,EAEJ,QAXgB,IAAZxN,IACFA,EAAU,SAGE,IAAVnP,IACFA,EAAQ4Q,KAAK2J,UAAU9Z,QAMJ,kBAAV2I,EAAoB,CAC7BuT,EAAgBxD,GAAc/P,GAC9B,IAAIwT,EAAqBzN,EAAQ0N,gBAAkBF,EAEnDxN,EAAQrO,KAAO6b,EAGf,IAAIG,EAAiBjD,EAAUkD,aAAaH,GAE5C,IAAKE,EACH,MAAM,IAAIna,MAAM,aAAeia,EAAqB,mBAOtD,GAA8B,oBAAnBE,EACT,OAAO,KAGTJ,EAAY,IAAII,EAAelM,KAAKoJ,SAAWpJ,KAAMzB,QAErDuN,EAAYtT,EAyBd,GAtBIsT,EAAUxC,kBACZwC,EAAUxC,iBAAiB7L,YAAYqO,GAGzC9L,KAAK2J,UAAUpa,OAAOH,EAAO,EAAG0c,GAChCA,EAAUxC,iBAAmBtJ,KAED,oBAAjB8L,EAAUrC,KACnBzJ,KAAK4J,YAAYkC,EAAUrC,MAAQqC,IAKrCC,EAAgBA,GAAiBD,EAAU5b,MAAQqY,GAAcuD,EAAU5b,WAGzE8P,KAAK6J,gBAAgBkC,GAAiBD,EACtC9L,KAAK6J,gBAAgBzN,GAAY2P,IAAkBD,GAKzB,oBAAjBA,EAAUjY,IAAqBiY,EAAUjY,KAAM,CAExD,IAAIuY,EAAU,KAEVpM,KAAK2J,UAAUva,EAAQ,KAErB4Q,KAAK2J,UAAUva,EAAQ,GAAGqY,IAC5B2E,EAAUpM,KAAK2J,UAAUva,EAAQ,GAAGqY,IAC3B5Q,GAAKmJ,KAAK2J,UAAUva,EAAQ,MACrCgd,EAAUpM,KAAK2J,UAAUva,EAAQ,KAIrC4Q,KAAKmL,YAAYzS,aAAaoT,EAAUjY,KAAMuY,GAIhD,OAAON,GAWTzL,EAAO5C,YAAc,SAAqBqO,GAKxC,GAJyB,kBAAdA,IACTA,EAAY9L,KAAKuL,SAASO,IAGvBA,GAAc9L,KAAK2J,UAAxB,CAMA,IAFA,IAAI0C,GAAa,EAERzc,EAAIoQ,KAAK2J,UAAU9Z,OAAS,EAAGD,GAAK,EAAGA,IAC9C,GAAIoQ,KAAK2J,UAAU/Z,KAAOkc,EAAW,CACnCO,GAAa,EACbrM,KAAK2J,UAAUpa,OAAOK,EAAG,GACzB,MAIJ,GAAKyc,EAAL,CAIAP,EAAUxC,iBAAmB,KAC7BtJ,KAAK4J,YAAYkC,EAAUrC,MAAQ,KACnCzJ,KAAK6J,gBAAgBtB,GAAcuD,EAAU5b,SAAW,KACxD8P,KAAK6J,gBAAgBzN,GAAY0P,EAAU5b,SAAW,KACtD,IAAIoc,EAASR,EAAUjY,KAEnByY,GAAUA,EAAOvR,aAAeiF,KAAKmL,aACvCnL,KAAKmL,YAAY1N,YAAYqO,EAAUjY,SAQ3CwM,EAAO8J,aAAe,WACpB,IAAIhF,EAAQnF,KAERqL,EAAWrL,KAAKuJ,SAAS8B,SAE7B,GAAIA,EAAU,CAEZ,IAwCIkB,EAxCAC,EAAgBxM,KAAKuJ,SAyCrBkD,EAAOxD,EAAUkD,aAAa,SAGhCI,EADE/b,MAAMY,QAAQia,GACEA,EAEAxY,OAAOC,KAAKuY,IAK/Bnc,OAAO2D,OAAOC,KAAKkN,KAAKuJ,UAAUvX,QAAO,SAAUwG,GAClD,OAAQ+T,EAAgBG,MAAK,SAAUC,GACrC,MAAsB,kBAAXA,EACFnU,IAAUmU,EAGZnU,IAAUmU,EAAOzc,YAExBqM,KAAI,SAAU/D,GAChB,IAAItI,EACAqT,EAUJ,MARqB,kBAAV/K,EAET+K,EAAO8H,EADPnb,EAAOsI,IACkB2M,EAAMoE,SAASrZ,IAAS,IAEjDA,EAAOsI,EAAMtI,KACbqT,EAAO/K,GAGF,CACLtI,KAAMA,EACNqT,KAAMA,MAEPvR,QAAO,SAAUwG,GAIlB,IAAIiB,EAAIwP,EAAUkD,aAAa3T,EAAM+K,KAAK0I,gBAAkB1D,GAAc/P,EAAMtI,OAChF,OAAOuJ,IAAMgT,EAAKG,OAAOnT,MACxBvG,SA/Ea,SAAmBsF,GACjC,IAAItI,EAAOsI,EAAMtI,KACbqT,EAAO/K,EAAM+K,KAUjB,QAN4BrI,IAAxBsR,EAActc,KAChBqT,EAAOiJ,EAActc,KAKV,IAATqT,EAAJ,EAMa,IAATA,IACFA,EAAO,IAMTA,EAAKsJ,cAAgB1H,EAAMoE,SAASsD,cAKpC,IAAIC,EAAW3H,EAAM0G,SAAS3b,EAAMqT,GAEhCuJ,IACF3H,EAAMjV,GAAQ4c,SA2DtBzM,EAAO0M,cAAgB,WAGrB,MAAO,IAYT1M,EAAO6I,MAAQ,SAAeja,EAAI+d,GAKhC,QAJa,IAATA,IACFA,GAAO,GAGJ/d,EAIL,OAAK+Q,KAAKiN,cAMND,EACF/d,EAAG0E,KAAKqM,MAGRA,KAAKd,WAAWjQ,EAAI,KATpB+Q,KAAKuK,YAAcvK,KAAKuK,aAAe,QACvCvK,KAAKuK,YAAYvZ,KAAK/B,KAkB1BoR,EAAO6M,aAAe,WACpBlN,KAAKiN,UAAW,EAEhBjN,KAAKd,YAAW,WACd,IAAIiO,EAAanN,KAAKuK,YAEtBvK,KAAKuK,YAAc,GAEf4C,GAAcA,EAAWtd,OAAS,GACpCsd,EAAWja,SAAQ,SAAUjE,GAC3BA,EAAG0E,KAAKqM,QACPA,MAWLA,KAAK8D,QAAQ,WACZ,IAsBLzD,EAAOnC,EAAI,SAAa9G,EAAUC,GAChC,OAAO6G,GAAE9G,EAAUC,GAAW2I,KAAKmL,cAsBrC9K,EAAOlC,GAAK,SAAc/G,EAAUC,GAClC,OAAO8G,GAAG/G,EAAUC,GAAW2I,KAAKmL,cActC9K,EAAOzH,SAAW,SAAoBE,GACpC,OAAOF,GAASoH,KAAKyH,IAAK3O,IAU5BuH,EAAOnH,SAAW,SAAoBC,GACpCD,GAAS8G,KAAKyH,IAAKtO,IAUrBkH,EAAOhH,YAAc,SAAuBC,GAC1CD,GAAY2G,KAAKyH,IAAKnO,IAexB+G,EAAO1G,YAAc,SAAuBC,EAAeC,GACzDF,GAAYqG,KAAKyH,IAAK7N,EAAeC,IAQvCwG,EAAO+M,KAAO,WACZpN,KAAK3G,YAAY,eAQnBgH,EAAOgN,KAAO,WACZrN,KAAK9G,SAAS,eAUhBmH,EAAOiN,YAAc,WACnBtN,KAAK9G,SAAS,qBAUhBmH,EAAOkN,cAAgB,WACrBvN,KAAK3G,YAAY,qBAmBnBgH,EAAO9F,aAAe,SAAwBC,GAC5C,OAAOD,GAAayF,KAAKyH,IAAKjN,IAehC6F,EAAOpI,aAAe,SAAwBuC,EAAW/G,GACvDwE,GAAa+H,KAAKyH,IAAKjN,EAAW/G,IAYpC4M,EAAOpG,gBAAkB,SAA2BO,GAClDP,GAAgB+F,KAAKyH,IAAKjN,IAkB5B6F,EAAOjF,MAAQ,SAAeoS,EAAKC,GACjC,OAAOzN,KAAK0N,UAAU,QAASF,EAAKC,IAkBtCpN,EAAOlF,OAAS,SAAgBqS,EAAKC,GACnC,OAAOzN,KAAK0N,UAAU,SAAUF,EAAKC,IAavCpN,EAAOsN,WAAa,SAAoBvS,EAAOD,GAE7C6E,KAAK5E,MAAMA,GAAO,GAClB4E,KAAK7E,OAAOA,IAgCdkF,EAAOqN,UAAY,SAAmBE,EAAeJ,EAAKC,GACxD,QAAYvS,IAARsS,EA0BF,OAxBY,OAARA,GAAgBA,IAAQA,IAC1BA,EAAM,IAIyB,KAA5B,GAAKA,GAAKne,QAAQ,OAA6C,KAA7B,GAAKme,GAAKne,QAAQ,MACvD2Q,KAAKyH,IAAIhI,MAAMmO,GAAiBJ,EAEhCxN,KAAKyH,IAAIhI,MAAMmO,GADE,SAARJ,EACuB,GAEAA,EAAM,UAInCC,GAOHzN,KAAK8D,QAAQ,oBAQjB,IAAK9D,KAAKyH,IACR,OAAO,EAIT,IAAIzP,EAAMgI,KAAKyH,IAAIhI,MAAMmO,GACrBC,EAAU7V,EAAI3I,QAAQ,MAE1B,OAAiB,IAAbwe,EAEKC,SAAS9V,EAAI1I,MAAM,EAAGue,GAAU,IAMlCC,SAAS9N,KAAKyH,IAAI,SAAWc,GAAcqF,IAAiB,KAgBrEvN,EAAO0N,iBAAmB,SAA0BH,GAClD,IAAII,EAAwB,EAE5B,GAAsB,UAAlBJ,GAA+C,WAAlBA,EAC/B,MAAM,IAAI7b,MAAM,uDASlB,GANAic,EAAwBpa,GAAcoM,KAAKyH,IAAKmG,GAMlB,KAJ9BI,EAAwBtZ,WAAWsZ,KAIAC,MAAMD,GAAwB,CAC/D,IAAIE,EAAO,SAAW3F,GAAcqF,GACpCI,EAAwBhO,KAAKyH,IAAIyG,GAGnC,OAAOF,GA0BT3N,EAAO8N,kBAAoB,WACzB,MAAO,CACL/S,MAAO4E,KAAK+N,iBAAiB,SAC7B5S,OAAQ6E,KAAK+N,iBAAiB,YAalC1N,EAAO+N,aAAe,WACpB,OAAOpO,KAAK+N,iBAAiB,UAY/B1N,EAAOgO,cAAgB,WACrB,OAAOrO,KAAK+N,iBAAiB,WAO/B1N,EAAO1F,MAAQ,WACbqF,KAAKyH,IAAI9M,SAOX0F,EAAOiO,KAAO,WACZtO,KAAKyH,IAAI6G,QAWXjO,EAAOkO,cAAgB,SAAuBxS,GACxCiE,KAAKoJ,UAGF,IAAQoF,WAAWzS,EAAO,QAC7BA,EAAMmG,kBAGRlC,KAAKoJ,QAAQmF,cAAcxS,KAc/BsE,EAAOoO,eAAiB,SAAwB1S,GAC9CiE,KAAKuO,cAAcxS,IAiBrBsE,EAAOqO,cAAgB,WAErB,IAQIC,EARAC,EAAa,EACbC,EAAa,KAQjB7O,KAAKiD,GAAG,cAAc,SAAUlH,GAED,IAAzBA,EAAM+S,QAAQjf,SAEhBgf,EAAa,CACX3R,MAAOnB,EAAM+S,QAAQ,GAAG5R,MACxBC,MAAOpB,EAAM+S,QAAQ,GAAG3R,OAG1ByR,EAAa,IAASzO,YAAYrS,MAElC6gB,GAAa,MAGjB3O,KAAKiD,GAAG,aAAa,SAAUlH,GAE7B,GAAIA,EAAM+S,QAAQjf,OAAS,EACzB8e,GAAa,OACR,GAAIE,EAAY,CAGrB,IAAIE,EAAQhT,EAAM+S,QAAQ,GAAG5R,MAAQ2R,EAAW3R,MAC5C8R,EAAQjT,EAAM+S,QAAQ,GAAG3R,MAAQ0R,EAAW1R,MAC5BC,KAAK6R,KAAKF,EAAQA,EAAQC,EAAQA,GA3B/B,KA8BrBL,GAAa,OAKnB,IAAIO,EAAQ,WACVP,GAAa,GAIf3O,KAAKiD,GAAG,aAAciM,GACtBlP,KAAKiD,GAAG,cAAeiM,GAGvBlP,KAAKiD,GAAG,YAAY,SAAUlH,IAC5B8S,EAAa,MAEM,IAAfF,KAEc,IAASxO,YAAYrS,MAAQ8gB,EA/CxB,MAmDnB7S,EAAM4F,iBAQN3B,KAAK8D,QAAQ,aAgCrBzD,EAAOgK,oBAAsB,WAE3B,GAAKrK,KAAKjB,UAAaiB,KAAKjB,SAASoQ,mBAArC,CAKA,IACIC,EADAC,EAAS5K,GAAKzE,KAAKjB,SAAUiB,KAAKjB,SAASoQ,oBAE/CnP,KAAKiD,GAAG,cAAc,WACpBoM,IAIArP,KAAKsP,cAAcF,GAEnBA,EAAepP,KAAKuP,YAAYF,EAAQ,QAG1C,IAAIG,EAAW,SAAkBzT,GAC/BsT,IAEArP,KAAKsP,cAAcF,IAGrBpP,KAAKiD,GAAG,YAAaoM,GACrBrP,KAAKiD,GAAG,WAAYuM,GACpBxP,KAAKiD,GAAG,cAAeuM,KAqCzBnP,EAAOnB,WAAa,SAAoBjQ,EAAIsW,GAC1C,IAIIkK,EAJA7I,EAAS5G,KAeb,OAVA/Q,EAAKwV,GAAKzE,KAAM/Q,GAChB+Q,KAAK0P,wBACLD,EAAY,IAASvQ,YAAW,WAC1B0H,EAAOkD,eAAehQ,IAAI2V,IAC5B7I,EAAOkD,eAAuB,OAAE2F,GAGlCxgB,MACCsW,GACHvF,KAAK8J,eAAe1Q,IAAIqW,GACjBA,GAmBTpP,EAAOiF,aAAe,SAAsBmK,GAM1C,OALIzP,KAAK8J,eAAehQ,IAAI2V,KAC1BzP,KAAK8J,eAAuB,OAAE2F,GAC9B,IAASnK,aAAamK,IAGjBA,GAwBTpP,EAAOkP,YAAc,SAAqBtgB,EAAI0gB,GAC5C1gB,EAAKwV,GAAKzE,KAAM/Q,GAChB+Q,KAAK0P,wBACL,IAAIE,EAAa,IAASL,YAAYtgB,EAAI0gB,GAE1C,OADA3P,KAAK+J,gBAAgB3Q,IAAIwW,GAClBA,GAmBTvP,EAAOiP,cAAgB,SAAuBM,GAM5C,OALI5P,KAAK+J,gBAAgBjQ,IAAI8V,KAC3B5P,KAAK+J,gBAAwB,OAAE6F,GAC/B,IAASN,cAAcM,IAGlBA,GA6BTvP,EAAOwP,sBAAwB,SAA+B5gB,GAC5D,IAUIwa,EAVAzC,EAAShH,KAGb,OAAKA,KAAK8P,cAIV9P,KAAK0P,wBAILzgB,EAAKwV,GAAKzE,KAAM/Q,GAChBwa,EAAK,IAASoG,uBAAsB,WAC9B7I,EAAOgD,QAAQlQ,IAAI2P,IACrBzC,EAAOgD,QAAgB,OAAEP,GAG3Bxa,OAEF+Q,KAAKgK,QAAQ5Q,IAAIqQ,GACVA,GAhBEzJ,KAAKd,WAAWjQ,EAAI,IAAO,KAgCtCoR,EAAO0P,2BAA6B,SAAoC7f,EAAMjB,GAC5E,IAAI+gB,EAAShQ,KAEb,IAAIA,KAAKiK,WAAWnQ,IAAI5J,GAAxB,CAIA8P,KAAK0P,wBACLzgB,EAAKwV,GAAKzE,KAAM/Q,GAChB,IAAIwa,EAAKzJ,KAAK6P,uBAAsB,WAClC5gB,IAEI+gB,EAAO/F,WAAWnQ,IAAI5J,IACxB8f,EAAO/F,WAAmB,OAAE/Z,MAIhC,OADA8P,KAAKiK,WAAW3J,IAAIpQ,EAAMuZ,GACnBvZ,IAUTmQ,EAAO4P,0BAA4B,SAAmC/f,GAC/D8P,KAAKiK,WAAWnQ,IAAI5J,KAIzB8P,KAAKkQ,qBAAqBlQ,KAAKiK,WAAWzJ,IAAItQ,IAC9C8P,KAAKiK,WAAmB,OAAE/Z,KAoB5BmQ,EAAO6P,qBAAuB,SAA8BzG,GAE1D,OAAKzJ,KAAK8P,cAIN9P,KAAKgK,QAAQlQ,IAAI2P,KACnBzJ,KAAKgK,QAAgB,OAAEP,GACvB,IAASyG,qBAAqBzG,IAGzBA,GAREzJ,KAAKsF,aAAamE,IAsB7BpJ,EAAOqP,sBAAwB,WAC7B,IAAIS,EAASnQ,KAETA,KAAKkK,2BAITlK,KAAKkK,0BAA2B,EAChClK,KAAKmE,IAAI,WAAW,WAClB,CAAC,CAAC,aAAc,6BAA8B,CAAC,UAAW,wBAAyB,CAAC,iBAAkB,gBAAiB,CAAC,kBAAmB,kBAAkBjR,SAAQ,SAAUkd,GAC7K,IAAIC,EAASD,EAAK,GACdE,EAAaF,EAAK,GAItBD,EAAOE,GAAQnd,SAAQ,SAAU8E,EAAK7E,GACpC,OAAOgd,EAAOG,GAAYnd,SAG9Bgd,EAAOjG,0BAA2B,OAwBtCjB,EAAUsH,kBAAoB,SAA2BrgB,EAAMsgB,GAC7D,GAAoB,kBAATtgB,IAAsBA,EAC/B,MAAM,IAAI6B,MAAM,4BAA+B7B,EAAO,kCAGxD,IAMMugB,EANFhE,EAAOxD,EAAUkD,aAAa,QAE9BS,EAASH,GAAQA,EAAKG,OAAO4D,GAC7BE,EAASzH,IAAcuH,GAAuBvH,EAAUta,UAAUgiB,cAAcH,EAAoB7hB,WAExG,GAAIie,IAAW8D,EASb,MALED,EADE7D,EACO,qDAEA,+BAGL,IAAI7a,MAAM,uBAA0B7B,EAAO,MAASugB,EAAS,KAGrEvgB,EAAOqY,GAAcrY,GAEhB+Y,EAAU2H,cACb3H,EAAU2H,YAAc,IAG1B,IAAIC,EAAS5H,EAAUkD,aAAa,UAEpC,GAAa,WAATjc,GAAqB2gB,GAAUA,EAAOC,QAAS,CACjD,IAAIA,EAAUD,EAAOC,QACjBC,EAAcle,OAAOC,KAAKge,GAK9B,GAAIA,GAAWC,EAAYlhB,OAAS,GAAKkhB,EAAYxU,KAAI,SAAUyU,GACjE,OAAOF,EAAQE,MACdnL,MAAMhQ,SACP,MAAM,IAAI9D,MAAM,oEAMpB,OAFAkX,EAAU2H,YAAY1gB,GAAQsgB,EAC9BvH,EAAU2H,YAAYxU,GAAYlM,IAASsgB,EACpCA,GAaTvH,EAAUkD,aAAe,SAAsBjc,GAC7C,GAAKA,GAAS+Y,EAAU2H,YAIxB,OAAO3H,EAAU2H,YAAY1gB,IAGxB+Y,EAhsDsB,GAmyD/B,SAASgI,GAASjL,EAAQkL,EAAYC,EAAQC,GAE5C,OAjCF,SAAoBpL,EAAQ5W,EAAOiiB,GACjC,GAAqB,kBAAVjiB,GAAsBA,EAAQ,GAAKA,EAAQiiB,EACpD,MAAM,IAAItf,MAAM,sBAAwBiU,EAAS,0CAA4C5W,EAAQ,wCAA0CiiB,EAAW,MA8B5JC,CAAWtL,EAAQoL,EAAYD,EAAOthB,OAAS,GACxCshB,EAAOC,GAAYF,GAW5B,SAASK,GAAoBJ,GAC3B,IAAIK,EA0BJ,OAvBEA,OADatW,IAAXiW,GAA0C,IAAlBA,EAAOthB,OACjB,CACdA,OAAQ,EACR4hB,MAAO,WACL,MAAM,IAAI1f,MAAM,oCAElB2f,IAAK,WACH,MAAM,IAAI3f,MAAM,qCAIJ,CACdlC,OAAQshB,EAAOthB,OACf4hB,MAAOR,GAASxM,KAAK,KAAM,QAAS,EAAG0M,GACvCO,IAAKT,GAASxM,KAAK,KAAM,MAAO,EAAG0M,IAInC,IAAS3iB,QAAU,IAASA,OAAOC,WACrC+iB,EAAc,IAAShjB,OAAOC,UAAY,WACxC,OAAQ0iB,GAAU,IAAI7U,WAInBkV,EAgBT,SAASG,GAAiBF,EAAOC,GAC/B,OAAIlhB,MAAMY,QAAQqgB,GACTF,GAAoBE,QACRvW,IAAVuW,QAA+BvW,IAARwW,EACzBH,KAGFA,GAAoB,CAAC,CAACE,EAAOC,KAqBtC,SAASE,GAAgBC,EAAUC,GACjC,IACIL,EACAC,EAFAK,EAAmB,EAIvB,IAAKD,EACH,OAAO,EAGJD,GAAaA,EAAShiB,SACzBgiB,EAAWF,GAAiB,EAAG,IAGjC,IAAK,IAAI/hB,EAAI,EAAGA,EAAIiiB,EAAShiB,OAAQD,IACnC6hB,EAAQI,EAASJ,MAAM7hB,IACvB8hB,EAAMG,EAASH,IAAI9hB,IAETkiB,IACRJ,EAAMI,GAGRC,GAAoBL,EAAMD,EAG5B,OAAOM,EAAmBD,EAyB5B,SAASE,GAAWve,GAGlB,GAAIA,aAAiBue,GACnB,OAAOve,EAGY,kBAAVA,EACTuM,KAAK4K,KAAOnX,EACc,kBAAVA,EAEhBuM,KAAKiS,QAAUxe,EACNT,GAASS,KAGQ,kBAAfA,EAAMmX,OACf5K,KAAK4K,KAAOnX,EAAMmX,MAGpBxX,EAAO4M,KAAMvM,IAGVuM,KAAKiS,UACRjS,KAAKiS,QAAUD,GAAWE,gBAAgBlS,KAAK4K,OAAS,IAnP5D5B,GAAYra,UAAUmhB,aAAyD,oBAAnC,IAASD,uBAAiF,oBAAlC,IAASK,qBAC7GlH,GAAYuH,kBAAkB,YAAavH,IA4P3CgJ,GAAWrjB,UAAUic,KAAO,EAQ5BoH,GAAWrjB,UAAUsjB,QAAU,GAW/BD,GAAWrjB,UAAUwjB,OAAS,KAe9BH,GAAWI,WAAa,CAAC,mBAAoB,oBAAqB,oBAAqB,mBAAoB,8BAA+B,uBAQ1IJ,GAAWE,gBAAkB,CAC3B,EAAG,iCACH,EAAG,8DACH,EAAG,8HACH,EAAG,qHACH,EAAG,qEAIL,IAAK,IAAIG,GAAS,EAAGA,GAASL,GAAWI,WAAWviB,OAAQwiB,KAC1DL,GAAWA,GAAWI,WAAWC,KAAWA,GAE5CL,GAAWrjB,UAAUqjB,GAAWI,WAAWC,KAAWA,GAcxD,SAASC,GAAU7e,GACjB,YAAiByH,IAAVzH,GAAiC,OAAVA,GAAwC,oBAAfA,EAAM8e,KAa/D,SAASC,GAAe/e,GAClB6e,GAAU7e,IACZA,EAAM8e,KAAK,MAAM,SAAUte,OAuB/B,IAAIwe,GAAe,SAAsBC,GAiBvC,MAhBU,CAAC,OAAQ,QAAS,WAAY,KAAM,kCAAmC,OAAQ,OAAOhH,QAAO,SAAUC,EAAK7X,EAAMlE,GAK1H,OAJI8iB,EAAM5e,KACR6X,EAAI7X,GAAQ4e,EAAM5e,IAGb6X,IACN,CACDgH,KAAMD,EAAMC,MAAQniB,MAAM7B,UAAU4N,IAAI5I,KAAK+e,EAAMC,MAAM,SAAUC,GACjE,MAAO,CACLC,UAAWD,EAAIC,UACfC,QAASF,EAAIE,QACbza,KAAMua,EAAIva,KACVoR,GAAImJ,EAAInJ,UAgEZsJ,GA5CmB,SAA0BC,GAC/C,IAAIC,EAAWD,EAAK7U,GAAG,SACnB+U,EAAY1iB,MAAM7B,UAAU4N,IAAI5I,KAAKsf,GAAU,SAAUpP,GAC3D,OAAOA,EAAE6O,SAWX,OATaliB,MAAM7B,UAAU4N,IAAI5I,KAAKsf,GAAU,SAAUE,GACxD,IAAIC,EAAOX,GAAaU,EAAQT,OAMhC,OAJIS,EAAQE,MACVD,EAAKC,IAAMF,EAAQE,KAGdD,KAEKlkB,OAAOsB,MAAM7B,UAAUqD,OAAO2B,KAAKqf,EAAKM,cAAc,SAAUZ,GAC5E,OAAqC,IAA9BQ,EAAU7jB,QAAQqjB,MACxBnW,IAAIkW,MA4BLM,GAbmB,SAA0BK,EAAMJ,GAUrD,OATAI,EAAKlgB,SAAQ,SAAUwf,GACrB,IAAIa,EAAaP,EAAKQ,mBAAmBd,GAAOA,OAE3CA,EAAMW,KAAOX,EAAMC,MACtBD,EAAMC,KAAKzf,SAAQ,SAAU0f,GAC3B,OAAOW,EAAWE,OAAOb,SAIxBI,EAAKM,cAmBVI,GAA2B,SAAUC,GAwCvC,SAASD,EAAY3U,EAAQR,GAC3B,IAAI4G,EAoCJ,OAlCAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5C4T,eAAiB,SAAU3f,GAC/B,OAAOkR,EAAMoJ,cAActa,IAG7BkR,EAAM0O,OAAS,SAAU5f,GACvB,OAAOkR,EAAM2O,MAAM7f,IAGrBkR,EAAM4O,QAAU5O,EAAM6O,eAAiB7O,EAAM8O,gBAAiB,EAE9D9O,EAAM+O,WAAW/O,EAAMoE,SAAS4K,aAEhChP,EAAMvN,QAAQuN,EAAMoE,SAAS3R,SAK7BuN,EAAMiG,WAAa5T,GAAS,MAAO,CACjCyB,UAAWmb,4BACV,CACDC,KAAM,aAERlP,EAAMmP,QAAU9c,GAAS,IAAK,CAC5ByB,UAAWmb,gDACX3K,GAAItE,EAAMtR,KAAK0G,aAAa,sBAE9BrC,GAAYiN,EAAMmP,QAASnP,EAAMoP,eAEjCpP,EAAMsC,IAAI9O,YAAYwM,EAAMmP,SAE5BnP,EAAMsC,IAAI9O,YAAYwM,EAAMiG,YAErBjG,EA5ET,IAAeuO,EAAaC,GAsF5B,IAAItT,EAASqT,EAAY/kB,UAoazB,OAlaA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW+G,KAAK+M,gBAChByH,UAAW,GACV,CACD,mBAAoBxU,KAAKyJ,KAAO,eAChC,cAAe,OACf,aAAczJ,KAAKyU,QACnB,KAAQ,YAIZpU,EAAOiK,QAAU,WACftK,KAAKoL,WAAa,KAClBpL,KAAKsU,QAAU,KACftU,KAAK0U,oBAAsB,KAE3Bf,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAUpCK,EAAO0M,cAAgB,WACrB,MAAOqH,+BAAoCT,EAAWhlB,UAAUoe,cAAcpZ,KAAKqM,OAUrFK,EAAOoU,MAAQ,WACb,OAAOzU,KAAKyK,SAASzK,KAAKuJ,SAASkL,OAAS,iBAW9CpU,EAAOkU,YAAc,WACnB,IAAII,EAAO3U,KAAKuJ,SAASgL,aAAevU,KAAKyK,SAAS,2BAMtD,OAJIzK,KAAKkU,cACPS,GAAQ,IAAM3U,KAAKyK,SAAS,wFAGvBkK,GAUTtU,EAAOuU,KAAO,WACZ,IAAK5U,KAAK+T,QAAS,CACjB,IAAIhV,EAASiB,KAAKjB,SAQlBiB,KAAK8D,QAAQ,mBACb9D,KAAK+T,SAAU,GAGX/T,KAAKuJ,SAASsL,aAAe7U,KAAKgU,iBAAmBhU,KAAKiU,iBAC5DjU,KAAK8U,OAKP9U,KAAK+U,aAAehW,EAAOiW,SAEvBhV,KAAKuJ,SAAS0L,aAAejV,KAAK+U,aACpChW,EAAOmW,QAGTlV,KAAKiD,GAAG,UAAWjD,KAAK4T,gBAExB5T,KAAKmV,aAAepW,EAAOqW,WAC3BrW,EAAOqW,UAAS,GAChBpV,KAAKoN,OACLpN,KAAKqV,oBACLrV,KAAKnM,KAAKoE,aAAa,cAAe,SAQtC+H,KAAK8D,QAAQ,aACb9D,KAAKgU,gBAAiB,IAc1B3T,EAAOiV,OAAS,SAAgB7hB,GAK9B,MAJqB,mBAAVA,GACTuM,KAAKvM,EAAQ,OAAS,WAGjBuM,KAAK+T,SAWd1T,EAAOyT,MAAQ,WACb,GAAK9T,KAAK+T,QAAV,CAIA,IAAIhV,EAASiB,KAAKjB,SAQlBiB,KAAK8D,QAAQ,oBACb9D,KAAK+T,SAAU,EAEX/T,KAAK+U,aAAe/U,KAAKuJ,SAAS0L,aACpClW,EAAOoK,OAGTnJ,KAAKvO,IAAI,UAAWuO,KAAK4T,gBAErB5T,KAAKmV,cACPpW,EAAOqW,UAAS,GAGlBpV,KAAKqN,OACLrN,KAAKnM,KAAKoE,aAAa,cAAe,QAQtC+H,KAAK8D,QAAQ,cACb9D,KAAKuV,mBAEDvV,KAAKuJ,SAASiM,WAChBxV,KAAKsK,YAcTjK,EAAO6T,UAAY,SAAmBzgB,GACpC,GAAqB,mBAAVA,EAAqB,CAC9B,IAAIygB,EAAYlU,KAAKyV,aAAehiB,EAChCqgB,EAAQ9T,KAAKuL,SAAS,eAE1B,GAAI2I,IAAcJ,EAAO,CAGvB,IAAI4B,EAAO1V,KAAKoL,WAChBpL,KAAKoL,WAAapL,KAAKyH,IACvBqM,EAAQ9T,KAAK6L,SAAS,cAAe,CACnC8J,YAAa,uBAEf3V,KAAKoL,WAAasK,EAClB1V,KAAKiD,GAAG6Q,EAAO,QAAS9T,KAAK6T,SAI1BK,GAAaJ,IAChB9T,KAAKvO,IAAIqiB,EAAO,QAAS9T,KAAK6T,QAC9B7T,KAAKvC,YAAYqW,GACjBA,EAAMxJ,WAIV,OAAOtK,KAAKyV,YAQdpV,EAAOyU,KAAO,WACZ9U,KAAK4V,SAAS5V,KAAKpI,YAcrByI,EAAOuV,SAAW,SAAkBhe,GAClC,IAAIuT,EAAYnL,KAAKmL,YACjB0K,EAAW1K,EAAUpQ,WACrB+a,EAAgB3K,EAAU4K,YAQ9B/V,KAAK8D,QAAQ,mBACb9D,KAAKiU,gBAAiB,EAGtB4B,EAASpY,YAAY0N,GACrBnL,KAAKgW,QACLnY,GAAcsN,EAAWvT,GAQzBoI,KAAK8D,QAAQ,aAETgS,EACFD,EAASnd,aAAayS,EAAW2K,GAEjCD,EAASld,YAAYwS,GAIvB,IAAI8K,EAAcjW,KAAKuL,SAAS,eAE5B0K,GACFJ,EAASld,YAAYsd,EAAYxO,MAWrCpH,EAAO2V,MAAQ,WAObhW,KAAK8D,QAAQ,oBACbtG,GAAQwC,KAAKmL,aAQbnL,KAAK8D,QAAQ,eAmBfzD,EAAOzI,QAAU,SAAiBnE,GAKhC,MAJqB,qBAAVA,IACTuM,KAAKkW,SAAWziB,GAGXuM,KAAKkW,UASd7V,EAAOgV,kBAAoB,WACzB,IAAIc,EAAW,IAASC,cACpBC,EAAWrW,KAAKoJ,QAAQ3B,IAC5BzH,KAAK0U,oBAAsB,MAEvB2B,EAASrd,SAASmd,IAAaE,IAAaF,KAC9CnW,KAAK0U,oBAAsByB,EAC3BnW,KAAKrF,UAUT0F,EAAOkV,iBAAmB,WACpBvV,KAAK0U,sBACP1U,KAAK0U,oBAAoB/Z,QACzBqF,KAAK0U,oBAAsB,OAU/BrU,EAAOkO,cAAgB,SAAuBxS,GAI5C,GAFAA,EAAMmG,kBAEF,IAAQsM,WAAWzS,EAAO,WAAaiE,KAAKkU,YAG9C,OAFAnY,EAAM4F,sBACN3B,KAAK8T,QAKP,GAAK,IAAQtF,WAAWzS,EAAO,OAA/B,CAQA,IAJA,IAEIua,EAFAC,EAAevW,KAAKwW,gBACpBL,EAAWnW,KAAKyH,IAAInQ,cAAc,UAG7B1H,EAAI,EAAGA,EAAI2mB,EAAa1mB,OAAQD,IACvC,GAAIumB,IAAaI,EAAa3mB,GAAI,CAChC0mB,EAAa1mB,EACb,MAIA,IAASwmB,gBAAkBpW,KAAKyH,MAClC6O,EAAa,GAGXva,EAAM0a,UAA2B,IAAfH,GACpBC,EAAaA,EAAa1mB,OAAS,GAAG8K,QACtCoB,EAAM4F,kBACI5F,EAAM0a,UAAYH,IAAeC,EAAa1mB,OAAS,IACjE0mB,EAAa,GAAG5b,QAChBoB,EAAM4F,oBAUVtB,EAAOmW,cAAgB,WACrB,IAAIE,EAAc1W,KAAKyH,IAAIkP,iBAAiB,KAC5C,OAAOnmB,MAAM7B,UAAUqD,OAAO2B,KAAK+iB,GAAa,SAAUle,GACxD,OAAQA,aAAiB,IAASoe,mBAAqBpe,aAAiB,IAASqe,kBAAoBre,EAAMse,aAAa,UAAYte,aAAiB,IAASue,kBAAoBve,aAAiB,IAASwe,mBAAqBxe,aAAiB,IAASye,qBAAuBze,aAAiB,IAAS0e,qBAAuB1e,EAAMse,aAAa,aAAete,aAAiB,IAAS2e,mBAAqB3e,aAAiB,IAAS4e,mBAAqB5e,aAAiB,IAAS6e,kBAAoB7e,EAAMse,aAAa,cAAmD,IAApCte,EAAM+B,aAAa,aAAsB/B,EAAMse,aAAa,uBAI5kBpD,EA3fsB,CA4f7B1K,IASF0K,GAAY/kB,UAAU4a,SAAW,CAC/B0L,aAAa,EACbO,WAAW,GAEbxM,GAAYuH,kBAAkB,cAAemD,IAQ7C,IAAI4D,GAAyB,SAAUC,GAYrC,SAASD,EAAUE,GACjB,IAAIrS,OAEW,IAAXqS,IACFA,EAAS,KAGXrS,EAAQoS,EAAa5jB,KAAKqM,OAASA,MAC7ByX,QAAU,GAQhB5kB,OAAO2Q,eAAe,IAAuB2B,GAAQ,SAAU,CAC7D3E,IAAK,WACH,OAAOR,KAAKyX,QAAQ5nB,UAIxB,IAAK,IAAID,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IACjCuV,EAAMuS,SAASF,EAAO5nB,IAGxB,OAAOuV,EArCT,IAAemS,EAAWC,GAiD1B,IAAIlX,EAASiX,EAAU3oB,UA6HvB,OA3HA0R,EAAOqX,SAAW,SAAkBhF,GAClC,IAAI9L,EAAS5G,KAET5Q,EAAQ4Q,KAAKyX,QAAQ5nB,OAEnB,GAAKT,KAAS4Q,MAClBnN,OAAO2Q,eAAexD,KAAM5Q,EAAO,CACjCoR,IAAK,WACH,OAAOR,KAAKyX,QAAQroB,OAMW,IAAjC4Q,KAAKyX,QAAQpoB,QAAQqjB,KACvB1S,KAAKyX,QAAQzmB,KAAK0hB,GAUlB1S,KAAK8D,QAAQ,CACX4O,MAAOA,EACP1jB,KAAM,WACNqE,OAAQ2M,QAaZ0S,EAAMiF,aAAe,WACnB/Q,EAAO9C,QAAQ,CACb4O,MAAOA,EACP1jB,KAAM,cACNqE,OAAQuT,KAIRjB,GAAU+M,IACZA,EAAMpT,iBAAiB,cAAeoT,EAAMiF,eAahDtX,EAAOuX,YAAc,SAAqBC,GAGxC,IAFA,IAAInF,EAEK9iB,EAAI,EAAGkoB,EAAI9X,KAAKnQ,OAAQD,EAAIkoB,EAAGloB,IACtC,GAAIoQ,KAAKpQ,KAAOioB,EAAQ,EACtBnF,EAAQ1S,KAAKpQ,IAEH6B,KACRihB,EAAMjhB,MAGRuO,KAAKyX,QAAQloB,OAAOK,EAAG,GACvB,MAIC8iB,GAaL1S,KAAK8D,QAAQ,CACX4O,MAAOA,EACP1jB,KAAM,cACNqE,OAAQ2M,QAaZK,EAAO0X,aAAe,SAAsBtO,GAG1C,IAFA,IAAIjU,EAAS,KAEJ5F,EAAI,EAAGkoB,EAAI9X,KAAKnQ,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC3C,IAAI8iB,EAAQ1S,KAAKpQ,GAEjB,GAAI8iB,EAAMjJ,KAAOA,EAAI,CACnBjU,EAASkd,EACT,OAIJ,OAAOld,GAGF8hB,EA/KoB,CAgL3BxS,IAuBF,IAAK,IAAI/I,MAPTub,GAAU3oB,UAAUoW,eAAiB,CACnCiT,OAAQ,SACRC,SAAU,WACVC,YAAa,cACbC,YAAa,eAGGb,GAAU3oB,UAAUoW,eACpCuS,GAAU3oB,UAAU,KAAOoN,IAAS,KAgBtC,IAAIqc,GAAkB,SAAuBC,EAAM3F,GACjD,IAAK,IAAI9iB,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAC1BiD,OAAOC,KAAKulB,EAAKzoB,IAAIC,QAAU6iB,EAAMjJ,KAAO4O,EAAKzoB,GAAG6Z,KAKzD4O,EAAKzoB,GAAG0oB,SAAU,IAWlBC,GAA8B,SAAUC,GAU1C,SAASD,EAAef,GACtB,IAAIrS,OAEW,IAAXqS,IACFA,EAAS,IAKX,IAAK,IAAI5nB,EAAI4nB,EAAO3nB,OAAS,EAAGD,GAAK,EAAGA,IACtC,GAAI4nB,EAAO5nB,GAAG0oB,QAAS,CACrBF,GAAgBZ,EAAQA,EAAO5nB,IAC/B,MAMJ,OAFAuV,EAAQqT,EAAW7kB,KAAKqM,KAAMwX,IAAWxX,MACnCyY,WAAY,EACXtT,EA3BT,IAAeoT,EAAgBC,GAuC/B,IAAInY,EAASkY,EAAe5pB,UAgD5B,OA9CA0R,EAAOqX,SAAW,SAAkBhF,GAClC,IAAI9L,EAAS5G,KAET0S,EAAM4F,SACRF,GAAgBpY,KAAM0S,GAGxB8F,EAAW7pB,UAAU+oB,SAAS/jB,KAAKqM,KAAM0S,GAGpCA,EAAMpT,mBAIXoT,EAAMgG,eAAiB,WAIjB9R,EAAO6R,YAIX7R,EAAO6R,WAAY,EACnBL,GAAgBxR,EAAQ8L,GACxB9L,EAAO6R,WAAY,EAEnB7R,EAAO9C,QAAQ,YAQjB4O,EAAMpT,iBAAiB,gBAAiBoT,EAAMgG,kBAGhDrY,EAAOuX,YAAc,SAAqBC,GACxCW,EAAW7pB,UAAUipB,YAAYjkB,KAAKqM,KAAM6X,GAExCA,EAAOzY,qBAAuByY,EAAOa,iBACvCb,EAAOzY,oBAAoB,gBAAiByY,EAAOa,gBACnDb,EAAOa,eAAiB,OAIrBH,EAxFyB,CAyFhCjB,IAcEqB,GAAgB,SAAuBN,EAAM3F,GAC/C,IAAK,IAAI9iB,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAC1BiD,OAAOC,KAAKulB,EAAKzoB,IAAIC,QAAU6iB,EAAMjJ,KAAO4O,EAAKzoB,GAAG6Z,KAKzD4O,EAAKzoB,GAAGgpB,UAAW,IAWnBC,GAA8B,SAAUL,GAU1C,SAASK,EAAerB,GACtB,IAAIrS,OAEW,IAAXqS,IACFA,EAAS,IAKX,IAAK,IAAI5nB,EAAI4nB,EAAO3nB,OAAS,EAAGD,GAAK,EAAGA,IACtC,GAAI4nB,EAAO5nB,GAAGgpB,SAAU,CACtBD,GAAcnB,EAAQA,EAAO5nB,IAC7B,MAuBJ,OAnBAuV,EAAQqT,EAAW7kB,KAAKqM,KAAMwX,IAAWxX,MACnCyY,WAAY,EAMlB5lB,OAAO2Q,eAAe,IAAuB2B,GAAQ,gBAAiB,CACpE3E,IAAK,WACH,IAAK,IAAI1Q,EAAK,EAAGA,EAAKkQ,KAAKnQ,OAAQC,IACjC,GAAIkQ,KAAKlQ,GAAI8oB,SACX,OAAO9oB,EAIX,OAAQ,GAEVwQ,IAAK,eAEA6E,EA5CT,IAAe0T,EAAgBL,GAwD/B,IAAInY,EAASwY,EAAelqB,UA6C5B,OA3CA0R,EAAOqX,SAAW,SAAkBhF,GAClC,IAAI9L,EAAS5G,KAET0S,EAAMkG,UACRD,GAAc3Y,KAAM0S,GAGtB8F,EAAW7pB,UAAU+oB,SAAS/jB,KAAKqM,KAAM0S,GAGpCA,EAAMpT,mBAIXoT,EAAMoG,gBAAkB,WAClBlS,EAAO6R,YAIX7R,EAAO6R,WAAY,EACnBE,GAAc/R,EAAQ8L,GACtB9L,EAAO6R,WAAY,EAEnB7R,EAAO9C,QAAQ,YAQjB4O,EAAMpT,iBAAiB,iBAAkBoT,EAAMoG,mBAGjDzY,EAAOuX,YAAc,SAAqBC,GACxCW,EAAW7pB,UAAUipB,YAAYjkB,KAAKqM,KAAM6X,GAExCA,EAAOzY,qBAAuByY,EAAOiB,kBACvCjB,EAAOzY,oBAAoB,iBAAkByY,EAAOiB,iBACpDjB,EAAOiB,gBAAkB,OAItBD,EAtGyB,CAuGhCvB,IASEyB,GAA6B,SAAUP,GAGzC,SAASO,IACP,OAAOP,EAAWjlB,MAAMyM,KAAMzS,YAAcyS,KAH9C,IAAe+Y,EAAeP,GAM9B,IAAInY,EAAS0Y,EAAcpqB,UAuD3B,OA7CA0R,EAAOqX,SAAW,SAAkBhF,GAClC,IAAIvN,EAAQnF,KAEZwY,EAAW7pB,UAAU+oB,SAAS/jB,KAAKqM,KAAM0S,GAEpC1S,KAAKgZ,eACRhZ,KAAKgZ,aAAe,WAClB,OAAO7T,EAAMD,aAAa,YAIzBlF,KAAKiZ,gCACRjZ,KAAKkZ,+BAAiC,WACpC,OAAO/T,EAAMrB,QAAQ,4BASzB4O,EAAMpT,iBAAiB,aAAcU,KAAKgZ,eAGY,IAFvB,CAAC,WAAY,YAEf3pB,QAAQqjB,EAAMyG,OACzCzG,EAAMpT,iBAAiB,aAAcU,KAAKkZ,iCAI9C7Y,EAAOuX,YAAc,SAAqBC,GACxCW,EAAW7pB,UAAUipB,YAAYjkB,KAAKqM,KAAM6X,GAGxCA,EAAOzY,sBACLY,KAAKgZ,cACPnB,EAAOzY,oBAAoB,aAAcY,KAAKgZ,cAG5ChZ,KAAKoZ,yBACPvB,EAAOzY,oBAAoB,aAAcY,KAAKkZ,kCAK7CH,EA9DwB,CA+D/BzB,IAUE+B,GAAoC,WAOtC,SAASA,EAAqBC,QACN,IAAlBA,IACFA,EAAgB,IAGlBtZ,KAAKuZ,eAAiB,GAQtB1mB,OAAO2Q,eAAexD,KAAM,SAAU,CACpCQ,IAAK,WACH,OAAOR,KAAKuZ,eAAe1pB,UAI/B,IAAK,IAAID,EAAI,EAAGC,EAASypB,EAAczpB,OAAQD,EAAIC,EAAQD,IACzDoQ,KAAKwZ,iBAAiBF,EAAc1pB,IAaxC,IAAIyQ,EAASgZ,EAAqB1qB,UAuElC,OArEA0R,EAAOmZ,iBAAmB,SAA0BC,GAClD,IAAIrqB,EAAQ4Q,KAAKuZ,eAAe1pB,OAE1B,GAAKT,KAAS4Q,MAClBnN,OAAO2Q,eAAexD,KAAM5Q,EAAO,CACjCoR,IAAK,WACH,OAAOR,KAAKuZ,eAAenqB,OAMkB,IAA/C4Q,KAAKuZ,eAAelqB,QAAQoqB,IAC9BzZ,KAAKuZ,eAAevoB,KAAKyoB,IAiB7BpZ,EAAOqZ,wBAA0B,SAAiChH,GAGhE,IAFA,IAAIiH,EAEK/pB,EAAI,EAAGC,EAASmQ,KAAKuZ,eAAe1pB,OAAQD,EAAIC,EAAQD,IAC/D,GAAI8iB,IAAU1S,KAAKuZ,eAAe3pB,GAAG8iB,MAAO,CAC1CiH,EAAgB3Z,KAAKuZ,eAAe3pB,GACpC,MAIJ,OAAO+pB,GAYTtZ,EAAOuZ,oBAAsB,SAA6BH,GACxD,IAAK,IAAI7pB,EAAI,EAAGC,EAASmQ,KAAKuZ,eAAe1pB,OAAQD,EAAIC,EAAQD,IAC/D,GAAI6pB,IAAiBzZ,KAAKuZ,eAAe3pB,GAAI,CACvCoQ,KAAKuZ,eAAe3pB,GAAG8iB,OAAqD,oBAArC1S,KAAKuZ,eAAe3pB,GAAG8iB,MAAMjhB,KACtEuO,KAAKuZ,eAAe3pB,GAAG8iB,MAAMjhB,MAGW,oBAA/BuO,KAAKuZ,eAAe3pB,GAAG6B,KAChCuO,KAAKuZ,eAAe3pB,GAAG6B,MAGzBuO,KAAKuZ,eAAehqB,OAAOK,EAAG,GAC9B,QAKCypB,EA/G+B,GA8IpCQ,GAAgC,WAOlC,SAASA,EAAiBlH,GACxBkH,EAAiBlrB,UAAUmrB,SAASnmB,KAAKqM,KAAM2S,GAQ/C9f,OAAO2Q,eAAexD,KAAM,SAAU,CACpCQ,IAAK,WACH,OAAOR,KAAK+Z,WAelB,IAAI1Z,EAASwZ,EAAiBlrB,UAqD9B,OAnDA0R,EAAOyZ,SAAW,SAAkBnH,GAClC,IAAIqH,EAAYha,KAAKnQ,QAAU,EAC3BD,EAAI,EACJkoB,EAAInF,EAAK9iB,OACbmQ,KAAKia,MAAQtH,EACb3S,KAAK+Z,QAAUpH,EAAK9iB,OAEpB,IAAIqqB,EAAa,SAAoB9qB,GAC7B,GAAKA,KAAS4Q,MAClBnN,OAAO2Q,eAAexD,KAAM,GAAK5Q,EAAO,CACtCoR,IAAK,WACH,OAAOR,KAAKia,MAAM7qB,OAM1B,GAAI4qB,EAAYlC,EAGd,IAFAloB,EAAIoqB,EAEGpqB,EAAIkoB,EAAGloB,IACZsqB,EAAWvmB,KAAKqM,KAAMpQ,IAe5ByQ,EAAO8Z,WAAa,SAAoB1Q,GAGtC,IAFA,IAAIjU,EAAS,KAEJ5F,EAAI,EAAGkoB,EAAI9X,KAAKnQ,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC3C,IAAIgjB,EAAM5S,KAAKpQ,GAEf,GAAIgjB,EAAInJ,KAAOA,EAAI,CACjBjU,EAASod,EACT,OAIJ,OAAOpd,GAGFqkB,EAtF2B,GAqGhCO,GAAiB,CACnBC,YAAa,cACbC,SAAU,WACVC,KAAM,OACNC,KAAM,OACNC,UAAW,YACXC,WAAY,cAUVC,GAAiB,CACnB,YAAe,cACf,aAAgB,eAChB,KAAQ,OACR,YAAa,YACb,YAAe,cACf,WAAc,cAUZC,GAAgB,CAClBH,UAAW,YACXH,SAAU,WACVO,aAAc,eACdC,SAAU,WACVC,SAAU,YAURC,GAAgB,CAClBha,SAAU,WACVia,OAAQ,SACRC,QAAS,WAaPC,GAAqB,SAAU5D,GAwBjC,SAAS4D,EAAM5c,GACb,IAAI4G,OAEY,IAAZ5G,IACFA,EAAU,IAGZ4G,EAAQoS,EAAa5jB,KAAKqM,OAASA,KACnC,IAAIob,EAAa,CACf3R,GAAIlL,EAAQkL,IAAM,aAAe3J,KACjCqZ,KAAM5a,EAAQ4a,MAAQ,GACtBtO,SAAUtM,EAAQsM,UAAY,IAE5B4J,EAAQlW,EAAQkW,OAAS,GA6BzB4G,EAAQ,SAAeloB,GACzBN,OAAO2Q,eAAe,IAAuB2B,GAAQhS,EAAK,CACxDqN,IAAK,WACH,OAAO4a,EAAWjoB,IAEpBmN,IAAK,gBAIT,IAAK,IAAInN,KAAOioB,EACdC,EAAMloB,GAgCR,OApBAN,OAAO2Q,eAAe,IAAuB2B,GAAQ,QAAS,CAC5D3E,IAAK,WACH,OAAOiU,GAETnU,IAAK,SAAagb,GACZA,IAAa7G,IACfA,EAAQ6G,EAURtb,KAAK8D,QAAQ,mBAIZqB,EAGT,OA9GA,IAAegW,EAAO5D,GA8Gf4D,EA/GgB,CAgHvBrW,IA2CEyW,GAAW,SAAkBC,GAE/B,IAAIC,EAAQ,CAAC,WAAY,WAAY,OAAQ,WAAY,SAAU,OAAQ,QAEvEC,EAAI,IAAS7jB,cAAc,KAC/B6jB,EAAEC,KAAOH,EAMT,IAFA,IAAII,EAAU,GAELhsB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAChCgsB,EAAQH,EAAM7rB,IAAM8rB,EAAED,EAAM7rB,IAuB9B,MAlByB,UAArBgsB,EAAQC,WACVD,EAAQE,KAAOF,EAAQE,KAAKzT,QAAQ,OAAQ,KAGrB,WAArBuT,EAAQC,WACVD,EAAQE,KAAOF,EAAQE,KAAKzT,QAAQ,QAAS,KAG1CuT,EAAQC,WACXD,EAAQC,SAAW,IAASE,SAASF,UAKlCD,EAAQE,OACXF,EAAQE,KAAO,IAASC,SAASD,MAG5BF,GAgBLI,GAAiB,SAAwBR,GAE3C,IAAKA,EAAIrnB,MAAM,gBAAiB,CAG9B,IAAIunB,EAAI,IAAS7jB,cAAc,KAC/B6jB,EAAEC,KAAOH,EACTA,EAAME,EAAEC,KAGV,OAAOH,GAgBLS,GAAmB,SAA0BC,GAC/C,GAAoB,kBAATA,EAAmB,CAC5B,IACIC,EADc,yEACU3nB,KAAK0nB,GAEjC,GAAIC,EACF,OAAOA,EAAUxnB,MAAMyH,cAI3B,MAAO,IAuBLggB,GAAgB,SAAuBZ,EAAKa,QAC/B,IAAXA,IACFA,EAAS,IAASN,UAGpB,IAAIO,EAAUf,GAASC,GAMvB,OAJuC,MAArBc,EAAQT,SAAmBQ,EAAOR,SAAWS,EAAQT,UAGvCS,EAAQR,OAASO,EAAOR,SAAWQ,EAAOP,MAIxES,GAAmB1pB,OAAO0D,OAAO,CACnCC,UAAW,KACX+kB,SAAUA,GACVS,eAAgBA,GAChBC,iBAAkBA,GAClBG,cAAeA,KAcbI,GAAY,SAAmBC,EAAY/J,GAC7C,IAAIgK,EAAS,IAAI,IAASC,OAAOC,OAAO,IAAU,IAASC,MAAO,IAASF,OAAOG,iBAC9EC,EAAS,GAEbL,EAAOM,MAAQ,SAAUpK,GACvBF,EAAMe,OAAOb,IAGf8J,EAAOO,eAAiB,SAAUrrB,GAChCmrB,EAAO/rB,KAAKY,IAGd8qB,EAAOQ,QAAU,WACfxK,EAAM5O,QAAQ,CACZ9U,KAAM,aACNqE,OAAQqf,KAIZgK,EAAOS,MAAMV,GAETM,EAAOltB,OAAS,IACd,IAASoB,SAAW,IAASA,QAAQmsB,gBACvC,IAASnsB,QAAQmsB,eAAe,iCAAmC1K,EAAMW,KAG3E0J,EAAO7pB,SAAQ,SAAUtB,GACvB,OAAO5B,EAAM4B,MAAMA,MAGjB,IAASX,SAAW,IAASA,QAAQosB,UACvC,IAASpsB,QAAQosB,YAIrBX,EAAOY,SAeLC,GAAY,SAAmBlK,EAAKX,GACtC,IAAInP,EAAO,CACTia,IAAKnK,GAEHoK,EAAcrB,GAAc/I,GAE5BoK,IACFla,EAAKma,KAAOD,GAGd,IAAIE,EAAgD,oBAA9BjL,EAAMkL,MAAMH,cAE9BE,IACFpa,EAAKoa,gBAAkBA,GAGzB,IAAIpa,EAAMkB,GAAKzE,MAAM,SAAU6d,EAAKC,EAAUC,GAC5C,GAAIF,EACF,OAAO7tB,EAAM4B,MAAMisB,EAAKC,GAG1BpL,EAAMsL,SAAU,EAGe,oBAApB,IAASrB,OACdjK,EAAMkL,OAGRlL,EAAMkL,MAAMvZ,IAAI,CAAC,cAAe,eAAe,SAAUtI,GACvD,GAAmB,eAAfA,EAAM/M,KAKV,OAAOwtB,GAAUuB,EAAcrL,GAJ7B1iB,EAAM4B,MAAM,oDAAsD8gB,EAAMW,QAQ9EmJ,GAAUuB,EAAcrL,QAY1BuL,GAAyB,SAAUC,GAsCrC,SAASD,EAAU1f,GACjB,IAAI4G,EAMJ,QAJgB,IAAZ5G,IACFA,EAAU,KAGPA,EAAQyU,KACX,MAAM,IAAIjhB,MAAM,4BAGlB,IAAIosB,EAAW3V,GAAejK,EAAS,CACrC4a,KAAMyB,GAAcrc,EAAQ4a,OAAS,YACrCtO,SAAUtM,EAAQsM,UAAYtM,EAAQ6f,SAAW,KAE/CC,EAAOrD,GAAcmD,EAASE,OAAS,WACvCC,EAAWH,EAAkB,QAEX,aAAlBA,EAAShF,MAAyC,aAAlBgF,EAAShF,OAC3CkF,EAAO,WAGTlZ,EAAQ+Y,EAAOvqB,KAAKqM,KAAMme,IAAane,MACjC4d,MAAQO,EAASnL,KACvB7N,EAAM8U,MAAQ,GACd9U,EAAMoZ,YAAc,GACpBpZ,EAAMqZ,UAA6C,IAAlCrZ,EAAMyY,MAAMa,kBAC7B,IAAI9L,EAAO,IAAIkH,GAAiB1U,EAAM8U,OAClCyE,EAAa,IAAI7E,GAAiB1U,EAAMoZ,aACxCI,GAAU,EACVC,EAAoBna,GAAK,IAAuBU,IAAQ,WACrDnF,KAAK4d,MAAM3Q,WAAYjN,KAAK4d,MAAMpT,eAQvCxK,KAAK0e,WAAa1e,KAAK0e,WAEnBC,IACF3e,KAAK8D,QAAQ,aACb6a,GAAU,OAoKd,OA5JAxZ,EAAMyY,MAAMzZ,IAAI,WAJK,WACnBgB,EAAMyY,MAAMnsB,IAAI,aAAcmtB,MAKnB,aAATP,GACFlZ,EAAMyY,MAAM3a,GAAG,aAAc2b,GAG/B/rB,OAAOgsB,iBAAiB,IAAuB1Z,GAAQ,CAUrD,QAAW,CACT3E,IAAK,WACH,OAAO8d,GAEThe,IAAK,cAYP+d,KAAM,CACJ7d,IAAK,WACH,OAAO6d,GAET/d,IAAK,SAAawe,GACX9D,GAAc8D,IAIfT,IAASS,IAIbT,EAAOS,EAEF9e,KAAKwe,UAAqB,aAATH,GAA4C,IAArBre,KAAK2S,KAAK9iB,QAErD0tB,GAAUvd,KAAKqT,IAAKrT,MAGtBA,KAAK4d,MAAMnsB,IAAI,aAAcmtB,GAEhB,aAATP,GACFre,KAAK4d,MAAM3a,GAAG,aAAc2b,GAa9B5e,KAAK8D,QAAQ,iBAUjB6O,KAAM,CACJnS,IAAK,WACH,OAAKR,KAAKge,QAIHrL,EAHE,MAKXrS,IAAK,cASPoe,WAAY,CACVle,IAAK,WACH,IAAKR,KAAKge,QACR,OAAO,KAIT,GAAyB,IAArBhe,KAAK2S,KAAK9iB,OACZ,OAAO6uB,EAMT,IAHA,IAAIK,EAAK/e,KAAK4d,MAAMoB,cAChBC,EAAS,GAEJrvB,EAAI,EAAGkoB,EAAI9X,KAAK2S,KAAK9iB,OAAQD,EAAIkoB,EAAGloB,IAAK,CAChD,IAAIgjB,EAAM5S,KAAK2S,KAAK/iB,IAEhBgjB,EAAIC,WAAakM,GAAMnM,EAAIE,SAAWiM,GAE/BnM,EAAIC,YAAcD,EAAIE,SAAWF,EAAIC,WAAakM,GAAMnM,EAAIC,UAAY,IAAOkM,IADxFE,EAAOjuB,KAAK4hB,GAQhB,GAFA+L,GAAU,EAENM,EAAOpvB,SAAWmQ,KAAKue,YAAY1uB,OACrC8uB,GAAU,OAEV,IAAK,IAAI7uB,EAAK,EAAGA,EAAKmvB,EAAOpvB,OAAQC,KACW,IAA1CkQ,KAAKue,YAAYlvB,QAAQ4vB,EAAOnvB,MAClC6uB,GAAU,GAOhB,OAFA3e,KAAKue,YAAcU,EACnBP,EAAW5E,SAAS9Z,KAAKue,aAClBG,GAGTpe,IAAK,gBAIL6d,EAAS9K,KACXlO,EAAMkO,IAAM8K,EAAS9K,IAEhBlO,EAAMqZ,WAGTrZ,EAAM6Y,SAAU,IAGd7Y,EAAMqZ,UAA8B,cAAlBL,EAAShF,MAA0C,aAAlBgF,EAAShF,OAC9DoE,GAAUpY,EAAMkO,IAAK,IAAuBlO,KAG9CA,EAAM6Y,SAAU,EAGX7Y,EApPT,IAAe8Y,EAAWC,GA8P1B,IAAI7d,EAAS4d,EAAUtvB,UAoDvB,OAlDA0R,EAAOoT,OAAS,SAAgByL,GAC9B,IAAItM,EAAMsM,EAEV,GAAI,IAASrC,SAAWqC,aAAuB,IAASrC,MAAMsC,QAAS,CAGrE,IAAK,IAAIrrB,KAFT8e,EAAM,IAAI,IAASiK,MAAMsC,OAAOD,EAAYrM,UAAWqM,EAAYpM,QAASoM,EAAY7mB,MAEvE6mB,EACTprB,KAAQ8e,IACZA,EAAI9e,GAAQorB,EAAYprB,IAK5B8e,EAAInJ,GAAKyV,EAAYzV,GACrBmJ,EAAIwM,aAAeF,EAKrB,IAFA,IAAI1H,EAASxX,KAAK4d,MAAMtK,aAEf1jB,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAC7B4nB,EAAO5nB,KAAOoQ,MAChBwX,EAAO5nB,GAAGyvB,UAAUzM,GAIxB5S,KAAKia,MAAMjpB,KAAK4hB,GAChB5S,KAAK2S,KAAKmH,SAAS9Z,KAAKia,QAU1B5Z,EAAOgf,UAAY,SAAmBC,GAGpC,IAFA,IAAI1vB,EAAIoQ,KAAKia,MAAMpqB,OAEZD,KAAK,CACV,IAAIgjB,EAAM5S,KAAKia,MAAMrqB,GAErB,GAAIgjB,IAAQ0M,GAAc1M,EAAIwM,cAAgBxM,EAAIwM,eAAiBE,EAAY,CAC7Etf,KAAKia,MAAM1qB,OAAOK,EAAG,GACrBoQ,KAAK2S,KAAKmH,SAAS9Z,KAAKia,OACxB,SAKCgE,EAnToB,CAoT3B9C,IAMF8C,GAAUtvB,UAAUoW,eAAiB,CACnCwa,UAAW,aAUb,IAAIC,GAA0B,SAAUtB,GA0BtC,SAASsB,EAAWjhB,GAClB,IAAI4G,OAEY,IAAZ5G,IACFA,EAAU,IAGZ,IAAI4f,EAAW3V,GAAejK,EAAS,CACrC4a,KAAMwB,GAAepc,EAAQ4a,OAAS,KAExChU,EAAQ+Y,EAAOvqB,KAAKqM,KAAMme,IAAane,KACvC,IAAIsY,GAAU,EA4Cd,OAjCAzlB,OAAO2Q,eAAe,IAAuB2B,GAAQ,UAAW,CAC9D3E,IAAK,WACH,OAAO8X,GAEThY,IAAK,SAAamf,GAEU,mBAAfA,GAA4BA,IAAenH,IAItDA,EAAUmH,EAYVzf,KAAK8D,QAAQ,qBAMbqa,EAAS7F,UACXnT,EAAMmT,QAAU6F,EAAS7F,SAG3BnT,EAAM6Y,SAAU,EACT7Y,EAGT,OAnFA,IAAeqa,EAAYtB,GAmFpBsB,EApFqB,CAqF5BrE,IASEuE,GAA0B,SAAUxB,GAyBtC,SAASwB,EAAWnhB,GAClB,IAAI4G,OAEY,IAAZ5G,IACFA,EAAU,IAGZ,IAAI4f,EAAW3V,GAAejK,EAAS,CACrC4a,KAAMiB,GAAe7b,EAAQ4a,OAAS,KAExChU,EAAQ+Y,EAAOvqB,KAAKqM,KAAMme,IAAane,KACvC,IAAI4Y,GAAW,EA2Cf,OAhCA/lB,OAAO2Q,eAAe,IAAuB2B,GAAQ,WAAY,CAC/D3E,IAAK,WACH,OAAOoY,GAETtY,IAAK,SAAaqf,GAEW,mBAAhBA,GAA6BA,IAAgB/G,IAIxDA,EAAW+G,EAYX3f,KAAK8D,QAAQ,sBAMbqa,EAASvF,WACXzT,EAAMyT,SAAWuF,EAASvF,UAGrBzT,EAGT,OAjFA,IAAeua,EAAYxB,GAiFpBwB,EAlFqB,CAmF5BvE,IAmBEyE,GAAgC,SAAUrI,GAsC5C,SAASqI,EAAiBrhB,GACxB,IAAI4G,EAOA9F,OALY,IAAZd,IACFA,EAAU,IAGZ4G,EAAQoS,EAAa5jB,KAAKqM,OAASA,KAEnC,IAAI0S,EAAQ,IAAIuL,GAAU1f,GA8C1B,OA7CA4G,EAAMgU,KAAOzG,EAAMyG,KACnBhU,EAAMkO,IAAMX,EAAMW,IAClBlO,EAAMiZ,QAAU1L,EAAM7H,SACtB1F,EAAMsP,MAAQ/B,EAAM+B,MACpBtP,EAAe,QAAIuN,EAAe,QAClC7f,OAAOgsB,iBAAiB,IAAuB1Z,GAAQ,CAOrD9F,WAAY,CACVmB,IAAK,WACH,OAAOnB,IAWXqT,MAAO,CACLlS,IAAK,WACH,OAAOkS,MAIbrT,EA1FO,EAgGPqT,EAAMpT,iBAAiB,cAAc,WACnCD,EA/FO,EAiGP8F,EAAMrB,QAAQ,CACZ9U,KAAM,OACNqE,OAAQ,IAAuB8R,QAG5BA,EAGT,OA/FA,IAAeya,EAAkBrI,GA+F1BqI,EAhG2B,CAiGlC9a,IAEF8a,GAAiBjxB,UAAUoW,eAAiB,CAC1C8a,KAAM,QAERD,GAAiBE,KAjHN,EAkHXF,GAAiBG,QAjHH,EAkHdH,GAAiBI,OAjHJ,EAkHbJ,GAAiBK,MAjHL,EAuHZ,IAAIC,GAAS,CACXC,MAAO,CACLC,UAAW7H,GACX8H,WAAYb,GACZc,YAAa,SAEfC,MAAO,CACLH,UAAWvH,GACXwH,WAAYX,GACZY,YAAa,SAEfjoB,KAAM,CACJ+nB,UAAWrH,GACXsH,WAAYpC,GACZqC,YAAa,SAGjBztB,OAAOC,KAAKotB,IAAQhtB,SAAQ,SAAUlE,GACpCkxB,GAAOlxB,GAAMwxB,WAAaxxB,EAAO,SACjCkxB,GAAOlxB,GAAMyxB,YAAczxB,EAAO,aAEpC,IAAI0xB,GAAS,CACXC,WAAY,CACVP,UAAWrH,GACXsH,WAAYpC,GACZqC,YAAa,aACbE,WAAY,mBACZC,YAAa,qBAEfG,aAAc,CACZR,UAAW/G,GACXgH,WAAYT,GACZU,YAAa,qBACbE,WAAY,qBACZC,YAAa,wBAIbI,GAAM,IAAS,GAAIX,GAAQQ,IAE/BA,GAAOjV,MAAQ5Y,OAAOC,KAAK4tB,IAC3BR,GAAOzU,MAAQ5Y,OAAOC,KAAKotB,IAC3BW,GAAIpV,MAAQ,GAAGvc,OAAOwxB,GAAOjV,OAAOvc,OAAOgxB,GAAOzU,OAqElD,IAAIgB,GAAoB,SAAUkH,GAahC,SAASlH,EAAKlO,EAAS2K,GACrB,IAAI/D,EA8FJ,YA5FgB,IAAZ5G,IACFA,EAAU,SAGE,IAAV2K,IACFA,EAAQ,cAKV3K,EAAQ6L,qBAAsB,GAC9BjF,EAAQwO,EAAWhgB,KAAKqM,KAAM,KAAMzB,EAAS2K,IAAUlJ,MAEjD8gB,kBAAoB,SAAU7sB,GAClC,OAAOkR,EAAM4b,iBAAiB9sB,IAGhCkR,EAAM6b,eAAiB,SAAU/sB,GAC/B,OAAOkR,EAAM8b,cAAchtB,IAG7BkR,EAAM+b,kBAAoB,SAAUjtB,GAClC,OAAOkR,EAAMgc,iBAAiBltB,IAGhCkR,EAAMic,yBAA2B,SAAUntB,GACzC,OAAOkR,EAAMkc,wBAAwBptB,IAGvCkR,EAAMmc,sBAAwB,SAAUrtB,GACtC,OAAOkR,EAAMoc,qBAAqBttB,IAKpCkR,EAAMqc,aAAc,EAEpBrc,EAAMlC,GAAG,WAAW,WAClBjD,KAAKwhB,aAAc,KAGrBrc,EAAMlC,GAAG,aAAa,WACpBjD,KAAKwhB,aAAc,KAGrBX,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAEZqO,GAAWA,EAAQkd,EAAM+E,cAC3Brb,EAAMsW,EAAMgF,aAAeliB,EAAQkd,EAAM+E,gBAIxCrb,EAAMsc,wBACTtc,EAAMuc,mBAIHvc,EAAMwc,0BACTxc,EAAMyc,sBAGR,CAAC,OAAQ,QAAS,SAAS1uB,SAAQ,SAAUwf,IACE,IAAzCnU,EAAQ,SAAWmU,EAAQ,YAC7BvN,EAAM,iBAAmBuN,EAAQ,WAAY,OAIlB,IAA3BnU,EAAQsjB,iBAAyD,IAA7BtjB,EAAQujB,iBAC9C3c,EAAM4c,0BAA2B,GACG,IAA3BxjB,EAAQsjB,iBAAwD,IAA7BtjB,EAAQujB,mBACpD3c,EAAM4c,0BAA2B,GAG9B5c,EAAM4c,0BACT5c,EAAM6c,oBAGR7c,EAAMsZ,mBAAkD,IAA9BlgB,EAAQkgB,kBAClCtZ,EAAM8c,sBAAwB,IAAIpB,GAAIxoB,KAAK+nB,UAE3Cjb,EAAM+c,qBAGD3jB,EAAQ4jB,wBACXhd,EAAMuJ,gBAGJvJ,EAAMzW,cACRyW,EAAMO,MAAQP,EAAMzW,YAAYwB,MAAQ,gBAGnCiV,EA3GT,IAAesH,EAAMkH,GAsHrB,IAAItT,EAASoM,EAAK9d,UAu6BlB,OAr6BA0R,EAAO+hB,iBAAmB,SAA0B/O,GAClD,IAAIzM,EAAS5G,KAERA,KAAKiN,UAGRjN,KAAKmE,IAAI,SAAS,WAChB,OAAOyC,EAAO1H,YAAW,WACvB,OAAO0H,EAAOwb,iBAAiB/O,KAC9B,MAaPrT,KAAK8D,QAAQ,CACXuP,IAAKA,EACLrkB,KAAM,eAaVqR,EAAOqhB,iBAAmB,WACxB1hB,KAAKiD,GAAG,iBAAkBjD,KAAK8gB,mBAC/B9gB,KAAKqiB,gBAAiB,EAEtBriB,KAAKmE,IAAI,QAASnE,KAAKghB,iBAQzB3gB,EAAOiiB,kBAAoB,WACzBtiB,KAAKqiB,gBAAiB,EACtBriB,KAAKuiB,uBACLviB,KAAKvO,IAAI,iBAAkBuO,KAAK8gB,oBAiBlCzgB,EAAO4gB,cAAgB,SAAuBllB,GAC5CiE,KAAKuiB,uBACLviB,KAAKwiB,iBAAmBxiB,KAAKuP,YAAY9K,GAAKzE,MAAM,WAElD,IAAIyiB,EAAqBziB,KAAK4R,kBAE1B5R,KAAK0iB,mBAAqBD,GAO5BziB,KAAK8D,QAAQ,YAGf9D,KAAK0iB,iBAAmBD,EAEG,IAAvBA,GACFziB,KAAKuiB,0BAEL,MAaNliB,EAAO0gB,iBAAmB,SAA0BhlB,GAClDiE,KAAK2iB,UAAY3iB,KAAK8R,YAUxBzR,EAAOwR,SAAW,WAChB,OAAOF,GAAiB,EAAG,IAY7BtR,EAAOuR,gBAAkB,WACvB,OAAOA,GAAgB5R,KAAK6R,WAAY7R,KAAK2iB,YAU/CtiB,EAAOkiB,qBAAuB,WAC5BviB,KAAKsP,cAActP,KAAKwiB,mBAS1BniB,EAAOuhB,oBAAsB,WAC3B5hB,KAAK4iB,mBAAoB,EACzB5iB,KAAKiD,GAAG,OAAQjD,KAAKkhB,mBACrBlhB,KAAKiD,GAAG,QAASjD,KAAKohB,2BAQxB/gB,EAAOwiB,qBAAuB,WAC5B7iB,KAAK4iB,mBAAoB,EACzB5iB,KAAKqhB,0BACLrhB,KAAKvO,IAAI,OAAQuO,KAAKkhB,mBACtBlhB,KAAKvO,IAAI,QAASuO,KAAKohB,2BAWzB/gB,EAAO8gB,iBAAmB,WACpBnhB,KAAK8iB,qBACP9iB,KAAKqhB,0BAGPrhB,KAAK8iB,oBAAsB9iB,KAAKuP,aAAY,WAO1CvP,KAAK8D,QAAQ,CACX9U,KAAM,aACNqE,OAAQ2M,KACR+iB,mBAAmB,MAEpB,MAUL1iB,EAAOghB,wBAA0B,WAC/BrhB,KAAKsP,cAActP,KAAK8iB,qBAGxB9iB,KAAK8D,QAAQ,CACX9U,KAAM,aACNqE,OAAQ2M,KACR+iB,mBAAmB,KAWvB1iB,EAAOiK,QAAU,WAEftK,KAAKgjB,YAAY9C,GAAOzU,OAEpBzL,KAAKqiB,gBACPriB,KAAKsiB,oBAGHtiB,KAAK4iB,mBACP5iB,KAAK6iB,uBAGPlP,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAcpCK,EAAO2iB,YAAc,SAAqB9hB,GACxC,IAAI8F,EAAShH,MAEbkB,EAAQ,GAAGhS,OAAOgS,IAEZhO,SAAQ,SAAUlE,GAItB,IAHA,IAAIqpB,EAAOrR,EAAOhY,EAAO,aAAe,GACpCY,EAAIyoB,EAAKxoB,OAEND,KAAK,CACV,IAAI8iB,EAAQ2F,EAAKzoB,GAEJ,SAATZ,GACFgY,EAAOic,sBAAsBvQ,GAG/B2F,EAAKT,YAAYlF,QAUvBrS,EAAO6iB,sBAAwB,WAI7B,IAHA,IAAI7K,EAAOrY,KAAKiiB,uBAAyB,GACrCryB,EAAIyoB,EAAKxoB,OAEND,KAAK,CACV,IAAI8iB,EAAQ2F,EAAKzoB,GACjBoQ,KAAKijB,sBAAsBvQ,KAU/BrS,EAAO8iB,MAAQ,aAUf9iB,EAAOod,YAAc,aAWrBpd,EAAO+iB,eAAiB,aAYxB/iB,EAAOzO,MAAQ,SAAeisB,GAM5B,YALY3iB,IAAR2iB,IACF7d,KAAKqjB,OAAS,IAAIrR,GAAW6L,GAC7B7d,KAAK8D,QAAQ,UAGR9D,KAAKqjB,QAcdhjB,EAAOijB,OAAS,WACd,OAAItjB,KAAKwhB,YACA7P,GAAiB,EAAG,GAGtBA,MAWTtR,EAAO8I,KAAO,aAUd9I,EAAOkjB,aAAe,aAUtBljB,EAAOmjB,UAAY,aASnBnjB,EAAOojB,eAAiB,WAElBzjB,KAAK4iB,mBAOP5iB,KAAK8D,QAAQ,CACX9U,KAAM,aACNqE,OAAQ2M,KACR+iB,mBAAmB,KAgBzB1iB,EAAO6hB,mBAAqB,WAC1B,IAAIlS,EAAShQ,KAuBbkgB,GAAOzU,MAAMvY,SAAQ,SAAUhD,GAC7B,IAAIurB,EAAQyE,GAAOhwB,GAEfwzB,EAAmB,WACrB1T,EAAOlM,QAAQ5T,EAAO,gBAGpBsnB,EAASxH,EAAOyL,EAAM+E,cAE1BhJ,EAAOlY,iBAAiB,cAAeokB,GACvClM,EAAOlY,iBAAiB,WAAYokB,GAEpC1T,EAAO/M,GAAG,WAAW,WACnBuU,EAAOpY,oBAAoB,cAAeskB,GAC1ClM,EAAOpY,oBAAoB,WAAYskB,UAY7CrjB,EAAOsjB,iBAAmB,WACxB,IAAIxT,EAASnQ,KAEb,IAAI,IAAS2c,OAOb,GAAI,IAASjiB,KAAK1B,SAASgH,KAAKnM,MAAO,CAIrC,IAAKmM,KAAKuJ,SAAS,WAAa7V,GAAQ,MAAQb,OAAOC,KAAK,KAAKjD,OAAS,EAExE,YADAmQ,KAAK8D,QAAQ,eAMf,IAAI8f,EAAS,IAAS/rB,cAAc,UACpC+rB,EAAOvQ,IAAMrT,KAAKuJ,SAAS,WAAa,iDAExCqa,EAAOC,OAAS,WAOd1T,EAAOrM,QAAQ,gBAGjB8f,EAAOE,QAAU,WAOf3T,EAAOrM,QAAQ,eAGjB9D,KAAKiD,GAAG,WAAW,WACjB2gB,EAAOC,OAAS,KAChBD,EAAOE,QAAU,QAInB,IAASnH,QAAS,EAClB3c,KAAKnM,KAAKkH,WAAWpC,YAAYirB,QAEjC5jB,KAAKkJ,MAAMlJ,KAAK2jB,mBASpBtjB,EAAO2hB,kBAAoB,WACzB,IAAI+B,EAAS/jB,KAETwX,EAASxX,KAAKsT,aACd0Q,EAAehkB,KAAKikB,mBAEpBC,EAAiB,SAAwBjwB,GAC3C,OAAOujB,EAAOE,SAASzjB,EAAEye,QAGvByR,EAAoB,SAA2BlwB,GACjD,OAAOujB,EAAOI,YAAY3jB,EAAEye,QAG9BsR,EAAa/gB,GAAG,WAAYihB,GAC5BF,EAAa/gB,GAAG,cAAekhB,GAC/BnkB,KAAK2jB,mBAEL,IAAIS,EAAgB,WAClB,OAAOL,EAAOjgB,QAAQ,oBAGpBugB,EAAoB,WACtBD,IAEA,IAAK,IAAIx0B,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,GACnB8iB,EAAMtT,oBAAoB,YAAaglB,GAEpB,YAAf1R,EAAM2L,MACR3L,EAAMpT,iBAAiB,YAAa8kB,KAK1CC,IACA7M,EAAOlY,iBAAiB,SAAU+kB,GAClC7M,EAAOlY,iBAAiB,WAAY+kB,GACpC7M,EAAOlY,iBAAiB,cAAe+kB,GACvCrkB,KAAKiD,GAAG,WAAW,WACjB+gB,EAAavyB,IAAI,WAAYyyB,GAC7BF,EAAavyB,IAAI,cAAe0yB,GAChC3M,EAAOpY,oBAAoB,SAAUilB,GACrC7M,EAAOpY,oBAAoB,WAAYilB,GACvC7M,EAAOpY,oBAAoB,cAAeilB,GAE1C,IAAK,IAAIz0B,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CAC1B4nB,EAAO5nB,GACbwP,oBAAoB,YAAaglB,QAqB7C/jB,EAAOikB,aAAe,SAAsBnL,EAAM1E,EAAO5J,GACvD,IAAKsO,EACH,MAAM,IAAIpnB,MAAM,mDAGlB,OA7uBJ,SAA2B5D,EAAMgrB,EAAM1E,EAAO5J,EAAUtM,QACtC,IAAZA,IACFA,EAAU,IAGZ,IAAIiZ,EAASrpB,EAAKmlB,aAClB/U,EAAQ4a,KAAOA,EAEX1E,IACFlW,EAAQkW,MAAQA,GAGd5J,IACFtM,EAAQsM,SAAWA,GAGrBtM,EAAQyU,KAAO7kB,EACf,IAAIukB,EAAQ,IAAImO,GAAIxoB,KAAKgoB,WAAW9hB,GAEpC,OADAiZ,EAAOE,SAAShF,GACTA,EA0tBE6R,CAAkBvkB,KAAMmZ,EAAM1E,EAAO5J,IAyB9CxK,EAAOmkB,sBAAwB,SAA+BjmB,GAC5D,IAAImU,EAAQlK,GAAejK,EAAS,CAClCyU,KAAMhT,OAER,OAAO,IAAI0gB,GAAOE,aAAaP,WAAW3N,IAwB5CrS,EAAOmT,mBAAqB,SAA4BjV,EAASkmB,GAC/D,IAAIC,EAAS1kB,UAEG,IAAZzB,IACFA,EAAU,IAGZ,IAAIomB,EAAmB3kB,KAAKwkB,sBAAsBjmB,GAmBlD,OAjBsB,IAAlBkmB,IAA4C,IAAlBA,IAE5Bz0B,EAAM2B,KAAK,oKACX8yB,GAAgB,GAIlBzkB,KAAK4kB,qBAAqBpL,iBAAiBmL,GAC3C3kB,KAAKikB,mBAAmBvM,SAASiN,EAAiBjS,QAE5B,IAAlB+R,GAEFzkB,KAAKkJ,OAAM,WACT,OAAOwb,EAAOzC,sBAAsBvK,SAASiN,EAAiBjS,UAI3DiS,GAUTtkB,EAAO4iB,sBAAwB,SAA+BvQ,GAC5D,IAAI+G,EAAezZ,KAAK4kB,qBAAqBlL,wBAAwBhH,GAErE1S,KAAK4kB,qBAAqBhL,oBAAoBH,GAC9CzZ,KAAKikB,mBAAmBrM,YAAYlF,GACpC1S,KAAKiiB,sBAAsBrK,YAAYlF,IAezCrS,EAAOwkB,wBAA0B,WAC/B,MAAO,IAkBTxkB,EAAOykB,wBAA0B,WAC/B,IAAIC,EAAe/kB,KAAKuJ,SAASyb,SAAW,IAASA,QAErD,GAAID,EACF,OAAOA,EAAaE,UAWxB5kB,EAAO6kB,wBAA0B,WAC/B,OAAO,GAST7kB,EAAO8kB,2BAA6B,aAQpC9kB,EAAO+kB,UAAY,aAQnB/kB,EAAOglB,YAAc,aAQrBhlB,EAAOilB,eAAiB,aAWxBjlB,EAAOklB,0BAA4B,aAWnCllB,EAAOmlB,0BAA4B,aAmBnCnlB,EAAOolB,YAAc,WACnB,MAAO,IAcThZ,EAAKgZ,YAAc,WACjB,MAAO,IAaThZ,EAAKiZ,cAAgB,SAAuBC,EAAQpnB,GAClD,OAAOkO,EAAKgZ,YAAYE,EAAO32B,OAgBjCyd,EAAKG,OAAS,SAAgBd,GAC5B,OAAOA,EAAUnd,qBAAqB8d,GAAQX,aAAqBW,GAAQX,IAAcW,GAa3FA,EAAKmZ,aAAe,SAAsB11B,EAAM8iB,GAK9C,GAJKvG,EAAKoZ,SACRpZ,EAAKoZ,OAAS,KAGXpZ,EAAKG,OAAOoG,GACf,MAAM,IAAIjhB,MAAM,QAAU7B,EAAO,mBAGnC,IAAKuc,EAAKgZ,YACR,MAAM,IAAI1zB,MAAM,uDAGlB,IAAK0a,EAAKiZ,cACR,MAAM,IAAI3zB,MAAM,yDAYlB,OATA7B,EAAOqY,GAAcrY,GACrBuc,EAAKoZ,OAAO31B,GAAQ8iB,EACpBvG,EAAKoZ,OAAOzpB,GAAYlM,IAAS8iB,EAEpB,SAAT9iB,GAEFuc,EAAKqZ,kBAAkB90B,KAAKd,GAGvB8iB,GAaTvG,EAAKsZ,QAAU,SAAiB71B,GAC9B,GAAKA,EAIL,OAAIuc,EAAKoZ,QAAUpZ,EAAKoZ,OAAO31B,GACtBuc,EAAKoZ,OAAO31B,IAGrBA,EAAOqY,GAAcrY,GAEjB,KAAY,IAAS81B,SAAW,IAASA,QAAQ91B,IACnDF,EAAM2B,KAAK,OAASzB,EAAO,6GACpB,IAAS81B,QAAQ91B,SAF1B,IAMKuc,EA9hCe,CA+hCtBzD,IAqCF6X,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAEhBuc,GAAK9d,UAAU8sB,EAAM+E,YAAc,WAEjC,OADAxgB,KAAKyb,EAAMgF,aAAezgB,KAAKyb,EAAMgF,cAAgB,IAAIhF,EAAM2E,UACxDpgB,KAAKyb,EAAMgF,iBAkCtBhU,GAAK9d,UAAUs3B,uBAAwB,EAQvCxZ,GAAK9d,UAAUu3B,qBAAsB,EASrCzZ,GAAK9d,UAAUw3B,0BAA2B,EAW1C1Z,GAAK9d,UAAUy3B,sBAAuB,EAUtC3Z,GAAK9d,UAAU8yB,wBAAyB,EAYxChV,GAAK9d,UAAU03B,mBAAoB,EAUnC5Z,GAAK9d,UAAUgzB,0BAA2B,EAS1ClV,GAAK9d,UAAUozB,0BAA2B,EAc1CtV,GAAK6Z,mBAAqB,SAAUC,GAUlCA,EAAMC,sBAAwB,SAAUC,EAASr3B,GAC/C,IAAIyR,EAAW0lB,EAAMG,eAEhB7lB,IACHA,EAAW0lB,EAAMG,eAAiB,SAGtBxrB,IAAV9L,IAEFA,EAAQyR,EAAShR,QAGnBgR,EAAStR,OAAOH,EAAO,EAAGq3B,IAc5BF,EAAMd,YAAc,SAAUz2B,GAI5B,IAHA,IACI23B,EADA9lB,EAAW0lB,EAAMG,gBAAkB,GAG9B92B,EAAI,EAAGA,EAAIiR,EAAShR,OAAQD,IAGnC,GAFA+2B,EAAM9lB,EAASjR,GAAG61B,YAAYz2B,GAG5B,OAAO23B,EAIX,MAAO,IAmBTJ,EAAMK,oBAAsB,SAAUpzB,EAAQ+K,GAI5C,IAHA,IAAIsC,EAAW0lB,EAAMG,gBAAkB,GAG9B92B,EAAI,EAAGA,EAAIiR,EAAShR,OAAQD,IAGnC,GAFMiR,EAASjR,GAAGi3B,gBAAgBrzB,EAAQ+K,GAGxC,OAAOsC,EAASjR,GAIpB,OAAO,MAgBT22B,EAAMb,cAAgB,SAAUC,EAAQpnB,GACtC,IAAIuoB,EAAKP,EAAMK,oBAAoBjB,EAAQpnB,GAE3C,OAAIuoB,EACKA,EAAGD,gBAAgBlB,EAAQpnB,GAG7B,IAQQ,CAAC,WAAY,UAAW,YAe9BrL,SAAQ,SAAU8S,GAC3B,IAAI+gB,EAAa/mB,KAAKgG,GAEI,oBAAf+gB,IAIX/mB,KAAKgG,GAAU,WACb,OAAIhG,KAAKgnB,gBAAkBhnB,KAAKgnB,eAAehhB,GACtChG,KAAKgnB,eAAehhB,GAAQzS,MAAMyM,KAAKgnB,eAAgBz5B,WAGzDw5B,EAAWxzB,MAAMyM,KAAMzS,eAE/Bg5B,EAAM53B,WAUT43B,EAAM53B,UAAUs4B,UAAY,SAAUzzB,GACpC,IAAIszB,EAAKP,EAAMK,oBAAoBpzB,EAAQwM,KAAKuJ,UAE3Cud,IAGCP,EAAMW,oBACRJ,EAAKP,EAAMW,oBAEXl3B,EAAM4B,MAAM,oDAKhBoO,KAAKuhB,uBACLvhB,KAAKvO,IAAI,UAAWuO,KAAKshB,uBAErBwF,IAAOP,EAAMW,sBACflnB,KAAKmnB,eAAiB3zB,GAGxBwM,KAAKgnB,eAAiBF,EAAGM,aAAa5zB,EAAQwM,KAAMA,KAAKuJ,UACzDvJ,KAAKmE,IAAI,UAAWnE,KAAKshB,wBAS3BiF,EAAM53B,UAAU4yB,qBAAuB,WAIjCvhB,KAAKmnB,iBACPnnB,KAAKgjB,YAAY,CAAC,QAAS,UAC3BhjB,KAAKmnB,eAAiB,MAIxBnnB,KAAKkjB,wBAEDljB,KAAKgnB,iBACHhnB,KAAKgnB,eAAe1c,SACtBtK,KAAKgnB,eAAe1c,UAGtBtK,KAAKgnB,eAAiB,QAO5Bhe,GAAYuH,kBAAkB,OAAQ9D,IACtCA,GAAKmZ,aAAa,OAAQnZ,IAO1BA,GAAKqZ,kBAAoB,GAMzB,IAAIuB,GAAc,GACdC,GAAsB,GACtBC,GAAa,GAuDjB,SAASN,GAAUloB,EAAQsU,EAAKmU,GAC9BzoB,EAAOG,YAAW,WAChB,OAAOuoB,GAAgBpU,EAAKgU,GAAYhU,EAAIrkB,MAAOw4B,EAAMzoB,KACxD,GAwFL,SAAS2oB,GAAQC,EAAY3U,EAAM7b,EAAQywB,QAC7B,IAARA,IACFA,EAAM,MAGR,IAAIC,EAAa,OAAStf,GAAcpR,GACpC2wB,EAAkBH,EAAWjc,OAAOqc,GAAmBF,GAAaD,GACpEI,EAAaF,IAAoBP,GAGjCvlB,EAAcgmB,EAAa,KAAOhV,EAAK7b,GAAQ2wB,GAEnD,OAyDF,SAAsBG,EAAK9wB,EAAQ1D,EAAOu0B,GACxC,IAAK,IAAIp4B,EAAIq4B,EAAIp4B,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACxC,IAAIs4B,EAAKD,EAAIr4B,GAETs4B,EAAG/wB,IACL+wB,EAAG/wB,GAAQ6wB,EAAYv0B,IA/D3B00B,CAAaR,EAAYxwB,EAAQ6K,EAAagmB,GACvChmB,EAST,IAAIomB,GAAiB,CACnBvW,SAAU,EACVmN,YAAa,EACblN,SAAU,EACVuW,MAAO,EACP/E,OAAQ,EACRtO,OAAQ,EACRsT,SAAU,EACVC,OAAQ,EACRC,MAAO,GAQLC,GAAiB,CACnBhF,eAAgB,EAChBiF,SAAU,EACVC,UAAW,GAQTC,GAAmB,CACrBzf,KAAM,EACN+L,MAAO,GAGT,SAAS6S,GAAmB5wB,GAC1B,OAAO,SAAU1D,EAAOy0B,GAEtB,OAAIz0B,IAAU8zB,GACLA,GAGLW,EAAG/wB,GACE+wB,EAAG/wB,GAAQ1D,GAGbA,GA+DX,SAASg0B,GAAgBpU,EAAKsU,EAAYH,EAAMzoB,EAAQ4M,EAAKkd,QAC/C,IAARxV,IACFA,EAAM,SAGW,IAAfsU,IACFA,EAAa,SAGH,IAARhc,IACFA,EAAM,SAGQ,IAAZkd,IACFA,GAAU,GAGZ,IAAIC,EAAcnB,EACdoB,EAAYD,EAAY,GACxBE,EAASF,EAAYx5B,MAAM,GAG/B,GAAyB,kBAAdy5B,EACTtB,GAAgBpU,EAAKgU,GAAY0B,GAAYvB,EAAMzoB,EAAQ4M,EAAKkd,QAE3D,GAAIE,EAAW,CACpB,IAAIb,EAxDR,SAA4BnpB,EAAQgqB,GAClC,IAAId,EAAMX,GAAoBvoB,EAAO0K,MACjCye,EAAK,KAET,QAAYhtB,IAAR+sB,GAA6B,OAARA,EAGvB,OAFAC,EAAKa,EAAUhqB,GACfuoB,GAAoBvoB,EAAO0K,MAAQ,CAAC,CAACsf,EAAWb,IACzCA,EAGT,IAAK,IAAIt4B,EAAI,EAAGA,EAAIq4B,EAAIp4B,OAAQD,IAAK,CACnC,IAAIq5B,EAAShB,EAAIr4B,GACbs5B,EAAMD,EAAO,GACbE,EAAMF,EAAO,GAEbC,IAAQH,IAIZb,EAAKiB,GAQP,OALW,OAAPjB,IACFA,EAAKa,EAAUhqB,GACfkpB,EAAIj3B,KAAK,CAAC+3B,EAAWb,KAGhBA,EA6BIkB,CAAmBrqB,EAAQgqB,GAEpC,IAAKb,EAAGjB,UAEN,OADAtb,EAAI3a,KAAKk3B,GACFT,GAAgBpU,EAAK2V,EAAQxB,EAAMzoB,EAAQ4M,EAAKkd,GAGzDX,EAAGjB,UAAU7zB,EAAO,GAAIigB,IAAM,SAAUwK,EAAKwL,GAG3C,GAAIxL,EACF,OAAO4J,GAAgBpU,EAAK2V,EAAQxB,EAAMzoB,EAAQ4M,EAAKkd,GAIzDld,EAAI3a,KAAKk3B,GAGTT,GAAgB4B,EAAMhW,EAAIrkB,OAASq6B,EAAKr6B,KAAOg6B,EAAS3B,GAAYgC,EAAKr6B,MAAOw4B,EAAMzoB,EAAQ4M,EAAKkd,WAE5FG,EAAOn5B,OAChB43B,GAAgBpU,EAAK2V,EAAQxB,EAAMzoB,EAAQ4M,EAAKkd,GACvCA,EACTrB,EAAKnU,EAAK1H,GAEV8b,GAAgBpU,EAAKgU,GAAY,KAAMG,EAAMzoB,EAAQ4M,GAAK,GAY9D,IAAI2d,GAAgB,CAClBC,KAAM,YACNC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,mBACLC,IAAK,YACLC,IAAK,aACLC,IAAK,YACLC,IAAK,cACLC,KAAM,aACNC,IAAK,YACLC,IAAK,YACLC,KAAM,wBACNC,IAAK,aACLC,KAAM,aACNC,IAAK,YACLC,IAAK,YACLC,IAAK,gBACLC,KAAM,cAYJC,GAAc,SAAqBtX,QACzB,IAARA,IACFA,EAAM,IAGR,IAAIuX,EAAM3O,GAAiB5I,GAE3B,OADeiW,GAAcsB,EAAIxuB,gBACd,IAqEjByuB,GAAe,SAASA,EAAaxX,GAEvC,GAAI7iB,MAAMY,QAAQiiB,GAAM,CACtB,IAAIyX,EAAS,GACbzX,EAAIngB,SAAQ,SAAU63B,GACpBA,EAASF,EAAaE,GAElBv6B,MAAMY,QAAQ25B,GAChBD,EAASA,EAAO57B,OAAO67B,GACd/3B,GAAS+3B,IAClBD,EAAO95B,KAAK+5B,MAGhB1X,EAAMyX,OAGNzX,EAFwB,kBAARA,GAAoBA,EAAI1c,OAElC,CAACq0B,GAAU,CACf3X,IAAKA,KAEErgB,GAASqgB,IAA2B,kBAAZA,EAAIA,KAAoBA,EAAIA,KAAOA,EAAIA,IAAI1c,OAEtE,CAACq0B,GAAU3X,IAGX,GAGR,OAAOA,GAYT,SAAS2X,GAAU3X,GACjB,IAAKA,EAAIrkB,KAAM,CACb,IAAIi8B,EAAWN,GAAYtX,EAAIA,KAE3B4X,IACF5X,EAAIrkB,KAAOi8B,GAIf,OAAO5X,EAUT,IAAI6X,GAA2B,SAAUvX,GAgBvC,SAASuX,EAAYnsB,EAAQR,EAAS2K,GACpC,IAAI/D,EAGAoE,EAAWf,GAAe,CAC5BhR,UAAU,GACT+G,GAIH,GAHA4G,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQwK,EAAUL,IAAUlJ,KAGrDzB,EAAQsO,cAAcvZ,SAAoD,IAAzCiL,EAAQsO,cAAcvZ,QAAQzD,OAqBlEkP,EAAOsU,IAAI9U,EAAQsO,cAAcvZ,cApBjC,IAAK,IAAI1D,EAAI,EAAGu7B,EAAI5sB,EAAQsO,cAAcue,UAAWx7B,EAAIu7B,EAAEt7B,OAAQD,IAAK,CACtE,IAAIy7B,EAAW9iB,GAAc4iB,EAAEv7B,IAC3BojB,EAAOvG,GAAKsZ,QAAQsF,GAQxB,GALKA,IACHrY,EAAOhK,GAAYmD,aAAakf,IAI9BrY,GAAQA,EAAKsY,cAAe,CAC9BvsB,EAAOwsB,UAAUF,GACjB,OAWN,OAAOlmB,EAGT,OApDA,IAAe+lB,EAAavX,GAoDrBuX,EArDsB,CAsD7BliB,IAEFA,GAAYuH,kBAAkB,cAAe2a,IAQ7C,IAAIM,GAAkC,SAAU7X,GAgB9C,SAAS6X,EAAmBzsB,EAAQR,GAClC,IAAI4G,EAwBJ,OAtBAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5CyrB,iBAAmB,SAAUx3B,GACjC,OAAOkR,EAAMumB,gBAAgBz3B,IAG/BkR,EAAMwmB,gBAAkB,SAAU13B,GAChC,OAAOkR,EAAMymB,eAAe33B,IAG9BkR,EAAM0mB,aAAe,SAAU53B,GAC7B,OAAOkR,EAAM2mB,YAAY73B,IAG3BkR,EAAMyO,eAAiB,SAAU3f,GAC/B,OAAOkR,EAAMoJ,cAActa,IAG7BkR,EAAMuJ,gBAENvJ,EAAM9S,SAEC8S,EAxCT,IAAeqmB,EAAoB7X,GA2DnC,IAAItT,EAASmrB,EAAmB78B,UA+MhC,OA7MA0R,EAAO7I,SAAW,SAAoB2C,EAAKshB,EAAO9jB,QACpC,IAARwC,IACFA,EAAM,YAGM,IAAVshB,IACFA,EAAQ,SAGS,IAAf9jB,IACFA,EAAa,IAGf8jB,EAAQroB,EAAO,CACb6F,UAAW+G,KAAK+M,gBAChByH,SAAU,GACTiH,GAES,WAARthB,GACFnK,EAAM4B,MAAM,yDAA2DuI,EAAM,4CAI/ExC,EAAavE,EAAO,CAClBihB,KAAM,UACL1c,GACHqI,KAAK+rB,UAAYtQ,EAAMjH,SACvB,IAAI3gB,EAAK2D,GAAS2C,EAAKshB,EAAO9jB,GAO9B,OANA9D,EAAG8E,YAAYnB,GAAS,OAAQ,CAC9ByB,UAAW,wBACV,CACD,eAAe,KAEjB+G,KAAKgsB,oBAAoBn4B,GAClBA,GAGTwM,EAAOiK,QAAU,WAEftK,KAAKisB,eAAiB,KAEtBtY,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAapCK,EAAO2rB,oBAAsB,SAA6Bn4B,GAaxD,OAZAmM,KAAKisB,eAAiBz0B,GAAS,OAAQ,CACrCyB,UAAW,oBACV,CAED,YAAa,WAGXpF,GACFA,EAAG8E,YAAYqH,KAAKisB,gBAGtBjsB,KAAK2V,YAAY3V,KAAKksB,aAAcr4B,GAC7BmM,KAAKisB,gBAgBd5rB,EAAOsV,YAAc,SAAqBtd,EAAMxE,GAK9C,QAJW,IAAPA,IACFA,EAAKmM,KAAKnM,WAGCqH,IAAT7C,EACF,OAAO2H,KAAKksB,cAAgB,YAG9B,IAAIC,EAAgBnsB,KAAKyK,SAASpS,GAClC2H,KAAKksB,aAAe7zB,EACpBH,GAAY8H,KAAKisB,eAAgBE,GAE5BnsB,KAAKosB,gBAAmBpsB,KAAKoJ,QAAQG,SAAS8iB,qBAEjDx4B,EAAGoE,aAAa,QAASk0B,IAW7B9rB,EAAO0M,cAAgB,WACrB,MAAO,0BAA4B4G,EAAWhlB,UAAUoe,cAAcpZ,KAAKqM,OAO7EK,EAAOhO,OAAS,WACT2N,KAAKssB,WACRtsB,KAAKssB,UAAW,EAChBtsB,KAAK3G,YAAY,gBACjB2G,KAAKyH,IAAIxP,aAAa,gBAAiB,SAET,qBAAnB+H,KAAK+rB,WACd/rB,KAAKyH,IAAIxP,aAAa,WAAY+H,KAAK+rB,WAGzC/rB,KAAKiD,GAAG,CAAC,MAAO,SAAUjD,KAAK6rB,cAC/B7rB,KAAKiD,GAAG,UAAWjD,KAAK4T,kBAQ5BvT,EAAOjO,QAAU,WACf4N,KAAKssB,UAAW,EAChBtsB,KAAK9G,SAAS,gBACd8G,KAAKyH,IAAIxP,aAAa,gBAAiB,QAET,qBAAnB+H,KAAK+rB,WACd/rB,KAAKyH,IAAIxN,gBAAgB,YAG3B+F,KAAKvO,IAAI,YAAauO,KAAKyrB,kBAC3BzrB,KAAKvO,IAAI,WAAYuO,KAAK2rB,iBAC1B3rB,KAAKvO,IAAI,CAAC,MAAO,SAAUuO,KAAK6rB,cAChC7rB,KAAKvO,IAAI,UAAWuO,KAAK4T,iBAS3BvT,EAAOqJ,qBAAuB,WAC5B1J,KAAK2V,YAAY3V,KAAKksB,eAexB7rB,EAAOyrB,YAAc,SAAqB/vB,GACpCiE,KAAKuJ,SAASgjB,cAChBvsB,KAAKuJ,SAASgjB,aAAa54B,KAAKqM,KAAMzS,YAgB1C8S,EAAOkO,cAAgB,SAAuBxS,GAIxC,IAAQyS,WAAWzS,EAAO,UAAY,IAAQyS,WAAWzS,EAAO,UAClEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAK8D,QAAQ,UAGb6P,EAAWhlB,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAI3CyvB,EA3Q6B,CA4QpCxiB,IAEFA,GAAYuH,kBAAkB,qBAAsBib,IAOpD,IAAIgB,GAA2B,SAAUC,GAavC,SAASD,EAAYztB,EAAQR,GAC3B,IAAI4G,EAWJ,OATAA,EAAQsnB,EAAoB94B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAErD0sB,SAENvnB,EAAMwnB,QAAU,SAAU14B,GACxB,OAAOkR,EAAMunB,OAAOz4B,IAGtB8K,EAAOkE,GAAG,eAAgBkC,EAAMwnB,SACzBxnB,EAxBT,IAAeqnB,EAAaC,GA+B5B,IAAIpsB,EAASmsB,EAAY79B,UAiGzB,OA/FA0R,EAAOiK,QAAU,WACftK,KAAKjB,SAAStN,IAAI,eAAgBuO,KAAK2sB,SAEvCF,EAAoB99B,UAAU2b,QAAQ3W,KAAKqM,OAU7CK,EAAO7I,SAAW,WAMhB,OALSA,GAAS,MAAO,CACvByB,UAAW,aAEXub,UAAW,KAcfnU,EAAOqsB,OAAS,SAAgB3wB,GAC9B,IAAIyf,EAAMxb,KAAKjB,SAAS6tB,SACxB5sB,KAAK6sB,OAAOrR,GAGRA,EACFxb,KAAKoN,OAELpN,KAAKqN,QAWThN,EAAOwsB,OAAS,SAAgBrR,GAC9B,IAAIsR,EAAkB,GAGlBtR,IACFsR,EAAkB,QAAWtR,EAAM,MAGrCxb,KAAKyH,IAAIhI,MAAMqtB,gBAAkBA,GAenCzsB,EAAOyrB,YAAc,SAAqB/vB,GAExC,GAAKiE,KAAKoJ,QAAQgM,WAAlB,CAIA,IAAI2X,EAAoB/sB,KAAKoJ,QAAQ4jB,YAAY,QAAUhtB,KAAKoJ,QAAQ6jB,IAAIC,UAAYltB,KAAKoJ,QAAQ6jB,IAAIC,SAASr9B,OAAS,GAEvHmQ,KAAKoJ,QAAQ4J,MAAK,KAGnBzd,IAAcH,KAAY23B,GAC3B/sB,KAAKoJ,QAAQ4J,MAAK,GAAMrY,QAGtBqF,KAAKoJ,QAAQ4L,SACfxC,GAAexS,KAAKoJ,QAAQD,QAE5BnJ,KAAKoJ,QAAQ8L,UAIVsX,EAjIsB,CAkI7BhB,IAEFxiB,GAAYuH,kBAAkB,cAAeic,IAC7C,IAEIW,GAAU,CACZC,UAAW,YACXC,UAAW,aACXC,MAAO,QACPC,mBAAoB,6CACpBC,eAAgB,2BAChBC,sBAAuB,aACvBC,kBAAmB,QACnBC,OAAQ,mCACR/J,OAAQ,8BACRgK,UAAW,0DAeb,SAASC,GAAeC,EAAOC,GAC7B,IAAIC,EAEJ,GAAqB,IAAjBF,EAAMj+B,OAERm+B,EAAMF,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAC9D,IAAqB,IAAjBA,EAAMj+B,OAIf,MAAM,IAAIkC,MAAM,gCAAkC+7B,EAAQ,gDAF1DE,EAAMF,EAAMx+B,MAAM,GAKpB,MAAO,QAAUwe,SAASkgB,EAAI1+B,MAAM,EAAG,GAAI,IAAM,IAAMwe,SAASkgB,EAAI1+B,MAAM,EAAG,GAAI,IAAM,IAAMwe,SAASkgB,EAAI1+B,MAAM,EAAG,GAAI,IAAM,IAAMy+B,EAAU,IAmB/I,SAASE,GAAep6B,EAAI4L,EAAOyO,GACjC,IACEra,EAAG4L,MAAMA,GAASyO,EAClB,MAAOja,GAEP,QAUJ,IAAIi6B,GAAgC,SAAUva,GAgB5C,SAASua,EAAiBnvB,EAAQR,EAAS2K,GACzC,IAAI/D,EAEJA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,EAAS2K,IAAUlJ,KAEzD,IAAImuB,EAAuB,SAA8Bl6B,GACvD,OAAOkR,EAAMif,cAAcnwB,IAkC7B,OA/BA8K,EAAOkE,GAAG,aAAa,SAAUhP,GAC/B,OAAOkR,EAAMipB,cAAcn6B,MAE7B8K,EAAOkE,GAAG,kBAAmBkrB,GAC7BpvB,EAAOkE,GAAG,kBAAkB,SAAUhP,GACpC,OAAOkR,EAAMkpB,eAAep6B,MAM9B8K,EAAOmK,MAAMzE,GAAK,IAAuBU,IAAQ,WAC/C,GAAIpG,EAAO6e,OAAS7e,EAAO6e,MAAMmE,yBAC/B/hB,KAAKqN,WADP,CAKAtO,EAAOkE,GAAG,mBAAoBkrB,GAC9BpvB,EAAOkE,GAAG,eAAgBkrB,GAC1B,IAAS7uB,iBAAiB,oBAAqB6uB,GAC/CpvB,EAAOkE,GAAG,WAAW,WACnB,OAAO,IAAS7D,oBAAoB,oBAAqB+uB,MAI3D,IAFA,IAAI3W,EAASxX,KAAKuJ,SAASsD,cAAc2K,QAAU,GAE1C5nB,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IACjCoQ,KAAKoJ,QAAQoK,mBAAmBgE,EAAO5nB,IAAI,GAG7CoQ,KAAKquB,sBAEAlpB,EAvDT,IAAe+oB,EAAkBva,GAoEjC,IAAItT,EAAS6tB,EAAiBv/B,UA0R9B,OAxRA0R,EAAOguB,eAAiB,WAWtB,IAVA,IAMIC,EACAC,EACAC,EARAC,EAAQ,CACVnU,SAAU,EACVG,UAAW,GAETiU,EAAY1uB,KAAKoJ,QAAQkK,aACzBqb,EAAW3uB,KAAKoJ,QAAQwlB,OAAOC,iBAK1Bj/B,EAAI,EAAGA,EAAI8+B,EAAU7+B,OAAQD,IAAK,CACzC,IAAI8iB,EAAQgc,EAAU9+B,GAElB++B,GAAYA,EAASrW,SAAWqW,EAAS9jB,UAAY8jB,EAAS9jB,WAAa6H,EAAM7H,UAAY6H,EAAMyG,QAAQsV,EAEzG/b,EAAMyG,OAASwV,EAASxV,KAC1BqV,EAAiB9b,EACP8b,IACVA,EAAiB9b,GAGVic,IAAaA,EAASrW,SAC/BkW,EAAiB,KACjBF,EAAY,KACZC,EAAgB,MACP7b,EAAe,UACL,iBAAfA,EAAMyG,MAA4BmV,EAE3B5b,EAAMyG,QAAQsV,IAAUF,IACjCA,EAAgB7b,GAFhB4b,EAAY5b,GAWd8b,EACFA,EAAenQ,KAAO,UACbkQ,EACTA,EAAclQ,KAAO,UACZiQ,IACTA,EAAUjQ,KAAO,YAarBhe,EAAO+tB,cAAgB,WACjBpuB,KAAKoJ,QAAQwU,OAAS5d,KAAKoJ,QAAQwU,MAAMmE,yBAC3C/hB,KAAKqN,OAELrN,KAAKoN,QAWT/M,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,0BACV,CACD,UAAa,MACb,YAAa,MACb,cAAe,UAQnBoH,EAAOyuB,aAAe,WACW,oBAApB,IAASnS,QAClB,IAASA,OAAOoS,YAAY,IAAU,GAAI/uB,KAAKyH,MAYnDpH,EAAO+jB,cAAgB,WACrB,IAAI5M,EAASxX,KAAKoJ,QAAQkK,aACtB0b,EAA6BhvB,KAAKuJ,SAASylB,2BAG/C,GAFAhvB,KAAK8uB,eAEDE,EAAJ,CAGE,IAFA,IAAIC,EAAgB,GAEXn/B,EAAK,EAAGA,EAAK0nB,EAAO3nB,SAAUC,EAAI,CACzC,IAAI4iB,EAAQ8E,EAAO1nB,GAEA,YAAf4iB,EAAM2L,MAIV4Q,EAAcj+B,KAAK0hB,GAGrB1S,KAAKkvB,eAAeD,OAbtB,CAwBA,IAJA,IAAIE,EAAoB,KACpBC,EAAyB,KACzBx/B,EAAI4nB,EAAO3nB,OAERD,KAAK,CACV,IAAIy/B,EAAS7X,EAAO5nB,GAEA,YAAhBy/B,EAAOhR,OACW,iBAAhBgR,EAAOlW,KACTgW,EAAoBE,EAEpBD,EAAyBC,GAK3BD,GACqC,QAAnCpvB,KAAKzF,aAAa,cACpByF,KAAK/H,aAAa,YAAa,OAGjC+H,KAAKkvB,eAAeE,IACXD,IAC8B,cAAnCnvB,KAAKzF,aAAa,cACpByF,KAAK/H,aAAa,YAAa,aAGjC+H,KAAKkvB,eAAeC,MAWxB9uB,EAAOivB,mBAAqB,SAA4B5c,GAKtD,IAJA,IAAI6c,EAAYvvB,KAAKoJ,QAAQomB,kBAAkBC,YAC3C9c,EAAOD,EAAMgM,WACb9uB,EAAI+iB,EAAK9iB,OAEND,KAAK,CACV,IAAIgjB,EAAMD,EAAK/iB,GAEf,GAAKgjB,EAAL,CAIA,IAAI8c,EAAS9c,EAAI+c,aAsCjB,GApCIJ,EAAUzB,QACZ4B,EAAOj3B,WAAWgH,MAAMquB,MAAQyB,EAAUzB,OAGxCyB,EAAUK,aACZ3B,GAAeyB,EAAOj3B,WAAY,QAASo1B,GAAe0B,EAAUzB,OAAS,OAAQyB,EAAUK,cAG7FL,EAAUM,kBACZH,EAAOj3B,WAAWgH,MAAMowB,gBAAkBN,EAAUM,iBAGlDN,EAAUO,mBACZ7B,GAAeyB,EAAOj3B,WAAY,kBAAmBo1B,GAAe0B,EAAUM,iBAAmB,OAAQN,EAAUO,oBAGjHP,EAAUQ,cACRR,EAAUS,cACZ/B,GAAeyB,EAAQ,kBAAmB7B,GAAe0B,EAAUQ,YAAaR,EAAUS,gBAE1FN,EAAOjwB,MAAMowB,gBAAkBN,EAAUQ,aAIzCR,EAAUU,YACgB,eAAxBV,EAAUU,UACZP,EAAOj3B,WAAWgH,MAAMywB,WAAa,uDACJ,WAAxBX,EAAUU,UACnBP,EAAOj3B,WAAWgH,MAAMywB,WAAa,2CACJ,cAAxBX,EAAUU,UACnBP,EAAOj3B,WAAWgH,MAAMywB,WAAa,wDACJ,YAAxBX,EAAUU,YACnBP,EAAOj3B,WAAWgH,MAAMywB,WAAa,2DAIrCX,EAAUY,aAAyC,IAA1BZ,EAAUY,YAAmB,CACxD,IAAIC,EAAW,IAAS17B,WAAWg7B,EAAOjwB,MAAM2wB,UAChDV,EAAOjwB,MAAM2wB,SAAWA,EAAWb,EAAUY,YAAc,KAC3DT,EAAOjwB,MAAMtE,OAAS,OACtBu0B,EAAOjwB,MAAMjE,IAAM,OAGjB+zB,EAAUc,YAAuC,YAAzBd,EAAUc,aACP,eAAzBd,EAAUc,WACZX,EAAOj3B,WAAWgH,MAAM6wB,YAAc,aAEtCZ,EAAOj3B,WAAWgH,MAAM4wB,WAAalD,GAAQoC,EAAUc,gBAa/DhwB,EAAO6uB,eAAiB,SAAwB1X,GAK9C,GAJKhnB,MAAMY,QAAQomB,KACjBA,EAAS,CAACA,IAGmB,oBAApB,IAASmF,SAAyBnF,EAAO3R,OAAM,SAAU6M,GAClE,OAAQA,EAAMgM,cADhB,CAQA,IAFA,IAAI/L,EAAO,GAEF/iB,EAAI,EAAGA,EAAI4nB,EAAO3nB,SAAUD,EAGnC,IAFA,IAAI8iB,EAAQ8E,EAAO5nB,GAEVu7B,EAAI,EAAGA,EAAIzY,EAAMgM,WAAW7uB,SAAUs7B,EAC7CxY,EAAK3hB,KAAK0hB,EAAMgM,WAAWyM,IAK/B,IAASxO,OAAOoS,YAAY,IAAUpc,EAAM3S,KAAKyH,KAEjD,IAAK,IAAI8oB,EAAM,EAAGA,EAAM/Y,EAAO3nB,SAAU0gC,EAAK,CAG5C,IAFA,IAAIC,EAAUhZ,EAAO+Y,GAEZE,EAAK,EAAGA,EAAKD,EAAQ9R,WAAW7uB,SAAU4gC,EAAI,CACrD,IAAIC,EAAQF,EAAQ9R,WAAW+R,GAAId,aACnCz2B,GAASw3B,EAAO,sBAChBx3B,GAASw3B,EAAO,uBAAyBF,EAAQ3lB,SAAW2lB,EAAQ3lB,SAAW0lB,IAE3EC,EAAQ3lB,UACV5S,GAAay4B,EAAO,OAAQF,EAAQ3lB,UAIpC7K,KAAKoJ,QAAQomB,mBACfxvB,KAAKsvB,mBAAmBkB,MAKvBtC,EA/V2B,CAgWlCllB,IAEFA,GAAYuH,kBAAkB,mBAAoB2d,IAOlD,IAAIyC,GAA8B,SAAUhd,GAG1C,SAASgd,IACP,OAAOhd,EAAWpgB,MAAMyM,KAAMzS,YAAcyS,KA4B9C,OA/BA,IAAe2wB,EAAgBhd,GAMlBgd,EAAehiC,UAQrB6I,SAAW,WAChB,IAAIo5B,EAAU5wB,KAAKoJ,QAAQwnB,UACvBC,EAAa7wB,KAAKyK,SAASmmB,EAAU,eAAiB,gBACtDjb,EAAcne,GAAS,OAAQ,CACjCyB,UAAW,mBACXf,YAAa8H,KAAKyK,SAAS,kBAAmB,CAAComB,MAG7Ch9B,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAW,sBACX63B,IAAK,QAIP,OADAj9B,EAAG8E,YAAYgd,GACR9hB,GAGF88B,EAhCyB,CAiChC3nB,IAEFA,GAAYuH,kBAAkB,iBAAkBogB,IAOhD,IAAII,GAAsB,SAAUtE,GAGlC,SAASsE,IACP,OAAOtE,EAAoBl5B,MAAMyM,KAAMzS,YAAcyS,KAHvD,IAAe+wB,EAAQtE,GAMvB,IAAIpsB,EAAS0wB,EAAOpiC,UAyHpB,OAvGA0R,EAAO7I,SAAW,SAAoB2C,EAAKshB,EAAO9jB,QAClC,IAAV8jB,IACFA,EAAQ,SAGS,IAAf9jB,IACFA,EAAa,IAYf,IAAI9D,EAAK2D,GATH,SACNikB,EAAQroB,EAAO,CACb6F,UAAW+G,KAAK+M,iBACf0O,GAEH9jB,EAAavE,EAAO,CAElBpE,KAAM,UACL2I,IAQH,OANA9D,EAAG8E,YAAYnB,GAAS,OAAQ,CAC9ByB,UAAW,wBACV,CACD,eAAe,KAEjB+G,KAAKgsB,oBAAoBn4B,GAClBA,GAoBTwM,EAAOwL,SAAW,SAAkBrT,EAAO+F,QACzB,IAAZA,IACFA,EAAU,IAGZ,IAAItF,EAAY+G,KAAKtR,YAAYwB,KAGjC,OAFAF,EAAM2B,KAAK,+DAAiEsH,EAAY,yDAEjF+P,GAAYra,UAAUkd,SAASlY,KAAKqM,KAAMxH,EAAO+F,IAQ1D8B,EAAOhO,OAAS,WACdo6B,EAAoB99B,UAAU0D,OAAOsB,KAAKqM,MAE1CA,KAAKyH,IAAIxN,gBAAgB,aAQ3BoG,EAAOjO,QAAU,WACfq6B,EAAoB99B,UAAUyD,QAAQuB,KAAKqM,MAE3CA,KAAKyH,IAAIxP,aAAa,WAAY,aAapCoI,EAAOkO,cAAgB,SAAuBxS,GAMxC,IAAQyS,WAAWzS,EAAO,UAAY,IAAQyS,WAAWzS,EAAO,SAClEA,EAAMmG,kBAKRuqB,EAAoB99B,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAGlDg1B,EAhIiB,CAiIxBvF,IAEFxiB,GAAYuH,kBAAkB,SAAUwgB,IAQxC,IAAIC,GAA6B,SAAUC,GAGzC,SAASD,EAAcjyB,EAAQR,GAC7B,IAAI4G,EASJ,OAPAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MACzCkxB,YAAa,EAEnB/rB,EAAMlC,GAAG,aAAa,SAAUhP,GAC9B,OAAOkR,EAAMgsB,gBAAgBl9B,MAGxBkR,EAZT,IAAe6rB,EAAeC,GAsB9B,IAAI5wB,EAAS2wB,EAAcriC,UAgE3B,OA9DA0R,EAAO0M,cAAgB,WACrB,MAAO,uBAeT1M,EAAOyrB,YAAc,SAAqB/vB,GACxC,IAAIq1B,EAAcpxB,KAAKoJ,QAAQD,OAE/B,GAAInJ,KAAKkxB,YAAcn1B,EAAMsG,SAAWtG,EAAM2G,QAAS,CACrD,IAAIqqB,EAAoB/sB,KAAKoJ,QAAQ4jB,YAAY,QAAUhtB,KAAKoJ,QAAQ6jB,IAAIC,UAAYltB,KAAKoJ,QAAQ6jB,IAAIC,SAASr9B,OAAS,EAU3H,OATA2iB,GAAe4e,SAEXpxB,KAAKoJ,QAAQ4J,MAAK,KAGnBzd,IAAcH,KAAY23B,GAC3B/sB,KAAKoJ,QAAQ4J,MAAK,GAAMrY,SAM5B,IAAI02B,EAAKrxB,KAAKoJ,QAAQmC,SAAS,cAC3B+lB,EAAaD,GAAMA,EAAG9lB,SAAS,cAEnC,GAAK+lB,EAAL,CAKA,IAAIC,EAAY,WACd,OAAOD,EAAW32B,SAGhB2X,GAAU8e,GACZA,EAAY7e,KAAKgf,GAAW,eAE5BvxB,KAAKd,WAAWqyB,EAAW,QAX3BvxB,KAAKoJ,QAAQ4J,MAAK,GAAMrY,SAe5B0F,EAAOkO,cAAgB,SAAuBxS,GAC5CiE,KAAKkxB,YAAa,EAElBD,EAAQtiC,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAG7CsE,EAAO8wB,gBAAkB,SAAyBp1B,GAChDiE,KAAKkxB,YAAa,GAGbF,EAvFwB,CAwF/BD,IASFC,GAAcriC,UAAUu9B,aAAe,aACvCljB,GAAYuH,kBAAkB,gBAAiBygB,IAQ/C,IAAIQ,GAA2B,SAAUP,GAavC,SAASO,EAAYzyB,EAAQR,GAC3B,IAAI4G,EAMJ,OAJAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzC2V,YAAYpX,GAAWA,EAAQoX,aAAexQ,EAAMsF,SAAS,UAE5DtF,EAnBT,IAAeqsB,EAAaP,GA6B5B,IAAI5wB,EAASmxB,EAAY7iC,UA6DzB,OA3DA0R,EAAO0M,cAAgB,WACrB,MAAO,oBAAsBkkB,EAAQtiC,UAAUoe,cAAcpZ,KAAKqM,OAiBpEK,EAAOyrB,YAAc,SAAqB/vB,GAWxCiE,KAAK8D,QAAQ,CACX9U,KAAM,QACNiV,SAAS,KAgBb5D,EAAOkO,cAAgB,SAAuBxS,GAExC,IAAQyS,WAAWzS,EAAO,QAC5BA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAK8D,QAAQ,UAGbmtB,EAAQtiC,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAIxCy1B,EA3FsB,CA4F7BT,IAEF/nB,GAAYuH,kBAAkB,cAAeihB,IAO7C,IAAIC,GAA0B,SAAUR,GAatC,SAASQ,EAAW1yB,EAAQR,GAC1B,IAAI4G,EAwBJ,YAtBgB,IAAZ5G,IACFA,EAAU,IAGZ4G,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAE/CzB,EAAQmzB,YAA4Bx2B,IAAnBqD,EAAQmzB,QAAwBnzB,EAAQmzB,OAEzDvsB,EAAMlC,GAAGlE,EAAQ,QAAQ,SAAU9K,GACjC,OAAOkR,EAAMwsB,WAAW19B,MAG1BkR,EAAMlC,GAAGlE,EAAQ,SAAS,SAAU9K,GAClC,OAAOkR,EAAMysB,YAAY39B,MAGvBsK,EAAQmzB,QACVvsB,EAAMlC,GAAGlE,EAAQ,SAAS,SAAU9K,GAClC,OAAOkR,EAAM0sB,YAAY59B,MAItBkR,EArCT,IAAessB,EAAYR,GA+C3B,IAAI5wB,EAASoxB,EAAW9iC,UAqGxB,OAnGA0R,EAAO0M,cAAgB,WACrB,MAAO,oBAAsBkkB,EAAQtiC,UAAUoe,cAAcpZ,KAAKqM,OAepEK,EAAOyrB,YAAc,SAAqB/vB,GACpCiE,KAAKoJ,QAAQ4L,SACfxC,GAAexS,KAAKoJ,QAAQD,QAE5BnJ,KAAKoJ,QAAQ8L,SAcjB7U,EAAOyxB,aAAe,SAAsB/1B,GAC1CiE,KAAK3G,YAAY,aAEb2G,KAAKoJ,QAAQ4L,SACfhV,KAAK4xB,YAAY71B,GAEjBiE,KAAK2xB,WAAW51B,IAapBsE,EAAOsxB,WAAa,SAAoB51B,GACtCiE,KAAK3G,YAAY,aACjB2G,KAAK3G,YAAY,cACjB2G,KAAK9G,SAAS,eAEd8G,KAAK2V,YAAY,UAYnBtV,EAAOuxB,YAAc,SAAqB71B,GACxCiE,KAAK3G,YAAY,eACjB2G,KAAK9G,SAAS,cAEd8G,KAAK2V,YAAY,SAYnBtV,EAAOwxB,YAAc,SAAqB91B,GACxC,IAAI6K,EAAS5G,KAEbA,KAAK3G,YAAY,eACjB2G,KAAK9G,SAAS,aAEd8G,KAAK2V,YAAY,UAEjB3V,KAAKmE,IAAInE,KAAKoJ,QAAS,UAAU,SAAUnV,GACzC,OAAO2S,EAAOkrB,aAAa79B,OAIxBw9B,EArJqB,CAsJ5BV,IASFU,GAAW9iC,UAAUu9B,aAAe,OACpCljB,GAAYuH,kBAAkB,aAAckhB,IAsB5C,IAAIM,GAAwB,SAA+BC,EAASC,GAClED,EAAUA,EAAU,EAAI,EAAIA,EAC5B,IAAIE,EAAI90B,KAAK8C,MAAM8xB,EAAU,IACzB3uB,EAAIjG,KAAK8C,MAAM8xB,EAAU,GAAK,IAC9BG,EAAI/0B,KAAK8C,MAAM8xB,EAAU,MACzBI,EAAKh1B,KAAK8C,MAAM+xB,EAAQ,GAAK,IAC7BI,EAAKj1B,KAAK8C,MAAM+xB,EAAQ,MAe5B,OAbIhkB,MAAM+jB,IAAYA,IAAYM,OAGhCH,EAAI9uB,EAAI6uB,EAAI,MAIdC,EAAIA,EAAI,GAAKE,EAAK,EAAIF,EAAI,IAAM,KAGhC9uB,IAAM8uB,GAAKC,GAAM,KAAO/uB,EAAI,GAAK,IAAMA,EAAIA,GAAK,MAEhD6uB,EAAIA,EAAI,GAAK,IAAMA,EAAIA,IAKrBK,GAAiBR,GA0CrB,SAASS,GAAWR,EAASC,GAK3B,YAJc,IAAVA,IACFA,EAAQD,GAGHO,GAAeP,EAASC,GASjC,IAAIQ,GAA2B,SAAU9e,GAavC,SAAS8e,EAAY1zB,EAAQR,GAC3B,IAAI4G,EAUJ,OARAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5CiD,GAAGlE,EAAQ,CAAC,aAAc,UAAU,SAAU9K,GAClD,OAAOkR,EAAMutB,cAAcz+B,MAG7BkR,EAAMwtB,kBAECxtB,EAvBT,IAAestB,EAAa9e,GAiC5B,IAAItT,EAASoyB,EAAY9jC,UAkGzB,OAhGA0R,EAAO7I,SAAW,WAChB,IAAIyB,EAAY+G,KAAK+M,gBAEjBlZ,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAWA,EAAY,kCAGrB25B,EAAOp7B,GAAS,OAAQ,CAC1ByB,UAAW,mBACXf,YAAa8H,KAAKyK,SAASzK,KAAK6yB,YAAc,QAC7C,CACDxe,KAAM,iBAeR,OAbAxgB,EAAG8E,YAAYi6B,GACf5yB,KAAKoL,WAAa5T,GAAS,OAAQ,CACjCyB,UAAWA,EAAY,YACtB,CAED,YAAa,MAKb,KAAQ,iBAEVpF,EAAG8E,YAAYqH,KAAKoL,YACbvX,GAGTwM,EAAOiK,QAAU,WACftK,KAAKoL,WAAa,KAClBpL,KAAK8yB,UAAY,KAEjBnf,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAWpCK,EAAOsyB,gBAAkB,SAAyBI,GAChD,IAAInsB,EAAS5G,UAEA,IAAT+yB,IACFA,EAAO,GAGTA,EAAOP,GAAWO,GAEd/yB,KAAKgzB,iBAAmBD,IAI5B/yB,KAAKgzB,eAAiBD,EACtB/yB,KAAK+P,2BAA2B,+BAA+B,WAC7D,GAAKnJ,EAAOwE,WAAZ,CAIA,IAAI6nB,EAAUrsB,EAAOksB,UAEjBG,GAAWrsB,EAAOwE,WAAW3S,aAAew6B,IAC9CA,EAAU,KACVjjC,EAAM2B,KAAK,uJAGbiV,EAAOksB,UAAY,IAASn1B,eAAeiJ,EAAOosB,gBAE7CpsB,EAAOksB,YAIRG,EACFrsB,EAAOwE,WAAW8nB,aAAatsB,EAAOksB,UAAWG,GAEjDrsB,EAAOwE,WAAWzS,YAAYiO,EAAOksB,kBAe3CzyB,EAAOqyB,cAAgB,SAAuB32B,KAEvC02B,EApIsB,CAqI7BzpB,IASFypB,GAAY9jC,UAAUkkC,WAAa,OAUnCJ,GAAY9jC,UAAUu9B,aAAe,OACrCljB,GAAYuH,kBAAkB,cAAekiB,IAO7C,IAAIU,GAAkC,SAAUC,GAG9C,SAASD,IACP,OAAOC,EAAa7/B,MAAMyM,KAAMzS,YAAcyS,KAHhD,IAAemzB,EAAoBC,GAMnC,IAAI/yB,EAAS8yB,EAAmBxkC,UAkChC,OA1BA0R,EAAO0M,cAAgB,WACrB,MAAO,oBAYT1M,EAAOqyB,cAAgB,SAAuB32B,GAE5C,IAAIg3B,EAGFA,EADE/yB,KAAKoJ,QAAQof,QACRxoB,KAAKoJ,QAAQ0I,WAEb9R,KAAKoJ,QAAQoa,YAAcxjB,KAAKoJ,QAAQiqB,WAAWrU,YAAchf,KAAKoJ,QAAQ4V,cAGvFhf,KAAK2yB,gBAAgBI,IAGhBI,EAzC6B,CA0CpCV,IASFU,GAAmBxkC,UAAUkkC,WAAa,eAU1CM,GAAmBxkC,UAAUu9B,aAAe,eAC5CljB,GAAYuH,kBAAkB,qBAAsB4iB,IAOpD,IAAIG,GAA+B,SAAUF,GAa3C,SAASE,EAAgBv0B,EAAQR,GAC/B,IAAI4G,EAIAutB,EAAgB,SAAuBz+B,GACzC,OAAOkR,EAAMutB,cAAcz+B,IAkB7B,OArBAkR,EAAQiuB,EAAaz/B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAS9CiD,GAAGlE,EAAQ,iBAAkB2zB,GAKnCvtB,EAAMlC,GAAGlE,EAAQ,YAAa2zB,GAK9BvtB,EAAMlC,GAAGlE,EAAQ,iBAAkB2zB,GAE5BvtB,EApCT,IAAemuB,EAAiBF,GA8ChC,IAAI/yB,EAASizB,EAAgB3kC,UAuB7B,OArBA0R,EAAO0M,cAAgB,WACrB,MAAO,gBAeT1M,EAAOqyB,cAAgB,SAAuB32B,GAC5C,IAAI+V,EAAW9R,KAAKoJ,QAAQ0I,WAC5B9R,KAAK2yB,gBAAgB7gB,IAGhBwhB,EAtE0B,CAuEjCb,IASFa,GAAgB3kC,UAAUkkC,WAAa,WAUvCS,GAAgB3kC,UAAUu9B,aAAe,WACzCljB,GAAYuH,kBAAkB,kBAAmB+iB,IAQjD,IAAIC,GAA2B,SAAU5f,GAGvC,SAAS4f,IACP,OAAO5f,EAAWpgB,MAAMyM,KAAMzS,YAAcyS,KAgC9C,OAnCA,IAAeuzB,EAAa5f,GAMf4f,EAAY5kC,UAQlB6I,SAAW,WAChB,IAAI3D,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAW,qCACV,CAID,eAAe,IAGbu6B,EAAM7f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,OAE/C4yB,EAAOjf,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,OAAQ,CAC1D9H,YAAa,MAKf,OAFAs7B,EAAI76B,YAAYi6B,GAChB/+B,EAAG8E,YAAY66B,GACR3/B,GAGF0/B,EApCsB,CAqC7BvqB,IAEFA,GAAYuH,kBAAkB,cAAegjB,IAO7C,IAAIE,GAAoC,SAAUL,GAahD,SAASK,EAAqB10B,EAAQR,GACpC,IAAI4G,EAQJ,OANAA,EAAQiuB,EAAaz/B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE9CiD,GAAGlE,EAAQ,kBAAkB,SAAU9K,GAC3C,OAAOkR,EAAMutB,cAAcz+B,MAGtBkR,EArBT,IAAesuB,EAAsBL,GA+BrC,IAAI/yB,EAASozB,EAAqB9kC,UAsDlC,OApDA0R,EAAO0M,cAAgB,WACrB,MAAO,sBAUT1M,EAAO7I,SAAW,WAChB,IAAI3D,EAAKu/B,EAAazkC,UAAU6I,SAAS7D,KAAKqM,MAQ9C,OANsC,IAAlCA,KAAKuJ,SAASmqB,iBAChB7/B,EAAG6E,aAAalB,GAAS,OAAQ,GAAI,CACnC,eAAe,GACd,KAAMwI,KAAKoL,YAGTvX,GAaTwM,EAAOqyB,cAAgB,SAAuB32B,GAK5C,IAAIg3B,EAJmC,kBAA5B/yB,KAAKoJ,QAAQ0I,aAQtBihB,EADE/yB,KAAKoJ,QAAQof,QACR,EACExoB,KAAKoJ,QAAQuqB,qBACf3zB,KAAKoJ,QAAQuqB,uBAEb3zB,KAAKoJ,QAAQwqB,gBAGtB5zB,KAAK2yB,gBAAgBI,KAGhBU,EAtF+B,CAuFtChB,IASFgB,GAAqB9kC,UAAUkkC,WAAa,iBAU5CY,GAAqB9kC,UAAUu9B,aAAe,iBAC9CljB,GAAYuH,kBAAkB,uBAAwBkjB,IAOtD,IAAII,GAA2B,SAAUlgB,GAavC,SAASkgB,EAAY90B,EAAQR,GAC3B,IAAI4G,EAUJ,OARAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5C8zB,gBAEN3uB,EAAMlC,GAAGkC,EAAMpG,SAAU,kBAAkB,SAAU9K,GACnD,OAAOkR,EAAM2uB,cAAc7/B,MAGtBkR,EAvBT,IAAe0uB,EAAalgB,GAiC5B,IAAItT,EAASwzB,EAAYllC,UA6CzB,OA3CA0R,EAAO7I,SAAW,WAChB,IAAI3D,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAW,iCAcb,OAXA+G,KAAKoL,WAAa5T,GAAS,MAAO,CAChCyB,UAAW,oBACV,CACD,YAAa,QAEf+G,KAAKoL,WAAWzS,YAAYnB,GAAS,OAAQ,CAC3CyB,UAAW,mBACXf,YAAa8H,KAAKyK,SAAS,eAAiB,UAE9CzK,KAAKoL,WAAWzS,YAAY,IAASgF,eAAeqC,KAAKyK,SAAS,UAClE5W,EAAG8E,YAAYqH,KAAKoL,YACbvX,GAGTwM,EAAOiK,QAAU,WACftK,KAAKoL,WAAa,KAElBuI,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAapCK,EAAOyzB,cAAgB,SAAuB/3B,GACxCiE,KAAKjB,SAAS+S,aAAewgB,IAC/BtyB,KAAKoN,OAELpN,KAAKqN,QAIFwmB,EA/EsB,CAgF7B7qB,IAEFA,GAAYuH,kBAAkB,cAAesjB,IAO7C,IAAIE,GAA0B,SAAU9C,GAatC,SAAS8C,EAAWh1B,EAAQR,GAC1B,IAAI4G,EAcJ,OAZAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzCg0B,uBAEF7uB,EAAMiE,QAAQ6qB,cAChB9uB,EAAM+uB,6BAA+B,SAAUjgC,GAC7C,OAAOkR,EAAM6uB,qBAAqB//B,IAGpCkR,EAAMlC,GAAGkC,EAAMiE,QAAQ6qB,YAAa,iBAAkB9uB,EAAM+uB,+BAGvD/uB,EA3BT,IAAe4uB,EAAY9C,GAqC3B,IAAI5wB,EAAS0zB,EAAWplC,UA2DxB,OAzDA0R,EAAO7I,SAAW,WAChB,IAAI3D,EAAKo9B,EAAQtiC,UAAU6I,SAAS7D,KAAKqM,KAAM,SAAU,CACvD/G,UAAW,yCAUb,OAPA+G,KAAKm0B,QAAU38B,GAAS,OAAQ,CAC9ByB,UAAW,wBACXf,YAAa8H,KAAKyK,SAAS,SAC1B,CACD,cAAe,SAEjB5W,EAAG8E,YAAYqH,KAAKm0B,SACbtgC,GAQTwM,EAAO2zB,qBAAuB,YAEvBh0B,KAAKoJ,QAAQ6qB,aAAej0B,KAAKoJ,QAAQ6qB,YAAYG,cACxDp0B,KAAK/H,aAAa,iBAAiB,GACnC+H,KAAK9G,SAAS,oBACd8G,KAAK2V,YAAY,0CAEjB3V,KAAK/H,aAAa,iBAAiB,GACnC+H,KAAK3G,YAAY,oBACjB2G,KAAK2V,YAAY,yCAUrBtV,EAAOyrB,YAAc,WACnB9rB,KAAKoJ,QAAQ6qB,YAAYI,kBAO3Bh0B,EAAOiK,QAAU,WACXtK,KAAKoJ,QAAQ6qB,aACfj0B,KAAKvO,IAAIuO,KAAKoJ,QAAQ6qB,YAAa,iBAAkBj0B,KAAKk0B,8BAG5Dl0B,KAAKm0B,QAAU,KAEflD,EAAQtiC,UAAU2b,QAAQ3W,KAAKqM,OAG1B+zB,EAjGqB,CAkG5BhD,IAEFgD,GAAWplC,UAAUu9B,aAAe,uCACpCljB,GAAYuH,kBAAkB,aAAcwjB,IAgB5C,IAAIO,GAAQ,SAAeC,EAAQj3B,EAAKD,GAEtC,OADAk3B,EAAS/3B,OAAO+3B,GACTn3B,KAAKE,IAAID,EAAKD,KAAKC,IAAIC,EAAK2Q,MAAMsmB,GAAUj3B,EAAMi3B,KAUvDC,GAAsB,SAAU7gB,GAalC,SAAS6gB,EAAOz1B,EAAQR,GACtB,IAAI4G,EAmCJ,OAjCAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5Cy0B,iBAAmB,SAAUxgC,GACjC,OAAOkR,EAAMgsB,gBAAgBl9B,IAG/BkR,EAAMuvB,eAAiB,SAAUzgC,GAC/B,OAAOkR,EAAMwvB,cAAc1gC,IAG7BkR,EAAMyO,eAAiB,SAAU3f,GAC/B,OAAOkR,EAAMoJ,cAActa,IAG7BkR,EAAM0mB,aAAe,SAAU53B,GAC7B,OAAOkR,EAAM2mB,YAAY73B,IAG3BkR,EAAMyvB,iBAAmB,SAAU3gC,GACjC,OAAOkR,EAAM0vB,gBAAgB5gC,IAG/BkR,EAAMwnB,QAAU,SAAU14B,GACxB,OAAOkR,EAAMunB,OAAOz4B,IAItBkR,EAAM2vB,IAAM3vB,EAAMoG,SAASpG,EAAMoE,SAASwrB,SAE1C5vB,EAAM6vB,WAAW7vB,EAAMoE,SAASyrB,UAEhC7vB,EAAM9S,SAEC8S,EAhDT,IAAeqvB,EAAQ7gB,GA0DvB,IAAItT,EAASm0B,EAAO7lC,UAuUpB,OArUA0R,EAAOiY,QAAU,WACf,OAAOtY,KAAKssB,UAOdjsB,EAAOhO,OAAS,WACV2N,KAAKsY,YAITtY,KAAKiD,GAAG,YAAajD,KAAKy0B,kBAC1Bz0B,KAAKiD,GAAG,aAAcjD,KAAKy0B,kBAC3Bz0B,KAAKiD,GAAG,UAAWjD,KAAK4T,gBACxB5T,KAAKiD,GAAG,QAASjD,KAAK6rB,cAEtB7rB,KAAKiD,GAAGjD,KAAKoJ,QAAS,kBAAmBpJ,KAAK0sB,QAE1C1sB,KAAKi1B,aACPj1B,KAAKiD,GAAGjD,KAAKoJ,QAASpJ,KAAKi1B,YAAaj1B,KAAK0sB,QAG/C1sB,KAAK3G,YAAY,YACjB2G,KAAK/H,aAAa,WAAY,GAC9B+H,KAAKssB,UAAW,IAOlBjsB,EAAOjO,QAAU,WACf,GAAK4N,KAAKsY,UAAV,CAIA,IAAIhW,EAAMtC,KAAK80B,IAAIrtB,IAAIzD,cACvBhE,KAAKvO,IAAI,YAAauO,KAAKy0B,kBAC3Bz0B,KAAKvO,IAAI,aAAcuO,KAAKy0B,kBAC5Bz0B,KAAKvO,IAAI,UAAWuO,KAAK4T,gBACzB5T,KAAKvO,IAAI,QAASuO,KAAK6rB,cACvB7rB,KAAKvO,IAAIuO,KAAKoJ,QAAS,kBAAmBpJ,KAAK2sB,SAC/C3sB,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAK40B,kBAChC50B,KAAKvO,IAAI6Q,EAAK,UAAWtC,KAAK00B,gBAC9B10B,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAK40B,kBAChC50B,KAAKvO,IAAI6Q,EAAK,WAAYtC,KAAK00B,gBAC/B10B,KAAK/F,gBAAgB,YACrB+F,KAAK9G,SAAS,YAEV8G,KAAKi1B,aACPj1B,KAAKvO,IAAIuO,KAAKoJ,QAASpJ,KAAKi1B,YAAaj1B,KAAK0sB,QAGhD1sB,KAAKssB,UAAW,IAmBlBjsB,EAAO7I,SAAW,SAAkBxI,EAAMysB,EAAO9jB,GAqB/C,YApBc,IAAV8jB,IACFA,EAAQ,SAGS,IAAf9jB,IACFA,EAAa,IAIf8jB,EAAMxiB,UAAYwiB,EAAMxiB,UAAY,cACpCwiB,EAAQroB,EAAO,CACbohB,SAAU,GACTiH,GACH9jB,EAAavE,EAAO,CAClB,KAAQ,SACR,gBAAiB,EACjB,gBAAiB,EACjB,gBAAiB,IACjB,SAAY,GACXuE,GACIgc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAMhR,EAAMysB,EAAO9jB,IAc/D0I,EAAO8wB,gBAAkB,SAAyBp1B,GAChD,IAAIuG,EAAMtC,KAAK80B,IAAIrtB,IAAIzD,cAEJ,cAAfjI,EAAM/M,MACR+M,EAAM4F,iBAOW,eAAf5F,EAAM/M,MAA0BqG,IAClC0G,EAAM4F,iBAGRlH,KACAuF,KAAK9G,SAAS,eAQd8G,KAAK8D,QAAQ,gBACb9D,KAAKiD,GAAGX,EAAK,YAAatC,KAAK40B,kBAC/B50B,KAAKiD,GAAGX,EAAK,UAAWtC,KAAK00B,gBAC7B10B,KAAKiD,GAAGX,EAAK,YAAatC,KAAK40B,kBAC/B50B,KAAKiD,GAAGX,EAAK,WAAYtC,KAAK00B,gBAC9B10B,KAAK60B,gBAAgB94B,GAAO,IAkB9BsE,EAAOw0B,gBAAkB,SAAyB94B,KAalDsE,EAAOs0B,cAAgB,WACrB,IAAIryB,EAAMtC,KAAK80B,IAAIrtB,IAAIzD,cACvBnJ,KACAmF,KAAK3G,YAAY,eAQjB2G,KAAK8D,QAAQ,kBACb9D,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAK40B,kBAChC50B,KAAKvO,IAAI6Q,EAAK,UAAWtC,KAAK00B,gBAC9B10B,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAK40B,kBAChC50B,KAAKvO,IAAI6Q,EAAK,WAAYtC,KAAK00B,gBAC/B10B,KAAK0sB,UAWPrsB,EAAOqsB,OAAS,WACd,IAAI9lB,EAAS5G,KAMb,GAAKA,KAAKyH,KAAQzH,KAAK80B,IAAvB,CAMA,IAAII,EAAWl1B,KAAKm1B,cAEpB,OAAID,IAAal1B,KAAKo1B,YAItBp1B,KAAKo1B,UAAYF,EACjBl1B,KAAK+P,2BAA2B,iBAAiB,WAE/C,IAAIslB,EAAUzuB,EAAOouB,WAAa,SAAW,QAE7CpuB,EAAOkuB,IAAIjhC,KAAK4L,MAAM41B,IAAuB,IAAXH,GAAgBI,QAAQ,GAAK,QARxDJ,IAqBX70B,EAAO80B,YAAc,WACnB,OAAO34B,OAAO83B,GAAMt0B,KAAKu1B,aAAc,EAAG,GAAGD,QAAQ,KAevDj1B,EAAOm1B,kBAAoB,SAA2Bz5B,GACpD,IAAIW,EAAWZ,GAAmBkE,KAAKyH,IAAK1L,GAE5C,OAAIiE,KAAKg1B,WACAt4B,EAAST,EAGXS,EAASzF,GAclBoJ,EAAOkO,cAAgB,SAAuBxS,GAExC,IAAQyS,WAAWzS,EAAO,SAAW,IAAQyS,WAAWzS,EAAO,SACjEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKy1B,YACI,IAAQjnB,WAAWzS,EAAO,UAAY,IAAQyS,WAAWzS,EAAO,OACzEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAK01B,eAGL/hB,EAAWhlB,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAYlDsE,EAAOyrB,YAAc,SAAqB/vB,GACxCA,EAAMmG,kBACNnG,EAAM4F,kBAeRtB,EAAO20B,SAAW,SAAkBW,GAClC,QAAaz6B,IAATy6B,EACF,OAAO31B,KAAK41B,YAAa,EAG3B51B,KAAK41B,YAAcD,EAEf31B,KAAK41B,UACP51B,KAAK9G,SAAS,uBAEd8G,KAAK9G,SAAS,0BAIXs7B,EAlYiB,CAmYxBxrB,IAEFA,GAAYuH,kBAAkB,SAAUikB,IAExC,IAAIqB,GAAa,SAAoB9C,EAAMrhB,GACzC,OAAO4iB,GAAMvB,EAAOrhB,EAAM,IAAK,EAAG,KAAK4jB,QAAQ,GAAK,KASlDQ,GAA+B,SAAUniB,GAa3C,SAASmiB,EAAgB/2B,EAAQR,GAC/B,IAAI4G,EASJ,OAPAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C+1B,SAAW,GAEjB5wB,EAAMlC,GAAGlE,EAAQ,YAAY,SAAU9K,GACrC,OAAOkR,EAAMunB,OAAOz4B,MAGfkR,EAtBT,IAAe2wB,EAAiBniB,GAgChC,IAAItT,EAASy1B,EAAgBnnC,UAgG7B,OA9FA0R,EAAO7I,SAAW,WAChB,IAAI3D,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAW,sBAGT6N,EAAUtP,GAAS,OAAQ,CAC7ByB,UAAW,qBAET+8B,EAAax+B,GAAS,OAAQ,CAChCU,YAAa8H,KAAKyK,SAAS,YAEzBwrB,EAAY,IAASt4B,eAAe,MASxC,OARAqC,KAAKk2B,cAAgB1+B,GAAS,OAAQ,CACpCyB,UAAW,qCACXf,YAAa,OAEfrE,EAAG8E,YAAYmO,GACfA,EAAQnO,YAAYq9B,GACpBlvB,EAAQnO,YAAYs9B,GACpBnvB,EAAQnO,YAAYqH,KAAKk2B,eAClBriC,GAGTwM,EAAOiK,QAAU,WACftK,KAAK+1B,SAAW,KAChB/1B,KAAKk2B,cAAgB,KAErBviB,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAYpCK,EAAOqsB,OAAS,SAAgB3wB,GAC9B,IAAI6K,EAAS5G,KAEbA,KAAK+P,2BAA2B,0BAA0B,WACxD,IAAIkkB,EAAcrtB,EAAOwC,QAAQ6qB,YAE7BpiB,EAAWjL,EAAOwC,QAAQyI,WAE1BC,EAAWmiB,GAAeA,EAAYkC,SAAWlC,EAAYmC,cAAgBxvB,EAAOwC,QAAQ0I,WAE5FukB,EAAczvB,EAAOwC,QAAQitB,cAE7BhrB,EAAWzE,EAAOmvB,SAClBO,EAAUT,GAAWQ,EAAavkB,GAElClL,EAAO2vB,WAAaD,IAEtB1vB,EAAOa,IAAIhI,MAAMrE,MAAQk7B,EAEzBp+B,GAAY0O,EAAOsvB,cAAeI,GAClC1vB,EAAO2vB,SAAWD,GAIpB,IAAK,IAAI1mC,EAAI,EAAGA,EAAIiiB,EAAShiB,OAAQD,IAAK,CACxC,IAAI6hB,EAAQI,EAASJ,MAAM7hB,GACvB8hB,EAAMG,EAASH,IAAI9hB,GACnB4mC,EAAOnrB,EAASzb,GAEf4mC,IACHA,EAAO5vB,EAAOa,IAAI9O,YAAYnB,MAC9B6T,EAASzb,GAAK4mC,GAIZA,EAAKC,QAAQhlB,QAAUA,GAAS+kB,EAAKC,QAAQ/kB,MAAQA,IAIzD8kB,EAAKC,QAAQhlB,MAAQA,EACrB+kB,EAAKC,QAAQ/kB,IAAMA,EAEnB8kB,EAAK/2B,MAAMlE,KAAOs6B,GAAWpkB,EAAO4kB,GACpCG,EAAK/2B,MAAMrE,MAAQy6B,GAAWnkB,EAAMD,EAAO4kB,IAI7C,IAAK,IAAIvmC,EAAKub,EAASxb,OAAQC,EAAK+hB,EAAShiB,OAAQC,IACnD8W,EAAOa,IAAIhK,YAAY4N,EAASvb,EAAK,IAGvCub,EAASxb,OAASgiB,EAAShiB,WAIxBimC,EAjI0B,CAkIjC9sB,IAEFA,GAAYuH,kBAAkB,kBAAmBulB,IAOjD,IAAIY,GAA2B,SAAU/iB,GAavC,SAAS+iB,EAAY33B,EAAQR,GAC3B,IAAI4G,EAIJ,OAFAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C0sB,OAAS9nB,GAASH,GAAK,IAAuBU,GAAQA,EAAMunB,QAASloB,IACpEW,EAjBT,IAAeuxB,EAAa/iB,GA2B5B,IAAItT,EAASq2B,EAAY/nC,UA4HzB,OA1HA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,oBACV,CACD,cAAe,UAenBoH,EAAOqsB,OAAS,SAAgBiK,EAAaC,EAAch/B,GACzD,IAAIi/B,EAAcx7B,GAAa2E,KAAKyH,KAChCqvB,EAAah8B,GAAsBkF,KAAKoJ,QAAQvV,MAChDkjC,EAAiBJ,EAAYv7B,MAAQw7B,EAGzC,GAAKE,GAAeD,EAApB,CAQA,IAAIG,EAAmBL,EAAYp7B,KAAOu7B,EAAWv7B,KAAOw7B,EAKxDE,EAAoBN,EAAYv7B,MAAQ27B,GAAkBD,EAAWI,MAAQP,EAAYO,OAGzFC,EAAgBN,EAAYz7B,MAAQ,EAGpC47B,EAAmBG,EACrBA,GAAiBA,EAAgBH,EACxBC,EAAoBE,IAC7BA,EAAgBF,GAMdE,EAAgB,EAClBA,EAAgB,EACPA,EAAgBN,EAAYz7B,QACrC+7B,EAAgBN,EAAYz7B,OAO9B+7B,EAAgB/5B,KAAKg6B,MAAMD,GAC3Bn3B,KAAKyH,IAAIhI,MAAMy3B,MAAQ,IAAMC,EAAgB,KAC7Cn3B,KAAKq3B,MAAMz/B,KAUbyI,EAAOg3B,MAAQ,SAAez/B,GAC5BM,GAAY8H,KAAKyH,IAAK7P,IAqBxByI,EAAOi3B,WAAa,SAAoBX,EAAaC,EAAc7D,EAAM1B,GACvE,IAAIzqB,EAAS5G,KAEbA,KAAK+P,2BAA2B,0BAA0B,WACxD,IAAInY,EAEAka,EAAWlL,EAAOwC,QAAQ0I,WAE9B,GAAIlL,EAAOwC,QAAQ6qB,aAAertB,EAAOwC,QAAQ6qB,YAAYkC,SAAU,CACrE,IAAIoB,EAAa3wB,EAAOwC,QAAQ6qB,YAAYsD,aAExCC,EAAgBD,EAAaX,EAAeW,EAChD3/B,GAAW4/B,EAAgB,EAAI,GAAK,KAAOhF,GAAWgF,EAAeD,QAErE3/B,EAAU46B,GAAWO,EAAMjhB,GAG7BlL,EAAO8lB,OAAOiK,EAAaC,EAAch/B,GAErCy5B,GACFA,QAKCqF,EAxJsB,CAyJ7B1tB,IAEFA,GAAYuH,kBAAkB,cAAemmB,IAQ7C,IAAIe,GAA+B,SAAU9jB,GAa3C,SAAS8jB,EAAgB14B,EAAQR,GAC/B,IAAI4G,EAIJ,OAFAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C0sB,OAAS9nB,GAASH,GAAK,IAAuBU,GAAQA,EAAMunB,QAASloB,IACpEW,EAjBT,IAAesyB,EAAiB9jB,GA2BhC,IAAItT,EAASo3B,EAAgB9oC,UAiC7B,OA/BA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,oCACV,CACD,cAAe,UAgBnBoH,EAAOqsB,OAAS,SAAgBiK,EAAaC,GAC3C,IAAIc,EAAc13B,KAAKuL,SAAS,eAEhC,GAAKmsB,EAAL,CAIA,IAAI3E,EAAO/yB,KAAKoJ,QAAQoa,YAAcxjB,KAAKoJ,QAAQiqB,WAAWrU,YAAchf,KAAKoJ,QAAQ4V,cACzF0Y,EAAYJ,WAAWX,EAAaC,EAAc7D,KAG7C0E,EA7D0B,CA8DjCzuB,IASFyuB,GAAgB9oC,UAAU4a,SAAW,CACnC8B,SAAU,IAGPjV,IAAWtB,IACd2iC,GAAgB9oC,UAAU4a,SAAS8B,SAASra,KAAK,eAGnDgY,GAAYuH,kBAAkB,kBAAmBknB,IAUjD,IAAIE,GAAgC,SAAUhkB,GAa5C,SAASgkB,EAAiB54B,EAAQR,GAChC,IAAI4G,EAIJ,OAFAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C0sB,OAAS9nB,GAASH,GAAK,IAAuBU,GAAQA,EAAMunB,QAASloB,IACpEW,EAjBT,IAAewyB,EAAkBhkB,GA2BjC,IAAItT,EAASs3B,EAAiBhpC,UA6B9B,OA3BA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,uBAgBfoH,EAAOqsB,OAAS,SAAgBiK,EAAaC,GAC3C,IAAIhwB,EAAS5G,KAET+yB,EAAO6D,EAAe52B,KAAKoJ,QAAQ0I,WACvC9R,KAAKuL,SAAS,eAAe+rB,WAAWX,EAAaC,EAAc7D,GAAM,WACvEnsB,EAAOa,IAAIhI,MAAMlE,KAAOo7B,EAAYv7B,MAAQw7B,EAAe,SAIxDe,EAzD2B,CA0DlC3uB,IASF2uB,GAAiBhpC,UAAU4a,SAAW,CACpC8B,SAAU,CAAC,gBAEbrC,GAAYuH,kBAAkB,mBAAoBonB,IAClD,IAUIC,GAAuB,SAAUC,GAanC,SAASD,EAAQ74B,EAAQR,GACvB,IAAI4G,EAMJ,OAJAA,EAAQ0yB,EAAQlkC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzC83B,oBAEC3yB,EAnBT,IAAeyyB,EAASC,GA4BxB,IAAIx3B,EAASu3B,EAAQjpC,UA6crB,OA3cA0R,EAAOy3B,kBAAoB,WACzB,IAAIlxB,EAAS5G,KAEbA,KAAK2sB,QAAUloB,GAAKzE,KAAMA,KAAK0sB,QAC/B1sB,KAAK0sB,OAAS9nB,GAAS5E,KAAK2sB,QAASnoB,IACrCxE,KAAKiD,GAAGjD,KAAKoJ,QAAS,CAAC,QAAS,iBAAkB,cAAepJ,KAAK0sB,QAElE1sB,KAAKoJ,QAAQ6qB,aACfj0B,KAAKiD,GAAGjD,KAAKoJ,QAAQ6qB,YAAa,iBAAkBj0B,KAAK0sB,QAK3D1sB,KAAK+3B,eAAiB,KAEtB/3B,KAAKg4B,uBAAyB,SAAU/jC,GACtC,OAAO2S,EAAOqxB,gBAAgBhkC,IAGhC+L,KAAKk4B,wBAA0B,SAAUjkC,GACvC,OAAO2S,EAAOuxB,iBAAiBlkC,IAGjC+L,KAAKiD,GAAGjD,KAAKoJ,QAAS,CAAC,WAAYpJ,KAAKg4B,wBACxCh4B,KAAKiD,GAAGjD,KAAKoJ,QAAS,CAAC,QAAS,QAAS,WAAYpJ,KAAKk4B,yBAGtD,WAAY,KAAY,oBAAqB,KAC/Cl4B,KAAKiD,GAAG,IAAU,mBAAoBjD,KAAKo4B,oBAI/C/3B,EAAO+3B,kBAAoB,SAA2BnkC,GACnB,WAA7B,IAASokC,iBACXr4B,KAAKiQ,0BAA0B,kBAC/BjQ,KAAKiQ,0BAA0B,iBAC/BjQ,KAAKm4B,iBAAiBlkC,KAEjB+L,KAAKoJ,QAAQof,SAAYxoB,KAAKoJ,QAAQ4L,UACzChV,KAAKi4B,kBAIPj4B,KAAK0sB,WAITrsB,EAAO43B,gBAAkB,WACnBj4B,KAAK+3B,iBAIT/3B,KAAK+3B,eAAiB/3B,KAAKuP,YAAYvP,KAAK0sB,OAAQloB,MAGtDnE,EAAO83B,iBAAmB,SAA0BlkC,GAC9C+L,KAAKoJ,QAAQ6qB,aAAej0B,KAAKoJ,QAAQ6qB,YAAYkC,UAAYliC,GAAgB,UAAXA,EAAEjF,MAIvEgR,KAAK+3B,iBAIV/3B,KAAKsP,cAActP,KAAK+3B,gBACxB/3B,KAAK+3B,eAAiB,OAUxB13B,EAAO7I,SAAW,WAChB,OAAOqgC,EAAQlpC,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CAClD/G,UAAW,uBACV,CACD,aAAc+G,KAAKyK,SAAS,mBAiBhCpK,EAAOqsB,OAAS,SAAgB3wB,GAC9B,IAAIiL,EAAShH,KAGb,GAAiC,WAA7B,IAASq4B,gBAAb,CAIA,IAAI/B,EAAUuB,EAAQlpC,UAAU+9B,OAAO/4B,KAAKqM,MAgC5C,OA9BAA,KAAK+P,2BAA2B,kBAAkB,WAChD,IAAIiP,EAAchY,EAAOoC,QAAQof,QAAUxhB,EAAOoC,QAAQ0I,WAAa9K,EAAOsxB,kBAC1ErE,EAAcjtB,EAAOoC,QAAQ6qB,YAE7BniB,EAAW9K,EAAOoC,QAAQ0I,WAE1BmiB,GAAeA,EAAYkC,WAC7BrkB,EAAW9K,EAAOoC,QAAQ6qB,YAAYsE,mBAGpCvxB,EAAOuvB,WAAaD,IAEtBtvB,EAAOS,IAAIxP,aAAa,iBAA4B,IAAVq+B,GAAehB,QAAQ,IAEjEtuB,EAAOuvB,SAAWD,GAGhBtvB,EAAOwxB,eAAiBxZ,GAAehY,EAAO2b,YAAc7Q,IAE9D9K,EAAOS,IAAIxP,aAAa,iBAAkB+O,EAAOyD,SAAS,oDAAqD,CAAC+nB,GAAWxT,EAAalN,GAAW0gB,GAAW1gB,EAAUA,IAAY,eAEpL9K,EAAOwxB,aAAexZ,EACtBhY,EAAO2b,UAAY7Q,GAIjB9K,EAAO8tB,KACT9tB,EAAO8tB,IAAIpI,OAAO5xB,GAAsBkM,EAAOnT,MAAOmT,EAAOmuB,kBAG1DmB,IAWTj2B,EAAOo4B,UAAY,SAAmB1Z,GAChC/e,KAAKoJ,QAAQ6qB,aAAej0B,KAAKoJ,QAAQ6qB,YAAYkC,UACvDn2B,KAAKoJ,QAAQ6qB,YAAYyE,qBAG3B14B,KAAKoJ,QAAQ4V,YAAYD,IAa3B1e,EAAOi4B,gBAAkB,WACvB,OAAOt4B,KAAKoJ,QAAQoa,YAAcxjB,KAAKoJ,QAAQiqB,WAAWrU,YAAchf,KAAKoJ,QAAQ4V,eAUvF3e,EAAOk1B,WAAa,WAClB,IACIe,EADAtX,EAAchf,KAAKs4B,kBAEnBrE,EAAcj0B,KAAKoJ,QAAQ6qB,YAY/B,OAVIA,GAAeA,EAAYkC,UAC7BG,GAAWtX,EAAciV,EAAY0E,iBAAmB1E,EAAYsD,aAEhEtD,EAAYG,eACdkC,EAAU,IAGZA,EAAUtX,EAAchf,KAAKoJ,QAAQ0I,WAGhCwkB,GAYTj2B,EAAO8wB,gBAAkB,SAAyBp1B,GAC3C+B,GAAkB/B,KAKvBA,EAAMmG,kBACNlC,KAAK44B,iBAAmB54B,KAAKoJ,QAAQ4L,SACrChV,KAAKoJ,QAAQ8L,QAEb2iB,EAAQlpC,UAAUwiC,gBAAgBx9B,KAAKqM,KAAMjE,KAa/CsE,EAAOw0B,gBAAkB,SAAyB94B,EAAO88B,GAKvD,QAJkB,IAAdA,IACFA,GAAY,GAGT/6B,GAAkB/B,GAAvB,CAQA,IAAI+8B,EAJCD,GAAc74B,KAAKoJ,QAAQoa,aAC9BxjB,KAAKoJ,QAAQoa,WAAU,GAIzB,IAAIuV,EAAW/4B,KAAKw1B,kBAAkBz5B,GAClCk4B,EAAcj0B,KAAKoJ,QAAQ6qB,YAE/B,GAAKA,GAAgBA,EAAYkC,SAM1B,CACL,GAAI4C,GAAY,IAEd,YADA9E,EAAYI,iBAId,IAAIsE,EAAgB1E,EAAY0E,gBAC5BvC,EAAcnC,EAAYsE,kBAgB9B,IAfAO,EAAUH,EAAgBI,EAAW9E,EAAYsD,eAElCnB,IACb0C,EAAU1C,GAKR0C,GAAWH,IACbG,EAAUH,EAAgB,IAMxBG,IAAYxG,IACd,YA7BFwG,EAAUC,EAAW/4B,KAAKoJ,QAAQ0I,cAElB9R,KAAKoJ,QAAQ0I,aAC3BgnB,GAAoB,IA+BxB94B,KAAKy4B,UAAUK,KAGjBz4B,EAAOhO,OAAS,WACdwlC,EAAQlpC,UAAU0D,OAAOsB,KAAKqM,MAE9B,IAAIg5B,EAAmBh5B,KAAKuL,SAAS,oBAEhCytB,GAILA,EAAiB5rB,QAGnB/M,EAAOjO,QAAU,WACfylC,EAAQlpC,UAAUyD,QAAQuB,KAAKqM,MAE/B,IAAIg5B,EAAmBh5B,KAAKuL,SAAS,oBAEhCytB,GAILA,EAAiB3rB,QAYnBhN,EAAOs0B,cAAgB,SAAuB54B,GAC5C87B,EAAQlpC,UAAUgmC,cAAchhC,KAAKqM,KAAMjE,GAGvCA,GACFA,EAAMmG,kBAGRlC,KAAKoJ,QAAQoa,WAAU,GASvBxjB,KAAKoJ,QAAQtF,QAAQ,CACnB9U,KAAM,aACNqE,OAAQ2M,KACR+iB,mBAAmB,IAGjB/iB,KAAK44B,gBACPpmB,GAAexS,KAAKoJ,QAAQD,QAI5BnJ,KAAK2sB,WAQTtsB,EAAOq1B,YAAc,WACnB11B,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ4V,cAxYb,IA+YjB3e,EAAOo1B,SAAW,WAChBz1B,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ4V,cAhZb,IA4ZjB3e,EAAO44B,aAAe,SAAsBl9B,GACtCiE,KAAKoJ,QAAQ4L,SACfhV,KAAKoJ,QAAQD,OAEbnJ,KAAKoJ,QAAQ8L,SAqBjB7U,EAAOkO,cAAgB,SAAuBxS,GAC5C,IAAIk4B,EAAcj0B,KAAKoJ,QAAQ6qB,YAE/B,GAAI,IAAQzlB,WAAWzS,EAAO,UAAY,IAAQyS,WAAWzS,EAAO,SAClEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKi5B,aAAal9B,QACb,GAAI,IAAQyS,WAAWzS,EAAO,QACnCA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKy4B,UAAU,QACV,GAAI,IAAQjqB,WAAWzS,EAAO,OACnCA,EAAM4F,iBACN5F,EAAMmG,kBAEF+xB,GAAeA,EAAYkC,SAC7Bn2B,KAAKy4B,UAAUxE,EAAYsE,mBAE3Bv4B,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ0I,iBAEzB,GAAI,UAAU3gB,KAAK,IAAQ4K,IAAS,CACzCA,EAAM4F,iBACN5F,EAAMmG,kBACN,IAAIg3B,EAAsE,IAAtD,IAAQC,MAAM,IAAQp9B,IAAU,IAAQo9B,MAAM,IAAe,IAE7ElF,GAAeA,EAAYkC,SAC7Bn2B,KAAKy4B,UAAUxE,EAAY0E,gBAAkB1E,EAAYsD,aAAe2B,GAExEl5B,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ0I,WAAaonB,QAElC,IAAQ1qB,WAAWzS,EAAO,SACnCA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ4V,cAAgBoa,KACnC,IAAQ5qB,WAAWzS,EAAO,SACnCA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKy4B,UAAUz4B,KAAKoJ,QAAQ4V,cAAgBoa,KAG5CvB,EAAQlpC,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAI/CsE,EAAOiK,QAAU,WACftK,KAAKm4B,mBACLn4B,KAAKvO,IAAIuO,KAAKoJ,QAAS,CAAC,QAAS,iBAAkB,cAAepJ,KAAK0sB,QAEnE1sB,KAAKoJ,QAAQ6qB,aACfj0B,KAAKvO,IAAIuO,KAAKoJ,QAAQ6qB,YAAa,iBAAkBj0B,KAAK0sB,QAG5D1sB,KAAKvO,IAAIuO,KAAKoJ,QAAS,CAAC,WAAYpJ,KAAKg4B,wBACzCh4B,KAAKvO,IAAIuO,KAAKoJ,QAAS,CAAC,QAAS,QAAS,WAAYpJ,KAAKk4B,yBAGvD,WAAY,KAAY,oBAAqB,KAC/Cl4B,KAAKvO,IAAI,IAAU,mBAAoBuO,KAAKo4B,mBAG9CP,EAAQlpC,UAAU2b,QAAQ3W,KAAKqM,OAG1B43B,EA1ekB,CA2ezBpD,IASFoD,GAAQjpC,UAAU4a,SAAW,CAC3B8B,SAAU,CAAC,kBAAmB,mBAC9B0pB,QAAS,mBAGN3+B,IAAWtB,IACd8iC,GAAQjpC,UAAU4a,SAAS8B,SAAS9b,OAAO,EAAG,EAAG,oBAGnDyZ,GAAYuH,kBAAkB,UAAWqnB,IAQzC,IAAIyB,GAA+B,SAAU1lB,GAa3C,SAAS0lB,EAAgBt6B,EAAQR,GAC/B,IAAI4G,EAgBJ,OAdAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C60B,gBAAkBjwB,GAASH,GAAK,IAAuBU,GAAQA,EAAM0vB,iBAAkBrwB,IAC7FW,EAAMm0B,yBAA2B10B,GAASH,GAAK,IAAuBU,GAAQA,EAAMo0B,iBAAkB/0B,IAEtGW,EAAMq0B,sBAAwB,SAAUvlC,GACtC,OAAOkR,EAAMwvB,cAAc1gC,IAG7BkR,EAAMs0B,wBAA0B,SAAUxlC,GACxC,OAAOkR,EAAMgsB,gBAAgBl9B,IAG/BkR,EAAM9S,SAEC8S,EA7BT,IAAek0B,EAAiB1lB,GAuChC,IAAItT,EAASg5B,EAAgB1qC,UAiM7B,OA/LA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,sCAcfoH,EAAOw0B,gBAAkB,SAAyB94B,GAChD,IAAI29B,EAAU15B,KAAKuL,SAAS,WAE5B,GAAKmuB,EAAL,CAIA,IAAIC,EAAkBD,EAAQnuB,SAAS,mBACnCytB,EAAmBU,EAAQnuB,SAAS,oBAExC,GAAKouB,GAAoBX,EAAzB,CAIA,IAAIY,EAAYF,EAAQ7lC,KACpB8iC,EAAct7B,GAAau+B,GAC3BhD,EAAe96B,GAAmB89B,EAAW79B,GAAO9E,EAIxD2/B,EAAetC,GAAMsC,EAAc,EAAG,GAElCoC,GACFA,EAAiBtM,OAAOiK,EAAaC,GAGnC+C,GACFA,EAAgBjN,OAAOiK,EAAa+C,EAAQvE,kBAyBhD90B,EAAOk5B,gBAAkB,SAAyBx9B,GAChD,IAAI29B,EAAU15B,KAAKuL,SAAS,WAExBmuB,GACFA,EAAQ7E,gBAAgB94B,IAW5BsE,EAAOiY,QAAU,WACf,OAAOtY,KAAKssB,UAOdjsB,EAAOjO,QAAU,WAKf,GAJA4N,KAAKqL,WAAWnY,SAAQ,SAAUsF,GAChC,OAAOA,EAAMpG,SAAWoG,EAAMpG,aAG3B4N,KAAKsY,YAIVtY,KAAKvO,IAAI,CAAC,YAAa,cAAeuO,KAAKy5B,yBAC3Cz5B,KAAKvO,IAAIuO,KAAKyH,IAAK,YAAazH,KAAK60B,iBACrC70B,KAAK65B,+CACL75B,KAAK9G,SAAS,YACd8G,KAAKssB,UAAW,EAEZtsB,KAAKoJ,QAAQoa,aAAa,CAC5B,IAAIkW,EAAU15B,KAAKuL,SAAS,WAC5BvL,KAAKoJ,QAAQoa,WAAU,GAEnBkW,EAAQd,iBACVpmB,GAAexS,KAAKoJ,QAAQD,UASlC9I,EAAOhO,OAAS,WACd2N,KAAKqL,WAAWnY,SAAQ,SAAUsF,GAChC,OAAOA,EAAMnG,QAAUmG,EAAMnG,YAG3B2N,KAAKsY,YAITtY,KAAKiD,GAAG,CAAC,YAAa,cAAejD,KAAKy5B,yBAC1Cz5B,KAAKiD,GAAGjD,KAAKyH,IAAK,YAAazH,KAAK60B,iBACpC70B,KAAK3G,YAAY,YACjB2G,KAAKssB,UAAW,IAOlBjsB,EAAOw5B,6CAA+C,WACpD,IAAIv3B,EAAMtC,KAAKyH,IAAIzD,cACnBhE,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAKs5B,0BAChCt5B,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAKs5B,0BAChCt5B,KAAKvO,IAAI6Q,EAAK,UAAWtC,KAAKw5B,uBAC9Bx5B,KAAKvO,IAAI6Q,EAAK,WAAYtC,KAAKw5B,wBAajCn5B,EAAO8wB,gBAAkB,SAAyBp1B,GAChD,IAAIuG,EAAMtC,KAAKyH,IAAIzD,cACf01B,EAAU15B,KAAKuL,SAAS,WAExBmuB,GACFA,EAAQvI,gBAAgBp1B,GAG1BiE,KAAKiD,GAAGX,EAAK,YAAatC,KAAKs5B,0BAC/Bt5B,KAAKiD,GAAGX,EAAK,YAAatC,KAAKs5B,0BAC/Bt5B,KAAKiD,GAAGX,EAAK,UAAWtC,KAAKw5B,uBAC7Bx5B,KAAKiD,GAAGX,EAAK,WAAYtC,KAAKw5B,wBAahCn5B,EAAOs0B,cAAgB,SAAuB54B,GAC5C,IAAI29B,EAAU15B,KAAKuL,SAAS,WAExBmuB,GACFA,EAAQ/E,cAAc54B,GAGxBiE,KAAK65B,gDAGAR,EAzO0B,CA0OjCrwB,IASFqwB,GAAgB1qC,UAAU4a,SAAW,CACnC8B,SAAU,CAAC,YAEbrC,GAAYuH,kBAAkB,kBAAmB8oB,IAOjD,IAAIS,GAAsC,SAAU7I,GAgBlD,SAAS6I,EAAuB/6B,EAAQR,GACtC,IAAI4G,EAeJ,OAbAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzCiD,GAAGlE,EAAQ,CAAC,wBAAyB,0BAA0B,SAAU9K,GAC7E,OAAOkR,EAAM40B,6BAA6B9lC,MAG5CkR,EAAMlC,GAAGlE,EAAQ,CAAC,iCAAkC,mBAAmB,SAAU9K,GAC/E,OAAOkR,EAAM60B,oCAAoC/lC,MAInDkR,EAAM/S,UAEC+S,EA/BT,IAAe20B,EAAwB7I,GAyCvC,IAAI5wB,EAASy5B,EAAuBnrC,UA4DpC,OA1DA0R,EAAO0M,cAAgB,WACrB,MAAO,kCAAoCkkB,EAAQtiC,UAAUoe,cAAcpZ,KAAKqM,OAQlFK,EAAO25B,oCAAsC,WACvC,IAASC,0BAAsE,IAA3Cj6B,KAAKoJ,QAAQ8b,0BACnDllB,KAAK3N,SAEL2N,KAAK5N,WAeTiO,EAAO05B,6BAA+B,SAAsCh+B,GACtEiE,KAAKoJ,QAAQ8wB,uBACfl6B,KAAK2V,YAAY,2BAEjB3V,KAAK2V,YAAY,sBAGnB3V,KAAKg6B,uCAeP35B,EAAOyrB,YAAc,SAAqB/vB,GACnCiE,KAAKoJ,QAAQ8wB,uBAGhBl6B,KAAKoJ,QAAQ+wB,uBAFbn6B,KAAKoJ,QAAQ0b,2BAMVgV,EAtGiC,CAuGxC/I,IASF+I,GAAuBnrC,UAAUu9B,aAAe,qBAChDljB,GAAYuH,kBAAkB,yBAA0BupB,IAOxD,IAAIM,GAAgC,SAAUnJ,GAa5C,SAASmJ,EAAiBr7B,EAAQR,GAChC,IAAI4G,EAYJ,OAVAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzCiD,GAAGlE,EAAQ,oBAAoB,SAAU9K,GAC7C,OAAOkR,EAAMk1B,uBAAuBpmC,OAGY,IAA9C,IAAS8K,EAAOu7B,OAAOC,oBACzBp1B,EAAM/S,UAGD+S,EAzBT,IAAei1B,EAAkBnJ,GAmCjC,IAAI5wB,EAAS+5B,EAAiBzrC,UA4C9B,OA1CA0R,EAAO0M,cAAgB,WACrB,MAAO,0BAA4BkkB,EAAQtiC,UAAUoe,cAAcpZ,KAAKqM,OAa1EK,EAAOg6B,uBAAyB,SAAgCt+B,GAC1DiE,KAAKoJ,QAAQoxB,eACfx6B,KAAK2V,YAAY,kBAEjB3V,KAAK2V,YAAY,eAgBrBtV,EAAOyrB,YAAc,SAAqB/vB,GACnCiE,KAAKoJ,QAAQoxB,eAGhBx6B,KAAKoJ,QAAQqxB,iBAFbz6B,KAAKoJ,QAAQsxB,qBAMVN,EAhF2B,CAiFlCrJ,IASFqJ,GAAiBzrC,UAAUu9B,aAAe,aAC1CljB,GAAYuH,kBAAkB,mBAAoB6pB,IAclD,IAqBIO,GAA2B,SAAUhnB,GAGvC,SAASgnB,IACP,OAAOhnB,EAAWpgB,MAAMyM,KAAMzS,YAAcyS,KAsB9C,OAzBA,IAAe26B,EAAahnB,GAMfgnB,EAAYhsC,UAQlB6I,SAAW,WAChB,IAAI3D,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvD/G,UAAW,qBAMb,OAHApF,EAAG8E,YAAYgb,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,OAAQ,CAC9D/G,UAAW,sBAENpF,GAGF8mC,EA1BsB,CA2B7B3xB,IAEFA,GAAYuH,kBAAkB,cAAeoqB,IAO7C,IAAIC,GAAkC,SAAUjnB,GAa9C,SAASinB,EAAmB77B,EAAQR,GAClC,IAAI4G,EAIJ,OAFAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C0sB,OAAS9nB,GAASH,GAAK,IAAuBU,GAAQA,EAAMunB,QAASloB,IACpEW,EAjBT,IAAey1B,EAAoBjnB,GA2BnC,IAAItT,EAASu6B,EAAmBjsC,UAwGhC,OAtGA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,sBACV,CACD,cAAe,UAqBnBoH,EAAOqsB,OAAS,SAAgBmO,EAAcC,EAAe9F,EAAUp9B,GACrE,IAAKo9B,EAAU,CACb,IAAI6B,EAAc/7B,GAAsBkF,KAAKyH,KACzCqvB,EAAah8B,GAAsBkF,KAAKoJ,QAAQvV,MAChDknC,EAAmBF,EAAaz/B,MAAQ0/B,EAE5C,IAAKhE,IAAeD,EAClB,OAGF,IAAIG,EAAmB6D,EAAat/B,KAAOu7B,EAAWv7B,KAAOw/B,EACzD9D,EAAoB4D,EAAaz/B,MAAQ2/B,GAAoBjE,EAAWI,MAAQ2D,EAAa3D,OAC7FC,EAAgBN,EAAYz7B,MAAQ,EAEpC47B,EAAmBG,EACrBA,GAAiBA,EAAgBH,EACxBC,EAAoBE,IAC7BA,EAAgBF,GAGdE,EAAgB,EAClBA,EAAgB,EACPA,EAAgBN,EAAYz7B,QACrC+7B,EAAgBN,EAAYz7B,OAG9B4E,KAAKyH,IAAIhI,MAAMy3B,MAAQ,IAAMC,EAAgB,KAG/Cn3B,KAAKq3B,MAAMz/B,EAAU,MAUvByI,EAAOg3B,MAAQ,SAAez/B,GAC5BM,GAAY8H,KAAKyH,IAAK7P,IAyBxByI,EAAO26B,aAAe,SAAsBH,EAAcC,EAAe9F,EAAUzM,EAAQ8I,GACzF,IAAIzqB,EAAS5G,KAEbA,KAAK+P,2BAA2B,mCAAmC,WACjEnJ,EAAO8lB,OAAOmO,EAAcC,EAAe9F,EAAUzM,EAAO+M,QAAQ,IAEhEjE,GACFA,QAKCuJ,EApI6B,CAqIpC5xB,IAEFA,GAAYuH,kBAAkB,qBAAsBqqB,IAUpD,IAAIK,GAAuC,SAAUtnB,GAanD,SAASsnB,EAAwBl8B,EAAQR,GACvC,IAAI4G,EAIJ,OAFAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5C0sB,OAAS9nB,GAASH,GAAK,IAAuBU,GAAQA,EAAMunB,QAASloB,IACpEW,EAjBT,IAAe81B,EAAyBtnB,GA2BxC,IAAItT,EAAS46B,EAAwBtsC,UAsCrC,OApCA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,uBAqBfoH,EAAOqsB,OAAS,SAAgBmO,EAAcC,EAAe9F,GAC3D,IAAIpuB,EAAS5G,KAETuoB,EAAS,IAAMuS,EACnB96B,KAAKuL,SAAS,sBAAsByvB,aAAaH,EAAcC,EAAe9F,EAAUzM,GAAQ,WAC1FyM,EACFpuB,EAAOa,IAAIhI,MAAMy7B,OAASL,EAAa1/B,OAAS2/B,EAAgB,KAEhEl0B,EAAOa,IAAIhI,MAAMlE,KAAOs/B,EAAaz/B,MAAQ0/B,EAAgB,SAK5DG,EAlEkC,CAmEzCjyB,IASFiyB,GAAwBtsC,UAAU4a,SAAW,CAC3C8B,SAAU,CAAC,uBAEbrC,GAAYuH,kBAAkB,0BAA2B0qB,IAOzD,IAAIE,GAAyB,SAAUtD,GAarC,SAASsD,EAAUp8B,EAAQR,GACzB,IAAI4G,EAeJ,OAbAA,EAAQ0yB,EAAQlkC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzCiD,GAAG,gBAAgB,SAAUhP,GACjC,OAAOkR,EAAMi2B,kBAAkBnnC,MAGjCkR,EAAMlC,GAAGlE,EAAQ,gBAAgB,SAAU9K,GACzC,OAAOkR,EAAMk2B,qBAAqBpnC,MAGpC8K,EAAOmK,OAAM,WACX,OAAO/D,EAAMk2B,0BAERl2B,EA5BT,IAAeg2B,EAAWtD,GAsC1B,IAAIx3B,EAAS86B,EAAUxsC,UAqJvB,OAnJA0R,EAAO7I,SAAW,WAChB,OAAOqgC,EAAQlpC,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CAClD/G,UAAW,iCACV,CACD,aAAc+G,KAAKyK,SAAS,gBAC5B,YAAa,YAajBpK,EAAO8wB,gBAAkB,SAAyBp1B,GAC3C+B,GAAkB/B,IAIvB87B,EAAQlpC,UAAUwiC,gBAAgBx9B,KAAKqM,KAAMjE,IAY/CsE,EAAOw0B,gBAAkB,SAAyB94B,GAChD,IAAIu/B,EAA0Bt7B,KAAKuL,SAAS,2BAE5C,GAAI+vB,EAAyB,CAC3B,IAAIC,EAAcv7B,KAAKnM,KACnB2nC,EAAgB1gC,GAAsBygC,GACtCvG,EAAWh1B,KAAKg1B,WAChByG,EAAiB3/B,GAAmBy/B,EAAax/B,GACrD0/B,EAAiBzG,EAAWyG,EAAex/B,EAAIw/B,EAAexkC,EAI9DwkC,EAAiBnH,GAAMmH,EAAgB,EAAG,GAC1CH,EAAwB5O,OAAO8O,EAAeC,EAAgBzG,GAG3Dl3B,GAAkB/B,KAIvBiE,KAAK07B,aACL17B,KAAKoJ,QAAQmf,OAAOvoB,KAAKw1B,kBAAkBz5B,MAO7CsE,EAAOq7B,WAAa,WACd17B,KAAKoJ,QAAQif,SACfroB,KAAKoJ,QAAQif,OAAM,IAWvBhoB,EAAOk1B,WAAa,WAClB,OAAIv1B,KAAKoJ,QAAQif,QACR,EAGFroB,KAAKoJ,QAAQmf,UAOtBloB,EAAOq1B,YAAc,WACnB11B,KAAK07B,aACL17B,KAAKoJ,QAAQmf,OAAOvoB,KAAKoJ,QAAQmf,SAAW,KAO9CloB,EAAOo1B,SAAW,WAChBz1B,KAAK07B,aACL17B,KAAKoJ,QAAQmf,OAAOvoB,KAAKoJ,QAAQmf,SAAW,KAY9CloB,EAAOg7B,qBAAuB,SAA8Bt/B,GAC1D,IAAI4/B,EAAY37B,KAAKoJ,QAAQif,QAAU,EAAIroB,KAAK47B,sBAChD57B,KAAKyH,IAAIxP,aAAa,gBAAiB0jC,GACvC37B,KAAKyH,IAAIxP,aAAa,iBAAkB0jC,EAAY,MAStDt7B,EAAOu7B,oBAAsB,WAC3B,OAAOx+B,KAAKg6B,MAA8B,IAAxBp3B,KAAKoJ,QAAQmf,WAYjCloB,EAAO+6B,kBAAoB,WACzB,IAAIx0B,EAAS5G,KAET67B,EAAmB77B,KAAKoJ,QAAQmf,SACpCvoB,KAAKmE,IAAI,kBAAkB,WACO,IAA5ByC,EAAOwC,QAAQmf,UACjB3hB,EAAOwC,QAAQ0yB,YAAYD,OAK1BV,EA5LoB,CA6L3B3G,IASF2G,GAAUxsC,UAAU4a,SAAW,CAC7B8B,SAAU,CAAC,eACX0pB,QAAS,eAGN3+B,IAAWtB,IACdqmC,GAAUxsC,UAAU4a,SAAS8B,SAAS9b,OAAO,EAAG,EAAG,2BASrD4rC,GAAUxsC,UAAUsmC,YAAc,eAClCjsB,GAAYuH,kBAAkB,YAAa4qB,IAO3C,IAAIY,GAA6B,SAAUpoB,GAazC,SAASooB,EAAch9B,EAAQR,GAC7B,IAAI4G,EAqDJ,YAnDgB,IAAZ5G,IACFA,EAAU,IAGZA,EAAQy2B,SAAWz2B,EAAQy2B,WAAY,GAGN,qBAAtBz2B,EAAQy9B,WAA6BtoC,GAAQ6K,EAAQy9B,cAC9Dz9B,EAAQy9B,UAAYz9B,EAAQy9B,WAAa,GACzCz9B,EAAQy9B,UAAUhH,SAAWz2B,EAAQy2B,UAGvC7vB,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAzhB7B,SAA4B7R,EAAM4Q,GAErDA,EAAO6e,QAAU7e,EAAO6e,MAAMqI,uBAChC93B,EAAK+K,SAAS,cAGhB/K,EAAK8U,GAAGlE,EAAQ,aAAa,WACtBA,EAAO6e,MAAMqI,sBAGhB93B,EAAKkL,YAAY,cAFjBlL,EAAK+K,SAAS,iBAmhBhB+iC,CAAmB,IAAuB92B,GAAQpG,GAClDoG,EAAM+2B,yBAA2Bt3B,GAASH,GAAK,IAAuBU,GAAQA,EAAM0vB,iBAAkBrwB,IAEtGW,EAAMq0B,sBAAwB,SAAUvlC,GACtC,OAAOkR,EAAMwvB,cAAc1gC,IAG7BkR,EAAMlC,GAAG,aAAa,SAAUhP,GAC9B,OAAOkR,EAAMgsB,gBAAgBl9B,MAG/BkR,EAAMlC,GAAG,cAAc,SAAUhP,GAC/B,OAAOkR,EAAMgsB,gBAAgBl9B,MAG/BkR,EAAMlC,GAAG,aAAa,SAAUhP,GAC9B,OAAOkR,EAAM0vB,gBAAgB5gC,MAK/BkR,EAAMlC,GAAGkC,EAAM62B,UAAW,CAAC,QAAS,iBAAiB,WACnD72B,EAAM62B,UAAU9iC,SAAS,qBAEzBiM,EAAMjM,SAAS,qBAEfiM,EAAMrB,QAAQ,mBAGhBqB,EAAMlC,GAAGkC,EAAM62B,UAAW,CAAC,OAAQ,mBAAmB,WACpD72B,EAAM62B,UAAU3iC,YAAY,qBAE5B8L,EAAM9L,YAAY,qBAElB8L,EAAMrB,QAAQ,qBAGTqB,EAlET,IAAe42B,EAAepoB,GA4E9B,IAAItT,EAAS07B,EAAcptC,UAgE3B,OA9DA0R,EAAO7I,SAAW,WAChB,IAAI2kC,EAAmB,wBAMvB,OAJIn8B,KAAKuJ,SAASyrB,WAChBmH,EAAmB,uBAGdxoB,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,kCAAoCkjC,KAcnD97B,EAAO8wB,gBAAkB,SAAyBp1B,GAChD,IAAIuG,EAAMtC,KAAKyH,IAAIzD,cACnBhE,KAAKiD,GAAGX,EAAK,YAAatC,KAAKk8B,0BAC/Bl8B,KAAKiD,GAAGX,EAAK,YAAatC,KAAKk8B,0BAC/Bl8B,KAAKiD,GAAGX,EAAK,UAAWtC,KAAKw5B,uBAC7Bx5B,KAAKiD,GAAGX,EAAK,WAAYtC,KAAKw5B,wBAahCn5B,EAAOs0B,cAAgB,SAAuB54B,GAC5C,IAAIuG,EAAMtC,KAAKyH,IAAIzD,cACnBhE,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAKk8B,0BAChCl8B,KAAKvO,IAAI6Q,EAAK,YAAatC,KAAKk8B,0BAChCl8B,KAAKvO,IAAI6Q,EAAK,UAAWtC,KAAKw5B,uBAC9Bx5B,KAAKvO,IAAI6Q,EAAK,WAAYtC,KAAKw5B,wBAajCn5B,EAAOw0B,gBAAkB,SAAyB94B,GAChDiE,KAAKg8B,UAAUnH,gBAAgB94B,IAG1BggC,EA7IwB,CA8I/B/yB,IASF+yB,GAAcptC,UAAU4a,SAAW,CACjC8B,SAAU,CAAC,cAEbrC,GAAYuH,kBAAkB,gBAAiBwrB,IAc/C,IAqBIK,GAA0B,SAAUnL,GAatC,SAASmL,EAAWr9B,EAAQR,GAC1B,IAAI4G,EAUJ,OARAA,EAAQ8rB,EAAQt9B,KAAKqM,KAAMjB,EAAQR,IAAYyB,KArC5B,SAA0B7R,EAAM4Q,GAEjDA,EAAO6e,QAAU7e,EAAO6e,MAAMsI,qBAChC/3B,EAAK+K,SAAS,cAGhB/K,EAAK8U,GAAGlE,EAAQ,aAAa,WACtBA,EAAO6e,MAAMsI,oBAGhB/3B,EAAKkL,YAAY,cAFjBlL,EAAK+K,SAAS,iBA+BhBmjC,CAAiB,IAAuBl3B,GAAQpG,GAEhDoG,EAAMlC,GAAGlE,EAAQ,CAAC,YAAa,iBAAiB,SAAU9K,GACxD,OAAOkR,EAAMunB,OAAOz4B,MAGfkR,EAvBT,IAAei3B,EAAYnL,GAiC3B,IAAI5wB,EAAS+7B,EAAWztC,UAuGxB,OArGA0R,EAAO0M,cAAgB,WACrB,MAAO,oBAAsBkkB,EAAQtiC,UAAUoe,cAAcpZ,KAAKqM,OAepEK,EAAOyrB,YAAc,SAAqB/vB,GACxC,IAAIugC,EAAMt8B,KAAKoJ,QAAQmf,SACnBgU,EAAav8B,KAAKoJ,QAAQ0yB,cAE9B,GAAY,IAARQ,EAAW,CACb,IAAIE,EAAcD,EAAa,GAAM,GAAMA,EAC3Cv8B,KAAKoJ,QAAQmf,OAAOiU,GACpBx8B,KAAKoJ,QAAQif,OAAM,QAEnBroB,KAAKoJ,QAAQif,OAAMroB,KAAKoJ,QAAQif,UAgBpChoB,EAAOqsB,OAAS,SAAgB3wB,GAC9BiE,KAAKy8B,cACLz8B,KAAK08B,sBAePr8B,EAAOo8B,YAAc,WACnB,IAAIH,EAAMt8B,KAAKoJ,QAAQmf,SACnBn4B,EAAQ,EAIRgG,IAAU4J,KAAKoJ,QAAQwU,OAAS5d,KAAKoJ,QAAQwU,MAAMnW,KACrDzH,KAAKoJ,QAAQif,MAAMroB,KAAKoJ,QAAQwU,MAAMnW,IAAI4gB,OAGhC,IAARiU,GAAat8B,KAAKoJ,QAAQif,QAC5Bj4B,EAAQ,EACCksC,EAAM,IACflsC,EAAQ,EACCksC,EAAM,MACflsC,EAAQ,GAIV,IAAK,IAAIR,EAAI,EAAGA,EAAI,EAAGA,IACrByJ,GAAY2G,KAAKyH,IAAK,WAAa7X,GAGrCsJ,GAAS8G,KAAKyH,IAAK,WAAarX,IAWlCiQ,EAAOq8B,mBAAqB,WAC1B,IACIrkC,EADW2H,KAAKoJ,QAAQif,SAAqC,IAA1BroB,KAAKoJ,QAAQmf,SAC9B,SAAW,OAE7BvoB,KAAK2V,gBAAkBtd,GACzB2H,KAAK2V,YAAYtd,IAId+jC,EAzIqB,CA0I5BrL,IASFqL,GAAWztC,UAAUu9B,aAAe,OACpCljB,GAAYuH,kBAAkB,aAAc6rB,IAQ5C,IAAIO,GAA2B,SAAUhpB,GAavC,SAASgpB,EAAY59B,EAAQR,GAC3B,IAAI4G,EAuDJ,YArDgB,IAAZ5G,IACFA,EAAU,IAGkB,qBAAnBA,EAAQq+B,OACjBr+B,EAAQq+B,OAASr+B,EAAQq+B,OAEzBr+B,EAAQq+B,QAAS,GAKkB,qBAA1Br+B,EAAQs+B,eAAiCnpC,GAAQ6K,EAAQs+B,kBAClEt+B,EAAQs+B,cAAgBt+B,EAAQs+B,eAAiB,GACjDt+B,EAAQs+B,cAAc7H,UAAYz2B,EAAQq+B,SAG5Cz3B,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE5C88B,uBAAyB,SAAU7oC,GACvC,OAAOkR,EAAMsJ,eAAexa,IAG9BkR,EAAMlC,GAAGlE,EAAQ,CAAC,cAAc,SAAU9K,GACxC,OAAOkR,EAAM43B,kBAAkB9oC,MAGjCkR,EAAMlC,GAAGkC,EAAM63B,WAAY,SAAS,SAAU/oC,GAC5C,OAAOkR,EAAMsJ,eAAexa,MAG9BkR,EAAMlC,GAAGkC,EAAM03B,cAAe,SAAS,SAAU5oC,GAC/C,OAAOkR,EAAM83B,yBAAyBhpC,MAGxCkR,EAAMlC,GAAG,WAAW,SAAUhP,GAC5B,OAAOkR,EAAMsJ,eAAexa,MAG9BkR,EAAMlC,GAAG,aAAa,SAAUhP,GAC9B,OAAOkR,EAAMumB,gBAAgBz3B,MAG/BkR,EAAMlC,GAAG,YAAY,SAAUhP,GAC7B,OAAOkR,EAAMymB,eAAe33B,MAK9BkR,EAAMlC,GAAGkC,EAAM03B,cAAe,CAAC,gBAAiB13B,EAAM+3B,eAEtD/3B,EAAMlC,GAAGkC,EAAM03B,cAAe,CAAC,kBAAmB13B,EAAMg4B,iBAEjDh4B,EApET,IAAew3B,EAAahpB,GA8E5B,IAAItT,EAASs8B,EAAYhuC,UAoIzB,OAlIA0R,EAAO68B,cAAgB,WACrBl9B,KAAK9G,SAAS,sBAUhBmH,EAAO88B,gBAAkB,WACvBn9B,KAAK3G,YAAY,sBAWnBgH,EAAO08B,kBAAoB,WAGrB/8B,KAAK68B,cAAcjkC,SAAS,eAAiBoH,KAAKg9B,WAAWpkC,SAAS,eACxEoH,KAAK9G,SAAS,cAKZ8G,KAAK68B,cAAcjkC,SAAS,gBAAkBoH,KAAKg9B,WAAWpkC,SAAS,eACzEoH,KAAK9G,SAAS,yBAWlBmH,EAAO7I,SAAW,WAChB,IAAI2kC,EAAmB,8BAMvB,OAJKn8B,KAAKuJ,SAASqzB,SACjBT,EAAmB,6BAGdxoB,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,gCAAkCkjC,KAQjD97B,EAAOiK,QAAU,WACftK,KAAK4rB,iBAELjY,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAapCK,EAAO48B,yBAA2B,SAAkClhC,GAC9D,IAAQyS,WAAWzS,EAAO,QAC5BiE,KAAKg9B,WAAWriC,SAepB0F,EAAOqrB,gBAAkB,SAAyB3vB,GAChDiE,KAAK9G,SAAS,aACd+J,GAAG,IAAU,QAASjD,KAAK88B,yBAc7Bz8B,EAAOurB,eAAiB,SAAwB7vB,GAC9CiE,KAAK3G,YAAY,aACjB5H,GAAI,IAAU,QAASuO,KAAK88B,yBAa9Bz8B,EAAOoO,eAAiB,SAAwB1S,GAC1C,IAAQyS,WAAWzS,EAAO,QAC5BiE,KAAK4rB,kBAIF+Q,EAnNsB,CAoN7B3zB,IASF2zB,GAAYhuC,UAAU4a,SAAW,CAC/B8B,SAAU,CAAC,aAAc,kBAE3BrC,GAAYuH,kBAAkB,cAAeosB,IAQ7C,IAAIS,GAAoB,SAAUzpB,GAchC,SAASypB,EAAKr+B,EAAQR,GACpB,IAAI4G,EAuBJ,OArBAA,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAE9CzB,IACF4G,EAAMk4B,YAAc9+B,EAAQ++B,YAG9Bn4B,EAAMo4B,eAAiB,EAEvBp4B,EAAMlC,GAAG,WAAW,SAAUhP,GAC5B,OAAOkR,EAAMoJ,cAActa,MAI7BkR,EAAMq4B,iBAAmB,SAAUvpC,GACjC,OAAOkR,EAAMs4B,WAAWxpC,IAG1BkR,EAAMu4B,qBAAuB,SAAUzpC,GACrC,OAAOkR,EAAMw4B,eAAe1pC,IAGvBkR,EArCT,IAAei4B,EAAMzpB,GAgDrB,IAAItT,EAAS+8B,EAAKzuC,UAgPlB,OA9OA0R,EAAOu9B,wBAA0B,SAAiC9xB,GAC1DA,aAAqB9C,KAI3BhJ,KAAKiD,GAAG6I,EAAW,OAAQ9L,KAAKw9B,kBAChCx9B,KAAKiD,GAAG6I,EAAW,CAAC,MAAO,SAAU9L,KAAK09B,wBAW5Cr9B,EAAOw9B,2BAA6B,SAAoC/xB,GAChEA,aAAqB9C,KAI3BhJ,KAAKvO,IAAIqa,EAAW,OAAQ9L,KAAKw9B,kBACjCx9B,KAAKvO,IAAIqa,EAAW,CAAC,MAAO,SAAU9L,KAAK09B,wBAa7Cr9B,EAAO5C,YAAc,SAAqBqO,GACf,kBAAdA,IACTA,EAAY9L,KAAKuL,SAASO,IAG5B9L,KAAK69B,2BAA2B/xB,GAEhC6H,EAAWhlB,UAAU8O,YAAY9J,KAAKqM,KAAM8L,IAW9CzL,EAAOy9B,QAAU,SAAiBhyB,GAChC,IAAIiyB,EAAiB/9B,KAAK6L,SAASC,GAE/BiyB,GACF/9B,KAAK49B,wBAAwBG,IAWjC19B,EAAO7I,SAAW,WAChB,IAAIwmC,EAAgBh+B,KAAKuJ,SAASy0B,eAAiB,KACnDh+B,KAAKoL,WAAa5T,GAASwmC,EAAe,CACxC/kC,UAAW,qBAEb+G,KAAKoL,WAAWnT,aAAa,OAAQ,QAErC,IAAIpE,EAAK8f,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACvDi+B,OAAQj+B,KAAKoL,WACbnS,UAAW,aAUb,OAPApF,EAAG8E,YAAYqH,KAAKoL,YAGpBnI,GAAGpP,EAAI,SAAS,SAAUkI,GACxBA,EAAM4F,iBACN5F,EAAMqG,8BAEDvO,GAGTwM,EAAOiK,QAAU,WACftK,KAAKoL,WAAa,KAClBpL,KAAKw9B,iBAAmB,KACxBx9B,KAAK09B,qBAAuB,KAE5B/pB,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAYpCK,EAAOo9B,WAAa,SAAoB1hC,GACtC,IAAI8F,EAAgB9F,EAAM8F,eAAiB,IAASuU,cAEpD,IAAKpW,KAAKqL,WAAWqB,MAAK,SAAU7T,GAClC,OAAOA,EAAQhF,OAASgO,KACtB,CACF,IAAIq8B,EAAMl+B,KAAKq9B,YAEXa,GAAOA,EAAIC,gBAAkBt8B,IAAkBq8B,EAAIrqC,KAAK4E,YAC1DylC,EAAIE,kBAcV/9B,EAAOs9B,eAAiB,SAAwB5hC,GAE9C,GAAIiE,KAAKq9B,YAAa,CACpBr9B,KAAKq9B,YAAYe,gBACjB,IAAIC,EAAkBr+B,KAAKqL,WAE3B,IAAK7a,MAAMY,QAAQitC,GACjB,OAGF,IAAIC,EAAiBD,EAAgBrsC,QAAO,SAAU8Z,GACpD,OAAOA,EAAUjY,OAASkI,EAAM1I,UAC/B,GAEH,IAAKirC,EACH,OAK4B,4BAA1BA,EAAepuC,QACjB8P,KAAKq9B,YAAY1iC,UAcvB0F,EAAOkO,cAAgB,SAAuBxS,GAExC,IAAQyS,WAAWzS,EAAO,SAAW,IAAQyS,WAAWzS,EAAO,SACjEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAK01B,gBACI,IAAQlnB,WAAWzS,EAAO,UAAY,IAAQyS,WAAWzS,EAAO,SACzEA,EAAM4F,iBACN5F,EAAMmG,kBACNlC,KAAKy1B,aAQTp1B,EAAOq1B,YAAc,WACnB,IAAI6I,EAAY,OAEWrjC,IAAvB8E,KAAKu9B,gBACPgB,EAAYv+B,KAAKu9B,cAAgB,GAGnCv9B,KAAKrF,MAAM4jC,IAObl+B,EAAOo1B,SAAW,WAChB,IAAI8I,EAAY,OAEWrjC,IAAvB8E,KAAKu9B,gBACPgB,EAAYv+B,KAAKu9B,cAAgB,GAGnCv9B,KAAKrF,MAAM4jC,IAUbl+B,EAAO1F,MAAQ,SAAeuB,QACf,IAATA,IACFA,EAAO,GAGT,IAAImP,EAAWrL,KAAKqL,WAAW/b,QACf+b,EAASxb,QAAUwb,EAAS,GAAGzS,SAAS,mBAGtDyS,EAAS/E,QAGP+E,EAASxb,OAAS,IAChBqM,EAAO,EACTA,EAAO,EACEA,GAAQmP,EAASxb,SAC1BqM,EAAOmP,EAASxb,OAAS,GAG3BmQ,KAAKu9B,cAAgBrhC,EACrBmP,EAASnP,GAAMuL,IAAI9M,UAIhByiC,EAjSe,CAkStBp0B,IAEFA,GAAYuH,kBAAkB,OAAQ6sB,IAOtC,IAAIoB,GAA0B,SAAU7qB,GAatC,SAAS6qB,EAAWz/B,EAAQR,GAC1B,IAAI4G,OAEY,IAAZ5G,IACFA,EAAU,KAGZ4G,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC5Cq9B,YAAc,IAAItM,GAAOhyB,EAAQR,GAEvC4G,EAAMk4B,YAAY1nB,YAAYxQ,EAAM+mB,cAEpC/mB,EAAMk4B,YAAY51B,IAAIxP,aAAa,gBAAiB,QAGpD,IAAIwmC,EAAc1N,GAAOpiC,UAAUoe,gBACnC5H,EAAMk4B,YAAY51B,IAAIxO,UAAYkM,EAAM4H,gBAAkB,IAAM0xB,EAEhEt5B,EAAMk4B,YAAYhkC,YAAY,eAE9B8L,EAAM0G,SAAS1G,EAAMk4B,aAErBl4B,EAAMunB,SAENvnB,EAAMmnB,UAAW,EAEjB,IAAIR,EAAc,SAAqB73B,GACrC,OAAOkR,EAAM2mB,YAAY73B,IA+B3B,OA5BAkR,EAAMu5B,iBAAmB,SAAUzqC,GACjC,OAAOkR,EAAMw5B,gBAAgB1qC,IAG/BkR,EAAMlC,GAAGkC,EAAMk4B,YAAa,MAAOvR,GAEnC3mB,EAAMlC,GAAGkC,EAAMk4B,YAAa,QAASvR,GAErC3mB,EAAMlC,GAAGkC,EAAMk4B,YAAa,WAAW,SAAUppC,GAC/C,OAAOkR,EAAMoJ,cAActa,MAG7BkR,EAAMlC,GAAGkC,EAAMk4B,YAAa,cAAc,WACxCl4B,EAAMjM,SAAS,aAEfiM,EAAMy5B,KAAKxxB,OAEXnK,GAAG,IAAU,QAASkC,EAAMu5B,qBAG9Bv5B,EAAMlC,GAAG,cAAc,SAAUhP,GAC/B,OAAOkR,EAAM05B,iBAAiB5qC,MAGhCkR,EAAMlC,GAAG,WAAW,SAAUhP,GAC5B,OAAOkR,EAAM25B,qBAAqB7qC,MAG7BkR,EAtET,IAAeq5B,EAAY7qB,GA6E3B,IAAItT,EAASm+B,EAAW7vC,UA0WxB,OAxWA0R,EAAOqsB,OAAS,WACd,IAAIkS,EAAO5+B,KAAK++B,aAEZ/+B,KAAK4+B,OACP5+B,KAAK4+B,KAAKt0B,UACVtK,KAAKvC,YAAYuC,KAAK4+B,OAGxB5+B,KAAK4+B,KAAOA,EACZ5+B,KAAK6L,SAAS+yB,GAQd5+B,KAAKm+B,gBAAiB,EACtBn+B,KAAKq9B,YAAY51B,IAAIxP,aAAa,gBAAiB,SAE/C+H,KAAKg/B,OAASh/B,KAAKg/B,MAAMnvC,QAAUmQ,KAAKi/B,eAC1Cj/B,KAAKqN,OAELrN,KAAKoN,QAWT/M,EAAO0+B,WAAa,WAClB,IAAIH,EAAO,IAAIxB,GAAKp9B,KAAKoJ,QAAS,CAChCk0B,WAAYt9B,OAad,GAFAA,KAAKi/B,eAAiB,EAElBj/B,KAAKuJ,SAAS21B,MAAO,CACvB,IAAIC,EAAU3nC,GAAS,KAAM,CAC3ByB,UAAW,iBACXf,YAAaqQ,GAAcvI,KAAKuJ,SAAS21B,OACzC1qB,UAAW,IAET4qB,EAAiB,IAAIp2B,GAAYhJ,KAAKoJ,QAAS,CACjDvV,GAAIsrC,IAENP,EAAKd,QAAQsB,GAKf,GAFAp/B,KAAKg/B,MAAQh/B,KAAKq/B,cAEdr/B,KAAKg/B,MAEP,IAAK,IAAIpvC,EAAI,EAAGA,EAAIoQ,KAAKg/B,MAAMnvC,OAAQD,IACrCgvC,EAAKd,QAAQ99B,KAAKg/B,MAAMpvC,IAI5B,OAAOgvC,GASTv+B,EAAOg/B,YAAc,aASrBh/B,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW+G,KAAKs/B,wBACf,KAULj/B,EAAOi/B,qBAAuB,WAC5B,IAAIC,EAAkB,kBAUtB,OAR6B,IAAzBv/B,KAAKuJ,SAASqzB,OAChB2C,GAAmB,UAEnBA,GAAmB,SAKd,mBAAqBA,EAAkB,IAD5BxO,GAAOpiC,UAAUoe,gBAC+B,IAAM4G,EAAWhlB,UAAUoe,cAAcpZ,KAAKqM,OAUlHK,EAAO0M,cAAgB,WACrB,IAAIwyB,EAAkB,kBAQtB,OAN6B,IAAzBv/B,KAAKuJ,SAASqzB,OAChB2C,GAAmB,UAEnBA,GAAmB,SAGd,mBAAqBA,EAAkB,IAAM5rB,EAAWhlB,UAAUoe,cAAcpZ,KAAKqM,OAkB9FK,EAAOsV,YAAc,SAAqBtd,EAAMxE,GAK9C,YAJW,IAAPA,IACFA,EAAKmM,KAAKq9B,YAAYxpC,MAGjBmM,KAAKq9B,YAAY1nB,YAAYtd,EAAMxE,IAO5CwM,EAAOiK,QAAU,WACftK,KAAK6+B,mBAELlrB,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAepCK,EAAOyrB,YAAc,SAAqB/vB,GACpCiE,KAAKm+B,eACPn+B,KAAKo+B,gBAELp+B,KAAKw/B,eAaTn/B,EAAOw+B,iBAAmB,SAA0B9iC,GAClDiE,KAAK3G,YAAY,aACjB5H,GAAI,IAAU,QAASuO,KAAK0+B,mBAO9Br+B,EAAO1F,MAAQ,WACbqF,KAAKq9B,YAAY1iC,SAOnB0F,EAAOiO,KAAO,WACZtO,KAAKq9B,YAAY/uB,QAanBjO,EAAOkO,cAAgB,SAAuBxS,GAExC,IAAQyS,WAAWzS,EAAO,QAAU,IAAQyS,WAAWzS,EAAO,QAC5DiE,KAAKm+B,gBACPn+B,KAAKo+B,gBAIF,IAAQ5vB,WAAWzS,EAAO,SAC7BA,EAAM4F,iBAEN3B,KAAKq9B,YAAY1iC,WAGV,IAAQ6T,WAAWzS,EAAO,OAAS,IAAQyS,WAAWzS,EAAO,WACjEiE,KAAKm+B,iBACRpiC,EAAM4F,iBACN3B,KAAKw/B,iBAeXn/B,EAAOs+B,gBAAkB,SAAyB5iC,IAE5C,IAAQyS,WAAWzS,EAAO,QAAU,IAAQyS,WAAWzS,EAAO,SAChEiE,KAAK3G,YAAY,cAarBgH,EAAOo/B,sBAAwB,SAA+B1jC,GAC5DiE,KAAK8+B,qBAAqB/iC,IAa5BsE,EAAOy+B,qBAAuB,SAA8B/iC,IAEtD,IAAQyS,WAAWzS,EAAO,QAAU,IAAQyS,WAAWzS,EAAO,UAC5DiE,KAAKm+B,gBACPn+B,KAAKo+B,gBAIF,IAAQ5vB,WAAWzS,EAAO,SAC7BA,EAAM4F,iBAEN3B,KAAKq9B,YAAY1iC,WASvB0F,EAAOm/B,YAAc,WACnB,GAAIx/B,KAAKssB,SAAU,CAOjB,GANAtsB,KAAKm+B,gBAAiB,EACtBn+B,KAAK4+B,KAAKxxB,OACVpN,KAAK4+B,KAAKtxB,cACVtN,KAAKq9B,YAAY51B,IAAIxP,aAAa,gBAAiB,QAG/C7B,IAAUW,KAEZ,OAGFiJ,KAAK4+B,KAAKjkC,UAQd0F,EAAO+9B,cAAgB,WACjBp+B,KAAKssB,WACPtsB,KAAKm+B,gBAAiB,EACtBn+B,KAAK4+B,KAAKrxB,gBACVvN,KAAK4+B,KAAKvxB,OACVrN,KAAKq9B,YAAY51B,IAAIxP,aAAa,gBAAiB,WAQvDoI,EAAOjO,QAAU,WACf4N,KAAKo+B,gBACLp+B,KAAKssB,UAAW,EAChBtsB,KAAK9G,SAAS,gBACd8G,KAAKq9B,YAAYjrC,WAOnBiO,EAAOhO,OAAS,WACd2N,KAAKssB,UAAW,EAChBtsB,KAAK3G,YAAY,gBACjB2G,KAAKq9B,YAAYhrC,UAGZmsC,EAxbqB,CAyb5Bx1B,IAEFA,GAAYuH,kBAAkB,aAAciuB,IAO5C,IAAIkB,GAA2B,SAAUC,GAavC,SAASD,EAAY3gC,EAAQR,GAC3B,IAAI4G,EAEAqS,EAASjZ,EAAQiZ,OAOrB,IANArS,EAAQw6B,EAAYhsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEzCg/B,MAAMnvC,QAAU,GACxBsV,EAAMkI,QAGHmK,EACH,OAAO,IAAuBrS,GAGhC,IAAIy6B,EAAgBn7B,GAAK,IAAuBU,GAAQA,EAAMunB,QAa9D,OAZAlV,EAAOlY,iBAAiB,cAAesgC,GACvCpoB,EAAOlY,iBAAiB,WAAYsgC,GACpCpoB,EAAOlY,iBAAiB,cAAesgC,GAEvCz6B,EAAMiE,QAAQnG,GAAG,QAAS28B,GAE1Bz6B,EAAMiE,QAAQnG,GAAG,WAAW,WAC1BuU,EAAOpY,oBAAoB,cAAewgC,GAC1CpoB,EAAOpY,oBAAoB,WAAYwgC,GACvCpoB,EAAOpY,oBAAoB,cAAewgC,MAGrCz6B,EAGT,OA1CA,IAAeu6B,EAAaC,GA0CrBD,EA3CsB,CA4C7BlB,IAEFx1B,GAAYuH,kBAAkB,cAAemvB,IAa7C,IAAIG,GAAW,CAAC,MAAO,MAAO,KAAM,OAAQ,QAAS,QAOjDC,GAAwB,SAAUrT,GAcpC,SAASqT,EAAS/gC,EAAQR,GACxB,IAAI4G,EAmBJ,OAjBAA,EAAQsnB,EAAoB94B,KAAKqM,KAAMjB,EAAQR,IAAYyB,MACrD+/B,WAAaxhC,EAAQwhC,WAC3B56B,EAAM66B,YAAczhC,EAAQqa,WAAY,EACxCzT,EAAM86B,gBAAkB1hC,EAAQ0hC,gBAEhC96B,EAAMyT,SAASzT,EAAM66B,aAEjB76B,EAAM46B,WACJ56B,EAAM86B,gBACR96B,EAAMsC,IAAIxP,aAAa,OAAQ,oBAE/BkN,EAAMsC,IAAIxP,aAAa,OAAQ,iBAGjCkN,EAAMsC,IAAIxP,aAAa,OAAQ,YAG1BkN,EAjCT,IAAe26B,EAAUrT,GAoDzB,IAAIpsB,EAASy/B,EAASnxC,UAgFtB,OA9EA0R,EAAO7I,SAAW,SAAoBxI,EAAMysB,EAAOphB,GAEjD2F,KAAKosB,gBAAiB,EAEtB,IAAIv4B,EAAK44B,EAAoB99B,UAAU6I,SAAS7D,KAAKqM,KAAM,KAAM5M,EAAO,CACtE6F,UAAW,gBACXub,UAAW,GACViH,GAAQphB,GAOX,OAJAxG,EAAGq/B,aAAa17B,GAAS,OAAQ,CAC/ByB,UAAW,qBACXf,YAAa8H,KAAKyK,SAASzK,KAAKuJ,SAASkL,SACvC5gB,EAAGyD,cAAc,0BACdzD,GAaTwM,EAAOkO,cAAgB,SAAuBxS,GACvC8jC,GAASnzB,MAAK,SAAUvZ,GAC3B,OAAO,IAAQqb,WAAWzS,EAAO5I,OAGjCs5B,EAAoB99B,UAAU4f,cAAc5a,KAAKqM,KAAMjE,IAgB3DsE,EAAOyrB,YAAc,SAAqB/vB,GACxCiE,KAAK4Y,UAAS,IAUhBvY,EAAOuY,SAAW,SAAkBsnB,GAC9BlgC,KAAK+/B,aACHG,GACFlgC,KAAK9G,SAAS,gBACd8G,KAAKyH,IAAIxP,aAAa,eAAgB,QAGtC+H,KAAK2V,YAAY,cACjB3V,KAAKggC,aAAc,IAEnBhgC,KAAK3G,YAAY,gBACjB2G,KAAKyH,IAAIxP,aAAa,eAAgB,SAEtC+H,KAAK2V,YAAY,IACjB3V,KAAKggC,aAAc,KAKlBF,EArImB,CAsI1BtU,IAEFxiB,GAAYuH,kBAAkB,WAAYuvB,IAO1C,IAAIK,GAAiC,SAAUC,GAa7C,SAASD,EAAkBphC,EAAQR,GACjC,IAAI4G,EAEAuN,EAAQnU,EAAQmU,MAChB8E,EAASzY,EAAOuU,aAEpB/U,EAAQkW,MAAQ/B,EAAM+B,OAAS/B,EAAM7H,UAAY,UACjDtM,EAAQqa,SAA0B,YAAflG,EAAM2L,MACzBlZ,EAAQi7B,EAAUzsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC3C0S,MAAQA,EAGdvN,EAAMk7B,OAAS9hC,EAAQ8hC,OAAS,CAAC9hC,EAAQ4a,MAAQhU,EAAMuN,MAAMyG,OAAOnnB,OAAO6D,SAE3E,IAiCMkG,EAjCFukC,EAAgB,WAClB,IAAK,IAAIhwC,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB0U,EAAMo7B,mBAAmBhtC,MAAM,IAAuB4R,GAAQ5U,IAG5DiwC,EAAgC,WAClC,IAAK,IAAIluC,EAAQ/E,UAAUsC,OAAQU,EAAO,IAAIC,MAAM8B,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFhC,EAAKgC,GAAShF,UAAUgF,GAG1B4S,EAAMs7B,6BAA6BltC,MAAM,IAAuB4R,GAAQ5U,KAG1EwO,EAAOkE,GAAG,CAAC,YAAa,mBAAoBq9B,GAC5C9oB,EAAOlY,iBAAiB,SAAUghC,GAClC9oB,EAAOlY,iBAAiB,yBAA0BkhC,GAElDr7B,EAAMlC,GAAG,WAAW,WAClBlE,EAAOtN,IAAI,CAAC,YAAa,mBAAoB6uC,GAC7C9oB,EAAOpY,oBAAoB,SAAUkhC,GACrC9oB,EAAOpY,oBAAoB,yBAA0BohC,WAS/BtlC,IAApBsc,EAAOkpB,WAGTv7B,EAAMlC,GAAG,CAAC,MAAO,UAAU,WACzB,GAAgC,WAA5B3U,EAAQ,IAASqyC,OAEnB,IACE5kC,EAAQ,IAAI,IAAS4kC,MAAM,UAC3B,MAAO9iB,MAIN9hB,IACHA,EAAQ,IAAS6kC,YAAY,UACvBC,UAAU,UAAU,GAAM,GAGlCrpB,EAAOvS,cAAclJ,MAOzB,OAFAoJ,EAAMo7B,qBAECp7B,EAlFT,IAAeg7B,EAAmBC,GAiGlC,IAAI//B,EAAS8/B,EAAkBxxC,UA2E/B,OAzEA0R,EAAOyrB,YAAc,SAAqB/vB,GACxC,IAAI+kC,EAAiB9gC,KAAK0S,MACtB8E,EAASxX,KAAKoJ,QAAQkK,aAI1B,GAFA8sB,EAAUzxC,UAAUm9B,YAAYn4B,KAAKqM,KAAMjE,GAEtCyb,EAIL,IAAK,IAAI5nB,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,IAGqB,IAApCoQ,KAAKqgC,MAAMhxC,QAAQqjB,EAAMyG,QAMzBzG,IAAUouB,EACO,YAAfpuB,EAAM2L,OACR3L,EAAM2L,KAAO,WAIS,aAAf3L,EAAM2L,OACf3L,EAAM2L,KAAO,eAcnBhe,EAAOkgC,mBAAqB,SAA4BxkC,GACtD,IAAIglC,EAAuC,YAApB/gC,KAAK0S,MAAM2L,KAG9B0iB,IAAqB/gC,KAAKggC,aAC5BhgC,KAAK4Y,SAASmoB,IAIlB1gC,EAAOogC,6BAA+B,SAAsC1kC,GAC1E,GAAwB,YAApBiE,KAAK0S,MAAM2L,KAAoB,CACjC,IAAIwQ,EAAmB7uB,KAAKoJ,QAAQwlB,OAAOC,iBAE3C,GAAIA,GAAoBA,EAAiBvW,SAAWuW,EAAiBhkB,WAAa7K,KAAK0S,MAAM7H,UAAYgkB,EAAiB1V,OAASnZ,KAAK0S,MAAMyG,KAC5I,OAGFnZ,KAAKoJ,QAAQwlB,OAAOC,iBAAmB,CACrCvW,SAAS,EACTzN,SAAU7K,KAAK0S,MAAM7H,SACrBsO,KAAMnZ,KAAK0S,MAAMyG,QAKvB9Y,EAAOiK,QAAU,WAEftK,KAAK0S,MAAQ,KAEb0tB,EAAUzxC,UAAU2b,QAAQ3W,KAAKqM,OAG5BmgC,EA7K4B,CA8KnCL,IAEF92B,GAAYuH,kBAAkB,oBAAqB4vB,IAOnD,IAAIa,GAAoC,SAAUC,GAahD,SAASD,EAAqBjiC,EAAQR,GA4BpC,OAzBAA,EAAQmU,MAAQ,CACd3T,OAAQA,EAIRoa,KAAM5a,EAAQ4a,KACdknB,MAAO9hC,EAAQ8hC,MACf,SAAW,EACXhiB,KAAM,YAGH9f,EAAQ8hC,QACX9hC,EAAQ8hC,MAAQ,CAAC9hC,EAAQ4a,OAGvB5a,EAAQkW,MACVlW,EAAQmU,MAAM+B,MAAQlW,EAAQkW,MAE9BlW,EAAQmU,MAAM+B,MAAQlW,EAAQ8hC,MAAM3mC,KAAK,SAAW,OAItD6E,EAAQwhC,YAAa,EAErBxhC,EAAQ0hC,iBAAkB,EACnBgB,EAAmBttC,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAxC3D,IAAeghC,EAAsBC,GAkDrC,IAAI5gC,EAAS2gC,EAAqBryC,UA0ClC,OAxCA0R,EAAOkgC,mBAAqB,SAA4BxkC,GAItD,IAHA,IAAIyb,EAASxX,KAAKjB,SAASuU,aACvBytB,GAAmB,EAEdnxC,EAAI,EAAGkoB,EAAIN,EAAO3nB,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC7C,IAAI8iB,EAAQ8E,EAAO5nB,GAEnB,GAAIoQ,KAAKuJ,SAAS82B,MAAMhxC,QAAQqjB,EAAMyG,OAAS,GAAoB,YAAfzG,EAAM2L,KAAoB,CAC5E0iB,GAAmB,EACnB,OAMAA,IAAqB/gC,KAAKggC,aAC5BhgC,KAAK4Y,SAASmoB,IAIlB1gC,EAAOogC,6BAA+B,SAAsC1kC,GAI1E,IAHA,IAAIyb,EAASxX,KAAKjB,SAASuU,aACvB4tB,GAAY,EAEPtxC,EAAI,EAAGkoB,EAAIN,EAAO3nB,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC7C,IAAI8iB,EAAQ8E,EAAO5nB,GAEnB,GAAI,CAAC,WAAY,eAAgB,aAAaP,QAAQqjB,EAAMyG,OAAS,GAAoB,YAAfzG,EAAM2L,KAAoB,CAClG6iB,GAAY,EACZ,OAIAA,IACFlhC,KAAKoJ,QAAQwlB,OAAOC,iBAAmB,CACrCvW,SAAS,KAKR0oB,EA7F+B,CA8FtCb,IAEFn3B,GAAYuH,kBAAkB,uBAAwBywB,IAOtD,IAAIG,GAA+B,SAAUC,GAa3C,SAASD,EAAgBpiC,EAAQR,GAM/B,YALgB,IAAZA,IACFA,EAAU,IAGZA,EAAQiZ,OAASzY,EAAOuU,aACjB8tB,EAAaztC,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAkErD,OApFA,IAAemhC,EAAiBC,GA+BnBD,EAAgBxyC,UAEtB0wC,YAAc,SAAqBL,EAAOqC,GAW/C,IAAI5sB,OAVU,IAAVuqB,IACFA,EAAQ,SAGY,IAAlBqC,IACFA,EAAgBlB,IAOdngC,KAAKshC,SACP7sB,EAAQzU,KAAKshC,OAAS,QAIxBtC,EAAMhuC,KAAK,IAAIgwC,GAAqBhhC,KAAKoJ,QAAS,CAChDi3B,MAAOrgC,KAAKuhC,OACZpoB,KAAMnZ,KAAKwhC,MACX/sB,MAAOA,KAETzU,KAAKi/B,gBAAkB,EACvB,IAAIznB,EAASxX,KAAKoJ,QAAQkK,aAErB9iB,MAAMY,QAAQ4O,KAAKuhC,UACtBvhC,KAAKuhC,OAAS,CAACvhC,KAAKwhC,QAGtB,IAAK,IAAI5xC,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,GAEnB,GAAIoQ,KAAKuhC,OAAOlyC,QAAQqjB,EAAMyG,OAAS,EAAG,CACxC,IAAIjd,EAAO,IAAImlC,EAAcrhC,KAAKoJ,QAAS,CACzCsJ,MAAOA,EACP2tB,MAAOrgC,KAAKuhC,OACZpoB,KAAMnZ,KAAKwhC,MAEXzB,YAAY,EAEZE,iBAAiB,IAEnB/jC,EAAKhD,SAAS,OAASwZ,EAAMyG,KAAO,cACpC6lB,EAAMhuC,KAAKkL,IAIf,OAAO8iC,GAGFmC,EArF0B,CAsFjCzB,IAEF12B,GAAYuH,kBAAkB,kBAAmB4wB,IAOjD,IAAIM,GAAqC,SAAUrB,GAajD,SAASqB,EAAsB1iC,EAAQR,GACrC,IAAI4G,EAEAuN,EAAQnU,EAAQmU,MAChBE,EAAMrU,EAAQqU,IACdoM,EAAcjgB,EAAOigB,cAUzB,OARAzgB,EAAQwhC,YAAa,EACrBxhC,EAAQ0hC,iBAAkB,EAC1B1hC,EAAQkW,MAAQ7B,EAAIva,KACpBkG,EAAQqa,SAAWhG,EAAIC,WAAamM,GAAeA,EAAcpM,EAAIE,SACrE3N,EAAQi7B,EAAUzsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC3C0S,MAAQA,EACdvN,EAAMyN,IAAMA,EACZF,EAAMpT,iBAAiB,YAAamF,GAAK,IAAuBU,GAAQA,EAAMunB,SACvEvnB,EA3BT,IAAes8B,EAAuBrB,GA0CtC,IAAI//B,EAASohC,EAAsB9yC,UAyBnC,OAvBA0R,EAAOyrB,YAAc,SAAqB/vB,GACxCqkC,EAAUzxC,UAAUm9B,YAAYn4B,KAAKqM,MAErCA,KAAKoJ,QAAQ4V,YAAYhf,KAAK4S,IAAIC,WAClC7S,KAAK0sB,OAAO1sB,KAAK4S,IAAIC,YAYvBxS,EAAOqsB,OAAS,SAAgB3wB,GAC9B,IAAI6W,EAAM5S,KAAK4S,IACXoM,EAAchf,KAAKoJ,QAAQ4V,cAE/Bhf,KAAK4Y,SAAShG,EAAIC,WAAamM,GAAeA,EAAcpM,EAAIE,UAG3D2uB,EApEgC,CAqEvC3B,IAEF92B,GAAYuH,kBAAkB,wBAAyBkxB,IASvD,IAAIC,GAA8B,SAAUC,GAgB1C,SAASD,EAAe3iC,EAAQR,EAAS2K,GACvC,OAAOy4B,EAAiBhuC,KAAKqM,KAAMjB,EAAQR,EAAS2K,IAAUlJ,KAhBhE,IAAe0hC,EAAgBC,GA0B/B,IAAIthC,EAASqhC,EAAe/yC,UAsJ5B,OApJA0R,EAAO0M,cAAgB,WACrB,MAAO,uBAAyB40B,EAAiBhzC,UAAUoe,cAAcpZ,KAAKqM,OAGhFK,EAAOi/B,qBAAuB,WAC5B,MAAO,uBAAyBqC,EAAiBhzC,UAAU2wC,qBAAqB3rC,KAAKqM,OAcvFK,EAAOqsB,OAAS,SAAgB3wB,GACzBiE,KAAK4hC,UAAU7lC,GAAyB,aAAfA,EAAM/M,MAAsC,gBAAf+M,EAAM/M,OAC/DgR,KAAK6hC,SAAS7hC,KAAK8hC,qBAGrBH,EAAiBhzC,UAAU+9B,OAAO/4B,KAAKqM,OAWzCK,EAAOwhC,SAAW,SAAkBnvB,GAClC,GAAI1S,KAAK4hC,SAAWlvB,EAApB,CASA,GALK1S,KAAK+hC,iBACR/hC,KAAK+hC,eAAiB/hC,KAAK0sB,OAAOjoB,KAAKzE,OAIrCA,KAAK4hC,OAAQ,CACf,IAAII,EAAoBhiC,KAAKoJ,QAAQwb,qBAAqBlL,wBAAwB1Z,KAAK4hC,QAEnFI,GACFA,EAAkB5iC,oBAAoB,OAAQY,KAAK+hC,gBAGrD/hC,KAAK4hC,OAAS,KAKhB,GAFA5hC,KAAK4hC,OAASlvB,EAEV1S,KAAK4hC,OAAQ,CACf5hC,KAAK4hC,OAAOvjB,KAAO,SAEnB,IAAI4jB,EAAqBjiC,KAAKoJ,QAAQwb,qBAAqBlL,wBAAwB1Z,KAAK4hC,QAEpFK,GACFA,EAAmB3iC,iBAAiB,OAAQU,KAAK+hC,mBAYvD1hC,EAAOyhC,kBAAoB,WAGzB,IAFA,IAAItqB,EAASxX,KAAKoJ,QAAQkK,cAAgB,GAEjC1jB,EAAI4nB,EAAO3nB,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAE3C,IAAI8iB,EAAQ8E,EAAO5nB,GAEnB,GAAI8iB,EAAMyG,OAASnZ,KAAKwhC,MACtB,OAAO9uB,IAabrS,EAAO6hC,eAAiB,WACtB,OAAIliC,KAAK4hC,QAAU5hC,KAAK4hC,OAAOntB,MACtBzU,KAAK4hC,OAAOntB,MAGdzU,KAAKyK,SAASlC,GAAcvI,KAAKwhC,SAU1CnhC,EAAO0+B,WAAa,WAElB,OADA/+B,KAAKuJ,SAAS21B,MAAQl/B,KAAKkiC,iBACpBP,EAAiBhzC,UAAUowC,WAAWprC,KAAKqM,OAUpDK,EAAOg/B,YAAc,WACnB,IAAIL,EAAQ,GAEZ,IAAKh/B,KAAK4hC,OACR,OAAO5C,EAGT,IAAIrsB,EAAO3S,KAAK4hC,OAAOjvB,KAEvB,IAAKA,EACH,OAAOqsB,EAGT,IAAK,IAAIpvC,EAAI,EAAGkoB,EAAInF,EAAK9iB,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC3C,IAAIgjB,EAAMD,EAAK/iB,GACXuyC,EAAK,IAAIV,GAAsBzhC,KAAKoJ,QAAS,CAC/CsJ,MAAO1S,KAAK4hC,OACZhvB,IAAKA,IAEPosB,EAAMhuC,KAAKmxC,GAGb,OAAOnD,GAGF0C,EAjLyB,CAkLhCP,IASFO,GAAe/yC,UAAU6yC,MAAQ,WAQjCE,GAAe/yC,UAAUu9B,aAAe,WACxCljB,GAAYuH,kBAAkB,iBAAkBmxB,IAOhD,IAAIU,GAAkC,SAAUT,GAgB9C,SAASS,EAAmBrjC,EAAQR,EAAS2K,GAC3C,IAAI/D,EAEJA,EAAQw8B,EAAiBhuC,KAAKqM,KAAMjB,EAAQR,EAAS2K,IAAUlJ,KAC/D,IAAIwX,EAASzY,EAAOuU,aAChBgtB,EAAgB77B,GAAK,IAAuBU,GAAQA,EAAMo7B,oBAO9D,OANA/oB,EAAOlY,iBAAiB,SAAUghC,GAElCn7B,EAAMlC,GAAG,WAAW,WAClBuU,EAAOpY,oBAAoB,SAAUkhC,MAGhCn7B,EA3BT,IAAei9B,EAAoBT,GAuCnC,IAAIthC,EAAS+hC,EAAmBzzC,UAsChC,OApCA0R,EAAOkgC,mBAAqB,SAA4BxkC,GAItD,IAHA,IAAIyb,EAASxX,KAAKjB,SAASuU,aACvBtS,GAAW,EAENpR,EAAI,EAAGkoB,EAAIN,EAAO3nB,OAAQD,EAAIkoB,EAAGloB,IAAK,CAC7C,IAAI8iB,EAAQ8E,EAAO5nB,GAEnB,GAAI8iB,EAAMyG,OAASnZ,KAAKwhC,OAAwB,YAAf9uB,EAAM2L,KAAoB,CACzDrd,GAAW,EACX,OAKAA,EACFhB,KAAK5N,UAEL4N,KAAK3N,UAWTgO,EAAO0M,cAAgB,WACrB,MAAO,2BAA6B40B,EAAiBhzC,UAAUoe,cAAcpZ,KAAKqM,OAGpFK,EAAOi/B,qBAAuB,WAC5B,MAAO,2BAA6BqC,EAAiBhzC,UAAU2wC,qBAAqB3rC,KAAKqM,OAGpFoiC,EA9E6B,CA+EpCjB,IASFiB,GAAmBzzC,UAAU6yC,MAAQ,eAQrCY,GAAmBzzC,UAAUu9B,aAAe,eAC5CljB,GAAYuH,kBAAkB,qBAAsB6xB,IAOpD,IAAIC,GAA+B,SAAUV,GAgB3C,SAASU,EAAgBtjC,EAAQR,EAAS2K,GACxC,OAAOy4B,EAAiBhuC,KAAKqM,KAAMjB,EAAQR,EAAS2K,IAAUlJ,KAhBhE,IAAeqiC,EAAiBV,GA0BhC,IAAIthC,EAASgiC,EAAgB1zC,UAU7B,OARA0R,EAAO0M,cAAgB,WACrB,MAAO,wBAA0B40B,EAAiBhzC,UAAUoe,cAAcpZ,KAAKqM,OAGjFK,EAAOi/B,qBAAuB,WAC5B,MAAO,wBAA0BqC,EAAiBhzC,UAAU2wC,qBAAqB3rC,KAAKqM,OAGjFqiC,EArC0B,CAsCjClB,IASFkB,GAAgB1zC,UAAU6yC,MAAQ,YAQlCa,GAAgB1zC,UAAUu9B,aAAe,YACzCljB,GAAYuH,kBAAkB,kBAAmB8xB,IAOjD,IAAIC,GAAuC,SAAUrB,GAanD,SAASqB,EAAwBvjC,EAAQR,GACvC,IAAI4G,EAmBJ,OAjBA5G,EAAQmU,MAAQ,CACd3T,OAAQA,EACRoa,KAAM5a,EAAQ4a,KACd1E,MAAOlW,EAAQ4a,KAAO,YACtB4mB,YAAY,EACZ,SAAW,EACX1hB,KAAM,YAGR9f,EAAQwhC,YAAa,EACrBxhC,EAAQrO,KAAO,2BACfiV,EAAQ87B,EAAmBttC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAEpD9G,SAAS,0BAEfiM,EAAMwQ,YAAY,WAAapX,EAAQ4a,KAAO,oBAEvChU,EAqBT,OArDA,IAAem9B,EAAyBrB,GA+C3BqB,EAAwB3zC,UAE9Bm9B,YAAc,SAAqB/vB,GACxCiE,KAAKjB,SAASwM,SAAS,qBAAqBqJ,QAGvC0tB,EAtDkC,CAuDzCnC,IAEFn3B,GAAYuH,kBAAkB,0BAA2B+xB,IAOzD,IAAIC,GAA8B,SAAUZ,GAgB1C,SAASY,EAAexjC,EAAQR,EAAS2K,GACvC,OAAOy4B,EAAiBhuC,KAAKqM,KAAMjB,EAAQR,EAAS2K,IAAUlJ,KAhBhE,IAAeuiC,EAAgBZ,GA0B/B,IAAIthC,EAASkiC,EAAe5zC,UA8B5B,OA5BA0R,EAAO0M,cAAgB,WACrB,MAAO,uBAAyB40B,EAAiBhzC,UAAUoe,cAAcpZ,KAAKqM,OAGhFK,EAAOi/B,qBAAuB,WAC5B,MAAO,uBAAyBqC,EAAiBhzC,UAAU2wC,qBAAqB3rC,KAAKqM,OAUvFK,EAAOg/B,YAAc,WACnB,IAAIL,EAAQ,GASZ,OAPMh/B,KAAKjB,SAAS6e,OAAS5d,KAAKjB,SAAS6e,MAAMmE,2BAA6B/hB,KAAKjB,SAASwM,SAAS,uBACnGyzB,EAAMhuC,KAAK,IAAIsxC,GAAwBtiC,KAAKoJ,QAAS,CACnD+P,KAAMnZ,KAAKwhC,SAEbxhC,KAAKi/B,gBAAkB,GAGlB0C,EAAiBhzC,UAAU0wC,YAAY1rC,KAAKqM,KAAMg/B,IAGpDuD,EAzDyB,CA0DhCpB,IASFoB,GAAe5zC,UAAU6yC,MAAQ,WAQjCe,GAAe5zC,UAAUu9B,aAAe,WACxCljB,GAAYuH,kBAAkB,iBAAkBgyB,IAQhD,IAAIC,GAAgC,SAAUvB,GAG5C,SAASuB,IACP,OAAOvB,EAAmB1tC,MAAMyM,KAAMzS,YAAcyS,KA2BtD,OA9BA,IAAewiC,EAAkBvB,GAMpBuB,EAAiB7zC,UAEvB6I,SAAW,SAAoBxI,EAAMysB,EAAOphB,GACjD,IAAIxG,EAAKotC,EAAmBtyC,UAAU6I,SAAS7D,KAAKqM,KAAMhR,EAAMysB,EAAOphB,GAEnEooC,EAAa5uC,EAAGyD,cAAc,uBAgBlC,MAdiC,aAA7B0I,KAAKuJ,SAASmJ,MAAMyG,OACtBspB,EAAW9pC,YAAYnB,GAAS,OAAQ,CACtCyB,UAAW,wBACV,CACD,eAAe,KAEjBwpC,EAAW9pC,YAAYnB,GAAS,OAAQ,CACtCyB,UAAW,mBAGXf,YAAa,IAAM8H,KAAKyK,SAAS,gBAI9B5W,GAGF2uC,EA/B2B,CAgClCrC,IAEFn3B,GAAYuH,kBAAkB,mBAAoBiyB,IAOlD,IAAIE,GAA8B,SAAUf,GAG1C,SAASe,EAAe3jC,EAAQR,GAC9B,IAAI4G,EAiBJ,YAfgB,IAAZ5G,IACFA,EAAU,KAGZ4G,EAAQw8B,EAAiBhuC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAGlDshC,OAAS,YAEX,CAAC,KAAM,QAAS,QAAS,SAASjyC,QAAQ8V,EAAMiE,QAAQu5B,YAAc,IACxEx9B,EAAMm8B,OAAS,YAGjBn8B,EAAMk4B,YAAY1nB,YAAYpN,GAAcpD,EAAMm8B,SAE3Cn8B,EApBT,IAAeu9B,EAAgBf,GA8B/B,IAAIthC,EAASqiC,EAAe/zC,UA+B5B,OA7BA0R,EAAO0M,cAAgB,WACrB,MAAO,wBAA0B40B,EAAiBhzC,UAAUoe,cAAcpZ,KAAKqM,OAGjFK,EAAOi/B,qBAAuB,WAC5B,MAAO,wBAA0BqC,EAAiBhzC,UAAU2wC,qBAAqB3rC,KAAKqM,OAUxFK,EAAOg/B,YAAc,WACnB,IAAIL,EAAQ,GAUZ,OARMh/B,KAAKjB,SAAS6e,OAAS5d,KAAKjB,SAAS6e,MAAMmE,2BAA6B/hB,KAAKjB,SAASwM,SAAS,uBACnGyzB,EAAMhuC,KAAK,IAAIsxC,GAAwBtiC,KAAKoJ,QAAS,CACnD+P,KAAMnZ,KAAKshC,UAEbthC,KAAKi/B,gBAAkB,GAGzBD,EAAQ2C,EAAiBhzC,UAAU0wC,YAAY1rC,KAAKqM,KAAMg/B,EAAOwD,KAI5DE,EA9DyB,CA+DhCvB,IASFuB,GAAe/zC,UAAU4yC,OAAS,CAAC,WAAY,aAS/CmB,GAAe/zC,UAAUu9B,aAAe,YACxCljB,GAAYuH,kBAAkB,iBAAkBmyB,IAOhD,IAAIE,GAAkC,SAAUxC,GAa9C,SAASwC,EAAmB7jC,EAAQR,GAClC,IAAI4G,EAEAuN,EAAQnU,EAAQmU,MAChB8E,EAASzY,EAAO8jC,cAEpBtkC,EAAQkW,MAAQ/B,EAAM+B,OAAS/B,EAAM7H,UAAY,UACjDtM,EAAQqa,SAAWlG,EAAM4F,SACzBnT,EAAQi7B,EAAUzsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC3C0S,MAAQA,EAEdvN,EAAMjM,SAAS,OAASwZ,EAAMyG,KAAO,cAErC,IAAImnB,EAAgB,WAClB,IAAK,IAAIhwC,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB0U,EAAMo7B,mBAAmBhtC,MAAM,IAAuB4R,GAAQ5U,IAShE,OANAinB,EAAOlY,iBAAiB,SAAUghC,GAElCn7B,EAAMlC,GAAG,WAAW,WAClBuU,EAAOpY,oBAAoB,SAAUkhC,MAGhCn7B,EAvCT,IAAey9B,EAAoBxC,GA0CnC,IAAI//B,EAASuiC,EAAmBj0C,UAqEhC,OAnEA0R,EAAO7I,SAAW,SAAoBxI,EAAMysB,EAAOphB,GACjD,IAAIxG,EAAKusC,EAAUzxC,UAAU6I,SAAS7D,KAAKqM,KAAMhR,EAAMysB,EAAOphB,GAE1DooC,EAAa5uC,EAAGyD,cAAc,uBAclC,MAZiC,cAA7B0I,KAAKuJ,SAASmJ,MAAMyG,OACtBspB,EAAW9pC,YAAYnB,GAAS,OAAQ,CACtCyB,UAAW,wBACV,CACD,eAAe,KAEjBwpC,EAAW9pC,YAAYnB,GAAS,OAAQ,CACtCyB,UAAW,mBACXf,YAAa,IAAM8H,KAAKyK,SAAS,oBAI9B5W,GAeTwM,EAAOyrB,YAAc,SAAqB/vB,GAOxC,GANAqkC,EAAUzxC,UAAUm9B,YAAYn4B,KAAKqM,KAAMjE,GAI3CiE,KAAK0S,MAAM4F,SAAU,EAEjBtY,KAAKoJ,QAAQwU,MAAMklB,0BAGrB,IAFA,IAAItrB,EAASxX,KAAKoJ,QAAQy5B,cAEjBjzC,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,GAEf8iB,IAAU1S,KAAK0S,QAInBA,EAAM4F,QAAU5F,IAAU1S,KAAK0S,SAcrCrS,EAAOkgC,mBAAqB,SAA4BxkC,GACtDiE,KAAK4Y,SAAS5Y,KAAK0S,MAAM4F,UAGpBsqB,EAhH6B,CAiHpC9C,IAEF92B,GAAYuH,kBAAkB,qBAAsBqyB,IAOpD,IAAIG,GAAgC,SAAU3B,GAa5C,SAAS2B,EAAiBhkC,EAAQR,GAMhC,YALgB,IAAZA,IACFA,EAAU,IAGZA,EAAQiZ,OAASzY,EAAO8jC,cACjBzB,EAAaztC,KAAKqM,KAAMjB,EAAQR,IAAYyB,KAlBrD,IAAe+iC,EAAkB3B,GA4BjC,IAAI/gC,EAAS0iC,EAAiBp0C,UA2C9B,OAzCA0R,EAAO0M,cAAgB,WACrB,MAAO,oBAAsBq0B,EAAazyC,UAAUoe,cAAcpZ,KAAKqM,OAGzEK,EAAOi/B,qBAAuB,WAC5B,MAAO,oBAAsB8B,EAAazyC,UAAU2wC,qBAAqB3rC,KAAKqM,OAahFK,EAAOg/B,YAAc,SAAqBL,QAC1B,IAAVA,IACFA,EAAQ,IAIVh/B,KAAKi/B,eAAiB,EAGtB,IAFA,IAAIznB,EAASxX,KAAKoJ,QAAQy5B,cAEjBjzC,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,GACnBovC,EAAMhuC,KAAK,IAAI4xC,GAAmB5iC,KAAKoJ,QAAS,CAC9CsJ,MAAOA,EAEPqtB,YAAY,EAEZE,iBAAiB,KAIrB,OAAOjB,GAGF+D,EAxE2B,CAyElCrD,IASFqD,GAAiBp0C,UAAUu9B,aAAe,cAC1CljB,GAAYuH,kBAAkB,mBAAoBwyB,IAOlD,IAAIC,GAAoC,SAAU5C,GAahD,SAAS4C,EAAqBjkC,EAAQR,GACpC,IAAI4G,EAEAsP,EAAQlW,EAAQ0kC,KAChBA,EAAOvuC,WAAW+f,EAAO,IAc7B,OAZAlW,EAAQkW,MAAQA,EAChBlW,EAAQqa,SAAWqqB,IAASlkC,EAAOmkC,eACnC3kC,EAAQwhC,YAAa,EACrBxhC,EAAQ0hC,iBAAkB,GAC1B96B,EAAQi7B,EAAUzsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC3CyU,MAAQA,EACdtP,EAAM89B,KAAOA,EAEb99B,EAAMlC,GAAGlE,EAAQ,cAAc,SAAU9K,GACvC,OAAOkR,EAAMunB,OAAOz4B,MAGfkR,EA9BT,IAAe69B,EAAsB5C,GA6CrC,IAAI//B,EAAS2iC,EAAqBr0C,UAqBlC,OAnBA0R,EAAOyrB,YAAc,SAAqB/vB,GACxCqkC,EAAUzxC,UAAUm9B,YAAYn4B,KAAKqM,MAErCA,KAAKjB,SAASmkC,aAAaljC,KAAKijC,OAYlC5iC,EAAOqsB,OAAS,SAAgB3wB,GAC9BiE,KAAK4Y,SAAS5Y,KAAKjB,SAASmkC,iBAAmBljC,KAAKijC,OAG/CD,EAnE+B,CAoEtClD,IASFkD,GAAqBr0C,UAAUqvC,cAAgB,SAC/Ch1B,GAAYuH,kBAAkB,uBAAwByyB,IAOtD,IAAIG,GAAsC,SAAUxD,GAalD,SAASwD,EAAuBpkC,EAAQR,GACtC,IAAI4G,EAsBJ,OApBAA,EAAQw6B,EAAYhsC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE7Cq9B,YAAY51B,IAAIxP,aAAa,mBAAoBkN,EAAMi+B,YAE7Dj+B,EAAMk+B,mBAENl+B,EAAMm+B,cAENn+B,EAAMlC,GAAGlE,EAAQ,aAAa,SAAU9K,GACtC,OAAOkR,EAAMk+B,iBAAiBpvC,MAGhCkR,EAAMlC,GAAGlE,EAAQ,cAAc,SAAU9K,GACvC,OAAOkR,EAAMm+B,YAAYrvC,MAG3BkR,EAAMlC,GAAGlE,EAAQ,uBAAuB,SAAU9K,GAChD,OAAOkR,EAAMo+B,0BAA0BtvC,MAGlCkR,EAnCT,IAAeg+B,EAAwBxD,GA6CvC,IAAIt/B,EAAS8iC,EAAuBx0C,UAuJpC,OArJA0R,EAAO7I,SAAW,WAChB,IAAI3D,EAAK8rC,EAAYhxC,UAAU6I,SAAS7D,KAAKqM,MAS7C,OAPAA,KAAKojC,WAAa,iCAAmCpjC,KAAKwJ,IAC1DxJ,KAAKwjC,SAAWhsC,GAAS,MAAO,CAC9ByB,UAAW,0BACXwQ,GAAIzJ,KAAKojC,WACTlrC,YAAa,OAEfrE,EAAG8E,YAAYqH,KAAKwjC,UACb3vC,GAGTwM,EAAOiK,QAAU,WACftK,KAAKwjC,SAAW,KAEhB7D,EAAYhxC,UAAU2b,QAAQ3W,KAAKqM,OAUrCK,EAAO0M,cAAgB,WACrB,MAAO,qBAAuB4yB,EAAYhxC,UAAUoe,cAAcpZ,KAAKqM,OAGzEK,EAAOi/B,qBAAuB,WAC5B,MAAO,qBAAuBK,EAAYhxC,UAAU2wC,qBAAqB3rC,KAAKqM,OAQhFK,EAAOg/B,YAAc,WAInB,IAHA,IAAIoE,EAAQzjC,KAAK0jC,gBACb1E,EAAQ,GAEHpvC,EAAI6zC,EAAM5zC,OAAS,EAAGD,GAAK,EAAGA,IACrCovC,EAAMhuC,KAAK,IAAIgyC,GAAqBhjC,KAAKjB,SAAU,CACjDkkC,KAAMQ,EAAM7zC,GAAK,OAIrB,OAAOovC,GAOT3+B,EAAOg7B,qBAAuB,WAE5Br7B,KAAKnM,KAAKoE,aAAa,gBAAiB+H,KAAKjB,SAASmkC,iBAexD7iC,EAAOyrB,YAAc,SAAqB/vB,GAExC,IAAI4nC,EAAc3jC,KAAKjB,SAASmkC,eAC5BO,EAAQzjC,KAAK0jC,gBAGbE,GAFeH,EAAMp0C,QAAQs0C,GAEF,GAAKF,EAAM5zC,OAC1CmQ,KAAKjB,SAASmkC,aAAaO,EAAMG,KASnCvjC,EAAOkjC,0BAA4B,SAAmCxnC,GACpEiE,KAAK0sB,UAUPrsB,EAAOqjC,cAAgB,WACrB,IAAI3kC,EAASiB,KAAKjB,SAClB,OAAOA,EAAO2kC,eAAiB3kC,EAAO2kC,iBAAmB,IAW3DrjC,EAAOwjC,sBAAwB,WAC7B,OAAO7jC,KAAKjB,SAAS6e,OAAS5d,KAAKjB,SAAS6e,MAAMwI,sBAAwBpmB,KAAK0jC,iBAAmB1jC,KAAK0jC,gBAAgB7zC,OAAS,GAYlIwQ,EAAOgjC,iBAAmB,SAA0BtnC,GAC9CiE,KAAK6jC,wBACP7jC,KAAK3G,YAAY,cAEjB2G,KAAK9G,SAAS,eAalBmH,EAAOijC,YAAc,SAAqBvnC,GACpCiE,KAAK6jC,0BACP7jC,KAAKwjC,SAAStrC,YAAc8H,KAAKjB,SAASmkC,eAAiB,MAIxDC,EArMiC,CAsMxC3E,IASF2E,GAAuBx0C,UAAUu9B,aAAe,gBAChDljB,GAAYuH,kBAAkB,yBAA0B4yB,IAQxD,IAAIW,GAAsB,SAAUnwB,GAGlC,SAASmwB,IACP,OAAOnwB,EAAWpgB,MAAMyM,KAAMzS,YAAcyS,KAH9C,IAAe8jC,EAAQnwB,GAMvB,IAAItT,EAASyjC,EAAOn1C,UAuCpB,OA/BA0R,EAAO0M,cAAgB,WACrB,MAAO,cAAgB4G,EAAWhlB,UAAUoe,cAAcpZ,KAAKqM,OAUjEK,EAAO7I,SAAW,SAAkB2C,EAAKshB,EAAO9jB,GAiB9C,YAhBY,IAARwC,IACFA,EAAM,YAGM,IAAVshB,IACFA,EAAQ,SAGS,IAAf9jB,IACFA,EAAa,IAGV8jB,EAAMxiB,YACTwiB,EAAMxiB,UAAY+G,KAAK+M,iBAGlB4G,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM7F,EAAKshB,EAAO9jB,IAGvDmsC,EA9CiB,CA+CxB96B,IAEFA,GAAYuH,kBAAkB,SAAUuzB,IAOxC,IAAIC,GAAmC,SAAUC,GAG/C,SAASD,IACP,OAAOC,EAAQzwC,MAAMyM,KAAMzS,YAAcyS,KAH3C,IAAe+jC,EAAqBC,GAMpC,IAAI3jC,EAAS0jC,EAAoBp1C,UA4BjC,OApBA0R,EAAO0M,cAAgB,WACrB,MAAO,6BAA+Bi3B,EAAQr1C,UAAUoe,cAAcpZ,KAAKqM,OAU7EK,EAAO7I,SAAW,WAChB,OAAOwsC,EAAQr1C,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CAClD/G,UAAW+G,KAAK+M,gBAGhB7U,YAAa,UAIV6rC,EAnC8B,CAoCrCD,IAEF96B,GAAYuH,kBAAkB,sBAAuBwzB,IAOrD,IAAIE,GAA0B,SAAUtwB,GAGtC,SAASswB,IACP,OAAOtwB,EAAWpgB,MAAMyM,KAAMzS,YAAcyS,KAkB9C,OArBA,IAAeikC,EAAYtwB,GAMdswB,EAAWt1C,UAQjB6I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,MAAO,CACrD/G,UAAW,kBACX63B,IAAK,SAIFmT,EAtBqB,CAuB5Bj7B,IASFi7B,GAAWt1C,UAAU4a,SAAW,CAC9B8B,SAAU,CAAC,aAAc,cAAe,qBAAsB,cAAe,kBAAmB,kBAAmB,cAAe,aAAc,uBAAwB,sBAAuB,yBAA0B,iBAAkB,qBAAsB,iBAAkB,mBAAoB,qBAGrS,yBAA0B,KAC5B44B,GAAWt1C,UAAU4a,SAAS8B,SAAS9b,OAAO00C,GAAWt1C,UAAU4a,SAAS8B,SAASxb,OAAS,EAAG,EAAG,0BAGtGmZ,GAAYuH,kBAAkB,aAAc0zB,IAQ5C,IAAIC,GAA4B,SAAUC,GAaxC,SAASD,EAAanlC,EAAQR,GAC5B,IAAI4G,EAQJ,OANAA,EAAQg/B,EAAaxwC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAE9CiD,GAAGlE,EAAQ,SAAS,SAAU9K,GAClC,OAAOkR,EAAMyP,KAAK3gB,MAGbkR,EArBT,IAAe++B,EAAcC,GAiC7B,IAAI9jC,EAAS6jC,EAAav1C,UAkB1B,OAhBA0R,EAAO0M,cAAgB,WACrB,MAAO,qBAAuBo3B,EAAax1C,UAAUoe,cAAcpZ,KAAKqM,OAU1EK,EAAOzI,QAAU,WACf,IAAIhG,EAAQoO,KAAKjB,SAASnN,QAC1B,OAAOA,EAAQoO,KAAKyK,SAAS7Y,EAAMqgB,SAAW,IAGzCiyB,EApDuB,CAqD9BxwB,IAQFwwB,GAAav1C,UAAU4a,SAAW,IAAS,GAAImK,GAAY/kB,UAAU4a,SAAU,CAC7E0L,aAAa,EACbJ,YAAY,EACZW,WAAW,EACXrB,aAAa,IAEfnL,GAAYuH,kBAAkB,eAAgB2zB,IAC9C,IAAIE,GAAsB,0BACtBC,GAAc,CAAC,OAAQ,SACvBC,GAAa,CAAC,OAAQ,QACtBC,GAAa,CAAC,OAAQ,QACtBC,GAAc,CAAC,OAAQ,SACvBC,GAAgB,CAAC,OAAQ,WACzBC,GAAY,CAAC,OAAQ,OACrBC,GAAc,CAAC,OAAQ,SACvBC,GAAe,CAAC,OAAQ,UACxBC,GAAiB,CAAC,IAAK,UACvBC,GAAe,CAAC,MAAO,oBACvBC,GAAgB,CAAC,IAAK,eAYtBC,GAAgB,CAClBnV,gBAAiB,CACfz4B,SAAU,yBACVqS,GAAI,+BACJgL,MAAO,QACPlW,QAAS,CAAC8lC,GAAaM,GAAaD,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,KAEvGzU,kBAAmB,CACjB14B,SAAU,2BACVqS,GAAI,iCACJgL,MAAO,eACPlW,QAAS,CAACsmC,GAAgBC,GAAcC,KAE1CjX,MAAO,CACL12B,SAAU,yBACVqS,GAAI,+BACJgL,MAAO,QACPlW,QAAS,CAAComC,GAAaN,GAAaK,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,KAEvGtU,UAAW,CACT74B,SAAU,2BACVqS,GAAI,KACJgL,MAAO,kBACPlW,QAAS,CAAC,CAAC,OAAQ,QAAS,CAAC,SAAU,UAAW,CAAC,YAAa,aAAc,CAAC,UAAW,WAAY,CAAC,aAAc,gBAEvH8xB,WAAY,CACVj5B,SAAU,4BACVqS,GAAI,0BACJgL,MAAO,cACPlW,QAAS,CAAC,CAAC,wBAAyB,2BAA4B,CAAC,qBAAsB,wBAAyB,CAAC,oBAAqB,sBAAuB,CAAC,iBAAkB,mBAAoB,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,aAAc,gBAEjQ4xB,YAAa,CACX/4B,SAAU,6BACVqS,GAAI,wBACJgL,MAAO,YACPlW,QAAS,CAAC,CAAC,OAAQ,OAAQ,CAAC,OAAQ,OAAQ,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,SACjK,QAAW,EACXme,OAAQ,SAAgBuoB,GACtB,MAAa,SAANA,EAAe,KAAOzoC,OAAOyoC,KAGxCrV,YAAa,CACXx4B,SAAU,6BACVqS,GAAI,iCACJgL,MAAO,eACPlW,QAAS,CAACsmC,GAAgBC,KAG5B/U,YAAa,CACX34B,SAAU,6BACVqS,GAAI,2BACJgL,MAAO,SAGTub,cAAe,CACb54B,SAAU,+BACVqS,GAAI,6BACJgL,MAAO,eACPlW,QAAS,CAACwmC,GAAeD,GAAcD,MAqB3C,SAASK,GAAiBzxC,EAAOipB,GAK/B,GAJIA,IACFjpB,EAAQipB,EAAOjpB,IAGbA,GAAmB,SAAVA,EACX,OAAOA,EAxBXuxC,GAAcjV,YAAYxxB,QAAUymC,GAAcnV,gBAAgBtxB,QAqFlE,IAAI4mC,GAAiC,SAAUhB,GAa7C,SAASgB,EAAkBpmC,EAAQR,GACjC,IAAI4G,EA2CJ,OAzCA5G,EAAQiX,WAAY,GACpBrQ,EAAQg/B,EAAaxwC,KAAKqM,KAAMjB,EAAQR,IAAYyB,MAC9CokB,cAAgBjf,EAAMif,cAAc3f,KAAK,IAAuBU,IAEtEA,EAAM2P,OAEN3P,EAAM6O,eAAiB7O,EAAM8O,gBAAiB,EAC9C9O,EAAMigC,UAAY5tC,GAAS,IAAK,CAC9ByB,UAAW,mBACXf,YAAaiN,EAAMsF,SAAS,2BAG9BtF,EAAMtR,KAAK8E,YAAYwM,EAAMigC,WAE7BjgC,EAAMkgC,mBAGmCnqC,IAArCqD,EAAQ+mC,2BACVngC,EAAMoE,SAAS+7B,yBAA2BngC,EAAMoE,SAASsD,cAAcy4B,0BAGzEngC,EAAMlC,GAAGkC,EAAMjH,EAAE,oBAAqB,SAAS,WAC7CiH,EAAMogC,eAENpgC,EAAM2O,WAGR3O,EAAMlC,GAAGkC,EAAMjH,EAAE,uBAAwB,SAAS,WAChDiH,EAAMkgC,cAENlgC,EAAMif,mBAGRnxB,EAAK+xC,IAAe,SAAUQ,GAC5BrgC,EAAMlC,GAAGkC,EAAMjH,EAAEsnC,EAAOpuC,UAAW,SAAU+N,EAAMif,kBAGjDjf,EAAMoE,SAAS+7B,0BACjBngC,EAAMsgC,kBAGDtgC,EAxDT,IAAeggC,EAAmBhB,GA2DlC,IAAI9jC,EAAS8kC,EAAkBx2C,UA2Q/B,OAzQA0R,EAAOiK,QAAU,WACftK,KAAKolC,UAAY,KAEjBjB,EAAax1C,UAAU2b,QAAQ3W,KAAKqM,OAetCK,EAAOqlC,gBAAkB,SAAyBvyC,EAAKwyC,EAAU32C,GAC/D,IAAI4X,EAAS5G,UAEI,IAAb2lC,IACFA,EAAW,SAGA,IAAT32C,IACFA,EAAO,SAGT,IAAIw2C,EAASR,GAAc7xC,GACvBsW,EAAK+7B,EAAO/7B,GAAGpB,QAAQ,KAAMrI,KAAKwJ,KAClCo8B,EAAsB,CAACD,EAAUl8B,GAAI/P,KAAK,KAAK/C,OACnD,MAAO,CAAC,IAAM3H,EAAO,QAAWya,EAAK,aAA0B,UAATza,EAAmB,YAAc,IAAM,KAAOgR,KAAKyK,SAAS+6B,EAAO/wB,OAAQ,KAAOzlB,EAAO,IAAK,4BAA+B42C,EAAsB,MAAO12C,OAAOs2C,EAAOjnC,QAAQhC,KAAI,SAAUspC,GAClP,IAAIC,EAAWr8B,EAAK,IAAMo8B,EAAE,GAAGx9B,QAAQ,OAAQ,IAC/C,MAAO,CAAC,eAAkBy9B,EAAW,YAAgBD,EAAE,GAAK,KAAO,oBAAuBD,EAAsB,IAAME,EAAW,KAAOl/B,EAAO6D,SAASo7B,EAAE,IAAK,aAAansC,KAAK,QAC/KxK,OAAO,aAAawK,KAAK,KAY/B2G,EAAO0lC,iBAAmB,WACxB,IAAIJ,EAAW,wBAA0B3lC,KAAKwJ,IAC9C,MAAO,CAAC,oDAAqD,eAAkBm8B,EAAW,KAAO3lC,KAAKyK,SAAS,QAAS,YAAazK,KAAK0lC,gBAAgB,QAASC,GAAW,8CAA+C3lC,KAAK0lC,gBAAgB,cAAeC,GAAW,UAAW,eAAejsC,KAAK,KAY7S2G,EAAO2lC,iBAAmB,WACxB,IAAIL,EAAW,uBAAyB3lC,KAAKwJ,IAC7C,MAAO,CAAC,oDAAqD,eAAkBm8B,EAAW,KAAO3lC,KAAKyK,SAAS,cAAe,YAAazK,KAAK0lC,gBAAgB,kBAAmBC,GAAW,4CAA6C3lC,KAAK0lC,gBAAgB,oBAAqBC,GAAW,UAAW,eAAejsC,KAAK,KAYjU2G,EAAO4lC,kBAAoB,WACzB,IAAIN,EAAW,mBAAqB3lC,KAAKwJ,IACzC,MAAO,CAAC,wDAAyD,eAAkBm8B,EAAW,KAAO3lC,KAAKyK,SAAS,UAAW,YAAazK,KAAK0lC,gBAAgB,cAAeC,GAAW,gDAAiD3lC,KAAK0lC,gBAAgB,gBAAiBC,GAAW,UAAW,eAAejsC,KAAK,KAY7T2G,EAAO6lC,gBAAkB,WACvB,OAAO1uC,GAAS,MAAO,CACrByB,UAAW,4BACXktC,UAAW,CAACnmC,KAAK+lC,mBAAoB/lC,KAAKgmC,mBAAoBhmC,KAAKimC,qBAAqBvsC,KAAK,OAajG2G,EAAO+lC,cAAgB,WACrB,OAAO5uC,GAAS,MAAO,CACrByB,UAAW,0BACXktC,UAAW,CAAC,wDAAyDnmC,KAAK0lC,gBAAgB,cAAe,GAAI,UAAW,cAAe,sDAAuD1lC,KAAK0lC,gBAAgB,YAAa,GAAI,UAAW,cAAe,uDAAwD1lC,KAAK0lC,gBAAgB,aAAc,GAAI,UAAW,eAAehsC,KAAK,OAahY2G,EAAOgmC,kBAAoB,WACzB,IAAIC,EAAsBtmC,KAAKyK,SAAS,8CACxC,OAAOjT,GAAS,MAAO,CACrByB,UAAW,8BACXktC,UAAW,CAAC,2DAAkEG,EAAsB,KAAOtmC,KAAKyK,SAAS,SAAU,mCAAuC67B,EAAsB,UAAW,YAAa,iDAAuDtmC,KAAKyK,SAAS,QAAU,aAAa/Q,KAAK,OAI7T2G,EAAOzI,QAAU,WACf,MAAO,CAACoI,KAAKkmC,kBAAmBlmC,KAAKomC,gBAAiBpmC,KAAKqmC,sBAG7DhmC,EAAOoU,MAAQ,WACb,OAAOzU,KAAKyK,SAAS,4BAGvBpK,EAAOkU,YAAc,WACnB,OAAOvU,KAAKyK,SAAS,yEAGvBpK,EAAO0M,cAAgB,WACrB,OAAOo3B,EAAax1C,UAAUoe,cAAcpZ,KAAKqM,MAAQ,4BAU3DK,EAAOovB,UAAY,WACjB,IAn4jBY18B,EAAQ9D,EAAIs3C,EAm4jBpBv/B,EAAShH,KAEb,OAr4jBoB/Q,EAq4jBS,SAAUu3C,EAAOhB,EAAQryC,GACpD,IAlQ0BU,EAAI6oB,EAkQ1BjpB,GAlQsBI,EAkQSmT,EAAO9I,EAAEsnC,EAAOpuC,UAlQrBslB,EAkQgC8oB,EAAO9oB,OAhQlEwoB,GADKrxC,EAAG0K,QAAQ1K,EAAG0K,QAAQkoC,eAAehzC,MAClBipB,IAsQ3B,YAJcxhB,IAAVzH,IACF+yC,EAAMrzC,GAAOM,GAGR+yC,QA34jBK,KADUD,EA64jBrB,MA34jBHA,EAAU,GAGLzzC,EALOC,EAq4jBEiyC,IAh4jBIt5B,QAAO,SAAU86B,EAAOrzC,GAC1C,OAAOlE,EAAGu3C,EAAOzzC,EAAOI,GAAMA,KAC7BozC,IAg5jBHlmC,EAAOqmC,UAAY,SAAmBpqC,GACpC,IAAI0T,EAAShQ,KAEb/M,EAAK+xC,IAAe,SAAUQ,EAAQryC,IAjQ1C,SAA2BU,EAAIJ,EAAOipB,GACpC,GAAKjpB,EAIL,IAAK,IAAI7D,EAAI,EAAGA,EAAIiE,EAAG0K,QAAQ1O,OAAQD,IACrC,GAAIs1C,GAAiBrxC,EAAG0K,QAAQ3O,GAAG6D,MAAOipB,KAAYjpB,EAAO,CAC3DI,EAAG4yC,cAAgB72C,EACnB,OA0PA+2C,CAAkB32B,EAAO9R,EAAEsnC,EAAOpuC,UAAWkF,EAAOnJ,GAAMqyC,EAAO9oB,YAQrErc,EAAOglC,YAAc,WACnB,IAAIl1B,EAASnQ,KAEb/M,EAAK+xC,IAAe,SAAUQ,GAC5B,IAAIp2C,EAAQo2C,EAAO1zC,eAAe,WAAa0zC,EAAgB,QAAI,EACnEr1B,EAAOjS,EAAEsnC,EAAOpuC,UAAUqvC,cAAgBr3C,MAQ9CiR,EAAOolC,gBAAkB,WACvB,IAAInpC,EAEJ,IACEA,EAASsqC,KAAKzpB,MAAM,IAAS0pB,aAAaC,QAAQ1C,KAClD,MAAOvmB,KACP7tB,EAAM2B,KAAKksB,KAGTvhB,GACF0D,KAAK0mC,UAAUpqC,IAQnB+D,EAAOklC,aAAe,WACpB,GAAKvlC,KAAKuJ,SAAS+7B,yBAAnB,CAIA,IAAIhpC,EAAS0D,KAAKyvB,YAElB,IACM58B,OAAOC,KAAKwJ,GAAQzM,OACtB,IAASg3C,aAAaE,QAAQ3C,GAAqBwC,KAAKI,UAAU1qC,IAElE,IAASuqC,aAAaI,WAAW7C,IAEnC,MAAOvmB,KACP7tB,EAAM2B,KAAKksB,QAQfxd,EAAO+jB,cAAgB,WACrB,IAAI8iB,EAAYlnC,KAAKoJ,QAAQmC,SAAS,oBAElC27B,GACFA,EAAU9iB,iBAUd/jB,EAAOkV,iBAAmB,WACxBvV,KAAK0U,oBAAsB,KAC3B,IAAI2c,EAAKrxB,KAAKoJ,QAAQ+9B,WAClBC,EAAc/V,GAAMA,EAAGgW,eACvBC,EAAQjW,GAAMA,EAAGkW,eAEjBH,EACFA,EAAYzsC,QACH2sC,GACTA,EAAM3sC,SAIHwqC,EAvU4B,CAwUnCzxB,IAEF1K,GAAYuH,kBAAkB,oBAAqB40B,IAkBnD,IAAIqC,GAA6B,SAAU7zB,GAiBzC,SAAS6zB,EAAczoC,EAAQR,GAC7B,IAAI4G,EAEAsiC,EAA4BlpC,EAAQmpC,gBAAkB,IAASA,eAEpC,OAA3BnpC,EAAQmpC,iBACVD,GAA4B,GAI9B,IAAIl+B,EAAWf,GAAe,CAC5BhR,UAAWiwC,EACXr9B,qBAAqB,GACpB7L,GAoCH,OAnCA4G,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQwK,IAAavJ,MAC7C0nC,eAAiBnpC,EAAQmpC,gBAAkB,IAASA,eAC1DviC,EAAMwiC,cAAgB,KACtBxiC,EAAMyiC,gBAAkB,KACxBziC,EAAM0iC,kBA/8fK,SAAkBzjC,EAAMpF,EAAM8oC,EAAWzwC,GAKtD,IAAIkO,OAJY,IAAZlO,IACFA,EAAU,KAKZ,IAOI0wC,EAAY,WACd,IAAI55C,EAAO6R,KACPzP,EAAOhD,UAEPy6C,EAAS,WACXziC,EAAU,KACVyiC,EAAS,KAEJF,GACH1jC,EAAK7Q,MAAMpF,EAAMoC,KAIhBgV,GAAWuiC,GACd1jC,EAAK7Q,MAAMpF,EAAMoC,GAGnB8G,EAAQiO,aAAaC,GACrBA,EAAUlO,EAAQ6H,WAAW8oC,EAAQhpC,IAMvC,OADA+oC,EAAUE,OA9BG,WACX5wC,EAAQiO,aAAaC,GACrBA,EAAU,MA6BLwiC,EAy6fqBG,EAAS,WACjC/iC,EAAMgjC,kBACL,KAAK,EAAO,IAAuBhjC,IAElCsiC,GACFtiC,EAAMyiC,gBAAkB,IAAIziC,EAAMuiC,eAAeviC,EAAM0iC,mBAEvD1iC,EAAMyiC,gBAAgBQ,QAAQrpC,EAAOlL,QAErCsR,EAAMwiC,cAAgB,WACpB,GAAKxiC,EAAMsC,KAAQtC,EAAMsC,IAAI4gC,cAA7B,CAIA,IAAIR,EAAoB1iC,EAAM0iC,kBAE1BS,EAAkBnjC,EAAMmjC,gBAAkB,WAC5C72C,GAAIuO,KAAM,SAAU6nC,GACpBp2C,GAAIuO,KAAM,SAAUsoC,GACpBA,EAAkB,MAKpBrlC,GAAGkC,EAAMsC,IAAI4gC,cAAe,SAAUC,GACtCrlC,GAAGkC,EAAMsC,IAAI4gC,cAAe,SAAUR,KAGxC1iC,EAAMhB,IAAI,OAAQgB,EAAMwiC,gBAGnBxiC,EAjET,IAAeqiC,EAAe7zB,GAoE9B,IAAItT,EAASmnC,EAAc74C,UA8D3B,OA5DA0R,EAAO7I,SAAW,WAChB,OAAOmc,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,SAAU,CACxD/G,UAAW,qBACXub,UAAW,GACV,CACD,cAAe,UAUnBnU,EAAO8nC,cAAgB,WAShBnoC,KAAKoJ,SAAYpJ,KAAKoJ,QAAQtF,SAInC9D,KAAKoJ,QAAQtF,QAAQ,iBAGvBzD,EAAOiK,QAAU,WACXtK,KAAK6nC,mBACP7nC,KAAK6nC,kBAAkBI,SAGrBjoC,KAAK4nC,kBACH5nC,KAAKoJ,QAAQvV,MACfmM,KAAK4nC,gBAAgBW,UAAUvoC,KAAKoJ,QAAQvV,MAG9CmM,KAAK4nC,gBAAgBY,cAGnBxoC,KAAK2nC,eACP3nC,KAAKvO,IAAI,OAAQuO,KAAK2nC,eAGpB3nC,KAAKyH,KAAOzH,KAAKyH,IAAI4gC,eAAiBroC,KAAKsoC,iBAC7CtoC,KAAKsoC,gBAAgB30C,KAAKqM,KAAKyH,IAAI4gC,eAGrCroC,KAAK0nC,eAAiB,KACtB1nC,KAAKyoC,eAAiB,KACtBzoC,KAAK6nC,kBAAoB,KACzB7nC,KAAK2nC,cAAgB,KAErBh0B,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAG7BwnC,EAnIwB,CAoI/Bx+B,IAEFA,GAAYuH,kBAAkB,gBAAiBi3B,IAC/C,IAAIkB,GAAW,CACbC,kBAAmB,GACnBC,cAAe,IAUbC,GAA2B,SAAUl1B,GAuBvC,SAASk1B,EAAY9pC,EAAQR,GAC3B,IAAI4G,EAGAoE,EAAWf,GAAekgC,GAAUnqC,EAAS,CAC/C/G,UAAU,IA+CZ,OA7CA2N,EAAQwO,EAAWhgB,KAAKqM,KAAMjB,EAAQwK,IAAavJ,MAE7C8oC,wBAA0B,SAAU70C,GACxC,OAAOkR,EAAM4jC,uBAAuB90C,IAGtCkR,EAAM6jC,kBAAoB,WACxB,OAAO7jC,EAAM8jC,cAGf9jC,EAAM+jC,YAAc,SAAUj1C,GAC5B,OAAOkR,EAAMwsB,WAAW19B,IAG1BkR,EAAMgkC,uBAAyB,SAAUl1C,GACvC,OAAOkR,EAAMikC,sBAAsBn1C,IAGrCkR,EAAMkkC,cAAgB,SAAUp1C,GAC9B,OAAOkR,EAAM2sB,aAAa79B,IAG5BkR,EAAMmkC,gBAAkB,SAAUr1C,GAChC,OAAOkR,EAAMkvB,eAAepgC,IAG9BkR,EAAMokC,SAENpkC,EAAMlC,GAAGkC,EAAMiE,QAAS,kBAAkB,SAAUnV,GAClD,OAAOkR,EAAMqkC,qBAAqBv1C,MAKpCkR,EAAMlC,GAAGkC,EAAMiE,QAAS,WAAW,WACjC,OAAOjE,EAAMskC,oBAMXl0C,IAAc,WAAY,KAAY,oBAAqB,KAC7D4P,EAAMlC,GAAG,IAAU,mBAAoBkC,EAAM2jC,yBAGxC3jC,EA1ET,IAAe0jC,EAAal1B,GAiF5B,IAAItT,EAASwoC,EAAYl6C,UAyVzB,OAvVA0R,EAAO0oC,uBAAyB,WAC1B/oC,KAAKoJ,QAAQ0I,aAAewgB,MAI5B,IAASrX,OACXjb,KAAK0pC,eAEL1pC,KAAK2pC,kBASTtpC,EAAO4oC,WAAa,WAClB,IAAI3gB,EAAWtoB,KAAKoJ,QAAQkf,WAE5B,GAAKA,GAAaA,EAASz4B,OAA3B,CAIA,IAAIipC,EAAUt8B,OAAO,IAAS2D,YAAYrS,MAAMwnC,QAAQ,IACpDsU,GAAgC,IAApB5pC,KAAK6pC,UAAmB,GAAK/Q,EAAU94B,KAAK6pC,WAAa,IACzE7pC,KAAK6pC,UAAY/Q,EACjB94B,KAAK8pC,aAAe9pC,KAAK+pC,cAAgBH,EACzC,IAAIrR,EAAkBv4B,KAAKu4B,kBACvBvZ,EAAchf,KAAKoJ,QAAQ4V,cAM3BgrB,EAAWhqC,KAAKoJ,QAAQ4L,UAAYhV,KAAKiqC,mBAAqB7sC,KAAK8sC,IAAI3R,EAAkBvZ,GAAehf,KAAKuJ,SAASq/B,cAIrH5oC,KAAKmqC,iBAAmB5R,IAAoBjG,MAC/C0X,GAAW,GAGTA,IAAahqC,KAAKoqC,kBACpBpqC,KAAKoqC,gBAAkBJ,EACvBhqC,KAAK8D,QAAQ,qBASjBzD,EAAOmpC,qBAAuB,WAC5BxpC,KAAKypC,kBAOPppC,EAAOopC,eAAiB,WAClBzpC,KAAKoJ,QAAQ0I,aAAewgB,KAAYtyB,KAAKu3B,cAAgBv3B,KAAKuJ,SAASo/B,mBACzE3oC,KAAKoJ,QAAQG,SAAS8gC,QACxBrqC,KAAKoJ,QAAQlQ,SAAS,cAGxB8G,KAAK2pC,kBAEL3pC,KAAKoJ,QAAQ/P,YAAY,cACzB2G,KAAK0pC,iBAQTrpC,EAAOspC,cAAgB,WACjB3pC,KAAKsqC,eAOJtqC,KAAKmqC,kBACRnqC,KAAKmqC,gBAAkBnqC,KAAKoJ,QAAQmhC,cAGtCvqC,KAAKwqC,kBAAoBxqC,KAAKuP,YAAYvP,KAAKgpC,kBAAmBxkC,IAClExE,KAAKipC,aACLjpC,KAAKiD,GAAGjD,KAAKoJ,QAAS,CAAC,OAAQ,SAAUpJ,KAAKgpC,mBAEzChpC,KAAKmqC,gBAIRnqC,KAAKiD,GAAGjD,KAAKoJ,QAAS,SAAUpJ,KAAKqpC,gBAHrCrpC,KAAKmE,IAAInE,KAAKoJ,QAAS,OAAQpJ,KAAKkpC,aACpClpC,KAAKmE,IAAInE,KAAKoJ,QAAS,aAAcpJ,KAAKmpC,2BAW9C9oC,EAAO+oC,sBAAwB,WAC7BppC,KAAKmqC,iBAAkB,EACvBnqC,KAAKiD,GAAGjD,KAAKoJ,QAAS,SAAUpJ,KAAKqpC,gBAQvChpC,EAAOyxB,aAAe,WACpB,IAAI2Y,EAAWrtC,KAAK8sC,IAAIlqC,KAAKu4B,kBAAoBv4B,KAAKoJ,QAAQ4V,eAC9Dhf,KAAKiqC,kBAAoBjqC,KAAK0qC,qBAAuBD,EAAW,EAChEzqC,KAAK0qC,qBAAsB,EAC3B1qC,KAAKipC,cAQP5oC,EAAOsxB,WAAa,WAClB3xB,KAAKmE,IAAInE,KAAKoJ,QAAS,aAAcpJ,KAAKspC,kBAQ5CjpC,EAAOkpC,OAAS,WACdvpC,KAAK6pC,WAAa,EAClB7pC,KAAK8pC,aAAe,EACpB9pC,KAAK2qC,cAAgB,EACrB3qC,KAAKoqC,iBAAkB,EACvBpqC,KAAKmqC,iBAAkB,EACvBnqC,KAAKiqC,mBAAoB,EACzBjqC,KAAK0qC,qBAAsB,EAC3B1qC,KAAKsP,cAActP,KAAKwqC,mBACxBxqC,KAAKwqC,kBAAoB,KACzBxqC,KAAKvO,IAAIuO,KAAKoJ,QAAS,CAAC,OAAQ,SAAUpJ,KAAKgpC,mBAC/ChpC,KAAKvO,IAAIuO,KAAKoJ,QAAS,SAAUpJ,KAAKqpC,eACtCrpC,KAAKvO,IAAIuO,KAAKoJ,QAAS,OAAQpJ,KAAKkpC,aACpClpC,KAAKvO,IAAIuO,KAAKoJ,QAAS,aAAcpJ,KAAKmpC,wBAC1CnpC,KAAKvO,IAAIuO,KAAKoJ,QAAS,aAAcpJ,KAAKspC,kBAS5CjpC,EAAOq4B,mBAAqB,WAC1B14B,KAAK0qC,qBAAsB,GAO7BrqC,EAAOqpC,aAAe,WACf1pC,KAAKsqC,eAIVtqC,KAAKupC,SACLvpC,KAAK8D,QAAQ,oBAWfzD,EAAO+1B,YAAc,WAKnB,IAJA,IAAI9N,EAAWtoB,KAAKoJ,QAAQkf,WACxBsiB,EAAe,GACfh7C,EAAI04B,EAAWA,EAASz4B,OAAS,EAE9BD,KACLg7C,EAAa55C,KAAKs3B,EAAS5W,IAAI9hB,IAKjC,OAAOg7C,EAAa/6C,OAAS+6C,EAAaC,OAAOD,EAAa/6C,OAAS,GAAKyiC,KAW9EjyB,EAAOs4B,cAAgB,WAKrB,IAJA,IAAIrQ,EAAWtoB,KAAKoJ,QAAQkf,WACxBwiB,EAAiB,GACjBl7C,EAAI04B,EAAWA,EAASz4B,OAAS,EAE9BD,KACLk7C,EAAe95C,KAAKs3B,EAAS7W,MAAM7hB,IAKrC,OAAOk7C,EAAej7C,OAASi7C,EAAeD,OAAO,GAAK,GAa5DxqC,EAAOk3B,WAAa,WAClB,IAAIgB,EAAkBv4B,KAAKu4B,kBAE3B,OAAIA,IAAoBjG,IACf,EAGFiG,EAAkBv4B,KAAK24B,iBAWhCt4B,EAAO81B,OAAS,WACd,OAAOn2B,KAAKsqC,cAWdjqC,EAAO+zB,WAAa,WAClB,OAAQp0B,KAAK+qC,kBAUf1qC,EAAOk4B,gBAAkB,WACvB,OAAOv4B,KAAK+pC,cAAgB/pC,KAAKo2B,eAWnC/1B,EAAO0pC,YAAc,WACnB,IAAI3T,EAAcp2B,KAAKo2B,cAOvB,OAL2B,IAAvBp2B,KAAK2qC,cAAuBvU,IAAgBp2B,KAAK2qC,eACnD3qC,KAAK8pC,aAAe,GAGtB9pC,KAAK2qC,aAAevU,EACbp2B,KAAK8pC,cAWdzpC,EAAO0qC,eAAiB,WACtB,OAAO/qC,KAAKoqC,iBAOd/pC,EAAOiqC,WAAa,WAClB,MAAyC,kBAA3BtqC,KAAKwqC,mBAOrBnqC,EAAOg0B,eAAiB,WACtBr0B,KAAKiqC,mBAAoB,EAErBjqC,KAAKo0B,eAITp0B,KAAK0qC,qBAAsB,EAC3B1qC,KAAKoJ,QAAQ4V,YAAYhf,KAAKu4B,qBAOhCl4B,EAAOiK,QAAU,WACftK,KAAKvO,IAAI,IAAU,mBAAoBuO,KAAK8oC,yBAC5C9oC,KAAK0pC,eAEL/1B,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAG7B6oC,EA3asB,CA4a7B7/B,IAEFA,GAAYuH,kBAAkB,cAAes4B,IAe7C,IAkmDIpjB,GAlmDAulB,GAAgB,SAAuBh4B,GACzC,IAAInf,EAAKmf,EAAKnf,KAEd,GAAIA,EAAGijB,aAAa,OAElB,OADA9D,EAAKoP,iBAAiBvuB,EAAGwf,MAClB,EAgBT,IAAI/f,EAAU0f,EAAK7U,GAAG,UAClB8sC,EAAU,GACV53B,EAAM,GAEV,IAAK/f,EAAQzD,OACX,OAAO,EAIT,IAAK,IAAID,EAAI,EAAGA,EAAI0D,EAAQzD,OAAQD,IAAK,CACvC,IAAI4rB,EAAMloB,EAAQ1D,GAAGyjB,IAEjBmI,IAAiC,IAA1ByvB,EAAQ57C,QAAQmsB,IACzByvB,EAAQj6C,KAAKwqB,GAKjB,QAAKyvB,EAAQp7C,SAMU,IAAnBo7C,EAAQp7C,SACVwjB,EAAM43B,EAAQ,IAGhBj4B,EAAKoP,iBAAiB/O,IACf,IAQL63B,GAA8Br4C,OAAO2Q,eAAe,GAAI,YAAa,CACvEhD,IAAK,WACH,OAAOR,KAAKmrC,WAAU,GAAMhF,WAE9B7lC,IAAK,SAAa2kC,GAEhB,IAAImG,EAAQ,IAASvzC,cAAcmI,KAAK7D,SAASC,eAEjDgvC,EAAMjF,UAAYlB,EAKlB,IAHA,IAAIoG,EAAU,IAASC,yBAGhBF,EAAMG,WAAW17C,QACtBw7C,EAAQ1yC,YAAYyyC,EAAMG,WAAW,IASvC,OALAvrC,KAAK1H,UAAY,GAGjB,IAASkzC,QAAQ78C,UAAUgK,YAAYhF,KAAKqM,KAAMqrC,GAE3CrrC,KAAKmmC,aAQZsF,GAAgB,SAAuBC,EAAU53C,GAGnD,IAFA,IAAI63C,EAAa,GAER/7C,EAAI,EAAGA,EAAI87C,EAAS77C,WAC3B87C,EAAa94C,OAAO+4C,yBAAyBF,EAAS97C,GAAIkE,KAExC63C,EAAWrrC,KAAOqrC,EAAWnrC,KAHZ5Q,KAUrC,OAFA+7C,EAAWE,YAAa,EACxBF,EAAWG,cAAe,EACnBH,GA0BLI,GAAmB,SAA0B/4B,GAC/C,IAAInf,EAAKmf,EAAKnf,KAEd,IAAIA,EAAGm4C,kBAAP,CAIA,IAAItqC,EAAM,GACNuqC,EA/BuB,SAAgCj5B,GAC3D,OAAOy4B,GAAc,CAACz4B,EAAKnf,KAAM,IAASq4C,iBAAiBv9C,UAAW,IAAS68C,QAAQ78C,UAAWu8C,IAA8B,aA8B1GiB,CAAuBn5B,GAEzCo5B,EAAgB,SAAuBC,GACzC,OAAO,WACL,IAAK,IAAI/7C,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB,IAAI67C,EAASD,EAAS94C,MAAMM,EAAItD,GAEhC,OADAy6C,GAAch4B,GACPs5B,IAIX,CAAC,SAAU,cAAe,sBAAsBp5C,SAAQ,SAAU+H,GAC3DpH,EAAGoH,KAKRyG,EAAIzG,GAAKpH,EAAGoH,GAGZpH,EAAGoH,GAAKmxC,EAAc1qC,EAAIzG,QAE5BpI,OAAO2Q,eAAe3P,EAAI,YAAa2U,GAAeyjC,EAAiB,CACrE3rC,IAAK8rC,EAAcH,EAAgB3rC,QAGrCzM,EAAGm4C,kBAAoB,WACrBn4C,EAAGm4C,kBAAoB,KACvBn5C,OAAOC,KAAK4O,GAAKxO,SAAQ,SAAU+H,GACjCpH,EAAGoH,GAAKyG,EAAIzG,MAEdpI,OAAO2Q,eAAe3P,EAAI,YAAao4C,IAIzCj5B,EAAK7O,IAAI,YAAatQ,EAAGm4C,qBAQvBO,GAAwB15C,OAAO2Q,eAAe,GAAI,MAAO,CAC3DhD,IAAK,WACH,OAAIR,KAAK8W,aAAa,OACbkF,GAAe,IAASwvB,QAAQ78C,UAAU4L,aAAa5G,KAAKqM,KAAM,QAGpE,IAETM,IAAK,SAAa2kC,GAEhB,OADA,IAASuG,QAAQ78C,UAAUsJ,aAAatE,KAAKqM,KAAM,MAAOilC,GACnDA,KAwBPuH,GAAiB,SAAwBx5B,GAC3C,GAAKA,EAAKqT,kBAAV,CAIA,IAAIxyB,EAAKmf,EAAKnf,KAEd,IAAIA,EAAG44C,gBAAP,CAIA,IAAIC,EA/BiB,SAA0B15B,GAC/C,OAAOy4B,GAAc,CAACz4B,EAAKnf,KAAM,IAASq4C,iBAAiBv9C,UAAW49C,IAAwB,OA8B1EI,CAAiB35B,GACjC45B,EAAkB/4C,EAAGoE,aACrB40C,EAAUh5C,EAAGgsB,KACjBhtB,OAAO2Q,eAAe3P,EAAI,MAAO2U,GAAekkC,EAAe,CAC7DpsC,IAAK,SAAa2kC,GAChB,IAAIqH,EAASI,EAAcpsC,IAAI3M,KAAKE,EAAIoxC,GAGxC,OADAjyB,EAAKoP,iBAAiBvuB,EAAGwf,KAClBi5B,MAIXz4C,EAAGoE,aAAe,SAAUqL,EAAG2hC,GAC7B,IAAIqH,EAASM,EAAgBj5C,KAAKE,EAAIyP,EAAG2hC,GAMzC,MAJI,OAAO9zC,KAAKmS,IACd0P,EAAKoP,iBAAiBvuB,EAAGwf,KAGpBi5B,GAGTz4C,EAAGgsB,KAAO,WACR,IAAIysB,EAASO,EAAQl5C,KAAKE,GAU1B,OALKm3C,GAAch4B,KACjBA,EAAKoP,iBAAiB,IACtB2pB,GAAiB/4B,IAGZs5B,GAGLz4C,EAAGi5C,WACL95B,EAAKoP,iBAAiBvuB,EAAGi5C,YACf9B,GAAch4B,IACxB+4B,GAAiB/4B,GAGnBnf,EAAG44C,gBAAkB,WACnB54C,EAAG44C,gBAAkB,KACrB54C,EAAGgsB,KAAOgtB,EACVh5C,EAAGoE,aAAe20C,EAClB/5C,OAAO2Q,eAAe3P,EAAI,MAAO64C,GAE7B74C,EAAGm4C,mBACLn4C,EAAGm4C,wBAeLe,GAAqB,SAA4Bx+C,EAAK4E,EAAK65C,EAAUC,QACxD,IAAXA,IACFA,GAAS,GAGX,IAAI3sC,EAAM,SAAa7M,GACrB,OAAOZ,OAAO2Q,eAAejV,EAAK4E,EAAK,CACrCM,MAAOA,EACPo4C,YAAY,EACZqB,UAAU,KAIV3uC,EAAU,CACZutC,cAAc,EACdD,YAAY,EACZrrC,IAAK,WACH,IAAI/M,EAAQu5C,IAEZ,OADA1sC,EAAI7M,GACGA,IAQX,OAJIw5C,IACF1uC,EAAQ+B,IAAMA,GAGTzN,OAAO2Q,eAAejV,EAAK4E,EAAKoL,IAUrC4uC,GAAqB,SAAU5mB,GAajC,SAAS4mB,EAAM5uC,EAAS2K,GACtB,IAAI/D,EAEJA,EAAQohB,EAAM5yB,KAAKqM,KAAMzB,EAAS2K,IAAUlJ,KAC5C,IAAIxM,EAAS+K,EAAQ/K,OACjB45C,GAAoB,EAkBxB,GAbI55C,IAAW2R,EAAMsC,IAAIqlC,aAAet5C,EAAO6f,KAAO9U,EAAQpE,KAAyC,IAAlCoE,EAAQpE,IAAIkzC,mBAC/EloC,EAAM8hB,UAAUzzB,GAEhB2R,EAAMmoC,gBAAgBnoC,EAAMsC,KAI1BlJ,EAAQgvC,iBACVpoC,EAAMqoC,0BAGRroC,EAAMsoC,cAAe,EAEjBtoC,EAAMsC,IAAIimC,gBAAiB,CAK7B,IAJA,IAAIC,EAAQxoC,EAAMsC,IAAI8jC,WAClBqC,EAAcD,EAAM99C,OACpBg+C,EAAc,GAEXD,KAAe,CACpB,IAAIhwC,EAAO+vC,EAAMC,GAGA,UAFFhwC,EAAKzB,SAASC,gBAGtB+I,EAAM4c,0BAQT5c,EAAMyf,qBAAqBpL,iBAAiB5b,GAE5CuH,EAAM8e,mBAAmBvM,SAAS9Z,EAAK8U,OAEvCvN,EAAMmO,aAAaoE,SAAS9Z,EAAK8U,OAE5B06B,GAAsBjoC,EAAMsC,IAAIqP,aAAa,iBAAkBsF,GAAcxe,EAAKyV,OACrF+5B,GAAoB,IAVtBS,EAAY78C,KAAK4M,IAgBvB,IAAK,IAAIhO,EAAI,EAAGA,EAAIi+C,EAAYh+C,OAAQD,IACtCuV,EAAMsC,IAAIhK,YAAYowC,EAAYj+C,IA2BtC,OAvBAuV,EAAM2oC,qBAEF3oC,EAAM4c,0BAA4BqrB,GACpCp9C,EAAM2B,KAAK,0IAIbwT,EAAM4oC,2CAMDn4C,IAAiBO,IAAajB,MAAyD,IAAnCqJ,EAAQ4jB,wBAC/Dhd,EAAM6oC,aAAY,GAKpB7oC,EAAM8oC,yBAEN9oC,EAAM+H,eAEC/H,EA9FT,IAAegoC,EAAO5mB,GAqGtB,IAAIlmB,EAAS8sC,EAAMx+C,UA61BnB,OA31BA0R,EAAOiK,QAAU,WACXtK,KAAKyH,KAAOzH,KAAKyH,IAAIglC,iBACvBzsC,KAAKyH,IAAIglC,kBAGXU,EAAMe,oBAAoBluC,KAAKyH,KAC/BzH,KAAKuJ,SAAW,KAEhBgd,EAAM53B,UAAU2b,QAAQ3W,KAAKqM,OAQ/BK,EAAOmtC,wBAA0B,WAC/BhB,GAAexsC,OAYjBK,EAAO0tC,wCAA0C,WAC/C,IACII,EADA76B,EAAatT,KAAKsT,aAGlB86B,EAA4B,WAC9BD,EAAmC,GAEnC,IAAK,IAAIv+C,EAAI,EAAGA,EAAI0jB,EAAWzjB,OAAQD,IAAK,CAC1C,IAAI8iB,EAAQY,EAAW1jB,GAEJ,aAAf8iB,EAAMyG,MACRg1B,EAAiCn9C,KAAK,CACpC0hB,MAAOA,EACP27B,WAAY37B,EAAM2L,SAQ1B+vB,IACA96B,EAAWhU,iBAAiB,SAAU8uC,GACtCpuC,KAAKiD,GAAG,WAAW,WACjB,OAAOqQ,EAAWlU,oBAAoB,SAAUgvC,MAGlD,IAAIE,EAAmB,SAASA,IAC9B,IAAK,IAAI1+C,EAAI,EAAGA,EAAIu+C,EAAiCt+C,OAAQD,IAAK,CAChE,IAAI2+C,EAAcJ,EAAiCv+C,GAEpB,aAA3B2+C,EAAY77B,MAAM2L,MAAuBkwB,EAAY77B,MAAM2L,OAASkwB,EAAYF,aAClFE,EAAY77B,MAAM2L,KAAOkwB,EAAYF,YAKzC/6B,EAAWlU,oBAAoB,SAAUkvC,IAK3CtuC,KAAKiD,GAAG,yBAAyB,WAC/BqQ,EAAWlU,oBAAoB,SAAUgvC,GAEzC96B,EAAWlU,oBAAoB,SAAUkvC,GACzCh7B,EAAWhU,iBAAiB,SAAUgvC,MAGxCtuC,KAAKiD,GAAG,uBAAuB,WAE7BqQ,EAAWlU,oBAAoB,SAAUgvC,GACzC96B,EAAWhU,iBAAiB,SAAU8uC,GAEtC96B,EAAWlU,oBAAoB,SAAUkvC,OAc7CjuC,EAAOmuC,gBAAkB,SAAyBx/C,EAAMy/C,GACtD,IAAI7nC,EAAS5G,KAGb,GAAIyuC,IAAazuC,KAAK,iBAAmBhR,EAAO,UAAhD,CAIA,IAAI0/C,EAAgB1/C,EAAKoN,cAErB4D,KAAK0uC,EAAgB,qBACvB77C,OAAOC,KAAKkN,KAAK0uC,EAAgB,qBAAqBx7C,SAAQ,SAAUy7C,GACvD/nC,EAAO/S,KAAK66C,EAAgB,UAElCtvC,oBAAoBuvC,EAAW/nC,EAAO8nC,EAAgB,oBAAoBC,OAIvF3uC,KAAK,iBAAmBhR,EAAO,WAAay/C,EAC5CzuC,KAAK0uC,EAAgB,oBAAsB,KAC3C1uC,KAAK4uC,0BAA0BF,KAUjCruC,EAAOklB,0BAA4B,SAAmCkpB,GACpEzuC,KAAKwuC,gBAAgB,QAASC,IAUhCpuC,EAAOmlB,0BAA4B,SAAmCipB,GACpEzuC,KAAKwuC,gBAAgB,QAASC,IAWhCpuC,EAAOuuC,0BAA4B,SAAmC1+C,GACpE,IAAI8W,EAAShH,KAETyb,EAAQyE,GAAOhwB,GACf2+C,EAAW7uC,KAAKnM,KAAK4nB,EAAM+E,YAC3BsuB,EAAa9uC,KAAKyb,EAAM+E,cAE5B,GAAKxgB,KAAK,iBAAmByb,EAAM6E,YAAc,WAAcuuB,GAAaA,EAASvvC,iBAArF,CAIA,IAAIyvC,EAAY,CACd/2B,OAAQ,SAAgB/jB,GACtB,IAAI8H,EAAQ,CACV/M,KAAM,SACNqE,OAAQy7C,EACRE,cAAeF,EACfltC,WAAYktC,GAEdA,EAAWhrC,QAAQ/H,GAQN,SAAT7L,GACF8W,EAAO0Z,GAAOC,WAAWH,cAAc1c,QAAQ/H,IAGnDkc,SAAU,SAAkBhkB,GAC1B66C,EAAWp3B,SAASzjB,EAAEye,QAExBwF,YAAa,SAAqBjkB,GAChC66C,EAAWl3B,YAAY3jB,EAAEye,SAIzBu8B,EAAkB,WAGpB,IAFA,IAAIC,EAAe,GAEVt/C,EAAI,EAAGA,EAAIk/C,EAAWj/C,OAAQD,IAAK,CAG1C,IAFA,IAAIu/C,GAAQ,EAEHhkB,EAAI,EAAGA,EAAI0jB,EAASh/C,OAAQs7B,IACnC,GAAI0jB,EAAS1jB,KAAO2jB,EAAWl/C,GAAI,CACjCu/C,GAAQ,EACR,MAICA,GACHD,EAAal+C,KAAK89C,EAAWl/C,IAIjC,KAAOs/C,EAAar/C,QAClBi/C,EAAWl3B,YAAYs3B,EAAa5oC,UAIxCtG,KAAKyb,EAAM+E,WAAa,cAAgBuuB,EACxCl8C,OAAOC,KAAKi8C,GAAW77C,SAAQ,SAAUy7C,GACvC,IAAIxoC,EAAW4oC,EAAUJ,GACzBE,EAASvvC,iBAAiBqvC,EAAWxoC,GAErCa,EAAO/D,GAAG,WAAW,SAAUhP,GAC7B,OAAO46C,EAASzvC,oBAAoBuvC,EAAWxoC,SAInDnG,KAAKiD,GAAG,YAAagsC,GACrBjvC,KAAKiD,GAAG,WAAW,SAAUhP,GAC3B,OAAO+S,EAAOvV,IAAI,YAAaw9C,QAWnC5uC,EAAOytC,mBAAqB,WAC1B,IAAI99B,EAAShQ,KAEbkgB,GAAOzU,MAAMvY,SAAQ,SAAUhD,GAC7B8f,EAAO4+B,0BAA0B1+C,OAWrCmQ,EAAO7I,SAAW,WAChB,IAAI3D,EAAKmM,KAAKuJ,SAASpP,IAKvB,IAAKtG,IAAQmM,KAAKuJ,SAAS6lC,iBAAkBpvC,KAAKqvC,wBAA0B,CAE1E,GAAIx7C,EAAI,CACN,IAAIy7C,EAAQz7C,EAAGs3C,WAAU,GAErBt3C,EAAGkH,YACLlH,EAAGkH,WAAWrC,aAAa42C,EAAOz7C,GAGpCs5C,EAAMe,oBAAoBr6C,GAC1BA,EAAKy7C,MACA,CACLz7C,EAAK,IAASgE,cAAc,SAE5B,IACIF,EAAa6Q,GAAe,GADZxI,KAAKuJ,SAASpP,KAAOD,GAAc8F,KAAKuJ,SAASpP,MAGhEvE,KAA0D,IAAzCoK,KAAKuJ,SAAS4Y,+BAC3BxqB,EAAWyd,SAGpBrb,GAAclG,EAAIT,EAAOuE,EAAY,CACnC8R,GAAIzJ,KAAKuJ,SAASgmC,OAClB,MAAS,cAIb17C,EAAG27C,SAAWxvC,KAAKuJ,SAASimC,SAGO,qBAA1BxvC,KAAKuJ,SAASkmC,SACvBx3C,GAAapE,EAAI,UAAWmM,KAAKuJ,SAASkmC,cAGEv0C,IAA1C8E,KAAKuJ,SAAS2b,0BAChBrxB,EAAGqxB,wBAA0BllB,KAAKuJ,SAAS2b,yBAQ7C,IAFA,IAAIwqB,EAAgB,CAAC,OAAQ,QAAS,cAAe,YAE5C9/C,EAAI,EAAGA,EAAI8/C,EAAc7/C,OAAQD,IAAK,CAC7C,IAAI+/C,EAAOD,EAAc9/C,GACrB6D,EAAQuM,KAAKuJ,SAASomC,GAEL,qBAAVl8C,IACLA,EACFwE,GAAapE,EAAI87C,EAAMA,GAEvB11C,GAAgBpG,EAAI87C,GAGtB97C,EAAG87C,GAAQl8C,GAIf,OAAOI,GAiBTwM,EAAOitC,gBAAkB,SAAyBz5C,GAChD,GAAwB,IAApBA,EAAG+7C,cAA0C,IAApB/7C,EAAG+7C,aAAhC,CAMA,GAAsB,IAAlB/7C,EAAGwL,WAAkB,CAWvB,IAAIwwC,GAAiB,EAEjBC,EAAoB,WACtBD,GAAiB,GAGnB7vC,KAAKiD,GAAG,YAAa6sC,GAErB,IAAIC,EAAmB,WAGhBF,GACH7vC,KAAK8D,QAAQ,cAcjB,OAVA9D,KAAKiD,GAAG,iBAAkB8sC,QAC1B/vC,KAAKkJ,OAAM,WACTlJ,KAAKvO,IAAI,YAAaq+C,GACtB9vC,KAAKvO,IAAI,iBAAkBs+C,GAEtBF,GAEH7vC,KAAK8D,QAAQ,gBAUnB,IAAIksC,EAAkB,CAAC,aAEvBA,EAAgBh/C,KAAK,kBAEjB6C,EAAGwL,YAAc,GACnB2wC,EAAgBh/C,KAAK,cAInB6C,EAAGwL,YAAc,GACnB2wC,EAAgBh/C,KAAK,WAInB6C,EAAGwL,YAAc,GACnB2wC,EAAgBh/C,KAAK,kBAIvBgP,KAAKkJ,OAAM,WACT8mC,EAAgB98C,SAAQ,SAAUlE,GAChCgR,KAAK8D,QAAQ9U,KACZgR,WAcPK,EAAOkjB,aAAe,SAAsB0sB,GAC1CjwC,KAAKytC,aAAewC,GAWtB5vC,EAAOmjB,UAAY,WACjB,OAAOxjB,KAAKytC,cAUdptC,EAAOojB,eAAiB,SAAwBuO,GAC9C,IACMhyB,KAAKytC,cAAgBztC,KAAKyH,IAAIyoC,UAAY75C,GAC5C2J,KAAKyH,IAAIyoC,SAASle,GAElBhyB,KAAKyH,IAAIuX,YAAcgT,EAEzB,MAAO/9B,GACPjE,EAAMiE,EAAG,oCAWboM,EAAOyR,SAAW,WAChB,IAAI3B,EAASnQ,KAMb,GAAIA,KAAKyH,IAAIqK,WAAawgB,KAAYx9B,IAAcO,IAAsC,IAAzB2K,KAAKyH,IAAIuX,YAAmB,CAe3F,OADAhf,KAAKiD,GAAG,cAXY,SAASktC,IACvBhgC,EAAO1I,IAAIuX,YAAc,IAEvB7O,EAAO1I,IAAIqK,WAAawgB,KAC1BniB,EAAOrM,QAAQ,kBAGjBqM,EAAO1e,IAAI,aAAc0+C,OAKtBC,IAGT,OAAOpwC,KAAKyH,IAAIqK,UAAYs+B,KAU9B/vC,EAAOjF,MAAQ,WACb,OAAO4E,KAAKyH,IAAIhM,aAUlB4E,EAAOlF,OAAS,WACd,OAAO6E,KAAKyH,IAAI/L,cAclB2E,EAAO4tC,uBAAyB,WAC9B,IAAIlqB,EAAS/jB,KAEb,GAAM,+BAAgCA,KAAKyH,IAA3C,CAIA,IAAI4oC,EAAQ,WACVrwC,KAAK8D,QAAQ,mBAAoB,CAC/B02B,cAAc,IAGZx6B,KAAKyH,IAAI2N,WAAapV,KAAKuJ,SAAS4Y,wBAA0BniB,KAAKoV,aACrEpV,KAAKyH,IAAI2N,UAAW,IAIpBk7B,EAAU,WACR,2BAA4BtwC,KAAKyH,KAA2C,uBAApCzH,KAAKyH,IAAI8oC,yBACnDvwC,KAAKmE,IAAI,sBAAuBksC,GAChCrwC,KAAK8D,QAAQ,mBAAoB,CAC/B02B,cAAc,EAEdgW,qBAAqB,MAK3BxwC,KAAKiD,GAAG,wBAAyBqtC,GACjCtwC,KAAKiD,GAAG,WAAW,WACjB8gB,EAAOtyB,IAAI,wBAAyB6+C,GAEpCvsB,EAAOtyB,IAAI,sBAAuB4+C,QAYtChwC,EAAOowC,mBAAqB,WAC1B,GAA8C,oBAAnCzwC,KAAKyH,IAAIipC,sBAAsC,CACxD,IAAIp8C,EAAY,IAASD,WAAa,IAASA,UAAUC,WAAa,GAEtE,GAAI,UAAUnD,KAAKmD,KAAe,uBAAuBnD,KAAKmD,GAC5D,OAAO,EAIX,OAAO,GAOT+L,EAAOswC,gBAAkB,WACvB,IAAIpwB,EAAQvgB,KAAKyH,IAEjB,GAAI8Y,EAAMvL,QAAUuL,EAAMqvB,cAAgBrvB,EAAMqwB,cAG9Cp+B,GAAexS,KAAKyH,IAAI0B,QAGxBnJ,KAAKd,YAAW,WACdqhB,EAAMrL,QAEN,IACEqL,EAAMmwB,wBACN,MAAOz8C,GACP+L,KAAK8D,QAAQ,kBAAmB7P,MAEjC,QAEH,IACEssB,EAAMmwB,wBACN,MAAOz8C,GACP+L,KAAK8D,QAAQ,kBAAmB7P,KAStCoM,EAAOwwC,eAAiB,WACjB7wC,KAAKyH,IAAIqpC,2BAKd9wC,KAAKyH,IAAIspC,uBAJP/wC,KAAK8D,QAAQ,kBAAmB,IAAI/R,MAAM,iCAkB9CsO,EAAOykB,wBAA0B,WAC/B,OAAO9kB,KAAKyH,IAAIqd,2BAiBlBzkB,EAAOgT,IAAM,SAAagW,GACxB,QAAanuB,IAATmuB,EACF,OAAOrpB,KAAKyH,IAAI4L,IAIlBrT,KAAK6sB,OAAOxD,IAQdhpB,EAAO8iB,MAAQ,WACbgqB,EAAM6D,kBAAkBhxC,KAAKyH,MAY/BpH,EAAOysC,WAAa,WAClB,OAAI9sC,KAAKmnB,eACAnnB,KAAKmnB,eAAe9T,IAGtBrT,KAAKyH,IAAIqlC,YAUlBzsC,EAAO2tC,YAAc,SAAqBh2C,GACxCgI,KAAKyH,IAAI2N,WAAapd,GAmBxBqI,EAAOikB,aAAe,SAAsBnL,EAAM1E,EAAO5J,GACvD,OAAK7K,KAAK+hB,yBAIH/hB,KAAKyH,IAAI6c,aAAanL,EAAM1E,EAAO5J,GAHjC0b,EAAM53B,UAAU21B,aAAa3wB,KAAKqM,KAAMmZ,EAAM1E,EAAO5J,IAmChExK,EAAOmkB,sBAAwB,SAA+BjmB,GAC5D,IAAKyB,KAAK+hB,yBACR,OAAOwE,EAAM53B,UAAU61B,sBAAsB7wB,KAAKqM,KAAMzB,GAG1D,IAAIomB,EAAmB,IAAS9sB,cAAc,SA0B9C,OAxBI0G,EAAQ4a,OACVwL,EAAiBxL,KAAO5a,EAAQ4a,MAG9B5a,EAAQkW,QACVkQ,EAAiBlQ,MAAQlW,EAAQkW,QAG/BlW,EAAQsM,UAAYtM,EAAQ6f,WAC9BuG,EAAiBvG,QAAU7f,EAAQsM,UAAYtM,EAAQ6f,SAGrD7f,EAAiB,UACnBomB,EAA0B,QAAIpmB,EAAiB,SAG7CA,EAAQkL,KACVkb,EAAiBlb,GAAKlL,EAAQkL,IAG5BlL,EAAQ8U,MACVsR,EAAiBtR,IAAM9U,EAAQ8U,KAG1BsR,GAgBTtkB,EAAOmT,mBAAqB,SAA4BjV,EAASkmB,GAC/D,IAAIE,EAAmB4B,EAAM53B,UAAU6kB,mBAAmB7f,KAAKqM,KAAMzB,EAASkmB,GAM9E,OAJIzkB,KAAK+hB,0BACP/hB,KAAKnM,KAAK8E,YAAYgsB,GAGjBA,GAUTtkB,EAAO4iB,sBAAwB,SAA+BvQ,GAG5D,GAFA6T,EAAM53B,UAAUs0B,sBAAsBtvB,KAAKqM,KAAM0S,GAE7C1S,KAAK+hB,yBAIP,IAHA,IAAIvK,EAASxX,KAAK7B,GAAG,SACjBvO,EAAI4nB,EAAO3nB,OAERD,KACD8iB,IAAU8E,EAAO5nB,IAAM8iB,IAAU8E,EAAO5nB,GAAG8iB,OAC7C1S,KAAKnM,KAAK4J,YAAY+Z,EAAO5nB,KAgBrCyQ,EAAOwkB,wBAA0B,WAC/B,GAAiD,oBAAtC7kB,KAAKnM,KAAKgxB,wBACnB,OAAO7kB,KAAKnM,KAAKgxB,0BAGnB,IAAIosB,EAAuB,GAa3B,MAXiD,qBAAtCjxC,KAAKnM,KAAKq9C,yBAAwF,qBAAtClxC,KAAKnM,KAAKs9C,0BAC/EF,EAAqBG,mBAAqBpxC,KAAKnM,KAAKq9C,wBACpDD,EAAqBI,iBAAmBrxC,KAAKnM,KAAKs9C,yBAGhD,IAAShxC,aAAmD,oBAA7B,IAASA,YAAYrS,IACtDmjD,EAAqBK,aAAe,IAASnxC,YAAYrS,MAChD,IAASqS,aAAe,IAASA,YAAYoxC,QAAiE,kBAAhD,IAASpxC,YAAYoxC,OAAOC,kBACnGP,EAAqBK,aAAe,IAASzjD,KAAKC,MAAQ,IAASqS,YAAYoxC,OAAOC,iBAGjFP,GAGF9D,EAn8BgB,CAo8BvB1gC,IAYFsgC,GAAmBI,GAAO,YAAY,WACpC,GAAKr3C,KAAL,CAIA,IAAIyqB,EAAQ,IAAS1oB,cAAc,SAC/B6a,EAAQ,IAAS7a,cAAc,SAKnC,OAJA6a,EAAMyG,KAAO,WACbzG,EAAM0L,QAAU,KAChB1L,EAAM+B,MAAQ,UACd8L,EAAM5nB,YAAY+Z,GACX6N,MAUT4sB,GAAM7hB,YAAc,WAElB,IACE6hB,GAAMsE,SAASlpB,OAAS,GACxB,MAAOt0B,GACP,OAAO,EAGT,SAAUk5C,GAAMsE,WAAYtE,GAAMsE,SAAShsB,cAW7C0nB,GAAM1nB,YAAc,SAAUz2B,GAC5B,OAAOm+C,GAAMsE,SAAShsB,YAAYz2B,IAapCm+C,GAAMznB,cAAgB,SAAUC,EAAQpnB,GACtC,OAAO4uC,GAAM1nB,YAAYE,EAAO32B,OAalCm+C,GAAMuE,iBAAmB,WAEvB,IACE,IAAInpB,EAAS4kB,GAAMsE,SAASlpB,OAC5B4kB,GAAMsE,SAASlpB,OAASA,EAAS,EAAI,GACrC,IAAIopB,EAAappB,IAAW4kB,GAAMsE,SAASlpB,OAM3C,OAAIopB,GAAcv7C,IAChB,IAAS8I,YAAW,WACdiuC,IAASA,GAAMx+C,YACjBw+C,GAAMx+C,UAAUs3B,sBAAwBsC,IAAW4kB,GAAMsE,SAASlpB,YAI/D,GAGFopB,EACP,MAAO19C,GACP,OAAO,IAcXk5C,GAAMyE,cAAgB,WACpB,IACE,IAAIvpB,EAAQ8kB,GAAMsE,SAASppB,MAW3B,OARA8kB,GAAMsE,SAASppB,OAASA,EAEpB8kB,GAAMsE,SAASppB,MACjBpwB,GAAak1C,GAAMsE,SAAU,QAAS,SAEtCx3C,GAAgBkzC,GAAMsE,SAAU,SAG3BppB,IAAU8kB,GAAMsE,SAASppB,MAChC,MAAOp0B,GACP,OAAO,IAYXk5C,GAAM0E,uBAAyB,WAG7B,GAAI/8C,IAAcO,IAAaC,GAAiB,GAC9C,OAAO,EAIT,IACE,IAAI4tC,EAAeiK,GAAMsE,SAASvO,aAElC,OADAiK,GAAMsE,SAASvO,aAAeA,EAAe,EAAI,GAC1CA,IAAiBiK,GAAMsE,SAASvO,aACvC,MAAOjvC,GACP,OAAO,IAaXk5C,GAAM2E,sBAAwB,WAG5B,IACE,IAAIC,EAAO,aAEXl/C,OAAO2Q,eAAe,IAAS3L,cAAc,SAAU,MAAO,CAC5D2I,IAAKuxC,EACLzxC,IAAKyxC,IAEPl/C,OAAO2Q,eAAe,IAAS3L,cAAc,SAAU,MAAO,CAC5D2I,IAAKuxC,EACLzxC,IAAKyxC,IAEPl/C,OAAO2Q,eAAe,IAAS3L,cAAc,SAAU,YAAa,CAClE2I,IAAKuxC,EACLzxC,IAAKyxC,IAEPl/C,OAAO2Q,eAAe,IAAS3L,cAAc,SAAU,YAAa,CAClE2I,IAAKuxC,EACLzxC,IAAKyxC,IAEP,MAAO99C,GACP,OAAO,EAGT,OAAO,GAWTk5C,GAAM6E,yBAA2B,WAC/B,OAAO37C,IAAiBD,IAAUf,IAWpC83C,GAAM8E,0BAA4B,WAChC,SAAU9E,GAAMsE,WAAYtE,GAAMsE,SAASS,cAW7C/E,GAAMgF,0BAA4B,WAChC,SAAUhF,GAAMsE,WAAYtE,GAAMsE,SAAS5O,cAU7CsK,GAAM5oC,OAAS,CAAC,YAAa,UAAW,QAAS,QAAS,UAAW,UAAW,iBAAkB,aAAc,UAAW,iBAAkB,UAAW,UAAW,UAAW,SAAU,QAAS,iBAAkB,aAAc,WAAY,OAAQ,QAAS,aAAc,SAAU,gBAqDtR,CAAC,CAAC,sBAAuB,iBAAkB,CAAC,uBAAwB,0BAA2B,CAAC,oBAAqB,yBAA0B,CAAC,2BAA4B,4BAA6B,CAAC,4BAA6B,6BAA8B,CAAC,4BAA6B,8BAA8BrR,SAAQ,SAAUkd,GACjV,IAAIjd,EAAMid,EAAK,GACXnhB,EAAKmhB,EAAK,GACd28B,GAAmBI,GAAMx+C,UAAWwE,GAAK,WACvC,OAAOg6C,GAAMl+C,QACZ,MAELk+C,GAAMx+C,UAAUs3B,sBAAwBknB,GAAMuE,mBAU9CvE,GAAMx+C,UAAU0gD,yBAA2Bj5C,GAW3C+2C,GAAMx+C,UAAUw3B,0BAA2B,EAS3CgnB,GAAMx+C,UAAU8yB,wBAAyB,EAQzC0rB,GAAMx+C,UAAUgzB,0BAA2B,EAI3CwrB,GAAMiF,iBAAmB,WAGnBr9C,IAAmB,IAAQI,KAAeE,KAC5CowB,GAAc0nB,GAAMsE,UAAYtE,GAAMsE,SAAS/iD,YAAYC,UAAU82B,YAErE0nB,GAAMsE,SAAS/iD,YAAYC,UAAU82B,YAAc,SAAUz2B,GAG3D,OAAIA,GAFY,4CAEMmC,KAAKnC,GAClB,QAGFy2B,GAAY9xB,KAAKqM,KAAMhR,MAKpCm+C,GAAMkF,mBAAqB,WACzB,IAAIC,EAAInF,GAAMsE,SAAS/iD,YAAYC,UAAU82B,YAM7C,OAJIA,KACF0nB,GAAMsE,SAAS/iD,YAAYC,UAAU82B,YAAcA,IAG9C6sB,GAITnF,GAAMiF,mBAENjF,GAAMe,oBAAsB,SAAUr6C,GACpC,GAAKA,EAAL,CASA,IALIA,EAAGkH,YACLlH,EAAGkH,WAAW0C,YAAY5J,GAIrBA,EAAG65C,iBACR75C,EAAG4J,YAAY5J,EAAG4E,YAKpB5E,EAAGoG,gBAAgB,OAGI,oBAAZpG,EAAGgsB,MAEZ,WACE,IACEhsB,EAAGgsB,OACH,MAAO5rB,KAHX,KASJk5C,GAAM6D,kBAAoB,SAAUn9C,GAClC,GAAKA,EAAL,CAOA,IAHA,IAAIP,EAAUO,EAAG8iB,iBAAiB,UAC9B/mB,EAAI0D,EAAQzD,OAETD,KACLiE,EAAG4J,YAAYnK,EAAQ1D,IAKzBiE,EAAGoG,gBAAgB,OAEI,oBAAZpG,EAAGgsB,MAEZ,WACE,IACEhsB,EAAGgsB,OACH,MAAO5rB,KAHX,KAcJ,CAaA,QAeA,eAaA,WAaA,WAgBA,OAcA,eAAef,SAAQ,SAAUY,GAC/Bq5C,GAAMx+C,UAAUmF,GAAQ,WACtB,OAAOkM,KAAKyH,IAAI3T,IAASkM,KAAKyH,IAAIqP,aAAahjB,OAOnD,CAYA,QAYA,eAYA,WAeA,OAaA,eAAeZ,SAAQ,SAAUY,GAC/Bq5C,GAAMx+C,UAAU,MAAQ4Z,GAAczU,IAAS,SAAUmxC,GACvDjlC,KAAKyH,IAAI3T,GAAQmxC,EAEbA,EACFjlC,KAAKyH,IAAIxP,aAAanE,EAAMA,GAE5BkM,KAAKyH,IAAIxN,gBAAgBnG,OAS/B,CAWA,SAWA,cAYA,WAYA,SAYA,SAkBA,UAaA,QAaA,UAYA,WAaA,QAcA,eAiBA,sBAYA,0BAYA,SAgBA,eAkBA,aAYA,aAYA,cAaA,eAAeZ,SAAQ,SAAUY,GAC/Bq5C,GAAMx+C,UAAUmF,GAAQ,WACtB,OAAOkM,KAAKyH,IAAI3T,OAQpB,CAYA,SAWA,MAYA,SAkBA,UAcA,eAiBA,sBAWA,0BAaA,eAAeZ,SAAQ,SAAUY,GAC/Bq5C,GAAMx+C,UAAU,MAAQ4Z,GAAczU,IAAS,SAAUmxC,GACvDjlC,KAAKyH,IAAI3T,GAAQmxC,MAMrB,CAQA,QAQA,OAQA,QAAQ/xC,SAAQ,SAAUY,GACxBq5C,GAAMx+C,UAAUmF,GAAQ,WACtB,OAAOkM,KAAKyH,IAAI3T,SAGpB2Y,GAAK6Z,mBAAmB6mB,IAWxBA,GAAMjmB,oBAAsB,GAW5BimB,GAAMjmB,oBAAoBzB,YAAc,SAAUz2B,GAEhD,IACE,OAAOm+C,GAAMsE,SAAShsB,YAAYz2B,GAClC,MAAOiF,GACP,MAAO,KAiBXk5C,GAAMjmB,oBAAoBL,gBAAkB,SAAUrzB,EAAQ+K,GAE5D,GAAI/K,EAAOxE,KACT,OAAOm+C,GAAMjmB,oBAAoBzB,YAAYjyB,EAAOxE,MAC/C,GAAIwE,EAAO6f,IAAK,CACrB,IAAIuX,EAAM3O,GAAiBzoB,EAAO6f,KAClC,OAAO85B,GAAMjmB,oBAAoBzB,YAAY,SAAWmF,GAG1D,MAAO,IAgBTuiB,GAAMjmB,oBAAoBE,aAAe,SAAU5zB,EAAQwf,EAAMzU,GAC/DyU,EAAK6Z,OAAOr5B,EAAO6f,MAOrB85B,GAAMjmB,oBAAoB5c,QAAU,aAGpC6iC,GAAM3mB,sBAAsB2mB,GAAMjmB,qBAClCza,GAAKmZ,aAAa,QAASunB,IAE3B,IAAIoF,GAAwB,CAgB5B,WAgBA,QAgBA,UAgBA,UAgBA,UAgBA,iBAgBA,aAgBA,aAgBA,SAgBA,eAgBA,mBAIIC,GAAoB,CACtBC,QAAS,UACTC,eAAgB,iBAChBC,QAAS,UACTC,OAAQ,UAENC,GAAmB,CAAC,OAAQ,SAAU,QAAS,SAAU,QAAS,SAAU,QAC5EC,GAAqB,GAQzBD,GAAiB3/C,SAAQ,SAAU+H,GACjC,IAAIgqC,EAAoB,MAAhBhqC,EAAE83C,OAAO,GAAa,KAAO93C,EAAE+3C,UAAU,GAAK/3C,EACtD63C,GAAmB73C,GAAK,cAAgBgqC,KAE1C,IAAIgO,GAAsB,CACxBC,KAAM,IACNC,OAAQ,IACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,KACPC,OAAQ,KACRC,KAAMlhB,KAaJzhB,GAAsB,SAAU8C,GAgBlC,SAAS9C,EAAO1W,EAAKoE,EAAS2K,GAC5B,IAAI/D,EAqBJ,GAlBAhL,EAAIsP,GAAKtP,EAAIsP,IAAMlL,EAAQkL,IAAM,aAAe3J,MAMhDvB,EAAUnL,EAAOyd,EAAO4iC,eAAet5C,GAAMoE,IAGrC4L,cAAe,EAEvB5L,EAAQ/G,UAAW,EAEnB+G,EAAQ+I,SAAU,EAGlB/I,EAAQ6L,qBAAsB,GAEzB7L,EAAQsM,SACX,GAA2B,oBAAhB1Q,EAAIu5C,QAAwB,CACrC,IAAIA,EAAUv5C,EAAIu5C,QAAQ,UAEtBA,GAAWA,EAAQn5C,eACrBgE,EAAQsM,SAAW6oC,EAAQn5C,aAAa,cAK1C,IAFA,IAAI1B,EAAUsB,EAEPtB,GAAgC,IAArBA,EAAQ/B,UAAgB,CACxC,GAAIoD,GAAcrB,GAAS/G,eAAe,QAAS,CACjDyM,EAAQsM,SAAWhS,EAAQ0B,aAAa,QACxC,MAGF1B,EAAUA,EAAQkC,WAyExB,IAnEAoK,EAAQwO,EAAWhgB,KAAKqM,KAAM,KAAMzB,EAAS2K,IAAUlJ,MAEjD2zC,+BAAiC,SAAU1/C,GAC/C,OAAOkR,EAAMyuC,0BAA0B3/C,IAGzCkR,EAAM0uC,yBAA2B,SAAU5/C,GACzC,OAAOkR,EAAM2uC,mBAAmB7/C,IAGlCkR,EAAM4uC,oBAAsB,SAAU9/C,GACpC,OAAOkR,EAAM6uC,eAAe//C,IAG9BkR,EAAM8uC,oBAAsB,SAAUhgD,GACpC,OAAOkR,EAAM+uC,eAAejgD,IAG9BkR,EAAMgvC,8BAAgC,SAAUlgD,GAC9C,OAAOkR,EAAMivC,yBAAyBngD,IAGxCkR,EAAMkvC,sBAAwB,SAAUpgD,GACtC,OAAOkR,EAAMmvC,iBAAiBrgD,IAGhCkR,EAAMovC,4BAA8B,SAAUtgD,GAC5C,OAAOkR,EAAMqvC,uBAAuBvgD,IAGtCkR,EAAMsvC,2BAA6B,SAAUxgD,GAC3C,OAAOkR,EAAMuvC,sBAAsBzgD,IAGrCkR,EAAMwvC,0BAA4B,SAAU1gD,GAC1C,OAAOkR,EAAMyvC,qBAAqB3gD,IAGpCkR,EAAM0vC,yBAA2B,SAAU5gD,GACzC,OAAOkR,EAAM2vC,oBAAoB7gD,IAGnCkR,EAAM4vC,oBAAsB,SAAU9gD,GACpC,OAAOkR,EAAM6vC,eAAe/gD,IAI9BkR,EAAM8vC,eAAgB,EAEtB9vC,EAAM9U,IAAMiB,EAAa6T,EAAMqE,KAE/BrE,EAAMm1B,OAAS9qC,EAEf2V,EAAM+vC,mBAAoB,EAG1B/vC,EAAMgwC,iBAAmB,GAEzBhwC,EAAM8H,UAAW,EAEjB9H,EAAMqc,aAAc,EAEpBrc,EAAMiwC,aAAc,EAEpBjwC,EAAMkwC,eAAgB,GAGjBlwC,EAAMoE,WAAapE,EAAMoE,SAAS6hB,YAAcjmB,EAAMoE,SAAS6hB,UAAUv7B,OAC5E,MAAM,IAAIkC,MAAM,2HAWlB,GAPAoT,EAAMhL,IAAMA,EAEZgL,EAAMmwC,cAAgBn7C,GAAOD,GAAcC,GAE3CgL,EAAM0F,SAAS1F,EAAMoE,SAASsB,UAG1BtM,EAAQuM,UAAW,CAErB,IAAIyqC,EAAmB,GACvB1iD,OAAOiF,oBAAoByG,EAAQuM,WAAW5X,SAAQ,SAAUhD,GAC9DqlD,EAAiBrlD,EAAKkM,eAAiBmC,EAAQuM,UAAU5a,MAE3DiV,EAAMqwC,WAAaD,OAEnBpwC,EAAMqwC,WAAa3kC,EAAOliB,UAAU4a,SAASuB,UAG/C3F,EAAMswC,cAGNtwC,EAAMuwC,QAAUn3C,EAAQquB,QAAU,GAElCznB,EAAMwwC,YAAcp3C,EAAQ6W,SAI5Bjb,EAAIib,UAAW,EACfjb,EAAIF,gBAAgB,YACpBkL,EAAMywC,cAAe,EACrBzwC,EAAM0wC,eAAiB,GACvB1wC,EAAM2wC,qBAAuB,GAEzB37C,EAAI2c,aAAa,YACnB3R,EAAM4wC,UAAS,GAIf5wC,EAAM4wC,SAAS5wC,EAAMoE,SAASwsC,UAI5Bx3C,EAAQy3C,SACVnjD,OAAOC,KAAKyL,EAAQy3C,SAAS9iD,SAAQ,SAAUhD,GAC7C,GAA2B,oBAAhBiV,EAAMjV,GACf,MAAM,IAAI6B,MAAM,WAAc7B,EAAO,uBAY3CiV,EAAM8wC,YAAa,EACnB9wC,EAAMsC,IAAMtC,EAAM3N,WAElB8P,GAAQ,IAAuBnC,GAAQ,CACrCoC,YAAa,QAMXpC,EAAMm1B,OAAOI,oBACfz3B,GAAG,IAAUkC,EAAMm1B,OAAO4b,iBAAkB/wC,EAAMwuC,gCAElDxuC,EAAMlC,GAAGkC,EAAMm1B,OAAO4b,iBAAkB/wC,EAAMwuC,iCAG5CxuC,EAAMgxC,QACRhxC,EAAMlC,GAAG,CAAC,cAAe,UAAWkC,EAAM4uC,qBAO5C,IAAIqC,EAAoB5tC,GAAerD,EAAMoE,UAEzChL,EAAQy3C,SACVnjD,OAAOC,KAAKyL,EAAQy3C,SAAS9iD,SAAQ,SAAUhD,GAC7CiV,EAAMjV,GAAMqO,EAAQy3C,QAAQ9lD,OAK5BqO,EAAQ7M,OACVyT,EAAMzT,OAAM,GAGdyT,EAAMoE,SAASsD,cAAgBupC,EAC/BjxC,EAAMkxC,YAAc,GAEpBlxC,EAAMu+B,cAAcnlC,EAAQmlC,eAE5Bv+B,EAAMgF,eAGNhF,EAAMyrB,QAAuC,UAA/Bz2B,EAAIgC,SAASC,eAIvB+I,EAAMiQ,WACRjQ,EAAMjM,SAAS,wBAEfiM,EAAMjM,SAAS,yBAIjBiM,EAAMsC,IAAIxP,aAAa,OAAQ,UAE3BkN,EAAMyrB,UACRzrB,EAAMsC,IAAIxP,aAAa,aAAckN,EAAMsF,SAAS,iBAEpDtF,EAAMsC,IAAIxP,aAAa,aAAckN,EAAMsF,SAAS,iBAGlDtF,EAAMyrB,WACRzrB,EAAMjM,SAAS,aAGbiM,EAAMmxC,qBACRnxC,EAAMjM,SAAS,eAObtD,IACFuP,EAAMjM,SAAS,qBAIZ9C,IACH+O,EAAMjM,SAAS,oBAIjB2X,EAAOC,QAAQ3L,EAAMqE,KAAO,IAAuBrE,GAEnD,IAAIoxC,EAAe1nD,EAAU2K,MAAM,KAAK,GA8BxC,OA5BA2L,EAAMjM,SAAS,QAAUq9C,GAIzBpxC,EAAMqxC,YAAW,GAEjBrxC,EAAMgK,qBAENhK,EAAMhB,IAAI,QAAQ,SAAUlQ,GAC1B,OAAOkR,EAAMsxC,uBAAuBxiD,MAGtCkR,EAAMlC,GAAG,cAAc,SAAUhP,GAC/B,OAAOkR,EAAMuxC,kBAAkBziD,MAGjCkR,EAAMlC,GAAG,WAAW,SAAUhP,GAC5B,OAAOkR,EAAMoJ,cAActa,MAG7BkR,EAAMlC,GAAG,kBAAkB,SAAUhP,GACnC,OAAOkR,EAAMuE,qBAAqBzV,MAGpCkR,EAAMwxC,YAAYxxC,EAAMoE,SAASotC,aAEjCxxC,EAAMyxC,WAAWzxC,EAAMoE,SAASqtC,YAEzBzxC,EAlTT,IAAe0L,EAAQ8C,GA8TvB,IAAItT,EAASwQ,EAAOliB,UA45IpB,OA15IA0R,EAAOiK,QAAU,WACf,IAAI1D,EAAS5G,KASbA,KAAK8D,QAAQ,WAEb9D,KAAKvO,IAAI,WAETA,GAAI,IAAUuO,KAAKs6B,OAAO4b,iBAAkBl2C,KAAK2zC,gCACjDliD,GAAI,IAAU,UAAWuO,KAAK6zC,0BAE1B7zC,KAAK62C,UAAY72C,KAAK62C,SAAS97C,aACjCiF,KAAK62C,SAAS97C,WAAW0C,YAAYuC,KAAK62C,UAC1C72C,KAAK62C,SAAW,MAIlBhmC,EAAOC,QAAQ9Q,KAAKwJ,KAAO,KAEvBxJ,KAAK7F,KAAO6F,KAAK7F,IAAI4E,SACvBiB,KAAK7F,IAAI4E,OAAS,MAGhBiB,KAAKyH,KAAOzH,KAAKyH,IAAI1I,SACvBiB,KAAKyH,IAAI1I,OAAS,MAGhBiB,KAAK4d,QACP5d,KAAK4d,MAAMtT,UACXtK,KAAKk1C,mBAAoB,EACzBl1C,KAAK01C,QAAU,IAGb11C,KAAK82C,kBACP92C,KAAK82C,gBAAkB,MAGrB92C,KAAK7F,MACP6F,KAAK7F,IAAM,MAtlYjB,SAA6B4E,GAC3BuoB,GAAoBvoB,EAAO0K,MAAQ,KAwlYjCstC,CAAoB/2C,MAIpB6gB,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAEZmoB,EAAOzR,EAAO6U,EAAM+E,cAIpBnI,GAAQA,EAAK5mB,KACf4mB,EAAK5mB,SAITkiB,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAUpCK,EAAO7I,SAAW,WAChB,IACI3D,EADAsG,EAAM6F,KAAK7F,IAEXi1C,EAAiBpvC,KAAK82C,gBAAkB38C,EAAIY,YAAcZ,EAAIY,WAAW+b,cAAgB3c,EAAIY,WAAW+b,aAAa,mBACrHkgC,EAA8C,aAAnCh3C,KAAK7F,IAAI1C,QAAQ2E,cAE5BgzC,EACFv7C,EAAKmM,KAAKyH,IAAMtN,EAAIY,WACVi8C,IACVnjD,EAAKmM,KAAKyH,IAAMkM,EAAWhlB,UAAU6I,SAAS7D,KAAKqM,KAAM,QAK3D,IAAI3F,EAAQH,GAAcC,GAE1B,GAAI68C,EAAU,CAIZ,IAHAnjD,EAAKmM,KAAKyH,IAAMtN,EAChBA,EAAM6F,KAAK7F,IAAM,IAAStC,cAAc,SAEjChE,EAAGwX,SAASxb,QACjBsK,EAAIxB,YAAY9E,EAAG4E,YAGhBG,GAAS/E,EAAI,aAChBqF,GAASrF,EAAI,YAGfA,EAAG8E,YAAYwB,GACfi1C,EAAiBpvC,KAAK82C,gBAAkBjjD,EAKxChB,OAAOC,KAAKe,GAAIX,SAAQ,SAAU+H,GAChC,IACEd,EAAIc,GAAKpH,EAAGoH,GACZ,MAAOhH,QAuDb,GAjDAkG,EAAIlC,aAAa,WAAY,MAC7BoC,EAAM48C,SAAW,MAMb1hD,IAAcF,IAAaM,MAC7BwE,EAAIlC,aAAa,OAAQ,eACzBoC,EAAMga,KAAO,eAIfla,EAAIF,gBAAgB,SACpBE,EAAIF,gBAAgB,UAEhB,UAAWI,UACNA,EAAMe,MAGX,WAAYf,UACPA,EAAMc,OAGftI,OAAOiF,oBAAoBuC,GAAOnH,SAAQ,SAAUy8C,GAI5CqH,GAAqB,UAATrH,GAChB97C,EAAGoE,aAAa03C,EAAMt1C,EAAMs1C,IAG1BqH,GACF78C,EAAIlC,aAAa03C,EAAMt1C,EAAMs1C,OAMjCx1C,EAAIq1C,SAAWr1C,EAAIsP,GACnBtP,EAAIsP,IAAM,aACVtP,EAAIlB,UAAY,WAEhBkB,EAAI4E,OAASlL,EAAGkL,OAASiB,KAEzBA,KAAK9G,SAAS,eAI4B,IAAtC,IAASg+C,yBAAmC,CAC9Cl3C,KAAK62C,SAAWr3C,GAAmB,yBACnC,IAAI23C,EAAkBj5C,GAAE,wBACpBk5C,EAAOl5C,GAAE,QACbk5C,EAAK1+C,aAAasH,KAAK62C,SAAUM,EAAkBA,EAAgBphC,YAAcqhC,EAAK3+C,YAGxFuH,KAAKq3C,OAAQ,EACbr3C,KAAKm2C,QAAS,EAEdn2C,KAAK5E,MAAM4E,KAAKuJ,SAASnO,OACzB4E,KAAK7E,OAAO6E,KAAKuJ,SAASpO,QAC1B6E,KAAK8U,KAAK9U,KAAKuJ,SAASuL,MACxB9U,KAAKs3C,MAAMt3C,KAAKuJ,SAAS+tC,OACzBt3C,KAAKu3C,YAAYv3C,KAAKuJ,SAASguC,aAE/Bv3C,KAAKyd,YAAYzd,KAAKuJ,SAASkU,aAAezd,KAAKuJ,SAASiuC,aAK5D,IAFA,IAAIC,EAAQt9C,EAAIsE,qBAAqB,KAE5B7O,EAAI,EAAGA,EAAI6nD,EAAM5nD,OAAQD,IAAK,CACrC,IAAI8nD,EAASD,EAAMv7C,KAAKtM,GACxBsJ,GAASw+C,EAAQ,cACjBA,EAAOz/C,aAAa,SAAU,UAuBhC,OAlBAkC,EAAIkzC,kBAAoBlzC,EAAIy1C,aAExBz1C,EAAIY,aAAeq0C,GACrBj1C,EAAIY,WAAWrC,aAAa7E,EAAIsG,GAQlC5B,GAAU4B,EAAKtG,GACfmM,KAAK2J,UAAU7Y,QAAQqJ,GAGvB6F,KAAKyH,IAAIxP,aAAa,OAAQ+H,KAAK2iC,WACnC3iC,KAAKyH,IAAIxP,aAAa,YAAa,MACnC+H,KAAKyH,IAAM5T,EACJA,GAmBTwM,EAAOod,YAAc,SAAqBhqB,GACxC,IAAKA,EACH,OAAOuM,KAAK23C,SAAS,eAGT,cAAVlkD,GAAmC,oBAAVA,EAK7BuM,KAAK43C,UAAU,iBAAkBnkD,GAJ/BzD,EAAM2B,KAAK,gEAAuE8B,EAAQ,MAmB9F4M,EAAOjF,MAAQ,SAAe3H,GAC5B,OAAOuM,KAAK0N,UAAU,QAASja,IAcjC4M,EAAOlF,OAAS,SAAgB1H,GAC9B,OAAOuM,KAAK0N,UAAU,SAAUja,IAkBlC4M,EAAOqN,UAAY,SAAmBmqC,EAAYpkD,GAChD,IAAIqkD,EAAgBD,EAAa,IAEjC,QAAc38C,IAAVzH,EACF,OAAOuM,KAAK83C,IAAkB,EAGhC,GAAc,KAAVrkD,GAA0B,SAAVA,EAIlB,OAFAuM,KAAK83C,QAAiB58C,OACtB8E,KAAKg0C,iBAIP,IAAI+D,EAAYrjD,WAAWjB,GAEvBwa,MAAM8pC,GACR/nD,EAAM4B,MAAM,mBAAsB6B,EAAQ,sBAAyBokD,IAIrE73C,KAAK83C,GAAiBC,EACtB/3C,KAAKg0C,mBAkBP3zC,EAAOi3C,MAAQ,SAAe3hB,GAC5B,IAx4mBiDtiC,EAAQ8N,EAw4mBrD6F,EAAShH,KAEb,QAAa9E,IAATy6B,EACF,QAAS31B,KAAKm2C,OAGhBn2C,KAAKm2C,SAAWxgB,EAEZhwB,GAAU3F,OACZA,KAAKvO,IAAI,CAAC,cAAe,UAAWuO,KAAK+zC,qBAGvCpe,GACF31B,KAAK9G,SAAS,aACd8G,KAAK8U,MAAK,GAt5mB6C3T,EAu5mB9B,WACvB6F,EAAO/D,GAAG,CAAC,cAAe,UAAW+D,EAAO+sC,sBAv5mB9CpuC,GAD+CtS,EAu5mB5B2M,MAr5mBrBmB,KAEK9N,EAAOmU,mBACVnU,EAAOmU,iBAAmB,IAG5BnU,EAAOmU,iBAAiBxW,KAAKmQ,KAm5mB3BnB,KAAK3G,YAAY,aAGnB2G,KAAKg0C,kBAkBP3zC,EAAOyU,KAAO,SAAc6gB,GAC1B,QAAaz6B,IAATy6B,EACF,QAAS31B,KAAKq3C,MAGhBr3C,KAAKq3C,QAAU1hB,EAEXA,GACF31B,KAAK9G,SAAS,YACd8G,KAAKs3C,OAAM,IAEXt3C,KAAK3G,YAAY,aAyBrBgH,EAAOk3C,YAAc,SAAqBS,GACxC,QAAc98C,IAAV88C,EACF,OAAOh4C,KAAKi4C,aAId,IAAK,aAAa9mD,KAAK6mD,GACrB,MAAM,IAAIjmD,MAAM,kGAGlBiO,KAAKi4C,aAAeD,EAGpBh4C,KAAKs3C,OAAM,GACXt3C,KAAKg0C,kBAUP3zC,EAAO2zC,eAAiB,WACtB,IAA0C,IAAtC,IAASkD,yBAAb,CAoBA,IAAI97C,EACAD,EAEA+8C,EAcAC,QAZsBj9C,IAAtB8E,KAAKi4C,cAAoD,SAAtBj4C,KAAKi4C,aAE5Bj4C,KAAKi4C,aACVj4C,KAAKo4C,aAAe,EAEfp4C,KAAKo4C,aAAe,IAAMp4C,KAAKq4C,cAG/B,QAIa7+C,MAAM,KAC/B8+C,EAAkBH,EAAW,GAAKA,EAAW,GAI/C/8C,OAFkBF,IAAhB8E,KAAKu4C,OAECv4C,KAAKu4C,YACar9C,IAAjB8E,KAAKw4C,QAENx4C,KAAKw4C,QAAUF,EAGft4C,KAAKo4C,cAAgB,IAK7Bj9C,OAFmBD,IAAjB8E,KAAKw4C,QAEEx4C,KAAKw4C,QAGLp9C,EAAQk9C,EAKjBJ,EADE,aAAa/mD,KAAK6O,KAAKyJ,MACf,cAAgBzJ,KAAKyJ,KAErBzJ,KAAKyJ,KAAO,cAIxBzJ,KAAK9G,SAASg/C,GACdx4C,GAAeM,KAAK62C,SAAU,YAAcqB,EAAU,sBAAwB98C,EAAQ,wBAA0BD,EAAS,0BAA4B+8C,EAAU,sCAA0D,IAAlBI,EAAwB,yBApE/N,CACE,IAAIG,EAAgC,kBAAhBz4C,KAAKu4C,OAAsBv4C,KAAKu4C,OAASv4C,KAAKuJ,SAASnO,MAEvEs9C,EAAkC,kBAAjB14C,KAAKw4C,QAAuBx4C,KAAKw4C,QAAUx4C,KAAKuJ,SAASpO,OAE1Ew9C,EAAS34C,KAAK4d,OAAS5d,KAAK4d,MAAM/pB,KAElC8kD,IACEF,GAAU,IACZE,EAAOv9C,MAAQq9C,GAGbC,GAAW,IACbC,EAAOx9C,OAASu9C,MAuExBr4C,EAAOkrB,UAAY,SAAmBF,EAAU73B,GAC9C,IAAIwc,EAAShQ,KAGTA,KAAK4d,OACP5d,KAAK44C,cAGP,IAAIC,EAAgBtwC,GAAc8iB,GAC9BytB,EAAgBztB,EAAS0nB,OAAO,GAAG32C,cAAgBivB,EAAS/7B,MAAM,GAEhD,UAAlBupD,GAA6B74C,KAAK7F,MACpCsS,GAAKsZ,QAAQ,SAASmoB,oBAAoBluC,KAAK7F,KAC/C6F,KAAK7F,IAAI4E,OAAS,KAClBiB,KAAK7F,IAAM,MAGb6F,KAAK+4C,UAAYF,EAEjB74C,KAAKiN,UAAW,EAChB,IAAI8oC,EAAW/1C,KAAK+1C,YAGW,kBAApB/1C,KAAK+1C,aAA+C,IAApB/1C,KAAK+1C,YAAuB/1C,KAAKuJ,SAASyvC,qBACnFjD,GAAW,GAIb,IAAIkD,EAAc,CAChBzlD,OAAQA,EACRuiD,SAAUA,EACV,uBAA0B/1C,KAAKuJ,SAAS4Y,uBACxC,SAAYniB,KAAKyJ,KACjB,OAAUzJ,KAAKyJ,KAAO,IAAMqvC,EAAgB,OAC5C,YAAe94C,KAAKuJ,SAAS8b,YAC7B,QAAWrlB,KAAKuJ,SAASkmC,QACzB,KAAQzvC,KAAKuJ,SAAS2vC,KACtB,wBAA2Bl5C,KAAKuJ,SAAS2b,wBACzC,MAASllB,KAAKuJ,SAAS8e,MACvB,OAAUroB,KAAK4sB,SACf,SAAY5sB,KAAK6K,WACjB,eAAkB7K,KAAK82C,kBAAmB,EAC1C,SAAU92C,KAAKuJ,SAAS,UACxB,oBAAuBvJ,KAAKuJ,SAAS4vC,sBACrC,gBAAmBn5C,KAAKuJ,SAASgkC,gBACjC,QAAWvtC,KAAKuJ,SAASyb,SAE3BnE,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAChB+oD,EAAYx9B,EAAM+E,YAAcxQ,EAAOyL,EAAMgF,gBAE/CrtB,EAAO6lD,EAAaj5C,KAAKuJ,SAASsvC,IAClCzlD,EAAO6lD,EAAaj5C,KAAKuJ,SAASuvC,IAClC1lD,EAAO6lD,EAAaj5C,KAAKuJ,SAAS8hB,EAASjvB,gBAEvC4D,KAAK7F,MACP8+C,EAAY9+C,IAAM6F,KAAK7F,KAGrB3G,GAAUA,EAAO6f,MAAQrT,KAAK4uB,OAAOvb,KAAOrT,KAAK4uB,OAAO5P,YAAc,IACxEi6B,EAAYpmC,UAAY7S,KAAK4uB,OAAO5P,aAItC,IAAIo6B,EAAY3sC,GAAKsZ,QAAQsF,GAE7B,IAAK+tB,EACH,MAAM,IAAIrnD,MAAM,kBAAoB8mD,EAAgB,cAAgBA,EAAgB,wDAGtF74C,KAAK4d,MAAQ,IAAIw7B,EAAUH,GAE3Bj5C,KAAK4d,MAAM1U,MAAMzE,GAAKzE,KAAMA,KAAKq5C,mBAAmB,GACpDtmC,GAAoC/S,KAAKs5C,iBAAmB,GAAIt5C,KAAK4d,OAErE20B,GAAsBr/C,SAAQ,SAAU6I,GACtCiU,EAAO/M,GAAG+M,EAAO4N,MAAO7hB,GAAO,SAAU9H,GACvC,OAAO+b,EAAO,aAAezH,GAAcxM,GAAS,KAAK9H,SAG7DpB,OAAOC,KAAK0/C,IAAmBt/C,SAAQ,SAAU6I,GAC/CiU,EAAO/M,GAAG+M,EAAO4N,MAAO7hB,GAAO,SAAUw9C,GACH,IAAhCvpC,EAAO4N,MAAMslB,gBAAwBlzB,EAAO4N,MAAM47B,UACpDxpC,EAAOmlC,iBAAiBnkD,KAAK,CAC3BmQ,SAAU6O,EAAO,aAAewiC,GAAkBz2C,GAAS,KAAK0I,KAAKuL,GACrEjU,MAAOw9C,IAMXvpC,EAAO,aAAewiC,GAAkBz2C,GAAS,KAAKw9C,SAG1Dv5C,KAAKiD,GAAGjD,KAAK4d,MAAO,aAAa,SAAU3pB,GACzC,OAAO+b,EAAOypC,qBAAqBxlD,MAErC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,aAAa,SAAU3pB,GACzC,OAAO+b,EAAO0pC,qBAAqBzlD,MAErC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,WAAW,SAAU3pB,GACvC,OAAO+b,EAAO2pC,mBAAmB1lD,MAEnC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,SAAS,SAAU3pB,GACrC,OAAO+b,EAAO4pC,iBAAiB3lD,MAEjC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,WAAW,SAAU3pB,GACvC,OAAO+b,EAAO6pC,mBAAmB5lD,MAEnC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,QAAQ,SAAU3pB,GACpC,OAAO+b,EAAO8pC,gBAAgB7lD,MAEhC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,aAAa,SAAU3pB,GACzC,OAAO+b,EAAO+pC,qBAAqB9lD,MAErC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,SAAS,SAAU3pB,GACrC,OAAO+b,EAAOgqC,iBAAiB/lD,MAEjC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,kBAAkB,SAAU3pB,GAC9C,OAAO+b,EAAOiqC,0BAA0BhmD,MAE1C+L,KAAKiD,GAAGjD,KAAK4d,MAAO,oBAAoB,SAAU3pB,EAAGmM,GACnD,OAAO4P,EAAOkqC,4BAA4BjmD,EAAGmM,MAE/CJ,KAAKiD,GAAGjD,KAAK4d,MAAO,mBAAmB,SAAU3pB,EAAG4pB,GAClD,OAAO7N,EAAOmqC,2BAA2BlmD,EAAG4pB,MAE9C7d,KAAKiD,GAAGjD,KAAK4d,MAAO,yBAAyB,SAAU3pB,GACrD,OAAO+b,EAAOoqC,iCAAiCnmD,MAEjD+L,KAAKiD,GAAGjD,KAAK4d,MAAO,yBAAyB,SAAU3pB,GACrD,OAAO+b,EAAOqqC,iCAAiCpmD,MAEjD+L,KAAKiD,GAAGjD,KAAK4d,MAAO,SAAS,SAAU3pB,GACrC,OAAO+b,EAAOsqC,iBAAiBrmD,MAEjC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,gBAAgB,SAAU3pB,GAC5C,OAAO+b,EAAOuqC,wBAAwBtmD,MAExC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,YAAY,SAAU3pB,GACxC,OAAO+b,EAAOwqC,oBAAoBvmD,MAEpC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,cAAc,SAAU3pB,GAC1C,OAAO+b,EAAOyqC,sBAAsBxmD,MAEtC+L,KAAKiD,GAAGjD,KAAK4d,MAAO,iBAAkB5d,KAAK+zC,qBAC3C/zC,KAAK06C,oBAAoB16C,KAAK23C,SAAS,aAEnC33C,KAAKoV,aAAepV,KAAK06C,uBAC3B16C,KAAK26C,4BAKH36C,KAAK4d,MAAM/pB,KAAKkH,aAAeiF,KAAKnM,MAA2B,UAAlBglD,GAA8B74C,KAAK7F,KAClF5B,GAAUyH,KAAK4d,MAAM/pB,KAAMmM,KAAKnM,MAI9BmM,KAAK7F,MACP6F,KAAK7F,IAAI4E,OAAS,KAClBiB,KAAK7F,IAAM,OAUfkG,EAAOu4C,YAAc,WACnB,IAAIzoC,EAASnQ,KAGb6gB,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAChBigB,EAAOsL,EAAMgF,aAAetQ,EAAOsL,EAAM+E,iBAE3CxgB,KAAKs5C,gBAAkBvmC,GAAoC/S,KAAK4d,OAChE5d,KAAKiN,UAAW,EAChBjN,KAAK4d,MAAMtT,UACXtK,KAAK4d,OAAQ,EAET5d,KAAKk1C,oBACPl1C,KAAK01C,QAAU,GACf11C,KAAK8D,QAAQ,iBAGf9D,KAAKk1C,mBAAoB,GAe3B70C,EAAO2S,KAAO,SAAc4nC,GAK1B,YAJe1/C,IAAX0/C,GACF5qD,EAAM2B,KAAK,sJAGNqO,KAAK4d,OAyBdvd,EAAOs6C,0BAA4B,WAEjC36C,KAAK66C,+BACL76C,KAAKiD,GAAGjD,KAAK4d,MAAO,QAAS5d,KAAKq0C,uBAClCr0C,KAAKiD,GAAGjD,KAAK4d,MAAO,WAAY5d,KAAKu0C,6BAIrCv0C,KAAKiD,GAAGjD,KAAK4d,MAAO,aAAc5d,KAAKy0C,4BACvCz0C,KAAKiD,GAAGjD,KAAK4d,MAAO,YAAa5d,KAAK20C,2BACtC30C,KAAKiD,GAAGjD,KAAK4d,MAAO,WAAY5d,KAAK60C,0BAGrC70C,KAAKiD,GAAGjD,KAAK4d,MAAO,MAAO5d,KAAK+0C,sBAUlC10C,EAAOw6C,6BAA+B,WAGpC76C,KAAKvO,IAAIuO,KAAK4d,MAAO,MAAO5d,KAAK+0C,qBACjC/0C,KAAKvO,IAAIuO,KAAK4d,MAAO,aAAc5d,KAAKy0C,4BACxCz0C,KAAKvO,IAAIuO,KAAK4d,MAAO,YAAa5d,KAAK20C,2BACvC30C,KAAKvO,IAAIuO,KAAK4d,MAAO,WAAY5d,KAAK60C,0BACtC70C,KAAKvO,IAAIuO,KAAK4d,MAAO,QAAS5d,KAAKq0C,uBACnCr0C,KAAKvO,IAAIuO,KAAK4d,MAAO,WAAY5d,KAAKu0C,8BASxCl0C,EAAOg5C,iBAAmB,WACxBr5C,KAAKkN,eAEDlN,KAAK4uB,OAAOrG,QACdvoB,KAAK43C,UAAU,YAAa53C,KAAK4uB,OAAOrG,QAI1CvoB,KAAKu6C,0BAELv6C,KAAKi6C,6BAcP55C,EAAOo5C,qBAAuB,WAE5Bz5C,KAAK3G,YAAY,aACjB2G,KAAK3G,YAAY,eAEjB2G,KAAKpO,MAAM,MAEXoO,KAAKi6C,4BAIAj6C,KAAKgV,UAWRhV,KAAKuqC,YAAW,GAChBvqC,KAAK8D,QAAQ,eALb9D,KAAK8D,QAAQ,aACb9D,KAAK8D,QAAQ,cASf9D,KAAK86C,iBAAoC,IAApB96C,KAAK+1C,YAAuB/1C,KAAKuJ,SAASyvC,kBAAoB,OAASh5C,KAAK+1C,aAUnG11C,EAAOy6C,gBAAkB,SAAyB9rD,GAChD,IAAI+0B,EAAS/jB,KAEb,GAAKA,KAAK4d,OAAyB,kBAAT5uB,EAA1B,CAMA,IAwBI+rD,EAxBAC,EAAe,WACjB,IAAIC,EAAkBl3B,EAAOsE,QAE7BtE,EAAOsE,OAAM,GAEb,IAAI6yB,EAAe,WACjBn3B,EAAOsE,MAAM4yB,IAIfl3B,EAAO+xB,qBAAqB9kD,KAAKkqD,GAEjC,IAAIC,EAAep3B,EAAO5a,OAE1B,GAAKmJ,GAAU6oC,GAIf,OAAOA,EAAoB,OAAE,SAAUt9B,GAErC,MADAq9B,IACM,IAAInpD,MAAM,wDAA0D8rB,GAAY,SAmB1F,GAZa,QAAT7uB,GAAmBgR,KAAKqoB,QAS1B0yB,EAHkB,UAAT/rD,GAAqBgR,KAAKqoB,QAGzBroB,KAAKmJ,OAFL6xC,IAJN1oC,GAFJyoC,EAAU/6C,KAAKmJ,UAGb4xC,EAAUA,EAAe,MAAEC,IAQ1B1oC,GAAUyoC,GAIf,OAAOA,EAAQxoC,MAAK,WAClBwR,EAAOjgB,QAAQ,CACb9U,KAAM,mBACN+mD,SAAU/mD,OAEJ,OAAE,WACV+0B,EAAOjgB,QAAQ,CACb9U,KAAM,mBACN+mD,SAAU/mD,SAiBhBqR,EAAO+6C,oBAAsB,SAA6Bz1B,QACzC,IAAXA,IACFA,EAAS,IAGX,IAAItS,EAAMsS,EACN32B,EAAO,GAEQ,kBAARqkB,IACTA,EAAMsS,EAAOtS,IACbrkB,EAAO22B,EAAO32B,MAKhBgR,KAAK4uB,OAAOp7B,OAASwM,KAAK4uB,OAAOp7B,QAAU,GAC3CwM,KAAK4uB,OAAOt7B,QAAU0M,KAAK4uB,OAAOt7B,SAAW,GAEzC+f,IAAQrkB,IACVA,EA7zZa,SAAsB+P,EAAQsU,GAC/C,IAAKA,EACH,MAAO,GAIT,GAAItU,EAAO6vB,OAAOp7B,OAAO6f,MAAQA,GAAOtU,EAAO6vB,OAAOp7B,OAAOxE,KAC3D,OAAO+P,EAAO6vB,OAAOp7B,OAAOxE,KAI9B,IAAIqsD,EAAkBt8C,EAAO6vB,OAAOt7B,QAAQtB,QAAO,SAAUkgC,GAC3D,OAAOA,EAAE7e,MAAQA,KAGnB,GAAIgoC,EAAgBxrD,OAClB,OAAOwrD,EAAgB,GAAGrsD,KAM5B,IAFA,IAAIsE,EAAUyL,EAAOZ,GAAG,UAEfvO,EAAI,EAAGA,EAAI0D,EAAQzD,OAAQD,IAAK,CACvC,IAAIsiC,EAAI5+B,EAAQ1D,GAEhB,GAAIsiC,EAAEljC,MAAQkjC,EAAE7e,KAAO6e,EAAE7e,MAAQA,EAC/B,OAAO6e,EAAEljC,KAKb,OAAO27B,GAAYtX,GA8xZRioC,CAAat7C,KAAMqT,IAI5BrT,KAAK4uB,OAAOp7B,OAASgV,GAAe,GAAImd,EAAQ,CAC9CtS,IAAKA,EACLrkB,KAAMA,IASR,IAPA,IAAIqsD,EAAkBr7C,KAAK4uB,OAAOt7B,QAAQtB,QAAO,SAAUkgC,GACzD,OAAOA,EAAE7e,KAAO6e,EAAE7e,MAAQA,KAExBkoC,EAAkB,GAClBC,EAAYx7C,KAAK7B,GAAG,UACpBs9C,EAAoB,GAEf7rD,EAAI,EAAGA,EAAI4rD,EAAU3rD,OAAQD,IAAK,CACzC,IAAI8rD,EAAYxhD,GAAcshD,EAAU5rD,IACxC2rD,EAAgBvqD,KAAK0qD,GAEjBA,EAAUroC,KAAOqoC,EAAUroC,MAAQA,GACrCooC,EAAkBzqD,KAAK0qD,EAAUroC,KAMjCooC,EAAkB5rD,SAAWwrD,EAAgBxrD,OAC/CmQ,KAAK4uB,OAAOt7B,QAAUioD,EAEZF,EAAgBxrD,SAC1BmQ,KAAK4uB,OAAOt7B,QAAU,CAAC0M,KAAK4uB,OAAOp7B,SAIrCwM,KAAK4uB,OAAOvb,IAAMA,GAwCpBhT,EAAOq5C,qBAAuB,SAA8B39C,GAC1D,IAAI2oB,EAAS1kB,KAIb,IAAKA,KAAK41C,aAAc,CACtB,IAAI+F,EAAqB,SAA4BtoC,GACnD,OAAOqR,EAAO02B,oBAAoB/nC,IAGhCuoC,EAAY57C,KAAK67C,gBAAgBxoC,IACjCyoC,EAAW//C,EAAMsX,IAEjBuoC,IAAc,SAASzqD,KAAKyqD,IAAc,SAASzqD,KAAK2qD,MAGrD97C,KAAK+7C,aAAe/7C,KAAK+7C,YAAY/oC,OAAS8oC,GAAY97C,KAAK+7C,YAAYh9C,SAAW68C,KACzFD,EAAqB,cAMzBA,EAAmBG,GAId//C,EAAMsX,KACTrT,KAAK4d,MAAMvZ,IAAI,CAAC,YAAa,cAAc,SAAUpQ,GAInD,GAAe,cAAXA,EAAEjF,KAAN,CAIA,IAAIgtD,EAAUt3B,EAAOu3B,QAAQ,cAE7Bv3B,EAAOq3B,YAAY/oC,KAAOgpC,EAE1Bt3B,EAAO02B,oBAAoBY,OAKjCh8C,KAAK+7C,YAAc,CACjBh9C,OAAQiB,KAAK67C,gBAAgBxoC,IAC7BL,KAAMjX,EAAMsX,KAEdrT,KAAK8D,QAAQ,CACXuP,IAAKtX,EAAMsX,IACXrkB,KAAM,eAiBVqR,EAAOkqC,WAAa,SAAoB2R,GACtC,QAAgBhhD,IAAZghD,EAEF,OAAOl8C,KAAKwhB,YAGV06B,IAAYl8C,KAAKwhB,cAIrBxhB,KAAKwhB,YAAc06B,EAEfl8C,KAAKwhB,aACPxhB,KAAK9G,SAAS,mBACd8G,KAAK8D,QAAQ,cAEb9D,KAAK3G,YAAY,qBAarBgH,EAAOy5C,gBAAkB,WACvB95C,KAAK3G,YAAY,aACjB2G,KAAK3G,YAAY,cACjB2G,KAAK9G,SAAS,eAEd8G,KAAKuqC,YAAW,GAShBvqC,KAAK8D,QAAQ,SAefzD,EAAOo6C,sBAAwB,WACzBz6C,KAAK4d,MAAMslB,eAAiB,GAAsC,IAAjCljC,KAAK4uB,OAAOutB,mBAC/Cn8C,KAAKm1C,iBAAiBjiD,SAAQ,SAAUkpD,GACtC,OAAOA,EAAOj7C,SAASi7C,EAAOrgD,UAEhCiE,KAAKm1C,iBAAmB,IAG1Bn1C,KAAK4uB,OAAOutB,iBAAmBn8C,KAAK4d,MAAMslB,eAQ1CljC,KAAK8D,QAAQ,eAWfzD,EAAOs5C,mBAAqB,WAC1B,IAAI0C,EAASr8C,KAEbA,KAAK9G,SAAS,eAQd8G,KAAK8D,QAAQ,WAGb,IAAIw4C,EAAkBt8C,KAAKgf,cAU3Bhf,KAAKiD,GAAG,cARiB,SAASs5C,IAC5BD,IAAoBD,EAAOr9B,gBAC7Bq9B,EAAOhjD,YAAY,eAEnBgjD,EAAO5qD,IAAI,aAAc8qD,QAgB/Bl8C,EAAOm8C,mBAAqB,WAC1Bx8C,KAAK3G,YAAY,eAQjB2G,KAAK8D,QAAQ,YAWfzD,EAAOo8C,0BAA4B,WACjCz8C,KAAK3G,YAAY,eASjB2G,KAAK8D,QAAQ,mBAWfzD,EAAOq8C,mBAAqB,WAC1B18C,KAAK3G,YAAY,eAQjB2G,KAAK8D,QAAQ,YAWfzD,EAAOw5C,mBAAqB,WAC1B75C,KAAK9G,SAAS,eAQd8G,KAAK8D,QAAQ,YAWfzD,EAAOs8C,kBAAoB,WACzB38C,KAAK3G,YAAY,eACjB2G,KAAK3G,YAAY,aAQjB2G,KAAK8D,QAAQ,WAafzD,EAAO05C,qBAAuB,WAGxB/5C,KAAKuJ,SAASqzC,YAChB5sD,EAAM2B,KAAK,0EACXqO,KAAKgf,YAAYhf,KAAKuJ,SAASqzC,YAGjC58C,KAAK9G,SAAS,mBAWd8G,KAAK8D,QAAQ,cAWfzD,EAAO25C,iBAAmB,WACxBh6C,KAAK3G,YAAY,eACjB2G,KAAK9G,SAAS,cAQd8G,KAAK8D,QAAQ,UAWfzD,EAAOu5C,iBAAmB,WACxB55C,KAAK9G,SAAS,aACd8G,KAAK3G,YAAY,eAEb2G,KAAKuJ,SAAS2vC,MAChBl5C,KAAKgf,YAAY,GACjBhf,KAAKmJ,QACKnJ,KAAKgV,UACfhV,KAAKkV,QAUPlV,KAAK8D,QAAQ,UAUfzD,EAAO45C,0BAA4B,WACjCj6C,KAAK8R,SAAS9R,KAAK23C,SAAS,cAa9Bt3C,EAAOi0C,iBAAmB,SAA0Bv4C,GAG7CiE,KAAK21C,iBAIYz6C,IAAlB8E,KAAKuJ,eAAwDrO,IAA9B8E,KAAKuJ,SAASszC,kBAAiE3hD,IAApC8E,KAAKuJ,SAASszC,YAAYC,QAA2D,IAApC98C,KAAKuJ,SAASszC,YAAYC,aACjI5hD,IAAlB8E,KAAKuJ,eAAwDrO,IAA9B8E,KAAKuJ,SAASszC,aAAwE,oBAApC78C,KAAKuJ,SAASszC,YAAYC,MAC7G98C,KAAKuJ,SAASszC,YAAYC,MAAMnpD,KAAKqM,KAAMjE,GAClCiE,KAAKgV,SACdxC,GAAexS,KAAKmJ,QAEpBnJ,KAAKkV,WAeX7U,EAAOm0C,uBAAyB,SAAgCz4C,GACzDiE,KAAK21C,YAMSnlD,MAAM7B,UAAU+d,KAAK/Y,KAAKqM,KAAK7B,GAAG,wCAAwC,SAAUtK,GACrG,OAAOA,EAAGmF,SAAS+C,EAAM1I,iBAWH6H,IAAlB8E,KAAKuJ,eAAwDrO,IAA9B8E,KAAKuJ,SAASszC,kBAAuE3hD,IAA1C8E,KAAKuJ,SAASszC,YAAYE,cAAuE,IAA1C/8C,KAAKuJ,SAASszC,YAAYE,mBACvI7hD,IAAlB8E,KAAKuJ,eAAwDrO,IAA9B8E,KAAKuJ,SAASszC,aAA8E,oBAA1C78C,KAAKuJ,SAASszC,YAAYE,YAC7G/8C,KAAKuJ,SAASszC,YAAYE,YAAYppD,KAAKqM,KAAMjE,GACxCiE,KAAKw6B,eACdx6B,KAAKy6B,iBAELz6B,KAAK06B,uBAcbr6B,EAAO20C,eAAiB,WACtBh1C,KAAKw2C,YAAYx2C,KAAKw2C,eAUxBn2C,EAAOq0C,sBAAwB,WAC7B10C,KAAKg9C,cAAgBh9C,KAAKw2C,cAU5Bn2C,EAAOu0C,qBAAuB,WACxB50C,KAAKg9C,eACPh9C,KAAKmP,sBAeT9O,EAAOy0C,oBAAsB,SAA6B/4C,GAEpDA,EAAMkhD,YACRlhD,EAAM4F,kBAYVtB,EAAOq2C,kBAAoB,WACzB12C,KAAKmP,sBAOP9O,EAAO68C,uBAAyB,WAC1Bl9C,KAAKw6B,eACPx6B,KAAK9G,SAAS,kBAEd8G,KAAK3G,YAAY,mBAQrBgH,EAAOuzC,0BAA4B,SAAmC3/C,GACpE,IAAIkpD,EAAelpD,EAAEZ,OAAO0L,OAG5B,IAAIo+C,GAAgBA,IAAiBn9C,KAArC,CAIA,IAAInM,EAAKmM,KAAKnM,KACVupD,EAAO,IAASp9C,KAAKs6B,OAAO3+B,qBAAuB9H,GAElDupD,GAAQvpD,EAAGwpD,QACdD,EAAOvpD,EAAGwpD,QAAQ,IAAMr9C,KAAKs6B,OAAOgjB,aAC1BF,GAAQvpD,EAAG0pD,oBACrBH,EAAOvpD,EAAG0pD,kBAAkB,IAAMv9C,KAAKs6B,OAAOgjB,aAGhDt9C,KAAKw6B,aAAa4iB,KAiBpB/8C,EAAO65C,4BAA8B,SAAqCn+C,EAAOqE,GAC/E,IAAIo9C,EAASx9C,KAETI,IACEA,EAAKowC,sBACPxwC,KAAK9G,SAAS,qBACd8G,KAAK4d,MAAMzZ,IAAI,uBAAuB,WACpCq5C,EAAOnkD,YAAY,yBAIvB2G,KAAKw6B,aAAap6B,EAAKo6B,gBAI3Bn6B,EAAO85C,2BAA6B,SAAoCp+C,EAAO8hB,GAC7E7d,KAAK8D,QAAQ,kBAAmB+Z,IAOlCxd,EAAOo9C,6BAA+B,WAChCz9C,KAAKk6B,uBACPl6B,KAAK9G,SAAS,0BAEd8G,KAAK3G,YAAY,2BAcrBgH,EAAO+5C,iCAAmC,SAA0Cr+C,GAClFiE,KAAKk6B,sBAAqB,IAa5B75B,EAAOg6C,iCAAmC,SAA0Ct+C,GAClFiE,KAAKk6B,sBAAqB,IAU5B75B,EAAOi6C,iBAAmB,WACxB,IAAI1oD,EAAQoO,KAAK4d,MAAMhsB,QACvBoO,KAAKpO,MAAMA,IAWbyO,EAAOm6C,oBAAsB,WAC3B,IAAIp6C,EAAO,KAEP7S,UAAUsC,OAAS,IACrBuQ,EAAO7S,UAAU,IAUnByS,KAAK8D,QAAQ,WAAY1D,IAU3BC,EAAOgzB,SAAW,WAChB,OAAOrzB,KAAK4uB,QAYdvuB,EAAOo1C,YAAc,WACnBz1C,KAAK4uB,OAAS,CAKZ5P,YAAa,EACb0+B,SAAU,EACVC,kBAAmB39C,KAAKuJ,SAASo0C,kBACjC7rC,SAAUs+B,IACV7T,WAAY,EACZ4f,iBAAkBn8C,KAAK49C,sBACvBC,MAAO,KACPxqC,IAAK,GACL7f,OAAQ,GACRF,QAAS,GACTowC,cAAe,GACfnb,OAAQ,IAgBZloB,EAAOu3C,UAAY,SAAmBzgD,EAAQywB,GAE5C5nB,KAAKkJ,OAAM,WACT,GAAI/R,KAAUsxB,GACZ,OAp2bR,SAAad,EAAY3U,EAAM7b,EAAQywB,GACrC,OAAO5U,EAAK7b,GAAQwwB,EAAWjc,OAAOqc,GAAmB5wB,GAASywB,IAm2brDtnB,CAAIN,KAAKq2C,YAAar2C,KAAK4d,MAAOzmB,EAAQywB,GAC5C,GAAIzwB,KAAUyxB,GACnB,OAAOlB,GAAQ1nB,KAAKq2C,YAAar2C,KAAK4d,MAAOzmB,EAAQywB,GAGvD,IACM5nB,KAAK4d,OACP5d,KAAK4d,MAAMzmB,GAAQywB,GAErB,MAAO3zB,GAEP,MADAjE,EAAMiE,GACAA,MAEP,IAeLoM,EAAOs3C,SAAW,SAAkBxgD,GAClC,GAAK6I,KAAK4d,OAAU5d,KAAK4d,MAAM3Q,SAA/B,CAIA,GAAI9V,KAAUixB,GACZ,OA95bN,SAAaT,EAAY3U,EAAM7b,GAC7B,OAAOwwB,EAAWm2B,YAAY/1B,GAAmB5wB,GAAS6b,EAAK7b,MA65bpDqJ,CAAIR,KAAKq2C,YAAar2C,KAAK4d,MAAOzmB,GACpC,GAAIA,KAAUyxB,GACnB,OAAOlB,GAAQ1nB,KAAKq2C,YAAar2C,KAAK4d,MAAOzmB,GAO/C,IACE,OAAO6I,KAAK4d,MAAMzmB,KAClB,MAAOlD,GAEP,QAA2BiH,IAAvB8E,KAAK4d,MAAMzmB,GAEb,MADAnH,EAAM,aAAemH,EAAS,2BAA6B6I,KAAK+4C,UAAY,wBAAyB9kD,GAC/FA,EAIR,GAAe,cAAXA,EAAE/D,KAGJ,MAFAF,EAAM,aAAemH,EAAS,mBAAqB6I,KAAK+4C,UAAY,gCAAiC9kD,GACrG+L,KAAK4d,MAAM3Q,UAAW,EAChBhZ,EAKR,MADAjE,EAAMiE,GACAA,KAeVoM,EAAO8I,KAAO,WACZ,IAAI40C,EAAU/9C,KAEV+kB,EAAe/kB,KAAKuJ,SAASyb,SAAW,IAASA,QAErD,OAAID,EACK,IAAIA,GAAa,SAAUi5B,GAChCD,EAAQE,MAAMD,MAIXh+C,KAAKi+C,SAad59C,EAAO49C,MAAQ,SAAe98C,GAC5B,IAAI+8C,EAAUl+C,UAEG,IAAbmB,IACFA,EAAWqR,IAGbxS,KAAK61C,eAAe7kD,KAAKmQ,GACzB,IAAIg9C,EAAatoD,SAASmK,KAAK41C,eAAiB51C,KAAKqT,OAASrT,KAAK8sC,eASnE,GAPI9sC,KAAKo+C,cACPp+C,KAAKvO,IAAI,CAAC,QAAS,aAAcuO,KAAKo+C,aACtCp+C,KAAKo+C,YAAc,OAKhBp+C,KAAKiN,WAAakxC,EAYrB,OAXAn+C,KAAKo+C,YAAc,SAAUnqD,GAC3BiqD,EAAQD,SAGVj+C,KAAKmE,IAAI,CAAC,QAAS,aAAcnE,KAAKo+C,kBAGjCD,IAAe9nD,KAAiBD,IACnC4J,KAAK6f,QAOT,IAAI7nB,EAAMgI,KAAK23C,SAAS,QAEZ,OAAR3/C,EACFgI,KAAKq+C,0BAELr+C,KAAKs+C,kBAAkBtmD,IAU3BqI,EAAOg+C,wBAA0B,WAC/B,IAAIE,EAAQv+C,KAAK81C,qBAAqBxmD,MAAM,GAC5C0Q,KAAK81C,qBAAuB,GAC5ByI,EAAMrrD,SAAQ,SAAUsrD,GACtBA,QAcJn+C,EAAOi+C,kBAAoB,SAA2BtmD,GACpD,IAAIymD,EAAYz+C,KAAK61C,eAAevmD,MAAM,GAC1C0Q,KAAK61C,eAAiB,GAEtB71C,KAAK81C,qBAAuB,GAC5B2I,EAAUvrD,SAAQ,SAAUm+B,GAC1BA,EAAGr5B,OAWPqI,EAAO6U,MAAQ,WACblV,KAAK43C,UAAU,UAWjBv3C,EAAO2U,OAAS,WAEd,OAAmC,IAA5BhV,KAAK23C,SAAS,WAYvBt3C,EAAOijB,OAAS,WACd,OAAOtjB,KAAK23C,SAAS,WAAahmC,GAAiB,EAAG,IAexDtR,EAAOmjB,UAAY,SAAmBysB,GACpC,GAA2B,qBAAhBA,EACT,OAAOjwC,KAAKi2C,WAGdj2C,KAAKi2C,aAAehG,EACpBjwC,KAAK43C,UAAU,eAAgB53C,KAAKi2C,YAEhChG,EACFjwC,KAAK9G,SAAS,iBAEd8G,KAAK3G,YAAY,kBAcrBgH,EAAO2e,YAAc,SAAqBgT,GACxC,MAAuB,qBAAZA,GACLA,EAAU,IACZA,EAAU,GAGPhyB,KAAKiN,WAAYjN,KAAK41C,cAAiB51C,KAAK4d,OAAU5d,KAAK4d,MAAM3Q,UAOtEjN,KAAK43C,UAAU,iBAAkB5lB,QACjChyB,KAAK4uB,OAAO8uB,SAAW,KAPrB19C,KAAK4uB,OAAO8uB,SAAW1rB,EACvBhyB,KAAKvO,IAAI,UAAWuO,KAAKi0C,0BACzBj0C,KAAKmE,IAAI,UAAWnE,KAAKi0C,wBAe7Bj0C,KAAK4uB,OAAO5P,YAAchf,KAAK23C,SAAS,gBAAkB,EACnD33C,KAAK4uB,OAAO5P,cASrB3e,EAAO6zC,eAAiB,WACtBl0C,KAAKgf,YAAYhf,KAAK4uB,OAAO8uB,WAoB/Br9C,EAAOyR,SAAW,SAAkBkgB,GAClC,QAAgB92B,IAAZ82B,EAEF,YAAgC92B,IAAzB8E,KAAK4uB,OAAO9c,SAAyB9R,KAAK4uB,OAAO9c,SAAWs+B,KAGrEpe,EAAUt9B,WAAWs9B,IAEP,IACZA,EAAUM,KAGRN,IAAYhyB,KAAK4uB,OAAO9c,WAG1B9R,KAAK4uB,OAAO9c,SAAWkgB,EAEnBA,IAAYM,IACdtyB,KAAK9G,SAAS,YAEd8G,KAAK3G,YAAY,YAGd4U,MAAM+jB,IAQThyB,KAAK8D,QAAQ,oBAanBzD,EAAOuzB,cAAgB,WACrB,OAAO5zB,KAAK8R,WAAa9R,KAAKgf,eAWhC3e,EAAOszB,qBAAuB,WAC5B,OAAOv2B,KAAK8C,MAAMF,KAAK8R,YAAc1U,KAAK8C,MAAMF,KAAKgf,gBAgBvD3e,EAAOwR,SAAW,WAChB,IAAIA,EAAW7R,KAAK23C,SAAS,YAM7B,OAJK9lC,GAAaA,EAAShiB,SACzBgiB,EAAWF,GAAiB,EAAG,IAG1BE,GAYTxR,EAAOuR,gBAAkB,WACvB,OAAOA,GAAgB5R,KAAK6R,WAAY7R,KAAK8R,aAW/CzR,EAAOg2B,YAAc,WACnB,IAAIxkB,EAAW7R,KAAK6R,WAChBC,EAAW9R,KAAK8R,WAChBJ,EAAMG,EAASH,IAAIG,EAAShiB,OAAS,GAMzC,OAJI6hB,EAAMI,IACRJ,EAAMI,GAGDJ,GAgBTrR,EAAOkoB,OAAS,SAAgBm2B,GAC9B,IAAIpiB,EAEJ,YAAyBphC,IAArBwjD,GAEFpiB,EAAMl/B,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAG5I,WAAWgqD,KACzC1+C,KAAK4uB,OAAOrG,OAAS+T,EACrBt8B,KAAK43C,UAAU,YAAatb,QAExBA,EAAM,GACRt8B,KAAK87B,YAAYQ,MAOrBA,EAAM5nC,WAAWsL,KAAK23C,SAAS,WACxB1pC,MAAMquB,GAAO,EAAIA,IAe1Bj8B,EAAOgoB,MAAQ,SAAes2B,GAC5B,QAAezjD,IAAXyjD,EAKJ,OAAO3+C,KAAK23C,SAAS,WAAY,EAJ/B33C,KAAK43C,UAAU,WAAY+G,IAkC/Bt+C,EAAOu+C,aAAe,SAAsBC,GAC1C,YAAsB3jD,IAAlB2jD,EACK7+C,KAAK43C,UAAU,kBAAmBiH,GAGpC7+C,KAAK23C,SAAS,kBAAmB,GAkB1Ct3C,EAAOy7B,YAAc,SAAqB4iB,GACxC,QAAyBxjD,IAArBwjD,GAAuD,IAArBA,EAKtC,OAAO1+C,KAAK4uB,OAAO2N,WAJjBv8B,KAAK4uB,OAAO2N,WAAamiB,GAe7Br+C,EAAOowC,mBAAqB,WAC1B,OAAOzwC,KAAK23C,SAAS,wBAAyB,GAmBhDt3C,EAAOm6B,aAAe,SAAsBskB,GAC1C,QAAa5jD,IAAT4jD,EAAoB,CACtB,IAAIC,EAAW/+C,KAAKi1C,cAcpB,OAbAj1C,KAAKi1C,cAAgBp/C,QAAQipD,GAIzB9+C,KAAKi1C,gBAAkB8J,GAAY/+C,KAAKs6B,OAAO7qC,UAKjDuQ,KAAK8D,QAAQ,yBAGf9D,KAAKk9C,yBAIP,OAAOl9C,KAAKi1C,eAkBd50C,EAAOq6B,kBAAoB,SAA2BskB,GACpD,IAAIj6B,EAAe/kB,KAAKuJ,SAASyb,SAAW,IAASA,QAErD,GAAID,EAAc,CAChB,IAAI52B,EAAO6R,KACX,OAAO,IAAI+kB,GAAa,SAAUi5B,EAAS/4B,GACzC,SAASg6B,IACP9wD,EAAKsD,IAAI,kBAAmBytD,GAC5B/wD,EAAKsD,IAAI,mBAAoB6uC,GAG/B,SAASA,IACP2e,IACAjB,IAGF,SAASkB,EAAajrD,EAAG4pB,GACvBohC,IACAh6B,EAAOpH,GAGT1vB,EAAKgW,IAAI,mBAAoBm8B,GAC7BnyC,EAAKgW,IAAI,kBAAmB+6C,GAC5B,IAAInE,EAAU5sD,EAAKgxD,yBAAyBH,GAExCjE,IACFA,EAAQxoC,KAAK0sC,EAAYA,GACzBlE,EAAQxoC,KAAKyrC,EAAS/4B,OAK5B,OAAOjlB,KAAKm/C,4BAGd9+C,EAAO8+C,yBAA2B,SAAkCH,GAClE,IAEII,EAFAC,EAAUr/C,KAoBd,GAfKA,KAAKs6B,OAAO7qC,WACf2vD,EAAYp/C,KAAKuJ,SAAS+zC,YAAct9C,KAAKuJ,SAAS+zC,WAAW/+C,SAAW,QAElDrD,IAAtB8jD,IACFI,EAAYJ,IAWZh/C,KAAKs6B,OAAOI,kBAAmB,CACjC,IAAIqgB,EAAU/6C,KAAKyH,IAAIzH,KAAKs6B,OAAOI,mBAAmB0kB,GAUtD,OARIrE,GACFA,EAAQxoC,MAAK,WACX,OAAO8sC,EAAQ7kB,cAAa,MAC3B,WACD,OAAO6kB,EAAQ7kB,cAAa,MAIzBugB,EACE/6C,KAAK4d,MAAM6yB,uBAA4D,KAAnCzwC,KAAKuJ,SAAS+1C,iBAG3Dt/C,KAAK43C,UAAU,mBAIf53C,KAAKu/C,mBAUTl/C,EAAOo6B,eAAiB,WACtB,IAAI1V,EAAe/kB,KAAKuJ,SAASyb,SAAW,IAASA,QAErD,GAAID,EAAc,CAChB,IAAI52B,EAAO6R,KACX,OAAO,IAAI+kB,GAAa,SAAUi5B,EAAS/4B,GACzC,SAASg6B,IACP9wD,EAAKsD,IAAI,kBAAmBytD,GAC5B/wD,EAAKsD,IAAI,mBAAoB6uC,GAG/B,SAASA,IACP2e,IACAjB,IAGF,SAASkB,EAAajrD,EAAG4pB,GACvBohC,IACAh6B,EAAOpH,GAGT1vB,EAAKgW,IAAI,mBAAoBm8B,GAC7BnyC,EAAKgW,IAAI,kBAAmB+6C,GAC5B,IAAInE,EAAU5sD,EAAKqxD,wBAEfzE,IACFA,EAAQxoC,KAAK0sC,EAAYA,GAEzBlE,EAAQxoC,KAAKyrC,EAAS/4B,OAK5B,OAAOjlB,KAAKw/C,yBAGdn/C,EAAOm/C,sBAAwB,WAC7B,IAAIC,EAAUz/C,KAEd,GAAIA,KAAKs6B,OAAOI,kBAAmB,CACjC,IAAIqgB,EAAU,IAAS/6C,KAAKs6B,OAAOG,kBAUnC,OARIsgB,GAGFvoC,GAAeuoC,EAAQxoC,MAAK,WAC1B,OAAOktC,EAAQjlB,cAAa,OAIzBugB,EACE/6C,KAAK4d,MAAM6yB,uBAA4D,KAAnCzwC,KAAKuJ,SAAS+1C,iBAC3Dt/C,KAAK43C,UAAU,kBAEf53C,KAAK0/C,kBAWTr/C,EAAOk/C,gBAAkB,WACvBv/C,KAAKw6B,cAAa,GAClBx6B,KAAK2/C,cAAe,EAEpB3/C,KAAK4/C,gBAAkB,IAASr9C,gBAAgB9C,MAAMogD,SAEtD58C,GAAG,IAAU,UAAWjD,KAAK6zC,0BAE7B,IAAStxC,gBAAgB9C,MAAMogD,SAAW,SAE1C3mD,GAAS,IAASwB,KAAM,mBAMxBsF,KAAK8D,QAAQ,oBAWfzD,EAAOyzC,mBAAqB,SAA4B/3C,GAClD,IAAQyS,WAAWzS,EAAO,SACA,IAAxBiE,KAAKw6B,iBACFx6B,KAAK2/C,aAGR3/C,KAAK0/C,iBAFL1/C,KAAKy6B,mBAcbp6B,EAAOq/C,eAAiB,WACtB1/C,KAAKw6B,cAAa,GAClBx6B,KAAK2/C,cAAe,EACpBluD,GAAI,IAAU,UAAWuO,KAAK6zC,0BAE9B,IAAStxC,gBAAgB9C,MAAMogD,SAAW7/C,KAAK4/C,gBAE/CvmD,GAAY,IAASqB,KAAM,mBAQ3BsF,KAAK8D,QAAQ,mBAWfzD,EAAO6kB,wBAA0B,SAAiCzxB,GAChE,QAAcyH,IAAVzH,EACF,OAAOuM,KAAK23C,SAAS,2BAGvB33C,KAAK43C,UAAU,6BAA8BnkD,GAC7CuM,KAAKuJ,SAAS2b,wBAA0BzxB,EACxCuM,KAAK8D,QAAQ,mCAefzD,EAAO65B,qBAAuB,SAA8B4lB,GAC1D,YAAc5kD,IAAV4kD,GACF9/C,KAAK+/C,wBAA0BD,OAC/B9/C,KAAKy9C,kCAIEz9C,KAAK+/C,uBAgBhB1/C,EAAOykB,wBAA0B,WAC/B,GAAI,4BAA6B,MAA+C,IAAnC9kB,KAAKklB,0BAOhD,OAAOllB,KAAK23C,SAAS,4BAezBt3C,EAAO85B,qBAAuB,WAC5B,GAAI,4BAA6B,IAO/B,OAAO,IAASA,wBAgBpB95B,EAAOkO,cAAgB,SAAuBxS,GAC5C,IAAI8gD,EAAc78C,KAAKuJ,SAASszC,YAEhC,GAAKA,GAAgBA,EAAYmD,QAAjC,EAMqB,SAAwBnsD,GAC3C,IAAI4D,EAAU5D,EAAG4D,QAAQ2E,cAEzB,GAAIvI,EAAGosD,kBACL,OAAO,EAOT,GAAgB,UAAZxoD,EACF,OAA+C,IAHzB,CAAC,SAAU,WAAY,SAAU,QAAS,QAAS,UAGhDpI,QAAQwE,EAAG7E,MAKtC,OAA0C,IADvB,CAAC,YACAK,QAAQoI,IAI1ByoD,CAAelgD,KAAKyH,IAAIzD,cAAcoS,iBAIP,oBAAxBymC,EAAYmD,QACrBnD,EAAYmD,QAAQrsD,KAAKqM,KAAMjE,GAE/BiE,KAAKmgD,cAAcpkD,MAgBvBsE,EAAO8/C,cAAgB,SAAuBpkD,GAC5C,IAAIikD,EAAUhgD,KAAKuJ,SAASszC,YAAc78C,KAAKuJ,SAASszC,YAAYmD,QAAU,GAE1EI,EAAwBJ,EAAQK,cAChCA,OAA0C,IAA1BD,EAAmC,SAAUE,GAC/D,OAAO,IAAQ9xC,WAAW8xC,EAAc,MACtCF,EACAG,EAAmBP,EAAQQ,QAC3BA,OAA+B,IAArBD,EAA8B,SAAUD,GACpD,OAAO,IAAQ9xC,WAAW8xC,EAAc,MACtCC,EACAE,EAAwBT,EAAQU,aAChCA,OAAyC,IAA1BD,EAAmC,SAAUH,GAC9D,OAAO,IAAQ9xC,WAAW8xC,EAAc,MAAQ,IAAQ9xC,WAAW8xC,EAAc,UAC/EG,EAEJ,GAAIJ,EAAc1sD,KAAKqM,KAAMjE,GAAQ,CACnCA,EAAM4F,iBACN5F,EAAMmG,kBACN,IAAIy+C,EAAW33C,GAAYmD,aAAa,qBAEQ,IAA5C,IAASnM,KAAKs6B,OAAOC,oBACvBomB,EAAShyD,UAAUm9B,YAAYn4B,KAAKqM,KAAMjE,QAEvC,GAAIykD,EAAQ7sD,KAAKqM,KAAMjE,GAAQ,CACpCA,EAAM4F,iBACN5F,EAAMmG,kBACW8G,GAAYmD,aAAa,cAC/Bxd,UAAUm9B,YAAYn4B,KAAKqM,KAAMjE,QACvC,GAAI2kD,EAAa/sD,KAAKqM,KAAMjE,GAAQ,CACzCA,EAAM4F,iBACN5F,EAAMmG,kBACW8G,GAAYmD,aAAa,cAC/Bxd,UAAUm9B,YAAYn4B,KAAKqM,KAAMjE,KAgBhDsE,EAAOolB,YAAc,SAAqBz2B,GAGxC,IAFA,IAAI23B,EAEK/2B,EAAI,EAAGu7B,EAAInrB,KAAKuJ,SAAS6hB,UAAWx7B,EAAIu7B,EAAEt7B,OAAQD,IAAK,CAC9D,IAAIy7B,EAAWF,EAAEv7B,GACbojB,EAAOvG,GAAKsZ,QAAQsF,GAQxB,GALKrY,IACHA,EAAOhK,GAAYmD,aAAakf,IAI7BrY,GAML,GAAIA,EAAKsY,gBACP3E,EAAM3T,EAAKyS,YAAYz2B,IAGrB,OAAO23B,OATT32B,EAAM4B,MAAM,QAAWy5B,EAAW,qEActC,MAAO,IAeThrB,EAAOugD,aAAe,SAAsBttD,GAC1C,IAqCyBrE,EArCrB4xD,EAAU7gD,KAIV8gD,EAAQ9gD,KAAKuJ,SAAS6hB,UAAU7uB,KAAI,SAAU8uB,GAChD,MAAO,CAACA,EAAU5e,GAAKsZ,QAAQsF,OAC9Br5B,QAAO,SAAUoe,GAClB,IAAIib,EAAWjb,EAAK,GAChB4C,EAAO5C,EAAK,GAEhB,OAAI4C,EAEKA,EAAKsY,eAGdt7B,EAAM4B,MAAM,QAAWy5B,EAAW,sEAC3B,MAKL01B,EAAiC,SAAwCC,EAAYC,EAAYC,GACnG,IAAI/R,EAUJ,OATA6R,EAAWt0C,MAAK,SAAUy0C,GACxB,OAAOF,EAAWv0C,MAAK,SAAU00C,GAG/B,GAFAjS,EAAQ+R,EAAOC,EAAaC,GAG1B,OAAO,QAINjS,GAWLkS,EAAS,SAAgBC,EAAO9tD,GAClC,IAAI63B,EAAWi2B,EAAM,GAGrB,GAFWA,EAAM,GAER57B,cAAclyB,EAAQqtD,EAAQt3C,SAAS8hB,EAASjvB,gBACvD,MAAO,CACL5I,OAAQA,EACRwf,KAAMqY,IAeZ,OARIrrB,KAAKuJ,SAASg4C,YAEKR,EAA+BztD,EAASwtD,GAtBtC7xD,EAsBkDoyD,EArBlE,SAAU3lC,EAAG8lC,GAClB,OAAOvyD,EAAGuyD,EAAG9lC,MAuBMqlC,EAA+BD,EAAOxtD,EAAS+tD,MAGzC,GAqB/BhhD,EAAOohD,WAAa,SAAoBjuD,EAAQkuD,GAC9C,IAAIC,EAAU3hD,KAGd,GAAsB,qBAAXxM,EACT,OAAOwM,KAAK4uB,OAAOvb,KAAO,GAIxBrT,KAAK4hD,oBACP5hD,KAAK4hD,qBAKP,IAAItuD,EAAUu3B,GAAar3B,GAI3B,GAAKF,EAAQzD,QAwDb,GA7CAmQ,KAAK41C,cAAe,EAGf8L,IACH1hD,KAAK4uB,OAAOt7B,QAAUA,GAGxB0M,KAAKo7C,oBAAoB9nD,EAAQ,IAEjC2zB,GAAUjnB,KAAM1M,EAAQ,IAAI,SAAUuuD,EAAkB55B,GAUtD,IA7jeWN,EAAY3U,EA+jevB,GAXA2uC,EAAQtL,YAAcpuB,EAGjBy5B,IACHC,EAAQ/yB,OAAOt7B,QAAUA,GAG3BquD,EAAQvG,oBAAoByG,GAElBF,EAAQG,KAAKD,GAGrB,OAAIvuD,EAAQzD,OAAS,EACZ8xD,EAAQF,WAAWnuD,EAAQhE,MAAM,KAG1CqyD,EAAQ/L,cAAe,EAEvB+L,EAAQziD,YAAW,WACjBc,KAAKpO,MAAM,CACTgZ,KAAM,EACNqH,QAASjS,KAAKyK,SAASzK,KAAKuJ,SAASw4C,yBAEtC,QAIHJ,EAAQz0C,gBA/keCya,EAoleHM,EApleejV,EAoleV2uC,EAAQ/jC,MAnlezB+J,EAAWz0B,SAAQ,SAAUg1B,GAC3B,OAAOA,EAAG85B,SAAW95B,EAAG85B,QAAQhvC,SAqle5BhT,KAAKuJ,SAAS04C,cAAgB3uD,EAAQzD,OAAS,EAAG,CACpD,IAAIqyD,EAAQ,WAEVP,EAAQ/vD,MAAM,MAEd+vD,EAAQF,WAAWnuD,EAAQhE,MAAM,IAAI,IAGnC6yD,EAAyB,WAC3BR,EAAQlwD,IAAI,QAASywD,IAGvBliD,KAAKmE,IAAI,QAAS+9C,GAClBliD,KAAKmE,IAAI,UAAWg+C,GAEpBniD,KAAK4hD,mBAAqB,WACxBD,EAAQlwD,IAAI,QAASywD,GAErBP,EAAQlwD,IAAI,UAAW0wD,UAzEzBniD,KAAKd,YAAW,WACdc,KAAKpO,MAAM,CACTgZ,KAAM,EACNqH,QAASjS,KAAKyK,SAASzK,KAAKuJ,SAASw4C,yBAEtC,IAyFP1hD,EAAOgT,IAAM,SAAa7f,GACxB,OAAOwM,KAAKyhD,WAAWjuD,GAAQ,IAiBjC6M,EAAOyhD,KAAO,SAActuD,GAC1B,IA91qB2C4uD,EAAMC,EA81qB7CC,EAAUtiD,KAEVuiD,EAAaviD,KAAK4gD,aAAa,CAACptD,IAEpC,OAAK+uD,IAl2qBsCH,EAs2qBtBG,EAAWvvC,KAt2qBiBqvC,EAs2qBXriD,KAAK+4C,UAr2qBtCxwC,GAAc65C,KAAU75C,GAAc85C,IAs2qBzCriD,KAAK41C,cAAe,EAEpB51C,KAAKurB,UAAUg3B,EAAWvvC,KAAMuvC,EAAW/uD,QAC3CwM,KAAK4d,MAAM1U,OAAM,WACfo5C,EAAQ1M,cAAe,MAElB,IAKT51C,KAAKkJ,OAAM,WAKLlJ,KAAK4d,MAAMlvB,YAAYC,UAAUmD,eAAe,aAClDkO,KAAK43C,UAAU,YAAapkD,GAE5BwM,KAAK43C,UAAU,MAAOpkD,EAAO6f,KAG/BrT,KAAK41C,cAAe,KACnB,IACI,KAOTv1C,EAAOwf,KAAO,WACZ7f,KAAK43C,UAAU,SASjBv3C,EAAO8iB,MAAQ,WACb,IAAIq/B,EAAUxiD,KAEV+kB,EAAe/kB,KAAKuJ,SAASyb,SAAW,IAASA,QAEjDhlB,KAAKgV,WAAa+P,EACpB/kB,KAAKyiD,WAGLjwC,GADkBxS,KAAKmJ,OACIoJ,MAAK,WAC9B,OAAOiwC,EAAQC,gBAKrBpiD,EAAOoiD,SAAW,WACZziD,KAAK4d,OACP5d,KAAK4d,MAAMoF,YAAY,QAGzBhjB,KAAKy1C,cACLz1C,KAAK4sB,OAAO,IACZ5sB,KAAKurB,UAAUvrB,KAAKuJ,SAAS6hB,UAAU,GAAI,MAC3CprB,KAAK43C,UAAU,SACf53C,KAAK0iD,qBAED/8C,GAAU3F,OACZA,KAAK8D,QAAQ,gBASjBzD,EAAOqiD,mBAAqB,WAC1B1iD,KAAK2iD,oBACL3iD,KAAK4iD,qBACL5iD,KAAK6iD,mBAOPxiD,EAAOsiD,kBAAoB,WACzB3iD,KAAKgf,YAAY,GACjB,IAAI8jC,EAAmB9iD,KAAKmnC,WACxB4b,EAAkBD,EAAiBC,gBACnCpvB,EAAuBmvB,EAAiBnvB,qBAExCovB,GACFA,EAAgBrwB,gBAGdiB,GACFA,EAAqBjB,iBAQzBryB,EAAOuiD,mBAAqB,WAC1B5iD,KAAKkjC,aAAaljC,KAAK49C,uBACvB59C,KAAKy6C,yBAOPp6C,EAAOwiD,gBAAkB,WACvB7iD,KAAKuoB,OAAO,GACZvoB,KAAK8D,QAAQ,iBAUfzD,EAAO2iD,eAAiB,WACtB,IAAIxvD,EAASwM,KAAK67C,gBACdvoD,EAAU,GAMd,OAJmC,IAA/BT,OAAOC,KAAKU,GAAQ3D,QACtByD,EAAQtC,KAAKwC,GAGRwM,KAAK4uB,OAAOt7B,SAAWA,GAUhC+M,EAAOw7C,cAAgB,WACrB,OAAO77C,KAAK4uB,OAAOp7B,QAAU,IAW/B6M,EAAOysC,WAAa,WAClB,OAAO9sC,KAAK67C,iBAAmB77C,KAAK67C,gBAAgBxoC,KAAO,IAY7DhT,EAAO4iD,YAAc,WACnB,OAAOjjD,KAAK67C,iBAAmB77C,KAAK67C,gBAAgB7sD,MAAQ,IAc9DqR,EAAOovC,QAAU,SAAiBh8C,GAChC,YAAcyH,IAAVzH,GACFuM,KAAK43C,UAAU,aAAcnkD,QAC7BuM,KAAKuJ,SAASkmC,QAAUh8C,IAInBuM,KAAK23C,SAAS,YAoBvBt3C,EAAO01C,SAAW,SAAkBtiD,GAElC,QAAcyH,IAAVzH,EACF,OAAOuM,KAAKuJ,SAASwsC,WAAY,EAGnC,IAAImN,EAEiB,kBAAVzvD,GAAsB,mBAAmBtC,KAAKsC,KAAoB,IAAVA,GAAkBuM,KAAKuJ,SAASyvC,mBACjGh5C,KAAKuJ,SAASwsC,SAAWtiD,EACzBuM,KAAK86C,gBAAiC,kBAAVrnD,EAAqBA,EAAQ,QACzDyvD,GAAe,GAKfljD,KAAKuJ,SAASwsC,WAHJtiD,EAMZyvD,EAAuC,qBAAjBA,EAA+BljD,KAAKuJ,SAASwsC,SAAWmN,EAK1EljD,KAAK4d,OACP5d,KAAK43C,UAAU,cAAesL,IAqBlC7iD,EAAOglB,YAAc,SAAqB5xB,GACxC,YAAcyH,IAAVzH,GACFuM,KAAK43C,UAAU,iBAAkBnkD,GACjCuM,KAAKuJ,SAAS8b,YAAc5xB,EACrBuM,MAGFA,KAAK23C,SAAS,gBAcvBt3C,EAAO64C,KAAO,SAAczlD,GAC1B,YAAcyH,IAAVzH,GACFuM,KAAK43C,UAAU,UAAWnkD,QAC1BuM,KAAKuJ,SAAS2vC,KAAOzlD,IAIhBuM,KAAK23C,SAAS,SAevBt3C,EAAOusB,OAAS,SAAgBvZ,GAC9B,QAAYnY,IAARmY,EACF,OAAOrT,KAAK01C,QAKTriC,IACHA,EAAM,IAGJA,IAAQrT,KAAK01C,UAKjB11C,KAAK01C,QAAUriC,EAEfrT,KAAK43C,UAAU,YAAavkC,GAC5BrT,KAAKk1C,mBAAoB,EASzBl1C,KAAK8D,QAAQ,kBAgBfzD,EAAOk6C,wBAA0B,WAC/B,KAAMv6C,KAAK01C,SAAW11C,KAAKuJ,SAAS4vC,wBAA0Bn5C,KAAK4d,OAAS5d,KAAK4d,MAAMgP,OAAQ,CAC7F,IAAIu2B,EAAYnjD,KAAK4d,MAAMgP,UAAY,GAEnCu2B,IAAcnjD,KAAK01C,UACrB11C,KAAK01C,QAAUyN,EACfnjD,KAAKk1C,mBAAoB,EAEzBl1C,KAAK8D,QAAQ,mBAkBnBzD,EAAO+U,SAAW,SAAkBugB,GAClC,QAAaz6B,IAATy6B,EACF,QAAS31B,KAAK21C,UAGhBhgB,IAASA,EAEL31B,KAAK21C,YAAchgB,IAIvB31B,KAAK21C,UAAYhgB,EAEb31B,KAAK06C,uBACP16C,KAAK43C,UAAU,cAAejiB,GAG5B31B,KAAK21C,WACP31C,KAAK3G,YAAY,yBACjB2G,KAAK9G,SAAS,wBAMd8G,KAAK8D,QAAQ,mBAER9D,KAAK06C,uBACR16C,KAAK26C,8BAGP36C,KAAK3G,YAAY,wBACjB2G,KAAK9G,SAAS,yBAMd8G,KAAK8D,QAAQ,oBAER9D,KAAK06C,uBACR16C,KAAK66C,kCAuBXx6C,EAAOq6C,oBAAsB,SAA6B/kB,GACxD,QAAaz6B,IAATy6B,EACF,QAAS31B,KAAKojD,qBAGhBztB,IAASA,EAEL31B,KAAKojD,uBAAyBztB,IAIlC31B,KAAKojD,qBAAuBztB,EAExB31B,KAAKojD,sBACPpjD,KAAK9G,SAAS,6BAQd8G,KAAK8D,QAAQ,yBAEb9D,KAAK3G,YAAY,6BAQjB2G,KAAK8D,QAAQ,0BAiBjBzD,EAAOzO,MAAQ,SAAeisB,GAC5B,IAAIwlC,EAAUrjD,KAEd,QAAY9E,IAAR2iB,EACF,OAAO7d,KAAKqjB,QAAU,KAiBxB,GAbAt0B,EAAM,eAAemE,SAAQ,SAAUowD,GACrC,IAAIC,EAASD,EAAaD,EAASxlC,GAE7B7qB,GAASuwD,KAAY/yD,MAAMY,QAAQmyD,IAA6B,kBAAXA,GAAyC,kBAAXA,GAAkC,OAAXA,EAMhH1lC,EAAM0lC,EALJF,EAAQhzD,IAAIuB,MAAM,yEASlBoO,KAAKuJ,SAASi6C,2BAA6B3lC,GAAoB,IAAbA,EAAIjT,KAAY,CACpE,IAAI64C,EAAyB,WAC3BzjD,KAAKpO,MAAMisB,IAQb,OALA7d,KAAKuJ,SAASi6C,2BAA4B,EAC1CxjD,KAAKqE,IAAI,CAAC,QAAS,cAAeo/C,QAClCzjD,KAAKmE,IAAI,aAAa,WACpBnE,KAAKvO,IAAI,CAAC,QAAS,cAAegyD,MAMtC,GAAY,OAAR5lC,EAQF,OAPA7d,KAAKqjB,OAASxF,EACd7d,KAAK3G,YAAY,kBAEb2G,KAAK0jD,cACP1jD,KAAK0jD,aAAa5vC,SAMtB9T,KAAKqjB,OAAS,IAAIrR,GAAW6L,GAE7B7d,KAAK9G,SAAS,aAGdlJ,EAAM4B,MAAM,SAAWoO,KAAKqjB,OAAOzY,KAAO,IAAMoH,GAAWI,WAAWpS,KAAKqjB,OAAOzY,MAAQ,IAAK5K,KAAKqjB,OAAOpR,QAASjS,KAAKqjB,QAMzHrjB,KAAK8D,QAAQ,SAEb/U,EAAM,SAASmE,SAAQ,SAAUowD,GAC/B,OAAOA,EAAaD,EAASA,EAAQhgC,YAYzChjB,EAAO8O,mBAAqB,SAA4BpT,GACtDiE,KAAK2jD,eAAgB,GAiBvBtjD,EAAOm2C,WAAa,SAAoB7gB,GACtC,QAAaz6B,IAATy6B,EACF,OAAO31B,KAAKo1C,YAKd,IAFAzf,IAASA,KAEI31B,KAAKo1C,YAAlB,CAMA,GAFAp1C,KAAKo1C,YAAczf,EAEf31B,KAAKo1C,YAUP,OATAp1C,KAAK2jD,eAAgB,EACrB3jD,KAAK3G,YAAY,qBACjB2G,KAAK9G,SAAS,wBAMd8G,KAAK8D,QAAQ,cAYX9D,KAAK4d,OACP5d,KAAK4d,MAAMzZ,IAAI,aAAa,SAAUlQ,GACpCA,EAAEiO,kBACFjO,EAAE0N,oBAIN3B,KAAK2jD,eAAgB,EACrB3jD,KAAK3G,YAAY,mBACjB2G,KAAK9G,SAAS,qBAMd8G,KAAK8D,QAAQ,kBASfzD,EAAOo2C,uBAAyB,WAC9B,IAAImN,EACAC,EACAC,EACAC,EAAiBt/C,GAAKzE,KAAMA,KAAKmP,oBAwBjC60C,EAA6B,SAAoCjoD,GACnEgoD,IAEA/jD,KAAKsP,cAAcs0C,IAIrB5jD,KAAKiD,GAAG,aAnBc,WACpB8gD,IAIA/jD,KAAKsP,cAAcs0C,GAInBA,EAAkB5jD,KAAKuP,YAAYw0C,EAAgB,QAWrD/jD,KAAKiD,GAAG,aA9Bc,SAAyBhP,GAGzCA,EAAEgwD,UAAYJ,GAAa5vD,EAAEiwD,UAAYJ,IAC3CD,EAAY5vD,EAAEgwD,QACdH,EAAY7vD,EAAEiwD,QACdH,QAyBJ/jD,KAAKiD,GAAG,UAAW+gD,GACnBhkD,KAAKiD,GAAG,aAAc+gD,GACtB,IAyBIrG,EAzBAxW,EAAannC,KAAKuL,SAAS,eAG3B47B,GAAe/wC,IAAWtB,KAC5BqyC,EAAWlkC,GAAG,cAAc,SAAUlH,GACa,IAA7CiE,KAAKjB,SAASwK,SAASo0C,oBACzB39C,KAAKjB,SAAS6vB,OAAO+uB,kBAAoB39C,KAAKjB,SAASwK,SAASo0C,mBAGlE39C,KAAKjB,SAASwK,SAASo0C,kBAAoB,KAE7CxW,EAAWlkC,GAAG,cAAc,SAAUlH,GACpCiE,KAAKjB,SAASwK,SAASo0C,kBAAoB39C,KAAKjB,SAAS6vB,OAAO+uB,sBAMpE39C,KAAKiD,GAAG,UAAW8gD,GACnB/jD,KAAKiD,GAAG,QAAS8gD,GAOjB/jD,KAAKuP,aAAY,WAEf,GAAKvP,KAAK2jD,cAAV,CAKA3jD,KAAK2jD,eAAgB,EAErB3jD,KAAKw2C,YAAW,GAEhBx2C,KAAKsF,aAAaq4C,GAClB,IAAIp4C,EAAUvF,KAAKuJ,SAASo0C,kBAExBp4C,GAAW,IAMfo4C,EAAoB39C,KAAKd,YAAW,WAI7Bc,KAAK2jD,eACR3jD,KAAKw2C,YAAW,KAEjBjxC,OACF,MAiBLlF,EAAO6iC,aAAe,SAAsBD,GAC1C,QAAa/nC,IAAT+nC,EAOJ,OAAIjjC,KAAK4d,OAAS5d,KAAK4d,MAAMwI,qBACpBpmB,KAAK4uB,OAAOutB,kBAAoBn8C,KAAK23C,SAAS,gBAGhD,EARL33C,KAAK43C,UAAU,kBAAmB3U,IA2BtC5iC,EAAOu9C,oBAAsB,SAA6B3a,GACxD,YAAa/nC,IAAT+nC,EACKjjC,KAAK43C,UAAU,yBAA0B3U,GAG9CjjC,KAAK4d,OAAS5d,KAAK4d,MAAMwI,qBACpBpmB,KAAK23C,SAAS,uBAGhB,GAcTt3C,EAAOuwB,QAAU,SAAiB+E,GAChC,QAAaz6B,IAATy6B,EAKJ,QAAS31B,KAAKmkD,SAJZnkD,KAAKmkD,WAAaxuB,GA6BtBt1B,EAAOikB,aAAe,SAAsBnL,EAAM1E,EAAO5J,GACvD,GAAI7K,KAAK4d,MACP,OAAO5d,KAAK4d,MAAM0G,aAAanL,EAAM1E,EAAO5J,IAyBhDxK,EAAOmT,mBAAqB,SAA4BjV,EAASkmB,GAC/D,GAAIzkB,KAAK4d,MACP,OAAO5d,KAAK4d,MAAMpK,mBAAmBjV,EAASkmB,IAelDpkB,EAAO4iB,sBAAwB,SAA+B10B,QAChD,IAARA,IACFA,EAAM,IAGR,IACImkB,EADOnkB,EACMmkB,MAQjB,GANKA,IACHA,EAAQnkB,GAKNyR,KAAK4d,MACP,OAAO5d,KAAK4d,MAAMqF,sBAAsBvQ,IAe5CrS,EAAOwkB,wBAA0B,WAC/B,OAAO7kB,KAAK23C,SAAS,4BAUvBt3C,EAAO+3C,WAAa,WAClB,OAAOp4C,KAAK4d,OAAS5d,KAAK4d,MAAMw6B,YAAcp4C,KAAK4d,MAAMw6B,cAAgB,GAU3E/3C,EAAOg4C,YAAc,WACnB,OAAOr4C,KAAK4d,OAAS5d,KAAK4d,MAAMy6B,aAAer4C,KAAK4d,MAAMy6B,eAAiB,GAqB7Eh4C,EAAOwK,SAAW,SAAkBD,GAClC,QAAa1P,IAAT0P,EACF,OAAO5K,KAAK2iC,UAGV3iC,KAAK2iC,YAAcyhB,OAAOx5C,GAAMxO,gBAClC4D,KAAK2iC,UAAYyhB,OAAOx5C,GAAMxO,cAE1BuJ,GAAU3F,OAOZA,KAAK8D,QAAQ,oBAcnBzD,EAAOyK,UAAY,WACjB,OAAOtC,GAAeqI,EAAOliB,UAAU4a,SAASuB,UAAW9K,KAAKw1C,aAWlEn1C,EAAOgkD,OAAS,WACd,IAAI9lD,EAAUiK,GAAexI,KAAKuJ,UAC9BiO,EAASjZ,EAAQiZ,OACrBjZ,EAAQiZ,OAAS,GAEjB,IAAK,IAAI5nB,EAAI,EAAGA,EAAI4nB,EAAO3nB,OAAQD,IAAK,CACtC,IAAI8iB,EAAQ8E,EAAO5nB,IAEnB8iB,EAAQlK,GAAekK,IACjB3T,YAAS7D,EACfqD,EAAQiZ,OAAO5nB,GAAK8iB,EAGtB,OAAOnU,GAoBT8B,EAAOikD,YAAc,SAAqB1sD,EAAS2G,GACjD,IAAIgmD,EAAUvkD,MAEdzB,EAAUA,GAAW,IACb3G,QAAUA,GAAW,GAC7B,IAAI4sD,EAAQ,IAAI9wC,GAAY1T,KAAMzB,GAMlC,OALAyB,KAAK6L,SAAS24C,GACdA,EAAMvhD,GAAG,WAAW,WAClBshD,EAAQ9mD,YAAY+mD,MAEtBA,EAAM5vC,OACC4vC,GASTnkD,EAAO+zC,yBAA2B,WAChC,GAAKp0C,KAAK42C,aAOV,IAHA,IAAI6N,EAAoBzkD,KAAKykD,oBACzBr2C,EAAepO,KAAKoO,eAEfxe,EAAI,EAAGA,EAAIijD,GAAiBhjD,OAAQD,IAAK,CAChD,IAAI80D,EAAsB7R,GAAiBjjD,GAG3C,GAAIwe,GAFWpO,KAAK2kD,aAAaD,GAEH,CAE5B,GAAID,IAAsBC,EACxB,OAIED,GACFzkD,KAAK3G,YAAYy5C,GAAmB2R,IAGtCzkD,KAAK9G,SAAS45C,GAAmB4R,IACjC1kD,KAAK4kD,YAAcF,EACnB,SAWNrkD,EAAOwkD,yBAA2B,WAChC,IAAI5rD,EAAY+G,KAAK8kD,yBACrB9kD,KAAK4kD,YAAc,GAEf3rD,GACF+G,KAAK3G,YAAYJ,IAyCrBoH,EAAOs2C,YAAc,SAAqBoO,GAExC,YAAqB7pD,IAAjB6pD,IAIJ/kD,KAAK4kD,YAAc,GACnB5kD,KAAK2kD,aAAevxD,EAAO,GAAI6/C,GAAqB8R,GAGpD/kD,KAAKo0C,4BAPIhhD,EAAO4M,KAAK2kD,eAyBvBtkD,EAAOu2C,WAAa,SAAoBnjD,GAEtC,YAAcyH,IAAVzH,EACKuM,KAAKglD,aAGdvxD,EAAQoC,QAAQpC,MACFuM,KAAKglD,aAOnBhlD,KAAKglD,YAAcvxD,EAGfA,GACFuM,KAAKiD,GAAG,eAAgBjD,KAAKm0C,+BAC7Bn0C,KAAKo0C,6BAELp0C,KAAKvO,IAAI,eAAgBuO,KAAKm0C,+BAC9Bn0C,KAAK6kD,4BAGApxD,QAhBP,GA2BF4M,EAAOokD,kBAAoB,WACzB,OAAOzkD,KAAK4kD,aAYdvkD,EAAOykD,uBAAyB,WAC9B,OAAOhS,GAAmB9yC,KAAK4kD,cAAgB,IA0DjDvkD,EAAO4kD,UAAY,SAAmBpH,EAAO30C,GAC3C,IAAIg8C,EAAUllD,KAEd,GAAK69C,GAA4B,WAAnBvvD,EAAQuvD,GAAtB,CAIA79C,KAAKmjB,QAELnjB,KAAK4uB,OAAOivB,MAAQr1C,GAAeq1C,GACnC,IAAIsH,EAAqBnlD,KAAK4uB,OAAOivB,MACjCuH,EAAUD,EAAmBC,QAC7Bx4B,EAASu4B,EAAmBv4B,OAC5BvZ,EAAM8xC,EAAmB9xC,IACzBC,EAAa6xC,EAAmB7xC,YAE/B8xC,GAAWx4B,IACd5sB,KAAK4uB,OAAOivB,MAAMuH,QAAU,CAAC,CAC3B/xC,IAAKuZ,EACL59B,KAAM27B,GAAYiC,MAIlBvZ,GACFrT,KAAKqT,IAAIA,GAGPuZ,GACF5sB,KAAK4sB,OAAOA,GAGVp8B,MAAMY,QAAQkiB,IAChBA,EAAWpgB,SAAQ,SAAUmyD,GAC3B,OAAOH,EAAQ1xC,mBAAmB6xC,GAAI,MAI1CrlD,KAAKkJ,MAAMA,KAYb7I,EAAOilD,SAAW,WAChB,IAAKtlD,KAAK4uB,OAAOivB,MAAO,CACtB,IAAIjxB,EAAS5sB,KAAK4sB,SAUdixB,EAAQ,CACVxqC,IAVQrT,KAAKgjD,iBAWb1vC,WAVe9iB,MAAM7B,UAAU4N,IAAI5I,KAAKqM,KAAKikB,oBAAoB,SAAUohC,GAC3E,MAAO,CACLlsC,KAAMksC,EAAGlsC,KACT1E,MAAO4wC,EAAG5wC,MACV5J,SAAUw6C,EAAGx6C,SACbwI,IAAKgyC,EAAGhyC,SAgBZ,OARIuZ,IACFixB,EAAMjxB,OAASA,EACfixB,EAAMuH,QAAU,CAAC,CACf/xC,IAAKwqC,EAAMjxB,OACX59B,KAAM27B,GAAYkzB,EAAMjxB,WAIrBixB,EAGT,OAAOr1C,GAAexI,KAAK4uB,OAAOivB,QAcpChtC,EAAO4iC,eAAiB,SAAwBt5C,GAC9C,IAAIorD,EAAc,CAChBjyD,QAAS,GACTkkB,OAAQ,IAENguC,EAAatrD,GAAcC,GAC3BsrD,EAAYD,EAAW,cAW3B,GATI5sD,GAASuB,EAAK,cAChBqrD,EAAW1wC,MAAO,GAGhBlc,GAASuB,EAAK,eAChBqrD,EAAWlO,OAAQ,GAIH,OAAdmO,EAAoB,CAGtB,IAAIC,EAAkB,IAAeD,GAAa,MAC9C5nC,EAAM6nC,EAAgB,GACtBtlD,EAAOslD,EAAgB,GAEvB7nC,GACF7tB,EAAM4B,MAAMisB,GAGdzqB,EAAOoyD,EAAYplD,GAKrB,GAFAhN,EAAOmyD,EAAaC,GAEhBrrD,EAAIuzC,gBAGN,IAFA,IAAIriC,EAAWlR,EAAIoxC,WAEV37C,EAAI,EAAGu7B,EAAI9f,EAASxb,OAAQD,EAAIu7B,EAAGv7B,IAAK,CAC/C,IAAI4I,EAAQ6S,EAASzb,GAEjB+1D,EAAYntD,EAAM2D,SAASC,cAEb,WAAdupD,EACFJ,EAAYjyD,QAAQtC,KAAKkJ,GAAc1B,IAChB,UAAdmtD,GACTJ,EAAY/tC,OAAOxmB,KAAKkJ,GAAc1B,IAK5C,OAAO+sD,GAWTllD,EAAOi2C,kBAAoB,WACzB,IAAI11C,EAAO,IAAS/I,cAAc,KAGlC,QAAS,cAAe+I,EAAKnB,OAAS,oBAAqBmB,EAAKnB,OAAS,iBAAkBmB,EAAKnB,OAAS,gBAAiBmB,EAAKnB,OAC/H,gBAAiBmB,EAAKnB,QAWxBY,EAAO3O,MAAQ,SAAe4mB,GAC5B,QAAgBpd,IAAZod,EACF,OAAOtY,KAAKq1C,cAGV/8B,GACFtY,KAAK8D,QAAQ,WACb9D,KAAK4lD,kBAAoB5lD,KAAK3P,IAAID,MAClC4P,KAAK3P,IAAID,MAAM,SACf4P,KAAKq1C,eAAgB,IAErBr1C,KAAK8D,QAAQ,YACb9D,KAAK3P,IAAID,MAAM4P,KAAK4lD,mBACpB5lD,KAAK4lD,uBAAoB1qD,EACzB8E,KAAKq1C,eAAgB,IAiBzBh1C,EAAOqjC,cAAgB,SAAuBmiB,GAC5C,QAAiB3qD,IAAb2qD,EACF,OAAO7lD,KAAK4uB,OAAO8U,cAIhBlzC,MAAMY,QAAQy0D,IAKdA,EAAShgD,OAAM,SAAUo9B,GAC5B,MAAuB,kBAATA,OAKhBjjC,KAAK4uB,OAAO8U,cAAgBmiB,EAQ5B7lD,KAAK8D,QAAQ,yBAGR+M,EA3tJiB,CA4tJxB7H,IAmDF6X,GAAIpV,MAAMvY,SAAQ,SAAUhD,GAC1B,IAAIurB,EAAQoF,GAAI3wB,GAEhB2gB,GAAOliB,UAAU8sB,EAAM+E,YAAc,WACnC,OAAIxgB,KAAK4d,MACA5d,KAAK4d,MAAMnC,EAAM+E,eAK1BxgB,KAAKyb,EAAMgF,aAAezgB,KAAKyb,EAAMgF,cAAgB,IAAIhF,EAAM2E,UACxDpgB,KAAKyb,EAAMgF,kBAmBtB5P,GAAOliB,UAAU6oD,YAAc3mC,GAAOliB,UAAU8uB,YAUhD5M,GAAOC,QAAU,GACjB,IAAIzc,GAAY,IAASA,UAUzBwc,GAAOliB,UAAU4a,SAAW,CAE1B6hB,UAAW3e,GAAKqZ,kBAChBggC,MAAO,GAEPnI,kBAAmB,IAEnBja,cAAe,GAGf2G,QAAQ,EAERh/B,SAAU,CAAC,cAAe,cAAe,mBAAoB,iBAAkB,gBAAiB,cAAe,aAAc,eAAgB,oBAAqB,iBAClKR,SAAUxW,KAAcA,GAAUyW,WAAazW,GAAUyW,UAAU,IAAMzW,GAAU0xD,cAAgB1xD,GAAUwW,WAAa,KAE1HC,UAAW,GAEXi3C,oBAAqB,iDACrB/I,mBAAmB,EACnBsE,WAAY,CACV/+C,QAAS,CACPynD,aAAc,SAGlBrP,YAAa,GACbC,YAAY,GAEd,CAOA,QAOA,UAQA,WAqBA,eAwBA,cAAc1jD,SAAQ,SAAUjE,GAC9B4hB,GAAOliB,UAAUM,GAAM,WACrB,OAAO+Q,KAAK23C,SAAS1oD,OAGzBsjD,GAAsBr/C,SAAQ,SAAU6I,GACtC8U,GAAOliB,UAAU,aAAe4Z,GAAcxM,GAAS,KAAO,WAC5D,OAAOiE,KAAK8D,QAAQ/H,OA6DxBiN,GAAYuH,kBAAkB,SAAUM,IASxC,IAAIo1C,GAAmB,SAiBnBC,GAAgB,GAYhBC,GAAe,SAAsBj2D,GACvC,OAAOg2D,GAAcp0D,eAAe5B,IAclCk2D,GAAY,SAAmBl2D,GACjC,OAAOi2D,GAAaj2D,GAAQg2D,GAAch2D,QAAQgL,GAgBhDmrD,GAAqB,SAA4BtnD,EAAQ7O,GAC3D6O,EAAuB,eAAIA,EAAuB,gBAAK,GACvDA,EAAuB,eAAE7O,IAAQ,GAkB/Bo2D,GAAoB,SAA2BvnD,EAAQoE,EAAMojD,GAC/D,IAAI5X,GAAa4X,EAAS,SAAW,IAAM,cAC3CxnD,EAAO+E,QAAQ6qC,EAAWxrC,GAC1BpE,EAAO+E,QAAQ6qC,EAAY,IAAMxrC,EAAKjT,KAAMiT,IAgE1CqjD,GAAsB,SAA6Bt2D,EAAMu2D,GAI3D,OADAA,EAAe93D,UAAUuB,KAAOA,EACzB,WACLo2D,GAAkBtmD,KAAM,CACtB9P,KAAMA,EACNw2D,OAAQD,EACRE,SAAU,OACT,GAEH,IAAK,IAAIr2D,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB,IAAIk2D,EAAW,IAAWF,EAAgB,CAACzmD,MAAM9Q,OAAOqB,IAQxD,OALAyP,KAAK9P,GAAQ,WACX,OAAOy2D,GAGTL,GAAkBtmD,KAAM2mD,EAASC,gBAC1BD,IAmBPE,GAAsB,WASxB,SAASA,EAAO9nD,GACd,GAAIiB,KAAKtR,cAAgBm4D,EACvB,MAAM,IAAI90D,MAAM,0DAGlBiO,KAAKjB,OAASA,EAETiB,KAAK3P,MACR2P,KAAK3P,IAAM2P,KAAKjB,OAAO1O,IAAIiB,aAAa0O,KAAK9P,OAK/CoX,GAAQtH,aACDA,KAAK8D,QACZmE,GAASjI,KAAMA,KAAKtR,YAAYwZ,cAChCm+C,GAAmBtnD,EAAQiB,KAAK9P,MAGhC8P,KAAKsK,QAAUtK,KAAKsK,QAAQ7F,KAAKzE,MAEjCjB,EAAOkE,GAAG,UAAWjD,KAAKsK,SAO5B,IAAIjK,EAASwmD,EAAOl4D,UAmOpB,OAjOA0R,EAAO5K,QAAU,WACf,OAAOuK,KAAKtR,YAAYo4D,SAgB1BzmD,EAAOumD,aAAe,SAAsBzjD,GAQ1C,YAPa,IAATA,IACFA,EAAO,IAGTA,EAAKjT,KAAO8P,KAAK9P,KACjBiT,EAAKujD,OAAS1mD,KAAKtR,YACnByU,EAAKwjD,SAAW3mD,KACTmD,GAkBT9C,EAAOyD,QAAU,SAAmB/H,EAAOoH,GAKzC,YAJa,IAATA,IACFA,EAAO,IAGFW,GAAQ9D,KAAK4F,YAAa7J,EAAOiE,KAAK4mD,aAAazjD,KAgB5D9C,EAAO8H,mBAAqB,SAA4BlU,KAWxDoM,EAAOiK,QAAU,WACf,IAAIpa,EAAO8P,KAAK9P,KACZ6O,EAASiB,KAAKjB,OAQlBiB,KAAK8D,QAAQ,WACb9D,KAAKvO,MACLsN,EAAOtN,IAAI,UAAWuO,KAAKsK,SAI3BvL,EAAuB,eAAE7O,IAAQ,EACjC8P,KAAKjB,OAASiB,KAAK2H,MAAQ,KAG3B5I,EAAO7O,GAAQs2D,GAAoBt2D,EAAMg2D,GAAch2D,KAczD22D,EAAOE,QAAU,SAAiBL,GAChC,IAAIM,EAAsB,kBAAXN,EAAsBN,GAAUM,GAAUA,EACzD,MAAoB,oBAANM,IAAqBH,EAAOl4D,UAAUgiB,cAAcq2C,EAAEr4D,YAmBtEk4D,EAAOI,eAAiB,SAAwB/2D,EAAMw2D,GACpD,GAAoB,kBAATx2D,EACT,MAAM,IAAI6B,MAAM,yBAA4B7B,EAAO,4BAA+B5B,EAAQ4B,GAAQ,KAGpG,GAAIi2D,GAAaj2D,GACfF,EAAM2B,KAAK,mBAAsBzB,EAAO,wEACnC,GAAI2gB,GAAOliB,UAAUmD,eAAe5B,GACzC,MAAM,IAAI6B,MAAM,yBAA4B7B,EAAO,0DAGrD,GAAsB,oBAAXw2D,EACT,MAAM,IAAI30D,MAAM,uBAA0B7B,EAAO,8BAAiC5B,EAAQo4D,GAAU,KActG,OAXAR,GAAch2D,GAAQw2D,EAGlBx2D,IAAS+1D,KACPY,EAAOE,QAAQL,GACjB71C,GAAOliB,UAAUuB,GArRD,SAA2BA,EAAMw2D,GACvD,IAAIQ,EAAqB,WAOvBZ,GAAkBtmD,KAAM,CACtB9P,KAAMA,EACNw2D,OAAQA,EACRC,SAAU,OACT,GACH,IAAIA,EAAWD,EAAOnzD,MAAMyM,KAAMzS,WAOlC,OANA84D,GAAmBrmD,KAAM9P,GACzBo2D,GAAkBtmD,KAAM,CACtB9P,KAAMA,EACNw2D,OAAQA,EACRC,SAAUA,IAELA,GAMT,OAHA9zD,OAAOC,KAAK4zD,GAAQxzD,SAAQ,SAAUY,GACpCozD,EAAmBpzD,GAAQ4yD,EAAO5yD,MAE7BozD,EA2PwBC,CAAkBj3D,EAAMw2D,GAEjD71C,GAAOliB,UAAUuB,GAAQs2D,GAAoBt2D,EAAMw2D,IAIhDA,GAcTG,EAAOO,iBAAmB,SAA0Bl3D,GAClD,GAAIA,IAAS+1D,GACX,MAAM,IAAIl0D,MAAM,mCAGdo0D,GAAaj2D,YACRg2D,GAAch2D,UACd2gB,GAAOliB,UAAUuB,KAgB5B22D,EAAOQ,WAAa,SAAoB57C,GAKtC,IAAIjW,EASJ,YAbc,IAAViW,IACFA,EAAQ5Y,OAAOC,KAAKozD,KAItBz6C,EAAMvY,SAAQ,SAAUhD,GACtB,IAAIw2D,EAASN,GAAUl2D,GAEnBw2D,KACFlxD,EAASA,GAAU,IACZtF,GAAQw2D,MAGZlxD,GAaTqxD,EAAOS,iBAAmB,SAA0Bp3D,GAClD,IAAIw2D,EAASN,GAAUl2D,GACvB,OAAOw2D,GAAUA,EAAOI,SAAW,IAG9BD,EAxQiB,GAwR1BA,GAAOT,UAAYA,GAOnBS,GAAOZ,iBAAmBA,GAC1BY,GAAOI,eAAehB,GAAkBY,IAOxCh2C,GAAOliB,UAAUq+B,YAAc,SAAU98B,GACvC,QAAS8P,KAAqB,iBAAsC,IAAjCA,KAAqB,eAAE9P,IAS5D2gB,GAAOliB,UAAU44D,UAAY,SAAUr3D,GACrC,QAASi2D,GAAaj2D,IA2ExB,IAsDIs3D,GAAc,SAAqB/9C,GACrC,OAA2B,IAApBA,EAAGpa,QAAQ,KAAaoa,EAAGna,MAAM,GAAKma,GAmF/C,SAASuc,GAAQvc,EAAIlL,EAAS2K,GAC5B,IAAInK,EAASinB,GAAQyhC,UAAUh+C,GAE/B,GAAI1K,EASF,OARIR,GACFvO,EAAM2B,KAAK,WAAc8X,EAAK,0DAG5BP,GACFnK,EAAOmK,MAAMA,GAGRnK,EAGT,IAAIlL,EAAmB,kBAAP4V,EAAkBvL,GAAE,IAAMspD,GAAY/9C,IAAOA,EAE7D,IAAK5S,GAAKhD,GACR,MAAM,IAAI6zD,UAAU,sDASjB7zD,EAAGmQ,cAAc2jD,aAAgB9zD,EAAGmQ,cAActJ,KAAK1B,SAASnF,IACnE7D,EAAM2B,KAAK,mDAGb4M,EAAUA,GAAW,GACrBxP,EAAM,eAAemE,SAAQ,SAAUowD,GACrC,IAAI//C,EAAO+/C,EAAazvD,EAAI2U,GAAejK,IAEtCvL,GAASuQ,KAAS/S,MAAMY,QAAQmS,GAKrChF,EAAUiK,GAAejK,EAASgF,GAJhCvT,EAAM4B,MAAM,mDAQhB,IAAIg2D,EAAkB5+C,GAAYmD,aAAa,UAK/C,OAJApN,EAAS,IAAI6oD,EAAgB/zD,EAAI0K,EAAS2K,GAC1Cna,EAAM,SAASmE,SAAQ,SAAUowD,GAC/B,OAAOA,EAAavkD,MAEfA,EAST,GANAinB,GAAQl3B,OAASA,EACjBk3B,GAAQj3B,MAAQA,EAChBi3B,GAAQ6hC,KAv02BG,SAAc74D,EAAMC,GAC7BF,EAAMC,EAAMC,IAu02Bd+2B,GAAQ8hC,SAjy2BO,SAAkB94D,EAAMC,GACrCF,EAAMC,EAAM,GAAGE,OAAOD,GAAIsN,KAAI,SAAUwrD,GAMtC,OALc,SAASjhD,IAErB,OADA3X,EAAWH,EAAM8X,GACVihD,EAASx0D,WAAM,EAAQhG,iBA8x2BpCy4B,GAAQ72B,WAAaA,GAEqB,IAAtC,IAAS+nD,0BAAqCphD,KAAU,CAC1D,IAAI2J,GAAQvB,GAAE,wBAEd,IAAKuB,GAAO,CACVA,GAAQD,GAAmB,uBAC3B,IAAI43C,GAAOl5C,GAAE,QAETk5C,IACFA,GAAK1+C,aAAa+G,GAAO23C,GAAK3+C,YAGhCiH,GAAeD,GAAO,kJAO1BX,GAAiB,EAAGknB,IAOpBA,GAAQ8gC,QAAUj4D,EAQlBm3B,GAAQznB,QAAUsS,GAAOliB,UAAU4a,SAQnCyc,GAAQgiC,WAAa,WACnB,OAAOn3C,GAAOC,SAkBhBkV,GAAQyhC,UAAY,SAAUh+C,GAC5B,IACItP,EADA2W,EAAUD,GAAOC,QAGrB,GAAkB,kBAAPrH,EAAiB,CAC1B,IAAIw+C,EAAMT,GAAY/9C,GAClB1K,EAAS+R,EAAQm3C,GAErB,GAAIlpD,EACF,OAAOA,EAGT5E,EAAM+D,GAAE,IAAM+pD,QAEd9tD,EAAMsP,EAGR,GAAI5S,GAAKsD,GAAM,CACb,IAAI+tD,EAAO/tD,EACPguD,EAAUD,EAAKnpD,OACfywC,EAAW0Y,EAAK1Y,SAGpB,GAAI2Y,GAAWr3C,EAAQ0+B,GACrB,OAAO2Y,GAAWr3C,EAAQ0+B,KAehCxpB,GAAQoiC,cAAgB,WACtB,OAEEv1D,OAAOC,KAAK+d,GAAOC,SAASvU,KAAI,SAAUtB,GACxC,OAAO4V,GAAOC,QAAQ7V,MACrBjJ,OAAO6D,UAIdmwB,GAAQlV,QAAUD,GAAOC,QACzBkV,GAAQ7Z,aAAenD,GAAYmD,aAmBnC6Z,GAAQzV,kBAAoB,SAAUrgB,EAAMm4D,GACtC57C,GAAKG,OAAOy7C,IACdr4D,EAAM2B,KAAK,OAASzB,EAAO,+GAG7B8Y,GAAYuH,kBAAkB5c,KAAKqV,GAAa9Y,EAAMm4D,IAGxDriC,GAAQD,QAAUtZ,GAAKsZ,QACvBC,GAAQJ,aAAenZ,GAAKmZ,aAC5BI,GAAQsiC,IApyjBR,SAAat5D,EAAM24B,GACjBN,GAAYr4B,GAAQq4B,GAAYr4B,IAAS,GACzCq4B,GAAYr4B,GAAMgC,KAAK22B,IA2yjBzB90B,OAAO2Q,eAAewiB,GAAS,aAAc,CAC3CvyB,MAAO,GACP80D,WAAW,EACX1c,YAAY,IAEdh5C,OAAO2Q,eAAewiB,GAAQ2B,WAAY,aAAc,CACtDl0B,MAAO8zB,GACPghC,WAAW,EACX1c,YAAY,IASd7lB,GAAQ1vB,QAAUA,GASlB0vB,GAAQpwB,cAAgBA,GACxBowB,GAAQwiC,OAlXK,SAAgBC,EAAYC,QACf,IAApBA,IACFA,EAAkB,IAGpB,IAAIC,EAAW,WACbF,EAAWl1D,MAAMyM,KAAMzS,YAGrBq7D,EAAU,GAoBd,IAAK,IAAI14D,IAlBwB,WAA7B5B,EAAQo6D,IACNA,EAAgBh6D,cAAgBmE,OAAOlE,UAAUD,cACnDi6D,EAAWD,EAAgBh6D,aAG7Bk6D,EAAUF,GAC0B,oBAApBA,IAChBC,EAAWD,GAGb,IAAUC,EAAUF,GAGhBA,IACFE,EAASE,OAASJ,GAIHG,EACXA,EAAQ92D,eAAe5B,KACzBy4D,EAASh6D,UAAUuB,GAAQ04D,EAAQ14D,IAIvC,OAAOy4D,GAgVT3iC,GAAQ8iC,aAAetgD,GACvBwd,GAAQvhB,KAAOA,GACfuhB,GAAQihC,eAAiBJ,GAAOI,eAChCjhC,GAAQohC,iBAAmBP,GAAOO,iBAalCphC,GAAQ0gC,OAAS,SAAUx2D,EAAMw2D,GAE/B,OADA12D,EAAM2B,KAAK,wEACJk1D,GAAOI,eAAe/2D,EAAMw2D,IAGrC1gC,GAAQqhC,WAAaR,GAAOQ,WAC5BrhC,GAAQogC,UAAYS,GAAOT,UAC3BpgC,GAAQshC,iBAAmBT,GAAOS,iBAelCthC,GAAQ+iC,YAAc,SAAUn+C,EAAMxK,GACpC,IAAI4oD,EAIJ,OAFAp+C,GAAQ,GAAKA,GAAMxO,cACnB4pB,GAAQznB,QAAQuM,UAAYtC,GAAewd,GAAQznB,QAAQuM,YAAYk+C,EAAgB,IAAkBp+C,GAAQxK,EAAM4oD,IAChHhjC,GAAQznB,QAAQuM,UAAUF,IAUnCob,GAAQ31B,IAAML,EACdg2B,GAAQ10B,aAAeA,EACvB00B,GAAQijC,gBAAkBjjC,GAAQrU,iBAAmBA,GACrDqU,GAAQwM,WAAaA,GACrBxM,GAAQkjC,cAp8fR,SAAuBC,GACrB52B,GAAiB42B,GAo8fnBnjC,GAAQojC,gBA77fR,WACE72B,GAAiBR,IA67fnB/L,GAAQzK,SAAWA,GACnByK,GAAQ5J,cAAgBA,GACxB4J,GAAQqjC,YAAcvkD,GACtBkhB,GAAQ/iB,GAAKA,GACb+iB,GAAQ7hB,IAAMA,GACd6hB,GAAQv0B,IAAMA,GACdu0B,GAAQliB,QAAUA,GAclBkiB,GAAQsjC,IAAM,IACdtjC,GAAQ/H,UAAYA,GACpB+H,GAAQxG,WAAaA,GACrBwG,GAAQtG,WAAaA,GACrB,CAAC,OAAQ,aAAc,WAAY,WAAY,WAAY,cAAe,cAAe,gBAAiB,gBAAiB,UAAW,gBAAiB,iBAAiBxsB,SAAQ,SAAU+H,GACxL+qB,GAAQ/qB,GAAK,WAEX,OADAjL,EAAM2B,KAAK,WAAasJ,EAAI,qCAAuCA,EAAI,cAChEmD,GAAInD,GAAG1H,MAAM,KAAMhG,eAG9By4B,GAAQpyB,cAAgBA,GAQxBoyB,GAAQujC,IAAMnrD,GAQd4nB,GAAQxK,IAAMe,GACdyJ,GAAQ+mB,mBAAqBA,GAG7B/mB,GAAQ+iC,YAAY,KAAM,CACxB,iBAAkB,oBAQpB,IAAIS,GAAa,IAabC,GAA0B,SAAiCC,EAAwBluC,EAAKmuC,GAI1F,OAAID,GAA0BC,GAAOA,EAAIC,aAAepuC,IAAQmuC,EAAIC,YAC3DD,EAAIC,YAGNpuC,GAGLquC,GAAS,SAAgBr2D,GAC3B,OAAIwyB,GAAQ31B,IAAIqB,MACPs0B,GAAQ31B,IAAIqB,MAAM+S,KAAKuhB,GAAS,OAAQxyB,EAAS,MAGnD,cAULs2D,GAAoB,EAAI,GAMxBC,GAAkBD,GAElBE,GAAe,SAAsBC,EAAYpwD,GACnD,IACIjK,EADAs6D,EAAU,GAGd,GAAID,GAAcA,EAAWp6D,OAE3B,IAAKD,EAAI,EAAGA,EAAIq6D,EAAWp6D,OAAQD,IAC7BiK,EAAUowD,EAAWx4C,MAAM7hB,GAAIq6D,EAAWv4C,IAAI9hB,KAChDs6D,EAAQl5D,KAAK,CAACi5D,EAAWx4C,MAAM7hB,GAAIq6D,EAAWv4C,IAAI9hB,KAKxD,OAAOo2B,GAAQrU,iBAAiBu4C,IAY9BC,GAAY,SAAmBt4C,EAAUkhB,GAC3C,OAAOi3B,GAAan4C,GAAU,SAAUJ,EAAOC,GAC7C,OAAOD,EAAQs4C,IAAmBh3B,GAAQrhB,EAAMq4C,IAAmBh3B,MAYnEq3B,GAAgB,SAAuBH,EAAYl3B,GACrD,OAAOi3B,GAAaC,GAAY,SAAUx4C,GACxC,OAAOA,EAAQq4C,IAAqB/2B,MAmHpCs3B,GAAiB,SAAwBC,GAC3C,IAAIC,EAAS,GAEb,IAAKD,IAAUA,EAAMz6D,OACnB,MAAO,GAGT,IAAK,IAAID,EAAI,EAAGA,EAAI06D,EAAMz6D,OAAQD,IAChC26D,EAAOv5D,KAAKs5D,EAAM74C,MAAM7hB,GAAK,OAAS06D,EAAM54C,IAAI9hB,IAGlD,OAAO26D,EAAO7wD,KAAK,OAkCjB8wD,GAAoB,SAA2BP,GAGjD,IAFA,IAAIQ,EAAiB,GAEZ76D,EAAI,EAAGA,EAAIq6D,EAAWp6D,OAAQD,IACrC66D,EAAez5D,KAAK,CAClBygB,MAAOw4C,EAAWx4C,MAAM7hB,GACxB8hB,IAAKu4C,EAAWv4C,IAAI9hB,KAIxB,OAAO66D,GA4CLC,GAAkB,SAAyBhvC,GAC7C,GAAKA,GAAMA,EAAE7rB,QAAW6rB,EAAEhK,IAI1B,OAAOgK,EAAEhK,IAAIgK,EAAE7rB,OAAS,IAkBtB86D,GAAc,SAAqBL,EAAOz3C,GAC5C,IAAIkgB,EAAO,EAEX,IAAKu3B,IAAUA,EAAMz6D,OACnB,OAAOkjC,EAGT,IAAK,IAAInjC,EAAI,EAAGA,EAAI06D,EAAMz6D,OAAQD,IAAK,CACrC,IAAI6hB,EAAQ64C,EAAM74C,MAAM7hB,GACpB8hB,EAAM44C,EAAM54C,IAAI9hB,GAEhBijB,EAAYnB,IAMdqhB,GADElgB,EAAYpB,GAASoB,GAAanB,EAC5BA,EAAMmB,EAKRnB,EAAMD,GAGhB,OAAOshB,GASLk2B,GAAkBjjC,GAAQijC,gBAc1B2B,GAA2B,SAAkCC,EAAUC,GAGzE,IAAKA,EAAQrb,QACX,OAAOqb,EAAQh5C,SAKjB,IAAItc,EAAS,EAWb,OAVCs1D,EAAQC,OAAS,IAAI73D,SAAQ,SAAU8zD,GACtCxxD,GAAUwxD,EAAEl1C,aAIbg5C,EAAQE,cAAgB,IAAI93D,SAAQ,SAAU8zD,GAC9B,SAAXA,EAAEh4D,OACJwG,GAAUq1D,EAASI,uBAGhBz1D,GAYL01D,GAAsB,SAA6BL,GACrD,OAAQA,EAASM,UAAY,IAAIz/C,QAAO,SAAUC,EAAKm/C,EAASM,GAqB9D,OApBIN,EAAQC,MACVD,EAAQC,MAAM73D,SAAQ,SAAUsjC,EAAM60B,GACpC1/C,EAAI3a,KAAK,CACP8gB,SAAU0kB,EAAK1kB,SACfw5C,aAAcF,EACdG,UAAWF,EACX70B,KAAMA,EACNs0B,QAASA,OAIbn/C,EAAI3a,KAAK,CACP8gB,SAAUg5C,EAAQh5C,SAClBw5C,aAAcF,EACdG,UAAW,KACXT,QAASA,EACTt0B,KAAM,OAIH7qB,IACN,KAGD6/C,GAAe,SAAsB3N,GACvC,IAAI4N,EAAc5N,EAAMsN,UAAYtN,EAAMsN,SAASt7D,QAAUguD,EAAMsN,SAAStN,EAAMsN,SAASt7D,OAAS,GACpG,OAAO47D,GAAeA,EAAYV,OAAS,IAGzCW,GAAoB,SAA2Bt7C,GACjD,IAAIu7C,EAAiBv7C,EAAKu7C,eAE1B,GAAKA,EAAL,CAIA,IAAIZ,EAAQY,EAAeZ,MAEvBa,GADeD,EAAeX,cACD,IAAIt/C,QAAO,SAAUmgD,EAAOC,GAC3D,OAAOD,GAAuB,SAAdC,EAAK98D,KAAkB,EAAI,KAC1C,GAEH,OADA48D,GAAab,GAASA,EAAMl7D,OAASk7D,EAAMl7D,OAAS,IAalDk8D,GAAgB,SAAuBC,EAAQnO,GACjD,GAAIA,EAAMoO,QACR,OAAO,EAIT,GAAID,GAAUA,EAAOE,2BACnB,OAAOF,EAAOE,2BAGhB,IAAIC,EAAWX,GAAa3N,GAAOhuD,OAAS,EAE5C,OAAIs8D,GAAYtO,EAAMuO,eAAiBvO,EAAMuO,cAAcC,aAClDxO,EAAMuO,cAAcC,aAClBF,GAAYtO,EAAMoN,mBACO,EAA3BpN,EAAMoN,mBACJpN,EAAMuO,eAAiBvO,EAAMuO,cAAcE,SAC7CzO,EAAMuO,cAAcE,SAClBzO,EAAM0O,eACe,EAAvB1O,EAAM0O,eAGR,GAoHLC,GAAmB,SAA0B3B,EAAU4B,EAAaC,GAKtE,GAJ2B,qBAAhBD,IACTA,EAAc5B,EAAS8B,cAAgB9B,EAASM,SAASt7D,QAGvD48D,EAAc5B,EAAS8B,cACzB,OAAO,EAIT,IAAIC,EAnHiB,SAA0B/B,EAAU4B,GACzD,IAAIj3D,EAAS,EACT5F,EAAI68D,EAAc5B,EAAS8B,cAG3B7B,EAAUD,EAASM,SAASv7D,GAGhC,GAAIk7D,EAAS,CACX,GAA6B,qBAAlBA,EAAQr5C,MACjB,MAAO,CACLjc,OAAQs1D,EAAQr5C,MAChBo7C,SAAS,GAIb,GAA2B,qBAAhB/B,EAAQp5C,IACjB,MAAO,CACLlc,OAAQs1D,EAAQp5C,IAAMo5C,EAAQh5C,SAC9B+6C,SAAS,GAKf,KAAOj9D,KAAK,CAGV,GAA2B,qBAF3Bk7D,EAAUD,EAASM,SAASv7D,IAET8hB,IACjB,MAAO,CACLlc,OAAQA,EAASs1D,EAAQp5C,IACzBm7C,SAAS,GAMb,GAFAr3D,GAAUo1D,GAAyBC,EAAUC,GAEhB,qBAAlBA,EAAQr5C,MACjB,MAAO,CACLjc,OAAQA,EAASs1D,EAAQr5C,MACzBo7C,SAAS,GAKf,MAAO,CACLr3D,OAAQA,EACRq3D,SAAS,GAqEIC,CAAiBjC,EAAU4B,GAE1C,GAAIG,EAASC,QAIX,OAAOD,EAASp3D,OAKlB,IAAIu3D,EApEgB,SAAyBlC,EAAU4B,GAMvD,IALA,IACI3B,EADAt1D,EAAS,EAET5F,EAAI68D,EAAc5B,EAAS8B,cAGxB/8D,EAAIi7D,EAASM,SAASt7D,OAAQD,IAAK,CAGxC,GAA6B,qBAF7Bk7D,EAAUD,EAASM,SAASv7D,IAET6hB,MACjB,MAAO,CACLjc,OAAQs1D,EAAQr5C,MAAQjc,EACxBq3D,SAAS,GAMb,GAFAr3D,GAAUo1D,GAAyBC,EAAUC,GAElB,qBAAhBA,EAAQp5C,IACjB,MAAO,CACLlc,OAAQs1D,EAAQp5C,IAAMlc,EACtBq3D,SAAS,GAMf,MAAO,CACLr3D,QAAS,EACTq3D,SAAS,GAuCGG,CAAgBnC,EAAU4B,GAExC,OAAIM,EAAQF,QAGHE,EAAQv3D,OAIVo3D,EAASp3D,OAASk3D,GAmBvB56C,GAAW,SAAkB+4C,EAAU4B,EAAaC,GACtD,IAAK7B,EACH,OAAO,EAST,GANuB,kBAAZ6B,IACTA,EAAU,GAKe,qBAAhBD,EAA6B,CAEtC,GAAI5B,EAASoC,cACX,OAAOpC,EAASoC,cAIlB,IAAKpC,EAASoB,QACZ,OAAO,IAAS35B,SAKpB,OAAOk6B,GAAiB3B,EAAU4B,EAAaC,IAgB7CQ,GAAe,SAAsB5L,GACvC,IAAI6L,EAAkB7L,EAAM6L,gBACxBC,EAAe9L,EAAM8L,aACrBC,EAAa/L,EAAM+L,WACnBC,EAAWhM,EAAMgM,SACjBC,EAAY,EAEhB,GAAIF,EAAaC,EAAU,CACzB,IAAIE,EAAQ,CAACF,EAAUD,GACvBA,EAAaG,EAAM,GACnBF,EAAWE,EAAM,GAGnB,GAAIH,EAAa,EAAG,CAClB,IAAK,IAAIz9D,EAAIy9D,EAAYz9D,EAAIwN,KAAKE,IAAI,EAAGgwD,GAAW19D,IAClD29D,GAAaJ,EAGfE,EAAa,EAGf,IAAK,IAAIv9D,EAAKu9D,EAAYv9D,EAAKw9D,EAAUx9D,IACvCy9D,GAAaH,EAAat9D,GAAIgiB,SAGhC,OAAOy7C,GAuBLE,GAAc,SAAqB5C,EAAU6B,EAASgB,EAAgBC,GACxE,IAAK9C,IAAaA,EAASM,SACzB,OAAO,KAGT,GAAIN,EAASoB,QACX,OAAOn6C,GAAS+4C,GAGlB,GAAgB,OAAZ6B,EACF,OAAO,KAGTA,EAAUA,GAAW,EACrB,IAAIkB,EAAqBpB,GAAiB3B,EAAUA,EAAS8B,cAAgB9B,EAASM,SAASt7D,OAAQ68D,GAQvG,OANIgB,IAEFE,GADAD,EAA6C,kBAApBA,EAA+BA,EAAkB5B,GAAc,KAAMlB,IAKzFztD,KAAKC,IAAI,EAAGuwD,IA6KjBC,GAAgB,SAAuBhD,GACzC,OAAOA,EAASiD,cAAgBjD,EAASiD,aAAejgE,KAAKC,OAY3DigE,GAAiB,SAAwBlD,GAC3C,OAAOA,EAASiD,cAAgBjD,EAASiD,eAAiBx7B,KAWxD07B,GAAY,SAAmBnD,GACjC,IAAIoD,EAAcJ,GAAchD,GAChC,OAAQA,EAAS7pD,WAAaitD,GA2C5Bn3C,GAAe,SAAsB64B,EAAMkb,GAC7C,OAAOA,EAASlzD,YAAckzD,EAASlzD,WAAWg4C,IAuChDue,GAA2B,SAAkClC,EAAQnO,GACvE,GAAgC,IAA5BmO,EAAOmC,UAAUt+D,OACnB,OAAO,EAGT,IAAIu+D,EAAmBvQ,EAAMlmD,WAAW02D,WAAa7xD,OAAO8xD,UAC5D,OAMc,IANPtC,EAAOmC,UAAUn8D,QAAO,SAAU64D,GACvC,QAAKmD,GAAUnD,KAIPA,EAASlzD,WAAW02D,WAAa,GAAKD,KAC7Cv+D,QAGD0+D,GAAgB,SAAuB7yC,EAAG8lC,GAI5C,SAAK9lC,IAAM8lC,IAAM9lC,GAAK8lC,GAAK9lC,IAAM8lC,KAK7B9lC,IAAM8lC,OAMN9lC,EAAEjS,KAAM+3C,EAAE/3C,IAAMiS,EAAEjS,KAAO+3C,EAAE/3C,SAM3BiS,EAAE8yC,cAAehN,EAAEgN,aAAe9yC,EAAE8yC,cAAgBhN,EAAEgN,iBAMtD9yC,EAAE8B,MAAOgkC,EAAEhkC,KAAO9B,EAAE8B,MAAQgkC,EAAEhkC,SAOhCixC,GAAmB,SAA0BzC,EAAQ7qD,GACvD,IAAIutD,EAAQ1C,GAAUA,EAAO2C,aAAe3C,EAAO2C,YAAYD,OAAS,GACpEvf,GAAQ,EAEZ,IAAK,IAAIyf,KAAaF,EAAO,CAC3B,IAAK,IAAIj6C,KAASi6C,EAAME,GAGtB,GAFAzf,EAAQhuC,EAASutD,EAAME,GAAWn6C,IAGhC,MAIJ,GAAI06B,EACF,MAIJ,QAASA,GAGP0f,GAAc,SAAqB7C,GAGrC,IAAKA,IAAWA,EAAOmC,YAAcnC,EAAOmC,UAAUt+D,OAMpD,OAHY4+D,GAAiBzC,GAAQ,SAAU8C,GAC7C,OAAOA,EAAQX,WAAaW,EAAQX,UAAUt+D,QAAUi/D,EAAQtxC,OAgCpE,IA1BA,IAAInC,EAAQ,SAAezrB,GACzB,IAAIi7D,EAAWmB,EAAOmC,UAAUv+D,GAC5Bm/D,EAASlE,EAASlzD,YAAckzD,EAASlzD,WAAWo3D,OAExD,OAAIA,GAAUA,EAAOv1D,MAAM,KAAKqM,OAAM,SAAUpM,GAC9C,OAAO,YAAaA,OAMVg1D,GAAiBzC,GAAQ,SAAU8C,GAC7C,OAAOP,GAAc1D,EAAUiE,MALxB,WAcF,CACL7pB,GAAG,IAIEr1C,EAAI,EAAGA,EAAIo8D,EAAOmC,UAAUt+D,OAAQD,IAAK,CAChD,IAAIo/D,EAAO3zC,EAAMzrB,GAEjB,GAAa,aAATo/D,GACkB,WAAlB1gE,EAAQ0gE,GAAoB,OAAOA,EAAK/pB,EAK9C,OAAO,GAILgqB,GAAW,CACblD,cAAeA,GACfj6C,SAAUA,GACVwW,SAnYa,SAAkBuiC,EAAU6B,EAASiB,GAClD,IACIh1B,EAAgB+zB,GAAW,EAC3Bt2B,EAAcq3B,GAAY5C,EAAU6B,GAFnB,EAE4CiB,GAEjE,OAAoB,OAAhBv3B,EACK6yB,KAGFA,GAAgBtwB,EAAevC,IA2XtC84B,oBA1WwB,SAA6BC,GAWrD,IAVA,IAAItE,EAAWsE,EAAMtE,SACjB7rC,EAAcmwC,EAAMnwC,YACpBowC,EAAuBD,EAAMC,qBAC7BC,EAAoBF,EAAME,kBAC1Bx8C,EAAYs8C,EAAMt8C,UAClBy8C,EAAmCH,EAAMG,iCACzCv8B,EAAO/T,EAAcnM,EACrB08C,EAAmBrE,GAAoBL,GACvCwC,EAAa,EAERz9D,EAAI,EAAGA,EAAI2/D,EAAiB1/D,OAAQD,IAAK,CAChD,IAAI4/D,EAAiBD,EAAiB3/D,GAEtC,GAAIw/D,IAAyBI,EAAelE,eAKX,kBAAtB+D,GAAsE,kBAA7BG,EAAejE,WAA0B8D,IAAsBG,EAAejE,WAAlI,CAIA8B,EAAaz9D,EACb,OAGF,GAAImjC,EAAO,EAAG,CAGZ,GAAIs6B,EAAa,EACf,IAAK,IAAI98B,EAAM88B,EAAa,EAAG98B,GAAO,EAAGA,IAAO,CAC9C,IAAIk/B,EAAkBF,EAAiBh/B,GAGvC,GAFAwC,GAAQ08B,EAAgB39C,SAEpBw9C,GACF,GAAIv8B,EAAO,EACT,cAEG,GAAIA,EAAO+2B,IAAqB,EACrC,SAGF,MAAO,CACLyB,UAAWkE,EAAgBlE,UAC3BD,aAAcmE,EAAgBnE,aAC9Bz4C,UAAWA,EAAYq6C,GAAa,CAClCC,gBAAiBtC,EAAS0B,eAC1Ba,aAAcmC,EACdlC,WAAYA,EACZC,SAAU/8B,KAQlB,MAAO,CACLg7B,UAAWgE,EAAiB,IAAMA,EAAiB,GAAGhE,WAAa,KACnED,aAAciE,EAAiB,IAAMA,EAAiB,GAAGjE,cAAgB,EACzEz4C,UAAWmM,GAOf,GAAIquC,EAAa,EAAG,CAClB,IAAK,IAAIqC,EAAMrC,EAAYqC,EAAM,EAAGA,IAGlC,IAFA38B,GAAQ83B,EAAS0B,gBAEN,EACT,MAAO,CACLhB,UAAWgE,EAAiB,IAAMA,EAAiB,GAAGhE,WAAa,KACnED,aAAciE,EAAiB,IAAMA,EAAiB,GAAGjE,cAAgB,EACzEz4C,UAAWmM,GAKjBquC,EAAa,EAKf,IAAK,IAAIsC,EAAMtC,EAAYsC,EAAMJ,EAAiB1/D,OAAQ8/D,IAAO,CAC/D,IAAIC,EAAmBL,EAAiBI,GAGxC,GAFA58B,GAAQ68B,EAAiB99C,SAErBw9C,GACF,GAAIv8B,EAAO,EACT,cAEG,GAAIA,EAAO+2B,IAAqB,EACrC,SAGF,MAAO,CACLyB,UAAWqE,EAAiBrE,UAC5BD,aAAcsE,EAAiBtE,aAC/Bz4C,UAAWA,EAAYq6C,GAAa,CAClCC,gBAAiBtC,EAAS0B,eAC1Ba,aAAcmC,EACdlC,WAAYA,EACZC,SAAUqC,KAMhB,MAAO,CACLrE,aAAciE,EAAiBA,EAAiB1/D,OAAS,GAAGy7D,aAC5DC,UAAWgE,EAAiBA,EAAiB1/D,OAAS,GAAG07D,UACzD14C,UAAWmM,IAyPbgvC,UAAWA,GACX6B,WAxMe,SAAoBhF,GACnC,OAAOA,EAAS7pD,UAwMhB6sD,cAAeA,GACfE,eAAgBA,GAChBN,YAAaA,GACbqC,MAlMU,SAAejS,GACzB,IAAK,IAAIjuD,EAAI,EAAGA,EAAIiuD,EAAMsN,SAASt7D,OAAQD,IACzC,GAAIiuD,EAAMsN,SAASv7D,GAAGuD,IACpB,OAAO,EAIX,OAAO,GA4LP2jB,aAAcA,GACdi5C,2BAzJ+B,SAAoCC,EAAiBC,EAAWpF,EAAUqF,GAKzG,YAJsB,IAAlBA,IACFA,EAAgB,GAGbp5C,GAAa,YAAa+zC,IAIpBmF,EAAkBnF,EAASlzD,WAAW02D,UAClB,EAAhB6B,GAAqBD,EAJ3B7f,KAoJT8d,yBAA0BA,GAC1BW,YAAaA,GACbN,cAAeA,GACf3D,yBAA0BA,IAExBv6D,GAAM21B,GAAQ31B,IAEd8/D,GAAmB,SAA0B/gE,EAAOouB,GACtD,OAAOpuB,EAAQ,IAAMouB,GAkHnB4yC,GAAoB,SAA2BpE,EAAQ7qD,GACpD6qD,EAAO2C,aAIZ,CAAC,QAAS,aAAaz7D,SAAQ,SAAUm9D,GACvC,GAAKrE,EAAO2C,YAAY0B,GAIxB,IAAK,IAAIC,KAAYtE,EAAO2C,YAAY0B,GACtC,IAAK,IAAIE,KAAYvE,EAAO2C,YAAY0B,GAAWC,GAAW,CAC5D,IAAIE,EAAkBxE,EAAO2C,YAAY0B,GAAWC,GAAUC,GAC9DpvD,EAASqvD,EAAiBH,EAAWC,EAAUC,QAqBnDE,GAAqB,SAA4BnP,GACnD,IAAIuJ,EAAWvJ,EAAMuJ,SACjBrtC,EAAM8jC,EAAM9jC,IACZ/T,EAAK63C,EAAM73C,GACfohD,EAASphD,GAAKA,EACdohD,EAAS6F,gBAAkB,EAEvBlzC,IAIFqtC,EAASrtC,IAAMA,GAUjBqtC,EAASlzD,WAAakzD,EAASlzD,YAAc,IAmG3Cg5D,GAAwB,SAA+B3E,EAAQxuC,GACjEwuC,EAAOxuC,IAAMA,EAEb,IAAK,IAAI5tB,EAAI,EAAGA,EAAIo8D,EAAOmC,UAAUt+D,OAAQD,IAC3C,IAAKo8D,EAAOmC,UAAUv+D,GAAG4tB,IAAK,CAI5B,IAAIozC,EAAW,mBAAqBhhE,EACpCo8D,EAAOmC,UAAUv+D,GAAG4tB,IAAMozC,EAI9B,IAAIC,EAAkBhC,GAAY7C,GAClCoE,GAAkBpE,GAAQ,SAAUt0D,EAAY24D,EAAWC,EAAUC,GACnE,IAAIO,EAAU,mBAAqBT,EAAY,IAAMC,EAAW,IAAMC,EAEtE,IAAK74D,EAAWy2D,YAAcz2D,EAAWy2D,UAAUt+D,OAAQ,CAIzD,GAAIghE,GAAiC,UAAdR,IAA0B34D,EAAW8lB,IAC1D,IAAK,IAAI1tB,EAAK,EAAGA,EAAKk8D,EAAOmC,UAAUt+D,OAAQC,IAAM,CACnD,IAAIk3D,EAAIgF,EAAOmC,UAAUr+D,GAEzB,GAAIk3D,EAAErvD,YAAcqvD,EAAErvD,WAAW+2D,OAAS1H,EAAErvD,WAAW+2D,QAAU4B,EAC/D,OAKN54D,EAAWy2D,UAAY,CAAC,IAAS,GAAIz2D,IAGvCA,EAAWy2D,UAAUj7D,SAAQ,SAAU8zD,EAAGp3D,GACxC,IAAI6Z,EAAK0mD,GAAiBvgE,EAAGkhE,GAEzB9J,EAAExpC,IACJwpC,EAAEwH,YAAcxH,EAAEwH,aAAehF,GAAWwC,EAAOxuC,IAAKwpC,EAAExpC,MAM1DwpC,EAAExpC,IAAY,IAAN5tB,EAAUkhE,EAAUrnD,EAG5Bu9C,EAAEwH,YAAcxH,EAAExpC,KAGpBwpC,EAAEv9C,GAAKu9C,EAAEv9C,IAAMA,EAGfu9C,EAAErvD,WAAaqvD,EAAErvD,YAAc,GAE/Bq0D,EAAOmC,UAAUnH,EAAEv9C,IAAMu9C,EACzBgF,EAAOmC,UAAUnH,EAAExpC,KAAOwpC,QA/IN,SAA6BgF,GAGrD,IAFA,IAAIp8D,EAAIo8D,EAAOmC,UAAUt+D,OAElBD,KAAK,CACV,IAAIi7D,EAAWmB,EAAOmC,UAAUv+D,GAChC6gE,GAAmB,CACjB5F,SAAUA,EACVphD,GAAI0mD,GAAiBvgE,EAAGi7D,EAASrtC,OAEnCqtC,EAAS2D,YAAchF,GAAWwC,EAAOxuC,IAAKqtC,EAASrtC,KACvDwuC,EAAOmC,UAAUtD,EAASphD,IAAMohD,EAEhCmB,EAAOmC,UAAUtD,EAASrtC,KAAOqtC,EAK5BA,EAASlzD,WAAW02D,WACvBh+D,GAAIsB,KAAK,uEAgIbo/D,CAAoB/E,GApHM,SAA+BA,GACzDoE,GAAkBpE,GAAQ,SAAUt0D,GAC9BA,EAAW8lB,MACb9lB,EAAW82D,YAAchF,GAAWwC,EAAOxuC,IAAK9lB,EAAW8lB,SAkH/DwzC,CAAsBhF,IAGpBiF,GAAiBjrC,GAAQ8iC,aACzBoI,GAAgBlrC,GAAQqjC,YA+ExB8H,GAAgB,SAAuBz1C,EAAG8lC,GAC5C,IAAK9lC,EACH,OAAO8lC,EAGT,IAAIhsD,EAASy7D,GAAev1C,EAAG8lC,GAS/B,GANI9lC,EAAEsvC,eAAiBxJ,EAAEwJ,qBAChBx1D,EAAOw1D,aAKZtvC,EAAEqvC,QAAUvJ,EAAEuJ,aACTv1D,EAAOu1D,WAGT,GAAIrvC,EAAEqvC,OAASvJ,EAAEuJ,MACtB,IAAK,IAAIn7D,EAAI,EAAGA,EAAI4xD,EAAEuJ,MAAMl7D,OAAQD,IAC9B8rB,EAAEqvC,OAASrvC,EAAEqvC,MAAMn7D,KACrB4F,EAAOu1D,MAAMn7D,GAAKqhE,GAAev1C,EAAEqvC,MAAMn7D,GAAI4xD,EAAEuJ,MAAMn7D,KAiB3D,OAVK8rB,EAAE01C,SAAW5P,EAAE4P,UAClB57D,EAAO47D,SAAU,GAKf11C,EAAE+zB,UAAY+R,EAAE/R,UAClBj6C,EAAOi6C,SAAU,GAGZj6C,GA8CL67D,GAAqB,SAA4BvG,EAASwG,IAGvDxG,EAAQ0D,aAAe1D,EAAQttC,MAClCstC,EAAQ0D,YAAchF,GAAW8H,EAASxG,EAAQttC,MAGhDstC,EAAQ33D,MAAQ23D,EAAQ33D,IAAIq7D,cAC9B1D,EAAQ33D,IAAIq7D,YAAchF,GAAW8H,EAASxG,EAAQ33D,IAAIqqB,MAGxDstC,EAAQvuD,MAAQuuD,EAAQvuD,IAAIiyD,cAC9B1D,EAAQvuD,IAAIiyD,YAAchF,GAAW8H,EAASxG,EAAQvuD,IAAIihB,MAGxDstC,EAAQvuD,KAAOuuD,EAAQvuD,IAAIpJ,MAAQ23D,EAAQvuD,IAAIpJ,IAAIq7D,cACrD1D,EAAQvuD,IAAIpJ,IAAIq7D,YAAchF,GAAW8H,EAASxG,EAAQvuD,IAAIpJ,IAAIqqB,MAGhEstC,EAAQC,OAASD,EAAQC,MAAMl7D,QACjCi7D,EAAQC,MAAM73D,SAAQ,SAAU8zD,GAC1BA,EAAEwH,cAINxH,EAAEwH,YAAchF,GAAW8H,EAAStK,EAAExpC,SAItCstC,EAAQE,cAAgBF,EAAQE,aAAan7D,QAC/Ci7D,EAAQE,aAAa93D,SAAQ,SAAU8zD,GACjCA,EAAEwH,cAINxH,EAAEwH,YAAchF,GAAW8H,EAAStK,EAAExpC,UAKxC+zC,GAAiB,SAAwB1T,GAC3C,IAAIsN,EAAWtN,EAAMsN,UAAY,GAC7BQ,EAAiB9N,EAAM8N,eAI3B,GAAIA,GAAkBA,EAAeZ,OAASY,EAAeZ,MAAMl7D,OAAQ,CAIzE,GAAI87D,EAAeX,aACjB,IAAK,IAAIp7D,EAAI,EAAGA,EAAI+7D,EAAeX,aAAan7D,OAAQD,IACtD,GAA4C,QAAxC+7D,EAAeX,aAAap7D,GAAGZ,KACjC,OAAOm8D,EAMbQ,EAAe75C,SAAW+rC,EAAM0O,eAChCZ,EAAelc,SAAU,EACzB0b,EAASn6D,KAAK26D,GAGhB,OAAOR,GAMLqG,GAAsB,SAA6B91C,EAAG8lC,GACxD,OAAO9lC,IAAM8lC,GAAK9lC,EAAEyvC,UAAY3J,EAAE2J,UAAYzvC,EAAEyvC,SAASt7D,SAAW2xD,EAAE2J,SAASt7D,QAAU6rB,EAAEuwC,UAAYzK,EAAEyK,SAAWvwC,EAAEixC,gBAAkBnL,EAAEmL,eAAiBjxC,EAAEiwC,iBAAmBnK,EAAEmK,gBAgBhL8F,GAAiB,SAAsBzF,EAAQ0F,EAAUC,QACpC,IAAnBA,IACFA,EAAiBH,IAGnB,IAAIh8D,EAASy7D,GAAejF,EAAQ,IAChC4F,EAAWp8D,EAAO24D,UAAUuD,EAASjoD,IAEzC,IAAKmoD,EACH,OAAO,KAGT,GAAID,EAAeC,EAAUF,GAC3B,OAAO,KAGTA,EAASvG,SAAWoG,GAAeG,GACnC,IAAIG,EAAiBZ,GAAeW,EAAUF,GAO9C,GALIG,EAAelG,iBAAmB+F,EAAS/F,uBACtCkG,EAAelG,eAIpBiG,EAASzG,SAAU,CACrB,GAAIuG,EAASI,KAAM,CACjBJ,EAASvG,SAAWuG,EAASvG,UAAY,GAGzC,IAAK,IAAIv7D,EAAI,EAAGA,EAAI8hE,EAASI,KAAKC,gBAAiBniE,IACjD8hE,EAASvG,SAASr6D,QAAQ,CACxBsgE,SAAS,IAKfS,EAAe1G,SAtJE,SAAwBpD,EAAUr7B,EAAQslC,GAC7D,IAAIC,EAAclK,EAASz4D,QACvB4iE,EAAcxlC,EAAOp9B,QACzB0iE,EAASA,GAAU,EAInB,IAHA,IACIG,EADA38D,EAAS,GAGJouC,EAAW,EAAGA,EAAWsuB,EAAYriE,OAAQ+zC,IAAY,CAChE,IAAIwuB,EAAaH,EAAYruB,EAAWouB,GACpCK,EAAaH,EAAYtuB,GAEzBwuB,GACFD,EAAaC,EAAW71D,KAAO41D,EAC/B38D,EAAOxE,KAAKmgE,GAAciB,EAAYC,MAGlCF,IAAeE,EAAW91D,MAC5B81D,EAAW91D,IAAM41D,GAGnB38D,EAAOxE,KAAKqhE,IAIhB,OAAO78D,EA8HqB88D,CAAeV,EAASzG,SAAUuG,EAASvG,SAAUuG,EAAS/E,cAAgBiF,EAASjF,eAInHkF,EAAe1G,SAASj4D,SAAQ,SAAU43D,GACxCuG,GAAmBvG,EAAS+G,EAAerD,gBAK7C,IAAK,IAAI1+D,EAAK,EAAGA,EAAK0F,EAAO24D,UAAUt+D,OAAQC,IACzC0F,EAAO24D,UAAUr+D,GAAI2Z,KAAOioD,EAASjoD,KACvCjU,EAAO24D,UAAUr+D,GAAM+hE,GAmB3B,OAfAr8D,EAAO24D,UAAUuD,EAASjoD,IAAMooD,EAEhCr8D,EAAO24D,UAAUuD,EAASl0C,KAAOq0C,EAEjCzB,GAAkBpE,GAAQ,SAAUt0D,EAAY24D,EAAWC,EAAUC,GACnE,GAAK74D,EAAWy2D,UAIhB,IAAK,IAAI59B,EAAM,EAAGA,EAAM74B,EAAWy2D,UAAUt+D,OAAQ0gC,IAC/CmhC,EAASjoD,KAAO/R,EAAWy2D,UAAU59B,GAAK9mB,KAC5C/R,EAAWy2D,UAAU59B,GAAOmhC,MAI3Bl8D,GAcL+8D,GAAe,SAAsB1U,EAAOnxB,GAC9C,IAAIy+B,EAAWtN,EAAMsN,UAAY,GAC7BM,EAAcN,EAASA,EAASt7D,OAAS,GACzC2iE,EAAW/G,GAAeA,EAAYV,OAASU,EAAYV,MAAMU,EAAYV,MAAMl7D,OAAS,GAC5F4iE,EAAeD,GAAYA,EAAS1gD,UAAY25C,GAAeA,EAAY35C,SAE/E,OAAI4a,GAAU+lC,EACU,IAAfA,EAKyD,KAA1D5U,EAAMoN,oBAAsBpN,EAAM0O,gBAAkB,KAa1DmG,GAA8B,SAAUn7C,GAG1C,SAASm7C,EAAer/C,EAAKs/C,EAAKp0D,GAChC,IAAI4G,EAQJ,QANgB,IAAZ5G,IACFA,EAAU,IAGZ4G,EAAQoS,EAAa5jB,KAAKqM,OAASA,MAE9BqT,EACH,MAAM,IAAIthB,MAAM,kDAGlBoT,EAAMytD,QAAU/I,GAAO,kBACvB,IAAIgJ,EAAWt0D,EACXu0D,EAAwBD,EAASl1C,gBACjCA,OAA4C,IAA1Bm1C,GAA2CA,EAC7DC,EAAwBF,EAASG,wBACjCA,OAAoD,IAA1BD,GAA2CA,EACzE5tD,EAAMkO,IAAMA,EACZlO,EAAM8tD,KAAON,EACbxtD,EAAMwY,gBAAkBA,EACxBxY,EAAM6tD,wBAA0BA,EAChC,IAAIE,EAAaP,EAAIppD,SAgBrB,OAfApE,EAAMguD,iBAAmBD,GAAcA,EAAWC,kBAAoB,GACtEhuD,EAAMiuD,iBAAmBF,GAAcA,EAAWE,kBAAoB,GACtEjuD,EAAMkuD,kBAAoBH,GAAcA,EAAWG,oBAAqB,EAEpErtC,GAAQ1vB,QAAQf,aAClB4P,EAAMkuD,mBAAoB,GAI5BluD,EAAMwC,MAAQ,eAEdxC,EAAMmuD,0BAA4BnuD,EAAMmuD,0BAA0B7uD,KAAK,IAAuBU,IAE9FA,EAAMlC,GAAG,qBAAsBkC,EAAMmuD,2BAE9BnuD,EAzCT,IAAeutD,EAAgBn7C,GA4C/B,IAAIlX,EAASqyD,EAAe/jE,UAsgB5B,OApgBA0R,EAAOizD,0BAA4B,WACjC,IAAI1sD,EAAS5G,KAEb,GAAmB,kBAAfA,KAAK2H,MAAT,CAKA,IAAIk2C,EAAQ79C,KAAK69C,QACbrgC,EAAMgsC,GAAWxpD,KAAKgsD,OAAOxuC,IAAKqgC,EAAMrgC,KAExCxd,KAAKqzD,oBACP71C,EA7ZwB,SAAiCA,EAAKqgC,GAClE,GAAIA,EAAMoO,UAAYpO,EAAMuO,cAC1B,OAAO5uC,EAGT,IAAI+1C,EAAa,GAEjB,GAAI1V,EAAMuO,cAAcoH,eAAgB,CACtC,IAAI7H,EAAiB9N,EAAM8N,eAEvB8H,EAAU5V,EAAM8O,cAAgB9O,EAAMsN,SAASt7D,OAInD,GAAI87D,EAAgB,CAClB,IAAIZ,EAAQY,EAAeZ,OAAS,GAEhC2I,EAAWhI,GAAkB7N,GAAS,EAItC6V,GAAY,GAAKA,IAAa3I,EAAMl7D,OAAS,IAG/C0jE,EAAWI,UAAYD,IAYrBA,GAAY,GAAK3I,EAAMl7D,SACzB4jE,IAMJF,EAAWK,SAAWH,EASxB,GANI5V,EAAMuO,eAAiBvO,EAAMuO,cAAcyH,eAG7CN,EAAWO,UAAYjW,EAAMuO,cAAc2H,kBAAoB,KAAO,OAGpElhE,OAAOC,KAAKygE,GAAY1jE,OAAQ,CAClC,IAAImkE,EAAY,IAAI,IAASC,IAAIz2C,GACjC,CAAC,YAAa,WAAY,aAAatqB,SAAQ,SAAUhD,GAClDqjE,EAAWzhE,eAAe5B,IAI/B8jE,EAAUE,aAAa5zD,IAAIpQ,EAAMqjE,EAAWrjE,OAE9CstB,EAAMw2C,EAAUphE,WAGlB,OAAO4qB,EA6VG22C,CAAwB32C,EAAKqgC,IAGrC79C,KAAK2H,MAAQ,wBACb3H,KAAKk8C,QAAUl8C,KAAKizD,KAAK3J,IAAI,CAC3B9rC,IAAKA,EACLG,gBAAiB3d,KAAK2d,kBACrB,SAAU/rB,EAAO+3D,GAElB,GAAK/iD,EAAOs1C,QAIZ,OAAItqD,EACKgV,EAAOwtD,qBAAqBxtD,EAAOs1C,QAASt1C,EAAOi3C,QAAS,sBAGrEj3C,EAAOytD,aAAa,CAClBC,eAAgB1tD,EAAOs1C,QAAQqY,aAC/B/4C,IAAK5U,EAAOi3C,QAAQrgC,IACpB/T,GAAI7C,EAAOi3C,QAAQp0C,UAKzBpJ,EAAO+zD,qBAAuB,SAA8B9K,EAAKuB,EAAU2J,GACzE,IAAIh3C,EAAMqtC,EAASrtC,IACf/T,EAAKohD,EAASphD,GAElBzJ,KAAKk8C,QAAU,KAEXsY,IACFx0D,KAAK2H,MAAQ6sD,GAGfx0D,KAAKpO,MAAQ,CACXi5D,SAAU7qD,KAAKgsD,OAAOmC,UAAU1kD,GAChC0I,OAAQm3C,EAAIn3C,OACZF,QAAS,sCAAwCuL,EAAM,IACvD+2C,aAAcjL,EAAIiL,aAClB3pD,KAAM0+C,EAAIn3C,QAAU,IAAM,EAAI,GAEhCnS,KAAK8D,QAAQ,UAGfzD,EAAOo0D,eAAiB,SAAwBrkD,GAC9C,IAAIpJ,EAAShH,KAETwb,EAAMpL,EAAKoL,IAEf,OAvwBgB,SAAuBpL,GACzC,IAAIskD,EAAStkD,EAAKskD,OACdC,EAASvkD,EAAKukD,OACdC,EAAiBxkD,EAAKwkD,eACtBC,EAAwBzkD,EAAK+iD,iBAC7BA,OAA6C,IAA1B0B,EAAmC,GAAKA,EAC3DC,EAAwB1kD,EAAKgjD,iBAC7BA,OAA6C,IAA1B0B,EAAmC,GAAKA,EAC3DzB,EAAoBjjD,EAAKijD,kBACzB32C,EAAS,IAAI,IAEbg4C,GACFh4C,EAAOzZ,GAAG,OAAQyxD,GAGhBC,GACFj4C,EAAOzZ,GAAG,OAAQ0xD,GAGpBxB,EAAiBjgE,SAAQ,SAAU6hE,GACjC,OAAOr4C,EAAOs4C,UAAUD,MAE1B3B,EAAiBlgE,SAAQ,SAAU+hE,GACjC,OAAOv4C,EAAOw4C,aAAaD,MAE7Bv4C,EAAO1rB,KAAK4jE,GACZl4C,EAAOhL,MACP,IAAIyjD,EAAWz4C,EAAOy4C,SAqBtB,GAlBK9B,IACH,CAAC,iBAAkB,OAAQ,gBAAiB,mBAAoB,UAAW,sBAAsBngE,SAAQ,SAAU+H,GAC7Gk6D,EAASrjE,eAAemJ,WACnBk6D,EAASl6D,MAIhBk6D,EAAShK,UACXgK,EAAShK,SAASj4D,SAAQ,SAAU43D,GAClC,CAAC,QAAS,gBAAgB53D,SAAQ,SAAU+H,GACtC6vD,EAAQh5D,eAAemJ,WAClB6vD,EAAQ7vD,WAOpBk6D,EAAS5I,eAAgB,CAC5B,IAAIA,EAAiB,GAEjB4I,EAAShK,UAAYgK,EAAShK,SAASt7D,SACzC08D,EAAiB4I,EAAShK,SAASz/C,QAAO,SAAUC,EAAKumB,GACvD,OAAO90B,KAAKC,IAAIsO,EAAKumB,EAAEpgB,YACtB,IAGD4iD,GACFA,EAAO,gDAAkDnI,GAG3D4I,EAAS5I,eAAiBA,EAG5B,IAAIxB,EAAQS,GAAa2J,GAEzB,GAAIpK,EAAMl7D,SAAWslE,EAASlK,mBAAoB,CAChD,IAAIA,EAAqBF,EAAMr/C,QAAO,SAAUC,EAAKq7C,GACnD,OAAO5pD,KAAKC,IAAIsO,EAAKq7C,EAAEl1C,YACtB,GAEC4iD,IACFA,EAAO,oDAAsDzJ,GAC7D56D,GAAIuB,MAAM,0MAGZujE,EAASlK,mBAAqBA,EAGhC,OAAOkK,EAwrBEC,CAAc,CACnBV,OAAQ,SAAgBpT,GACtB,IAAIrvC,EAAUqvC,EAAMrvC,QACpB,OAAOjL,EAAO4rD,QAAQ,wBAA0Bp3C,EAAM,KAAOvJ,IAE/D0iD,OAAQ,SAAgBnH,GACtB,IAAIv7C,EAAUu7C,EAAMv7C,QACpB,OAAOjL,EAAO4rD,QAAQ,wBAA0Bp3C,EAAM,KAAOvJ,IAE/D2iD,eAVmBxkD,EAAKwkD,eAWxBzB,iBAAkBnzD,KAAKmzD,iBACvBC,iBAAkBpzD,KAAKozD,iBACvBC,kBAAmBrzD,KAAKqzD,qBAiB5BhzD,EAAOg0D,aAAe,SAAsBlF,GAC1C,IAAImF,EAAiBnF,EAAMmF,eACvBe,EAAiBlG,EAAMkG,eACvB75C,EAAM2zC,EAAM3zC,IACZ/R,EAAK0lD,EAAM1lD,GAEfzJ,KAAKk8C,QAAU,KACfl8C,KAAK2H,MAAQ,gBACb,IAAIkjD,EAAWwK,GAAkBr1D,KAAKy0D,eAAe,CACnDj5C,IAAKA,EACLo5C,eAAgBN,IAElBzJ,EAASyK,YAAcznE,KAAKC,MAC5B2iE,GAAmB,CACjB5F,SAAUA,EACVrtC,IAAKhC,EACL/R,GAAIA,IAGN,IAAIijB,EAAS+kC,GAAezxD,KAAKgsD,OAAQnB,GACzC7qD,KAAKusD,eAAiB1B,EAASI,oBAAsBJ,EAAS0B,eAC9DvsD,KAAKu1D,cAAgB,KAEjB7oC,GACF1sB,KAAKgsD,OAASt/B,EACd1sB,KAAKw1D,OAASx1D,KAAKgsD,OAAOmC,UAAU1kD,IAEpCzJ,KAAK8D,QAAQ,qBAGf9D,KAAKy1D,0BAA0BlD,GAAavyD,KAAK69C,UAAWnxB,IAC5D1sB,KAAK8D,QAAQ,mBAOfzD,EAAOiK,QAAU,WACftK,KAAK8D,QAAQ,WACb9D,KAAK01D,cACL,IAASpwD,aAAatF,KAAK21D,oBAC3B,IAASrwD,aAAatF,KAAK41D,uBAC3B51D,KAAKvO,OAGP4O,EAAOq1D,YAAc,WACnB,GAAI11D,KAAKk8C,QAAS,CAChB,IAAI2Z,EAAa71D,KAAKk8C,QACtBl8C,KAAKk8C,QAAU,KACf2Z,EAAWC,mBAAqB,KAChCD,EAAWE,UAmBf11D,EAAOw9C,MAAQ,SAAegN,EAAUmL,GACtC,IAAIhmD,EAAShQ,KAGb,IAAK6qD,EACH,OAAO7qD,KAAKw1D,OAId,GAAmB,iBAAfx1D,KAAK2H,MACP,MAAM,IAAI5V,MAAM,qCAAuCiO,KAAK2H,OAK9D,GAAwB,kBAAbkjD,EAAuB,CAChC,IAAK7qD,KAAKgsD,OAAOmC,UAAUtD,GACzB,MAAM,IAAI94D,MAAM,yBAA2B84D,GAG7CA,EAAW7qD,KAAKgsD,OAAOmC,UAAUtD,GAKnC,GAFA,IAASvlD,aAAatF,KAAK41D,uBAEvBI,EAAJ,CACE,IAAIC,GAASpL,EAASI,oBAAsBJ,EAAS0B,gBAAkB,EAAI,KAAQ,IACnFvsD,KAAK41D,sBAAwB,IAAS12D,WAAWc,KAAK69C,MAAMp5C,KAAKzE,KAAM6qD,GAAU,GAAQoL,OAF3F,CAMA,IAAIzB,EAAgBx0D,KAAK2H,MACrBuuD,GAAel2D,KAAKw1D,QAAU3K,EAASphD,KAAOzJ,KAAKw1D,OAAO/rD,GAC1D0sD,EAAoBn2D,KAAKgsD,OAAOmC,UAAUtD,EAASphD,IAEvD,GAAI0sD,GAAqBA,EAAkBlK,SAE3CpB,EAASoB,SAAWpB,EAASM,SAASt7D,OA0BpC,OAxBImQ,KAAKk8C,UACPl8C,KAAKk8C,QAAQ4Z,mBAAqB,KAClC91D,KAAKk8C,QAAQ6Z,QACb/1D,KAAKk8C,QAAU,MAGjBl8C,KAAK2H,MAAQ,gBACb3H,KAAKw1D,OAAS3K,OAEVqL,IACFl2D,KAAK8D,QAAQ,iBAES,gBAAlB0wD,EAMFx0D,KAAK8D,QAAQ,kBAEb9D,KAAK8D,QAAQ,iBAcnB,GAFA9D,KAAKy1D,0BAA0BlD,GAAa1H,GAAU,IAEjDqL,EAAL,CAMA,GAFAl2D,KAAK2H,MAAQ,kBAET3H,KAAKk8C,QAAS,CAChB,GAAI2O,EAAS2D,cAAgBxuD,KAAKk8C,QAAQ1gC,IAGxC,OAGFxb,KAAKk8C,QAAQ4Z,mBAAqB,KAClC91D,KAAKk8C,QAAQ6Z,QACb/1D,KAAKk8C,QAAU,KAIbl8C,KAAKw1D,QACPx1D,KAAK8D,QAAQ,iBAGf9D,KAAKu1D,cAAgB1K,EACrB7qD,KAAKk8C,QAAUl8C,KAAKizD,KAAK3J,IAAI,CAC3B9rC,IAAKqtC,EAAS2D,YACd7wC,gBAAiB3d,KAAK2d,kBACrB,SAAU/rB,EAAO+3D,GAElB,GAAK35C,EAAOksC,QAAZ,CAOA,GAHA2O,EAASyK,YAAcznE,KAAKC,MAC5B+8D,EAAS2D,YAAc/E,GAAwBz5C,EAAOgjD,wBAAyBnI,EAAS2D,YAAa7E,GAEjG/3D,EACF,OAAOoe,EAAOokD,qBAAqBpkD,EAAOksC,QAAS2O,EAAU2J,GAG/DxkD,EAAOqkD,aAAa,CAClBC,eAAgB3K,EAAI4K,aACpB/4C,IAAKqvC,EAASrtC,IACd/T,GAAIohD,EAASphD,KAIO,gBAAlB+qD,EACFxkD,EAAOlM,QAAQ,kBAEfkM,EAAOlM,QAAQ,sBASrBzD,EAAO6U,MAAQ,WACTlV,KAAK21D,qBACP,IAASrwD,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,MAG5B31D,KAAK01D,cAEc,iBAAf11D,KAAK2H,QAGP3H,KAAKo2D,SAAU,GAIE,oBAAfp2D,KAAK2H,MAIH3H,KAAKw1D,OACPx1D,KAAK2H,MAAQ,gBAEb3H,KAAK2H,MAAQ,cAES,0BAAf3H,KAAK2H,QACd3H,KAAK2H,MAAQ,kBAQjBtH,EAAOwf,KAAO,SAAcm2C,GAC1B,IAAI7lD,EAASnQ,KAETA,KAAK21D,qBACP,IAASrwD,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,MAG5B,IAAI9X,EAAQ79C,KAAK69C,QAEjB,GAAImY,EAAJ,CACE,IAAIC,EAAQpY,GAASA,EAAMoN,oBAAsBpN,EAAM0O,gBAAkB,EAAI,IAAO,IACpFvsD,KAAK21D,mBAAqB,IAASz2D,YAAW,WAC5CiR,EAAOwlD,mBAAqB,KAE5BxlD,EAAO0P,SACNo2C,QAIAj2D,KAAKo2D,QAKNvY,IAAUA,EAAMoO,QAClBjsD,KAAK8D,QAAQ,sBAEb9D,KAAK8D,QAAQ,kBAPb9D,KAAKyR,SAWTpR,EAAOo1D,0BAA4B,SAAmCQ,GACpE,IAAIlyC,EAAS/jB,KAETA,KAAK21D,qBACP,IAASrwD,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,MAIvB31D,KAAK69C,UAAW79C,KAAK69C,QAAQoO,UAIlCjsD,KAAK21D,mBAAqB,IAASz2D,YAAW,WAC5C6kB,EAAO4xC,mBAAqB,KAE5B5xC,EAAOjgB,QAAQ,sBAEfigB,EAAO0xC,0BAA0BQ,KAChCA,KAOL51D,EAAOoR,MAAQ,WACb,IAAIiT,EAAS1kB,KAIb,GAFAA,KAAKo2D,SAAU,EAEW,WAAtB9nE,EAAQ0R,KAAKqT,KAsBf,OAnBKrT,KAAKqT,IAAImK,MACZxd,KAAKqT,IAAImK,IAAM,IAASzB,SAASJ,MAKnC3b,KAAKqT,IAAIm7C,YAAcxuD,KAAKqT,IAAImK,SAUhCte,YAAW,WACTwlB,EAAO2xC,qBAAqB3xC,EAAOrR,OAClC,GAKLrT,KAAKk8C,QAAUl8C,KAAKizD,KAAK3J,IAAI,CAC3B9rC,IAAKxd,KAAKqT,IACVsK,gBAAiB3d,KAAK2d,kBACrB,SAAU/rB,EAAO+3D,GAElB,GAAKjlC,EAAOw3B,QAAZ,CAOA,GAFAx3B,EAAOw3B,QAAU,KAEbtqD,EAaF,OAZA8yB,EAAO9yB,MAAQ,CACbugB,OAAQw3C,EAAIx3C,OACZF,QAAS,sCAAwCyS,EAAOrR,IAAM,IAC9DkhD,aAAc5K,EAAI4K,aAElB3pD,KAAM,GAGa,iBAAjB8Z,EAAO/c,QACT+c,EAAO0xC,SAAU,GAGZ1xC,EAAO5gB,QAAQ,SAGxB4gB,EAAOrR,IAAMo2C,GAAwB/kC,EAAOsuC,wBAAyBtuC,EAAOrR,IAAKs2C,GAEjF,IAAIwL,EAAWzwC,EAAO+vC,eAAe,CACnCG,eAAgBjL,EAAI4K,aACpB/4C,IAAKkJ,EAAOrR,MAGdqR,EAAO2xC,qBAAqBlB,QAIhC90D,EAAOi2D,OAAS,WACd,MAA2B,kBAAbt2D,KAAKqT,IAAmBrT,KAAKqT,IAAMrT,KAAKqT,IAAImK,KAsB5Dnd,EAAOg2D,qBAAuB,SAA8BlB,GAG1D,GAFAn1D,KAAK2H,MAAQ,cAETwtD,EAAShH,UAoBX,OAnBAnuD,KAAKgsD,OAASmJ,EACdxE,GAAsB3wD,KAAKgsD,OAAQhsD,KAAKs2D,UAIxCnB,EAAShH,UAAUj7D,SAAQ,SAAU23D,GACnCA,EAASM,SAAWoG,GAAe1G,GACnCA,EAASM,SAASj4D,SAAQ,SAAU43D,GAClCuG,GAAmBvG,EAASD,EAAS2D,mBAGzCxuD,KAAK8D,QAAQ,uBAER9D,KAAKk8C,SAGRl8C,KAAK69C,MAAM79C,KAAKgsD,OAAOmC,UAAU,KASrC,IAAI3wC,EAAMxd,KAAKs2D,UAAY,IAASv6C,SAASJ,KAC7C3b,KAAKgsD,OAn/BY,SAAwBnO,EAAOrgC,GAClD,IAAI/T,EAAK0mD,GAAiB,EAAG3yC,GACzBwuC,EAAS,CACX2C,YAAa,CACX,MAAS,GACT,MAAS,GACT,kBAAmB,GACnB,UAAa,IAEfnxC,IAAK,IAASzB,SAASJ,KACvB6yC,YAAa,IAASzyC,SAASJ,KAC/BwyC,UAAW,CAAC,CACV3wC,IAAKA,EACL/T,GAAIA,EACJ+kD,YAAahxC,EAGb7lB,WAAY,MAOhB,OAHAq0D,EAAOmC,UAAU1kD,GAAMuiD,EAAOmC,UAAU,GAExCnC,EAAOmC,UAAU3wC,GAAOwuC,EAAOmC,UAAU,GAClCnC,EA29BSuK,CAAepB,EAAU33C,GACvCxd,KAAKq0D,aAAa,CAChBgB,eAAgBF,EAChB35C,IAAKgC,EACL/T,GAAIzJ,KAAKgsD,OAAOmC,UAAU,GAAG1kD,KAE/BzJ,KAAK8D,QAAQ,mBAGR4uD,EAnjByB,CAojBhCxB,IAMEsF,GAAaxwC,GAAQsjC,IACrBmN,GAAiBzwC,GAAQ8iC,aAEzB4N,GAAkB,SAAyBxa,EAAStqD,EAAOksB,EAAU3c,GACvE,IAAIw1D,EAAuC,gBAAzBza,EAAQ0a,aAAiC1a,EAAQp+B,SAAWo+B,EAAQqY,cAEjF3iE,GAAS+kE,IACZza,EAAQ2a,aAAehpE,KAAKC,MAC5BouD,EAAQ4a,cAAgB5a,EAAQ2a,aAAe3a,EAAQ6a,YACvD7a,EAAQgU,cAAgByG,EAAYK,YAAcL,EAAY9mE,OAEzDqsD,EAAQ+T,YACX/T,EAAQ+T,UAAY7yD,KAAK8C,MAAMg8C,EAAQgU,cAAgBhU,EAAQ4a,cAAgB,EAAI,OAInFh5C,EAASm5C,UACX/a,EAAQgb,gBAAkBp5C,EAASm5C,SAMjCrlE,GAAwB,cAAfA,EAAMgZ,OACjBsxC,EAAQib,UAAW,GAMhBvlE,GAAUsqD,EAAQkb,SAAmC,MAAxBt5C,EAASu5C,YAA8C,MAAxBv5C,EAASu5C,YAA8C,IAAxBv5C,EAASu5C,aACvGzlE,EAAQ,IAAIG,MAAM,mCAAqCmqD,IAAYya,GAAeza,EAAQqY,iBAG5FpzD,EAASvP,EAAOsqD,IAGdob,GAAa,WACf,IAAIhO,EAAM,SAASiO,EAAYh5D,EAAS4C,GAEtC5C,EAAUk4D,GAAe,CACvBlxD,QAAS,MACRhH,GAGH,IAAIi5D,EAAgBD,EAAYC,eAAiBxxC,GAAQyxC,IAAInO,IAAIkO,cAEjE,GAAIA,GAA0C,oBAAlBA,EAA8B,CACxD,IAAIE,EAAaF,EAAcj5D,GAE3Bm5D,IACFn5D,EAAUm5D,GAMd,IACIxb,IADyC,IAA7Bl2B,GAAQyxC,IAAInO,IAAIvB,SAAoByO,GAAaxwC,GAAQyxC,IAAInO,KACrD/qD,GAAS,SAAU3M,EAAOksB,GAChD,OAAO44C,GAAgBxa,EAAStqD,EAAOksB,EAAU3c,MAE/Cw2D,EAAgBzb,EAAQ6Z,MAS5B,OAPA7Z,EAAQ6Z,MAAQ,WAEd,OADA7Z,EAAQkb,SAAU,EACXO,EAAcpkE,MAAM2oD,EAAS3uD,YAGtC2uD,EAAQ1+B,IAAMjf,EAAQif,IACtB0+B,EAAQ6a,YAAclpE,KAAKC,MACpBouD,GAIT,OADAoN,EAAIvB,UAAW,EACRuB,GAiCLsO,GAAoB,SAA2B9M,GACjD,IAvBuC+M,EAuBnCZ,EAAU,GAMd,OAJInM,EAAQ+M,YACVZ,EAAQa,MAdH,UAZgCD,EA0BR/M,EAAQ+M,WAtBR7F,OAQI,KANH,kBAArB6F,EAAU7F,QAAmD,kBAArB6F,EAAUhoE,OAC5C,IAASkoE,OAAOF,EAAU7F,QAAU,IAAS+F,OAAOF,EAAUhoE,QAAU,IAASkoE,OAAO,GAExFF,EAAU7F,OAAS6F,EAAUhoE,OAAS,IAoBhDonE,GAeLe,GAAY,SAAmB1N,EAAO16D,GACxC,OAAO06D,EAAM74C,MAAM7hB,GAAK,IAAM06D,EAAM54C,IAAI9hB,IAWtCqoE,GAAkB,SAAyBhkE,EAAGrE,GAChD,IAAI6D,EAAQQ,EAAErB,SAAS,IACvB,MAAO,KAAKogD,UAAU,EAAG,EAAIv/C,EAAM5D,QAAU4D,GAAS7D,EAAI,EAAI,IAAM,KAGlEsoE,GAAoB,SAA2BjkE,GACjD,OAAIA,GAAK,IAAQA,EAAI,IACZmwD,OAAO+T,aAAalkE,GAGtB,KAcLmkE,GAA4B,SAAmCnmD,GACjE,IAAIomD,EAAe,GAcnB,OAbAxlE,OAAOC,KAAKmf,GAAS/e,SAAQ,SAAUC,GACrC,IAAIM,EAAQwe,EAAQ9e,GAEhBmlE,YAAYC,OAAO9kE,GACrB4kE,EAAallE,GAAO,CAClBqlE,MAAO/kE,EAAMglE,OACbC,WAAYjlE,EAAMilE,WAClB1B,WAAYvjE,EAAMujE,YAGpBqB,EAAallE,GAAOM,KAGjB4kE,GAaLM,GAAgB,SAAuBC,GACzC,IAAIf,EAAYe,EAAYf,WAAa,CACvChoE,OAAQyiC,IACR0/B,OAAQ,GAEV,MAAO,CAAC6F,EAAUhoE,OAAQgoE,EAAU7F,OAAQ4G,EAAYpK,aAAa90D,KAAK,MAUxEm/D,GAAe,SAAsB1lE,GACvC,OAAOA,EAAIq7D,aAYTsK,GAAU,SAAiB14D,GAO7B,IANA,IAAIo4D,EAAQhoE,MAAM7B,UAAUW,MAAMqE,KAAKyM,GACnC24D,EAAO,GACPvjE,EAAS,GAIJ21B,EAAI,EAAGA,EAAIqtC,EAAM3oE,OAASkpE,EAAM5tC,IAGvC31B,GAFMgjE,EAAMlpE,MAAM67B,EAAI4tC,EAAM5tC,EAAI4tC,EAAOA,GAAMx8D,IAAI07D,IAAiBv+D,KAAK,IAEvD,IADR8+D,EAAMlpE,MAAM67B,EAAI4tC,EAAM5tC,EAAI4tC,EAAOA,GAAMx8D,IAAI27D,IAAmBx+D,KAAK,IAC7C,KAGhC,OAAOlE,GAmBLwjE,GAAqBnmE,OAAO0D,OAAO,CACrCC,UAAW,KACX4hE,0BAA2BA,GAC3BO,cAAeA,GACfE,aAAcA,GACdC,QAASA,GACTG,QAtBY,SAAiB7oD,GAC7B,IAAIooD,EAAQpoD,EAAKooD,MACjB,OAAOM,GAAQN,IAqBfU,WAlBe,SAAoB/nD,GACnC,IACIvhB,EADA4F,EAAS,GAGb,IAAK5F,EAAI,EAAGA,EAAIuhB,EAAOthB,OAAQD,IAC7B4F,GAAUwiE,GAAU7mD,EAAQvhB,GAAK,IAGnC,OAAO4F,KAmPL2jE,GAAiB,SAAwB/oD,GAC3C,IAAIy6C,EAAWz6C,EAAKy6C,SAChBuO,EAAYhpD,EAAK2iB,KACjBA,OAAqB,IAAdqmC,OAAuBl+D,EAAYk+D,EAC1Cj4D,EAAWiP,EAAKjP,SAEpB,IAAKA,EACH,MAAM,IAAIpP,MAAM,6CAGlB,IAAK84D,QAAqB3vD,IAAT63B,EACf,OAAO5xB,EAAS,CACd8Q,QAAS,uDAIb,IAAIonD,EAzIyB,SAAkCtmC,EAAM83B,GAKrE,IAAKA,IAAaA,EAASM,UAAyC,IAA7BN,EAASM,SAASt7D,OACvD,OAAO,KAMT,IAHA,IACIi7D,EADAwO,EAAa,EAGR1pE,EAAI,EAAGA,EAAIi7D,EAASM,SAASt7D,UAUhCkjC,IAFJumC,GAPAxO,EAAUD,EAASM,SAASv7D,IAOP2pE,gBAAkBzO,EAAQyO,gBAAgBC,0BAA4BF,EAAaxO,EAAQh5C,WARpEliB,KAe9C,IAAI67D,EAAcZ,EAASM,SAASN,EAASM,SAASt7D,OAAS,GAE/D,GAAI47D,EAAY8N,iBAAmB9N,EAAY8N,gBAAgBC,0BAA4BzmC,EAEzF,OAAO,KAGT,GAAIA,EAAOumC,EAAY,CAIrB,GAAIvmC,EAAOumC,EAlJiB,IAkJJ7N,EAAY35C,SAIlC,OAAO,KAGTg5C,EAAUW,EAGZ,MAAO,CACLX,QAASA,EACT2O,eAAgB3O,EAAQyO,gBAAkBzO,EAAQyO,gBAAgBG,4BAA8BJ,EAAaxO,EAAQh5C,SAGrH9iB,KAAM87D,EAAQyO,gBAAkB,WAAa,YAoF1BI,CAAyB5mC,EAAM83B,GAEpD,IAAKwO,EACH,OAAOl4D,EAAS,CACd8Q,QAAS,oCAIb,GAA4B,aAAxBonD,EAAerqE,KACjB,OAAOmS,EAAS,CACd8Q,QAAS,wFACT2nD,SAAUP,EAAeI,iBAI7B,IAAII,EAAoB,CACtBC,aAAc/mC,GAEZgnC,EAtPwB,SAAiCC,EAAYlP,GACzE,IAAKA,EAAQmP,eAGX,OAAO,KAGT,IAAIC,EAA6BpP,EAAQyO,gBAAgBW,2BAIrDC,EAAyBH,GAHPlP,EAAQyO,gBAAgBG,4BAEPQ,GAEvC,OAAO,IAAIrsE,KAAKi9D,EAAQmP,eAAevsE,UAAqC,IAAzBysE,GA0OjCC,CAAwBrnC,EAAMsmC,EAAevO,SAM/D,OAJIiP,IACFF,EAAkBQ,gBAAkBN,EAAYO,eAG3Cn5D,EAAS,KAAM04D,IAkBpBU,GAAoB,SAASA,EAAkBjZ,GACjD,IAAIyY,EAAczY,EAAMyY,YACpBlP,EAAWvJ,EAAMuJ,SACjB2P,EAAmBlZ,EAAMmZ,WACzBA,OAAkC,IAArBD,EAA8B,EAAIA,EAC/CE,EAASpZ,EAAMoZ,OACfC,EAAuBrZ,EAAMsZ,eAC7BA,OAA0C,IAAzBD,GAAyCA,EAC1D3nD,EAAOsuC,EAAMtuC,KACb7R,EAAWmgD,EAAMngD,SAErB,IAAKA,EACH,MAAM,IAAIpP,MAAM,gDAGlB,GAA2B,qBAAhBgoE,IAAgClP,IAAa6P,EACtD,OAAOv5D,EAAS,CACd8Q,QAAS,yEAIb,IAAK44C,EAASoB,UAAYj5C,EAAKwO,YAC7B,OAAOrgB,EAAS,CACd8Q,QAAS,4DAIb,IArH8B,SAAmC44C,GACjE,IAAKA,EAASM,UAAyC,IAA7BN,EAASM,SAASt7D,OAC1C,OAAO,EAGT,IAAK,IAAID,EAAI,EAAGA,EAAIi7D,EAASM,SAASt7D,OAAQD,IAG5C,IAFci7D,EAASM,SAASv7D,GAEnBqqE,eACX,OAAO,EAIX,OAAO,EAwGFY,CAA0BhQ,GAC7B,OAAO1pD,EAAS,CACd8Q,QAAS,yDAA2D44C,EAAS2D,cAIjF,IAAI6K,EApR0B,SAAmCU,EAAalP,GAI9E,IAAIoP,EAEJ,IACEA,EAAiB,IAAIpsE,KAAKksE,GAC1B,MAAO9lE,GACP,OAAO,KAGT,IAAK42D,IAAaA,EAASM,UAAyC,IAA7BN,EAASM,SAASt7D,OACvD,OAAO,KAGT,IAAIi7D,EAAUD,EAASM,SAAS,GAEhC,GAAI8O,EAAiBnP,EAAQmP,eAE3B,OAAO,KAGT,IAAK,IAAIrqE,EAAI,EAAGA,EAAIi7D,EAASM,SAASt7D,OAAS,IAC7Ci7D,EAAUD,EAASM,SAASv7D,KAGxBqqE,EAFmBpP,EAASM,SAASv7D,EAAI,GAAGqqE,iBAFArqE,KASlD,IA5CuE2pE,EA4CnE9N,EAAcZ,EAASM,SAASN,EAASM,SAASt7D,OAAS,GAC3DirE,EAAmBrP,EAAYwO,eAC/Bc,EAAsBtP,EAAY8N,iBA9CiCA,EA8Cc9N,EAAY8N,iBA7C1EC,0BAA4BD,EAAgBG,4BAA8BH,EAAgBW,2BA6CGzO,EAAY35C,SA9ElG,IA8E6G25C,EAAY35C,SAGvJ,OAAImoD,EAFiB,IAAIpsE,KAAKitE,EAAiBptE,UAAkC,IAAtBqtE,GAIlD,MAGLd,EAAiBa,IACnBhQ,EAAUW,GAGL,CACLX,QAASA,EACT2O,eAAgB3O,EAAQyO,gBAAkBzO,EAAQyO,gBAAgBG,4BAA8BzK,GAASn9C,SAAS+4C,EAAUA,EAAS8B,cAAgB9B,EAASM,SAAS97D,QAAQy7D,IAK/K97D,KAAM87D,EAAQyO,gBAAkB,WAAa,aA+N1ByB,CAA0BjB,EAAalP,GAE5D,IAAKwO,EACH,OAAOl4D,EAAS,CACd8Q,QAAS8nD,EAAc,iCAI3B,IAAIjP,EAAUuO,EAAevO,QACzBmQ,EAzJuB,SAAgCC,EAAqBnB,GAChF,IAAIoB,EACAd,EAEJ,IACEc,EAAkB,IAAIttE,KAAKqtE,GAC3Bb,EAAkB,IAAIxsE,KAAKksE,GAC3B,MAAO9lE,IAGT,IAAImnE,EAAmBD,EAAgBztE,UAEvC,OADuB2sE,EAAgB3sE,UACZ0tE,GAAoB,IA6I7BC,CAAuBvQ,EAAQmP,eAAgBF,GAEjE,GAA4B,aAAxBV,EAAerqE,KAEjB,OAAmB,IAAfyrE,EACKt5D,EAAS,CACd8Q,QAAS8nD,EAAc,qCAI3BW,EAAOrB,EAAeI,eAAiBwB,QACvCjoD,EAAK7O,IAAI,UAAU,WACjBo2D,EAAkB,CAChBR,YAAaA,EACblP,SAAUA,EACV4P,WAAYA,EAAa,EACzBC,OAAQA,EACRE,eAAgBA,EAChB5nD,KAAMA,EACN7R,SAAUA,QAShB,IAAIm6D,EAAaxQ,EAAQr5C,MAAQwpD,EAOjCjoD,EAAK7O,IAAI,UALY,WACnB,OAAOhD,EAAS,KAAM6R,EAAKgM,kBAMzB47C,GACF5nD,EAAKkC,QAGPwlD,EAAOY,IAILC,GAAsB,SAA6Brf,EAAS7qB,GAC9D,GAA2B,IAAvB6qB,EAAQ78C,WACV,OAAOgyB,KAgFPg4B,GAAcrjC,GAAQqjC,YACtBP,GAAe9iC,GAAQ8iC,aAEvB0S,GAAwB,SAA+B9/C,EAAG8lC,GAC5D,IAAKgQ,GAAoB91C,EAAG8lC,GAC1B,OAAO,EAST,GAAI9lC,EAAE+/C,MAAQja,EAAEia,OAAS//C,EAAE+/C,KAAKzJ,SAAWxQ,EAAEia,KAAKzJ,QAAUt2C,EAAE+/C,KAAK5rE,SAAW2xD,EAAEia,KAAK5rE,QACnF,OAAO,EACF,IAAK6rB,EAAE+/C,MAAQja,EAAEia,MAAQ//C,EAAE+/C,OAASja,EAAEia,KAC3C,OAAO,EAKT,GAAI//C,EAAEyvC,WAAa3J,EAAE2J,WAAazvC,EAAEyvC,UAAY3J,EAAE2J,SAChD,OAAO,EAIT,IAAKzvC,EAAEyvC,WAAa3J,EAAE2J,SACpB,OAAO,EAIT,IAAK,IAAIv7D,EAAI,EAAGA,EAAI8rB,EAAEyvC,SAASt7D,OAAQD,IAAK,CAC1C,IAAI8rE,EAAWhgD,EAAEyvC,SAASv7D,GACtB+rE,EAAWna,EAAE2J,SAASv7D,GAE1B,GAAI8rE,EAASl+C,MAAQm+C,EAASn+C,IAC5B,OAAO,EAIT,GAAKk+C,EAAS7D,WAAc8D,EAAS9D,UAArC,CAIA,IAAI+D,EAAaF,EAAS7D,UACtBgE,EAAaF,EAAS9D,UAE1B,GAAI+D,IAAeC,IAAeD,GAAcC,EAC9C,OAAO,EAIT,GAAID,EAAW5J,SAAW6J,EAAW7J,QAAU4J,EAAW/rE,SAAWgsE,EAAWhsE,OAC9E,OAAO,GAKX,OAAO,GAmHLisE,GAAmB,SAA0B3N,EAAW4N,GAC1D,IAR2CrgD,EAAG8lC,EAQ1Cwa,EAAiB,GAErB,IAAK,IAAIvyD,KAAM0kD,EAAW,CACxB,IACI8N,EADW9N,EAAU1kD,GACMgyD,KAE/B,GAAIQ,EAAiB,CACnB,IAAI9oE,EAAM,YAAgB8oE,GAE1B,IAAKF,EAAe5oE,GAClB,MAGF,IAAI+oE,EAAgBH,EAAe5oE,GAAKgpE,SArBDzgD,EAuBpBwgD,EAvBuB1a,EAuBRya,GAtBrBpmE,SAAS6lB,EAAEnf,MAAQilD,EAAEjlD,MACJ1G,QAAQ6lB,EAAEnf,KAAOilD,EAAEjlD,KAAOmf,EAAEnf,IAAIs7D,UAAU7F,SAAWxQ,EAAEjlD,IAAIs7D,UAAU7F,QAAUt2C,EAAEnf,IAAIs7D,UAAUhoE,SAAW2xD,EAAEjlD,IAAIs7D,UAAUhoE,UACpI6rB,EAAE8B,MAAQgkC,EAAEhkC,KAAO9B,EAAEm8C,UAAU7F,SAAWxQ,EAAEqW,UAAU7F,QAAUt2C,EAAEm8C,UAAUhoE,SAAW2xD,EAAEqW,UAAUhoE,SAqBrHmsE,EAAe7oE,GAAO4oE,EAAe5oE,KAK3C,OAAO6oE,GAwBLI,GAAkC,SAAU7kD,GAM9C,SAAS6kD,EAAmBC,EAAkB1J,EAAKp0D,EAAS+9D,GAC1D,IAAIn3D,OAEY,IAAZ5G,IACFA,EAAU,KAGZ4G,EAAQoS,EAAa5jB,KAAKqM,OAASA,MAC7Bu8D,sBAAwBD,GAAwB,IAAuBn3D,GAExEm3D,IACHn3D,EAAMq3D,WAAY,GAGpB,IAAI3J,EAAWt0D,EACXu0D,EAAwBD,EAASl1C,gBACjCA,OAA4C,IAA1Bm1C,GAA2CA,EAC7DC,EAAwBF,EAASG,wBACjCA,OAAoD,IAA1BD,GAA2CA,EAKzE,GAJA5tD,EAAM8tD,KAAON,EACbxtD,EAAMwY,gBAAkBA,EACxBxY,EAAM6tD,wBAA0BA,GAE3BqJ,EACH,MAAM,IAAItqE,MAAM,kDA2BlB,OAvBAoT,EAAMlC,GAAG,uBAAuB,WAC9BkC,EAAMs3D,iBAIRt3D,EAAMlC,GAAG,sBAAsB,WAC7BkC,EAAMu3D,cAAcv3D,EAAM04C,QAAQp0C,OAGpCtE,EAAMwC,MAAQ,eACdxC,EAAMw3D,iBAAmB,GACzBx3D,EAAMytD,QAAU/I,GAAO,sBAGnB1kD,EAAMq3D,WACRr3D,EAAMo3D,sBAAsBK,OAASP,EAGrCl3D,EAAMo3D,sBAAsBM,aAAe,IAE3C13D,EAAM23D,eAAiBT,EAGlBl3D,EAxDT,IAAei3D,EAAoB7kD,GA2DnC,IAAIlX,EAAS+7D,EAAmBztE,UAwkBhC,OAtkBA0R,EAAO08D,gBAAkB,SAAyBl/C,EAAKq+B,EAASsY,GAE9D,OAAKx0D,KAAKk8C,UAKVl8C,KAAKk8C,QAAU,KAEXr+B,GAGF7d,KAAKpO,MAAyB,WAAjBtD,EAAQuvB,IAAuBA,aAAe9rB,MAAe,CACxEogB,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,8BAAgCiqC,EAAQ1+B,IACjDM,SAAUo+B,EAAQp+B,SAElBlT,KAAM,GAL4DiT,EAQhE22C,IACFx0D,KAAK2H,MAAQ6sD,GAGfx0D,KAAK8D,QAAQ,UACN,QAhBT,IAyBFzD,EAAO28D,iBAAmB,SAA0BnS,EAAU2J,EAAenjC,GAC3E,IAAIzqB,EAAS5G,KAETi9D,EAAUpS,EAAS4Q,MAAQ,YAAgB5Q,EAAS4Q,MAExD,GAAK5Q,EAAS4Q,MAASwB,IAAWj9D,KAAKu8D,sBAAsBM,aAAaI,GAA1E,CASA,IAAIz/C,EAAMisC,GAAwBzpD,KAAKgzD,wBAAyBnI,EAAS4Q,KAAKjN,aAE1E0O,EAAM,SAAar/C,EAAKq+B,GAC1B,IAAIt1C,EAAOm2D,gBAAgBl/C,EAAKq+B,EAASsY,GAAzC,CAIA,IACIiH,EADA0B,EAAcv2D,EAAO21D,sBAAsBM,aAG/C,IACEpB,EAAO,IAAU,YAAQvf,EAAQp+B,UAAUs/C,SAAS,IACpD,MAAOnpE,GAIP,YAFA2S,EAAOm2D,gBAAgB9oE,EAAGioD,EAASsY,GAUrC,OALA2I,EAAYF,GAAW,CACrBd,SAAUtR,EAAS4Q,KACnBA,KAAMA,GAER,YAA0B5Q,EAAU4Q,EAAM5Q,EAAS4Q,KAAKjN,aACjDn9B,GAAG,KAGZrxB,KAAKk8C,QA/ac,SAA0B1+B,EAAK8rC,EAAKj4B,GACzD,IACIgsC,EADA7E,EAAQ,GAER8E,GAAW,EAEXC,EAAwB,SAA+B1/C,EAAK8rC,EAAK36D,EAAMwuE,GAGzE,OAFA7T,EAAIoM,QACJuH,GAAW,EACJjsC,EAAGxT,EAAK8rC,EAAK36D,EAAMwuE,IAGxBC,EAAmB,SAA0B7rE,EAAOsqD,GACtD,IAAIohB,EAAJ,CAIA,GAAI1rE,EACF,OAAO2rE,EAAsB3rE,EAAOsqD,EAAS,GAAIsc,GAInD,IAAIkF,EAAUxhB,EAAQqY,aAAavhB,UAAUwlB,GAASA,EAAMxB,YAAc,EAAG9a,EAAQqY,aAAa1kE,QAMlG,GAJA2oE,EAAQ,YAAkBA,EAAO,YAAckF,GAAS,IACxDL,EAAYA,GAAa,YAAa7E,GAGlCA,EAAM3oE,OAAS,IAAMwtE,GAAa7E,EAAM3oE,OAASwtE,EAAY,EAC/D,OAAO9B,GAAoBrf,GAAS,WAClC,OAAOqhB,EAAsB3rE,EAAOsqD,EAAS,GAAIsc,MAIrD,IAAIxpE,EAAO,YAAwBwpE,GAInC,MAAa,OAATxpE,GAAiBwpE,EAAM3oE,OAAS,MAQ/Bb,GAAQwpE,EAAM3oE,OAAS,IAPnB0rE,GAAoBrf,GAAS,WAClC,OAAOqhB,EAAsB3rE,EAAOsqD,EAAS,GAAIsc,MAY9C+E,EAAsB,KAAMrhB,EAASltD,EAAMwpE,KAGhDj6D,EAAU,CACZif,IAAKA,EACLmgD,WAAY,SAAoBzhB,GAE9BA,EAAQ0hB,iBAAiB,sCACzB1hB,EAAQ58C,iBAAiB,YAAY,SAAU8Q,GAG7C,OAFAA,EAAKytD,MACLztD,EAAK0tD,OACEpH,GAAgBxa,EAAS,KAAM,CACpCmb,WAAYnb,EAAQ/pC,QACnBsrD,QAILvhB,EAAUoN,EAAI/qD,GAAS,SAAU3M,EAAOksB,GAC1C,OAAO44C,GAAgBxa,EAAStqD,EAAOksB,EAAU2/C,MAEnD,OAAOvhB,EAwWU6hB,CAAiBvgD,EAAKxd,KAAKizD,KAAK3J,KAAK,SAAUzrC,EAAKq+B,EAAS8hB,EAAWxF,GACrF,GAAI36C,EACF,OAAOq/C,EAAIr/C,EAAKq+B,GAGlB,IAAK8hB,GAA2B,QAAdA,EAChB,OAAOd,EAAI,CACT/qD,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,gBAAkB+rD,GAAa,WAAa,4CAA8CxgD,EAGnGM,SAAU,GACV+sC,SAAUA,EACVoT,UAAU,EACVC,kBAAmB5rC,IAEnB1nB,KAAM,GACLsxC,GAIL,IAAIiiB,EAAwBtT,EAAS4Q,KAAK5D,UACtC7F,EAASmM,EAAsBnM,OAC/BniE,EAASsuE,EAAsBtuE,OAEnC,GAAI2oE,EAAM3oE,QAAUA,EAASmiE,EAC3B,OAAOkL,EAAIr/C,EAAK,CACdC,SAAU06C,EAAM4E,SAASpL,EAAQA,EAASniE,GAC1CsiB,OAAQ+pC,EAAQ/pC,OAChBqL,IAAK0+B,EAAQ1+B,MAKjB5W,EAAOs1C,QAAUt1C,EAAOqsD,KAAK3J,IAAI,CAC/B9rC,IAAKA,EACLo5C,aAAc,cACdK,QAASW,GAAkB,CACzBC,UAAWhN,EAAS4Q,KAAK5D,aAE1BqF,WA1EHl9D,KAAKo+D,cAAgB,IAASl/D,YAAW,WACvC,OAAOmyB,GAAG,KACT,IA4EPhxB,EAAOiK,QAAU,WACftK,KAAK8D,QAAQ,WACb9D,KAAK01D,cACL11D,KAAK28D,iBAAmB,GACxB,IAASr3D,aAAatF,KAAKq+D,6BAC3B,IAAS/4D,aAAatF,KAAKo+D,eAC3B,IAAS94D,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,KAC1B31D,KAAKo+D,cAAgB,KACrBp+D,KAAKq+D,4BAA8B,KAE/Br+D,KAAKu8D,sBAAsB+B,oBAC7Bt+D,KAAKvO,IAAI,iBAAkBuO,KAAKu8D,sBAAsB+B,mBACtDt+D,KAAKu8D,sBAAsB+B,kBAAoB,MAGjDt+D,KAAKvO,OAGP4O,EAAOk+D,kBAAoB,WACzB,OAAOv+D,KAAKk8C,SAAWl8C,KAAKo+D,eAG9B/9D,EAAOq1D,YAAc,WACnB,GAAI11D,KAAKk8C,QAAS,CAChB,IAAI2Z,EAAa71D,KAAKk8C,QACtBl8C,KAAKk8C,QAAU,KACf2Z,EAAWC,mBAAqB,KAChCD,EAAWE,UAIf11D,EAAOw9C,MAAQ,SAAegN,GAC5B,IAAI7jD,EAAShH,KAGb,IAAK6qD,EACH,OAAO7qD,KAAKw1D,OAId,GAAmB,iBAAfx1D,KAAK2H,MACP,MAAM,IAAI5V,MAAM,qCAAuCiO,KAAK2H,OAG9D,IAAI6sD,EAAgBx0D,KAAK2H,MAEzB,GAAwB,kBAAbkjD,EAAuB,CAChC,IAAK7qD,KAAKu8D,sBAAsBvQ,OAAOmC,UAAUtD,GAC/C,MAAM,IAAI94D,MAAM,yBAA2B84D,GAG7CA,EAAW7qD,KAAKu8D,sBAAsBvQ,OAAOmC,UAAUtD,GAGzD,IAAIqL,GAAel2D,KAAKw1D,QAAU3K,EAASphD,KAAOzJ,KAAKw1D,OAAO/rD,GAE9D,GAAIysD,GAAel2D,KAAK28D,iBAAiB9R,EAASphD,KAAOzJ,KAAK28D,iBAAiB9R,EAASphD,IAAIwiD,QAS1F,OARAjsD,KAAK2H,MAAQ,gBACb3H,KAAKw1D,OAAS3K,OAEVqL,IACFl2D,KAAK8D,QAAQ,iBACb9D,KAAK8D,QAAQ,iBAOZoyD,IAKDl2D,KAAKw1D,QACPx1D,KAAK8D,QAAQ,iBAGf9D,KAAKg9D,iBAAiBnS,EAAU2J,GAAe,SAAUgK,GAEvDx3D,EAAOqtD,aAAa,CAClBG,cAAeA,EACf3J,SAAUA,SAKhBxqD,EAAOg0D,aAAe,SAAsB/S,GAC1C,IAAIkT,EAAgBlT,EAAMkT,cACtB3J,EAAWvJ,EAAMuJ,SACrB7qD,KAAK2H,MAAQ,gBACb3H,KAAK28D,iBAAiB9R,EAASphD,IAAMohD,EACrC7qD,KAAKo+D,cAAgB,KAErBp+D,KAAK08D,cAAc7R,EAASphD,IAGN,gBAAlB+qD,EACFx0D,KAAK8D,QAAQ,kBAGb9D,KAAK8D,QAAQ,gBAIjBzD,EAAO6U,MAAQ,WACTlV,KAAKu8D,sBAAsB+B,oBAC7Bt+D,KAAKvO,IAAI,iBAAkBuO,KAAKu8D,sBAAsB+B,mBACtDt+D,KAAKu8D,sBAAsB+B,kBAAoB,MAGjDt+D,KAAK01D,cACL,IAASpwD,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,KAEtB31D,KAAKw8D,YACP,IAASl3D,aAAatF,KAAKu8D,sBAAsB8B,6BACjDr+D,KAAKu8D,sBAAsB8B,4BAA8B,MAGxC,iBAAfr+D,KAAK2H,QAGP3H,KAAKo2D,SAAU,IAInB/1D,EAAOwf,KAAO,SAAc4+C,GAC1B,IAAIzuD,EAAShQ,KAEb,IAASsF,aAAatF,KAAK21D,oBAC3B31D,KAAK21D,mBAAqB,KAC1B,IAAI9X,EAAQ79C,KAAK69C,QAEjB,GAAI4gB,EAAJ,CACE,IAAIxI,EAAQpY,EAAQA,EAAM0O,eAAiB,EAAI,IAAO,IACtDvsD,KAAK21D,mBAAqB,IAASz2D,YAAW,WAC5C,OAAO8Q,EAAO6P,SACbo2C,QAMAj2D,KAAKo2D,QAKNvY,IAAUA,EAAMoO,SAIdjsD,KAAKw8D,YAAcx8D,KAAKq+D,8BAE1Br+D,KAAK8D,QAAQ,uBAEb9D,KAAK0+D,qCAGP1+D,KAAK8D,QAAQ,uBAEb9D,KAAK8D,QAAQ,kBAjBb9D,KAAKyR,SAqBTpR,EAAOoR,MAAQ,WACb,IAAItB,EAASnQ,KAEbA,KAAKo2D,SAAU,EAGVp2D,KAAKw8D,UAOVx8D,KAAK2+D,gBAAe,SAAUhV,EAAKiV,GACjCzuD,EAAO0uD,cAEF1uD,EAAOouD,qBAAwBpuD,EAAOqlD,QACzCrlD,EAAO0tC,MAAM1tC,EAAOosD,sBAAsBvQ,OAAOmC,UAAU,OAV7DnuD,KAAKo+D,cAAgB,IAASl/D,YAAW,WACvC,OAAOiR,EAAO0uD,gBACb,IAaPx+D,EAAOs+D,eAAiB,SAAwBttC,GAC9C,IAAItN,EAAS/jB,KAEbA,KAAKk8C,QAAUl8C,KAAKizD,KAAK3J,IAAI,CAC3B9rC,IAAKxd,KAAKu8D,sBAAsBK,OAChCj/C,gBAAiB3d,KAAK2d,kBACrB,SAAU/rB,EAAO+3D,GAClB,IAAI5lC,EAAOg5C,gBAAgBnrE,EAAO+3D,GAAlC,CAQA,IAAIiV,EAAgBjV,EAAI4K,eAAiBxwC,EAAOw4C,sBAAsBuC,WAWtE,OAVA/6C,EAAOw4C,sBAAsBuC,WAAanV,EAAI4K,aAE1C5K,EAAIuN,iBAAmBvN,EAAIuN,gBAAgB6H,KAC7Ch7C,EAAOi7C,cAAgBnxE,KAAKsvB,MAAMwsC,EAAIuN,gBAAgB6H,MAEtDh7C,EAAOi7C,cAAgBnxE,KAAKC,MAG9Bi2B,EAAOw4C,sBAAsBK,OAASnT,GAAwB1lC,EAAOivC,wBAAyBjvC,EAAOw4C,sBAAsBK,OAAQjT,GAE/HiV,GACF76C,EAAOk7C,qBAEPl7C,EAAOm7C,wBAAuB,WAC5B,OAAO7tC,EAAGs4B,EAAKiV,OAMZvtC,EAAGs4B,EAAKiV,GA5BQ,iBAAjB76C,EAAOpc,QACToc,EAAOqyC,SAAU,OAuCzB/1D,EAAO6+D,uBAAyB,SAAgCC,GAC9D,IAAIz6C,EAAS1kB,KAETo/D,EAAY,YAAep/D,KAAKu8D,sBAAsBuC,YAG1D,OAAkB,OAAdM,GACFp/D,KAAKu8D,sBAAsB8C,cAAgBr/D,KAAKg/D,cAAgBnxE,KAAKC,MAC9DqxE,KAGgB,WAArBC,EAAUjoE,QACZ6I,KAAKu8D,sBAAsB8C,cAAgBD,EAAU3rE,MAAQ5F,KAAKC,MAC3DqxE,UAGTn/D,KAAKk8C,QAAUl8C,KAAKizD,KAAK3J,IAAI,CAC3B9rC,IAAKgsC,GAAWxpD,KAAKu8D,sBAAsBK,OAAQwC,EAAU3rE,OAC7D0D,OAAQioE,EAAUjoE,OAClBwmB,gBAAiB3d,KAAK2d,kBACrB,SAAU/rB,EAAO+3D,GAElB,GAAKjlC,EAAOw3B,QAAZ,CAIA,GAAItqD,EAIF,OADA8yB,EAAO63C,sBAAsB8C,cAAgB36C,EAAOs6C,cAAgBnxE,KAAKC,MAClEqxE,IAGT,IAAIG,EAQAA,EANqB,SAArBF,EAAUjoE,OACPwyD,EAAIuN,iBAAoBvN,EAAIuN,gBAAgB6H,KAKlClxE,KAAKsvB,MAAMwsC,EAAIuN,gBAAgB6H,MAF/Br6C,EAAOs6C,cAKTnxE,KAAKsvB,MAAMwsC,EAAI4K,cAG9B7vC,EAAO63C,sBAAsB8C,cAAgBC,EAAazxE,KAAKC,MAC/DqxE,UAIJ9+D,EAAOw+D,YAAc,WACnB7+D,KAAK2H,MAAQ,cAET3H,KAAKw8D,UAIPx8D,KAAK8D,QAAQ,kBACH9D,KAAKw1D,QAGfx1D,KAAK69C,MAAM79C,KAAK88D,iBAIpBz8D,EAAO4+D,cAAgB,WAErBj/D,KAAKo+D,cAAgB,KACrB,IArnByChuD,EACvCmvD,EACA3C,EACA4C,EACArC,EACAsC,EACAtK,EA+mBEuK,EAAY1/D,KAAKu8D,sBAAsBvQ,OACvC2T,GAtnBqCvvD,EAsnBV,CAC7BmvD,UAAWv/D,KAAKu8D,sBAAsBuC,WACtClC,OAAQ58D,KAAKu8D,sBAAsBK,OACnC4C,aAAcx/D,KAAKu8D,sBAAsB8C,cACzClC,YAAan9D,KAAKu8D,sBAAsBM,aACxC4C,iBAAkBC,GA1nBlBH,EAAYnvD,EAAKmvD,UACjB3C,EAASxsD,EAAKwsD,OACd4C,EAAepvD,EAAKovD,aACpBrC,EAAc/sD,EAAK+sD,YACnBsC,EAAmBrvD,EAAKqvD,iBACxBtK,EAAW,YAAMoK,EAAW,CAC9BK,YAAahD,EACb4C,aAAcA,EACdrC,YAAaA,EACbsC,iBAAkBA,IAEpB9O,GAAsBwE,EAAUyH,GACzBzH,GAinBDuK,IACFC,EAlmBa,SAAsBD,EAAWC,EAAWxC,GAS7D,IARA,IAAI0C,GAAY,EACZnzC,EAASo8B,GAAa4W,EAAW,CAEnC5tD,SAAU6tD,EAAU7tD,SACpBguD,oBAAqBH,EAAUG,oBAC/BC,eAAgBJ,EAAUI,iBAGnBnwE,EAAI,EAAGA,EAAI+vE,EAAUxR,UAAUt+D,OAAQD,IAAK,CACnD,IAAIi7D,EAAW8U,EAAUxR,UAAUv+D,GAEnC,GAAIi7D,EAAS4Q,KAAM,CACjB,IAAIwB,EAAU,YAAgBpS,EAAS4Q,MAEnC0B,GAAeA,EAAYF,IAAYE,EAAYF,GAASxB,MAC9D,YAA0B5Q,EAAUsS,EAAYF,GAASxB,KAAM5Q,EAAS4Q,KAAKjN,aAIjF,IAAIwR,EAAiBvO,GAAe/kC,EAAQm+B,EAAU2Q,IAElDwE,IACFtzC,EAASszC,EACTH,GAAY,GAwBhB,OAnBAzP,GAAkBuP,GAAW,SAAUjoE,EAAY1I,EAAMixE,EAAOxrD,GAC9D,GAAI/c,EAAWy2D,WAAaz2D,EAAWy2D,UAAUt+D,OAAQ,CACvD,IAAI4Z,EAAK/R,EAAWy2D,UAAU,GAAG1kD,GAE7By2D,EAAkBzO,GAAe/kC,EAAQh1B,EAAWy2D,UAAU,GAAIqN,IAElE0E,KACFxzC,EAASwzC,GAEFvR,YAAY3/D,GAAMixE,GAAOxrD,GAAO05C,UAAU,GAAKzhC,EAAOyhC,UAAU1kD,GACvEo2D,GAAY,OAKdF,EAAUG,sBAAwBJ,EAAUI,sBAC9CD,GAAY,GAGVA,EACK,KAGFnzC,EA8iBSyzC,CAAaT,EAAWC,EAAW3/D,KAAKu8D,sBAAsBM,eAI5E78D,KAAKu8D,sBAAsBvQ,OAAS2T,GAAwBD,EAC5D,IAAI3jD,EAAW/b,KAAKu8D,sBAAsBvQ,OAAOoU,WAAapgE,KAAKu8D,sBAAsBvQ,OAAOoU,UAAU,GAU1G,OARIrkD,GAAYA,IAAa/b,KAAKu8D,sBAAsBK,SACtD58D,KAAKu8D,sBAAsBK,OAAS7gD,KAGjC2jD,GAAaC,GAAaA,EAAUG,sBAAwBJ,EAAUI,sBACzE9/D,KAAK0+D,oCAGA7oE,QAAQ8pE,IAGjBt/D,EAAOq+D,kCAAoC,WACzC,IAAI2B,EAAMrgE,KAAKu8D,sBAGX8D,EAAI/B,oBACN+B,EAAI5uE,IAAI,iBAAkB4uE,EAAI/B,mBAC9B+B,EAAI/B,kBAAoB,MAItB+B,EAAIhC,8BACN,IAAS/4D,aAAa+6D,EAAIhC,6BAC1BgC,EAAIhC,4BAA8B,MAGpC,IAAIiC,EAAMD,EAAIrU,QAAUqU,EAAIrU,OAAO8T,oBAKvB,IAARQ,IACED,EAAIxiB,QACNyiB,EAAmC,IAA7BD,EAAIxiB,QAAQ0O,gBAElB8T,EAAI/B,kBAAoB+B,EAAI3B,kCAC5B2B,EAAIl8D,IAAI,iBAAkBk8D,EAAI/B,qBAOf,kBAARgC,GAAoBA,GAAO,EAChCA,EAAM,GACRtgE,KAAK4yD,QAAQ,wCAA0C0N,EAAM,2BAMjEtgE,KAAKugE,kBAAkBD,IAGzBjgE,EAAOkgE,kBAAoB,SAA2BD,GACpD,IAAID,EAAMrgE,KAAKu8D,sBACf8D,EAAIhC,4BAA8B,IAASn/D,YAAW,WACpDmhE,EAAIhC,4BAA8B,KAClCgC,EAAIv8D,QAAQ,uBACZu8D,EAAIE,kBAAkBD,KACrBA,IAOLjgE,EAAOo8D,YAAc,WACnB,IAAIpgB,EAASr8C,KAEbA,KAAK2+D,gBAAe,SAAUhV,EAAKiV,GA3kBP,IAAmC5S,EAAQ+P,EAErEyE,EA0kBK5B,IAIDviB,EAAOmZ,SACTnZ,EAAOmZ,OAASnZ,EAAOkgB,sBAAsBvQ,OAAOmC,UAAU9R,EAAOmZ,OAAO/rD,KAI9E4yC,EAAOkgB,sBAAsBM,cArlBgC7Q,EAqlBS3P,EAAOkgB,sBAAsBvQ,OArlB9B+P,EAqlBsC1f,EAAOkgB,sBAAsBM,aAnlBxI2D,EADY1E,GAAiB9P,EAAOmC,UAAW4N,GAEnD3L,GAAkBpE,GAAQ,SAAUt0D,EAAY24D,EAAWC,EAAUC,GACnE,GAAI74D,EAAWy2D,WAAaz2D,EAAWy2D,UAAUt+D,OAAQ,CACvD,IAAIs+D,EAAYz2D,EAAWy2D,UAC3BqS,EAAiB1X,GAAa0X,EAAgB1E,GAAiB3N,EAAW4N,QAGvEyE,GA8kBHnkB,EAAO2gB,iBAAiB3gB,EAAOwB,QAASxB,EAAO10C,OAAO,SAAU62D,GAE9DniB,EAAOqgB,cAAcrgB,EAAOwB,QAAQp0C,YAW1CpJ,EAAOq8D,cAAgB,SAAuB+D,GAC5C,IAAIjjB,EAASx9C,KAEb,IAAKygE,EACH,MAAM,IAAI1uE,MAAM,sCAQdiO,KAAKw1D,QAAUx1D,KAAKw8D,WACtBx8D,KAAKi/D,gBAGP,IAAI9Q,EAAYnuD,KAAKu8D,sBAAsBvQ,OAAOmC,UAC9CuS,GAAgB1gE,KAAKw1D,QAAUx1D,KAAKw1D,SAAWrH,EAAUsS,GAQ7D,GANIC,EACF1gE,KAAKw1D,OAASrH,EAAUsS,GAExBzgE,KAAK8D,QAAQ,sBAGV9D,KAAK21D,mBAAoB,EACG,SAASgL,IAClCnjB,EAAOK,QAAQoO,UAInBzO,EAAOmY,mBAAqB,IAASz2D,YAAW,WAC9Cs+C,EAAO15C,QAAQ,sBAEf68D,MACCpO,GAAa/U,EAAOK,QAAShoD,QAAQ6qE,MAG1CC,GAGF3gE,KAAK8D,QAAQ,mBAGRs4D,EApoB6B,CAqoBpC/S,IAEEuX,GAAS,CACXC,mBAAoB,GACpBC,uBAAwB,GACxBC,mBAAoB,GACpBC,wBAAyB,EAEzBC,kBAAmB,QAGnBC,mBAAoB,IAEpBC,sBAAuB,EACvBC,0BAA2B,GAE3BC,uCAAwC,GACxCC,2BAA4B,EAE5BC,uBAAwB,IAgBtBC,GAAwB,SAA+BC,GAIzD,OAFAA,EAAUx+D,GAAKw+D,EAAUniE,iBACzBmiE,EAAUhwE,IAAMgwE,EAAUriE,oBACnBqiE,GAeLC,GAAU,SAAiB92D,GAC7B,OAAO,WACL,IAAI+2D,EAdc,SAAyBjrE,GAC7C,IACE,OAAOu9D,IAAI2N,gBAAgB,IAAIC,KAAK,CAACnrE,GAAM,CACzC1H,KAAM,4BAER,MAAOiF,GACP,IAAI6tE,EAAO,IAAIC,YAEf,OADAD,EAAK7jC,OAAOvnC,GACLu9D,IAAI2N,gBAAgBE,EAAKE,YAMhBJ,CAAgBh3D,GAC5Bq3D,EAAST,GAAsB,IAAIU,OAAOP,IAC9CM,EAAOE,OAASR,EAChB,IAAIS,EAAYH,EAAOG,UASvB,OARAH,EAAOh/D,GAAKg/D,EAAO3iE,iBACnB2iE,EAAOxwE,IAAMwwE,EAAO7iE,oBAEpB6iE,EAAOG,UAAY,WAEjB,OADAnO,IAAIoO,gBAAgBV,GACbS,EAAUzuE,KAAKqM,OAGjBiiE,IAIP5lE,GAAY,SAAmBuO,GACjC,MAAO,+BAAiC42D,GAAsB5uE,WAAvD,oCAA+GgY,GAGpH03D,GAAkB,SAAyBrzE,GAC7C,OAAOA,EAAG2D,WAAWyV,QAAQ,gBAAiB,IAAI/Y,MAAM,GAAI,IAK1DizE,GAAelmE,GAAUimE,IAAgB,WAU3C,IAAIE,EAAS,WACXxiE,KAAKyiE,KAAO,WACV,IAAI1zB,EAAY,GAQhB/uC,KAAKiD,GAAK,SAAUjU,EAAMmX,GACnB4oC,EAAU//C,KACb+/C,EAAU//C,GAAQ,IAGpB+/C,EAAU//C,GAAQ+/C,EAAU//C,GAAME,OAAOiX,IAU3CnG,KAAKvO,IAAM,SAAUzC,EAAMmX,GACzB,IAAI/W,EAEJ,QAAK2/C,EAAU//C,KAIfI,EAAQ2/C,EAAU//C,GAAMK,QAAQ8W,GAChC4oC,EAAU//C,GAAQ+/C,EAAU//C,GAAMM,QAClCy/C,EAAU//C,GAAMO,OAAOH,EAAO,GACvBA,GAAS,IASlB4Q,KAAK8D,QAAU,SAAU9U,GACvB,IAAIyvD,EAAW7uD,EAAGC,EAAQU,EAG1B,GAFAkuD,EAAY1P,EAAU//C,GAUtB,GAAyB,IAArBzB,UAAUsC,OAGZ,IAFAA,EAAS4uD,EAAU5uD,OAEdD,EAAI,EAAGA,EAAIC,IAAUD,EACxB6uD,EAAU7uD,GAAG+D,KAAKqM,KAAMzS,UAAU,QAE/B,CAIL,IAHAgD,EAAO,GACPX,EAAIrC,UAAUsC,OAETD,EAAI,EAAGA,EAAIrC,UAAUsC,SAAUD,EAClCW,EAAKS,KAAKzD,UAAUqC,IAKtB,IAFAC,EAAS4uD,EAAU5uD,OAEdD,EAAI,EAAGA,EAAIC,IAAUD,EACxB6uD,EAAU7uD,GAAG2D,MAAMyM,KAAMzP,KAS/ByP,KAAKsK,QAAU,WACbykC,EAAY,MAelByzB,EAAO7zE,UAAU+zE,KAAO,SAAUC,GAgBhC,OAfA3iE,KAAKiD,GAAG,QAAQ,SAAU7C,GACxBuiE,EAAY3xE,KAAKoP,MAEnBJ,KAAKiD,GAAG,QAAQ,SAAU2/D,GACxBD,EAAYrlD,MAAMslD,MAEpB5iE,KAAKiD,GAAG,eAAe,SAAU2/D,GAC/BD,EAAYE,aAAaD,MAE3B5iE,KAAKiD,GAAG,iBAAiB,SAAU2/D,GACjCD,EAAYG,YAAYF,MAE1B5iE,KAAKiD,GAAG,SAAS,SAAU2/D,GACzBD,EAAYx/C,MAAMy/C,MAEbD,GAOTH,EAAO7zE,UAAUqC,KAAO,SAAUoP,GAChCJ,KAAK8D,QAAQ,OAAQ1D,IAGvBoiE,EAAO7zE,UAAU2uB,MAAQ,SAAUslD,GACjC5iE,KAAK8D,QAAQ,OAAQ8+D,IAGvBJ,EAAO7zE,UAAUk0E,aAAe,SAAUD,GACxC5iE,KAAK8D,QAAQ,cAAe8+D,IAG9BJ,EAAO7zE,UAAUm0E,YAAc,SAAUF,GACvC5iE,KAAK8D,QAAQ,gBAAiB8+D,IAGhCJ,EAAO7zE,UAAUw0B,MAAQ,SAAUy/C,GACjC5iE,KAAK8D,QAAQ,QAAS8+D,IAGxB,IAyBIhmE,EAAKmmE,EAAMC,EAAMC,EAAYC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAQhjE,EAAOijE,EAAaC,EAAeC,EAAYC,EAAYC,EAAYC,EAAYC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAyS1PC,EAAaC,EAqLbC,EAAWC,EAAWC,EAvfxBC,EAAS7C,EACT8C,EAAeloE,KAAKmoE,IAAI,EAAG,IAmB3BC,EAAU,CACZC,UAlBgB,SAAmBC,GACnC,IACIjyE,EADAkyE,EAAK,IAAIC,SAASF,EAAMjN,OAAQiN,EAAMhN,WAAYgN,EAAM1O,YAG5D,OAAI2O,EAAGE,cACLpyE,EAAQkyE,EAAGE,aAAa,IAEZrpE,OAAOspE,iBACVtpE,OAAO/I,GAGTA,EAGFkyE,EAAGI,UAAU,GAAKT,EAAeK,EAAGI,UAAU,IAKrDC,WAAYV,GAEVU,EAAaR,EAAQQ,YAGzB,WACE,IAAIp2E,EA2CJ,GA1CAsR,EAAQ,CACN+kE,KAAM,GAENC,KAAM,GACNC,KAAM,GACNpD,KAAM,GACNqD,KAAM,GACNpD,KAAM,GACNC,KAAM,GACNW,KAAM,GACNyC,KAAM,GACN1C,KAAM,GACND,KAAM,GACNR,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNiD,KAAM,GAENhD,KAAM,GACNC,KAAM,GACNgD,KAAM,GACN1C,KAAM,GACN2C,KAAM,GACN1C,KAAM,GACN2C,KAAM,GACNC,KAAM,GACN3C,KAAM,GACN4C,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACN/C,KAAM,GACNR,KAAM,GACNwD,KAAM,GACN/C,KAAM,GACNR,KAAM,GACNwD,KAAM,IAIkB,qBAAfC,WAAX,CAIA,IAAKt3E,KAAKsR,EACJA,EAAMpP,eAAelC,KACvBsR,EAAMtR,GAAK,CAACA,EAAEu3E,WAAW,GAAIv3E,EAAEu3E,WAAW,GAAIv3E,EAAEu3E,WAAW,GAAIv3E,EAAEu3E,WAAW,KAIhFhD,EAAc,IAAI+C,WAAW,CAAC,IAAIC,WAAW,GAAI,IAAIA,WAAW,GAAI,IAAIA,WAAW,GAAI,IAAIA,WAAW,KACtG9C,EAAa,IAAI6C,WAAW,CAAC,IAAIC,WAAW,GAAI,IAAIA,WAAW,GAAI,IAAIA,WAAW,GAAI,IAAIA,WAAW,KACrG/C,EAAgB,IAAI8C,WAAW,CAAC,EAAG,EAAG,EAAG,IACzC5C,EAAa,IAAI4C,WAAW,CAAC,EAC7B,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,IAAM,IAAM,IAAM,IAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAExE3C,EAAa,IAAI2C,WAAW,CAAC,EAC7B,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,IAAM,IAAM,IAAM,IAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAExE1C,EAAa,CACXjkD,MAAO+jD,EACPnkD,MAAOokD,GAETI,EAAO,IAAIuC,WAAW,CAAC,EACvB,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GAClB,IAAM,IAAM,IAAM,GAClB,EACA,EAAM,EAAM,IAEZxC,EAAO,IAAIwC,WAAW,CAAC,EACvB,EAAM,EAAM,EACZ,EAAM,EACN,EAAM,IAENtC,EAAO,IAAIsC,WAAW,CAAC,EACvB,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,IAElBrC,EAAOD,EACPE,EAAO,IAAIoC,WAAW,CAAC,EACvB,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,IAElBnC,EAAOH,EACPH,EAAO,IAAIyC,WAAW,CAAC,EACvB,EAAM,EAAM,EACZ,EAAM,EACN,EAAM,EAAM,EAAM,EAAM,EAAM,KA1GhC,GA8GAtqE,EAAM,SAAa5N,GACjB,IAEIY,EACA4F,EAHA4xE,EAAU,GACV5hE,EAAO,EAKX,IAAK5V,EAAI,EAAGA,EAAIrC,UAAUsC,OAAQD,IAChCw3E,EAAQp2E,KAAKzD,UAAUqC,IAKzB,IAFAA,EAAIw3E,EAAQv3E,OAELD,KACL4V,GAAQ4hE,EAAQx3E,GAAGonE,WAQrB,IALAxhE,EAAS,IAAI0xE,WAAW1hE,EAAO,GACxB,IAAIogE,SAASpwE,EAAOijE,OAAQjjE,EAAOkjE,WAAYljE,EAAOwhE,YACxDqQ,UAAU,EAAG7xE,EAAOwhE,YACzBxhE,EAAO8K,IAAItR,EAAM,GAEZY,EAAI,EAAG4V,EAAO,EAAG5V,EAAIw3E,EAAQv3E,OAAQD,IACxC4F,EAAO8K,IAAI8mE,EAAQx3E,GAAI4V,GACvBA,GAAQ4hE,EAAQx3E,GAAGonE,WAGrB,OAAOxhE,GAGTutE,EAAO,WACL,OAAOnmE,EAAIsE,EAAM6hE,KAAMnmE,EAAIsE,EAAMklE,KAAMzB,KAGzC3B,EAAO,SAActwD,GACnB,OAAO9V,EAAIsE,EAAM8hE,KAAM,IAAIkE,WAAW,CAAC,EACvC,EAAM,EAAM,EAEZ,EACA,GACA,EAAM,EACN,EAEA,EACA,GACA,GACA,GACA,EAAM,EAAM,EACZ,EAAM,EAAM,IAAM,IAClB,EAAM,EAAM,IAAM,IAElB,EACA,EAGAx0D,EAAM40D,iBAAmB,EAAI50D,EAAM60D,yBAA2B,EAAG70D,EAAM60D,wBAA0B,EAAI70D,EAAM80D,cAAgB,EAAG,EAAM,EAAM,MAQ5I5D,EAAO,SAAc50E,GACnB,OAAO4N,EAAIsE,EAAM0iE,KAAMY,EAAWx1E,KAOpC20E,EAAO,SAAcjxD,GACnB,IAAIld,EAAS,IAAI0xE,WAAW,CAAC,EAC7B,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,GAAM,IAClBx0D,EAAMZ,WAAa,GAAK,IAAMY,EAAMZ,WAAa,GAAK,IAAMY,EAAMZ,WAAa,EAAI,IAAuB,IAAjBY,EAAMZ,SAC/F,GAAM,IACN,EAAM,IAWN,OAPIY,EAAM+0D,aACRjyE,EAAO,IAAMkd,EAAM+0D,aAAe,GAAK,IACvCjyE,EAAO,IAAMkd,EAAM+0D,aAAe,GAAK,IACvCjyE,EAAO,IAAMkd,EAAM+0D,aAAe,EAAI,IACtCjyE,EAAO,IAAyB,IAAnBkd,EAAM+0D,YAGd7qE,EAAIsE,EAAMyiE,KAAMnuE,IAGzBkuE,EAAO,SAAchxD,GACnB,OAAO9V,EAAIsE,EAAMwiE,KAAMC,EAAKjxD,GAAQkxD,EAAKlxD,EAAM1jB,MAAOm0E,EAAKzwD,KAG7DwwD,EAAO,SAAcwE,GACnB,OAAO9qE,EAAIsE,EAAMgiE,KAAM,IAAIgE,WAAW,CAAC,EAAM,EAAM,EAAM,GACvC,WAAjBQ,IAAgC,IAAsB,SAAjBA,IAA8B,IAAsB,MAAjBA,IAA4B,EAAoB,IAAjBA,MAI1GvE,EAAO,SAAczwD,GACnB,OAAO9V,EAAIsE,EAAMiiE,KAAqB,UAAfzwD,EAAM1jB,KAAmB4N,EAAIsE,EAAM+lE,KAAMxC,GAAQ7nE,EAAIsE,EAAMslE,KAAM9B,GAAO3B,IAAQe,EAAKpxD,KAG9G0wD,EAAO,SAAcsE,EAAgBlwD,GAInC,IAHA,IAAImwD,EAAiB,GACjB/3E,EAAI4nB,EAAO3nB,OAERD,KACL+3E,EAAe/3E,GAAKo0E,EAAKxsD,EAAO5nB,IAGlC,OAAOgN,EAAIrJ,MAAM,KAAM,CAAC2N,EAAMkiE,KAAMF,EAAKwE,IAAiBx4E,OAAOy4E,KASnEtE,EAAO,SAAc7rD,GAInB,IAHA,IAAI5nB,EAAI4nB,EAAO3nB,OACX+3E,EAAQ,GAELh4E,KACLg4E,EAAMh4E,GAAK4zE,EAAKhsD,EAAO5nB,IAGzB,OAAOgN,EAAIrJ,MAAM,KAAM,CAAC2N,EAAMmiE,KAAME,EAAK,aAAar0E,OAAO04E,GAAO14E,OAAOo0E,EAAK9rD,MAGlF8rD,EAAO,SAAc9rD,GAInB,IAHA,IAAI5nB,EAAI4nB,EAAO3nB,OACX+3E,EAAQ,GAELh4E,KACLg4E,EAAMh4E,GAAKq0E,EAAKzsD,EAAO5nB,IAGzB,OAAOgN,EAAIrJ,MAAM,KAAM,CAAC2N,EAAMoiE,MAAMp0E,OAAO04E,KAG7CrE,EAAO,SAAczxD,GACnB,IAAI0mD,EAAQ,IAAI0O,WAAW,CAAC,EAC5B,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,GAAM,KACN,WAAXp1D,IAA0B,IAAgB,SAAXA,IAAwB,IAAgB,MAAXA,IAAsB,EAAc,IAAXA,EACtF,EAAM,EAAM,EAAM,EAClB,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,EAClN,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1I,IAAM,IAAM,IAAM,MAElB,OAAOlV,EAAIsE,EAAMqiE,KAAM/K,IAGzBqL,EAAO,SAAcnxD,GACnB,IAEIm1D,EACAj4E,EAHAk4E,EAAUp1D,EAAMo1D,SAAW,GAC3BtP,EAAQ,IAAI0O,WAAW,EAAIY,EAAQj4E,QAKvC,IAAKD,EAAI,EAAGA,EAAIk4E,EAAQj4E,OAAQD,IAC9Bi4E,EAAQC,EAAQl4E,GAAGi4E,MACnBrP,EAAM5oE,EAAI,GAAKi4E,EAAME,WAAa,EAAIF,EAAMG,cAAgB,EAAIH,EAAMI,cAGxE,OAAOrrE,EAAIsE,EAAM2iE,KAAMrL,IAGzBsL,EAAO,SAAcpxD,GACnB,OAAO9V,EAAIsE,EAAM4iE,KAAMC,EAAKrxD,GAAQ9V,EAAIsE,EAAM0lE,KAAM7B,GAAOnoE,EAAIsE,EAAMwlE,KAAM7B,GAAOjoE,EAAIsE,EAAMylE,KAAM7B,GAAOloE,EAAIsE,EAAMulE,KAAM7B,KAMzHb,EAAO,SAAcrxD,GACnB,OAAO9V,EAAIsE,EAAM6iE,KAAM,IAAImD,WAAW,CAAC,EACvC,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,IAAuB,UAAfx0D,EAAM1jB,KAAmBg2E,EAAYtyD,GAASuyD,EAAYvyD,KAGtFsyD,EAAc,SAAqBtyD,GACjC,IAII9iB,EACAs4E,EALAC,EAAMz1D,EAAMy1D,KAAO,GACnBC,EAAM11D,EAAM01D,KAAO,GACnBC,EAAwB,GACxBC,EAAuB,GAI3B,IAAK14E,EAAI,EAAGA,EAAIu4E,EAAIt4E,OAAQD,IAC1By4E,EAAsBr3E,MAA0B,MAApBm3E,EAAIv4E,GAAGonE,cAAyB,GAC5DqR,EAAsBr3E,KAAyB,IAApBm3E,EAAIv4E,GAAGonE,YAElCqR,EAAwBA,EAAsBn5E,OAAOsB,MAAM7B,UAAUW,MAAMqE,KAAKw0E,EAAIv4E,KAItF,IAAKA,EAAI,EAAGA,EAAIw4E,EAAIv4E,OAAQD,IAC1B04E,EAAqBt3E,MAA0B,MAApBo3E,EAAIx4E,GAAGonE,cAAyB,GAC3DsR,EAAqBt3E,KAAyB,IAApBo3E,EAAIx4E,GAAGonE,YACjCsR,EAAuBA,EAAqBp5E,OAAOsB,MAAM7B,UAAUW,MAAMqE,KAAKy0E,EAAIx4E,KA+BpF,GA5BAs4E,EAAU,CAAChnE,EAAM+kE,KAAM,IAAIiB,WAAW,CAAC,EAAM,EAAM,EAAM,EAAM,EAAM,EACrE,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GACnD,MAAdx0D,EAAMtX,QAAmB,EAAiB,IAAdsX,EAAMtX,OACnB,MAAfsX,EAAMvX,SAAoB,EAAkB,IAAfuX,EAAMvX,OACpC,EAAM,GAAM,EAAM,EAClB,EAAM,GAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EACN,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1L,EAAM,GACN,GAAM,KACFyB,EAAIsE,EAAMglE,KAAM,IAAIgB,WAAW,CAAC,EACpCx0D,EAAM61D,WACN71D,EAAM81D,qBACN91D,EAAM+1D,SACN,KACEv5E,OAAO,CAACi5E,EAAIt4E,QACdw4E,EACA,CAACD,EAAIv4E,QACLy4E,KACK1rE,EAAIsE,EAAMilE,KAAM,IAAIe,WAAW,CAAC,EAAM,GAAM,IAAM,IACvD,EAAM,GAAM,IAAM,IAClB,EAAM,GAAM,IAAM,QAGdx0D,EAAMg2D,SAAU,CAClB,IAAIC,EAAWj2D,EAAMg2D,SAAS,GAC1BE,EAAWl2D,EAAMg2D,SAAS,GAC9BR,EAAQl3E,KAAK4L,EAAIsE,EAAMqlE,KAAM,IAAIW,WAAW,EAAa,WAAXyB,IAA0B,IAAgB,SAAXA,IAAwB,IAAgB,MAAXA,IAAsB,EAAc,IAAXA,GAA6B,WAAXC,IAA0B,IAAgB,SAAXA,IAAwB,IAAgB,MAAXA,IAAsB,EAAc,IAAXA,MAG5O,OAAOhsE,EAAIrJ,MAAM,KAAM20E,IAGzBjD,EAAc,SAAqBvyD,GACjC,OAAO9V,EAAIsE,EAAMolE,KAAM,IAAIY,WAAW,CACtC,EAAM,EAAM,EAAM,EAAM,EAAM,EAC9B,EAAM,EAEN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GACI,MAArBx0D,EAAM80D,eAA0B,EAAwB,IAArB90D,EAAM80D,cACtB,MAAnB90D,EAAMm2D,aAAwB,EAAsB,IAAnBn2D,EAAMm2D,WACxC,EAAM,EACN,EAAM,GACc,MAAnBn2D,EAAM+0D,aAAwB,EAAsB,IAAnB/0D,EAAM+0D,WAAmB,EAAM,IAE7DzE,EAAKtwD,KAIb+wD,EAAO,SAAc/wD,GACnB,IAAIld,EAAS,IAAI0xE,WAAW,CAAC,EAC7B,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GACN,WAAXx0D,EAAMjJ,KAAoB,IAAgB,SAAXiJ,EAAMjJ,KAAkB,IAAgB,MAAXiJ,EAAMjJ,KAAgB,EAAc,IAAXiJ,EAAMjJ,GAC5F,EAAM,EAAM,EAAM,GACA,WAAjBiJ,EAAMZ,WAA0B,IAAsB,SAAjBY,EAAMZ,WAAwB,IAAsB,MAAjBY,EAAMZ,WAAsB,EAAoB,IAAjBY,EAAMZ,SAC9G,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAC1C,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,EAAM,GAAM,EAAM,EAAM,GACnM,MAAdY,EAAMtX,QAAmB,EAAiB,IAAdsX,EAAMtX,MAAc,EAAM,GACvC,MAAfsX,EAAMvX,SAAoB,EAAkB,IAAfuX,EAAMvX,OAAe,EAAM,IAEzD,OAAOyB,EAAIsE,EAAMuiE,KAAMjuE,IAQzBwuE,EAAO,SAActxD,GACnB,IAAIo2D,EAAqBC,EAAyBC,EAAkBC,EAAmCC,EAA8BC,EA0BrI,OAzBAL,EAAsBlsE,EAAIsE,EAAM6lE,KAAM,IAAIG,WAAW,CAAC,EACtD,EAAM,EAAM,IACA,WAAXx0D,EAAMjJ,KAAoB,IAAgB,SAAXiJ,EAAMjJ,KAAkB,IAAgB,MAAXiJ,EAAMjJ,KAAgB,EAAc,IAAXiJ,EAAMjJ,GAC5F,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,KAElBy/D,EAA+B9rE,KAAK8C,MAAMwS,EAAM02D,oBAAsBpD,GACtEmD,EAA+B/rE,KAAK8C,MAAMwS,EAAM02D,oBAAsBpD,GACtE+C,EAA0BnsE,EAAIsE,EAAM4lE,KAAM,IAAII,WAAW,CAAC,EAC1D,EAAM,EAAM,EAEZgC,IAAiC,GAAK,IAAMA,IAAiC,GAAK,IAAMA,IAAiC,EAAI,IAAqC,IAA/BA,EAAqCC,IAAiC,GAAK,IAAMA,IAAiC,GAAK,IAAMA,IAAiC,EAAI,IAAqC,IAA/BA,KAI9R,GAQM,UAAfz2D,EAAM1jB,MACRg6E,EAAmB9E,EAAOxxD,EATf,IAUJ9V,EAAIsE,EAAM8iE,KAAM8E,EAAqBC,EAAyBC,KAMvEC,EAAwBpF,EAAKnxD,GAC7Bs2D,EAAmB9E,EAAOxxD,EAAOu2D,EAAsBp5E,OAjB1C,IAkBN+M,EAAIsE,EAAM8iE,KAAM8E,EAAqBC,EAAyBC,EAAkBC,KASzFzF,EAAO,SAAc9wD,GAEnB,OADAA,EAAMZ,SAAWY,EAAMZ,UAAY,WAC5BlV,EAAIsE,EAAMsiE,KAAMC,EAAK/wD,GAAQgxD,EAAKhxD,KAG3CuxD,EAAO,SAAcvxD,GACnB,IAAIld,EAAS,IAAI0xE,WAAW,CAAC,EAC7B,EAAM,EAAM,GACA,WAAXx0D,EAAMjJ,KAAoB,IAAgB,SAAXiJ,EAAMjJ,KAAkB,IAAgB,MAAXiJ,EAAMjJ,KAAgB,EAAc,IAAXiJ,EAAMjJ,GAC5F,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,IAUlB,MAJmB,UAAfiJ,EAAM1jB,OACRwG,EAAOA,EAAO3F,OAAS,GAAK,GAGvB+M,EAAIsE,EAAM+iE,KAAMzuE,IASvB4vE,EAAa,SAAoB0C,EAAS9V,GACxC,IAAIqX,EAAkB,EAClBC,EAAc,EACdC,EAAe,EACfC,EAAwB,EAoB5B,OAlBI1B,EAAQj4E,cACkBqL,IAAxB4sE,EAAQ,GAAGh2D,WACbu3D,EAAkB,QAGInuE,IAApB4sE,EAAQ,GAAGtiE,OACb8jE,EAAc,QAGSpuE,IAArB4sE,EAAQ,GAAGD,QACb0B,EAAe,QAGwBruE,IAArC4sE,EAAQ,GAAG0B,wBACbA,EAAwB,IAIrB,CAAC,EACR,EAAMH,EAAkBC,EAAcC,EAAeC,EAAuB,GAC1D,WAAjB1B,EAAQj4E,UAAyB,IAAsB,SAAjBi4E,EAAQj4E,UAAuB,IAAsB,MAAjBi4E,EAAQj4E,UAAqB,EAAoB,IAAjBi4E,EAAQj4E,QACzG,WAATmiE,KAAyB,IAAc,SAATA,KAAuB,IAAc,MAATA,KAAqB,EAAY,IAATA,IAIrFmT,EAAY,SAAmBzyD,EAAOs/C,GACpC,IAAIyX,EAAajR,EAAOkR,EAAQ5B,EAAS6B,EAAQ/5E,EAQjD,IANAoiE,GAAU,GAAS,IADnB8V,EAAUp1D,EAAMo1D,SAAW,IACKj4E,OAChC65E,EAAStE,EAAW0C,EAAS9V,IAC7BwG,EAAQ,IAAI0O,WAAWwC,EAAO75E,OAA0B,GAAjBi4E,EAAQj4E,SACzCyQ,IAAIopE,GACVD,EAAcC,EAAO75E,OAEhBD,EAAI,EAAGA,EAAIk4E,EAAQj4E,OAAQD,IAC9B+5E,EAAS7B,EAAQl4E,GACjB4oE,EAAMiR,MAAoC,WAAlBE,EAAO73D,YAA2B,GAC1D0mD,EAAMiR,MAAoC,SAAlBE,EAAO73D,YAAyB,GACxD0mD,EAAMiR,MAAoC,MAAlBE,EAAO73D,YAAuB,EACtD0mD,EAAMiR,KAAmC,IAAlBE,EAAO73D,SAE9B0mD,EAAMiR,MAAgC,WAAdE,EAAOnkE,QAAuB,GACtDgzD,EAAMiR,MAAgC,SAAdE,EAAOnkE,QAAqB,GACpDgzD,EAAMiR,MAAgC,MAAdE,EAAOnkE,QAAmB,EAClDgzD,EAAMiR,KAA+B,IAAdE,EAAOnkE,KAE9BgzD,EAAMiR,KAAiBE,EAAO9B,MAAM+B,WAAa,EAAID,EAAO9B,MAAME,UAClEvP,EAAMiR,KAAiBE,EAAO9B,MAAMG,cAAgB,EAAI2B,EAAO9B,MAAMI,eAAiB,EAAI0B,EAAO9B,MAAMgC,cAAgB,EAAIF,EAAO9B,MAAMiC,gBACxItR,EAAMiR,KAAoD,MAAnCE,EAAO9B,MAAMkC,oBACpCvR,EAAMiR,KAAoD,GAAnCE,EAAO9B,MAAMkC,oBAEpCvR,EAAMiR,MAAiD,WAA/BE,EAAOH,yBAAwC,GACvEhR,EAAMiR,MAAiD,SAA/BE,EAAOH,yBAAsC,GACrEhR,EAAMiR,MAAiD,MAA/BE,EAAOH,yBAAoC,EACnEhR,EAAMiR,KAAgD,IAA/BE,EAAOH,sBAGhC,OAAO5sE,EAAIsE,EAAM8lE,KAAMxO,IAGzB0M,EAAY,SAAmBxyD,EAAOs/C,GACpC,IAAIwG,EAAOiR,EAAaC,EAAQ5B,EAAS6B,EAAQ/5E,EAQjD,IANAoiE,GAAU,GAAS,GADnB8V,EAAUp1D,EAAMo1D,SAAW,IACIj4E,OAC/B65E,EAAStE,EAAW0C,EAAS9V,IAC7BwG,EAAQ,IAAI0O,WAAWwC,EAAO75E,OAA0B,EAAjBi4E,EAAQj4E,SACzCyQ,IAAIopE,GACVD,EAAcC,EAAO75E,OAEhBD,EAAI,EAAGA,EAAIk4E,EAAQj4E,OAAQD,IAC9B+5E,EAAS7B,EAAQl4E,GACjB4oE,EAAMiR,MAAoC,WAAlBE,EAAO73D,YAA2B,GAC1D0mD,EAAMiR,MAAoC,SAAlBE,EAAO73D,YAAyB,GACxD0mD,EAAMiR,MAAoC,MAAlBE,EAAO73D,YAAuB,EACtD0mD,EAAMiR,KAAmC,IAAlBE,EAAO73D,SAE9B0mD,EAAMiR,MAAgC,WAAdE,EAAOnkE,QAAuB,GACtDgzD,EAAMiR,MAAgC,SAAdE,EAAOnkE,QAAqB,GACpDgzD,EAAMiR,MAAgC,MAAdE,EAAOnkE,QAAmB,EAClDgzD,EAAMiR,KAA+B,IAAdE,EAAOnkE,KAGhC,OAAO5I,EAAIsE,EAAM8lE,KAAMxO,IAGzB0L,EAAS,SAAcxxD,EAAOs/C,GAC5B,MAAmB,UAAft/C,EAAM1jB,KACDk2E,EAAUxyD,EAAOs/C,GAGnBmT,EAAUzyD,EAAOs/C,IAxZ5BiR,EAAO,WACL,OAAOrmE,EAAIsE,EAAM+hE,KAAMkB,EAAaC,EAAeD,EAAaE,IA2ZlE,IA2VI2F,EAiCJC,EACIC,EACAC,EACAC,EACAC,EACAC,EACAC,GAlYAC,GApZG,SAAcpqE,GACnB,OAAOxD,EAAIsE,EAAMmlE,KAAMjmE,IAmZrBoqE,GAGIpH,EAHJoH,GAKW,SAAqBhzD,GAChC,IAEIhiB,EAFAi1E,EAAWxH,IACXyH,EAAQrH,EAAK7rD,GAKjB,OAHAhiB,EAAS,IAAI0xE,WAAWuD,EAASzT,WAAa0T,EAAM1T,aAC7C12D,IAAImqE,GACXj1E,EAAO8K,IAAIoqE,EAAOD,EAASzT,YACpBxhE,GA8LPm1E,GAAiB,SAAwBC,EAAOC,GAClD,IAAIlB,EAvBG,CACLnkE,KAAM,EACNqiE,MAAO,CACL+B,UAAW,EACX7B,UAAW,EACXC,aAAc,EACdC,cAAe,EACf8B,oBAAqB,EACrBD,gBAAiB,IA4BrB,OAZAH,EAAOkB,WAAaA,EACpBlB,EAAOH,sBAAwBoB,EAAME,IAAMF,EAAMG,IACjDpB,EAAO73D,SAAW84D,EAAM94D,SACxB63D,EAAOnkE,KAAO,EAAIolE,EAAM/6E,OAExB85E,EAAOnkE,MAAQolE,EAAM5T,WAEjB4T,EAAMI,WACRrB,EAAO9B,MAAME,UAAY,EACzB4B,EAAO9B,MAAMiC,gBAAkB,GAG1BH,GA6FLsB,GA3RsB,SAA6BC,GACrD,IAAIt7E,EACAu7E,EACAC,EAAe,GACfC,EAAS,GAOb,IALAA,EAAOrU,WAAa,EACpBqU,EAAOC,SAAW,EAClBD,EAAOv5D,SAAW,EAClBs5D,EAAapU,WAAa,EAErBpnE,EAAI,EAAGA,EAAIs7E,EAASr7E,OAAQD,IAGA,gCAF/Bu7E,EAAaD,EAASt7E,IAEP27E,aAGTH,EAAav7E,SACfu7E,EAAat5D,SAAWq5D,EAAWJ,IAAMK,EAAaL,IAEtDM,EAAOrU,YAAcoU,EAAapU,WAClCqU,EAAOC,UAAYF,EAAav7E,OAChCw7E,EAAOv5D,UAAYs5D,EAAat5D,SAChCu5D,EAAOr6E,KAAKo6E,KAGdA,EAAe,CAACD,IACHnU,WAAamU,EAAW/qE,KAAK42D,WAC1CoU,EAAaN,IAAMK,EAAWL,IAC9BM,EAAaL,IAAMI,EAAWJ,MAGC,8CAA3BI,EAAWI,cACbH,EAAaJ,UAAW,GAG1BI,EAAat5D,SAAWq5D,EAAWJ,IAAMK,EAAaL,IACtDK,EAAapU,YAAcmU,EAAW/qE,KAAK42D,WAC3CoU,EAAap6E,KAAKm6E,IAgBtB,OAVIE,EAAOx7E,UAAYu7E,EAAat5D,UAAYs5D,EAAat5D,UAAY,KACvEs5D,EAAat5D,SAAWu5D,EAAOA,EAAOx7E,OAAS,GAAGiiB,UAKpDu5D,EAAOrU,YAAcoU,EAAapU,WAClCqU,EAAOC,UAAYF,EAAav7E,OAChCw7E,EAAOv5D,UAAYs5D,EAAat5D,SAChCu5D,EAAOr6E,KAAKo6E,GACLC,GAqOLJ,GA9NsB,SAA6BI,GACrD,IAAIz7E,EACAw7E,EACAI,EAAa,GACbC,EAAO,GAeX,IAZAD,EAAWxU,WAAa,EACxBwU,EAAWF,SAAW,EACtBE,EAAW15D,SAAW,EACtB05D,EAAWV,IAAMO,EAAO,GAAGP,IAC3BU,EAAWT,IAAMM,EAAO,GAAGN,IAE3BU,EAAKzU,WAAa,EAClByU,EAAKH,SAAW,EAChBG,EAAK35D,SAAW,EAChB25D,EAAKX,IAAMO,EAAO,GAAGP,IACrBW,EAAKV,IAAMM,EAAO,GAAGN,IAEhBn7E,EAAI,EAAGA,EAAIy7E,EAAOx7E,OAAQD,KAC7Bw7E,EAAeC,EAAOz7E,IAELo7E,UAGXQ,EAAW37E,SACb47E,EAAKz6E,KAAKw6E,GACVC,EAAKzU,YAAcwU,EAAWxU,WAC9ByU,EAAKH,UAAYE,EAAWF,SAC5BG,EAAK35D,UAAY05D,EAAW15D,WAG9B05D,EAAa,CAACJ,IACHE,SAAWF,EAAav7E,OACnC27E,EAAWxU,WAAaoU,EAAapU,WACrCwU,EAAWV,IAAMM,EAAaN,IAC9BU,EAAWT,IAAMK,EAAaL,IAC9BS,EAAW15D,SAAWs5D,EAAat5D,WAEnC05D,EAAW15D,UAAYs5D,EAAat5D,SACpC05D,EAAWF,UAAYF,EAAav7E,OACpC27E,EAAWxU,YAAcoU,EAAapU,WACtCwU,EAAWx6E,KAAKo6E,IAapB,OATIK,EAAK57E,QAAU27E,EAAW15D,UAAY,IACxC05D,EAAW15D,SAAW25D,EAAKA,EAAK57E,OAAS,GAAGiiB,UAG9C25D,EAAKzU,YAAcwU,EAAWxU,WAC9ByU,EAAKH,UAAYE,EAAWF,SAC5BG,EAAK35D,UAAY05D,EAAW15D,SAE5B25D,EAAKz6E,KAAKw6E,GACHC,GAuKLR,GA1JsB,SAA6BQ,GACrD,IAAID,EAeJ,OAbKC,EAAK,GAAG,GAAGT,UAAYS,EAAK57E,OAAS,IAExC27E,EAAaC,EAAKnlE,QAClBmlE,EAAKzU,YAAcwU,EAAWxU,WAC9ByU,EAAKH,UAAYE,EAAWF,SAI5BG,EAAK,GAAG,GAAGV,IAAMS,EAAWT,IAC5BU,EAAK,GAAG,GAAGX,IAAMU,EAAWV,IAC5BW,EAAK,GAAG,GAAG35D,UAAY05D,EAAW15D,UAG7B25D,GA0ILR,GAzFwB,SAA6BQ,EAAMC,GAC7D,IAAIv5C,EACAviC,EACA+5E,EACA6B,EACAJ,EACAP,EAAaa,GAAkB,EAC/B5D,EAAU,GAEd,IAAK31C,EAAI,EAAGA,EAAIs5C,EAAK57E,OAAQsiC,IAG3B,IAFAq5C,EAAaC,EAAKt5C,GAEbviC,EAAI,EAAGA,EAAI47E,EAAW37E,OAAQD,IACjCw7E,EAAeI,EAAW57E,GAE1Bi7E,IADAlB,EAASgB,GAAeS,EAAcP,IACjBrlE,KACrBsiE,EAAQ92E,KAAK24E,GAIjB,OAAO7B,GAqELmD,GAjEqB,SAA4BQ,GACnD,IAAIt5C,EACAviC,EACAu7B,EACAqgD,EACAJ,EACAD,EACAN,EAAa,EACbc,EAAiBF,EAAKzU,WACtB4U,EAAeH,EAAKH,SAEpBlrE,EAAO,IAAI8mE,WADOyE,EAAiB,EAAIC,GAEvCC,EAAO,IAAIjG,SAASxlE,EAAKq4D,QAE7B,IAAKtmC,EAAI,EAAGA,EAAIs5C,EAAK57E,OAAQsiC,IAG3B,IAFAq5C,EAAaC,EAAKt5C,GAEbviC,EAAI,EAAGA,EAAI47E,EAAW37E,OAAQD,IAGjC,IAFAw7E,EAAeI,EAAW57E,GAErBu7B,EAAI,EAAGA,EAAIigD,EAAav7E,OAAQs7B,IACnCggD,EAAaC,EAAajgD,GAC1B0gD,EAAKxE,UAAUwD,EAAYM,EAAW/qE,KAAK42D,YAC3C6T,GAAc,EACdzqE,EAAKE,IAAI6qE,EAAW/qE,KAAMyqE,GAC1BA,GAAcM,EAAW/qE,KAAK42D,WAKpC,OAAO52D,GAmDL0rE,GAAa,CAAC,GAAI,GAAI,EAAG,GAAI,IAAK,IAClCC,GAAY,CAAC,GAAI,GAAI,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,GAAI,IAAK,KAEjEC,GAAW,SAAkBngB,GAG/B,IAFA,IAAInwC,EAAI,GAEDmwC,KACLnwC,EAAE1qB,KAAK,GAGT,OAAO0qB,GAcLuwD,GAAY,WACd,IAAKjC,EAAS,CAEZ,IAAIkC,EAAgB,CAClB,KAAO,CAACJ,GAAY,CAAC,IAAK,IAAKE,GAAS,KAAM,CAAC,KAC/C,MAAO,CAACF,GAAY,CAAC,KAAME,GAAS,KAAM,CAAC,KAC3C,KAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,KAChD,KAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,IAAK,CAAC,MAC9E,MAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,IAAK,CAAC,MAC9E,KAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,GAAI,KAAMA,GAAS,KAAM,CAAC,MAC1E,KAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,IAAK,KAAMA,GAAS,KAAM,CAAC,MAC1G,KAAO,CAACF,GAAY,CAAC,IAAK,KAAME,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,IAAK,KAAMA,GAAS,KAAM,CAAC,IAAK,KAAMA,GAAS,KAAM,CAAC,EAAG,MACxI,KAAO,CAACD,GAAWC,GAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,GAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,KAC7J,MAAO,CAACD,GAAWC,GAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,GAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,GAAS,KAAM,CAAC,MAC5L,IAAM,CAACD,GAAWC,GAAS,KAAM,CAAC,EAAG,IAAK,IAAKA,GAAS,IAAK,CAAC,KAzBjCG,EA2BXD,EAApBlC,EA1BKn3E,OAAOC,KAAKq5E,GAAWzgE,QAAO,SAAUnd,EAAK4E,GAIlD,OAHA5E,EAAI4E,GAAO,IAAI+zE,WAAWiF,EAAUh5E,GAAKuY,QAAO,SAAU0gE,EAAK51C,GAC7D,OAAO41C,EAAIl9E,OAAOsnC,KACjB,KACIjoC,IACN,IANW,IAAmB49E,EA8BjC,OAAOnC,GAULqC,GAAqB,IA0BzBhC,EAAmB,SAA0BiC,EAAWC,GACtD,OAAOtC,EAAiBG,EAAiBkC,EAAWC,KAGtDjC,EAAmB,SAA0BgC,EAAWC,GACtD,OAAOrC,EAAiBC,EAAiBmC,GAAYC,IAQvDhC,GAAsB,SAA6B+B,EAAWE,EAAkBC,GAC9E,OAAOtC,EAAiBsC,EAAyBH,EAAYA,EAAYE,IAG3E,IAAIE,GACgBL,GADhBK,GAjCJzC,EAAmB,SAA0Bj4C,GAC3C,OAAOA,EAAUq6C,IAgCfK,IA7BJxC,EAAmB,SAA0Bl4C,EAASu6C,GACpD,OAAOv6C,EAAUu6C,GAGnBpC,EAAmB,SAA0BmC,GAC3C,OAAOA,EAAYD,KAwBjBK,IArBJtC,EAAmB,SAA0BkC,EAAWC,GACtD,OAAOD,EAAYC,GA0BDlC,GANhBqC,GAOgBpC,EAPhBoC,GAQmBnC,GA2InBoC,GA/GoB,SAA2Bj6D,EAAO24D,EAAQuB,EAAoBC,GACpF,IAAIC,EACAC,EAIAC,EACAp9E,EACAq9E,EALAC,EAAmB,EACnBC,EAAsB,EACtBC,EAAoB,EAKxB,GAAK/B,EAAOx7E,SAIZi9E,EAAwBJ,GAAuBh6D,EAAM02D,oBAAqB12D,EAAM+0D,YAEhFsF,EAAgB3vE,KAAKiwE,KAAKX,IAA0Bh6D,EAAM+0D,WAAa,OAEnEmF,GAAsBC,IAExBK,EAAmBJ,EAAwB1vE,KAAKC,IAAIuvE,EAAoBC,GAGxEO,GADAD,EAAsB/vE,KAAK8C,MAAMgtE,EAAmBH,IACVA,KAKxCI,EAAsB,GAAKC,EAAoBV,GAAyB,IAA5E,CAYA,KARAM,EAAcf,KAAYv5D,EAAM+0D,eAK9BuF,EAAc3B,EAAO,GAAGjrE,MAGrBxQ,EAAI,EAAGA,EAAIu9E,EAAqBv9E,IACnCq9E,EAAa5B,EAAO,GACpBA,EAAO97E,OAAO,EAAG,EAAG,CAClB6Q,KAAM4sE,EACNjC,IAAKkC,EAAWlC,IAAMgC,EACtBjC,IAAKmC,EAAWnC,IAAMiC,IAK1B,OADAr6D,EAAM02D,qBAAuBhsE,KAAK8C,MAAMwsE,GAAuBU,EAAmB16D,EAAM+0D,aACjF2F,IA6DLT,GAtD8B,SAAqCW,EAAY56D,EAAO66D,GACxF,OAAI76D,EAAM86D,eAAiBD,EAClBD,GAIT56D,EAAM86D,cAAgBl7C,IACfg7C,EAAWt7E,QAAO,SAAUo5E,GAEjC,OAAIA,EAAaL,KAAOwC,IACtB76D,EAAM86D,cAAgBpwE,KAAKE,IAAIoV,EAAM86D,cAAepC,EAAaL,KACjEr4D,EAAM+6D,cAAgB/6D,EAAM86D,eACrB,QA0CTb,GAjCsB,SAA6BtB,GACrD,IAAIz7E,EACAw7E,EACAtD,EAAU,GAEd,IAAKl4E,EAAI,EAAGA,EAAIy7E,EAAOx7E,OAAQD,IAC7Bw7E,EAAeC,EAAOz7E,GACtBk4E,EAAQ92E,KAAK,CACXwU,KAAM4lE,EAAahrE,KAAK42D,WACxBllD,SAAU,OAKd,OAAOg2D,GAmBL6E,GAfuB,SAA8BtB,GACvD,IAAIz7E,EACAw7E,EACAP,EAAa,EACbzqE,EAAO,IAAI8mE,WAnHS,SAA6BwG,GACrD,IAAI99E,EAEA+9E,EAAM,EAEV,IAAK/9E,EAAI,EAAGA,EAAI89E,EAAM79E,OAAQD,IAE5B+9E,GADaD,EAAM99E,GACDwQ,KAAK42D,WAGzB,OAAO2W,EAyGmBC,CAAoBvC,IAE9C,IAAKz7E,EAAI,EAAGA,EAAIy7E,EAAOx7E,OAAQD,IAC7Bw7E,EAAeC,EAAOz7E,GACtBwQ,EAAKE,IAAI8qE,EAAahrE,KAAMyqE,GAC5BA,GAAcO,EAAahrE,KAAK42D,WAGlC,OAAO52D,GAgBLytE,GAAqBnB,GA8FrBoB,GA5Ce,SAAsBp7D,UAChCA,EAAM86D,qBACN96D,EAAMq7D,qBACNr7D,EAAM+6D,qBACN/6D,EAAMs7D,eAwCXF,GA5BoC,SAA2Cp7D,EAAO+5D,GACxF,IAAIrD,EAEAoE,EAAgB96D,EAAM86D,cAsB1B,OApBKf,IACHe,GAAiB96D,EAAMu7D,kBAAkBlD,KAK3C3B,EAAsB12D,EAAMu7D,kBAAkB7E,oBAE9CA,GAAuBoE,EAEvBpE,EAAsBhsE,KAAKC,IAAI,EAAG+rE,GAEf,UAAf12D,EAAM1jB,OAIRo6E,GADQ12D,EAAM+0D,WAAaoG,GAE3BzE,EAAsBhsE,KAAK8C,MAAMkpE,IAG5BA,GAGL0E,GAvFiB,SAAwBp7D,EAAOtS,GAC1B,kBAAbA,EAAK0qE,WACsB5vE,IAAhCwX,EAAMu7D,kBAAkBnD,MAC1Bp4D,EAAMu7D,kBAAkBnD,IAAM1qE,EAAK0qE,UAGT5vE,IAAxBwX,EAAM+6D,cACR/6D,EAAM+6D,cAAgBrtE,EAAK0qE,IAE3Bp4D,EAAM+6D,cAAgBrwE,KAAKE,IAAIoV,EAAM+6D,cAAertE,EAAK0qE,UAG/B5vE,IAAxBwX,EAAMs7D,cACRt7D,EAAMs7D,cAAgB5tE,EAAK0qE,IAE3Bp4D,EAAMs7D,cAAgB5wE,KAAKC,IAAIqV,EAAMs7D,cAAe5tE,EAAK0qE,MAIrC,kBAAb1qE,EAAK2qE,WACsB7vE,IAAhCwX,EAAMu7D,kBAAkBlD,MAC1Br4D,EAAMu7D,kBAAkBlD,IAAM3qE,EAAK2qE,UAGT7vE,IAAxBwX,EAAM86D,cACR96D,EAAM86D,cAAgBptE,EAAK2qE,IAE3Br4D,EAAM86D,cAAgBpwE,KAAKE,IAAIoV,EAAM86D,cAAeptE,EAAK2qE,UAG/B7vE,IAAxBwX,EAAMq7D,cACRr7D,EAAMq7D,cAAgB3tE,EAAK2qE,IAE3Br4D,EAAMq7D,cAAgB3wE,KAAKC,IAAIqV,EAAMq7D,cAAe3tE,EAAK2qE,OAgP3DmD,GA1JW,SAAkB1V,GAS/B,IARA,IAAI5oE,EAAI,EACJ4F,EAAS,CACX24E,aAAc,EACdC,YAAa,GAEXD,EAAc,EACdC,EAAc,EAEXx+E,EAAI4oE,EAAMxB,YAnBM,MAqBjBwB,EAAM5oE,IAFiB,CAO3B,KAAoB,MAAb4oE,EAAM5oE,IACXu+E,GAAe,IACfv+E,IAKF,IAFAu+E,GAAe3V,EAAM5oE,KAED,MAAb4oE,EAAM5oE,IACXw+E,GAAe,IACfx+E,IAMF,GAHAw+E,GAAe5V,EAAM5oE,MAGhB4F,EAAO4xE,SA1CqB,IA0CV+G,EAAgD,CAGrE,GAAuB,SAFF/pB,OAAO+T,aAAaK,EAAM5oE,EAAI,GAAI4oE,EAAM5oE,EAAI,GAAI4oE,EAAM5oE,EAAI,GAAI4oE,EAAM5oE,EAAI,IAE9D,CAC7B4F,EAAO24E,YAAcA,EACrB34E,EAAO44E,YAAcA,EACrB54E,EAAO4xE,QAAU5O,EAAM4E,SAASxtE,EAAGA,EAAIw+E,GACvC,MAEA54E,EAAO4xE,aAAU,EAKrBx3E,GAAKw+E,EACLD,EAAc,EACdC,EAAc,EAGhB,OAAO54E,GAwGL04E,GApGgB,SAAuBG,GAGzC,OAAuB,MAAnBA,EAAIjH,QAAQ,IAK+B,MAA1CiH,EAAIjH,QAAQ,IAAM,EAAIiH,EAAIjH,QAAQ,KAKqD,SAAxFhjB,OAAO+T,aAAakW,EAAIjH,QAAQ,GAAIiH,EAAIjH,QAAQ,GAAIiH,EAAIjH,QAAQ,GAAIiH,EAAIjH,QAAQ,KAK7D,IAAnBiH,EAAIjH,QAAQ,GAdP,KAoBFiH,EAAIjH,QAAQhK,SAAS,EAAGiR,EAAIjH,QAAQv3E,OAAS,IA4ElDq+E,GAxEsB,SAA6BpD,EAAKwD,GAC1D,IACI1+E,EACAi8D,EACAmG,EACA5xD,EAJA8pD,EAAU,GAMd,KAAoB,GAAdokB,EAAS,IACb,OAAOpkB,EAMT,IAFA2B,EAAsB,GAAdyiB,EAAS,GAEZ1+E,EAAI,EAAGA,EAAIi8D,EAAOj8D,IAErBwQ,EAAO,CACLpR,KAA6B,EAAvBs/E,GAFRtc,EAAa,EAAJpiE,GAEiB,GACxBk7E,IAAKA,GAGoB,EAAvBwD,EAAStc,EAAS,KACpB5xD,EAAKmuE,OAASD,EAAStc,EAAS,IAAM,EAAIsc,EAAStc,EAAS,GAC5D9H,EAAQl5D,KAAKoP,IAIjB,OAAO8pD,GA6CLgkB,GA1CoC,SAAyC9tE,GAO/E,IANA,IAGIouE,EACAC,EAJA5+E,EAASuQ,EAAK42D,WACd0X,EAAoC,GACpC9+E,EAAI,EAIDA,EAAIC,EAAS,GACF,IAAZuQ,EAAKxQ,IAA4B,IAAhBwQ,EAAKxQ,EAAI,IAA4B,IAAhBwQ,EAAKxQ,EAAI,IACjD8+E,EAAkC19E,KAAKpB,EAAI,GAC3CA,GAAK,GAELA,IAMJ,GAAiD,IAA7C8+E,EAAkC7+E,OACpC,OAAOuQ,EAITouE,EAAY3+E,EAAS6+E,EAAkC7+E,OACvD4+E,EAAU,IAAIvH,WAAWsH,GACzB,IAAIG,EAAc,EAElB,IAAK/+E,EAAI,EAAGA,EAAI4+E,EAAWG,IAAe/+E,IACpC++E,IAAgBD,EAAkC,KAEpDC,IAEAD,EAAkCpoE,SAGpCmoE,EAAQ7+E,GAAKwQ,EAAKuuE,GAGpB,OAAOF,GAILP,GArKiC,EA8KjCU,GAAkB,SAASC,EAActwE,GAC3CA,EAAUA,GAAW,GACrBswE,EAAclgF,UAAU8zE,KAAK9uE,KAAKqM,MAElCA,KAAK8uE,kBAAwD,mBAA7BvwE,EAAQwwE,kBAAiCxwE,EAAQwwE,iBACjF/uE,KAAKgvE,gBAAkB,GACvBhvE,KAAKivE,WAAa,CAAC,IAAIC,GAAa,EAAG,GACvC,IAAIA,GAAa,EAAG,GACpB,IAAIA,GAAa,EAAG,GACpB,IAAIA,GAAa,EAAG,IAGhBlvE,KAAK8uE,oBACP9uE,KAAKmvE,aAAe,IAAIC,GAAa,CACnCC,gBAAiB9wE,EAAQ8wE,mBAI7BrvE,KAAKmjB,QAELnjB,KAAKivE,WAAW/7E,SAAQ,SAAUo8E,GAChCA,EAAGrsE,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SACtCsvE,EAAGrsE,GAAG,cAAejD,KAAK8D,QAAQW,KAAKzE,KAAM,gBAC7CsvE,EAAGrsE,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,WACrCA,MAECA,KAAK8uE,oBACP9uE,KAAKmvE,aAAalsE,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SACrDA,KAAKmvE,aAAalsE,GAAG,cAAejD,KAAK8D,QAAQW,KAAKzE,KAAM,gBAC5DA,KAAKmvE,aAAalsE,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,YAIzD4uE,GAAgBjgF,UAAY,IAAI02E,GAENr0E,KAAO,SAAU+K,GACzC,IAAIsyE,EAAKC,EAAUiB,EAEnB,GAA0B,aAAtBxzE,EAAMwvE,cAKV8C,EAAMH,GAA6BnyE,EAAMyzE,cAEhCpI,SAKLiH,EAAIF,cAAgBD,KAKxBI,EAAWJ,GAAkCG,IAc7C,GAAItyE,EAAMgvE,IAAM/qE,KAAKyvE,WAEnBzvE,KAAK0vE,qBAAsB,MAF7B,CAIO,GAAI3zE,EAAMgvE,MAAQ/qE,KAAKyvE,YAAczvE,KAAK0vE,oBAQ/C,OAPA1vE,KAAK2vE,mBAEA3vE,KAAK2vE,cAER3vE,KAAK0vE,qBAAsB,IAO/BH,EAAoBrB,GAAwCnyE,EAAM+uE,IAAKwD,GACvEtuE,KAAKgvE,gBAAkBhvE,KAAKgvE,gBAAgB9/E,OAAOqgF,GAE/CvvE,KAAKyvE,aAAe1zE,EAAMgvE,MAC5B/qE,KAAK2vE,YAAc,GAGrB3vE,KAAK2vE,cACL3vE,KAAKyvE,WAAa1zE,EAAMgvE,MAG1B6D,GAAgBjgF,UAAUihF,eAAiB,SAAUC,GACnD7vE,KAAKivE,WAAW/7E,SAAQ,SAAUo8E,GAChC,MAAqB,UAAdO,EAAwBP,EAAGhyD,QAAUgyD,EAAGzM,iBAC9C7iE,OAGL4uE,GAAgBjgF,UAAUmhF,YAAc,SAAUD,GAE3C7vE,KAAKgvE,gBAAgBn/E,QAO1BmQ,KAAKgvE,gBAAgB97E,SAAQ,SAAU0N,EAAMmvE,GAC3CnvE,EAAKovE,aAAeD,KAGtB/vE,KAAKgvE,gBAAgBnkC,MAAK,SAAUnvB,EAAG8lC,GACrC,OAAI9lC,EAAEovD,MAAQtpB,EAAEspB,IACPpvD,EAAEs0D,aAAexuB,EAAEwuB,aAGrBt0D,EAAEovD,IAAMtpB,EAAEspB,OAEnB9qE,KAAKgvE,gBAAgB97E,SAAQ,SAAU+8E,GACjCA,EAAOjhF,KAAO,EAEhBgR,KAAKkwE,qBAAqBD,GAG1BjwE,KAAKmwE,qBAAqBF,KAE3BjwE,MACHA,KAAKgvE,gBAAgBn/E,OAAS,EAC9BmQ,KAAK4vE,eAAeC,IA3BlB7vE,KAAK4vE,eAAeC,IA8BxBjB,GAAgBjgF,UAAU2uB,MAAQ,WAChC,OAAOtd,KAAK8vE,YAAY,UAI1BlB,GAAgBjgF,UAAUk0E,aAAe,WACvC,OAAO7iE,KAAK8vE,YAAY,iBAG1BlB,GAAgBjgF,UAAUw0B,MAAQ,WAChCnjB,KAAKyvE,WAAa,KAClBzvE,KAAK0vE,qBAAsB,EAC3B1vE,KAAK2vE,YAAc,EACnB3vE,KAAKowE,qBAAuB,CAAC,KAAM,MACnCpwE,KAAKivE,WAAW/7E,SAAQ,SAAUm9E,GAChCA,EAASltD,YAgBbyrD,GAAgBjgF,UAAUuhF,qBAAuB,SAAUD,GAErDjwE,KAAKswE,oBAAoBL,GAC3BjwE,KAAKowE,qBAAqBH,EAAOjhF,MAAQ,KAChCgR,KAAKuwE,mBAAmBN,GACjCjwE,KAAKowE,qBAAqBH,EAAOjhF,MAAQ,EAChCgR,KAAKwwE,mBAAmBP,KACjCjwE,KAAKowE,qBAAqBH,EAAOjhF,MAAQ,GAGI,OAA3CgR,KAAKowE,qBAAqBH,EAAOjhF,OAOrCgR,KAAKivE,YAAYgB,EAAOjhF,MAAQ,GAAKgR,KAAKowE,qBAAqBH,EAAOjhF,OAAOgC,KAAKi/E,IAGpFrB,GAAgBjgF,UAAU4hF,mBAAqB,SAAUN,GACvD,OAAoC,QAAZ,MAAhBA,EAAO1B,SAGjBK,GAAgBjgF,UAAU6hF,mBAAqB,SAAUP,GACvD,OAAoC,QAAZ,MAAhBA,EAAO1B,SAGjBK,GAAgBjgF,UAAU2hF,oBAAsB,SAAUL,GACxD,OAAoC,OAAZ,MAAhBA,EAAO1B,SAA4D,QAAZ,MAAhB0B,EAAO1B,SAA4D,QAAZ,MAAhB0B,EAAO1B,SAG/FK,GAAgBjgF,UAAUwhF,qBAAuB,SAAUF,GACrDjwE,KAAK8uE,mBACP9uE,KAAKmvE,aAAan+E,KAAKi/E,IAsB3B,IAAIQ,GAA4B,CAC9B,IAAM,KAEN,KAAQ,GAER,KAAQ,IAER,KAAQ,KAER,KAAQ,IAER,KAAQ,IAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,IAER,KAAQ,IAER,KAAQ,KAER,KAAQ,IAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,KAER,KAAQ,OAeNC,GAAqB,SAA4BlvB,GACnD,OAAO,IAAQA,GAAKA,GAAK,KAAQ,KAAQA,GAAKA,GAAK,KAGjDmvB,GAAe,SAAsBC,GACvC5wE,KAAK4wE,UAAYA,EACjB5wE,KAAKmjB,SAGPwtD,GAAahiF,UAAUw0B,MAAQ,WAC7BnjB,KAAK6wE,YACL7wE,KAAK8wE,gBAAiB,EACtB9wE,KAAK+wE,QAAU,GACf/wE,KAAKgxE,QAAU,GACfhxE,KAAKixE,OAAS,GACdjxE,KAAKkxE,SAAW,GAGhBlxE,KAAKmxE,QAAU,EACfnxE,KAAKoxE,QAAU,EACfpxE,KAAKqxE,WAAa,EAClBrxE,KAAK0rC,SAAW,EAChB1rC,KAAKsxE,oBAAsB,EAC3BtxE,KAAKuxE,eAAiB,EACtBvxE,KAAKwxE,iBAAmB,EACxBxxE,KAAKyxE,YAAc,EACnBzxE,KAAK0xE,SAAW,EAChB1xE,KAAK2xE,gBAAkB3xE,KAAK0xE,SAAW,EACvC1xE,KAAK4xE,YAAc,GACnB5xE,KAAK6xE,YAAc,EACnB7xE,KAAK8xE,SAAW,GAGlBnB,GAAahiF,UAAUojF,QAAU,WAC/B,OAAO/xE,KAAKgyE,KAAKt4E,KAAK,OAGxBi3E,GAAahiF,UAAUkiF,UAAY,WACjC7wE,KAAKgyE,KAAO,CAAC,IACbhyE,KAAKiyE,OAAS,GAGhBtB,GAAahiF,UAAUujF,QAAU,SAAUpH,GAWzC,IAVI9qE,KAAKgyE,KAAKniF,QAAUmQ,KAAK2xE,iBAAqD,oBAA3B3xE,KAAKmyE,mBAC1DnyE,KAAKmyE,kBAAkBrH,GAGrB9qE,KAAKgyE,KAAKniF,OAAS,IACrBmQ,KAAKgyE,KAAKhhF,KAAK,IACfgP,KAAKiyE,UAIAjyE,KAAKgyE,KAAKniF,OAASmQ,KAAK2xE,iBAC7B3xE,KAAKgyE,KAAK1rE,QACVtG,KAAKiyE,UAITtB,GAAahiF,UAAUyjF,QAAU,WAC/B,OAAyB,IAArBpyE,KAAKgyE,KAAKniF,QAEkB,IAArBmQ,KAAKgyE,KAAKniF,QACK,KAAjBmQ,KAAKgyE,KAAK,IAMrBrB,GAAahiF,UAAU0jF,QAAU,SAAUh6E,GACzC2H,KAAKgyE,KAAKhyE,KAAKiyE,SAAW55E,GAG5Bs4E,GAAahiF,UAAU2jF,UAAY,WACjC,IAAKtyE,KAAKoyE,UAAW,CACnB,IAAIG,EAAMvyE,KAAKgyE,KAAKhyE,KAAKiyE,QACzBjyE,KAAKgyE,KAAKhyE,KAAKiyE,QAAUM,EAAIC,OAAO,EAAGD,EAAI1iF,OAAS,KAIxD,IAAI4iF,GAAgB,SAAuBC,EAAYC,EAAUtN,GAC/DrlE,KAAK0yE,WAAaA,EAClB1yE,KAAK3H,KAAO,GACZ2H,KAAK4yE,cAAgB,IAAIjC,IAAc,GACvC3wE,KAAK6yE,QAAU,GACf7yE,KAAKqlE,OAASA,EAEU,kBAAbsN,GACT3yE,KAAK8yE,kBAAkBH,IAY3BF,GAAc9jF,UAAU8zE,KAAO,SAAUqI,EAAKqH,GAC5CnyE,KAAK+yE,SAAWjI,EAEhB,IAAK,IAAI98E,EAAM,EAAGA,EAAM,EAAGA,IACzBgS,KAAK6yE,QAAQ7kF,GAAO,IAAI2iF,GAAa3iF,GAEJ,oBAAtBmkF,IACTnyE,KAAK6yE,QAAQ7kF,GAAKmkF,kBAAoBA,IAW5CM,GAAc9jF,UAAUqkF,iBAAmB,SAAUpC,GACnD5wE,KAAK4yE,cAAgB5yE,KAAK6yE,QAAQjC,IAOpC6B,GAAc9jF,UAAUmkF,kBAAoB,SAAUH,GACpD,GAA2B,qBAAhBM,YACTjzE,KAAKqlE,OAAOvhE,QAAQ,MAAO,CACzB1T,MAAO,OACP6hB,QAAS,0EAGX,IACEjS,KAAKkzE,aAAe,IAAID,YAAYN,GACpC,MAAO/gF,GACPoO,KAAKqlE,OAAOvhE,QAAQ,MAAO,CACzB1T,MAAO,OACP6hB,QAAS,yCAA2C0gE,EAAW,cAAgB/gF,MAMvF,IAAIw9E,GAAe,SAASA,EAAa7wE,GACvCA,EAAUA,GAAW,GACrB6wE,EAAazgF,UAAU8zE,KAAK9uE,KAAKqM,MACjC,IAGImzE,EAHAhlF,EAAO6R,KACPqvE,EAAkB9wE,EAAQ8wE,iBAAmB,GAC7C+D,EAA0B,GAG9BvgF,OAAOC,KAAKu8E,GAAiBn8E,SAAQ,SAAUmgF,GAC7CF,EAAe9D,EAAgBgE,GAE3B,WAAWliF,KAAKkiF,KAClBD,EAAwBC,GAAeF,EAAaR,aAGxD3yE,KAAKszE,iBAAmBF,EACxBpzE,KAAKuzE,iBAAmB,KACxBvzE,KAAKwzE,SAAW,GAEhBxzE,KAAKhP,KAAO,SAAUi/E,GACA,IAAhBA,EAAOjhF,MAETb,EAAKslF,eACLtlF,EAAKulF,YAAYzD,KAEa,OAA1B9hF,EAAKolF,kBAEPplF,EAAKslF,eAGPtlF,EAAKulF,YAAYzD,MAKvBb,GAAazgF,UAAY,IAAI02E,EAK7B+J,GAAazgF,UAAU8kF,aAAe,WACN,OAA1BzzE,KAAKuzE,kBACPvzE,KAAK2zE,gBAGP3zE,KAAKuzE,iBAAmB,CACtBnzE,KAAM,GACNwzE,QAAS,KAQbxE,GAAazgF,UAAU+kF,YAAc,SAAUzD,GAC7C,IAAI7vE,EAAO6vE,EAAO1B,OACdsF,EAAQzzE,IAAS,EACjB0zE,EAAe,IAAP1zE,EAGZJ,KAAKuzE,iBAAiBK,QAAQ5iF,KAAKi/E,EAAOnF,KAC1C9qE,KAAKuzE,iBAAiBnzE,KAAKpP,KAAK6iF,GAChC7zE,KAAKuzE,iBAAiBnzE,KAAKpP,KAAK8iF,IAOlC1E,GAAazgF,UAAUglF,cAAgB,WACrC,IAAII,EAAY/zE,KAAKuzE,iBACjBS,EAAaD,EAAU3zE,KACvBsyE,EAAa,KACbuB,EAAY,KACZrkF,EAAI,EACJ4xD,EAAIwyB,EAAWpkF,KAInB,IAHAmkF,EAAUG,IAAM1yB,GAAK,EACrBuyB,EAAUI,SAAe,GAAJ3yB,EAEd5xD,EAAIokF,EAAWnkF,OAAQD,IAG5BqkF,EAAgB,IAFhBzyB,EAAIwyB,EAAWpkF,MAII,KAHnB8iF,EAAalxB,GAAK,IAGMyyB,EAAY,IAGlCvB,EADAlxB,EAAIwyB,EAAWpkF,MAIjBoQ,KAAKo0E,iBAAiB1B,EAAY9iF,EAAGqkF,GAEjCA,EAAY,IACdrkF,GAAKqkF,EAAY,IAkBvB7E,GAAazgF,UAAUylF,iBAAmB,SAAU1B,EAAYjhE,EAAOjM,GACrE,IAAIg8C,EACA5xD,EAAI6hB,EACJuiE,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCi0E,EAAUr0E,KAAKwzE,SAASd,GAM5B,IAJK2B,IACHA,EAAUr0E,KAAKs0E,YAAY5B,EAAY9iF,IAGlCA,EAAI6hB,EAAQjM,GAAQ5V,EAAIokF,EAAWnkF,OAAQD,IAChD4xD,EAAIwyB,EAAWpkF,GAEX8gF,GAAmBlvB,GACrB5xD,EAAIoQ,KAAKu0E,WAAW3kF,EAAGykF,GACR,KAAN7yB,EACT5xD,EAAIoQ,KAAKw0E,mBAAmB5kF,EAAGykF,GAChB,KAAN7yB,EACT5xD,EAAIoQ,KAAKy0E,iBAAiB7kF,EAAGykF,GACpB,KAAQ7yB,GAAKA,GAAK,IAC3B5xD,EAAIoQ,KAAKgzE,iBAAiBpjF,EAAGykF,GACpB,KAAQ7yB,GAAKA,GAAK,IAC3B5xD,EAAIoQ,KAAK00E,aAAa9kF,EAAGykF,GACV,MAAN7yB,EACT5xD,EAAIoQ,KAAK20E,aAAa/kF,EAAGykF,GACV,MAAN7yB,EACT5xD,EAAIoQ,KAAK40E,cAAchlF,EAAGykF,GACX,MAAN7yB,EACT5xD,EAAIoQ,KAAK60E,eAAejlF,EAAGykF,GACZ,MAAN7yB,EACT5xD,EAAIoQ,KAAK80E,YAAYllF,EAAGykF,GACT,MAAN7yB,EACT5xD,EAAIoQ,KAAK+0E,cAAcnlF,EAAGykF,GACX,MAAN7yB,EACT5xD,EAAIoQ,KAAKg1E,oBAAoBplF,EAAGykF,GACjB,MAAN7yB,EACT5xD,EAAIoQ,KAAKi1E,iBAAiBrlF,EAAGykF,GACd,MAAN7yB,EACT5xD,EAAIoQ,KAAKk1E,YAAYtlF,EAAGykF,GACT,MAAN7yB,EACT5xD,EAAIoQ,KAAKm1E,eAAevlF,EAAGykF,GACZ,MAAN7yB,EACT6yB,EAAUr0E,KAAKmjB,MAAMvzB,EAAGykF,GACT,IAAN7yB,EAET6yB,EAAQzB,cAAcN,YACP,KAAN9wB,EAET6yB,EAAQzB,cAAc/B,YACP,KAANrvB,EAET6yB,EAAQzB,cAAc9B,gBAAiB,EACxB,KAANtvB,EAET6yB,EAAQzB,cAAc/B,YACP,MAANrvB,GAET5xD,KAaNw/E,GAAazgF,UAAU8lF,iBAAmB,SAAU7kF,EAAGykF,GACrD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GAQrB,OANI8gF,GAAmBlvB,KACrB5xD,EAAIoQ,KAAKu0E,WAAW3kF,EAAGykF,EAAS,CAC9Be,YAAY,KAITxlF,GAUTw/E,GAAazgF,UAAU0mF,OAAS,SAAUC,GAExC,OAAOt1E,KAAKuzE,iBAAiBK,QAAQx2E,KAAK8C,MAAMo1E,EAAY,KAU9DlG,GAAazgF,UAAU2lF,YAAc,SAAU5B,EAAY9iF,GACzD,IAEIyjF,EACAV,EAFAxkF,EAAO6R,KAYX,OAbIqzE,EAAc,UAAYX,KAKX1yE,KAAKszE,mBACtBX,EAAW3yE,KAAKszE,iBAAiBD,IAGnCrzE,KAAKwzE,SAASd,GAAc,IAAID,GAAcC,EAAYC,EAAUxkF,GACpE6R,KAAKwzE,SAASd,GAAYjQ,KAAKziE,KAAKq1E,OAAOzlF,IAAI,SAAUk7E,GACvD38E,EAAKonF,eAAezK,EAAK38E,EAAKqlF,SAASd,OAElC1yE,KAAKwzE,SAASd,IAWvBtD,GAAazgF,UAAU4lF,WAAa,SAAU3kF,EAAGykF,EAAS91E,GACxD,IAQIi3E,EAEAC,EArZ+C7qE,EAC/C8qE,EA0YAN,EAAa72E,GAAWA,EAAQ62E,WAChCO,EAAcp3E,GAAWA,EAAQo3E,YACjC3B,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCw1E,EAAWR,EAAa,KAAS,EACjCS,EAAc7B,EAAWpkF,GACzBkmF,EAAW9B,EAAWpkF,EAAI,GAC1B5B,EAAMqmF,EAAQzB,cAyBlB,OAnBIyB,EAAQnB,eAAiBkC,GACvBO,GACFF,EAAgB,CAACI,EAAaC,GAC9BlmF,KAEA6lF,EAAgB,CAACI,GAGnBL,EAAQnB,EAAQnB,aAAa6C,OAAO,IAAI7O,WAAWuO,MA9ZjDC,EAAUjF,GADqC7lE,EAiatBgrE,EAAWC,IAhaSjrE,EAga/C4qE,EA9ZS,KAAP5qE,GAAiBA,IAAS8qE,EAErB,GAGFtxB,OAAO+T,aAAaud,IA4ZvB1nF,EAAI8iF,iBAAmB9iF,EAAIokF,WAC7BpkF,EAAIkkF,QAAQlyE,KAAKq1E,OAAOzlF,IAG1B5B,EAAI8iF,gBAAiB,EACrB9iF,EAAIqkF,QAAQmD,GACL5lF,GAWTw/E,GAAazgF,UAAU6lF,mBAAqB,SAAU5kF,EAAGykF,GACvD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnC41E,EAAYhC,EAAWpkF,EAAI,GAC3BqmF,EAAajC,EAAWpkF,EAAI,GAQhC,OANI8gF,GAAmBsF,IAActF,GAAmBuF,KACtDrmF,EAAIoQ,KAAKu0E,aAAa3kF,EAAGykF,EAAS,CAChCsB,aAAa,KAIV/lF,GAaTw/E,GAAazgF,UAAUqkF,iBAAmB,SAAUpjF,EAAGykF,GACrD,IAEIzD,EAAgB,EAFH5wE,KAAKuzE,iBAAiBnzE,KACpBxQ,GAGnB,OADAykF,EAAQrB,iBAAiBpC,GAClBhhF,GAaTw/E,GAAazgF,UAAU+lF,aAAe,SAAU9kF,EAAGykF,GACjD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCohD,EAAIwyB,EAAWpkF,GACfghF,EAAgB,EAAJpvB,EAChB6yB,EAAQrB,iBAAiBpC,GACzB,IAAI5iF,EAAMqmF,EAAQzB,cAiClB,OAhCApxB,EAAIwyB,IAAapkF,GACjB5B,EAAImjF,SAAe,GAAJ3vB,IAAa,EAE5BxzD,EAAIojF,SAAe,GAAJ5vB,IAAa,EAE5BxzD,EAAIqjF,YAAkB,EAAJ7vB,IAAa,EAE/BxzD,EAAI09C,SAAe,EAAJ8V,EAEfA,EAAIwyB,IAAapkF,GACjB5B,EAAIsjF,qBAA2B,IAAJ9vB,IAAa,EAExCxzD,EAAIujF,eAAqB,IAAJ/vB,EAErBA,EAAIwyB,IAAapkF,GACjB5B,EAAIwjF,iBAAmBhwB,EAEvBA,EAAIwyB,IAAapkF,GACjB5B,EAAIyjF,aAAmB,IAAJjwB,IAAa,EAEhCxzD,EAAI0jF,SAAe,GAAJlwB,EAEfA,EAAIwyB,IAAapkF,GACjB5B,EAAI4jF,YAAkB,GAAJpwB,EAElBA,EAAIwyB,IAAapkF,GACjB5B,EAAI6jF,aAAmB,GAAJrwB,IAAa,EAEhCxzD,EAAI8jF,SAAe,EAAJtwB,EAGfxzD,EAAI2jF,gBAAkB3jF,EAAI0jF,SAAW,EAC9B9hF,GAaTw/E,GAAazgF,UAAUqmF,oBAAsB,SAAUplF,EAAGykF,GACxD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCohD,EAAIwyB,EAAWpkF,GACfmhF,EAAUsD,EAAQzB,cAAc7B,QAqCpC,OApCAvvB,EAAIwyB,IAAapkF,GACjBmhF,EAAQmF,aAAmB,IAAJ10B,IAAa,EAEpCuvB,EAAQoF,SAAe,GAAJ30B,IAAa,EAEhCuvB,EAAQqF,WAAiB,GAAJ50B,IAAa,EAElCuvB,EAAQsF,SAAe,EAAJ70B,EAEnBA,EAAIwyB,IAAapkF,GACjBmhF,EAAQuF,YAAkB,IAAJ90B,IAAa,EAEnCuvB,EAAQwF,WAAiB,GAAJ/0B,IAAa,EAElCuvB,EAAQyF,aAAmB,GAAJh1B,IAAa,EAEpCuvB,EAAQ0F,WAAiB,EAAJj1B,EAErBA,EAAIwyB,IAAapkF,GACjBmhF,EAAQuF,aAAmB,IAAJ90B,IAAa,EAEpCuvB,EAAQ2F,UAAgB,GAAJl1B,IAAa,EAEjCuvB,EAAQ4F,gBAAsB,GAAJn1B,IAAa,EAEvCuvB,EAAQ6F,iBAAuB,GAAJp1B,IAAa,EAExCuvB,EAAQ8F,QAAc,EAAJr1B,EAElBA,EAAIwyB,IAAapkF,GACjBmhF,EAAQ+F,aAAmB,IAAJt1B,IAAa,EAEpCuvB,EAAQgG,iBAAuB,GAAJv1B,IAAa,EAExCuvB,EAAQiG,cAAoB,EAAJx1B,EAEjB5xD,GAUTw/E,GAAazgF,UAAU4mF,eAAiB,SAAUzK,EAAKuJ,GAIrD,IAHA,IAAI4C,EAAgB,GAGXC,EAAQ,EAAGA,EAAQ,EAAGA,IACzB7C,EAAQxB,QAAQqE,GAAO/F,UAAYkD,EAAQxB,QAAQqE,GAAO9E,WAC5D6E,EAAcjmF,KAAKqjF,EAAQxB,QAAQqE,GAAOnF,WAI9CsC,EAAQ8C,OAASrM,EACjBuJ,EAAQh8E,KAAO4+E,EAAcv9E,KAAK,QAClCsG,KAAKo3E,YAAY/C,GACjBA,EAAQtB,SAAWjI,GASrBsE,GAAazgF,UAAUyoF,YAAc,SAAU/C,GACxB,KAAjBA,EAAQh8E,OACV2H,KAAK8D,QAAQ,OAAQ,CACnBivE,SAAUsB,EAAQtB,SAClBoE,OAAQ9C,EAAQ8C,OAChB9+E,KAAMg8E,EAAQh8E,KACdgtE,OAAQ,SAAWgP,EAAQ3B,aAE7B2B,EAAQh8E,KAAO,GACfg8E,EAAQtB,SAAWsB,EAAQ8C,SAc/B/H,GAAazgF,UAAUkmF,eAAiB,SAAUjlF,EAAGykF,GACnD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GACjBk7E,EAAM9qE,KAAKq1E,OAAOzlF,GACtBoQ,KAAKu1E,eAAezK,EAAKuJ,GAEzB,IAAK,IAAI6C,EAAQ,EAAGA,EAAQ,EAAGA,IACzB11B,EAAI,GAAQ01B,IACd7C,EAAQxB,QAAQqE,GAAO/F,QAAU,GAIrC,OAAOvhF,GAaTw/E,GAAazgF,UAAUmmF,YAAc,SAAUllF,EAAGykF,GAChD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GACjBk7E,EAAM9qE,KAAKq1E,OAAOzlF,GACtBoQ,KAAKu1E,eAAezK,EAAKuJ,GAEzB,IAAK,IAAI6C,EAAQ,EAAGA,EAAQ,EAAGA,IACzB11B,EAAI,GAAQ01B,IACd7C,EAAQxB,QAAQqE,GAAO/F,QAAU,GAIrC,OAAOvhF,GAaTw/E,GAAazgF,UAAUomF,cAAgB,SAAUnlF,EAAGykF,GAClD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GACjBk7E,EAAM9qE,KAAKq1E,OAAOzlF,GACtBoQ,KAAKu1E,eAAezK,EAAKuJ,GAEzB,IAAK,IAAI6C,EAAQ,EAAGA,EAAQ,EAAGA,IACzB11B,EAAI,GAAQ01B,IACd7C,EAAQxB,QAAQqE,GAAO/F,SAAW,GAItC,OAAOvhF,GAaTw/E,GAAazgF,UAAUgmF,aAAe,SAAU/kF,EAAGykF,GACjD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GACjBk7E,EAAM9qE,KAAKq1E,OAAOzlF,GACtBoQ,KAAKu1E,eAAezK,EAAKuJ,GAEzB,IAAK,IAAI6C,EAAQ,EAAGA,EAAQ,EAAGA,IACzB11B,EAAI,GAAQ01B,GACd7C,EAAQxB,QAAQqE,GAAOrG,YAI3B,OAAOjhF,GAaTw/E,GAAazgF,UAAUimF,cAAgB,SAAUhlF,EAAGykF,GAClD,IACI7yB,EADaxhD,KAAKuzE,iBAAiBnzE,OAClBxQ,GACjBk7E,EAAM9qE,KAAKq1E,OAAOzlF,GACtBoQ,KAAKu1E,eAAezK,EAAKuJ,GAEzB,IAAK,IAAI6C,EAAQ,EAAGA,EAAQ,EAAGA,IACzB11B,EAAI,GAAQ01B,GACd7C,EAAQxB,QAAQqE,GAAO/zD,QAI3B,OAAOvzB,GAaTw/E,GAAazgF,UAAUsmF,iBAAmB,SAAUrlF,EAAGykF,GACrD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCohD,EAAIwyB,EAAWpkF,GACfohF,EAAUqD,EAAQzB,cAAc5B,QAiBpC,OAhBAxvB,EAAIwyB,IAAapkF,GACjBohF,EAAQqG,SAAe,IAAJ71B,IAAa,EAEhCwvB,EAAQhf,QAAc,GAAJxQ,IAAa,EAE/BwvB,EAAQsG,QAAc,EAAJ91B,EAElBA,EAAIwyB,IAAapkF,GACjBohF,EAAQuG,SAAe,IAAJ/1B,IAAa,EAEhCwvB,EAAQwG,WAAiB,GAAJh2B,IAAa,EAElCwvB,EAAQyG,UAAgB,GAAJj2B,IAAa,EAEjCwvB,EAAQ0G,UAAgB,EAAJl2B,EAEb5xD,GAaTw/E,GAAazgF,UAAUumF,YAAc,SAAUtlF,EAAGykF,GAChD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCohD,EAAIwyB,EAAWpkF,GACfshF,EAAWmD,EAAQzB,cAAc1B,SA0BrC,OAzBA1vB,EAAIwyB,IAAapkF,GACjBshF,EAASyG,WAAiB,IAAJn2B,IAAa,EAEnC0vB,EAAS0G,OAAa,GAAJp2B,IAAa,EAE/B0vB,EAAS2G,SAAe,GAAJr2B,IAAa,EAEjC0vB,EAAS4G,OAAa,EAAJt2B,EAElBA,EAAIwyB,IAAapkF,GACjBshF,EAAS6G,WAAiB,IAAJv2B,IAAa,EAEnC0vB,EAAS8G,OAAa,GAAJx2B,IAAa,EAE/B0vB,EAAS+G,SAAe,GAAJz2B,IAAa,EAEjC0vB,EAASgH,OAAa,EAAJ12B,EAElBA,EAAIwyB,IAAapkF,GACjBshF,EAASiH,SAAe,GAAJ32B,IAAa,EAEjC0vB,EAASkH,WAAiB,GAAJ52B,IAAa,EAEnC0vB,EAASmH,SAAe,EAAJ72B,EAEb5xD,GAaTw/E,GAAazgF,UAAUwmF,eAAiB,SAAUvlF,EAAGykF,GACnD,IAAIL,EAAah0E,KAAKuzE,iBAAiBnzE,KACnCohD,EAAIwyB,EAAWpkF,GACfqhF,EAASoD,EAAQzB,cAAc3B,OASnC,OAPAoD,EAAQzB,cAAc9B,gBAAiB,EACvCtvB,EAAIwyB,IAAapkF,GACjBqhF,EAAOsB,IAAU,GAAJ/wB,EAEbA,EAAIwyB,IAAapkF,GACjBqhF,EAAOqH,OAAa,GAAJ92B,EAET5xD,GAaTw/E,GAAazgF,UAAUw0B,MAAQ,SAAUvzB,EAAGykF,GAC1C,IAAIvJ,EAAM9qE,KAAKq1E,OAAOzlF,GAEtB,OADAoQ,KAAKu1E,eAAezK,EAAKuJ,GAClBr0E,KAAKs0E,YAAYD,EAAQ3B,WAAY9iF,IAU9C,IAAI2oF,GAAwB,CAC1B,GAAM,IAEN,GAAM,IAEN,GAAM,IAEN,GAAM,IAEN,GAAM,IAEN,IAAM,IAEN,IAAM,IAEN,IAAM,IAEN,IAAM,IAEN,IAAM,KAEN,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,KAER,IAAQ,IAER,IAAQ,IAER,IAAQ,KAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,KAER,IAAQ,IAER,IAAQ,GAER,IAAQ,GAER,IAAQ,KAER,IAAQ,IAER,IAAQ,KAER,IAAQ,KAER,IAAQ,KAER,IAAQ,KAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,GAER,IAAQ,GAER,IAAQ,GAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,KAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,IAER,IAAQ,KAER,IAAQ,KAER,IAAQ,KAER,IAAQ,MAINC,GAAkB,SAAyB5tE,GAC7C,OAAa,OAATA,EACK,IAGTA,EAAO2tE,GAAsB3tE,IAASA,EAC/Bw5C,OAAO+T,aAAavtD,KAOzB6tE,GAAO,CAAC,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,MAGxHC,GAAsB,WAIxB,IAHA,IAAIljF,EAAS,GACT5F,EAAI+oF,GAED/oF,KACL4F,EAAOxE,KAAK,IAGd,OAAOwE,GAGL05E,GAAe,SAASA,EAAa0J,EAAOC,GAC9C3J,EAAavgF,UAAU8zE,KAAK9uE,KAAKqM,MACjCA,KAAK84E,OAASF,GAAS,EACvB54E,KAAK+4E,aAAeF,GAAe,EACnC74E,KAAK0F,MAAQ,MAAiD,GAAxC1F,KAAK84E,QAAU,EAAI94E,KAAK+4E,eAC9C/4E,KAAKg5E,eACLh5E,KAAKmjB,QAELnjB,KAAKhP,KAAO,SAAUi/E,GACpB,IAAI7vE,EAAM64E,EAAMC,EAAOC,EAAO9gF,EAI9B,IAFA+H,EAAuB,MAAhB6vE,EAAO1B,UAEDvuE,KAAKo5E,kBAelB,GATwB,QAAZ,MAAPh5E,GACHJ,KAAKo5E,iBAAmBh5E,EACfA,IAASJ,KAAKq5E,WACvBr5E,KAAKo5E,iBAAmB,MAG1BF,EAAQ94E,IAAS,EACjB+4E,EAAe,IAAP/4E,EAEJA,IAASJ,KAAKq5E,SAEX,GAAIj5E,IAASJ,KAAKs5E,wBACvBt5E,KAAKu5E,MAAQ,aACR,GAAIn5E,IAASJ,KAAKw5E,gBAKvBx5E,KAAKu5E,MAAQ,QACbv5E,KAAKy5E,gBAAgBxJ,EAAOnF,KAE5B9qE,KAAKu1E,eAAetF,EAAOnF,KAE3BmO,EAAOj5E,KAAK05E,WACZ15E,KAAK05E,WAAa15E,KAAK25E,cACvB35E,KAAK25E,cAAgBV,EAErBj5E,KAAK45E,UAAY3J,EAAOnF,SACnB,GAAI1qE,IAASJ,KAAK65E,gBACvB75E,KAAK85E,YAAc,EACnB95E,KAAK+5E,UAAU9J,EAAOnF,UACjB,GAAI1qE,IAASJ,KAAKg6E,gBACvBh6E,KAAK85E,YAAc,EACnB95E,KAAK+5E,UAAU9J,EAAOnF,UACjB,GAAI1qE,IAASJ,KAAKi6E,gBACvBj6E,KAAK85E,YAAc,EACnB95E,KAAK+5E,UAAU9J,EAAOnF,UACjB,GAAI1qE,IAASJ,KAAKk6E,iBACvBl6E,KAAKy5E,gBAAgBxJ,EAAOnF,KAC5B9qE,KAAKu1E,eAAetF,EAAOnF,KAC3B9qE,KAAKm6E,eACLn6E,KAAK45E,UAAY3J,EAAOnF,SACnB,GAAI1qE,IAASJ,KAAKo6E,WACJ,UAAfp6E,KAAKu5E,MACPv5E,KAAK25E,cAAc35E,KAAKq6E,MAAQr6E,KAAK25E,cAAc35E,KAAKq6E,MAAM/qF,MAAM,GAAI,GAExE0Q,KAAK05E,WAAW15E,KAAKq6E,MAAQr6E,KAAK05E,WAAW15E,KAAKq6E,MAAM/qF,MAAM,GAAI,QAE/D,GAAI8Q,IAASJ,KAAKs6E,wBACvBt6E,KAAKu1E,eAAetF,EAAOnF,KAC3B9qE,KAAK05E,WAAahB,UACb,GAAIt4E,IAASJ,KAAKu6E,4BACvBv6E,KAAK25E,cAAgBjB,UAChB,GAAIt4E,IAASJ,KAAKw6E,0BACJ,YAAfx6E,KAAKu5E,QAGPv5E,KAAKu1E,eAAetF,EAAOnF,KAC3B9qE,KAAK05E,WAAahB,MAGpB14E,KAAKu5E,MAAQ,UACbv5E,KAAK45E,UAAY3J,EAAOnF,SACnB,GAAI9qE,KAAKy6E,mBAAmBvB,EAAOC,GAMxC9gF,EAAOmgF,IADPU,GAAiB,EAARA,IAAiB,GACKC,GAC/Bn5E,KAAKA,KAAKu5E,OAAOtJ,EAAOnF,IAAKzyE,GAC7B2H,KAAK06E,eACA,GAAI16E,KAAK26E,eAAezB,EAAOC,GAMjB,UAAfn5E,KAAKu5E,MACPv5E,KAAK25E,cAAc35E,KAAKq6E,MAAQr6E,KAAK25E,cAAc35E,KAAKq6E,MAAM/qF,MAAM,GAAI,GAExE0Q,KAAK05E,WAAW15E,KAAKq6E,MAAQr6E,KAAK05E,WAAW15E,KAAKq6E,MAAM/qF,MAAM,GAAI,GAQpE+I,EAAOmgF,IADPU,GAAiB,EAARA,IAAiB,GACKC,GAC/Bn5E,KAAKA,KAAKu5E,OAAOtJ,EAAOnF,IAAKzyE,GAC7B2H,KAAK06E,eACA,GAAI16E,KAAK46E,aAAa1B,EAAOC,GAElCn5E,KAAKy5E,gBAAgBxJ,EAAOnF,KAG5B9qE,KAAKA,KAAKu5E,OAAOtJ,EAAOnF,IAAK,KAC7B9qE,KAAK06E,UAEiB,MAAT,GAARvB,IACHn5E,KAAK66E,cAAc5K,EAAOnF,IAAK,CAAC,MAGZ,KAAT,EAARqO,IACHn5E,KAAK66E,cAAc5K,EAAOnF,IAAK,CAAC,WAG7B,GAAI9qE,KAAK86E,oBAAoB5B,EAAOC,GAKzCn5E,KAAK06E,SAAmB,EAARvB,OACX,GAAIn5E,KAAK+6E,MAAM7B,EAAOC,GAAQ,CAGnC,IAAI5G,EAAMkG,GAAKppF,QAAe,KAAP+Q,GAEJ,WAAfJ,KAAKu5E,QAIHhH,EAAMvyE,KAAK85E,YAAc,EAAI,IAC/BvH,EAAMvyE,KAAK85E,YAAc,GAG3B95E,KAAK+5E,UAAU9J,EAAOnF,IAAKyH,IAGzBA,IAAQvyE,KAAKq6E,OAEfr6E,KAAKy5E,gBAAgBxJ,EAAOnF,KAC5B9qE,KAAKq6E,KAAO9H,GAKF,EAAR4G,IAAkD,IAAnCn5E,KAAKg7E,YAAY3rF,QAAQ,MAC1C2Q,KAAK66E,cAAc5K,EAAOnF,IAAK,CAAC,MAGZ,MAAV,GAAP1qE,KAKHJ,KAAK06E,QAAgC,IAAb,GAAPt6E,IAAe,IAG9BJ,KAAKi7E,WAAW9B,IAKI,MAAT,GAARA,IACHn5E,KAAK66E,cAAc5K,EAAOnF,IAAK,CAAC,WAI3B9qE,KAAKk7E,aAAahC,KACb,IAAVC,IACFA,EAAQ,MAGV9gF,EAAOmgF,GAAgBU,GACvB7gF,GAAQmgF,GAAgBW,GACxBn5E,KAAKA,KAAKu5E,OAAOtJ,EAAOnF,IAAKzyE,GAC7B2H,KAAK06E,SAAWriF,EAAKxI,aA7KrBmQ,KAAKo5E,iBAAmB,OAmL9BlK,GAAavgF,UAAY,IAAI02E,EAG7B6J,GAAavgF,UAAU4mF,eAAiB,SAAUzK,GAChD,IAAIlzE,EAAUoI,KAAK05E,WAClBn9E,KAAI,SAAUg2E,EAAKnjF,GAClB,IACE,OAAOmjF,EAAI57E,OACX,MAAO1C,GAQP,OAJA+L,KAAK8D,QAAQ,MAAO,CAClB1T,MAAO,OACP6hB,QAAS,6CAA+C7iB,EAAQ,MAE3D,MAER4Q,MACFtG,KAAK,MACL2O,QAAQ,aAAc,IAEnBzQ,EAAQ/H,QACVmQ,KAAK8D,QAAQ,OAAQ,CACnBivE,SAAU/yE,KAAK45E,UACfzC,OAAQrM,EACRzyE,KAAMT,EACNytE,OAAQrlE,KAAK0F,SASnBwpE,GAAavgF,UAAUw0B,MAAQ,WAC7BnjB,KAAKu5E,MAAQ,QAKbv5E,KAAKm7E,QAAU,EACfn7E,KAAK45E,UAAY,EACjB55E,KAAK05E,WAAahB,KAClB14E,KAAK25E,cAAgBjB,KACrB14E,KAAKo5E,iBAAmB,KAExBp5E,KAAK06E,QAAU,EACf16E,KAAKq6E,KAnQU,GAoQfr6E,KAAK85E,YAAc,EAEnB95E,KAAKg7E,YAAc,IAOrB9L,GAAavgF,UAAUqqF,aAAe,WAaV,IAAtBh5E,KAAK+4E,cACP/4E,KAAKo7E,MAAQ,GACbp7E,KAAKq7E,KAAO,GACZr7E,KAAKs7E,UAAY,GAAOt7E,KAAK84E,SAAW,EACxC94E,KAAKu7E,QAAU,IACgB,IAAtBv7E,KAAK+4E,eACd/4E,KAAKo7E,MAAQ,GACbp7E,KAAKq7E,KAAO,GACZr7E,KAAKs7E,UAAY,GAAOt7E,KAAK84E,SAAW,EACxC94E,KAAKu7E,QAAU,IAOjBv7E,KAAKq5E,SAAW,EAEhBr5E,KAAKs5E,wBAA0C,GAAhBt5E,KAAKs7E,SACpCt7E,KAAKw5E,gBAAkC,GAAhBx5E,KAAKs7E,SAE5Bt7E,KAAK65E,gBAAkC,GAAhB75E,KAAKs7E,SAC5Bt7E,KAAKg6E,gBAAkC,GAAhBh6E,KAAKs7E,SAC5Bt7E,KAAKi6E,gBAAkC,GAAhBj6E,KAAKs7E,SAC5Bt7E,KAAKk6E,iBAAmC,GAAhBl6E,KAAKs7E,SAE7Bt7E,KAAKw6E,0BAA4C,GAAhBx6E,KAAKs7E,SAEtCt7E,KAAKo6E,WAA6B,GAAhBp6E,KAAKs7E,SACvBt7E,KAAKs6E,wBAA0C,GAAhBt6E,KAAKs7E,SACpCt7E,KAAKu6E,4BAA8C,GAAhBv6E,KAAKs7E,UAe1CpM,GAAavgF,UAAU8rF,mBAAqB,SAAUvB,EAAOC,GAC3D,OAAOD,IAAUl5E,KAAKq7E,MAAQlC,GAAS,IAAQA,GAAS,IAe1DjK,GAAavgF,UAAUgsF,eAAiB,SAAUzB,EAAOC,GACvD,OAAQD,IAAUl5E,KAAKq7E,KAAO,GAAKnC,IAAUl5E,KAAKq7E,KAAO,IAAMlC,GAAS,IAAQA,GAAS,IAe3FjK,GAAavgF,UAAUisF,aAAe,SAAU1B,EAAOC,GACrD,OAAOD,IAAUl5E,KAAKq7E,MAAQlC,GAAS,IAAQA,GAAS,IAe1DjK,GAAavgF,UAAUmsF,oBAAsB,SAAU5B,EAAOC,GAC5D,OAAOD,IAAUl5E,KAAKu7E,SAAWpC,GAAS,IAAQA,GAAS,IAe7DjK,GAAavgF,UAAUosF,MAAQ,SAAU7B,EAAOC,GAC9C,OAAOD,GAASl5E,KAAKo7E,OAASlC,EAAQl5E,KAAKo7E,MAAQ,GAAKjC,GAAS,IAAQA,GAAS,KAapFjK,GAAavgF,UAAUssF,WAAa,SAAU9B,GAC5C,OAAOA,GAAS,IAAQA,GAAS,IAAQA,GAAS,IAAQA,GAAS,KAYrEjK,GAAavgF,UAAUusF,aAAe,SAAUM,GAC9C,OAAOA,GAAU,IAAQA,GAAU,KAWrCtM,GAAavgF,UAAUorF,UAAY,SAAUjP,EAAK2Q,GAWhD,GATmB,WAAfz7E,KAAKu5E,QACPv5E,KAAKq6E,KAjbQ,GAkbbr6E,KAAKu5E,MAAQ,SAEbv5E,KAAKu1E,eAAezK,GACpB9qE,KAAK25E,cAAgBjB,KACrB14E,KAAK05E,WAAahB,WAGDx9E,IAAfugF,GAA4BA,IAAez7E,KAAKq6E,KAElD,IAAK,IAAIzqF,EAAI,EAAGA,EAAIoQ,KAAK85E,YAAalqF,IACpCoQ,KAAK05E,WAAW+B,EAAa7rF,GAAKoQ,KAAK05E,WAAW15E,KAAKq6E,KAAOzqF,GAC9DoQ,KAAK05E,WAAW15E,KAAKq6E,KAAOzqF,GAAK,QAIlBsL,IAAfugF,IACFA,EAAaz7E,KAAKq6E,MAGpBr6E,KAAKm7E,QAAUM,EAAaz7E,KAAK85E,YAAc,GAKjD5K,GAAavgF,UAAUksF,cAAgB,SAAU/P,EAAK4Q,GACpD17E,KAAKg7E,YAAch7E,KAAKg7E,YAAY9rF,OAAOwsF,GAC3C,IAAIrjF,EAAOqjF,EAAOhwE,QAAO,SAAUrT,EAAMqjF,GACvC,OAAOrjF,EAAO,IAAMqjF,EAAS,MAC5B,IACH17E,KAAKA,KAAKu5E,OAAOzO,EAAKzyE,IAKxB62E,GAAavgF,UAAU8qF,gBAAkB,SAAU3O,GACjD,GAAK9qE,KAAKg7E,YAAYnrF,OAAtB,CAIA,IAAIwI,EAAO2H,KAAKg7E,YAAYW,UAAUjwE,QAAO,SAAUrT,EAAMqjF,GAC3D,OAAOrjF,EAAO,KAAOqjF,EAAS,MAC7B,IACH17E,KAAKg7E,YAAc,GACnBh7E,KAAKA,KAAKu5E,OAAOzO,EAAKzyE,KAIxB62E,GAAavgF,UAAUitF,MAAQ,SAAU9Q,EAAKzyE,GAC5C,IAAIwjF,EAAU77E,KAAK25E,cAAc35E,KAAKq6E,MAEtCwB,GAAWxjF,EACX2H,KAAK25E,cAAc35E,KAAKq6E,MAAQwB,GAGlC3M,GAAavgF,UAAUmtF,OAAS,SAAUhR,EAAKzyE,GAC7C,IAAIwjF,EAAU77E,KAAK05E,WAAW15E,KAAKq6E,MACnCwB,GAAWxjF,EACX2H,KAAK05E,WAAW15E,KAAKq6E,MAAQwB,GAG/B3M,GAAavgF,UAAUwrF,aAAe,WACpC,IAAIvqF,EAEJ,IAAKA,EAAI,EAAGA,EAAIoQ,KAAKm7E,QAASvrF,IAC5BoQ,KAAK05E,WAAW9pF,GAAK,GAGvB,IAAKA,EAAIoQ,KAAKq6E,KAAO,EAAGzqF,EAAI+oF,GAAgB/oF,IAC1CoQ,KAAK05E,WAAW9pF,GAAK,GAIvB,IAAKA,EAAIoQ,KAAKm7E,QAASvrF,EAAIoQ,KAAKq6E,KAAMzqF,IACpCoQ,KAAK05E,WAAW9pF,GAAKoQ,KAAK05E,WAAW9pF,EAAI,GAI3CoQ,KAAK05E,WAAW15E,KAAKq6E,MAAQ,IAG/BnL,GAAavgF,UAAUotF,QAAU,SAAUjR,EAAKzyE,GAC9C,IAAIwjF,EAAU77E,KAAK05E,WAAW15E,KAAKq6E,MACnCwB,GAAWxjF,EACX2H,KAAK05E,WAAW15E,KAAKq6E,MAAQwB,GAI/B,IAAIG,GAAgB,CAClBnN,cAAeD,GACfM,aAAcA,GACdE,aAAcA,IASZ6M,GAAc,CAChBC,iBAAkB,GAClBC,iBAAkB,GAClBC,qBAAsB,IAIpBC,GAAc,SAEdC,GAAmB,SAAwB7oF,EAAO8oF,GACpD,IAAIC,EAAY,EAehB,IAbI/oF,EAAQ8oF,IAQVC,GAAa,GAKRp/E,KAAK8sC,IAAIqyC,EAAY9oF,GAnBd,YAoBZA,GArBS,WAqBA+oF,EAGX,OAAO/oF,GAGLgpF,GAA4B,SAASC,EAAwB1tF,GAC/D,IAAI2tF,EAASC,EACbF,EAAwB/tF,UAAU8zE,KAAK9uE,KAAKqM,MAI5CA,KAAK68E,MAAQ7tF,GAAQqtF,GAErBr8E,KAAKhP,KAAO,SAAUoP,GAGhBJ,KAAK68E,QAAUR,IAAej8E,EAAKpR,OAASgR,KAAK68E,aAIhC3hF,IAAjB0hF,IACFA,EAAex8E,EAAK2qE,KAGtB3qE,EAAK2qE,IAAMuR,GAAiBl8E,EAAK2qE,IAAK6R,GACtCx8E,EAAK0qE,IAAMwR,GAAiBl8E,EAAK0qE,IAAK8R,GACtCD,EAAUv8E,EAAK2qE,IACf/qE,KAAK8D,QAAQ,OAAQ1D,KAGvBJ,KAAKsd,MAAQ,WACXs/D,EAAeD,EACf38E,KAAK8D,QAAQ,SAGf9D,KAAK8iE,YAAc,WACjB9iE,KAAKsd,QACLtd,KAAK8D,QAAQ,kBAGf9D,KAAK88E,cAAgB,WACnBF,OAAe,EACfD,OAAU,GAGZ38E,KAAKmjB,MAAQ,WACXnjB,KAAK88E,gBACL98E,KAAK8D,QAAQ,WAIjB24E,GAA0B9tF,UAAY,IAAI02E,EAC1C,IAiFI0X,GAjFAC,GACuBP,GADvBO,GAEcV,GAGdW,GAAkB,SAAuBzkB,EAAO/mD,EAAOC,GACzD,IAAI9hB,EACA4F,EAAS,GAEb,IAAK5F,EAAI6hB,EAAO7hB,EAAI8hB,EAAK9hB,IACvB4F,GAAU,KAAO,KAAOgjE,EAAM5oE,GAAGgD,SAAS,KAAKtD,OAAO,GAGxD,OAAOkG,GAIT0nF,GAAY,SAAmB1kB,EAAO/mD,EAAOC,GAC3C,OAAOyrE,mBAAmBF,GAAgBzkB,EAAO/mD,EAAOC,KAOtD0rE,GAAyB,SAA8Bh9E,GACzD,OAAOA,EAAK,IAAM,GAAKA,EAAK,IAAM,GAAKA,EAAK,IAAM,EAAIA,EAAK,IAEzDi9E,GAAa,CACfC,KAAM,SAAcnjF,GAClB,IAAIvK,EAEJ,GAAoB,IAAhBuK,EAAIiG,KAAK,GAAb,CAKA,IAAKxQ,EAAI,EAAGA,EAAIuK,EAAIiG,KAAKvQ,OAAQD,IAC/B,GAAoB,IAAhBuK,EAAIiG,KAAKxQ,GAAU,CAErBuK,EAAIoa,YAAc2oE,GAAU/iF,EAAIiG,KAAM,EAAGxQ,GAEzCuK,EAAI1G,MAAQypF,GAAU/iF,EAAIiG,KAAMxQ,EAAI,EAAGuK,EAAIiG,KAAKvQ,QAAQwY,QAAQ,OAAQ,IACxE,MAIJlO,EAAIiG,KAAOjG,EAAI1G,QAEjB8pF,KAAM,SAAcpjF,GAClB,IAAIvK,EAEJ,GAAoB,IAAhBuK,EAAIiG,KAAK,GAKb,IAAKxQ,EAAI,EAAGA,EAAIuK,EAAIiG,KAAKvQ,OAAQD,IAC/B,GAAoB,IAAhBuK,EAAIiG,KAAKxQ,GAAU,CAErBuK,EAAIoa,YAAc2oE,GAAU/iF,EAAIiG,KAAM,EAAGxQ,GACzCuK,EAAIqhB,IAAM0hE,GAAU/iF,EAAIiG,KAAMxQ,EAAI,EAAGuK,EAAIiG,KAAKvQ,QAC9C,QAIN2tF,KAAM,SAAcrjF,GAClB,IAAIvK,EA7CiC4oE,EA+CrC,IAAK5oE,EAAI,EAAGA,EAAIuK,EAAIiG,KAAKvQ,OAAQD,IAC/B,GAAoB,IAAhBuK,EAAIiG,KAAKxQ,GAAU,CAErBuK,EAAIsjF,OAlD6BjlB,EAkDLr+D,EAAIiG,KAjD/Bs9E,SAAST,GAAgBzkB,EAiDY,EAAG5oE,KACzC,MAIJuK,EAAIwjF,YAAcxjF,EAAIiG,KAAKg9D,SAASxtE,EAAI,GACxCuK,EAAIiG,KAAOjG,EAAIwjF,cAKnBZ,GAAkB,SAAwBx+E,GACxC,IAYI3O,EAZAuuB,EAAW,CAIbwtB,WAAYptC,GAAWA,EAAQotC,YAGjCiyC,EAAU,EAEVnlB,EAAS,GAETolB,EAAa,EASb,GANAd,GAAgBpuF,UAAU8zE,KAAK9uE,KAAKqM,MAIpCA,KAAK89E,aAAe7B,GAAYG,qBAAqBxpF,SAAS,IAE1DurB,EAASwtB,WACX,IAAK/7C,EAAI,EAAGA,EAAIuuB,EAASwtB,WAAW97C,OAAQD,IAC1CoQ,KAAK89E,eAAiB,KAAO3/D,EAASwtB,WAAW/7C,GAAGgD,SAAS,KAAKtD,OAAO,GAI7E0Q,KAAKhP,KAAO,SAAU+sF,GACpB,IAAI5jF,EAAK6jF,EAAYC,EAAWrT,EAAOh7E,EAEvC,GAAmB,mBAAfmuF,EAAM/uF,KAaV,GANI+uF,EAAMG,yBACRL,EAAa,EACbplB,EAAO5oE,OAAS,GAII,IAAlB4oE,EAAO5oE,SAAiBkuF,EAAM39E,KAAKvQ,OAAS,IAAMkuF,EAAM39E,KAAK,KAAO,IAAI+mE,WAAW,IAAM4W,EAAM39E,KAAK,KAAO,IAAI+mE,WAAW,IAAM4W,EAAM39E,KAAK,KAAO,IAAI+mE,WAAW,IACnKnnE,KAAK8D,QAAQ,MAAO,CAClB1T,MAAO,OACP6hB,QAAS,+CAqBb,GAfAwmD,EAAOznE,KAAK+sF,GACZF,GAAcE,EAAM39E,KAAK42D,WAEH,IAAlByB,EAAO5oE,SAKT+tF,EAAUR,GAAuBW,EAAM39E,KAAKg9D,SAAS,EAAG,KAGxDwgB,GAAW,MAITC,EAAaD,GAAjB,CAYA,IAPAzjF,EAAM,CACJiG,KAAM,IAAI8mE,WAAW0W,GACrBvS,OAAQ,GACRP,IAAKrS,EAAO,GAAGqS,IACfC,IAAKtS,EAAO,GAAGsS,KAGZn7E,EAAI,EAAGA,EAAIguF,GACdzjF,EAAIiG,KAAKE,IAAIm4D,EAAO,GAAGr4D,KAAKg9D,SAAS,EAAGwgB,EAAUhuF,GAAIA,GACtDA,GAAK6oE,EAAO,GAAGr4D,KAAK42D,WACpB6mB,GAAcplB,EAAO,GAAGr4D,KAAK42D,WAC7ByB,EAAOnyD,QAIT03E,EAAa,GAEK,GAAd7jF,EAAIiG,KAAK,KAEX49E,GAAc,EAEdA,GAAcZ,GAAuBjjF,EAAIiG,KAAKg9D,SAAS,GAAI,KAE3DwgB,GAAWR,GAAuBjjF,EAAIiG,KAAKg9D,SAAS,GAAI,MAK1D,EAAG,CAID,IAFA6gB,EAAYb,GAAuBjjF,EAAIiG,KAAKg9D,SAAS4gB,EAAa,EAAGA,EAAa,KAElE,EAKd,YAJAh+E,KAAK8D,QAAQ,MAAO,CAClB1T,MAAO,OACP6hB,QAAS,gEAYb,IANA24D,EAAQ,CACNnhE,GAFY26C,OAAO+T,aAAah+D,EAAIiG,KAAK49E,GAAa7jF,EAAIiG,KAAK49E,EAAa,GAAI7jF,EAAIiG,KAAK49E,EAAa,GAAI7jF,EAAIiG,KAAK49E,EAAa,IAGhI59E,KAAMjG,EAAIiG,KAAKg9D,SAAS4gB,EAAa,GAAIA,EAAaC,EAAY,MAE9D9qF,IAAMy3E,EAAMnhE,GAEd4zE,GAAWzS,EAAMnhE,MACnB4zE,GAAWzS,EAAMnhE,IAAImhE,GAGD,iDAAhBA,EAAM6S,OAA0D,CAClE,IAAIU,EAAIvT,EAAMxqE,KACVoF,GAAe,EAAP24E,EAAE,KAAc,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,EAAIA,EAAE,KAAO,EAChF34E,GAAQ,EACRA,GAAe,EAAP24E,EAAE,GACVvT,EAAMwT,UAAY54E,OAKFtK,IAAZf,EAAI2wE,UAAiC5vE,IAAZf,EAAI4wE,MAC/B5wE,EAAI2wE,IAAMF,EAAMwT,UAChBjkF,EAAI4wE,IAAMH,EAAMwT,WAGlBp+E,KAAK8D,QAAQ,YAAa8mE,GAI9BzwE,EAAIkxE,OAAOr6E,KAAK45E,GAChBoT,GAAc,GAEdA,GAAcC,QACPD,EAAaJ,GAEtB59E,KAAK8D,QAAQ,OAAQ3J,MAIzB4iF,GAAgBpuF,UAAY,IAAI02E,EAChC,IAGIgZ,GAAwBC,GAAuBC,GAH/CC,GAAiBzB,GACjBL,GAA0BM,GAK1ByB,GAAuB,KAQ3BJ,GAAyB,WACvB,IAAI5lB,EAAS,IAAIyO,WAAWuX,IACxBC,EAAgB,EAEpBL,GAAuB1vF,UAAU8zE,KAAK9uE,KAAKqM,MAO3CA,KAAKhP,KAAO,SAAUwnE,GACpB,IAEImmB,EAFAtxB,EAAa,EACbC,EAAWmxB,GAcf,IAVIC,IACFC,EAAa,IAAIzX,WAAW1O,EAAMxB,WAAa0nB,IACpCp+E,IAAIm4D,EAAO2E,SAAS,EAAGshB,IAClCC,EAAWr+E,IAAIk4D,EAAOkmB,GACtBA,EAAgB,GAEhBC,EAAanmB,EAIRlL,EAAWqxB,EAAW3nB,YAjCnB,KAmCJ2nB,EAAWtxB,IAnCP,KAmCsCsxB,EAAWrxB,IAYzDD,IACAC,MAVEttD,KAAK8D,QAAQ,OAAQ66E,EAAWvhB,SAAS/P,EAAYC,IACrDD,GAAcoxB,GACdnxB,GAAYmxB,IAcZpxB,EAAasxB,EAAW3nB,aAC1ByB,EAAOn4D,IAAIq+E,EAAWvhB,SAAS/P,GAAa,GAC5CqxB,EAAgBC,EAAW3nB,WAAa3J,IAQ5CrtD,KAAKsd,MAAQ,WAIPohE,IAAkBD,IApEZ,KAoEoChmB,EAAO,KACnDz4D,KAAK8D,QAAQ,OAAQ20D,GACrBimB,EAAgB,GAGlB1+E,KAAK8D,QAAQ,SAGf9D,KAAK8iE,YAAc,WACjB9iE,KAAKsd,QACLtd,KAAK8D,QAAQ,kBAGf9D,KAAKmjB,MAAQ,WACXu7D,EAAgB,EAChB1+E,KAAK8D,QAAQ,YAIMnV,UAAY,IAAI02E,EAMvCiZ,GAAwB,WACtB,IAAIM,EAAUC,EAAUC,EAAU3wF,EAElCmwF,GAAsB3vF,UAAU8zE,KAAK9uE,KAAKqM,MAE1C7R,EAAO6R,KACPA,KAAK++E,qBAAuB,GAC5B/+E,KAAKg/E,qBAAkB9jF,EAEvB0jF,EAAW,SAAkBxX,EAAS6X,GACpC,IAAIjtB,EAAS,EAOTitB,EAAIC,4BACNltB,GAAUoV,EAAQpV,GAAU,GAGb,QAAbitB,EAAIjwF,KACN6vF,EAASzX,EAAQhK,SAASpL,GAASitB,GAEnCH,EAAS1X,EAAQhK,SAASpL,GAASitB,IAIvCJ,EAAW,SAAkBzX,EAAS+X,GACpCA,EAAIC,eAAiBhY,EAAQ,GAE7B+X,EAAIE,oBAAsBjY,EAAQ,GAGlCj5E,EAAKmxF,QAAwB,GAAdlY,EAAQ,MAAe,EAAIA,EAAQ,IAClD+X,EAAIG,OAASnxF,EAAKmxF,QAYpBR,EAAW,SAAkB1X,EAASmY,GACpC,IAAmBC,EAA6BxtB,EAMhD,GAAmB,EAAboV,EAAQ,GAAd,CAmBA,IAdAj5E,EAAK6wF,gBAAkB,CACrBz+D,MAAO,KACPJ,MAAO,KACP,iBAAkB,IAIpBq/D,EAAW,IADmB,GAAbpY,EAAQ,KAAc,EAAIA,EAAQ,IACpB,EAK/BpV,EAAS,KAF0B,GAAdoV,EAAQ,MAAe,EAAIA,EAAQ,KAIjDpV,EAASwtB,GAAU,CACxB,IAAIC,EAAarY,EAAQpV,GACrB0tB,GAA6B,GAAtBtY,EAAQpV,EAAS,KAAc,EAAIoV,EAAQpV,EAAS,GAI3DytB,IAAexD,GAAYC,kBAAmD,OAA/B/tF,EAAK6wF,gBAAgBz+D,MACtEpyB,EAAK6wF,gBAAgBz+D,MAAQm/D,EACpBD,IAAexD,GAAYE,kBAAmD,OAA/BhuF,EAAK6wF,gBAAgB7+D,MAC7EhyB,EAAK6wF,gBAAgB7+D,MAAQu/D,EACpBD,IAAexD,GAAYG,uBAEpCjuF,EAAK6wF,gBAAgB,kBAAkBU,GAAOD,GAKhDztB,GAAsE,IAApC,GAAtBoV,EAAQpV,EAAS,KAAc,EAAIoV,EAAQpV,EAAS,IAIlEutB,EAAIP,gBAAkB7wF,EAAK6wF,kBAO7Bh/E,KAAKhP,KAAO,SAAUi/E,GACpB,IAAIz6E,EAAS,GACTw8D,EAAS,EAgBb,GAfAx8D,EAAO0pF,6BAA2C,GAAZjP,EAAO,IAE7Cz6E,EAAOkqF,IAAkB,GAAZzP,EAAO,GACpBz6E,EAAOkqF,MAAQ,EACflqF,EAAOkqF,KAAOzP,EAAO,IAMJ,GAAZA,EAAO,MAAe,EAAI,IAC7Bje,GAAUie,EAAOje,GAAU,GAIV,IAAfx8D,EAAOkqF,IACTlqF,EAAOxG,KAAO,MACd4vF,EAAS3O,EAAO7S,SAASpL,GAASx8D,GAClCwK,KAAK8D,QAAQ,OAAQtO,QAChB,GAAIA,EAAOkqF,MAAQ1/E,KAAKs/E,OAK7B,IAJA9pF,EAAOxG,KAAO,MACd4vF,EAAS3O,EAAO7S,SAASpL,GAASx8D,GAClCwK,KAAK8D,QAAQ,OAAQtO,GAEdwK,KAAK++E,qBAAqBlvF,QAC/BmQ,KAAK2/E,YAAYpsF,MAAMyM,KAAMA,KAAK++E,qBAAqBz4E,mBAEvBpL,IAAzB8E,KAAKg/E,gBAGdh/E,KAAK++E,qBAAqB/tF,KAAK,CAACi/E,EAAQje,EAAQx8D,IAEhDwK,KAAK2/E,YAAY1P,EAAQje,EAAQx8D,IAIrCwK,KAAK2/E,YAAc,SAAU1P,EAAQje,EAAQx8D,GAEvCA,EAAOkqF,MAAQ1/E,KAAKg/E,gBAAgBz+D,MACtC/qB,EAAOiqF,WAAaxD,GAAYC,iBACvB1mF,EAAOkqF,MAAQ1/E,KAAKg/E,gBAAgB7+D,MAC7C3qB,EAAOiqF,WAAaxD,GAAYE,iBAIhC3mF,EAAOiqF,WAAaz/E,KAAKg/E,gBAAgB,kBAAkBxpF,EAAOkqF,KAGpElqF,EAAOxG,KAAO,MACdwG,EAAO4K,KAAO6vE,EAAO7S,SAASpL,GAC9BhyD,KAAK8D,QAAQ,OAAQtO,KAIzB8oF,GAAsB3vF,UAAY,IAAI02E,EACtCiZ,GAAsBsB,aAAe,CACnCC,KAAM,GACNC,KAAM,IAWRvB,GAAoB,WAClB,IAeIS,EAfA7wF,EAAO6R,KACP+/E,GAAgB,EAEpBx/D,EAAQ,CACNngB,KAAM,GACNoF,KAAM,GAEJ2a,EAAQ,CACV/f,KAAM,GACNoF,KAAM,GAEJw6E,EAAgB,CAClB5/E,KAAM,GACNoF,KAAM,GA2DRsqE,EAAc,SAAqBzK,EAAQr2E,EAAMixF,GAC/C,IAMIC,EACAC,EAPAnM,EAAa,IAAI9M,WAAW7B,EAAO7/D,MACnCzJ,EAAQ,CACV/M,KAAMA,GAEJY,EAAI,EACJoiE,EAAS,EAKb,GAAKqT,EAAOjlE,KAAKvQ,UAAUw1E,EAAO7/D,KAAO,GAAzC,CAMA,IAFAzJ,EAAMqkF,QAAU/a,EAAOjlE,KAAK,GAAGs/E,IAE1B9vF,EAAI,EAAGA,EAAIy1E,EAAOjlE,KAAKvQ,OAAQD,IAClCuwF,EAAW9a,EAAOjlE,KAAKxQ,GACvBokF,EAAW1zE,IAAI6/E,EAAS//E,KAAM4xD,GAC9BA,GAAUmuB,EAAS//E,KAAK42D,WA5Eb,IAAkBoQ,EAASiZ,EACpCC,EACAC,EAFoCF,EAgFnBtkF,EA9EjBwkF,GAF2BnZ,EAgFtB4M,GA9EiB,IAAM,GAAK5M,EAAQ,IAAM,EAAIA,EAAQ,GAE/DiZ,EAAIjgF,KAAO,IAAI8mE,WAIK,IAAhBqZ,IAKJF,EAAIG,aAAe,GAAKpZ,EAAQ,IAAM,EAAIA,EAAQ,IAElDiZ,EAAInC,uBAAiD,KAAV,EAAb9W,EAAQ,IAapB,KATlBkZ,EAAclZ,EAAQ,MAapBiZ,EAAIvV,KAAoB,GAAb1D,EAAQ,KAAc,IAAoB,IAAdA,EAAQ,MAAe,IAAoB,IAAdA,EAAQ,MAAe,IAAoB,IAAdA,EAAQ,MAAe,GAAmB,IAAdA,EAAQ,OAAgB,EACrJiZ,EAAIvV,KAAO,EAEXuV,EAAIvV,MAAsB,EAAd1D,EAAQ,OAAgB,EAEpCiZ,EAAItV,IAAMsV,EAAIvV,IAEI,GAAdwV,IACFD,EAAItV,KAAqB,GAAd3D,EAAQ,MAAe,IAAoB,IAAdA,EAAQ,MAAe,IAAoB,IAAdA,EAAQ,MAAe,IAAoB,IAAdA,EAAQ,MAAe,GAAmB,IAAdA,EAAQ,OAAgB,EACtJiZ,EAAItV,KAAO,EAEXsV,EAAItV,MAAsB,EAAd3D,EAAQ,OAAgB,IAOxCiZ,EAAIjgF,KAAOgnE,EAAQhK,SAAS,EAAIgK,EAAQ,KAiCxC8Y,EAA2B,UAATlxF,GAAoB+M,EAAMykF,cAAgBnb,EAAO7/D,MAE/Dy6E,GAAcC,KAChB7a,EAAO7/D,KAAO,EACd6/D,EAAOjlE,KAAKvQ,OAAS,GAKnBqwF,GACF/xF,EAAK2V,QAAQ,OAAQ/H,KAIzBwiF,GAAkB5vF,UAAU8zE,KAAK9uE,KAAKqM,MAOtCA,KAAKhP,KAAO,SAAUoP,IACpB,CACE++E,IAAK,aAGLkB,IAAK,WACH,IAAIhb,EAAQoa,EAEZ,OAAQr/E,EAAKq/E,YACX,KAAKxD,GAAYC,iBACf7W,EAAS9kD,EACTk/D,EAAa,QACb,MAEF,KAAKxD,GAAYE,iBACf9W,EAASllD,EACTs/D,EAAa,QACb,MAEF,KAAKxD,GAAYG,qBACf/W,EAAS2a,EACTP,EAAa,iBACb,MAEF,QAEE,OAKAr/E,EAAK8+E,2BACPpP,EAAYzK,EAAQoa,GAAY,GAKlCpa,EAAOjlE,KAAKpP,KAAKoP,GACjBilE,EAAO7/D,MAAQpF,EAAKA,KAAK42D,YAE3BuoB,IAAK,WACH,IAAIxjF,EAAQ,CACV/M,KAAM,WACNwoB,OAAQ,IAIoB,QAF9BwnE,EAAkB5+E,EAAK4+E,iBAEHz+D,OAClBxkB,EAAMyb,OAAOxmB,KAAK,CAChBi9E,kBAAmB,CACjB7E,oBAAqB,GAEvB3/D,IAAKu1E,EAAgBz+D,MACrBkgE,MAAO,MACPzxF,KAAM,UAIoB,OAA1BgwF,EAAgB7+D,OAClBpkB,EAAMyb,OAAOxmB,KAAK,CAChBi9E,kBAAmB,CACjB7E,oBAAqB,GAEvB3/D,IAAKu1E,EAAgB7+D,MACrBsgE,MAAO,OACPzxF,KAAM,UAIV+wF,GAAgB,EAChB5xF,EAAK2V,QAAQ,OAAQ/H,MAEtBqE,EAAKpR,SAGVgR,KAAKmjB,MAAQ,WACX5C,EAAM/a,KAAO,EACb+a,EAAMngB,KAAKvQ,OAAS,EACpBswB,EAAM3a,KAAO,EACb2a,EAAM/f,KAAKvQ,OAAS,EACpBmQ,KAAK8D,QAAQ,UAaf9D,KAAK0gF,cAAgB,WAGnB5Q,EAAYvvD,EAAO,SACnBuvD,EAAY3vD,EAAO,SACnB2vD,EAAYkQ,EAAe,mBAG7BhgF,KAAKsd,MAAQ,WAIX,IAAKyiE,GAAiBf,EAAiB,CACrC,IAAIO,EAAM,CACRvwF,KAAM,WACNwoB,OAAQ,IAGoB,OAA1BwnE,EAAgBz+D,OAClBg/D,EAAI/nE,OAAOxmB,KAAK,CACdi9E,kBAAmB,CACjB7E,oBAAqB,GAEvB3/D,IAAKu1E,EAAgBz+D,MACrBkgE,MAAO,MACPzxF,KAAM,UAIoB,OAA1BgwF,EAAgB7+D,OAClBo/D,EAAI/nE,OAAOxmB,KAAK,CACdi9E,kBAAmB,CACjB7E,oBAAqB,GAEvB3/D,IAAKu1E,EAAgB7+D,MACrBsgE,MAAO,OACPzxF,KAAM,UAIVb,EAAK2V,QAAQ,OAAQy7E,GAGvBQ,GAAgB,EAChB//E,KAAK0gF,gBACL1gF,KAAK8D,QAAQ,UAIjBy6E,GAAkB5vF,UAAY,IAAI02E,EAClC,IAAIsb,GAAO,CACTC,QAAS,EACTC,mBAAoBpC,GACpBqC,sBAAuBzC,GACvB0C,qBAAsBzC,GACtB0C,iBAAkBzC,GAClB7B,wBAAyBA,GACzB7N,cAAemN,GAAcnN,cAC7BK,aAAc8M,GAAc9M,aAC5BE,aAAc4M,GAAc5M,aAC5B6R,eAAgBzC,IAGlB,IAAK,IAAIxvF,MAAQitF,GACXA,GAAYnqF,eAAe9C,MAC7B2xF,GAAK3xF,IAAQitF,GAAYjtF,KAI7B,IAGIkyF,GAHAC,GAASR,GACTS,GAAqB1U,GAIrB2U,GAA8B,CAAC,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,IAAM,MAUtHH,GAAc,SAAoBI,GAChC,IAAI7oB,EACA8oB,EAAW,EAEfL,GAAYvyF,UAAU8zE,KAAK9uE,KAAKqM,MAEhCA,KAAKwhF,UAAY,SAAU/vE,EAAOC,GAChC1R,KAAK8D,QAAQ,MAAO,CAClB1T,MAAO,OACP6hB,QAAS,sBAAwBR,EAAQ,OAASC,EAAM,aAAe6vE,EAAW,uBAItFvhF,KAAKhP,KAAO,SAAUi/E,GACpB,IACIwR,EACAC,EACAC,EACAC,EACAC,EALAjyF,EAAI,EAWR,GAJK0xF,IACHC,EAAW,GAGO,UAAhBtR,EAAOjhF,KAAX,CAkBA,IAAI8iE,EAGJ,IAdI2G,GAAUA,EAAO5oE,QACnB8xF,EAAYlpB,GACZA,EAAS,IAAIyO,WAAWya,EAAU3qB,WAAaiZ,EAAO7vE,KAAK42D,aACpD12D,IAAIqhF,GACXlpB,EAAOn4D,IAAI2vE,EAAO7vE,KAAMuhF,EAAU3qB,aAElCyB,EAASwX,EAAO7vE,KAQXxQ,EAAI,EAAI6oE,EAAO5oE,QAEpB,GAAkB,MAAd4oE,EAAO7oE,IAA0C,OAAV,IAAhB6oE,EAAO7oE,EAAI,IAAtC,CA2BA,GAhBoB,kBAATkiE,IACT9xD,KAAKwhF,UAAU1vB,EAAMliE,GACrBkiE,EAAO,MAKT4vB,EAAgD,GAAR,GAAhBjpB,EAAO7oE,EAAI,IAInC6xF,GAA+B,EAAhBhpB,EAAO7oE,EAAI,KAAc,GAAK6oE,EAAO7oE,EAAI,IAAM,GAAqB,IAAhB6oE,EAAO7oE,EAAI,KAAc,EAE5FiyF,GADAD,EAA6C,MAAL,GAAR,EAAhBnpB,EAAO7oE,EAAI,MACOwxF,GAAqBC,IAA6C,GAAhB5oB,EAAO7oE,EAAI,MAAe,GAG1G6oE,EAAOzB,WAAapnE,EAAI6xF,EAC1B,MAIFzhF,KAAK8D,QAAQ,OAAQ,CACnBgnE,IAAKmF,EAAOnF,IAAMyW,EAAWM,EAC7B9W,IAAKkF,EAAOlF,IAAMwW,EAAWM,EAC7BD,YAAaA,EACbta,gBAAgD,GAA9B7O,EAAO7oE,EAAI,KAAO,EAAI,GACxC43E,cAA+B,EAAhB/O,EAAO7oE,EAAI,KAAW,GAAqB,IAAhB6oE,EAAO7oE,EAAI,MAAe,EACpE63E,WAAY4Z,IAA6C,GAAhB5oB,EAAO7oE,EAAI,MAAe,GACnE23E,wBAAyC,GAAhB9O,EAAO7oE,EAAI,MAAe,EAEnDi5E,WAAY,GAEZzoE,KAAMq4D,EAAO2E,SAASxtE,EAAI,EAAI8xF,EAAqB9xF,EAAI6xF,KAEzDF,IACA3xF,GAAK6xF,MA7CiB,kBAAT3vB,IACTA,EAAOliE,GAKTA,IA0CgB,kBAATkiE,IACT9xD,KAAKwhF,UAAU1vB,EAAMliE,GACrBkiE,EAAO,MAIT2G,EAASA,EAAO2E,SAASxtE,KAG3BoQ,KAAKsd,MAAQ,WACXikE,EAAW,EACXvhF,KAAK8D,QAAQ,SAGf9D,KAAKmjB,MAAQ,WACXs1C,OAAS,EACTz4D,KAAK8D,QAAQ,UAGf9D,KAAK8iE,YAAc,WACjBrK,OAAS,EACTz4D,KAAK8D,QAAQ,mBAIjBo9E,GAAYvyF,UAAY,IAAI02E,EAC5B,IA2JIyc,GAAaC,GAEbC,GA7JAlC,GAAOoB,GAyJPe,GA3IQ,SAAmBC,GAC7B,IACAC,EAAwBD,EAAYlrB,WAEpCorB,EAAc,EAGdC,EAAuB,EAGvBriF,KAAKnQ,OAAS,WACZ,OAAO,EAAIsyF,GAIbniF,KAAKsiF,cAAgB,WACnB,OAAO,EAAIH,EAAwBE,GAIrCriF,KAAKuiF,SAAW,WACd,IAAI7lF,EAAWwlF,EAAYlrB,WAAamrB,EACpCK,EAAe,IAAItb,WAAW,GAC9Bub,EAAiBrlF,KAAKE,IAAI,EAAG6kF,GAEjC,GAAuB,IAAnBM,EACF,MAAM,IAAI1wF,MAAM,sBAGlBywF,EAAaliF,IAAI4hF,EAAY9kB,SAAS1gE,EAAUA,EAAW+lF,IAC3DL,EAAc,IAAIxc,SAAS4c,EAAa/pB,QAAQsN,UAAU,GAE1Dsc,EAAwC,EAAjBI,EACvBN,GAAyBM,GAI3BziF,KAAK0iF,SAAW,SAAU72B,GACxB,IAAI82B,EAEAN,EAAuBx2B,GACzBu2B,IAAgBv2B,EAChBw2B,GAAwBx2B,IAExBA,GAASw2B,EAETx2B,GAAqB,GADrB82B,EAAYvlF,KAAK8C,MAAM2rD,EAAQ,IAE/Bs2B,GAAyBQ,EACzB3iF,KAAKuiF,WACLH,IAAgBv2B,EAChBw2B,GAAwBx2B,IAK5B7rD,KAAK4iF,SAAW,SAAUp9E,GACxB,IAAIq9E,EAAOzlF,KAAKE,IAAI+kF,EAAsB78E,GAE1Cs9E,EAAOV,IAAgB,GAAKS,EAa5B,OAVAR,GAAwBQ,GAEG,EACzBT,IAAgBS,EACPV,EAAwB,GACjCniF,KAAKuiF,YAGPM,EAAOr9E,EAAOq9E,GAEH,EACFC,GAAQD,EAAO7iF,KAAK4iF,SAASC,GAG/BC,GAIT9iF,KAAK+iF,iBAAmB,WACtB,IAAIC,EAEJ,IAAKA,EAAmB,EAAGA,EAAmBX,IAAwBW,EACpE,GAAwD,KAAnDZ,EAAc,aAAeY,GAIhC,OAFAZ,IAAgBY,EAChBX,GAAwBW,EACjBA,EAMX,OADAhjF,KAAKuiF,WACES,EAAmBhjF,KAAK+iF,oBAIjC/iF,KAAKijF,sBAAwB,WAC3BjjF,KAAK0iF,SAAS,EAAI1iF,KAAK+iF,qBAIzB/iF,KAAKkjF,cAAgB,WACnBljF,KAAK0iF,SAAS,EAAI1iF,KAAK+iF,qBAIzB/iF,KAAKmjF,sBAAwB,WAC3B,IAAIC,EAAMpjF,KAAK+iF,mBAEf,OAAO/iF,KAAK4iF,SAASQ,EAAM,GAAK,GAIlCpjF,KAAKqjF,cAAgB,WACnB,IAAIP,EAAO9iF,KAAKmjF,wBAEhB,OAAI,EAAOL,EAEF,EAAIA,IAAS,GAGd,GAAKA,IAAS,IAKxB9iF,KAAKsjF,YAAc,WACjB,OAA4B,IAArBtjF,KAAK4iF,SAAS,IAIvB5iF,KAAKujF,iBAAmB,WACtB,OAAOvjF,KAAK4iF,SAAS,IAGvB5iF,KAAKuiF,YAYPR,GAAiB,WACf,IACInyF,EACA6oE,EAFA+qB,EAAY,EAIhBzB,GAAepzF,UAAU8zE,KAAK9uE,KAAKqM,MAUnCA,KAAKhP,KAAO,SAAUoP,GACpB,IAAIqjF,EAEChrB,IAGHgrB,EAAa,IAAIvc,WAAWzO,EAAOzB,WAAa52D,EAAKA,KAAK42D,aAC/C12D,IAAIm4D,GACfgrB,EAAWnjF,IAAIF,EAAKA,KAAMq4D,EAAOzB,YACjCyB,EAASgrB,GALThrB,EAASr4D,EAAKA,KAkBhB,IAVA,IAAIsjF,EAAMjrB,EAAOzB,WAUVwsB,EAAYE,EAAM,EAAGF,IAC1B,GAA8B,IAA1B/qB,EAAO+qB,EAAY,GAAU,CAE/B5zF,EAAI4zF,EAAY,EAChB,MAIJ,KAAO5zF,EAAI8zF,GAGT,OAAQjrB,EAAO7oE,IACb,KAAK,EAEH,GAAsB,IAAlB6oE,EAAO7oE,EAAI,GAAU,CACvBA,GAAK,EACL,MACK,GAAsB,IAAlB6oE,EAAO7oE,EAAI,GAAU,CAC9BA,IACA,MAIE4zF,EAAY,IAAM5zF,EAAI,GACxBoQ,KAAK8D,QAAQ,OAAQ20D,EAAO2E,SAASomB,EAAY,EAAG5zF,EAAI,IAI1D,GACEA,UACqB,IAAd6oE,EAAO7oE,IAAYA,EAAI8zF,GAEhCF,EAAY5zF,EAAI,EAChBA,GAAK,EACL,MAEF,KAAK,EAEH,GAAsB,IAAlB6oE,EAAO7oE,EAAI,IAA8B,IAAlB6oE,EAAO7oE,EAAI,GAAU,CAC9CA,GAAK,EACL,MAIFoQ,KAAK8D,QAAQ,OAAQ20D,EAAO2E,SAASomB,EAAY,EAAG5zF,EAAI,IACxD4zF,EAAY5zF,EAAI,EAChBA,GAAK,EACL,MAEF,QAGEA,GAAK,EAMX6oE,EAASA,EAAO2E,SAASomB,GACzB5zF,GAAK4zF,EACLA,EAAY,GAGdxjF,KAAKmjB,MAAQ,WACXs1C,EAAS,KACT+qB,EAAY,EACZxjF,KAAK8D,QAAQ,UAGf9D,KAAKsd,MAAQ,WAEPm7C,GAAUA,EAAOzB,WAAa,GAChCh3D,KAAK8D,QAAQ,OAAQ20D,EAAO2E,SAASomB,EAAY,IAInD/qB,EAAS,KACT+qB,EAAY,EACZxjF,KAAK8D,QAAQ,SAGf9D,KAAK8iE,YAAc,WACjB9iE,KAAKsd,QACLtd,KAAK8D,QAAQ,mBAIjBi+E,GAAepzF,UAAY,IAAI02E,EAI/B2c,GAAkC,CAChC,KAAK,EACL,KAAK,EACL,KAAK,EACL,KAAK,EACL,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,KAAK,EACL,KAAK,EAGL,KAAK,EACL,KAAK,EACL,KAAK,GAOPF,GAAc,WACZ,IACI3zF,EACAiyF,EACAuD,EACAC,EACAC,EACAC,EACAC,EAPAC,EAAgB,IAAIjC,GASxBD,GAAYnzF,UAAU8zE,KAAK9uE,KAAKqM,MAEhC7R,EAAO6R,KAaPA,KAAKhP,KAAO,SAAUi/E,GACA,UAAhBA,EAAOjhF,OAIXoxF,EAAUnQ,EAAOmQ,QACjBuD,EAAa1T,EAAOnF,IACpB8Y,EAAa3T,EAAOlF,IACpBiZ,EAAchzF,KAAKi/E,KAYrB+T,EAAc/gF,GAAG,QAAQ,SAAU7C,GACjC,IAAIrE,EAAQ,CACVqkF,QAASA,EACTtV,IAAK6Y,EACL5Y,IAAK6Y,EACLxjF,KAAMA,EACN6jF,gBAA2B,GAAV7jF,EAAK,IAGxB,OAAQrE,EAAMkoF,iBACZ,KAAK,EACHloF,EAAMwvE,YAAc,4CACpB,MAEF,KAAK,EACHxvE,EAAMwvE,YAAc,WACpBxvE,EAAMyzE,YAAcqU,EAAgCzjF,EAAKg9D,SAAS,IAClE,MAEF,KAAK,EACHrhE,EAAMwvE,YAAc,yBACpBxvE,EAAMyzE,YAAcqU,EAAgCzjF,EAAKg9D,SAAS,IAClErhE,EAAMypC,OAASs+C,EAAyB/nF,EAAMyzE,aAC9C,MAEF,KAAK,EACHzzE,EAAMwvE,YAAc,yBACpB,MAEF,KAAK,EACHxvE,EAAMwvE,YAAc,6BAKxBp9E,EAAK2V,QAAQ,OAAQ/H,MAEvBioF,EAAc/gF,GAAG,QAAQ,WACvB9U,EAAK2V,QAAQ,WAEfkgF,EAAc/gF,GAAG,eAAe,WAC9B9U,EAAK2V,QAAQ,kBAEfkgF,EAAc/gF,GAAG,SAAS,WACxB9U,EAAK2V,QAAQ,YAEfkgF,EAAc/gF,GAAG,iBAAiB,WAChC9U,EAAK2V,QAAQ,oBAGf9D,KAAKsd,MAAQ,WACX0mE,EAAc1mE,SAGhBtd,KAAK6iE,aAAe,WAClBmhB,EAAcnhB,gBAGhB7iE,KAAKmjB,MAAQ,WACX6gE,EAAc7gE,SAGhBnjB,KAAK8iE,YAAc,WACjBkhB,EAAclhB,eAahBihB,EAAkB,SAAyBl4B,EAAOq4B,GAChD,IAEI/4D,EAFAg5D,EAAY,EACZC,EAAY,EAIhB,IAAKj5D,EAAI,EAAGA,EAAI0gC,EAAO1gC,IACH,IAAdi5D,IAEFA,GAAaD,EADAD,EAAiBb,gBACQ,KAAO,KAG/Cc,EAA0B,IAAdC,EAAkBD,EAAYC,GAa9CP,EAAkC,SAAyCzjF,GAOzE,IANA,IAGIouE,EACAC,EAJA5+E,EAASuQ,EAAK42D,WACd0X,EAAoC,GACpC9+E,EAAI,EAIDA,EAAIC,EAAS,GACF,IAAZuQ,EAAKxQ,IAA4B,IAAhBwQ,EAAKxQ,EAAI,IAA4B,IAAhBwQ,EAAKxQ,EAAI,IACjD8+E,EAAkC19E,KAAKpB,EAAI,GAC3CA,GAAK,GAELA,IAMJ,GAAiD,IAA7C8+E,EAAkC7+E,OACpC,OAAOuQ,EAITouE,EAAY3+E,EAAS6+E,EAAkC7+E,OACvD4+E,EAAU,IAAIvH,WAAWsH,GACzB,IAAIG,EAAc,EAElB,IAAK/+E,EAAI,EAAGA,EAAI4+E,EAAWG,IAAe/+E,IACpC++E,IAAgBD,EAAkC,KAEpDC,IAEAD,EAAkCpoE,SAGpCmoE,EAAQ7+E,GAAKwQ,EAAKuuE,GAGpB,OAAOF,GAaTqV,EAA2B,SAAkC1jF,GAC3D,IAII8jF,EACA3b,EACAE,EACAD,EACA6b,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGA/0F,EAjBAg1F,EAAsB,EACtBC,EAAuB,EACvBC,EAAqB,EACrBC,EAAwB,EAYxBrc,EAAW,CAAC,EAAG,GAanB,GATAH,GADA2b,EAAmB,IAAIjC,GAAU7hF,IACHmjF,mBAE9B/a,EAAuB0b,EAAiBX,mBAExC9a,EAAWyb,EAAiBX,mBAE5BW,EAAiBjB,wBAGbjB,GAAgCzZ,KAGV,KAFxB8b,EAAkBH,EAAiBf,0BAGjCe,EAAiBxB,SAAS,GAG5BwB,EAAiBjB,wBAEjBiB,EAAiBjB,wBAEjBiB,EAAiBxB,SAAS,GAEtBwB,EAAiBZ,eAInB,IAFAqB,EAAuC,IAApBN,EAAwB,EAAI,GAE1Cz0F,EAAI,EAAGA,EAAI+0F,EAAkB/0F,IAC5Bs0F,EAAiBZ,eAGjBS,EADEn0F,EAAI,EACU,GAEA,GAFIs0F,GAa9B,GAJAA,EAAiBjB,wBAIO,KAFxBqB,EAAkBJ,EAAiBf,yBAGjCe,EAAiBf,6BACZ,GAAwB,IAApBmB,EAST,IARAJ,EAAiBxB,SAAS,GAE1BwB,EAAiBhB,gBAEjBgB,EAAiBhB,gBAEjBqB,EAAiCL,EAAiBf,wBAE7CvzF,EAAI,EAAGA,EAAI20F,EAAgC30F,IAC9Cs0F,EAAiBhB,gBA0BrB,GAtBAgB,EAAiBjB,wBAEjBiB,EAAiBxB,SAAS,GAE1B8B,EAAsBN,EAAiBf,wBACvCsB,EAA4BP,EAAiBf,wBAGpB,KAFzBuB,EAAmBR,EAAiBtB,SAAS,KAG3CsB,EAAiBxB,SAAS,GAG5BwB,EAAiBxB,SAAS,GAEtBwB,EAAiBZ,gBAEnBsB,EAAsBV,EAAiBf,wBACvC0B,EAAuBX,EAAiBf,wBACxC2B,EAAqBZ,EAAiBf,wBACtC4B,EAAwBb,EAAiBf,yBAGvCe,EAAiBZ,eAEfY,EAAiBZ,cAAe,CAIlC,OAFiBY,EAAiBX,oBAGhC,KAAK,EACH7a,EAAW,CAAC,EAAG,GACf,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,EACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,GACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,GACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,GACHA,EAAW,CAAC,GAAI,IAChB,MAEF,KAAK,GACHA,EAAW,CAAC,IAAK,IACjB,MAEF,KAAK,GACHA,EAAW,CAAC,EAAG,GACf,MAEF,KAAK,GACHA,EAAW,CAAC,EAAG,GACf,MAEF,KAAK,GACHA,EAAW,CAAC,EAAG,GACf,MAEF,KAAK,IAEDA,EAAW,CAACwb,EAAiBX,oBAAsB,EAAIW,EAAiBX,mBAAoBW,EAAiBX,oBAAsB,EAAIW,EAAiBX,oBAK1J7a,IACFA,EAAS,GAAKA,EAAS,IAK7B,MAAO,CACLH,WAAYA,EACZE,SAAUA,EACVD,qBAAsBA,EACtBptE,MAAmC,IAA3BopF,EAAsB,GAAgC,EAAtBI,EAAiD,EAAvBC,EAClE1pF,QAAS,EAAIupF,IAAqBD,EAA4B,GAAK,GAA0B,EAArBK,EAAiD,EAAxBC,EAEjGrc,SAAUA,KAKhBoZ,GAAYnzF,UAAY,IAAI02E,EAC5B,IAoKI2f,GApKAnF,GAAO,CACToF,WAAYnD,GACZoD,cAAenD,IAWboD,GAA4B,CAAC,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,KAAO,KAAO,MAAO,IAAM,MAEhHC,GAAkB,SAAyB1b,EAAQ4L,GACrD,IAAI+P,EAAa3b,EAAO4L,EAAY,IAAM,GAAK5L,EAAO4L,EAAY,IAAM,GAAK5L,EAAO4L,EAAY,IAAM,EAAI5L,EAAO4L,EAAY,GAM7H,OAFA+P,EAAaA,GAAc,EAAIA,EAAa,GAFf,GADjB3b,EAAO4L,EAAY,KACK,EAK3B+P,EAAa,GAGfA,EAAa,IAGlBC,GAAe,SAASA,EAAallF,EAAM4xD,GAC7C,OAAI5xD,EAAKvQ,OAASmiE,EAAS,IAAM5xD,EAAK4xD,KAAY,IAAImV,WAAW,IAAM/mE,EAAK4xD,EAAS,KAAO,IAAImV,WAAW,IAAM/mE,EAAK4xD,EAAS,KAAO,IAAImV,WAAW,GAC5InV,EAIFszB,EAAallF,EADpB4xD,GAAUozB,GAAgBhlF,EAAM4xD,KAY9BuzB,GAAuB,SAA8BnlF,GACvD,OAAOA,EAAK,IAAM,GAAKA,EAAK,IAAM,GAAKA,EAAK,IAAM,EAAIA,EAAK,IA4GzD44D,GAAQ,CACVwsB,gBArHsB,SAAyBplF,GAC/C,IAAI4xD,EAASszB,GAAallF,EAAM,GAChC,OAAOA,EAAKvQ,QAAUmiE,EAAS,GAA+B,OAAV,IAAf5xD,EAAK4xD,KAA0D,OAAV,IAAnB5xD,EAAK4xD,EAAS,KAEvD,MAAV,GAAnB5xD,EAAK4xD,EAAS,KAkHfozB,gBAAiBA,GACjBK,cAzFkB,SAAuB/b,EAAQ4L,GACjD,IAAIoQ,GAAoC,IAAxBhc,EAAO4L,EAAY,KAAc,EAC7CqQ,EAASjc,EAAO4L,EAAY,IAAM,EAEtC,OADsC,KAAxB5L,EAAO4L,EAAY,GAChBqQ,EAASD,GAsF1BE,UAnFgB,SAAmBlc,EAAQ4L,GAC3C,OAAI5L,EAAO4L,KAAe,IAAInO,WAAW,IAAMuC,EAAO4L,EAAY,KAAO,IAAInO,WAAW,IAAMuC,EAAO4L,EAAY,KAAO,IAAInO,WAAW,GAC9H,kBACsB,EAApBuC,EAAO4L,IAAiE,OAAV,IAAxB5L,EAAO4L,EAAY,IAC3D,QAGF,MA6EPuQ,gBA1EoB,SAAyB5V,GAG7C,IAFA,IAAIrgF,EAAI,EAEDA,EAAI,EAAIqgF,EAAOpgF,QAAQ,CAC5B,GAAkB,MAAdogF,EAAOrgF,IAA0C,OAAV,IAAhBqgF,EAAOrgF,EAAI,IAOtC,OAAOu1F,IAA2C,GAAhBlV,EAAOrgF,EAAI,MAAe,GAJ1DA,IAOJ,OAAO,MA6DPk2F,kBA1DsB,SAA2B7V,GACjD,IAAI+N,EAAYC,EAAWrT,EAE3BoT,EAAa,GAEG,GAAZ/N,EAAO,KAET+N,GAAc,EAEdA,GAAcuH,GAAqBtV,EAAO7S,SAAS,GAAI,MAKzD,EAAG,CAID,IAFA6gB,EAAYsH,GAAqBtV,EAAO7S,SAAS4gB,EAAa,EAAGA,EAAa,KAE9D,EACd,OAAO,KAKT,GAAoB,SAFN55B,OAAO+T,aAAa8X,EAAO+N,GAAa/N,EAAO+N,EAAa,GAAI/N,EAAO+N,EAAa,GAAI/N,EAAO+N,EAAa,IAE9F,CAC1BpT,EAAQqF,EAAO7S,SAAS4gB,EAAa,GAAIA,EAAaC,EAAY,IAElE,IAAK,IAAIruF,EAAI,EAAGA,EAAIg7E,EAAM5T,WAAYpnE,IACpC,GAAiB,IAAbg7E,EAAMh7E,GAAU,CAClB,IAAI6tF,EAlELC,SAdW,SAAuBllB,EAAO/mD,EAAOC,GACvD,IAAI9hB,EACA4F,EAAS,GAEb,IAAK5F,EAAI6hB,EAAO7hB,EAAI8hB,EAAK9hB,IACvB4F,GAAU,KAAO,KAAOgjE,EAAM5oE,GAAGgD,SAAS,KAAKtD,OAAO,GAGxD,OAAOkG,EAMSuwF,CAkEkBnb,EAAO,EAAGh7E,IAEpC,GAAc,iDAAV6tF,EAA0D,CAC5D,IAAIU,EAAIvT,EAAMxN,SAASxtE,EAAI,GACvB4V,GAAe,EAAP24E,EAAE,KAAc,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,GAAKA,EAAE,IAAM,EAAIA,EAAE,KAAO,EAGhF,OAFA34E,GAAQ,EACRA,GAAe,EAAP24E,EAAE,GAIZ,OAKNH,GAAc,GAEdA,GAAcC,QACPD,EAAa/N,EAAOjZ,YAE7B,OAAO,QAkBTguB,GAAa,WACX,IAAIrG,EAAa,IAAIzX,WACjBkX,EAAY,EAEhB4G,GAAWr2F,UAAU8zE,KAAK9uE,KAAKqM,MAE/BA,KAAKgmF,aAAe,SAAU1Z,GAC5B8R,EAAY9R,GAGdtsE,KAAKhP,KAAO,SAAUwnE,GACpB,IAEIytB,EACAlI,EACA9N,EACAiW,EALAjI,EAAY,EACZ3I,EAAY,EAgBhB,IATIqJ,EAAW9uF,QACbq2F,EAAavH,EAAW9uF,QACxB8uF,EAAa,IAAIzX,WAAW1O,EAAMxB,WAAakvB,IACpC5lF,IAAIq+E,EAAWvhB,SAAS,EAAG8oB,IACtCvH,EAAWr+E,IAAIk4D,EAAO0tB,IAEtBvH,EAAanmB,EAGRmmB,EAAW9uF,OAASylF,GAAa,GACtC,GAAIqJ,EAAWrJ,KAAe,IAAInO,WAAW,IAAMwX,EAAWrJ,EAAY,KAAO,IAAInO,WAAW,IAAMwX,EAAWrJ,EAAY,KAAO,IAAInO,WAAW,GAuB5I,GAAuC,OAAV,IAAxBwX,EAAWrJ,KAAsE,OAAV,IAA5BqJ,EAAWrJ,EAAY,IAyB9EA,QAzBO,CAGL,GAAIqJ,EAAW9uF,OAASylF,EAAY,EAClC,MAMF,GAAIA,GAHJ2I,EAAYjlB,GAAMysB,cAAc9G,EAAYrJ,IAGhBqJ,EAAW9uF,OACrC,MAGFogF,EAAS,CACPjhF,KAAM,QACNoR,KAAMu+E,EAAWvhB,SAASkY,EAAWA,EAAY2I,GACjDnT,IAAKsT,EACLrT,IAAKqT,GAEPp+E,KAAK8D,QAAQ,OAAQmsE,GACrBqF,GAAa2I,MA5Cf,CAGE,GAAIU,EAAW9uF,OAASylF,EAAY,GAClC,MAQF,GAAIA,GAJJ2I,EAAYjlB,GAAMosB,gBAAgBzG,EAAYrJ,IAIlBqJ,EAAW9uF,OACrC,MAGFkuF,EAAQ,CACN/uF,KAAM,iBACNoR,KAAMu+E,EAAWvhB,SAASkY,EAAWA,EAAY2I,IAEnDj+E,KAAK8D,QAAQ,OAAQi6E,GACrBzI,GAAa2I,EA8BjBgI,EAAYtH,EAAW9uF,OAASylF,EAG9BqJ,EADEsH,EAAY,EACDtH,EAAWvhB,SAASkY,GAEpB,IAAIpO,YAIrBlnE,KAAKmjB,MAAQ,WACXw7D,EAAa,IAAIzX,WACjBlnE,KAAK8D,QAAQ,UAGf9D,KAAK8iE,YAAc,WACjB6b,EAAa,IAAIzX,WACjBlnE,KAAK8D,QAAQ,oBAINnV,UAAY,IAAI02E,EAC3B,IAUI8gB,GAAqBC,GAAqBC,GAAaC,GAVvDv8D,GAAMi7D,GAGNuB,GADmB,CAAC,kBAAmB,eAAgB,aAAc,yBAA0B,cAG/FC,GADmB,CAAC,QAAS,SAAU,aAAc,WAAY,uBAAwB,YAEzFvB,GAAapF,GAAKoF,WAClBO,GAAkBxsB,GAAMwsB,gBACxBiB,GAAqB/Z,GAIrBga,GAAqB,SAA4BvzF,EAAK4I,GACxDA,EAAMspE,OAASlyE,EACf6M,KAAK8D,QAAQ,MAAO/H,IAGlB4qF,GAA2B,SAAkCC,EAAYC,GAG3E,IAFA,IAAI/zF,EAAOD,OAAOC,KAAK+zF,GAEdj3F,EAAI,EAAGA,EAAIkD,EAAKjD,OAAQD,IAAK,CACpC,IAAIuD,EAAML,EAAKlD,GAGH,mBAARuD,GAA6B0zF,EAAS1zF,GAAK8P,IAI/C4jF,EAAS1zF,GAAK8P,GAAG,MAAOyjF,GAAmBjiF,KAAKmiF,EAAYzzF,MAQ5D2zF,GAAc,SAAqBprE,EAAG8lC,GACxC,IAAI5xD,EAEJ,GAAI8rB,EAAE7rB,SAAW2xD,EAAE3xD,OACjB,OAAO,EAIT,IAAKD,EAAI,EAAGA,EAAI8rB,EAAE7rB,OAAQD,IACxB,GAAI8rB,EAAE9rB,KAAO4xD,EAAE5xD,GACb,OAAO,EAIX,OAAO,GAGLm3F,GAA4B,SAAmC3d,EAAqB4d,EAAUjU,EAAUkU,EAAQ9P,EAAQ+P,GAQ1H,MAAO,CACLz1E,MAAO,CACLs5D,IAAK3B,EACL0B,IAAK1B,GAVc2J,EAAWiU,IAYhCt1E,IAAK,CACHq5D,IAAK3B,GAZY6d,EAASD,GAa1Blc,IAAK1B,GAZkB+N,EAASpE,IAclCmU,yBAA0BA,EAC1B9d,oBAAqBA,IAczBgd,GAAsB,SAA4B1zE,EAAOnU,GACvD,IACImpE,EADA4F,EAAa,GAEbC,EAAqB,EACrBX,EAAqB,EACrBC,EAA2Bv6C,IAE/Bo1C,GADAnpE,EAAUA,GAAW,IACI4oF,qBAAuB,EAEhDf,GAAoBz3F,UAAU8zE,KAAK9uE,KAAKqM,MAExCA,KAAKhP,KAAO,SAAUoP,GACpB0tE,GAA+Bp7D,EAAOtS,GAElCsS,GACF6zE,GAAgBrzF,SAAQ,SAAUY,GAChC4e,EAAM5e,GAAQsM,EAAKtM,MAKvBw5E,EAAWt8E,KAAKoP,IAGlBJ,KAAKonF,eAAiB,SAAUC,GAC9B9Z,EAAqB8Z,GAGvBrnF,KAAKsnF,4BAA8B,SAAUle,GAC3CyD,EAA2BzD,GAG7BppE,KAAKunF,oBAAsB,SAAUjb,GACnCM,EAAqBN,GAGvBtsE,KAAKsd,MAAQ,WACX,IAAI+tD,EAAQjI,EAAMiD,EAAMuB,EAAOmF,EAAe/c,EAAiBw3B,EAErC,IAAtBla,EAAWz9E,QAKfw7E,EAASsB,GAA4CW,EAAY56D,EAAO66D,GACxE76D,EAAM02D,oBAAsB0E,GAAkDp7D,EAAOnU,EAAQkuE,wBAE7F+a,EAAoC7a,GAAkCj6D,EAAO24D,EAAQuB,EAAoBC,GAGzGn6D,EAAMo1D,QAAU6E,GAAoCtB,GAEpDhF,EAAOmE,GAAkBmC,GAAqCtB,IAC9DiC,EAAa,GACblK,EAAOoH,GAAkB9C,EAAgB,CAACh1D,IAC1Ck1D,EAAQ,IAAIV,WAAW9D,EAAKpM,WAAaqP,EAAKrP,YAE9C0Q,IACAE,EAAMtnE,IAAI8iE,GACVwE,EAAMtnE,IAAI+lE,EAAMjD,EAAKpM,YACrB8W,GAA6Bp7D,GAC7Bq6D,EAAgB3vE,KAAKiwE,KAA0B,KAArBoZ,GAA4B/zE,EAAM+0D,YAKxD4D,EAAOx7E,SACTmgE,EAAkBqb,EAAOx7E,OAASk9E,EAClC/sE,KAAK8D,QAAQ,oBAAqBijF,GAGlCra,GAAuBh6D,EAAM02D,oBAAqB12D,EAAM+0D,YACxD4D,EAAO,GAAGN,IAAKM,EAAO,GAAGP,IAAKO,EAAO,GAAGN,IAAM/a,EAAiBqb,EAAO,GAAGP,IAAM9a,EAAiBw3B,GAAqC,IACrIxnF,KAAK8D,QAAQ,aAAc,CACzB2N,MAAO45D,EAAO,GAAGP,IACjBp5D,IAAK25D,EAAO,GAAGP,IAAM9a,KAIzBhwD,KAAK8D,QAAQ,OAAQ,CACnB4O,MAAOA,EACPk1D,MAAOA,IAET5nE,KAAK8D,QAAQ,OAAQ,uBA3CnB9D,KAAK8D,QAAQ,OAAQ,uBA8CzB9D,KAAKmjB,MAAQ,WACX2qD,GAA6Bp7D,GAC7B46D,EAAa,GACbttE,KAAK8D,QAAQ,WAIjBsiF,GAAoBz3F,UAAY,IAAI02E,EAapC8gB,GAAsB,SAA4BzzE,EAAOnU,GACvD,IAAImpE,EAGAliC,EACA4iC,EAHA8C,EAAW,GACXuc,EAAkB,GAItB/f,GADAnpE,EAAUA,GAAW,IACI4oF,qBAAuB,EAEhDhB,GAAoBx3F,UAAU8zE,KAAK9uE,KAAKqM,aAEjC0S,EAAMg1E,OACb1nF,KAAK2nF,UAAY,GAUjB3nF,KAAKhP,KAAO,SAAU42F,GACpB9Z,GAA+Bp7D,EAAOk1E,GAEV,2BAAxBA,EAAQrc,aAA6C/lC,IACvDA,EAASoiD,EAAQpiD,OACjB9yB,EAAMy1D,IAAM,CAACyf,EAAQxnF,MACrBomF,GAAgBtzF,SAAQ,SAAUY,GAChC4e,EAAM5e,GAAQ0xC,EAAO1xC,KACpBkM,OAGuB,2BAAxB4nF,EAAQrc,aAA6CnD,IACvDA,EAAMwf,EAAQxnF,KACdsS,EAAM01D,IAAM,CAACwf,EAAQxnF,OAIvB8qE,EAASl6E,KAAK42F,IAQhB5nF,KAAKsd,MAAQ,WAYX,IAXA,IAAI+tD,EACAwc,EACApc,EACArI,EACAiD,EACAuB,EAEAkgB,EACAC,EAFAb,EAA2B,EAKxBhc,EAASr7E,QACkB,+BAA5Bq7E,EAAS,GAAGK,aAIhBL,EAAS5kE,QAIX,GAAwB,IAApB4kE,EAASr7E,OAGX,OAFAmQ,KAAKgoF,oBACLhoF,KAAK8D,QAAQ,OAAQ,sBAkDvB,GA3CAunE,EAASJ,GAA+BC,IACxCO,EAAOR,GAA+BI,IAmB5B,GAAG,GAAGL,YAEd6c,EAAe7nF,KAAKioF,iBAAiB/c,EAAS,GAAIx4D,KAKhDw0E,EAA2BW,EAAa/1E,SACxC25D,EAAK36E,QAAQ+2F,GAGbpc,EAAKzU,YAAc6wB,EAAa7wB,WAChCyU,EAAKH,UAAYuc,EAAavc,SAC9BG,EAAKX,IAAM+c,EAAa/c,IACxBW,EAAKV,IAAM8c,EAAa9c,IACxBU,EAAK35D,UAAY+1E,EAAa/1E,UAG9B25D,EAAOR,GAA+BQ,IAKtCgc,EAAgB53F,OAAQ,CAC1B,IAAIq4F,EAQJ,KALEA,EADE3pF,EAAQ4pF,eACInoF,KAAKooF,gBAAgB3c,GAErBzrE,KAAKqoF,kBAAkB5c,IAiBrC,OAZAzrE,KAAK2nF,UAAU72F,QAAQ,CACrBw3F,IAAK7c,EAAK92E,MACVyzE,IAAK11D,EAAM01D,IACXD,IAAKz1D,EAAMy1D,MAGbnoE,KAAK2nF,UAAU93F,OAASuN,KAAKE,IAAI,EAAG0C,KAAK2nF,UAAU93F,QAEnDq7E,EAAW,GAEXlrE,KAAKgoF,oBACLhoF,KAAK8D,QAAQ,OAAQ,sBAMvBgqE,GAA6Bp7D,GAC7B+4D,EAAOyc,EAGTpa,GAA+Bp7D,EAAO+4D,GAGtC/4D,EAAMo1D,QAAUmD,GAA+BQ,GAE/CpF,EAAOmE,GAAkBS,GAA8BQ,IACvD/4D,EAAM02D,oBAAsB0E,GAAkDp7D,EAAOnU,EAAQkuE,wBAC7FzsE,KAAK8D,QAAQ,oBAAqB2nE,EAAKlvE,KAAI,SAAU+rF,GACnD,MAAO,CACLxd,IAAKwd,EAAIxd,IACTC,IAAKud,EAAIvd,IACT/T,WAAYsxB,EAAItxB,gBAGpB8wB,EAAWrc,EAAK,GAChBsc,EAAUtc,EAAKA,EAAK57E,OAAS,GAC7BmQ,KAAK8D,QAAQ,oBAAqBijF,GAA0Br0E,EAAM02D,oBAAqB0e,EAAS/c,IAAK+c,EAAShd,IAAKid,EAAQhd,IAAMgd,EAAQj2E,SAAUi2E,EAAQjd,IAAMid,EAAQj2E,SAAUo1E,IACnLlnF,KAAK8D,QAAQ,aAAc,CACzB2N,MAAOg6D,EAAK,GAAGX,IACfp5D,IAAK+5D,EAAKA,EAAK57E,OAAS,GAAGi7E,IAAMW,EAAKA,EAAK57E,OAAS,GAAGiiB,WAGzD9R,KAAK2nF,UAAU72F,QAAQ,CACrBw3F,IAAK7c,EAAK92E,MACVyzE,IAAK11D,EAAM01D,IACXD,IAAKz1D,EAAMy1D,MAGbnoE,KAAK2nF,UAAU93F,OAASuN,KAAKE,IAAI,EAAG0C,KAAK2nF,UAAU93F,QAEnDq7E,EAAW,GACXlrE,KAAK8D,QAAQ,sBAAuB4O,EAAM02D,qBAC1CppE,KAAK8D,QAAQ,oBAAqB4O,EAAMu7D,mBACxC7K,EAAOoH,GAAkB9C,EAAgB,CAACh1D,IAG1Ck1D,EAAQ,IAAIV,WAAW9D,EAAKpM,WAAaqP,EAAKrP,YAE9C0Q,IACAE,EAAMtnE,IAAI8iE,GACVwE,EAAMtnE,IAAI+lE,EAAMjD,EAAKpM,YACrBh3D,KAAK8D,QAAQ,OAAQ,CACnB4O,MAAOA,EACPk1D,MAAOA,IAET5nE,KAAKgoF,eAELhoF,KAAK8D,QAAQ,OAAQ,uBAGvB9D,KAAKmjB,MAAQ,WACXnjB,KAAKgoF,eACL9c,EAAW,GACXlrE,KAAK2nF,UAAU93F,OAAS,EACxB43F,EAAgB53F,OAAS,EACzBmQ,KAAK8D,QAAQ,UAGf9D,KAAKgoF,aAAe,WAClBla,GAA6Bp7D,GAG7B8yB,OAAStqC,EACTktE,OAAMltE,GAKR8E,KAAKioF,iBAAmB,SAAUL,GAChC,IAKIW,EACAC,EACAhd,EACAid,EACA74F,EALJ84F,EAAkBp2D,IAOlB,IAAK1iC,EAAI,EAAGA,EAAIoQ,KAAK2nF,UAAU93F,OAAQD,IAErC47E,GADAid,EAAgBzoF,KAAK2nF,UAAU/3F,IACJ04F,IAErB51E,EAAM01D,KAAO0e,GAAYp0E,EAAM01D,IAAI,GAAIqgB,EAAcrgB,IAAI,KAAU11D,EAAMy1D,KAAO2e,GAAYp0E,EAAMy1D,IAAI,GAAIsgB,EAActgB,IAAI,MAK9HqD,EAAWT,IAAMr4D,EAAMu7D,kBAAkBlD,MAK7Cwd,EAAcX,EAAQ7c,IAAMS,EAAWT,IAAMS,EAAW15D,YAvBvC,KA0BuBy2E,GA5BzB,QA+BRC,GAAiBE,EAAkBH,KACtCC,EAAgBC,EAChBC,EAAkBH,IAKxB,OAAIC,EACKA,EAAcF,IAGhB,MAKTtoF,KAAKqoF,kBAAoB,SAAU5c,GACjC,IAAIkd,EAAYC,EAAUC,EAAOP,EAAKtxB,EAAYsU,EAAUx5D,EAAUo2E,EAMtE,IALAlxB,EAAayU,EAAKzU,WAClBsU,EAAWG,EAAKH,SAChBx5D,EAAW25D,EAAK35D,SAChB62E,EAAaC,EAAW,EAEjBD,EAAalB,EAAgB53F,QAAU+4F,EAAWnd,EAAK57E,SAC5Dg5F,EAAQpB,EAAgBkB,GACxBL,EAAM7c,EAAKmd,GAEPC,EAAM/d,MAAQwd,EAAIxd,MAIlBwd,EAAIxd,IAAM+d,EAAM/d,IAGlB6d,KAMFC,IACA5xB,GAAcsxB,EAAItxB,WAClBsU,GAAYgd,EAAIhd,SAChBx5D,GAAYw2E,EAAIx2E,UAGlB,OAAiB,IAAb82E,EAEKnd,EAGLmd,IAAand,EAAK57E,OAEb,OAGTq4F,EAAczc,EAAKn8E,MAAMs5F,IACb5xB,WAAaA,EACzBkxB,EAAYp2E,SAAWA,EACvBo2E,EAAY5c,SAAWA,EACvB4c,EAAYpd,IAAMod,EAAY,GAAGpd,IACjCod,EAAYnd,IAAMmd,EAAY,GAAGnd,IAC1Bmd,IAKTloF,KAAKooF,gBAAkB,SAAU3c,GAC/B,IAAIkd,EAAYC,EAAUC,EAAOP,EAAKQ,EAAeC,EAkCjDC,EA5BJ,IALAL,EAAalB,EAAgB53F,OAAS,EACtC+4F,EAAWnd,EAAK57E,OAAS,EACzBi5F,EAAgB,KAChBC,GAAa,EAENJ,GAAc,GAAKC,GAAY,GAAG,CAIvC,GAHAC,EAAQpB,EAAgBkB,GACxBL,EAAM7c,EAAKmd,GAEPC,EAAM/d,MAAQwd,EAAIxd,IAAK,CACzBie,GAAa,EACb,MAGEF,EAAM/d,IAAMwd,EAAIxd,IAClB6d,KAIEA,IAAelB,EAAgB53F,OAAS,IAI1Ci5F,EAAgBF,GAGlBA,KAGF,IAAKG,GAAgC,OAAlBD,EACjB,OAAO,KAWT,GAAkB,KALhBE,EADED,EACUH,EAEAE,GAIZ,OAAOrd,EAGT,IAAIyc,EAAczc,EAAKn8E,MAAM05F,GACzBjuE,EAAWmtE,EAAYx8E,QAAO,SAAUmyD,EAAOyqB,GAIjD,OAHAzqB,EAAM7G,YAAcsxB,EAAItxB,WACxB6G,EAAM/rD,UAAYw2E,EAAIx2E,SACtB+rD,EAAMyN,UAAYgd,EAAIhd,SACfzN,IACN,CACD7G,WAAY,EACZllD,SAAU,EACVw5D,SAAU,IAOZ,OALA4c,EAAYlxB,WAAaj8C,EAASi8C,WAClCkxB,EAAYp2E,SAAWiJ,EAASjJ,SAChCo2E,EAAY5c,SAAWvwD,EAASuwD,SAChC4c,EAAYpd,IAAMod,EAAY,GAAGpd,IACjCod,EAAYnd,IAAMmd,EAAY,GAAGnd,IAC1Bmd,GAGTloF,KAAKipF,cAAgB,SAAUC,GAC7BzB,EAAkByB,IAItB/C,GAAoBx3F,UAAY,IAAI02E,EAUpCihB,GAAkB,SAAwB/nF,EAASigF,GAIjDx+E,KAAKmpF,eAAiB,EACtBnpF,KAAKw+E,eAAiBA,EAGO,qBAF7BjgF,EAAUA,GAAW,IAEF6qF,MACjBppF,KAAKqpF,cAAgB9qF,EAAQ6qF,MAE7BppF,KAAKqpF,aAAc,EAGyB,mBAAnC9qF,EAAQkuE,uBACjBzsE,KAAKysE,uBAAyBluE,EAAQkuE,uBAEtCzsE,KAAKysE,wBAAyB,EAGhCzsE,KAAKspF,cAAgB,GACrBtpF,KAAKupF,WAAa,KAClBvpF,KAAKwpF,aAAe,GACpBxpF,KAAKypF,gBAAkB,GACvBzpF,KAAK0pF,gBAAkB,GACvB1pF,KAAK2pF,aAAe,EACpB3pF,KAAK4pF,cAAgB,EAErBtD,GAAgB33F,UAAU8zE,KAAK9uE,KAAKqM,MAGpCA,KAAKhP,KAAO,SAAU64F,GAGpB,OAAIA,EAAOxxF,KACF2H,KAAKypF,gBAAgBz4F,KAAK64F,GAI/BA,EAAOxe,OACFrrE,KAAK0pF,gBAAgB14F,KAAK64F,IAMnC7pF,KAAKspF,cAAct4F,KAAK64F,EAAOn3E,OAC/B1S,KAAK2pF,cAAgBE,EAAOjiB,MAAM5Q,WAOR,UAAtB6yB,EAAOn3E,MAAM1jB,OACfgR,KAAKupF,WAAaM,EAAOn3E,MACzB1S,KAAKwpF,aAAax4F,KAAK64F,EAAOjiB,aAGN,UAAtBiiB,EAAOn3E,MAAM1jB,OACfgR,KAAK8pF,WAAaD,EAAOn3E,MACzB1S,KAAKwpF,aAAa14F,QAAQ+4F,EAAOjiB,YAKvC0e,GAAgB33F,UAAY,IAAI02E,EAEhCihB,GAAgB33F,UAAU2uB,MAAQ,SAAUslD,GAC1C,IAOImnB,EACAC,EACApxB,EAEAhpE,EAXAoiE,EAAS,EACTj2D,EAAQ,CACVue,SAAU,GACV2vE,eAAgB,GAChBlvE,SAAU,GACV7pB,KAAM,IAKJs7E,EAAmB,EAGvB,GAAIxsE,KAAKspF,cAAcz5F,OAASmQ,KAAKmpF,eAAgB,CACnD,GAAoB,uBAAhBvmB,GAAwD,uBAAhBA,EAI1C,OACK,GAAI5iE,KAAKqpF,YAGd,OACK,GAAkC,IAA9BrpF,KAAKspF,cAAcz5F,OAc5B,OAPAmQ,KAAK4pF,qBAED5pF,KAAK4pF,eAAiB5pF,KAAKmpF,iBAC7BnpF,KAAK8D,QAAQ,QACb9D,KAAK4pF,cAAgB,IAmB3B,GAZI5pF,KAAKupF,YACP/c,EAAmBxsE,KAAKupF,WAAWtb,kBAAkBnD,IACrD0b,GAAgBtzF,SAAQ,SAAUY,GAChCiI,EAAM7K,KAAK4C,GAAQkM,KAAKupF,WAAWz1F,KAClCkM,OACMA,KAAK8pF,aACdtd,EAAmBxsE,KAAK8pF,WAAW7b,kBAAkBnD,IACrDyb,GAAgBrzF,SAAQ,SAAUY,GAChCiI,EAAM7K,KAAK4C,GAAQkM,KAAK8pF,WAAWh2F,KAClCkM,OAGDA,KAAKupF,YAAcvpF,KAAK8pF,WAAY,CAiBtC,IAhBkC,IAA9B9pF,KAAKspF,cAAcz5F,OACrBkM,EAAM/M,KAAOgR,KAAKspF,cAAc,GAAGt6F,KAEnC+M,EAAM/M,KAAO,WAGfgR,KAAK4pF,eAAiB5pF,KAAKspF,cAAcz5F,OACzC+oE,EAAc4R,GAAyBxqE,KAAKspF,eAE5CvtF,EAAM68D,YAAc,IAAIsO,WAAWtO,EAAY5B,YAG/Cj7D,EAAM68D,YAAYt4D,IAAIs4D,GAEtB78D,EAAMqE,KAAO,IAAI8mE,WAAWlnE,KAAK2pF,cAE5B/5F,EAAI,EAAGA,EAAIoQ,KAAKwpF,aAAa35F,OAAQD,IACxCmM,EAAMqE,KAAKE,IAAIN,KAAKwpF,aAAa55F,GAAIoiE,GACrCA,GAAUhyD,KAAKwpF,aAAa55F,GAAGonE,WAKjC,IAAKpnE,EAAI,EAAGA,EAAIoQ,KAAKypF,gBAAgB55F,OAAQD,KAC3Cm6F,EAAU/pF,KAAKypF,gBAAgB75F,IACvBijB,UAAY65D,GAA0Bqd,EAAQhX,SAAUvG,EAAkBxsE,KAAKysE,wBACvFsd,EAAQj3E,QAAU45D,GAA0Bqd,EAAQ5S,OAAQ3K,EAAkBxsE,KAAKysE,wBACnF1wE,EAAMkuF,eAAeF,EAAQ1kB,SAAU,EACvCtpE,EAAMue,SAAStpB,KAAK+4F,GAKtB,IAAKn6F,EAAI,EAAGA,EAAIoQ,KAAK0pF,gBAAgB75F,OAAQD,KAC3Co6F,EAAMhqF,KAAK0pF,gBAAgB95F,IACvBs6F,QAAUxd,GAA0Bsd,EAAIlf,IAAK0B,EAAkBxsE,KAAKysE,wBACxE1wE,EAAMgf,SAAS/pB,KAAKg5F,GAqBtB,IAhBAjuF,EAAMgf,SAAS+iE,aAAe99E,KAAKw+E,eAAeV,aAElD99E,KAAKspF,cAAcz5F,OAAS,EAC5BmQ,KAAKupF,WAAa,KAClBvpF,KAAKwpF,aAAa35F,OAAS,EAC3BmQ,KAAKypF,gBAAgB55F,OAAS,EAC9BmQ,KAAK2pF,aAAe,EACpB3pF,KAAK0pF,gBAAgB75F,OAAS,EAI9BmQ,KAAK8D,QAAQ,OAAQ/H,GAKhBnM,EAAI,EAAGA,EAAImM,EAAMue,SAASzqB,OAAQD,IACrCm6F,EAAUhuF,EAAMue,SAAS1qB,GACzBoQ,KAAK8D,QAAQ,UAAWimF,GAO1B,IAAKn6F,EAAI,EAAGA,EAAImM,EAAMgf,SAASlrB,OAAQD,IACrCo6F,EAAMjuF,EAAMgf,SAASnrB,GACrBoQ,KAAK8D,QAAQ,WAAYkmF,GAKzBhqF,KAAK4pF,eAAiB5pF,KAAKmpF,iBAC7BnpF,KAAK8D,QAAQ,QACb9D,KAAK4pF,cAAgB,IAIzBtD,GAAgB33F,UAAUw7F,SAAW,SAAUnyF,GAC7CgI,KAAKqpF,YAAcrxF,GAUrBquF,GAAc,SAAoB9nF,GAChC,IAEIgrF,EACAO,EAHA37F,EAAO6R,KACPoqF,GAAa,EAIjB/D,GAAY13F,UAAU8zE,KAAK9uE,KAAKqM,MAEhCzB,EAAUA,GAAW,GACrByB,KAAKopE,oBAAsB7qE,EAAQ6qE,qBAAuB,EAC1DppE,KAAKqqF,kBAAoB,GAEzBrqF,KAAKsqF,iBAAmB,WACtB,IAAIzD,EAAW,GACf7mF,KAAKqqF,kBAAoBxD,EACzBA,EAAS73F,KAAO,MAChB63F,EAASrI,eAAiB,IAAI2C,GAAOF,eAErC4F,EAAS0D,UAAY,IAAIxgE,GACzB88D,EAAS2D,6BAA+B,IAAIrJ,GAAOzE,wBAAwB,SAC3EmK,EAAS4D,qCAAuC,IAAItJ,GAAOzE,wBAAwB,kBACnFmK,EAAS6D,WAAa,IAAI5K,GAC1B+G,EAAS8D,eAAiB,IAAIrE,GAAgB/nF,EAASsoF,EAASrI,gBAChEqI,EAAS+D,eAAiB/D,EAAS0D,UACnC1D,EAAS0D,UAAU7nB,KAAKmkB,EAAS2D,8BAA8B9nB,KAAKmkB,EAAS6D,YAC7E7D,EAAS0D,UAAU7nB,KAAKmkB,EAAS4D,sCAAsC/nB,KAAKmkB,EAASrI,gBAAgB9b,KAAKmkB,EAAS8D,gBACnH9D,EAASrI,eAAev7E,GAAG,aAAa,SAAU2nE,GAChDic,EAAS0D,UAAUvE,aAAapb,EAAMwT,cAExCyI,EAAS0D,UAAUtnF,GAAG,QAAQ,SAAU7C,GACpB,mBAAdA,EAAKpR,MAA2C,UAAdoR,EAAKpR,MAAoB63F,EAASgE,qBAIxEf,EAAaA,GAAc,CACzB7b,kBAAmB,CACjB7E,oBAAqBj7E,EAAKi7E,qBAE5BqX,MAAO,OACPzxF,KAAM,SAGR63F,EAAS8D,eAAexB,iBACxBtC,EAASgE,mBAAqB,IAAIzE,GAAoB0D,EAAYvrF,GAClEsoF,EAASgE,mBAAmB5nF,GAAG,MAAO9U,EAAK28F,eAAe,uBAC1DjE,EAASgE,mBAAmB5nF,GAAG,aAAc9U,EAAK2V,QAAQW,KAAKtW,EAAM,oBAErE04F,EAAS6D,WAAWhoB,KAAKmkB,EAASgE,oBAAoBnoB,KAAKmkB,EAAS8D,gBAEpEx8F,EAAK2V,QAAQ,YAAa,CACxBinF,WAAYjB,EACZkB,WAAYzB,QAIhB1C,EAAS8D,eAAe1nF,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SAE3D6mF,EAAS8D,eAAe1nF,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SAC3D2mF,GAAyB3mF,KAAM6mF,IAGjC7mF,KAAKirF,gBAAkB,WACrB,IAAIpE,EAAW,GACf7mF,KAAKqqF,kBAAoBxD,EACzBA,EAAS73F,KAAO,KAChB63F,EAASrI,eAAiB,IAAI2C,GAAOF,eAErC4F,EAASqE,aAAe,IAAI/J,GAAOL,sBACnC+F,EAASsE,YAAc,IAAIhK,GAAOJ,qBAClC8F,EAASuE,iBAAmB,IAAIjK,GAAOH,iBACvC6F,EAAS7J,wBAA0B,IAAImE,GAAOzE,wBAC9CmK,EAAS6D,WAAa,IAAI5K,GAC1B+G,EAASwE,WAAa,IAAIpG,GAC1B4B,EAAS7K,cAAgB,IAAImF,GAAOtS,cAActwE,GAClDsoF,EAAS8D,eAAiB,IAAIrE,GAAgB/nF,EAASsoF,EAASrI,gBAChEqI,EAAS+D,eAAiB/D,EAASqE,aAEnCrE,EAASqE,aAAaxoB,KAAKmkB,EAASsE,aAAazoB,KAAKmkB,EAASuE,kBAAkB1oB,KAAKmkB,EAAS7J,yBAG/F6J,EAAS7J,wBAAwBta,KAAKmkB,EAASwE,YAC/CxE,EAAS7J,wBAAwBta,KAAKmkB,EAAS6D,YAC/C7D,EAAS7J,wBAAwBta,KAAKmkB,EAASrI,gBAAgB9b,KAAKmkB,EAAS8D,gBAE7E9D,EAASwE,WAAW3oB,KAAKmkB,EAAS7K,eAAetZ,KAAKmkB,EAAS8D,gBAC/D9D,EAASuE,iBAAiBnoF,GAAG,QAAQ,SAAU7C,GAC7C,IAAIxQ,EAEJ,GAAkB,aAAdwQ,EAAKpR,KAAqB,CAG5B,IAFAY,EAAIwQ,EAAKoX,OAAO3nB,OAETD,KACA25F,GAAsC,UAAxBnpF,EAAKoX,OAAO5nB,GAAGZ,KAGtB86F,GAAsC,UAAxB1pF,EAAKoX,OAAO5nB,GAAGZ,QACvC86F,EAAa1pF,EAAKoX,OAAO5nB,IACdq+E,kBAAkB7E,oBAAsBj7E,EAAKi7E,sBAJxDmgB,EAAanpF,EAAKoX,OAAO5nB,IACdq+E,kBAAkB7E,oBAAsBj7E,EAAKi7E,oBAQxDmgB,IAAe1C,EAASyE,qBAC1BzE,EAAS8D,eAAexB,iBACxBtC,EAASyE,mBAAqB,IAAInF,GAAoBoD,EAAYhrF,GAClEsoF,EAASyE,mBAAmBroF,GAAG,MAAO9U,EAAK28F,eAAe,uBAC1DjE,EAASyE,mBAAmBroF,GAAG,qBAAqB,SAAUgrE,GAKxD6b,IAAevrF,EAAQkuE,yBACzBqd,EAAW7b,kBAAoBA,EAK/B4Y,EAASgE,mBAAmBzD,eAAenZ,EAAkBlD,IAAM58E,EAAKi7E,yBAG5Eyd,EAASyE,mBAAmBroF,GAAG,oBAAqB9U,EAAK2V,QAAQW,KAAKtW,EAAM,YAC5E04F,EAASyE,mBAAmBroF,GAAG,oBAAqB9U,EAAK2V,QAAQW,KAAKtW,EAAM,2BAC5E04F,EAASyE,mBAAmBroF,GAAG,uBAAuB,SAAUmmE,GAC1D0gB,GACFjD,EAASgE,mBAAmBvD,4BAA4Ble,MAG5Dyd,EAASyE,mBAAmBroF,GAAG,aAAc9U,EAAK2V,QAAQW,KAAKtW,EAAM,oBAErE04F,EAASwE,WAAW3oB,KAAKmkB,EAASyE,oBAAoB5oB,KAAKmkB,EAAS8D,iBAGlEb,IAAejD,EAASgE,qBAE1BhE,EAAS8D,eAAexB,iBACxBtC,EAASgE,mBAAqB,IAAIzE,GAAoB0D,EAAYvrF,GAClEsoF,EAASgE,mBAAmB5nF,GAAG,MAAO9U,EAAK28F,eAAe,uBAC1DjE,EAASgE,mBAAmB5nF,GAAG,aAAc9U,EAAK2V,QAAQW,KAAKtW,EAAM,oBACrE04F,EAASgE,mBAAmB5nF,GAAG,oBAAqB9U,EAAK2V,QAAQW,KAAKtW,EAAM,2BAE5E04F,EAAS6D,WAAWhoB,KAAKmkB,EAASgE,oBAAoBnoB,KAAKmkB,EAAS8D,iBAItEx8F,EAAK2V,QAAQ,YAAa,CACxBinF,WAAYjB,EACZkB,WAAYzB,QAKlB1C,EAAS8D,eAAe1nF,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SAC3D6mF,EAAS8D,eAAe1nF,GAAG,YAAY,SAAUsoF,GAC/CA,EAASzN,aAAe+I,EAASrI,eAAeV,aAChD3vF,EAAK2V,QAAQ,WAAYynF,MAE3B1E,EAAS8D,eAAe1nF,GAAG,UAAWjD,KAAK8D,QAAQW,KAAKzE,KAAM,YAE9D6mF,EAAS8D,eAAe1nF,GAAG,OAAQjD,KAAK8D,QAAQW,KAAKzE,KAAM,SAC3D2mF,GAAyB3mF,KAAM6mF,IAIjC7mF,KAAKwrF,uBAAyB,SAAUpiB,GACtC,IAAIyd,EAAW7mF,KAAKqqF,kBAEf9rF,EAAQkuE,yBACXzsE,KAAKopE,oBAAsBA,GAGzB0gB,IACFA,EAAW7b,kBAAkBlD,SAAM7vE,EACnC4uF,EAAW7b,kBAAkBnD,SAAM5vE,EACnC4yE,GAA6Bgc,GAEzBjD,EAAS2D,8BACX3D,EAAS2D,6BAA6B1N,iBAItCyM,IACE1C,EAASyE,qBACXzE,EAASyE,mBAAmB3D,UAAY,IAG1C4B,EAAWtb,kBAAkBlD,SAAM7vE,EACnCquF,EAAWtb,kBAAkBnD,SAAM5vE,EACnC4yE,GAA6Byb,GAC7B1C,EAAS7K,cAAc74D,SAGrB0jE,EAAS7J,yBACX6J,EAAS7J,wBAAwBF,iBAIrC98E,KAAKunF,oBAAsB,SAAUjb,GAC/Bwd,GACF9pF,KAAKqqF,kBAAkBQ,mBAAmBtD,oBAAoBjb,IAIlEtsE,KAAKmqF,SAAW,SAAUnyF,GACxB,IAAI6uF,EAAW7mF,KAAKqqF,kBACpB9rF,EAAQ6qF,MAAQpxF,EAEZ6uF,GAAYA,EAAS8D,gBACvB9D,EAAS8D,eAAeR,SAASnyF,IAIrCgI,KAAKipF,cAAgB,SAAUxB,GACzB8B,GAAcvpF,KAAKqqF,kBAAkBiB,oBACvCtrF,KAAKqqF,kBAAkBiB,mBAAmBrC,cAAcxB,IAI5DznF,KAAK8qF,eAAiB,SAAU33F,GAC9B,IAAIhF,EAAO6R,KACX,OAAO,SAAUjE,GACfA,EAAMspE,OAASlyE,EACfhF,EAAK2V,QAAQ,MAAO/H,KAKxBiE,KAAKhP,KAAO,SAAUoP,GACpB,GAAIgqF,EAAY,CACd,IAAIqB,EAAQjG,GAAgBplF,GAExBqrF,GAAyC,QAAhCzrF,KAAKqqF,kBAAkBr7F,KAClCgR,KAAKsqF,mBACKmB,GAAyC,OAAhCzrF,KAAKqqF,kBAAkBr7F,MAC1CgR,KAAKirF,kBAGPb,GAAa,EAGfpqF,KAAKqqF,kBAAkBO,eAAe55F,KAAKoP,IAI7CJ,KAAKsd,MAAQ,WACX8sE,GAAa,EAEbpqF,KAAKqqF,kBAAkBO,eAAettE,SAGxCtd,KAAK8iE,YAAc,WACjB9iE,KAAKqqF,kBAAkBO,eAAe9nB,eAGxC9iE,KAAKmjB,MAAQ,WACPnjB,KAAKqqF,kBAAkBO,gBACzB5qF,KAAKqqF,kBAAkBO,eAAeznE,SAK1CnjB,KAAK0rF,cAAgB,WACf1rF,KAAKqqF,kBAAkBrO,eACzBh8E,KAAKqqF,kBAAkBrO,cAAc74D,UAK3CkjE,GAAY13F,UAAY,IAAI02E,EAC5B,IA4uBexyD,GAAmD84E,GAAWC,GA5uBzEhF,GAAa,CACfiF,WAAYxF,GACZyF,mBAAoB3F,GACpB4F,mBAAoB3F,GACpB4F,iBAAkBzF,GAClB0F,iBAAkBzF,GAElBO,0BAA2BA,IAiBzBmF,GARe,SAAoBz4F,GACrC,OAAOA,IAAU,GAqBf04F,GATc,SAAmB1zB,GACnC,IAAIjjE,EAAS,GAKb,OAJAA,GAAU4uD,OAAO+T,aAAaM,EAAO,IACrCjjE,GAAU4uD,OAAO+T,aAAaM,EAAO,IACrCjjE,GAAU4uD,OAAO+T,aAAaM,EAAO,IACrCjjE,GAAU4uD,OAAO+T,aAAaM,EAAO,KAKnC2zB,GAAeF,GA0CfG,GAxCU,SAASC,EAAQlsF,EAAM8b,GACnC,IACItsB,EACA4V,EACAxW,EACA0iB,EACA66E,EALAriC,EAAU,GAOd,IAAKhuC,EAAKrsB,OAER,OAAO,KAGT,IAAKD,EAAI,EAAGA,EAAIwQ,EAAK42D,YACnBxxD,EAAO4mF,GAAahsF,EAAKxQ,IAAM,GAAKwQ,EAAKxQ,EAAI,IAAM,GAAKwQ,EAAKxQ,EAAI,IAAM,EAAIwQ,EAAKxQ,EAAI,IACpFZ,EAAOm9F,GAAY/rF,EAAKg9D,SAASxtE,EAAI,EAAGA,EAAI,IAC5C8hB,EAAMlM,EAAO,EAAI5V,EAAI4V,EAAOpF,EAAK42D,WAE7BhoE,IAASktB,EAAK,KACI,IAAhBA,EAAKrsB,OAGPq6D,EAAQl5D,KAAKoP,EAAKg9D,SAASxtE,EAAI,EAAG8hB,KAGlC66E,EAAaD,EAAQlsF,EAAKg9D,SAASxtE,EAAI,EAAG8hB,GAAMwK,EAAK5sB,MAAM,KAE5CO,SACbq6D,EAAUA,EAAQh7D,OAAOq9F,KAK/B38F,EAAI8hB,EAIN,OAAOw4C,GAILsiC,GAAeN,GACfO,GAAcjnB,EAAQC,UAiBtBinB,GAfO,SAActsF,GACvB,IAAI5K,EAAS,CACXC,QAAS2K,EAAK,GACdynE,MAAO,IAAIX,WAAW9mE,EAAKg9D,SAAS,EAAG,KASzC,OANuB,IAAnB5nE,EAAOC,QACTD,EAAO4zE,oBAAsBqjB,GAAYrsF,EAAKg9D,SAAS,IAEvD5nE,EAAO4zE,oBAAsBojB,GAAapsF,EAAK,IAAM,GAAKA,EAAK,IAAM,GAAKA,EAAK,IAAM,EAAIA,EAAK,IAGzF5K,GAiBLm3F,GAZmB,SAA0B9kB,GAC/C,MAAO,CACL+B,WAAuB,GAAX/B,EAAM,MAAe,EACjCE,UAAsB,EAAXF,EAAM,GACjBG,cAA0B,IAAXH,EAAM,MAAe,EACpCI,eAA2B,GAAXJ,EAAM,MAAe,EACrCgC,cAA0B,GAAXhC,EAAM,MAAe,EACpCiC,gBAA4B,EAAXjC,EAAM,GACvBkC,oBAAqBlC,EAAM,IAAM,EAAIA,EAAM,KAsG3C+kB,GAhGO,SAAcxsF,GACvB,IAqBIupE,EArBAn0E,EAAS,CACXC,QAAS2K,EAAK,GACdynE,MAAO,IAAIX,WAAW9mE,EAAKg9D,SAAS,EAAG,IACvC0K,QAAS,IAEP+D,EAAO,IAAIjG,SAASxlE,EAAKq4D,OAAQr4D,EAAKs4D,WAAYt4D,EAAK42D,YAE3D61B,EAAsC,EAAlBr3F,EAAOqyE,MAAM,GAEjCilB,EAA4C,EAAlBt3F,EAAOqyE,MAAM,GAEvCklB,EAA0C,EAAlBv3F,EAAOqyE,MAAM,GAErCmlB,EAAsC,EAAlBx3F,EAAOqyE,MAAM,GAEjColB,EAAuC,EAAlBz3F,EAAOqyE,MAAM,GAElCqlB,EAAuD,EAAlB13F,EAAOqyE,MAAM,GAElD+Z,EAAc/V,EAAK9F,UAAU,GACzB/T,EAAS,EAyCb,IAtCI66B,IAEFr3F,EAAOq1E,WAAagB,EAAKshB,SAASn7B,GAClCA,GAAU,GAKR86B,GAA2BlL,IAC7BjY,EAAS,CACP9B,MAAO8kB,GAAmBvsF,EAAKg9D,SAASpL,EAAQA,EAAS,KAE3DA,GAAU,EAEN+6B,IACFpjB,EAAO73D,SAAW+5D,EAAK9F,UAAU/T,GACjCA,GAAU,GAGRg7B,IACFrjB,EAAOnkE,KAAOqmE,EAAK9F,UAAU/T,GAC7BA,GAAU,GAGRk7B,IACqB,IAAnB13F,EAAOC,QACTk0E,EAAOH,sBAAwBqC,EAAKshB,SAASn7B,GAE7C2X,EAAOH,sBAAwBqC,EAAK9F,UAAU/T,GAGhDA,GAAU,GAGZx8D,EAAOsyE,QAAQ92E,KAAK24E,GACpBiY,KAGKA,KACLjY,EAAS,GAELojB,IACFpjB,EAAO73D,SAAW+5D,EAAK9F,UAAU/T,GACjCA,GAAU,GAGRg7B,IACFrjB,EAAOnkE,KAAOqmE,EAAK9F,UAAU/T,GAC7BA,GAAU,GAGRi7B,IACFtjB,EAAO9B,MAAQ8kB,GAAmBvsF,EAAKg9D,SAASpL,EAAQA,EAAS,IACjEA,GAAU,GAGRk7B,IACqB,IAAnB13F,EAAOC,QACTk0E,EAAOH,sBAAwBqC,EAAKshB,SAASn7B,GAE7C2X,EAAOH,sBAAwBqC,EAAK9F,UAAU/T,GAGhDA,GAAU,GAGZx8D,EAAOsyE,QAAQ92E,KAAK24E,GAGtB,OAAOn0E,GA4DL43F,GAvDO,SAAchtF,GACvB,IAaIxQ,EAbAi8E,EAAO,IAAIjG,SAASxlE,EAAKq4D,OAAQr4D,EAAKs4D,WAAYt4D,EAAK42D,YACvDxhE,EAAS,CACXC,QAAS2K,EAAK,GACdynE,MAAO,IAAIX,WAAW9mE,EAAKg9D,SAAS,EAAG,IACvCgjB,QAASvU,EAAK9F,UAAU,IAEtBsnB,EAA0C,EAAlB73F,EAAOqyE,MAAM,GACrCylB,EAAkD,EAAlB93F,EAAOqyE,MAAM,GAC7C0lB,EAAiD,EAAlB/3F,EAAOqyE,MAAM,GAC5C2lB,EAA6C,GAAlBh4F,EAAOqyE,MAAM,GACxC4lB,EAA8C,GAAlBj4F,EAAOqyE,MAAM,GACzC6lB,EAAoC,MAAlBl4F,EAAOqyE,MAAM,GAC/B8lB,EAAsC,OAAlBn4F,EAAOqyE,MAAM,GAuCrC,OArCAj4E,EAAI,EAEAy9F,IACFz9F,GAAK,EAGL4F,EAAOk2E,eAAiBG,EAAK9F,UAAU,IACvCn2E,GAAK,GAGH09F,IACF93F,EAAOo4F,uBAAyB/hB,EAAK9F,UAAUn2E,GAC/CA,GAAK,GAGH29F,IACF/3F,EAAOq4F,sBAAwBhiB,EAAK9F,UAAUn2E,GAC9CA,GAAK,GAGH49F,IACFh4F,EAAOs4F,kBAAoBjiB,EAAK9F,UAAUn2E,GAC1CA,GAAK,GAGH69F,IACFj4F,EAAOu4F,mBAAqBliB,EAAK9F,UAAUn2E,IAGzC89F,IACFl4F,EAAOk4F,iBAAkB,IAGtBL,GAAyBM,IAC5Bn4F,EAAOw4F,sBAAuB,GAGzBx4F,GAILy4F,GAAuC,qBAAfC,WAA6BA,WAA+B,qBAAXjgG,OAAyBA,OAA2B,qBAAXC,EAAyBA,EAAyB,qBAATC,KAAuBA,KAAO,GAazLggG,GAVkB,qBAAXlgG,OACHA,OAC6B,qBAAnBggG,GACVA,GACmB,qBAAT9/F,KACVA,KAEA,GAIJ01F,GAAkC3V,GAClCW,GAAgBmN,GAAcnN,cAY9Buf,GAAc,SAAqBp8B,EAAQ8V,GAG7C,IAFA,IAAIumB,EAAoBr8B,EAEfpiE,EAAI,EAAGA,EAAIk4E,EAAQj4E,OAAQD,IAAK,CACvC,IAAI+5E,EAAS7B,EAAQl4E,GAErB,GAAIy+F,EAAoB1kB,EAAOnkE,KAC7B,OAAOmkE,EAGT0kB,GAAqB1kB,EAAOnkE,KAG9B,OAAO,MA0IL8oF,GAAmB,SAA0BxjC,EAASyjC,GAExD,IAAIC,EAAQnC,GAAUvhC,EAAS,CAAC,OAAQ,SAEpC2jC,EAAQpC,GAAUvhC,EAAS,CAAC,SAC5B4jC,EAAc,GACdC,EAAgB,GAsCpB,OApCAF,EAAMv7F,SAAQ,SAAUmzE,EAAMj3E,GAC5B,IAAIw/F,EAAeJ,EAAMp/F,GACzBu/F,EAAc39F,KAAK,CACjBq1E,KAAMA,EACNrC,KAAM4qB,OAGVD,EAAcz7F,SAAQ,SAAU27F,GAC9B,IAUI/mB,EACAtyE,EAXA6wE,EAAOwoB,EAAKxoB,KACZrC,EAAO6qB,EAAK7qB,KACZ+C,EAAOslB,GAAUroB,EAAM,CAAC,SAExB8qB,EAAa1B,GAAUrmB,EAAK,IAC5BqZ,EAAU0O,EAAW1O,QACrBtZ,EAAOulB,GAAUroB,EAAM,CAAC,SAExBoF,EAAsBtC,EAAKj3E,OAAS,EAAI68F,GAAU5lB,EAAK,IAAIsC,oBAAsB,EACjF2lB,EAAQ1C,GAAUroB,EAAM,CAAC,SAIzBuqB,IAAiBnO,GAAW2O,EAAMl/F,OAAS,IAC7Ci4E,EAhFa,SAAsBinB,EAAO3lB,EAAqBrC,GACnE,IAAI6c,EAAaxa,EACbykB,EAAwB9mB,EAAK8mB,uBAAyB,EACtDC,EAAoB/mB,EAAK+mB,mBAAqB,EAC9C1N,EAAUrZ,EAAKqZ,QACf4O,EAAa,GAiCjB,OAhCAD,EAAM77F,SAAQ,SAAU8zE,GAItB,IACIc,EADW8kB,GAAU5lB,GACFc,QACvBA,EAAQ50E,SAAQ,SAAUy2E,QACAzuE,IAApByuE,EAAO73D,WACT63D,EAAO73D,SAAW+7E,QAGA3yF,IAAhByuE,EAAOnkE,OACTmkE,EAAOnkE,KAAOsoF,GAGhBnkB,EAAOyW,QAAUA,EACjBzW,EAAOoB,IAAM6Y,OAEwB1oF,IAAjCyuE,EAAOH,wBACTG,EAAOH,sBAAwB,GAGP,kBAAfoa,GACTja,EAAOmB,IAAM8Y,EAAauK,GAASp2B,OAAO4R,EAAOH,uBACjDoa,GAAcuK,GAASp2B,OAAO4R,EAAO73D,YAErC63D,EAAOmB,IAAM8Y,EAAaja,EAAOH,sBACjCoa,GAAcja,EAAO73D,aAGzBk9E,EAAaA,EAAW9/F,OAAO44E,MAE1BknB,EA0COC,CAAaF,EAAO3lB,EAAqB0lB,GACnDt5F,EAvJY,SAAqB05F,EAAWpnB,EAASsY,GACzD,IAKI+O,EACAv/F,EACAC,EACAu/F,EARAC,EAAU,IAAIzpB,SAASspB,EAAUz2B,OAAQy2B,EAAUx2B,WAAYw2B,EAAUl4B,YACzExhE,EAAS,CACX85F,KAAM,GACNC,QAAS,IAOX,IAAK3/F,EAAI,EAAGA,EAAI,EAAIs/F,EAAUr/F,OAAQD,GAAKC,EAIzC,GAHAA,EAASw/F,EAAQtpB,UAAUn2E,GAC3BA,GAAK,IAEDC,GAAU,GAId,OAAuB,GAAfq/F,EAAUt/F,IAChB,KAAK,EACH,IAAIwQ,EAAO8uF,EAAU9xB,SAASxtE,EAAI,EAAGA,EAAI,EAAIC,GACzC2/F,EAAiBpB,GAAYx+F,EAAGk4E,GASpC,GARAqnB,EAAS,CACP5jB,YAAa,WACb/lE,KAAM3V,EACNuQ,KAAMA,EACNovE,YAAaqU,GAAgCzjF,GAC7CggF,QAASA,GAGPoP,EACFL,EAAOrkB,IAAM0kB,EAAe1kB,IAC5BqkB,EAAOpkB,IAAMykB,EAAezkB,IAC5BqkB,EAAoBI,MACf,KAAIJ,EAKJ,CACL55F,EAAO85F,KAAKt+F,KAAK,CACfZ,MAAO,OACP6hB,QAAS,gDAAmDriB,EAAI,gBAAkBwwF,EAAU,sBAE9F,MAPA+O,EAAOrkB,IAAMskB,EAAkBtkB,IAC/BqkB,EAAOpkB,IAAMqkB,EAAkBrkB,IASjCv1E,EAAO+5F,QAAQv+F,KAAKm+F,GAK1B,OAAO35F,EAkGMi6F,CAAYppB,EAAMyB,EAASsY,GAE/BsO,EAAYtO,KACfsO,EAAYtO,GAAW,CACrBmP,QAAS,GACTD,KAAM,KAIVZ,EAAYtO,GAASmP,QAAUb,EAAYtO,GAASmP,QAAQrgG,OAAOsG,EAAO+5F,SAC1Eb,EAAYtO,GAASkP,KAAOZ,EAAYtO,GAASkP,KAAKpgG,OAAOsG,EAAO85F,UAGjEZ,GA4PLgB,GApNgB,WAClB,IACI1T,EAEA2T,EAEAvP,EAEAwP,EAEAC,EAEAC,EAXAC,GAAgB,EAiBpB/vF,KAAK+vF,cAAgB,WACnB,OAAOA,GAQT/vF,KAAKyiE,KAAO,SAAUlkE,GACpBy9E,EAAgB,IAAInN,GACpBkhB,GAAgB,EAChBD,IAAiBvxF,GAAUA,EAAQyxF,UAEnChU,EAAc/4E,GAAG,QAAQ,SAAUlH,GAEjCA,EAAM8W,UAAY9W,EAAMg3E,SAAW6c,EACnC7zF,EAAM+W,QAAU/W,EAAMo7E,OAASyY,EAC/BC,EAAev1E,SAAStpB,KAAK+K,GAC7B8zF,EAAe5F,eAAeluF,EAAMspE,SAAU,KAEhD2W,EAAc/4E,GAAG,OAAO,SAAU5S,GAChCw/F,EAAeP,KAAKt+F,KAAKX,OAU7B2P,KAAKiwF,UAAY,SAAUC,EAAeC,GACxC,QAAID,GAA0C,IAAzBA,EAAcrgG,QAAgBsgG,GAAsC,WAAxB7hG,EAAQ6hG,IAA+D,IAAnCt9F,OAAOC,KAAKq9F,GAAYtgG,UAItHuwF,IAAY8P,EAAc,IAAMN,IAAcO,EAAW/P,KAclEpgF,KAAKmd,MAAQ,SAAU2tC,EAASolC,EAAeC,GAC7C,IAAIC,EAEJ,IAAKpwF,KAAK+vF,gBACR,OAAO,KACF,IAAKG,IAAkBC,EAC5B,OAAO,KACF,GAAInwF,KAAKiwF,UAAUC,EAAeC,GAGvC/P,EAAU8P,EAAc,GACxBN,EAAYO,EAAW/P,QAGlB,GAAgB,OAAZA,IAAqBwP,EAE9B,OADAD,EAAa3+F,KAAK85D,GACX,KAIT,KAAO6kC,EAAa9/F,OAAS,GAAG,CAC9B,IAAIwgG,EAAgBV,EAAarpF,QACjCtG,KAAKmd,MAAMkzE,EAAeH,EAAeC,GAS3C,OANAC,EAlHwB,SAA+BtlC,EAASs1B,EAASwP,GAG3E,GAAgB,OAAZxP,EACF,OAAO,KAIT,IAAIkQ,EADUhC,GAAiBxjC,EAASs1B,GACZA,IAAY,GACxC,MAAO,CACLmP,QAASe,EAAUf,QACnBD,KAAMgB,EAAUhB,KAChBM,UAAWA,GAsGEW,CAAsBzlC,EAASs1B,EAASwP,GAEjDQ,GAAcA,EAAWd,OAC3BO,EAAeP,KAAOO,EAAeP,KAAKpgG,OAAOkhG,EAAWd,OAG3C,OAAfc,GAAwBA,EAAWb,SAYvCvvF,KAAKwwF,SAASJ,EAAWb,SAEzBvvF,KAAK8vE,cACE+f,GAdDA,EAAeP,KAAKz/F,OACf,CACLy/F,KAAMO,EAAeP,KACrBh1E,SAAU,GACV2vE,eAAgB,IAIb,MAgBXjqF,KAAKwwF,SAAW,SAAUC,GACxB,IAAKzwF,KAAK+vF,kBAAoBU,GAAwB,IAAhBA,EAAK5gG,OACzC,OAAO,KAGT4gG,EAAKv9F,SAAQ,SAAUw9F,GACrB1U,EAAchrF,KAAK0/F,OASvB1wF,KAAK8vE,YAAc,WACjB,IAAK9vE,KAAK+vF,gBACR,OAAO,KAGJD,EAGH9T,EAAcnZ,eAFdmZ,EAAc1+D,SAUlBtd,KAAK2wF,oBAAsB,WACzBd,EAAev1E,SAAW,GAC1Bu1E,EAAe5F,eAAiB,GAChC4F,EAAeP,KAAO,IAQxBtvF,KAAK4wF,mBAAqB,WACxB,IAAK5wF,KAAK+vF,gBACR,OAAO,KAGT/T,EAAc74D,SAShBnjB,KAAK6wF,iBAAmB,WACtB7wF,KAAK2wF,sBACL3wF,KAAK4wF,sBAOP5wF,KAAKmjB,MAAQ,WACXwsE,EAAe,GACfvP,EAAU,KACVwP,EAAY,KAEPC,EAQH7vF,KAAK2wF,sBAPLd,EAAiB,CACfv1E,SAAU,GAEV2vE,eAAgB,GAChBqF,KAAM,IAMVtvF,KAAK4wF,sBAGP5wF,KAAKmjB,SAIH2tE,GAAa5E,GACb6E,GAttBgB,SAAqBt9F,GACvC,OAAQ,KAAOA,EAAMb,SAAS,KAAKtD,OAAO,IAstBxCm2E,GAAYD,EAAQC,UAkExB5yD,GAAY,SAAmB+8E,EAAWzP,GACxC,IAII6Q,EAFI3E,GAAUlM,EAAU,CAAC,OAAQ,SAEdz0E,QAAO,SAAUC,EAAKq4D,GAC3C,IAQIitB,EASAj/D,EAjBA+0C,EAAOslB,GAAUroB,EAAM,CAAC,SAAS,GAEjCv6D,EAAKqnF,GAAW/pB,EAAK,IAAM,GAAKA,EAAK,IAAM,GAAKA,EAAK,IAAM,EAAIA,EAAK,IAEpEmqB,EAAQtB,EAAUnmF,IAAO,IAEzBq9D,EAAOulB,GAAUroB,EAAM,CAAC,SAAS,GACjC2B,EAAK,IAAIC,SAASkB,EAAKrO,OAAQqO,EAAKpO,WAAYoO,EAAK9P,YA0BzD,MAdwB,kBARtBi6B,EADc,IAAZnqB,EAAK,GACIrB,GAAUqB,EAAK1J,SAAS,EAAG,KAE3BuI,EAAGI,UAAU,IAOxB/zC,EAAUi/D,EAAW9C,GAASp2B,OAAOm5B,GACR,kBAAbD,GAA0BhjF,MAAMgjF,KAChDj/D,EAAUi/D,EAAWC,GAGnBl/D,EAAUx1B,OAAOspE,mBACnB9zC,EAAUx1B,OAAOw1B,IAGfA,EAAUrmB,IACZA,EAAMqmB,GAGDrmB,IACN2mB,KACH,MAA6B,kBAAf0+D,GAA2BG,SAASH,GAAcA,EAAa,GA8G/EpF,GAA8B,SAAqCjoB,GAEjE,IACIv0E,EAAoB,IADVu0E,EAAK,GACS,GAAK,GACjC,OAAOmtB,GAAWntB,EAAKv0E,IAAU,GAAKu0E,EAAKv0E,EAAQ,IAAM,GAAKu0E,EAAKv0E,EAAQ,IAAM,EAAIu0E,EAAKv0E,EAAQ,KAQpGu8F,GAAY,SAAmBlpB,GAC7B,IAAI2uB,EAAQ/E,GAAU5pB,EAAM,CAAC,OAAQ,SACjCjrD,EAAS,GAuFb,OAtFA45E,EAAMl+F,SAAQ,SAAUswE,GACtB,IAEIqI,EAAMwlB,EAFN3+E,EAAQ,GACR+wD,EAAO4oB,GAAU7oB,EAAM,CAAC,SAAS,GAGjCC,IAEF4tB,GADAxlB,EAAO,IAAIjG,SAASnC,EAAKhL,OAAQgL,EAAK/K,WAAY+K,EAAKzM,aACpCs6B,SAAS,GAC5B5+E,EAAMjJ,GAAqB,IAAhB4nF,EAAoBxlB,EAAK9F,UAAU,IAAM8F,EAAK9F,UAAU,KAGrE,IAAInC,EAAOyoB,GAAU7oB,EAAM,CAAC,OAAQ,SAAS,GAE7C,GAAII,EAAM,CACR,IAAI50E,EAAOm9F,GAAYvoB,EAAKxG,SAAS,EAAG,KAGtC1qD,EAAM1jB,KADK,SAATA,EACW,QACK,SAATA,EACI,QAEAA,EAKjB,IAAI+0E,EAAOsoB,GAAU7oB,EAAM,CAAC,OAAQ,OAAQ,OAAQ,SAAS,GAE7D,GAAIO,EAAM,CACR,IAAIwtB,EAAqBxtB,EAAK3G,SAAS,GAEvC1qD,EAAM+tE,MAAQ0L,GAAYoF,EAAmBn0B,SAAS,EAAG,IACzD,IACIo0B,EADAC,EAAWpF,GAAUkF,EAAoB,CAAC7+E,EAAM+tE,QAAQ,GAGxDgR,IAEE,kBAAkBtgG,KAAKuhB,EAAM+tE,QAG/B+Q,EAAcC,EAASr0B,SAAS,IAGR,SAFN+uB,GAAYqF,EAAYp0B,SAAS,EAAG,KAEpBo0B,EAAY3hG,OAAS,IACrD6iB,EAAM+tE,OAAS,IAGf/tE,EAAM+tE,OAASsQ,GAAYS,EAAY,IAEvC9+E,EAAM+tE,OAASsQ,GAAYS,EAAY,KAEvC9+E,EAAM+tE,OAASsQ,GAAYS,EAAY,MAIvC9+E,EAAM+tE,MAAQ,eAEP,cAActvF,KAAKuhB,EAAM+tE,QAElC+Q,EAAcC,EAASr0B,SAAS,IAGR,SAFN+uB,GAAYqF,EAAYp0B,SAAS,EAAG,KAEpBo0B,EAAY3hG,OAAS,IAA0B,IAApB2hG,EAAY,KACvE9+E,EAAM+tE,OAAS,IAAMsQ,GAAYS,EAAY,KAE7C9+E,EAAM+tE,OAAS,IAAMsQ,GAAYS,EAAY,MAAQ,EAAI,IAAMnpF,QAAQ,KAAM,KAI7EqK,EAAM+tE,MAAQ,aAIhB/tE,EAAM+tE,MAAQ/tE,EAAM+tE,MAAMrkF,eAKhC,IAAIunE,EAAO0oB,GAAU7oB,EAAM,CAAC,OAAQ,SAAS,GAEzCG,IACFjxD,EAAMk9E,UAAYhE,GAA4BjoB,IAGhDnsD,EAAOxmB,KAAK0hB,MAEP8E,GAGT,IAAIk6E,GAKS7+E,GALT6+E,GAQM/F,GAINgG,GAAW,SAAkB1hB,GAC/B,IAAIyP,EAAkB,GAAZzP,EAAO,GAGjB,OAFAyP,IAAQ,EACRA,GAAOzP,EAAO,IAIZ2hB,GAAiC,SAAwC3hB,GAC3E,SAAsB,GAAZA,EAAO,KAGf4hB,GAAqB,SAA4B5hB,GACnD,IAAIje,EAAS,EAUb,OAJiB,GAAZie,EAAO,MAAe,EAAI,IAC7Bje,GAAUie,EAAO,GAAK,GAGjBje,GAmJL8/B,GAAmB,SAA0B9iG,GAC/C,OAAQA,GACN,KAAK,EACH,MAAO,4CAET,KAAK,EACH,MAAO,WAET,KAAK,EACH,MAAO,yBAET,KAAK,EACH,MAAO,yBAET,KAAK,EACH,MAAO,6BAET,QACE,OAAO,OA2FT+iG,GAAU,CACZnM,UA9Pc,SAAmB3V,EAAQqP,GACzC,IAAII,EAAMiS,GAAS1hB,GAEnB,OAAY,IAARyP,EACK,MACEA,IAAQJ,EACV,MACEA,EACF,MAGF,MAoPPT,SAjPa,SAAkB5O,GAC/B,IAAI+hB,EAAOJ,GAA+B3hB,GACtCje,EAAS,EAAI6/B,GAAmB5hB,GAMpC,OAJI+hB,IACFhgC,GAAUie,EAAOje,GAAU,IAGC,GAAtBie,EAAOje,EAAS,MAAe,EAAIie,EAAOje,EAAS,KA0O3D8sB,SAvOa,SAAkB7O,GAC/B,IAAI+O,EAAkB,GAClBgT,EAAOJ,GAA+B3hB,GACtCgiB,EAAgB,EAAIJ,GAAmB5hB,GAW3C,GATI+hB,IACFC,GAAiBhiB,EAAOgiB,GAAiB,GAQT,EAA5BhiB,EAAOgiB,EAAgB,GAA7B,CAIA,IAAmBzS,EAGnBA,EAAW,IADkC,GAA5BvP,EAAOgiB,EAAgB,KAAc,EAAIhiB,EAAOgiB,EAAgB,IAClD,EAO/B,IAFA,IAAIjgC,EAAS,KAFqC,GAA7Bie,EAAOgiB,EAAgB,MAAe,EAAIhiB,EAAOgiB,EAAgB,KAI/EjgC,EAASwtB,GAAU,CACxB,IAAI5vF,EAAIqiG,EAAgBjgC,EAExBgtB,GAAiC,GAAhB/O,EAAOrgF,EAAI,KAAc,EAAIqgF,EAAOrgF,EAAI,IAAMqgF,EAAOrgF,GAGtEoiE,GAA0D,IAA9B,GAAhBie,EAAOrgF,EAAI,KAAc,EAAIqgF,EAAOrgF,EAAI,IAGtD,OAAOovF,IAmMP4S,+BAAgCA,GAChCM,aAjMiB,SAAsBjiB,EAAQ+O,GAI/C,OAFWA,EADD2S,GAAS1hB,KAIjB,KAAKgM,GAAYC,iBACf,MAAO,QAET,KAAKD,GAAYE,iBACf,MAAO,QAET,KAAKF,GAAYG,qBACf,MAAO,iBAET,QACE,OAAO,OAmLX+V,aA/KiB,SAAsBliB,GAGvC,IAFW2hB,GAA+B3hB,GAGxC,OAAO,KAGT,IAAIje,EAAS,EAAI6/B,GAAmB5hB,GAEpC,GAAIje,GAAUie,EAAOjZ,WAWnB,OAAO,KAGT,IACIspB,EADAD,EAAM,KAkCV,OApBkB,KATlBC,EAAcrQ,EAAOje,EAAS,OAU5BquB,EAAM,IAIFvV,KAA4B,GAArBmF,EAAOje,EAAS,KAAc,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,GAA2B,IAAtBie,EAAOje,EAAS,OAAgB,EAC7LquB,EAAIvV,KAAO,EAEXuV,EAAIvV,MAA8B,EAAtBmF,EAAOje,EAAS,OAAgB,EAE5CquB,EAAItV,IAAMsV,EAAIvV,IAEI,GAAdwV,IACFD,EAAItV,KAA6B,GAAtBkF,EAAOje,EAAS,MAAe,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,IAA4B,IAAtBie,EAAOje,EAAS,MAAe,GAA2B,IAAtBie,EAAOje,EAAS,OAAgB,EAC9LquB,EAAItV,KAAO,EAEXsV,EAAItV,MAA8B,EAAtBkF,EAAOje,EAAS,OAAgB,IAIzCquB,GAuHP+R,4BA9FgC,SAAqCniB,GAQrE,IAPA,IAAIje,EAAS,EAAI6/B,GAAmB5hB,GAChCoiB,EAAcpiB,EAAO7S,SAASpL,GAC9BsgC,EAAS,EACTC,EAAiB,EACjBC,GAAgB,EAGbD,EAAiBF,EAAYr7B,WAAa,EAAGu7B,IAClD,GAAwC,IAApCF,EAAYE,EAAiB,GAAU,CAEzCD,EAASC,EAAiB,EAC1B,MAIJ,KAAOD,EAASD,EAAYr7B,YAG1B,OAAQq7B,EAAYC,IAClB,KAAK,EAEH,GAAgC,IAA5BD,EAAYC,EAAS,GAAU,CACjCA,GAAU,EACV,MACK,GAAgC,IAA5BD,EAAYC,EAAS,GAAU,CACxCA,IACA,MAGEC,EAAiB,IAAMD,EAAS,GAGlB,8CAFNR,GAAmD,GAAlCO,EAAYE,EAAiB,MAGtDC,GAAgB,GAKpB,GACEF,UAC+B,IAAxBD,EAAYC,IAAiBA,EAASD,EAAYxiG,QAE3D0iG,EAAiBD,EAAS,EAC1BA,GAAU,EACV,MAEF,KAAK,EAEH,GAAgC,IAA5BD,EAAYC,EAAS,IAAwC,IAA5BD,EAAYC,EAAS,GAAU,CAClEA,GAAU,EACV,MAKc,8CAFNR,GAAmD,GAAlCO,EAAYE,EAAiB,MAGtDC,GAAgB,GAGlBD,EAAiBD,EAAS,EAC1BA,GAAU,EACV,MAEF,QAGEA,GAAU,EAiBhB,OAZAD,EAAcA,EAAYj1B,SAASm1B,GACnCD,GAAUC,EACVA,EAAiB,EAEbF,GAAeA,EAAYr7B,WAAa,GAG1B,8CAFN86B,GAAmD,GAAlCO,EAAYE,EAAiB,MAGtDC,GAAgB,GAIbA,IAYLC,GAAiBzV,GACjB0V,GAAQ,GACZA,GAAMC,GAAKZ,GACXW,GAAM3oE,IAAMivC,GACZ,IAAI45B,GAAmBlmB,GACnBmU,GAAqB,IAEzBgS,GAAY,GAmDRC,GAAiB,SAAwBt6B,EAAO+mB,EAAK/pF,GAUvD,IATA,IAEIy6E,EAEA8iB,EACAf,EACAgB,EANA3lC,EAAa,EACbC,EAAWuzB,GAMXoS,GAAU,EAEP3lC,GAAYkL,EAAMxB,YAEvB,GAAIwB,EAAMnL,KAAgBwlC,IAAcr6B,EAAMlL,KAAculC,IAAavlC,IAAakL,EAAMxB,WAmC5F3J,IACAC,QApCA,CAKE,GAHA2iB,EAASzX,EAAM4E,SAAS/P,EAAYC,GAI7B,QAHAolC,GAAMC,GAAG/M,UAAU3V,EAAQsP,EAAIG,KAIlCqT,EAAUL,GAAMC,GAAGT,aAAajiB,EAAQsP,EAAI2T,OAC5ClB,EAAOU,GAAMC,GAAGf,+BAA+B3hB,GAE/B,UAAZ8iB,GAAuBf,IACzBgB,EAASN,GAAMC,GAAGR,aAAaliB,MAG7B+iB,EAAOhkG,KAAO,QACdwG,EAAO2qB,MAAMnvB,KAAKgiG,GAClBC,GAAU,GAOlB,GAAIA,EACF,MAGF5lC,GAAcwzB,GACdvzB,GAAYuzB,GAgBhB,IAHAxzB,GADAC,EAAWkL,EAAMxB,YACO6pB,GACxBoS,GAAU,EAEH5lC,GAAc,GAEnB,GAAImL,EAAMnL,KAAgBwlC,IAAcr6B,EAAMlL,KAAculC,IAAavlC,IAAakL,EAAMxB,WAmC5F3J,IACAC,QApCA,CAKE,GAHA2iB,EAASzX,EAAM4E,SAAS/P,EAAYC,GAI7B,QAHAolC,GAAMC,GAAG/M,UAAU3V,EAAQsP,EAAIG,KAIlCqT,EAAUL,GAAMC,GAAGT,aAAajiB,EAAQsP,EAAI2T,OAC5ClB,EAAOU,GAAMC,GAAGf,+BAA+B3hB,GAE/B,UAAZ8iB,GAAuBf,IACzBgB,EAASN,GAAMC,GAAGR,aAAaliB,MAG7B+iB,EAAOhkG,KAAO,QACdwG,EAAO2qB,MAAMnvB,KAAKgiG,GAClBC,GAAU,GAOlB,GAAIA,EACF,MAGF5lC,GAAcwzB,GACdvzB,GAAYuzB,KAkBdsS,GAAiB,SAAwB36B,EAAO+mB,EAAK/pF,GAiBvD,IAhBA,IAEIy6E,EAEA8iB,EACAf,EACAgB,EACApoB,EACAh7E,EACAywF,EATAhzB,EAAa,EACbC,EAAWuzB,GASXoS,GAAU,EACV7nB,EAAe,CACjBhrE,KAAM,GACNoF,KAAM,GAGD8nD,EAAWkL,EAAMxB,YAEtB,GAAIwB,EAAMnL,KAAgBwlC,IAAar6B,EAAMlL,KAAculC,GAuE3DxlC,IACAC,QAxEA,CAKE,GAHA2iB,EAASzX,EAAM4E,SAAS/P,EAAYC,GAI7B,QAHAolC,GAAMC,GAAG/M,UAAU3V,EAAQsP,EAAIG,KAOlC,GAHAqT,EAAUL,GAAMC,GAAGT,aAAajiB,EAAQsP,EAAI2T,OAC5ClB,EAAOU,GAAMC,GAAGf,+BAA+B3hB,GAE/B,UAAZ8iB,IACEf,IAASiB,IACXD,EAASN,GAAMC,GAAGR,aAAaliB,MAG7B+iB,EAAOhkG,KAAO,QACdwG,EAAO+qB,MAAMvvB,KAAKgiG,GAClBC,GAAU,IAITz9F,EAAO49F,eAAe,CACzB,GAAIpB,GACwB,IAAtB5mB,EAAa5lE,KAAY,CAI3B,IAHAolE,EAAQ,IAAI1D,WAAWkE,EAAa5lE,MACpC5V,EAAI,EAEGw7E,EAAahrE,KAAKvQ,QACvBwwF,EAAMjV,EAAahrE,KAAKkG,QACxBskE,EAAMtqE,IAAI+/E,EAAKzwF,GACfA,GAAKywF,EAAIrpB,WAGX,GAAI07B,GAAMC,GAAGP,4BAA4BxnB,GAAQ,CAC/C,IAAIwoB,EAAgBV,GAAMC,GAAGR,aAAavnB,GAItCwoB,GACF59F,EAAO49F,cAAgBA,EACvB59F,EAAO49F,cAAcpkG,KAAO,SAG5BiC,QAAQU,KAAK,+RAIjBy5E,EAAa5lE,KAAO,EAIxB4lE,EAAahrE,KAAKpP,KAAKi/E,GACvB7E,EAAa5lE,MAAQyqE,EAAOjZ,WAOpC,GAAIi8B,GAAWz9F,EAAO49F,cACpB,MAGF/lC,GAAcwzB,GACdvzB,GAAYuzB,GAgBhB,IAHAxzB,GADAC,EAAWkL,EAAMxB,YACO6pB,GACxBoS,GAAU,EAEH5lC,GAAc,GAEnB,GAAImL,EAAMnL,KAAgBwlC,IAAar6B,EAAMlL,KAAculC,GAmC3DxlC,IACAC,QApCA,CAKE,GAHA2iB,EAASzX,EAAM4E,SAAS/P,EAAYC,GAI7B,QAHAolC,GAAMC,GAAG/M,UAAU3V,EAAQsP,EAAIG,KAIlCqT,EAAUL,GAAMC,GAAGT,aAAajiB,EAAQsP,EAAI2T,OAC5ClB,EAAOU,GAAMC,GAAGf,+BAA+B3hB,GAE/B,UAAZ8iB,GAAuBf,IACzBgB,EAASN,GAAMC,GAAGR,aAAaliB,MAG7B+iB,EAAOhkG,KAAO,QACdwG,EAAO+qB,MAAMvvB,KAAKgiG,GAClBC,GAAU,GAOlB,GAAIA,EACF,MAGF5lC,GAAcwzB,GACdvzB,GAAYuzB,KAiKdwS,GAAa,SAAoB76B,GACnC,IAAI+mB,EAAM,CACRG,IAAK,KACLwT,MAAO,MAEL19F,EAAS,GAGb,IAAK,IAAIkqF,KA/bK,SAAmBlnB,EAAO+mB,GAMxC,IALA,IAEItP,EAFA5iB,EAAa,EACbC,EAAWuzB,GAIRvzB,EAAWkL,EAAMxB,YAEtB,GAAIwB,EAAMnL,KAAgBwlC,IAAar6B,EAAMlL,KAAculC,GA2B3DxlC,IACAC,QA5BA,CAKE,OAHA2iB,EAASzX,EAAM4E,SAAS/P,EAAYC,GAC7BolC,GAAMC,GAAG/M,UAAU3V,EAAQsP,EAAIG,MAGpC,IAAK,MACHH,EAAIG,IAAMgT,GAAMC,GAAG9T,SAAS5O,GAC5B,MAEF,IAAK,MACH,IAAIijB,EAAQR,GAAMC,GAAG7T,SAAS7O,GAC9BsP,EAAI2T,MAAQ3T,EAAI2T,OAAS,GACzBrgG,OAAOC,KAAKogG,GAAOhgG,SAAQ,SAAUC,GACnCosF,EAAI2T,MAAM//F,GAAO+/F,EAAM//F,MAK7Bk6D,GAAcwzB,GACdvzB,GAAYuzB,IAiahByS,CAAU96B,EAAO+mB,GAEDA,EAAI2T,MAAO,CACzB,GAAI3T,EAAI2T,MAAMphG,eAAe4tF,GAG3B,OAFWH,EAAI2T,MAAMxT,IAGnB,KAAKzD,GAAYC,iBACf1mF,EAAO+qB,MAAQ,GACf4yE,GAAe36B,EAAO+mB,EAAK/pF,GAEC,IAAxBA,EAAO+qB,MAAM1wB,eACR2F,EAAO+qB,MAGhB,MAEF,KAAK07D,GAAYE,iBACf3mF,EAAO2qB,MAAQ,GACf2yE,GAAet6B,EAAO+mB,EAAK/pF,GAEC,IAAxBA,EAAO2qB,MAAMtwB,eACR2F,EAAO2qB,OAQxB,OAAO3qB,GA8BL+9F,GAlBU,SAAiB/6B,EAAOg7B,GACpC,IACIh+F,EAQJ,OALEA,EAJck9F,GAAM3oE,IAAIy7D,gBAAgBhtB,GAlJ1B,SAAqBA,GASrC,IARA,IAMIyX,EANAgjB,GAAU,EACVQ,EAAa,EACblnB,EAAa,KACbD,EAAY,KACZ2R,EAAY,EACZ3I,EAAY,EAGT9c,EAAM3oE,OAASylF,GAAa,GAAG,CAGpC,OAFWod,GAAM3oE,IAAI67D,UAAUptB,EAAO8c,IAGpC,IAAK,iBAGH,GAAI9c,EAAM3oE,OAASylF,EAAY,GAAI,CACjC2d,GAAU,EACV,MAMF,IAHAhV,EAAYyU,GAAM3oE,IAAIq7D,gBAAgB5sB,EAAO8c,IAG7B9c,EAAM3oE,OAAQ,CAC5BojG,GAAU,EACV,MAGgB,OAAd3mB,IACF2D,EAASzX,EAAM4E,SAASkY,EAAWA,EAAY2I,GAC/C3R,EAAYomB,GAAM3oE,IAAI+7D,kBAAkB7V,IAG1CqF,GAAa2I,EACb,MAEF,IAAK,QAGH,GAAIzlB,EAAM3oE,OAASylF,EAAY,EAAG,CAChC2d,GAAU,EACV,MAMF,IAHAhV,EAAYyU,GAAM3oE,IAAI07D,cAAcjtB,EAAO8c,IAG3B9c,EAAM3oE,OAAQ,CAC5BojG,GAAU,EACV,MAGiB,OAAf1mB,IACF0D,EAASzX,EAAM4E,SAASkY,EAAWA,EAAY2I,GAC/C1R,EAAammB,GAAM3oE,IAAI87D,gBAAgB5V,IAGzCwjB,IACAne,GAAa2I,EACb,MAEF,QACE3I,IAIJ,GAAI2d,EACF,OAAO,KAIX,GAAmB,OAAf1mB,GAAqC,OAAdD,EACzB,OAAO,KAGT,IAAIonB,EAAiBd,GAAmBrmB,EAYxC,MAXa,CACXpsD,MAAO,CAAC,CACNnxB,KAAM,QACN+7E,IAAKuB,EACLxB,IAAKwB,GACJ,CACDt9E,KAAM,QACN+7E,IAAKuB,EAAyB,KAAbmnB,EAAoBC,EACrC5oB,IAAKwB,EAAyB,KAAbmnB,EAAoBC,KAiE9BC,CAAYn7B,GAEZ66B,GAAW76B,GAGjBhjE,IAAWA,EAAO2qB,OAAU3qB,EAAO+qB,QA1MnB,SAA0BqzE,EAAaJ,GAC5D,GAAII,EAAYzzE,OAASyzE,EAAYzzE,MAAMtwB,OAAQ,CACjD,IAAIgkG,EAAqBL,GAES,qBAAvBK,GAAsC5lF,MAAM4lF,MACrDA,EAAqBD,EAAYzzE,MAAM,GAAG4qD,KAG5C6oB,EAAYzzE,MAAMjtB,SAAQ,SAAUhC,GAClCA,EAAK65E,IAAM0nB,GAAevhG,EAAK65E,IAAK8oB,GACpC3iG,EAAK45E,IAAM2nB,GAAevhG,EAAK45E,IAAK+oB,GAEpC3iG,EAAK4iG,QAAU5iG,EAAK65E,IAAM6nB,GAC1B1hG,EAAK6iG,QAAU7iG,EAAK45E,IAAM8nB,MAI9B,GAAIgB,EAAYrzE,OAASqzE,EAAYrzE,MAAM1wB,OAAQ,CACjD,IAAImkG,EAAqBR,EAczB,IAZkC,qBAAvBQ,GAAsC/lF,MAAM+lF,MACrDA,EAAqBJ,EAAYrzE,MAAM,GAAGwqD,KAG5C6oB,EAAYrzE,MAAMrtB,SAAQ,SAAUhC,GAClCA,EAAK65E,IAAM0nB,GAAevhG,EAAK65E,IAAKipB,GACpC9iG,EAAK45E,IAAM2nB,GAAevhG,EAAK45E,IAAKkpB,GAEpC9iG,EAAK4iG,QAAU5iG,EAAK65E,IAAM6nB,GAC1B1hG,EAAK6iG,QAAU7iG,EAAK45E,IAAM8nB,MAGxBgB,EAAYR,cAAe,CAC7B,IAAIxoB,EAAQgpB,EAAYR,cACxBxoB,EAAMG,IAAM0nB,GAAe7nB,EAAMG,IAAKipB,GACtCppB,EAAME,IAAM2nB,GAAe7nB,EAAME,IAAKkpB,GAEtCppB,EAAMkpB,QAAUlpB,EAAMG,IAAM6nB,GAC5BhoB,EAAMmpB,QAAUnpB,EAAME,IAAM8nB,KAwKhCqB,CAAiBz+F,EAAQg+F,GAClBh+F,GAJE,MAuJP0+F,GAA+B,WACjC,SAASA,EAAgB/lG,EAAMoQ,GAC7ByB,KAAKzB,QAAUA,GAAW,GAC1ByB,KAAK7R,KAAOA,EACZ6R,KAAKyiE,OAOP,IAAIpiE,EAAS6zF,EAAgBvlG,UAiL7B,OA/KA0R,EAAOoiE,KAAO,WACRziE,KAAK4mF,YACP5mF,KAAK4mF,WAAWt8E,UAGlBtK,KAAK4mF,WAAa,IAAIA,GAAWiF,WAAW7rF,KAAKzB,SApJ1B,SAA8BpQ,EAAMy4F,GAC7DA,EAAW3jF,GAAG,QAAQ,SAAU6nD,GAK9B,IAAIqpC,EAAYrpC,EAAQ8N,YACxB9N,EAAQ8N,YAAc,CACpBx4D,KAAM+zF,EAAU17B,OAChBC,WAAYy7B,EAAUz7B,WACtB1B,WAAYm9B,EAAUn9B,YAExB,IAAIo9B,EAAatpC,EAAQ1qD,KACzB0qD,EAAQ1qD,KAAOg0F,EAAW37B,OAC1BtqE,EAAKkmG,YAAY,CACfC,OAAQ,OACRxpC,QAASA,EACT4N,WAAY07B,EAAW17B,WACvB1B,WAAYo9B,EAAWp9B,YACtB,CAAClM,EAAQ1qD,UAEdwmF,EAAW3jF,GAAG,QAAQ,SAAU7C,GAC9BjS,EAAKkmG,YAAY,CACfC,OAAQ,YAGZ1N,EAAW3jF,GAAG,WAAW,SAAUsxF,GACjCpmG,EAAKkmG,YAAY,CACfC,OAAQ,UACRC,QAASA,OAGb3N,EAAW3jF,GAAG,0BAA0B,SAAUuxF,GAChD,IAAIC,EAAyB,CAC3BhjF,MAAO,CACLskE,OAAQrJ,GAAuB8nB,EAAW/iF,MAAMs5D,KAChD2pB,aAAchoB,GAAuB8nB,EAAW/iF,MAAMq5D,MAExDp5D,IAAK,CACHqkE,OAAQrJ,GAAuB8nB,EAAW9iF,IAAIq5D,KAC9C2pB,aAAchoB,GAAuB8nB,EAAW9iF,IAAIo5D,MAEtD1B,oBAAqBsD,GAAuB8nB,EAAWprB,sBAGrDorB,EAAWtN,2BACbuN,EAAuBvN,yBAA2Bxa,GAAuB8nB,EAAWtN,2BAGtF/4F,EAAKkmG,YAAY,CACfC,OAAQ,yBACRG,uBAAwBA,OAG5B7N,EAAW3jF,GAAG,0BAA0B,SAAUuxF,GAEhD,IAAIG,EAAyB,CAC3BljF,MAAO,CACLskE,OAAQrJ,GAAuB8nB,EAAW/iF,MAAMs5D,KAChD2pB,aAAchoB,GAAuB8nB,EAAW/iF,MAAMq5D,MAExDp5D,IAAK,CACHqkE,OAAQrJ,GAAuB8nB,EAAW9iF,IAAIq5D,KAC9C2pB,aAAchoB,GAAuB8nB,EAAW9iF,IAAIo5D,MAEtD1B,oBAAqBsD,GAAuB8nB,EAAWprB,sBAGrDorB,EAAWtN,2BACbyN,EAAuBzN,yBAA2Bxa,GAAuB8nB,EAAWtN,2BAGtF/4F,EAAKkmG,YAAY,CACfC,OAAQ,yBACRK,uBAAwBA,OAG5B/N,EAAW3jF,GAAG,YAAY,SAAUsoF,GAClCp9F,EAAKkmG,YAAY,CACfC,OAAQ,WACR/I,SAAUA,OAGd3E,EAAW3jF,GAAG,WAAW,SAAU8mF,GACjC57F,EAAKkmG,YAAY,CACfC,OAAQ,UACRvK,QAASA,OAGbnD,EAAW3jF,GAAG,aAAa,SAAU2xF,GACnCzmG,EAAKkmG,YAAY,CACfC,OAAQ,YACRM,UAAWA,OAGfhO,EAAW3jF,GAAG,mBAAmB,SAAU4xF,GAEzC1mG,EAAKkmG,YAAY,CACfC,OAAQ,kBACRO,gBAAiB,CACfpjF,MAAOi7D,GAAuBmoB,EAAgBpjF,OAC9CC,IAAKg7D,GAAuBmoB,EAAgBnjF,WAIlDk1E,EAAW3jF,GAAG,mBAAmB,SAAUs2D,GACzCprE,EAAKkmG,YAAY,CACfC,OAAQ,kBACR/6B,gBAAiB,CACf9nD,MAAOi7D,GAAuBnT,EAAgB9nD,OAC9CC,IAAKg7D,GAAuBnT,EAAgB7nD,WAIlDk1E,EAAW3jF,GAAG,OAAO,SAAU5S,GAC7BlC,EAAKkmG,YAAY,CACfC,OAAQ,MACRjkG,IAAKA,OAgCPykG,CAAqB90F,KAAK7R,KAAM6R,KAAK4mF,aAGvCvmF,EAAO00F,gBAAkB,SAAyB30F,GAC3CJ,KAAK0vF,gBACR1vF,KAAK0vF,cAAgB,IAAIA,GACzB1vF,KAAK0vF,cAAcjtB,QAGrB,IAAI3X,EAAU,IAAIoc,WAAW9mE,EAAKA,KAAMA,EAAKs4D,WAAYt4D,EAAK42D,YAC1Dg8B,EAAShzF,KAAK0vF,cAAcvyE,MAAM2tC,EAAS1qD,EAAK40F,SAAU50F,EAAK+vF,YACnEnwF,KAAK7R,KAAKkmG,YAAY,CACpBC,OAAQ,cACRh6E,SAAU04E,GAAUA,EAAO14E,UAAY,GACvCg1E,KAAM0D,GAAUA,EAAO1D,MAAQ,GAC/BlvF,KAAM0qD,EAAQ2N,QACb,CAAC3N,EAAQ2N,UAGdp4D,EAAO40F,kBAAoB,SAA2B7kF,GACpD,IAAI+/E,EAAa//E,EAAK+/E,WAClB/vF,EAAOgQ,EAAKhQ,KACZyS,EAAY6+E,GAAkBvB,EAAY/vF,GAC9CJ,KAAK7R,KAAKkmG,YAAY,CACpBC,OAAQ,oBACRzhF,UAAWA,EACXzS,KAAMA,GACL,CAACA,EAAKq4D,UAGXp4D,EAAO60F,eAAiB,SAAwB5zC,GAC9C,IAAIlhD,EAAOkhD,EAAMlhD,KACboX,EAASk6E,GAAetxF,GAC5BJ,KAAK7R,KAAKkmG,YAAY,CACpBC,OAAQ,iBACR98E,OAAQA,EACRpX,KAAMA,GACL,CAACA,EAAKq4D,UAiBXp4D,EAAO80F,QAAU,SAAiB3nC,GAChC,IAAIptD,EAAOotD,EAAMptD,KACbg1F,EAAgB5nC,EAAM4nC,cACtBC,EAAuC,kBAAlBD,GAA+BnnF,MAAMmnF,QAA0D,EAAzCA,EAAgB1oB,GAC3F4oB,EAAW/B,GAAoBnzF,EAAMi1F,GACrC7/F,EAAS,KAET8/F,KACF9/F,EAAS,CAEPw1F,SAAUsK,EAAS/0E,OAAmC,IAA1B+0E,EAAS/0E,MAAM1wB,SAAgB,EAC3Dk7F,SAAUuK,EAASn1E,OAAmC,IAA1Bm1E,EAASn1E,MAAMtwB,SAAgB,IAGlDm7F,WACTx1F,EAAO+/F,WAAaD,EAAS/0E,MAAM,GAAGwzE,SAGpCv+F,EAAOu1F,WACTv1F,EAAOggG,WAAaF,EAASn1E,MAAM,GAAG4zE,UAI1C/zF,KAAK7R,KAAKkmG,YAAY,CACpBC,OAAQ,UACR9+F,OAAQA,EACR4K,KAAMA,GACL,CAACA,EAAKq4D,UAGXp4D,EAAOo1F,oBAAsB,WACvBz1F,KAAK0vF,eACP1vF,KAAK0vF,cAAcmB,oBAIvBxwF,EAAOq1F,uBAAyB,WAC1B11F,KAAK0vF,eACP1vF,KAAK0vF,cAAciB,uBAWvBtwF,EAAOrP,KAAO,SAAcoP,GAE1B,IAAI0qD,EAAU,IAAIoc,WAAW9mE,EAAKA,KAAMA,EAAKs4D,WAAYt4D,EAAK42D,YAC9Dh3D,KAAK4mF,WAAW51F,KAAK85D,IAQvBzqD,EAAO8iB,MAAQ,WACbnjB,KAAK4mF,WAAWzjE,SAWlB9iB,EAAOs1F,mBAAqB,SAA4Bv1F,GACtD,IAAIw1F,EAAkBx1F,EAAKw1F,iBAAmB,EAC9C51F,KAAK4mF,WAAW4E,uBAAuBpuF,KAAKg6B,MAAMs1C,GAAuBkpB,MAG3Ev1F,EAAOknF,oBAAsB,SAA6BnnF,GACxDJ,KAAK4mF,WAAWW,oBAAoBnqF,KAAKiwE,KAAKX,GAAuBtsE,EAAKy1F,gBAG5Ex1F,EAAO8pF,SAAW,SAAkB/pF,GAClCJ,KAAK4mF,WAAWuD,SAAS/pF,EAAKgpF,QAUhC/oF,EAAOid,MAAQ,SAAeld,GAC5BJ,KAAK4mF,WAAWtpE,QAEhBnvB,KAAKkmG,YAAY,CACfC,OAAQ,OACRtlG,KAAM,gBAIVqR,EAAOyiE,YAAc,WACnB9iE,KAAK4mF,WAAW9jB,cAGhB30E,KAAKkmG,YAAY,CACfC,OAAQ,gBACRtlG,KAAM,gBAIVqR,EAAO4oF,cAAgB,SAAuB7oF,GAC5CJ,KAAK4mF,WAAWqC,cAAc7oF,EAAKqnF,gBAAgBn4F,UAG9C4kG,EA5L0B,GAuMnC/lG,KAAK2nG,UAAY,SAAU/5F,GACC,SAAtBA,EAAMqE,KAAKk0F,QAAqBv4F,EAAMqE,KAAK7B,QAC7CyB,KAAK+1F,gBAAkB,IAAI7B,GAAgB/lG,KAAM4N,EAAMqE,KAAK7B,UAIzDyB,KAAK+1F,kBACR/1F,KAAK+1F,gBAAkB,IAAI7B,GAAgB/lG,OAGzC4N,EAAMqE,MAAQrE,EAAMqE,KAAKk0F,QAAgC,SAAtBv4F,EAAMqE,KAAKk0F,QAC5Ct0F,KAAK+1F,gBAAgBh6F,EAAMqE,KAAKk0F,SAClCt0F,KAAK+1F,gBAAgBh6F,EAAMqE,KAAKk0F,QAAQv4F,EAAMqE,YAKlD41F,GAAiBt0B,GAAQa,IAqDzB0zB,GAAkB,SAAyB13F,GAC7C,IAAIqoF,EAAaroF,EAAQqoF,WACrBpuB,EAAQj6D,EAAQi6D,MAChB09B,EAAmB33F,EAAQ23F,iBAC3BzO,EAAkBlpF,EAAQkpF,gBAC1B2B,EAAQ7qF,EAAQ6qF,MAChB+M,EAAS53F,EAAQ43F,OACjBC,EAAc73F,EAAQ63F,YACtBC,EAAoB93F,EAAQ83F,kBAC5BC,EAAoB/3F,EAAQ+3F,kBAC5BC,EAA2Bh4F,EAAQg4F,yBACnCC,EAA2Bj4F,EAAQi4F,yBACnCC,EAAQl4F,EAAQk4F,MAChBC,EAAan4F,EAAQm4F,WACrBC,EAASp4F,EAAQo4F,OACjBC,EAAkBr4F,EAAQq4F,gBAC1BC,EAAkBt4F,EAAQs4F,gBAC1BC,EAAkBv4F,EAAQu4F,gBAC1BC,EAAiB,CACnBt+B,OAAQ,IAENu+B,EAA4BF,EAqGhC,GAxBAlQ,EAAWkP,UA3ES,SAAuB/5F,GACrC6qF,EAAWqQ,kBAAoB14F,IAKT,SAAtBxC,EAAMqE,KAAKk0F,QA/ED,SAAqBv4F,EAAOg7F,EAAgB51F,GAC5D,IAAI+1F,EAAsBn7F,EAAMqE,KAAK0qD,QACjC97D,EAAOkoG,EAAoBloG,KAC3B4pE,EAAcs+B,EAAoBt+B,YAClCt+C,EAAW48E,EAAoB58E,SAC/B2vE,EAAiBiN,EAAoBjN,eACrClvE,EAAWm8E,EAAoBn8E,SAC/Bo8E,EAAoBD,EAAoBC,kBACxCC,EAAoBF,EAAoBE,kBAC5CL,EAAet+B,OAAOznE,KAAK,CACzBspB,SAAUA,EACV2vE,eAAgBA,EAChBlvE,SAAUA,IAEZ,IAAI6sD,EAAQ7rE,EAAMqE,KAAK0qD,QAAQ8c,OAAS,CACtCxnE,KAAMrE,EAAMqE,KAAK0qD,QAAQ1qD,MAEvB5K,EAAS,CACXxG,KAAMA,EAENoR,KAAM,IAAI8mE,WAAWU,EAAMxnE,KAAMwnE,EAAMxnE,KAAKs4D,WAAYkP,EAAMxnE,KAAK42D,YACnE4B,YAAa,IAAIsO,WAAWtO,EAAYx4D,KAAMw4D,EAAYF,WAAYE,EAAY5B,aAGnD,qBAAtBmgC,IACT3hG,EAAO2hG,kBAAoBA,GAGI,qBAAtBC,IACT5hG,EAAO4hG,kBAAoBA,GAG7Bj2F,EAAS3L,GAgDL6hG,CAAYt7F,EAAOg7F,EAAgBZ,GAGX,cAAtBp6F,EAAMqE,KAAKk0F,QACb8B,EAAYr6F,EAAMqE,KAAKw0F,WAGC,YAAtB74F,EAAMqE,KAAKk0F,QAzCE,SAAwBv4F,EAAOg7F,GAClDA,EAAexC,QAAUx4F,EAAMqE,KAAKm0F,QAyChC+C,CAAev7F,EAAOg7F,GAGE,oBAAtBh7F,EAAMqE,KAAKk0F,QACb+B,EAAkBt6F,EAAMqE,KAAKy0F,iBAGL,oBAAtB94F,EAAMqE,KAAKk0F,QACbgC,EAAkBv6F,EAAMqE,KAAKm5D,iBAGL,2BAAtBx9D,EAAMqE,KAAKk0F,QACbiC,EAAyBx6F,EAAMqE,KAAKq0F,wBAGZ,2BAAtB14F,EAAMqE,KAAKk0F,QACbkC,EAAyBz6F,EAAMqE,KAAKu0F,wBAGZ,aAAtB54F,EAAMqE,KAAKk0F,QACbmC,EAAM,CAAC16F,EAAMqE,KAAKmrF,UAAWxvF,EAAMqE,KAAKmrF,SAASzN,cAGzB,YAAtB/hF,EAAMqE,KAAKk0F,QACboC,EAAW36F,EAAMqE,KAAK2pF,SAGE,kBAAtBhuF,EAAMqE,KAAKk0F,SACb0C,GAA4B,EAC5BJ,KAGwB,QAAtB76F,EAAMqE,KAAKk0F,QACbuC,EAAgB96F,EAAMqE,KAAK/P,KAIL,eAApB0L,EAAMqE,KAAKpR,OAQXgoG,IAIJpQ,EAAWkP,UAAY,KAtGT,SAAqB1lF,GACrC,IAAI2mF,EAAiB3mF,EAAK2mF,eACtB51F,EAAWiP,EAAKjP,SAGpB41F,EAAet+B,OAAS,GAGxBt3D,EAAS41F,GA+FPQ,CAAY,CACVR,eAAgBA,EAChB51F,SAAUw1F,IAIZa,GAAQ5Q,OAMNsP,GACFtP,EAAWyN,YAAY,CACrBC,OAAQ,sBACRuB,YAAaK,IAKb1lG,MAAMY,QAAQq2F,IAChBb,EAAWyN,YAAY,CACrBC,OAAQ,gBACR7M,gBAAiBA,IAIA,qBAAV2B,GACTxC,EAAWyN,YAAY,CACrBC,OAAQ,WACRlL,MAAOA,IAIP5wB,EAAMxB,WAAY,CACpB,IAAIyB,EAASD,aAAiBF,YAAcE,EAAQA,EAAMC,OACtDC,EAAaF,aAAiBF,YAAc,EAAIE,EAAME,WAC1DkuB,EAAWyN,YAAY,CACrBC,OAAQ,OAIRl0F,KAAMq4D,EAGNC,WAAYA,EACZ1B,WAAYwB,EAAMxB,YACjB,CAACyB,IAGFq+B,GACFlQ,EAAWyN,YAAY,CACrBC,OAAQ,gBAMZ1N,EAAWyN,YAAY,CACrBC,OAAQ,WAIRkD,GAAU,SAAiB5Q,GAC7BA,EAAWqQ,gBAAkB,KAEzBrQ,EAAW6Q,cAAc5nG,SAC3B+2F,EAAWqQ,gBAAkBrQ,EAAW6Q,cAAcnxF,QAEZ,oBAA/BsgF,EAAWqQ,gBACpBrQ,EAAWqQ,kBAEXhB,GAAgBrP,EAAWqQ,mBAK7BS,GAAgB,SAAuB9Q,EAAY0N,GACrD1N,EAAWyN,YAAY,CACrBC,OAAQA,IAEVkD,GAAQ5Q,IAGN+Q,GAAgB,SAAuBrD,EAAQ1N,GACjD,IAAKA,EAAWqQ,gBAGd,OAFArQ,EAAWqQ,gBAAkB3C,OAC7BoD,GAAc9Q,EAAY0N,GAI5B1N,EAAW6Q,cAAczmG,KAAK0mG,GAAcjzF,KAAK,KAAMmiF,EAAY0N,KAWjEsD,GAAW,SAAkBr5F,GAC/B,IAAKA,EAAQqoF,WAAWqQ,gBAGtB,OAFA14F,EAAQqoF,WAAWqQ,gBAAkB14F,OACrC03F,GAAgB13F,GAIlBA,EAAQqoF,WAAW6Q,cAAczmG,KAAKuN,IAsBpCs5F,GArCQ,SAAejR,GACzB+Q,GAAc,QAAS/Q,IAoCrBiR,GAnBmB,SAA0Bt5F,GAC/C,IAAIqoF,EAAa,IAAIoP,GACrBpP,EAAWqQ,gBAAkB,KAC7BrQ,EAAW6Q,cAAgB,GAC3B,IAAIK,EAAOlR,EAAWxkB,UAYtB,OAVAwkB,EAAWxkB,UAAY,WAGrB,OAFAwkB,EAAWqQ,gBAAkB,KAC7BrQ,EAAW6Q,cAAc5nG,OAAS,EAC3BioG,EAAKnkG,KAAKizF,IAGnBA,EAAWyN,YAAY,CACrBC,OAAQ,OACR/1F,QAASA,IAEJqoF,GAULmR,GAAiB,SAAwBx5F,GAC3C,IAAIqoF,EAAaroF,EAAQqoF,WACrBoR,EAAYz5F,EAAQy5F,WAAaz5F,EAAQ+1F,OACzCnzF,EAAW5C,EAAQ4C,SAEnB8Q,EAAU,IAAS,GAAI1T,EAAS,CAClCy5F,UAAW,KACXpR,WAAY,KACZzlF,SAAU,OAuBZ,GAFAylF,EAAWtnF,iBAAiB,WAlBJ,SAAS24F,EAAkBl8F,GAC7CA,EAAMqE,KAAKk0F,SAAW0D,IAI1BpR,EAAWxnF,oBAAoB,UAAW64F,GAEtCl8F,EAAMqE,KAAKA,OACbrE,EAAMqE,KAAKA,KAAO,IAAI8mE,WAAWnrE,EAAMqE,KAAKA,KAAM7B,EAAQm6D,YAAc,EAAGn6D,EAAQy4D,YAAcj7D,EAAMqE,KAAKA,KAAK42D,YAE7Gz4D,EAAQ6B,OACV7B,EAAQ6B,KAAOrE,EAAMqE,KAAKA,OAI9Be,EAASpF,EAAMqE,UAKb7B,EAAQ6B,KAAM,CAChB,IAAI83F,EAAgB35F,EAAQ6B,gBAAgBk4D,YAC5CrmD,EAAQymD,WAAaw/B,EAAgB,EAAI35F,EAAQ6B,KAAKs4D,WACtDzmD,EAAQ+kD,WAAaz4D,EAAQ6B,KAAK42D,WAClC,IAAImhC,EAAY,CAACD,EAAgB35F,EAAQ6B,KAAO7B,EAAQ6B,KAAKq4D,QAC7DmuB,EAAWyN,YAAYpiF,EAASkmF,QAEhCvR,EAAWyN,YAAYpiF,IAIvBmmF,GACO,EADPA,IAEQ,IAFRA,IAGQ,IAQRC,GAAW,SAAkBC,GAC/BA,EAAWplG,SAAQ,SAAUo2D,GAC3BA,EAAIyM,YAiDJwiC,GAAe,SAAsB3mG,EAAOsqD,GAC9C,OAAIA,EAAQib,SACH,CACLhlD,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,iCAAmCiqC,EAAQ1+B,IACpD5S,KAAMwtF,GACN9uC,IAAKpN,GAILA,EAAQkb,QACH,CACLjlD,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,+BAAiCiqC,EAAQ1+B,IAClD5S,KAAMwtF,GACN9uC,IAAKpN,GAILtqD,EACK,CACLugB,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,+BAAiCiqC,EAAQ1+B,IAClD5S,KAAMwtF,GACN9uC,IAAKpN,GAIoB,gBAAzBA,EAAQ0a,cAAkE,IAAhC1a,EAAQp+B,SAASk5C,WACtD,CACL7kD,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,8BAAgCiqC,EAAQ1+B,IACjD5S,KAAMwtF,GACN9uC,IAAKpN,GAIF,MAcLs8C,GAAoB,SAA2B1tC,EAAS2tC,EAASC,GACnE,OAAO,SAAU9mG,EAAOsqD,GACtB,IAAIp+B,EAAWo+B,EAAQp+B,SACnB66E,EAAWJ,GAAa3mG,EAAOsqD,GAEnC,GAAIy8C,EACF,OAAOD,EAAmBC,EAAU7tC,GAGtC,GAA4B,KAAxBhtC,EAASk5C,WACX,OAAO0hC,EAAmB,CACxBvmF,OAAQ+pC,EAAQ/pC,OAChBF,QAAS,2BAA6BiqC,EAAQ1+B,IAC9C5S,KAAMwtF,GACN9uC,IAAKpN,GACJ4O,GAML,IAHA,IAAI+gB,EAAO,IAAIjG,SAAS9nD,GACpB06C,EAAQ,IAAIogC,YAAY,CAAC/sB,EAAK9F,UAAU,GAAI8F,EAAK9F,UAAU,GAAI8F,EAAK9F,UAAU,GAAI8F,EAAK9F,UAAU,MAE5Fn2E,EAAI,EAAGA,EAAI6oG,EAAQ5oG,OAAQD,IAClC6oG,EAAQ7oG,GAAG4oE,MAAQA,EAGrB,OAAOkgC,EAAmB,KAAM5tC,KAIhC+tC,GAAmB,SAA0B/tC,EAASguC,GACxD,IAAI9pG,EAAO,YAAwB87D,EAAQvuD,IAAIi8D,OAG/C,GAAa,QAATxpE,EAAgB,CAClB,IAAIwuB,EAAMstC,EAAQvuD,IAAIiyD,aAAe1D,EAAQvuD,IAAIihB,IACjD,OAAOs7E,EAAU,CACf76B,UAAU,EACVhsD,QAAS,sBAAwBjjB,GAAQ,WAAa,iDAAmDwuB,EACzG5S,KAAMwtF,KAIVL,GAAe,CACbzD,OAAQ,iBACRl0F,KAAM0qD,EAAQvuD,IAAIi8D,MAClBouB,WAAY97B,EAAQ87B,WACpBzlF,SAAU,SAAkBiP,GAC1B,IAAIoH,EAASpH,EAAKoH,OACdpX,EAAOgQ,EAAKhQ,KAiBhB,OAfA0qD,EAAQvuD,IAAIi8D,MAAQp4D,EACpBoX,EAAOtkB,SAAQ,SAAUwf,GACvBo4C,EAAQvuD,IAAIib,OAASszC,EAAQvuD,IAAIib,QAAU,GAEvCszC,EAAQvuD,IAAIib,OAAO9E,EAAM1jB,QAI7B87D,EAAQvuD,IAAIib,OAAO9E,EAAM1jB,MAAQ0jB,EAET,kBAAbA,EAAMjJ,IAAmBiJ,EAAMk9E,YACxC9kC,EAAQvuD,IAAI4zF,WAAarlC,EAAQvuD,IAAI4zF,YAAc,GACnDrlC,EAAQvuD,IAAI4zF,WAAWz9E,EAAMjJ,IAAMiJ,EAAMk9E,eAGtCkJ,EAAU,UAwDnBC,GAAwB,SAA+BvrC,GACzD,IAAI1C,EAAU0C,EAAM1C,QAChB4tC,EAAqBlrC,EAAMkrC,mBAC3B9hC,EAAepJ,EAAMoJ,aACzB,OAAO,SAAUhlE,EAAOsqD,GACtB,IAAIy8C,EAAWJ,GAAa3mG,EAAOsqD,GAEnC,GAAIy8C,EACF,OAAOD,EAAmBC,EAAU7tC,GAGtC,IAAIkuC,EAKa,gBAAjBpiC,GAAmC1a,EAAQqY,aAztSrB,SAA6BnsD,GAGrD,IAFA,IAAIyjE,EAAO,IAAI3E,WAAW,IAAI5O,YAAYlwD,EAAOvY,SAExCD,EAAI,EAAGA,EAAIwY,EAAOvY,OAAQD,IACjCi8E,EAAKj8E,GAAKwY,EAAO++D,WAAWv3E,GAG9B,OAAOi8E,EAAKpT,OAktSmEwgC,CAAoB/8C,EAAQqY,aAAavhB,UAAU8X,EAAQouC,iBAAmB,IAAjGh9C,EAAQp+B,SASlE,OARAgtC,EAAQquC,MApOU,SAAyBj9C,GAC7C,MAAO,CACL+T,UAAW/T,EAAQ+T,UACnBC,cAAehU,EAAQgU,eAAiB,EACxC4G,cAAe5a,EAAQ4a,eAAiB,GAgOxBsiC,CAAgBl9C,GAE5B4O,EAAQ33D,IACV23D,EAAQuuC,eAAiB,IAAInyB,WAAW8xB,GAExCluC,EAAQ0N,MAAQ,IAAI0O,WAAW8xB,GAG1BN,EAAmB,KAAM5tC,KAIhCwuC,GAAoB,SAA2BnqC,GACjD,IAAIrE,EAAUqE,EAAMrE,QAChB0N,EAAQrJ,EAAMqJ,MACd+gC,EAAcpqC,EAAMoqC,YACpBC,EAAerqC,EAAMqqC,aACrBC,EAA2BtqC,EAAMsqC,yBACjCC,EAA2BvqC,EAAMuqC,yBACjCC,EAAQxqC,EAAMwqC,MACdC,EAAazqC,EAAMyqC,WACnB9C,EAAkB3nC,EAAM2nC,gBACxB+C,EAAkB1qC,EAAM0qC,gBACxBC,EAAS3qC,EAAM2qC,OACfC,EAAS5qC,EAAM4qC,OACflD,EAAkB1nC,EAAM0nC,gBACxBmD,EAAalvC,EAAQvuD,KAAOuuD,EAAQvuD,IAAIib,QAAU,GAClDyiF,EAAUpkG,QAAQmkG,EAAW75E,OAAS65E,EAAWz5E,OAIjD25E,EAAeV,EAAa/0F,KAAK,KAAMqmD,EAAS,QAAS,SACzDqvC,EAAaX,EAAa/0F,KAAK,KAAMqmD,EAAS,QAAS,OACvDsvC,EAAeZ,EAAa/0F,KAAK,KAAMqmD,EAAS,QAAS,SACzDuvC,EAAab,EAAa/0F,KAAK,KAAMqmD,EAAS,QAAS,OA6E3DitC,GAAe,CACbzD,OAAQ,UACR1N,WAAY97B,EAAQ87B,WACpBxmF,KAAMo4D,EACN48B,cAAetqC,EAAQsqC,cACvBj0F,SAAU,SAAkBf,GAC1B0qD,EAAQ0N,MAAQA,EAAQp4D,EAAKA,KAC7B,IAAIk6F,EAAcl6F,EAAK5K,OAEnB8kG,IACFf,EAAYzuC,EAAS,CACnBigC,SAAUuP,EAAYvP,SACtBC,SAAUsP,EAAYtP,SACtBiP,QAASA,IAEXV,EAAc,KAEVe,EAAYvP,WAAakP,GAC3BC,EAAaI,EAAY9E,YAGvB8E,EAAYtP,UACdoP,EAAaE,EAAY/E,YAG3B2E,EAAe,KACfE,EAAe,MApGZxC,GAAS,CACdp/B,MAAOA,EACPouB,WAAY97B,EAAQ87B,WACpBsP,iBAAkBprC,EAAQorC,iBAC1BzO,gBAAiB38B,EAAQ28B,gBACzB2B,MAAO6Q,EACP9D,OAAQ,SAAgB3gG,GACtBA,EAAOxG,KAAuB,aAAhBwG,EAAOxG,KAAsB,QAAUwG,EAAOxG,KAC5D8qG,EAAOhvC,EAASt1D,IAElB4gG,YAAa,SAAqBxB,GAC5B2E,IACEU,IACFrF,EAAUqF,SAAU,GAGtBV,EAAYzuC,EAAS8pC,KAGzByB,kBAAmB,SAA2BxB,GAExCqF,GAAiD,qBAA1BrF,EAAgBpjF,QACzCyoF,EAAarF,EAAgBpjF,OAC7ByoF,EAAe,MAIbC,GAA6C,qBAAxBtF,EAAgBnjF,KACvCyoF,EAAWtF,EAAgBnjF,MAG/B4kF,kBAAmB,SAA2B/8B,GAExC6gC,GAAiD,qBAA1B7gC,EAAgB9nD,QACzC2oF,EAAa7gC,EAAgB9nD,OAC7B2oF,EAAe,MAIbC,GAA6C,qBAAxB9gC,EAAgB7nD,KACvC2oF,EAAW9gC,EAAgB7nD,MAG/B6kF,yBAA0B,SAAkC9B,GAC1DgF,EAAyBhF,IAE3B+B,yBAA0B,SAAkC7B,GAC1D+E,EAAyB/E,IAE3B8B,MAAO,SAAe8D,EAAWzc,GAC/B6b,EAAM7uC,EAASyvC,EAAWzc,IAE5B4Y,WAAY,SAAoBp8E,GAC9Bs/E,EAAW9uC,EAAS,CAACxwC,KAEvBw8E,gBAAiBA,EACjBF,gBAAiB,WACfiD,KAEFhD,gBAAiBA,EACjBF,OAAQ,SAAgBnhG,GACjBukG,IAILvkG,EAAOxG,KAAuB,aAAhBwG,EAAOxG,KAAsB,QAAUwG,EAAOxG,KAC5D+qG,EAAO,KAAMjvC,EAASt1D,WA0C1BglG,GAAqB,SAA4BC,GACnD,IAAI3vC,EAAU2vC,EAAM3vC,QAChB0N,EAAQiiC,EAAMjiC,MACd+gC,EAAckB,EAAMlB,YACpBC,EAAeiB,EAAMjB,aACrBC,EAA2BgB,EAAMhB,yBACjCC,EAA2Be,EAAMf,yBACjCC,EAAQc,EAAMd,MACdC,EAAaa,EAAMb,WACnB9C,EAAkB2D,EAAM3D,gBACxB+C,EAAkBY,EAAMZ,gBACxBC,EAASW,EAAMX,OACfC,EAASU,EAAMV,OACflD,EAAkB4D,EAAM5D,gBACxB6D,EAAoB,IAAIxzB,WAAW1O,GAMvC,GAAI,YAAyBkiC,GAA7B,CACE5vC,EAAQ6vC,QAAS,EACjB,IAAInjF,EAASszC,EAAQvuD,IAAIib,OACrBo9E,EAAY,CACd+F,QAAQ,EACR3P,WAAYxzE,EAAO+I,MACnBwqE,WAAYvzE,EAAO2I,OAIjB3I,EAAO2I,OAAS3I,EAAO2I,MAAMsgE,OAAgC,SAAvBjpE,EAAO2I,MAAMsgE,QACrDmU,EAAUgG,WAAapjF,EAAO2I,MAAMsgE,OAKlCjpE,EAAO+I,OAAS/I,EAAO+I,MAAMkgE,OAAgC,SAAvBjpE,EAAO+I,MAAMkgE,QACrDmU,EAAUiG,WAAarjF,EAAO+I,MAAMkgE,OAGlCjpE,EAAO+I,OAAS/I,EAAO2I,QACzBy0E,EAAUqF,SAAU,GAKtBV,EAAYzuC,EAAS8pC,GAOrB,IAAIkG,EAAgB,SAAuBxgF,GAKzCw/E,EAAOhvC,EAAS,CACd1qD,KAAMs6F,EACN1rG,KAAM4lG,EAAU7J,WAAa6J,EAAUqF,QAAU,QAAU,UAGzD3/E,GAAYA,EAASzqB,QACvB+pG,EAAW9uC,EAASxwC,GAGtBy/E,EAAO,KAAMjvC,EAAS,KAGxBitC,GAAe,CACbzD,OAAQ,oBACRnE,WAAYrlC,EAAQvuD,IAAI4zF,WACxB/vF,KAAMs6F,EACN9T,WAAY97B,EAAQ87B,WACpBzlF,SAAU,SAAkB45F,GAC1B,IAAI36F,EAAO26F,EAAM36F,KACbyS,EAAYkoF,EAAMloF,UAEtB2lD,EAAQp4D,EAAKq4D,OACb3N,EAAQ0N,MAAQkiC,EAAoBt6F,EAEhCw0F,EAAU7J,WAAa6J,EAAUqF,SACnCT,EAAa1uC,EAAS,QAAS,QAASj4C,GAGtC+hF,EAAU5J,UACZwO,EAAa1uC,EAAS,QAAS,QAASj4C,GAKrC2E,EAAO+I,OAAUngB,EAAK42D,YAAelM,EAAQ87B,WAKlDmR,GAAe,CACbzD,OAAQ,kBACR0D,UAAW,cACXpR,WAAY97B,EAAQ87B,WACpBxmF,KAAMs6F,EACNvK,WAAYrlC,EAAQvuD,IAAI4zF,WACxB6E,SAAU,CAACx9E,EAAO+I,MAAM9W,IACxBtI,SAAU,SAAkB8Q,GAE1BumD,EAAQvmD,EAAQ7R,KAAKq4D,OACrB3N,EAAQ0N,MAAQkiC,EAAoBzoF,EAAQ7R,KAC5C6R,EAAQq9E,KAAKp8F,SAAQ,SAAU7C,GAC7BwmG,EAAgB7wE,GAAQ8iC,aAAaz4D,EAAK,CACxCg1E,OAAQ,yBAGZy1B,EAAc7oF,EAAQqI,aApBxBwgF,YA6BR,GAAKhwC,EAAQ87B,WAAb,CASA,GAJiC,qBAAtB97B,EAAQkT,YACjBlT,EAAQkT,UAAY,YAAwB08B,IAGpB,OAAtB5vC,EAAQkT,WAA4C,QAAtBlT,EAAQkT,UAMxC,OALAu7B,EAAYzuC,EAAS,CACnBigC,UAAU,EACVC,UAAU,SAEZ+O,EAAO,KAAMjvC,EAAS,IAKxBwuC,GAAkB,CAChBxuC,QAASA,EACT0N,MAAOA,EACP+gC,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,EACRC,OAAQA,EACRlD,gBAAiBA,SA/BjBkD,EAAO,KAAMjvC,EAAS,KAmCtBkwC,GAAU,SAAiBC,EAAO95F,GACpC,IAcI+5F,EAdAzxF,EAAKwxF,EAAMxxF,GACXtW,EAAM8nG,EAAM9nG,IACZkmG,EAAiB4B,EAAM5B,eACvB8B,EAAmBF,EAAME,iBAU7BA,EAAiB77F,iBAAiB,WARV,SAAS87F,EAAkBr/F,GACjD,GAAIA,EAAMqE,KAAK5M,SAAWiW,EAAI,CAC5B0xF,EAAiB/7F,oBAAoB,UAAWg8F,GAChD,IAAIC,EAAYt/F,EAAMqE,KAAKi7F,UAC3Bl6F,EAAS,IAAI+lE,WAAWm0B,EAAU7iC,MAAO6iC,EAAU3iC,WAAY2iC,EAAUrkC,iBAQ3EkkC,EADE/nG,EAAIqlE,MAAMlpE,MACD6D,EAAIqlE,MAAMlpE,QAEV,IAAIspG,YAAYpoG,MAAM7B,UAAUW,MAAMqE,KAAKR,EAAIqlE,QAI5D2iC,EAAiB9G,YAAYj8B,GAA0B,CACrD5kE,OAAQiW,EACR6xF,UAAWjC,EACXlmG,IAAK+nG,EACLK,GAAIpoG,EAAIooG,KACN,CAAClC,EAAe5gC,OAAQyiC,EAASziC,UAiGnC+iC,GAAoB,SAA2BC,GACjD,IAAInD,EAAamD,EAAMnD,WACnB6C,EAAmBM,EAAMN,iBACzB5B,EAAckC,EAAMlC,YACpBC,EAAeiC,EAAMjC,aACrBC,EAA2BgC,EAAMhC,yBACjCC,EAA2B+B,EAAM/B,yBACjCC,EAAQ8B,EAAM9B,MACdC,EAAa6B,EAAM7B,WACnB9C,EAAkB2E,EAAM3E,gBACxB+C,EAAkB4B,EAAM5B,gBACxBC,EAAS2B,EAAM3B,OACfC,EAAS0B,EAAM1B,OACflD,EAAkB4E,EAAM5E,gBACxBhrC,EAAQ,EACR6vC,GAAW,EACf,OAAO,SAAU9pG,EAAOk5D,GACtB,IAAI4wC,EAAJ,CAIA,GAAI9pG,EAeF,OAdA8pG,GAAW,EAEXrD,GAASC,GAYFyB,EAAOnoG,EAAOk5D,GAKvB,IAFAe,GAAS,KAEKysC,EAAWzoG,OAAQ,CAC/B,IAAI8rG,EAAgB,WAClB,GAAI7wC,EAAQuuC,eACV,OAjHW,SAAwBuC,GAC3C,IAAIT,EAAmBS,EAAMT,iBACzBrwC,EAAU8wC,EAAM9wC,QAChByuC,EAAcqC,EAAMrC,YACpBC,EAAeoC,EAAMpC,aACrBC,EAA2BmC,EAAMnC,yBACjCC,EAA2BkC,EAAMlC,yBACjCC,EAAQiC,EAAMjC,MACdC,EAAagC,EAAMhC,WACnB9C,EAAkB8E,EAAM9E,gBACxB+C,EAAkB+B,EAAM/B,gBACxBC,EAAS8B,EAAM9B,OACfC,EAAS6B,EAAM7B,OACflD,EAAkB+E,EAAM/E,gBAC5BmE,GAAQ,CACNvxF,GAAIqhD,EAAQ+wC,UACZ1oG,IAAK23D,EAAQ33D,IACbkmG,eAAgBvuC,EAAQuuC,eACxB8B,iBAAkBA,IACjB,SAAUW,GACXhxC,EAAQ0N,MAAQsjC,EAChBtB,GAAmB,CACjB1vC,QAASA,EACT0N,MAAO1N,EAAQ0N,MACf+gC,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,EACRC,OAAQA,EACRlD,gBAAiBA,OA+ENkF,CAAe,CACpBZ,iBAAkBA,EAClBrwC,QAASA,EACTyuC,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,EACRC,OAAQA,EACRlD,gBAAiBA,IAKrB2D,GAAmB,CACjB1vC,QAASA,EACT0N,MAAO1N,EAAQ0N,MACf+gC,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,EACRC,OAAQA,EACRlD,gBAAiBA,KAOrB,GAFA/rC,EAAQkxC,iBAAmBnuG,KAAKC,MAE5Bg9D,EAAQvuD,KAAOuuD,EAAQvuD,IAAI88F,iBAAmBvuC,EAAQvuD,IAAIi8D,MAC5D,OAAOwiC,GAAQ,CACbG,iBAAkBA,EAIlB1xF,GAAIqhD,EAAQ+wC,UAAY,QACxBxC,eAAgBvuC,EAAQvuD,IAAI88F,eAC5BlmG,IAAK23D,EAAQvuD,IAAIpJ,MAChB,SAAU2oG,GACXhxC,EAAQvuD,IAAIi8D,MAAQsjC,EACpBjD,GAAiB/tC,GAAS,SAAUmxC,GAClC,GAAIA,EAEF,OADA5D,GAASC,GACFyB,EAAOkC,EAAYnxC,GAG5B6wC,UAKNA,QAoDFO,GAAiB,SAAwBC,GAC3C,IAAIrxC,EAAUqxC,EAAOrxC,QACjBsxC,EAAaD,EAAOC,WAUxB,OATAD,EAAO5C,YACP4C,EAAO3C,aACP2C,EAAO1C,yBACP0C,EAAOzC,yBACPyC,EAAOxC,MACPwC,EAAOvC,WACPuC,EAAOrF,gBACPqF,EAAOtC,gBACPsC,EAAOrC,OACA,SAAU/9F,GAGf,IAFcA,EAAM1I,OAER+jE,QAUZ,OANAtM,EAAQquC,MAAQnzE,GAAQ8iC,aAAagC,EAAQquC,MAjzB1B,SAA0BkD,GAC/C,IAAIngD,EAAUmgD,EAAchpG,OAExB8lG,EAAQ,CACVlpC,UAAW39B,IACX49B,cAAe,EACf4G,cAJkBjpE,KAAKC,MAAQouD,EAAQ6a,aAIP,GAOlC,OALAoiC,EAAMjpC,cAAgBmsC,EAAcv+B,OAIpCq7B,EAAMlpC,UAAY7yD,KAAK8C,MAAMi5F,EAAMjpC,cAAgBipC,EAAMriC,cAAgB,EAAI,KACtEqiC,EAoyB+CmD,CAAiBvgG,KAEhE+uD,EAAQquC,MAAMoD,sBAAwBzxC,EAAQquC,MAAMjpC,gBACvDpF,EAAQquC,MAAMoD,qBAAuB1uG,KAAKC,OAGrCsuG,EAAWrgG,EAAO+uD,KAyEzB0xC,GAAsB,SAA6BC,GACrD,IAAInzC,EAAMmzC,EAAOnzC,IACbozC,EAAaD,EAAOC,WACpBvB,EAAmBsB,EAAOtB,iBAC1BrwC,EAAU2xC,EAAO3xC,QACjB6xC,EAAUF,EAAOE,QACjBP,EAAaK,EAAOL,WACpB7C,EAAckD,EAAOlD,YACrBC,EAAeiD,EAAOjD,aACtBC,EAA2BgD,EAAOhD,yBAClCC,EAA2B+C,EAAO/C,yBAClCC,EAAQ8C,EAAO9C,MACfC,EAAa6C,EAAO7C,WACpB9C,EAAkB2F,EAAO3F,gBACzB+C,EAAkB4C,EAAO5C,gBACzBC,EAAS2C,EAAO3C,OAChBC,EAAS0C,EAAO1C,OAChBlD,EAAkB4F,EAAO5F,gBACzByB,EAAa,GACbI,EAAqB8C,GAAkB,CACzClD,WAAYA,EACZ6C,iBAAkBA,EAClB5B,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,EACRC,OAAQA,EACRlD,gBAAiBA,IAGnB,GAAI/rC,EAAQ33D,MAAQ23D,EAAQ33D,IAAIqlE,MAAO,CACrC,IAAIigC,EAAU,CAAC3tC,EAAQ33D,KAEnB23D,EAAQvuD,MAAQuuD,EAAQvuD,IAAIi8D,OAAS1N,EAAQvuD,IAAIpJ,KAAO23D,EAAQvuD,IAAIpJ,IAAIq7D,cAAgB1D,EAAQ33D,IAAIq7D,aACtGiqC,EAAQznG,KAAK85D,EAAQvuD,IAAIpJ,KAG3B,IAKIypG,EAAStzC,EALWtjC,GAAQ8iC,aAAa4zC,EAAY,CACvDl/E,IAAKstC,EAAQ33D,IAAIq7D,YACjBoI,aAAc,gBAES4hC,GAAkB1tC,EAAS2tC,EAASC,IAE7DJ,EAAWtnG,KAAK4rG,GAIlB,GAAI9xC,EAAQvuD,MAAQuuD,EAAQvuD,IAAIi8D,MAAO,CAGrC,GAFsB1N,EAAQvuD,IAAIpJ,OAAS23D,EAAQ33D,KAAO23D,EAAQ33D,IAAIq7D,cAAgB1D,EAAQvuD,IAAIpJ,IAAIq7D,aAEjF,CACnB,IAKIquC,EAAYvzC,EALWtjC,GAAQ8iC,aAAa4zC,EAAY,CAC1Dl/E,IAAKstC,EAAQvuD,IAAIpJ,IAAIq7D,YACrBoI,aAAc,gBAEY4hC,GAAkB1tC,EAAS,CAACA,EAAQvuD,IAAIpJ,KAAMulG,IAE1EJ,EAAWtnG,KAAK6rG,GAGlB,IAAIC,EAAqB92E,GAAQ8iC,aAAa4zC,EAAY,CACxDl/E,IAAKstC,EAAQvuD,IAAIiyD,YACjBoI,aAAc,cACdK,QAASW,GAAkB9M,EAAQvuD,OAEjCwgG,EA5yBwB,SAAmCz7C,GACjE,IAAIwJ,EAAUxJ,EAAMwJ,QAChB4tC,EAAqBp3C,EAAMo3C,mBAC/B,OAAO,SAAU9mG,EAAOsqD,GACtB,IAAIy8C,EAAWJ,GAAa3mG,EAAOsqD,GAEnC,GAAIy8C,EACF,OAAOD,EAAmBC,EAAU7tC,GAGtC,IAAI0N,EAAQ,IAAI0O,WAAWhrB,EAAQp+B,UAGnC,GAAIgtC,EAAQvuD,IAAIpJ,IAEd,OADA23D,EAAQvuD,IAAI88F,eAAiB7gC,EACtBkgC,EAAmB,KAAM5tC,GAGlCA,EAAQvuD,IAAIi8D,MAAQA,EACpBqgC,GAAiB/tC,GAAS,SAAUmxC,GAClC,GAAIA,EAGF,OAFAA,EAAW3yC,IAAMpN,EACjB+/C,EAAW9pF,OAAS+pC,EAAQ/pC,OACrBumF,EAAmBuD,EAAYnxC,GAGxC4tC,EAAmB,KAAM5tC,OAkxBMkyC,CAA0B,CACzDlyC,QAASA,EACT4tC,mBAAoBA,IAElBuE,EAAiB3zC,EAAIwzC,EAAoBC,GAC7CzE,EAAWtnG,KAAKisG,GAGlB,IAAIC,EAAwBl3E,GAAQ8iC,aAAa4zC,EAAY,CAC3Dl/E,IAAKstC,EAAQt0B,MAAQs0B,EAAQt0B,KAAKg4B,aAAe1D,EAAQ0D,YACzDoI,aAAc,cACdK,QAASW,GAAkB9M,KAOzBqyC,EAAa7zC,EAAI4zC,EALQnE,GAAsB,CACjDjuC,QAASA,EACT4tC,mBAAoBA,EACpB9hC,aAAcsmC,EAAsBtmC,gBAGtCumC,EAAW79F,iBAAiB,WAAY48F,GAAe,CACrDpxC,QAASA,EACTsxC,WAAYA,EACZ7C,YAAaA,EACbC,aAAcA,EACdC,yBAA0BA,EAC1BC,yBAA0BA,EAC1BC,MAAOA,EACPC,WAAYA,EACZ9C,gBAAiBA,EACjB+C,gBAAiBA,EACjBC,OAAQA,KAEVxB,EAAWtnG,KAAKmsG,GAGhB,IAAIC,EAAe,GAOnB,OANA9E,EAAWplG,SAAQ,SAAUmqG,GAC3BA,EAAU/9F,iBAAiB,UApPX,SAAuBg+F,GACzC,IAAIF,EAAeE,EAAOF,aACtBT,EAAUW,EAAOX,QACrB,OAAO,SAAU5gG,GACDA,EAAM1I,OAER+jE,SAAWulC,IAAYS,EAAaG,gBAC9CZ,IACAS,EAAaG,eAAgB,IA4OOC,CAAc,CAClDJ,aAAcA,EACdT,QAASA,QAGN,WACL,OAAOtE,GAASC,KAShBmF,GAAU5zC,GAAO,cAmBjB6zC,GAAS,SAAgB1xC,EAAQnO,GACnC,IAAI8/C,EAAkB9/C,EAAMlmD,YAAc,GAC1C,OAAOq0D,GAAUA,EAAO2C,aAAe3C,EAAO2C,YAAYD,OAASivC,EAAgBjvC,OAAS1C,EAAO2C,YAAYD,MAAMivC,EAAgBjvC,QAwBnIkvC,GAAkB,SAAyBC,GAC7C,IAAIC,EAAS,GAiBb,OAhBAD,EAAU3qG,SAAQ,SAAUkd,GAC1B,IAAIigD,EAAYjgD,EAAKigD,UACjBrhE,EAAOohB,EAAKphB,KACZ4sB,EAAUxL,EAAKwL,QACnBkiF,EAAOztC,GAAaytC,EAAOztC,IAAc,GACzCytC,EAAOztC,GAAWr/D,KAAK,YAAqB,GAAKhC,EAAO4sB,OAE1D/oB,OAAOC,KAAKgrG,GAAQ5qG,SAAQ,SAAUm9D,GACpC,GAAIytC,EAAOztC,GAAWxgE,OAAS,EAG7B,OAFA4tG,GAAQ,YAAcptC,EAAY,gCAAkCytC,EAAOztC,GAAW32D,KAAK,MAAQ,wGACnGokG,EAAOztC,GAAa,MAItBytC,EAAOztC,GAAaytC,EAAOztC,GAAW,MAEjCytC,GAGLC,GAAa,SAAoBC,GACnC,IAAInyC,EAAQ,EAUZ,OARImyC,EAAS79E,OACX0rC,IAGEmyC,EAASz9E,OACXsrC,IAGKA,GAgBLoyC,GAAoB,SAA2BjyC,EAAQnO,GACzD,IAAI8/C,EAAkB9/C,EAAMlmD,YAAc,GACtCumG,EAAYN,GAtFF,SAAmB//C,GAGjC,IAAI8/C,EAAkB9/C,EAAMlmD,YAAc,GAE1C,GAAIgmG,EAAgB5uC,OAClB,OAAO,YAAY4uC,EAAgB5uC,QAgFLovC,CAAUtgD,IAAU,IAGpD,GAAI6/C,GAAO1xC,EAAQnO,KAAWqgD,EAAU/9E,QA1E5B,SAAiB6rC,EAAQnO,GACrC,IAAK6/C,GAAO1xC,EAAQnO,GAClB,OAAO,EAGT,IAAI8/C,EAAkB9/C,EAAMlmD,YAAc,GACtCymG,EAAapyC,EAAO2C,YAAYD,MAAMivC,EAAgBjvC,OAE1D,IAAK,IAAIoC,KAAWstC,EAKlB,IAAKA,EAAWttC,GAAStzC,MAAQ4gF,EAAWttC,GAAS3C,UACnD,OAAO,EAIX,OAAO,EAyDA8rC,CAAQjuC,EAAQnO,GAAQ,CAI3B,IAAIwgD,EAAgBT,GAAgB,YAAkB5xC,EAAQ2xC,EAAgBjvC,QAAU,IAEpF2vC,EAAcl+E,QAChB+9E,EAAU/9E,MAAQk+E,EAAcl+E,OAKtC,OAAO+9E,GAGLI,GAAQz0C,GAAO,oBAEf00C,GAAyB,SAAgCC,GAC3D,GAAKA,GAAmBA,EAAe3zC,SAAvC,CAIA,IAAIA,EAAW2zC,EAAe3zC,SAC9B,OAAOjkB,KAAKI,UAAU,CACpBv9B,GAAIohD,EAASphD,GACbwmD,UAAWuuC,EAAevuC,UAC1B70D,MAAOojG,EAAepjG,MACtBD,OAAQqjG,EAAerjG,OACvB2iG,OAAQjzC,EAASlzD,YAAckzD,EAASlzD,WAAWo3D,QAAU,OAgB7D0vC,GAAuB,SAA8B5qG,EAAI6qG,GAC3D,IAAK7qG,EACH,MAAO,GAGT,IAAI2B,EAAS,IAASzB,iBAAiBF,GAEvC,OAAK2B,EAIEA,EAAOkpG,GAHL,IAcPC,GAAa,SAAoBjxB,EAAOkxB,GAC1C,IAAIC,EAAWnxB,EAAMp+E,QACrBo+E,EAAM7iC,MAAK,SAAUtvC,EAAM27B,GACzB,IAAI4nE,EAAMF,EAAOrjG,EAAM27B,GAEvB,OAAY,IAAR4nE,EACKD,EAASxvG,QAAQkM,GAAQsjG,EAASxvG,QAAQ6nC,GAG5C4nE,MAePC,GAA2B,SAAkCxjG,EAAM27B,GACrE,IAAI8nE,EACAC,EAaJ,OAXI1jG,EAAK5D,WAAW02D,YAClB2wC,EAAgBzjG,EAAK5D,WAAW02D,WAGlC2wC,EAAgBA,GAAiB,IAASxiG,OAAO8xD,UAE7Cp3B,EAAMv/B,WAAW02D,YACnB4wC,EAAiB/nE,EAAMv/B,WAAW02D,WAI7B2wC,GADPC,EAAiBA,GAAkB,IAASziG,OAAO8xD,YA2DjD4wC,GAAiB,SAAwBlzC,EAAQmzC,EAAiBC,EAAaC,EAAcC,EAAkCC,GAEjI,GAAKvzC,EAAL,CAIA,IAAIztD,EAAU,CACZ0xD,UAAWkvC,EACX/jG,MAAOgkG,EACPjkG,OAAQkkG,EACRC,iCAAkCA,GAEhCnxC,EAAYnC,EAAOmC,UAEnBc,GAASJ,YAAY7C,KACvBmC,EAAYoxC,EAAyBC,0BAGrCjhG,EAAQkhG,WAAY,GAItB,IAAIC,EAAqBvxC,EAAU5xD,KAAI,SAAUsuD,GAC/C,IACIzvD,EAAQyvD,EAASlzD,YAAckzD,EAASlzD,WAAWgoG,YAAc90C,EAASlzD,WAAWgoG,WAAWvkG,MAChGD,EAAS0vD,EAASlzD,YAAckzD,EAASlzD,WAAWgoG,YAAc90C,EAASlzD,WAAWgoG,WAAWxkG,OAGrG,MAAO,CACL80D,UAHUpF,EAASlzD,YAAckzD,EAASlzD,WAAW02D,WAC9B,IAAS7xD,OAAO8xD,UAGvClzD,MAAOA,EACPD,OAAQA,EACR0vD,SAAUA,MAGd8zC,GAAWe,GAAoB,SAAUnkG,EAAM27B,GAC7C,OAAO37B,EAAK00D,UAAY/4B,EAAM+4B,aAShC,IAAI2vC,GALJF,EAAqBA,EAAmB1tG,QAAO,SAAU6tG,GACvD,OAAQ5wC,GAASlB,eAAe8xC,EAAIh1C,cAIO74D,QAAO,SAAU6tG,GAC5D,OAAO5wC,GAASjB,UAAU6xC,EAAIh1C,aAG3B+0C,EAAoB/vG,SAIvB+vG,EAAsBF,EAAmB1tG,QAAO,SAAU6tG,GACxD,OAAQ5wC,GAASY,WAAWgwC,EAAIh1C,cAMpC,IAAIi1C,EAAwBF,EAAoB5tG,QAAO,SAAU6tG,GAC/D,OAAOA,EAAI5vC,UAAY2Q,GAAOM,mBAAqBi+B,KAEjDY,EAA+BD,EAAsBA,EAAsBjwG,OAAS,GAGpFmwG,EAAmBF,EAAsB9tG,QAAO,SAAU6tG,GAC5D,OAAOA,EAAI5vC,YAAc8vC,EAA6B9vC,aACrD,GAEH,IAAyC,IAArCqvC,EAA4C,CAC9C,IAAIW,EAAaD,GAAoBJ,EAAoB,IAAMF,EAAmB,GAElF,GAAIO,GAAcA,EAAWp1C,SAAU,CACrC,IAAI77D,EAAO,qBAWX,OATIgxG,IACFhxG,EAAO,oBAGL4wG,EAAoB,KACtB5wG,EAAO,uBAGTsvG,GAAM,YAAcC,GAAuB0B,GAAc,UAAYjxG,EAAO,gBAAiBuP,GACtF0hG,EAAWp1C,SAIpB,OADAyzC,GAAM,2CAA4C//F,GAC3C,KAIT,IAAI2hG,EAAiBJ,EAAsB9tG,QAAO,SAAU6tG,GAC1D,OAAOA,EAAIzkG,OAASykG,EAAI1kG,UAG1BwjG,GAAWuB,GAAgB,SAAU3kG,EAAM27B,GACzC,OAAO37B,EAAKH,MAAQ87B,EAAM97B,SAG5B,IAAI+kG,EAAwBD,EAAeluG,QAAO,SAAU6tG,GAC1D,OAAOA,EAAIzkG,QAAUgkG,GAAeS,EAAI1kG,SAAWkkG,KAErDU,EAA+BI,EAAsBA,EAAsBtwG,OAAS,GAEpF,IAGIuwG,EACAC,EACAC,EAmBAC,EAxBAC,EAAoBL,EAAsBnuG,QAAO,SAAU6tG,GAC7D,OAAOA,EAAI5vC,YAAc8vC,EAA6B9vC,aACrD,GA0BH,GApBKuwC,IAKHH,GAJAD,EAAwBF,EAAeluG,QAAO,SAAU6tG,GACtD,OAAOA,EAAIzkG,MAAQgkG,GAAeS,EAAI1kG,OAASkkG,MAGCrtG,QAAO,SAAU6tG,GACjE,OAAOA,EAAIzkG,QAAUglG,EAAsB,GAAGhlG,OAASykG,EAAI1kG,SAAWilG,EAAsB,GAAGjlG,UAIjG4kG,EAA+BM,EAA0BA,EAA0BxwG,OAAS,GAC5FywG,EAAuBD,EAA0BruG,QAAO,SAAU6tG,GAChE,OAAOA,EAAI5vC,YAAc8vC,EAA6B9vC,aACrD,IAODsvC,EAAyBkB,mCAAoC,CAE/D,IAAIC,EAAqBR,EAAe3jG,KAAI,SAAUsjG,GAEpD,OADAA,EAAIc,UAAYvjG,KAAK8sC,IAAI21D,EAAIzkG,MAAQgkG,GAAehiG,KAAK8sC,IAAI21D,EAAI1kG,OAASkkG,GACnEQ,KAGTlB,GAAW+B,GAAoB,SAAUnlG,EAAM27B,GAE7C,OAAI37B,EAAKolG,YAAczpE,EAAMypE,UACpBzpE,EAAM+4B,UAAY10D,EAAK00D,UAGzB10D,EAAKolG,UAAYzpE,EAAMypE,aAEhCJ,EAAoBG,EAAmB,GAIzC,IAAIE,EAAYL,GAAqBD,GAAwBE,GAAqBR,GAAoBJ,EAAoB,IAAMF,EAAmB,GAEnJ,GAAIkB,GAAaA,EAAU/1C,SAAU,CACnC,IAAIg2C,EAAQ,qBAeZ,OAbIN,EACFM,EAAQ,oBACCP,EACTO,EAAQ,uBACCL,EACTK,EAAQ,oBACCb,EACTa,EAAQ,mBACCjB,EAAoB,KAC7BiB,EAAQ,uBAGVvC,GAAM,YAAcC,GAAuBqC,GAAa,UAAYC,EAAQ,gBAAiBtiG,GACtFqiG,EAAU/1C,SAInB,OADAyzC,GAAM,2CAA4C//F,GAC3C,OAcLuiG,GAAwB,WAC1B,IAAIC,EAAa/gG,KAAKghG,qBAAsB,IAASC,kBAAwB,EAC7E,OAAO/B,GAAel/F,KAAKmuD,UAAUnC,OAAQhsD,KAAKkhG,gBAAiBpzF,SAAS2wF,GAAqBz+F,KAAK4d,MAAM/pB,KAAM,SAAU,IAAMktG,EAAYjzF,SAAS2wF,GAAqBz+F,KAAK4d,MAAM/pB,KAAM,UAAW,IAAMktG,EAAY/gG,KAAKs/F,iCAAkCt/F,KAAKmhG,4BAsUpQC,GAAc,SAAqB9/C,GACrC,IAAI+/C,EAAmB//C,EAAM+/C,iBACzBC,EAAgBhgD,EAAMggD,cACtB1L,EAAkBt0C,EAAMs0C,gBACxB2L,EAAgBjgD,EAAMigD,cAE1B,GAAKD,EAAL,CAIA,IAAIE,EAAM,IAASC,eAAiB,IAAStiF,OACzCuiF,EAAgBL,EAAiBM,eAErC,GAAKD,IAILJ,EAAcpuG,SAAQ,SAAU6nB,GAC9B,IAAIgY,EAAOhY,EAASmvE,QAAU0L,IAKV,kBAAT7iE,GAAqB,IAAS9kB,MAAM8kB,IAASA,EAAO,IAAOA,EAAOT,KAI7EvX,EAASswD,OAAOn4E,SAAQ,SAAU03E,GAChC,IAAIh4D,EAAM,IAAI4uF,EAAIzuE,EAAMA,EAAM63C,EAAMn3E,OAASm3E,EAAMpvD,KAAOovD,EAAMxqE,MAAQ,IACxEwS,EAAIg4D,MAAQA,EACZh4D,EAAInf,MAAQm3E,EAhEI,SAAyBh4D,GAC7C/f,OAAOgsB,iBAAiBjM,EAAIg4D,MAAO,CACjCnhE,GAAI,CACFjJ,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,0DACVihB,EAAInf,MAAMN,MAGrBM,MAAO,CACL+M,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,8DACVihB,EAAInf,MAAM2M,OAGrBu9E,YAAa,CACXn9E,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,oEACVihB,EAAInf,MAAM2M,SAgDnBwhG,CAAgBhvF,GAChB8uF,EAAcjuF,OAAOb,SAIpB8uF,EAAc/uF,MAAS+uF,EAAc/uF,KAAK9iB,QAA/C,CAWA,IAJA,IAAI8iB,EAAO+uF,EAAc/uF,KACrBkvF,EAAY,GAGPjyG,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAC3B+iB,EAAK/iB,IACPiyG,EAAU7wG,KAAK2hB,EAAK/iB,IAKxB,IAAIkyG,EAAyBD,EAAUn2F,QAAO,SAAUnd,EAAKqkB,GAC3D,IAAImvF,EAAWxzG,EAAIqkB,EAAIC,YAAc,GAGrC,OAFAkvF,EAAS/wG,KAAK4hB,GACdrkB,EAAIqkB,EAAIC,WAAakvF,EACdxzG,IACN,IAECyzG,EAAmBnvG,OAAOC,KAAKgvG,GAAwBj3D,MAAK,SAAUnvB,EAAG8lC,GAC3E,OAAOhlD,OAAOkf,GAAKlf,OAAOglD,MAG5BwgD,EAAiB9uG,SAAQ,SAAU2f,EAAWk9D,GAC5C,IAAIkyB,EAAWH,EAAuBjvF,GAClCqvF,EAAW1lG,OAAOwlG,EAAiBjyB,EAAM,KAAOwxB,EAEpDU,EAAS/uG,SAAQ,SAAU0f,GACzBA,EAAIE,QAAUovF,WAmChBC,GAAsB,SAA6B1wF,EAAOC,EAAKgB,GACjE,IAAI9iB,EACAgjB,EAEJ,GAAKF,GAIAA,EAAMC,KAMX,IAFA/iB,EAAI8iB,EAAMC,KAAK9iB,OAERD,MACLgjB,EAAMF,EAAMC,KAAK/iB,IAETijB,WAAapB,GAASmB,EAAIE,SAAWpB,GAC3CgB,EAAM2M,UAAUzM,IAkPlBwvF,GAAS,SAAgB50F,GAC3B,MAAsB,kBAARA,GAAoB2jF,SAAS3jF,IAMzC60F,GAAqC,EAAI,GA0DzCC,GAAoB,SAA2B1O,GACjD,IAAI2O,EAAiB3O,EAAY2O,eAC7BzwF,EAAW8hF,EAAY9hF,SACvBg5C,EAAU8oC,EAAY9oC,QACtBt0B,EAAOo9D,EAAYp9D,KACnBgsE,EAAwB5O,EAAY/oC,SACpCqpB,EAAMsuB,EAAsB71C,cAC5BljD,EAAK+4F,EAAsB/4F,GAC3Bg5F,EAAyBD,EAAsBr3C,SAC/CA,OAAsC,IAA3Bs3C,EAAoC,GAAKA,EACpDrzG,EAAQwkG,EAAY8O,WACpBn3C,EAAYqoC,EAAYroC,UACxBo3C,EAAW/O,EAAY+O,SACvBC,EAAaz3C,EAASt7D,OAAS,EAC/BgzG,EAAY,iCAEZjP,EAAY1kC,oBACd2zC,EAAY,wBAA0BjP,EAAY1kC,oBAAsB,IAC/D0kC,EAAYkP,gBACrBD,EAAY,2CAGVjP,EAAYmP,cACdF,GAAa,qBAAuBjP,EAAYmP,aAGlD,IAAIC,EAAoC,kBAAdz3C,EACtBr7D,EAAO0jG,EAAY9oC,QAAQttC,IAAM,UAAY,cAC7CylF,EAAqBD,EAAet3C,GAAkB,CACxDC,eAAgBb,IACb,EAAI,EACT,OAAO56D,EAAO,MAAQgkF,EAAM9kF,GAAS,KAAO8kF,EAAM0uB,GAAc,KAAOI,EAAe,UAAYz3C,EAAY,IAAM03C,EAAqB,IAAM,IAAO,uBAAyBn4C,EAAQr5C,MAAQ,OAASq5C,EAAQp5C,IAAM,KAAQsxF,EAAe,oBAAsBxsE,EAAK/kB,MAAQ,OAAS+kB,EAAK9kB,IAAM,IAAM,IAAO,oBAAsB6wF,EAAhUryG,eAAyW4hB,EAAzW5hB,eAA4YyyG,EAA5YzyG,kBAAkb2yG,EAAlb3yG,eAAsduZ,EAAK,KAGhey5F,GAA6B,SAAoC7yC,GACnE,OAAOA,EAAY,cA2KjB8yC,GAA8B,SAAqC7hD,GACrE,IAAI8hD,EAA2B9hD,EAAM8hD,yBACjCC,EAAkB/hD,EAAM+hD,gBACxBC,EAAkBhiD,EAAMgiD,gBACxBC,EAAajiD,EAAMiiD,WACnBC,EAAgBliD,EAAMkiD,cAE1B,GAAIH,IAAoBC,EACtB,OAAO,EAGT,GAAmB,UAAfC,EAAwB,CAC1B,IAAIE,EAAyBL,EAAyBM,mBAAmB,CACvE10G,KAAM,SAMR,OAAQy0G,GAA0BA,EAAuBz7F,KAAOs7F,EAOlE,GAAmB,SAAfC,GAAyBC,EAAe,CAC1C,IAAIG,EAA6BP,EAAyBQ,sBAAsB,CAC9E50G,KAAM,UAoBR,OAAI20G,GAA8BA,EAA2B37F,KAAOs7F,EAOtE,OAAO,GAmCLO,GAAiB,SAAwBr2C,GAC3C,IAAIwC,EAAkBxC,EAAMwC,gBACxB8zC,EAAct2C,EAAMs2C,YAGxB,QAAK9zC,GAeE5yD,KAAKg6B,MAAM44B,GAAmB8zC,EAAch6C,IAGjDi6C,GAAuC,SAA8CnQ,EAAaoQ,GAGpG,GAAmB,QAAfA,EACF,OAAO,KAGT,IA9DyCC,EACrCH,EA6DA9zC,GA9DqCi0C,EA8DL,CAClCpP,gBAAiBjB,EAAYiB,gBAC7Bt7B,gBAAiBq6B,EAAYr6B,iBA/D3BuqC,EAAc,EAClB,CAAC,QAAS,SAAS5wG,SAAQ,SAAUlE,GACnC,IAAIk1G,EAAiBD,EAAYj1G,EAAO,cAExC,GAAKk1G,EAAL,CAIA,IAEIpyF,EAFAL,EAAQyyF,EAAezyF,MACvBC,EAAMwyF,EAAexyF,IAGJ,kBAAVD,GAAqC,kBAARC,EACtCI,EAAW,IAASimD,OAAOrmD,GAAO,IAASqmD,OAAOtmD,GACxB,kBAAVA,GAAqC,kBAARC,IAC7CI,EAAWJ,EAAMD,GAGK,qBAAbK,GAA4BA,EAAWgyF,IAChDA,EAAchyF,OAKS,kBAAhBgyF,GAA4BA,EAActnG,OAAOspE,mBAC1Dg+B,EAActnG,OAAOsnG,IAGhBA,GAyCP,IAAK9zC,EACH,OAAO,KAGT,IAAIzD,EAAiBqnC,EAAY/oC,SAAS0B,eACtC43C,EAAsBN,GAAe,CACvC7zC,gBAAiBA,EACjB8zC,YAA8B,EAAjBv3C,IAEX63C,EAA2BP,GAAe,CAC5C7zC,gBAAiBA,EACjB8zC,YAAav3C,IAEX83C,EAAwB,sBAAwBzQ,EAAY8O,WAApC,kBAA2E9O,EAAY/oC,SAASphD,GAAhG,sBAAoIumD,EAApI,kCAAiM4jC,EAAY9hF,SAA7M,+BAAgQy6C,EAAhQ,4PAE5B,OAAI43C,GAAuBC,EAClB,CACLE,SAAUH,EAAsB,OAAS,OACzClyF,QAASoyF,GAIN,MAWLE,GAA6B,SAAUC,GAGzC,SAASD,EAAcpmF,EAAU5f,GAC/B,IAAI4G,EAIJ,GAFAA,EAAQq/F,EAAqB7wG,KAAKqM,OAASA,MAEtCme,EACH,MAAM,IAAIupC,UAAU,wCAGtB,GAAoC,oBAAzBvpC,EAASa,YAClB,MAAM,IAAI0oC,UAAU,mCAGtB,IAAKvpC,EAASsmF,YACZ,MAAM,IAAI/8C,UAAU,4BAqJtB,OAjJAviD,EAAM8qD,UAAY9xC,EAAS8xC,UAC3B9qD,EAAMu/F,WAAa,CACjBzhE,KAAM,EACN4oB,MAAO,GAET1mD,EAAMw/F,UAAYv0D,IAElBjrC,EAAMy/F,cAENz/F,EAAMu9F,WAAa,KACnBv9F,EAAMomD,UAAY,KAElBpmD,EAAM0/F,WAAa1mF,EAAS2mF,UAC5B3/F,EAAMqzB,aAAera,EAASa,YAC9B7Z,EAAM4/F,UAAY5mF,EAASmK,SAC3BnjB,EAAM6/F,SAAW7mF,EAASq7B,QAC1Br0C,EAAMwd,UAAYxE,EAASrM,SAC3B3M,EAAM8/F,aAAe9mF,EAASsmF,YAC9Bt/F,EAAM8tD,KAAO90C,EAASw0C,IACtBxtD,EAAM+/F,YAAc/mF,EAASolF,WAC7Bp+F,EAAMggG,uBAAoB,EAC1BhgG,EAAMigG,wBAAqB,EAC3BjgG,EAAMkgG,sBAAwBlnF,EAASmnF,qBACvCngG,EAAMogG,kBAAoBpnF,EAASqnF,iBACnCrgG,EAAMsgG,YAActnF,EAAS6lF,WAC7B7+F,EAAMugG,eAAiBvnF,EAASwnF,cAChCxgG,EAAMygG,kBAAoBznF,EAASkjF,iBACnCl8F,EAAM0gG,OAAS,OACf1gG,EAAM2gG,0BAA4B3nF,EAASilF,yBAC3Cj+F,EAAM4gG,8BAA+B,EACrC5gG,EAAM2pE,kBAAoB3wD,EAAS4wD,iBACnC5pE,EAAM6gG,iBAAmB7nF,EAASkxD,gBAClClqE,EAAMmqD,iCAAmCnxC,EAASmxC,iCAElDnqD,EAAM8gG,oBAAsB,KAC5B9gG,EAAMke,YAAS,EACfle,EAAM+gG,kBAAoB,EAC1B/gG,EAAMghG,gBAAkB,KACxBhhG,EAAMihG,YAAc,KACpBjhG,EAAMkhG,iBAAmB,GACzBlhG,EAAMmhG,gBAAiB,EACvBnhG,EAAMohG,2BAA4B,EAElCphG,EAAMqhG,WAAa,GACnBrhG,EAAMshG,aAAe,EACrBthG,EAAMuhG,YAAc1gF,GAAQ1vB,QAAQf,YAAc,GAClD4P,EAAMwhG,mBAAqB,CACzBxmF,OAAO,EACPI,OAAO,GAETpb,EAAMyhG,2BAA6B,CACjCzmF,MAAO,KACPI,MAAO,MAETpb,EAAM0hG,WAAa,GAMnB1hG,EAAM2hG,WAAa,GACnB3hG,EAAM4hG,eAAiB,CACrB/c,IAAK,GACLD,QAAS,IAEX5kF,EAAM6hG,kBAAmB,EACzB7hG,EAAM8hG,gCAAkC,KAExC9hG,EAAM+hG,qBAAuB,KAC7B/hG,EAAMgiG,cAAgB,GAEtBhiG,EAAMiiG,qBAAuBjpF,EAASkpF,oBACtCliG,EAAMmiG,UAAY,GAClBniG,EAAMoiG,WAAappF,EAASqpF,UAI5BriG,EAAMsiG,gBAAkBtpF,EAASupF,eACjCviG,EAAMwiG,WAAa,CACjBr8C,aAAc,EACdv4B,KAAM,GAER5tB,EAAMyiG,YAAcziG,EAAM0iG,oBAE1B1iG,EAAM2iG,uBAAyB,WAC7B,OAAO3iG,EAAMrB,QAAQ,mBAGvBqB,EAAMsiG,gBAAgBxkG,GAAG,iBAAkBkC,EAAM2iG,wBAEjD3iG,EAAM8/F,aAAa3lG,iBAAiB,cAAc,WAC3C6F,EAAM4iG,mBACT5iG,EAAM6iG,QAAS,MAKnB7iG,EAAM8iG,gBAAiB,EACvB9iG,EAAMytD,QAAU/I,GAAO,iBAAmB1kD,EAAM+/F,YAAc,KAC9DryG,OAAO2Q,eAAe,IAAuB2B,GAAQ,QAAS,CAC5D3E,IAAK,WACH,OAAOR,KAAK6lG,QAEdvlG,IAAK,SAAa4nG,GACZA,IAAaloG,KAAK6lG,SACpB7lG,KAAK4yD,QAAQ5yD,KAAK6lG,OAAS,OAASqC,GACpCloG,KAAK6lG,OAASqC,EACdloG,KAAK8D,QAAQ,mBAKnBqB,EAAMugG,eAAeziG,GAAG,SAAS,WAC3BkC,EAAMgjG,0BACRhjG,EAAMijG,uBAQgB,SAAtBjjG,EAAM+/F,aACR//F,EAAM2gG,0BAA0B7iG,GAAG,yBAAyB,WACtDkC,EAAMgjG,0BACRhjG,EAAMijG,uBAQc,UAAtBjjG,EAAM+/F,aACR//F,EAAM2gG,0BAA0B7iG,GAAG,kBAAkB,WAC/CkC,EAAMkjG,wBACRljG,EAAMmjG,oBAGJnjG,EAAMgjG,0BACRhjG,EAAMijG,uBAKLjjG,EArKT,IAAeo/F,EAAeC,GAwK9B,IAAInkG,EAASkkG,EAAc51G,UA85E3B,OA55EA0R,EAAOwnG,kBAAoB,WACzB,OAAOhQ,GAAmC,CACxCzO,OAAO,EACPjB,eAAgBnoF,KAAK0mG,YACrBj6B,wBAAwB,EACxBsC,iBAAkB/uE,KAAK8uE,kBACvBO,gBAAiBrvE,KAAKgmG,oBAU1B3lG,EAAOukG,YAAc,WACnB5kG,KAAKuoG,sBAAwB,EAC7BvoG,KAAKwoG,cAAgB,EACrBxoG,KAAKyoG,qBAAuB,EAC5BzoG,KAAK0oG,sBAAwB,EAC7B1oG,KAAK2oG,qBAAuB,EAC5B3oG,KAAK4oG,sBAAwB,EAC7B5oG,KAAK6oG,mBAAqB,EAC1B7oG,KAAK8oG,aAAe,GAOtBzoG,EAAOiK,QAAU,WACftK,KAAK8D,QAAQ,WACb9D,KAAK2H,MAAQ,WACb3H,KAAKkV,QACLlV,KAAK+oG,SAED/oG,KAAK4nG,aACP5nG,KAAK4nG,YAAYxlC,YAGnBpiE,KAAK4kG,cAED5kG,KAAKimG,qBACP,IAAS3gG,aAAatF,KAAKimG,qBAGzBjmG,KAAKynG,iBAAmBznG,KAAK8nG,wBAC/B9nG,KAAKynG,gBAAgBh2G,IAAI,iBAAkBuO,KAAK8nG,wBAGlD9nG,KAAKvO,OAGP4O,EAAO2oG,SAAW,SAAkB32G,GAClC2N,KAAKsmG,gBAAkBj0G,EAEnBA,EACF2N,KAAK2mG,mBAAmBxmF,OAAQ,EAGhCngB,KAAK0lG,eAAeuD,YAAY,EAAGjpG,KAAK2iB,cAS5CtiB,EAAO01D,MAAQ,WACM,YAAf/1D,KAAK2H,OAQT3H,KAAK+oG,SAKL/oG,KAAK2H,MAAQ,QAGR3H,KAAKgV,UACRhV,KAAKkpG,kBAhBDlpG,KAAKmmG,kBACPnmG,KAAKmmG,gBAAkB,OAyB7B9lG,EAAO0oG,OAAS,WACV/oG,KAAKmmG,iBAAmBnmG,KAAKmmG,gBAAgBgD,eAC/CnpG,KAAKmmG,gBAAgBgD,gBAIvBnpG,KAAKmmG,gBAAkB,KACvBnmG,KAAK6mG,WAAa,GAClB7mG,KAAK8mG,WAAa,GAClB9mG,KAAK+mG,eAAe/c,IAAM,GAC1BhqF,KAAK+mG,eAAehd,QAAU,GAC9B/pF,KAAK8lG,0BAA0BsD,2BAA2BppG,KAAKklG,aAC/DllG,KAAKgnG,kBAAmB,EACxB,IAAS1hG,aAAatF,KAAKinG,iCAC3BjnG,KAAKinG,gCAAkC,MAGzC5mG,EAAOgpG,eAAiB,SAAwBxN,GAG9C,MAAmB,cAAf77F,KAAK2H,OAA0B3H,KAAKmmG,iBAKnCnmG,KAAKmmG,iBAAmBnmG,KAAKmmG,gBAAgBtK,YAAcA,GAJ9D77F,KAAK2H,MAAQ,SACN,IAiBXtH,EAAOzO,MAAQ,SAAe03G,GAO5B,MANsB,qBAAXA,IACTtpG,KAAK4yD,QAAQ,kBAAmB02C,GAChCtpG,KAAKqjB,OAASimF,GAGhBtpG,KAAKmmG,gBAAkB,KAChBnmG,KAAKqjB,QAGdhjB,EAAOkpG,YAAc,WACnBvpG,KAAKgoG,QAAS,EAEVhoG,KAAK4nG,aAEP/P,GAAwB73F,KAAK4nG,aAG/B5nG,KAAKwmG,WAAW32G,OAAS,EACzBmQ,KAAKkV,QACLlV,KAAK8D,QAAQ,UAUfzD,EAAOmpG,UAAY,WACjB,IAAI5U,EAAY50F,KAAKypG,gBAErB,IAAKzpG,KAAK0lG,iBAAmB9Q,EAC3B,OAAO5uE,GAAQrU,mBAGjB,GAAyB,SAArB3R,KAAKklG,YAAwB,CAC/B,IAAIna,EAAW6J,EAAU7J,SACrBC,EAAW4J,EAAU5J,SACrBiP,EAAUrF,EAAUqF,QAExB,GAAIjP,GAAYD,IAAa/qF,KAAKsmG,iBAAmBrM,EACnD,OAAOj6F,KAAK0lG,eAAe7zF,WAG7B,GAAIm5E,EACF,OAAOhrF,KAAK0lG,eAAegE,gBAM/B,OAAO1pG,KAAK0lG,eAAeiE,iBAc7BtpG,EAAOupG,kBAAoB,SAA2BrtG,EAAK+D,GAKzD,QAJY,IAARA,IACFA,GAAM,IAGH/D,EACH,OAAO,KAGT,IAAIkN,EAAKkvD,GAAcp8D,GACnBstG,EAAY7pG,KAAKmnG,cAAc19F,GAYnC,OAVInJ,IAAQupG,GAAattG,EAAIi8D,QAC3Bx4D,KAAKmnG,cAAc19F,GAAMogG,EAAY,CACnCr7C,YAAajyD,EAAIiyD,YACjBqJ,UAAWt7D,EAAIs7D,UACfW,MAAOj8D,EAAIi8D,MACXhhD,OAAQjb,EAAIib,OACZ24E,WAAY5zF,EAAI4zF,aAIb0Z,GAAattG,GActB8D,EAAOypG,WAAa,SAAoB32G,EAAKmN,GAK3C,QAJY,IAARA,IACFA,GAAM,IAGHnN,EACH,OAAO,KAGT,IAAIsW,EAAKovD,GAAa1lE,GAClB42G,EAAY/pG,KAAKsnG,UAAU79F,GAG3BzJ,KAAKonG,sBAAwB9mG,IAAQypG,GAAa52G,EAAIqlE,QACxDx4D,KAAKsnG,UAAU79F,GAAMsgG,EAAY,CAC/Bv7C,YAAar7D,EAAIq7D,YACjBgK,MAAOrlE,EAAIqlE,QAIf,IAAIhjE,EAAS,CACXg5D,aAAcu7C,GAAa52G,GAAKq7D,aAOlC,OAJIu7C,IACFv0G,EAAOgjE,MAAQuxC,EAAUvxC,OAGpBhjE,GAUT6K,EAAO2pG,mBAAqB,WAC1B,OAAOhqG,KAAKiqG,YAAcjqG,KAAKgV,UAOjC3U,EAAOwf,KAAO,WAKZ,GAHA7f,KAAKkpG,iBAGAlpG,KAAKiqG,UAKV,MAAmB,SAAfjqG,KAAK2H,OAAoB3H,KAAKgqG,qBACzBhqG,KAAKkqG,cAKTlqG,KAAKgqG,sBAAuC,UAAfhqG,KAAK2H,OAAoC,SAAf3H,KAAK2H,QAIjE3H,KAAK2H,MAAQ,WAWftH,EAAO6pG,MAAQ,WAKb,OAJAlqG,KAAK2H,MAAQ,QAGb3H,KAAKmqG,kBACEnqG,KAAKkpG,kBASd7oG,EAAOwqD,SAAW,SAAkBu/C,EAAa7rG,GAK/C,QAJgB,IAAZA,IACFA,EAAU,IAGP6rG,EAAL,CAIA,IAAIC,EAAcrqG,KAAKiqG,UACnBrW,EAAc5zF,KAAKmmG,gBACvBnmG,KAAKiqG,UAAYG,EACjBpqG,KAAKomG,YAAc7nG,EAQA,SAAfyB,KAAK2H,QACPyiG,EAAYE,SAAW,CACrB39C,cAAey9C,EAAYz9C,cAC3B55B,KAAM,GAUiB,SAArB/yB,KAAKklG,aACPllG,KAAKynG,gBAAgB8C,2BAA2BH,IAIpD,IAAII,EAAQ,KAgBZ,GAdIH,IACEA,EAAY5gG,GACd+gG,EAAQH,EAAY5gG,GACX4gG,EAAY7sF,MACrBgtF,EAAQH,EAAY7sF,MAIxBxd,KAAK4yD,QAAQ,oBAAsB43C,EAAQ,QAAUJ,EAAY3gG,IAAM2gG,EAAY5sF,KAAO,KAG1Fxd,KAAK8D,QAAQ,kBAGM,SAAf9D,KAAK2H,OAAoB3H,KAAKgqG,qBAChC,OAAOhqG,KAAKkqG,QAGd,IAAKG,GAAeA,EAAY7sF,MAAQ4sF,EAAY5sF,IAoBlD,OAnBwB,OAApBxd,KAAK0iG,aASF0H,EAAYn+C,QAGfjsD,KAAKyqG,eAFLzqG,KAAK0qG,eAMT1qG,KAAKmlG,uBAAoB,OACzBnlG,KAAK8D,QAAQ,kBAOf,IAAI6mG,EAAoBP,EAAYz9C,cAAgB09C,EAAY19C,cAKhE,GAJA3sD,KAAK4yD,QAAQ,sBAAwB+3C,EAAoB,KAIjC,OAApB3qG,KAAK0iG,WAKP,GAJA1iG,KAAK0iG,YAAciI,EAIf3qG,KAAK0iG,WAAa,EACpB1iG,KAAK0iG,WAAa,KAClB1iG,KAAKurD,UAAY,SACZ,CACL,IAAIT,EAAU9qD,KAAKiqG,UAAU9+C,SAASnrD,KAAK0iG,YAI3C,GAAI1iG,KAAKurD,aAAeT,EAAQC,QAAUD,EAAQC,MAAMl7D,SAAWi7D,EAAQC,MAAM/qD,KAAKurD,YAAa,CACjG,IAAIm3C,EAAa1iG,KAAK0iG,WACtB1iG,KAAK4yD,QAAQ,oCAAsC5yD,KAAKurD,UAAY,uBACpEvrD,KAAK0qG,cAIL1qG,KAAK0iG,WAAaA,GAQpB9O,IACFA,EAAY8O,YAAciI,EAEtB/W,EAAY8O,WAAa,GAC3B9O,EAAY8O,WAAa,KACzB9O,EAAYroC,UAAY,OAKpBqoC,EAAY8O,YAAc,IAC5B9O,EAAY9oC,QAAUs/C,EAAYj/C,SAASyoC,EAAY8O,aAGrD9O,EAAYroC,WAAa,GAAKqoC,EAAY9oC,QAAQC,QACpD6oC,EAAYp9D,KAAOo9D,EAAY9oC,QAAQC,MAAM6oC,EAAYroC,cAK/DvrD,KAAKynG,gBAAgBmD,uBAAuBP,EAAaD,KAU3D/pG,EAAO6U,MAAQ,WACTlV,KAAKimG,sBACP,IAAS3gG,aAAatF,KAAKimG,qBAC3BjmG,KAAKimG,oBAAsB,OAU/B5lG,EAAO2U,OAAS,WACd,OAAoC,OAA7BhV,KAAKimG,qBAUd5lG,EAAO8pG,gBAAkB,SAAyBhrC,GAChDn/D,KAAKgoG,QAAS,EACdhoG,KAAK2mG,mBAAqB,CACxBxmF,OAAO,EACPI,OAAO,GAETvgB,KAAK0qG,cAIL1qG,KAAKzG,OAAO,EAAG+4B,IAAU6sC,GAErBn/D,KAAK4nG,cACP5nG,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,wBAGVt0F,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,YAYdj0F,EAAOqqG,YAAc,WACnB1qG,KAAKioG,gBAAiB,EACtBjoG,KAAKyqG,gBAQPpqG,EAAOoqG,aAAe,WAChBzqG,KAAK4nG,aAEP/P,GAAwB73F,KAAK4nG,aAG/B5nG,KAAK0iG,WAAa,KAClB1iG,KAAKurD,UAAY,KACjBvrD,KAAK2nG,WAAa,KAClB3nG,KAAKumG,2BAA4B,EACjCvmG,KAAK6mG,WAAa,GAClB7mG,KAAK8mG,WAAa,GAClB9mG,KAAK+mG,eAAe/c,IAAM,GAC1BhqF,KAAK+mG,eAAehd,QAAU,GAC9B/pF,KAAK+1D,QAED/1D,KAAK4nG,aACP5nG,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,4BAedj0F,EAAO9G,OAAS,SAAgBkY,EAAOC,EAAKytD,EAAM0rC,GAmBhD,QAlBa,IAAT1rC,IACFA,EAAO,mBAGK,IAAV0rC,IACFA,GAAQ,GAMNn5F,IAAQ4gB,MACV5gB,EAAM1R,KAAK2iB,aAMTjR,GAAOD,EACTzR,KAAK4yD,QAAQ,gEAIf,GAAK5yD,KAAK0lG,gBAAmB1lG,KAAKypG,gBAAlC,CAOA,IAAIqB,EAAmB,EAEnBC,EAAiB,WAGM,MAFzBD,GAGE3rC,KAwBJ,IAAK,IAAIzsD,KApBLm4F,GAAU7qG,KAAKsmG,iBACjBwE,IACA9qG,KAAK0lG,eAAeuD,YAAYx3F,EAAOC,EAAKq5F,KAW1CF,GAA8B,SAArB7qG,KAAKklG,eAChBllG,KAAKwmG,WAn0CW,SAAyB/tC,EAAQhnD,EAAOC,EAAKs5F,GAMjE,IALA,IAAIj4B,EAAW31E,KAAKiwE,MAAM57D,EAAQu5F,GAAW,oBACzC7zB,EAAS/5E,KAAKiwE,MAAM37D,EAAMs5F,GAAW,oBACrCC,EAAgBxyC,EAAOnpE,QACvBM,EAAI6oE,EAAO5oE,OAERD,OACD6oE,EAAO7oE,GAAGk7E,KAAOqM,KAKvB,IAAW,IAAPvnF,EAEF,OAAOq7G,EAKT,IAFA,IAAI9/E,EAAIv7B,EAAI,EAELu7B,OACDstC,EAAOttC,GAAG2/C,KAAOiI,KAQvB,OAFA5nD,EAAI/tB,KAAKC,IAAI8tB,EAAG,GAChB8/E,EAAc17G,OAAO47B,EAAGv7B,EAAIu7B,EAAI,GACzB8/E,EAuyCeC,CAAgBlrG,KAAKwmG,WAAY/0F,EAAOC,EAAK1R,KAAKymG,cACpEqE,IACA9qG,KAAK0lG,eAAeyF,YAAY15F,EAAOC,EAAKq5F,IAI5B/qG,KAAK4lG,kBACrBzD,GAAoB1wF,EAAOC,EAAK1R,KAAK4lG,kBAAkBlzF,IAGzDyvF,GAAoB1wF,EAAOC,EAAK1R,KAAKqlG,uBAErC0F,SA1CE/qG,KAAK4yD,QAAQ,qEAmDjBvyD,EAAO6oG,eAAiB,WAClBlpG,KAAKimG,qBACP,IAAS3gG,aAAatF,KAAKimG,qBAG7BjmG,KAAKimG,oBAAsB,IAAS/mG,WAAWc,KAAKorG,mBAAmB3mG,KAAKzE,MAAO,IAUrFK,EAAO+qG,mBAAqB,WACP,UAAfprG,KAAK2H,OACP3H,KAAKqrG,cAGHrrG,KAAKimG,qBACP,IAAS3gG,aAAatF,KAAKimG,qBAG7BjmG,KAAKimG,oBAAsB,IAAS/mG,WAAWc,KAAKorG,mBAAmB3mG,KAAKzE,MA/vCvD,MA4wCvBK,EAAOgrG,YAAc,WAGnB,IAAIrrG,KAAK0lG,eAAe4F,WAAxB,CAKA,IAAI1X,EAAc5zF,KAAKurG,qBAElB3X,IAIsC,kBAAhCA,EAAYgC,kBACrB51F,KAAKumG,2BAA4B,EACjCvmG,KAAK8lG,0BAA0BlC,sBAAsB,CACnD50G,KAAMgR,KAAKklG,YACXn9F,KAAM/H,KAAKkmG,iBACXl+F,GAAI4rF,EAAY+O,YAIpB3iG,KAAKwrG,aAAa5X,MAapBvzF,EAAO0nG,eAAiB,SAAwBrF,EAAY73C,EAAUU,GAapE,QAZmB,IAAfm3C,IACFA,EAAa1iG,KAAK0iG,iBAGH,IAAb73C,IACFA,EAAW7qD,KAAKiqG,gBAGA,IAAd1+C,IACFA,EAAYvrD,KAAKurD,YAGdV,IAAa7qD,KAAKilG,aACrB,OAAO,EAGT,IAAIn6C,EAAgC,kBAAf43C,GAA2B73C,EAASM,SAASu3C,GAE9D+I,EAAsB/I,EAAa,IAAM73C,EAASM,SAASt7D,OAE3D67G,GAAoB5gD,IAAYA,EAAQC,OAASQ,EAAY,IAAMT,EAAQC,MAAMl7D,OAIrF,OAAOg7D,EAASoB,SAA4C,SAAjCjsD,KAAKilG,aAAa5lG,YAAyBosG,GAAuBC,GAS/FrrG,EAAOkrG,mBAAqB,WAC1B,IAAI15F,EAAW7R,KAAKwpG,YAChBnzE,EAAcq0B,GAAgB74C,IAAa,EAC3C85F,EAAehhD,GAAY94C,EAAU7R,KAAKw4B,gBAC1CozE,GAAa5rG,KAAK6kG,cAAgB8G,GAAgB,EAClDE,EAAmBF,GAAgB3rG,KAAKulG,oBACxCp6C,EAAWnrD,KAAKiqG,UAAU9+C,SAK9B,IAAKA,EAASt7D,QAAU+7G,GAAaC,EACnC,OAAO,KAGT7rG,KAAK2nG,WAAa3nG,KAAK2nG,YAAc3nG,KAAKynG,gBAAgBqE,aAAa9rG,KAAKiqG,UAAWjqG,KAAK2iB,YAAa3iB,KAAKkmG,iBAAkBlmG,KAAKw4B,gBACrI,IAAIhR,EAAO,CACT+jC,UAAW,KACXm3C,WAAY,KACZH,eAAgB,KAChB13C,SAAU7qD,KAAKiqG,UACfnH,cAAejtG,SAASmK,KAAK2nG,aAG/B,GAAIngF,EAAKs7E,cACPt7E,EAAKk7E,WA34CmB,SAAiCW,EAAiBl4C,EAAU4gD,GACxF5gD,EAAWA,GAAY,GAIvB,IAHA,IAAI6gD,EAAmB,GACnBj5E,EAAO,EAEFnjC,EAAI,EAAGA,EAAIu7D,EAASt7D,OAAQD,IAAK,CACxC,IAAIk7D,EAAUK,EAASv7D,GAEvB,GAAIyzG,IAAoBv4C,EAAQ63C,WAC9BqJ,EAAiBh7G,KAAKpB,IACtBmjC,GAAQ+3B,EAAQh5C,UAELi6F,GACT,OAAOn8G,EAKb,OAAgC,IAA5Bo8G,EAAiBn8G,OACZ,EAIFm8G,EAAiBA,EAAiBn8G,OAAS,GAo3C5Bo8G,CAAwBjsG,KAAKkmG,iBAAkB/6C,EAAU90B,QACtE,GAAwB,OAApBr2B,KAAK0iG,WAAqB,CACnC,IAAI53C,EAAUK,EAASnrD,KAAK0iG,YACxBn3C,EAAsC,kBAAnBvrD,KAAKurD,UAAyBvrD,KAAKurD,WAAa,EACvE/jC,EAAK+6E,eAAiBz3C,EAAQp5C,IAAMo5C,EAAQp5C,IAAM2kB,EAE9Cy0B,EAAQC,OAASD,EAAQC,MAAMQ,EAAY,IAC7C/jC,EAAKk7E,WAAa1iG,KAAK0iG,WACvBl7E,EAAK+jC,UAAYA,EAAY,GAE7B/jC,EAAKk7E,WAAa1iG,KAAK0iG,WAAa,MAEjC,CAEL,IAAIwJ,EAAwBj9C,GAASC,oBAAoB,CACvDI,iCAAkCtvD,KAAKsvD,iCACvCzE,SAAU7qD,KAAKiqG,UACfjrF,YAAahf,KAAKioG,eAAiB5xE,EAAcr2B,KAAKw4B,eACtD62B,kBAAmBrvD,KAAK2nG,WAAWp8C,UACnC6D,qBAAsBpvD,KAAK2nG,WAAWr8C,aACtCz4C,UAAW7S,KAAK2nG,WAAW50E,OAEzBu4B,EAAe4gD,EAAsB5gD,aACrCz4C,EAAYq5F,EAAsBr5F,UAClCs5F,EAAaD,EAAsB3gD,UAEvC/jC,EAAK0nC,oBAAsBlvD,KAAKioG,eAAiB,eAAiB5xE,EAAc,eAAiBr2B,KAAKw4B,eACtGhR,EAAKk7E,WAAap3C,EAClB9jC,EAAK+6E,eAAiB1vF,EACtB2U,EAAK+jC,UAAY4gD,EAGnB,IAAIC,EAAcjhD,EAAS3jC,EAAKk7E,YAC5BhvC,EAAW04C,GAAyC,kBAAnB5kF,EAAK+jC,WAA0B6gD,EAAYrhD,OAASqhD,EAAYrhD,MAAMvjC,EAAK+jC,WAGhH,IAAK6gD,GAAyC,kBAAnB5kF,EAAK+jC,YAA2BmI,EACzD,OAAO,KAcT,GAT8B,kBAAnBlsC,EAAK+jC,WAA0B6gD,EAAYrhD,QACpDvjC,EAAK+jC,UAAY,EACjBmI,EAAW04C,EAAYrhD,MAAM,KAO1B4gD,GAAgBj4C,IAAaA,EAASqvC,YACzC,GAAuB,IAAnBv7E,EAAK+jC,UAAiB,CACxB,IAAIE,EAAcN,EAAS3jC,EAAKk7E,WAAa,GACzC2J,EAAsB5gD,EAAYV,OAASU,EAAYV,MAAMl7D,QAAU47D,EAAYV,MAAMU,EAAYV,MAAMl7D,OAAS,GAEpHw8G,GAAuBA,EAAoBtJ,cAC7Cv7E,EAAKk7E,YAAc,EACnBl7E,EAAK+jC,UAAYE,EAAYV,MAAMl7D,OAAS,EAC5C23B,EAAKu7E,YAAc,yBAEZqJ,EAAYrhD,MAAMvjC,EAAK+jC,UAAY,GAAGw3C,cAC/Cv7E,EAAK+jC,WAAa,EAClB/jC,EAAKu7E,YAAc,iBAIvB,IAAIv6E,EAAQxoB,KAAKilG,cAAiD,UAAjCjlG,KAAKilG,aAAa5lG,WAKnD,OAAImoB,EAAKk7E,YAAcv3C,EAASt7D,OAAS,GAAK24B,IAAUxoB,KAAKglG,WACpD,KAGFhlG,KAAKssG,qBAAqB9kF,IAGnCnnB,EAAOisG,qBAAuB,SAA8B/tG,GAC1D,IAAIwkG,EAAcxkG,EAAQwkG,YACtBl4C,EAAWtsD,EAAQssD,SACnB63C,EAAankG,EAAQmkG,WACrBH,EAAiBhkG,EAAQgkG,eACzBO,EAAgBvkG,EAAQukG,cACxBv3C,EAAYhtD,EAAQgtD,UACpBghD,EAAuBhuG,EAAQguG,qBAC/Br9C,EAAsB3wD,EAAQ2wD,oBAC9BpE,EAAUD,EAASM,SAASu3C,GAC5BlsE,EAA4B,kBAAd+0B,GAA0BT,EAAQC,MAAMQ,GACtDqoC,EAAc,CAChBiI,UAAW,kBAAoBz+F,KAAKovG,SAEpChvF,IAAKgZ,GAAQA,EAAKg4B,aAAe1D,EAAQ0D,YAEzCk0C,WAAYA,EACZn3C,UAAW/0B,EAAO+0B,EAAY,KAG9Bu3C,cAAeA,EACfP,eAAgBA,EAEhB13C,SAAUA,EAEV2N,MAAO,KAEP6gC,eAAgB,KAGhBzD,gBAAiB,KAEjB+M,SAAU73C,EAAQ63C,SAElB7wF,SAAU0kB,GAAQA,EAAK1kB,UAAYg5C,EAAQh5C,SAE3Cg5C,QAASA,EACTt0B,KAAMA,EACNwgC,WAAY,EACZ4vB,WAAY5mF,KAAK4nG,YAEjB14C,oBAAqBA,EACrB6zC,YAAaA,GAEX0J,EAAgD,qBAAzBF,EAAuCA,EAAuBvsG,KAAKumG,0BAC9F3S,EAAYgC,gBAAkB51F,KAAK0sG,2BAA2B,CAC5DpJ,gBAAiBx4C,EAAQ63C,SACzBU,gBAAiBrjG,KAAKkmG,iBACtB3D,eAAgBA,EAChB1wF,SAAU7R,KAAKwpG,YACfiD,cAAeA,IAEjB,IAAIE,EAAmBjiD,GAAgB1qD,KAAK0lG,eAAeiE,iBAc3D,MAZgC,kBAArBgD,IAGT/Y,EAAYsC,iBAAmByW,EAAmB3sG,KAAK0lG,eAAekH,wBAGpE5sG,KAAK0lG,eAAegE,gBAAgB75G,SACtC+jG,EAAYnM,gBA/qDQ,SAA6BhvB,EAAQz5C,EAAagsF,GAC1E,GAA2B,qBAAhBhsF,GAA+C,OAAhBA,IAAyBy5C,EAAO5oE,OACxE,MAAO,GAIT,IACID,EADAi9G,EAAiBzvG,KAAKiwE,MAAMruD,EAAcgsF,EAAU,GAAK,oBAG7D,IAAKp7G,EAAI,EAAGA,EAAI6oE,EAAO5oE,UACjB4oE,EAAO7oE,GAAGk7E,IAAM+hC,GADSj9G,KAM/B,OAAO6oE,EAAOnpE,MAAMM,GAgqDck9G,CAAoB9sG,KAAKwmG,WAEvDxmG,KAAKw4B,eAAiBx4B,KAAK0lG,eAAeqH,uBAAwB/sG,KAAKymG,eAGlE7S,GAMTvzF,EAAOqsG,2BAA6B,SAAoCnuG,GACtE,OAr4CE+kG,GAD6DlzF,EAs4C9B7R,GAr4CR+kG,gBACvBD,EAAkBjzF,EAAKizF,gBACvBd,EAAiBnyF,EAAKmyF,eACtB1wF,EAAWzB,EAAKyB,SACAzB,EAAKq8F,eAOHnJ,IAAoBD,EA4BtCC,EAAkBD,EACbd,EAQF1wF,EAAShiB,OAASgiB,EAASH,IAAIG,EAAShiB,OAAS,GAAK0yG,EApCpD,KAbqB,IAAmCnyF,EAC7DkzF,EACAD,EACAd,EACA1wF,GA+4CJxR,EAAO2sG,sBAAwB,SAA+B7T,GAC5D,IAAIn5F,KAAKizD,KAAKr1C,MAAM5I,UAGnBhV,KAAKomG,YAAY7gG,SACjBvF,KAAKiqG,UAAUtyG,WAAW02D,aAOvBxgE,KAAKC,OAASqrG,EAAMoD,sBAAwB1uG,KAAKC,OAAS,KAA9D,CAIA,IAAIkxB,EAAchf,KAAKw4B,eACnBy0E,EAAoB9T,EAAMlpC,UAC1BD,EAAkBhwD,KAAKmmG,gBAAgBr0F,SACvCo7F,EAAuBj+C,GAASc,2BAA2BC,EAAiBi9C,EAAmBjtG,KAAKiqG,UAAW9Q,EAAMjpC,eAIrHi9C,EAr4gBgB,SAA2Bt7F,EAAUmN,EAAakkB,GAMxE,YALqB,IAAjBA,IACFA,EAAe,KAGCrxB,EAAShiB,OAASgiB,EAASH,IAAIG,EAAShiB,OAAS,GAAK,GAClDmvB,GAAekkB,EA+3gBTkqE,CAAkBptG,KAAKwpG,YAAaxqF,EAAahf,KAAKizD,KAAKr1C,MAAMslB,gBAAkB,EAG7G,KAAIgqE,GAAwBC,GAA5B,CAIA,IAAIE,EAlpE8B,SAAyClvF,GAC7E,IAAI6tC,EAAS7tC,EAAS6tC,OAClBhtC,EAAcb,EAASa,YACvBixC,EAAY9xC,EAAS8xC,UACrBn+C,EAAWqM,EAASrM,SACpBk+C,EAAkB7xC,EAAS6xC,gBAC3Bo9C,EAAoBjvF,EAASivF,kBAC7B/J,EAAkBllF,EAASklF,gBAC3BqE,EAAiBvpF,EAASupF,eAG1B4F,EAAsBthD,EAAOmC,UAAUn8D,QAAO,SAAU64D,GAC1D,OAAQoE,GAASlB,eAAelD,MAI9B0iD,EAAmBD,EAAoBt7G,OAAOi9D,GAASjB,WAEtDu/C,EAAiB19G,SAIpB09G,EAAmBD,EAAoBt7G,QAAO,SAAU64D,GACtD,OAAQoE,GAASY,WAAWhF,OAIhC,IACI2iD,EADqBD,EAAiBv7G,OAAOi9D,GAASn4C,aAAarS,KAAK,KAAM,cACpClI,KAAI,SAAUsuD,GAC1D,IAGI4iD,EAHY/F,EAAeoE,aAAajhD,EAAU/4C,EAAUuxF,EAAiBrkF,GAGnD,EAAI,EAGlC,MAAO,CACL6rC,SAAUA,EACV6iD,kBAJwBz+C,GAASc,2BAA2BC,EAAiBC,EAAWpF,GAC5C4iD,EAAcL,MAM1DO,EAAyBH,EAAqBx7G,QAAO,SAAU47G,GACjE,OAAOA,EAASF,mBAAqB,KAOvC,OAJA/O,GAAWgP,GAAwB,SAAUjyF,EAAG8lC,GAC9C,OAAOu9C,GAAyBv9C,EAAEqJ,SAAUnvC,EAAEmvC,aAG5C8iD,EAAuB99G,OAClB89G,EAAuB,IAGhChP,GAAW6O,GAAsB,SAAU9xF,EAAG8lC,GAC5C,OAAO9lC,EAAEgyF,kBAAoBlsD,EAAEksD,qBAE1BF,EAAqB,IAAM,MA2lEVK,CAAgC,CACpD7hD,OAAQhsD,KAAKizD,KAAK9E,UAAUnC,OAC5BhtC,YAAaA,EACbixC,UAAWg9C,EACXn7F,SAAU9R,KAAK2iB,YACfqtC,gBAAiBA,EACjBo9C,kBAAmBD,EACnB9J,gBAAiBrjG,KAAKkmG,iBACtBwB,eAAgB1nG,KAAKynG,kBAGvB,GAAK4F,EAAL,CAIA,IACIS,EADoBZ,EAAuBC,EACAE,EAAgBK,kBAC3DK,EAAoB,GAIpBZ,GAAuBrjD,KACzBikD,EAAoB,IAGjBV,EAAgBxiD,UAAYwiD,EAAgBxiD,SAASrtC,MAAQxd,KAAKiqG,UAAUzsF,KAAOswF,EAAuBC,IAO/G/tG,KAAKiwD,UAAYo9C,EAAgBxiD,SAASlzD,WAAW02D,UAAYuS,GAAOM,mBAAqB,EAC7FlhE,KAAK8D,QAAQ,mBAGfzD,EAAO2tG,aAAe,SAAsBpa,GAC1C5zF,KAAK4yD,QAAQ,YAAc0vC,GAAkB1O,IAC7C5zF,KAAKyoG,sBAAwB,GAa/BpoG,EAAO4tG,gBAAkB,SAAyBlyG,EAAOmyG,GACvDluG,KAAKgtG,sBAAsBkB,EAAc/U,OAErCn5F,KAAKqpG,eAAe6E,EAAcrS,YAItC77F,KAAK8D,QAAQ,aAGfzD,EAAO8tG,iBAAmB,SAA0BD,EAAetZ,GACjE50F,KAAKgtG,sBAAsBkB,EAAc/U,OAErCn5F,KAAKqpG,eAAe6E,EAAcrS,YAIlC77F,KAAKouG,2BAA2BxZ,KAIpCA,EAAYA,GAAa,GAxsDV,SAAsBl5E,EAAG8lC,GAI1C,IAAK9lC,IAAM8lC,IAAM9lC,GAAK8lC,GAAK9lC,IAAM8lC,EAC/B,OAAO,EAIT,GAAI9lC,IAAM8lC,EACR,OAAO,EAKT,IAAI6sD,EAAQx7G,OAAOC,KAAK4oB,GAAGmvB,OACvByjE,EAAQz7G,OAAOC,KAAK0uD,GAAG3W,OAE3B,GAAIwjE,EAAMx+G,SAAWy+G,EAAMz+G,OACzB,OAAO,EAGT,IAAK,IAAID,EAAI,EAAGA,EAAIy+G,EAAMx+G,OAAQD,IAAK,CACrC,IAAIuD,EAAMk7G,EAAMz+G,GAEhB,GAAIuD,IAAQm7G,EAAM1+G,GAChB,OAAO,EAIT,GAAI8rB,EAAEvoB,KAASquD,EAAEruD,GACf,OAAO,EAIX,OAAO,EAyqDAo7G,CAAavuG,KAAKmlG,kBAAmBvQ,KACxC50F,KAAK2mG,mBAAqB,CACxBxmF,OAAO,EACPI,OAAO,GAETvgB,KAAKolG,mBAAqBxQ,EAC1B50F,KAAKmlG,kBAAoBvQ,EACzB50F,KAAK4yD,QAAQ,mBAAoBgiC,GACjC50F,KAAK8D,QAAQ,cAKX9D,KAAKqpG,eAAe6E,EAAcrS,aAMtC77F,KAAKmmG,gBAAgBvR,UAAYA,EAE7B50F,KAAKmoG,0BACPnoG,KAAKooG,uBAIT/nG,EAAOmuG,kBAAoB,SAA2BN,EAAe79C,EAAWo+C,EAAU17E,GAGxF,GAFA/yB,KAAKgtG,sBAAsBkB,EAAc/U,QAErCn5F,KAAKqpG,eAAe6E,EAAcrS,WAAtC,CAIA,IAAIjI,EAAc5zF,KAAKmmG,gBACnBuI,EAAqBxL,GAA2B7yC,GACpDujC,EAAY8a,GAAsB9a,EAAY8a,IAAuB,GACrE9a,EAAY8a,GAAoBD,GAAY17E,EAC5C/yB,KAAK4yD,QAAQ,eAAiBvC,EAAY,MAAQo+C,EAAW,MAAQ17E,GAEjE/yB,KAAKmoG,0BACPnoG,KAAKooG,sBAIT/nG,EAAOsuG,gBAAkB,SAAyBT,EAAeU,GAC/D,IAAIhoG,EAAS5G,KAIb,GAFAA,KAAKgtG,sBAAsBkB,EAAc/U,QAErCn5F,KAAKqpG,eAAe6E,EAAcrS,WAMtC,GAA2B,IAAvB+S,EAAY/+G,OAQhB,GAHkBmQ,KAAKmmG,gBAGN0I,iBAAjB,CAKA,IAAIjZ,EAAiE,OAA/C51F,KAAK0lG,eAAeqH,uBAAkC/sG,KAAK0lG,eAAekH,uBAAyB5sG,KAAK0lG,eAAeqH,uBACzI+B,EAAgB,GAEpBF,EAAY17G,SAAQ,SAAU62F,GAG5B+kB,EAAc/kB,EAAQ1kB,QAAUypC,EAAc/kB,EAAQ1kB,SAAW,CAE/DxyD,UAAWyf,IACXhY,SAAU,GAEVxH,QAAS,GAEX,IAAIi8F,EAAeD,EAAc/kB,EAAQ1kB,QACzC0pC,EAAal8F,UAAYzV,KAAKE,IAAIyxG,EAAal8F,UAAWk3E,EAAQl3E,UAAY+iF,GAC9EmZ,EAAaj8F,QAAU1V,KAAKC,IAAI0xG,EAAaj8F,QAASi3E,EAAQj3E,QAAU8iF,GACxEmZ,EAAaz0F,SAAStpB,KAAK+4F,MAE7Bl3F,OAAOC,KAAKg8G,GAAe57G,SAAQ,SAAU87G,GAC3C,IAAIC,EAAwBH,EAAcE,GACtCn8F,EAAYo8F,EAAsBp8F,UAClCC,EAAUm8F,EAAsBn8F,QAChCwH,EAAW20F,EAAsB30F,SACjC+mF,EAAmBz6F,EAAOg/F,kBAE9Bh/F,EAAOgsD,QAAQ,oBAAsB//C,EAAY,OAASC,EAAU,QAAUk8F,GA3rE/C,SAAwC3N,EAAkBruF,EAAMgpE,GACnG,IAAKqlB,EAAiBrlB,GAAgB,CACpChpE,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,YAER8iB,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,YAER,IAAIg/G,EAAalzB,EAEb,UAAU7qF,KAAK6qF,KACjBkzB,EAAa,UAAYlzB,EAAcxiF,MAAM,KAAK,IAGpD,IAAIkZ,EAAQM,EAAKM,aAAayE,aAAam3F,GAE3C,GAAIx8F,EAIF2uF,EAAiBrlB,GAAiBtpE,MAC7B,CAGL,IACI+B,EAAQunE,EACRnxE,EAAWmxE,EACXmzB,GAAM,EACNC,GAJkBp8F,EAAKzJ,SAASopD,KAAO3/C,EAAKzJ,SAASopD,IAAI0c,iBAAmB,IAI3C6/B,GAEjCE,IACF36F,EAAQ26F,EAAe36F,MACvB5J,EAAWukG,EAAevkG,SAC1BskG,EAAMC,EAAwB,SAKhC/N,EAAiBrlB,GAAiBhpE,EAAKQ,mBAAmB,CACxD2F,KAAM,WACN1P,GAAIylG,EAEJ,QAAWC,EACX16F,MAAOA,EACP5J,SAAUA,IACT,GAAO6H,QA8oEV28F,CAA+BhO,EAAkBz6F,EAAOqsD,KAAKr1C,MAAOoxF,GAKpE7M,GAAoBtvF,EAAWC,EAASuuF,EAAiB2N,IApoE1C,SAAwB5+F,GAC3C,IAAIixF,EAAmBjxF,EAAKixF,iBACxBiO,EAAel/F,EAAKk/F,aACpB1Z,EAAkBxlF,EAAKwlF,gBAE3B,GAAK0Z,EAAL,CAIA,IAAI9N,EAAM,IAASC,eAAiB,IAAStiF,OAC7CmwF,EAAap8G,SAAQ,SAAU62F,GAC7B,IAAIr3E,EAAQq3E,EAAQ1kB,OACpBg8B,EAAiB3uF,GAAOe,OAAO,IAAI+tF,EAAIzX,EAAQl3E,UAAY+iF,EAAiB7L,EAAQj3E,QAAU8iF,EAAiB7L,EAAQ1xF,WAynErHk3G,CAAe,CACbD,aAAch1F,EACd+mF,iBAAkBA,EAClBzL,gBAAiBA,OAKjB51F,KAAK4nG,aACP5nG,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,gCA/CVt0F,KAAK+mG,eAAehd,QAAQ/4F,KAAKgP,KAAK2uG,gBAAgBlqG,KAAKzE,KAAMkuG,EAAeU,SARhF5uG,KAAK4yD,QAAQ,4DA4DjBvyD,EAAOmvG,WAAa,SAAoBtB,EAAe3T,EAAWzc,GAGhE,GAFA99E,KAAKgtG,sBAAsBkB,EAAc/U,QAErCn5F,KAAKqpG,eAAe6E,EAAcrS,WAMtC,GAFkB77F,KAAKmmG,gBAEN0I,iBAAjB,CAKA,IAAIjZ,EAAiE,OAA/C51F,KAAK0lG,eAAeqH,uBAAkC/sG,KAAK0lG,eAAekH,uBAAyB5sG,KAAK0lG,eAAeqH,wBAnhE5G,SAAwC1L,EAAkBvjB,EAAc9qE,GACvGquF,EAAiBM,iBAIrBN,EAAiBM,eAAiB3uF,EAAKQ,mBAAmB,CACxD2F,KAAM,WACN1E,MAAO,mBACN,GAAO/B,MACV2uF,EAAiBM,eAAe8N,gCAAkC3xB,GA8gEhE4xB,CAA+B1vG,KAAK4lG,kBAAmB9nB,EAAc99E,KAAKizD,KAAKr1C,OAC/EwjF,GAAY,CACVC,iBAAkBrhG,KAAK4lG,kBACvBtE,cAAe/G,EACf3E,gBAAiBA,EACjB2L,cAAevhG,KAAK2iB,mBAbpB3iB,KAAK+mG,eAAe/c,IAAIh5F,KAAKgP,KAAKwvG,WAAW/qG,KAAKzE,KAAMkuG,EAAe3T,EAAWzc,KAiBtFz9E,EAAOsvG,sBAAwB,WAC7B3vG,KAAK+mG,eAAe/c,IAAI92F,SAAQ,SAAUjE,GACxC,OAAOA,OAET+Q,KAAK+mG,eAAehd,QAAQ72F,SAAQ,SAAUjE,GAC5C,OAAOA,OAET+Q,KAAK+mG,eAAe/c,IAAM,GAC1BhqF,KAAK+mG,eAAehd,QAAU,IAGhC1pF,EAAO+nG,kBAAoB,WACzB,IAAIwH,EAAY5vG,KAAK6mG,WAIrB7mG,KAAK6mG,WAAa,GAClB+I,EAAU18G,SAAQ,SAAU28G,GAC1B,OAAOA,QAIXxvG,EAAOioG,kBAAoB,WACzB,IAAIwH,EAAY9vG,KAAK8mG,WAIrB9mG,KAAK8mG,WAAa,GAClBgJ,EAAU58G,SAAQ,SAAU28G,GAC1B,OAAOA,QAWXxvG,EAAOgoG,qBAAuB,WAG5B,GAAyB,UAArBroG,KAAKklG,YACP,OAAO,EAGT,IAAItR,EAAc5zF,KAAKmmG,gBAGvB,QAAKvS,KAQA5zF,KAAK+vG,yBAmBV5M,GAA4B,CAC1BC,yBAA0BpjG,KAAK8lG,0BAC/BzC,gBAAiBrjG,KAAKkmG,iBACtB5C,gBAAiB1P,EAAY+O,SAC7BY,WAAYvjG,KAAKklG,YACjB1B,cAAexjG,KAAKsmG,mBAQxBjmG,EAAO0vG,qBAAuB,SAA8Bnc,GAK1D,YAJoB,IAAhBA,IACFA,EAAc5zF,KAAKmmG,iBAGdvS,GAAeA,EAAYgB,WAAa50F,KAAKmlG,mBAGtD9kG,EAAOopG,cAAgB,SAAuB7V,GAK5C,YAJoB,IAAhBA,IACFA,EAAc5zF,KAAKmmG,iBAGdnmG,KAAK+vG,qBAAqBnc,IAAgB5zF,KAAKolG,oBAGxD/kG,EAAO8nG,uBAAyB,WAC9B,IAAKnoG,KAAK0lG,eAAex8F,QACvB,OAAO,EAKT,GAAIlJ,KAAKgnG,kBAAoBhnG,KAAKinG,gCAChC,OAAO,EAGT,IAAIrT,EAAc5zF,KAAKmmG,gBACnBvR,EAAY50F,KAAK+vG,uBAIrB,IAAKnc,IAAgBgB,EACnB,OAAO,EAGT,IAAI7J,EAAW6J,EAAU7J,SACrBC,EAAW4J,EAAU5J,SACrBiP,EAAUrF,EAAUqF,QAExB,QAAIjP,IAAa4I,EAAYr6B,qBAKzBwxB,IAAa/qF,KAAKsmG,iBAAmBrM,IAAYrG,EAAYiB,mBAI7DsO,GAA4B,CAC9BC,yBAA0BpjG,KAAK8lG,0BAC/BzC,gBAAiBrjG,KAAKkmG,iBACtB5C,gBAAiB1P,EAAY+O,SAC7BY,WAAYvjG,KAAKklG,YACjB1B,cAAexjG,KAAKsmG,mBAQxBjmG,EAAOg3F,YAAc,SAAqB6W,EAAe14G,GAGvD,GAFAwK,KAAKgtG,sBAAsBkB,EAAc/U,QAErCn5F,KAAKqpG,eAAe6E,EAAcrS,WAMtC,IAAI77F,KAAK6mG,WAAWh3G,QAAWmQ,KAAKmoG,yBAApC,CAKA,IAAIvU,EAAc5zF,KAAKmmG,gBAUvB,GARAnmG,KAAKgwG,gBAAgBpc,EAAY+O,UAEjC3iG,KAAKiwG,0BAA0Brc,EAAYp9D,MAAQo9D,EAAY9oC,SAM1B,WAAjC9qD,KAAKilG,aAAa5lG,WAAtB,CAoBA,GAdI6uG,EAAc3xG,MAChB2xG,EAAc3xG,IAAMyD,KAAK4pG,kBAAkBsE,EAAc3xG,KAAK,GAE9Dq3F,EAAY9oC,QAAQvuD,IAAM2xG,EAAc3xG,KAItC2xG,EAAc/6G,KAChB6M,KAAK8pG,WAAWoE,EAAc/6G,KAAK,GAGrCygG,EAAY+G,OAASuT,EAAcvT,OACnC/G,EAAYY,WAAaZ,EAAYY,YAAc,GAE/CZ,EAAY+G,OACd36F,KAAK8D,QAAQ,QACb8vF,EAAYY,WAAW/iF,MAAQmiF,EAAYsP,GAA2B1tG,EAAOxG,OAAOyiB,UAC/E,CACL,IAEIy+F,EAFAtb,EAAY50F,KAAK+vG,uBACjBI,EAA0C,SAArBnwG,KAAKklG,aAA0BtQ,GAAaA,EAAU5J,SAG3EmlB,IACFD,EAA6Btc,EAAYr6B,gBAAgB9nD,OAM3DmiF,EAAYY,WAAW/iF,MAAQzR,KAAKowG,kBAAkB,CACpDC,aAAczc,EAAYY,WAAW/iF,MACrCo5C,SAAU+oC,EAAY/oC,SACtB63C,WAAY9O,EAAY8O,WACxB4N,4BAA6BtwG,KAAK0lG,eAAeqH,uBACjDoD,mBAAoBA,EACpBD,2BAA4BA,EAC5B32C,gBAAiBq6B,EAAYr6B,gBAC7Bs7B,gBAAiBjB,EAAYiB,kBAcjC,GAPA70F,KAAKuwG,8BAA8B3c,EAAap+F,EAAOxG,MAIvDgR,KAAKwwG,mCAAmC5c,GAGpCA,EAAYkP,cAAe,CAI7B9iG,KAAKywG,qBAAqB7c,GAC1B5zF,KAAKynG,gBAAgBiJ,sBAAsB,CACzC9c,YAAaA,EACb+c,0BAAgD,SAArB3wG,KAAKklG,cAElC,IAAI19E,EAAOxnB,KAAKurG,qBAGhB,GAAI/jF,EAAKk7E,aAAe9O,EAAY8O,YAAcl7E,EAAK+jC,YAAcqoC,EAAYroC,UAE/E,YADAvrD,KAAK4yD,QAAQ,6CAKf5yD,KAAK4yD,QAAQ,uCAOfghC,EAAYib,kBAAmB,EAE/B7uG,KAAK2vG,wBACL3vG,KAAK4wG,YAAYhd,EAAap+F,SAnG5BwK,KAAK6mG,WAAW71G,KAAKgP,KAAKq3F,YAAY5yF,KAAKzE,KAAMkuG,EAAe14G,KAsGpE6K,EAAOkwG,8BAAgC,SAAuC3c,EAAa5kG,GAEhE,SAArBgR,KAAKklG,aAAiE,kBAAhCtR,EAAYgC,iBAErDhC,EAAYid,yBAGX7wG,KAAK2mG,mBAAqB,CACxBxmF,OAAO,EACPI,OAAO,IAIPvgB,KAAK4mG,2BAA2B53G,KAAU4kG,EAAY/oC,WAGxD7qD,KAAK2mG,mBAAmB33G,IAAQ,IAIpCqR,EAAOywG,8BAAgC,SAAuC3hD,GAC5E,IAAIngE,EAAOmgE,EAAMngE,KACb4pE,EAAczJ,EAAMyJ,YACpBr8D,EAAM4yD,EAAM5yD,IACZsuD,EAAWsE,EAAMtE,SAMrB,GAAItuD,EAAK,CACP,IAAIkN,EAAKkvD,GAAcp8D,GAEvB,GAAIyD,KAAKknG,uBAAyBz9F,EAEhC,OAAO,KAOTmvD,EAAc54D,KAAK4pG,kBAAkBrtG,GAAK,GAAMi8D,MAChDx4D,KAAKknG,qBAAuBz9F,EAQ9B,OAAImvD,GAAe54D,KAAK2mG,mBAAmB33G,IAIzCgR,KAAK4mG,2BAA2B53G,GAAQ67D,EAExC7qD,KAAK2mG,mBAAmB33G,IAAQ,EAGhCgR,KAAKknG,qBAAuB,KACrBtuC,GAGF,MAGTv4D,EAAO0wG,0BAA4B,SAAmCtW,EAAO7oG,GAC3E,IAAIoV,EAAShH,KAET4zF,EAAc6G,EAAM7G,YACpB5kG,EAAOyrG,EAAMzrG,KACbwpE,EAAQiiC,EAAMjiC,MACdmxC,EAAgB3pG,KAAK0lG,eAAeiE,gBACpCD,EAAgB1pG,KAAK0lG,eAAegE,gBAIpCC,EAAc95G,OAAS,GACzBmQ,KAAK4yD,QAAQ,0DAA4DpI,GAAkBm/C,GAAejwG,KAAK,OAG7GgwG,EAAc75G,OAAS,GACzBmQ,KAAK4yD,QAAQ,0DAA4DpI,GAAkBk/C,GAAehwG,KAAK,OAGjH,IAAIs3G,EAAmBrH,EAAc95G,OAAS85G,EAAcl4F,MAAM,GAAK,EACnEw/F,EAAiBtH,EAAc95G,OAAS85G,EAAcj4F,IAAIi4F,EAAc95G,OAAS,GAAK,EACtFqhH,EAAmBxH,EAAc75G,OAAS65G,EAAcj4F,MAAM,GAAK,EACnE0/F,EAAiBzH,EAAc75G,OAAS65G,EAAch4F,IAAIg4F,EAAc75G,OAAS,GAAK,EAE1F,GAAIohH,EAAiBD,GA9mEH,GA8mE0CG,EAAiBD,GA9mE3D,EAynEhB,OANAlxG,KAAK4yD,QAAQ,mHAAgI4F,EAAMxB,WAAtI,mBAA+KxM,GAAkBm/C,GAAejwG,KAAK,MAArN,mBAAyP8wD,GAAkBk/C,GAAehwG,KAAK,MAAQ,MACpTsG,KAAKpO,MAAM,CACTqgB,QAAS,kEACT67C,aAAcx7B,WAEhBtyB,KAAK8D,QAAQ,SAgBf9D,KAAKgnG,kBAAmB,EACxBhnG,KAAK6mG,WAAW71G,KAAKgP,KAAKoxG,sBAAsB3sG,KAAKzE,KAAM,CACzD4zF,YAAaA,EACb5kG,KAAMA,EACNwpE,MAAOA,KAET,IAGI64C,EAHcrxG,KAAKw4B,eA9oEL,EAkpElBx4B,KAAK4yD,QAAQ,yDAA2Dy+C,GACxErxG,KAAKzG,OAAO,EAAG83G,GAAmB,WAChCrqG,EAAO4rD,QAAQ,gDAEf5rD,EAAOggG,kBAAmB,EAG1BhgG,EAAOigG,gCAAkC,IAAS/nG,YAAW,WAC3D8H,EAAO4rD,QAAQ,mDAEf5rD,EAAOigG,gCAAkC,KAEzCjgG,EAAOohG,sBACNkJ,QACF,IAGLjxG,EAAOkxG,mBAAqB,SAA4BxW,EAAOnpG,GAC7D,IAAIgiG,EAAcmH,EAAMnH,YACpB5kG,EAAO+rG,EAAM/rG,KACbwpE,EAAQuiC,EAAMviC,MAEb5mE,IAjtEgB,KAqtEjBA,EAAMgZ,MAWV5K,KAAK4yD,QAAQ,4CAA6ChhE,GAC1DoO,KAAKpO,MAAM5C,EAAO,cAAgBwpE,EAAM3oE,OAA7Bb,yBAAuE4kG,EAAY8O,WAAa,gBAAkB9O,EAAY/oC,SAASphD,IAMlJzJ,KAAK8D,QAAQ,gBAjBX9D,KAAK+wG,0BAA0B,CAC7Bnd,YAAaA,EACb5kG,KAAMA,EACNwpE,MAAOA,MAiBbn4D,EAAO+wG,sBAAwB,SAA+BnW,GAC5D,IAjsFyCuW,EAEvCC,EADAz/C,EAgsFE4hC,EAAcqH,EAAMrH,YACpB5kG,EAAOisG,EAAMjsG,KACb4pE,EAAcqiC,EAAMriC,YACpBx4D,EAAO66F,EAAM76F,KACbo4D,EAAQyiC,EAAMziC,MAElB,IAAKA,EAAO,CACV,IAAIrN,EAAW,CAAC/qD,GACZ42D,EAAa52D,EAAK42D,WAElB4B,IAGFzN,EAASr6D,QAAQ8nE,GACjB5B,GAAc4B,EAAY5B,YA9sF5BhF,EAAS,GAD8Bw/C,EAotFhB,CACrBh5C,MAAOxB,EACP7L,SAAUA,IAltFDqN,QACbi5C,EAAa,IAAIvqC,WAAWsqC,EAAWh5C,OAEvCg5C,EAAWrmD,SAASj4D,SAAQ,SAAU43D,GACpC2mD,EAAWnxG,IAAIwqD,EAASkH,GACxBA,GAAUlH,EAAQkM,eA2sFlBwB,EAvsFGi5C,EA6sFLzxG,KAAK0lG,eAAegM,aAAa,CAC/B9d,YAAaA,EACb5kG,KAAMA,EACNwpE,MAAOA,GACNx4D,KAAKuxG,mBAAmB9sG,KAAKzE,KAAM,CACpC4zF,YAAaA,EACb5kG,KAAMA,EACNwpE,MAAOA,MAIXn4D,EAAOsxG,yBAA2B,SAAkC3iH,EAAM6sG,EAAW+V,GACnF,GAAK5xG,KAAKmmG,iBAAmBtK,IAAc77F,KAAKmmG,gBAAgBtK,UAAhE,CAIA,IAAI/wC,EAAU9qD,KAAKmmG,gBAAgBr7C,QAC/B4jD,EAAqB1/G,EAAO,aAE3B87D,EAAQ4jD,KACX5jD,EAAQ4jD,GAAsB,IAGhC5jD,EAAQ4jD,GAAoBx0C,2BAA6B03C,EAAkB1qB,0BAA4B,EACvGp8B,EAAQ4jD,GAAoBh1C,4BAA8Bk4C,EAAkBngG,MAAMijF,aAClF5pC,EAAQ4jD,GAAoBmD,sBAAwBD,EAAkBngG,MAAMskE,OAC5EjrB,EAAQ4jD,GAAoBl1C,0BAA4Bo4C,EAAkBlgG,IAAIgjF,aAC9E5pC,EAAQ4jD,GAAoBoD,oBAAsBF,EAAkBlgG,IAAIqkE,OAExEjrB,EAAQ4jD,GAAoBtlC,oBAAsBwoC,EAAkBxoC,sBAGtE/oE,EAAOuwG,YAAc,SAAqBhd,EAAap+F,GACrD,IAAIxG,EAAOwG,EAAOxG,KACdoR,EAAO5K,EAAO4K,KAElB,GAAKA,GAASA,EAAK42D,aAIN,UAAThoE,IAAoBgR,KAAKsmG,gBAA7B,CAIA,IAAI1tC,EAAc54D,KAAK8wG,8BAA8B,CACnD9hH,KAAMA,EACN4pE,YAAapjE,EAAOojE,YACpB/N,SAAU+oC,EAAY/oC,SACtBtuD,IAAKq3F,EAAY+G,OAAS/G,EAAY9oC,QAAQvuD,IAAM,OAEtDyD,KAAKoxG,sBAAsB,CACzBxd,YAAaA,EACb5kG,KAAMA,EACN4pE,YAAaA,EACbx4D,KAAMA,MAUVC,EAAOmrG,aAAe,SAAsB5X,GAC1C,IAAI5jF,EAAShQ,KAEbA,KAAK2H,MAAQ,UACb3H,KAAKmmG,gBAAkBvS,EACvB5zF,KAAK+xG,gBAAgBne,GAEsB,kBAAhCA,EAAYgC,iBACjB51F,KAAK4nG,aACP5nG,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,wBAKTt0F,KAAKqoG,uBAiBVroG,KAAKgyG,mCAAmCpe,GAhBtC5zF,KAAK8mG,WAAW91G,MAAK,WAGnB,IAAIuN,EAAU,IAAS,GAAIq1F,EAAa,CACtC2Y,sBAAsB,IAGxB,IAAS3Y,EAAa5jF,EAAOs8F,qBAAqB/tG,IAElDyR,EAAOu2F,2BAA4B,EAEnCv2F,EAAOgiG,mCAAmCpe,OAQhDvzF,EAAO2xG,mCAAqC,SAA4Cpe,GACtF,IAAIzjF,EAASnQ,KAOTA,KAAKiyG,uCAAuCre,EAAYgC,mBAC1D51F,KAAKwmG,WAAW32G,OAAS,EAEzB+jG,EAAYnM,gBAAkB,GAC9BznF,KAAKymG,aAAe,EAEpBzmG,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,UAEVt0F,KAAK4nG,YAAYvT,YAAY,CAC3BC,OAAQ,qBACRsB,gBAAiBhC,EAAYgC,mBAIjC,IAAIsY,EAAgBluG,KAAKkyG,4BAA4Bte,GACjDue,EAAgBnyG,KAAK+nG,eAAenU,EAAY8O,WAAY9O,EAAY/oC,SAAU+oC,EAAYroC,WAC9F6mD,EAAuC,OAApBpyG,KAAK0iG,WACxB2P,EAAkBze,EAAY+O,WAAa3iG,KAAKkmG,kBAEpDtS,EAAY+O,SAAW,EACnB7L,EAAkBqb,GAAiBC,GAAoBC,EAC3DryG,KAAK4yD,QAAQ,cAAgB0vC,GAAkB1O,IAM3Csa,EAAc3xG,MAAQ2xG,EAAc3xG,IAAIi8D,QAC1Cx4D,KAAK4yD,QAAQ,kCACb5yD,KAAK2mG,mBAAqB,CACxBpmF,OAAO,EACPJ,OAAO,IAIXyzE,EAAYuV,cAAgB3M,GAAoB,CAC9ClzC,IAAKtpD,KAAKizD,KAAK3J,IACfozC,WAAY18F,KAAKomG,YACjBjL,iBAAkBn7F,KAAKunG,WACvBz8C,QAASojD,EACTvR,QAAS38F,KAAKguG,aAAavpG,KAAKzE,KAAM4zF,GACtCwI,WAAYp8F,KAAKiuG,gBAAgBxpG,KAAKzE,MACtCu5F,YAAav5F,KAAKmuG,iBAAiB1pG,KAAKzE,MACxCw5F,aAAcx5F,KAAKwuG,kBAAkB/pG,KAAKzE,MAC1Cy5F,yBAA0Bz5F,KAAK2xG,yBAAyBltG,KAAKzE,KAAM,QAAS4zF,EAAYiI,WACxFnC,yBAA0B15F,KAAK2xG,yBAAyBltG,KAAKzE,KAAM,QAAS4zF,EAAYiI,WACxFjC,WAAY55F,KAAK2uG,gBAAgBlqG,KAAKzE,MACtC82F,gBAAiBA,EACjB+C,gBAAiB,WACf1pF,EAAOyiD,QAAQ,oCAEjB+mC,MAAO35F,KAAKwvG,WAAW/qG,KAAKzE,MAC5B85F,OAAQ95F,KAAKq3F,YAAY5yF,KAAKzE,MAC9B+5F,OAAQ/5F,KAAKsyG,wBAAwB7tG,KAAKzE,MAC1C62F,gBAAiB,SAAyB+E,GACxC,IAAI3pF,EAAU2pF,EAAM3pF,QAChB7hB,EAAQwrG,EAAMxrG,MACdi1E,EAASu2B,EAAMv2B,OAEnBl1D,EAAOyiD,QAAQ0vC,GAAkB1O,GAAe,kCAAoCvuB,EAAS,SAAWj1E,EAAQ,KAAO6hB,OAc7H5R,EAAO0xG,gBAAkB,SAAyBne,GAChD,IAAI2e,EAh2EqB,SAAgCjqF,EAAUtJ,EAAautC,GAMlF,IAAIimD,EAAWxzF,EAAc4hD,GAAOG,mBAEhCz4C,EAASz4B,SAGX2iH,EAAWp1G,KAAKC,IAAIm1G,EAAUlqF,EAAS7W,MAAM,KAK/C,IAAIghG,EAAczzF,EAAcutC,EAChC,OAAOnvD,KAAKE,IAAIm1G,EAAaD,GA+0ERE,CAAuB1yG,KAAK+kG,YAAa/kG,KAAKw4B,eAAgBx4B,KAAKiqG,UAAU19C,gBAAkB,IAM9GgmD,EAAe,GACjBvyG,KAAKzG,OAAO,EAAGg5G,IAcnBlyG,EAAO6xG,4BAA8B,SAAqCte,GACxE,IAAI9oC,EAAU8oC,EAAY9oC,QACtBt0B,EAAOo9D,EAAYp9D,KACnB03E,EAAgB,CAClB1/C,YAAah4B,EAAOA,EAAKg4B,YAAc1D,EAAQ0D,YAC/CqJ,UAAWrhC,EAAOA,EAAKqhC,UAAY/M,EAAQ+M,UAC3CgkC,UAAWjI,EAAYiI,UACvBjV,WAAYgN,EAAYhN,WACxBsP,iBAAkBtC,EAAYsC,iBAC9BzO,gBAAiBmM,EAAYnM,gBAC7BjxD,KAAMo9D,EAAYp9D,MAEhBm8E,EAAkB/e,EAAY/oC,SAASM,SAASyoC,EAAY8O,WAAa,GAkB7E,GAhBIiQ,GAAmBA,EAAgBhQ,WAAa73C,EAAQ63C,WAStDgQ,EAAgBp5C,gBAClB20C,EAAc9Y,cAAgBud,EAAgBp5C,gBAAgBu4C,oBACrDa,EAAgB9d,kBACzBqZ,EAAc9Y,cAAgBud,EAAgB9d,gBAAgBid,sBAI9DhnD,EAAQ33D,IAAK,CAGf,IAAIooG,EAAKzwC,EAAQ33D,IAAIooG,IAAM,IAAI3C,YAAY,CAAC,EAAG,EAAG,EAAGhF,EAAY8O,WAAa9O,EAAY/oC,SAAS8B,gBACnGuhD,EAAc/6G,IAAM6M,KAAK8pG,WAAWh/C,EAAQ33D,KAC5C+6G,EAAc/6G,IAAIooG,GAAKA,EAOzB,OAJIzwC,EAAQvuD,MACV2xG,EAAc3xG,IAAMyD,KAAK4pG,kBAAkB9+C,EAAQvuD,MAG9C2xG,GAGT7tG,EAAOuyG,mBAAqB,SAA4BzZ,GAGtDn5F,KAAKwoG,eAAiB,EAElBrP,IACFn5F,KAAKuoG,uBAAyBpP,EAAMjpC,cACpClwD,KAAK4oG,uBAAyBzP,EAAMriC,gBAIxCz2D,EAAOwyG,2BAA6B,SAAoC/gG,EAAUqnF,GAIhFn5F,KAAKmmG,gBAAgBnvC,WAAamiC,EAAMjpC,cAEpCp+C,EAAWuwF,GACbriG,KAAK4yD,QAAQ,wDAA0D9gD,EAAW,yDAIpF9R,KAAKiwD,UAAYkpC,EAAMlpC,UACvBjwD,KAAK2kG,UAAYxL,EAAMriC,gBAGzBz2D,EAAOyyG,eAAiB,WAGtB9yG,KAAK0oG,uBAAyB,EAC9B1oG,KAAKiwD,UAAY,EACjBjwD,KAAK2kG,UAAYv0D,IACjBpwC,KAAK8D,QAAQ,oBAUfzD,EAAOiyG,wBAA0B,SAAiC1gH,EAAOs8G,EAAe14G,GAKtF,GAAIwK,KAAK6mG,WAAWh3G,OAClBmQ,KAAK6mG,WAAW71G,KAAKgP,KAAKsyG,wBAAwB7tG,KAAKzE,KAAMpO,EAAOs8G,EAAe14G,SAMrF,GAFAwK,KAAK4yG,mBAAmB1E,EAAc/U,OAEjCn5F,KAAKmmG,iBAQN+H,EAAcrS,YAAc77F,KAAKmmG,gBAAgBtK,UAArD,CAKA,GAAIjqG,EAAO,CAIT,GAHAoO,KAAKmmG,gBAAkB,KACvBnmG,KAAK2H,MAAQ,QAET/V,EAAMgZ,OAASwtF,GACjB,OAOF,OAJAp4F,KAAKkV,QAIDtjB,EAAMgZ,OAASwtF,QACjBp4F,KAAK8yG,kBAMP9yG,KAAK2oG,sBAAwB,EAC7B3oG,KAAKpO,MAAMA,QACXoO,KAAK8D,QAAQ,UAIf,IAAI8vF,EAAc5zF,KAAKmmG,gBAGvBnmG,KAAK6yG,2BAA2Bjf,EAAY9hF,SAAUo8F,EAAc/U,OACpEvF,EAAYoI,iBAAmBkS,EAAclS,iBAEzCxmG,EAAO++F,UACTv0F,KAAKwmG,WA3sFW,SAAyB/tC,EAAQgT,EAAMpjE,GAC3D,IAAKojE,EAAK57E,OACR,OAAO4oE,EAGT,GAAIpwD,EAKF,OAAOojE,EAAKn8E,QAMd,IAHA,IAAImiB,EAAQg6D,EAAK,GAAGX,IAChBl7E,EAAI,EAEAA,EAAI6oE,EAAO5oE,UACb4oE,EAAO7oE,GAAGk7E,KAAOr5D,GADI7hB,KAM3B,OAAO6oE,EAAOnpE,MAAM,EAAGM,GAAGV,OAAOu8E,GAqrFXsnC,CAAgB/yG,KAAKwmG,WAAYhxG,EAAO++F,QAASv0F,KAAK0mG,cAK1E1mG,KAAK2H,MAAQ,YAEb3H,KAAK8D,QAAQ,aACb9D,KAAKgzG,0BAA0Bpf,KAGjCvzF,EAAO2vG,gBAAkB,SAAyBrN,GAChD,IAAIsQ,EAAkBjzG,KAAKynG,gBAAgByL,mBAAmBvQ,GAEtC,OAApBsQ,IACFjzG,KAAKymG,aAAewM,IAIxB5yG,EAAO4vG,0BAA4B,SAAmCnlD,GACvC,kBAAlBA,EAAQr5C,OAA6C,kBAAhBq5C,EAAQp5C,IACtD1R,KAAK6oG,oBAAsB/9C,EAAQp5C,IAAMo5C,EAAQr5C,MAEjDzR,KAAK6oG,oBAAsB/9C,EAAQh5C,UAIvCzR,EAAO4xG,uCAAyC,SAAgDrc,GAC9F,OAAwB,OAApBA,IAMqB,SAArB51F,KAAKklG,aAA0BtP,IAAoB51F,KAAK0lG,eAAeqH,yBAItE/sG,KAAKsmG,gBAAkB1Q,IAAoB51F,KAAK0lG,eAAekH,yBAOtEvsG,EAAO+vG,kBAAoB,SAA2B3U,GACpD,IAAI4U,EAAe5U,EAAM4U,aACrBxlD,EAAW4wC,EAAM5wC,SACjB63C,EAAajH,EAAMiH,WACnBwN,EAA6BzU,EAAMyU,2BACnCI,EAA8B7U,EAAM6U,4BACpCH,EAAqB1U,EAAM0U,mBAC3B52C,EAAkBkiC,EAAMliC,gBACxBs7B,EAAkB4G,EAAM5G,gBAE5B,GAA4B,qBAAjBwb,EAET,OAAOA,EAGT,IAAKF,EACH,OAAOtb,EAAgBpjF,MAGzB,IAAIkhG,EAAkB9nD,EAASM,SAASu3C,EAAa,GAMrD,OAAmB,IAAfA,GAAqBiQ,GAAoD,qBAA1BA,EAAgBlhG,OAAyBkhG,EAAgBjhG,MAAQw+F,EAA6BI,EAI1I/2C,EAAgB9nD,MAHdy+F,GAMX7vG,EAAO2yG,0BAA4B,SAAmCpf,GACpE,IAAIgB,EAAY50F,KAAK+vG,qBAAqBnc,GAE1C,IAAKgB,EAMH,OALA50F,KAAKpO,MAAM,CACTqgB,QAAS,yEACTisD,kBAAmB5rC,WAErBtyB,KAAK8D,QAAQ,SAOf,IAAIinF,EAAW6J,EAAU7J,SACrBC,EAAW4J,EAAU5J,SACrBiP,EAAUrF,EAAUqF,QACpBkZ,EAAoC,SAArBnzG,KAAKklG,aAA0Bla,EAC9CooB,GAAgBpzG,KAAKsmG,gBAAkBvb,IAAakP,EAGxD,GAFArG,EAAYyf,iBAAmB,GAE1Bzf,EAAYib,iBA6Bf,OA5BKjb,EAAYY,YAAqD,kBAAhCZ,EAAYgC,kBAShD51F,KAAKumG,2BAA4B,GAInC3S,EAAYY,WAAa,CACvB/iF,MAAO,GAETmiF,EAAYyf,mBAEPrzG,KAAKumG,4BAERvmG,KAAKwwG,mCAAmC5c,GAGxC5zF,KAAK2vG,8BAIP3vG,KAAKszG,kBAAkB1f,GAKrBuf,GACFvf,EAAYyf,mBAGVD,GACFxf,EAAYyf,mBAGVF,GACFnzG,KAAK0lG,eAAe6N,mBAAmBvzG,KAAKszG,kBAAkB7uG,KAAKzE,KAAM4zF,IAGvEwf,GACFpzG,KAAK0lG,eAAe8N,mBAAmBxzG,KAAKszG,kBAAkB7uG,KAAKzE,KAAM4zF,KAI7EvzF,EAAOizG,kBAAoB,SAA2B1f,GAChD5zF,KAAKqpG,eAAezV,EAAYiI,aAIpCjI,EAAYyf,mBAEyB,IAAjCzf,EAAYyf,kBACdrzG,KAAKyzG,uBAITpzG,EAAO+tG,2BAA6B,SAAoCxZ,GACtE,IAAI8e,EA3sFiB,SAA4BnQ,EAAYoQ,EAAe/e,GAG9E,MAAmB,SAAf2O,GAA0BoQ,GAAkB/e,EAI3CA,EAAU7J,UAAa6J,EAAU5J,SAIlC2oB,EAAc3oB,WAAa4J,EAAU5J,SAChC,6LAGJ2oB,EAAc3oB,UAAY4J,EAAU5J,SAChC,kMAGF,KAXE,4CAJA,KAusFuB4oB,CAAmB5zG,KAAKklG,YAAallG,KAAK+vG,uBAAwBnb,GAEhG,QAAI8e,IACF1zG,KAAKpO,MAAM,CACTqgB,QAASyhG,EACTx1C,kBAAmB5rC,MAErBtyB,KAAK8D,QAAQ,UACN,IAMXzD,EAAOmwG,mCAAqC,SAA4C5c,GACtF,GAAoC,OAAhCA,EAAYgC,iBAEwB,kBAAjChC,EAAYY,WAAW/iF,QAC9BmiF,EAAYid,wBACS,SAArB7wG,KAAKklG,YAJL,CAQA,IAAI2O,GAAY,EAKhBjgB,EAAYgC,iBAAmBhC,EAAYY,WAAW/iF,MAItDmiF,EAAYid,wBAAyB,EAEjCjd,EAAYgC,kBAAoB51F,KAAK0lG,eAAeqH,yBACtD/sG,KAAK0lG,eAAeqH,qBAAqBnZ,EAAYgC,iBACrDie,GAAY,GAGVjgB,EAAYgC,kBAAoB51F,KAAK0lG,eAAekH,yBACtD5sG,KAAK0lG,eAAekH,qBAAqBhZ,EAAYgC,iBACrDie,GAAY,GAGVA,GACF7zG,KAAK8D,QAAQ,qBAIjBzD,EAAOowG,qBAAuB,SAA8B7c,GAC1DA,EAAYY,WAAaZ,EAAYY,YAAc,GACnD,IAAII,EAAY50F,KAAKypG,gBAEjBqK,EAD0C,SAArB9zG,KAAKklG,aAA0BtQ,GAAaA,EAAU5J,UAC7B4I,EAAYr6B,gBAAkBq6B,EAAYr6B,gBAAkBq6B,EAAYiB,gBAErHif,IAILlgB,EAAYY,WAAW9iF,IAA2C,kBAA9BoiG,EAAsBpiG,IAG1DoiG,EAAsBpiG,IAAMoiG,EAAsBriG,MAAQmiF,EAAY9hF,WAWxEzR,EAAOozG,mBAAqB,WAM1B,GAJIzzG,KAAKmmG,iBACPnmG,KAAK8D,QAAQ,gBAGV9D,KAAKmmG,gBAQR,OAPAnmG,KAAK2H,MAAQ,aAGR3H,KAAKgV,UACRhV,KAAKkpG,kBAMT,IAAItV,EAAc5zF,KAAKmmG,gBAIvBnmG,KAAKywG,qBAAqB7c,GAEtB5zF,KAAK+lG,8BAkBP/lG,KAAKynG,gBAAgBiJ,sBAAsB,CACzC9c,YAAaA,EACb+c,0BAAgD,SAArB3wG,KAAKklG,cAIpC,IAAI6O,EAAyBhQ,GAAqCnQ,EAAa5zF,KAAKylG,aAcpF,GAZIsO,IACsC,SAApCA,EAAuBzP,SACzBt+E,GAAQ31B,IAAIsB,KAAKoiH,EAAuB9hG,SAExCjS,KAAK4yD,QAAQmhD,EAAuB9hG,UAIxCjS,KAAKg0G,kBAAkBpgB,GACvB5zF,KAAKmmG,gBAAkB,KACvBnmG,KAAK2H,MAAQ,SAETisF,EAAYkP,gBACd9iG,KAAK8D,QAAQ,kBAKR8vF,EAAYib,kBANnB,CAYA7uG,KAAK4yD,QAAQ,YAAc0vC,GAAkB1O,IAC7C5zF,KAAKi0G,uBAAuBrgB,GAC5B5zF,KAAKioG,gBAAiB,EAElBjoG,KAAKkmG,mBAAqBtS,EAAY+O,WACxC3iG,KAAK8lG,0BAA0BpC,mBAAmB,CAChD10G,KAAMgR,KAAKklG,YACXn9F,KAAM/H,KAAKkmG,iBACXl+F,GAAI4rF,EAAY+O,WAKO,SAArB3iG,KAAKklG,aAA2BllG,KAAKsmG,gBACvCtmG,KAAK8lG,0BAA0BpC,mBAAmB,CAChD10G,KAAM,QACN+Y,KAAM/H,KAAKkmG,iBACXl+F,GAAI4rF,EAAY+O,YAKtB3iG,KAAKkmG,iBAAmBtS,EAAY+O,SAKpC3iG,KAAK8D,QAAQ,kBACb,IAAIgnD,EAAU8oC,EAAY9oC,QACtBt0B,EAAOo9D,EAAYp9D,KACnB09E,EAAkBppD,EAAQp5C,KAAO1R,KAAKw4B,eAAiBsyB,EAAQp5C,IAA4C,EAAtCkiF,EAAY/oC,SAAS0B,eAC1F4nD,EAAe39E,GAAQA,EAAK9kB,KAAO1R,KAAKw4B,eAAiBhC,EAAK9kB,IAAgD,EAA1CkiF,EAAY/oC,SAASI,mBAK7F,GAAIipD,GAAmBC,EAGrB,OAFAn0G,KAAK4yD,QAAQ,QAAUshD,EAAkB,UAAY,QAAU,IAAM5R,GAAkB1O,SACvF5zF,KAAKmqG,kBAIoC,OAApBnqG,KAAK0iG,YAI1B1iG,KAAK8D,QAAQ,mBAGf9D,KAAK8D,QAAQ,YACb9D,KAAK0iG,WAAa9O,EAAY8O,WAC9B1iG,KAAKurD,UAAYqoC,EAAYroC,UAIzBvrD,KAAK+nG,eAAenU,EAAY8O,WAAY9O,EAAY/oC,SAAU+oC,EAAYroC,YAChFvrD,KAAKupG,cAIPvpG,KAAK8D,QAAQ,YAET8vF,EAAYib,kBACd7uG,KAAK8oG,eAGF9oG,KAAKgV,UACRhV,KAAKkpG,sBAxEHlpG,KAAK4yD,QAAQ,0CAA4C0vC,GAAkB1O,KAsFjFvzF,EAAO2zG,kBAAoB,SAA2BpgB,GACpD,GAAIA,EAAY9hF,SAAWuwF,GACzBriG,KAAK4yD,QAAQ,yDAA2DghC,EAAY9hF,SAAW,4DADjG,CAKA,IAAImxB,EAAOjjC,KAAK0kG,WAAWzhE,KAGvBmxE,EAAwBvmH,KAAKC,MAAQ8lG,EAAYoI,iBAAmB,EAEpEqY,EAA8Bj3G,KAAK8C,MAAM0zF,EAAY58B,WAAao9C,EAAwB,EAAI,KAGlGp0G,KAAK0kG,WAAWzhE,OAASoxE,EAA8BpxE,KAAUjjC,KAAK0kG,WAAW74C,QAanFxrD,EAAO4zG,uBAAyB,SAAgCrgB,GAC9D,GAAK5zF,KAAKqlG,sBAAV,CAIA,IAAIv6C,EAAU8oC,EAAY9oC,QACtBr5C,EAAQq5C,EAAQr5C,MAChBC,EAAMo5C,EAAQp5C,IAElB,GAAK0wF,GAAO3wF,IAAW2wF,GAAO1wF,GAA9B,CAIAywF,GAAoB1wF,EAAOC,EAAK1R,KAAKqlG,uBACrC,IAAI7D,EAAM,IAASC,eAAiB,IAAStiF,OACzC1rB,EAAQ,CACV6gH,OAAQxpD,EAAQwpD,OAChBr6C,eAAgBnP,EAAQmP,eACxBs6C,eAAgBzpD,EAAQypD,eACxBtkD,UAAW2jC,EAAY/oC,SAASlzD,WAAW02D,UAC3CmmD,WAAY5gB,EAAY/oC,SAASlzD,WAAWgoG,WAC5C7B,OAAQlK,EAAY/oC,SAASlzD,WAAWo3D,OACxCiI,WAAY48B,EAAY58B,WACxBx5C,IAAKo2E,EAAYp2E,IACjBmlF,SAAU/O,EAAY+O,SACtB93C,SAAU+oC,EAAY/oC,SAASphD,GAC/BgI,MAAOA,EACPC,IAAKA,GAGHkB,EAAM,IAAI4uF,EAAI/vF,EAAOC,EADdk1B,KAAKI,UAAUvzC,IAI1Bmf,EAAInf,MAAQA,EACZuM,KAAKqlG,sBAAsB5xF,OAAOb,MAG7B2xF,EAvkFwB,CAwkF/Bv+E,GAAQqjC,aAEV,SAAStX,MAET,IAmqHI0iE,GAnqHAC,GAAc,SAAqBtsG,GACrC,MAAsB,kBAAXA,EACFA,EAGFA,EAAOC,QAAQ,KAAK,SAAUC,GACnC,OAAOA,EAAEvX,kBAIT4jH,GAAc,CAAC,QAAS,SAExBC,GAAY,SAAkB5lH,EAAM22G,GACtC,IAAIkP,EAAelP,EAAc32G,EAAO,UACxC,OAAO6lH,GAAgBA,EAAavJ,UAAY3F,EAAcmP,aAAa9lH,IAqBzE+lH,GAAa,SAASA,EAAW/lH,EAAM22G,GACzC,GAAmC,IAA/BA,EAAcpnD,MAAM1uD,OAAxB,CAIA,IAAImlH,EAAa,EACbC,EAAatP,EAAcpnD,MAAMy2D,GAErC,GAAwB,gBAApBC,EAAWjmH,MAsBf,GAAa,gBAATA,GAWC22G,EAAcz8F,SAAoD,WAAzCy8F,EAAclB,YAAYplG,aAA2Bu1G,GAAU5lH,EAAM22G,GAAnG,CAIA,GAAIsP,EAAWjmH,OAASA,EAAM,CAG5B,GAFAgmH,EAhEuB,SAA8BhmH,EAAMuvD,GAC7D,IAAK,IAAI3uD,EAAI,EAAGA,EAAI2uD,EAAM1uD,OAAQD,IAAK,CACrC,IAAIqlH,EAAa12D,EAAM3uD,GAEvB,GAAwB,gBAApBqlH,EAAWjmH,KAGb,OAAO,KAGT,GAAIimH,EAAWjmH,OAASA,EACtB,OAAOY,EAIX,OAAO,KAiDQslH,CAAqBlmH,EAAM22G,EAAcpnD,OAEnC,OAAfy2D,EAIF,OAGFC,EAAatP,EAAcpnD,MAAMy2D,GAcnC,OAXArP,EAAcpnD,MAAMhvD,OAAOylH,EAAY,GAQvCrP,EAAcmP,aAAa9lH,GAAQimH,EACnCA,EAAW3gB,OAAOtlG,EAAM22G,GAEnBsP,EAAWlb,YAAhB,GAEE4L,EAAcmP,aAAa9lH,GAAQ,UACnC+lH,EAAW/lH,EAAM22G,UA/DZA,EAAc2F,YAAuD,WAAzC3F,EAAclB,YAAYplG,aACzDsmG,EAAcpnD,MAAMj4C,QACpB2uG,EAAW3gB,OAAOqR,GAEdsP,EAAWlb,QACbkb,EAAWlb,SAMbgb,EAAW,QAASpP,GACpBoP,EAAW,QAASpP,MAwDtBwP,GAAgB,SAAuBnmH,EAAM22G,GAC/C,IAAIltC,EAASktC,EAAc32G,EAAO,UAC9BomH,EAAYV,GAAY1lH,GAEvBypE,IAILA,EAAOr5D,oBAAoB,YAAaumG,EAAc,KAAOyP,EAAY,eACzE38C,EAAOr5D,oBAAoB,QAASumG,EAAc,KAAOyP,EAAY,WACrEzP,EAAc7H,OAAO9uG,GAAQ,KAC7B22G,EAAc32G,EAAO,UAAY,OAG/BqmH,GAAkB,SAAyB5Q,EAAaoQ,GAC1D,OAAOpQ,GAAeoQ,IAA2F,IAA3ErkH,MAAM7B,UAAUU,QAAQsE,KAAK8wG,EAAY6Q,cAAeT,IAG5FU,GACY,SAAsB/8C,EAAOo7B,EAAa4hB,GACtD,OAAO,SAAUxmH,EAAM22G,GACrB,IAAIkP,EAAelP,EAAc32G,EAAO,UAGxC,GAAKqmH,GAAgB1P,EAAclB,YAAaoQ,GAAhD,CAIAlP,EAAc/yC,QAAQ,qBAAuBghC,EAAY8O,WAAa,MAAQlqC,EAAM3oE,OAAS,aAAeb,EAAO,UAEnH,IACE6lH,EAAanD,aAAal5C,GAC1B,MAAOvkE,GACP0xG,EAAc/yC,QAAQ,mBAAqB3+D,EAAE2W,KAAO,KA1rGnC,KA0rG0C3W,EAAE2W,KAA8B,wBAA0B,IAAO,0BAA4BgpF,EAAY8O,WAAa,OAAS1zG,EAAO,UACjM22G,EAAcmP,aAAa9lH,GAAQ,KACnCwmH,EAAQvhH,OAjBZshH,GAqBM,SAAgB9jG,EAAOC,GAC7B,OAAO,SAAU1iB,EAAM22G,GACrB,IAAIkP,EAAelP,EAAc32G,EAAO,UAGxC,GAAKqmH,GAAgB1P,EAAclB,YAAaoQ,GAAhD,CAIAlP,EAAc/yC,QAAQ,YAAcnhD,EAAQ,OAASC,EAAM,SAAW1iB,EAAO,UAE7E,IACE6lH,EAAat7G,OAAOkY,EAAOC,GAC3B,MAAOzd,GACP0xG,EAAc/yC,QAAQ,UAAYnhD,EAAQ,OAASC,EAAM,SAAW1iB,EAAO,qBAnC/EumH,GAuCe,SAAyBvjD,GACxC,OAAO,SAAUhjE,EAAM22G,GACrB,IAAIkP,EAAelP,EAAc32G,EAAO,UAGnCqmH,GAAgB1P,EAAclB,YAAaoQ,KAIhDlP,EAAc/yC,QAAQ,WAAa5jE,EAAO,sBAAwBgjE,GAClE6iD,EAAajf,gBAAkB5jC,KAjDjCujD,GAoDQ,SAAkBzc,GAC1B,OAAO,SAAU9pG,EAAM22G,GACrB7M,MAtDFyc,GAyDW,SAAqB3jH,GAChC,OAAO,SAAU+zG,GACf,GAA6C,SAAzCA,EAAclB,YAAYplG,WAA9B,CAIAsmG,EAAc/yC,QAAQ,oCAAsChhE,GAAS,IAAM,KAE3E,IACE+zG,EAAclB,YAAY8E,YAAY33G,GACtC,MAAOqC,GACP+xB,GAAQ31B,IAAIsB,KAAK,0CAA2CsC,OApEhEshH,GAwEQ,SAAkBE,GAC1B,OAAO,SAAU9P,GACfA,EAAc/yC,QAAQ,mCAAqC6iD,GAE3D,IACE9P,EAAclB,YAAY3yF,SAAW2jG,EACrC,MAAOxhH,GACP+xB,GAAQ31B,IAAIsB,KAAK,sCAAuCsC,MA/E5DshH,GAmFK,WACL,OAAO,SAAUvmH,EAAM22G,GACrB,GAA6C,SAAzCA,EAAclB,YAAYplG,WAA9B,CAIA,IAAIw1G,EAAelP,EAAc32G,EAAO,UAGxC,GAAKqmH,GAAgB1P,EAAclB,YAAaoQ,GAAhD,CAIAlP,EAAc/yC,QAAQ,oBAAsB5jE,EAAO,UAEnD,IACE6lH,EAAa9+C,QACb,MAAO9hE,GACP+xB,GAAQ31B,IAAIsB,KAAK,sBAAwB3C,EAAO,SAAUiF,QArG9DshH,GAyGe,SAAyBvmH,EAAMyxF,GAC9C,OAAO,SAAUklB,GACf,IAAIyP,EAAYV,GAAY1lH,GACxB0mH,EAAO,YAAgBj1B,GAC3BklB,EAAc/yC,QAAQ,UAAY5jE,EAAO,qBAAuByxF,EAAQ,mBACxE,IAAIo0B,EAAelP,EAAclB,YAAYkR,gBAAgBD,GAC7Db,EAAav1G,iBAAiB,YAAaqmG,EAAc,KAAOyP,EAAY,eAC5EP,EAAav1G,iBAAiB,QAASqmG,EAAc,KAAOyP,EAAY,WACxEzP,EAAc7H,OAAO9uG,GAAQyxF,EAC7BklB,EAAc32G,EAAO,UAAY6lH,IAlHnCU,GAqHkB,SAA4BvmH,GAC9C,OAAO,SAAU22G,GACf,IAAIkP,EAAelP,EAAc32G,EAAO,UAIxC,GAHAmmH,GAAcnmH,EAAM22G,GAGf0P,GAAgB1P,EAAclB,YAAaoQ,GAAhD,CAIAlP,EAAc/yC,QAAQ,YAAc5jE,EAAO,qBAAuB22G,EAAc7H,OAAO9uG,GAAQ,qBAE/F,IACE22G,EAAclB,YAAYmR,mBAAmBf,GAC7C,MAAO5gH,GACP+xB,GAAQ31B,IAAIsB,KAAK,gCAAkC3C,EAAO,SAAUiF,OApIxEshH,GAwIU,SAAoB90B,GAC9B,OAAO,SAAUzxF,EAAM22G,GACrB,IAAIkP,EAAelP,EAAc32G,EAAO,UACpC0mH,EAAO,YAAgBj1B,GAGtB40B,GAAgB1P,EAAclB,YAAaoQ,IAK5ClP,EAAc7H,OAAO9uG,KAAUyxF,IAInCklB,EAAc/yC,QAAQ,YAAc5jE,EAAO,qBAAuB22G,EAAc7H,OAAO9uG,GAAQ,OAASyxF,GACxGo0B,EAAagB,WAAWH,GACxB/P,EAAc7H,OAAO9uG,GAAQyxF,KAK/Bq1B,GAAY,SAAmB1lG,GACjC,IAAIphB,EAAOohB,EAAKphB,KACZ22G,EAAgBv1F,EAAKu1F,cACrBrR,EAASlkF,EAAKkkF,OACdyF,EAAS3pF,EAAK2pF,OACd7pG,EAAOkgB,EAAKlgB,KAChBy1G,EAAcpnD,MAAMvtD,KAAK,CACvBhC,KAAMA,EACNslG,OAAQA,EACRyF,OAAQA,EACR7pG,KAAMA,IAER6kH,GAAW/lH,EAAM22G,IAGfoQ,GAAc,SAAqB/mH,EAAM22G,GAC3C,OAAO,SAAU1xG,GAOf,GAAI0xG,EAAcmP,aAAa9lH,GAAO,CACpC,IAAI+qG,EAAS4L,EAAcmP,aAAa9lH,GAAM+qG,OAC9C4L,EAAcmP,aAAa9lH,GAAQ,KAE/B+qG,GAEFA,EAAO4L,EAAc32G,EAAO,WAIhC+lH,GAAW/lH,EAAM22G,KAejBqQ,GAA6B,SAAUxR,GAGzC,SAASwR,EAAcvR,GACrB,IAAIt/F,EAuCJ,OArCAA,EAAQq/F,EAAqB7wG,KAAKqM,OAASA,MACrCykG,YAAcA,EAEpBt/F,EAAM8wG,oBAAsB,WAC1B,OAAOlB,GAAW,cAAe,IAAuB5vG,KAG1DA,EAAMs/F,YAAYnlG,iBAAiB,aAAc6F,EAAM8wG,qBAEvD9wG,EAAMytD,QAAU/I,GAAO,iBAEvB1kD,EAAM+wG,sBAAwB,EAC9B/wG,EAAMgxG,sBAAwB,EAC9BhxG,EAAMo5C,MAAQ,GACdp5C,EAAM2vG,aAAe,CACnB30F,MAAO,KACPI,MAAO,MAETpb,EAAMixG,yBAA2B,GACjCjxG,EAAMkxG,oBAAqB,EAC3BlxG,EAAM24F,OAAS,GACf34F,EAAMmxG,kBAAoBP,GAAY,QAAS,IAAuB5wG,IACtEA,EAAMoxG,kBAAoBR,GAAY,QAAS,IAAuB5wG,IAEtEA,EAAMqxG,cAAgB,SAAUviH,GAE9BkR,EAAMsxG,YAAcxiH,GAGtBkR,EAAMuxG,cAAgB,SAAUziH,GAE9BkR,EAAMwxG,YAAc1iH,GAGtBkR,EAAMyxG,uBAAwB,EAC9BzxG,EAAM0xG,iBAAkB,EACxB1xG,EAAM2xG,iBAAkB,EACjB3xG,EA1CT,IAAe6wG,EAAexR,GA6C9B,IAAInkG,EAAS21G,EAAcrnH,UA6iB3B,OA3iBA0R,EAAO02G,eAAiB,WACtB/2G,KAAK62G,iBAAkB,EACvB72G,KAAKkN,gBAGP7M,EAAO22G,wBAA0B,WAG/B,OAAOh3G,KAAK42G,uBAGdv2G,EAAO42G,qBAAuB,WAC5B,OAAOj3G,KAAK62G,iBAGdx2G,EAAO6I,MAAQ,WACb,OAAOlJ,KAAKg3G,2BAA6Bh3G,KAAKi3G,wBAGhD52G,EAAO62G,oBAAsB,SAA6BpZ,GACpD99F,KAAKg3G,4BAOTh3G,KAAKm3G,yBAAyBrZ,GAC9B99F,KAAK42G,uBAAwB,EAC7B52G,KAAK8D,QAAQ,wBACb9D,KAAKkN,iBAGP7M,EAAO6M,aAAe,WAOhBlN,KAAKkJ,UAAYlJ,KAAK82G,kBACxB92G,KAAK82G,iBAAkB,EACvB92G,KAAK8D,QAAQ,WAcjBzD,EAAOs1G,gBAAkB,SAAyB3mH,EAAMyxF,GACtDq1B,GAAU,CACR9mH,KAAM,cACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAwBvmH,EAAMyxF,GACtCvwF,KAAM,qBAWVmQ,EAAO01D,MAAQ,SAAe/mE,GAC5B8mH,GAAU,CACR9mH,KAAMA,EACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAcvmH,GACtBkB,KAAM,WAYVmQ,EAAOu1G,mBAAqB,SAA4B5mH,GACjDgR,KAAKo3G,wBAKVtB,GAAU,CACR9mH,KAAM,cACN22G,cAAe3lG,KACfs0F,OAAQihB,GAA2BvmH,GACnCkB,KAAM,uBARN81B,GAAQ31B,IAAIuB,MAAM,yCAoBtByO,EAAO+2G,sBAAwB,WAK7B,OAAQpxF,GAAQ1vB,QAAQf,aAAeywB,GAAQ1vB,QAAQnB,YAAc,IAASkiH,aAAe,IAASA,YAAY1oH,WAA0E,oBAAtD,IAAS0oH,YAAY1oH,UAAUinH,oBAWvKI,EAAcsB,cAAgB,WAC5B,OAAO,IAASC,cAAgB,IAASA,aAAa5oH,WAAmE,oBAA/C,IAAS4oH,aAAa5oH,UAAUknH,YAW5Gx1G,EAAOi3G,cAAgB,WACrB,OAAOt3G,KAAKtR,YAAY4oH,iBAa1Bj3G,EAAOw1G,WAAa,SAAoB7mH,EAAMyxF,GACvCzgF,KAAKs3G,gBAKVxB,GAAU,CACR9mH,KAAMA,EACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAmB90B,GAC3BvwF,KAAM,eARN81B,GAAQ31B,IAAIuB,MAAM,iCAoBtByO,EAAO82G,yBAA2B,SAAkCrZ,GAClE,IAAIl3F,EAAS5G,KAEb,IAAK89F,GAA8B,WAApBxvG,EAAQwvG,IAAuD,IAA/BjrG,OAAOC,KAAKgrG,GAAQjuG,OACjE,MAAM,IAAIkC,MAAM,uDAGlBc,OAAOC,KAAKgrG,GAAQ5qG,SAAQ,SAAUlE,GACpC,IAAIyxF,EAAQqd,EAAO9uG,GAEnB,IAAK4X,EAAOowG,0BACV,OAAOpwG,EAAO+uG,gBAAgB3mH,EAAMyxF,GAGlC75E,EAAO0wG,iBACT1wG,EAAOivG,WAAW7mH,EAAMyxF,OAa9BpgF,EAAOqxG,aAAe,SAAsBnzG,EAASw7F,GACnD,IAAI/yF,EAAShH,KAET4zF,EAAcr1F,EAAQq1F,YACtB5kG,EAAOuP,EAAQvP,KACfwpE,EAAQj6D,EAAQi6D,MAGpB,GAFAx4D,KAAKw3G,kBAAmB,EAEX,UAATxoH,GAAoBgR,KAAKy3G,cAAgBz3G,KAAKq2G,mBAGhD,OAFAr2G,KAAKo2G,yBAAyBplH,KAAK,CAACuN,EAASw7F,SAC7C/5F,KAAK4yD,QAAQ,2BAA6B4F,EAAM3oE,OAAS,uBAmB3D,GAVAimH,GAAU,CACR9mH,KAAMA,EACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAqB/8C,EAAOo7B,GAAe,CACjD8O,YAAa,GALH3I,GAOZA,OAAQA,EACR7pG,KAAM,iBAGK,UAATlB,EAAkB,CAGpB,GAFAgR,KAAKq2G,oBAAqB,GAErBr2G,KAAKo2G,yBAAyBvmH,OACjC,OAGF,IAAI0uD,EAAQv+C,KAAKo2G,yBAAyB9mH,QAC1C0Q,KAAK4yD,QAAQ,yBAA2BrU,EAAM1uD,OAAS,kBACvDmQ,KAAKo2G,yBAAyBvmH,OAAS,EACvC0uD,EAAMrrD,SAAQ,SAAUwkH,GACtB1wG,EAAO0qG,aAAan+G,MAAMyT,EAAQ0wG,QAYxCr3G,EAAOspG,cAAgB,WAGrB,OAAK0L,GAAgBr1G,KAAKykG,YAAazkG,KAAK23G,cAIrC33G,KAAK23G,YAAY9lG,SAAW7R,KAAK23G,YAAY9lG,SAH3CmU,GAAQijC,mBAanB5oD,EAAOqpG,cAAgB,WAGrB,OAAK2L,GAAgBr1G,KAAKykG,YAAazkG,KAAKy3G,cAIrCz3G,KAAKy3G,YAAY5lG,SAAW7R,KAAKy3G,YAAY5lG,SAH3CmU,GAAQijC,mBAanB5oD,EAAOwR,SAAW,WAChB,IAAI0O,EAAQ80F,GAAgBr1G,KAAKykG,YAAazkG,KAAKy3G,aAAez3G,KAAKy3G,YAAc,KACjFt3F,EAAQk1F,GAAgBr1G,KAAKykG,YAAazkG,KAAK23G,aAAe33G,KAAK23G,YAAc,KAErF,OAAIx3F,IAAUI,EACLvgB,KAAK2pG,gBAGVppF,IAAUJ,EACLngB,KAAK0pG,gBAnnlBO,SAA4BkO,EAASC,GAC5D,IAAIpmG,EAAQ,KACRC,EAAM,KACNomG,EAAQ,EACRC,EAAU,GACV5mG,EAAS,GAEb,IAAKymG,IAAYA,EAAQ/nH,SAAWgoH,IAAYA,EAAQhoH,OACtD,OAAOm2B,GAAQijC,kBAOjB,IAFA,IAAI4C,EAAQ+rD,EAAQ/nH,OAEbg8D,KACLksD,EAAQ/mH,KAAK,CACX+hC,KAAM6kF,EAAQnmG,MAAMo6C,GACpB78D,KAAM,UAER+oH,EAAQ/mH,KAAK,CACX+hC,KAAM6kF,EAAQlmG,IAAIm6C,GAClB78D,KAAM,QAMV,IAFA68D,EAAQgsD,EAAQhoH,OAETg8D,KACLksD,EAAQ/mH,KAAK,CACX+hC,KAAM8kF,EAAQpmG,MAAMo6C,GACpB78D,KAAM,UAER+oH,EAAQ/mH,KAAK,CACX+hC,KAAM8kF,EAAQnmG,IAAIm6C,GAClB78D,KAAM,QAUV,IALA+oH,EAAQltE,MAAK,SAAUnvB,EAAG8lC,GACxB,OAAO9lC,EAAEqX,KAAOyuB,EAAEzuB,QAIf84B,EAAQ,EAAGA,EAAQksD,EAAQloH,OAAQg8D,IACV,UAAxBksD,EAAQlsD,GAAO78D,KAIH,MAHd8oH,IAIErmG,EAAQsmG,EAAQlsD,GAAO94B,MAEQ,QAAxBglF,EAAQlsD,GAAO78D,MAIV,MAHd8oH,IAIEpmG,EAAMqmG,EAAQlsD,GAAO94B,MAKX,OAAVthB,GAA0B,OAARC,IACpBP,EAAOngB,KAAK,CAACygB,EAAOC,IACpBD,EAAQ,KACRC,EAAM,MAIV,OAAOsU,GAAQrU,iBAAiBR,GAgjlBvB6mG,CAAmBh4G,KAAK2pG,gBAAiB3pG,KAAK0pG,kBAavDrpG,EAAO43G,YAAc,SAAqBnmG,EAAUioF,QACnC,IAAXA,IACFA,EAAShoD,IAOX+jE,GAAU,CACR9mH,KAAM,cACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAiBzjG,GACzB5hB,KAAM,WACN6pG,OAAQA,KAeZ15F,EAAOkpG,YAAc,SAAqB33G,EAAOmoG,QACjC,IAAVnoG,IACFA,EAAQ,WAGK,IAAXmoG,IACFA,EAAShoD,IAGU,kBAAVngD,IACTA,OAAQsJ,GAOV46G,GAAU,CACR9mH,KAAM,cACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAoB3jH,GAC5B1B,KAAM,cACN6pG,OAAQA,KAcZ15F,EAAO4oG,YAAc,SAAqBx3F,EAAOC,EAAKytD,QACvC,IAATA,IACFA,EAAOptB,IAGJ/xC,KAAK2pG,gBAAgB95G,QAA0C,IAAhCmQ,KAAK2pG,gBAAgBj4F,IAAI,GAK7DokG,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAe9jG,EAAOC,GAC9BqoF,OAAQ56B,EACRjvE,KAAM,WATNivE,KAuBJ9+D,EAAO8qG,YAAc,SAAqB15F,EAAOC,EAAKytD,QACvC,IAATA,IACFA,EAAOptB,IAGJ/xC,KAAK0pG,gBAAgB75G,QAA0C,IAAhCmQ,KAAK0pG,gBAAgBh4F,IAAI,GAK7DokG,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAe9jG,EAAOC,GAC9BqoF,OAAQ56B,EACRjvE,KAAM,WATNivE,KAmBJ9+D,EAAOirG,SAAW,WAEhB,SAAIsJ,GAAU,QAAS50G,QAAS40G,GAAU,QAAS50G,QAarDK,EAAOusG,qBAAuB,SAA8B56C,GAY1D,MAXsB,qBAAXA,GAA0BhyD,KAAK23G,aAC1C33G,KAAKk2G,wBAA0BlkD,IAC7B8jD,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAwBvjD,GAChC9hE,KAAM,oBAER8P,KAAKk2G,sBAAwBlkD,GAGxBhyD,KAAKk2G,uBASd71G,EAAO0sG,qBAAuB,SAA8B/6C,GAY1D,MAXsB,qBAAXA,GAA0BhyD,KAAKy3G,aAC1Cz3G,KAAK+sG,uBAAyB/6C,IAC5B8jD,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAwBvjD,GAChC9hE,KAAM,oBAER8P,KAAKm2G,sBAAwBnkD,GAGxBhyD,KAAKm2G,uBAWd91G,EAAOmzG,mBAAqB,SAA4BryG,GACjDnB,KAAK23G,aAIV7B,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAiBp0G,GACzBjR,KAAM,cAYVmQ,EAAOkzG,mBAAqB,SAA4BpyG,GACjDnB,KAAKy3G,aAIV3B,GAAU,CACR9mH,KAAM,QACN22G,cAAe3lG,KACfs0F,OAAQihB,GAAiBp0G,GACzBjR,KAAM,cAQVmQ,EAAOiK,QAAU,WACf,IAAI0F,EAAShQ,KAEbA,KAAK8D,QAAQ,WACb6wG,GAAYzhH,SAAQ,SAAUlE,GAC5BghB,EAAO+lD,MAAM/mE,GAETghB,EAAOonG,wBACTpnG,EAAO4lG,mBAAmB5mH,GAE1BghB,EAAOhhB,EAAO,kBAAiB,WAC7B,OAAOmmH,GAAcnmH,EAAMghB,SAIjChQ,KAAKq2G,oBAAqB,EAC1Br2G,KAAKo2G,yBAAyBvmH,OAAS,EAEnCmQ,KAAKi2G,qBACPj2G,KAAKykG,YAAYrlG,oBAAoB,aAAcY,KAAKi2G,qBAG1Dj2G,KAAKvO,OAGAukH,EA3lBwB,CA4lB/BhwF,GAAQqjC,aAEN6uD,GAAc,SAAqBC,GACrC,OAAOh7B,mBAAmBi7B,OAAOh0D,OAAO+T,aAAa5kE,MAAM,KAAM4kH,MAG/DE,GAAuB,IAAInxC,WAAW,OAAO1tE,MAAM,IAAI+C,KAAI,SAAU+7G,GACvE,OAAOA,EAAOnxC,WAAW,OAUvBoxC,GAAgC,SAAUC,GAG5C,SAASD,EAAiBp6F,EAAU5f,GAClC,IAAI4G,EAgBJ,YAdgB,IAAZ5G,IACFA,EAAU,KAGZ4G,EAAQqzG,EAAe7kH,KAAKqM,KAAMme,EAAU5f,IAAYyB,MAGlDilG,aAAe,KACrB9/F,EAAMszG,gBAAkB,KACxBtzG,EAAM+/F,YAAc,WACpB//F,EAAMuzG,0BAA4Bv6F,EAAS4D,yBAG3C5c,EAAM4gG,8BAA+B,EAC9B5gG,EAnBT,IAAeozG,EAAkBC,GAsBjC,IAAIn4G,EAASk4G,EAAiB5pH,UAic9B,OA/bA0R,EAAOwnG,kBAAoB,WAEzB,OAAO,MAUTxnG,EAAOmpG,UAAY,WACjB,IAAKxpG,KAAKy4G,kBAAoBz4G,KAAKy4G,gBAAgB9lG,OAAS3S,KAAKy4G,gBAAgB9lG,KAAK9iB,OACpF,OAAOm2B,GAAQrU,mBAGjB,IAAIgB,EAAO3S,KAAKy4G,gBAAgB9lG,KAC5BlB,EAAQkB,EAAK,GAAGE,UAChBnB,EAAMiB,EAAKA,EAAK9iB,OAAS,GAAGgjB,UAChC,OAAOmT,GAAQrU,iBAAiB,CAAC,CAACF,EAAOC,MAc3CrR,EAAOupG,kBAAoB,SAA2BrtG,EAAK+D,GAKzD,QAJY,IAARA,IACFA,GAAM,IAGH/D,EACH,OAAO,KAGT,IAAIkN,EAAKkvD,GAAcp8D,GACnBstG,EAAY7pG,KAAKmnG,cAAc19F,GAEnC,GAAInJ,IAAQupG,GAAattG,EAAIi8D,MAAO,CAKlC,IAAImgD,EAAqBN,GAAqBrhD,WAAaz6D,EAAIi8D,MAAMxB,WACjE4hD,EAAkB,IAAI1xC,WAAWyxC,GACrCC,EAAgBt4G,IAAI/D,EAAIi8D,OACxBogD,EAAgBt4G,IAAI+3G,GAAsB97G,EAAIi8D,MAAMxB,YACpDh3D,KAAKmnG,cAAc19F,GAAMogG,EAAY,CACnCr7C,YAAajyD,EAAIiyD,YACjBqJ,UAAWt7D,EAAIs7D,UACfW,MAAOogD,GAIX,OAAO/O,GAAattG,GAUtB8D,EAAO2pG,mBAAqB,WAC1B,OAAOhqG,KAAKiqG,WAAajqG,KAAKy4G,kBAAoBz4G,KAAKgV,UAWzD3U,EAAO6pG,MAAQ,WAGb,OAFAlqG,KAAK2H,MAAQ,QACb3H,KAAKmqG,kBACEnqG,KAAKkpG,kBAYd7oG,EAAOqS,MAAQ,SAAe2c,GAC5B,MAAsB,qBAAXA,IAIXrvB,KAAKy4G,gBAAkBppF,EAGJ,SAAfrvB,KAAK2H,OAAoB3H,KAAKgqG,sBAChChqG,KAAKkqG,SAPElqG,KAAKy4G,iBAoBhBp4G,EAAO9G,OAAS,SAAgBkY,EAAOC,GACrCywF,GAAoB1wF,EAAOC,EAAK1R,KAAKy4G,kBAavCp4G,EAAOgrG,YAAc,WACnB,IAAIzkG,EAAS5G,KAGT4zF,EAAc5zF,KAAKurG,qBAEvB,GAAK3X,EAAL,CAIA,GAA8E,OAA1E5zF,KAAKynG,gBAAgBoR,2BAA2BjlB,EAAY+O,UAAoB,CAclF,OAFA3iG,KAAKynG,gBAAgBtjG,IAAI,mBATE,WACzByC,EAAOe,MAAQ,QAEVf,EAAOoO,UAEVpO,EAAOsiG,yBAKXlpG,KAAK2H,MAAQ,uBAIf3H,KAAKwrG,aAAa5X,KAIpBvzF,EAAOqsG,2BAA6B,WAClC,OAAO,MAGTrsG,EAAOkrG,mBAAqB,WAC1B,OAAOvrG,KAAK84G,mBAAmBN,EAAe7pH,UAAU48G,mBAAmB53G,KAAKqM,QAclFK,EAAOy4G,mBAAqB,SAA4BllB,GACtD,KAAOA,GAAeA,EAAY9oC,QAAQ90C,OAAO,CAE/C,GAAI49E,EAAY8O,WAAa,GAAK9O,EAAY/oC,SAASM,SAASt7D,OAAQ,CACtE+jG,EAAc,KACd,MAGFA,EAAc5zF,KAAKssG,qBAAqB,CACtCzhD,SAAU+oC,EAAY/oC,SACtB63C,WAAY9O,EAAY8O,WAAa,EACrCH,eAAgB3O,EAAY2O,eAAiB3O,EAAY9hF,SACzDgxF,cAAelP,EAAYkP,gBAI/B,OAAOlP,GAGTvzF,EAAO04G,aAAe,SAAsBnnH,GAC1CoO,KAAKpO,MAAMA,GACXoO,KAAK2H,MAAQ,QACb3H,KAAKkV,QACLlV,KAAK8D,QAAQ,UASfzD,EAAOiyG,wBAA0B,SAAiC1gH,EAAOs8G,EAAe14G,GACtF,IAAIwR,EAAShH,KAEb,GAAKA,KAAKy4G,gBAAV,CAOA,GAFAz4G,KAAK4yG,mBAAmB1E,EAAc/U,QAEjCn5F,KAAKmmG,gBAGR,OAFAnmG,KAAK2H,MAAQ,aACb3H,KAAKyoG,sBAAwB,GAI/B,GAAI72G,EAYF,OAXIA,EAAMgZ,OAASwtF,IACjBp4F,KAAK8yG,iBAGHlhH,EAAMgZ,OAASwtF,GACjBp4F,KAAKyoG,sBAAwB,EAE7BzoG,KAAK2oG,sBAAwB,OAG/B3oG,KAAK+4G,aAAannH,GAIpB,IAAIgiG,EAAc5zF,KAAKmmG,gBAGvBnmG,KAAK6yG,2BAA2Bjf,EAAY9hF,SAAUo8F,EAAc/U,OACpEn5F,KAAK2H,MAAQ,YAEb3H,KAAK8D,QAAQ,aACb,IAAIgnD,EAAU8oC,EAAY9oC,QAQ1B,GANIA,EAAQvuD,MACVuuD,EAAQvuD,IAAIi8D,MAAQ01C,EAAc3xG,IAAIi8D,OAGxCo7B,EAAYp7B,MAAQ01C,EAAc11C,MAEH,oBAApB,IAAS77C,QAAyB3c,KAAKy4G,iBAAmBz4G,KAAKy4G,gBAAgB76F,MAAO,CAC/F,IAAIo7F,EAEA95D,EAAe,WACjBl4C,EAAOyxG,gBAAgB76F,MAAMnsB,IAAI,cAAeunH,GAEhDhyG,EAAO+xG,aAAa,CAClB9mG,QAAS,0BAeb,OATA+mG,EAAc,WACZhyG,EAAOyxG,gBAAgB76F,MAAMnsB,IAAI,aAAcytD,GAE/Cl4C,EAAOsrG,wBAAwB1gH,EAAOs8G,EAAe14G,IAGvDwK,KAAK2H,MAAQ,mBACb3H,KAAKy4G,gBAAgB76F,MAAMzZ,IAAI,cAAe60G,QAC9Ch5G,KAAKy4G,gBAAgB76F,MAAMzZ,IAAI,aAAc+6C,GAI/C4L,EAAQmuD,WAAY,EAEpB,IACEj5G,KAAKk5G,cAActlB,GACnB,MAAO3/F,GAIP,YAHA+L,KAAK+4G,aAAa,CAChB9mG,QAAShe,EAAEge,UAmBf,GAdAjS,KAAKm5G,mBAAmBvlB,EAAa5zF,KAAKynG,gBAAgB2R,UAAUxlB,EAAY+O,UAAW3iG,KAAKiqG,WAE5FrW,EAAYjhF,KAAK9iB,OACnB+jG,EAAYY,WAAa,CACvB/iF,MAAOmiF,EAAYjhF,KAAK,GAAGE,UAC3BnB,IAAKkiF,EAAYjhF,KAAKihF,EAAYjhF,KAAK9iB,OAAS,GAAGijB,SAGrD8gF,EAAYY,WAAa,CACvB/iF,MAAOmiF,EAAY2O,eACnB7wF,IAAKkiF,EAAY2O,eAAiB3O,EAAY9hF,UAI9C8hF,EAAYkP,cAId,OAHA9iG,KAAK8D,QAAQ,kBACb9D,KAAKmmG,gBAAkB,UACvBnmG,KAAK2H,MAAQ,SAIfisF,EAAY58B,WAAa48B,EAAYp7B,MAAMxB,WAC3Ch3D,KAAK6oG,oBAAsB/9C,EAAQh5C,SAGnC8hF,EAAYjhF,KAAKzf,SAAQ,SAAU0f,GACjC5L,EAAOyxG,gBAAgBhlG,OAAOzM,EAAO0xG,0BAA4B,IAAI,IAASv5F,OAAOvM,EAAIC,UAAWD,EAAIE,QAASF,EAAIva,MAAQua,MA5/IhG,SAAsCF,GACvE,IAAIC,EAAOD,EAAMC,KAEjB,GAAKA,EAIL,IAAK,IAAI/iB,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAAK,CAIpC,IAHA,IAAIypH,EAAa,GACbC,EAAc,EAETnuF,EAAI,EAAGA,EAAIxY,EAAK9iB,OAAQs7B,IAC3BxY,EAAK/iB,GAAGijB,YAAcF,EAAKwY,GAAGtY,WAAaF,EAAK/iB,GAAGkjB,UAAYH,EAAKwY,GAAGrY,SAAWH,EAAK/iB,GAAGyI,OAASsa,EAAKwY,GAAG9yB,QAC7GihH,EAEkB,GAChBD,EAAWroH,KAAK2hB,EAAKwY,IAKvBkuF,EAAWxpH,QACbwpH,EAAWnmH,SAAQ,SAAUqmH,GAC3B,OAAO7mG,EAAM2M,UAAUk6F,OA2+I3BC,CAA6Bx5G,KAAKy4G,iBAClCz4G,KAAKyzG,0BA/GHzzG,KAAK2H,MAAQ,SAkHjBtH,EAAOg3F,YAAc,aAIrBh3F,EAAOowG,qBAAuB,aAW9BpwG,EAAO64G,cAAgB,SAAuBtlB,GAC5C,IAAI6lB,EACAC,GAAsB,EAEU,oBAAzB,IAASzmC,YAClBwmC,EAAU,IAAI,IAASxmC,YAAY,SAEnCwmC,EAAU,IAAS98F,OAAOG,gBAC1B48F,GAAsB,GAGxB,IAAIh9F,EAAS,IAAI,IAASC,OAAOC,OAAO,IAAU,IAASC,MAAO48F,GAgBlE,GAfA7lB,EAAYjhF,KAAO,GACnBihF,EAAY+lB,aAAe,CACzBC,OAAQ,EACRC,MAAO,GAETn9F,EAAOM,MAAQ42E,EAAYjhF,KAAK3hB,KAAKyT,KAAKmvF,EAAYjhF,MAEtD+J,EAAOo9F,eAAiB,SAAUv9G,GAChCq3F,EAAY+lB,aAAep9G,GAG7BmgB,EAAOO,eAAiB,SAAUrrB,GAChCo0B,GAAQ31B,IAAIsB,KAAK,wCAA0CC,EAAMqgB,UAG/D2hF,EAAY9oC,QAAQvuD,IAAK,CAC3B,IAAIw9G,EAAUnmB,EAAY9oC,QAAQvuD,IAAIi8D,MAElCkhD,IACFK,EAAU7B,GAAY6B,IAGxBr9F,EAAOS,MAAM48F,GAGf,IAAIC,EAAcpmB,EAAYp7B,MAE1BkhD,IACFM,EAAc9B,GAAY8B,IAG5Bt9F,EAAOS,MAAM68F,GACbt9F,EAAOY,SAiBTjd,EAAO84G,mBAAqB,SAA4BvlB,EAAaqmB,EAAYpvD,GAC/E,IAAIC,EAAU8oC,EAAY9oC,QAE1B,GAAKmvD,EAOL,GAAKrmB,EAAYjhF,KAAK9iB,OAAtB,CAQA,IAAI8pH,EAAe/lB,EAAY+lB,aAC3BO,EAAOP,EAAaC,OAAS,mBAAmBD,EAAaE,MAAQI,EAAWjP,QAOpF,GANApX,EAAYjhF,KAAKzf,SAAQ,SAAU0f,GAEjCA,EAAIC,WAAaqnG,EACjBtnG,EAAIE,SAAWonG,MAGZrvD,EAASy/C,SAAU,CACtB,IAAI6P,EAAavmB,EAAYjhF,KAAK,GAAGE,UACjCunG,EAAYxmB,EAAYjhF,KAAKihF,EAAYjhF,KAAK9iB,OAAS,GAAGgjB,UAC9Dg4C,EAASy/C,SAAW,CAClB39C,cAAe9B,EAAS8B,cAAgBinC,EAAY8O,WACpD3vE,KAAM31B,KAAKE,IAAI68G,EAAYC,EAAYtvD,EAAQh5C,iBAjBjDg5C,EAAQ90C,OAAQ,GAsBbuiG,EAxd2B,CAydlChU,IAmBE8V,GAAY,SAAmB3nG,EAAO4nG,GAGxC,IAFA,IAAI3nG,EAAOD,EAAMC,KAER/iB,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAAK,CACpC,IAAIgjB,EAAMD,EAAK/iB,GAEf,GAAI0qH,GAAa1nG,EAAI2nG,aAAeD,GAAa1nG,EAAI4nG,UACnD,OAAO5nG,EAIX,OAAO,MA8EL6nG,GAAsB,CAE1B,CACEvqH,KAAM,MACNwqH,IAAK,SAAahT,EAAgB78C,EAAU/4C,EAAUuxF,EAAiBrkF,GACrE,GAAIlN,IAAawgB,IAAU,CAMzB,MALgB,CACdS,KAAM,EACNu4B,aAAc,EACdC,UAAW,MAKf,OAAO,OAGX,CACEr7D,KAAM,kBACNwqH,IAAK,SAAahT,EAAgB78C,EAAU/4C,EAAUuxF,EAAiBrkF,GACrE,IAAKnsB,OAAOC,KAAK40G,EAAeiT,4BAA4B9qH,OAC1D,OAAO,KAGT,IAAI2zF,EAAY,KACZo3B,EAAe,KACfrrD,EAAmBrE,GAAoBL,GAC3C7rC,EAAcA,GAAe,EAE7B,IAAK,IAAIpvB,EAAI,EAAGA,EAAI2/D,EAAiB1/D,OAAQD,IAAK,CAGhD,IACI4/D,EAAiBD,EADT1E,EAASoB,SAA2B,IAAhBjtC,EAAoBpvB,EAAI2/D,EAAiB1/D,QAAUD,EAAI,IAEnFk7D,EAAU0E,EAAe1E,QACzB+vD,EAAkBnT,EAAeiT,2BAA2B7vD,EAAQ63C,UAExE,GAAKkY,GAAoB/vD,EAAQmP,eAAjC,CAIA,IACIxoD,EADcq5C,EAAQmP,eAAevsE,UAAY,IAC3BmtH,EAE1B,GAAI/vD,EAAQC,OAA6C,kBAA7ByE,EAAejE,UACzC,IAAK,IAAIuvD,EAAI,EAAGA,EAAItrD,EAAejE,UAAWuvD,IAC5CrpG,GAASq5C,EAAQC,MAAM+vD,GAAGhpG,SAI9B,IAAIinB,EAAW37B,KAAK8sC,IAAIlrB,EAAcvN,GAGtC,GAAqB,OAAjBmpG,IAAuC,IAAb7hF,GAAkB6hF,EAAe7hF,GAC7D,MAGF6hF,EAAe7hF,EACfyqD,EAAY,CACVzwD,KAAMthB,EACN65C,aAAckE,EAAelE,aAC7BC,UAAWiE,EAAejE,YAI9B,OAAOi4B,IAIX,CACEtzF,KAAM,UACNwqH,IAAK,SAAahT,EAAgB78C,EAAU/4C,EAAUuxF,EAAiBrkF,GACrE,IAAIwkE,EAAY,KACZo3B,EAAe,KACnB57F,EAAcA,GAAe,EAG7B,IAFA,IAAIuwC,EAAmBrE,GAAoBL,GAElCj7D,EAAI,EAAGA,EAAI2/D,EAAiB1/D,OAAQD,IAAK,CAGhD,IACI4/D,EAAiBD,EADT1E,EAASoB,SAA2B,IAAhBjtC,EAAoBpvB,EAAI2/D,EAAiB1/D,QAAUD,EAAI,IAEnFk7D,EAAU0E,EAAe1E,QACzBr5C,EAAQ+9C,EAAeh5B,MAAQg5B,EAAeh5B,KAAK/kB,OAASq5C,GAAWA,EAAQr5C,MAEnF,GAAIq5C,EAAQ63C,WAAaU,GAAoC,qBAAV5xF,EAAuB,CACxE,IAAIsnB,EAAW37B,KAAK8sC,IAAIlrB,EAAcvN,GAGtC,GAAqB,OAAjBmpG,GAAyBA,EAAe7hF,EAC1C,QAGGyqD,GAA8B,OAAjBo3B,GAAyBA,GAAgB7hF,KACzD6hF,EAAe7hF,EACfyqD,EAAY,CACVzwD,KAAMthB,EACN65C,aAAckE,EAAelE,aAC7BC,UAAWiE,EAAejE,aAMlC,OAAOi4B,IAIX,CACEtzF,KAAM,gBACNwqH,IAAK,SAAahT,EAAgB78C,EAAU/4C,EAAUuxF,EAAiBrkF,GACrE,IAAIwkE,EAAY,KAGhB,GAFAxkE,EAAcA,GAAe,EAEzB6rC,EAASkwD,qBAAuBlwD,EAASkwD,oBAAoBlrH,OAG/D,IAFA,IAAI+qH,EAAe,KAEVhrH,EAAI,EAAGA,EAAIi7D,EAASkwD,oBAAoBlrH,OAAQD,IAAK,CAC5D,IAAI07D,EAAeT,EAASkwD,oBAAoBnrH,GAC5CktF,EAAgBjyB,EAASmwD,sBAAwBprH,EAAI,EACrDqrH,EAAoBvT,EAAewT,gBAAgBp+B,GAEvD,GAAIm+B,EAAmB,CACrB,IAAIliF,EAAW37B,KAAK8sC,IAAIlrB,EAAci8F,EAAkBloF,MAGxD,GAAqB,OAAjB6nF,GAAyBA,EAAe7hF,EAC1C,QAGGyqD,GAA8B,OAAjBo3B,GAAyBA,GAAgB7hF,KACzD6hF,EAAe7hF,EACfyqD,EAAY,CACVzwD,KAAMkoF,EAAkBloF,KACxBu4B,aAAcA,EACdC,UAAW,QAOrB,OAAOi4B,IAIX,CACEtzF,KAAM,WACNwqH,IAAK,SAAahT,EAAgB78C,EAAU/4C,EAAUuxF,EAAiBrkF,GACrE,OAAI6rC,EAASy/C,SACK,CACdv3E,KAAM83B,EAASy/C,SAASv3E,KACxBu4B,aAAcT,EAASy/C,SAAS39C,cAAgB9B,EAAS8B,cACzDpB,UAAW,MAKR,QAIP4vD,GAA8B,SAAU3W,GAG1C,SAAS2W,EAAe58G,GACtB,IAAI4G,EAQJ,OANAA,EAAQq/F,EAAqB7wG,KAAKqM,OAASA,MAErCo5G,UAAY,GAClBj0G,EAAM+1G,gBAAkB,GACxB/1G,EAAMw1G,2BAA6B,GACnCx1G,EAAMytD,QAAU/I,GAAO,kBAChB1kD,EAXT,IAAeg2G,EAAgB3W,GA8B/B,IAAInkG,EAAS86G,EAAexsH,UA6W5B,OA3WA0R,EAAOyrG,aAAe,SAAsBjhD,EAAU/4C,EAAUuxF,EAAiBrkF,GAC/E,IAAIo8F,EAAap7G,KAAKq7G,eAAexwD,EAAU/4C,EAAUuxF,EAAiBrkF,GAE1E,OAAKo8F,EAAWvrH,OAUTmQ,KAAKs7G,iBAAiBF,EAAY,CACvCjoH,IAAK,OACLM,MAAOurB,IARA,MAwBX3e,EAAOk7G,eAAiB,SAAwB1wD,EAAU/4C,GACxD,IAAK+4C,IAAaA,EAASM,SACzB,OAAO,KAGT,IAAIiwD,EAAap7G,KAAKq7G,eAAexwD,EAAU/4C,EAAU+4C,EAASmwD,sBAAuB,GAEzF,IAAKI,EAAWvrH,OACd,OAAO,KAGT,IAAI2zF,EAAYxjF,KAAKs7G,iBAAiBF,EAAY,CAChDjoH,IAAK,eACLM,MAAO,IAQT,OAJI+vF,EAAUl4B,aAAe,IAC3Bk4B,EAAUzwD,OAAS,GAGd31B,KAAK8sC,IAAIs5C,EAAUzwD,KAAOm6B,GAAa,CAC5CC,gBAAiBtC,EAAS0B,eAC1Ba,aAAcvC,EAASM,SACvBkC,WAAYm2B,EAAUl4B,aACtBgC,SAAU,MAmBdjtD,EAAOg7G,eAAiB,SAAwBxwD,EAAU/4C,EAAUuxF,EAAiBrkF,GAGnF,IAFA,IAAIo8F,EAAa,GAERxrH,EAAI,EAAGA,EAAI6qH,GAAoB5qH,OAAQD,IAAK,CACnD,IAAI4rH,EAAWf,GAAoB7qH,GAC/B4zF,EAAYg4B,EAASd,IAAI16G,KAAM6qD,EAAU/4C,EAAUuxF,EAAiBrkF,GAEpEwkE,IACFA,EAAUg4B,SAAWA,EAAStrH,KAC9BkrH,EAAWpqH,KAAK,CACdwqH,SAAUA,EAAStrH,KACnBszF,UAAWA,KAKjB,OAAO43B,GAmBT/6G,EAAOi7G,iBAAmB,SAA0BF,EAAY/nH,GAK9D,IAJA,IAAIooH,EAAgBL,EAAW,GAAG53B,UAC9Bk4B,EAAet+G,KAAK8sC,IAAIkxE,EAAW,GAAG53B,UAAUnwF,EAAOF,KAAOE,EAAOI,OACrEkoH,EAAeP,EAAW,GAAGI,SAExB5rH,EAAI,EAAGA,EAAIwrH,EAAWvrH,OAAQD,IAAK,CAC1C,IAAIgsH,EAAcx+G,KAAK8sC,IAAIkxE,EAAWxrH,GAAG4zF,UAAUnwF,EAAOF,KAAOE,EAAOI,OAEpEmoH,EAAcF,IAChBA,EAAeE,EACfH,EAAgBL,EAAWxrH,GAAG4zF,UAC9Bm4B,EAAeP,EAAWxrH,GAAG4rH,UAKjC,OADAx7G,KAAK4yD,QAAQ,kBAAoBv/D,EAAOF,IAAM,KAAOE,EAAOI,MAA/C,2BAA0FkoH,EAAe,YAAcF,EAAc1oF,KAArI,kBAAuK0oF,EAAcnwD,cAAoD,kBAA5BmwD,EAAclwD,UAAyB,cAAgBkwD,EAAclwD,UAAY,IAAM,KAC1SkwD,GAYTp7G,EAAOuqG,uBAAyB,SAAgCP,EAAaD,GAC3E,IAAIO,EAAoBP,EAAYz9C,cAAgB09C,EAAY19C,cAEhE,GAAIg+C,EAjV+B,MAkVjC3kF,GAAQ31B,IAAIsB,KAAK,uDAAyDg5G,EAAoB,uBAMhG,IAAK,IAAI/6G,EAAI+6G,EAAoB,EAAG/6G,GAAK,EAAGA,IAAK,CAC/C,IAAIisH,EAAqBxR,EAAYl/C,SAASv7D,GAE9C,GAAIisH,GAA0D,qBAA7BA,EAAmBpqG,MAAuB,CACzE24F,EAAYE,SAAW,CACrB39C,cAAe09C,EAAY19C,cAAgB/8D,EAC3CmjC,KAAM8oF,EAAmBpqG,OAE3BzR,KAAK4yD,QAAQ,gCAAkCw3C,EAAYE,SAASv3E,KAAvD,oBAA0Fq3E,EAAYE,SAAS39C,cAAgB,KAC5I3sD,KAAK8D,QAAQ,kBACb,SAYNzD,EAAOkqG,2BAA6B,SAAoC1/C,GAOtE,GAFA7qD,KAAK26G,2BAA6B,GAE9B9vD,EAASM,UAAYN,EAASM,SAASt7D,QAAUg7D,EAASM,SAAS,GAAG8O,eAAgB,CACxF,IAAI6hD,EAAejxD,EAASM,SAAS,GACjC4wD,EAAoBD,EAAa7hD,eAAevsE,UAAY,IAChEsS,KAAK26G,2BAA2BmB,EAAanZ,WAAaoZ,IAiB9D17G,EAAOqwG,sBAAwB,SAA+BtgG,GAC5D,IAAIwjF,EAAcxjF,EAAKwjF,YACnB+c,EAA4BvgG,EAAKugG,0BACjCqL,EAAiCh8G,KAAKi8G,6BAA6BroB,EAAaA,EAAYY,WAAYmc,GACxG7lD,EAAU8oC,EAAY9oC,QAEtBkxD,IACFh8G,KAAKk8G,2BAA2BtoB,GAG3BA,EAAY/oC,SAASy/C,WACxB1W,EAAY/oC,SAASy/C,SAAW,CAC9B39C,cAAeinC,EAAY/oC,SAAS8B,cAAgBinC,EAAY8O,WAChE3vE,KAAM+3B,EAAQr5C,SAKpB,IAAI0qG,EAAWrxD,EAAQmP,eAEnBnP,EAAQgyB,eAAiB6zB,GAA6BwL,IACxDn8G,KAAK26G,2BAA2B7vD,EAAQ63C,WAAcwZ,EAASzuH,UAAY,MAI/E2S,EAAOw4G,2BAA6B,SAAoClW,GACtE,MAAwC,qBAA7B3iG,KAAKo5G,UAAUzW,GACjB,KAGF3iG,KAAKo5G,UAAUzW,GAAU5vE,MAGlC1yB,EAAO6yG,mBAAqB,SAA4BvQ,GACtD,MAAwC,qBAA7B3iG,KAAKo5G,UAAUzW,GACjB,KAGF3iG,KAAKo5G,UAAUzW,GAAUqI,SAmBlC3qG,EAAO47G,6BAA+B,SAAsCroB,EAAaY,EAAYmc,GAEnG,IAGIl/F,EACAC,EAJAo5C,EAAU8oC,EAAY9oC,QACtBt0B,EAAOo9D,EAAYp9D,KACnByjF,EAAaj6G,KAAKo5G,UAAUxlB,EAAY+O,UAI5C,GAA2C,kBAAhC/O,EAAYgC,gBACrBqkB,EAAa,CACXlnF,KAAM6gE,EAAY2O,eAClByI,QAASpX,EAAY2O,eAAiB/N,EAAW/iF,OAG/Ck/F,IACF3wG,KAAKo5G,UAAUxlB,EAAY+O,UAAYsX,EACvCj6G,KAAK8D,QAAQ,mBACb9D,KAAK4yD,QAAQ,6BAA+BghC,EAAY+O,SAA3C,YAA0EsX,EAAWlnF,KAAO,eAAiBknF,EAAWjP,QAAU,MAGjJv5F,EAAQmiF,EAAY2O,eACpB7wF,EAAM8iF,EAAW9iF,IAAMuoG,EAAWjP,YAC7B,KAAIiP,EAIT,OAAO,EAHPxoG,EAAQ+iF,EAAW/iF,MAAQwoG,EAAWjP,QACtCt5F,EAAM8iF,EAAW9iF,IAAMuoG,EAAWjP,QAoBpC,OAfIx0E,IACFA,EAAK/kB,MAAQA,EACb+kB,EAAK9kB,IAAMA,KAQRo5C,EAAQr5C,OAASA,EAAQq5C,EAAQr5C,SACpCq5C,EAAQr5C,MAAQA,GAGlBq5C,EAAQp5C,IAAMA,GACP,GAYTrR,EAAO67G,2BAA6B,SAAoCtoB,GACtE,IAAI/oC,EAAW+oC,EAAY/oC,SACvBC,EAAU8oC,EAAY9oC,QAI1B,GAAIA,EAAQgyB,cACV98E,KAAKk7G,gBAAgBpwD,EAAQ63C,UAAY,CACvC5vE,KAAM+3B,EAAQr5C,MACd2qG,SAAU,QAEP,GAAIvxD,EAASkwD,qBAAuBlwD,EAASkwD,oBAAoBlrH,OAGtE,IAAK,IAAID,EAAI,EAAGA,EAAIi7D,EAASkwD,oBAAoBlrH,OAAQD,IAAK,CAC5D,IAAI07D,EAAeT,EAASkwD,oBAAoBnrH,GAC5CktF,EAAgBjyB,EAASmwD,sBAAwBprH,EAAI,EACrDysH,EAAiB/wD,EAAesoC,EAAY8O,WAC5C0Z,EAAWh/G,KAAK8sC,IAAImyE,GAExB,IAAKr8G,KAAKk7G,gBAAgBp+B,IAAkB98E,KAAKk7G,gBAAgBp+B,GAAes/B,SAAWA,EAAU,CACnG,IAAIrpF,OAAO,EAGTA,EADEspF,EAAiB,EACZvxD,EAAQr5C,MAAQy7C,GAAa,CAClCC,gBAAiBtC,EAAS0B,eAC1Ba,aAAcvC,EAASM,SACvBkC,WAAYumC,EAAY8O,WACxBp1C,SAAUhC,IAGLR,EAAQp5C,IAAMw7C,GAAa,CAChCC,gBAAiBtC,EAAS0B,eAC1Ba,aAAcvC,EAASM,SACvBkC,WAAYumC,EAAY8O,WAAa,EACrCp1C,SAAUhC,IAIdtrD,KAAKk7G,gBAAgBp+B,GAAiB,CACpC/pD,KAAMA,EACNqpF,SAAUA,MAOpB/7G,EAAOiK,QAAU,WACftK,KAAK8D,QAAQ,WACb9D,KAAKvO,OAGA0pH,EA5YyB,CA6YhCn1F,GAAQqjC,aAYNizD,GAAwC,SAAU9X,GAGpD,SAAS8X,IACP,IAAIn3G,EAKJ,OAHAA,EAAQq/F,EAAqB7wG,KAAKqM,OAASA,MACrCu8G,wBAA0B,GAChCp3G,EAAMq3G,qBAAuB,GACtBr3G,EART,IAAem3G,EAA0B9X,GAWzC,IAAInkG,EAASi8G,EAAyB3tH,UAiDtC,OA/CA0R,EAAO+oG,2BAA6B,SAAoCp6G,GACtEgR,KAAKu8G,wBAAwBvtH,GAAQ,KACrCgR,KAAK8D,QAAQ,0BAGfzD,EAAOujG,sBAAwB,SAA+BxzF,GAC5D,IAAIphB,EAAOohB,EAAKphB,KACZ+Y,EAAOqI,EAAKrI,KACZC,EAAKoI,EAAKpI,GAWd,MAToB,kBAATD,GAAmC,kBAAPC,IACrChI,KAAKu8G,wBAAwBvtH,GAAQ,CACnCA,KAAMA,EACN+Y,KAAMA,EACNC,GAAIA,GAENhI,KAAK8D,QAAQ,0BAGR9D,KAAKu8G,wBAAwBvtH,IAGtCqR,EAAOqjG,mBAAqB,SAA4BpiD,GACtD,IAAItyD,EAAOsyD,EAAMtyD,KACb+Y,EAAOu5C,EAAMv5C,KACbC,EAAKs5C,EAAMt5C,GAYf,MAVoB,kBAATD,GAAmC,kBAAPC,IACrChI,KAAKw8G,qBAAqBxtH,GAAQ,CAChCA,KAAMA,EACN+Y,KAAMA,EACNC,GAAIA,UAEChI,KAAKu8G,wBAAwBvtH,GACpCgR,KAAK8D,QAAQ,mBAGR9D,KAAKw8G,qBAAqBxtH,IAGnCqR,EAAOiK,QAAU,WACftK,KAAK8D,QAAQ,WACb9D,KAAKu8G,wBAA0B,GAC/Bv8G,KAAKw8G,qBAAuB,GAC5Bx8G,KAAKvO,OAGA6qH,EA7DmC,CA8D1Ct2F,GAAQqjC,aAINozD,GAAapgH,GAAUimE,IAAgB,WACzC,SAASo6C,EAAqBztH,EAAI0tH,EAASvuH,GACzC,OAMGa,EANIb,EAAS,CACd8tB,KAAMygG,EACNtuH,QAAS,GACTuuH,QAAS,SAAiB1gG,EAAM2gG,GAC9B,OAKN,WACE,MAAM,IAAI9qH,MAAM,2EANL+qH,OAA+B5hH,IAAT2hH,GAA+B,OAATA,IAAgBzuH,EAAO8tB,QAEhE9tB,EAAOC,SAAUD,EAAOC,QAOxC,IAAI0uH,EAAcL,GAAqB,SAAUtuH,GAC/C,SAAS4uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAUlDv9C,EAAOC,QANP,SAAsB4uH,EAAaC,EAAYC,GAG7C,OAFID,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GACzCF,GAIT7uH,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,KAEtEC,EAAiBX,GAAqB,SAAUtuH,GAClD,SAASkvH,EAAgBz3E,EAAGmhB,GAO1B,OANA54D,EAAOC,QAAUivH,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAEtF,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGTz3C,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,EACjEE,EAAgBz3E,EAAGmhB,GAG5B54D,EAAOC,QAAUivH,EACjBlvH,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,KAEtEG,EAAgBb,GAAqB,SAAUtuH,GAOjDA,EAAOC,QANP,SAAwBs6D,EAAUF,GAChCE,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,EAAW95D,WAC9Cg6D,EAASh6D,UAAUD,YAAci6D,EACjC00D,EAAe10D,EAAUF,IAI3Br6D,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,KAYtE56C,EAAsB,WACxB,SAASA,IACPxiE,KAAK+uC,UAAY,GAWnB,IAAI1uC,EAASmiE,EAAO7zE,UA+FpB,OA7FA0R,EAAO4C,GAAK,SAAYjU,EAAMmX,GACvBnG,KAAK+uC,UAAU//C,KAClBgR,KAAK+uC,UAAU//C,GAAQ,IAGzBgR,KAAK+uC,UAAU//C,GAAMgC,KAAKmV,IAY5B9F,EAAO5O,IAAM,SAAazC,EAAMmX,GAC9B,IAAKnG,KAAK+uC,UAAU//C,GAClB,OAAO,EAGT,IAAII,EAAQ4Q,KAAK+uC,UAAU//C,GAAMK,QAAQ8W,GAWzC,OAFAnG,KAAK+uC,UAAU//C,GAAQgR,KAAK+uC,UAAU//C,GAAMM,MAAM,GAClD0Q,KAAK+uC,UAAU//C,GAAMO,OAAOH,EAAO,GAC5BA,GAAS,GAUlBiR,EAAOyD,QAAU,SAAiB9U,GAChC,IAAIyvD,EAAYz+C,KAAK+uC,UAAU//C,GAE/B,GAAKyvD,EAQL,GAAyB,IAArBlxD,UAAUsC,OAGZ,IAFA,IAAIA,EAAS4uD,EAAU5uD,OAEdD,EAAI,EAAGA,EAAIC,IAAUD,EAC5B6uD,EAAU7uD,GAAG+D,KAAKqM,KAAMzS,UAAU,SAMpC,IAHA,IAAIgD,EAAOC,MAAM7B,UAAUW,MAAMqE,KAAKpG,UAAW,GAC7CkwH,EAAUh/D,EAAU5uD,OAEfC,EAAK,EAAGA,EAAK2tH,IAAW3tH,EAC/B2uD,EAAU3uD,GAAIyD,MAAMyM,KAAMzP,IAShC8P,EAAOiK,QAAU,WACftK,KAAK+uC,UAAY,IAYnB1uC,EAAOqiE,KAAO,SAAcC,GAC1B3iE,KAAKiD,GAAG,QAAQ,SAAU7C,GACxBuiE,EAAY3xE,KAAKoP,OAIdoiE,EA5GiB,GA4K1B,IAgDIk7C,EAAY,KASZC,EAAmB,WACrB,SAASA,EAAIxqH,GAqBX,IAAIvD,EACAu7B,EACAyyF,EARCF,IACHA,EA1EW,WACf,IAKI9tH,EACAqH,EACA4mH,EAGAC,EACAC,EAEA7rF,EACA8rF,EACAC,EAfAC,EAAS,CAAC,CAAC,GAAI,GAAI,GAAI,GAAI,IAAK,CAAC,GAAI,GAAI,GAAI,GAAI,KACjDC,EAAWD,EAAO,GAClBE,EAAWF,EAAO,GAClBG,EAAOF,EAAS,GAChBG,EAAUF,EAAS,GAInBjgC,EAAI,GACJogC,EAAK,GAQT,IAAK3uH,EAAI,EAAGA,EAAI,IAAKA,IACnB2uH,GAAIpgC,EAAEvuF,GAAKA,GAAK,EAAe,KAAVA,GAAK,IAAYA,GAAKA,EAG7C,IAAKqH,EAAI4mH,EAAO,GAAIQ,EAAKpnH,GAAIA,GAAK6mH,GAAM,EAAGD,EAAOU,EAAGV,IAAS,EAW5D,IARA3rF,GADAA,EAAI2rF,EAAOA,GAAQ,EAAIA,GAAQ,EAAIA,GAAQ,EAAIA,GAAQ,IAC9C,EAAQ,IAAJ3rF,EAAU,GACvBmsF,EAAKpnH,GAAKi7B,EACVosF,EAAQpsF,GAAKj7B,EAGbgnH,EAAY,SADP9/B,EAAE4/B,EAAK5/B,EAAE2/B,EAAK3/B,EAAElnF,KACQ,MAAL8mH,EAAoB,IAALD,EAAiB,SAAJ7mH,EACpD+mH,EAAc,IAAP7/B,EAAEjsD,GAAiB,SAAJA,EAEjBtiC,EAAI,EAAGA,EAAI,EAAGA,IACjBuuH,EAASvuH,GAAGqH,GAAK+mH,EAAOA,GAAQ,GAAKA,IAAS,EAC9CI,EAASxuH,GAAGsiC,GAAK+rF,EAAOA,GAAQ,GAAKA,IAAS,EAKlD,IAAKruH,EAAI,EAAGA,EAAI,EAAGA,IACjBuuH,EAASvuH,GAAKuuH,EAASvuH,GAAGN,MAAM,GAChC8uH,EAASxuH,GAAKwuH,EAASxuH,GAAGN,MAAM,GAGlC,OAAO4uH,EA6BSM,IAIdx+G,KAAKy+G,QAAU,CAAC,CAACf,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,SAAU,CAACouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,QAASouH,EAAU,GAAG,GAAGpuH,UAIpQ,IAAI+uH,EAAOr+G,KAAKy+G,QAAQ,GAAG,GACvBL,EAAWp+G,KAAKy+G,QAAQ,GACxBC,EAASvrH,EAAItD,OACb8uH,EAAO,EAEX,GAAe,IAAXD,GAA2B,IAAXA,GAA2B,IAAXA,EAClC,MAAM,IAAI3sH,MAAM,wBAGlB,IAAI6sH,EAASzrH,EAAI7D,MAAM,GACnBuvH,EAAS,GAGb,IAFA7+G,KAAKvP,KAAO,CAACmuH,EAAQC,GAEhBjvH,EAAI8uH,EAAQ9uH,EAAI,EAAI8uH,EAAS,GAAI9uH,IACpCguH,EAAMgB,EAAOhvH,EAAI,IAEbA,EAAI8uH,IAAW,GAAgB,IAAXA,GAAgB9uH,EAAI8uH,IAAW,KACrDd,EAAMS,EAAKT,IAAQ,KAAO,GAAKS,EAAKT,GAAO,GAAK,MAAQ,GAAKS,EAAKT,GAAO,EAAI,MAAQ,EAAIS,EAAW,IAANT,GAE1FhuH,EAAI8uH,IAAW,IACjBd,EAAMA,GAAO,EAAIA,IAAQ,GAAKe,GAAQ,GACtCA,EAAOA,GAAQ,EAAkB,KAAbA,GAAQ,KAIhCC,EAAOhvH,GAAKgvH,EAAOhvH,EAAI8uH,GAAUd,EAInC,IAAKzyF,EAAI,EAAGv7B,EAAGu7B,IAAKv7B,IAClBguH,EAAMgB,EAAW,EAAJzzF,EAAQv7B,EAAIA,EAAI,GAG3BivH,EAAO1zF,GADLv7B,GAAK,GAAKu7B,EAAI,EACJyyF,EAEAQ,EAAS,GAAGC,EAAKT,IAAQ,KAAOQ,EAAS,GAAGC,EAAKT,GAAO,GAAK,MAAQQ,EAAS,GAAGC,EAAKT,GAAO,EAAI,MAAQQ,EAAS,GAAGC,EAAW,IAANT,IAiE5I,OA9CaD,EAAIhvH,UAEVqsG,QAAU,SAAiB8jB,EAAYC,EAAYC,EAAYC,EAAYC,EAAKltD,GACrF,IAMImtD,EACAC,EACAC,EAGAzvH,EAXAuD,EAAM6M,KAAKvP,KAAK,GAEhBirB,EAAIojG,EAAa3rH,EAAI,GACrBquD,EAAIy9D,EAAa9rH,EAAI,GACrBsG,EAAIulH,EAAa7rH,EAAI,GACrBgrF,EAAI4gC,EAAa5rH,EAAI,GAKrBmsH,EAAensH,EAAItD,OAAS,EAAI,EAEhC0vH,EAAS,EACTrsB,EAAQlzF,KAAKy+G,QAAQ,GAErBe,EAAStsB,EAAM,GACfusB,EAASvsB,EAAM,GACfwsB,EAASxsB,EAAM,GACfysB,EAASzsB,EAAM,GACfmrB,EAAOnrB,EAAM,GAEjB,IAAKtjG,EAAI,EAAGA,EAAI0vH,EAAc1vH,IAC5BuvH,EAAKK,EAAO9jG,IAAM,IAAM+jG,EAAOj+D,GAAK,GAAK,KAAOk+D,EAAOjmH,GAAK,EAAI,KAAOkmH,EAAW,IAAJxhC,GAAWhrF,EAAIosH,GAC7FH,EAAKI,EAAOh+D,IAAM,IAAMi+D,EAAOhmH,GAAK,GAAK,KAAOimH,EAAOvhC,GAAK,EAAI,KAAOwhC,EAAW,IAAJjkG,GAAWvoB,EAAIosH,EAAS,GACtGF,EAAKG,EAAO/lH,IAAM,IAAMgmH,EAAOthC,GAAK,GAAK,KAAOuhC,EAAOhkG,GAAK,EAAI,KAAOikG,EAAW,IAAJn+D,GAAWruD,EAAIosH,EAAS,GACtGphC,EAAIqhC,EAAOrhC,IAAM,IAAMshC,EAAO/jG,GAAK,GAAK,KAAOgkG,EAAOl+D,GAAK,EAAI,KAAOm+D,EAAW,IAAJlmH,GAAWtG,EAAIosH,EAAS,GACrGA,GAAU,EACV7jG,EAAIyjG,EACJ39D,EAAI49D,EACJ3lH,EAAI4lH,EAIN,IAAKzvH,EAAI,EAAGA,EAAI,EAAGA,IACjBsvH,GAAK,GAAKtvH,GAAKoiE,GAAUqsD,EAAK3iG,IAAM,KAAO,GAAK2iG,EAAK78D,GAAK,GAAK,MAAQ,GAAK68D,EAAK5kH,GAAK,EAAI,MAAQ,EAAI4kH,EAAS,IAAJlgC,GAAWhrF,EAAIosH,KAC1HJ,EAAKzjG,EACLA,EAAI8lC,EACJA,EAAI/nD,EACJA,EAAI0kF,EACJA,EAAIghC,GAIDxB,EA7Hc,GAwInBiC,EAA2B,SAAUC,GAGvC,SAASD,IACP,IAAIz6G,EAMJ,OAJAA,EAAQ06G,EAAQlsH,KAAKqM,KAAMwiE,IAAWxiE,MAChC8/G,KAAO,GACb36G,EAAM8wD,MAAQ,EACd9wD,EAAM46G,SAAW,KACV56G,EATTo4G,EAAcqC,EAAaC,GAkB3B,IAAIx/G,EAASu/G,EAAYjxH,UA0BzB,OAxBA0R,EAAO2/G,YAAc,WACnBhgH,KAAK8/G,KAAKx5G,OAAVtG,GAEIA,KAAK8/G,KAAKjwH,OACZmQ,KAAK+/G,SAAW7gH,WAAWc,KAAKggH,YAAYv7G,KAAKzE,MAAOA,KAAKi2D,OAE7Dj2D,KAAK+/G,SAAW,MAUpB1/G,EAAOrP,KAAO,SAAcivH,GAC1BjgH,KAAK8/G,KAAK9uH,KAAKivH,GAEVjgH,KAAK+/G,WACR//G,KAAK+/G,SAAW7gH,WAAWc,KAAKggH,YAAYv7G,KAAKzE,MAAOA,KAAKi2D,SAI1D2pD,EA7CsB,CA8C7Bp9C,GAOE09C,EAAO,SAAcC,GACvB,OAAOA,GAAQ,IAAa,MAAPA,IAAkB,GAAY,SAAPA,IAAoB,EAAIA,IAAS,IAiF3EC,EAAyB,WAC3B,SAASA,EAAU9kB,EAAWnoG,EAAKktH,EAAYlhD,GAC7C,IAAIpG,EAAOqnD,EAAUE,KACjBC,EAAc,IAAIC,WAAWllB,EAAU7iC,QACvC4iC,EAAY,IAAIn0B,WAAWo0B,EAAUtkC,YACrCpnE,EAAI,EAKR,IAJAoQ,KAAKygH,aAAe,IAAIb,EAExB5/G,KAAKygH,aAAazvH,KAAKgP,KAAK0gH,cAAcH,EAAYnjD,SAASxtE,EAAGA,EAAImpE,GAAO5lE,EAAKktH,EAAYhlB,IAEzFzrG,EAAImpE,EAAMnpE,EAAI2wH,EAAY1wH,OAAQD,GAAKmpE,EAC1CsnD,EAAa,IAAIznB,YAAY,CAACsnB,EAAKK,EAAY3wH,EAAI,IAAKswH,EAAKK,EAAY3wH,EAAI,IAAKswH,EAAKK,EAAY3wH,EAAI,IAAKswH,EAAKK,EAAY3wH,EAAI,MACjIoQ,KAAKygH,aAAazvH,KAAKgP,KAAK0gH,cAAcH,EAAYnjD,SAASxtE,EAAGA,EAAImpE,GAAO5lE,EAAKktH,EAAYhlB,IAIhGr7F,KAAKygH,aAAazvH,MAAK,WA3Y3B,IAAe2vH,EA6YTxhD,EAAK,MA7YIwhD,EA6YQtlB,GA5YPj+B,SAAS,EAAGujD,EAAO3pD,WAAa2pD,EAAOA,EAAO3pD,WAAa,QAyazE,OAnBaopD,EAAUzxH,UAKhB+xH,cAAgB,SAAuBplB,EAAWnoG,EAAKktH,EAAYhlB,GACxE,OAAO,WACL,IAAI7iC,EAnGI,SAAiB8iC,EAAWnoG,EAAKktH,GAE7C,IAOIO,EACAC,EACAC,EACAC,EACAjC,EACAC,EACAC,EACAC,EAEA+B,EAhBAT,EAAc,IAAIC,WAAWllB,EAAU7iC,OAAQ6iC,EAAU5iC,WAAY4iC,EAAUtkC,YAAc,GAC7FiqD,EAAW,IAAItD,EAAIntH,MAAM7B,UAAUW,MAAMqE,KAAKR,IAE9CkoG,EAAY,IAAIn0B,WAAWo0B,EAAUtkC,YACrCkqD,EAAc,IAAIV,WAAWnlB,EAAU5iC,QAqB3C,IANAmoD,EAAQP,EAAW,GACnBQ,EAAQR,EAAW,GACnBS,EAAQT,EAAW,GACnBU,EAAQV,EAAW,GAGdW,EAAS,EAAGA,EAAST,EAAY1wH,OAAQmxH,GAAU,EAGtDlC,EAAaoB,EAAKK,EAAYS,IAC9BjC,EAAamB,EAAKK,EAAYS,EAAS,IACvChC,EAAakB,EAAKK,EAAYS,EAAS,IACvC/B,EAAaiB,EAAKK,EAAYS,EAAS,IAEvCC,EAASjmB,QAAQ8jB,EAAYC,EAAYC,EAAYC,EAAYiC,EAAaF,GAG9EE,EAAYF,GAAUd,EAAKgB,EAAYF,GAAUJ,GACjDM,EAAYF,EAAS,GAAKd,EAAKgB,EAAYF,EAAS,GAAKH,GACzDK,EAAYF,EAAS,GAAKd,EAAKgB,EAAYF,EAAS,GAAKF,GACzDI,EAAYF,EAAS,GAAKd,EAAKgB,EAAYF,EAAS,GAAKD,GAEzDH,EAAQ9B,EACR+B,EAAQ9B,EACR+B,EAAQ9B,EACR+B,EAAQ9B,EAGV,OAAO5jB,EAkDSL,CAAQM,EAAWnoG,EAAKktH,GACpChlB,EAAU/6F,IAAIk4D,EAAO8iC,EAAU5iC,cAInCqkD,EAAYqD,EAAW,KAAM,CAAC,CAC5BjtH,IAAK,OACLqN,IAAK,WAEH,OAAO,SAGJ4/G,EA/CoB,GA2F7BjyH,KAAK2nG,UAAY,SAAU/5F,GACzB,IAAIqE,EAAOrE,EAAMqE,KACbk7F,EAAY,IAAIp0B,WAAW9mE,EAAKk7F,UAAU9iC,MAAOp4D,EAAKk7F,UAAU5iC,WAAYt4D,EAAKk7F,UAAUtkC,YAC3F7jE,EAAM,IAAIylG,YAAYx4F,EAAKjN,IAAIqlE,MAAOp4D,EAAKjN,IAAIulE,WAAYt4D,EAAKjN,IAAI6jE,WAAa,GACjFukC,EAAK,IAAI3C,YAAYx4F,EAAKm7F,GAAG/iC,MAAOp4D,EAAKm7F,GAAG7iC,WAAYt4D,EAAKm7F,GAAGvkC,WAAa,GAGjF,IAAIopD,EAAU9kB,EAAWnoG,EAAKooG,GAAI,SAAU19E,EAAK26C,GAjCnB,IAAmCvmD,EAC7DomD,EAiCFlqE,KAAKkmG,aAlC0DpiF,EAkCpB,CACzCze,OAAQ4M,EAAK5M,OACb6nG,UAAW7iC,GAnCXH,EAAe,GACnBxlE,OAAOC,KAAKmf,GAAS/e,SAAQ,SAAUC,GACrC,IAAIM,EAAQwe,EAAQ9e,GAEhBmlE,YAAYC,OAAO9kE,GACrB4kE,EAAallE,GAAO,CAClBqlE,MAAO/kE,EAAMglE,OACbC,WAAYjlE,EAAMilE,WAClB1B,WAAYvjE,EAAMujE,YAGpBqB,EAAallE,GAAOM,KAGjB4kE,GAsBD,CAACG,EAAMC,iBAKb2nD,GAAY1+C,GAAQ+6C,IASpB0E,GAAkB,SAAyBzpH,GAC7C,IAAIyhB,EAAOzhB,EAAoB,QAAI,OAAS,cAM5C,OAJIA,EAAW0pH,iBAAmB1pH,EAAW0pH,gBAAgB/xH,QAAQ,yCAA2C,IAC9G8pB,EAAO,aAGFA,GAaLkoG,GAAc,SAAqBC,EAAejxD,GACpDixD,EAAcvrD,QACdurD,EAAcpsG,QAEVm7C,GAAaA,EAAUkxD,uBACzBlxD,EAAUkxD,qBAAqBrsG,QAC/Bm7C,EAAUkxD,qBAAuB,OAcjCC,GAAe,SAAsBC,EAAgBpxD,GAGvDA,EAAUkxD,qBAAuBE,EACjCA,EAAe5hG,QAyKb21F,GAAU,CAcZ9mD,MAAO,SAAe1/D,EAAMmvB,GAC1B,OAAO,WACL,IAAImjG,EAAgBnjG,EAASujG,eAAe1yH,GACxCqhE,EAAYlyC,EAASwjG,WAAW3yH,GAChC4yH,EAA2BzjG,EAASyjG,yBACxCP,GAAYC,EAAejxD,GAE3B,IAAIwxD,EAAcxxD,EAAUwxD,cACxBC,EAAczxD,EAAUyxD,cACxBr4G,GAAMq4G,EAAY9vH,QAAO,SAAUiuE,GACrC,OAAOA,EAAe,WACrB,IAAM6hD,EAAY,IAAIr4G,GACrBs4G,EAAe1xD,EAAU74C,OAAO/N,GAEpC,GAAIo4G,IAAgBE,EAApB,CAWA,IAAK,IAAI3hC,KAFTp6D,GAAQ31B,IAAIsB,KAAK,oFAEG0+D,EAAU74C,OAC5B64C,EAAU74C,OAAO4oE,GAAS9nE,QAAU+3C,EAAU74C,OAAO4oE,KAAa2hC,EAGpE1xD,EAAU2xD,sBAZRJ,EAAyB,CACvB3vG,QAAS,2DA2BjBgwG,UAAW,SAAmBjzH,EAAMmvB,GAClC,OAAO,WACL,IAAImjG,EAAgBnjG,EAASujG,eAAe1yH,GACxCqhE,EAAYlyC,EAASwjG,WAAW3yH,GACpCg3B,GAAQ31B,IAAIsB,KAAK,4EACjB0vH,GAAYC,EAAejxD,GAC3B,IAAI39C,EAAQ29C,EAAUwxD,cAElBnvG,IACFA,EAAM2L,KAAO,YAGfgyC,EAAU2xD,oBAIZE,GAAiB,CAYnBxzD,MAAO,SAAe1/D,EAAMyyH,EAAgBtjG,GAC1C,GAAKsjG,EAAL,CAKA,IAAIzuG,EAAOmL,EAASnL,KAChBmvG,EAAiBhkG,EAASgkG,eAC1Bb,EAAgBnjG,EAASujG,eAAe1yH,GAC5CyyH,EAAex+G,GAAG,kBAAkB,WAClC,IAAI46C,EAAQ4jE,EAAe5jE,QAC3ByjE,EAAcz2D,SAAShN,EAAOskE,KAGzBnvG,EAAKgC,UAAY6oC,EAAMoO,SAA8B,SAAnBj5C,EAAKy8B,YAC1C6xE,EAAczhG,UAGlB4hG,EAAex+G,GAAG,kBAAkB,WAClCq+G,EAAcz2D,SAAS42D,EAAe5jE,QAASskE,GAE1CnvG,EAAKgC,UACRssG,EAAczhG,UAGlB4hG,EAAex+G,GAAG,QAASuyG,GAAQxmH,GAAMA,EAAMmvB,MAcjD8jG,UAAW,SAAmBjzH,EAAMyyH,EAAgBtjG,GAClD,IAAInL,EAAOmL,EAASnL,KAChBmvG,EAAiBhkG,EAASgkG,eAC1Bb,EAAgBnjG,EAASujG,eAAe1yH,GACxCqhE,EAAYlyC,EAASwjG,WAAW3yH,GACpCyyH,EAAex+G,GAAG,kBAAkB,WAClC,IAAI46C,EAAQ4jE,EAAe5jE,QAC3ByjE,EAAcz2D,SAAShN,EAAOskE,GAC9Bb,EAAc5uG,MAAM29C,EAAUwxD,iBAGzB7uG,EAAKgC,UAAY6oC,EAAMoO,SAA8B,SAAnBj5C,EAAKy8B,YAC1C6xE,EAAczhG,UAGlB4hG,EAAex+G,GAAG,kBAAkB,WAClCq+G,EAAcz2D,SAAS42D,EAAe5jE,QAASskE,GAE1CnvG,EAAKgC,UACRssG,EAAczhG,UAGlB4hG,EAAex+G,GAAG,QAASuyG,GAAQxmH,GAAMA,EAAMmvB,MAG/CikG,GAAa,CAUf,MAAS,SAAepzH,EAAMmvB,GAC5B,IAAIw0C,EAAMx0C,EAASw0C,IACfqxC,EAAa7lF,EAAS6lF,WACtBsd,EAAgBnjG,EAASujG,eAAe1yH,GACxCmzH,EAAiBhkG,EAASgkG,eAC1BxzD,EAAcxwC,EAAS6tC,OAAO2C,YAC9B0zD,EAAwBlkG,EAASwjG,WAAW3yH,GAC5CszH,EAASD,EAAsBC,OAC/B9qG,EAAS6qG,EAAsB7qG,OAC/Bo7C,EAAUyvD,EAAsBzvD,QAChC0J,EAAuBn+C,EAASm+C,qBAChCzL,EAAkBhC,GAAYyN,EAAqBtQ,QAgBvD,IAAK,IAAI8E,KAdJnC,EAAY3/D,IAAmD,IAA1C6D,OAAOC,KAAK67D,EAAY3/D,IAAOa,SACvD8+D,EAAY3/D,GAAQ,CAClBurB,KAAM,CACJ,QAAW,CACT,SAAW,KAKbs2C,IACFlC,EAAY3/D,GAAMurB,KAAc,QAAE4zC,UAAYmO,EAAqBtQ,OAAOmC,YAI1DQ,EAAY3/D,GAK9B,IAAK,IAAIuzH,KAJJD,EAAOxxD,KACVwxD,EAAOxxD,GAAW,IAGKnC,EAAY3/D,GAAM8hE,GAAU,CACnD,IAAIp5D,EAAai3D,EAAY3/D,GAAM8hE,GAASyxD,GACxCd,OAAiB,EA2BrB,GAzBI5wD,GACF+B,EAAQ,gBAAkB9B,EAAU,YAAcyxD,EAAe,0BACjE7qH,EAAW8qH,kBAAmB,EAC9Bf,EAAiB,MAGjBA,EADwB,aAAfzd,GAA6BtsG,EAAWy2D,UAChC,IAAIuE,GAAeh7D,EAAWy2D,UAAU,GAAIwE,EAAKwvD,GACzDzqH,EAAW82D,YACH,IAAIkE,GAAeh7D,EAAW82D,YAAamE,EAAKwvD,GAExDzqH,EAAWy2D,WAA4B,SAAf61C,EAChB,IAAI5nC,GAAmB1kE,EAAWy2D,UAAU,GAAIwE,EAAKwvD,EAAgB7lD,GAIrE,KAGnB5kE,EAAasuB,GAAQ8iC,aAAa,CAChCr/C,GAAI84G,EACJd,eAAgBA,GACf/pH,GACHwqH,GAAelzH,GAAMA,EAAM0I,EAAW+pH,eAAgBtjG,GACtDmkG,EAAOxxD,GAAS9/D,KAAK0G,GAEe,qBAAzB8f,EAAO+qG,GAA+B,CAC/C,IAAI7vG,EAAQ,IAAIsT,GAAQxG,WAAW,CACjC/V,GAAI84G,EACJppG,KAAMgoG,GAAgBzpH,GACtB4gB,SAAS,EACTzN,SAAUnT,EAAWmT,SACrB,QAAWnT,EAAoB,QAC/B+c,MAAO8tG,IAET/qG,EAAO+qG,GAAgB7vG,GAM7B4uG,EAAcr+G,GAAG,QAASuyG,GAAQxmH,GAAMA,EAAMmvB,KAYhD,UAAa,SAAmBnvB,EAAMmvB,GACpC,IAAInL,EAAOmL,EAASnL,KAChB2/C,EAAMx0C,EAASw0C,IACfqxC,EAAa7lF,EAAS6lF,WACtBsd,EAAgBnjG,EAASujG,eAAe1yH,GACxCmzH,EAAiBhkG,EAASgkG,eAC1BxzD,EAAcxwC,EAAS6tC,OAAO2C,YAC9B8zD,EAAyBtkG,EAASwjG,WAAW3yH,GAC7CszH,EAASG,EAAuBH,OAChC9qG,EAASirG,EAAuBjrG,OAChC8kD,EAAuBn+C,EAASm+C,qBAEpC,IAAK,IAAIxL,KAAWnC,EAAY3/D,GAK9B,IAAK,IAAIuzH,KAJJD,EAAOxxD,KACVwxD,EAAOxxD,GAAW,IAGKnC,EAAY3/D,GAAM8hE,GACzC,IAAInC,EAAY3/D,GAAM8hE,GAASyxD,GAAcG,OAA7C,CAYA,IAAIhrH,EAAai3D,EAAY3/D,GAAM8hE,GAASyxD,GACxCd,OAAiB,EAErB,GAAmB,QAAfzd,EACFyd,EAAiB,IAAI/uD,GAAeh7D,EAAW82D,YAAamE,EAAKwvD,QAC5D,GAAmB,SAAfne,EAAuB,CAKhC,IAJgBtsG,EAAWy2D,UAAUn8D,QAAO,SAAUg1D,GACpD,OAAOA,EAAE8G,eAAiBx7B,OAGbziC,OACb,OAGF4xH,EAAiB,IAAIrlD,GAAmB1kE,EAAWy2D,UAAU,GAAIwE,EAAKwvD,EAAgB7lD,OAC9D,aAAf0nC,IACTyd,EAAiB,IAAI/uD,GAErBh7D,EAAWy2D,UAAYz2D,EAAWy2D,UAAU,GAAKz2D,EAAW82D,YAAamE,EAAKwvD,IAUhF,GAPAzqH,EAAasuB,GAAQ8iC,aAAa,CAChCr/C,GAAI84G,EACJd,eAAgBA,GACf/pH,GACHwqH,GAAelzH,GAAMA,EAAM0I,EAAW+pH,eAAgBtjG,GACtDmkG,EAAOxxD,GAAS9/D,KAAK0G,GAEe,qBAAzB8f,EAAO+qG,GAA+B,CAC/C,IAAI7vG,EAAQM,EAAKQ,mBAAmB,CAClC/J,GAAI84G,EACJppG,KAAM,YACN,QAAWzhB,EAAoB,SAAKA,EAAWirH,WAC/C93G,SAAUnT,EAAWmT,SACrB4J,MAAO8tG,IACN,GAAO7vG,MACV8E,EAAO+qG,GAAgB7vG,GAM7B4uG,EAAcr+G,GAAG,QAASuyG,GAAQxmH,GAAMA,EAAMmvB,KAYhD,kBAAmB,SAAwBnvB,EAAMmvB,GAC/C,IAAInL,EAAOmL,EAASnL,KAChB27C,EAAcxwC,EAAS6tC,OAAO2C,YAC9Bi0D,EAAyBzkG,EAASwjG,WAAW3yH,GAC7CszH,EAASM,EAAuBN,OAChC9qG,EAASorG,EAAuBprG,OAEpC,IAAK,IAAIs5C,KAAWnC,EAAY3/D,GAK9B,IAAK,IAAIuzH,KAJJD,EAAOxxD,KACVwxD,EAAOxxD,GAAW,IAGKnC,EAAY3/D,GAAM8hE,GAAU,CACnD,IAAIp5D,EAAai3D,EAAY3/D,GAAM8hE,GAASyxD,GAE5C,GAAK,kBAAkBpxH,KAAKuG,EAAWw3G,YAAvC,CAIA,IAAI7/B,EAAkBr8D,EAAKzJ,SAASopD,KAAO3/C,EAAKzJ,SAASopD,IAAI0c,iBAAmB,GAC5EwzC,EAAW,CACbpuG,MAAO8tG,EACP13G,SAAUnT,EAAWmT,SACrBqkG,WAAYx3G,EAAWw3G,WACvB,QAAWx3G,EAAoB,SAAKA,EAAWirH,YAiBjD,GAdItzC,EAAgBwzC,EAAS3T,cAC3B2T,EAAW78F,GAAQ8iC,aAAa+5D,EAAUxzC,EAAgBwzC,EAAS3T,mBAGzCh0G,IAAxB2nH,EAAkB,gBACbA,EAAkB,QAK3BP,EAAOxxD,GAAS9/D,KAAKg1B,GAAQ8iC,aAAa,CACxCr/C,GAAI84G,GACH7qH,IAEiC,qBAAzB8f,EAAO+qG,GAA+B,CAC/C,IAAI7vG,EAAQM,EAAKQ,mBAAmB,CAClC/J,GAAIo5G,EAAS3T,WACb/1F,KAAM,WACN,QAAW0pG,EAAkB,QAC7Bh4G,SAAUg4G,EAASh4G,SACnB4J,MAAOouG,EAASpuG,QACf,GAAO/B,MACV8E,EAAO+qG,GAAgB7vG,OAO7BowG,GAAa,SAASA,EAAWzqG,EAAMwlC,GACzC,IAAK,IAAIjuD,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAAK,CACpC,GAAI2+D,GAAc1Q,EAAOxlC,EAAKzoB,IAC5B,OAAO,EAGT,GAAIyoB,EAAKzoB,GAAGu+D,WAAa20D,EAAWzqG,EAAKzoB,GAAGu+D,UAAWtQ,GACrD,OAAO,EAIX,OAAO,GAyELgkE,GAAc,CAahBnzD,MAAO,SAAe1/D,EAAMmvB,GAC1B,OAAO,WACL,IAAI3G,EAAS2G,EAASwjG,WAAW3yH,GAAMwoB,OAEvC,IAAK,IAAI/N,KAAM+N,EACb,GAAIA,EAAO/N,GAAI6O,QACb,OAAOd,EAAO/N,GAIlB,OAAO,OAgBXw4G,UAAW,SAAmBjzH,EAAMmvB,GAClC,OAAO,WACL,IAAI3G,EAAS2G,EAASwjG,WAAW3yH,GAAMwoB,OAEvC,IAAK,IAAI/N,KAAM+N,EACb,GAAwB,YAApBA,EAAO/N,GAAI4U,MAA0C,WAApB7G,EAAO/N,GAAI4U,KAC9C,OAAO7G,EAAO/N,GAIlB,OAAO,QAyCTs5G,GAAmB,SAA0B5kG,GAC/C,CAAC,QAAS,YAAa,mBAAmBjrB,SAAQ,SAAUlE,GAC1DozH,GAAWpzH,GAAMA,EAAMmvB,MAEzB,IAAIwjG,EAAaxjG,EAASwjG,WACtBrlD,EAAuBn+C,EAASm+C,qBAChCtpD,EAAOmL,EAASnL,KAChB2/C,EAAMx0C,EAASw0C,IACfqwD,EAAyB7kG,EAASujG,eAClCuB,EAAqBD,EAA8B,MACnDE,EAAoBF,EAAuBzoG,KAE/C,CAAC,QAAS,aAAarnB,SAAQ,SAAUlE,GACvC2yH,EAAW3yH,GAAM8yH,YA9JH,SAAqB9yH,EAAMmvB,GAC3C,OAAO,SAAUzL,GACf,IAAI4pD,EAAuBn+C,EAASm+C,qBAChCgmD,EAASnkG,EAASwjG,WAAW3yH,GAAMszH,OACnCzkE,EAAQye,EAAqBze,QAEjC,IAAKA,EACH,OAAO,KAGT,IAAIslE,EAAW,KAEXtlE,EAAMlmD,WAAW3I,KACnBm0H,EAAWb,EAAOzkE,EAAMlmD,WAAW3I,KAGrC,IAAIo0H,EAAYvwH,OAAOC,KAAKwvH,GAE5B,IAAKa,EAIH,GAAa,UAATn0H,GAAoBo0H,EAAUvzH,OAAS,GAAKg/D,GAAY1wC,EAAS6tC,QACnE,IAAK,IAAIp8D,EAAI,EAAGA,EAAIwzH,EAAUvzH,OAAQD,IAAK,CACzC,IAAIyzH,EAAoBf,EAAOc,EAAUxzH,IAEzC,GAAIkzH,GAAWO,EAAmBxlE,GAAQ,CACxCslE,EAAWE,EACX,YAIKf,EAAO/nG,KAChB4oG,EAAWb,EAAO/nG,KACY,IAArB6oG,EAAUvzH,SACnBszH,EAAWb,EAAOc,EAAU,KAIhC,MAAqB,qBAAV1wG,EACFywG,EAGK,OAAVzwG,GAAmBywG,GAMhBA,EAASnxH,QAAO,SAAUypB,GAC/B,OAAOA,EAAMhS,KAAOiJ,EAAMjJ,MACzB,IALM,MAgHsBq4G,CAAY9yH,EAAMmvB,GACjDwjG,EAAW3yH,GAAM6yH,YAAcA,GAAY7yH,GAAMA,EAAMmvB,GACvDwjG,EAAW3yH,GAAMs0H,eAxtBA,SAAwBt0H,EAAMmvB,GACjD,OAAO,WACL,IAAIolG,EAAwBplG,EAASujG,eACjCJ,EAAgBiC,EAAsBv0H,GACtCk0H,EAAoBK,EAAsBhpG,KAC1C81C,EAAYlyC,EAASwjG,WAAW3yH,GAChC6yH,EAAcxxD,EAAUwxD,cACxBC,EAAczxD,EAAUmzD,iBACxBC,EAAuBpzD,EAAUkxD,qBACjCmC,EAAYrzD,EAAUszD,WAEtB7B,GAAe4B,GAAa5B,EAAYr4G,KAAOi6G,EAAUj6G,KAI7D4mD,EAAUszD,WAAa7B,EACvBzxD,EAAUuzD,WAAa/B,EACvBR,GAAYC,EAAejxD,GAEtByxD,IAAeA,EAAYU,mBAK3BV,EAAYL,gBAajBH,EAAc7W,eACd+W,GAAaM,EAAYL,eAAgBpxD,IAbnCozD,GAKFP,EAAkB/Y,qBA0rBYmZ,CAAet0H,EAAMmvB,GACvDwjG,EAAW3yH,GAAM60H,gBA/qBC,SAAyB70H,EAAMmvB,GACnD,OAAO,WACL,IAAImjG,EAAgBnjG,EAASujG,eAAe1yH,GAC5BmvB,EAASwjG,WAAW3yH,GAC1B20H,WAAa,KACvBrC,EAAcvrD,QACdurD,EAAcpsG,SAyqBqB2uG,CAAgB70H,EAAMmvB,GACzDwjG,EAAW3yH,GAAMgzH,eAvpBA,SAAwBhzH,EAAMmvB,GACjD,OAAO,WACL,IAAIm+C,EAAuBn+C,EAASm+C,qBAChCwnD,EAAyB3lG,EAASujG,eAClCJ,EAAgBwC,EAAuB90H,GACvCk0H,EAAoBY,EAAuBvpG,KAC3C81C,EAAYlyC,EAASwjG,WAAW3yH,GAChC6yH,EAAcxxD,EAAUwxD,cACxBC,EAAczxD,EAAUmzD,iBACxBC,EAAuBpzD,EAAUkxD,qBACjCwC,EAAY1zD,EAAUuzD,WAE1B,KAAIG,IAAalC,GAAekC,EAAUt6G,KAAOo4G,EAAYp4G,MAI7D4mD,EAAUszD,WAAa7B,EACvBzxD,EAAUuzD,WAAa/B,EACvBR,GAAYC,EAAejxD,GAEtByxD,GAAL,CAKA,GAAIA,EAAYU,iBAAkB,CAEhC,IAAKX,IAAgBkC,GAAalC,EAAYp4G,KAAOs6G,EAAUt6G,GAC7D,OAGF,IAAIu6G,EAAM7lG,EAASw0C,IAAIwuC,0BACnBiJ,EAAc4Z,EAAIC,iBAEtB,GAAID,EAAInmE,UAAYusD,EAClB,OAOF,OAJA/5C,EAAUuC,QAAQ,6CAA+CmxD,EAAUt6G,GAAK,OAASo4G,EAAYp4G,IACrG6yD,EAAqBpnD,QACrBguG,EAAkB/Y,uBAClB6Z,EAAIE,mBAAmB9Z,GAIzB,GAAa,UAATp7G,EAAkB,CACpB,IAAK8yH,EAAYL,eAQf,OAJAyB,EAAkBla,UAAS,QAG3Bka,EAAkB/Y,kBAOpBmX,EAActY,UAAS,GACvBka,EAAkBla,UAAS,GAGzBya,IAAyB3B,EAAYL,gBAQrCH,EAAc5uG,OAEhB4uG,EAAc5uG,MAAMmvG,GAItBP,EAAcnX,kBACdqX,GAAaM,EAAYL,eAAgBpxD,IAXvCmxD,GAAaM,EAAYL,eAAgBpxD,KAmlBT2xD,CAAehzH,EAAMmvB,GACvDwjG,EAAW3yH,GAAMw0H,eAtDA,SAAwBx0H,EAAMohB,GACjD,IAAIuxG,EAAavxG,EAAKuxG,WACtB,OAAO,WACL,IAAIwC,EAAexC,EAAW3yH,GAAM6yH,cAEpC,OAAKsC,EAIExC,EAAW3yH,GAAM8yH,YAAYqC,GAH3B,MAgDyBX,CAAex0H,EAAMmvB,MAIzD,IAAIigF,EAAaujB,EAAWjzD,MAAMozD,cAElC,GAAI1jB,EAAY,CACd,IAAIttC,GAAWstC,EAAWpsG,QAAO,SAAUiuE,GACzC,OAAOA,EAAe,WACrB,IAAMm+B,EAAW,IAAI30F,GACxBk4G,EAAWjzD,MAAMl3C,OAAOs5C,GAASx4C,SAAU,EAC3CqpG,EAAWjzD,MAAM40D,iBACjB3B,EAAWjzD,MAAMszD,iBACML,EAAWjzD,MAAM80D,iBAIlB/B,gBAKpByB,EAAkBla,UAAS,GAC3Bia,EAAmBja,UAAS,IAJ5Bka,EAAkBla,UAAS,GAQ/B1sC,EAAqBr5D,GAAG,eAAe,WACrC,CAAC,QAAS,aAAa/P,SAAQ,SAAUlE,GACvC,OAAO2yH,EAAW3yH,GAAMs0H,uBAG5BhnD,EAAqBr5D,GAAG,iBAAiB,WACvC,CAAC,QAAS,aAAa/P,SAAQ,SAAUlE,GACvC,OAAO2yH,EAAW3yH,GAAM60H,wBAI5B,IAAIO,EAAsB,WACxBzC,EAAWjzD,MAAMszD,iBACjBhvG,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,qBAER8iB,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,sBAaV,IAAK,IAAIuZ,KATTuJ,EAAK6vB,cAAcvjC,iBAAiB,SAAU8kH,GAC9CpxG,EAAKiR,mBAAmB3kB,iBAAiB,SAAUqiH,EAAWM,UAAUD,gBACxErvD,EAAI1vD,GAAG,WAAW,WAChB+P,EAAK6vB,cAAczjC,oBAAoB,SAAUglH,GACjDpxG,EAAKiR,mBAAmB7kB,oBAAoB,SAAUuiH,EAAWM,UAAUD,mBAG7EhvG,EAAKgQ,YAAY,SAEF2+F,EAAWjzD,MAAMl3C,OAC9BxE,EAAK6vB,cAAcnrB,SAASiqG,EAAWjzD,MAAMl3C,OAAO/N,KAoCpD46G,GAAc,CAAC,gBAAiB,uBAAwB,wBAAyB,uBAAwB,wBAAyB,wBAAyB,gBAE3JC,GAAgB,SAAuBC,GACzC,OAAOvkH,KAAKwkH,oBAAoBD,GAAQvkH,KAAKykH,mBAAmBF,IAoG9DG,GAAwC,SAAUlgB,GAGpD,SAASkgB,EAAyBnmH,GAChC,IAAI4G,EAEJA,EAAQq/F,EAAqB7wG,KAAKqM,OAASA,KAC3C,IAAIqT,EAAM9U,EAAQ8U,IACd2/C,EAA0Bz0D,EAAQy0D,wBAClCr1C,EAAkBpf,EAAQof,gBAC1B3K,EAAOzU,EAAQyU,KACfi9C,EAAY1xD,EAAQ0xD,UACpB00D,EAAYpmH,EAAQomH,UACpBC,EAAarmH,EAAQqmH,WACrB1mD,EAAoB3/D,EAAQ2/D,kBAC5B2mD,EAA2BtmH,EAAQsmH,yBACnC7gB,EAAazlG,EAAQylG,WACrBqD,EAAsB9oG,EAAQ8oG,oBAC9Byd,EAA6BvmH,EAAQumH,2BACrCrkB,EAAqCliG,EAAQkiG,mCAC7CpxB,EAAkB9wE,EAAQ8wE,gBAE9B,IAAKh8D,EACH,MAAM,IAAIthB,MAAM,gEAGlB,IAvJE4vH,EAuJEoD,EAAqBxmH,EAAQwmH,mBAEN,OAAvBA,GAA6D,qBAAvBA,IACxCA,EAAqBzyF,KAGvBmiF,GAAQkQ,EACRx/G,EAAM2/G,2BAA6BjvH,QAAQivH,GAC3C3/G,EAAMs7F,mCAAqC5qG,QAAQ4qG,GACnDt7F,EAAMwY,gBAAkBA,EACxBxY,EAAMyY,MAAQ5K,EACd7N,EAAM8tD,KAAOjgD,EAAK2/C,IAClBxtD,EAAMsgG,YAAczB,EACpB7+F,EAAM6/G,YAAcJ,EACpBz/G,EAAM+4D,kBAAoBA,EAC1B/4D,EAAM4/G,mBAAqBA,EAC3B5/G,EAAM0/G,yBAA2BA,EAE7B1/G,EAAM6/G,cACR7/G,EAAM8/G,cAAgB9/G,EAAMyY,MAAM0G,aAAa,WAAY,WAC3Dnf,EAAM8/G,cAAcxV,gCAAkC,IAGxDtqG,EAAM+/G,gBAAkB,CACtBvnG,gBAAiBA,EACjBq1C,wBAAyBA,EACzB+xD,mBAAoBA,EACpBx/G,QAAS,MAGXJ,EAAMlC,GAAG,QAASkC,EAAMggH,cAExBhgH,EAAMigH,aAvLJzD,EAAa,GACjB,CAAC,QAAS,YAAa,mBAAmBzuH,SAAQ,SAAUlE,GAC1D2yH,EAAW3yH,GAAQ,CACjBszH,OAAQ,GACR9qG,OAAQ,GACR+pG,qBAAsB,KACtBO,YAAa/vE,GACb8vE,YAAa9vE,GACbyxE,eAAgBzxE,GAChBuxE,eAAgBvxE,GAChBiwE,eAAgBjwE,GAChB6xE,WAAY,KACZhxD,QAAS/I,GAAO,eAAiB76D,EAAO,SAGrC2yH,GAyKLx8G,EAAMs/F,YAAc,IAAI,IAAS4S,YACjClyG,EAAMkgH,sBAAwBlgH,EAAMkgH,sBAAsB5gH,KAAK,IAAuBU,IACtFA,EAAMmgH,kBAAoBngH,EAAMmgH,kBAAkB7gH,KAAK,IAAuBU,IAC9EA,EAAMogH,mBAAqBpgH,EAAMogH,mBAAmB9gH,KAAK,IAAuBU,IAEhFA,EAAMs/F,YAAYnlG,iBAAiB,iBAAkB6F,EAAMkgH,uBAG3DlgH,EAAMs/F,YAAYnlG,iBAAiB,aAAc6F,EAAMmgH,mBAEvDngH,EAAMs/F,YAAYnlG,iBAAiB,cAAe6F,EAAMogH,oBAIxDpgH,EAAM4/F,UAAY/+E,GAAQrU,mBAC1BxM,EAAM0/F,YAAa,EACnB1/F,EAAMsiG,gBAAkB,IAAI0T,GAAe58G,GAC3C4G,EAAMkgG,sBAAwBryF,EAAKQ,mBAAmB,CACpD2F,KAAM,WACN1E,MAAO,qBACN,GAAO/B,MACVvN,EAAMoiG,WAAa,IAAI6Y,GACvBj7G,EAAMugG,eAAiB,IAAIsQ,GAAc7wG,EAAMs/F,aAC/Ct/F,EAAMygG,kBAAoB,GAC1BzgG,EAAM2gG,0BAA4B,IAAIwW,GACtC,IAAIkJ,EAAwB,CAC1B7yD,IAAKxtD,EAAM8tD,KACX8b,iBAAkBxwE,EAAQwwE,iBAC1BM,gBAAiBA,EACjBo1B,YAAat/F,EAAMs/F,YACnBzlF,YAAa7Z,EAAMyY,MAAMoB,YAAYva,KAAKU,EAAMyY,OAChD0K,SAAU,WACR,OAAOnjB,EAAMmjB,YAEfkxB,QAAS,WACP,OAAOr0C,EAAMyY,MAAM47B,WAErB1nC,SAAU,WACR,OAAO3M,EAAM2M,YAEfgzF,UAAW,WACT,OAAO3/F,EAAM0/F,YAEfW,iBAAkB,WAChB,OAAOrgG,EAAMqgG,oBAEfv1C,UAAWA,EACXy3C,eAAgBviG,EAAMsiG,gBACtBD,UAAWriG,EAAMoiG,WACjBvD,WAAY7+F,EAAMsgG,YAClBpE,iBAAkBl8F,EAAMygG,kBACxByB,oBAAqBA,EACrB1B,cAAexgG,EAAMugG,eACrBtC,yBAA0Bj+F,EAAM2gG,0BAChCx2C,iCAAkC/wD,EAAQ+wD,kCAM5CnqD,EAAMo3D,sBAA8C,SAAtBp3D,EAAMsgG,YAAyB,IAAIrpC,GAAmB/oD,EAAKlO,EAAM8tD,KAAM9tD,EAAM+/G,iBAAmB,IAAIxyD,GAAer/C,EAAKlO,EAAM8tD,KAAM9tD,EAAM+/G,iBAExK//G,EAAMsgH,sCAINtgH,EAAMs/G,mBAAqB,IAAIlgB,GAAcv+E,GAAQ8iC,aAAa08D,EAAuB,CACvFlgB,qBAAsBngG,EAAMkgG,sBAC5B9B,WAAY,SACVhlG,GAEJ4G,EAAMq/G,oBAAsB,IAAIjgB,GAAcv+E,GAAQ8iC,aAAa08D,EAAuB,CACxFjiB,WAAY,UACVhlG,GACJ4G,EAAMugH,uBAAyB,IAAInN,GAAiBvyF,GAAQ8iC,aAAa08D,EAAuB,CAC9FjiB,WAAY,MACZxhF,yBAA0B5c,EAAMyY,MAAMmE,2BACpCxjB,GAEJ4G,EAAMwgH,+BAEFxgH,EAAM2/G,6BACR3/G,EAAMo3D,sBAAsBp4D,IAAI,kBAAkB,WAChD,OAAOgB,EAAMygH,oBAGfzgH,EAAMyY,MAAM3a,GAAG,SAAS,WACtB,OAAOkC,EAAM0gH,mBAGf1gH,EAAMyY,MAAM3a,GAAG,QAAQ,WACrB,OAAOkC,EAAMygH,qBAYjBvB,GAAYnxH,SAAQ,SAAUqxH,GAC5Bp/G,EAAMo/G,EAAO,KAAOD,GAAc7/G,KAAK,IAAuBU,GAAQo/G,MAExEp/G,EAAMytD,QAAU/I,GAAO,OACvB1kD,EAAM2gH,oBAAqB,EAEG,SAA1B3gH,EAAMyY,MAAM6xB,WACdtqC,EAAM4gH,YAAc,WAClB5gH,EAAM4gH,YAAc,KAEpB5gH,EAAMo3D,sBAAsB18C,QAG9B1a,EAAMyY,MAAMzZ,IAAI,OAAQgB,EAAM4gH,cAE9B5gH,EAAMo3D,sBAAsB18C,OAG9B1a,EAAM6gH,oBAAsB,EAC5B7gH,EAAM8gH,2BAA6B,EACnC9gH,EAAM+gH,4BAA8B,EACpC,IAAInqH,EAAkC,SAA1BoJ,EAAMyY,MAAM6xB,UAAuB,OAAS,YAYxD,OAVAtqC,EAAMyY,MAAMzZ,IAAIpI,GAAO,WACrB,IAAIoqH,EAAwBt4H,KAAKC,MAEjCqX,EAAMyY,MAAMzZ,IAAI,cAAc,WAC5BgB,EAAM6gH,mBAAqBn4H,KAAKC,MAAQq4H,EACxChhH,EAAM8gH,0BAA4B9gH,EAAMs/G,mBAAmB3b,aAC3D3jG,EAAM+gH,2BAA6B/gH,EAAMq/G,oBAAoB1b,mBAI1D3jG,EAlMT,IAAeu/G,EAA0BlgB,GAqMzC,IAAInkG,EAASqkH,EAAyB/1H,UAmsDtC,OAjsDA0R,EAAO+lH,yBAA2B,WAChC,OAAOpmH,KAAKimH,2BAGd5lH,EAAOgmH,0BAA4B,WACjC,OAAOrmH,KAAKkmH,4BAGd7lH,EAAOimH,qBAAuB,WAC5B,IAAI/rG,EAAOva,KAAKomH,2BACZjmG,EAAQngB,KAAKqmH,4BAEjB,OAAc,IAAV9rG,IAA0B,IAAX4F,GACT,EAGH5F,EAAO4F,GAGhB9f,EAAOkmH,kBAAoB,WACzB,OAAOvmH,KAAKgmH,oBAUd3lH,EAAOmmH,UAAY,WACjB,IAAIC,EAAezmH,KAAKikH,iBAEpBwC,GAAgBzmH,KAAK0mH,qBAAqBD,IAC5CzmH,KAAK2mH,aAAaF,EAAc,QAIpCpmH,EAAOsmH,aAAe,SAAsB97D,EAAU+7D,EAAO3wD,GAC3D,IAAIrE,EAAW5xD,KAAK69C,QAChB2sD,EAAQ54C,IAAaA,EAASnoD,IAAMmoD,EAASp0C,KAC7CqpG,EAAQh8D,EAASphD,IAAMohD,EAASrtC,IAEhCgtF,GAASA,IAAUqc,IACrB7mH,KAAK4yD,QAAQ,gBAAkB43C,EAAQ,OAASqc,EAAQ,SAAWD,GACnE5mH,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,wBAA0B02H,KAIpC5mH,KAAKu8D,sBAAsB1e,MAAMgN,EAAUoL,IAS7C51D,EAAOulH,eAAiB,WACtB,IAAIh/G,EAAS5G,KAEbA,KAAK6lH,gBACL7lH,KAAK8mH,UAAY,IAASv3G,aAAY,WACpC,OAAO3I,EAAO4/G,cACb,MASLnmH,EAAOwlH,cAAgB,WAGjB7lH,KAAK4d,MAAM4F,WAAaxjB,KAAK4d,MAAM4F,cAIvC,IAASlU,cAActP,KAAK8mH,WAC5B9mH,KAAK8mH,UAAY,OASnBzmH,EAAOm/F,wBAA0B,WAC/B,IAAIxzC,EAAShsD,KAAKgsD,SACd+6D,EAAmB/6D,GAAUA,EAAOmC,WAAa,GAIrD,IAAKnC,IAAWA,EAAO2C,cAAgB3C,EAAO2C,YAAYD,MACxD,OAAOq4D,EAGT,IAEIr0G,EAFAg8C,EAAQ1C,EAAO2C,YAAYD,MAC3B00D,EAAYvwH,OAAOC,KAAK47D,GAG5B,GAAI77D,OAAOC,KAAKkN,KAAKolH,YAAY12D,MAAM4zD,QAAQzyH,OAC7C6iB,EAAQ1S,KAAKolH,YAAY12D,MAAMmzD,kBAC1B,CAEL,IAAImF,EAAet4D,EAAMn0C,MAAQ6oG,EAAUvzH,QAAU6+D,EAAM00D,EAAU,IAErE,IAAK,IAAI3uG,KAASuyG,EAChB,GAAIA,EAAavyG,GAAgB,QAAG,CAClC/B,EAAQ,CACN+B,MAAOA,GAET,OAMN,IAAK/B,EACH,OAAOq0G,EAGT,IAAI54D,EAAY,GAGhB,IAAK,IAAI8R,KAASvR,EAChB,GAAIA,EAAMuR,GAAOvtD,EAAM+B,OAAQ,CAC7B,IAAI/c,EAAag3D,EAAMuR,GAAOvtD,EAAM+B,OAEpC,GAAI/c,EAAWy2D,WAAaz2D,EAAWy2D,UAAUt+D,OAC/Cs+D,EAAUn9D,KAAKuC,MAAM46D,EAAWz2D,EAAWy2D,gBACtC,GAAIz2D,EAAW8lB,IACpB2wC,EAAUn9D,KAAK0G,QACV,GAAIs0D,EAAOmC,UAAUt+D,OAI1B,IAAK,IAAID,EAAI,EAAGA,EAAIo8D,EAAOmC,UAAUt+D,OAAQD,IAAK,CAChD,IAAIi7D,EAAWmB,EAAOmC,UAAUv+D,GAE5Bi7D,EAASlzD,YAAckzD,EAASlzD,WAAW+2D,OAAS7D,EAASlzD,WAAW+2D,QAAUuR,GACpF9R,EAAUn9D,KAAK65D,IAOzB,OAAKsD,EAAUt+D,OAIRs+D,EAHE44D,GAaX1mH,EAAOolH,oCAAsC,WAC3C,IAAIz+G,EAAShH,KAEbA,KAAKu8D,sBAAsBt5D,GAAG,kBAAkB,WAC9C,IAAI46C,EAAQ72C,EAAOu1D,sBAAsB1e,QAErCopE,EAAwC,IAAvBppE,EAAM0O,eAAuB,IAG9C2B,GAAyBlnD,EAAOu1D,sBAAsBvQ,OAAQhlD,EAAOu1D,sBAAsB1e,SAC7F72C,EAAOk+G,gBAAgB3/G,QAAU,EAEjCyB,EAAOk+G,gBAAgB3/G,QAAU0hH,EAK/BppE,EAAMoO,SAAsC,SAA3BjlD,EAAO4W,MAAM6xB,YAChCzoC,EAAOy9G,mBAAmB55D,SAAShN,EAAO72C,EAAOk+G,iBAEjDl+G,EAAOy9G,mBAAmB5kG,QAG5BkjG,GAAiB,CACf/e,WAAYh9F,EAAOy+F,YACnBic,eAAgB,CACdhzD,MAAO1nD,EAAOw9G,oBACdvC,UAAWj7G,EAAO0+G,uBAClBnrG,KAAMvT,EAAOy9G,oBAEfzxG,KAAMhM,EAAO4W,MACbukG,eAAgBn7G,EAAOk+G,gBACvB5oD,qBAAsBt1D,EAAOu1D,sBAC7B5J,IAAK3rD,EAAOisD,KACZjH,OAAQhlD,EAAOglD,SACf21D,WAAY36G,EAAOo+G,YACnBxD,yBAA0B56G,EAAO46G,yBAAyBn9G,KAAKuC,KAGjEA,EAAOkgH,sBAAsBlgH,EAAOglD,SAAUnO,GAE9C72C,EAAOmgH,kBAEFngH,EAAOo+G,YAAY12D,MAAM6yD,sBAAwBv6G,EAAOo+G,YAAY12D,MAAM6yD,qBAAqB1jE,QAClG72C,EAAOlD,QAAQ,wBAKfkD,EAAOo+G,YAAY12D,MAAM6yD,qBAAqBp9G,IAAI,kBAAkB,WAClE6C,EAAOlD,QAAQ,8BAIrB9D,KAAKu8D,sBAAsBt5D,GAAG,kBAAkB,WAC1C+D,EAAO++G,aACT/+G,EAAO4W,MAAMnsB,IAAI,OAAQuV,EAAO++G,aAGlC,IAAIqB,EAAkBpgH,EAAOu1D,sBAAsB1e,QAEnD,IAAKupE,EAAiB,CAKpB,IAAIC,EAUJ,GAZArgH,EAAOsgH,8BAIHtgH,EAAO69G,2BACTwC,EAAgBrgH,EAAOugH,yBAGpBF,IACHA,EAAgBrgH,EAAOi9G,mBAGpBoD,IAAkBrgH,EAAO0/G,qBAAqBW,GACjD,OAeF,GAZArgH,EAAOwgH,cAAgBH,EAEvBrgH,EAAO2/G,aAAa3/G,EAAOwgH,cAAe,aAQE,aAAvBxgH,EAAOy+F,aAA8Bz+F,EAAOwgH,cAAcr8D,UAG7E,OAGFi8D,EAAkBpgH,EAAOwgH,cAG3BxgH,EAAOygH,2BAA2BL,MAEpCpnH,KAAKu8D,sBAAsBt5D,GAAG,SAAS,WACrC+D,EAAO46G,yBAAyB56G,EAAOu1D,sBAAsB3qE,UAE/DoO,KAAKu8D,sBAAsBt5D,GAAG,iBAAiB,WAC7C+D,EAAOy9G,mBAAmB1uD,QAE1B/uD,EAAOy9G,mBAAmBvvG,WAE5BlV,KAAKu8D,sBAAsBt5D,GAAG,eAAe,WAC3C,IAAI46C,EAAQ72C,EAAOu1D,sBAAsB1e,QAErCopE,EAAwC,IAAvBppE,EAAM0O,eAAuB,IAG9C2B,GAAyBlnD,EAAOu1D,sBAAsBvQ,OAAQhlD,EAAOu1D,sBAAsB1e,SAC7F72C,EAAOk+G,gBAAgB3/G,QAAU,EAEjCyB,EAAOk+G,gBAAgB3/G,QAAU0hH,EAOnCjgH,EAAOy9G,mBAAmB55D,SAAShN,EAAO72C,EAAOk+G,iBAEjDl+G,EAAOy9G,mBAAmB5kG,OAE1B7Y,EAAO4W,MAAM9Z,QAAQ,CACnB9U,KAAM,cACNiV,SAAS,OAGbjE,KAAKu8D,sBAAsBt5D,GAAG,qBAAqB,WACjD,IAAImkH,EAAkBpgH,EAAOu1D,sBAAsB1e,QAKR,uBAAvCupE,EAAgBM,qBAIG1gH,EAAO2gH,oBAAoBP,KAOhDpgH,EAAO46G,yBAAyB,CAC9B3vG,QAAS,+BACTxB,OAAQ,uBAIVzJ,EAAO4W,MAAM9Z,QAAQ,sBAGzB9D,KAAKu8D,sBAAsBt5D,GAAG,qBAAqB,WACjD+D,EAAO4W,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,2BAGR8W,EAAO4W,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,8BAGV8P,KAAKu8D,sBAAsBt5D,GAAG,oBAAoB,WAChD+D,EAAO4W,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,0BAGR8W,EAAO4W,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,8BAeZmQ,EAAOonH,2BAA6B,SAAoCL,GAClEpnH,KAAKglH,aACPhlH,KAAK4nH,cAAcR,GAOrBpnH,KAAKykH,mBAAmB55D,SAASu8D,EAAiBpnH,KAAKklH,iBACvDllH,KAAK6nH,gBAAgBT,EAAgBn7D,SAIhCjsD,KAAK4d,MAAM5I,WACdhV,KAAKykH,mBAAmB5kG,OAEpB7f,KAAKwkH,qBACPxkH,KAAKwkH,oBAAoB3kG,SAW/Bxf,EAAO6mH,sBAAwB,SAA+Bl7D,EAAQnO,GACpE,IAAI8Q,EAAc3C,EAAO2C,aAAe,GACpCm5D,GAAiB,EACjBC,EAAiBl1H,OAAOC,KAAK67D,EAAYD,OAE7C,IAAK,IAAIs5D,KAAcr5D,EAAYD,MACjC,IAAK,IAAIj6C,KAASk6C,EAAYD,MAAMs5D,GAAa,CAC9Br5D,EAAYD,MAAMs5D,GAAYvzG,GAE/B+I,MACdsqG,GAAiB,GAKnBA,IACF9nH,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,gBAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,iBAIN2C,OAAOC,KAAK67D,EAAYszD,WAAWpyH,SACrCmQ,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,eAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,gBAINukH,GAAMxlD,SAASa,MAAMjS,KACvB79C,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,YAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,aAIN63H,EAAel4H,QAAUgD,OAAOC,KAAK67D,EAAYD,MAAMq5D,EAAe,KAAKl4H,OAAS,IACtFmQ,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,wBAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,yBAIN8P,KAAKglH,cACPhlH,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,0BAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,4BAKZmQ,EAAOqmH,qBAAuB,SAA8BD,GAC1D,IAAIwB,EAAkBjoH,KAAKu8D,sBAAsB1e,SAAW79C,KAAKu8D,sBAAsBhH,cACnFv2C,EAAchf,KAAK4d,MAAMoB,cACzBkpG,EAAqBloH,KAAKkoH,qBAC1BC,EAAsBnoH,KAAKmoH,sBAE/B,OA5vBsB,SAA6B/3G,GACrD,IAAI63G,EAAkB73G,EAAK63G,gBACvBp2G,EAAWzB,EAAKyB,SAChBmN,EAAc5O,EAAK4O,YACnBynG,EAAer2G,EAAKq2G,aACpByB,EAAqB93G,EAAK83G,mBAC1BC,EAAsB/3G,EAAK+3G,oBAC3Br2G,EAAW1B,EAAK0B,SAChBgzG,EAA6B10G,EAAK00G,2BAClCz0H,EAAM+f,EAAK/f,IAEf,IAAKo2H,EAEH,OADAzgG,GAAQ31B,IAAIsB,KAAK,oEACV,EAGT,IAAIy2H,EAAgB,oBAAsBH,GAAmBA,EAAgBx+G,IAAM,QAAU,OAASg9G,EAAah9G,GAEnH,IAAKw+G,EAEH,OADA53H,EAAI+3H,EAAgB,oCACb,EAIT,GAAI3B,EAAah9G,KAAOw+G,EAAgBx+G,GACtC,OAAO,EAIT,IAAI4+G,EAAaxyH,QAAQs0D,GAAUt4C,EAAUmN,GAAanvB,QAK1D,IAAKo4H,EAAgBh8D,QAGnB,OAAKo8D,GAA4D,kBAAvCJ,EAAgBh9D,oBAK1C56D,EAAI+3H,EAAgB,iCACb,IALL/3H,EAAI,OAAS+3H,EAAgB,2EACtB,GAOX,IAAIE,EAAgB39D,GAAY94C,EAAUmN,GACtCupG,EAAwBzD,EAA6BlkD,GAAOS,uCAAyCT,GAAOQ,0BAGhH,GAAItvD,EAAWy2G,EAEb,OADAl4H,EAAI+3H,EAAgB,sCAAwCt2G,EAAW,MAAQy2G,EAAwB,MAChG,EAGT,IAAIC,EAAgB/B,EAAa9uH,WAAW02D,UACxCo6D,EAAgBR,EAAgBtwH,WAAW02D,UAG/C,GAAIm6D,EAAgBC,KAAmB3D,GAA8BwD,EAAgBH,GAAsB,CACzG,IAAIO,EAAUN,EAAgB,2CAA6CI,EAAgB,MAAQC,EAAgB,IAOnH,OALI3D,IACF4D,GAAW,6CAA+CJ,EAAgB,MAAQH,EAAsB,KAG1G93H,EAAIq4H,IACG,EAKT,KAAM5D,GAA8B0D,EAAgBC,IAAkBH,GAAiBJ,EAAoB,CACzG,IAAIS,EAAWP,EAAgB,4CAA8CE,EAAgB,OAASJ,EAAqB,IAO3H,OALIpD,IACF6D,GAAY,4CAA8CH,EAAgB,MAAQC,EAAgB,KAGpGp4H,EAAIs4H,IACG,EAIT,OADAt4H,EAAI,OAAS+3H,EAAgB,kCACtB,EAwqBEQ,CAAoB,CACzB/2G,SAFa7R,KAAK4d,MAAM/L,WAGxBmN,YAAaA,EACbipG,gBAAiBA,EACjBxB,aAAcA,EACdyB,mBAAoBA,EACpBC,oBAAqBA,EACrBr2G,SAAU9R,KAAK8R,WACfgzG,2BAA4B9kH,KAAK8kH,2BACjCz0H,IAAK2P,KAAK4yD,WAWdvyD,EAAOslH,6BAA+B,WACpC,IAAI31G,EAAShQ,KAERA,KAAK8kH,6BACR9kH,KAAKykH,mBAAmBxhH,GAAG,mBAAmB,WAC5C,IAAIwjH,EAAez2G,EAAOi0G,iBAEtBj0G,EAAO02G,qBAAqBD,IAC9Bz2G,EAAO22G,aAAaF,EAAc,mBAGpCz2G,EAAO4N,MAAM9Z,QAAQ,sBAEvB9D,KAAKykH,mBAAmBxhH,GAAG,YAAY,WACrC+M,EAAOlM,QAAQ,gBAInB9D,KAAKykH,mBAAmBxhH,GAAG,SAAS,WAClC+M,EAAO4xG,yBAAyB5xG,EAAOy0G,mBAAmB7yH,YAE5DoO,KAAKykH,mBAAmBxhH,GAAG,eAAe,WACxC+M,EAAOpe,MAAQoe,EAAOy0G,mBAAmBphG,OAEzCrT,EAAOlM,QAAQ,YAEjB9D,KAAKykH,mBAAmBxhH,GAAG,kBAAkB,WAC3C+M,EAAO64G,uBAET7oH,KAAKykH,mBAAmBxhH,GAAG,mBAAmB,WAC5C+M,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,yBAGR8f,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,4BAGV8P,KAAKwkH,oBAAoBvhH,GAAG,kBAAkB,WAC5C+M,EAAO64G,uBAET7oH,KAAKwkH,oBAAoBvhH,GAAG,eAAe,WACzC+M,EAAOpe,MAAQoe,EAAOw0G,oBAAoBnhG,OAE1CrT,EAAOlM,QAAQ,YAEjB9D,KAAKykH,mBAAmBxhH,GAAG,SAAS,WAClC+M,EAAO4iD,QAAQ,6BAEf5iD,EAAO84G,mBAET9oH,KAAKykH,mBAAmBxhH,GAAG,cAAc,SAAUlH,GAE7CiU,EAAO80G,6BAIX90G,EAAO+4G,iBAAiB,MAAO,CAAC,UAEhC/4G,EAAO4xG,yBAAyB,CAC9B3vG,QAAS,mGAx1BmB,SA41BhC,IAAI+2G,EAAe,WACjB,IAAKh5G,EAAO01F,eAAesR,0BACzB,OAAOhnG,EAAOi5G,4BAGhB,IAAInrB,EAAS9tF,EAAOk5G,sBAGfprB,GAIL9tF,EAAO01F,eAAeyR,yBAAyBrZ,IAGjD99F,KAAKykH,mBAAmBxhH,GAAG,YAAa+lH,GACxChpH,KAAKwkH,oBAAoBvhH,GAAG,YAAa+lH,GACzChpH,KAAKykH,mBAAmBxhH,GAAG,QAAQ,WAC5B+M,EAAO81G,qBACV91G,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,aAGR8f,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,aAGR8f,EAAO81G,oBAAqB,MAGhC9lH,KAAKwkH,oBAAoBvhH,GAAG,QAAQ,WAC7B+M,EAAO81G,qBACV91G,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,aAGR8f,EAAO4N,MAAM9Z,QAAQ,CACnB9U,KAAM,QACNkB,KAAM,aAGR8f,EAAO81G,oBAAqB,MAGhC9lH,KAAKwkH,oBAAoBvhH,GAAG,SAAS,WACnC+M,EAAO4iD,QAAQ,4BAEf5iD,EAAO84G,oBAIXzoH,EAAO8oH,oBAAsB,WAC3B,OAAO/rH,KAAKC,IAAI2C,KAAKwkH,oBAAoB3b,mBAAqB7oG,KAAKykH,mBAAmB5b,qBAOxFxoG,EAAOwf,KAAO,WACZ7f,KAAKykH,mBAAmB5kG,OAEpB7f,KAAKolH,YAAY12D,MAAM6yD,sBACzBvhH,KAAKwkH,oBAAoB3kG,OAGvB7f,KAAKolH,YAAYnD,UAAUV,sBAC7BvhH,KAAK0lH,uBAAuB7lG,QAahCxf,EAAO+oH,qBAAuB,SAA8BvrE,QAC5C,IAAVA,IACFA,EAAQ79C,KAAKikH,kBAGfjkH,KAAKkkH,mBAAmBrmE,IAY1Bx9C,EAAO6jH,mBAAqB,SAA4BrmE,GACtD,IAAI1tC,EAASnQ,UAEC,IAAV69C,IACFA,EAAQ79C,KAAKikH,kBAGXpmE,IAAU79C,KAAKu8D,sBAAsB1e,SAKzC79C,KAAK2mH,aAAa9oE,EAAO,gBAOzB79C,KAAKykH,mBAAmBta,iBAAgB,WAGlCnkF,GAAQ1vB,QAAQf,YAAcywB,GAAQ1vB,QAAQlB,QAChD+a,EAAOyN,MAAM6F,eAAetT,EAAOyN,MAAMoB,cAAgB,KAEzD7O,EAAOyN,MAAM6F,eAAetT,EAAOyN,MAAMoB,mBAjB3Chf,KAAK4yD,QAAQ,gEA0BjBvyD,EAAO8I,KAAO,WACZ,IAAInJ,KAAKmnH,iBAAT,CAIInnH,KAAK4d,MAAM4K,SACbxoB,KAAK4d,MAAM6F,eAAe,GAGxBzjB,KAAK6kG,YACP7kG,KAAK6f,OAGP,IAAIyI,EAAWtoB,KAAK4d,MAAM0K,WAG1B,OAAItoB,KAAK4d,MAAM9L,aAAewgB,KACxBtyB,KAAK4d,MAAMoB,cAAgBsJ,EAAS7W,MAAM,GACrCzR,KAAK4d,MAAM6F,eAAe6E,EAAS5W,IAAI4W,EAASz4B,OAAS,SAFpE,IAYFwQ,EAAO8mH,eAAiB,WACtB,IAAIpjG,EAAS/jB,KAET69C,EAAQ79C,KAAKu8D,sBAAsB1e,QAMvC,IAAKA,GAAS79C,KAAK4d,MAAM5I,UAAYhV,KAAK6kG,WACxC,OAAO,EAIT,IAAKhnD,EAAMoO,QAAS,CAClB,IAAI3jC,EAAWtoB,KAAKsoB,WAEpB,IAAKA,EAASz4B,OAGZ,OAAO,EAGT,GAAIm2B,GAAQ1vB,QAAQf,YAA0C,IAA5ByK,KAAK4d,MAAMve,aAU3C,OAPAW,KAAK4d,MAAMzZ,IAAI,kBAAkB,WAC/B4f,EAAOjgB,QAAQ,aAEfigB,EAAOnG,MAAM6F,eAAe6E,EAAS5W,IAAI,IAEzCqS,EAAO8gF,YAAa,MAEf,EAIT7kG,KAAK8D,QAAQ,aAEb9D,KAAK4d,MAAM6F,eAAe6E,EAAS5W,IAAI,IAMzC,OAHA1R,KAAK6kG,YAAa,EAElB7kG,KAAK6f,QACE,GASTxf,EAAOilH,kBAAoB,WAQzB,GAJAtlH,KAAKipH,4BAIDjpH,KAAK4d,MAAMm4B,WAAY,CACzB,IAAI3kB,EAAcpxB,KAAK4d,MAAMzU,OAGF,qBAAhBioB,GAA2D,oBAArBA,EAAY7e,MAC3D6e,EAAY7e,KAAK,MAAM,SAAUte,OAIrC+L,KAAK8D,QAAQ,eASfzD,EAAOklH,mBAAqB,WAC1B,GAAKvlH,KAAK4lG,kBAAkBjE,eAA5B,CAIA,IAAIhvF,EAAO3S,KAAK4lG,kBAAkBjE,eAAehvF,KAEjD,GAAKA,GAASA,EAAK9iB,OAAnB,CAIA,IAAIiiB,EAAW9R,KAAK8R,WACpBa,EAAKA,EAAK9iB,OAAS,GAAGijB,QAAU7E,MAAM6D,IAAa1U,KAAK8sC,IAAIp4B,KAAcwgB,IAAW91B,OAAO8xD,UAAYx8C,KAS1GzR,EAAOglH,sBAAwB,WAC7BrlH,KAAK4d,MAAM9Z,QAAQ,mBAYrBzD,EAAOyoH,cAAgB,WACrB,IAAI3W,EAAgBnyG,KAAKykH,mBAAmBzc,OAE5C,GAAIhoG,KAAKolH,YAAY12D,MAAM6yD,qBAAsB,CAC/C,IAAI8H,EAAgBrpH,KAAKykH,mBAAmB1U,uBAM1CoC,GAJGkX,GAAiBA,EAAcr+B,SAIlBmnB,GAAiBnyG,KAAKwkH,oBAAoBxc,OAG1ChoG,KAAKwkH,oBAAoBxc,OAIxCmK,IAILnyG,KAAK6lH,gBACL7lH,KAAK0lG,eAAe6D,gBAUtBlpG,EAAOsnH,oBAAsB,SAA6B98D,GAGxD,IAFe7qD,KAAKsoB,WAENz4B,OAEZ,OAAO,EAGT,IAAI68D,EAAU1sD,KAAKynG,gBAAgB8T,eAAe1wD,EAAU7qD,KAAK8R,YAEjE,GAAgB,OAAZ46C,EACF,OAAO,EAKT,IAAI48D,EAAsB7U,GAAMxlD,SAASxB,YAAY5C,EAAU6B,GAC3D1tC,EAAchf,KAAK4d,MAAMoB,cACzBnN,EAAW7R,KAAK4d,MAAM/L,WAE1B,IAAKA,EAAShiB,OAEZ,OAAOy5H,EAAsBtqG,GAAe+qC,GAG9C,IAAI1zB,EAAcxkB,EAASH,IAAIG,EAAShiB,OAAS,GAGjD,OAAOwmC,EAAcrX,GAAe+qC,IAAmBu/D,EAAsBjzF,GAAe0zB,IAc9F1pD,EAAOuhH,yBAA2B,SAAkChwH,EAAOssE,QAC3D,IAAVtsE,IACFA,EAAQ,IAOV,IAAIq2H,EAAkBr2H,EAAMi5D,UAAY7qD,KAAKu8D,sBAAsB1e,QAInE,GAHAqgB,EAAoBA,GAAqBtsE,EAAMssE,mBAAqBl+D,KAAKk+D,mBAGpE+pD,EASH,OARAjoH,KAAKpO,MAAQA,OAEuB,SAAhCoO,KAAKykG,YAAYplG,WACnBW,KAAK8D,QAAQ,SAEb9D,KAAK0lG,eAAe6D,YAAY,YAMpC0e,EAAgBv3D,kBAChB,IA0CI5C,EA1CAK,EAAYnuD,KAAKu8D,sBAAsBvQ,OAAOmC,UAC9Co/C,EAAmBp/C,EAAUn8D,OAAOg8D,IACpCyQ,EAA+C,IAA5B8uC,EAAiB19G,QAAgB09G,EAAiB,KAAO0a,EAGhF,GAAyB,IAArB95D,EAAUt+D,QAAgBquE,IAAsB5rC,IAIlD,OAHAtM,GAAQ31B,IAAIsB,KAAK,qCAAuCs2H,EAAgBx+G,GAAvD,iDACjBzJ,KAAK4d,MAAM9Z,QAAQ,iBAEZ9D,KAAKu8D,sBAAsB18C,KAAK4+C,GAGzC,GAAIA,EAAkB,CAKpB,IAAI8qD,GAAa,EACjBp7D,EAAUj7D,SAAQ,SAAU23D,GAE1B,GAAIA,IAAao9D,EAAjB,CAIA,IAAIn6D,EAAejD,EAASiD,aAEA,qBAAjBA,GAAgCA,IAAiBx7B,MAC1Di3F,GAAa,SACN1+D,EAASiD,kBAIhBy7D,IACFvjG,GAAQ31B,IAAIsB,KAAK,wGAIjBqO,KAAK4d,MAAM9Z,QAAQ,kBAQrBgqD,EADEm6D,EAAgBv3D,gBAAkB1wD,KAAK+kH,mBAC1BzyF,IAEAzkC,KAAKC,MAA4B,IAApBowE,EAG9B+pD,EAAgBn6D,aAAeA,EAE3Bl8D,EAAM6e,SACRw3G,EAAgBP,mBAAqB91H,EAAM6e,QAG7CzQ,KAAK4d,MAAM9Z,QAAQ,qBACnB9D,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,8BAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,8BAOR,IAAIu2H,EAAezmH,KAAKikH,iBAExB,IAAKwC,EAGH,OAFAzmH,KAAKpO,MAAQ,8EACboO,KAAK8D,QAAQ,SAIf,IAAIw6F,EAAQ1sG,EAAMqsE,SAAWj+D,KAAK4yD,QAAU5sC,GAAQ31B,IAAIsB,KACpD63H,EAAe53H,EAAMqgB,QAAU,IAAMrgB,EAAMqgB,QAAU,GACzDqsF,GAAO1sG,EAAMqsE,SAAW,mBAAqB,WAAa,8BAAgCgqD,EAAgBx+G,GAAK,IAAO+/G,EAAe,0BAA4B/C,EAAah9G,GAAK,KAE/Kg9G,EAAa9uH,WAAW+2D,QAAUu5D,EAAgBtwH,WAAW+2D,OAC/D1uD,KAAK+oH,iBAAiB,QAAS,CAAC,QAAS,UAIvCtC,EAAa9uH,WAAWsqH,YAAcgG,EAAgBtwH,WAAWsqH,WACnEjiH,KAAK+oH,iBAAiB,WAAY,CAAC,QAAS,UAG9C/oH,KAAK+oH,iBAAiB,OAAQ,CAAC,QAAS,UACxC,IAAIU,EAAgBhD,EAAal6D,eAAiB,EAAI,KAAQ,IAC1DyJ,EAAkD,kBAA7BywD,EAAanxD,aAA4BznE,KAAKC,MAAQ24H,EAAanxD,aAAem0D,EAE3G,OAAOzpH,KAAK2mH,aAAaF,EAAc,UAAWhoD,GAAoBzI,IAOxE31D,EAAO8kH,aAAe,WACpBnlH,KAAK+oH,iBAAiB,MAAO,CAAC,QAAS,UACvC/oH,KAAK6lH,iBAkBPxlH,EAAO0oH,iBAAmB,SAA0B/2H,EAAQ03H,GAC1D,IAAIhlG,EAAS1kB,KAET2pH,EAAU,GACVC,EAAgC,QAAX53H,GAErB43H,GAAiC,SAAX53H,IACxB23H,EAAQ34H,KAAKgP,KAAKu8D,uBAGpB,IAAIolD,EAAa,IAEbiI,GAAiC,UAAX53H,IACxB2vH,EAAW3wH,KAAK,UAGd44H,GAAiC,aAAX53H,KACxB2vH,EAAW3wH,KAAK,mBAChB2wH,EAAW3wH,KAAK,cAGlB2wH,EAAWzuH,SAAQ,SAAUm9D,GAC3B,IAAIw5D,EAASnlG,EAAO0gG,YAAY/0D,IAAc3rC,EAAO0gG,YAAY/0D,GAAWkxD,qBAExEsI,GACFF,EAAQ34H,KAAK64H,MAGjB,CAAC,OAAQ,QAAS,YAAY32H,SAAQ,SAAUhD,GAC9C,IAAI25H,EAASnlG,EAAOx0B,EAAO,mBAEvB25H,GAAW73H,IAAW9B,GAAmB,QAAX8B,GAChC23H,EAAQ34H,KAAK64H,MAGjBF,EAAQz2H,SAAQ,SAAU22H,GACxB,OAAOH,EAAQx2H,SAAQ,SAAU8S,GACD,oBAAnB6jH,EAAO7jH,IAChB6jH,EAAO7jH,YAaf3F,EAAOojB,eAAiB,SAAwBzE,GAC9C,IAAInN,EAAWs4C,GAAUnqD,KAAK4d,MAAM/L,WAAYmN,GAEhD,OAAMhf,KAAKu8D,uBAAyBv8D,KAAKu8D,sBAAsB1e,SAO1D79C,KAAKu8D,sBAAsB1e,QAAQsN,SAKpCt5C,GAAYA,EAAShiB,OAChBmvB,GAKThf,KAAKykH,mBAAmBta,kBACxBnqG,KAAKykH,mBAAmB1uD,QAEpB/1D,KAAKolH,YAAY12D,MAAM6yD,uBACzBvhH,KAAKwkH,oBAAoBra,kBACzBnqG,KAAKwkH,oBAAoBzuD,SAGvB/1D,KAAKolH,YAAYnD,UAAUV,uBAC7BvhH,KAAK0lH,uBAAuBvb,kBAC5BnqG,KAAK0lH,uBAAuB3vD,cAI9B/1D,KAAK6f,QA9BI,GAuCXxf,EAAOyR,SAAW,WAChB,IAAK9R,KAAKu8D,sBACR,OAAO,EAGT,IAAI1e,EAAQ79C,KAAKu8D,sBAAsB1e,QAEvC,OAAKA,EAeAA,EAAMoO,QAMPjsD,KAAKykG,YACAzkG,KAAKykG,YAAY3yF,SAGnB2iG,GAAMxlD,SAASn9C,SAAS+rC,GATtBvrB,IAdA,GAgCXjyB,EAAOioB,SAAW,WAChB,OAAOtoB,KAAK+kG,WAGd1kG,EAAOwoH,kBAAoB,WACzB,IAAIiB,EAoBJ,GAAK9pH,KAAKu8D,sBAAV,CAIA,IAAI1e,EAAQ79C,KAAKu8D,sBAAsB1e,QAEvC,GAAKA,EAAL,CAIA,IAAI6O,EAAU1sD,KAAKynG,gBAAgB8T,eAAe19D,EAAO79C,KAAK8R,YAE9D,GAAgB,OAAZ46C,EAAJ,CAKA,IAAIV,EAAShsD,KAAKu8D,sBAAsBvQ,OACpC+9D,EAAetV,GAAMxlD,SAAS3mC,SAASu1B,EAAO6O,EAAS+nD,GAAMxlD,SAASlD,cAAcC,EAAQnO,IAEhG,GAA4B,IAAxBksE,EAAal6H,OAAjB,CAIA,GAAImQ,KAAKolH,YAAY12D,MAAM6yD,qBAAsB,CAI/C,GAHA1jE,EAAQ79C,KAAKolH,YAAY12D,MAAM6yD,qBAAqB1jE,QAGpC,QAFhB6O,EAAU1sD,KAAKynG,gBAAgB8T,eAAe19D,EAAO79C,KAAK8R,aAGxD,OAKF,GAA6B,KAF7Bg4G,EAAgBrV,GAAMxlD,SAAS3mC,SAASu1B,EAAO6O,EAAS+nD,GAAMxlD,SAASlD,cAAcC,EAAQnO,KAE3EhuD,OAChB,OAIJ,IAAIm6H,EACAC,EAEAjqH,KAAK+kG,WAAa/kG,KAAK+kG,UAAUl1G,SACnCm6H,EAAShqH,KAAK+kG,UAAUrzF,IAAI,GAC5Bu4G,EAAWjqH,KAAK+kG,UAAUtzF,MAAM,IAG7Bq4G,EAIMA,EAAcr4G,MAAM,GAAKs4G,EAAar4G,IAAI,IAAMq4G,EAAat4G,MAAM,GAAKq4G,EAAcp4G,IAAI,GAEnG1R,KAAK+kG,UAAYglB,EAEjB/pH,KAAK+kG,UAAY/+E,GAAQrU,iBAAiB,CAAC,CAACm4G,EAAcr4G,MAAM,GAAKs4G,EAAat4G,MAAM,GAAKq4G,EAAcr4G,MAAM,GAAKs4G,EAAat4G,MAAM,GAAIq4G,EAAcp4G,IAAI,GAAKq4G,EAAar4G,IAAI,GAAKo4G,EAAcp4G,IAAI,GAAKq4G,EAAar4G,IAAI,MALlO1R,KAAK+kG,UAAYglB,EASf/pH,KAAK+kG,WAAa/kG,KAAK+kG,UAAUl1G,QAC/BmQ,KAAK+kG,UAAUrzF,IAAI,KAAOs4G,GAAUhqH,KAAK+kG,UAAUtzF,MAAM,KAAOw4G,IAKtEjqH,KAAK4yD,QAAQ,qBAAuBvI,GAAerqD,KAAK+kG,WAAa,KACrE/kG,KAAK4d,MAAM9Z,QAAQ,yBAOrBzD,EAAOwnH,eAAiB,SAAwB1xF,GAM9C,GALIn2B,KAAKkqH,kBACPlqH,KAAKykG,YAAYrlG,oBAAoB,aAAcY,KAAKkqH,iBACxDlqH,KAAKkqH,gBAAkB,MAGW,SAAhClqH,KAAKykG,YAAYplG,WAGnB,OAFAW,KAAKkqH,gBAAkBlqH,KAAK6nH,eAAepjH,KAAKzE,KAAMm2B,QACtDn2B,KAAKykG,YAAYnlG,iBAAiB,aAAcU,KAAKkqH,iBAIvD,GAAI/zF,EAAJ,CACE,IAAI7N,EAAWtoB,KAAKsoB,WAEpB,IAAKA,EAASz4B,OACZ,QA0BEoe,MAAMjO,KAAKykG,YAAY3yF,WAAa9R,KAAKykG,YAAY3yF,SAAWwW,EAAS5W,IAAI4W,EAASz4B,OAAS,KACjGmQ,KAAK0lG,eAAeuS,YAAY3vF,EAAS5W,IAAI4W,EAASz4B,OAAS,QA/BnE,CAqCA,IAAIgiB,EAAW7R,KAAK4d,MAAM/L,WACtBC,EAAW2iG,GAAMxlD,SAASn9C,SAAS9R,KAAKu8D,sBAAsB1e,SAE9DhsC,EAAShiB,OAAS,IACpBiiB,EAAW1U,KAAKC,IAAIyU,EAAUD,EAASH,IAAIG,EAAShiB,OAAS,KAG3DmQ,KAAKykG,YAAY3yF,WAAaA,GAChC9R,KAAK0lG,eAAeuS,YAAYnmG,KASpCzR,EAAOiK,QAAU,WACf,IAAI+xC,EAASr8C,KAEbA,KAAK8D,QAAQ,WACb9D,KAAKunG,WAAWnlC,YAChBpiE,KAAKu8D,sBAAsBjyD,UAC3BtK,KAAKykH,mBAAmBn6G,UAEpBtK,KAAK+lH,aACP/lH,KAAK4d,MAAMnsB,IAAI,OAAQuO,KAAK+lH,aAG9B,CAAC,QAAS,aAAa7yH,SAAQ,SAAUlE,GACvC,IAAIszH,EAASjmE,EAAO+oE,YAAYp2H,GAAMszH,OAEtC,IAAK,IAAI74G,KAAM64G,EACbA,EAAO74G,GAAIvW,SAAQ,SAAU+sE,GACvBA,EAAMwhD,gBACRxhD,EAAMwhD,eAAen3G,gBAK7BtK,KAAKwkH,oBAAoBl6G,UACzBtK,KAAK0lH,uBAAuBp7G,UAC5BtK,KAAK0lG,eAAep7F,UACpBtK,KAAK8lG,0BAA0Bx7F,UAC/BtK,KAAK6lH,gBAED7lH,KAAKkqH,iBACPlqH,KAAKykG,YAAYrlG,oBAAoB,aAAcY,KAAKkqH,iBAG1DlqH,KAAKykG,YAAYrlG,oBAAoB,iBAAkBY,KAAKqlH,uBAE5DrlH,KAAKykG,YAAYrlG,oBAAoB,aAAcY,KAAKslH,mBACxDtlH,KAAKykG,YAAYrlG,oBAAoB,cAAeY,KAAKulH,oBACzDvlH,KAAKvO,OASP4O,EAAO2rD,OAAS,WACd,OAAOhsD,KAAKu8D,sBAAsBvQ,QASpC3rD,EAAOw9C,MAAQ,WAEb,OAAO79C,KAAKu8D,sBAAsB1e,SAAW79C,KAAKwnH,eAGpDnnH,EAAO8pH,oBAAsB,WAC3B,IAAIC,IAAqBpqH,KAAKolH,YAAY12D,MAAM6yD,qBAC5C8I,IAAqBrqH,KAAKykH,mBAAmB1U,uBAG7Cua,GAAqBF,KAA4BpqH,KAAKwkH,oBAAoBzU,uBAE9E,SAAKsa,IAAqBC,IAO5BjqH,EAAO6oH,oBAAsB,WAC3B,IAAI1rE,EAASx9C,KAET69C,EAAQ,CACVtjC,KAAMva,KAAKykH,mBAAmB1U,wBAA0B,GACxD5vF,MAAOngB,KAAKwkH,oBAAoBzU,wBAA0B,IAG5DlyD,EAAMt9B,MAAQs9B,EAAMtjC,KACpB,IAAIgwG,EAAiBtsB,GAAkBj+F,KAAKgsD,SAAUhsD,KAAK69C,SACvDigD,EAAS,GACTssB,IAAqBpqH,KAAKolH,YAAY12D,MAAM6yD,qBAiBhD,GAfI1jE,EAAMtjC,KAAKywE,WACb8S,EAAOv9E,MAAQgqG,EAAehqG,OAASs9B,EAAMtjC,KAAKsgF,YAAc,KAG9Dh9C,EAAMtjC,KAAK0/E,UACb6D,EAAOv9E,OAAS,KAAOgqG,EAAepqG,OAAS09B,EAAMtjC,KAAKqgF,YAAc,OAGtE/8C,EAAMtjC,KAAKwwE,WAAaltC,EAAMtjC,KAAK0/E,SAAWp8C,EAAM19B,MAAM4qE,UAAYq/B,KACxEtsB,EAAO39E,MAAQoqG,EAAepqG,OAAS09B,EAAMtjC,KAAKqgF,YAAc/8C,EAAM19B,MAAMy6E,YAAc,IAE1F/8C,EAAM19B,MAAMw6E,OAAS98C,EAAMtjC,KAAKwwE,WAAaltC,EAAMtjC,KAAK0/E,QAAUp8C,EAAMtjC,KAAKogF,OAAS98C,EAAM19B,MAAMw6E,QAI/FmD,EAAO39E,OAAU29E,EAAOv9E,MAA7B,CAUA,IAKIiqG,EADAC,EAAoB,GAcxB,GAZA,CAAC,QAAS,SAASv3H,SAAQ,SAAUlE,GACnC,GAAI8uG,EAAOhsG,eAAe9C,KAPmB2rG,EAOO98C,EAAM7uD,GAAM2rG,OAPXla,EAOmBqd,EAAO9uG,KANxE2rG,EAAS,YAAqBla,GAAS,YAAmBA,KAMsB,CACrF,IAAIiqC,EAAY7sE,EAAM7uD,GAAM2rG,OAAS,UAAY,QACjD8vB,EAAkBC,GAAaD,EAAkBC,IAAc,GAC/DD,EAAkBC,GAAW15H,KAAK8sG,EAAO9uG,IAE5B,UAATA,IACFw7H,EAAmBE,GAbH,IAAyB/vB,EAAQla,KAkBnD2pC,GAAoBI,GAAoBxqH,KAAK69C,QAAQlmD,WAAW+2D,MAAO,CACzE,IAAI0vC,EAAap+F,KAAK69C,QAAQlmD,WAAW+2D,MACzC1uD,KAAKgsD,SAASmC,UAAUj7D,SAAQ,SAAU47D,IAChBA,EAAQn3D,YAAcm3D,EAAQn3D,WAAW+2D,SAEvC0vC,GAActvC,IAAYtR,EAAOK,UACzDiR,EAAQhB,aAAex7B,QAG3BtyB,KAAK4yD,QAAQ,yBAA2BwrC,EAAa,OAASosB,EAAmB,gCAAmC1sB,EAAO39E,MAAQ,KAIrI,IAAIttB,OAAOC,KAAK23H,GAAmB56H,OAAnC,CAmBA,GAAImQ,KAAK0lG,eAAesR,4BAA8Bh3G,KAAK0lG,eAAe4R,gBAAiB,CACzF,IAAIqT,EAAiB,GAUrB,GATA,CAAC,QAAS,SAASz3H,SAAQ,SAAUlE,GACnC,IAAI47H,GAAY,YAAYptE,EAAOkoD,eAAe5H,OAAO9uG,IAAS,IAAI,IAAM,IAAIA,KAC5E67H,GAAY,YAAY/sB,EAAO9uG,IAAS,IAAI,IAAM,IAAIA,KAEtD47H,GAAYC,GAAYD,EAASxuH,gBAAkByuH,EAASzuH,eAC9DuuH,EAAe35H,KAAK,IAAOwsD,EAAOkoD,eAAe5H,OAAO9uG,GAAQ,SAAa8uG,EAAO9uG,GAAQ,QAI5F27H,EAAe96H,OAOjB,YANAmQ,KAAK4hH,yBAAyB,CAC5B/2D,SAAU7qD,KAAK69C,QACf5rC,QAAS,kCAAoC04G,EAAejxH,KAAK,MAAQ,IACzEwkE,kBAAmB5rC,IACnB2rC,UAAU,IAQhB,OAAO6/B,EA1CL,IAAI7rF,EAAUpf,OAAOC,KAAK23H,GAAmB/+G,QAAO,SAAUC,EAAK++G,GAMjE,OALI/+G,IACFA,GAAO,MAGTA,GAAO++G,EAAY,gCAAmCD,EAAkBC,GAAWhxH,KAAK,KAAO,MAE9F,IAAM,IACTsG,KAAK4hH,yBAAyB,CAC5B/2D,SAAU7qD,KAAK69C,QACfogB,UAAU,EACVhsD,QAASA,EACTisD,kBAAmB5rC,WArDrBtyB,KAAK4hH,yBAAyB,CAC5B/2D,SAAU7qD,KAAK69C,QACf5rC,QAAS,2CACTisD,kBAAmB5rC,OAyFzBjyB,EAAO4oH,0BAA4B,WAGjC,GAAoC,SAAhCjpH,KAAKykG,YAAYplG,aAAyBW,KAAK0lG,eAAesR,2BAI7Dh3G,KAAKmqH,sBAAV,CAIA,IAAIrsB,EAAS99F,KAAKkpH,sBAElB,GAAKprB,EAAL,CAIA99F,KAAK0lG,eAAewR,oBAAoBpZ,GACxC,IAAIgtB,EAAc,CAAChtB,EAAOv9E,MAAOu9E,EAAO39E,OAAOnuB,OAAO6D,SAAS6D,KAAK,KACpEsG,KAAK+qH,6BAA6BD,MAOpCzqH,EAAOinH,4BAA8B,WACnC,IAAIvpE,EAAU/9C,KAEVmuD,EAAYnuD,KAAKgsD,SAASmC,UAC1B68D,EAAM,GAGVn4H,OAAOC,KAAKq7D,GAAWj7D,SAAQ,SAAUC,GACvC,IAAI27D,EAAUX,EAAUh7D,GAExB,IAAiC,IAA7B63H,EAAI37H,QAAQy/D,EAAQrlD,IAAxB,CAIAuhH,EAAIh6H,KAAK89D,EAAQrlD,IACjB,IAAIq0F,EAASG,GAAkBlgD,EAAQiO,OAAQ8C,GAC3Cm8D,EAAc,IAEdntB,EAAO39E,OAAU,YAAmB29E,EAAO39E,QAAW,YAAqB29E,EAAO39E,QACpF8qG,EAAYj6H,KAAK,eAAiB8sG,EAAO39E,QAGvC29E,EAAOv9E,OAAU,YAAmBu9E,EAAOv9E,QAAW,YAAqBu9E,EAAOv9E,QACpF0qG,EAAYj6H,KAAK,eAAiB8sG,EAAOv9E,OAGvCu9E,EAAOzlG,MAAwB,mBAAhBylG,EAAOzlG,MACxB4yH,EAAYj6H,KAAK,cAAgB8sG,EAAOzlG,MAGtC4yH,EAAYp7H,SACdi/D,EAAQhB,aAAex7B,IAEvByrB,EAAQ6U,QAAQ,aAAe9D,EAAQrlD,GAAK,qBAAuBwhH,EAAYvxH,KAAK,aAoB1F2G,EAAO0qH,6BAA+B,SAAsCD,GAC1E,IAAI5sE,EAAUl+C,KAEVgrH,EAAM,GACN78D,EAAYnuD,KAAKgsD,SAASmC,UAC1B2vC,EAASF,GAAgB,YAAYktB,IACrCI,EAAcntB,GAAWD,GACzBqtB,EAAertB,EAAOv9E,OAAS,YAAYu9E,EAAOv9E,OAAO,IAAM,KAC/D6qG,EAAettB,EAAO39E,OAAS,YAAY29E,EAAO39E,OAAO,IAAM,KACnEttB,OAAOC,KAAKq7D,GAAWj7D,SAAQ,SAAUC,GACvC,IAAI27D,EAAUX,EAAUh7D,GAGxB,IAAiC,IAA7B63H,EAAI37H,QAAQy/D,EAAQrlD,KAAcqlD,EAAQhB,eAAiBx7B,IAA/D,CAIA04F,EAAIh6H,KAAK89D,EAAQrlD,IACjB,IAAI4hH,EAAmB,GAEnBC,EAAgBrtB,GAAkB//C,EAAQqe,sBAAsBvQ,OAAQ8C,GACxEy8D,EAAoBxtB,GAAWutB,GAGnC,GAAKA,EAAcnrG,OAAUmrG,EAAc/qG,MAA3C,CAaA,GANIgrG,IAAsBL,GACxBG,EAAiBr6H,KAAK,gBAAmBu6H,EAAoB,UAAcL,EAAc,MAKtFhtE,EAAQwnD,eAAe4R,gBAAiB,CAC3C,IAAIkU,EAAsBF,EAAc/qG,OAAS,YAAY+qG,EAAc/qG,OAAO,IAAM,KACpFkrG,EAAsBH,EAAcnrG,OAAS,YAAYmrG,EAAcnrG,OAAO,IAAM,KAEpFqrG,GAAuBL,GAAgBK,EAAoBx8H,KAAKoN,gBAAkB+uH,EAAan8H,KAAKoN,eACtGivH,EAAiBr6H,KAAK,gBAAmBw6H,EAAoBx8H,KAAO,UAAcm8H,EAAan8H,KAAO,KAIpGy8H,GAAuBL,GAAgBK,EAAoBz8H,KAAKoN,gBAAkBgvH,EAAap8H,KAAKoN,eACtGivH,EAAiBr6H,KAAK,gBAAmBy6H,EAAoBz8H,KAAO,UAAco8H,EAAap8H,KAAO,KAItGq8H,EAAiBx7H,SACnBi/D,EAAQhB,aAAex7B,IAEvB4rB,EAAQ0U,QAAQ,gBAAkB9D,EAAQrlD,GAAK,KAAO4hH,EAAiB3xH,KAAK,gBAKlF2G,EAAOunH,cAAgB,SAAuB/pE,GAC5C,IAAImU,EAAS,EACT1pC,EAAWtoB,KAAKsoB,WAEhBA,EAASz4B,SACXmiE,EAAS1pC,EAAS7W,MAAM,IAxrIX,SAAsBosC,EAAOnrC,EAAOs/C,GAKrD,QAJe,IAAXA,IACFA,EAAS,GAGNnU,EAAMsN,SAOX,IAHA,IACIv4C,EADA0nG,EAAYtoD,EAGPpiE,EAAI,EAAGA,EAAIiuD,EAAMsN,SAASt7D,OAAQD,IAAK,CAC9C,IAAIk7D,EAAUjN,EAAMsN,SAASv7D,GAU7B,GARKgjB,IAKHA,EAAMynG,GAAU3nG,EAAO4nG,EAAYxvD,EAAQh5C,SAAW,IAGpDc,EAAK,CACP,GAAI,UAAWk4C,EAAS,CAEtBl4C,EAAIE,QAAUwnG,EACd1nG,EAAI4nG,UAAYF,EAChBA,GAAaxvD,EAAQh5C,SACrBc,EAAM,KACN,SAGF,GAAI0nG,EAAY1nG,EAAIE,QAAS,CAE3BwnG,GAAaxvD,EAAQh5C,SACrB,SAIFc,EAAIE,SAAWg4C,EAAQh5C,cAWvB,GATI,WAAYg5C,KACdl4C,EAAM,IAAI,IAASuM,OAAOm7F,EAAWA,EAAYxvD,EAAQh5C,SAAUg5C,EAAQ4gE,SACvEnR,YAAcD,EAGlB1nG,EAAI4nG,UAAYF,EAAY5lH,WAAWo2D,EAAQ4gE,QAC/Ch5G,EAAMe,OAAOb,IAGX,eAAgBk4C,EAAS,CAI3B,IAAI6gE,EAAwB7gE,EAAQ8gE,WAAWpyH,MAAM,KAAK+C,IAAI7H,YAC1Dm3H,EAAWF,EAAsB,GACjCG,EAAUH,EAAsB,IAEpC/4G,EAAM,IAAI,IAASuM,OAAOm7F,EAAWA,EAAYxvD,EAAQh5C,SAAU,KAC/DyoG,YAAcD,EAAYuR,EAC9Bj5G,EAAI4nG,UAAY5nG,EAAI2nG,YAAcuR,EAClCp5G,EAAMe,OAAOb,GAIjB0nG,GAAaxvD,EAAQh5C,UAynIrBi6G,CAAaluE,EAAO79C,KAAKilH,cAAejzD,IAS1C3xD,EAAOmlG,iBAAmB,WACxB,IAAIxmF,EAAchf,KAAK4d,MAAMoB,cACzBunB,EAAUq6B,GAAOC,mBACjB59B,EAAO29B,GAAOI,wBACd3jE,EAAMD,KAAKC,IAAIkpC,EAASq6B,GAAOE,wBACnC,OAAO1jE,KAAKE,IAAIipC,EAAUvnB,EAAcikB,EAAM5lC,IAShDgD,EAAO6nH,mBAAqB,WAC1B,IAAIlpG,EAAchf,KAAK4d,MAAMoB,cACzBunB,EAAUq6B,GAAOO,sBACjBl+B,EAAO29B,GAAOU,2BACdjkE,EAAMD,KAAKC,IAAIkpC,EAASq6B,GAAOQ,2BAC/B4qD,EAAS5uH,KAAKC,IAAIkpC,EAASq6B,GAAOS,wCACtC,OAAOjkE,KAAKE,IAAIipC,EAAUvnB,EAAcikB,EAAMjjC,KAAK8kH,2BAA6BkH,EAAS3uH,IAG3FgD,EAAO8nH,oBAAsB,WAC3B,OAAOvnD,GAAOW,wBAGTmjD,EAz4DmC,CA04D1C1+F,GAAQqjC,aAsDN4iE,GAAiB,SAAwBC,EAAYrhE,EAAUphD,GACjE,IAxC2CogH,EAAQsC,EAAYC,EAwC3DpI,EAAMkI,EAAW/qB,0BAIjBkrB,EAAwBrI,GAHFkI,EAAW3iH,SAAS+iH,oBAEP,SAAW,QACL,kBAAkB7nH,KAAKu/G,GAEpE,GAAIn5D,EAASlzD,WAAY,CACvB,IAAI68G,EAAa3pD,EAASlzD,WAAWgoG,WACrC3/F,KAAK5E,MAAQo5G,GAAcA,EAAWp5G,MACtC4E,KAAK7E,OAASq5G,GAAcA,EAAWr5G,OACvC6E,KAAKiwD,UAAYpF,EAASlzD,WAAW02D,UAGvCruD,KAAK89F,OAASG,GAAkB+lB,EAAIh4D,SAAUnB,GAC9C7qD,KAAK6qD,SAAWA,EAGhB7qD,KAAKyJ,GAAKA,EAGVzJ,KAAKsY,SA5DsCuxG,EA4DbqC,EAAW/9D,UA5DUg+D,EA4DCthE,EAASphD,GA5DE2iH,EA4DEC,EA3D1D,SAAUh6H,GACf,IAAIw4D,EAAWg/D,EAAO79D,OAAOmC,UAAUg+D,GACnCI,EAAex+D,GAAelD,GAC9B2hE,EAAmBx+D,GAAUnD,GAEjC,MAAsB,qBAAXx4D,EACFm6H,GAGLn6H,SACKw4D,EAAS7pD,SAEhB6pD,EAAS7pD,UAAW,EAGlB3O,IAAWm6H,GAAqBD,IAElCH,IAEI/5H,EACFw3H,EAAO/lH,QAAQ,oBAEf+lH,EAAO/lH,QAAQ,sBAIZzR,MAwEPo6H,GAAoB,CAAC,UAAW,SAAU,QAAS,UAAW,SAK9DC,GAA+B,WAOjC,SAASA,EAAgBnuH,GACvB,IAAI4G,EAAQnF,KAEZA,KAAKmhG,0BAA4B5iG,EAAQghG,yBACzCv/F,KAAK4d,MAAQrf,EAAQyU,KACrBhT,KAAKsoB,SAAW/pB,EAAQ+pB,SACxBtoB,KAAK2sH,iCAAmCpuH,EAAQouH,iCAChD3sH,KAAK4sH,uBAAyBruH,EAAQquH,uBACtC5sH,KAAK69C,MAAQt/C,EAAQs/C,MACrB79C,KAAK6sH,mBAAqB,EAC1B7sH,KAAK8sH,iBAAmB,KACxB9sH,KAAK+sH,OAAS,KACd/sH,KAAKgtH,yBAA2B,KAChChtH,KAAK4yD,QAAU/I,GAAO,mBACtB7pD,KAAK4yD,QAAQ,cAEb,IAAIq6D,EAAc,WAChB,OAAO9nH,EAAM+nH,uBAGXC,EAAiB,WACnB,OAAOhoH,EAAM+nH,uBAGXE,EAAiB,WACnB,OAAOjoH,EAAMkoH,gBAGXC,EAAqB,WACvB,OAAOnoH,EAAMooH,gBAGXvJ,EAAMhkH,KAAKmhG,0BACXqsB,EAAc,CAAC,OAAQ,WAAY,SACnCC,EAAe,GACnBD,EAAYt6H,SAAQ,SAAUlE,GAC5By+H,EAAaz+H,GAAQ,CACnBm0B,MAAO,WACL,OAAOhe,EAAMuoH,uBAAuB1+H,IAEtC2+H,UAAW,WACT,OAAOxoH,EAAMyoH,uBAAuB5+H,KAGxCg1H,EAAIh1H,EAAO,kBAAkBiU,GAAG,cAAewqH,EAAaz+H,GAAM2+H,WAIlE3J,EAAIh1H,EAAO,kBAAkBiU,GAAG,iBAAkBwqH,EAAaz+H,GAAMm0B,OAKrEhe,EAAMyY,MAAM3a,GAAG,CAAC,SAAU,WAAYwqH,EAAaz+H,GAAMm0B,UAW3D,IAAI0qG,EAAqB,SAA4B5+H,GACnD,CAAC,OAAQ,SAASiE,SAAQ,SAAUlE,GAClCg1H,EAAIh1H,EAAO,kBAAkBC,GAAI,WAAYkW,EAAM2oH,yBAIvD9tH,KAAK8tH,oBAAsB,WACrB3oH,EAAM4oH,mBACR5oH,EAAM0nH,mBAAqB,EAC3B1nH,EAAM2nH,iBAAmB3nH,EAAMyY,MAAMoB,cACrC6uG,EAAmB,SAIvB7tH,KAAKguH,yBAA2B,WAC9B,OAAOH,EAAmB,QAG5B7tH,KAAKiuH,oBAAsB,WACzB9oH,EAAM6oH,2BAENH,EAAmB,OAGrB7tH,KAAK4d,MAAM3a,GAAG,SAAUjD,KAAKguH,0BAC7BhuH,KAAK4d,MAAM3a,GAAG,UAAWjD,KAAKiuH,qBAC9BjuH,KAAK4d,MAAM3a,GAAG,UAAWmqH,GACzBptH,KAAK4d,MAAM3a,GAAGwpH,GAAmBa,GACjCttH,KAAK4d,MAAM3a,GAAG,UAAWkqH,GAYzBntH,KAAK4d,MAAMzZ,IAAI,OAAQ8oH,GAEvBjtH,KAAKsK,QAAU,WACbnF,EAAM6oH,2BAEN7oH,EAAMytD,QAAQ,WAEdztD,EAAMyY,MAAMnsB,IAAI,UAAW27H,GAE3BjoH,EAAMyY,MAAMnsB,IAAIg7H,GAAmBa,GAEnCnoH,EAAMyY,MAAMnsB,IAAI,UAAW07H,GAE3BhoH,EAAMyY,MAAMnsB,IAAI,OAAQw7H,GAExB9nH,EAAMyY,MAAMnsB,IAAI,UAAW0T,EAAM8oH,qBAEjC9oH,EAAMyY,MAAMnsB,IAAI,SAAU0T,EAAM6oH,0BAEhCR,EAAYt6H,SAAQ,SAAUlE,GAC5Bg1H,EAAIh1H,EAAO,kBAAkByC,IAAI,cAAeg8H,EAAaz+H,GAAM2+H,WACnE3J,EAAIh1H,EAAO,kBAAkByC,IAAI,iBAAkBg8H,EAAaz+H,GAAMm0B,OAEtEhe,EAAMyY,MAAMnsB,IAAI,CAAC,SAAU,WAAYg8H,EAAaz+H,GAAMm0B,UAGxDhe,EAAM6nH,0BACR,IAAS1nH,aAAaH,EAAM6nH,0BAG9B7nH,EAAMooH,gBAUV,IAAIltH,EAASqsH,EAAgB/9H,UAue7B,OAreA0R,EAAO6sH,oBAAsB,WAC3BltH,KAAKkuH,oBAEDluH,KAAKgtH,0BACP,IAAS1nH,aAAatF,KAAKgtH,0BAI7BhtH,KAAKgtH,yBAA2B,IAAS9tH,WAAWc,KAAKktH,oBAAoBzoH,KAAKzE,MAAO,MAc3FK,EAAOqtH,uBAAyB,SAAgC1+H,GAC9D,IAAI66H,EAAS7pH,KAAKmhG,0BAA0BnyG,EAAO,kBAE/CgR,KAAKhR,EAAO,qBAAuB,GACrCgR,KAAK4yD,QAAQ,iDAAmD5jE,EAAO,WAGzEgR,KAAKhR,EAAO,qBAAuB,EACnCgR,KAAKhR,EAAO,aAAe66H,EAAOrgB,aAcpCnpG,EAAOutH,uBAAyB,SAAgC5+H,GAC9D,IAAIg1H,EAAMhkH,KAAKmhG,0BACX0oB,EAAS7F,EAAIh1H,EAAO,kBACpB6iB,EAAWg4G,EAAOrgB,YAClB2kB,EAzwvBe,SAA0BzyG,EAAG8lC,GAElD,GAAI9lC,IAAM8lC,EACR,OAAO,EAIT,IAAK9lC,GAAK8lC,IAAMA,GAAK9lC,EACnB,OAAO,EAIT,GAAIA,EAAE7rB,SAAW2xD,EAAE3xD,OACjB,OAAO,EAIT,IAAK,IAAID,EAAI,EAAGA,EAAI8rB,EAAE7rB,OAAQD,IAC5B,GAAI8rB,EAAEjK,MAAM7hB,KAAO4xD,EAAE/vC,MAAM7hB,IAAM8rB,EAAEhK,IAAI9hB,KAAO4xD,EAAE9vC,IAAI9hB,GAClD,OAAO,EAMX,OAAO,EAgvvBqBw+H,CAAiBpuH,KAAKhR,EAAO,aAAc6iB,GACrE7R,KAAKhR,EAAO,aAAe6iB,EAIvBs8G,EACFnuH,KAAK0tH,uBAAuB1+H,IAI9BgR,KAAKhR,EAAO,uBACZgR,KAAK4yD,QAAQ,UAAY5yD,KAAKhR,EAAO,qBAAuB,IAAMA,EAAO,oEAAqE,CAC5Iq/H,WAAYxE,EAAO5f,WAAa4f,EAAO5f,UAAUxgG,GACjDoI,SAAU24C,GAAkB34C,KAG1B7R,KAAKhR,EAAO,qBAAuB,KAIvCgR,KAAK4yD,QAAQ5jE,EAAO,sCACpBgR,KAAK0tH,uBAAuB1+H,GAC5BgR,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,OAASlB,EAAO,wBAGX,aAATA,GAMJg1H,EAAIpC,yBAAyB,CAC3B3vG,QAAS,aAAejjB,EAAO,kCAC9BsjC,QAWLjyB,EAAO6tH,kBAAoB,WACzB,IAAIluH,KAAK4d,MAAM5I,WAAYhV,KAAK4d,MAAM47B,UAAtC,CAIA,IAAIx6B,EAAchf,KAAK4d,MAAMoB,cACzBnN,EAAW7R,KAAK4d,MAAM/L,WAE1B,GAAI7R,KAAK8sH,mBAAqB9tG,KAAiBnN,EAAShiB,QAAUmvB,EAAc+qC,IAAmBl4C,EAASH,IAAIG,EAAShiB,OAAS,IAMhI,OAAOmQ,KAAKqtH,eAGVrtH,KAAK6sH,oBAAsB,GAAK7tG,IAAgBhf,KAAK8sH,kBACvD9sH,KAAK6sH,qBACL7sH,KAAKsuH,YACItvG,IAAgBhf,KAAK8sH,iBAC9B9sH,KAAK6sH,sBAEL7sH,KAAK6sH,mBAAqB,EAC1B7sH,KAAK8sH,iBAAmB9tG,KAW5B3e,EAAOktH,aAAe,WACpBvtH,KAAK6sH,mBAAqB,EAEtB7sH,KAAK+sH,SACP/sH,KAAK4yD,QAAQ,gBACbttD,aAAatF,KAAK+sH,SAGpB/sH,KAAK+sH,OAAS,MAUhB1sH,EAAO0tH,eAAiB,WAGtB,IAFc/tH,KAAK4d,MAAM47B,UAGvB,OAAO,EAOT,IAGIkhB,EAHApyC,EAAWtoB,KAAKsoB,WAChBtJ,EAAchf,KAAK4d,MAAMoB,cACFhf,KAAKuuH,qBAAqBjmG,EAAUtJ,EAAahf,KAAK69C,QAAS79C,KAAK2sH,oCAM7FjyD,EAFkBpyC,EAAS5W,IAAI4W,EAASz4B,OAAS,IAKnD,GAAImQ,KAAKwuH,sBAAsBlmG,EAAUtJ,GAAc,CACrD,IAAI2Z,EAAgBrQ,EAAS7W,MAAM,GAGnCipD,EAAS/hC,GAETA,IAAkBrQ,EAAS5W,IAAI,GAAK,EAAIq4C,IAG1C,GAAsB,qBAAX2Q,EAGT,OAFA16D,KAAK4yD,QAAQ,8CAAgD5zC,EAAhD,wBAA8FqrC,GAAe/hC,GAAY,gBAAoBoyC,EAAS,KACnK16D,KAAK4d,MAAM6F,eAAei3C,IACnB,EAeT,IAZA,IAAIirC,EAAgB3lG,KAAKmhG,0BAA0BuE,eAC/C7zF,EAAW7R,KAAK4d,MAAM/L,WACtB83F,EAAgBhE,EAAcgS,YAAchS,EAAcgE,gBAAkB,KAC5ED,EAAgB/D,EAAc8R,YAAc9R,EAAc+D,gBAAkB,KAC5E7rD,EAAQ79C,KAAK69C,QAGb4wE,EAAsB5wE,EAAMoN,mBAAqBpN,EAAMoN,mBAAkE,GAA5CpN,EAAM0O,eAAiBzC,IAGpG4kE,EAAkB,CAAC/kB,EAAeD,GAE7B95G,EAAI,EAAGA,EAAI8+H,EAAgB7+H,OAAQD,IAAK,CAE/C,GAAK8+H,EAAgB9+H,GAOrB,GAHgB+6D,GAAY+jE,EAAgB9+H,GAAIovB,GAGhCyvG,EACd,OAAO,EAIX,IAAIE,EAAYvkE,GAAcv4C,EAAUmN,GAGxC,OAAyB,IAArB2vG,EAAU9+H,SAId6qE,EAASi0D,EAAUl9G,MAAM,GAAKs4C,GAC9B/pD,KAAK4yD,QAAQ,2BAA6B+7D,EAAUl9G,MAAM,GAA7C,8BAAwFuN,EAAc,iBAAmB07C,EAAS,KAC/I16D,KAAK4d,MAAM6F,eAAei3C,IACnB,IASTr6D,EAAOiuH,SAAW,WAChB,IAAItuH,KAAKqtH,eAAT,CAKA,IAAIruG,EAAchf,KAAK4d,MAAMoB,cACzBnN,EAAW7R,KAAK4d,MAAM/L,WACtB+8G,EAAezkE,GAAUt4C,EAAUmN,GASvC,OAAI4vG,EAAa/+H,QAAUmvB,EAAc,GAAK4vG,EAAal9G,IAAI,IAC7D1R,KAAKutH,eACLvtH,KAAK4d,MAAM6F,eAAezE,GAC1Bhf,KAAK4yD,QAAQ,cAAgB5zC,EAAhB,oCAA0E4vG,EAAan9G,MAAM,GAAK,OAASm9G,EAAal9G,IAAI,GAA5H,oEAEb1R,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,6BAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,8BAXV,IA0BFmQ,EAAOgtH,aAAe,WACpB,IAAI/kG,EAAWtoB,KAAKsoB,WAChBtJ,EAAchf,KAAK4d,MAAMoB,cAE7B,GAAIhf,KAAK4d,MAAM47B,WAA6B,OAAhBx5C,KAAK+sH,OAE/B,OAAO,EAGT,GAAI/sH,KAAKwuH,sBAAsBlmG,EAAUtJ,GAAc,CACrD,IAAI6vG,EAAYvmG,EAAS5W,IAAI4W,EAASz4B,OAAS,GAa/C,OAZAmQ,KAAK4yD,QAAQ,mCAAqC5zC,EAArC,0CAAqG6vG,GAClH7uH,KAAKutH,eACLvtH,KAAK4d,MAAM6F,eAAeorG,GAE1B7uH,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,oBAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,qBAED,EAGT,IAAIy1G,EAAgB3lG,KAAK4d,MAAM+0C,IAAIwuC,0BAA0BuE,eACzD7zF,EAAW7R,KAAK4d,MAAM/L,WAO1B,GANqB7R,KAAK8uH,gBAAgB,CACxCnlB,cAAehE,EAAcgE,gBAC7BD,cAAe/D,EAAc+D,gBAC7B1qF,YAAaA,IAmBb,OAXAhf,KAAKutH,eACLvtH,KAAK4d,MAAM6F,eAAezE,GAE1Bhf,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,wBAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,yBAED,EAGT,IAAIy+H,EAAYvkE,GAAcv4C,EAAUmN,GAExC,GAAI2vG,EAAU9+H,OAAS,EAAG,CACxB,IAAIk/H,EAAaJ,EAAUl9G,MAAM,GAAKuN,EAItC,OAHAhf,KAAK4yD,QAAQ,cAAgB5zC,EAAc,uBAAyB+vG,EAAvD,gBAA4FJ,EAAUl9G,MAAM,IACzHzR,KAAKutH,eACLvtH,KAAK+sH,OAAS7tH,WAAWc,KAAKgvH,YAAYvqH,KAAKzE,MAAoB,IAAb+uH,EAAmB/vG,IAClE,EAIT,OAAO,GAGT3e,EAAOkuH,qBAAuB,SAA8BjmG,EAAUtJ,EAAa6rC,EAAU8hE,GAK3F,QAJyC,IAArCA,IACFA,GAAmC,IAGhCrkG,EAASz4B,OAEZ,OAAO,EAGT,IAAIo/H,EAAa3mG,EAAS5W,IAAI4W,EAASz4B,OAAS,GAAKk6D,GAOrD,OANcc,EAASoB,SAET0gE,IACZsC,EAAa3mG,EAAS5W,IAAI4W,EAASz4B,OAAS,GAA+B,EAA1Bg7D,EAAS0B,gBAGxDvtC,EAAciwG,GAOpB5uH,EAAOmuH,sBAAwB,SAA+BlmG,EAAUtJ,GACtE,SAAIsJ,EAASz4B,QACby4B,EAAS7W,MAAM,GAAK,GAAKuN,EAAcsJ,EAAS7W,MAAM,GAAKzR,KAAK4sH,yBAOlEvsH,EAAOyuH,gBAAkB,SAAyB1+G,GAChD,IAAIs5F,EAAgBt5F,EAAKs5F,cACrBC,EAAgBv5F,EAAKu5F,cACrB3qF,EAAc5O,EAAK4O,YAEvB,GAAK0qF,EAAL,CAIA,IAAIwlB,EAEJ,GAAIxlB,EAAc75G,QAAU85G,EAAc95G,OAAQ,CAIhD,IAAIs/H,EAAiBhlE,GAAUu/C,EAAe1qF,EAAc,GACxDowG,EAAajlE,GAAUu/C,EAAe1qF,GACtCqwG,EAAallE,GAAUw/C,EAAe3qF,GAEtCqwG,EAAWx/H,SAAWu/H,EAAWv/H,QAAUs/H,EAAet/H,SAC5Dq/H,EAAM,CACJz9G,MAAO09G,EAAez9G,IAAI,GAC1BA,IAAK29G,EAAW39G,IAAI,SAInB,CACW04C,GAAcs/C,EAAe1qF,GAG9BnvB,SACbq/H,EAAMlvH,KAAKsvH,uBAAuB5lB,EAAe1qF,IAIrD,QAAIkwG,IACFlvH,KAAK4yD,QAAQ,mCAAqCs8D,EAAIz9G,MAAQ,OAASy9G,EAAIx9G,IAA9D,6BAAyGsN,IAC/G,KAaX3e,EAAO2uH,YAAc,SAAqBO,GACxC,IAAI19G,EAAW7R,KAAK4d,MAAM/L,WACtBmN,EAAchf,KAAK4d,MAAMoB,cACzB2vG,EAAYvkE,GAAcv4C,EAAUmN,GACxChf,KAAKutH,eAEoB,IAArBoB,EAAU9+H,QAAgBmvB,IAAgBuwG,IAI9CvvH,KAAK4yD,QAAQ,eAAgB,eAAgB5zC,EAAa,yBAA0BuwG,EAAsB,mBAAoBZ,EAAUl9G,MAAM,IAE9IzR,KAAK4d,MAAM6F,eAAekrG,EAAUl9G,MAAM,GAAKq4C,IAC/C9pD,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,iBAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,mBAIVmQ,EAAOivH,uBAAyB,SAAgCz9G,EAAUmN,GAyBxE,IAFA,IAAIwwG,EA51wBO,SAAkB39G,GAC/B,GAAIA,EAAShiB,OAAS,EACpB,OAAOm2B,GAAQrU,mBAKjB,IAFA,IAAIR,EAAS,GAEJvhB,EAAI,EAAGA,EAAIiiB,EAAShiB,OAAQD,IAAK,CACxC,IAAI6hB,EAAQI,EAASH,IAAI9hB,EAAI,GACzB8hB,EAAMG,EAASJ,MAAM7hB,GACzBuhB,EAAOngB,KAAK,CAACygB,EAAOC,IAGtB,OAAOsU,GAAQrU,iBAAiBR,GA+0wBnBs+G,CAAS59G,GAEXjiB,EAAI,EAAGA,EAAI4/H,EAAK3/H,OAAQD,IAAK,CACpC,IAAI6hB,EAAQ+9G,EAAK/9G,MAAM7hB,GACnB8hB,EAAM89G,EAAK99G,IAAI9hB,GAEnB,GAAIovB,EAAcvN,EAAQ,GAAKuN,EAAcvN,EAAQ,EACnD,MAAO,CACLA,MAAOA,EACPC,IAAKA,GAKX,OAAO,MAGFg7G,EA9nB0B,GAioB/BgD,GAAiB,CACnBC,cAAe,GACfC,UAAW,SAAmBpoG,GAK5B,OAAOA,EAJIxnB,KAAKgT,KAAK,CACnB68G,0BAA0B,IAEP1oG,gBAAkBnnB,KAAK67C,mBAY5Ci0E,GAAa,SAASA,EAAW/wH,EAAQR,GAC3C,IAAIwxH,EAAa,EACbr1D,EAAS,EACTs1D,EAAehqG,GAAQ8iC,aAAa4mE,GAAgBnxH,GACxDQ,EAAOmK,OAAM,WACXnK,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,iCAER6O,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,oCAUV,IAAI+/H,EAAwB,WACtBv1D,GACF37D,EAAOigB,YAAY07C,IAWnBzzC,EAAY,SAAmBy0B,GACf,OAAdA,QAAoCxgD,IAAdwgD,IAI1Bgf,EAAS37D,EAAO+S,aAAewgB,KAAYvzB,EAAOigB,eAAiB,EACnEjgB,EAAOoF,IAAI,iBAAkB8rH,GAC7BlxH,EAAOsU,IAAIqoC,GACX38C,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,qBAER6O,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,qBAER6O,EAAOoK,SAUL+1C,EAAe,WAGjB,OAAIrxD,KAAKC,MAAQiiI,EAA0C,IAA7BC,EAAaL,eACzC5wH,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,mCAER6O,EAAO+E,QAAQ,CACb9U,KAAM,QACNkB,KAAM,+BAKL8/H,EAAaJ,WAA+C,oBAA3BI,EAAaJ,WAKnDG,EAAaliI,KAAKC,MACXkiI,EAAaJ,UAAUj8H,KAAKoL,EAAQkoB,SALzCjB,GAAQ31B,IAAIuB,MAAM,0EAclBs+H,EAAgB,SAASA,IAC3BnxH,EAAOtN,IAAI,iBAAkBw+H,GAC7BlxH,EAAOtN,IAAI,QAASytD,GACpBngD,EAAOtN,IAAI,UAAWy+H,IAexBnxH,EAAOkE,GAAG,QAASi8C,GACnBngD,EAAOkE,GAAG,UAAWitH,GAGrBnxH,EAAOoxH,oBATY,SAAsBz4D,GACvCw4D,IACAJ,EAAW/wH,EAAQ24D,KAqBnB04D,GAAY,SAKZ34D,GAAM,CACR/E,eAAgBA,GAChBzD,SAAUA,GACV+J,MAAOA,GACPq3D,2BAA4BvvB,GAC5BwvB,0BArkU2C,WAC3C,IAAInrH,EAAQnF,KAIRmuD,EAAYnuD,KAAKmuD,UAAUnC,OAAOmC,UAAUn8D,OAAOi9D,GAASjB,WAahE,OAXA2wC,GAAWxwC,GAAW,SAAUzyC,EAAG8lC,GACjC,OAAOu9C,GAAyBrjF,EAAG8lC,MAOZ2M,EAAUn8D,QAAO,SAAU64D,GAClD,QAASozC,GAAkB94F,EAAMgpD,UAAUnC,OAAQnB,GAAUtqC,SAErC,IAAM,MAojUhCugF,sBAAuBA,GACvByvB,+BAxsUmC,SAAwCC,GAC3E,IAAIC,GAAW,EACXC,GAAuB,EAE3B,GAAIF,EAAQ,GAAKA,EAAQ,EACvB,MAAM,IAAIz+H,MAAM,2DAGlB,OAAO,WACL,IAAIgvG,EAAa/gG,KAAKghG,qBAAsB,IAASC,kBAAwB,EAiB7E,OAfIwvB,EAAU,IACZA,EAAUzwH,KAAKkhG,gBACfwvB,EAAsB1wH,KAAKkhG,iBAQzBlhG,KAAKkhG,gBAAkB,GAAKlhG,KAAKkhG,kBAAoBwvB,IACvDD,EAAUD,EAAQxwH,KAAKkhG,iBAAmB,EAAIsvB,GAASC,EACvDC,EAAsB1wH,KAAKkhG,iBAGtBhC,GAAel/F,KAAKmuD,UAAUnC,OAAQykE,EAAS3iH,SAAS2wF,GAAqBz+F,KAAK4d,MAAM/pB,KAAM,SAAU,IAAMktG,EAAYjzF,SAAS2wF,GAAqBz+F,KAAK4d,MAAM/pB,KAAM,UAAW,IAAMktG,EAAY/gG,KAAKs/F,iCAAkCt/F,KAAKmhG,6BA+qU3PpC,yBAA0BA,GAC1B4xB,0BAv8U8B,SAAmCp1H,EAAM27B,GACvE,IAAI05F,EACAC,EAeJ,OAbIt1H,EAAK5D,WAAWgoG,YAAcpkG,EAAK5D,WAAWgoG,WAAWvkG,QAC3Dw1H,EAAYr1H,EAAK5D,WAAWgoG,WAAWvkG,OAGzCw1H,EAAYA,GAAa,IAASp0H,OAAO8xD,UAErCp3B,EAAMv/B,WAAWgoG,YAAczoE,EAAMv/B,WAAWgoG,WAAWvkG,QAC7Dy1H,EAAa35F,EAAMv/B,WAAWgoG,WAAWvkG,OAMvCw1H,KAHJC,EAAaA,GAAc,IAASr0H,OAAO8xD,YAGX/yD,EAAK5D,WAAW02D,WAAan3B,EAAMv/B,WAAW02D,UACrE9yD,EAAK5D,WAAW02D,UAAYn3B,EAAMv/B,WAAW02D,UAG/CuiE,EAAYC,GAm7UnBvnE,IAAKgO,MAGPzkE,OAAOC,KAAK8tE,IAAQ1tE,SAAQ,SAAUY,GACpCjB,OAAO2Q,eAAei0D,GAAK3jE,EAAM,CAC/B0M,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,aAAemC,EAAO,kDAChC8sE,GAAO9sE,IAEhBwM,IAAK,SAAa7M,GAChBuyB,GAAQ31B,IAAIsB,KAAK,aAAemC,EAAO,kDAElB,kBAAVL,GAAsBA,EAAQ,EACvCuyB,GAAQ31B,IAAIsB,KAAK,gBAAkBmC,EAAO,uCAI5C8sE,GAAO9sE,GAAQL,QAIrB,IAAIq9H,GAAoB,cASpBC,GAAuB,SAA8BC,EAAevP,GAItE,IAHA,IAAIrX,EAAcqX,EAAe5jE,QAC7BpX,GAAiB,EAEZ72C,EAAI,EAAGA,EAAIohI,EAAcnhI,OAAQD,IACxC,GAAIohI,EAAcphI,GAAG6Z,KAAO2gG,EAAY3gG,GAAI,CAC1Cg9B,EAAgB72C,EAChB,MAIJohI,EAAcC,eAAiBxqF,EAC/BuqF,EAAcltH,QAAQ,CACpB2iC,cAAeA,EACfz3C,KAAM,YAqBVyoE,GAAI/xC,cAAgB,WAClB,OAAOM,GAAQ31B,IAAIsB,KAAK,4EAG1B,IA8HIu/H,GAA4B,SAAmC9gH,GACjE,IAAIrR,EAASqR,EAAKrR,OACdoyH,EAAmB/gH,EAAK+gH,iBACxBC,EAAahhH,EAAKghH,WAClBC,EAAgBjhH,EAAKihH,cAEzB,IAAKtyH,EAAOkuB,IAAIqkG,oBACd,OAAOtsG,QAAQg5B,UAWjB,IACIuzE,EAtE4B,SAAqCpjE,EAAWqjE,GAChF,OAAOrjE,EAAUziD,QAAO,SAAU+lH,EAAe5mE,GAC/C,IAAKA,EAAS6mE,kBACZ,OAAOD,EAGT,IAAIE,EAAoBH,EAAW9lH,QAAO,SAAUkmH,EAAeC,GACjE,IAAIC,EAAmBjnE,EAAS6mE,kBAAkBG,GAQlD,OANIC,GAAoBA,EAAiBC,OACvCH,EAAcC,GAAa,CACzBE,KAAMD,EAAiBC,OAIpBH,IACN,IAMH,OAJI/+H,OAAOC,KAAK6+H,GAAmB9hI,QACjC4hI,EAAczgI,KAAK2gI,GAGdF,IACN,IA+CwBO,CADXZ,EAAaC,EAAcniI,OAAO,CAACkiI,IAAeC,EACAx+H,OAAOC,KAAKq+H,IAC1Ec,EAAiC,GACjCC,EAA4B,GA6BhC,OAvBAX,EAAqBr+H,SAAQ,SAAUy+H,GACrCO,EAA0BlhI,KAAK,IAAIg0B,SAAQ,SAAUg5B,EAAS/4B,GAC5DlmB,EAAO6e,MAAMzZ,IAAI,oBAAqB65C,OAExCi0E,EAA+BjhI,KAAK,IAAIg0B,SAAQ,SAAUg5B,EAAS/4B,GACjElmB,EAAOkuB,IAAIqkG,oBAAoB,CAC7BE,WAAYG,IACX,SAAU9zG,GACPA,EACFoH,EAAOpH,GAITmgC,cAUCh5B,QAAQmtG,KAAK,CAGpBntG,QAAQxzB,IAAIygI,GACZjtG,QAAQmtG,KAAKD,MAqBXE,GAAkB,SAAyB9wE,GAC7C,IAAIviD,EAASuiD,EAAMviD,OAIfszH,EA9Mc,SAAuBP,EAAkBQ,EAAcC,GACzE,IAAKT,EACH,OAAOA,EAGT,IAAIh0B,EAAS,GAETw0B,GAAgBA,EAAa36H,YAAc26H,EAAa36H,WAAWo3D,SACrE+uC,EAASF,GAAgB,YAAY00B,EAAa36H,WAAWo3D,UAG3DwjE,GAAiBA,EAAc56H,YAAc46H,EAAc56H,WAAWo3D,SACxE+uC,EAAO39E,MAAQoyG,EAAc56H,WAAWo3D,QAG1C,IAAIyjE,EAAmB,YAAgB10B,EAAOv9E,OAC1CkyG,EAAmB,YAAgB30B,EAAO39E,OAE1CuyG,EAAwB,GAE5B,IAAK,IAAIb,KAAaC,EACpBY,EAAsBb,GAAa,GAE/BY,IACFC,EAAsBb,GAAWY,iBAAmBA,GAGlDD,IACFE,EAAsBb,GAAWW,iBAAmBA,GASlDF,EAAaZ,mBAAqBY,EAAaZ,kBAAkBG,IAAcS,EAAaZ,kBAAkBG,GAAWE,OAC3HW,EAAsBb,GAAWE,KAAOO,EAAaZ,kBAAkBG,GAAWE,MAKzC,kBAAhCD,EAAiBD,KAC1Ba,EAAsBb,GAAWr2G,IAAMs2G,EAAiBD,IAI5D,OAAO7rG,GAAQ8iC,aAAagpE,EAAkBY,GA8J1BC,CAHGrxE,EAAM6vE,iBACjB7vE,EAAMzD,MACDyD,EAAM8vE,YAGvB,QAAKiB,IAILtzH,EAAO88C,gBAAgB21E,WAAaa,IAGhCA,IAAkBtzH,EAAOkuB,OAC3BjH,GAAQ31B,IAAIsB,KAAK,kEACV,KAMPihI,GAAqB,WACvB,IAAK,IAAS/rF,aACZ,OAAO,KAGT,IAAIgsF,EAAe,IAAShsF,aAAaC,QAAQgqF,IAEjD,IAAK+B,EACH,OAAO,KAGT,IACE,OAAOjsF,KAAKzpB,MAAM01G,GAClB,MAAO5+H,GAEP,OAAO,OAmDXwjE,GAAIq7D,kBAAoB,WACtB,IAAK,MAAa,IAASj7H,cACzB,OAAO,EAGT,IAAI0oB,EAAQ,IAAS1oB,cAAc,SAEnC,IAAKmuB,GAAQD,QAAQ,SAASuF,cAC5B,OAAO,EAUT,MANc,CACd,gCACA,gBACA,kBACA,wBACA,kBAAmB,gBAAiB,uBACrB5e,MAAK,SAAUqmH,GAC5B,MAAO,kBAAkB5hI,KAAKovB,EAAMkF,YAAYstG,OAnB5B,GAuBxBt7D,GAAIu7D,sBACG,KAAa,IAASn7H,eAAkBmuB,GAAQD,QAAQ,SAASuF,gBAI/D,kBAAkBn6B,KAAK,IAAS0G,cAAc,SAAS4tB,YAAY,yBAG5EgyC,GAAIw7D,qBAAuB,SAAUjkI,GACnC,MAAa,QAATA,EACKyoE,GAAIq7D,kBAGA,SAAT9jI,GACKyoE,GAAIu7D,oBAWfv7D,GAAInsC,YAAc,WAChB,OAAOtF,GAAQ31B,IAAIsB,KAAK,4EAG1B,IAYIuhI,GAA0B,SAAUv/G,GAGtC,SAASu/G,EAAW1/H,EAAQwf,EAAMzU,GAChC,IAAI4G,EAiBJ,GAfAA,EAAQwO,EAAWhgB,KAAKqM,KAAMgT,EAAMgT,GAAQ8iC,aAAavqD,EAAQ40H,IAAK50H,EAAQo0D,OAAS3yD,KAEnFzB,EAAQ40H,KAAOtgI,OAAOC,KAAKyL,EAAQ40H,KAAKtjI,QAC1Cm2B,GAAQ31B,IAAIsB,KAAK,qDAKqB,kBAA7B4M,EAAQ60H,mBACjBjuH,EAAMoE,SAAS0mD,UAAY1xD,EAAQ60H,kBAGrCjuH,EAAMytD,QAAU/I,GAAO,cAGnB72C,EAAKzJ,UAAYyJ,EAAKzJ,SAASimC,SAAU,CAC3C,IAAI2Y,EAAUniC,GAAQhT,EAAKzJ,SAASimC,UAE/B2Y,EAAQr2D,eAAe,QAC1Be,OAAO2Q,eAAe2kD,EAAS,MAAO,CACpC3nD,IAAK,WAMH,OALAwlB,GAAQ31B,IAAIsB,KAAK,4DACjBqhB,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,sBAED,IAAuBiV,IAEhC2mC,cAAc,IAIbqc,EAAQr2D,eAAe,QAC1Be,OAAO2Q,eAAe2kD,EAAS,MAAO,CACpC3nD,IAAK,WAMH,OALAwlB,GAAQ31B,IAAIsB,KAAK,4DACjBqhB,EAAKlP,QAAQ,CACX9U,KAAM,QACNkB,KAAM,sBAED,IAAuBiV,IAEhC2mC,cAAc,IAIbqc,EAAQr2D,eAAe,SAC1Be,OAAO2Q,eAAe2kD,EAAS,OAAQ,CACrC3nD,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,6DACV,IAAuBwT,IAEhC2mC,cAAc,IAIlB3mC,EAAMiE,QAAU++C,EAUlB,GAPAhjD,EAAMyY,MAAQ5K,EACd7N,EAAMkuH,QAAU7/H,EAChB2R,EAAMg0F,MAAQ,GACdh0F,EAAMmuH,yBAA0B,EAEhCnuH,EAAMouH,cAEFpuH,EAAMoE,SAASiqH,gBAAkBxgH,EAAKuS,2BAA6BvS,EAAKwS,0BAC1ExS,EAAKuS,2BAA0B,GAC/BvS,EAAKwS,2BAA0B,QAC1B,GAAIrgB,EAAMoE,SAASiqH,iBAAmBxgH,EAAKygH,2BAA6BzgH,EAAK8vB,2BAGlF,MAAM,IAAI/wC,MAAM,4EAqClB,OAhCAoT,EAAMlC,GAAG,IAAU,CAAC,mBAAoB,yBAA0B,sBAAuB,uBAAuB,SAAUlH,GACxH,IAAIJ,EAAoB,IAASA,mBAAqB,IAAS+3H,yBAA2B,IAASC,sBAAwB,IAASC,oBAEhIj4H,GAAqBA,EAAkB3C,SAASmM,EAAMyY,MAAM/pB,MAC9DsR,EAAMg8F,0BAA0B+iB,qBAKhC/+G,EAAMg8F,0BAA0BqlB,eAIpCrhH,EAAMlC,GAAGkC,EAAMyY,MAAO,WAAW,WAC3B5d,KAAKszH,wBACPtzH,KAAKszH,yBAA0B,EAIjCtzH,KAAKyjB,eAAezjB,KAAK4d,MAAMoB,kBAGjC7Z,EAAMlC,GAAGkC,EAAMyY,MAAO,SAAS,WAGzB5d,KAAK4d,MAAMhsB,SAAWoO,KAAKmhG,2BAC7BnhG,KAAKmhG,0BAA0BgkB,kBAInChgH,EAAMlC,GAAGkC,EAAMyY,MAAO,OAAQzY,EAAMgE,MAE7BhE,EAlHT,IAAe+tH,EAAYv/G,GAqH3B,IAAItT,EAAS6yH,EAAWvkI,UAioBxB,OA/nBA0R,EAAOkzH,YAAc,WACnB,IAAI3sH,EAAS5G,KAkBb,GAfAA,KAAKuJ,SAASoU,gBAAkB3d,KAAKuJ,SAASoU,kBAAmB,EACjE3d,KAAKuJ,SAASypD,yBAAoE,IAA1ChzD,KAAKuJ,SAASypD,wBACtDhzD,KAAKuJ,SAAS+1F,kCAAsF,IAAnDt/F,KAAKuJ,SAAS+1F,iCAC/Dt/F,KAAKuJ,SAASy3F,oBAAsBhhG,KAAKuJ,SAASy3F,sBAAuB,EACzEhhG,KAAKuJ,SAAS+iH,oBAAsBtsH,KAAKuJ,SAAS+iH,sBAAuB,EACzEtsH,KAAKuJ,SAASsqH,6BAAoF,qBAA9C7zH,KAAKqzH,QAAQQ,6BAA+C7zH,KAAKqzH,QAAQQ,6BAA+B7zH,KAAKuJ,SAASsqH,+BAAgC,EAC1M7zH,KAAKuJ,SAASuqH,yBAA2B9zH,KAAKuJ,SAASuqH,2BAA4B,EACnF9zH,KAAKuJ,SAAS4pD,iBAAmBnzD,KAAKuJ,SAAS4pD,kBAAoB,GACnEnzD,KAAKuJ,SAAS6pD,iBAAmBpzD,KAAKuJ,SAAS6pD,kBAAoB,GACnEpzD,KAAKuJ,SAAS89F,oBAAsBrnG,KAAKuJ,SAAS89F,sBAAuB,EAE1B,kBAApCrnG,KAAKuJ,SAAS20D,oBACvBl+D,KAAKuJ,SAAS20D,kBAAoB,KAGG,kBAA5Bl+D,KAAKuJ,SAAS0mD,WACnBjwD,KAAKuJ,SAASsqH,6BAA8B,CAC9C,IAAIhB,EAAeD,KAEfC,GAAgBA,EAAa5iE,YAC/BjwD,KAAKuJ,SAAS0mD,UAAY4iE,EAAa5iE,UACvCjwD,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,qCAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,sCAIN2iI,GAAgBA,EAAanuB,aAC/B1kG,KAAKuJ,SAASm7F,WAAamuB,EAAanuB,WACxC1kG,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,sCAER8P,KAAK4d,MAAM9Z,QAAQ,CACjB9U,KAAM,QACNkB,KAAM,uCAQyB,kBAA5B8P,KAAKuJ,SAAS0mD,YACvBjwD,KAAKuJ,SAAS0mD,UAAY2Q,GAAOK,mBAKnCjhE,KAAKuJ,SAASs7G,yBAA2B7kH,KAAKuJ,SAASs7G,0BAA4B7kH,KAAKuJ,SAAS0mD,YAAc2Q,GAAOK,kBAEtH,CAAC,kBAAmB,sBAAuB,mCAAoC,YAAa,sBAAuB,mBAAoB,mBAAoB,0BAA2B,sBAAuB,mBAAoB,0BAA2B,6BAA8B,yBAA0B,oBAAqB,2BAA4B,mCAAoC,sCAAsC/tE,SAAQ,SAAU6gI,GACzZ,qBAA3BntH,EAAOysH,QAAQU,KACxBntH,EAAO2C,SAASwqH,GAAUntH,EAAOysH,QAAQU,OAG7C/zH,KAAKs/F,iCAAmCt/F,KAAKuJ,SAAS+1F,iCACtDt/F,KAAKghG,oBAAsBhhG,KAAKuJ,SAASy3F,qBAS3C3gG,EAAOgT,IAAM,SAAagW,EAAMr6B,GAC9B,IAAIgY,EAAShH,KAGb,GAAKqpB,EAAL,CAnRgB,IAAuB2qG,EAuRvCh0H,KAAKuzH,cAELvzH,KAAKuJ,SAAS8J,IAxRgE,KADvC2gH,EAyRLh0H,KAAKqzH,QAAQhgH,KAxRrCjX,cAAc/M,QAAQ,0CACzBu3C,KAAKzpB,MAAM62G,EAAQhhF,UAAUghF,EAAQ3kI,QAAQ,KAAO,IAItD2kI,EAoRLh0H,KAAKuJ,SAASyJ,KAAOhT,KAAK4d,MAC1B5d,KAAKuJ,SAASo7G,UAAYltD,GAC1Bz3D,KAAKuJ,SAASy6F,WAAa,YAAyBh1G,GAEpDgR,KAAKuJ,SAASmxD,OAAS,SAAU3nC,GAC/B/rB,EAAO4W,MAAM6F,eAAesP,IAG1B/yB,KAAKuJ,SAAS+iH,qBAChBtmG,GAAQ31B,IAAIsB,KAAK,mFAGnBqO,KAAKmhG,0BAA4B,IAAIujB,GAAyB1kH,KAAKuJ,UACnE,IAAI0qH,EAAyBjuG,GAAQ8iC,aAAa,CAChD8jE,uBAAwB7iE,IACvB/pD,KAAKuJ,SAAU,CAChB+e,SAAU,WACR,OAAOthB,EAAOshB,YAEhBu1B,MAAO,WACL,OAAO72C,EAAOm6F,0BAA0BtjD,SAE1C0hD,yBAA0Bv/F,KAAKmhG,4BAEjCnhG,KAAKk0H,iBAAmB,IAAIxH,GAAgBuH,GAC5Cj0H,KAAKmhG,0BAA0Bl+F,GAAG,SAAS,WACzC,IAAIlE,EAASinB,GAAQlV,QAAQ9J,EAAO4W,MAAMrU,SAASimC,UAC/C59C,EAAQoV,EAAOm6F,0BAA0BvvG,MAEtB,WAAnBtD,EAAQsD,IAAwBA,EAAMgZ,KAEd,kBAAVhZ,IAChBA,EAAQ,CACNqgB,QAASrgB,EACTgZ,KAAM,IAJRhZ,EAAMgZ,KAAO,EAQf7L,EAAOnN,MAAMA,MAEf,IAAIuiI,EAAkBn0H,KAAKuJ,SAASu7G,2BAA6BrtD,GAAI84D,+BAA+B,KAAQ94D,GAAI44D,2BAGhHrwH,KAAKmhG,0BAA0B8iB,eAAiBjkH,KAAKikH,eAAiBjkH,KAAKikH,eAAex/G,KAAKzE,MAAQm0H,EAAgB1vH,KAAKzE,MAC5HA,KAAKmhG,0BAA0BomB,sBAAwB9vD,GAAI64D,0BAA0B7rH,KAAKzE,MAE1FA,KAAKmuD,UAAYnuD,KAAKmhG,0BAA0B5kC,sBAChDv8D,KAAKykG,YAAczkG,KAAKmhG,0BAA0BsD,YAIlD5xG,OAAOgsB,iBAAiB7e,KAAM,CAC5BikH,eAAgB,CACdzjH,IAAK,WACH,OAAOR,KAAKmhG,0BAA0B8iB,gBAExC3jH,IAAK,SAAa2jH,GAChBjkH,KAAKmhG,0BAA0B8iB,eAAiBA,EAAex/G,KAAKzE,QAGxE0kG,WAAY,CACVlkG,IAAK,WACH,OAAOR,KAAKmhG,0BAA0BsjB,mBAAmB/f,WAAWzhE,MAEtE3iC,IAAK,SAAaokG,GAChB1kG,KAAKmhG,0BAA0BsjB,mBAAmB/f,WAAWzhE,KAAOyhE,EAGpE1kG,KAAKmhG,0BAA0BsjB,mBAAmB/f,WAAW74C,MAAQ,IAGzEoE,UAAW,CACTzvD,IAAK,WACH,IAAI4zH,EAAqBp0H,KAAKmhG,0BAA0BsjB,mBAAmBx0D,UACvEokE,EAAqB,IAAShgI,UAAUigI,YAAc,IAASjgI,UAAUkgI,eAAiB,IAASlgI,UAAUmgI,iBAC7GC,EAAyB,IAE7B,GAAIz0H,KAAKuJ,SAASuqH,0BAA4BO,EAAoB,CAGhE,IAAIK,EAAkE,IAA9BL,EAAmBM,SAAkB,IAK3EP,EADEM,GAAqCD,GAA0BL,GAAsBK,EAClEr3H,KAAKC,IAAI+2H,EAAoBM,GAE7BA,EAIzB,OAAON,GAET9zH,IAAK,SAAa2vD,GAChBjwD,KAAKmhG,0BAA0BsjB,mBAAmBx0D,UAAYA,EAI9DjwD,KAAKmhG,0BAA0BsjB,mBAAmB/f,WAAa,CAC7DzhE,KAAM,EACN4oB,MAAO,KAcbq1C,gBAAiB,CACf1gG,IAAK,WACH,IACIo0H,EADAC,EAAe,GAAK70H,KAAKiwD,WAAa,GAU1C,OANE2kE,EADE50H,KAAK0kG,WAAa,EACJ,EAAI1kG,KAAK0kG,WAET,EAGEtnG,KAAK8C,MAAM,GAAK20H,EAAeD,KAGrDt0H,IAAK,WACH0lB,GAAQ31B,IAAIuB,MAAM,mDAKpBoO,KAAKuJ,SAAS0mD,YAChBjwD,KAAKiwD,UAAYjwD,KAAKuJ,SAAS0mD,WAG7BjwD,KAAKuJ,SAASm7F,aAChB1kG,KAAK0kG,WAAa1kG,KAAKuJ,SAASm7F,YAGlC7xG,OAAOgsB,iBAAiB7e,KAAKm5F,MAAO,CAClClpC,UAAW,CACTzvD,IAAK,WACH,OAAOwG,EAAOipD,WAAa,GAE7BpkB,YAAY,GAEd28D,cAAe,CACbhoG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0B2zB,kBAAoB,GAE9DjpF,YAAY,GAEd48D,qBAAsB,CACpBjoG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0B4zB,yBAA2B,GAErElpF,YAAY,GAEd68D,sBAAuB,CACrBloG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0B6zB,0BAA4B,GAEtEnpF,YAAY,GAEd88D,qBAAsB,CACpBnoG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0B8zB,yBAA2B,GAErEppF,YAAY,GAEd+8D,sBAAuB,CACrBpoG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0B+zB,0BAA4B,GAEtErpF,YAAY,GAEd08D,sBAAuB,CACrB/nG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0Bg0B,0BAA4B,GAEtEtpF,YAAY,GAEdg9D,mBAAoB,CAClBroG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0BgoB,uBAAyB,GAEnEt9E,YAAY,GAEdi9D,aAAc,CACZtoG,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0Bi0B,iBAAmB,GAE7DvpF,YAAY,GAEdwpF,wBAAyB,CACvB70H,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0BilB,4BAA8B,GAExEv6E,YAAY,GAEdypF,yBAA0B,CACxB90H,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0BklB,6BAA+B,GAEzEx6E,YAAY,GAEd0pF,oBAAqB,CACnB/0H,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0BmlB,wBAA0B,GAEpEz6E,YAAY,GAEd2pF,iBAAkB,CAChBh1H,IAAK,WACH,OAAOwG,EAAOm6F,0BAA0BolB,qBAAuB,GAEjE16E,YAAY,GAEdh6B,SAAU,CACRrR,IAAK,WACH,OAAOgqD,GAAkBxjD,EAAO4W,MAAM/L,aAExCg6B,YAAY,GAEd7sB,YAAa,CACXxe,IAAK,WACH,OAAOwG,EAAO4W,MAAMoB,eAEtB6sB,YAAY,GAEdgQ,cAAe,CACbr7C,IAAK,WACH,OAAOwG,EAAO4W,MAAMuJ,gBAEtB0kB,YAAY,GAEd4pF,YAAa,CACXj1H,IAAK,WACH,OAAOwG,EAAO4W,MAAMlY,OAEtBmmC,YAAY,GAEd/5B,SAAU,CACRtR,IAAK,WACH,OAAOwG,EAAO4W,MAAM9L,YAEtB+5B,YAAY,GAEdmgB,OAAQ,CACNxrD,IAAK,WACH,OAAOwG,EAAOmnD,UAAUnC,QAE1BngB,YAAY,GAEd6pF,iBAAkB,CAChBl1H,IAAK,WACH,OAAOwG,EAAO4W,MAAMzP,qBAEtB09B,YAAY,GAEdvjB,SAAU,CACR9nB,IAAK,WACH,OAAOgqD,GAAkBxjD,EAAO4W,MAAM0K,aAExCujB,YAAY,GAEdygC,UAAW,CACT9rE,IAAK,WACH,OAAO3S,KAAKC,OAEd+9C,YAAY,GAEdoF,qBAAsB,CACpBzwC,IAAK,WACH,OAAOwG,EAAO4W,MAAMiH,2BAEtBgnB,YAAY,KAGhB7rC,KAAK4d,MAAMzZ,IAAI,UAAWnE,KAAKmhG,0BAA0BgmB,eAAe1iH,KAAKzE,KAAKmhG,4BAClFnhG,KAAK4d,MAAM3a,GAAG,mBAAmB,WAC3B+D,EAAOuC,SAASsqH,8BAxlBE,SAA+Bt1H,GACzD,IAAK,IAASsoC,aACZ,OAAO,EAGT,IAAI8uF,EAAgB/C,KACpB+C,EAAgBA,EAAgB3vG,GAAQ8iC,aAAa6sE,EAAep3H,GAAWA,EAE/E,IACE,IAASsoC,aAAaE,QAAQ+pF,GAAmBlqF,KAAKI,UAAU2uF,IAChE,MAAO1hI,GAKP,OAAO,GA0kBH2hI,CAAsB,CACpB3lE,UAAWjpD,EAAOipD,UAClBy0C,WAAYtnG,KAAKg6B,MAAMpwB,EAAO09F,iBAIpC1kG,KAAKmhG,0BAA0Bl+F,GAAG,wBAAwB,WAvtDhC,IAAiCipH,KAytDjCllH,GAvtDjB6uH,gBAAkB,WAC3B,IAAI7pE,EAASkgE,EAAW/qB,0BAA0Bn1C,SAC9CmC,EAAYU,GAAY7C,GAAUkgE,EAAW/qB,0BAA0B3B,0BAA4BxzC,EAAOmC,UAE9G,OAAKA,EAIEA,EAAUn8D,QAAO,SAAU6rD,GAChC,OAAQkQ,GAAelQ,MACtBthD,KAAI,SAAUtI,EAAGrE,GAClB,OAAO,IAAIq8H,GAAeC,EAAYj4H,EAAGA,EAAEwV,OANpC,OAotDTzJ,KAAKmhG,0BAA0BuE,eAAeziG,GAAG,wBAAwB,WACvE+D,EAAO8uH,eAIT91H,KAAKiD,GAAGjD,KAAKmhG,0BAA2B,YAAY,WAClDnhG,KAAK4d,MAAM9Z,QAAQ,eAIrB9D,KAAKiD,GAAGjD,KAAKmhG,0BAA2B,aAAa,WACnDnhG,KAAKszH,yBAA0B,KAEjCtzH,KAAK+1H,sBAGA/1H,KAAK4d,MAAM/pB,OAIhBmM,KAAKg2H,gBAAkB,IAAS/hE,IAAI2N,gBAAgB5hE,KAAKmhG,0BAA0BsD,aACnFzkG,KAAK4d,MAAMvK,IAAIrT,KAAKg2H,oBAGtB31H,EAAO41H,mBAAqB,WAC1B,IAAIjmH,EAAShQ,KAETk2H,EAAsBl2H,KAAKmhG,0BAA0BikB,YAAY12D,MAAM6yD,qBAC3EvhH,KAAK4yD,QAAQ,wCACbs+D,GAA0B,CACxBnyH,OAAQiB,KAAKoJ,QACb+nH,iBAAkBnxH,KAAKqzH,QAAQ7B,WAC/BJ,WAAY8E,GAAuBA,EAAoBr4E,QACvDwzE,cAAerxH,KAAKmuD,UAAUnC,OAAOmC,YACpC57C,MAAK,WACNvC,EAAO4iD,QAAQ,2BAEf5iD,EAAOmxF,0BAA0BuE,eAAeqR,oBACxC,OAAE,SAAUl5F,GACpB7N,EAAO4iD,QAAQ,uCAAwC/0C,GAEvD7N,EAAO5G,QAAQxX,MAAM,CACnBqgB,QAAS,0CACTrH,KAAM,QAKZvK,EAAO81H,qBAAuB,WAS5Bn2H,KAAK4yD,QAAQ,kEACb5yD,KAAKi2H,sBAYP51H,EAAOy1H,UAAY,WACjB,IAAI3lH,EAASnQ,KAETk2H,EAAsBl2H,KAAKmhG,0BAA0BikB,YAAY12D,MAAM6yD,qBACvE6U,EAAqBhE,GAAgB,CACvCrzH,OAAQiB,KAAKoJ,QACb+nH,iBAAkBnxH,KAAKqzH,QAAQ7B,WAC/B3zE,MAAO79C,KAAKmuD,UAAUtQ,QACtBuzE,WAAY8E,GAAuBA,EAAoBr4E,UAEzD79C,KAAKoJ,QAAQwU,MAAM3a,GAAG,mBAAmB,SAAUhP,GAChC,sBAAbA,EAAEke,QACJhC,EAAOgxF,0BAA0BygB,yBAAyB,CACxD/2D,SAAU16C,EAAOgxF,0BAA0BtjD,QAC3C5rC,QAAS,4BAA8Bhe,EAAEke,OAAS,wDAClD+rD,kBAAmB5rC,SAIzBtyB,KAAKm2H,qBAAuBn2H,KAAKm2H,qBAAqB1xH,KAAKzE,MAC3DA,KAAKoJ,QAAQwU,MAAM3a,GAAG,gBAAiBjD,KAAKm2H,sBAGT,KAA/BnwG,GAAQ1vB,QAAQf,YAAsB6gI,EAM1Cp2H,KAAKi2H,qBAJHj2H,KAAKmhG,0BAA0BuE,eAAeqR,kBAclD12G,EAAO01H,oBAAsB,WAC3B,IAAIhyG,EAAS/jB,KAETjB,EAASinB,GAAQlV,QAAQ9Q,KAAK4d,MAAMrU,SAASimC,UAG5CzwC,GAAWA,EAAOiyH,gBAAiBhxH,KAAKq2H,iBAI7Cr2H,KAAKq2H,eAAiBt3H,EAAOiyH,gBAC7BhxH,KAAKmhG,0BAA0Bl+F,GAAG,wBAAwB,WA19BhC,IAAiC+tH,EAAer+D,EAAfq+D,EA29BjCjtG,EAAOsyG,gBA39ByC1jE,EA29BzB5uC,GA19B/C8xG,kBAAkB3iI,SAAQ,SAAU2sG,GACtCmxB,EAAcsF,gBAAgBz2B,MAEhCkxB,GAAqBC,EAAer+D,EAAIxE,cAy9BtCnuD,KAAKmuD,UAAUlrD,GAAG,eAAe,WAC/B8tH,GAAqBhtG,EAAOsyG,eAAgBtyG,EAAOoqC,gBAQvD+kE,EAAWz9H,QAAU,WACnB,MAAO,CACL,0BAA2B26H,GAC3B,SA/iCU,QAgjCV,aA/iCU,SAgjCV,cA/iCU,QAgjCV,gBA/iCQ,UAujCZ/vH,EAAO5K,QAAU,WACf,OAAOuK,KAAKtR,YAAY+G,WAG1B4K,EAAOi3G,cAAgB,WACrB,OAAOtB,GAAcsB,iBAOvBj3G,EAAO8I,KAAO,WACZnJ,KAAKmhG,0BAA0Bh4F,QAOjC9I,EAAOojB,eAAiB,SAAwBzE,GAC9Chf,KAAKmhG,0BAA0B19E,eAAezE,IAOhD3e,EAAOyR,SAAW,WAChB,OAAO9R,KAAKmhG,0BAA0BrvF,YAOxCzR,EAAOioB,SAAW,WAChB,OAAOtoB,KAAKmhG,0BAA0B74E,YAOxCjoB,EAAOiK,QAAU,WACXtK,KAAKk0H,kBACPl0H,KAAKk0H,iBAAiB5pH,UAGpBtK,KAAKmhG,2BACPnhG,KAAKmhG,0BAA0B72F,UAG7BtK,KAAKq2H,gBACPr2H,KAAKq2H,eAAe/rH,UAGlBtK,KAAKoJ,iBACApJ,KAAKoJ,QAAQupD,WACb3yD,KAAKoJ,QAAQmtH,YACbv2H,KAAKoJ,QAAQ+pH,KAGlBnzH,KAAK4d,OAAS5d,KAAK4d,MAAM+0C,YACpB3yD,KAAK4d,MAAM+0C,IAIhB3yD,KAAK4d,cACA5d,KAAK4d,MAAMu1G,IAGhBnzH,KAAKg2H,iBAAmB,IAAS/hE,IAAIoO,kBACvC,IAASpO,IAAIoO,gBAAgBriE,KAAKg2H,iBAClCh2H,KAAKg2H,gBAAkB,MAGrBh2H,KAAK4d,OACP5d,KAAK4d,MAAMnsB,IAAI,gBAAiBuO,KAAKm2H,sBAGvCxiH,EAAWhlB,UAAU2b,QAAQ3W,KAAKqM,OAGpCK,EAAOm2H,qBAAuB,SAA8BzjG,EAAM5xB,GAChE,OAAOg4D,GAAe,CACpBtO,SAAU7qD,KAAKmhG,0BAA0BtjD,QACzC9qB,KAAMA,EACN5xB,SAAUA,KAKdd,EAAOk6D,kBAAoB,SAA6BR,EAAa54D,EAAUy5D,EAAgBH,GAS7F,YARuB,IAAnBG,IACFA,GAAiB,QAGA,IAAfH,IACFA,EAAa,GAGRF,GAAkB,CACvBR,YAAaA,EACblP,SAAU7qD,KAAKmhG,0BAA0BtjD,QACzC4c,WAAYA,EACZG,eAAgBA,EAChBF,OAAQ16D,KAAKuJ,SAASmxD,OACtB1nD,KAAMhT,KAAKuJ,SAASyJ,KACpB7R,SAAUA,KAIP+xH,EAvvBqB,CAZdltG,GAAQ7Z,aAAa,cA8wBjCsqH,GAAmB,CACrBvmI,KAAM,yBACN42D,QAASspE,GACTvpG,gBAAiB,SAAyBlB,EAAQpnB,QAChC,IAAZA,IACFA,EAAU,IAGZ,IAAIyxH,EAAehqG,GAAQ8iC,aAAa9iC,GAAQznB,QAASA,GACzD,OAAOk4H,GAAiBhxG,YAAYE,EAAO32B,KAAMghI,IAEnD5oG,aAAc,SAAsB5zB,EAAQwf,EAAMzU,QAChC,IAAZA,IACFA,EAAU,IAGZ,IAAIyxH,EAAehqG,GAAQ8iC,aAAa9iC,GAAQznB,QAASA,GAezD,OAdAyU,EAAK2/C,IAAM,IAAIugE,GAAW1/H,EAAQwf,EAAMg9G,GAEnChqG,GAAQl0B,eAAe,QAC1Be,OAAO2Q,eAAewP,EAAM,MAAO,CACjCxS,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,mEACVqhB,EAAK2/C,KAEd7mB,cAAc,IAIlB94B,EAAK2/C,IAAIrJ,IAAMgO,KACftkD,EAAK2/C,IAAIt/C,IAAI7f,EAAO6f,IAAK7f,EAAOxE,MACzBgkB,EAAK2/C,KAEdltC,YAAa,SAAqBz2B,EAAMuP,QACtB,IAAZA,IACFA,EAAU,IAGZ,IAAIm4H,EAAwB1wG,GAAQ8iC,aAAa9iC,GAAQznB,QAASA,GAC9Do4H,EAAyBD,EAAsB/jE,IAG/CikE,GADJD,OAAoD,IAA3BA,EAAoC,GAAKA,GACdnD,eAChDA,OAA4C,IAA3BoD,GAAqC5wG,GAAQ1vB,QAAQD,cAAgBugI,EACtFC,EAAyBH,EAAsBvD,IAE/C2D,GADJD,OAAoD,IAA3BA,EAAoC,GAAKA,GACdrD,eAChDuD,OAAkD,IAA3BD,GAA4CA,EACnEE,EAAgB,YAAyBhoI,GAE7C,OADwBgoI,KAAmBv/D,GAAIw7D,qBAAqB+D,IAAkBD,GAAwBvD,GACnF,QAAU,MAWhC,YAAqB,0BAK5BxtG,GAAQD,QAAQ,SAASS,sBAAsBiwG,GAAkB,GAGnEzwG,GAAQktG,WAAaA,GACrBrgI,OAAO2Q,eAAewiB,GAAS,aAAc,CAC3CxlB,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,qEACVuhI,IAETpnF,cAAc,IAEhB9lB,GAAQywG,iBAAmBA,GAC3B5jI,OAAO2Q,eAAewiB,GAAS,mBAAoB,CACjDxlB,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,iFACV8kI,IAET3qF,cAAc,IAEhB9lB,GAAQyxC,IAAMA,GACd5kE,OAAO2Q,eAAewiB,GAAS,MAAO,CACpCxlB,IAAK,WAEH,OADAwlB,GAAQ31B,IAAIsB,KAAK,uDACV8lE,IAET3rB,cAAc,IAGX9lB,GAAQsiC,MACXtiC,GAAQzV,kBAAkB,MAAOknD,IACjCzxC,GAAQzV,kBAAkB,MAAOknD,KAGnCzxC,GAAQznB,QAAQo0D,IAAM3sC,GAAQznB,QAAQo0D,KAAO,GAC7C3sC,GAAQznB,QAAQ40H,IAAMntG,GAAQznB,QAAQ40H,KAAO,GAExCntG,GAAQogC,WAAcpgC,GAAQogC,UAAU,0BACtBpgC,GAAQihC,gBAAkBjhC,GAAQ0gC,QACxC,uBAnyCS,SAA6BnoD,GACrDuxH,GAAW9vH,KAAMzB,MAqyCJ,c,oDCjkrDf,wVA+EMmd,EACA8lC,EAhFN,UAsBWy1E,EAAW,SAAkBz1E,EAAGkiC,EAAKhtF,GAK9C,YAJY,IAARA,IACFA,EAAM,MAtBG,SAAgBA,EAAKgtF,GAGhC,IAFA,IAAI/3E,EAAM,GAEH+3E,KACL/3E,GAAOjV,EAGT,OAAOiV,EAkBCurH,CAAOxgI,EAAKgtF,GAAOliC,EAAE5uD,YAAYtD,OAAOo0F,IASvCyzC,EAAe,SAAsB5oI,GAC9C,OAR6B,SAA2BA,GACxD,MAA2B,aAAvB+pE,YAAYC,OACPD,YAAYC,OAAOhqE,GAGrBA,GAAOA,EAAIkqE,kBAAkBH,YAG7B8+D,CAAkB7oI,IAEhB8oI,EAAU,SAAiB7+D,GACpC,OAAIA,aAAiB0O,WACZ1O,GAGJhoE,MAAMY,QAAQonE,IAAW2+D,EAAa3+D,IAAYA,aAAiBF,cAIpEE,EADmB,kBAAVA,GAAuC,kBAAVA,GAAsBA,IAAUA,EAC9D,EAEA,CAACA,IAIN,IAAI0O,WAAW1O,GAASA,EAAMC,QAAUD,EAAOA,GAASA,EAAME,YAAc,EAAGF,GAASA,EAAMxB,YAAc,KAE1G+5B,EAAc,SAAqBv4B,GAC5CA,EAAQ6+D,EAAQ7+D,GAGhB,IAFA,IAAI9hE,EAAM,GAED9G,EAAI,EAAGA,EAAI4oE,EAAM3oE,OAAQD,IAChC8G,GAAOugI,EAASz+D,EAAM5oE,GAAGgD,SAAS,IAAK,EAAG,KAG5C,OAAO8D,GAEE4gI,EAAiB,SAAwB9+D,GAClDA,EAAQ6+D,EAAQ7+D,GAGhB,IAFA,IAAI9hE,EAAM,GAED9G,EAAI,EAAGA,EAAI4oE,EAAM3oE,OAAQD,IAChC8G,GAAOugI,EAASz+D,EAAM5oE,GAAGgD,SAAS,GAAI,EAAG,KAG3C,OAAO8D,GAELqhE,EA5EJ,OA4Ea,EAAOA,QAAUv7D,OAC1B+6H,EAAa,CAACx/D,EAAO,OAAQA,EAAO,SAAUA,EAAO,WAAYA,EAAO,aAAcA,EAAO,eAAgBA,EAAO,iBAAkBA,EAAO,mBAAoBA,EAAO,qBAAsBA,EAAO,wBAiB9Ly/D,GAfL97G,EAAI,IAAI+7G,YAAY,CAAC,QAGZ,OAFTj2E,EAAI,IAAI0lB,WAAWxrD,EAAE+8C,OAAQ/8C,EAAEg9C,WAAYh9C,EAAEs7C,aAE3C,IAIFxV,EAAE,GAQmB,SAAuBgX,EAAOk/D,GACvD,IAAItnH,OAAiB,IAAVsnH,EAAmB,GAAKA,EAC/BC,EAAcvnH,EAAKwnH,OACnBA,OAAyB,IAAhBD,GAAiCA,EAC1CE,EAAUznH,EAAK0nH,GACfA,OAAiB,IAAZD,GAA6BA,EAEtCr/D,EAAQ6+D,EAAQ7+D,GAChB,IAAIvpE,EAAK6oI,EAAK,SAAW,cAErBvjG,GADMikC,EAAMvpE,GAAMupE,EAAMvpE,GAAMuB,MAAM7B,UAAUM,IACjC0E,KAAK6kE,GAAO,SAAUqF,EAAOk6D,EAAMnoI,GAClD,IAAIooI,EAAWF,EAAKloI,EAAIwN,KAAK8sC,IAAIt6C,EAAI,EAAI4oE,EAAM3oE,QAC/C,OAAOguE,EAAQ9F,EAAOggE,GAAQR,EAAWS,KACxCjgE,EAAO,IAEV,GAAI6/D,EAAQ,CACV,IAAIv6H,EAAMk6H,EAAW/+D,EAAM3oE,QAAUkoE,EAAO,GAAKA,EAAO,IACxDxjC,EAASwjC,EAAOxjC,IAEHl3B,IACXk3B,GAAUl3B,EACVk3B,GAAUl3B,EACVk3B,GAAUwjC,EAAO,IAIrB,OAAOv7D,OAAO+3B,KAEL0jG,EAAgB,SAAuB1jG,EAAQ2jG,GACxD,IACIC,QADmB,IAAXD,EAAoB,GAAKA,GAChBJ,GACjBA,OAAkB,IAAbK,GAA8BA,GAGjB,kBAAX5jG,GAAyC,kBAAXA,GAAyC,kBAAXA,GAAuBA,IAAWA,KACvGA,EAAS,GAGXA,EAASwjC,EAAOxjC,GAIhB,IAHA,IAlH0Ct9B,EAkHtCmhI,GAlHsCnhI,EAkHfs9B,EAjHpBn3B,KAAKiwE,KALS,SAAmBp2E,GACxC,OAAOA,EAAErE,SAAS,GAAG/C,OAIJwoI,CAAUphI,GAAK,IAkH5BuhE,EAAQ,IAAI0O,WAAW,IAAI5O,YAAY8/D,IAElCxoI,EAAI,EAAGA,EAAIwoI,EAAWxoI,IAAK,CAClC,IAAI0lF,EAAYwiD,EAAKloI,EAAIwN,KAAK8sC,IAAIt6C,EAAI,EAAI4oE,EAAM3oE,QAChD2oE,EAAM8c,GAAa94E,OAAO+3B,EAASgjG,EAAW3nI,GAAKmoE,EAAO,MAEtDxjC,EAAS,IACXikC,EAAM8c,GAAal4E,KAAK8sC,KAAKsuB,EAAM8c,IACnC9c,EAAM8c,IAAoB,IAAN1lF,EAAU,EAAI,GAItC,OAAO4oE,GAEE8/D,EAAgB,SAAuB9/D,GAChD,IAAKA,EACH,MAAO,GAKTA,EAAQhoE,MAAM7B,UAAUW,MAAMqE,KAAK6kE,GACnC,IAAIpwD,EAASg8C,OAAO+T,aAAa5kE,MAAM,KAAM8jI,EAAQ7+D,IAErD,IACE,OAAO2kB,mBAAmBi7B,OAAOhwG,IACjC,MAAOnU,IAIT,OAAOmU,GAEEmwH,EAAgB,SAAuBnwH,EAAQowH,GAKxD,GAJsB,kBAAXpwH,GAAuBA,GAAqC,oBAApBA,EAAOxV,WACxDwV,EAASA,EAAOxV,YAGI,kBAAXwV,EACT,OAAO,IAAI8+D,WAMRsxD,IACHpwH,EAASs1E,SAAS+6C,mBAAmBrwH,KAKvC,IAFA,IAAIyjE,EAAO,IAAI3E,WAAW9+D,EAAOvY,QAExBD,EAAI,EAAGA,EAAIwY,EAAOvY,OAAQD,IACjCi8E,EAAKj8E,GAAKwY,EAAO++D,WAAWv3E,GAG9B,OAAOi8E,GAEE6sD,EAAoB,WAC7B,IAAK,IAAIpoI,EAAO/C,UAAUsC,OAAQ8oI,EAAU,IAAInoI,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFkoI,EAAQloI,GAAQlD,UAAUkD,GAO5B,GAJAkoI,EAAUA,EAAQ3mI,QAAO,SAAUwvD,GACjC,OAAOA,IAAMA,EAAEwV,YAAcxV,EAAE3xD,SAAwB,kBAAN2xD,KAG/Cm3E,EAAQ9oI,QAAU,EAGpB,OAAOwnI,EAAQsB,EAAQ,IAGzB,IAAIC,EAAWD,EAAQjtH,QAAO,SAAUmyD,EAAOg7D,EAAKjpI,GAClD,OAAOiuE,GAASg7D,EAAI7hE,YAAc6hE,EAAIhpI,UACrC,GACC4hH,EAAa,IAAIvqC,WAAW0xD,GAC5B5mE,EAAS,EAMb,OALA2mE,EAAQzlI,SAAQ,SAAU2lI,GACxBA,EAAMxB,EAAQwB,GACdpnB,EAAWnxG,IAAIu4H,EAAK7mE,GACpBA,GAAU6mE,EAAI7hE,cAETy6C,GAyBEqnB,EAAa,SAAoBp9G,EAAG8lC,EAAGu3E,GAChD,IAAIvrE,OAAmB,IAAXurE,EAAoB,GAAKA,EACjCC,EAAexrE,EAAMwE,OACrBA,OAA0B,IAAjBgnE,EAA0B,EAAIA,EACvCC,EAAazrE,EAAM0rE,KACnBA,OAAsB,IAAfD,EAAwB,GAAKA,EAExCv9G,EAAI27G,EAAQ37G,GAGZ,IAAIzsB,GAFJuyD,EAAI61E,EAAQ71E,IAED37C,MAAQ27C,EAAE37C,MAAQrV,MAAM7B,UAAUkX,MAC7C,OAAO27C,EAAE3xD,QAAU6rB,EAAE7rB,OAASmiE,GAAUxQ,EAAE3xD,QAC1CZ,EAAG0E,KAAK6tD,GAAG,SAAU23E,EAAOvpI,GAE1B,OAAOupI,KADKD,EAAKtpI,GAAKspI,EAAKtpI,GAAK8rB,EAAEs2C,EAASpiE,GAAK8rB,EAAEs2C,EAASpiE,S,kCC7P/D,SAASwpI,EAAmBhtD,GAAO,OAMnC,SAA4BA,GAAO,GAAI57E,MAAMY,QAAQg7E,GAAM,OAAOitD,EAAkBjtD,GAN1CktD,CAAmBltD,IAI7D,SAA0BmtD,GAAQ,GAAsB,qBAAX/qI,QAAmD,MAAzB+qI,EAAK/qI,OAAOC,WAA2C,MAAtB8qI,EAAK,cAAuB,OAAO/oI,MAAMuX,KAAKwxH,GAJjFC,CAAiBptD,IAAQqtD,EAA4BrtD,IAE1H,WAAgC,MAAM,IAAI1kB,UAAU,wIAF8EgyE,GAUlI,SAASD,EAA4B5zF,EAAG8zF,GAAU,GAAK9zF,EAAL,CAAgB,GAAiB,kBAANA,EAAgB,OAAOwzF,EAAkBxzF,EAAG8zF,GAAS,IAAIr2H,EAAIzQ,OAAOlE,UAAUiE,SAASe,KAAKkyC,GAAGv2C,MAAM,GAAI,GAAiE,MAAnD,WAANgU,GAAkBuiC,EAAEn3C,cAAa4U,EAAIuiC,EAAEn3C,YAAYwB,MAAgB,QAANoT,GAAqB,QAANA,EAAoB9S,MAAMuX,KAAK89B,GAAc,cAANviC,GAAqB,2CAA2CnS,KAAKmS,GAAW+1H,EAAkBxzF,EAAG8zF,QAAzG,GAE7S,SAASN,EAAkBjtD,EAAKsX,IAAkB,MAAPA,GAAeA,EAAMtX,EAAIv8E,UAAQ6zF,EAAMtX,EAAIv8E,QAAQ,IAAK,IAAID,EAAI,EAAGgqI,EAAO,IAAIppI,MAAMkzF,GAAM9zF,EAAI8zF,EAAK9zF,IAAOgqI,EAAKhqI,GAAKw8E,EAAIx8E,GAAM,OAAOgqI,EAiDhL,SAAS39H,EAAEhI,EAAG4P,GACZ,GAAIA,GAAK5P,EAAEpE,SAAWgU,EAAEhU,OAAQ,MAAM,IAAIkC,MAAM,+DAQhD,OAPQkC,EAAEyX,QAAO,SAAUwmB,EAAGxW,EAAGrY,GAE/B,OAAO6uB,EAAIxW,GADH7X,EAAIA,EAAER,GAAK,KAElB,IACKQ,EAAIA,EAAE6H,QAAO,SAAUwmB,EAAGxW,GAChC,OAAOwW,EAAIxW,IACV,GAAKznB,EAAEpE,QAUZ,SAASgqI,EAAE5lI,GACT,OAAOA,EAAEuF,MAAM,OAAOxH,QAAO,SAAU6R,EAAGjU,EAAGi2C,GAC3C,OAAOhiC,GAAKgiC,EAAEx2C,QAAQwU,KAAOjU,KAjFjC,kCAqFA,IAAI4xD,EACc,IADdA,EAEgB,IAIpB,SAASs4E,EAAE7lI,EAAG4P,EAAGjU,EAAGi2C,GAClB,IAAI3T,EAAI,GACJxW,EAAImqB,GAAKA,EAAEk0F,WAAa,GACxB12H,EAAIQ,EAAElN,OAAOyF,cACjB,OAAOyH,GAAK5P,EAAEf,SAAQ,SAAUo/C,GAC9B,IAII0nF,EAJAvgI,EAAI,GACJqe,EAAI,GAEJmiH,EA3FR,SAAoCp0F,EAAGq0F,GAAkB,IAAIC,EAAuB,qBAAX3rI,QAA0Bq3C,EAAEr3C,OAAOC,WAAao3C,EAAE,cAAe,IAAKs0F,EAAI,CAAE,GAAI3pI,MAAMY,QAAQy0C,KAAOs0F,EAAKV,EAA4B5zF,KAAOq0F,GAAkBr0F,GAAyB,kBAAbA,EAAEh2C,OAAqB,CAAMsqI,IAAIt0F,EAAIs0F,GAAI,IAAIvqI,EAAI,EAAOwqI,EAAI,aAAiB,MAAO,CAAEloG,EAAGkoG,EAAG92H,EAAG,WAAe,OAAI1T,GAAKi2C,EAAEh2C,OAAe,CAAEsvE,MAAM,GAAe,CAAEA,MAAM,EAAO1rE,MAAOoyC,EAAEj2C,OAAWqE,EAAG,SAAWomI,GAAM,MAAMA,GAAOC,EAAGF,GAAO,MAAM,IAAI1yE,UAAU,yIAA4I,IAA6C7pC,EAAzC08G,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAEtoG,EAAG,WAAeioG,EAAKA,EAAGxmI,KAAKkyC,IAAOviC,EAAG,WAAe,IAAIy1D,EAAOohE,EAAG3yG,OAAsC,OAA9B+yG,EAAmBxhE,EAAKoG,KAAapG,GAAS9kE,EAAG,SAAWwmI,GAAOD,GAAS,EAAM38G,EAAM48G,GAAQH,EAAG,WAAe,IAAWC,GAAiC,MAAbJ,EAAGO,QAAgBP,EAAGO,SAAY,QAAU,GAAIF,EAAQ,MAAM38G,KA2Fr8B88G,CAA2B/qI,GAG3C,IACE,IAAKqqI,EAAU/nG,MAAO8nG,EAAQC,EAAU32H,KAAK67D,MAAO,CAClD,IAAIm7D,EAAIN,EAAMvmI,MACV6P,EAAgB,iBAALg3H,EAAgBA,EAAIA,EAAEpqI,KAErC,GAAgB,iBAALoqI,EAAgBxiH,EAAE9mB,KAAKspI,EAAEM,QAAU9iH,EAAE9mB,KAAK,GAAI6B,OAAOlE,UAAUmD,eAAe6B,KAAK2+C,EAAGhvC,IAAqB,iBAARgvC,EAAEhvC,GAAgB,CAC9H,IACI6uB,EAAI0oG,EADAvoF,EAAEhvC,GAAG3M,OAAOyF,cACPiH,GACb5J,EAAEzI,KAAKmhC,QACF14B,EAAEzI,KAAK,IAEhB,MAAO6sB,KACPo8G,EAAUhmI,EAAE4pB,KACZ,QACAo8G,EAAUK,IAGZ,IAAIQ,EAAI7+H,EAAExC,EAAGqe,GACbgjH,GAAKp/G,GAAKwW,EAAElhC,KAAK,CACf+B,OAAQu/C,EACRyoF,WAAYD,OAEZ5oG,EAAE2Y,MAAK,SAAUyH,EAAG74C,GACtB,OAAOA,EAAEshI,WAAazoF,EAAEyoF,cACtB7oG,EAAE31B,KAAI,SAAU+1C,GAClB,OAAOA,EAAEv/C,WACLkB,EAGR,SAAS4mI,EAAE5mI,EAAG4P,GACZ,IAAIjU,EAAIiqI,EAAE5lI,GACNi+B,EAAI2nG,EAAEh2H,GAAGtH,KAAI,SAAUmf,GACzB,IAAIrY,EAAIzT,EAAE2M,KAAI,SAAUub,GACtB,OASN,SAAW7jB,EAAG4P,GACZ,IAAIjU,EAlIN,SAAWqE,EAAG4P,GACZ,GAAI5P,EAAEpE,OAASgU,EAAEhU,OAAQ,CACvB,IAAIyT,EAAIrP,EACRA,EAAI4P,EAAGA,EAAIP,EAGb,IAAI1T,EAAIqE,EAAEpE,OACNg2C,EAAIhiC,EAAEhU,OACV,IAAKg2C,EAAG,OAAO,EAMf,IALA,IAAI3T,EAAI90B,KAAKC,IAAI,EAAGzN,EAAI,GAAK,EACzB8rB,EAAIlrB,MAAMq1C,GAAG/wB,MAAK,GAClBzR,EAAI7S,MAAMZ,GAAGklB,KAAK,IAClBw9B,EAAI,EAEC0oF,EAAK,EAAGA,EAAKprI,EAAGorI,IAGvB,IAFA,IAAIC,EAAIhnI,EAAE+mI,GAED7oG,EAAI,EAAGA,EAAI0T,EAAG1T,IAAK,CAC1B,IAAIgsD,EAAIt6E,EAAEsuB,GAEV,GAAIA,GAAK6oG,EAAK9oG,GAAKC,EAAID,GAAK,GAAK+oG,IAAM98C,IAAMziE,EAAEyW,GAAI,CACjDzW,EAAEyW,IAAK,EAAI9uB,EAAEivC,KAAO2oF,EACpB,OAKN,IAAK3oF,EAAG,OAAO,EAGf,IAFA,IAAI74C,EAAI,EAECyhI,EAAM,EAAGC,EAAK,EAAGA,EAAKt1F,EAAGs1F,IAChCz/G,EAAEy/G,KAAQt3H,EAAEs3H,KAAQ93H,EAAE63H,IAAQzhI,IAAKyhI,KAGrC,IACIJ,GADIxoF,EACK1iD,EADL0iD,EACazM,GADbyM,EACsB74C,EAAI,GAD1B64C,GACoC,EACxCgoF,EAAI,EACRz0F,EAAIzoC,KAAKE,IAAI,EAAGuoC,GAEhB,IAAK,IAAIu1F,EAAM,EAAGA,EAAMv1F,EAAGu1F,IACzBnnI,EAAEmnI,KAASv3H,EAAEu3H,IAAQd,IAGvB,OAAOQ,EAAQ,GAAJR,GAAU,EAAIQ,GAuFjB9zE,CAAE/yD,EAAG4P,GACb,OAAO5P,EAAEonI,SAASx3H,GAAKjU,EAAI4xD,EAAmB5xD,EAXnC0rI,CAAExjH,EAAG4D,MAEV42B,EAAIl1C,KAAKC,IAAI9J,MAAM6J,KAAMg8H,EAAmB/1H,IAEhD,OAAOivC,IADCjvC,EAAE,GACOivC,EAAIkP,EAlEzB,SAAWvtD,GACT,IAAI4P,EAAItW,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,EACxEqC,EAAIrC,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,EAC5E,OAAO6P,KAAKC,IAAIwG,EAAGzG,KAAKE,IAAI1N,EAAGqE,IA+DasnI,CAAEjpF,MAE9C,OAAOr2C,EAAEi2B,K,kCC5IX,IAAIspG,EAAa,EAAQ,MACrBC,EAAmB,EAAQ,MAI/BrtI,EAAOC,QAAUmtI,EAAW,OAAO,SAAU/4D,GAC3C,OAAO,WAAiB,OAAOA,EAAKziE,KAAMzS,UAAUsC,OAAStC,UAAU,QAAK2N,MAC3EugI,I,qBCRH,IAAIv9H,EAAI,EAAQ,IACZw9H,EAAkB,EAAQ,KAE1BvjE,EAAe/T,OAAO+T,aAEtBwjE,EAAiBv3E,OAAOw3E,cAO5B19H,EAAE,CAAE7K,OAAQ,SAAUkxH,MAAM,EAAM7B,SAJTiZ,GAA2C,GAAzBA,EAAe9rI,QAII,CAE5D+rI,cAAe,SAAuB3kI,GAKpC,IAJA,IAGI2T,EAHAixH,EAAW,GACXhsI,EAAStC,UAAUsC,OACnBD,EAAI,EAEDC,EAASD,GAAG,CAEjB,GADAgb,GAAQrd,UAAUqC,KACd8rI,EAAgB9wH,EAAM,WAAcA,EAAM,MAAMkxH,WAAWlxH,EAAO,8BACtEixH,EAAS7qI,KAAK4Z,EAAO,MACjButD,EAAavtD,GACbutD,EAAyC,QAA1BvtD,GAAQ,QAAY,IAAcA,EAAO,KAAQ,QAEpE,OAAOixH,EAASniI,KAAK,Q,kCC2B3B,SAASnD,EAAOxD,EAAQgpI,GAKtB,YAJW7gI,IAAP6gI,IACFA,EAAKlpI,QAGAkpI,GAA2B,oBAAdA,EAAGxlI,OAAwBwlI,EAAGxlI,OAAOxD,GAAUA,EAWrE,IAAIipI,EAAYzlI,EAAO,CAUrB0lI,KAAM,YAYNC,OAAQ,SAAgBzoI,GACtB,OAAOA,IAAUuoI,EAAUC,MAU7BE,gBAAiB,kBASjBC,SAAU,WAUVC,sBAAuB,wBASvBC,cAAe,kBAQbC,EAAYhmI,EAAO,CAMrB0lI,KAAM,+BASNC,OAAQ,SAAgB1+G,GACtB,OAAOA,IAAQ++G,EAAUN,MAQ3BO,IAAK,6BAOLC,IAAK,uCAOLC,MAAO,kCAETruI,EAAQsuI,KAjKR,SAActkH,EAAMxe,EAAW+iI,GAK7B,QAJW1hI,IAAP0hI,IACFA,EAAKpsI,MAAM7B,WAGT0pB,GAA2B,oBAAZukH,EAAGD,KACpB,OAAOC,EAAGD,KAAKhpI,KAAK0kB,EAAMxe,GAG5B,IAAK,IAAIjK,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAC/B,GAAIiD,OAAOlE,UAAUmD,eAAe6B,KAAK0kB,EAAMzoB,GAAI,CACjD,IAAIsM,EAAOmc,EAAKzoB,GAEhB,GAAIiK,EAAUlG,UAAKuH,EAAWgB,EAAMtM,EAAGyoB,GACrC,OAAOnc,IAoJf7N,EAAQkI,OAASA,EACjBlI,EAAQ2tI,UAAYA,EACpB3tI,EAAQkuI,UAAYA,G,sBCrLpB,sBAOiD76D,EAPjD,cAAyW,OAA1Om7D,EAArD,oBAAXruI,QAAoD,kBAApBA,OAAOC,SAAoC,SAAkBF,GAAO,cAAcA,GAA4B,SAAkBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBsuI,EAAStuI,GAStXJ,KAF8CuzE,EAExC,WACP,OAMQo7D,EAAsB,CAExB,8BAMA,SAAgC1uI,EAAQC,EAAS0uI,GAC/C,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IAAI2uI,EAASC,EAAuBF,EAEpC,wBAEIG,EAASD,EAAuBF,EAEpC,yBAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAUb,SAASyuH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAqBlD,IAAIyxF,EAA2B,WAC7B,SAASA,KAlCX,SAAyBz2E,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAiCpB21E,CAAgBr9H,KAAMo9H,GAQtBp9H,KAAKs9H,KAAO,KAOZt9H,KAAKu9H,QAAU,KAOfv9H,KAAKk1B,SAAW,KAOhBl1B,KAAKw9H,YAAc,KAOnBx9H,KAAKyR,MAAQ,EAObzR,KAAK0R,IAAM,EAOX1R,KAAKyJ,IAAK,EAAIyzH,EAAOC,SAA0C,qBAA1Bn9H,KAAKtR,YAAYwB,KAAuB8P,KAAKtR,YAAYwB,KAAKkM,cAAgB,IAAM,gBAOzH4D,KAAKy9H,wBAA0B,GA5EnC,IAAsBxgB,EAAaC,EAAYC,EAia7C,OAjaoBF,EAqFPmgB,GArFoBlgB,EAqFP,CAAC,CACzB/pH,IAAK,WACLM,MAAO,SAAkBoF,GACvBmH,KAAKs9H,KAAOzkI,EACZmH,KAAKu9H,QAAUv9H,KAAKs9H,KAAKI,WAAW,KAAM19H,KAAKy9H,2BAShD,CACDtqI,IAAK,eACLM,MAAO,SAAsBoF,GAC3BmH,KAAKk1B,SAAWr8B,EAChBmH,KAAKw9H,YAAcx9H,KAAKk1B,SAASwoG,WAAW,KAAM19H,KAAKy9H,2BAWxD,CACDtqI,IAAK,mBACLM,MAAO,SAA0BkqI,EAAcC,EAAYxiI,EAAOD,GAGhE6E,KAAKyR,MAAQzR,KAAKs9H,KAAK1hI,WAAagiI,GAAc,EAClD59H,KAAK0R,IAAM1R,KAAKyR,MAAQksH,EAAeC,EAEvC59H,KAAKs9H,KAAKliI,MAAQA,EAClB4E,KAAKs9H,KAAKniI,OAASA,EACnB,IAAI0iI,EAAc,CAChBziI,MAAOuiI,EAAe,OAExB,EAAIX,EAAOG,SAASn9H,KAAKs9H,KAAMO,GAE3B79H,KAAK89H,oBAEP99H,KAAKk1B,SAAS95B,MAAQA,EACtB4E,KAAKk1B,SAAS/5B,OAASA,GACvB,EAAI6hI,EAAOG,SAASn9H,KAAKk1B,SAAU2oG,MAOtC,CACD1qI,IAAK,YACLM,MAAO,WAELuM,KAAKu9H,QAAQQ,UAAU,EAAG,EAAG/9H,KAAKu9H,QAAQS,OAAO5iI,MAAO4E,KAAKu9H,QAAQS,OAAO7iI,QAExE6E,KAAK89H,mBACP99H,KAAKw9H,YAAYO,UAAU,EAAG,EAAG/9H,KAAKw9H,YAAYQ,OAAO5iI,MAAO4E,KAAKw9H,YAAYQ,OAAO7iI,UAW3F,CACDhI,IAAK,gBACLM,MAAO,SAAuBwqI,EAAWC,GACvCl+H,KAAKu9H,QAAQY,UAAYn+H,KAAKo+H,aAAap+H,KAAKu9H,QAASU,GAErDj+H,KAAK89H,oBACP99H,KAAKw9H,YAAYW,UAAYn+H,KAAKo+H,aAAap+H,KAAKw9H,YAAaU,MAmBpE,CACD/qI,IAAK,eACLM,MAAO,SAAsB8D,EAAKu2B,GAChC,GAAoB,iBAATA,GAAqBA,aAAiBuwG,eAC/C,OAAOvwG,EAGT,IAAIwwG,EAAe/mI,EAAIgnI,qBAAqB,EAAG,EAAG,EAAGhnI,EAAIymI,OAAO7iI,QAIhE,OAHA2yB,EAAM56B,SAAQ,SAAUO,EAAOrE,GAC7B,OAAOkvI,EAAaE,aAAapvI,EAAQ0+B,EAAMj+B,OAAQ4D,MAElD6qI,IAQR,CACDnrI,IAAK,wBACLM,MAAO,SAA+BuhC,GAChCA,IAEFh1B,KAAKu9H,QAAQkB,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAErCz+H,KAAK89H,mBACP99H,KAAKw9H,YAAYiB,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,MAclD,CACDtrI,IAAK,YACLM,MAAO,SAAmBwD,EAAGgF,EAAGb,EAAOD,EAAQujI,GAC7C1+H,KAAK2+H,kBAAkB3+H,KAAKu9H,QAAStmI,EAAGgF,EAAGb,EAAOD,EAAQujI,GAEtD1+H,KAAK89H,mBACP99H,KAAK2+H,kBAAkB3+H,KAAKw9H,YAAavmI,EAAGgF,EAAGb,EAAOD,EAAQujI,KAcjE,CACDvrI,IAAK,oBACLM,MAAO,SAA2B8D,EAAKN,EAAGgF,EAAGb,EAAOD,EAAQujI,GACrDnnI,IAIDmnI,EACF1+H,KAAK4+H,gBAAgBrnI,EAAKN,EAAGgF,EAAGb,EAAOD,EAAQujI,GAE/CnnI,EAAIsnI,SAAS5nI,EAAGgF,EAAGb,EAAOD,MAiB7B,CACDhI,IAAK,kBACLM,MAAO,SAAyB8D,EAAKN,EAAGgF,EAAGb,EAAOD,EAAQujI,GACzC,IAAXvjI,IAMAA,EAAS,IAEXc,GADAd,IAAW,GAIb5D,EAAIunI,YACJvnI,EAAIwnI,OAAO9nI,EAAIynI,EAAQziI,GACvB1E,EAAIynI,OAAO/nI,EAAImE,EAAQsjI,EAAQziI,GAC/B1E,EAAI0nI,iBAAiBhoI,EAAImE,EAAOa,EAAGhF,EAAImE,EAAOa,EAAIyiI,GAClDnnI,EAAIynI,OAAO/nI,EAAImE,EAAOa,EAAId,EAASujI,GACnCnnI,EAAI0nI,iBAAiBhoI,EAAImE,EAAOa,EAAId,EAAQlE,EAAImE,EAAQsjI,EAAQziI,EAAId,GACpE5D,EAAIynI,OAAO/nI,EAAIynI,EAAQziI,EAAId,GAC3B5D,EAAI0nI,iBAAiBhoI,EAAGgF,EAAId,EAAQlE,EAAGgF,EAAId,EAASujI,GACpDnnI,EAAIynI,OAAO/nI,EAAGgF,EAAIyiI,GAClBnnI,EAAI0nI,iBAAiBhoI,EAAGgF,EAAGhF,EAAIynI,EAAQziI,GACvC1E,EAAI2nI,YACJ3nI,EAAIud,UAeL,CACD3hB,IAAK,YACLM,MAAO,SAAmB0rI,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,GAC9D1R,KAAKs/H,kBAAkBt/H,KAAKu9H,QAAS4B,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,GAEvE1R,KAAK89H,mBACP99H,KAAKs/H,kBAAkBt/H,KAAKw9H,YAAa2B,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,KAiBlF,CACDve,IAAK,oBACLM,MAAO,SAA2B8D,EAAK4nI,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,GAC3E,GAAKna,EAAL,CAIA,IAcI3H,EAAG2vI,EAAMptG,EAdTtiC,EAASsvI,EAAMtvI,OAAS,EACxB2vI,EAAQpiI,KAAKg6B,MAAMvnC,EAASmQ,KAAKyR,OAIjCguH,EAAcD,EACdE,EAFOtiI,KAAKg6B,MAAMvnC,EAASmQ,KAAK0R,KAAO,EAGvCw/E,EAAQlxF,KAAKs9H,KAAKliI,OAASskI,EAAYD,EAAc,GAErDE,EAAaN,EAAQtiI,EACrB6iI,EAAaR,EAASC,EAM1B,IALA9nI,EAAIunI,YACJvnI,EAAIwnI,QAAQU,EAAcD,GAAStuC,EAAOyuC,GAC1CpoI,EAAIynI,QAAQS,EAAcD,GAAStuC,EAAOyuC,EAAaviI,KAAKg6B,OAAO+nG,EAAM,EAAIM,IAAgB,GAAKG,IAG7FhwI,EAAI6vI,EAAa7vI,EAAI8vI,EAAW9vI,IACnC2vI,EAAOJ,EAAM,EAAIvvI,IAAM,EACvBuiC,EAAI/0B,KAAKg6B,MAAMmoG,EAAOK,GACtBroI,EAAIynI,QAAQpvI,EAAI4vI,GAAStuC,EAAQlxF,KAAK6/H,UAAWF,EAAaxtG,GAOhE,IAFA,IAAIhH,EAAIu0G,EAAY,EAEZv0G,GAAKs0G,EAAat0G,IACxBo0G,EAAOJ,EAAM,EAAIh0G,EAAI,IAAM,EAC3BgH,EAAI/0B,KAAKg6B,MAAMmoG,EAAOK,GACtBroI,EAAIynI,QAAQ7zG,EAAIq0G,GAAStuC,EAAQlxF,KAAK6/H,UAAWF,EAAaxtG,GAGhE56B,EAAIynI,QAAQS,EAAcD,GAAStuC,EAAOyuC,EAAaviI,KAAKg6B,OAAO+nG,EAAM,EAAIM,EAAc,IAAM,GAAKG,IACtGroI,EAAI2nI,YACJ3nI,EAAIud,UAML,CACD3hB,IAAK,UACLM,MAAO,WACLuM,KAAKu9H,QAAU,KACfv9H,KAAKs9H,KAAO,KACZt9H,KAAKw9H,YAAc,KACnBx9H,KAAKk1B,SAAW,OAgBjB,CACD/hC,IAAK,WACLM,MAAO,SAAkBioF,EAAQokD,EAAS9wI,GACxC,IAAImW,EAAQnF,KAEZ,MAAa,SAAThR,EACK,IAAIg2B,SAAQ,SAAUg5B,GAC3B74C,EAAMm4H,KAAKyC,OAAO/hF,EAAS09B,EAAQokD,MAEnB,YAAT9wI,EACFgR,KAAKs9H,KAAK0C,UAAUtkD,EAAQokD,QAD9B,OA1ZK9iB,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IA6ZLkwF,EAhZsB,GAmZ/B/uI,EAAiB,QAAI+uI,EACrBhvI,EAAOC,QAAUA,EAAQ8uI,SAK3B,kBAMA,SAAqB/uI,EAAQC,EAAS0uI,GACpC,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAGbsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IAAI4xI,EAaJ,SAAiC1xI,EAAK2xI,GACpC,IAAKA,GAAe3xI,GAAOA,EAAI6uH,WAC7B,OAAO7uH,EAGT,GAAY,OAARA,GAAiC,WAAjBD,EAAQC,IAAoC,oBAARA,EACtD,MAAO,CACL4uI,QAAS5uI,GAIb,IAAI4xI,EAAQC,EAAyBF,GAErC,GAAIC,GAASA,EAAMrmI,IAAIvL,GACrB,OAAO4xI,EAAM3/H,IAAIjS,GAGnB,IAAI8xI,EAAS,GACTC,EAAwBztI,OAAO2Q,gBAAkB3Q,OAAO+4C,yBAE5D,IAAK,IAAIz4C,KAAO5E,EACd,GAAY,YAAR4E,GAAqBN,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAK4E,GAAM,CACvE,IAAIwhB,EAAO2rH,EAAwBztI,OAAO+4C,yBAAyBr9C,EAAK4E,GAAO,KAE3EwhB,IAASA,EAAKnU,KAAOmU,EAAKrU,KAC5BzN,OAAO2Q,eAAe68H,EAAQltI,EAAKwhB,GAEnC0rH,EAAOltI,GAAO5E,EAAI4E,GAWxB,OANAktI,EAAOlD,QAAU5uI,EAEb4xI,GACFA,EAAM7/H,IAAI/R,EAAK8xI,GAGVA,EAnDEE,CAAwBxD,EAEnC,wBAEA,SAASqD,EAAyBF,GAChC,GAAuB,oBAAZngI,QAAwB,OAAO,KAC1C,IAAIygI,EAAoB,IAAIzgI,QACxB0gI,EAAmB,IAAI1gI,QAC3B,OAAQqgI,EAA2B,SAAkCF,GACnE,OAAOA,EAAcO,EAAmBD,IACvCN,GAkDL,SAASljB,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IA+BlD,SAAS2xE,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAGF,SAAgCv5D,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EARAqzI,CAAuBrzI,GAwBhC,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GASzB,IAAI67F,EAAsB,SAAUC,IA1FpC,SAAmBh5E,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GA4E1Cm5E,CAAUF,EAAQC,GAElB,IAtGoB1kB,EAAaC,EAAYC,EAsGzC0kB,EAASnB,EAAagB,GAO1B,SAASA,EAAO1jE,EAAW8jE,GACzB,IAAI38H,EA8BJ,OA5JJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCA8HpB21E,CAAgBr9H,KAAM0hI,IAEtBv8H,EAAQ08H,EAAOluI,KAAKqM,OACdg+D,UAAYiiE,EAAK8B,gBAAgB/jE,EAAW8jE,EAAO9sG,UAKzD7vB,EAAM28H,OAASA,EAMf38H,EAAM/J,MAAQ,EAMd+J,EAAMhK,OAAS2mI,EAAO3mI,OAASgK,EAAM28H,OAAO/gC,WAC5C57F,EAAM68H,QAAU,EAMhB78H,EAAM2B,QAAU,KACT3B,EAgZT,OA5hBoB83G,EAuJPykB,GAvJoBxkB,EAuJZ,CAAC,CACpB/pH,IAAK,QACLM,MAAO,SAAeI,EAAIouI,GACxB,OAAOhC,EAAKxgI,MAAM5L,EAAIouI,KAOvB,CACD9uI,IAAK,gBACLM,MAAO,WACLuM,KAAK8G,QAAUm5H,EAAK8B,gBAAgB/hI,KAAKg+D,UAAUrlE,YAAY1C,SAAS4B,cAAc,SAAUmI,KAAK8hI,OAAO9sG,UAC5Gh1B,KAAKP,MAAMO,KAAK8G,QAAS,CACvBo7H,QAAS,QACTxlI,SAAU,WACVylI,WAAY,OACZC,iBAAkB,OAClBjnI,OAAQ6E,KAAK8hI,OAAO3mI,OAAS,QAG3B6E,KAAK8hI,OAAOO,YAAcriI,KAAK8hI,OAAOQ,eACxCtiI,KAAKP,MAAMO,KAAK8G,QAAS,CACvB1L,MAAO,OACPmnI,OAAQviI,KAAK8hI,OAAOU,WAAa,OAAS,OAC1CC,UAAWziI,KAAK8hI,OAAOY,cAAgB,SAAW,OAClDC,UAAW,WAIf3iI,KAAK4iI,uBAUN,CACDzvI,IAAK,cACLM,MAAO,SAAqBQ,EAAG4uI,IAC5BA,GAAa5uI,EAAE0N,iBAChB,IAKIuzB,EALA7yB,EAAU49H,EAAK8B,gBAAgB9tI,EAAE6uI,cAAgB7uI,EAAE6uI,cAAc,GAAK7uI,EAAG+L,KAAK8hI,OAAO9sG,UAAU3yB,QAC/F0gI,EAAO/iI,KAAK8G,QAAQhM,wBACpBkoI,EAAehjI,KAAK5E,MACpB6nI,EAAcjjI,KAAKkjI,WACnBC,EAAiBnjI,KAAKojI,kBAAkBL,EAAM1gI,GASlD,OALE6yB,GADGl1B,KAAK8hI,OAAOO,YAAcW,EAAeC,EACjCE,GAAkBnjI,KAAK8hI,OAAO/gC,WAAaiiC,IAAiB,GAE3DG,EAAiBnjI,KAAK8G,QAAQtE,YAAcxC,KAAK8G,QAAQu8H,aAAe,EAG/EpD,EAAK3rG,MAAMY,EAAU,EAAG,KAEhC,CACD/hC,IAAK,oBACLM,MAAO,SAA2B6vI,EAAajhI,GAC7C,OAAIrC,KAAK8hI,OAAOyB,IACPD,EAAYpsG,MAAQ70B,EAEpBA,EAAUihI,EAAY/nI,OAGhC,CACDpI,IAAK,qBACLM,MAAO,WACL,IAAImT,EAAS5G,KAEbA,KAAK8G,QAAQxH,iBAAiB,SAAS,SAAUrL,GAC/C,IAAIuvI,EAAgBvD,EAAK8B,gBAAgB9tI,EAAG2S,EAAOk7H,OAAO9sG,UACtDyuG,EAAkB78H,EAAOE,QAAQpL,aAAekL,EAAOE,QAAQ48H,aAEnE,GAAwB,IAApBD,EAAuB,CAEzB,IAAIV,EAAOn8H,EAAOE,QAAQhM,wBAE1B,GAAI0oI,EAAc9gI,SAAWqgI,EAAK7nG,OAASuoG,EAEzC,OAIA78H,EAAOk7H,OAAO6B,UAChB/8H,EAAOg9H,UAAU,QAAS3vI,EAAG2S,EAAOi9H,YAAY5vI,OAGpD+L,KAAK8G,QAAQxH,iBAAiB,YAAY,SAAUrL,GAC9C2S,EAAOk7H,OAAO6B,UAChB/8H,EAAOg9H,UAAU,WAAY3vI,EAAG2S,EAAOi9H,YAAY5vI,OAGvD+L,KAAK8G,QAAQxH,iBAAiB,UAAU,SAAUrL,GAChD,OAAO2S,EAAOg9H,UAAU,SAAU3vI,QAerC,CACDd,IAAK,YACLM,MAAO,SAAmB0rI,EAAOtvI,EAAQ4hB,EAAOC,GACzC1R,KAAK8jI,SAASj0I,IACjBmQ,KAAK+jI,YAGP/jI,KAAK8hI,OAAOkC,SAAWhkI,KAAKikI,SAAS9E,EAAO,EAAG1tH,EAAOC,GAAO1R,KAAKkkI,SAAS/E,EAAO,EAAG1tH,EAAOC,KAM7F,CACDve,IAAK,cACLM,MAAO,WACgB,OAAjBuM,KAAK8G,UACP9G,KAAK8G,QAAQtE,WAAa,KAS7B,CACDrP,IAAK,WACLM,MAAO,SAAkB6iC,GACvB,IAAI55B,EAAWsD,KAAK8G,QAAQu8H,YAAc/sG,EAC1Ct2B,KAAKmkI,mBAAmBznI,GAAU,KAUnC,CACDvJ,IAAK,qBACLM,MAAO,SAA4BiJ,EAAUorC,GAC3C,IAAItlC,EAAaxC,KAAK8G,QAAQtE,WAC1B4hI,KAAUpkI,KAAK8G,QAAQu9H,YAAc,GACrCC,EAAYtkI,KAAK8G,QAAQu8H,YAAcrjI,KAAK8G,QAAQu9H,YACpDhxI,EAASqJ,EAAW0nI,EACpBpyE,EAAS3+D,EAASmP,EAEtB,GAAiB,GAAb8hI,EAAJ,CAMA,IAAKx8F,IAAcs8F,GAAQpyE,GAAUA,EAASoyE,EAAM,CAElD,IAAInhG,EAAOjjC,KAAK8hI,OAAOyC,eAEvBthG,GAAQmhG,EACRnhG,GAAQqhG,EAERjxI,EAASmP,GADTwvD,EAAS50D,KAAKC,KAAK4lC,EAAM7lC,KAAKE,IAAI2lC,EAAM+uB,MAK1C3+D,EAAS+J,KAAKC,IAAI,EAAGD,KAAKE,IAAIgnI,EAAWjxI,MAE3BmP,IACZxC,KAAK8G,QAAQtE,WAAanP,MAS7B,CACDF,IAAK,aACLM,MAAO,WACL,IAAIwD,EAAI,EAER,GAAI+I,KAAK8G,QAAS,CAChB,IAAIi6F,EAAa/gG,KAAK8hI,OAAO/gC,WAO7B,GANA9pG,EAAImG,KAAKg6B,MAAMp3B,KAAK8G,QAAQtE,WAAau+F,GAMrC/gG,KAAK8hI,OAAOQ,aAAc,CAC5B,IAAIgC,KAAetkI,KAAK8G,QAAQu8H,YAActiC,EAAa/gG,KAAKkjI,YAChEjsI,EAAImG,KAAKE,IAAIgnI,EAAWlnI,KAAKC,IAAI,EAAGpG,KAIxC,OAAOA,IAQR,CACD9D,IAAK,WACLM,MAAO,WACL,OAAO2J,KAAKg6B,MAAMp3B,KAAKg+D,UAAUqmE,YAAcrkI,KAAK8hI,OAAO/gC,cAS5D,CACD5tG,IAAK,WACLM,MAAO,SAAkB2H,GACvB,GAAI4E,KAAK5E,OAASA,EAChB,OAAO,EAKT,GAFA4E,KAAK5E,MAAQA,EAET4E,KAAK8hI,OAAOO,YAAcriI,KAAK8hI,OAAOQ,aACxCtiI,KAAKP,MAAMO,KAAK8G,QAAS,CACvB1L,MAAO,SAEJ,CACL,IAAIopI,KAAcxkI,KAAK5E,MAAQ4E,KAAK8hI,OAAO/gC,YAAc,KACzD/gG,KAAKP,MAAMO,KAAK8G,QAAS,CACvB1L,MAAOopI,IAKX,OADAxkI,KAAKykI,cACE,IASR,CACDtxI,IAAK,YACLM,MAAO,SAAmB0H,GACxB,OAAIA,GAAU6E,KAAK7E,SAInB6E,KAAK7E,OAASA,EACd6E,KAAKP,MAAMO,KAAK8G,QAAS,CACvB3L,UAAW6E,KAAK7E,OAAS6E,KAAK8hI,OAAO/gC,YAAc,OAErD/gG,KAAKykI,cACE,KAQR,CACDtxI,IAAK,WACLM,MAAO,SAAkBixI,GACvB,IAAIC,EAAa,EAAI3kI,KAAK8hI,OAAO/gC,WAC7B6jC,EAAMxnI,KAAKg6B,MAAMstG,EAAY1kI,KAAK5E,OAASupI,EAE/C,GAAIC,EAAM5kI,KAAKgiI,SAAW4C,EAAM5kI,KAAKgiI,SAAW2C,EAAY,CAG1D,GAFA3kI,KAAKgiI,QAAU4C,EAEX5kI,KAAK8hI,OAAOQ,cAAgBtiI,KAAK8hI,OAAO+C,WAAY,CACtD,IAAIC,KAAY9kI,KAAK8G,QAAQu8H,YAAcqB,GAC3C1kI,KAAKmkI,mBAAmBW,EAAQ9kI,KAAK8hI,OAAOiD,uBAG9C/kI,KAAKglI,eAAeJ,MAOvB,CACDzxI,IAAK,UACLM,MAAO,WACLuM,KAAKilI,QAEDjlI,KAAK8G,UACH9G,KAAK8G,QAAQ/L,YAAciF,KAAKg+D,UAAUknE,YAC5CllI,KAAKg+D,UAAUvgE,YAAYuC,KAAK8G,QAAQo+H,YAG1CllI,KAAK8G,QAAU,QAWlB,CACD3T,IAAK,eACLM,MAAO,cAON,CACDN,IAAK,aACLM,MAAO,cAeN,CACDN,IAAK,WACLM,MAAO,SAAkB0rI,EAAOgG,EAAc1zH,EAAOC,MAepD,CACDve,IAAK,WACLM,MAAO,SAAkB0rI,EAAOgG,EAAc1zH,EAAOC,MAOpD,CACDve,IAAK,YACLM,MAAO,cAQN,CACDN,IAAK,iBACLM,MAAO,SAAwBiJ,SAxhBjBsgH,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAwhBLw0F,EAzbiB,CA0bxBzB,EAAKmF,UAEP/2I,EAAiB,QAAIqzI,EACrBtzI,EAAOC,QAAUA,EAAQ8uI,SAK3B,8BAMA,SAAgC/uI,EAAQC,EAAS0uI,GAC/C,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAGbsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IAAIg3I,EAAUpI,EAAuBF,EAErC,oBAEIkD,EAiBJ,SAAiC1xI,EAAK2xI,GACpC,IAAKA,GAAe3xI,GAAOA,EAAI6uH,WAC7B,OAAO7uH,EAGT,GAAY,OAARA,GAAiC,WAAjBD,EAAQC,IAAoC,oBAARA,EACtD,MAAO,CACL4uI,QAAS5uI,GAIb,IAAI4xI,EAAQC,EAAyBF,GAErC,GAAIC,GAASA,EAAMrmI,IAAIvL,GACrB,OAAO4xI,EAAM3/H,IAAIjS,GAGnB,IAAI8xI,EAAS,GACTC,EAAwBztI,OAAO2Q,gBAAkB3Q,OAAO+4C,yBAE5D,IAAK,IAAIz4C,KAAO5E,EACd,GAAY,YAAR4E,GAAqBN,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAK4E,GAAM,CACvE,IAAIwhB,EAAO2rH,EAAwBztI,OAAO+4C,yBAAyBr9C,EAAK4E,GAAO,KAE3EwhB,IAASA,EAAKnU,KAAOmU,EAAKrU,KAC5BzN,OAAO2Q,eAAe68H,EAAQltI,EAAKwhB,GAEnC0rH,EAAOltI,GAAO5E,EAAI4E,GAWxB,OANAktI,EAAOlD,QAAU5uI,EAEb4xI,GACFA,EAAM7/H,IAAI/R,EAAK8xI,GAGVA,EAvDEE,CAAwBxD,EAEnC,wBAEIuI,EAAWrI,EAAuBF,EAEtC,gCAEA,SAASqD,EAAyBF,GAChC,GAAuB,oBAAZngI,QAAwB,OAAO,KAC1C,IAAIygI,EAAoB,IAAIzgI,QACxB0gI,EAAmB,IAAI1gI,QAC3B,OAAQqgI,EAA2B,SAAkCF,GACnE,OAAOA,EAAcO,EAAmBD,IACvCN,GA4CL,SAASjD,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAUb,SAASyuH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IA+BlD,SAAS2xE,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAGF,SAAgCv5D,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EARAqzI,CAAuBrzI,GAwBhC,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAWzB,IAAI0/F,EAA2B,SAAUC,IA5FzC,SAAmB78E,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GA8E1Cm5E,CAAU2D,EAAaC,GAEvB,IAxGoBvoB,EAAaC,EAAYC,EAwGzC0kB,EAASnB,EAAa6E,GAO1B,SAASA,EAAYvnE,EAAW8jE,GAC9B,IAAI38H,EA4EJ,OA5MJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAgIpB21E,CAAgBr9H,KAAMulI,IAEtBpgI,EAAQ08H,EAAOluI,KAAKqM,KAAMg+D,EAAW8jE,IAK/B2D,eAAiB3D,EAAO2D,eAK9BtgI,EAAMugI,sBAAwBtoI,KAAKg6B,MAAM0qG,EAAO2D,eAAiB3D,EAAO/gC,YAQxE57F,EAAM24H,kBAAoBgE,EAAO7D,WAAa6D,EAAO5D,cAKrD/4H,EAAM06H,UAAY,GAAMiC,EAAO/gC,WAO/B57F,EAAMwgI,SAAW,GAKjBxgI,EAAMygI,aAAe,KAOrBzgI,EAAM0gI,WAAaP,EAASnI,QAO5Bh4H,EAAMs4H,wBAA0BqE,EAAOgE,yBAQvC3gI,EAAM4gI,QAAU,EAAI3oI,KAAKiwE,KAAKy0D,EAAO/gC,WAAa,GAOlD57F,EAAM6gI,UAAYlE,EAAOkE,WAAa,EAOtC7gI,EAAM6vB,SAAW8sG,EAAO9sG,SACjB7vB,EAyiBT,OAruBoB83G,EAmMPsoB,EAnMoBroB,EAmMP,CAAC,CACzB/pH,IAAK,OACLM,MAAO,WACLuM,KAAKimI,gBACLjmI,KAAKkmI,mBAON,CACD/yI,IAAK,iBACLM,MAAO,WACLuM,KAAK4lI,aAAe3F,EAAK8B,gBAAgB/hI,KAAK8G,QAAQnO,YAAY1C,SAAS4B,cAAc,SAAUmI,KAAK8hI,OAAO9sG,UAC/Gh1B,KAAKP,MAAMO,KAAK4lI,aAAc,CAC5BlpI,SAAU,WACVypI,OAAQ,EACR5qI,KAAM,EACNC,IAAK,EACL0/B,OAAQ,EACR2kB,SAAU,SACVzkD,MAAO,IACP8mI,QAAS,OACTkE,UAAW,aACXC,iBAAkB,QAClBC,cAAe,SAEjBtmI,KAAKumI,YACLvmI,KAAKwmI,iBAMN,CACDrzI,IAAK,eACLM,MAAO,WACLuM,KAAKP,MAAMO,KAAK4lI,aAAc,CAC5Ba,iBAAkBzmI,KAAK8hI,OAAO4E,YAAc,KAC5CC,iBAAkB3mI,KAAK8hI,OAAO8E,gBAOjC,CACDzzI,IAAK,aACLM,MAAO,WAML,IALA,IAAImT,EAAS5G,KAET49H,EAAaxgI,KAAKg6B,MAAMp3B,KAAK5E,MAAQ4E,KAAK8hI,OAAO/gC,YACjD8lC,EAAmBzpI,KAAKiwE,KAAKuwD,GAAc59H,KAAK0lI,sBAAwB1lI,KAAK+lI,UAE1E/lI,KAAK2lI,SAAS91I,OAASg3I,GAC5B7mI,KAAKumI,YAIP,KAAOvmI,KAAK2lI,SAAS91I,OAASg3I,GAC5B7mI,KAAK8mI,eAGP,IAAIC,EAAc/mI,KAAKylI,eAAiBzlI,KAAK+lI,QACzCiB,EAAahnI,KAAK2lI,SAAS91I,OAAS,EACxCmQ,KAAK2lI,SAASzyI,SAAQ,SAAU+zI,EAAOr3I,GACjCA,GAAKo3I,IACPD,EAAcngI,EAAOxL,MAAQwL,EAAO6+H,eAAiBuB,GAGvDpgI,EAAOsgI,iBAAiBD,EAAOF,EAAangI,EAAOzL,QAEnD8rI,EAAMlD,iBAQT,CACD5wI,IAAK,YACLM,MAAO,WACL,IAAIwzI,EAAQ,IAAIjnI,KAAK6lI,WACrBoB,EAAMxJ,wBAA0Bz9H,KAAKy9H,wBACrCwJ,EAAMnJ,kBAAoB99H,KAAK89H,kBAC/BmJ,EAAMpH,UAAY7/H,KAAK6/H,UACvB,IAAIsH,EAAannI,KAAK0lI,sBAAwB1lI,KAAK2lI,SAAS91I,OAExDytI,EAAO2C,EAAK8B,gBAAgB/hI,KAAK8G,QAAQnO,YAAY1C,SAAS4B,cAAc,WAAYmI,KAAK8hI,OAAO9sG,UAYxG,GAXAh1B,KAAKP,MAAM69H,EAAM,CACf5gI,SAAU,WACVypI,OAAQ,EACR5qI,KAAM4rI,EAAa,KACnB3rI,IAAK,EACL0/B,OAAQ,EACR//B,OAAQ,OACRmrI,cAAe,SAEjBW,EAAMG,SAAS9J,GAEXt9H,KAAK89H,kBAAmB,CAC1B,IAAI5oG,EAAW+qG,EAAK8B,gBAAgB/hI,KAAK4lI,aAAajtI,YAAY1C,SAAS4B,cAAc,WAAYmI,KAAK8hI,OAAO9sG,UACjHh1B,KAAKP,MAAMy1B,EAAU,CACnBx4B,SAAU,WACVnB,KAAM4rI,EAAa,KACnB3rI,IAAK,EACL0/B,OAAQ,EACR//B,OAAQ,SAEV8rI,EAAMI,aAAanyG,GAGrBl1B,KAAK2lI,SAAS30I,KAAKi2I,KAOpB,CACD9zI,IAAK,eACLM,MAAO,WACL,IAAI6zI,EAAYtnI,KAAK2lI,SAAS3lI,KAAK2lI,SAAS91I,OAAS,GAErDy3I,EAAUhK,KAAKiK,cAAc9pI,YAAY6pI,EAAUhK,KAAK4H,YAEpDllI,KAAK89H,mBACPwJ,EAAUpyG,SAASqyG,cAAc9pI,YAAY6pI,EAAUpyG,SAASgwG,YAI9DoC,IACFA,EAAUE,UACVF,EAAY,MAGdtnI,KAAK2lI,SAAShxI,QAUf,CACDxB,IAAK,mBACLM,MAAO,SAA0BwzI,EAAO7rI,EAAOD,GAC7C,IAAIwiI,EAAevgI,KAAKg6B,MAAMh8B,EAAQ4E,KAAK8hI,OAAO/gC,YAC9C68B,EAAaxgI,KAAKg6B,MAAMp3B,KAAK5E,MAAQ4E,KAAK8hI,OAAO/gC,YAErDkmC,EAAMC,iBAAiBvJ,EAAcC,EAAYxiI,EAAOD,GAExD6E,KAAKP,MAAMO,KAAK4lI,aAAc,CAC5B1D,QAAS,YAOZ,CACD/uI,IAAK,YACLM,MAAO,WACL,IAAIuT,EAAShH,KAEbigI,EAAKr1D,OAAM,WACT5jE,EAAO2+H,SAASzyI,SAAQ,SAAU+zI,GAChC,OAAOA,EAAMlD,iBAFjB9D,KAoBD,CACD9sI,IAAK,WACLM,MAAO,SAAkB0rI,EAAOgG,EAAc1zH,EAAOC,GACnD,IAAI1B,EAAShQ,KAEb,OAAOA,KAAKynI,YAAYtI,EAAOgG,EAAc1zH,EAAOC,GAAK,SAAUtB,GACjE,IAAIgvH,EAAShvH,EAAKgvH,OACdsI,EAAat3H,EAAKs3H,WAElB3qI,GADSqT,EAAKjV,OACJiV,EAAKrT,SACfsiI,EAAQjvH,EAAKivH,MACbF,EAAQ/uH,EAAK+uH,MACbwI,EAAKv3H,EAAK+0H,aAGd,QAAcjqI,IAAVuW,EAeJ,IAVA,IAAIm2H,EAAiBF,EAAa,EAAI,EAClC73I,EAASsvI,EAAMtvI,OAAS+3I,EACxB9yG,EAAM9kB,EAAO8xH,OAAOkC,SAAWh0H,EAAO8xH,OAAO/gC,WAE7ChoC,EAAOjkC,GADwB,OAAzB9kB,EAAO8xH,OAAO+F,OAAkBzqI,KAAKC,IAAI2S,EAAO8xH,OAAO/gC,cAAejsE,EAAM,IAAM13B,KAAKC,IAAI2S,EAAO8xH,OAAO/gC,WAAY/wF,EAAO8xH,OAAO+F,OAAS73H,EAAO8xH,OAAO/gC,aAEhK7P,EAAQrhG,EAASmgB,EAAO5U,MAExByJ,EAAO6M,EACPo2H,EAFQr2H,EAIIq2H,EAAYjjI,EAAMijI,GAAa/uE,EAAM,CAEnD,IAAIwmE,EAAO,EACPwI,EAAiB3qI,KAAK8C,MAAM4nI,EAAY52C,GAAS02C,EAEjDI,EAAe5qI,KAAK8C,OAAO4nI,EAAY/uE,GAAQm4B,GAAS02C,EAE5D,EAAG,CAED,IAAIK,EAAU7qI,KAAK8sC,IAAIi1F,EAAM4I,IAEzBE,EAAU1I,IACZA,EAAO0I,GAGTF,GAAkBH,QACXG,EAAiBC,GAG1B,IAAI71G,EAAI/0B,KAAKg6B,MAAMmoG,EAAOH,EAASC,GAG1B,GAALltG,GAAUniB,EAAO8xH,OAAOoG,eAC1B/1G,EAAIniB,EAAO8xH,OAAOoG,cAGpBl4H,EAAO6uH,SAASiJ,EAAY93H,EAAO6vH,UAAWR,EAAQltG,EAAIp1B,EAAS+3B,EAAM9kB,EAAO6vH,UAAe,EAAJ1tG,EAAOniB,EAAOg2H,UAAW2B,SAkBzH,CACDx0I,IAAK,WACLM,MAAO,SAAkB0rI,EAAOgG,EAAc1zH,EAAOC,GACnD,IAAIvB,EAASnQ,KAEb,OAAOA,KAAKynI,YAAYtI,EAAOgG,EAAc1zH,EAAOC,GAAK,SAAU4vC,GACjE,IAAI89E,EAAS99E,EAAM89E,OACfsI,EAAapmF,EAAMomF,WAEnB3qI,GADSukD,EAAMnmD,OACLmmD,EAAMvkD,SAChBsiI,EAAQ/9E,EAAM+9E,MACdF,EAAQ79E,EAAM69E,MACdgG,EAAe7jF,EAAM6jF,aAEzB,IAAKuC,EAAY,CAKf,IAJA,IAAIS,EAAiB,GACjBzkD,EAAMy7C,EAAMtvI,OACZD,EAAI,EAEAA,EAAI8zF,EAAK9zF,IACfu4I,EAAe,EAAIv4I,GAAKuvI,EAAMvvI,GAC9Bu4I,EAAe,EAAIv4I,EAAI,IAAMuvI,EAAMvvI,GAGrCuvI,EAAQgJ,OAKIjtI,IAAVuW,GACFtB,EAAOi4H,SAASjJ,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,EAAKyzH,GAI7Dh1H,EAAO0uH,SAAS,EAAGQ,EAAQtiI,EAAUoT,EAAO0vH,UAAW1vH,EAAO/U,MAAO+U,EAAO0vH,UAAW1vH,EAAO61H,UAAWb,QAiB5G,CACDhyI,IAAK,WACLM,MAAO,SAAkB0rI,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,EAAKyzH,GAClE,IAAIphH,EAAS/jB,KAETwtD,EAAQxtD,KAAK8hI,OAAOuG,qBAAqBC,cAAcnD,IAAiB,GACxElH,EAAYzwE,EAAMywE,UAClBC,EAAgB1wE,EAAM0wE,cAE1Bl+H,KAAK2lI,SAASzyI,SAAQ,SAAU+zI,EAAOr3I,GACrCm0B,EAAOwkH,cAActB,EAAOhJ,EAAWC,GAEvCn6G,EAAOykH,sBAAsBvB,EAAOljH,EAAO+9G,OAAO9sG,UAElDiyG,EAAMwB,UAAUtJ,EAAOC,EAAQC,EAAOtiI,EAAS0U,EAAOC,QAczD,CACDve,IAAK,WACLM,MAAO,SAAkBwD,EAAGgF,EAAGb,EAAOD,EAAQujI,EAAQyG,GAKpD,IAJA,IAAIuD,EAActrI,KAAK8C,MAAMjJ,EAAI+I,KAAKylI,gBAClCkD,EAAYvrI,KAAKE,IAAIF,KAAKiwE,MAAMp2E,EAAImE,GAAS4E,KAAKylI,gBAAkB,EAAGzlI,KAAK2lI,SAAS91I,QACrFD,EAAI84I,EAEA94I,EAAI+4I,EAAW/4I,IAAK,CAC1B,IAAIq3I,EAAQjnI,KAAK2lI,SAAS/1I,GACtBu3I,EAAav3I,EAAIoQ,KAAKylI,eACtBmD,EAAe,CACjBC,GAAIzrI,KAAKC,IAAIpG,EAAGrH,EAAIoQ,KAAKylI,gBACzBqD,GAAI7sI,EACJ6hH,GAAI1gH,KAAKE,IAAIrG,EAAImE,EAAOxL,EAAIoQ,KAAKylI,eAAiBwB,EAAM3J,KAAKliI,OAC7D2tI,GAAI9sI,EAAId,GAGV,GAAIytI,EAAaC,GAAKD,EAAa9qB,GAAI,CACrC,IAAI3uD,EAAQnvD,KAAK8hI,OAAOuG,qBAAqBC,cAAcnD,IAAiB,GACxElH,EAAY9uE,EAAM8uE,UAClBC,EAAgB/uE,EAAM+uE,cAE1Bl+H,KAAKuoI,cAActB,EAAOhJ,EAAWC,GACrCl+H,KAAKwoI,sBAAsBvB,EAAOjnI,KAAK8hI,OAAO9sG,UAC9CiyG,EAAM+B,UAAUJ,EAAaC,GAAK1B,EAAYyB,EAAaE,GAAIF,EAAa9qB,GAAK8qB,EAAaC,GAAID,EAAaG,GAAKH,EAAaE,GAAIpK,OAW1I,CACDvrI,IAAK,cACLM,MAAO,SAAqB0xI,GAC1B,OAAOnlI,KAAK8hI,OAAOmH,eAAiBjpI,KAAK8hI,OAAOuG,qBAAqBa,eAAe7N,SAAS8J,KAoB9F,CACDhyI,IAAK,cACLM,MAAO,SAAqB0rI,EAAOgG,EAAc1zH,EAAOC,EAAKziB,EAAIk6I,EAAWC,GAC1E,IAAI1kH,EAAS1kB,KAEb,OAAOigI,EAAKr1D,OAAM,WAEhB,GAAIu0D,EAAM,aAAc3uI,MAAO,CAC7B,IAAI64I,EAAWlK,EAEf,GAAIz6G,EAAOo9G,OAAOmH,cAAe,CAC/B,IAQIK,EARAC,EAAmBF,EAASr3I,QAAO,SAAUyH,EAAG7J,GAClD,OAAQ80B,EAAO8kH,YAAY55I,MAgB7B,OAbK80B,EAAOo9G,OAAOuG,qBAAqBoB,SACtC/kH,EAAOglH,UAAUtsI,KAAKC,IAAIksI,EAAiB15I,OAAQ,GAAK60B,EAAOo9G,OAAO3mI,OAASupB,EAAOo9G,OAAO/gC,YAK3Fr8E,EAAOo9G,OAAOuG,sBAAwB3jH,EAAOo9G,OAAOuG,qBAAqBsB,wBAE3EL,EAAgBrJ,EAAK5iI,IAAIgsI,EAAS9sI,KAAI,SAAUqtI,GAC9C,OAAO3J,EAAK4J,OAAOD,QAIhBP,EAASn2I,SAAQ,SAAU02I,EAAch6I,GAC9C,OAAO80B,EAAO+iH,YAAYmC,EAAch6I,EAAG6hB,EAAOC,EAAKziB,EAAIs6I,EAAiBl6I,QAAQu6I,GAAeN,MAIvGnK,EAAQkK,EAAS,GAInB,IAAI3kH,EAAO8kH,YAAYrE,GAAvB,CAOA,IAAI/F,EAAS,EAAI16G,EAAOo9G,OAAOgI,UAE3BplH,EAAOo9G,OAAOiI,YAChB3K,OAA2BlkI,IAAlBkuI,EAA8BnJ,EAAK4J,OAAO1K,GAASiK,GAK9D,IAAI1B,EAAa,GAAGh7H,KAAK/Y,KAAKwrI,GAAO,SAAUnnI,GAC7C,OAAOA,EAAM,KAEXmD,EAASupB,EAAOo9G,OAAO3mI,OAASupB,EAAOo9G,OAAO/gC,WAC9Cs+B,EAAQlkI,EAAS,EACjB4B,EAAU5B,EAASguI,GAAa,EAMpC,OAJIzkH,EAAOo9G,OAAOuG,sBAAwB3jH,EAAOo9G,OAAOuG,qBAAqBoB,UAC3E1sI,EAAU,GAGL9N,EAAG,CACRmwI,OAAQA,EACRsI,WAAYA,EACZvsI,OAAQA,EACR4B,QAASA,EACTsiI,MAAOA,EACPF,MAAOA,EACPgG,aAAcA,OAjEXlF,KA6ER,CACD9sI,IAAK,gBACLM,MAAO,SAAuBwzI,GAC5B,IAAIhJ,EAAY1wI,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAKyS,KAAK8hI,OAAO7D,UAC5FC,EAAgB3wI,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAKyS,KAAK8hI,OAAO5D,cACpG+I,EAAMsB,cAActK,EAAWC,KAShC,CACD/qI,IAAK,wBACLM,MAAO,SAA+BwzI,GACpC,IAAIjyG,EAAWznC,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,IAAmBA,UAAU,GAC9E05I,EAAMuB,sBAAsBxzG,KAiB7B,CACD7hC,IAAK,WACLM,MAAO,SAAkBioF,EAAQokD,EAAS9wI,GACxC,GAAa,SAATA,EACF,OAAOg2B,QAAQxzB,IAAIwO,KAAK2lI,SAASppI,KAAI,SAAU0qI,GAC7C,OAAOA,EAAM+C,SAAStuD,EAAQokD,EAAS9wI,OAEpC,GAAa,YAATA,EAAoB,CAC7B,IAAIi7I,EAASjqI,KAAK2lI,SAASppI,KAAI,SAAU0qI,GACvC,OAAOA,EAAM+C,SAAStuD,EAAQokD,EAAS9wI,MAEzC,OAAOi7I,EAAOp6I,OAAS,EAAIo6I,EAASA,EAAO,MAS9C,CACD92I,IAAK,iBACLM,MAAO,SAAwBiJ,GAC7BsD,KAAKP,MAAMO,KAAK4lI,aAAc,CAC5BxqI,MAAOsB,EAAW,UA/tBpBwgH,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAiuBLq4F,EAhoBsB,CAioB7BF,EAAQlI,SAEV9uI,EAAiB,QAAIk3I,EACrBn3I,EAAOC,QAAUA,EAAQ8uI,SAK3B,iCAMA,SAAmC/uI,EAAQC,EAAS0uI,GAClD,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAQb,IAIgCA,EAYhC,SAASyuH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAalD,SAASu+F,IAkBP,OAhBEA,EADqB,qBAAZrJ,SAA2BA,QAAQrgI,IACrCqgI,QAAQrgI,IAER,SAAcnN,EAAQqrG,EAAUyrC,GACrC,IAAIttB,EAAOutB,EAAe/2I,EAAQqrG,GAElC,GAAKme,EAAL,CACA,IAAIloG,EAAO9hB,OAAO+4C,yBAAyBixE,EAAMne,GAEjD,OAAI/pF,EAAKnU,IACAmU,EAAKnU,IAAI7M,KAAKpG,UAAUsC,OAAS,EAAIwD,EAAS82I,GAGhDx1H,EAAKlhB,QAITy2I,EAAK32I,MAAMyM,KAAMzS,WAG1B,SAAS68I,EAAer3I,EAAQ2rG,GAC9B,MAAQ7rG,OAAOlE,UAAUmD,eAAe6B,KAAKZ,EAAQ2rG,IAEpC,QADf3rG,EAASquI,EAAgBruI,MAI3B,OAAOA,EAqBT,SAASuqH,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAGF,SAAgCv5D,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EARAqzI,CAAuBrzI,GAwBhC,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAvJzBhzC,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAiKrB,IAAIg8I,EAAoC,SAAUC,IA9FlD,SAAmB3hF,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GAgF1Cm5E,CAAUyI,EAAsBC,GAEhC,IAxIoBrtB,EAAaC,EAAYC,EAwIzC0kB,EAASnB,EAAa2J,GAQ1B,SAASA,EAAqBvI,GAC5B,IAAI38H,EAWJ,OA5KJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAiKpB21E,CAAgBr9H,KAAMqqI,IAEtBllI,EAAQ08H,EAAOluI,KAAKqM,KAAM8hI,IAGpBA,OAASA,EAGf38H,EAAMolI,mBAAqB,KACpBplI,EAkET,OA9NoB83G,EAmKPotB,GAnKoBntB,EAmKE,CAAC,CAClC/pH,IAAK,OACLM,MAAO,WACLuM,KAAKwqI,gBAAgBxqI,KAAK8hI,OAAO2I,WACjCzqI,KAAK0qI,cACL1qI,KAAK2qI,mBACL3qI,KAAK4qI,mBACL5qI,KAAK6qI,uBAYN,CACD13I,IAAK,QACLM,MAAO,SAAeoqD,EAAOshF,EAAO1vF,GAClCy6F,EAAK9I,EAAgBiJ,EAAqB17I,WAAY,QAASqR,MAAMrM,KAAKqM,KAAM69C,EAAOshF,EAAO1vF,GAE9FzvC,KAAK8qI,yBAAyBjtF,KAS/B,CACD1qD,IAAK,2BACLM,MAAO,SAAkCs3I,GACvC/qI,KAAKuqI,mBAAqBvqI,KAAK48H,GAAGkO,yBAAyBC,GAC3D/qI,KAAKuqI,mBAAmBS,QAAQhrI,KAAKirI,YAEtC,CACD93I,IAAK,OACLM,MAAO,SAAcge,EAAOC,GAE1B,OADA1R,KAAKkrI,qBACEhB,EAAK9I,EAAgBiJ,EAAqB17I,WAAY,OAAQqR,MAAMrM,KAAKqM,KAAMyR,EAAOC,KAO9F,CACDve,IAAK,UACLM,MAAO,WACLy2I,EAAK9I,EAAgBiJ,EAAqB17I,WAAY,UAAWqR,MAAMrM,KAAKqM,MAE5EA,KAAKmrI,uBAzNOnuB,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IA0NLm9F,EAzF+B,GA3JR97I,EAJWwuI,EAE3C,2BAGgBxuI,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,IAmPG4uI,SAEhB9uI,EAAiB,QAAIg8I,EACrBj8I,EAAOC,QAAUA,EAAQ8uI,SAK3B,wBAMA,SAA2B/uI,EAAQC,EAAS0uI,GAC1C,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAGbsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IA0DgCE,EA1D5B68I,GA0D4B78I,EA1DOwuI,EAEvC,uBAyDgBxuI,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAxDT0xI,EAaJ,SAAiC1xI,EAAK2xI,GACpC,IAAKA,GAAe3xI,GAAOA,EAAI6uH,WAC7B,OAAO7uH,EAGT,GAAY,OAARA,GAAiC,WAAjBD,EAAQC,IAAoC,oBAARA,EACtD,MAAO,CACL4uI,QAAS5uI,GAIb,IAAI4xI,EAAQC,EAAyBF,GAErC,GAAIC,GAASA,EAAMrmI,IAAIvL,GACrB,OAAO4xI,EAAM3/H,IAAIjS,GAGnB,IAAI8xI,EAAS,GACTC,EAAwBztI,OAAO2Q,gBAAkB3Q,OAAO+4C,yBAE5D,IAAK,IAAIz4C,KAAO5E,EACd,GAAY,YAAR4E,GAAqBN,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAK4E,GAAM,CACvE,IAAIwhB,EAAO2rH,EAAwBztI,OAAO+4C,yBAAyBr9C,EAAK4E,GAAO,KAE3EwhB,IAASA,EAAKnU,KAAOmU,EAAKrU,KAC5BzN,OAAO2Q,eAAe68H,EAAQltI,EAAKwhB,GAEnC0rH,EAAOltI,GAAO5E,EAAI4E,GAWxB,OANAktI,EAAOlD,QAAU5uI,EAEb4xI,GACFA,EAAM7/H,IAAI/R,EAAK8xI,GAGVA,EAnDEE,CAAwBxD,EAEnC,wBAEA,SAASqD,EAAyBF,GAChC,GAAuB,oBAAZngI,QAAwB,OAAO,KAC1C,IAAIygI,EAAoB,IAAIzgI,QACxB0gI,EAAmB,IAAI1gI,QAC3B,OAAQqgI,EAA2B,SAAkCF,GACnE,OAAOA,EAAcO,EAAmBD,IACvCN,GAwDL,SAASljB,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAalD,SAASu+F,IAkBP,OAhBEA,EADqB,qBAAZrJ,SAA2BA,QAAQrgI,IACrCqgI,QAAQrgI,IAER,SAAcnN,EAAQqrG,EAAUyrC,GACrC,IAAIttB,EAAOutB,EAAe/2I,EAAQqrG,GAElC,GAAKme,EAAL,CACA,IAAIloG,EAAO9hB,OAAO+4C,yBAAyBixE,EAAMne,GAEjD,OAAI/pF,EAAKnU,IACAmU,EAAKnU,IAAI7M,KAAKpG,UAAUsC,OAAS,EAAIwD,EAAS82I,GAGhDx1H,EAAKlhB,QAITy2I,EAAK32I,MAAMyM,KAAMzS,WAG1B,SAAS68I,EAAer3I,EAAQ2rG,GAC9B,MAAQ7rG,OAAOlE,UAAUmD,eAAe6B,KAAKZ,EAAQ2rG,IAEpC,QADf3rG,EAASquI,EAAgBruI,MAI3B,OAAOA,EAqBT,SAASuqH,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAGF,SAAgCv5D,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EARAqzI,CAAuBrzI,GAwBhC,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAOzB,IAAIwlG,EAA4B,SAAUC,IAxF1C,SAAmB3iF,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GA0E1Cm5E,CAAUyJ,EAAcC,GAExB,IAlIoBruB,EAAaC,EAAYC,EAkIzC0kB,EAASnB,EAAa2K,GAQ1B,SAASA,EAAavJ,GACpB,IAAI38H,EAkDJ,OA7MJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCA2JpB21E,CAAgBr9H,KAAMqrI,IAEtBlmI,EAAQ08H,EAAOluI,KAAKqM,KAAM8hI,IAGpBA,OAASA,EAOf38H,EAAM04C,MAAQ,CACZ7+B,YAAa,EACblN,SAAU,EACVkD,QAAQ,EACRkuB,aAAc,EACd/5B,KAAM,aACN+L,MAAO,aACPqT,OAAQ,GAIVpjB,EAAMkrD,UAAYyxE,EAAOzxE,UAAUj0D,cAGnC+I,EAAMomI,gBAAkBzJ,EAAOyJ,gBAG/BpmI,EAAMg6H,MAAQ,KAGdh6H,EAAM+9B,aAAe,EAGrB/9B,EAAMojB,OAAS,EAGfpjB,EAAMqmI,SAAU,EAGhBrmI,EAAMszD,OAAS,KAGftzD,EAAMsmI,UAAY,KAGlBtmI,EAAMumI,eAAiB,GAChBvmI,EAwcT,OAroBoB83G,EAoMPouB,GApMoBnuB,EAoMN,CAAC,CAC1B/pH,IAAK,OACLM,MAAO,WACLuM,KAAKwqI,gBAAgBxqI,KAAK8hI,OAAO2I,WACjCzqI,KAAK0qI,gBAMN,CACDv3I,IAAK,uBACLM,MAAO,WACL,IAAImT,EAAS5G,KAEbA,KAAK0rI,eAAe95I,MAAQ,WAC1BgV,EAAOg9H,UAAU,QAAS,gCAG5B5jI,KAAK0rI,eAAej5F,QAAU,WAC5B7rC,EAAOg9H,UAAU,YAGnB5jI,KAAK0rI,eAAeljH,MAAQ,WAC1B5hB,EAAOg9H,UAAU,WAKnB5jI,KAAK0rI,eAAeviI,KAAO,WACzBvC,EAAOg9H,UAAU,SAGnB5jI,KAAK0rI,eAAex2H,MAAQ,WAC1BtO,EAAOg9H,UAAU,UAGnB5jI,KAAK0rI,eAAe94F,OAAS,SAAU72C,GACrC6K,EAAOg9H,UAAU,SAGnB5jI,KAAK0rI,eAAeC,aAAe,SAAU5vI,GAC3C6K,EAAO4kI,QAAU5kI,EAAOi3C,MAAMx1B,MAE1BzhB,EAAO4kI,QACT5kI,EAAO2hB,OAAS,EAEhB3hB,EAAO2hB,OAAS3hB,EAAOi3C,MAAMt1B,OAG/B3hB,EAAOg9H,UAAU,WAInB/wI,OAAOC,KAAKkN,KAAK0rI,gBAAgBx4I,SAAQ,SAAUuW,GACjD7C,EAAOi3C,MAAMz+C,oBAAoBqK,EAAI7C,EAAO8kI,eAAejiI,IAE3D7C,EAAOi3C,MAAMv+C,iBAAiBmK,EAAI7C,EAAO8kI,eAAejiI,SAO3D,CACDtW,IAAK,cACLM,MAAO,WACL,IAAIuT,EAAShH,KAabA,KAAKiD,GAAG,QAXa,SAAS2oI,IACxB5kI,EAAO6kI,aAIX7kI,EAAO48H,UAAU,eAAgB58H,EAAO8kI,kBAGxC7L,EAAKr1D,MAAMghE,EAAX3L,OAMFjgI,KAAKiD,GAAG,SAAS,WACf+D,EAAO48H,UAAU,eAAgB58H,EAAO8kI,uBAe3C,CACD34I,IAAK,OACLM,MAAO,SAAc+nB,EAAKwiD,EAAWmhE,EAAO1vF,GAC1C,IAAIoO,EAAQ5nD,SAAS4B,cAAcmI,KAAKqwD,WACxCxS,EAAMzoC,SAAWpV,KAAK8hI,OAAOiK,cAC7BluF,EAAM9H,SAAW/1C,KAAK8hI,OAAO/rF,WAAY,EACzC8H,EAAMpO,QAAqB,MAAXA,EAAkB,OAASA,EAC3CoO,EAAMxqC,IAAMmI,EACZqiC,EAAMp+C,MAAMrE,MAAQ,OACpB,IAAI4wI,EAAYhuE,EAAU1mE,cAAc0I,KAAKqwD,WAEzC27E,GACFhuE,EAAUvgE,YAAYuuI,GAGxBhuE,EAAUrlE,YAAYklD,GAEtB79C,KAAKisI,MAAMpuF,EAAOshF,EAAO1vF,KAS1B,CACDt8C,IAAK,UACLM,MAAO,SAAiBy4I,EAAK/M,GAC3B+M,EAAI92H,SAAWpV,KAAK8hI,OAAOiK,cAC3BG,EAAIn2F,SAAW/1C,KAAK8hI,OAAO/rF,WAAY,EAEvC/1C,KAAKisI,MAAMC,EAAK/M,EAAO+M,EAAIz8F,WAc5B,CACDt8C,IAAK,QACLM,MAAO,SAAeoqD,EAAOshF,EAAO1vF,GAElC,KAAMoO,aAAiB3R,mBAAuD,qBAA3B2R,EAAMv+C,iBACvD,MAAM,IAAIvN,MAAM,gDAQO,mBAAd8rD,EAAMh+B,MAAwBs/G,GAAoB,QAAX1vF,GAIhDoO,EAAMh+B,OAGR7f,KAAK69C,MAAQA,EAEb79C,KAAKmsI,uBAELnsI,KAAKm/H,MAAQA,EACbn/H,KAAKyrI,UAAY,KACjBzrI,KAAKy4D,OAAS,KACdz4D,KAAKwrI,QAAU3tF,EAAMx1B,MACrBroB,KAAKwqI,gBAAgBxqI,KAAKkjC,cAC1BljC,KAAK2oB,UAAU3oB,KAAKuoB,UAQrB,CACDp1B,IAAK,WACLM,MAAO,WACL,OAAQuM,KAAK69C,OAAS79C,KAAK69C,MAAM7oC,SAQlC,CACD7hB,IAAK,cACLM,MAAO,WACL,GAAIuM,KAAKosI,iBACP,OAAOpsI,KAAKosI,iBAGd,IAAIt6H,GAAY9R,KAAKy4D,QAAUz4D,KAAK69C,OAAO/rC,SAO3C,OALIA,GAAYwgB,MAEdxgB,EAAW9R,KAAK69C,MAAMv1B,SAAS5W,IAAI,IAG9BI,IASR,CACD3e,IAAK,iBACLM,MAAO,WACL,OAAOuM,KAAK69C,OAAS79C,KAAK69C,MAAM7+B,cAQjC,CACD7rB,IAAK,oBACLM,MAAO,WACL,OAAOuM,KAAK8rI,iBAAmB9rI,KAAKqsI,eAAiB,IAQtD,CACDl5I,IAAK,kBACLM,MAAO,WACL,OAAOuM,KAAKkjC,cAAgBljC,KAAK69C,MAAM3a,eAQxC,CACD/vC,IAAK,kBACLM,MAAO,SAAyBA,GAC9BuM,KAAKkjC,aAAezvC,GAAS,EAC7BuM,KAAK69C,MAAM3a,aAAeljC,KAAKkjC,eAQhC,CACD/vC,IAAK,SACLM,MAAO,SAAgBge,GACR,MAATA,GAAkBxD,MAAMwD,KAC1BzR,KAAK69C,MAAM7+B,YAAcvN,GAG3BzR,KAAKssI,iBAYN,CACDn5I,IAAK,OACLM,MAAO,SAAcge,EAAOC,GAC1B1R,KAAK06D,OAAOjpD,GACZ,IAAIspC,EAAU/6C,KAAK69C,MAAM10C,OAEzB,OADAuI,GAAO1R,KAAKusI,WAAW76H,GAChBqpC,IASR,CACD5nD,IAAK,QACLM,MAAO,WACL,IAAIsnD,EAOJ,OALI/6C,KAAK69C,QACP9C,EAAU/6C,KAAK69C,MAAM3oC,SAGvBlV,KAAKssI,eACEvxF,IAQR,CACD5nD,IAAK,aACLM,MAAO,SAAoBie,GACzB,IAAI1B,EAAShQ,KAEbA,KAAKssI,eAELtsI,KAAKwsI,WAAa,SAAUz5G,GACtBA,GAAQrhB,IACV1B,EAAOkF,QAEPlF,EAAO0qD,OAAOhpD,KAIlB1R,KAAKiD,GAAG,eAAgBjD,KAAKwsI,cAI9B,CACDr5I,IAAK,eACLM,MAAO,WACDuM,KAAKwsI,aACPxsI,KAAKysI,GAAG,eAAgBzsI,KAAKwsI,YAC7BxsI,KAAKwsI,WAAa,QAcrB,CACDr5I,IAAK,WACLM,MAAO,SAAkB5D,EAAQ2vI,EAAO36H,GACtC,OAAI7E,KAAKy4D,OACAyxE,EAAK9I,EAAgBiK,EAAa18I,WAAY,WAAYqR,MAAMrM,KAAKqM,KAAMnQ,EAAQ2vI,EAAO36H,GAG5F7E,KAAKm/H,OAAS,KAUtB,CACDhsI,IAAK,YACLM,MAAO,SAAmBi5I,GACxB,OAAIA,EACG1sI,KAAK69C,MAAM8uF,UAIT3sI,KAAK69C,MAAM8uF,UAAUD,GAHnB1nH,QAAQC,OAAO,IAAIlzB,MAAM,+CAM7BizB,QAAQC,OAAO,IAAIlzB,MAAM,qBAAuB26I,MAQxD,CACDv5I,IAAK,YACLM,MAAO,WACL,OAAOuM,KAAKuoB,SAQb,CACDp1B,IAAK,YACLM,MAAO,SAAmBA,GACxBuM,KAAKuoB,OAAS90B,EAEVuM,KAAK69C,MAAMt1B,SAAWvoB,KAAKuoB,SAC7BvoB,KAAK69C,MAAMt1B,OAASvoB,KAAKuoB,UAU5B,CACDp1B,IAAK,UACLM,MAAO,SAAiB40B,GAGtBroB,KAAKwrI,QAAUxrI,KAAK69C,MAAMx1B,MAAQA,IAOnC,CACDl1B,IAAK,UACLM,MAAO,WACL,IAAI0c,EAASnQ,KAEbA,KAAKkV,QACLlV,KAAKilI,QACLjlI,KAAK4sI,WAAY,EAEjB/5I,OAAOC,KAAKkN,KAAK0rI,gBAAgBx4I,SAAQ,SAAUuW,GAC7C0G,EAAO0tC,OACT1tC,EAAO0tC,MAAMz+C,oBAAoBqK,EAAI0G,EAAOu7H,eAAejiI,OAI3DzJ,KAAK8hI,OAAO+K,6BAA+B7sI,KAAK69C,OAAS79C,KAAK69C,MAAM9iD,YACtEiF,KAAK69C,MAAM9iD,WAAW0C,YAAYuC,KAAK69C,OAGzC79C,KAAK69C,MAAQ,UAhoBDm/D,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAioBLm+F,EAtgBuB,CAugB9BD,EAAUjO,SAEZ9uI,EAAiB,QAAIg9I,EACrBj9I,EAAOC,QAAUA,EAAQ8uI,SAK3B,qBAMA,SAAwB/uI,EAAQC,GAC9B,aAaA,SAAS2uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAjBlD94C,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAiCrB,IAAIy+I,EAAyB,WAI3B,SAASA,KAnCX,SAAyBnmF,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAkCpB21E,CAAgBr9H,KAAM8sI,GAEtB9sI,KAAK+sI,iBAtBT,IAAsB9vB,EAAaC,EAAYC,EAiJ7C,OAjJoBF,EA6BP6vB,GA7BoB5vB,EA6BT,CAAC,CACvB/pH,IAAK,iBACLM,MAAO,WAOLuM,KAAKgtI,gBAAkB,GAOvBhtI,KAAKitI,iBAAmB,IAWzB,CACD95I,IAAK,sBACLM,MAAO,SAA6B5D,EAAQ4hB,EAAOC,GAC7C7hB,GAAUmQ,KAAKitI,kBACjBjtI,KAAK+sI,iBACL/sI,KAAKitI,gBAAkBp9I,GAOzB,IAHA,IAAIq9I,EAAiB,GACjBt9I,EAAI,EAEDA,EAAIoQ,KAAKgtI,gBAAgBn9I,QAAUmQ,KAAKgtI,gBAAgBp9I,GAAK6hB,GAClE7hB,IAWF,IAJIA,EAAI,GAAK,GACXs9I,EAAel8I,KAAKygB,GAGf7hB,EAAIoQ,KAAKgtI,gBAAgBn9I,QAAUmQ,KAAKgtI,gBAAgBp9I,IAAM8hB,GACnEw7H,EAAel8I,KAAKgP,KAAKgtI,gBAAgBp9I,IACzCA,IAIEA,EAAI,GAAK,GACXs9I,EAAel8I,KAAK0gB,GAItBw7H,EAAiBA,EAAel7I,QAAO,SAAUkK,EAAM0oI,EAAKx4D,GAC1D,OAAW,GAAPw4D,EACK1oI,GAAQkwE,EAAIw4D,EAAM,GAChBA,GAAOx4D,EAAIv8E,OAAS,EACtBqM,GAAQkwE,EAAIw4D,EAAM,GAGpB1oI,GAAQkwE,EAAIw4D,EAAM,IAAM1oI,GAAQkwE,EAAIw4D,EAAM,MAKnD5kI,KAAKgtI,gBAAkBhtI,KAAKgtI,gBAAgB99I,OAAOg+I,GACnDltI,KAAKgtI,gBAAkBhtI,KAAKgtI,gBAAgBniG,MAAK,SAAUnvB,EAAG8lC,GAC5D,OAAO9lC,EAAI8lC,KACVxvD,QAAO,SAAUkK,EAAM0oI,EAAKx4D,GAC7B,OAAW,GAAPw4D,EACK1oI,GAAQkwE,EAAIw4D,EAAM,GAChBA,GAAOx4D,EAAIv8E,OAAS,EACtBqM,GAAQkwE,EAAIw4D,EAAM,GAGpB1oI,GAAQkwE,EAAIw4D,EAAM,IAAM1oI,GAAQkwE,EAAIw4D,EAAM,MAInD,IAAIuI,EAAqB,GAEzB,IAAKv9I,EAAI,EAAGA,EAAIs9I,EAAer9I,OAAQD,GAAK,EAC1Cu9I,EAAmBn8I,KAAK,CAACk8I,EAAet9I,GAAIs9I,EAAet9I,EAAI,KAGjE,OAAOu9I,IAQR,CACDh6I,IAAK,iBACLM,MAAO,WACL,IACI7D,EADAw9I,EAAsB,GAG1B,IAAKx9I,EAAI,EAAGA,EAAIoQ,KAAKgtI,gBAAgBn9I,OAAQD,GAAK,EAChDw9I,EAAoBp8I,KAAK,CAACgP,KAAKgtI,gBAAgBp9I,GAAIoQ,KAAKgtI,gBAAgBp9I,EAAI,KAG9E,OAAOw9I,OA5IKpwB,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IA6IL4/F,EAlIoB,GAqI7Bz+I,EAAiB,QAAIy+I,EACrB1+I,EAAOC,QAAUA,EAAQ8uI,SAK3B,uBAMA,SAAyB/uI,EAAQC,EAAS0uI,GACxC,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAyBjB,SAAgBiO,GACd,IAAIe,GAAM,EAAIgwI,EAAKlQ,SAAS7gI,GACxBgB,GAAM,EAAIgwI,EAAKnQ,SAAS7gI,GAC5B,OAAQgB,EAAMD,GAAOC,EAAMD,GA1B7B,IAAIgwI,EAAOpQ,EAAuBF,EAElC,sBAEIuQ,EAAOrQ,EAAuBF,EAElC,sBAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAmBbH,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAwB/uI,EAAQC,GAC9B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAUjB,SAAe2J,EAAKsF,EAAKD,GACvB,OAAOD,KAAKE,IAAIF,KAAKC,IAAIC,EAAKtF,GAAMqF,IAGtCjP,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAwB/uI,EAAQC,EAAS0uI,GACvC,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QA4JjB,SAAmBkQ,GACjB,IAAKA,EACH,MAAM,IAAIxM,MAAM,yBACX,IAAKwM,EAAQid,IAClB,MAAM,IAAIzpB,MAAM,qBAGlB,IAAI40D,EAAW,IAAI4mF,EAAUpQ,QACzBqQ,EAAe,IAAIC,QACnBC,EAAe,IAAIC,QAAQpvI,EAAQid,KAEvCmrC,EAASinF,WAAa,IAAIC,gBAEtBtvI,GAAWA,EAAQuvI,gBAErBvvI,EAAQuvI,eAAe56I,SAAQ,SAAUw2E,GACvC8jE,EAAavvG,OAAOyrC,EAAOv2E,IAAKu2E,EAAOj2E,UAK3C,IAAImjE,EAAer4D,EAAQq4D,cAAgB,OACvCm3E,EAAe,CACjB52I,OAAQoH,EAAQpH,QAAU,MAC1B8/D,QAASu2E,EACTnvH,KAAM9f,EAAQ8f,MAAQ,OACtB2vH,YAAazvI,EAAQyvI,aAAe,cACpC7N,MAAO5hI,EAAQ4hI,OAAS,UACxB8N,SAAU1vI,EAAQ0vI,UAAY,SAC9BC,SAAU3vI,EAAQ2vI,UAAY,SAC9BC,OAAQxnF,EAASinF,WAAWO,QAqE9B,OAnEAC,MAAMV,EAAcK,GAAcx7H,MAAK,SAAUuL,GAE/C6oC,EAAS7oC,SAAWA,EACpB,IAAIuwH,GAAoB,EAEnBvwH,EAASpjB,OAGZ2zI,GAAoB,GAItB,IAAIC,EAAgBxwH,EAASm5C,QAAQz2D,IAAI,kBASzC,OAPsB,OAAlB8tI,IAIFD,GAAoB,GAGjBA,GAML1nF,EAAS4nF,WAAa,SAAUt6I,GAC9B0yD,EAASi9E,UAAU,WAAY3vI,IAG1B,IAAIu6I,SAAS,IAAIC,eAAe,IAAIC,EAAgB/nF,EAAU2nF,EAAexwH,IAAYiwH,IARvFjwH,KASRvL,MAAK,SAAUuL,GAChB,IAAI6wH,EAEJ,GAAI7wH,EAAS8wH,GACX,OAAQh4E,GACN,IAAK,cACH,OAAO94C,EAAS+wH,cAElB,IAAK,OACH,OAAO/wH,EAAS1K,OAElB,IAAK,OACH,OAAO0K,EAASgkD,OAElB,IAAK,OACH,OAAOhkD,EAASzlB,OAElB,QACEs2I,EAAS,yBAA2B/3E,EAS1C,MAJK+3E,IACHA,EAAS,sBAAwB7wH,EAAS3L,QAGtC,IAAIpgB,MAAM48I,MACfp8H,MAAK,SAAUuL,GAChB6oC,EAASi9E,UAAU,UAAW9lH,MAC7BgxH,OAAM,SAAUl9I,GACjB+0D,EAASi9E,UAAU,QAAShyI,MAG9B+0D,EAAS+mF,aAAeA,EACjB/mF,GA7PT,IAIgCp4D,EAJ5Bg/I,GAI4Bh/I,EAJOwuI,EAEvC,4BAGgBxuI,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAUb,SAASyuH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAalD,IAAI+iG,EAA+B,WAQjC,SAASA,EAAgB/nF,EAAU2nF,EAAexwH,IAjCpD,SAAyB6oC,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAgCpB21E,CAAgBr9H,KAAM0uI,GAEtB1uI,KAAK2mD,SAAWA,EAChB3mD,KAAK2mD,SAASooF,QAAUjxH,EAASpjB,KAAKs0I,YACtChvI,KAAK69D,MAAQ/vD,SAASwgI,EAAe,IACrCtuI,KAAK89D,OAAS,EAvBlB,IAAsBm/C,EAAaC,EAAYC,EAmF7C,OAnFoBF,EAkCPyxB,GAlCoBxxB,EAkCH,CAAC,CAC7B/pH,IAAK,QACLM,MAAO,SAAem6I,GACpB,IAAIzoI,EAAQnF,MAED,SAASivI,IAGlB9pI,EAAMwhD,SAASooF,QAAQE,OAAO18H,MAAK,SAAUnC,GAC3C,IAAI+uD,EAAO/uD,EAAK+uD,KACZ1rE,EAAQ2c,EAAK3c,MAIjB,GAAI0rE,EAYF,OAVoB,IAAhBh6D,EAAM04D,OACR14D,EAAMwhD,SAAS4nF,WAAW56I,KAAKwR,EAAMwhD,SAAU,CAC7CmX,OAAQ34D,EAAM24D,OACdD,MAAO14D,EAAM04D,MACbqxE,kBAAkB,SAKtBtB,EAAW95H,QAIb3O,EAAM24D,QAAUrqE,EAAMujE,WAEtB7xD,EAAMwhD,SAAS4nF,WAAW56I,KAAKwR,EAAMwhD,SAAU,CAC7CmX,OAAQ34D,EAAM24D,OACdD,MAAO14D,EAAM04D,MACbqxE,mBAAoC,IAAhB/pI,EAAM04D,SAI5B+vE,EAAWuB,QAAQ17I,GACnBw7I,OACCH,OAAM,SAAUl9I,GACjBg8I,EAAWh8I,MAAMA,MAIrBq9I,QA9EYjyB,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IA+ELwhG,EA1E0B,GA6NnCtgJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAwB/uI,EAAQC,EAAS0uI,GACvC,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAqBjB,SAAe+V,GACb,OAAO,WACL,IAAK,IAAI9T,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAGzB,OAAO,EAAI2+I,EAAuBjS,UAAS,WACzC,OAAO/4H,EAAK7Q,WAAM,EAAQhD,QA1BhC,IAIgChC,EAJ5B6gJ,GAI4B7gJ,EAJoBwuI,EAEpD,2CAGgBxuI,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAyBbH,EAAOC,QAAUA,EAAQ8uI,SAK3B,uBAMA,SAAwB/uI,EAAQC,GAC9B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAajB,SAAeghJ,GAKb,YAJen0I,IAAXm0I,IACFA,EAAS,eAGJA,EAASjyI,KAAKovG,SAAS55G,SAAS,IAAIogD,UAAU,IAGvD5kD,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAwBmS,EAAyBjhJ,EAAS0uI,GACxD,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETZ,OAAO2Q,eAAenV,EAAS,WAAY,CACzCw9C,YAAY,EACZrrC,IAAK,WACH,OAAO+sI,EAAUpQ,WAGrBtqI,OAAO2Q,eAAenV,EAAS,SAAU,CACvCw9C,YAAY,EACZrrC,IAAK,WACH,OAAO+uI,EAAQpS,WAGnBtqI,OAAO2Q,eAAenV,EAAS,QAAS,CACtCw9C,YAAY,EACZrrC,IAAK,WACH,OAAOgvI,EAAOrS,WAGlBtqI,OAAO2Q,eAAenV,EAAS,WAAY,CACzCw9C,YAAY,EACZrrC,IAAK,WACH,OAAOivI,EAAUtS,WAGrBtqI,OAAO2Q,eAAenV,EAAS,YAAa,CAC1Cw9C,YAAY,EACZrrC,IAAK,WACH,OAAOkvI,EAAOvS,WAGlBtqI,OAAO2Q,eAAenV,EAAS,QAAS,CACtCw9C,YAAY,EACZrrC,IAAK,WACH,OAAOmvI,EAAOxS,WAGlBtqI,OAAO2Q,eAAenV,EAAS,QAAS,CACtCw9C,YAAY,EACZrrC,IAAK,WACH,OAAO08H,EAAOC,WAGlBtqI,OAAO2Q,eAAenV,EAAS,oBAAqB,CAClDw9C,YAAY,EACZrrC,IAAK,WACH,OAAOovI,EAAazS,WAGxBtqI,OAAO2Q,eAAenV,EAAS,MAAO,CACpCw9C,YAAY,EACZrrC,IAAK,WACH,OAAO6sI,EAAKlQ,WAGhBtqI,OAAO2Q,eAAenV,EAAS,MAAO,CACpCw9C,YAAY,EACZrrC,IAAK,WACH,OAAO8sI,EAAKnQ,WAGhBtqI,OAAO2Q,eAAenV,EAAS,eAAgB,CAC7Cw9C,YAAY,EACZrrC,IAAK,WACH,OAAOqvI,EAAc1S,WAGzBtqI,OAAO2Q,eAAenV,EAAS,wBAAyB,CACtDw9C,YAAY,EACZrrC,IAAK,WACH,OAAO4uI,EAAuBjS,WAGlCtqI,OAAO2Q,eAAenV,EAAS,QAAS,CACtCw9C,YAAY,EACZrrC,IAAK,WACH,OAAOw8H,EAAOG,WAGlBtqI,OAAO2Q,eAAenV,EAAS,kBAAmB,CAChDw9C,YAAY,EACZrrC,IAAK,WACH,OAAOsvI,EAAa3S,WAIxB,IAAID,EAASD,EAAuBF,EAEpC,yBAEIsQ,EAAOpQ,EAAuBF,EAElC,sBAEIuQ,EAAOrQ,EAAuBF,EAElC,sBAEIwS,EAAUtS,EAAuBF,EAErC,yBAEIwQ,EAAYtQ,EAAuBF,EAEvC,2BAEIC,EAASC,EAAuBF,EAEpC,wBAEIqS,EAAyBnS,EAAuBF,EAEpD,0CAEI4S,EAAS1S,EAAuBF,EAEpC,wBAEI0S,EAAYxS,EAAuBF,EAEvC,qCAEI8S,EAAgB5S,EAAuBF,EAE3C,gCAEI2S,EAASzS,EAAuBF,EAEpC,wBAEIyS,EAASvS,EAAuBF,EAEpC,wBAEI+S,EAAe7S,EAAuBF,EAE1C,8BAEI6S,EAAe3S,EAAuBF,EAE1C,+BAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,KAQf,oBAMA,SAAsBH,EAAQC,GAC5B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QASjB,SAAaiO,GACX,IAAIyzI,GAAU,IAMd,OALAl9I,OAAOC,KAAKwJ,GAAQpJ,SAAQ,SAAUtD,GAChC0M,EAAO1M,GAAKmgJ,IACdA,EAAUzzI,EAAO1M,OAGdmgJ,GAGT3hJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,oBAMA,SAAsB/uI,EAAQC,GAC5B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QASjB,SAAaiO,GACX,IAAI0zI,EAAWxzI,OAAO81B,KAMtB,OALAz/B,OAAOC,KAAKwJ,GAAQpJ,SAAQ,SAAUtD,GAChC0M,EAAO1M,GAAKogJ,IACdA,EAAW1zI,EAAO1M,OAGfogJ,GAGT5hJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,yBAMA,SAA2B/uI,EAAQC,GACjC,aAaA,SAAS2uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAjBlD94C,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAsCrB,IAAI+2I,EAAwB,WAI1B,SAASA,KAxCX,SAAyBz+E,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAuCpB21E,CAAgBr9H,KAAMolI,GAQtBplI,KAAKiwI,wBAA0B,GAC/BjwI,KAAKa,SAAW,KAlCpB,IAAsBo8G,EAAaC,EAAYC,EA+L7C,OA/LoBF,EA6CPmoB,EA7CoBloB,EA6CV,CAAC,CACtB/pH,IAAK,KACLM,MAAO,SAAYsI,EAAO9M,GACxB,IAAIkW,EAAQnF,KAEPA,KAAKa,WACRb,KAAKa,SAAW,IAGlB,IAAIA,EAAWb,KAAKa,SAAS9E,GAQ7B,OANK8E,IACHA,EAAWb,KAAKa,SAAS9E,GAAS,IAGpC8E,EAAS7P,KAAK/B,GAEP,CACLiB,KAAM6L,EACNoF,SAAUlS,EACVw9I,GAAI,SAAYx4I,EAAGhF,GACjB,OAAOkW,EAAMsnI,GAAGx4I,EAAGhF,OAYxB,CACDkE,IAAK,KACLM,MAAO,SAAYsI,EAAO9M,GACxB,GAAK+Q,KAAKa,SAAV,CAIA,IACIjR,EADAiR,EAAWb,KAAKa,SAAS9E,GAG7B,GAAI8E,EACF,GAAI5R,EACF,IAAKW,EAAIiR,EAAShR,OAAS,EAAGD,GAAK,EAAGA,IAChCiR,EAASjR,IAAMX,GACjB4R,EAAStR,OAAOK,EAAG,QAIvBiR,EAAShR,OAAS,KAQvB,CACDsD,IAAK,QACLM,MAAO,WACLuM,KAAKa,SAAW,OAWjB,CACD1N,IAAK,OACLM,MAAO,SAAcsI,EAAO0qB,GAC1B,IAAI7f,EAAS5G,KAiBb,OAAOA,KAAKiD,GAAGlH,GAfN,SAAS9M,IAChB,IAAK,IAAIqB,EAAO/C,UAAUsC,OAAQU,EAAO,IAAIC,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAC/EF,EAAKE,GAAQlD,UAAUkD,GAKzBg2B,EAAQlzB,MAAMqT,EAAQrW,GAGtB2O,YAAW,WACT0H,EAAO6lI,GAAG1wI,EAAO9M,KAChB,QAgBN,CACDkE,IAAK,4BACLM,MAAO,SAAmCy8I,GACxClwI,KAAKiwI,wBAA0BC,IAOhC,CACD/8I,IAAK,2BACLM,MAAO,SAAkCsI,GACvC,OAAOiE,KAAKiwI,yBAA2BjwI,KAAKiwI,wBAAwB5U,SAASt/H,KAS9E,CACD5I,IAAK,YACLM,MAAO,SAAmBsI,GACxB,IAAK,IAAIzJ,EAAQ/E,UAAUsC,OAAQU,EAAO,IAAIC,MAAM8B,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxGhC,EAAKgC,EAAQ,GAAKhF,UAAUgF,GAG9B,GAAKyN,KAAKa,WAAYb,KAAKmwI,yBAAyBp0I,GAApD,CAIA,IAAI8E,EAAWb,KAAKa,SAAS9E,GAC7B8E,GAAYA,EAAS3N,SAAQ,SAAUjE,GACrCA,EAAGsE,WAAM,EAAQhD,UAzLnB2sH,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IA2LLk4F,EA3KmB,GA8K5B/2I,EAAiB,QAAI+2I,EACrBh3I,EAAOC,QAAUA,EAAQ8uI,SAK3B,4BAMA,SAA8B/uI,EAAQC,GACpC,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAwDjB,SAAS0zI,EAAgB1uI,EAAQ2hC,GAC/B,OAAI3hC,EAAO+8I,GACF/8I,EAEA,IAAI2tI,MAAM3tI,EAAQ,CACvBmN,IAAK,SAAajS,EAAKuF,EAAMq2I,GAC3B,GAAIr2I,IAASs8I,EACX,OAAO,EACF,GAAa,eAATt8I,EACT,OAAOvF,EACF,GAAa,UAATuF,EACT,OAAOiuI,EAAgBxzI,EAAIkR,MAAOu1B,GAC7B,GAAa,WAATlhC,EACT,OAAOiuI,EAAgBxzI,EAAIyvI,OAAQhpG,GAC9B,GAAa,0BAATlhC,EACT,OAAO,WACL,OAAOiuI,EAAgBxzI,EAAIuM,sBAAsBvH,MAAMhF,EAAKhB,WAAYynC,IAErE,GAAa,eAATlhC,EACT,OAAO,WACL,OAAOiuI,EAAgBxzI,EAAImvI,WAAWnqI,MAAMhF,EAAKhB,WAAYynC,IAG/D,IAAIvhC,EAAQlF,EAAI8hJ,EAAQv8I,EAAMkhC,IAC9B,MAAuB,mBAATvhC,EAAsBA,EAAMgR,KAAKlW,GAAOkF,GAG1D6M,IAAK,SAAa/R,EAAKuF,EAAML,GAE3B,OADAlF,EAAI8hJ,EAAQv8I,EAAMkhC,IAAavhC,GACxB,MApFf,IAAI68I,EAAkB,CACpBl1I,MAAO,SACPD,OAAQ,QACRsnI,UAAW,YACXE,UAAW,YACX0B,YAAa,eACbX,aAAc,cACdrhI,QAAS,UACTK,QAAS,UACT2gI,YAAa,eACb7gI,WAAY,YACZ5G,WAAY,YACZC,UAAW,aACXH,aAAc,cACdD,YAAa,eACbF,KAAM,MACN27B,MAAO,SACP17B,IAAK,OACL0/B,OAAQ,QACRmrG,iBAAkB,oBAClBI,iBAAkB,oBAClBE,iBAAkB,qBAUpB,SAAS0J,EAAQv8I,EAAMkhC,GACrB,OAAIniC,OAAOlE,UAAUmD,eAAe6B,KAAK28I,EAAiBx8I,IACjDkhC,EAAWs7G,EAAgBx8I,GAE3BA,EAIX,IAAIs8I,EAAU5hJ,OAAO,WAmDrBJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,8BAMA,SAA+B/uI,EAAQC,GACrC,aAaA,SAASkiJ,EAAoBx0I,GAC3BA,EAAMmG,kBACNjM,SAASyE,KAAK0E,oBAAoB,QAASmxI,GAAqB,GAblE19I,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAmBjB,SAAsBiO,GACpBrG,SAASyE,KAAK4E,iBAAiB,QAASixI,GAAqB,IAG/DniJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,wCAMA,SAAwC/uI,EAAQC,GAC9C,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAUrB,IAAImiJ,GAAYviJ,OAAO4hB,uBAAyB5hB,OAAOwiJ,6BAA+BxiJ,OAAOyiJ,0BAA4BziJ,OAAO0iJ,wBAA0B1iJ,OAAO2iJ,yBAA2B,SAAUzvI,EAAUtI,GAC9M,OAAOqG,WAAWiC,EAAU,IAAO,MAClCsD,KAAKxW,QAERI,EAAiB,QAAImiJ,EACrBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,6BAMA,SAA8B/uI,EAAQC,GACpC,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAajB,WAKE,IAEIuvH,EAAM3nH,SAAS4B,cAAc,OACjC+lH,EAAIz3E,UAAY,0CAChB,IAAI0qG,EAAkBjzB,EAAIvyG,SAASnP,KAAK,GACxC20I,EAAgBx9H,IALA,81BAMhBw9H,EAAgBphG,QAAU,OAC1BohG,EAAgB7hJ,KAAO,aACvB6hJ,EAAgBC,uBAAwB,EAExCD,EAAgB1nI,OAEhB0nI,EAAgBt3I,SAChBqkH,EAAIrkH,UAGNnL,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAwB/uI,EAAQC,GAC9B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,QAUjB,SAAewF,EAAIouI,GAMjB,OALApvI,OAAOC,KAAKmvI,GAAQ/uI,SAAQ,SAAUY,GAChCD,EAAG4L,MAAM3L,KAAUmuI,EAAOnuI,KAC5BD,EAAG4L,MAAM3L,GAAQmuI,EAAOnuI,OAGrBD,GAGTzF,EAAOC,QAAUA,EAAQ8uI,SAK3B,sBAMA,SAAyB/uI,EAAQC,EAAS0uI,GACxC,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAGbsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IAAI4xI,EAuCJ,SAAiC1xI,EAAK2xI,GACpC,IAAKA,GAAe3xI,GAAOA,EAAI6uH,WAC7B,OAAO7uH,EAGT,GAAY,OAARA,GAAiC,WAAjBD,EAAQC,IAAoC,oBAARA,EACtD,MAAO,CACL4uI,QAAS5uI,GAIb,IAAI4xI,EAAQC,EAAyBF,GAErC,GAAIC,GAASA,EAAMrmI,IAAIvL,GACrB,OAAO4xI,EAAM3/H,IAAIjS,GAGnB,IAAI8xI,EAAS,GACTC,EAAwBztI,OAAO2Q,gBAAkB3Q,OAAO+4C,yBAE5D,IAAK,IAAIz4C,KAAO5E,EACd,GAAY,YAAR4E,GAAqBN,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAK4E,GAAM,CACvE,IAAIwhB,EAAO2rH,EAAwBztI,OAAO+4C,yBAAyBr9C,EAAK4E,GAAO,KAE3EwhB,IAASA,EAAKnU,KAAOmU,EAAKrU,KAC5BzN,OAAO2Q,eAAe68H,EAAQltI,EAAKwhB,GAEnC0rH,EAAOltI,GAAO5E,EAAI4E,GAWxB,OANAktI,EAAOlD,QAAU5uI,EAEb4xI,GACFA,EAAM7/H,IAAI/R,EAAK8xI,GAGVA,EA7EEE,CAAwBxD,EAEnC,wBAEIsI,EAAUpI,EAAuBF,EAErC,gCAEIqO,EAAYnO,EAAuBF,EAEvC,sBAEIgU,EAAgB9T,EAAuBF,EAE3C,0BAEIiU,EAAa/T,EAAuBF,EAExC,uBAEIkU,EAAwBhU,EAAuBF,EAEnD,mCAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAIb,SAAS6xI,EAAyBF,GAChC,GAAuB,oBAAZngI,QAAwB,OAAO,KAC1C,IAAIygI,EAAoB,IAAIzgI,QACxB0gI,EAAmB,IAAI1gI,QAC3B,OAAQqgI,EAA2B,SAAkCF,GACnE,OAAOA,EAAcO,EAAmBD,IACvCN,GA8DL,SAAS5iB,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAAO85E,EAAuBrzI,GAGhC,SAASqzI,EAAuBrzI,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EAgBT,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAGzB,SAASqrG,EAAgB3iJ,EAAK4E,EAAKM,GAYjC,OAXIN,KAAO5E,EACTsE,OAAO2Q,eAAejV,EAAK4E,EAAK,CAC9BM,MAAOA,EACPo4C,YAAY,EACZC,cAAc,EACdoB,UAAU,IAGZ3+C,EAAI4E,GAAOM,EAGNlF,EAGT,SAAS8uI,EAAgB12E,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAIxB,SAASs1D,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAIlD,SAASwlG,EAAal0B,EAAaC,EAAYC,GAM7C,OALID,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAEL+vE,EA+LT,IAwEIm0B,EAA0B,SAAUzP,IAhYxC,SAAmBh5E,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GAkX1Cm5E,CAAUwP,EAAYzP,GAEtB,IAAIE,EAASnB,EAAa0Q,GAW1B,SAASA,EAAWtP,GAClB,IAAI38H,EAoFJ,GAlFAk4H,EAAgBr9H,KAAMoxI,GAQtBF,EAAgB1P,EANhBr8H,EAAQ08H,EAAOluI,KAAKqM,OAM2B,gBAAiB,CAC9DqxI,aAAc,KACdC,qBAAsB,KACtB7G,UAAW,EACX5F,YAAY,EACZN,eAAgB,EAChBQ,uBAAuB,EACvBwM,QAAS,WACT1hH,gBAAiB,KACjBi6G,UAAW,EACX9D,UAAW,EACX6B,OAAQ,KACRK,aAAc,KACdlqE,UAAW,KACX4oE,YAAa,OACbF,YAAa,EACb8K,eAAe,EACf1L,yBAA0B,CAIxB2L,gBAAgB,GAElB3/H,SAAU,KACVuwH,YAAY,EACZqP,aAAa,EACbv2I,OAAQ,IACRunI,eAAe,EACfF,YAAY,EACZmP,mBAAmB,EACnBhO,UAAU,EACViO,eAAe,EACfnM,eAAgB,IAChBoM,eAAgB,KAChB9F,eAAe,EACf17E,UAAW,QACXyhF,YAAa,GACb/H,WAAW,EACXgI,eAAe,EACfhxC,WAAY9yG,OAAOgzG,kBAAoB+wC,OAAOC,WAAaD,OAAOE,YAClEl8F,QAAS,GACTkoF,cAAe,OACf2O,6BAA6B,EAC7BsF,SAAU9M,EAAQlI,QAClBvmF,YAAY,EACZ2sF,KAAK,EACLjB,cAAc,EACd8P,WAAY,EACZnJ,eAAe,EACfZ,qBAAsB,CACpBoB,SAAS,EACTnB,cAAe,GACfY,eAAgB,GAChBS,uBAAuB,GAEzB30G,UAAU,EACVipG,UAAW,OACX30E,IAAK,KAGP4nF,EAAgB1P,EAAuBr8H,GAAQ,WAAY,CACzDkmI,aAAc0F,EAAc5T,QAC5BkV,SAAUjH,EAAUjO,QACpBkN,qBAAsB4G,EAAsB9T,UAG9C+T,EAAgB1P,EAAuBr8H,GAAQ,OAAQ86H,GAEvD96H,EAAM28H,OAASjvI,OAAOO,OAAO,GAAI+R,EAAMmtI,cAAexQ,GACtD38H,EAAM28H,OAAOuG,qBAAuBx1I,OAAOO,OAAO,GAAI+R,EAAMmtI,cAAcjK,qBAAsBvG,EAAOuG,sBAGvGljI,EAAM64D,UAAY,iBAAmB8jE,EAAO9jE,UAAY/nE,SAASqB,cAAc6N,EAAM28H,OAAO9jE,WAAa74D,EAAM28H,OAAO9jE,WAEjH74D,EAAM64D,UACT,MAAM,IAAIjsE,MAAM,+BAclB,GAXmC,MAA/BoT,EAAM28H,OAAO+P,eAEf1sI,EAAM0sI,eAAiB1sI,EAAM64D,UACkB,iBAA/B74D,EAAM28H,OAAO+P,eAE7B1sI,EAAM0sI,eAAiB57I,SAASqB,cAAc6N,EAAM28H,OAAO+P,gBAG3D1sI,EAAM0sI,eAAiB1sI,EAAM28H,OAAO+P,gBAGjC1sI,EAAM0sI,eACT,MAAM,IAAI9/I,MAAM,qCAGlB,GAAIoT,EAAM28H,OAAO2D,gBAAkB,EACjC,MAAM,IAAI1zI,MAAM,yCACX,GAAIoT,EAAM28H,OAAO2D,eAAiB,GAAK,EAC5C,MAAM,IAAI1zI,MAAM,yCA0DlB,IAvDyB,IAArBoT,EAAM28H,OAAOyB,OACe,IAA1Bp+H,EAAM28H,OAAO9sG,SACfirG,EAAKxgI,MAAM0F,EAAM64D,UAAW,CAC1B3hE,UAAW,oBAGb4jI,EAAKxgI,MAAM0F,EAAM64D,UAAW,CAC1B3hE,UAAW,qBAKb8I,EAAM28H,OAAOjyG,iBACf1qB,EAAMotI,mBAAmBptI,EAAM28H,OAAOjyG,iBASxC1qB,EAAMqtI,YAAc,EAMpBrtI,EAAMqmI,SAAU,EAOhBrmI,EAAMstI,UAAY,GAMlBttI,EAAMutI,eAAiB,KAGvBvtI,EAAMwtI,YAAc,KAGpBxtI,EAAMytI,OAAS,KAGfztI,EAAMosI,QAAU,KAGhBpsI,EAAM0tI,UAAY,KAEmB,oBAA1B1tI,EAAM28H,OAAOqQ,SACtB,MAAM,IAAIpgJ,MAAM,iCAOlBoT,EAAMu8H,OAASv8H,EAAM28H,OAAOqQ,SAMA,gBAAxBhtI,EAAM28H,OAAOyP,UACfpsI,EAAM28H,OAAOyP,QAAU,gBAGI,YAAxBpsI,EAAM28H,OAAOyP,SAAkD,yBAAzBpsI,EAAM28H,OAAOyP,SAAwCnG,EAAUjO,QAAQxuI,UAAUmkJ,iBAAiBn/I,KAAK,QAChJwR,EAAM28H,OAAOyP,QAAU,gBAGzBpsI,EAAM4tI,QAAU5tI,EAAM6tI,SAAS7tI,EAAM28H,OAAOyP,SAK5CpsI,EAAM8tI,sBAAwB,GAG9B9tI,EAAM+tI,aAAc,EAQpB/tI,EAAMguI,SAAU,EAIhB,IAAIC,EAAY,EAWhB,OAVAjuI,EAAMkuI,UAAYpT,EAAK/3F,UAAS,WAC1BkrG,GAAajuI,EAAMytI,OAAO9rI,QAAQu9H,aAAgBl/H,EAAM28H,OAAOQ,eACjE8Q,EAAYjuI,EAAMytI,OAAO9rI,QAAQu9H,cAI/Bl/H,EAAMytI,OAAOhP,UAAU,YAGS,kBAA5Bz+H,EAAM28H,OAAOlrF,WAA0BzxC,EAAM28H,OAAOlrF,WAAa,KACpE0qF,EAA2Bn8H,EAAOq8H,EAAuBr8H,IAg6ClE,OAp5CAgsI,EAAaC,EAAY,CAAC,CACxBj+I,IAAK,OACLM,MAAO,WAKL,OAJAuM,KAAKszI,gBAAgBtzI,KAAK8hI,OAAO9rF,SACjCh2C,KAAKuzI,eACLvzI,KAAKwzI,gBACLxzI,KAAKyzI,kBACEzzI,OAWR,CACD7M,IAAK,kBACLM,MAAO,SAAyBuiD,GAC9B,IAAIpvC,EAAS5G,KAeb,OAZAg2C,EAAQ9iD,SAAQ,SAAUwzD,GACxB,OAAO9/C,EAAO8sI,UAAUhtF,MAG1B1Q,EAAQ9iD,SAAQ,SAAUwzD,GAGnBA,EAAOitF,WACV/sI,EAAOkpH,WAAWppE,EAAOx2D,SAG7B8P,KAAK4jI,UAAU,qBAAsB5tF,GAC9Bh2C,OASR,CACD7M,IAAK,mBACLM,MAAO,WACL,OAAOuM,KAAKizI,wBAWb,CACD9/I,IAAK,YACLM,MAAO,SAAmBizD,GACxB,IAAI1/C,EAAShH,KAEb,IAAK0mD,EAAOx2D,KACV,MAAM,IAAI6B,MAAM,gCAGlB,IAAK20D,EAAOC,SACV,MAAM,IAAI50D,MAAM,UAAU7C,OAAOw3D,EAAOx2D,KAAM,yCAI5Cw2D,EAAOy2D,aACTtqH,OAAOC,KAAK4zD,EAAOy2D,aAAajqH,SAAQ,SAAU0gJ,GAKhD5sI,EAAO4sI,GAAoBltF,EAAOy2D,YAAYy2B,MAIlD,IAAIC,EAAWntF,EAAOC,SActB,OAZ4B9zD,OAAOiF,oBAAoBmoI,EAAKmF,SAASz2I,WAC/CuE,SAAQ,SAAUC,GACtC0gJ,EAASllJ,UAAUwE,GAAO8sI,EAAKmF,SAASz2I,UAAUwE,MAQpD6M,KAAK0mD,EAAOx2D,MAAQ,IAAI2jJ,EAASntF,EAAOo7E,QAAU,GAAI9hI,MACtDA,KAAK4jI,UAAU,eAAgBl9E,EAAOx2D,MAC/B8P,OAWR,CACD7M,IAAK,aACLM,MAAO,SAAoBvD,GACzB,IAAK8P,KAAK9P,GACR,MAAM,IAAI6B,MAAM,UAAU7C,OAAOgB,EAAM,6BAWzC,OARI8P,KAAKizI,sBAAsB/iJ,IAE7B8P,KAAK8zI,cAAc5jJ,GAGrB8P,KAAK9P,GAAMuyE,OACXziE,KAAKizI,sBAAsB/iJ,IAAQ,EACnC8P,KAAK4jI,UAAU,qBAAsB1zI,GAC9B8P,OAWR,CACD7M,IAAK,gBACLM,MAAO,SAAuBvD,GAC5B,IAAK8P,KAAK9P,GACR,MAAM,IAAI6B,MAAM,UAAU7C,OAAOgB,EAAM,qDAGzC,IAAK8P,KAAKizI,sBAAsB/iJ,GAC9B,MAAM,IAAI6B,MAAM,UAAU7C,OAAOgB,EAAM,4CAGzC,GAAkC,oBAAvB8P,KAAK9P,GAAMs3I,QACpB,MAAM,IAAIz1I,MAAM,UAAU7C,OAAOgB,EAAM,uCAMzC,OAHA8P,KAAK9P,GAAMs3I,iBACJxnI,KAAKizI,sBAAsB/iJ,GAClC8P,KAAK4jI,UAAU,mBAAoB1zI,GAC5B8P,OASR,CACD7M,IAAK,oBACLM,MAAO,WACL,IAAIuc,EAAShQ,KAEbnN,OAAOC,KAAKkN,KAAKizI,uBAAuB//I,SAAQ,SAAUhD,GACxD,OAAO8f,EAAO8jI,cAAc5jJ,QAU/B,CACDiD,IAAK,eACLM,MAAO,WACL,IAAI0c,EAASnQ,KAEbA,KAAK4yI,OAAS,IAAI5yI,KAAK0hI,OAAO1hI,KAAKg+D,UAAWh+D,KAAK8hI,QACnD9hI,KAAK4yI,OAAOnwE,OACZziE,KAAK4jI,UAAU,iBAAkB5jI,KAAK4yI,SAEP,IAA3B5yI,KAAK8hI,OAAOlrF,aACd3oD,OAAOqR,iBAAiB,SAAUU,KAAKqzI,WAAW,GAClDplJ,OAAOqR,iBAAiB,oBAAqBU,KAAKqzI,WAAW,IAG/DrzI,KAAK4yI,OAAO3vI,GAAG,UAAU,WACvBkN,EAAO4jI,aAEP5jI,EAAOyiI,OAAO19G,SAAS/kB,EAAOohI,QAAQyC,wBAGxCh0I,KAAK4yI,OAAO3vI,GAAG,SAAS,SAAUhP,EAAGihC,GACnCh2B,YAAW,WACT,OAAOiR,EAAOuqD,OAAOxlC,KACpB,MAGLl1B,KAAK4yI,OAAO3vI,GAAG,UAAU,SAAUhP,GAC7Bkc,EAAO2xH,OAAOiQ,eAChB5hI,EAAO4jI,aAGT5jI,EAAOyzH,UAAU,SAAU3vI,QAU9B,CACDd,IAAK,gBACLM,MAAO,WACL,IAAIswB,EAAS/jB,KAETA,KAAKuxI,SACPvxI,KAAKuxI,QAAQ/J,UAGfxnI,KAAKuxI,QAAU,IAAIvxI,KAAK+yI,QAAQ/yI,KAAK8hI,QACrC9hI,KAAKuxI,QAAQ9uE,OACbziE,KAAK4jI,UAAU,kBAAmB5jI,KAAKuxI,SACvCvxI,KAAKuxI,QAAQtuI,GAAG,UAAU,WACxB8gB,EAAO6uH,OAAO19G,SAASnR,EAAOwtH,QAAQyC,qBAEtCjwH,EAAO6/G,UAAU,aAEnB5jI,KAAKuxI,QAAQtuI,GAAG,QAAQ,WACtB,OAAO8gB,EAAO6/G,UAAU,WAE1B5jI,KAAKuxI,QAAQtuI,GAAG,SAAS,WACvB,OAAO8gB,EAAO6/G,UAAU,YAE1B5jI,KAAKuxI,QAAQtuI,GAAG,gBAAgB,SAAU8vB,GACxChP,EAAO6uH,OAAO19G,SAASnR,EAAOwtH,QAAQyC,qBAEtCjwH,EAAO6/G,UAAU,eAAgB7wG,MAGP,iBAAxB/yB,KAAK8hI,OAAOyP,SAAsD,yBAAxBvxI,KAAK8hI,OAAOyP,UACxDvxI,KAAKuxI,QAAQtuI,GAAG,QAAQ,WACtB8gB,EAAO6uH,OAAO19G,SAASnR,EAAOwtH,QAAQyC,wBAExCh0I,KAAKuxI,QAAQtuI,GAAG,UAAU,WACxB,IAAIgxI,EAAYlwH,EAAOmwH,YAEvBnwH,EAAO6/G,UAAU,SAAUqQ,GAEvBlwH,EAAOwtH,QAAQ/F,UAAYznH,EAAOynH,UACpCznH,EAAOynH,QAAUznH,EAAOwtH,QAAQ/F,QAEhCznH,EAAO6/G,UAAU,OAAQ7/G,EAAOynH,gBAWvC,CACDr4I,IAAK,kBACLM,MAAO,WACDuM,KAAK8hI,OAAOiQ,gBACd/xI,KAAK6yI,UAAY,IAAI7B,EAAW7T,WAUnC,CACDhqI,IAAK,cACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQlF,gBASrB,CACDl5I,IAAK,iBACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQzF,mBASrB,CACD34I,IAAK,iBACLM,MAAO,SAAwBu+B,GACzBA,GAAWhyB,KAAKqsI,cAClBrsI,KAAK06D,OAAO,GAEZ16D,KAAK06D,OAAO1oC,EAAUhyB,KAAKqsI,iBAgB9B,CACDl5I,IAAK,OACLM,MAAO,SAAcge,EAAOC,GAC1B,IAAIgT,EAAS1kB,KAUb,OARIA,KAAK8hI,OAAO6P,mBAEd1R,EAAK0R,oBAGP3xI,KAAK4jI,UAAU,eAAe,WAC5B,OAAOl/G,EAAOvb,KAAKsI,EAAOC,MAErB1R,KAAKuxI,QAAQpoI,KAAKsI,EAAOC,KASjC,CACDve,IAAK,aACLM,MAAO,SAAoBiJ,GACzBsD,KAAKuxI,QAAQhF,WAAW7vI,KASzB,CACDvJ,IAAK,QACLM,MAAO,WACL,IAAKuM,KAAKuxI,QAAQ1F,WAChB,OAAO7rI,KAAKuxI,QAAQr8H,UAUvB,CACD/hB,IAAK,YACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQ1F,WAAa7rI,KAAKmJ,OAASnJ,KAAKkV,UASrD,CACD/hB,IAAK,YACLM,MAAO,WACL,OAAQuM,KAAKuxI,QAAQ1F,aAUtB,CACD14I,IAAK,eACLM,MAAO,SAAsBu+B,GAC3BhyB,KAAK8xD,MAAM9/B,IAAYhyB,KAAK8hI,OAAOsQ,cAUpC,CACDj/I,IAAK,cACLM,MAAO,SAAqBu+B,GAC1BhyB,KAAK8xD,KAAK9/B,GAAWhyB,KAAK8hI,OAAOsQ,cAYlC,CACDj/I,IAAK,OACLM,MAAO,SAAcu+D,GACnB,IAAIlgD,EAAW9R,KAAKqsI,eAAiB,EACjC3vI,EAAWsD,KAAK8rI,kBAAoB,EACxCpvI,EAAWU,KAAKC,IAAI,EAAGD,KAAKE,IAAIwU,EAAUpV,GAAYs1D,GAAU,KAChEhyD,KAAKm0I,cAAcz3I,EAAWoV,KAW/B,CACD3e,IAAK,gBACLM,MAAO,SAAuByhC,GAC5Bl1B,KAAK06D,OAAOxlC,GACZl1B,KAAK4yI,OAAOwB,SAASl/G,KAatB,CACD/hC,IAAK,SACLM,MAAO,SAAgByhC,GACrB,IAAImnB,EAASr8C,KAGb,GAAwB,kBAAbk1B,IAA0Bi8D,SAASj8D,IAAaA,EAAW,GAAKA,EAAW,EACpF,MAAM,IAAInjC,MAAM,gFAGlBiO,KAAK4jI,UAAU,eAAe,WAC5B,OAAOvnF,EAAOqe,OAAOxlC,MAEvB,IAAIm/G,EAA4C,aAAxBr0I,KAAK8hI,OAAOyP,QAChCv8H,EAAShV,KAAKuxI,QAAQ1F,WAEtBwI,IAAsBr/H,GACxBhV,KAAKuxI,QAAQr8H,QAIf,IAAIo/H,EAAkBt0I,KAAK8hI,OAAOQ,aAClCtiI,KAAK8hI,OAAOQ,cAAe,EAC3BtiI,KAAKuxI,QAAQ72E,OAAOxlC,EAAWl1B,KAAKqsI,eACpCrsI,KAAK4yI,OAAO19G,SAASA,GAEjBm/G,IAAsBr/H,GACxBhV,KAAKuxI,QAAQpoI,OAGfnJ,KAAK8hI,OAAOQ,aAAegS,EAC3Bt0I,KAAK4jI,UAAU,OAAQ1uG,KAQxB,CACD/hC,IAAK,OACLM,MAAO,WACLuM,KAAKkV,QACLlV,KAAK06D,OAAO,GACZ16D,KAAK4yI,OAAO19G,SAAS,KAWtB,CACD/hC,IAAK,YACLM,MAAO,SAAmBi5I,GACxB,OAAO1sI,KAAKuxI,QAAQ5E,UAAUD,KAU/B,CACDv5I,IAAK,YACLM,MAAO,SAAmBwgJ,GACxBj0I,KAAKuxI,QAAQ5oH,UAAUsrH,GACvBj0I,KAAK4jI,UAAU,SAAUqQ,KAS1B,CACD9gJ,IAAK,YACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQ2C,cAUrB,CACD/gJ,IAAK,kBACLM,MAAO,SAAyBwvC,GAC9BjjC,KAAKuxI,QAAQ/G,gBAAgBvnG,KAQ9B,CACD9vC,IAAK,kBACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQgD,oBAWrB,CACDphJ,IAAK,aACLM,MAAO,WACLuM,KAAKw0I,SAASx0I,KAAKwrI,WAcpB,CACDr4I,IAAK,UACLM,MAAO,SAAiBghJ,GAElBA,IAASz0I,KAAKwrI,SAKdxrI,KAAKuxI,QAAQiD,SAGfx0I,KAAKuxI,QAAQiD,QAAQC,GACrBz0I,KAAKwrI,QAAUiJ,GAEXA,GAGFz0I,KAAKwyI,YAAcxyI,KAAKuxI,QAAQ2C,YAChCl0I,KAAKuxI,QAAQ5oH,UAAU,GACvB3oB,KAAKwrI,SAAU,EACfxrI,KAAK4jI,UAAU,SAAU,KAIzB5jI,KAAKuxI,QAAQ5oH,UAAU3oB,KAAKwyI,aAC5BxyI,KAAKwrI,SAAU,EACfxrI,KAAK4jI,UAAU,SAAU5jI,KAAKwyI,cAIlCxyI,KAAK4jI,UAAU,OAAQ5jI,KAAKwrI,UA1B1BxrI,KAAK4jI,UAAU,OAAQ5jI,KAAKwrI,WAmC/B,CACDr4I,IAAK,UACLM,MAAO,WACL,OAAOuM,KAAKwrI,UAUb,CACDr4I,IAAK,aACLM,MAAO,WACL,OAAOuM,KAAKuxI,QAAQmD,SAAW,KAQhC,CACDvhJ,IAAK,eACLM,MAAO,WACLuM,KAAK8hI,OAAOQ,cAAgBtiI,KAAK8hI,OAAOQ,aACxCtiI,KAAK+zI,eAQN,CACD5gJ,IAAK,oBACLM,MAAO,WACLuM,KAAK8hI,OAAO6B,UAAY3jI,KAAK8hI,OAAO6B,WASrC,CACDxwI,IAAK,eACLM,MAAO,WACL,IAAIkhJ,EAAapnJ,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,KAErF,OAAIyS,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAC1C30I,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAAY1W,UAG7Dj+H,KAAK8hI,OAAO7D,YAUpB,CACD9qI,IAAK,eACLM,MAAO,SAAsBq6B,GAC3B,IAAI6mH,EAAapnJ,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,KAEjFyS,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GACjD30I,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAAY1W,UAAYnwG,EAEvE9tB,KAAK8hI,OAAO7D,UAAYnwG,EAG1B9tB,KAAK+zI,eASN,CACD5gJ,IAAK,mBACLM,MAAO,WACL,IAAIkhJ,EAAapnJ,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,KAErF,OAAIyS,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAC1C30I,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAAYzW,cAG7Dl+H,KAAK8hI,OAAO5D,gBAUpB,CACD/qI,IAAK,mBACLM,MAAO,SAA0Bq6B,EAAO6mH,GAClC30I,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GACjD30I,KAAK8hI,OAAOuG,qBAAqBC,cAAcqM,GAAYzW,cAAgBpwG,EAE3E9tB,KAAK8hI,OAAO5D,cAAgBpwG,EAG9B9tB,KAAK+zI,eAQN,CACD5gJ,IAAK,qBACLM,MAAO,WACL,OAAOuM,KAAK8hI,OAAOjyG,kBASpB,CACD18B,IAAK,qBACLM,MAAO,SAA4Bq6B,GACjC9tB,KAAK8hI,OAAOjyG,gBAAkB/B,EAC9BmyG,EAAKxgI,MAAMO,KAAKg+D,UAAW,CACzB42E,WAAY50I,KAAK8hI,OAAOjyG,oBAU3B,CACD18B,IAAK,iBACLM,MAAO,WACL,OAAOuM,KAAK8hI,OAAO8E,cAUpB,CACDzzI,IAAK,iBACLM,MAAO,SAAwBq6B,GAC7B9tB,KAAK8hI,OAAO8E,YAAc94G,EAC1B9tB,KAAK4yI,OAAOpM,iBAQb,CACDrzI,IAAK,YACLM,MAAO,WACL,OAAOuM,KAAK8hI,OAAO3mI,SASpB,CACDhI,IAAK,YACLM,MAAO,SAAmB0H,GACxB6E,KAAK8hI,OAAO3mI,OAASA,EACrB6E,KAAK4yI,OAAOlJ,UAAUvuI,EAAS6E,KAAK8hI,OAAO/gC,YAC3C/gG,KAAK+zI,eAgBN,CACD5gJ,IAAK,sBACLM,MAAO,SAA6BohJ,GAClC70I,KAAK8hI,OAAOuG,qBAAqBa,eAAiB2L,EAClD70I,KAAK+zI,eASN,CACD5gJ,IAAK,aACLM,MAAO,WACL,IAaI0rI,EAbA6D,EAAe5lI,KAAKg6B,MAAMp3B,KAAKqsI,cAAgBrsI,KAAK8hI,OAAOgQ,YAAc9xI,KAAK8hI,OAAO/gC,YACrFkiC,EAAcjjI,KAAK4yI,OAAO1P,WAC1B9nI,EAAQ4nI,EAERvxH,EAAQ,EACRC,EAAMtU,KAAKC,IAAIoU,EAAQwxH,EAAa7nI,GAUxC,GARI4E,KAAK8hI,OAAOO,cAAgBriI,KAAK8hI,OAAOQ,cAAgBU,EAAeC,KAEzExxH,EAAQ,EACRC,EAFAtW,EAAQ6nI,GAONjjI,KAAK8hI,OAAOiQ,cAAe,CAC7B,IACIniJ,EADAklJ,EAAY90I,KAAK6yI,UAAUkC,oBAAoB35I,EAAOqW,EAAOC,GAGjE,IAAK9hB,EAAI,EAAGA,EAAIklJ,EAAUjlJ,OAAQD,IAChCuvI,EAAQn/H,KAAKuxI,QAAQyD,SAAS55I,EAAO05I,EAAUllJ,GAAG,GAAIklJ,EAAUllJ,GAAG,IACnEoQ,KAAK4yI,OAAOqC,UAAU9V,EAAO/jI,EAAO05I,EAAUllJ,GAAG,GAAIklJ,EAAUllJ,GAAG,SAGpEuvI,EAAQn/H,KAAKuxI,QAAQyD,SAAS55I,EAAOqW,EAAOC,GAC5C1R,KAAK4yI,OAAOqC,UAAU9V,EAAO/jI,EAAOqW,EAAOC,GAG7C1R,KAAK4jI,UAAU,SAAUzE,EAAO/jI,KAajC,CACDjI,IAAK,OACLM,MAAO,SAAcyhJ,GACdA,GAIHl1I,KAAK8hI,OAAOgQ,YAAcoD,EAC1Bl1I,KAAK8hI,OAAOQ,cAAe,IAJ3BtiI,KAAK8hI,OAAOgQ,YAAc9xI,KAAKsyI,cAAcR,YAC7C9xI,KAAK8hI,OAAOQ,cAAe,GAM7BtiI,KAAK+zI,aACL/zI,KAAK4yI,OAAO19G,SAASl1B,KAAKuxI,QAAQyC,qBAClCh0I,KAAK4yI,OAAOwB,SAASp0I,KAAK8rI,iBAAmB9rI,KAAKqsI,eAClDrsI,KAAK4jI,UAAU,OAAQsR,KASxB,CACD/hJ,IAAK,kBACLM,MAAO,SAAyBk/I,GAC9B,IAAIn1F,EAASx9C,KAEbA,KAAKm1I,kBAAkBxC,GAAa,SAAUvyI,GACvCo9C,EAAO01F,aACV11F,EAAO43F,kBAAkBh1I,QAY9B,CACDjN,IAAK,oBACLM,MAAO,SAA2BglE,GAChCz4D,KAAKuxI,QAAQ1xH,KAAK44C,GAClBz4D,KAAK+zI,aACL/zI,KAAKmzI,SAAU,EACfnzI,KAAK4jI,UAAU,WAShB,CACDzwI,IAAK,WACLM,MAAO,SAAkBquE,GACvB,IAAI/jB,EAAU/9C,KAGVq1I,EAAS,IAAIC,WACjBD,EAAO/1I,iBAAiB,YAAY,SAAUrL,GAC5C,OAAO8pD,EAAQwwF,WAAWt6I,MAE5BohJ,EAAO/1I,iBAAiB,QAAQ,SAAUrL,GACxC,OAAO8pD,EAAQw3F,gBAAgBthJ,EAAEZ,OAAOmC,WAE1C6/I,EAAO/1I,iBAAiB,SAAS,WAC/B,OAAOy+C,EAAQ6lF,UAAU,QAAS,yBAEpCyR,EAAOG,kBAAkB1zE,GACzB9hE,KAAKgW,UA8BN,CACD7iB,IAAK,OACLM,MAAO,SAAc+nB,EAAK2jH,EAAO1vF,EAAS39B,GACxC,IAAK0J,EACH,MAAM,IAAIzpB,MAAM,iCAKlB,GAFAiO,KAAKgW,QAEDy5B,EAAS,CAGX,IAAIgmG,EAAuB,CACzB,+CAAkG,IAAnD,CAAC,OAAQ,WAAY,QAAQpmJ,QAAQogD,GACpF,0BAA2B0vF,EAC3B,mEAA8I,IAA3E,CAAC,eAAgB,wBAAwB9vI,QAAQ2Q,KAAK8hI,OAAOyP,SAChI,4BAA4C,kBAAR/1H,GAElCk6H,EAAgB7iJ,OAAOC,KAAK2iJ,GAAsBzjJ,QAAO,SAAUye,GACrE,OAAOglI,EAAqBhlI,MAG1BilI,EAAc7lJ,SAEhBoB,QAAQU,KAAK,sEAAwE+jJ,EAAch8I,KAAK,WAExG+1C,EAAU,MAUd,OAJ4B,aAAxBzvC,KAAK8hI,OAAOyP,SAA0B/1H,aAAe0wB,mBACvD1wB,EAAMA,EAAInI,KAGJrT,KAAK8hI,OAAOyP,SAClB,IAAK,WACH,OAAOvxI,KAAK21I,WAAWn6H,EAAK2jH,EAAOrtH,GAErC,IAAK,eACL,IAAK,uBACH,OAAO9R,KAAK41I,iBAAiBp6H,EAAK2jH,EAAO1vF,EAAS39B,MAcvD,CACD3e,IAAK,aACLM,MAAO,SAAoB+nB,EAAK2jH,EAAOrtH,GACrC,IAAIosC,EAAUl+C,KAEV6f,EAAO,SAAcy0E,GAKvB,OAJIA,GACFp2C,EAAQu0F,UAAUzhJ,KAAKktD,EAAQ23F,KAAK,QAASvhD,IAGxCp2C,EAAQ43F,eAAet6H,GAAK,SAAUpb,GAC3C,OAAO89C,EAAQq3F,gBAAgBn1I,OAInC,IAAI++H,EAMF,OAAOt/G,IALP7f,KAAKuxI,QAAQwE,SAAS5W,EAAOrtH,GAC7B9R,KAAK+zI,aACL/zI,KAAK4jI,UAAU,kBACf5jI,KAAKyyI,UAAUzhJ,KAAKgP,KAAK61I,KAAK,cAAeh2H,MAmBhD,CACD1sB,IAAK,mBACLM,MAAO,SAA0BuiJ,EAAU7W,EAAO1vF,EAAS39B,GACzD,IAAIutC,EAAUr/C,KAEVwb,EAAMw6H,EAEV,GAAwB,kBAAbA,EACTh2I,KAAKuxI,QAAQ1xH,KAAKrE,EAAKxb,KAAK6xI,eAAgB1S,EAAO1vF,OAC9C,CACL,IAAIy8F,EAAM8J,EACVh2I,KAAKuxI,QAAQ0E,QAAQ/J,EAAK/M,GAG1B3jH,EAAM0wH,EAAI74H,IAGZrT,KAAKyyI,UAAUzhJ,KAAKgP,KAAKuxI,QAAQsE,KAAK,WAAW,WAE1Cx2F,EAAQkyF,QAAQ3E,YACnBvtF,EAAQ00F,aAER10F,EAAQ8zF,SAAU,EAElB9zF,EAAQukF,UAAU,aAElB5jI,KAAKuxI,QAAQsE,KAAK,SAAS,SAAUh4H,GACvC,OAAOwhC,EAAQukF,UAAU,QAAS/lH,OAGhCshH,IACFn/H,KAAKuxI,QAAQwE,SAAS5W,EAAOrtH,GAC7B9R,KAAK+zI,aACL/zI,KAAK4jI,UAAU,mBAMXzE,IAASn/H,KAAK8hI,OAAO4P,cAAgB1xI,KAAKuxI,QAAQuB,oBACtD9yI,KAAK81I,eAAet6H,GAAK,SAAUm3H,GACjCtzF,EAAQ81F,kBAAkBxC,GAAa,SAAUl6E,GAC/CpZ,EAAQkyF,QAAQ94E,OAASA,EAEzBpZ,EAAQkyF,QAAQwE,SAAS,MAEzB12F,EAAQ00F,aAER10F,EAAQukF,UAAU,0BAazB,CACDzwI,IAAK,oBACLM,MAAO,SAA2Bk/I,EAAaxxI,GAC7C,IAAIs+C,EAAUz/C,KAETA,KAAKkzI,cACRlzI,KAAK2yI,YAAcA,EACnB3yI,KAAKuxI,QAAQ4D,kBAAkBxC,GAAa,SAAUvyI,GAG/Cq/C,EAAQyzF,aAAezzF,EAAQkzF,aAAeA,IACjDxxI,EAASf,GACTq/C,EAAQkzF,YAAc,SAEvB,WACD,OAAOlzF,EAAQmkF,UAAU,QAAS,oCAavC,CACDzwI,IAAK,iBACLM,MAAO,SAAwB+nB,EAAKra,GAClC,IAAI0/C,EAAU7gD,KAEVzB,EAAU1L,OAAOO,OAAO,CAC1BooB,IAAKA,EACLo7C,aAAc,eACb52D,KAAK8hI,OAAOx4E,KACXpN,EAAU+jF,EAAKiW,UAAU33I,GAY7B,OAXAyB,KAAK0yI,eAAiBx2F,EACtBl8C,KAAKyyI,UAAUzhJ,KAAKkrD,EAAQj5C,GAAG,YAAY,SAAUhP,GACnD4sD,EAAQ0tF,WAAWt6I,MACjBioD,EAAQj5C,GAAG,WAAW,SAAU7C,GAClCe,EAASf,GACTygD,EAAQ6xF,eAAiB,QACvBx2F,EAAQj5C,GAAG,SAAS,SAAUhP,GAChC4sD,EAAQ+iF,UAAU,QAAS3vI,GAE3B4sD,EAAQ6xF,eAAiB,SAEpBx2F,IAUR,CACD/oD,IAAK,aACLM,MAAO,SAAoBQ,GACzB,IAAIkiJ,EAGFA,EADEliJ,EAAEi7I,iBACcj7I,EAAE6pE,OAAS7pE,EAAE4pE,MAIb5pE,EAAE6pE,QAAU7pE,EAAE6pE,OAAS,KAG3C99D,KAAK4jI,UAAU,UAAWxmI,KAAKg6B,MAAwB,IAAlB++G,GAAwBliJ,EAAEZ,UAehE,CACDF,IAAK,YACLM,MAAO,SAAmB5D,EAAQusH,EAAUg6B,EAAU3kI,EAAOC,GAC3D7hB,EAASA,GAAU,KACnB4hB,EAAQA,GAAS,EACjB2qG,EAAWA,GAAY,IACvBg6B,EAAWA,IAAY,EACvB,IAAIjX,EAAQn/H,KAAKuxI,QAAQyD,SAASnlJ,EAAQ4hB,EAAOC,GAC7C06D,EAAM,GAAG7vE,IAAI5I,KAAKwrI,GAAO,SAAUnnI,GACrC,OAAOoF,KAAKg6B,MAAMp/B,EAAMokH,GAAYA,KAEtC,OAAO,IAAIp3F,SAAQ,SAAUg5B,EAAS/4B,GACpC,IAAKmxH,EAAU,CACb,IAAIC,EAAW,IAAIx0E,KAAK,CAACj7B,KAAKI,UAAUolC,IAAO,CAC7Cp9E,KAAM,mCAEJmzE,EAASlO,IAAI2N,gBAAgBy0E,GACjCpoJ,OAAO2mB,KAAKutD,GACZlO,IAAIoO,gBAAgBF,GAGtBnkB,EAAQouB,QAsBX,CACDj5E,IAAK,cACLM,MAAO,SAAqBioF,EAAQokD,EAAS9wI,GAa3C,OAZK0sF,IACHA,EAAS,aAGNokD,IACHA,EAAU,GAGP9wI,IACHA,EAAO,WAGFgR,KAAK4yI,OAAO5I,SAAStuD,EAAQokD,EAAS9wI,KAM9C,CACDmE,IAAK,aACLM,MAAO,WACDuM,KAAK0yI,gBAAkB1yI,KAAK0yI,eAAe9E,aAIzC5tI,KAAK0yI,eAAe3D,SAEtB/uI,KAAK0yI,eAAe3D,QAAQ9mG,SAAS6mG,OAAM,SAAUjxH,OAGvD7d,KAAK0yI,eAAe9E,WAAW73E,QAC/B/1D,KAAK0yI,eAAiB,QAOzB,CACDv/I,IAAK,iBACLM,MAAO,WACLuM,KAAKyyI,UAAUv/I,SAAQ,SAAUe,GAC/B,OAAOA,EAAEw4I,UAOZ,CACDt5I,IAAK,QACLM,MAAO,WACAuM,KAAKuxI,QAAQ1F,aAChB7rI,KAAKs2I,OACLt2I,KAAKuxI,QAAQgF,oBAGfv2I,KAAKmzI,SAAU,EACfnzI,KAAKw2I,aACLx2I,KAAKy2I,iBAELz2I,KAAK4yI,OAAO19G,SAAS,GACrBl1B,KAAK4yI,OAAO9O,SAAS,GACrB9jI,KAAK4yI,OAAOqC,UAAU,CACpBplJ,OAAQmQ,KAAK4yI,OAAO1P,YACnB,KAQJ,CACD/vI,IAAK,UACLM,MAAO,WACLuM,KAAK02I,oBACL12I,KAAK4jI,UAAU,WACf5jI,KAAKw2I,aACLx2I,KAAKy2I,iBACLz2I,KAAKilI,SAE0B,IAA3BjlI,KAAK8hI,OAAOlrF,aACd3oD,OAAOmR,oBAAoB,SAAUY,KAAKqzI,WAAW,GACrDplJ,OAAOmR,oBAAoB,oBAAqBY,KAAKqzI,WAAW,IAG9DrzI,KAAKuxI,UACPvxI,KAAKuxI,QAAQ/J,UAEbxnI,KAAKuxI,QAAU,MAGbvxI,KAAK4yI,QACP5yI,KAAK4yI,OAAOpL,UAGdxnI,KAAKkzI,aAAc,EACnBlzI,KAAKmzI,SAAU,EACfnzI,KAAK2yI,YAAc,QAEnB,CAAC,CACHx/I,IAAK,SACLM,MAYA,SAAgBquI,GAEd,OADiB,IAAIsP,EAAWtP,GACdr/D,WAaf2uE,EAxoDqB,CAyoD5BnR,EAAKmF,UAEP/2I,EAAiB,QAAI+iJ,EAErBF,EAAgBE,EAAY,UAAW,SAEvCF,EAAgBE,EAAY,OAAQnR,GAEpC7xI,EAAOC,QAAUA,EAAQ8uI,SAK3B,oBAMA,SAAuB/uI,EAAQC,EAAS0uI,GACtC,aAEA,SAASzuI,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBC,QAAUD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GACvHD,EAAQC,GAGbsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAErB,IAAI4xI,EAaJ,SAAiC1xI,EAAK2xI,GACpC,IAAKA,GAAe3xI,GAAOA,EAAI6uH,WAC7B,OAAO7uH,EAGT,GAAY,OAARA,GAAiC,WAAjBD,EAAQC,IAAoC,oBAARA,EACtD,MAAO,CACL4uI,QAAS5uI,GAIb,IAAI4xI,EAAQC,EAAyBF,GAErC,GAAIC,GAASA,EAAMrmI,IAAIvL,GACrB,OAAO4xI,EAAM3/H,IAAIjS,GAGnB,IAAI8xI,EAAS,GACTC,EAAwBztI,OAAO2Q,gBAAkB3Q,OAAO+4C,yBAE5D,IAAK,IAAIz4C,KAAO5E,EACd,GAAY,YAAR4E,GAAqBN,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAK4E,GAAM,CACvE,IAAIwhB,EAAO2rH,EAAwBztI,OAAO+4C,yBAAyBr9C,EAAK4E,GAAO,KAE3EwhB,IAASA,EAAKnU,KAAOmU,EAAKrU,KAC5BzN,OAAO2Q,eAAe68H,EAAQltI,EAAKwhB,GAEnC0rH,EAAOltI,GAAO5E,EAAI4E,GAWxB,OANAktI,EAAOlD,QAAU5uI,EAEb4xI,GACFA,EAAM7/H,IAAI/R,EAAK8xI,GAGVA,EAnDEE,CAAwBxD,EAEnC,wBAEA,SAASqD,EAAyBF,GAChC,GAAuB,oBAAZngI,QAAwB,OAAO,KAC1C,IAAIygI,EAAoB,IAAIzgI,QACxB0gI,EAAmB,IAAI1gI,QAC3B,OAAQqgI,EAA2B,SAAkCF,GACnE,OAAOA,EAAcO,EAAmBD,IACvCN,GAkDL,SAASljB,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IA+BlD,SAAS2xE,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAoCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA7CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,GAAIA,IAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI+zD,UAAU,4DAGtB,OAAO85E,EAAuBrzI,GAGhC,SAASqzI,EAAuBrzI,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EAgBT,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAGzB,SAASqrG,EAAgB3iJ,EAAK4E,EAAKM,GAYjC,OAXIN,KAAO5E,EACTsE,OAAO2Q,eAAejV,EAAK4E,EAAK,CAC9BM,MAAOA,EACPo4C,YAAY,EACZC,cAAc,EACdoB,UAAU,IAGZ3+C,EAAI4E,GAAOM,EAGNlF,EAIT,IAAIooJ,EAAU,UACVC,EAAS,SACTC,EAAW,WAOXxE,EAAwB,SAAU1Q,IA7GtC,SAAmBh5E,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGlBj5C,OAAO2Q,eAAemlD,EAAU,YAAa,CAC3Czb,UAAU,IAERub,GAAY60D,EAAgB30D,EAAUF,GA+F1Cm5E,CAAUyQ,EAAU1Q,GAEpB,IAzHoB1kB,EAAaC,EAAYC,EAyHzC0kB,EAASnB,EAAa2R,GAQ1B,SAASA,EAASvQ,GAChB,IAAIgV,EAAkBC,EAElB5xI,EAgHJ,OApQJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAoJpB21E,CAAgBr9H,KAAMqyI,GAKtBnB,EAAgB1P,EAHhBr8H,EAAQ08H,EAAOluI,KAAKqM,OAG2B,eAAgB,MAE/DkxI,EAAgB1P,EAAuBr8H,GAAQ,sBAAuB,MAEtE+rI,EAAgB1P,EAAuBr8H,GAAQ,kBAA0C+rI,EAAvB4F,EAAmB,GAAsCH,EAAS,CAClIl0E,KAAM,WACJziE,KAAKg3I,qBAEPhD,kBAAmB,WACjB,IAAIliI,EAAW9R,KAAKqsI,cACpB,OAAOrsI,KAAK8rI,iBAAmBh6H,GAAY,GAE7Cg6H,eAAgB,WACd,OAAO9rI,KAAKi3I,cAAgBj3I,KAAKk3I,mBAEjChG,EAAgB4F,EAAkBF,EAAQ,CAC5Cn0E,KAAM,WACJziE,KAAKm3I,wBAEPnD,kBAAmB,WACjB,IAAIliI,EAAW9R,KAAKqsI,cACpB,OAAOrsI,KAAK8rI,iBAAmBh6H,GAAY,GAE7Cg6H,eAAgB,WACd,OAAO9rI,KAAKi3I,iBAEZ/F,EAAgB4F,EAAkBD,EAAU,CAC9Cp0E,KAAM,WACJziE,KAAKm3I,uBACLn3I,KAAK4jI,UAAU,WAEjBoQ,kBAAmB,WACjB,OAAO,GAETlI,eAAgB,WACd,OAAO9rI,KAAKqsI,iBAEZyK,IAEJ3xI,EAAM28H,OAASA,EAGf38H,EAAMy3H,GAAKkF,EAAOuP,eAAiBlsI,EAAM2tI,mBAAqB3tI,EAAMiyI,kBAAoB,IAGxFjyI,EAAMkyI,SAAWlyI,EAAMy3H,GAAG59G,YAG1B7Z,EAAM8xI,cAAgB,EAGtB9xI,EAAMmyI,eAAiB,KAGvBnyI,EAAMoyI,QAA6BrG,EAAnB6F,EAAe,GAAkCJ,EAAS9jJ,OAAO2qH,OAAOr4G,EAAMqyI,eAAsB,UAAKtG,EAAgB6F,EAAcH,EAAQ/jJ,OAAO2qH,OAAOr4G,EAAMqyI,eAAqB,SAAKtG,EAAgB6F,EAAcF,EAAUhkJ,OAAO2qH,OAAOr4G,EAAMqyI,eAAuB,WAAKT,GAGrS5xI,EAAMszD,OAAS,KAGftzD,EAAMuvI,QAAU,GAGhBvvI,EAAMsyI,SAAW,KAGjBtyI,EAAMuyI,YAAc,KAGpBvyI,EAAMwyI,UAAY,KAGlBxyI,EAAMg6H,MAAQ,KAGdh6H,EAAM+9B,aAAe,EAGrB/9B,EAAM8lI,SAAW,KAGjB9lI,EAAMyyI,WAAa,KAGnBzyI,EAAM3R,OAAS,KAGf2R,EAAM0yI,WAAa,GAGnB1yI,EAAMwC,MAAQ,KAGdxC,EAAMinI,iBAAmBtK,EAAOhwH,SAGhC3M,EAAM2yI,sBAAwB,KAG9B3yI,EAAM4yI,iBAAmB,KAKzB5yI,EAAMynI,WAAY,EACXznI,EAiuBT,OAr9BoB83G,EA2PPo1B,EA3PoBn1B,EA2PV,CAAC,CACtB/pH,IAAK,mBACLM,MAcA,WACE,SAAUxF,OAAO+pJ,eAAgB/pJ,OAAOgqJ,sBAQzC,CACD9kJ,IAAK,kBACLM,MAAO,WAKL,OAJKxF,OAAOiqJ,yBACVjqJ,OAAOiqJ,uBAAyB,IAAKjqJ,OAAO+pJ,cAAgB/pJ,OAAOgqJ,qBAG9DhqJ,OAAOiqJ,yBAUf,CACD/kJ,IAAK,yBACLM,MAAO,SAAgC84E,GAKrC,OAJKt+E,OAAOkqJ,gCACVlqJ,OAAOkqJ,8BAAgC,IAAKlqJ,OAAOmqJ,qBAAuBnqJ,OAAOoqJ,2BAA2B,EAAG,EAAG9rE,IAG7Gt+E,OAAOkqJ,gCAEf,CACDhlJ,IAAK,OACLM,MAAO,WACLuM,KAAK2qI,mBACL3qI,KAAK4qI,mBACL5qI,KAAK6qI,qBACL7qI,KAAK4H,SAASgvI,GACd52I,KAAKwqI,gBAAgBxqI,KAAK8hI,OAAO2I,WACjCzqI,KAAKs4I,UAAU,KAIhB,CACDnlJ,IAAK,oBACLM,MAAO,WACDuM,KAAK00I,UACP10I,KAAK00I,QAAQxhJ,SAAQ,SAAUlB,GAC7BA,GAAUA,EAAOw2C,gBAEnBxoC,KAAK00I,QAAU,KAEf10I,KAAKirI,SAASD,QAAQhrI,KAAKy3I,aAS9B,CACDtkJ,IAAK,WACLM,MAAO,SAAkBkU,GACnB3H,KAAK2H,QAAU3H,KAAKu3I,OAAO5vI,KAC7B3H,KAAK2H,MAAQ3H,KAAKu3I,OAAO5vI,GACzB3H,KAAK2H,MAAM86D,KAAK9uE,KAAKqM,SASxB,CACD7M,IAAK,YACLM,MAAO,WACL,IAAK,IAAInD,EAAO/C,UAAUsC,OAAQ6kJ,EAAU,IAAIlkJ,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFikJ,EAAQjkJ,GAAQlD,UAAUkD,GAG5BuP,KAAKu4I,WAAW7D,KAWjB,CACDvhJ,IAAK,aACLM,MAAO,SAAoBihJ,GAEzB10I,KAAKw4I,oBAED9D,GAAWA,EAAQ7kJ,SACrBmQ,KAAK00I,QAAUA,EAEf10I,KAAKirI,SAASziG,aAEdksG,EAAQhpI,QAAO,SAAU+sI,EAAMC,GAE7B,OADAD,EAAKzN,QAAQ0N,GACNA,IACN14I,KAAKirI,UAAUD,QAAQhrI,KAAKy3I,aAKlC,CACDtkJ,IAAK,mBACLM,MAAO,WACDuM,KAAK8hI,OAAOwP,qBACdtxI,KAAK43I,WAAa53I,KAAK8hI,OAAOwP,qBAE1BtxI,KAAK48H,GAAG+b,sBACV34I,KAAK43I,WAAa53I,KAAK48H,GAAG+b,sBAAsBtG,EAASuG,kBAEzD54I,KAAK43I,WAAa53I,KAAK48H,GAAGic,qBAAqBxG,EAASuG,kBAI5D54I,KAAK43I,WAAW5M,QAAQhrI,KAAK48H,GAAGj6D,eAIjC,CACDxvE,IAAK,oBACLM,MAAO,WACL,IAAImT,EAAS5G,KAEbA,KAAK43I,WAAWkB,eAAiB,WAC/B,IAAI/lH,EAAOnsB,EAAOklI,iBAEd/4G,GAAQnsB,EAAOylI,eACjBzlI,EAAOgB,SAASivI,GAEhBjwI,EAAOg9H,UAAU,UACR7wG,GAAQnsB,EAAO0wI,eACxB1wI,EAAOsO,QACEtO,EAAOe,QAAUf,EAAO2wI,OAAc,SAC/C3wI,EAAOg9H,UAAU,eAAgB7wG,MAMtC,CACD5/B,IAAK,uBACLM,MAAO,WACLuM,KAAK43I,WAAWkB,eAAiB,OAIlC,CACD3lJ,IAAK,qBACLM,MAAO,WACLuM,KAAKirI,SAAWjrI,KAAK48H,GAAGmc,iBACxB/4I,KAAKirI,SAASD,QAAQhrI,KAAKy3I,YAO5B,CACDtkJ,IAAK,mBACLM,MAAO,WAEDuM,KAAK48H,GAAGoc,WACVh5I,KAAKy3I,SAAWz3I,KAAK48H,GAAGoc,aAExBh5I,KAAKy3I,SAAWz3I,KAAK48H,GAAGqc,iBAI1Bj5I,KAAKy3I,SAASzM,QAAQhrI,KAAK48H,GAAGj6D,eAU/B,CACDxvE,IAAK,YACLM,MAAO,SAAmBi5I,GACxB,OAAIA,GAMG1sI,KAAK+3I,mBACR/3I,KAAK+3I,iBAAmB,IAAI9pJ,OAAOirJ,MAEnCl5I,KAAK+3I,iBAAiBhiG,UAAW,GAG9B/1C,KAAK+3I,iBAAiBpL,WAItB3sI,KAAK83I,wBACR93I,KAAK83I,sBAAwB93I,KAAK48H,GAAGuc,gCAGvCn5I,KAAKy3I,SAASjvG,aACdxoC,KAAKy3I,SAASzM,QAAQhrI,KAAK83I,uBAC3B93I,KAAK+3I,iBAAiBqB,UAAYp5I,KAAK83I,sBAAsBzyE,OACtDrlE,KAAK+3I,iBAAiBpL,UAAUD,IAV9B1nH,QAAQC,OAAO,IAAIlzB,MAAM,gDAY3BizB,QAAQC,OAAO,IAAIlzB,MAAM,qBAAuB26I,MAS1D,CACDv5I,IAAK,YACLM,MAAO,SAAmBA,GACxBuM,KAAKy3I,SAAS4B,KAAKC,eAAe7lJ,EAAOuM,KAAK48H,GAAG59G,eAQlD,CACD7rB,IAAK,YACLM,MAAO,WACL,OAAOuM,KAAKy3I,SAAS4B,KAAK5lJ,QAW3B,CACDN,IAAK,oBACLM,MAAO,SAA2Bk/I,EAAaxxI,EAAUo4I,GAClDv5I,KAAK23I,YACR33I,KAAK23I,UAAY33I,KAAKw5I,uBAAuBx5I,KAAK48H,IAAM58H,KAAK48H,GAAGrwD,WAAavsE,KAAK48H,GAAGrwD,WAAa,QAGhG,uBAAwBt+E,OAG1B+R,KAAK23I,UAAU8B,gBAAgB9G,GAAa,SAAUvyI,GACpD,OAAOe,EAASf,KACfm5I,GAEHv5I,KAAK23I,UAAU8B,gBAAgB9G,GAAapgI,MAAK,SAAUnS,GACzD,OAAOe,EAASf,MACf0uI,OAAM,SAAUjxH,GACjB,OAAO07H,EAAQ17H,QAWpB,CACD1qB,IAAK,WACLM,MAAO,SAAkB0rI,EAAOrtH,GACd,MAAZA,IACF9R,KAAKosI,iBAAmBt6H,GAG1B9R,KAAKm/H,MAAQA,IAQd,CACDhsI,IAAK,YACLM,MAAO,SAAmB5D,GAExB,IAAImQ,KAAK03I,aAAe7nJ,GAAU,EAAImQ,KAAK03I,YAAY7nJ,OAAS,EAAI,EAApE,CAIAmQ,KAAK63I,WAAa,GAClB73I,KAAK03I,YAAc,GAGnB,IACIj+I,EADA4vI,EAAWrpI,KAAKy4D,OAASz4D,KAAKy4D,OAAOihF,iBAAmB,EAG5D,IAAKjgJ,EAAI,EAAGA,EAAI4vI,EAAU5vI,IACxBuG,KAAK63I,WAAWp+I,GAAK,GACrBuG,KAAK63I,WAAWp+I,GAAG,GAAK5J,EAAS,IAAM,EACvCmQ,KAAK63I,WAAWp+I,GAAG,GAAK5J,EAAS,GAAK,GAAK,EAG7CmQ,KAAK03I,YAAY,GAAK7nJ,EAAS,IAAM,EACrCmQ,KAAK03I,YAAY,GAAK7nJ,EAAS,GAAK,GAAK,KAY1C,CACDsD,IAAK,WACLM,MAAO,SAAkB5D,EAAQ2vI,EAAO36H,GACtC,GAAI7E,KAAKm/H,MACP,OAAOn/H,KAAKm/H,MAGd,IAAKn/H,KAAKy4D,OACR,MAAO,GAOT,GAJA+mE,EAAQA,GAAS,EACjB36H,EAAOA,GAAQhV,EAAS,EACxBmQ,KAAKs4I,UAAUzoJ,IAEVmQ,KAAKy4D,OACR,OAAOz4D,KAAK8hI,OAAOmH,cAAgBjpI,KAAK63I,WAAa73I,KAAK03I,YAW5D,IAAK13I,KAAKy4D,OAAO5oE,OAAQ,CACvB,IAAI8pJ,EAAY35I,KAAK45I,aAAa,EAAG,KAAM55I,KAAKusE,YAChDvsE,KAAKy4D,OAASkhF,EAAUlhF,OAG1B,IAGIh/D,EAHAogJ,EAAa75I,KAAKy4D,OAAO5oE,OAASA,EAClCiqJ,KAAgBD,EAAa,KAAO,EACpCxQ,EAAWrpI,KAAKy4D,OAAOihF,iBAG3B,IAAKjgJ,EAAI,EAAGA,EAAI4vI,EAAU5vI,IAAK,CAC7B,IAAI0lI,EAAQn/H,KAAK63I,WAAWp+I,GACxBsgJ,EAAO/5I,KAAKy4D,OAAOuhF,eAAevgJ,GAClC7J,OAAI,EAER,IAAKA,EAAI4vI,EAAO5vI,GAAKiV,EAAMjV,IAAK,CAC9B,IAAI6hB,KAAW7hB,EAAIiqJ,GACfnoI,KAASD,EAAQooI,GAQjBv8I,EAAMy8I,EAAKtoI,GACXpU,EAAMC,EACN6tB,OAAI,EAER,IAAKA,EAAI1Z,EAAO0Z,EAAIzZ,EAAKyZ,GAAK2uH,EAAY,CACxC,IAAIrmJ,EAAQsmJ,EAAK5uH,GAEb13B,EAAQ4J,IACVA,EAAM5J,GAGJA,EAAQ6J,IACVA,EAAM7J,GAIV0rI,EAAM,EAAIvvI,GAAKyN,EACf8hI,EAAM,EAAIvvI,EAAI,GAAK0N,GAEV,GAAL7D,GAAU4D,EAAM2C,KAAK03I,YAAY,EAAI9nJ,MACvCoQ,KAAK03I,YAAY,EAAI9nJ,GAAKyN,IAGnB,GAAL5D,GAAU6D,EAAM0C,KAAK03I,YAAY,EAAI9nJ,EAAI,MAC3CoQ,KAAK03I,YAAY,EAAI9nJ,EAAI,GAAK0N,IAKpC,OAAO0C,KAAK8hI,OAAOmH,cAAgBjpI,KAAK63I,WAAa73I,KAAK03I,cAQ3D,CACDvkJ,IAAK,oBACLM,MAAO,WACL,OAAOuM,KAAK2H,MAAMqsI,kBAAkBrgJ,KAAKqM,QAI1C,CACD7M,IAAK,mBACLM,MAAO,WACDuM,KAAKxM,QACPwM,KAAKxM,OAAOg1C,eAOf,CACDr1C,IAAK,kBACLM,MAAO,WACLuM,KAAKw4I,oBACLx4I,KAAKu2I,mBACLv2I,KAAKy3I,SAASjvG,aACdxoC,KAAK43I,WAAWpvG,aAChBxoC,KAAKirI,SAASziG,aAEVxoC,KAAK8hI,OAAOmY,oBAEe,oBAAlBj6I,KAAK48H,GAAG9oH,OAAyC,UAAjB9T,KAAK48H,GAAGj1H,OACjD3H,KAAK48H,GAAG9oH,QAIV9T,KAAK48H,GAAK,KAGL58H,KAAK8hI,OAAOuP,aAGfrxI,KAAK8hI,OAAOuP,aAAe,KAF3BpjJ,OAAOiqJ,uBAAyB,KAMlCjqJ,OAAOkqJ,8BAAgC,MAIrCn4I,KAAK83I,wBACP93I,KAAK+3I,iBAAiB7iI,QACtBlV,KAAK+3I,iBAAiBqB,UAAY,KAClCp5I,KAAK83I,sBAAsBtvG,aAC3BxoC,KAAK83I,sBAAwB,QAOhC,CACD3kJ,IAAK,UACLM,MAAO,WACAuM,KAAK6rI,YACR7rI,KAAKkV,QAGPlV,KAAKilI,QACLjlI,KAAKy4D,OAAS,KACdz4D,KAAK4sI,WAAY,EACjB5sI,KAAKmrI,oBAQN,CACDh4I,IAAK,OACLM,MAAO,SAAcglE,GACnBz4D,KAAKi3I,cAAgB,EACrBj3I,KAAKq3I,SAAWr3I,KAAK48H,GAAG59G,YACxBhf,KAAKy4D,OAASA,EACdz4D,KAAKk6I,iBAIN,CACD/mJ,IAAK,eACLM,MAAO,WACLuM,KAAKu2I,mBACLv2I,KAAKxM,OAASwM,KAAK48H,GAAGud,qBAEtBn6I,KAAKxM,OAAOie,MAAQzR,KAAKxM,OAAOie,OAASzR,KAAKxM,OAAO4mJ,YACrDp6I,KAAKxM,OAAO8iJ,KAAOt2I,KAAKxM,OAAO8iJ,MAAQt2I,KAAKxM,OAAO6mJ,QACnDr6I,KAAKwqI,gBAAgBxqI,KAAKkjC,cAC1BljC,KAAKxM,OAAOilE,OAASz4D,KAAKy4D,OAC1Bz4D,KAAKxM,OAAOw3I,QAAQhrI,KAAKirI,YAQ1B,CACD93I,IAAK,qBACLM,MAAO,WACgB,aAAjBuM,KAAK48H,GAAGj1H,OACV3H,KAAK48H,GAAG0d,QAAUt6I,KAAK48H,GAAG0d,WAS7B,CACDnnJ,IAAK,WACLM,MAAO,WACL,OAAOuM,KAAK2H,QAAU3H,KAAKu3I,OAAc,UAQ1C,CACDpkJ,IAAK,cACLM,MAAO,WACL,OAAIuM,KAAKosI,iBACApsI,KAAKosI,iBAGTpsI,KAAKy4D,OAIHz4D,KAAKy4D,OAAO3mD,SAHV,IAcV,CACD3e,IAAK,SACLM,MAAO,SAAgBge,EAAOC,GAC5B,GAAK1R,KAAKy4D,OAyBV,OArBAz4D,KAAKs3I,eAAiB,KAET,MAAT7lI,IACFA,EAAQzR,KAAK8rI,mBAEA9rI,KAAKqsI,gBAChB56H,EAAQ,GAID,MAAPC,IACFA,EAAM1R,KAAKqsI,eAGbrsI,KAAKi3I,cAAgBxlI,EACrBzR,KAAKq3I,SAAWr3I,KAAK48H,GAAG59G,YAEpBhf,KAAK2H,QAAU3H,KAAKu3I,OAAe,UACrCv3I,KAAK4H,SAASgvI,GAGT,CACLnlI,MAAOA,EACPC,IAAKA,KASR,CACDve,IAAK,gBACLM,MAAO,WACL,OAAQuM,KAAK48H,GAAG59G,YAAchf,KAAKq3I,UAAYr3I,KAAKkjC,eAUrD,CACD/vC,IAAK,OACLM,MAAO,SAAcge,EAAOC,GAC1B,GAAK1R,KAAKy4D,OAAV,CAKAz4D,KAAKk6I,eACL,IAAIK,EAAev6I,KAAK06D,OAAOjpD,EAAOC,GACtCD,EAAQ8oI,EAAa9oI,MACrBC,EAAM6oI,EAAa7oI,IACnB1R,KAAKs3I,eAAiB5lI,EACtB1R,KAAKxM,OAAOie,MAAM,EAAGA,GACrBzR,KAAKkrI,qBACLlrI,KAAK4H,SAAS+uI,GACd32I,KAAK4jI,UAAU,WAMhB,CACDzwI,IAAK,QACLM,MAAO,WACLuM,KAAKs3I,eAAiB,KACtBt3I,KAAKi3I,eAAiBj3I,KAAKk3I,gBAE3B,IACEl3I,KAAKxM,QAAUwM,KAAKxM,OAAO8iJ,KAAK,GAChC,MAAOz4H,MAQT7d,KAAK4H,SAASgvI,GACd52I,KAAK4jI,UAAU,WAShB,CACDzwI,IAAK,iBACLM,MAAO,WACL,OAAOuM,KAAK2H,MAAMmkI,eAAen4I,KAAKqM,QAQvC,CACD7M,IAAK,kBACLM,MAAO,WACL,OAAOuM,KAAKkjC,eAQb,CACD/vC,IAAK,kBACLM,MAAO,SAAyBA,GAC9BuM,KAAKkjC,aAAezvC,GAAS,EAC7BuM,KAAKxM,QAAUwM,KAAKxM,OAAO0vC,aAAao2G,eAAet5I,KAAKkjC,aAAcljC,KAAK48H,GAAG59G,eASnF,CACD7rB,IAAK,aACLM,MAAO,SAAoBie,GACzB1R,KAAKs3I,eAAiB5lI,KAh9BtBwrG,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAi9BLmlG,EA/1BmB,CAg2B1BpS,EAAKmF,UAEP/2I,EAAiB,QAAIgkJ,EAErBnB,EAAgBmB,EAAU,mBAAoB,KAE9CjkJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,mCAMA,SAAqC/uI,GAenC,SAAS85C,EAAS9jC,EAAMpF,EAAM8oC,GAC5B,IAAIviC,EAAShV,EAAM8G,EAASi1E,EAAW92E,EAGvC,SAASglJ,IACP,IAAI31I,EAAOhX,KAAKC,MAAQw+E,EAEpBznE,EAAO7F,GAAQ6F,GAAQ,EACzBU,EAAUrG,WAAWs7I,EAAOx7I,EAAO6F,IAEnCU,EAAU,KAELuiC,IACHtyC,EAAS4O,EAAK7Q,MAAM8D,EAAS9G,GAC7B8G,EAAU9G,EAAO,OAZnB,MAAQyO,IAAMA,EAAO,KAmBzB,IAAI+oC,EAAY,WACd1wC,EAAU2I,KACVzP,EAAOhD,UACP++E,EAAYz+E,KAAKC,MACjB,IAAI2sJ,EAAU3yG,IAAcviC,EAQ5B,OAPKA,IAASA,EAAUrG,WAAWs7I,EAAOx7I,IAEtCy7I,IACFjlJ,EAAS4O,EAAK7Q,MAAM8D,EAAS9G,GAC7B8G,EAAU9G,EAAO,MAGZiF,GAmBT,OAhBAuyC,EAAU51C,MAAQ,WACZoT,IACFD,aAAaC,GACbA,EAAU,OAIdwiC,EAAUzqB,MAAQ,WACZ/X,IACF/P,EAAS4O,EAAK7Q,MAAM8D,EAAS9G,GAC7B8G,EAAU9G,EAAO,KACjB+U,aAAaC,GACbA,EAAU,OAIPwiC,EAKTG,EAASA,SAAWA,EACpB95C,EAAOC,QAAU65C,IAajBwyG,EAA2B,GA4E3BC,EApEJ,SAAS5d,EAAoB6d,GAK3B,IAAIC,EAAeH,EAAyBE,GAG5C,QAAqB1/I,IAAjB2/I,EAEF,OAAOA,EAAaxsJ,QAStB,IAAID,EAASssJ,EAAyBE,GAAY,CAQhDvsJ,QAAS,IAoBX,OATAyuI,EAAoB8d,GAAUxsJ,EAAQA,EAAOC,QAAS0uI,GAS/C3uI,EAAOC,QAqBU0uI,CAAoB,uBAMvC4d,EAjoPT,IAIM7d,EA2iPA4d,EA4EAC,GA/nPmE,WAAvB9d,EAASxuI,IAA+F,WAAtBwuI,EAASzuI,GAAuBA,EAAOC,QAAUqzE,KAA+D,EAAqB,QAAW,2BAAP,EAAF,GAAS,kC,yCCRxR,SAASo5E,IAgBP,OAfA1sJ,EAAOC,QAAUysJ,EAAWjoJ,OAAOO,QAAU,SAAUC,GACrD,IAAK,IAAIzD,EAAI,EAAGA,EAAIrC,UAAUsC,OAAQD,IAAK,CACzC,IAAI4D,EAASjG,UAAUqC,GAEvB,IAAK,IAAIuD,KAAOK,EACVX,OAAOlE,UAAUmD,eAAe6B,KAAKH,EAAQL,KAC/CE,EAAOF,GAAOK,EAAOL,IAK3B,OAAOE,GAGTjF,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,EACjE09B,EAASvnJ,MAAMyM,KAAMzS,WAG9Ba,EAAOC,QAAUysJ,EACjB1sJ,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,mBCpBxE,SAASE,EAAgBz3E,EAAGmhB,GAO1B,OANA54D,EAAOC,QAAUivH,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAEtF,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGTz3C,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,EACjEE,EAAgBz3E,EAAGmhB,GAG5B54D,EAAOC,QAAUivH,EACjBlvH,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,oECXxE,gBAII29B,EAJJ,iEAEIC,EAAS,EAAQ,MAIG,qBAAb/kJ,SACT8kJ,EAAQ9kJ,UAER8kJ,EAAQE,EAAS,gCAGfF,EAAQE,EAAS,6BAA+BD,GAIpD5sJ,EAAOC,QAAU0sJ,I,qCCRjB3sJ,EAAOC,QARP,SAAgCF,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,GAITC,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,qBCTxE,IAAIC,EAAiB,EAAQ,MAQ7BjvH,EAAOC,QANP,SAAwBs6D,EAAUF,GAChCE,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,EAAW95D,WAC9Cg6D,EAASh6D,UAAUD,YAAci6D,EACjC00D,EAAe10D,EAAUF,IAI3Br6D,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,kCCTxE,0CAEI89B,EAAmB,qBA4CR,IA1CE,SAAoBC,EAASC,GAE5C,GAAI,YAAYjqJ,KAAKiqJ,GACnB,OAAOA,EAIL,SAASjqJ,KAAKgqJ,KAChBA,EAAU,IAAOp/H,UAAY,IAAOA,SAASJ,MAAQ,IAKvD,IAAI0/H,EAAkC,oBAAf,IAAOpnF,IAC1BqnF,EAAe,QAAQnqJ,KAAKgqJ,GAG5BI,GAAkB,IAAOx/H,WAAa,QAAQ5qB,KAAKgqJ,GAQvD,GANIE,EACFF,EAAU,IAAI,IAAOlnF,IAAIknF,EAAS,IAAOp/H,UAAYm/H,GAC3C,QAAQ/pJ,KAAKgqJ,KACvBA,EAAU,IAAWK,iBAAiB,IAAOz/H,UAAY,IAAOA,SAASJ,MAAQ,GAAIw/H,IAGnFE,EAAW,CACb,IAAII,EAAS,IAAIxnF,IAAImnF,EAAaD,GAIlC,OAAII,EACKE,EAAO9/H,KAAKrsB,MAAM4rJ,EAAiBrrJ,QACjCyrJ,EACFG,EAAO9/H,KAAKrsB,MAAMmsJ,EAAO5/H,SAAShsB,QAGpC4rJ,EAAO9/H,KAGhB,OAAO,IAAW6/H,iBAAiBL,EAASC,K,mCC3C9C,qEAMe,SAASM,EAAsBC,GAI5C,IAHA,IALuBzpH,EAKnB0pH,GALmB1pH,EAKEypH,EAJlB,IAAOE,KAAO,IAAOA,KAAK3pH,GAAK4pH,EAAO/zI,KAAKmqB,EAAG,UAAUt/B,SAAS,WAKpE86E,EAAQ,IAAIxG,WAAW00E,EAAc/rJ,QAEhCD,EAAI,EAAGA,EAAIgsJ,EAAc/rJ,OAAQD,IACxC89E,EAAM99E,GAAKgsJ,EAAcz0E,WAAWv3E,GAGtC,OAAO89E,K,+CCdT,SAASp/E,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAEnX,IAAIwtJ,EAAc,EAAQ,MAEtBpf,EAAOof,EAAYpf,KACnBJ,EAAYwf,EAAYxf,UAO5B,SAASyf,EAAeC,GACtB,MAAiB,KAAVA,EAwBT,SAASC,EAAkBC,EAAStjJ,GAKlC,OAJKsjJ,EAAQrqJ,eAAe+G,KAC1BsjJ,EAAQtjJ,IAAW,GAGdsjJ,EAST,SAASC,EAAaH,GACpB,IAAKA,EAAO,MAAO,GACnB,IAAI5jI,EA7BN,SAAgC4jI,GAE9B,OAAOA,EAAQA,EAAMziJ,MAAM,gBAAgBxH,OAAOgqJ,GAAkB,GA2BzDK,CAAuBJ,GAClC,OAAOppJ,OAAOC,KAAKulB,EAAK3M,OAAOwwI,EAAmB,KAiBpD,SAASI,EAAKjpI,EAAKkpI,GACjB,IAAK,IAAIv1F,KAAK3zC,EACRxgB,OAAOlE,UAAUmD,eAAe6B,KAAK0f,EAAK2zC,KAC5Cu1F,EAAKv1F,GAAK3zC,EAAI2zC,IAUpB,SAAS8zF,EAAS0B,EAAOrb,GACvB,IAAIsb,EAAKD,EAAM7tJ,UAEf,KAAM8tJ,aAActb,GAAQ,CAC1B,SAASt9H,KAGTA,EAAElV,UAAYwyI,EAAMxyI,UAEpB2tJ,EAAKG,EADL54I,EAAI,IAAIA,GAER24I,EAAM7tJ,UAAY8tJ,EAAK54I,EAGrB44I,EAAG/tJ,aAAe8tJ,IACA,mBAATA,GACTvrJ,QAAQW,MAAM,iBAAmB4qJ,GAGnCC,EAAG/tJ,YAAc8tJ,GAKrB,IAAIE,EAAW,GACXC,EAAeD,EAASC,aAAe,EACvCC,EAAiBF,EAASE,eAAiB,EAC3CC,EAAYH,EAASG,UAAY,EACjCC,EAAqBJ,EAASI,mBAAqB,EACnDC,EAAwBL,EAASK,sBAAwB,EACzDC,EAAcN,EAASM,YAAc,EACrCC,EAA8BP,EAASO,4BAA8B,EACrEC,EAAeR,EAASQ,aAAe,EACvCC,EAAgBT,EAASS,cAAgB,EACzCC,EAAqBV,EAASU,mBAAqB,GACnDC,EAAyBX,EAASW,uBAAyB,GAC3DC,EAAgBZ,EAASY,cAAgB,GAEzCC,EAAgB,GAChBC,EAAmB,GAGnBC,GAFiBF,EAAcG,gBAAkBF,EAAiB,GAAK,mBAAoB,GACtED,EAAcI,oBAAsBH,EAAiB,GAAK,uBAAwB,GAC/ED,EAAcE,uBAAyBD,EAAiB,GAAK,0BAA2B,IAKhHI,GAJqBL,EAAcM,oBAAsBL,EAAiB,GAAK,iBAAkB,GACzED,EAAcO,uBAAyBN,EAAiB,GAAK,oBAAqB,GACpFD,EAAcQ,qBAAuBP,EAAiB,GAAK,kBAAmB,GACtED,EAAcS,6BAA+BR,EAAiB,GAAK,0BAA2B,GAC5GD,EAAcK,eAAiBJ,EAAiB,GAAK,YAAa,IAElFS,GADoBV,EAAcW,mBAAqBV,EAAiB,GAAK,gBAAiB,GACxED,EAAcU,qBAAuBT,EAAiB,IAAM,mBAAoB,KAElFD,EAAcY,mBAAqBX,EAAiB,IAAM,gBAAiB,IAClFD,EAAca,YAAcZ,EAAiB,IAAM,eAAgB,IACrDD,EAAcc,0BAA4Bb,EAAiB,IAAM,uBAAwB,IACpGD,EAAce,eAAiBd,EAAiB,IAAM,oBAAqB,IACtED,EAAcgB,oBAAsBf,EAAiB,IAAM,iBAAkB,IAQtG,SAASgB,EAAa5zI,EAAMqH,GAC1B,GAAIA,aAAmBlgB,MACrB,IAAIH,EAAQqgB,OAEZrgB,EAAQoO,KACRjO,MAAM4B,KAAKqM,KAAMw9I,EAAiB5yI,IAClC5K,KAAKiS,QAAUurI,EAAiB5yI,GAC5B7Y,MAAM0sJ,mBAAmB1sJ,MAAM0sJ,kBAAkBz+I,KAAMw+I,GAK7D,OAFA5sJ,EAAMgZ,KAAOA,EACTqH,IAASjS,KAAKiS,QAAUjS,KAAKiS,QAAU,KAAOA,GAC3CrgB,EAYT,SAAS8sJ,KAgDT,SAASC,EAAa/gJ,EAAMghJ,GAC1B5+I,KAAK6+I,MAAQjhJ,EACboC,KAAK8+I,SAAWF,EAEhBG,EAAgB/+I,MAGlB,SAAS++I,EAAgB1mI,GACvB,IAAI2mI,EAAM3mI,EAAKwmI,MAAMI,MAAQ5mI,EAAKwmI,MAAM76I,cAAci7I,KAEtD,GAAI5mI,EAAK4mI,MAAQD,EAAK,CACpB,IAAIE,EAAK7mI,EAAKymI,SAASzmI,EAAKwmI,OAG5BM,GAAQ9mI,EAAM,SAAU6mI,EAAGrvJ,QAE3BysJ,EAAK4C,EAAI7mI,GACTA,EAAK4mI,KAAOD,GAwBhB,SAASI,KAIT,SAASC,EAAehnI,EAAMza,GAG5B,IAFA,IAAIhO,EAAIyoB,EAAKxoB,OAEND,KACL,GAAIyoB,EAAKzoB,KAAOgO,EACd,OAAOhO,EAKb,SAAS0vJ,EAAczrJ,EAAIwkB,EAAMknI,EAASC,GAOxC,GANIA,EACFnnI,EAAKgnI,EAAehnI,EAAMmnI,IAAYD,EAEtClnI,EAAKA,EAAKxoB,UAAY0vJ,EAGpB1rJ,EAAI,CACN0rJ,EAAQE,aAAe5rJ,EACvB,IAAIyO,EAAMzO,EAAGmQ,cAET1B,IACFk9I,GAAWE,EAAmBp9I,EAAKzO,EAAI2rJ,GA6X7C,SAAyBl9I,EAAKzO,EAAI0rJ,GAChCj9I,GAAOA,EAAI28I,OACFM,EAAQI,eAENpjB,EAAUG,QAEnB7oI,EAAG+rJ,OAAOL,EAAQlQ,OAASkQ,EAAQM,UAAY,IAAMN,EAAQ9rJ,OAjY3DqsJ,CAAgBx9I,EAAKzO,EAAI0rJ,KAK/B,SAASQ,EAAiBlsJ,EAAIwkB,EAAMs3B,GAElC,IAAI//C,EAAIyvJ,EAAehnI,EAAMs3B,GAE7B,KAAI//C,GAAK,GAmBP,MAAM,IAAI4uJ,EAAaZ,EAAe,IAAI7rJ,MAAM8B,EAAG4D,QAAU,IAAMk4C,IAhBnE,IAFA,IAAIqwG,EAAY3nI,EAAKxoB,OAAS,EAEvBD,EAAIowJ,GACT3nI,EAAKzoB,GAAKyoB,IAAOzoB,GAKnB,GAFAyoB,EAAKxoB,OAASmwJ,EAEVnsJ,EAAI,CACN,IAAIyO,EAAMzO,EAAGmQ,cAET1B,IACFo9I,EAAmBp9I,EAAKzO,EAAI87C,GAE5BA,EAAK8vG,aAAe,OAwG5B,SAASQ,KAgGT,SAASC,KA8HT,SAASC,EAAY1mJ,GACnB,OAAY,KAALA,EAAY,OAAe,KAALA,GAAY,SAAe,KAALA,GAAY,SAAgB,KAALA,GAAY,UAAY,KAAOA,EAAE0tE,aAAe,IAU5H,SAASi5E,EAAWxiJ,EAAMuD,GACxB,GAAIA,EAASvD,GACX,OAAO,EAGT,GAAIA,EAAOA,EAAKnF,WACd,GACE,GAAI2nJ,EAAWxiJ,EAAMuD,GACnB,OAAO,QAEFvD,EAAOA,EAAKmY,aAIzB,SAASsqI,IACPrgJ,KAAKgE,cAAgBhE,KAavB,SAAS0/I,EAAmBp9I,EAAKzO,EAAI0rJ,EAAShmJ,GAC5C+I,GAAOA,EAAI28I,OACFM,EAAQI,eAENpjB,EAAUG,cAEZ7oI,EAAG+rJ,OAAOL,EAAQlQ,OAASkQ,EAAQM,UAAY,IAI1D,SAASS,EAAeh+I,EAAKzO,EAAIiZ,GAC/B,GAAIxK,GAAOA,EAAI28I,KAAM,CACnB38I,EAAI28I,OAEJ,IAAIsB,EAAK1sJ,EAAG03C,WAEZ,GAAIz+B,EACFyzI,EAAGA,EAAG1wJ,UAAYid,MACb,CAKL,IAHA,IAAItU,EAAQ3E,EAAG4E,WACX7I,EAAI,EAED4I,GACL+nJ,EAAG3wJ,KAAO4I,EACVA,EAAQA,EAAMud,YAGhBwqI,EAAG1wJ,OAASD,SACL2wJ,EAAGA,EAAG1wJ,UAcnB,SAAS2wJ,EAAazlJ,EAAYvC,GAChC,IAAIioJ,EAAWjoJ,EAAMkoJ,gBACjBl5H,EAAOhvB,EAAMud,YAoBjB,OAlBI0qI,EACFA,EAAS1qI,YAAcyR,EAEvBzsB,EAAWtC,WAAa+uB,EAGtBA,EACFA,EAAKk5H,gBAAkBD,EAEvB1lJ,EAAW4lJ,UAAYF,EAGzBjoJ,EAAMuC,WAAa,KACnBvC,EAAMkoJ,gBAAkB,KACxBloJ,EAAMud,YAAc,KAEpBuqI,EAAevlJ,EAAWiJ,cAAejJ,GAElCvC,EA6BT,SAASooJ,EAAchjJ,GACrB,OAAOA,GAAQA,EAAK9G,WAAaopJ,EAAK9C,mBASxC,SAASyD,EAAcjjJ,GACrB,OAAOA,GAAQA,EAAK9G,WAAaopJ,EAAKvD,aASxC,SAASp/I,EAAWK,GAClB,OAAOA,GAAQA,EAAK9G,WAAaopJ,EAAKrD,UAcxC,SAASiE,EAA2Bx+I,EAAK9J,GACvC,IAAIuoJ,EAAmBz+I,EAAIipC,YAAc,GAEzC,GAAIoxF,EAAKokB,EAAkBF,IAAkBD,EAAcpoJ,GACzD,OAAO,EAGT,IAAIwoJ,EAAcrkB,EAAKokB,EAAkBH,GACzC,QAASpoJ,GAASwoJ,GAAeD,EAAiB1xJ,QAAQ2xJ,GAAeD,EAAiB1xJ,QAAQmJ,IAcpG,SAASyoJ,EAA6B3+I,EAAK9J,GACzC,IAAIuoJ,EAAmBz+I,EAAIipC,YAAc,GAMzC,GAAIoxF,EAAKokB,GAJT,SAAuCnjJ,GACrC,OAAOijJ,EAAcjjJ,IAASA,IAASpF,KAIvC,OAAO,EAGT,IAAIwoJ,EAAcrkB,EAAKokB,EAAkBH,GACzC,QAASpoJ,GAASwoJ,GAAeD,EAAiB1xJ,QAAQ2xJ,GAAeD,EAAiB1xJ,QAAQmJ,IAiBpG,SAAS0oJ,EAA+BlqJ,EAAQ4G,EAAMpF,GAEpD,IA5GF,SAAgCoF,GAC9B,OAAOA,IAASA,EAAK9G,WAAaopJ,EAAK/C,eAAiBv/I,EAAK9G,WAAaopJ,EAAK7C,wBAA0Bz/I,EAAK9G,WAAaopJ,EAAKvD,cA2G3HwE,CAAuBnqJ,GAC1B,MAAM,IAAIwnJ,EAAaf,EAAuB,+BAAiCzmJ,EAAOF,UAMxF,GAAI0B,GAASA,EAAMuC,aAAe/D,EAChC,MAAM,IAAIwnJ,EAAaZ,EAAe,uBAGxC,IA7GF,SAA+BhgJ,GAC7B,OAAOA,IAASijJ,EAAcjjJ,IAASL,EAAWK,IAASgjJ,EAAchjJ,IAASA,EAAK9G,WAAaopJ,EAAK7C,wBAA0Bz/I,EAAK9G,WAAaopJ,EAAKhD,cAAgBt/I,EAAK9G,WAAaopJ,EAAKjD,6BA6GhMmE,CAAsBxjJ,IAIvBgjJ,EAAchjJ,IAAS5G,EAAOF,WAAaopJ,EAAK/C,cAC9C,MAAM,IAAIqB,EAAaf,EAAuB,wBAA0B7/I,EAAK9G,SAAW,yBAA2BE,EAAOF,UAkB9H,SAASuqJ,EAAqCrqJ,EAAQ4G,EAAMpF,GAC1D,IAAIuoJ,EAAmB/pJ,EAAOu0C,YAAc,GACxC+1G,EAAiB1jJ,EAAK2tC,YAAc,GAExC,GAAI3tC,EAAK9G,WAAaopJ,EAAK7C,uBAAwB,CACjD,IAAIkE,EAAoBD,EAAetvJ,OAAO6uJ,GAE9C,GAAIU,EAAkB1xJ,OAAS,GAAK8sI,EAAK2kB,EAAgB/jJ,GACvD,MAAM,IAAIihJ,EAAaf,EAAuB,6CAKhD,GAAiC,IAA7B8D,EAAkB1xJ,SAAiBixJ,EAA2B9pJ,EAAQwB,GACxE,MAAM,IAAIgmJ,EAAaf,EAAuB,0DAKlD,GAAIoD,EAAcjjJ,KAGXkjJ,EAA2B9pJ,EAAQwB,GACtC,MAAM,IAAIgmJ,EAAaf,EAAuB,wDAKlD,GAAImD,EAAchjJ,GAAO,CAEvB,GAAI++H,EAAKokB,EAAkBH,GACzB,MAAM,IAAIpC,EAAaf,EAAuB,+BAGhD,IAAI+D,EAAqB7kB,EAAKokB,EAAkBF,GAEhD,GAAIroJ,GAASuoJ,EAAiB1xJ,QAAQmyJ,GAAsBT,EAAiB1xJ,QAAQmJ,GACnF,MAAM,IAAIgmJ,EAAaf,EAAuB,kDAIhD,IAAKjlJ,GAASgpJ,EACZ,MAAM,IAAIhD,EAAaf,EAAuB,yDAmBpD,SAASgE,EAAuCzqJ,EAAQ4G,EAAMpF,GAC5D,IAAIuoJ,EAAmB/pJ,EAAOu0C,YAAc,GACxC+1G,EAAiB1jJ,EAAK2tC,YAAc,GAExC,GAAI3tC,EAAK9G,WAAaopJ,EAAK7C,uBAAwB,CACjD,IAAIkE,EAAoBD,EAAetvJ,OAAO6uJ,GAE9C,GAAIU,EAAkB1xJ,OAAS,GAAK8sI,EAAK2kB,EAAgB/jJ,GACvD,MAAM,IAAIihJ,EAAaf,EAAuB,6CAIhD,GAAiC,IAA7B8D,EAAkB1xJ,SAAiBoxJ,EAA6BjqJ,EAAQwB,GAC1E,MAAM,IAAIgmJ,EAAaf,EAAuB,0DAKlD,GAAIoD,EAAcjjJ,KAEXqjJ,EAA6BjqJ,EAAQwB,GACxC,MAAM,IAAIgmJ,EAAaf,EAAuB,wDAKlD,GAAImD,EAAchjJ,GAAO,CAMvB,GAAI++H,EAAKokB,GALT,SAAuCnjJ,GACrC,OAAOgjJ,EAAchjJ,IAASA,IAASpF,KAKvC,MAAM,IAAIgmJ,EAAaf,EAAuB,+BAGhD,IAAI+D,EAAqB7kB,EAAKokB,EAAkBF,GAEhD,GAAIroJ,GAASuoJ,EAAiB1xJ,QAAQmyJ,GAAsBT,EAAiB1xJ,QAAQmJ,GACnF,MAAM,IAAIgmJ,EAAaf,EAAuB,mDAgBpD,SAASiE,GAAc1qJ,EAAQ4G,EAAMpF,EAAOmpJ,GAE1CT,EAA+BlqJ,EAAQ4G,EAAMpF,GAGzCxB,EAAOF,WAAaopJ,EAAK/C,gBAC1BwE,GAAwBN,GAAsCrqJ,EAAQ4G,EAAMpF,GAG/E,IAAIopJ,EAAKhkJ,EAAK7C,WAMd,GAJI6mJ,GACFA,EAAGnkJ,YAAYG,GAGbA,EAAK9G,WAAaumJ,EAAwB,CAC5C,IAAIwE,EAAWjkJ,EAAKnF,WAEpB,GAAgB,MAAZopJ,EACF,OAAOjkJ,EAGT,IAAIkkJ,EAAUlkJ,EAAK+iJ,eAEnBkB,EAAWC,EAAUlkJ,EAGvB,IAAImkJ,EAAMvpJ,EAAQA,EAAMkoJ,gBAAkB1pJ,EAAO2pJ,UACjDkB,EAASnB,gBAAkBqB,EAC3BD,EAAQ/rI,YAAcvd,EAElBupJ,EACFA,EAAIhsI,YAAc8rI,EAElB7qJ,EAAOyB,WAAaopJ,EAGT,MAATrpJ,EACFxB,EAAO2pJ,UAAYmB,EAEnBtpJ,EAAMkoJ,gBAAkBoB,EAG1B,GACED,EAAS9mJ,WAAa/D,QACf6qJ,IAAaC,IAAYD,EAAWA,EAAS9rI,cAStD,OAPAuqI,EAAetpJ,EAAOgN,eAAiBhN,EAAQA,GAG3C4G,EAAK9G,UAAYumJ,IACnBz/I,EAAKnF,WAAamF,EAAK+iJ,UAAY,MAG9B/iJ,EA+PT,SAAS4tC,KACPxrC,KAAK4/I,OAAS,GA+FhB,SAASoC,MAOT,SAASC,MAiCT,SAASC,MAwBT,SAASC,MAUT,SAASC,MAUT,SAASC,MAOT,SAASC,MAOT,SAASC,MAOT,SAASC,MAOT,SAASC,MAQT,SAASC,MAMT,SAASC,MAQT,SAASC,GAAsBC,EAAQC,GACrC,IAAIjqB,EAAM,GACNzsH,EAA2B,GAAjBpM,KAAKlJ,UAAiBkJ,KAAKuC,iBAAmBvC,KACxDqvI,EAASjjI,EAAQijI,OACjB7xH,EAAMpR,EAAQuzI,aAElB,GAAIniI,GAAiB,MAAV6xH,GAIK,OAFVA,EAASjjI,EAAQ22I,aAAavlI,IAIhC,IAAIwlI,EAAoB,CAAC,CACvBC,UAAWzlI,EACX6xH,OAAQ,OAQd,OAFA6T,GAAkBljJ,KAAM64H,EAAKgqB,EAAQC,EAAYE,GAE1CnqB,EAAIn/H,KAAK,IAGlB,SAASypJ,GAAoBvlJ,EAAMs+H,EAAQ8mB,GACzC,IAAI3T,EAASzxI,EAAKyxI,QAAU,GACxB7xH,EAAM5f,EAAK+hJ,aAQf,IAAKniI,EACH,OAAO,EAGT,GAAe,QAAX6xH,GAAoB7xH,IAAQ++G,EAAUE,KAAOj/G,IAAQ++G,EAAUG,MACjE,OAAO,EAKT,IAFA,IAAI9sI,EAAIozJ,EAAkBnzJ,OAEnBD,KAAK,CACV,IAAIwzJ,EAAKJ,EAAkBpzJ,GAE3B,GAAIwzJ,EAAG/T,SAAWA,EAChB,OAAO+T,EAAGH,YAAczlI,EAI5B,OAAO,EAUT,SAAS6lI,GAAuBxqB,EAAKyqB,EAAe7vJ,GAClDolI,EAAI7nI,KAAK,IAAKsyJ,EAAe,KAAM7vJ,EAAM4U,QAAQ,SAAU83I,GAAc,KAG3E,SAAS+C,GAAkBtlJ,EAAMi7H,EAAKqD,EAAQ4mB,EAAYE,GAKxD,GAJKA,IACHA,EAAoB,IAGlBF,EAAY,CAGd,KAFAllJ,EAAOklJ,EAAWllJ,IAQhB,OALA,GAAmB,iBAARA,EAET,YADAi7H,EAAI7nI,KAAK4M,GASf,OAAQA,EAAK9G,UACX,KAAK6lJ,EACH,IAAItiJ,EAAQuD,EAAKjG,WACb+rF,EAAMrpF,EAAMxK,OACZ2I,EAAQoF,EAAKnF,WACb0D,EAAWyB,EAAKnG,QAEhB8rJ,EAAmBpnJ,EAEvB,KAHA+/H,EAASK,EAAUL,OAAOt+H,EAAK+hJ,eAAiBzjB,KAGhCt+H,EAAKyxI,QAAUzxI,EAAK+hJ,aAAc,CAGhD,IAFA,IAAI6D,EAEKC,EAAK,EAAGA,EAAKppJ,EAAMxK,OAAQ4zJ,IAClC,GAA4B,UAAxBppJ,EAAM6B,KAAKunJ,GAAIvzJ,KAAkB,CACnCszJ,EAAYnpJ,EAAM6B,KAAKunJ,GAAIhwJ,MAC3B,MAIJ,IAAK+vJ,EAEH,IAAK,IAAIE,EAAMV,EAAkBnzJ,OAAS,EAAG6zJ,GAAO,EAAGA,IAAO,CAG5D,GAAyB,MAFrBT,EAAYD,EAAkBU,IAEpBrU,QAAiB4T,EAAUA,YAAcrlJ,EAAK+hJ,aAAc,CACxE6D,EAAYP,EAAUA,UACtB,OAKN,GAAIO,IAAc5lJ,EAAK+hJ,aACrB,IAAS+D,EAAMV,EAAkBnzJ,OAAS,EAAG6zJ,GAAO,EAAGA,IAAO,CAC5D,IAAIT,EAEJ,IAFIA,EAAYD,EAAkBU,IAEpBT,YAAcrlJ,EAAK+hJ,aAAc,CACzCsD,EAAU5T,SACZkU,EAAmBN,EAAU5T,OAAS,IAAMlzI,GAG9C,QAMR08H,EAAI7nI,KAAK,IAAKuyJ,GAEd,IAAK,IAAI3zJ,EAAI,EAAGA,EAAI8zF,EAAK9zF,IAAK,CAIT,UAFf+/C,EAAOt1C,EAAM6B,KAAKtM,IAEby/I,OACP2T,EAAkBhyJ,KAAK,CACrBq+I,OAAQ1/F,EAAKkwG,UACboD,UAAWtzG,EAAKl8C,QAEQ,SAAjBk8C,EAAKxzC,UACd6mJ,EAAkBhyJ,KAAK,CACrBq+I,OAAQ,GACR4T,UAAWtzG,EAAKl8C,QAKtB,IAAS7D,EAAI,EAAGA,EAAI8zF,EAAK9zF,IAAK,CAC5B,IAAI+/C,EAGE0/F,EACA7xH,EAFN,GAAI2lI,GAFAxzG,EAAOt1C,EAAM6B,KAAKtM,GAEQssI,EAAQ8mB,GAGpCK,GAAuBxqB,GAFnBwW,EAAS1/F,EAAK0/F,QAAU,IAES,SAAWA,EAAS,QADrD7xH,EAAMmyB,EAAKgwG,cAEfqD,EAAkBhyJ,KAAK,CACrBq+I,OAAQA,EACR4T,UAAWzlI,IAIf0lI,GAAkBvzG,EAAMkpF,EAAKqD,EAAQ4mB,EAAYE,GAInD,GAAI7mJ,IAAaonJ,GAAoBJ,GAAoBvlJ,EAAMs+H,EAAQ8mB,GAGrEK,GAAuBxqB,GAFnBwW,EAASzxI,EAAKyxI,QAAU,IAES,SAAWA,EAAS,QADrD7xH,EAAM5f,EAAK+hJ,cAEfqD,EAAkBhyJ,KAAK,CACrBq+I,OAAQA,EACR4T,UAAWzlI,IAIf,GAAIhlB,GAAS0jI,IAAW,mCAAmC/qI,KAAKgL,GAAW,CAGzE,GAFA08H,EAAI7nI,KAAK,KAELkrI,GAAU,YAAY/qI,KAAKgL,GAC7B,KAAO3D,GACDA,EAAM4H,KACRy4H,EAAI7nI,KAAKwH,EAAM4H,MAEf8iJ,GAAkB1qJ,EAAOqgI,EAAKqD,EAAQ4mB,EAAYE,EAAkB1zJ,SAGtEkJ,EAAQA,EAAMud,iBAGhB,KAAOvd,GACL0qJ,GAAkB1qJ,EAAOqgI,EAAKqD,EAAQ4mB,EAAYE,EAAkB1zJ,SACpEkJ,EAAQA,EAAMud,YAIlB8iH,EAAI7nI,KAAK,KAAMuyJ,EAAkB,UAEjC1qB,EAAI7nI,KAAK,MAKX,OAEF,KAAKmsJ,EACL,KAAKE,EAGH,IAFI7kJ,EAAQoF,EAAKnF,WAEVD,GACL0qJ,GAAkB1qJ,EAAOqgI,EAAKqD,EAAQ4mB,EAAYE,EAAkB1zJ,SACpEkJ,EAAQA,EAAMud,YAGhB,OAEF,KAAK6mI,EACH,OAAOyG,GAAuBxqB,EAAKj7H,EAAK1N,KAAM0N,EAAKnK,OAErD,KAAKopJ,EAgBH,OAAOhkB,EAAI7nI,KAAK4M,EAAKwC,KAAKiI,QAAQ,QAAS83I,GAAa93I,QAAQ,OAAQ,WAE1E,KAAKy0I,EACH,OAAOjkB,EAAI7nI,KAAK,YAAa4M,EAAKwC,KAAM,OAE1C,KAAK88I,EACH,OAAOrkB,EAAI7nI,KAAK,UAAQ4M,EAAKwC,KAAM,UAErC,KAAKg9I,EACH,IAAIuG,EAAQ/lJ,EAAKgmJ,SACbC,EAAQjmJ,EAAKkmJ,SAGjB,GAFAjrB,EAAI7nI,KAAK,aAAc4M,EAAK1N,MAExByzJ,EACF9qB,EAAI7nI,KAAK,WAAY2yJ,GAEjBE,GAAkB,KAATA,GACXhrB,EAAI7nI,KAAK,IAAK6yJ,GAGhBhrB,EAAI7nI,KAAK,UACJ,GAAI6yJ,GAAkB,KAATA,EAClBhrB,EAAI7nI,KAAK,WAAY6yJ,EAAO,SACvB,CACL,IAAIE,EAAMnmJ,EAAKomJ,eAEXD,GACFlrB,EAAI7nI,KAAK,KAAM+yJ,EAAK,KAGtBlrB,EAAI7nI,KAAK,KAGX,OAEF,KAAKisJ,EACH,OAAOpkB,EAAI7nI,KAAK,KAAM4M,EAAKvK,OAAQ,IAAKuK,EAAKwC,KAAM,MAErD,KAAK28I,EACH,OAAOlkB,EAAI7nI,KAAK,IAAK4M,EAAKzB,SAAU,KAItC,QACE08H,EAAI7nI,KAAK,KAAM4M,EAAKzB,WAI1B,SAAS8nJ,GAAY3hJ,EAAK1E,EAAMsmJ,GAC9B,IAAIC,EAEJ,OAAQvmJ,EAAK9G,UACX,KAAK6lJ,GACHwH,EAAQvmJ,EAAKutC,WAAU,IACjBnnC,cAAgB1B,EAOxB,KAAK+6I,EACH,MAEF,KAAKT,EACHsH,GAAO,EAyBX,GAPKC,IACHA,EAAQvmJ,EAAKutC,WAAU,IAGzBg5G,EAAMngJ,cAAgB1B,EACtB6hJ,EAAMppJ,WAAa,KAEfmpJ,EAGF,IAFA,IAAI1rJ,EAAQoF,EAAKnF,WAEVD,GACL2rJ,EAAMxrJ,YAAYsrJ,GAAY3hJ,EAAK9J,EAAO0rJ,IAC1C1rJ,EAAQA,EAAMud,YAIlB,OAAOouI,EAMT,SAASC,GAAW9hJ,EAAK1E,EAAMsmJ,GAC7B,IAAIC,EAAQ,IAAIvmJ,EAAKlP,YAErB,IAAK,IAAI4U,KAAK1F,EACZ,GAAI/K,OAAOlE,UAAUmD,eAAe6B,KAAKiK,EAAM0F,GAAI,CACjD,IAAI2hC,EAAIrnC,EAAK0F,GAEK,UAAdhV,EAAQ22C,IACNA,GAAKk/G,EAAM7gJ,KACb6gJ,EAAM7gJ,GAAK2hC,GAYnB,OANIrnC,EAAK2tC,aACP44G,EAAM54G,WAAa,IAAImzG,GAGzByF,EAAMngJ,cAAgB1B,EAEd6hJ,EAAMrtJ,UACZ,KAAK6lJ,EACH,IAAItiJ,EAAQuD,EAAKjG,WACb0sJ,EAASF,EAAMxsJ,WAAa,IAAIynJ,EAChC17D,EAAMrpF,EAAMxK,OAChBw0J,EAAOC,cAAgBH,EAEvB,IAAK,IAAIv0J,EAAI,EAAGA,EAAI8zF,EAAK9zF,IACvBu0J,EAAMI,iBAAiBH,GAAW9hJ,EAAKjI,EAAM6B,KAAKtM,IAAI,IAGxD,MAGF,KAAKgtJ,EACHsH,GAAO,EAGX,GAAIA,EAGF,IAFA,IAAI1rJ,EAAQoF,EAAKnF,WAEVD,GACL2rJ,EAAMxrJ,YAAYyrJ,GAAW9hJ,EAAK9J,EAAO0rJ,IACzC1rJ,EAAQA,EAAMud,YAIlB,OAAOouI,EAGT,SAAShF,GAAQpsJ,EAAQI,EAAKM,GAC5BV,EAAOI,GAAOM,EApvDhB+qJ,EAAa7vJ,UAAYoD,MAAMpD,UAC/B2tJ,EAAKiB,EAAeiB,GAUpBE,EAAS/vJ,UAAY,CAKnBkB,OAAQ,EAURqM,KAAM,SAAc9M,GAClB,OAAO4Q,KAAK5Q,IAAU,MAExBwD,SAAU,SAAkBspI,EAAQ4mB,GAClC,IAAK,IAAIjqB,EAAM,GAAIjpI,EAAI,EAAGA,EAAIoQ,KAAKnQ,OAAQD,IACzCszJ,GAAkBljJ,KAAKpQ,GAAIipI,EAAKqD,EAAQ4mB,GAG1C,OAAOjqB,EAAIn/H,KAAK,KAQlB1H,OAAQ,SAAgB6H,GACtB,OAAOrJ,MAAM7B,UAAUqD,OAAO2B,KAAKqM,KAAMnG,IAQ3CxK,QAAS,SAAiB6M,GACxB,OAAO1L,MAAM7B,UAAUU,QAAQsE,KAAKqM,KAAM9D,KAyB9CyiJ,EAAahwJ,UAAUuN,KAAO,SAAUtM,GAGtC,OAFAmvJ,EAAgB/+I,MAETA,KAAKpQ,IAGdkrJ,EAAS6D,EAAcD,GA0EvBU,EAAazwJ,UAAY,CACvBkB,OAAQ,EACRqM,KAAMwiJ,EAAS/vJ,UAAUuN,KACzBsoJ,aAAc,SAAsBrxJ,GAOlC,IAFA,IAAIvD,EAAIoQ,KAAKnQ,OAEND,KAAK,CACV,IAAI+/C,EAAO3vC,KAAKpQ,GAEhB,GAAI+/C,EAAKxzC,UAAYhJ,EACnB,OAAOw8C,IAIb80G,aAAc,SAAsB90G,GAClC,IAAI97C,EAAK87C,EAAK8vG,aAEd,GAAI5rJ,GAAMA,GAAMmM,KAAKskJ,cACnB,MAAM,IAAI9F,EAAaP,GAGzB,IAAIuB,EAAUx/I,KAAKwkJ,aAAa70G,EAAKxzC,UAIrC,OAFAmjJ,EAAct/I,KAAKskJ,cAAetkJ,KAAM2vC,EAAM6vG,GAEvCA,GAITkF,eAAgB,SAAwB/0G,GAEtC,IACI6vG,EADA3rJ,EAAK87C,EAAK8vG,aAGd,GAAI5rJ,GAAMA,GAAMmM,KAAKskJ,cACnB,MAAM,IAAI9F,EAAaP,GAOzB,OAJAuB,EAAUx/I,KAAK2kJ,eAAeh1G,EAAKgwG,aAAchwG,EAAKkwG,WAEtDP,EAAct/I,KAAKskJ,cAAetkJ,KAAM2vC,EAAM6vG,GAEvCA,GAIToF,gBAAiB,SAAyBzxJ,GACxC,IAAIw8C,EAAO3vC,KAAKwkJ,aAAarxJ,GAI7B,OAFA4sJ,EAAiB//I,KAAKskJ,cAAetkJ,KAAM2vC,GAEpCA,GAITk1G,kBAAmB,SAA2BlF,EAAcE,GAC1D,IAAIlwG,EAAO3vC,KAAK2kJ,eAAehF,EAAcE,GAI7C,OAFAE,EAAiB//I,KAAKskJ,cAAetkJ,KAAM2vC,GAEpCA,GAETg1G,eAAgB,SAAwBhF,EAAcE,GAGpD,IAFA,IAAIjwJ,EAAIoQ,KAAKnQ,OAEND,KAAK,CACV,IAAIgO,EAAOoC,KAAKpQ,GAEhB,GAAIgO,EAAKiiJ,WAAaA,GAAajiJ,EAAK+hJ,cAAgBA,EACtD,OAAO/hJ,EAIX,OAAO,OAqBXqiJ,EAAkBtxJ,UAAY,CAgB5Bm2J,WAAY,SAAoBC,EAAStvJ,GACvC,OAAO,GAyBTuvJ,eAAgB,SAAwBrF,EAAc2D,EAAe2B,GACnE,IAAI3iJ,EAAM,IAAI+9I,EASd,GARA/9I,EAAIiwB,eAAiBvyB,KACrBsC,EAAIipC,WAAa,IAAImzG,EACrBp8I,EAAI2iJ,QAAUA,GAAW,KAErBA,GACF3iJ,EAAI3J,YAAYssJ,GAGd3B,EAAe,CACjB,IAAI4B,EAAO5iJ,EAAI6iJ,gBAAgBxF,EAAc2D,GAC7ChhJ,EAAI3J,YAAYusJ,GAGlB,OAAO5iJ,GAwBT8iJ,mBAAoB,SAA4B9B,EAAeM,EAAUE,GACvE,IAAIlmJ,EAAO,IAAIykJ,GAKf,OAJAzkJ,EAAK1N,KAAOozJ,EACZ1lJ,EAAKzB,SAAWmnJ,EAChB1lJ,EAAKgmJ,SAAWA,GAAY,GAC5BhmJ,EAAKkmJ,SAAWA,GAAY,GACrBlmJ,IAUXsiJ,EAAKvxJ,UAAY,CACf8J,WAAY,KACZkoJ,UAAW,KACXD,gBAAiB,KACjB3qI,YAAa,KACbpe,WAAY,KACZoD,WAAY,KACZwwC,WAAY,KACZvnC,cAAe,KACfqhJ,UAAW,KACX1F,aAAc,KACdtQ,OAAQ,KACRwQ,UAAW,KAEXnnJ,aAAc,SAAsBoU,EAAUw4I,GAE5C,OAAO5D,GAAc1hJ,KAAM8M,EAAUw4I,IAEvCpyH,aAAc,SAAsBpmB,EAAUy4I,GAE5C7D,GAAc1hJ,KAAM8M,EAAUy4I,EAAU9D,GAEpC8D,GACFvlJ,KAAKvC,YAAY8nJ,IAGrB9nJ,YAAa,SAAqB8nJ,GAChC,OAAO/E,EAAaxgJ,KAAMulJ,IAE5B5sJ,YAAa,SAAqBmU,GAChC,OAAO9M,KAAKtH,aAAaoU,EAAU,OAErC4gC,cAAe,WACb,OAA0B,MAAnB1tC,KAAKvH,YAEd0yC,UAAW,SAAmB+4G,GAC5B,OAAOE,GAAWpkJ,KAAKgE,eAAiBhE,KAAMA,KAAMkkJ,IAGtDna,UAAW,WAGT,IAFA,IAAIvxI,EAAQwH,KAAKvH,WAEVD,GAAO,CACZ,IAAIgvB,EAAOhvB,EAAMud,YAEbyR,GAAQA,EAAK1wB,UAAY+lJ,GAAarkJ,EAAM1B,UAAY+lJ,GAC1D78I,KAAKvC,YAAY+pB,GACjBhvB,EAAMgtJ,WAAWh+H,EAAKpnB,QAEtB5H,EAAMuxI,YACNvxI,EAAQgvB,KAKd8D,YAAa,SAAqBy5H,EAAStvJ,GACzC,OAAOuK,KAAKgE,cAAcuuB,eAAeuyH,WAAWC,EAAStvJ,IAG/DgwJ,cAAe,WACb,OAAOzlJ,KAAKrI,WAAW9H,OAAS,GAiBlCkzJ,aAAc,SAAsBpD,GAGlC,IAFA,IAAI9rJ,EAAKmM,KAEFnM,GAAI,CACT,IAAI0I,EAAM1I,EAAG+rJ,OAEb,GAAIrjJ,EACF,IAAK,IAAI+G,KAAK/G,EACZ,GAAI1J,OAAOlE,UAAUmD,eAAe6B,KAAK4I,EAAK+G,IAAM/G,EAAI+G,KAAOq8I,EAC7D,OAAOr8I,EAKbzP,EAAKA,EAAGiD,UAAY8lJ,EAAiB/oJ,EAAGmQ,cAAgBnQ,EAAGkH,WAG7D,OAAO,MAGT2qJ,mBAAoB,SAA4BrW,GAG9C,IAFA,IAAIx7I,EAAKmM,KAEFnM,GAAI,CACT,IAAI0I,EAAM1I,EAAG+rJ,OAEb,GAAIrjJ,GACE8yI,KAAU9yI,GACR1J,OAAOlE,UAAUmD,eAAe6B,KAAK4I,EAAK8yI,GAC5C,OAAO9yI,EAAI8yI,GAKjBx7I,EAAKA,EAAGiD,UAAY8lJ,EAAiB/oJ,EAAGmQ,cAAgBnQ,EAAGkH,WAG7D,OAAO,MAGT4qJ,mBAAoB,SAA4BhG,GAE9C,OAAiB,MADJ3/I,KAAK+iJ,aAAapD,KASnCrD,EAAKI,EAAUwD,GACf5D,EAAKI,EAAUwD,EAAKvxJ,WA8bpB0xJ,EAAS1xJ,UAAY,CAEnBwN,SAAU,YACVrF,SAAUqmJ,EAQV8H,QAAS,KACT1iJ,gBAAiB,KACjB08I,KAAM,EACNvmJ,aAAc,SAAsBoU,EAAUw4I,GAE5C,GAAIx4I,EAAShW,UAAYumJ,EAAwB,CAG/C,IAFA,IAAI7kJ,EAAQsU,EAASrU,WAEdD,GAAO,CACZ,IAAIgvB,EAAOhvB,EAAMud,YACjB/V,KAAKtH,aAAaF,EAAO8sJ,GACzB9sJ,EAAQgvB,EAGV,OAAO1a,EAWT,OARA40I,GAAc1hJ,KAAM8M,EAAUw4I,GAE9Bx4I,EAAS9I,cAAgBhE,KAEI,OAAzBA,KAAKuC,iBAA4BuK,EAAShW,WAAa6lJ,IACzD38I,KAAKuC,gBAAkBuK,GAGlBA,GAETrP,YAAa,SAAqB8nJ,GAKhC,OAJIvlJ,KAAKuC,iBAAmBgjJ,IAC1BvlJ,KAAKuC,gBAAkB,MAGlBi+I,EAAaxgJ,KAAMulJ,IAE5BryH,aAAc,SAAsBpmB,EAAUy4I,GAE5C7D,GAAc1hJ,KAAM8M,EAAUy4I,EAAU9D,GAExC30I,EAAS9I,cAAgBhE,KAErBulJ,GACFvlJ,KAAKvC,YAAY8nJ,GAGf1E,EAAc/zI,KAChB9M,KAAKuC,gBAAkBuK,IAI3B84I,WAAY,SAAoBC,EAAc3B,GAC5C,OAAOD,GAAYjkJ,KAAM6lJ,EAAc3B,IAGzC4B,eAAgB,SAAwBr8I,GACtC,IAAIs8I,EAAM,KAWV,OATA3F,EAAWpgJ,KAAKuC,iBAAiB,SAAU3E,GACzC,GAAIA,EAAK9G,UAAY6lJ,GACf/+I,EAAKrD,aAAa,OAASkP,EAE7B,OADAs8I,EAAMnoJ,GACC,KAKNmoJ,GAoBTC,uBAAwB,SAAgCC,GACtD,IAAIC,EAAgB9J,EAAa6J,GACjC,OAAO,IAAItH,EAAa3+I,MAAM,SAAU68G,GACtC,IAAIqiC,EAAK,GAwBT,OAtBIgH,EAAcr2J,OAAS,GACzBuwJ,EAAWvjC,EAAKt6G,iBAAiB,SAAU3E,GACzC,GAAIA,IAASi/G,GAAQj/G,EAAK9G,WAAa6lJ,EAAc,CACnD,IAAIwJ,EAAiBvoJ,EAAKrD,aAAa,SAEvC,GAAI4rJ,EAAgB,CAElB,IAAI9oG,EAAU4oG,IAAeE,EAE7B,IAAK9oG,EAAS,CACZ,IAAI+oG,EAAoBhK,EAAa+J,GACrC9oG,EAAU6oG,EAAcrgJ,OA/mCjBwS,EA+mCqC+tI,EA9mCnD,SAAUvtJ,GACf,OAAOwf,IAAmC,IAA3BA,EAAKhpB,QAAQwJ,MAgnCdwkD,GACF6hG,EAAGluJ,KAAK4M,IAnnCxB,IAAuBya,KA0nCV6mI,MAIXrnJ,cAAe,SAAuBJ,GACpC,IAAImG,EAAO,IAAI4tC,GAQf,OAPA5tC,EAAKoG,cAAgBhE,KACrBpC,EAAKzB,SAAW1E,EAChBmG,EAAKnG,QAAUA,EACfmG,EAAKiiJ,UAAYpoJ,EACjBmG,EAAK2tC,WAAa,IAAImzG,GACV9gJ,EAAKjG,WAAa,IAAIynJ,GAC5BkF,cAAgB1mJ,EACfA,GAET0tC,uBAAwB,WACtB,IAAI1tC,EAAO,IAAI6kJ,GAGf,OAFA7kJ,EAAKoG,cAAgBhE,KACrBpC,EAAK2tC,WAAa,IAAImzG,EACf9gJ,GAETD,eAAgB,SAAwByC,GACtC,IAAIxC,EAAO,IAAIskJ,GAGf,OAFAtkJ,EAAKoG,cAAgBhE,KACrBpC,EAAK4nJ,WAAWplJ,GACTxC,GAETyoJ,cAAe,SAAuBjmJ,GACpC,IAAIxC,EAAO,IAAIukJ,GAGf,OAFAvkJ,EAAKoG,cAAgBhE,KACrBpC,EAAK4nJ,WAAWplJ,GACTxC,GAET0oJ,mBAAoB,SAA4BlmJ,GAC9C,IAAIxC,EAAO,IAAIwkJ,GAGf,OAFAxkJ,EAAKoG,cAAgBhE,KACrBpC,EAAK4nJ,WAAWplJ,GACTxC,GAET2oJ,4BAA6B,SAAqClzJ,EAAQ+M,GACxE,IAAIxC,EAAO,IAAI8kJ,GAIf,OAHA9kJ,EAAKoG,cAAgBhE,KACrBpC,EAAKnG,QAAUmG,EAAKvK,OAASA,EAC7BuK,EAAKynJ,UAAYznJ,EAAKwC,KAAOA,EACtBxC,GAET4oJ,gBAAiB,SAAyBt2J,GACxC,IAAI0N,EAAO,IAAIokJ,GAMf,OALApkJ,EAAKoG,cAAgBhE,KACrBpC,EAAK1N,KAAOA,EACZ0N,EAAKzB,SAAWjM,EAChB0N,EAAKiiJ,UAAY3vJ,EACjB0N,EAAK6oJ,WAAY,EACV7oJ,GAET8oJ,sBAAuB,SAA+Bx2J,GACpD,IAAI0N,EAAO,IAAI4kJ,GAGf,OAFA5kJ,EAAKoG,cAAgBhE,KACrBpC,EAAKzB,SAAWjM,EACT0N,GAGTunJ,gBAAiB,SAAyBxF,EAAc2D,GACtD,IAAI1lJ,EAAO,IAAI4tC,GACXm7G,EAAKrD,EAAc9pJ,MAAM,KACzBa,EAAQuD,EAAKjG,WAAa,IAAIynJ,EAgBlC,OAfAxhJ,EAAK2tC,WAAa,IAAImzG,EACtB9gJ,EAAKoG,cAAgBhE,KACrBpC,EAAKzB,SAAWmnJ,EAChB1lJ,EAAKnG,QAAU6rJ,EACf1lJ,EAAK+hJ,aAAeA,EAEH,GAAbgH,EAAG92J,QACL+N,EAAKyxI,OAASsX,EAAG,GACjB/oJ,EAAKiiJ,UAAY8G,EAAG,IAGpB/oJ,EAAKiiJ,UAAYyD,EAGnBjpJ,EAAMiqJ,cAAgB1mJ,EACfA,GAGTgpJ,kBAAmB,SAA2BjH,EAAc2D,GAC1D,IAAI1lJ,EAAO,IAAIokJ,GACX2E,EAAKrD,EAAc9pJ,MAAM,KAe7B,OAdAoE,EAAKoG,cAAgBhE,KACrBpC,EAAKzB,SAAWmnJ,EAChB1lJ,EAAK1N,KAAOozJ,EACZ1lJ,EAAK+hJ,aAAeA,EACpB/hJ,EAAK6oJ,WAAY,EAEA,GAAbE,EAAG92J,QACL+N,EAAKyxI,OAASsX,EAAG,GACjB/oJ,EAAKiiJ,UAAY8G,EAAG,IAGpB/oJ,EAAKiiJ,UAAYyD,EAGZ1lJ,IAIXk9I,EAASuF,EAAUH,GAOnB10G,GAAQ78C,UAAY,CAClBmI,SAAU6lJ,EACV7lI,aAAc,SAAsB5mB,GAClC,OAAsC,MAA/B8P,KAAK6mJ,iBAAiB32J,IAE/BqK,aAAc,SAAsBrK,GAClC,IAAIy/C,EAAO3vC,KAAK6mJ,iBAAiB32J,GACjC,OAAOy/C,GAAQA,EAAKl8C,OAAS,IAE/BozJ,iBAAkB,SAA0B32J,GAC1C,OAAO8P,KAAKrI,WAAW6sJ,aAAat0J,IAEtC+H,aAAc,SAAsB/H,EAAMuD,GACxC,IAAIk8C,EAAO3vC,KAAKgE,cAAcwiJ,gBAAgBt2J,GAC9Cy/C,EAAKl8C,MAAQk8C,EAAK01G,UAAY,GAAK5xJ,EACnCuM,KAAKukJ,iBAAiB50G,IAExB11C,gBAAiB,SAAyB/J,GACxC,IAAIy/C,EAAO3vC,KAAK6mJ,iBAAiB32J,GACjCy/C,GAAQ3vC,KAAK8mJ,oBAAoBn3G,IAGnCh3C,YAAa,SAAqBmU,GAChC,OAAIA,EAAShW,WAAaumJ,EACjBr9I,KAAKtH,aAAaoU,EAAU,MAzRzC,SAA4B/R,EAAY+R,GAmBtC,OAlBIA,EAAS/R,YACX+R,EAAS/R,WAAW0C,YAAYqP,GAGlCA,EAAS/R,WAAaA,EACtB+R,EAAS4zI,gBAAkB3lJ,EAAW4lJ,UACtC7zI,EAASiJ,YAAc,KAEnBjJ,EAAS4zI,gBACX5zI,EAAS4zI,gBAAgB3qI,YAAcjJ,EAEvC/R,EAAWtC,WAAaqU,EAG1B/R,EAAW4lJ,UAAY7zI,EAEvBwzI,EAAevlJ,EAAWiJ,cAAejJ,EAAY+R,GAE9CA,EAwQIi6I,CAAmB/mJ,KAAM8M,IAGpCy3I,iBAAkB,SAA0BhF,GAC1C,OAAOv/I,KAAKrI,WAAW8sJ,aAAalF,IAEtCyH,mBAAoB,SAA4BzH,GAC9C,OAAOv/I,KAAKrI,WAAW+sJ,eAAenF,IAExCuH,oBAAqB,SAA6BtH,GAEhD,OAAOx/I,KAAKrI,WAAWitJ,gBAAgBpF,EAAQrjJ,WAGjD8qJ,kBAAmB,SAA2BtH,EAAcE,GAC1D,IAAIn+I,EAAM1B,KAAKknJ,mBAAmBvH,EAAcE,GAChDn+I,GAAO1B,KAAK8mJ,oBAAoBplJ,IAElCylJ,eAAgB,SAAwBxH,EAAcE,GACpD,OAA2D,MAApD7/I,KAAKknJ,mBAAmBvH,EAAcE,IAE/CuH,eAAgB,SAAwBzH,EAAcE,GACpD,IAAIlwG,EAAO3vC,KAAKknJ,mBAAmBvH,EAAcE,GACjD,OAAOlwG,GAAQA,EAAKl8C,OAAS,IAE/B4zJ,eAAgB,SAAwB1H,EAAc2D,EAAe7vJ,GACnE,IAAIk8C,EAAO3vC,KAAKgE,cAAc4iJ,kBAAkBjH,EAAc2D,GAC9D3zG,EAAKl8C,MAAQk8C,EAAK01G,UAAY,GAAK5xJ,EACnCuM,KAAKukJ,iBAAiB50G,IAExBu3G,mBAAoB,SAA4BvH,EAAcE,GAC5D,OAAO7/I,KAAKrI,WAAWgtJ,eAAehF,EAAcE,IAEtDphJ,qBAAsB,SAA8BhH,GAClD,OAAO,IAAIknJ,EAAa3+I,MAAM,SAAU68G,GACtC,IAAIqiC,EAAK,GAQT,OANAkB,EAAWvjC,GAAM,SAAUj/G,GACrBA,IAASi/G,GAAQj/G,EAAK9G,UAAY6lJ,GAA6B,MAAZllJ,GAAmBmG,EAAKnG,SAAWA,GACxFynJ,EAAGluJ,KAAK4M,MAILshJ,MAGXoI,uBAAwB,SAAgC3H,EAAcE,GACpE,OAAO,IAAIlB,EAAa3+I,MAAM,SAAU68G,GACtC,IAAIqiC,EAAK,GAQT,OANAkB,EAAWvjC,GAAM,SAAUj/G,GACrBA,IAASi/G,GAAQj/G,EAAK9G,WAAa6lJ,GAAkC,MAAjBgD,GAAwB/hJ,EAAK+hJ,eAAiBA,GAAgC,MAAdE,GAAqBjiJ,EAAKiiJ,WAAaA,GAC7JX,EAAGluJ,KAAK4M,MAILshJ,OAIbmB,EAAS1xJ,UAAU8P,qBAAuB+sC,GAAQ78C,UAAU8P,qBAC5D4hJ,EAAS1xJ,UAAU24J,uBAAyB97G,GAAQ78C,UAAU24J,uBAE9DxM,EAAStvG,GAAS00G,GAKlB8B,GAAKrzJ,UAAUmI,SAAW8lJ,EAE1B9B,EAASkH,GAAM9B,GAKf+B,GAActzJ,UAAY,CACxByR,KAAM,GACNmnJ,cAAe,SAAuBv1F,EAAQnG,GAC5C,OAAO7rD,KAAKI,KAAK4yC,UAAUgf,EAAQA,EAASnG,IAE9C25F,WAAY,SAAoBntJ,GAC9BA,EAAO2H,KAAKI,KAAO/H,EACnB2H,KAAKqlJ,UAAYrlJ,KAAKI,KAAO/H,EAC7B2H,KAAKnQ,OAASwI,EAAKxI,QAErB23J,WAAY,SAAoBx1F,EAAQ35D,GACtC2H,KAAKynJ,YAAYz1F,EAAQ,EAAG35D,IAE9BM,YAAa,SAAqBmU,GAChC,MAAM,IAAI/a,MAAMyrJ,EAAiBC,KAEnCiK,WAAY,SAAoB11F,EAAQnG,GACtC7rD,KAAKynJ,YAAYz1F,EAAQnG,EAAO,KAElC47F,YAAa,SAAqBz1F,EAAQnG,EAAOxzD,GAG/CA,EAFY2H,KAAKI,KAAK4yC,UAAU,EAAGgf,GAEpB35D,EADL2H,KAAKI,KAAK4yC,UAAUgf,EAASnG,GAEvC7rD,KAAKqlJ,UAAYrlJ,KAAKI,KAAO/H,EAC7B2H,KAAKnQ,OAASwI,EAAKxI,SAIvBirJ,EAASmH,GAAe/B,GAKxBgC,GAAKvzJ,UAAY,CACfwN,SAAU,QACVrF,SAAU+lJ,EACV8K,UAAW,SAAmB31F,GAC5B,IAAI35D,EAAO2H,KAAKI,KACZwnJ,EAAUvvJ,EAAK26C,UAAUgf,GAC7B35D,EAAOA,EAAK26C,UAAU,EAAGgf,GACzBhyD,KAAKI,KAAOJ,KAAKqlJ,UAAYhtJ,EAC7B2H,KAAKnQ,OAASwI,EAAKxI,OACnB,IAAIg4J,EAAU7nJ,KAAKgE,cAAcrG,eAAeiqJ,GAMhD,OAJI5nJ,KAAKjF,YACPiF,KAAKjF,WAAWrC,aAAamvJ,EAAS7nJ,KAAK+V,aAGtC8xI,IAIX/M,EAASoH,GAAMD,IAKfE,GAAQxzJ,UAAY,CAClBwN,SAAU,WACVrF,SAAUomJ,GAGZpC,EAASqH,GAASF,IAKlBG,GAAazzJ,UAAY,CACvBwN,SAAU,iBACVrF,SAAUgmJ,GAGZhC,EAASsH,GAAcH,IAKvBI,GAAa1zJ,UAAUmI,SAAWsmJ,EAElCtC,EAASuH,GAAcnC,GAKvBoC,GAAS3zJ,UAAUmI,SAAWwmJ,EAE9BxC,EAASwH,GAAUpC,GAKnBqC,GAAO5zJ,UAAUmI,SAAWkmJ,EAE5BlC,EAASyH,GAAQrC,GAKjBsC,GAAgB7zJ,UAAUmI,SAAWimJ,EAErCjC,EAAS0H,GAAiBtC,GAK1BuC,GAAiB9zJ,UAAUwN,SAAW,qBACtCsmJ,GAAiB9zJ,UAAUmI,SAAWumJ,EAEtCvC,EAAS2H,GAAkBvC,GAI3BwC,GAAsB/zJ,UAAUmI,SAAWmmJ,EAE3CnC,EAAS4H,GAAuBxC,GAIhCyC,GAAch0J,UAAUu0J,kBAAoB,SAAUtlJ,EAAMilJ,EAAQC,GAClE,OAAOF,GAAsBjvJ,KAAKiK,EAAMilJ,EAAQC,IAGlD5C,EAAKvxJ,UAAUiE,SAAWgwJ,GAgZ1B,IACE,GAAI/vJ,OAAO2Q,eAAgB,CAkCzB,SAASskJ,GAAelqJ,GACtB,OAAQA,EAAK9G,UACX,KAAK6lJ,EACL,KAAKU,EACH,IAAIxkB,EAAM,GAGV,IAFAj7H,EAAOA,EAAKnF,WAELmF,GACiB,IAAlBA,EAAK9G,UAAoC,IAAlB8G,EAAK9G,UAC9B+hI,EAAI7nI,KAAK82J,GAAelqJ,IAG1BA,EAAOA,EAAKmY,YAGd,OAAO8iH,EAAIn/H,KAAK,IAElB,QACE,OAAOkE,EAAKynJ,WAnDlBxyJ,OAAO2Q,eAAem7I,EAAahwJ,UAAW,SAAU,CACtD6R,IAAK,WAGH,OAFAu+I,EAAgB/+I,MAETA,KAAK+nJ,YAGhBl1J,OAAO2Q,eAAe08I,EAAKvxJ,UAAW,cAAe,CACnD6R,IAAK,WACH,OAAOsnJ,GAAe9nJ,OAExBM,IAAK,SAAaF,GAChB,OAAQJ,KAAKlJ,UACX,KAAK6lJ,EACL,KAAKU,EACH,KAAOr9I,KAAKvH,YACVuH,KAAKvC,YAAYuC,KAAKvH,aAGpB2H,GAAQgkD,OAAOhkD,KACjBJ,KAAKrH,YAAYqH,KAAKgE,cAAcrG,eAAeyC,IAGrD,MAEF,QACEJ,KAAKI,KAAOA,EACZJ,KAAKvM,MAAQ2M,EACbJ,KAAKqlJ,UAAYjlJ,MA2BzB++I,GAAU,SAAiBpsJ,EAAQI,EAAKM,GAEtCV,EAAO,KAAOI,GAAOM,IAGzB,MAAOQ,KAIT5F,EAAQg0J,aAAeA,GACvBh0J,EAAQmwJ,aAAeA,EACvBnwJ,EAAQ4xJ,kBAAoBA,EAC5B5xJ,EAAQm9C,QAAUA,GAClBn9C,EAAQ6xJ,KAAOA,EACf7xJ,EAAQqwJ,SAAWA,EACnBrwJ,EAAQs0J,cAAgBA,I,kCCl+DxB,gDACIqF,EAAM,YAAQ,CAAC,GAAM,GAAM,KAiBpB1iE,EAAe,SAASA,EAAa9sB,EAAOxG,GAOrD,YANe,IAAXA,IACFA,EAAS,IAGXwG,EAAQ,YAAQA,IAEN3oE,OAASmiE,EAAS,KAAO,YAAWwG,EAAOwvF,EAAK,CACxDh2F,OAAQA,IAEDA,GAGTA,GA7BsB,SAAoBwG,EAAOxG,QAClC,IAAXA,IACFA,EAAS,GAIX,IAAI6V,GADJrP,EAAQ,YAAQA,IACExG,EAAS,GACvBqzB,EAAa7sB,EAAMxG,EAAS,IAAM,GAAKwG,EAAMxG,EAAS,IAAM,GAAKwG,EAAMxG,EAAS,IAAM,EAAIwG,EAAMxG,EAAS,GAG7G,OAF6B,GAAR6V,IAAe,EAG3Bwd,EAAa,GAGfA,EAAa,GAeV4iE,CAAWzvF,EAAOxG,GAIrBszB,EAAa9sB,EAAOxG,M,sBCnC7B,sBAEcnuD,EAFd,cAAoW,OAAtOvV,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAIjX,oBAAsBJ,MAAOA,KAFjB0V,EAE8B,WAC1C,OAAO,SAAU5P,GACf,IAAI4P,EAAI,GAER,SAASgiC,EAAEviC,GACT,GAAIO,EAAEP,GAAI,OAAOO,EAAEP,GAAGjV,QACtB,IAAIuB,EAAIiU,EAAEP,GAAK,CACb1T,EAAG0T,EACHwU,GAAG,EACHzpB,QAAS,IAEX,OAAO4F,EAAEqP,GAAG3P,KAAK/D,EAAEvB,QAASuB,EAAGA,EAAEvB,QAASw3C,GAAIj2C,EAAEkoB,GAAI,EAAIloB,EAAEvB,QAG5D,OAAOw3C,EAAExiC,EAAIpP,EAAG4xC,EAAEpsC,EAAIoK,EAAGgiC,EAAEs4C,EAAI,SAAUlqF,EAAG4P,EAAGP,GAC7CuiC,EAAEA,EAAE5xC,EAAG4P,IAAMhR,OAAO2Q,eAAevP,EAAG4P,EAAG,CACvCgoC,YAAY,EACZrrC,IAAK8C,KAENuiC,EAAEyM,EAAI,SAAUr+C,GACjB,oBAAsBzF,QAAUA,OAAO05J,aAAer1J,OAAO2Q,eAAevP,EAAGzF,OAAO05J,YAAa,CACjGz0J,MAAO,WACLZ,OAAO2Q,eAAevP,EAAG,aAAc,CACzCR,OAAO,KAERoyC,EAAEhiC,EAAI,SAAU5P,EAAG4P,GACpB,GAAI,EAAIA,IAAM5P,EAAI4xC,EAAE5xC,IAAK,EAAI4P,EAAG,OAAO5P,EACvC,GAAI,EAAI4P,GAAK,UAAYvV,EAAQ2F,IAAMA,GAAKA,EAAEmpH,WAAY,OAAOnpH,EACjE,IAAIqP,EAAIzQ,OAAO2qH,OAAO,MACtB,GAAI33E,EAAEyM,EAAEhvC,GAAIzQ,OAAO2Q,eAAeF,EAAG,UAAW,CAC9CuoC,YAAY,EACZp4C,MAAOQ,IACL,EAAI4P,GAAK,iBAAmB5P,EAAG,IAAK,IAAIrE,KAAKqE,EAC/C4xC,EAAEs4C,EAAE76E,EAAG1T,EAAG,SAAUiU,GAClB,OAAO5P,EAAE4P,IACTY,KAAK,KAAM7U,IAEf,OAAO0T,GACNuiC,EAAEviC,EAAI,SAAUrP,GACjB,IAAI4P,EAAI5P,GAAKA,EAAEmpH,WAAa,WAC1B,OAAOnpH,EAAEkpI,SACP,WACF,OAAOlpI,GAET,OAAO4xC,EAAEs4C,EAAEt6E,EAAG,IAAKA,GAAIA,GACtBgiC,EAAEA,EAAI,SAAU5xC,EAAG4P,GACpB,OAAOhR,OAAOlE,UAAUmD,eAAe6B,KAAKM,EAAG4P,IAC9CgiC,EAAEmhB,EAAI,GAAInhB,EAAEA,EAAE3T,EAAI,GA9ChB,CA+CL,CAAC,SAAUj+B,EAAG4P,EAAGgiC,GACjB,cAEA,SAAWhiC,GA+BT,IAAIP,EAAIO,EAAEm0I,cAAgBn0I,EAAEo0I,mBACxBroJ,EAAI,SAASqE,IACf,IAAI4P,EAAI7D,KACJ6lC,EAAIt4C,UAAUsC,OAAS,QAAK,IAAWtC,UAAU,GAAKA,UAAU,GAAK,GACzE,IAAK0G,EAAEk0J,uBAAwB,MAAM,IAAIp2J,MAAM,8CAC/CiO,KAAK2H,MAAQ,WAAY3H,KAAKwlC,OAAS3yC,OAAOO,OAAO,CACnDg1J,aAAc,KACdC,mBAAoB,KACpBC,iBAAkB,GAClBC,YAAa,uBACbC,kBAAmB,KACnBC,iBAAkB,GAClBC,uBAAuB,EACvBC,YAAa,EACbjP,iBAAkB,EAClBkP,cAAe,EACfC,gBAAiB,EACjBC,aAAa,EACbC,YAAa,GACbC,WAAY,CACV3xJ,QAAS,OAEVwuC,GAAI7lC,KAAKipJ,sBAAwB,EAAGjpJ,KAAKkpJ,mBAAoBlpJ,KAAKoiH,WAAapiH,KAAKmpJ,cAAc52I,MAAK,WACxG,OAAO1O,EAAEulJ,kBAIbx5J,EAAEu4J,qBAAuB,WACvB,IAAIl0J,EAAI4P,EAAExP,WAAawP,EAAExP,UAAUg1J,cAAgBxlJ,EAAExP,UAAUg1J,aAAaC,aAC5E,OAAOhmJ,GAAKrP,GAAK4P,EAAE0lJ,aAClB35J,EAAE6F,QAAU,QAAS7F,EAAEjB,UAAU66J,YAAc,WAChDxpJ,KAAKqlE,SAAWrlE,KAAKqlE,OAAOsmB,UAAY3rF,KAAKqlE,OAAOsmB,YAAYz4F,SAAQ,SAAUe,GAChF,OAAOA,EAAEqiJ,UACNt2I,KAAKqlE,OAAOixE,SAChB1mJ,EAAEjB,UAAUmlB,MAAQ,WACrB,OAAO9T,KAAKypJ,gBAAgBjhH,aAAcxoC,KAAK0pJ,kBAAkBlhH,aAAcxoC,KAAKgpJ,YAAchpJ,KAAKgpJ,WAAWxgH,aAAcxoC,KAAKwpJ,cAAexpJ,KAAK2pJ,UAAY3pJ,KAAK4pJ,YAAYphH,aAAcxoC,KAAK2pJ,QAAQt1D,YAAY,CAC3Nw1D,QAAS,WACN7pJ,KAAKwlC,OAAOwjH,WAAW3xJ,QAAU2tB,QAAQg5B,UAAYh+C,KAAKqxI,aAAav9H,SAC3ElkB,EAAEjB,UAAUm7J,cAAgB,SAAU71J,GACvC,GAAI,cAAgB+L,KAAK2H,MAAO,CAC9B,IAAK,IAAI9D,EAAI,GAAIgiC,EAAI,EAAGA,EAAI5xC,EAAEylJ,iBAAkB7zG,IAC9ChiC,EAAEgiC,GAAK5xC,EAAE+lJ,eAAen0G,GAG1B7lC,KAAK2pJ,QAAQt1D,YAAY,CACvBw1D,QAAS,SACTlxB,QAAS90H,MAGZjU,EAAEjB,UAAUu6J,iBAAmB,WAChClpJ,KAAKqxI,aAAerxI,KAAKwlC,OAAOwjH,WAAW3xJ,QAAU2I,KAAKwlC,OAAOwjH,WAAW3xJ,QAAU,IAAIiM,EAAKtD,KAAKypJ,gBAAkBzpJ,KAAKqxI,aAAa2H,aAAch5I,KAAK+pJ,eAAe/pJ,KAAKwlC,OAAOmjH,aAAc3oJ,KAAK0pJ,kBAAoB1pJ,KAAKqxI,aAAa2H,aAAch5I,KAAKgqJ,iBAAiBhqJ,KAAKwlC,OAAOojH,gBAC9Rh5J,EAAEjB,UAAUy6J,YAAc,WAC3B,IAAIn1J,EAAI+L,KACRA,KAAKqxI,aAAa4Y,cAAgBjqJ,KAAK4pJ,YAAc,IAAIM,iBAAiBlqJ,KAAKqxI,aAAc,kBAAmB,CAC9G8Y,gBAAiB,IACfnqJ,KAAK2pJ,QAAU3pJ,KAAK4pJ,YAAYQ,OAASn5J,QAAQZ,IAAI,sEAAuE2P,KAAK8pJ,cAAgB,WACnJ,cAAc71J,EAAE61J,eACf9pJ,KAAK4pJ,YAAc5pJ,KAAKqxI,aAAasH,sBAAsB34I,KAAKwlC,OAAO4iH,aAAcpoJ,KAAKwlC,OAAOk0G,iBAAkB15I,KAAKwlC,OAAOk0G,kBAAmB15I,KAAK4pJ,YAAY9Q,eAAiB,SAAUj1I,GAC/L,IAAIgiC,EAAIhiC,EAAEwmJ,YACV,OAAOp2J,EAAE61J,cAAcjkH,IACtB7lC,KAAK4pJ,YAAY5e,QAAQhrI,KAAKqxI,aAAa1uE,aAAc3iE,KAAK2pJ,QAAU,IAAI9lJ,EAAEq+D,OAAOliE,KAAKwlC,OAAO+iH,eACnG34J,EAAEjB,UAAU27J,eAAiB,WAC9B,IAAIr2J,EAAI+L,KACR,OAAOA,KAAKwlC,OAAOwjH,WAAW3xJ,SAAW2I,KAAKgpJ,WAAahpJ,KAAKwlC,OAAOwjH,WAAYhkI,QAAQg5B,WAAan6C,EAAExP,UAAUg1J,aAAaC,aAAa,CAC5InpI,MAAOngB,KAAKwlC,OAAOkjH,wBAClBn2I,MAAK,SAAU1O,GAChB5P,EAAEoxE,OAASxhE,EAAG5P,EAAE+0J,WAAa/0J,EAAEo9I,aAAakZ,wBAAwB1mJ,OAErEjU,EAAEjB,UAAU67J,WAAa,WAC1B,IAAIv2J,EAAI+L,KACJ6D,GAAK7D,KAAKwlC,OAAOsjH,YAAc9oJ,KAAKyqJ,WAAazqJ,KAAK0qJ,WAAWjmJ,KAAKzE,MAC1E,OAAOA,KAAK2qJ,cAAgB,GAAI3qJ,KAAK4qJ,YAAc,EAAG,IAAI5lI,SAAQ,SAAU1hB,GAC1ErP,EAAE01J,QAAQrqJ,iBAAiB,WAAW,SAASumC,EAAEj2C,GAC/C,IAAI0iD,EAAI1iD,EAAEwQ,KAEV,OAAQkyC,EAAErgC,SACR,IAAK,QACH3O,IACA,MAEF,IAAK,OACHrP,EAAEg1J,sBAAwB32G,EAAEu4G,eAAgBhnJ,EAAEyuC,EAAEw4G,MAChD,MAEF,IAAK,OACH72J,EAAE01J,QAAQvqJ,oBAAoB,UAAWymC,GAAI5xC,EAAE82J,aAEjD92J,EAAE01J,QAAQl4I,OAASxd,EAAE01J,QAAQl4I,QACjC,IAAI7hB,EAAIqE,EAAEuxC,OACN8M,GAAK1iD,EAAEo5J,WAvHf,SAAW/0J,EAAG4P,GACZ,GAAI,MAAQ5P,EAAG,MAAO,GAEtB,IAAI4xC,EACAviC,EACA1T,EAAI,SAAUqE,EAAG4P,GACnB,GAAI,MAAQ5P,EAAG,MAAO,GACtB,IAAI4xC,EACAviC,EACA1T,EAAI,GACJ0iD,EAAIz/C,OAAOC,KAAKmB,GAEpB,IAAKqP,EAAI,EAAGA,EAAIgvC,EAAEziD,OAAQyT,IACxBuiC,EAAIyM,EAAEhvC,GAAIO,EAAExU,QAAQw2C,IAAM,IAAMj2C,EAAEi2C,GAAK5xC,EAAE4xC,IAG3C,OAAOj2C,EAXD,CAYNqE,EAAG4P,GAEL,GAAIhR,OAAOm4J,sBAAuB,CAChC,IAAI14G,EAAIz/C,OAAOm4J,sBAAsB/2J,GAErC,IAAKqP,EAAI,EAAGA,EAAIgvC,EAAEziD,OAAQyT,IACxBuiC,EAAIyM,EAAEhvC,GAAIO,EAAExU,QAAQw2C,IAAM,GAAKhzC,OAAOlE,UAAUs8J,qBAAqBt3J,KAAKM,EAAG4xC,KAAOj2C,EAAEi2C,GAAK5xC,EAAE4xC,IAIjG,OAAOj2C,EA4FkBi2C,CAAEj2C,EAAG,CAAC,gBAC7BqE,EAAE01J,QAAQt1D,YAAYxhG,OAAOO,OAAO,CAClCy2J,QAAS,OACTqB,mBAAoBj3J,EAAEo9I,aAAa9kE,WACnC4+E,cAAel3J,EAAEo9I,aAAa9kE,YAC7Bj6B,QAEJ1iD,EAAEjB,UAAUw6J,YAAc,WAC3B,OAAOnpJ,KAAKqxI,aAAa4Y,aAAejqJ,KAAKqxI,aAAa4Y,aAAamB,UAAUprJ,KAAKwlC,OAAO+iH,aAAevjI,QAAQg5B,WACnHpuD,EAAEjB,UAAUumB,MAAQ,SAAUjhB,GAC/B,IAAI4P,EAAI7D,KACR,GAAI,cAAgBA,KAAK2H,MAAO,OAAO3H,KAAK2H,MAAQ,SAAU3H,KAAK0pJ,kBAAkBlhH,aAAcv0C,GAAK+L,KAAKwlC,OAAOsjH,YAAc,IAAI9jI,SAAQ,SAAU/wB,GACtJ4P,EAAE8lJ,QAAQrqJ,iBAAiB,WAAW,SAASumC,EAAEviC,GAC/C,YAAcA,EAAElD,KAAK6R,UAAYpO,EAAE8lJ,QAAQvqJ,oBAAoB,UAAWymC,GAAIhiC,EAAEwnJ,UAAWp3J,QACzF4P,EAAE8lJ,QAAQl4I,OAAS5N,EAAE8lJ,QAAQl4I,QAAS5N,EAAE8lJ,QAAQt1D,YAAY,CAC9Dw1D,QAAS,cAEP7pJ,KAAKqrJ,UAAWrmI,QAAQg5B,YAC7BpuD,EAAEjB,UAAU2rJ,OAAS,WACtB,WAAat6I,KAAK2H,QAAU3H,KAAK2H,MAAQ,YAAa3H,KAAK0pJ,kBAAkB1e,QAAQhrI,KAAK4pJ,aAAc5pJ,KAAKsrJ,aAC5G17J,EAAEjB,UAAUq7J,iBAAmB,SAAU/1J,GAC1C+L,KAAKwlC,OAAOojH,cAAgB30J,EAAG+L,KAAK0pJ,mBAAqB1pJ,KAAKqxI,cAAgBrxI,KAAK0pJ,kBAAkBrQ,KAAKkS,gBAAgBt3J,EAAG+L,KAAKqxI,aAAaryH,YAAa,MAC3JpvB,EAAEjB,UAAUo7J,eAAiB,SAAU91J,GACxC+L,KAAKwlC,OAAOmjH,YAAc10J,EAAG+L,KAAKypJ,iBAAmBzpJ,KAAKqxI,cAAgBrxI,KAAKypJ,gBAAgBpQ,KAAKkS,gBAAgBt3J,EAAG+L,KAAKqxI,aAAaryH,YAAa,MACrJpvB,EAAEjB,UAAU8iB,MAAQ,WACrB,IAAIxd,EAAI+L,KACR,MAAO,aAAeA,KAAK2H,OAAS3H,KAAK2H,MAAQ,UAAW3H,KAAKipJ,sBAAwB,EAAGjpJ,KAAKqxI,aAAaiJ,SAAS/nI,MAAK,WAC1H,OAAOte,EAAEmuH,cACR7vG,MAAK,WACN,OAAOyS,QAAQxzB,IAAI,CAACyC,EAAEq2J,iBAAkBr2J,EAAEu2J,kBACzCj4I,MAAK,WACNte,EAAE0T,MAAQ,YAAa1T,EAAE01J,QAAQt1D,YAAY,CAC3Cw1D,QAAS,mBACP51J,EAAE+0J,WAAWhe,QAAQ/2I,EAAEw1J,iBAAkBx1J,EAAE+0J,WAAWhe,QAAQ/2I,EAAEy1J,mBAAoBz1J,EAAEw1J,gBAAgBze,QAAQ/2I,EAAEo9I,aAAa1uE,aAAc1uE,EAAEy1J,kBAAkB1e,QAAQ/2I,EAAE21J,aAAc31J,EAAEu3J,aAC5L1c,OAAM,SAAUjrI,GACjB,MAAM5P,EAAE0T,MAAQ,WAAY9D,MACxBmhB,QAAQg5B,WACbpuD,EAAEjB,UAAU2nJ,KAAO,WACpB,IAAIriJ,EAAI+L,KACR,MAAO,WAAaA,KAAK2H,OAAS,cAAgB3H,KAAK2H,OAAS3H,KAAK2H,MAAQ,WAAY3H,KAAK0pJ,kBAAkB1e,QAAQhrI,KAAK4pJ,aAAc5pJ,KAAKypJ,gBAAgBjhH,aAAcxoC,KAAKwpJ,cAAe,IAAIxkI,SAAQ,SAAUnhB,GACtN5P,EAAE01J,QAAQrqJ,iBAAiB,WAAW,SAASumC,EAAEviC,GAC/C,SAAWA,EAAElD,KAAK6R,UAAYhe,EAAE01J,QAAQvqJ,oBAAoB,UAAWymC,GAAIhiC,QACzE5P,EAAE01J,QAAQl4I,OAASxd,EAAE01J,QAAQl4I,QAASxd,EAAE01J,QAAQt1D,YAAY,CAC9Dw1D,QAAS,aAEP7kI,QAAQg5B,WACbpuD,EAAEjB,UAAU+7J,UAAY,SAAUz2J,GACnC+L,KAAK2qJ,cAAc35J,KAAKiD,GAAI+L,KAAK4qJ,aAAe32J,EAAEpE,QACjDD,EAAEjB,UAAU87J,WAAa,SAAUx2J,GACpC+L,KAAKyrJ,gBAAgBx3J,IACpBrE,EAAEjB,UAAUo8J,OAAS,WACtB,IAAK/qJ,KAAKwlC,OAAOsjH,YAAa,CAC5B,IAAI70J,EAAI,IAAIizE,WAAWlnE,KAAK4qJ,aAC5B5qJ,KAAK2qJ,cAAcj/I,QAAO,SAAU7H,EAAGgiC,GACrC,OAAO5xC,EAAEqM,IAAIulC,EAAGhiC,GAAIA,EAAIgiC,EAAEh2C,SACzB,GAAImQ,KAAKyrJ,gBAAgBx3J,GAG9B+L,KAAK0rJ,UACJ97J,EAAEjB,UAAU88J,gBAAkB,aAAgB77J,EAAEjB,UAAU08J,QAAU,aAAgBz7J,EAAEjB,UAAU28J,SAAW,aAAgB17J,EAAEjB,UAAU68J,QAAU,aAAgB57J,EAAEjB,UAAU+8J,OAAS,aAAgBz3J,EAAE5F,QAAUuB,IACpN+D,KAAKqM,KAAM6lC,EAAE,KACf,SAAU5xC,EAAG4P,GACd,IAAIgiC,EAEJA,EAAI,WACF,OAAO7lC,KADL,GAIJ,IACE6lC,EAAIA,GAAK,IAAI8lH,SAAS,cAAb,GACT,MAAO13J,GACP,WAA+B,qBAAXhG,OAAyB,YAAcK,EAAQL,WAAa43C,EAAI53C,QAGtFgG,EAAE5F,QAAUw3C,MAtPd,UAA4Dv3C,EAAQD,IAAa,UAA2DC,EAAQF,GAAWA,EAAOC,QAAUwV,KAAkD,EAAO,QAAK,2BAAD,EAAF,GAAG,kC,wDCHjO,QAA0B,wB,kCCA1B,QAA0B,qB,sBCAzC,sBAOiD69D,EAPjD,cAAoW,OAAtOpzE,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAShXJ,KAF8CuzE,EAExC,WACP,OAEE,WAIE,aAGA,IAAIo7D,EAAsB,CAExB,mCAMA,SAAoC1uI,EAAQC,GAY1C,SAAS2uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAjBlD94C,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAiB,aAAI,EAqErB,IAAIu9J,EAAgC,WAClC,SAASA,EAAiB9pB,EAAQ+pB,GAChC,IAAI1mJ,EAAQnF,MArEhB,SAAyB2mD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAqEpB21E,CAAgBr9H,KAAM4rJ,GAEtB5rJ,KAAK8hI,OAASA,EACd9hI,KAAK8rJ,WAAaD,EAClB7rJ,KAAKif,QAAS,EACdjf,KAAKgV,QAAS,EACdhV,KAAK1J,QAAU0J,KAAK+rJ,gBAEpB/rJ,KAAKgsJ,qBAAuB,SAAU/3J,GACpC,OAAOkR,EAAM8mJ,aAAah4J,SAsBGiH,IAA3B7G,UAAUg1J,eACZh1J,UAAUg1J,aAAe,SAOiBnuJ,IAAxC7G,UAAUg1J,aAAaC,eACzBj1J,UAAUg1J,aAAaC,aA3BD,SAA2B4C,EAAaC,EAAiBC,GAE/E,IAAI9C,EAAej1J,UAAUi1J,cAAgBj1J,UAAUg4J,oBAAsBh4J,UAAUi4J,iBAAmBj4J,UAAUk4J,eAGpH,OAAKjD,EAME,IAAItkI,SAAQ,SAAUmnI,EAAiBC,GAC5C9C,EAAa31J,KAAKU,UAAW63J,EAAaC,EAAiBC,MANpDpnI,QAAQC,OAAO,IAAIlzB,MAAM,sDAwBpCiO,KAAKksJ,YAAclsJ,KAAK8hI,OAAOoqB,aAAe,CAC5C3rI,OAAO,EACPJ,OAAO,GAETngB,KAAK69E,WAAa79E,KAAK8hI,OAAOjkD,YAAc,KAC5C79E,KAAKwsJ,sBAAwBxsJ,KAAK8hI,OAAO0qB,uBAAyB,EAClExsJ,KAAKysJ,uBAAyBzsJ,KAAK8hI,OAAO2qB,wBAA0B,EAEpEzsJ,KAAK0sJ,kBAAoB,WAEvBvnJ,EAAMwnJ,WAAaxnJ,EAAM2mJ,WAAWva,QAAQ6F,mBA5GlD,IAAsBn6B,EAAaC,EAAYC,EAuZ7C,OAvZoBF,EAgHP2uC,EAhHgCzuC,EAiYzC,CAAC,CACHhqH,IAAK,SACLM,MAUA,SAAgBquI,GACd,MAAO,CACL5xI,KAAM,aACNyjJ,aAAW7R,IAAUA,EAAO6R,YAAY7R,EAAO6R,UAC/C7R,OAAQA,EACRn7E,SAAUilG,OAlZiB1uC,EAgHF,CAAC,CAC9B/pH,IAAK,OACLM,MAAO,WACLuM,KAAK8rJ,WAAW7oJ,GAAG,kBAAmBjD,KAAK0sJ,mBAEvC1sJ,KAAK8rJ,WAAWva,SAClBvxI,KAAK0sJ,sBAOR,CACDv5J,IAAK,UACLM,MAAO,WAGLuM,KAAKgV,QAAS,EACdhV,KAAK8rJ,WAAWrf,GAAG,kBAAmBzsI,KAAK0sJ,mBAC3C1sJ,KAAKs2I,SAON,CACDnjJ,IAAK,QACLM,MAAO,WACL,IAAImT,EAAS5G,KAEb3L,UAAUg1J,aAAaC,aAAatpJ,KAAKksJ,aAAa35I,MAAK,SAAUnS,GACnE,OAAOwG,EAAOgmJ,UAAUxsJ,MACvB0uI,OAAM,SAAU1uI,GACjB,OAAOwG,EAAOimJ,YAAYzsJ,QAO7B,CACDjN,IAAK,aACLM,MAAO,WACAuM,KAAKif,QAKRjf,KAAKgV,QAAUhV,KAAKgV,OAEhBhV,KAAKgV,OACPhV,KAAKkV,QAELlV,KAAKmJ,QARPnJ,KAAKyR,UAgBR,CACDte,IAAK,OACLM,MAAO,WACLuM,KAAKgV,QAAS,EACdhV,KAAKgrI,YAMN,CACD73I,IAAK,QACLM,MAAO,WACLuM,KAAKgV,QAAS,EAGdhV,KAAKwoC,eAON,CACDr1C,IAAK,OACLM,MAAO,WACDuM,KAAKif,SAEPjf,KAAK8sJ,aAEL9sJ,KAAK8rJ,WAAW91I,WAOnB,CACD7iB,IAAK,aACLM,MAAO,WACLuM,KAAKif,QAAS,EAEdjf,KAAKwoC,aAEDxoC,KAAKqlE,QAAUrlE,KAAKqlE,OAAOsmB,WAC7B3rF,KAAKqlE,OAAOsmB,YAAYz4F,SAAQ,SAAUmyE,GACxC,OAAOA,EAAOixE,YAQnB,CACDnjJ,IAAK,UACLM,MAAO,gBACeyH,IAAhB8E,KAAKqlE,SAEsB,SAAzBrlE,KAAK1J,QAAQA,UACf0J,KAAK+sJ,iBAAmB/sJ,KAAK2sJ,WAAW/S,aAAa55I,KAAKwsJ,sBAAuBxsJ,KAAK69E,WAAY79E,KAAK2sJ,WAAWpgF,aAIpHvsE,KAAKgtJ,kBAAoBhtJ,KAAK2sJ,WAAWpC,wBAAwBvqJ,KAAKqlE,QACtErlE,KAAKitJ,aAAejtJ,KAAK2sJ,WAAWhU,sBAAsB34I,KAAK69E,WAAY79E,KAAKwsJ,sBAAuBxsJ,KAAKysJ,wBAC5GzsJ,KAAKgtJ,kBAAkBhiB,QAAQhrI,KAAKitJ,cACpCjtJ,KAAKitJ,aAAajiB,QAAQhrI,KAAK2sJ,WAAWhqF,aAC1C3iE,KAAKitJ,aAAanU,eAAiB94I,KAAKgsJ,wBAO3C,CACD74J,IAAK,aACLM,MAAO,gBAC0ByH,IAA3B8E,KAAKgtJ,mBACPhtJ,KAAKgtJ,kBAAkBxkH,kBAGCttC,IAAtB8E,KAAKitJ,eACPjtJ,KAAKitJ,aAAazkH,aAClBxoC,KAAKitJ,aAAanU,oBAAiB59I,QAGPA,IAA1B8E,KAAK+sJ,mBACP/sJ,KAAK+sJ,sBAAmB7xJ,KAS3B,CACD/H,IAAK,eACLM,MAAO,SAAsBsI,GAC3B,IAAKiE,KAAKgV,OAGR,GAFAhV,KAAK8rJ,WAAW91I,QAEa,SAAzBhW,KAAK1J,QAAQA,QAAoB,CAGnC,IAAI42J,EAASp1I,EAEb,IAAKo1I,EAAU,EAAGp1I,EAAI1a,KAAKE,IAAI0C,KAAK+sJ,iBAAiBrT,iBAAkB39I,EAAMsuJ,YAAY3Q,kBAAmBwT,EAAUp1I,EAAGo1I,IACvHltJ,KAAK+sJ,iBAAiB/S,eAAekT,GAAS5sJ,IAAIvE,EAAMsuJ,YAAYrQ,eAAekT,IAGrFltJ,KAAK8rJ,WAAW1W,kBAAkBp1I,KAAK+sJ,uBAEvC/sJ,KAAK8rJ,WAAW1W,kBAAkBr5I,EAAMsuJ,eAU7C,CACDl3J,IAAK,YACLM,MAAO,SAAmB4xE,GACxBrlE,KAAKqlE,OAASA,EACdrlE,KAAKif,QAAS,EAEdjf,KAAKmJ,OAELnJ,KAAK4jI,UAAU,cAAev+D,KAQ/B,CACDlyE,IAAK,cACLM,MAAO,SAAqBmX,GAE1B5K,KAAK4jI,UAAU,cAAeh5H,KAU/B,CACDzX,IAAK,iBACLM,MAAO,SAAwB05J,EAAUC,EAAMxoB,GAC7C,IAAIzwI,EAAQg5J,EAASh5J,MAAMi5J,GAC3B,OAAOj5J,GAASA,EAAMtE,QAAU+0I,GAAO92H,SAAS3Z,EAAMywI,GAAM,MAQ7D,CACDzxI,IAAK,gBACLM,MAAO,WAEL,IAAI+B,EAAS,CACbA,QAAiB,KACjBA,QAAiB,KACjBA,WAAoB,MAEpB,MAAsB,qBAAXvH,QAA2BA,OAAOoG,UAKzCA,UAAUi4J,iBAEZ92J,EAAOc,QAAU,UACjBd,EAAOC,QAAUuK,KAAKqtJ,eAAeh5J,UAAUC,UAAW,mBAAoB,GAC9EkB,EAAO83J,WAAa,GACb93J,GACEnB,UAAUg4J,oBAEnB72J,EAAOc,QAAU,SACjBd,EAAOC,QAAUuK,KAAKqtJ,eAAeh5J,UAAUC,UAAW,wBAAyB,GACnFkB,EAAO83J,WAAa,GACb93J,GACEnB,UAAUg1J,cAAgBh1J,UAAUC,UAAUH,MAAM,uBAE7DqB,EAAOc,QAAU,OACjBd,EAAOC,QAAUuK,KAAKqtJ,eAAeh5J,UAAUC,UAAW,qBAAsB,GAChFkB,EAAO83J,WAAa,MACb93J,GACEvH,OAAOs/J,mBAAqBl5J,UAAUC,UAAUH,MAAM,yBAE/DqB,EAAOc,QAAU,SACjBd,EAAO83J,WAAa,GACpB93J,EAAOC,QAAUuK,KAAKqtJ,eAAeh5J,UAAUC,UAAW,uBAAwB,GAC3EkB,IAITA,EAAOc,QAAU,2BACVd,IAhCLA,EAAOc,QAAU,2BACVd,QA/VGwnH,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAChDtqH,OAAO2Q,eAAey5G,EAAa,YAAa,CAC9C/vE,UAAU,IAmZL0+G,EApW2B,GAuWpCv9J,EAAiB,QAAIu9J,EACrBx9J,EAAOC,QAAUA,EAAQ8uI,UAazBud,EAA2B,GA4E3BC,EApEJ,SAAS5d,EAAoB6d,GAK3B,IAAIC,EAAeH,EAAyBE,GAG5C,QAAqB1/I,IAAjB2/I,EAEF,OAAOA,EAAaxsJ,QAStB,IAAID,EAASssJ,EAAyBE,GAAY,CAQhDvsJ,QAAS,IAoBX,OATAyuI,EAAoB8d,GAAUxsJ,EAAQA,EAAOC,QAAS0uI,GAS/C3uI,EAAOC,QAqBU0uI,CAAoB,oCAM9C,OAAO4d,EAjiBJ,IAFmE,WAAtBrsJ,EAAQD,IAA8F,WAArBC,EAAQF,GAAuBA,EAAOC,QAAUqzE,KAA+D,EAAqB,QAAW,2BAAP,EAAF,GAAS,kC,4CCRtR,sBASiDA,EATjD,cAAyW,OAA1Om7D,EAArD,oBAAXruI,QAAoD,kBAApBA,OAAOC,SAAoC,SAAkBF,GAAO,cAAcA,GAA4B,SAAkBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBsuI,EAAStuI,GAWtXJ,KAF8CuzE,EAExC,SAAU8rF,EAAsCC,GACvD,OAEE,WAIE,IAAI3wB,EAAsB,CAExB,mCAMA,SAAoC1uI,EAAQC,EAAS0uI,GACnD,IAAI2wB,GAEJ,SAAWr/J,GACT,aAEA,SAASs/J,EAAQl6J,EAAOm6J,GACtBA,EAASA,GAAU,EACnB,IAEIpoJ,EAFAqoJ,EAAarxJ,OAAO/I,GAAS,EAC7BglE,EAAShlE,EAAMb,WAUnB,OAPIi7J,IACFp1F,EAASA,EAAOnpE,MAAM,IAGxBkW,EAAOooJ,EAASn1F,EAAO5oE,OAAS,GAGxBg+J,EAAa,IAAM,KAF3Bp1F,EAAS,IAAIjoE,MAAMgV,GAAM9L,KAAK,KAAKxK,OAAOupE,SAQ+Cv9D,KAFvFwyJ,EAAgC,WAChC,OAAOC,GACPh6J,KAAKtF,EAAS0uI,EAAqB1uI,EAASD,MAAyDA,EAAOC,QAAUq/J,GAtB5H,CAwBG1tJ,OAML,uBAMA,SAAyB5R,EAAQC,GAC/B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAClB,IAIIqT,EAJuB,CACzB9+I,OAAO,EACPo8J,qBAAqB,GAGvBz/J,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,oBAMA,SAAsB/uI,EAAQC,GAC5B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAQlB,IAAIx8F,EAAQ,SAASA,KANrB,SAAyBgmB,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAKtB21E,CAAgBr9H,KAAM2gC,IAGxBA,EAAMotH,MAAQ,QACdptH,EAAM1gB,MAAQ,QACd0gB,EAAMqtH,aAAe,eACrBrtH,EAAMstH,iBAAmB,mBACzBttH,EAAMutH,WAAa,aACnBvtH,EAAMwtH,MAAQ,QACdxtH,EAAMytH,MAAQ,QACdztH,EAAM0tH,OAAS,SACf1tH,EAAM2tH,KAAO,OACb3tH,EAAM4tH,OAAS,SACf5tH,EAAM6tH,aAAe,eACrB7tH,EAAM8tH,aAAe,cACrB9tH,EAAM+tH,aAAe,cACrB/tH,EAAMguH,mBAAqB,mBAC3BhuH,EAAMiuH,WAAa,YACnBjuH,EAAMkuH,gBAAkB,iBACxBluH,EAAMmuH,MAAQ,QACdnuH,EAAMouH,OAAS,SACfl8J,OAAO0D,OAAOoqC,GACd,IAAI6vG,EAAW7vG,EACftyC,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,yBAMA,SAA2B/uI,EAAQC,GACjC,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAClB,IA6BIqT,EA7BuB,CACzBvpH,UAAW,SAAmBtB,EAAQ6B,GACpC,GAAIxnB,KAAKjB,OAAOiuB,YAAY,cAAe,CACzC,IAAIukH,EAAUvxI,KAAKjB,OAAO+sJ,aAAakD,OAAOltB,OAAOyP,QACjDl+H,EAAMsS,EAAOtS,IACb8rH,EAAQx5G,EAAOw5G,MAEnB,GACO,aADCoS,EAEJvxI,KAAKjB,OAAO+sJ,aAAajsI,KAAKxM,OAGhC,CACEmU,EAAK,KAAM7B,GACX,IAAI9sB,EAAUmH,KAAKjB,OAAO6e,MAAM/pB,UAElBqH,IAAVikI,EACFn/H,KAAKjB,OAAO+sJ,aAAajsI,KAAKhnB,GAE9BmH,KAAKjB,OAAO+sJ,aAAajsI,KAAKhnB,EAASsmI,SAM7C33G,EAAK,KAAM7B,KAKjBt3B,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,gCAMA,SAAgC/uI,EAAQC,EAAS0uI,GAC/C,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI8xB,EAAWhyB,EAAuBF,EAEtC,qCAEImyB,EAAWjyB,EAAuBF,EAEtC,qCAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAIb,IAoCIiiJ,EApCa,SAAoBx+G,EAASC,GAC5C,IAAI67H,IAAsBvgK,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,KAAmBA,UAAU,GACzFykC,EAAUA,EAAU,EAAI,EAAIA,GAExB/jB,MAAM+jB,IAAYA,IAAYM,OAChCN,EAAU,GAGZ,IAAIm9H,GAAY,EAAID,EAAS/xB,SAAmB,IAAVnrG,GAClCo9H,EAAYD,OAEFj0J,IAAV+2B,IACFm9H,GAAY,EAAIF,EAAS/xB,SAAiB,IAARlrG,IAGpC,IAAIo9H,GAAK,EAAIJ,EAAS9xB,SAASgyB,EAAUG,OACrChyJ,GAAM,EAAI2xJ,EAAS9xB,SAASgyB,EAAUI,SACtCC,GAAM,EAAIP,EAAS9xB,SAASgyB,EAAUn9H,SACtCy9H,GAAK,EAAIR,EAAS9xB,SAASgyB,EAAUO,aAAc,GAEvD,GAAIP,EAAUQ,KAAO,GAAKP,EAAUO,KAAO,EAAG,CAC5C,IAAIC,GAAM,EAAIX,EAAS9xB,SAASgyB,EAAUQ,MAC1C,MAAO,GAAGzgK,OAAO0gK,EAAK,KAAK1gK,OAAOmgK,EAAI,KAAKngK,OAAOoO,EAAK,KAAKpO,OAAOsgK,GAGrE,OAAIL,EAAUG,MAAQ,GAAKF,EAAUE,MAAQ,EACpC,GAAGpgK,OAAOmgK,EAAI,KAAKngK,OAAOoO,EAAK,KAAKpO,OAAOsgK,GAGhD1B,EACK,GAAG5+J,OAAOoO,EAAK,KAAKpO,OAAOsgK,EAAK,KAAKtgK,OAAOugK,GAG9C,GAAGvgK,OAAOoO,EAAK,KAAKpO,OAAOsgK,IAIpCnhK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,wBAMA,SAAyB/uI,EAAQC,EAAS0uI,GACxC,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAIgC5uI,EAJ5BshK,GAI4BthK,EAJIwuI,EAEpC,cAGgBxuI,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAmBTiiJ,EAZM,SAAajgJ,EAAMu/J,EAASp+J,IACtB,IAAVA,IAJM,UAKJo+J,EACFD,EAAO1yB,QAAQ9sI,IAAIuB,MAAMrB,GALpB,SAMIu/J,EACTD,EAAO1yB,QAAQ9sI,IAAIsB,KAAKpB,GAExBs/J,EAAO1yB,QAAQ9sI,IAAIE,KAMzBlC,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,kCAMA,SAAoC/uI,EAAQ2hK,EAA0BhzB,GACpE,IAAI/uI,EAGFA,EADoB,qBAAXC,OACHA,OACoC,qBAA1B8uI,EAAoBjC,EAC9BiC,EAAoBjC,EACD,qBAAT3sI,KACVA,KAEA,GAGRC,EAAOC,QAAUL,GAKnB,mCAMA,SAAoCgiK,EAAqCrV,EAAqB5d,GAC5F,aAkBA,SAASkzB,EAAkBP,GACzB,GAA4B,kBAAjBA,EACT,MAAM,IAAIhoG,UAAU,qBAGtB,IAAIwoG,EAAmBR,EAAe,EAAItyJ,KAAK8C,MAAQ9C,KAAKiwE,KAC5D,MAAO,CACLsiF,KAAMO,EAAiBR,EAAe,OACtCJ,MAAOY,EAAiBR,EAAe,MAAW,GAClDH,QAASW,EAAiBR,EAAe,KAAS,GAClD19H,QAASk+H,EAAiBR,EAAe,KAAQ,GACjDA,aAAcQ,EAAiBR,GAAgB,IAC/CS,aAAcD,EAAgC,IAAfR,GAAuB,IACtDU,YAAaF,EAAgC,IAAfR,GAAsB,KA7BxD3yB,EAAoBzqF,EAAEqoG,GAItB5d,EAAoB5+C,EAAEw8D,EAAqB,CAEzC,QAAW,WACT,OAAO,MA8Bb,WAMA,SAAiBvsJ,GACf,aAEAA,EAAOC,QAAUm/J,GAKnB,gBAMA,SAAsBp/J,GACpB,aAEAA,EAAOC,QAAUo/J,IAajB/S,EAA2B,GAQ/B,SAAS3d,EAAoB6d,GAK3B,IAAIC,EAAeH,EAAyBE,GAG5C,QAAqB1/I,IAAjB2/I,EAEF,OAAOA,EAAaxsJ,QAStB,IAAID,EAASssJ,EAAyBE,GAAY,CAQhDvsJ,QAAS,IAoBX,OATAyuI,EAAoB8d,GAAUjnJ,KAAKvF,EAAOC,QAASD,EAAQA,EAAOC,QAAS0uI,GASpE3uI,EAAOC,QAmBd0uI,EAAoB5+C,EAAI,SAAU9vF,EAASgiK,GAEzC,IAAK,IAAIl9J,KAAOk9J,EAEVtzB,EAAoBl3F,EAAEwqH,EAAYl9J,KAAS4pI,EAAoBl3F,EAAEx3C,EAAS8E,IAE5EN,OAAO2Q,eAAenV,EAAS8E,EAAK,CAClC04C,YAAY,EACZrrC,IAAK6vJ,EAAWl9J,MAwBxB4pI,EAAoBjC,EAAI,WAEtB,GAAiF,YAAtD,qBAAf5sC,WAA6B,YAAc2uC,EAAS3uC,aAA2B,OAAOA,WAGlG,IAEE,OAAOluF,MAAQ,IAAI2rJ,SAAS,cAAb,GAEf,MAAO13J,GAEP,GAAyE,YAAlD,qBAAXhG,OAAyB,YAAc4uI,EAAS5uI,SAAuB,OAAOA,QAXtE,GA+BxB8uI,EAAoBl3F,EAAI,SAAUt3C,EAAKuF,GACrC,OAAOjB,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAKuF,IAmBnDipI,EAAoBzqF,EAAI,SAAUjkD,GAEV,qBAAXG,QAA0BA,OAAO05J,aAE1Cr1J,OAAO2Q,eAAenV,EAASG,OAAO05J,YAAa,CACjDz0J,MAAO,WAOXZ,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,KAYb,IAAIknJ,EAAsB,GA4uB1B,OA1uBA,WACE,aAEA,IAAItsJ,EAAUssJ,EAKd,SAASrsJ,EAAQC,GAaf,OATED,EADoB,oBAAXE,QAAoD,kBAApBA,OAAOC,SACtC,SAAiBF,GACzB,cAAcA,GAGN,SAAiBA,GACzB,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAItHD,EAAQC,GAGjBsE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQiiK,gBAAa,EAErB,IAAIC,EAAStzB,EAAuBF,EAEpC,sBAEIyzB,EAAQvzB,EAAuBF,EAEnC,0BAEI0zB,EAAcxzB,EAAuBF,EAEzC,kCAEI2zB,EAAYzzB,EAAuBF,EAEvC,yBAEIj0G,EAAcm0G,EAAuBF,EAEzC,2BAMI8yB,GAJU5yB,EAAuBF,EAErC,oCAEaE,EAAuBF,EAEpC,cAEI4zB,EAAc1zB,EAAuBF,EAEzC,kBAEA,SAASE,EAAuB1uI,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC4uI,QAAS5uI,GAUb,SAASyuH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAyBlD,SAAS2xE,EAAgBz3E,EAAGmhB,GAM1B,OALAs2D,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAErE,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B,SAAS05E,EAAaC,GACpB,IAAIC,EAkCN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA3CuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,EAAQC,EAAgBT,GAG5B,GAAIC,EAA2B,CAC7B,IAAIS,EAAYD,EAAgBphI,MAAMtR,YAEtC8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO+zI,EAA2BthI,KAAMxK,IAI5C,SAAS8rI,EAA2BnzI,EAAMwF,GACxC,OAAIA,GAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,EAI3C6tI,EAAuBrzI,GAHrBwF,EAMX,SAAS6tI,EAAuBrzI,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,EAgBT,SAASizI,EAAgBv7F,GAIvB,OAHAu7F,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GACzF,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAGzB,IAAIghB,EAASgpG,EAAO1yB,QAAQ/2E,UAAU,UAElCwqG,EAAuB,aACvBC,EAAsB,kBAEtBC,EAAW,WACXC,EAAe,eAGfT,EAAa,SAAUU,IAxF3B,SAAmBroG,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGd2c,GAAY60D,EAAgB30D,EAAUF,GA6E1Cm5E,CAAU0uB,EAAYU,GAEtB,IAjGoB/zC,EAAaC,EAAYC,EAiGzC0kB,EAASnB,EAAa4vB,GAE1B,SAASA,EAAWvxJ,EAAQR,GAC1B,IAAI4G,EAyBJ,OA7IJ,SAAyBwhD,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,qCAoHpB21E,CAAgBr9H,KAAMswJ,GAEtBnrJ,EAAQ08H,EAAOluI,KAAKqM,KAAMjB,EAAQR,GAClCQ,EAAO7F,SAhBe,kBAiBtBqF,EAAUsxJ,EAAO1yB,QAAQr0E,aAAa4nG,EAAUvzB,QAAS5+H,GACzD4G,EAAM8rJ,WAAY,EAClB9rJ,EAAM+rJ,cAAe,EACrB/rJ,EAAMgsJ,UAAW,EACjBhsJ,EAAMosI,QAAU,KAChBpsI,EAAMzT,MAAqC,SAA7B6M,EAAQ7M,MAAMkB,WAC5BuS,EAAMisJ,kBAAoBjsJ,EAAMpG,OAAOwK,SAASiO,OAAO3nB,OAAS,EAChEsV,EAAM2oJ,oBAAsBvvJ,EAAQuvJ,oBAEhCvvJ,EAAQi0B,YAA4C,oBAAvBj0B,EAAQi0B,WACvCrtB,EAAM+jD,cAAc3qD,EAAQi0B,YAE5BrtB,EAAM+jD,eAAc,SAAUl3B,EAASC,GACrC,OAAO,EAAIw+H,EAAYtzB,SAASnrG,EAASC,EAAO9sB,EAAM2oJ,wBAI1D3oJ,EAAMpG,OAAOoF,IAAIosJ,EAAOpzB,QAAQ4wB,MAAO5oJ,EAAMi9G,WAAW39G,KAAK+8H,EAAuBr8H,KAE7EA,EAugBT,OApoBoB83G,EAgIPqzC,EAhIoBpzC,EAgIR,CAAC,CACxB/pH,IAAK,aACLM,MAAO,WACL,IAAImT,EAAS5G,UAEqB9E,IAA9B8E,KAAKjB,OAAOsyJ,eACdrxJ,KAAKjB,OAAOsyJ,cAAchkJ,OAG5B,IAAIikJ,EAAgBtxJ,KAAKuxJ,aAAavxJ,KAAKjB,OAAOwK,SAASysC,QAAQ81G,aAE7B,IAAlC9rJ,KAAKjB,OAAOwK,SAAS6L,WACvBpV,KAAKjB,OAAOooC,WAAW/5B,OACvBpN,KAAKjB,OAAOooC,WAAW1/B,IAAIhI,MAAMyiI,QAAU,OAEvCliI,KAAKuxI,UAAYuf,QAAuD51J,IAA3C8E,KAAKjB,OAAOooC,WAAWqqH,iBACtDxxJ,KAAKjB,OAAOooC,WAAWqqH,gBAAgBnkJ,YAGanS,IAAlD8E,KAAKjB,OAAOooC,WAAWsqH,wBACzBzxJ,KAAKjB,OAAOooC,WAAWsqH,uBAAuBpkJ,OAG/B,CAAC,qBAAsB,cAAe,mBAC5Cna,SAAQ,SAAU2F,QAGXqC,KAFhBrC,EAAU+N,EAAO7H,OAAOooC,WAAWtuC,MAGjCA,EAAQ4O,IAAIhI,MAAMyiI,QAAU,QAC5BrpI,EAAQuU,gBAIwClS,IAAhD8E,KAAKjB,OAAOooC,WAAWxT,sBACzB3zB,KAAKjB,OAAOooC,WAAWxT,qBAAqBtmB,OAG1CrN,KAAKuxI,UAAYuf,QAAkD51J,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,aACtDtxB,KAAKjB,OAAOooC,WAAW7V,WAAWruB,GAAG,CAAC,MAAO,SAAUjD,KAAK0xJ,aAAajtJ,KAAKzE,OAC9EA,KAAKjB,OAAOooC,WAAW7V,WAAWjkB,SAItCrN,KAAKgvJ,OAAS2B,EAAYxzB,QAAQ3f,OAAO8zC,GACzCtxJ,KAAKgvJ,OAAO/rJ,GAAGstJ,EAAOpzB,QAAQl9G,MAAOjgB,KAAK2xJ,YAAYltJ,KAAKzE,OAC3DA,KAAKgvJ,OAAO/rJ,GAAGstJ,EAAOpzB,QAAQkxB,OAAQruJ,KAAK4xJ,aAAantJ,KAAKzE,OAC7DA,KAAKuxI,QAAUvxI,KAAKgvJ,OAAOltB,OAAOyP,QAClCvxI,KAAK3P,IAAI,uBAAyB2P,KAAKuxI,QAAU,aAE7C,eAAgBvxI,KAAKjB,OAAO+sJ,aAAakD,OAAO6C,qBAClD7xJ,KAAKmxJ,UAAW,EAChBnxJ,KAAKixJ,WAAY,EACjBjxJ,KAAK3P,IAAI,4CACT2P,KAAKjB,OAAOooC,WAAW7V,WAAWlkB,OAClCpN,KAAKgvJ,OAAO8C,WAAW7uJ,GAAGstJ,EAAOpzB,QAAQuxB,aAAc1uJ,KAAK2xJ,YAAYltJ,KAAKzE,QAG/EA,KAAK+xJ,YAAc/xJ,KAAKgyJ,YAAYvtJ,KAAKzE,MAErCA,KAAKuxI,UAAYuf,IACnB9wJ,KAAKiyJ,eAAiBjyJ,KAAKkyJ,eAAeztJ,KAAKzE,MAC/CA,KAAKmyJ,WAAanyJ,KAAKoyJ,WAAW3tJ,KAAKzE,MAEnCA,KAAKjB,OAAOspB,SACdroB,KAAK2oB,UAAU,IAId3oB,KAAKmxJ,UACRnxJ,KAAKqyJ,qBAAoB,GAG3BryJ,KAAKjB,OAAOkE,GAAGstJ,EAAOpzB,QAAQ6wB,aAAchuJ,KAAKsyJ,eAAe7tJ,KAAKzE,OACrEA,KAAKjB,OAAOkE,GAAGstJ,EAAOpzB,QAAQ8wB,iBAAkBjuJ,KAAKuyJ,eAAe9tJ,KAAKzE,QAEtC,IAA/BA,KAAKjB,OAAOwK,SAAS+tC,QACvBt3C,KAAKgvJ,OAAOpc,OAAO9rI,QAAQ7N,UAAY43J,KAG1C,CACD19J,IAAK,eACLM,MAAO,WACL,IAAI++J,EAAajlK,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,GACjFyN,EAAOgF,KAAKjB,OAAO0I,IAAI3M,wBAC3BkF,KAAKyyJ,cAAgBzyJ,KAAKjB,OAAOwK,SAASnO,OAASJ,EAAKI,MACxD4E,KAAK0yJ,eAAiB1yJ,KAAKjB,OAAOwK,SAASpO,QAAUH,EAAKG,OAC1D,IAAIw3J,EAAmB3yJ,KAAKjB,OAAOooC,WAAWhsC,SAU9C,IARsC,IAAlC6E,KAAKjB,OAAOwK,SAAS6L,UAA0C,IAArBu9I,IAC5CA,EAAmB,SAGQz3J,IAAzBs3J,EAAWx0F,YACbw0F,EAAWx0F,UAAYh+D,KAAKjB,OAAO0I,UAGHvM,IAA9Bs3J,EAAWI,eAA8B,CAC3C,IAAIvzD,EAAerkG,EAAKG,OACxBq3J,EAAWr3J,OAASkkG,EAAeszD,OAEnCH,EAAWr3J,OAASq3J,EAAWI,eAajC,OAVIJ,EAAWvpB,gBAA8C,IAA7BupB,EAAWvpB,gBACzCupB,EAAWr3J,QAAU,GAGnB,YAAaq3J,EACfxyJ,KAAKuxI,QAAUihB,EAAWjhB,QAE1BihB,EAAWjhB,QAAUvxI,KAAKuxI,QAAUwf,EAG/ByB,IAER,CACDr/J,IAAK,sBACLM,MAAO,SAA6BpB,IACnB,IAAXA,GACF2N,KAAKgvJ,OAAOviB,GAAG8jB,EAAOpzB,QAAQ4wB,MAAO/tJ,KAAK+xJ,aAEtC/xJ,KAAKuxI,UAAYuf,IACnB9wJ,KAAKgvJ,OAAOviB,GAAG8jB,EAAOpzB,QAAQqxB,aAAcxuJ,KAAKiyJ,gBACjDjyJ,KAAKgvJ,OAAOviB,GAAG8jB,EAAOpzB,QAAQmxB,KAAMtuJ,KAAKmyJ,eAEvB,IAAX9/J,IACT2N,KAAKgvJ,OAAO/rJ,GAAGstJ,EAAOpzB,QAAQ4wB,MAAO/tJ,KAAK+xJ,aAEtC/xJ,KAAKuxI,UAAYuf,IACnB9wJ,KAAKgvJ,OAAO/rJ,GAAGstJ,EAAOpzB,QAAQqxB,aAAcxuJ,KAAKiyJ,gBACjDjyJ,KAAKgvJ,OAAO/rJ,GAAGstJ,EAAOpzB,QAAQmxB,KAAMtuJ,KAAKmyJ,gBAI9C,CACDh/J,IAAK,OACLM,MAAO,SAAc+nB,EAAK2jH,GACpB3jH,aAAeqmD,MAAQrmD,aAAeq3I,MACxC7yJ,KAAK3P,IAAI,mBAAqBu2C,KAAKI,UAAUxrB,IAC7Cxb,KAAKgvJ,OAAO8D,SAASt3I,SAEPtgB,IAAVikI,EACFn/H,KAAK+yJ,UAAUv3I,EAAK2jH,IAED,kBAAR3jH,EACTxb,KAAK3P,IAAI,gBAAkBmrB,GAE3Bxb,KAAK3P,IAAI,oBAAsBmrB,GAGjCxb,KAAKgvJ,OAAOnvI,KAAKrE,MAItB,CACDroB,IAAK,YACLM,MAAO,SAAmB+nB,EAAK2jH,GAC7B,IAAIn4H,EAAShH,KAEb,GAAIxP,MAAMY,QAAQ+tI,GAChBn/H,KAAK3P,IAAI,oCAAsCmrB,GAC/Cxb,KAAKgvJ,OAAOnvI,KAAKrE,EAAK2jH,OACjB,CACL,IAAIhd,EAAiB,CACnB3mG,IAAK2jH,EACLvoE,aAAc,aAGoC17D,IAAhD8E,KAAKjB,OAAOwK,SAASysC,QAAQ81G,WAAWxiG,MAC1C64D,EAAe74D,IAAMtpD,KAAKjB,OAAOwK,SAASysC,QAAQ81G,WAAWxiG,KAG/D,IAAIpN,EAAUy0G,EAAYxzB,QAAQ8C,KAAKiW,UAAU/zB,GAEjDjmE,EAAQ25F,KAAK,WAAW,SAAUz1I,GAChC4G,EAAO3W,IAAI,yBAA2B8uI,GAElC/+H,GAAQA,EAAKA,KACf4G,EAAOgoJ,OAAOnvI,KAAKrE,EAAKpb,EAAKA,OAE7B4G,EAAOjI,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAO,kCAAoCk/G,GAEhFn4H,EAAO3W,IAAIwtB,IAAK,aAGpBq+B,EAAQ25F,KAAK,SAAS,SAAU5hJ,GAC9B+S,EAAOjI,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAO,qCAAuCk/G,EAAQ,kBAAoBjjF,EAAQp+B,SAAS3L,cAIrI,CACDhf,IAAK,OACLM,MAAO,gBACqCyH,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YAA4BtxB,KAAKjB,OAAOooC,WAAW7V,WAAWnmB,aACvFnL,KAAKjB,OAAOooC,WAAW7V,WAAWK,aAGhC3xB,KAAKmxJ,SACFnxJ,KAAKgvJ,OAAO8C,WAAW7yI,OAIZjf,KAAKgvJ,OAAO8C,WAAW98I,QAKnChV,KAAK3P,IAAI,qBACT2P,KAAKgvJ,OAAO8C,WAAW3oJ,QAHvBnJ,KAAKkV,SANPlV,KAAK3P,IAAI,oBACT2P,KAAKgvJ,OAAO8C,WAAWrgJ,UAYzBzR,KAAK3P,IAAI,kBACT2P,KAAKjB,OAAOoK,OACZnJ,KAAKgvJ,OAAO7lJ,UAGf,CACDhW,IAAK,QACLM,MAAO,gBACqCyH,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YAA4BtxB,KAAKjB,OAAOooC,WAAW7V,WAAWnmB,aACvFnL,KAAKjB,OAAOooC,WAAW7V,WAAWM,cAGhC5xB,KAAKmxJ,UACPnxJ,KAAK3P,IAAI,oBACT2P,KAAKgvJ,OAAO8C,WAAW58I,UAEvBlV,KAAK3P,IAAI,kBAEJ2P,KAAKkxJ,aAGRlxJ,KAAKkxJ,cAAe,EAFpBlxJ,KAAKgvJ,OAAO95I,QAKdlV,KAAKyjB,oBAGR,CACDtwB,IAAK,UACLM,MAAO,WACDuM,KAAKgvJ,SACHhvJ,KAAKmxJ,UAAYnxJ,KAAKgvJ,OAAO8C,aAC/B9xJ,KAAKgvJ,OAAO8C,WAAWtqB,UACvBxnI,KAAK3P,IAAI,gCAGX2P,KAAKgvJ,OAAOxnB,WAGdxnI,KAAK3P,IAAI,sBAEV,CACD8C,IAAK,cACLM,MAAO,WACL,OAAOuM,KAAKjB,QAAqC,OAA3BiB,KAAKjB,OAAOsM,aAEnC,CACDlY,IAAK,UACLM,MAAO,WACLuM,KAAKjB,OAAOuL,YAEb,CACDnX,IAAK,YACLM,MAAO,SAAmB80B,QACTrtB,IAAXqtB,IACFvoB,KAAK3P,IAAI,uBAAyBk4B,GAClCvoB,KAAKjB,OAAOwpB,OAAOA,MAGtB,CACDp1B,IAAK,cACLM,MAAO,SAAqBioF,EAAQokD,GAClC,IAAI9wI,EAAOzB,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,OAC/E,OAAOyS,KAAKgvJ,OAAOgE,YAAYt3E,EAAQokD,EAAS9wI,KAEjD,CACDmE,IAAK,iBACLM,MAAO,SAAwBi5I,GAC7B,IAAI18H,EAAShQ,KAET0sI,GACF1sI,KAAKgvJ,OAAOriB,UAAUD,GAAUn6H,MAAK,SAAU/c,GAC7Cwa,EAAOjR,OAAO+E,QAAQysJ,EAAOpzB,QAAQwxB,uBACpC7f,OAAM,SAAUjxH,GACjB7N,EAAOjR,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAOpC,GAE5C7N,EAAO3f,IAAIwtB,EAAK,cAIrB,CACD1qB,IAAK,iBACLM,MAAO,WACL,IAAIurB,EAAchf,KAAKgvJ,OAAOljB,iBAE9B,OADA9sH,EAAc/Q,MAAM+Q,GAAe,EAAIA,IAGxC,CACD7rB,IAAK,iBACLM,MAAO,SAAwBurB,EAAalN,GAY1C,QAXoB5W,IAAhB8jB,IACFA,EAAchf,KAAKgvJ,OAAOljB,uBAGX5wI,IAAb4W,IACFA,EAAW9R,KAAKgvJ,OAAO3iB,eAGzBrtH,EAAc/Q,MAAM+Q,GAAe,EAAIA,EACvClN,EAAW7D,MAAM6D,GAAY,EAAIA,EAE7B9R,KAAKjB,OAAOooC,WAAW8rH,oBAAsBjzJ,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,aAAenL,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,YAAYw1I,UAAW,CACzK,IAAI5tH,EAAO31B,KAAKE,IAAI0hB,EAAalN,GACjC9R,KAAKjB,OAAOooC,WAAW8rH,mBAAmBjgI,eAAiBhzB,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,YAAYw1I,UAAUzoJ,YAAc8H,KAAKywJ,YAAY19H,EAAMjhB,EAAU9R,KAAK8tJ,qBAG7K9tJ,KAAKoxJ,mBAAqBpxJ,KAAKjB,OAAO6e,OAAS5d,KAAKjB,OAAO6e,MAAMnW,KACnEzH,KAAKjB,OAAO6e,MAAM6F,eAAezE,KAGpC,CACD7rB,IAAK,cACLM,MAAO,WACL,IAAIqe,EAAW9R,KAAKgvJ,OAAO3iB,cAE3B,OADAv6H,EAAW7D,MAAM6D,GAAY,EAAIA,IAGlC,CACD3e,IAAK,cACLM,MAAO,SAAqBqe,QACT5W,IAAb4W,IACFA,EAAW9R,KAAKgvJ,OAAO3iB,eAGzBv6H,EAAW7D,MAAM6D,GAAY,EAAIA,EAE7B9R,KAAKjB,OAAOooC,WAAW4b,iBAAmB/iD,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,aAAenL,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,YAAYw1I,YACrJ3gJ,KAAKjB,OAAOooC,WAAW4b,gBAAgB/vB,eAAiBhzB,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,YAAYw1I,UAAUzoJ,YAAc8H,KAAKywJ,YAAY3+I,EAAUA,EAAU9R,KAAK8tJ,wBAGhL,CACD36J,IAAK,cACLM,MAAO,WACL,IAAI0c,EAASnQ,KAEbA,KAAKixJ,WAAY,EACjBjxJ,KAAKkxJ,cAAe,EACpBlxJ,KAAKmxJ,UAAW,EAChBnxJ,KAAK3P,IAAI,qBACT2P,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQyxB,YAE/B5uJ,KAAKuxI,UAAYuf,IACnB9wJ,KAAKyjB,iBACLzjB,KAAKi4G,mBAEqC/8G,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YAA4BtxB,KAAKjB,OAAOooC,WAAW7V,WAAWnmB,aACvFnL,KAAKjB,OAAOooC,WAAW7V,WAAWlkB,QAIlCpN,KAAKjB,OAAOm0J,eAAe/nJ,aAC7BnL,KAAKjB,OAAOm0J,eAAe7lJ,QAGS,IAAlCrN,KAAKjB,OAAOwK,SAASwsC,WACvB/1C,KAAK2oB,UAAU,GAEX3oB,KAAKuxI,UAAYuf,EACnB9wJ,KAAKmJ,OAELnJ,KAAKjB,OAAOoK,OAAO2lI,OAAM,SAAU76I,GACjCkc,EAAOwhJ,YAAY19J,SAK1B,CACDd,IAAK,eACLM,MAAO,WACL,IAAIswB,EAAS/jB,KAEbA,KAAK3P,IAAI,qBACT2P,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ0xB,kBAED,IAA9B7uJ,KAAKjB,OAAOwK,SAAS2vC,KACnBl5C,KAAKuxI,UAAYuf,IACnB9wJ,KAAKgvJ,OAAO1Y,OACZt2I,KAAKmJ,SAGPnJ,KAAKkxJ,cAAe,EAEhBlxJ,KAAKuxI,UAAYuf,IACnB9wJ,KAAKkV,QACLlV,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQgxB,OACnCnuJ,KAAKgvJ,OAAOnZ,KAAK0a,EAAOpzB,QAAQmxB,MAAM,gBACQpzJ,IAAxC6oB,EAAOhlB,OAAOooC,WAAW7V,YAC3BvN,EAAOhlB,OAAOooC,WAAW7V,WAAWj4B,YAAY,aAGlD0qB,EAAOhlB,OAAO+E,QAAQysJ,EAAOpzB,QAAQixB,cAK5C,CACDj7J,IAAK,iBACLM,MAAO,SAAwBs/B,GAC7B/yB,KAAKyjB,mBAEN,CACDtwB,IAAK,aACLM,MAAO,WACLuM,KAAKyjB,mBAEN,CACDtwB,IAAK,cACLM,MAAO,SAAqB7B,GACtBA,EAAM1B,MAAuB,eAAf0B,EAAM1B,MAAwC,iBAAf0B,EAAM1B,MAA2B0B,EAAMqgB,QAAQkhJ,WAAW,6BACzGnzJ,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ2xB,MAAOl9J,IAE1CoO,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAOruB,GAC1CoO,KAAK3P,IAAIuB,EAAO,YAGnB,CACDuB,IAAK,eACLM,MAAO,gBACqCyH,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YAA4BtxB,KAAKjB,OAAOooC,WAAW7V,WAAW14B,SAAS,cAChGoH,KAAKjB,OAAOooC,WAAW7V,WAAWj4B,YAAY,aAG5C2G,KAAKgvJ,OAAOoE,YACdpzJ,KAAKkV,QAELlV,KAAKmJ,SAGR,CACDhW,IAAK,iBACLM,MAAO,WACL,IAAI80B,EAASvoB,KAAKjB,OAAOwpB,SAErBvoB,KAAKjB,OAAOspB,UACdE,EAAS,GAGXvoB,KAAKgvJ,OAAOrmI,UAAUJ,KAEvB,CACDp1B,IAAK,iBACLM,MAAO,WACL,IAAIixB,EAAS1kB,KAETqzJ,EAAkBrzJ,KAAKjB,OAAOwQ,aAAY,WAC5C,IAEIi1H,EAAU8uB,EAOd,GATmB5uI,EAAO3lB,OAAOy7B,iBAK/BgqG,EAAW9/G,EAAO+tI,cAClBa,EAAY5uI,EAAOguI,gBAGjBhuI,EAAOusI,UAAW,CACpB,GAAIvsI,EAAOysI,WAAazsI,EAAOsqI,OAAO8C,WAAW7yI,OAC/C,OAGFyF,EAAO6uI,eAAe/uB,EAAU8uB,GAGlC5uI,EAAO3lB,OAAOuQ,cAAc+jJ,KAC3B,OAEJ,CACDlgK,IAAK,iBACLM,MAAO,SAAwB+wI,EAAU8uB,GACvC,IAAKtzJ,KAAKkzI,cAAe,CACvB,GAAIlzI,KAAKjB,OAAO0I,IAAK,CACnB,IAAIzM,EAAOgF,KAAKjB,OAAO0I,IAAI3M,6BAEVI,IAAbspI,IACFA,EAAWxpI,EAAKI,YAGAF,IAAdo4J,IACFA,EAAYt4J,EAAKG,QAIrB6E,KAAKgvJ,OAAOpc,OAAOpL,UACnBxnI,KAAKgvJ,OAAOltB,OAAO1mI,MAAQopI,EAC3BxkI,KAAKgvJ,OAAOltB,OAAO3mI,OAASm4J,EAAYtzJ,KAAKjB,OAAOooC,WAAWhsC,SAC/D6E,KAAKgvJ,OAAOzb,eACZvzI,KAAKgvJ,OAAOpc,OAAO9rI,QAAQ7N,UAAY43J,EACvC7wJ,KAAKgvJ,OAAOjb,aACZ/zI,KAAKgvJ,OAAOpc,OAAO19G,SAASl1B,KAAKgvJ,OAAOzd,QAAQyC,wBAGnD,CACD7gJ,IAAK,MACLM,MAAO,SAAalD,EAAMu/J,IACxB,EAAIU,EAAMrzB,SAAS5sI,EAAMu/J,EAAS9vJ,KAAKtO,SAExC,CACDyB,IAAK,gBACLM,MAAO,SAAuB01D,GAC5BnpD,KAAKywJ,YAActnG,EAEnB0mG,EAAO1yB,QAAQj0E,cAAclpD,KAAKywJ,gBA/nBlCvzC,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GAkoBzCmzC,EAtiBQ,CAuiBfzpG,GAEFx4D,EAAQiiK,WAAaA,EACrBA,EAAWxpG,QAAU,QACrB+oG,EAAO1yB,QAAQmzB,WAAaA,OAE2Bp1J,IAAnD20J,EAAO1yB,QAAQ/2E,UAAUwqG,IAC3Bf,EAAO1yB,QAAQl2E,eAAe2pG,EAAsBN,GAGtDT,EAAO1yB,QAAQ70E,IAAI,KAAK,SAAUvpD,GAEhC,OADA+pB,EAAYq0G,QAAQp+H,OAASA,EACtB+pB,EAAYq0G,WApuBvB,GA0uBOwd,EA3yCJ,IAFoE,WAAvB9d,EAASxuI,IAA+F,WAAtBwuI,EAASzuI,GAAuBA,EAAOC,QAAUqzE,EAAQ,EAAQ,MAAa,EAAQ,QAAuE,EAA4B,CAAC,QAAY,cAAyB,2BAAP,EAAF,GAAS,kC,4CCVvW,sBASiDA,EATjD,cAAyW,OAA1O8xF,EAArD,oBAAXhlK,QAAoD,kBAApBA,OAAOC,SAAoC,SAAkBF,GAAO,cAAcA,GAA4B,SAAkBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBilK,EAASjlK,GAWtXJ,KAF8CuzE,EAExC,SAAU+xF,EAAuCjG,GACxD,OAEE,WAIE,IAAI1wB,EAAsB,CAExB,iEAMA,SAAgE1uI,GAS9DA,EAAOC,QARP,SAAgCF,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,IAQX,4DAMA,SAA2DC,GACzD,SAASslK,EAAmBC,EAAK31G,EAAS/4B,EAAQ2uI,EAAOC,EAAQ1gK,EAAKy0B,GACpE,IACE,IAAI12B,EAAOyiK,EAAIxgK,GAAKy0B,GAChBn0B,EAAQvC,EAAKuC,MACjB,MAAO7B,GAEP,YADAqzB,EAAOrzB,GAILV,EAAKiuE,KACPnhB,EAAQvqD,GAERuxB,QAAQg5B,QAAQvqD,GAAO8e,KAAKqhJ,EAAOC,GAwBvCzlK,EAAOC,QApBP,SAA2BY,GACzB,OAAO,WACL,IAAId,EAAO6R,KACPzP,EAAOhD,UACX,OAAO,IAAIy3B,SAAQ,SAAUg5B,EAAS/4B,GACpC,IAAI0uI,EAAM1kK,EAAGsE,MAAMpF,EAAMoC,GAEzB,SAASqjK,EAAMngK,GACbigK,EAAmBC,EAAK31G,EAAS/4B,EAAQ2uI,EAAOC,EAAQ,OAAQpgK,GAGlE,SAASogK,EAAOh2I,GACd61I,EAAmBC,EAAK31G,EAAS/4B,EAAQ2uI,EAAOC,EAAQ,QAASh2I,GAGnE+1I,OAAM14J,SAUd,0DAMA,SAAyD9M,GAOvDA,EAAOC,QANP,SAAyBs4D,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,uCAS1B,uDAMA,SAAsDt5D,GACpD,SAAS4uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAUlDv9C,EAAOC,QANP,SAAsB4uH,EAAaC,EAAYC,GAG7C,OAFID,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GACzCF,IAQX,+CAMA,SAA8C7uH,EAAQ2hK,EAA0BhzB,GAC9E,IAAI+2B,EAAgB/2B,EAEpB,0DAEA,SAASmN,EAAK72I,EAAQqrG,EAAUyrC,GAiB9B,MAhBuB,qBAAZtJ,SAA2BA,QAAQrgI,IAC5CpS,EAAOC,QAAU67I,EAAOrJ,QAAQrgI,IAEhCpS,EAAOC,QAAU67I,EAAO,SAAc72I,EAAQqrG,EAAUyrC,GACtD,IAAIttB,EAAOi3C,EAAczgK,EAAQqrG,GACjC,GAAKme,EAAL,CACA,IAAIloG,EAAO9hB,OAAO+4C,yBAAyBixE,EAAMne,GAEjD,OAAI/pF,EAAKnU,IACAmU,EAAKnU,IAAI7M,KAAKw2I,GAGhBx1H,EAAKlhB,QAITy2I,EAAK72I,EAAQqrG,EAAUyrC,GAAY92I,GAG5CjF,EAAOC,QAAU67I,GAKnB,0DAMA,SAAyD97I,GACvD,SAASgzI,EAAgBv7F,GAIvB,OAHAz3C,EAAOC,QAAU+yI,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GAC1G,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAGzBz3C,EAAOC,QAAU+yI,GAKnB,oDAMA,SAAmDhzI,EAAQ2hK,EAA0BhzB,GACnF,IAAI1f,EAAiB0f,EAErB,2DAiBA3uI,EAAOC,QAfP,SAAmBs6D,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGd2c,GAAY40D,EAAe10D,EAAUF,KAQ7C,iEAMA,SAAgEr6D,GAO9DA,EAAOC,QANP,SAAgCE,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC,QAAWA,KASjB,qEAMA,SAAoEH,EAAQ2hK,EAA0BhzB,GACpG,IAAIzuI,EAAUyuI,EAEd,mDAEIg3B,EAAwBh3B,EAE5B,kEAUA3uI,EAAOC,QARP,SAAoCF,EAAMwF,GACxC,OAAIA,GAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,EAI3CogK,EAAsB5lK,GAHpBwF,IAWb,0DAMA,SAAyDvF,GACvD,SAASkvH,EAAgBz3E,EAAGmhB,GAM1B,OALA54D,EAAOC,QAAUivH,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAEtF,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B54D,EAAOC,QAAUivH,GAKnB,yDAMA,SAAwDlvH,EAAQ2hK,EAA0BhzB,GACxF,IAAI0E,EAAiB1E,EAErB,2DAWA3uI,EAAOC,QATP,SAAwB0E,EAAQ2rG,GAC9B,MAAQ7rG,OAAOlE,UAAUmD,eAAe6B,KAAKZ,EAAQ2rG,IAEpC,QADf3rG,EAAS0uI,EAAe1uI,MAI1B,OAAOA,IAQX,kDAMA,SAAiD3E,GAC/C,SAASE,EAAQC,GAaf,MAVsB,oBAAXC,QAAoD,kBAApBA,OAAOC,SAChDL,EAAOC,QAAUC,EAAU,SAAiBC,GAC1C,cAAcA,GAGhBH,EAAOC,QAAUC,EAAU,SAAiBC,GAC1C,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAItHD,EAAQC,GAGjBH,EAAOC,QAAUC,GAKnB,qDAMA,SAAoDF,EAAQ2hK,EAA0BhzB,GACpF3uI,EAAOC,QAAU0uI,EAEjB,kDAKF,mCAMA,SAAoC3uI,EAAQC,EAAS0uI,GACnD,IAAI2wB,GAEJ,SAAWr/J,GACT,aAEA,SAASs/J,EAAQl6J,EAAOm6J,GACtBA,EAASA,GAAU,EACnB,IAEIpoJ,EAFAqoJ,EAAarxJ,OAAO/I,GAAS,EAC7BglE,EAAShlE,EAAMb,WAUnB,OAPIi7J,IACFp1F,EAASA,EAAOnpE,MAAM,IAGxBkW,EAAOooJ,EAASn1F,EAAO5oE,OAAS,GAGxBg+J,EAAa,IAAM,KAF3Bp1F,EAAS,IAAIjoE,MAAMgV,GAAM9L,KAAK,KAAKxK,OAAOupE,SAQ+Cv9D,KAFvFwyJ,EAAgC,WAChC,OAAOC,GACPh6J,KAAKtF,EAAS0uI,EAAqB1uI,EAASD,MAAyDA,EAAOC,QAAUq/J,GAtB5H,CAwBG1tJ,OAML,yCAMA,SAAyC5R,EAAQC,EAAS0uI,GACxD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCmoJ,EAAmB,SAAU3gJ,IAC/B,EAAIwgJ,EAAWh3B,SAASm3B,EAAkB3gJ,GAE1C,IAAIkuH,EAASnB,EAAa4zB,GAE1B,SAASA,IAEP,OADA,EAAIN,EAAiB72B,SAASn9H,KAAMs0J,GAC7BzyB,EAAOtuI,MAAMyM,KAAMzS,WAgB5B,OAbA,EAAI0mK,EAAc92B,SAASm3B,EAAkB,CAAC,CAC5CnhK,IAAK,WACLM,MAAO,WACL,IAAI8gK,EAAa1E,EAAO1yB,QAAQ5zE,IAAI/xD,SAAS,OAEzC3D,GAAK,EAAIqgK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASm3B,EAAiB3lK,WAAY,WAAYqR,MAAMrM,KAAKqM,KAAM,MAAO,CACzH/G,UAAW,wBACX63B,IAAK,QAGP,OADAj9B,EAAG8E,YAAY47J,GACR1gK,MAGJygK,EAvBc,CAwBrBrrJ,GAEFA,EAAUsH,kBAAkB,mBAAoB+jJ,GAChD,IAAI9jB,EAAW8jB,EACfjmK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,qCAMA,SAAqC/uI,EAAQC,EAAS0uI,GACpD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIu7B,EAAS8+H,EAAO1yB,QAAQhxH,aAAa,UAErClD,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCqoJ,EAAe,SAAUvjI,IAC3B,EAAIkjI,EAAWh3B,SAASq3B,EAAcvjI,GAEtC,IAAI4wG,EAASnB,EAAa8zB,GAE1B,SAASA,IAEP,OADA,EAAIR,EAAiB72B,SAASn9H,KAAMw0J,GAC7B3yB,EAAOtuI,MAAMyM,KAAMzS,WA2D5B,OAxDA,EAAI0mK,EAAc92B,SAASq3B,EAAc,CAAC,CACxCrhK,IAAK,gBACLM,MAAO,WACL,MAAO,mEAER,CACDN,IAAK,SACLM,MAAO,YACL,EAAIygK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASq3B,EAAa7lK,WAAY,SAAUqR,MAAMrM,KAAKqM,MAC/FA,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAK00J,SACxD10J,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAK40J,UAExD,CACDzhK,IAAK,UACLM,MAAO,YACL,EAAIygK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASq3B,EAAa7lK,WAAY,UAAWqR,MAAMrM,KAAKqM,MAChGA,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAK00J,SACzD10J,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAK40J,UAEzD,CACDzhK,IAAK,OACLM,MAAO,WACDuM,KAAK60J,gBAAwC,IAAvB70J,KAAK60J,gBAI/B,EAAIX,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASq3B,EAAa7lK,WAAY,OAAQqR,MAAMrM,KAAKqM,QAE9F,CACD7M,IAAK,cACLM,MAAO,SAAqBsI,GAC1B,IAAI+4J,EAAW90J,KAAKoJ,QAAQ2rJ,SAEvBD,EAASE,gBAGZF,EAASG,gBACTj1J,KAAK40J,SACL50J,KAAKoJ,QAAQtF,QAAQysJ,EAAOpzB,QAAQ+3B,QAJpCJ,EAASrjJ,UAOZ,CACDte,IAAK,UACLM,MAAO,SAAiBsI,GACtBiE,KAAK3G,YAAY,yBACjB2G,KAAK9G,SAAS,mBACd8G,KAAK2V,YAAY,WAElB,CACDxiB,IAAK,SACLM,MAAO,SAAgBsI,GACrBiE,KAAK3G,YAAY,mBACjB2G,KAAK9G,SAAS,yBACd8G,KAAK2V,YAAY,aAGd6+I,EAlEU,CAmEjBzjI,GAEFyjI,EAAa7lK,UAAUu9B,aAAe,QACtCjjB,EAAUsH,kBAAkB,eAAgBikJ,GAC5C,IAAIhkB,EAAWgkB,EACfnmK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,qCAMA,SAAqC/uI,EAAQC,EAAS0uI,GACpD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIu7B,EAAS8+H,EAAO1yB,QAAQhxH,aAAa,UAErClD,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCgpJ,EAAe,SAAUlkI,IAC3B,EAAIkjI,EAAWh3B,SAASg4B,EAAclkI,GAEtC,IAAI4wG,EAASnB,EAAay0B,GAE1B,SAASA,IAEP,OADA,EAAInB,EAAiB72B,SAASn9H,KAAMm1J,GAC7BtzB,EAAOtuI,MAAMyM,KAAMzS,WAkB5B,OAfA,EAAI0mK,EAAc92B,SAASg4B,EAAc,CAAC,CACxChiK,IAAK,cACLM,MAAO,SAAqBsI,GAC1BiE,KAAKoJ,QAAQ2rJ,SAASK,cAEvB,CACDjiK,IAAK,OACLM,MAAO,WACDuM,KAAK60J,gBAAwC,IAAvB70J,KAAK60J,gBAI/B,EAAIX,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASg4B,EAAaxmK,WAAY,OAAQqR,MAAMrM,KAAKqM,UAG1Fm1J,EAzBU,CA0BjBpkI,GAEFokI,EAAaxmK,UAAUu9B,aAAe,SACtCjjB,EAAUsH,kBAAkB,eAAgB4kJ,GAC5C,IAAI3kB,EAAW2kB,EACf9mK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,iDAMA,SAA+C/uI,EAAQC,EAAS0uI,GAC9D,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAIk4B,EAAep4B,EAAuBF,EAE1C,uDAEIu4B,EAAqBr4B,EAAuBF,EAEhD,8DAEIi3B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIu7B,EAAS8+H,EAAO1yB,QAAQhxH,aAAa,UAErClD,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExC2tB,EAAyB,SAAU7I,IACrC,EAAIkjI,EAAWh3B,SAASrjG,EAAwB7I,GAEhD,IAgCQskI,EAhCJ1zB,EAASnB,EAAa5mG,GAE1B,SAASA,EAAuB/6B,EAAQR,GACtC,IAAI4G,EASJ,OAPA,EAAI6uJ,EAAiB72B,SAASn9H,KAAM85B,IACpC30B,EAAQ08H,EAAOluI,KAAKqM,KAAMjB,EAAQR,IAE5B0E,GAAGkC,EAAMiE,QAASmnJ,EAAOpzB,QAAQq4B,UAAWrwJ,EAAMuvJ,SAExDvvJ,EAAMlC,GAAGkC,EAAMiE,QAASmnJ,EAAOpzB,QAAQs4B,UAAWtwJ,EAAMyvJ,QAEjDzvJ,EAuFT,OApFA,EAAI8uJ,EAAc92B,SAASrjG,EAAwB,CAAC,CAClD3mC,IAAK,gBACLM,MAAO,WACL,MAAO,4EAER,CACDN,IAAK,OACLM,MAAO,WACDuM,KAAK60J,gBAAwC,IAAvB70J,KAAK60J,gBAI/B,EAAIX,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASrjG,EAAuBnrC,WAAY,OAAQqR,MAAMrM,KAAKqM,QAExG,CACD7M,IAAK,cACLM,OACM8hK,GAAe,EAAID,EAAmBn4B,SAASk4B,EAAal4B,QAAQu4B,MAAK,SAASC,EAAQ55J,GAC5F,IAAI+4J,EACJ,OAAOO,EAAal4B,QAAQy4B,MAAK,SAAkBC,GACjD,OACE,OAAQA,EAASpd,KAAOod,EAASruI,MAC/B,KAAK,EAKH,GAJAstI,EAAW90J,KAAKoJ,QAAQ2rJ,SACxB/0J,KAAK5N,UACLyjK,EAASpd,KAAO,EAEVqc,EAAS/pB,eAAiB90I,SAAS6/J,wBAA0B,CACjED,EAASruI,KAAO,EAChB,MAIF,OADAquI,EAASruI,KAAO,EACTstI,EAAS/pB,aAAajmH,0BAE/B,KAAK,EACH+wI,EAASruI,KAAO,GAChB,MAEF,KAAK,EAEH,OADAquI,EAASruI,KAAO,GACTvxB,SAASkkC,uBAElB,KAAK,GACH07H,EAASruI,KAAO,GAChB,MAEF,KAAK,GACHquI,EAASpd,KAAO,GAChBod,EAASE,GAAKF,EAAgB,MAAE,GAChC71J,KAAKoJ,QAAQtF,QAAQysJ,EAAOpzB,QAAQl9G,MAAO41I,EAASE,IAEtD,KAAK,GAGH,OAFAF,EAASpd,KAAO,GAChBz4I,KAAK3N,SACEwjK,EAAS9K,OAAO,IAEzB,KAAK,GACL,IAAK,MACH,OAAO8K,EAASvf,UAGrBqf,EAAS31J,KAAM,CAAC,CAAC,EAAG,GAAI,GAAI,UAGjC,SAAqBg2J,GACnB,OAAOT,EAAahiK,MAAMyM,KAAMzS,cAKnC,CACD4F,IAAK,UACLM,MAAO,SAAiBsI,GACtBiE,KAAK3G,YAAY,qCACjB2G,KAAK9G,SAAS,sCAEf,CACD/F,IAAK,SACLM,MAAO,SAAgBsI,GACrBiE,KAAK3G,YAAY,oCACjB2G,KAAK9G,SAAS,yCAGX4gC,EAtGoB,CAuG3B/I,GAEF+I,EAAuBnrC,UAAUu9B,aAAe,qBAChDjjB,EAAUsH,kBAAkB,yBAA0BupB,GACtD,IAAI02G,EAAW12G,EACfzrC,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,qCAMA,SAAqC/uI,EAAQC,EAAS0uI,GACpD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExC8pJ,EAAe,SAAUtiJ,IAC3B,EAAIwgJ,EAAWh3B,SAAS84B,EAActiJ,GAEtC,IAAIkuH,EAASnB,EAAau1B,GAE1B,SAASA,IAEP,OADA,EAAIjC,EAAiB72B,SAASn9H,KAAMi2J,GAC7Bp0B,EAAOtuI,MAAMyM,KAAMzS,WAgB5B,OAbA,EAAI0mK,EAAc92B,SAAS84B,EAAc,CAAC,CACxC9iK,IAAK,WACLM,MAAO,WACL,IAAIyiK,EAAgBrG,EAAO1yB,QAAQ5zE,IAAI/xD,SAAS,UAE5C3D,GAAK,EAAIqgK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAAS84B,EAAatnK,WAAY,WAAYqR,MAAMrM,KAAKqM,KAAM,MAAO,CACrH/G,UAAW,oBACX63B,IAAK,QAGP,OADAj9B,EAAG8E,YAAYu9J,GACRriK,MAGJoiK,EAvBU,CAwBjBhtJ,GAEFA,EAAUsH,kBAAkB,eAAgB0lJ,GAC5C,IAAIzlB,EAAWylB,EACf5nK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,wCAMA,SAAwC/uI,EAAQC,EAAS0uI,GACvD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCgqJ,EAAkB,SAAUxiJ,IAC9B,EAAIwgJ,EAAWh3B,SAASg5B,EAAiBxiJ,GAEzC,IAAIkuH,EAASnB,EAAay1B,GAE1B,SAASA,EAAgBp3J,EAAQR,GAC/B,IAAI4G,EAOJ,OALA,EAAI6uJ,EAAiB72B,SAASn9H,KAAMm2J,IACpChxJ,EAAQ08H,EAAOluI,KAAKqM,KAAMjB,EAAQR,IAE5BlM,SAEC8S,EAqCT,OAlCA,EAAI8uJ,EAAc92B,SAASg5B,EAAiB,CAAC,CAC3ChjK,IAAK,WACLM,MAAO,WACL,IAIIk8C,EAAO,CACT,aAAc3vC,KAAKyK,SAAS,QAE9B,OAAO,EAAIypJ,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASg5B,EAAgBxnK,WAAY,WAAYqR,MAAMrM,KAAKqM,KAAM,MAPrG,CACV/G,UAAW,mCACX63B,IAAK,OAKwH6e,KAEhI,CACDx8C,IAAK,SACLM,MAAO,WACLuM,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAKoN,MACxDpN,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAKqN,QAExD,CACDla,IAAK,UACLM,MAAO,WACLuM,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAKoN,MACzDpN,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAKqN,QAEzD,CACDla,IAAK,OACLM,MAAO,WACDuM,KAAK60J,gBAAwC,IAAvB70J,KAAK60J,gBAI/B,EAAIX,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASg5B,EAAgBxnK,WAAY,OAAQqR,MAAMrM,KAAKqM,UAG7Fm2J,EAlDa,CAmDpBltJ,GAEFA,EAAUsH,kBAAkB,kBAAmB4lJ,GAC/C,IAAI3lB,EAAW2lB,EACf9nK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,qCAMA,SAAqC/uI,EAAQC,EAAS0uI,GACpD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIu7B,EAAS8+H,EAAO1yB,QAAQhxH,aAAa,UAErClD,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCiqJ,EAAe,SAAUnlI,IAC3B,EAAIkjI,EAAWh3B,SAASi5B,EAAcnlI,GAEtC,IAAI4wG,EAASnB,EAAa01B,GAE1B,SAASA,IAEP,OADA,EAAIpC,EAAiB72B,SAASn9H,KAAMo2J,GAC7Bv0B,EAAOtuI,MAAMyM,KAAMzS,WAyD5B,OAtDA,EAAI0mK,EAAc92B,SAASi5B,EAAc,CAAC,CACxCjjK,IAAK,gBACLM,MAAO,WACL,MAAO,mEAER,CACDN,IAAK,SACLM,MAAO,YACL,EAAIygK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASi5B,EAAaznK,WAAY,SAAUqR,MAAMrM,KAAKqM,MAC/FA,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAK00J,SACxD10J,KAAKiD,GAAGjD,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAK40J,UAExD,CACDzhK,IAAK,UACLM,MAAO,YACL,EAAIygK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASi5B,EAAaznK,WAAY,UAAWqR,MAAMrM,KAAKqM,MAChGA,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQs3B,aAAcz0J,KAAK00J,SACzD10J,KAAKvO,IAAIuO,KAAKoJ,QAASmnJ,EAAOpzB,QAAQw3B,YAAa30J,KAAK40J,UAEzD,CACDzhK,IAAK,OACLM,MAAO,WACDuM,KAAK60J,gBAAwC,IAAvB70J,KAAK60J,gBAI/B,EAAIX,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASi5B,EAAaznK,WAAY,OAAQqR,MAAMrM,KAAKqM,QAE9F,CACD7M,IAAK,cACLM,MAAO,SAAqBsI,GAC1B,IAAI+4J,EAAW90J,KAAKoJ,QAAQ2rJ,SAEvBD,EAASuB,cAGZvB,EAASxe,OAFTwe,EAASrjJ,UAKZ,CACDte,IAAK,UACLM,MAAO,SAAiBsI,GACtBiE,KAAK3G,YAAY,yBACjB2G,KAAK9G,SAAS,wBACd8G,KAAK2V,YAAY,UAElB,CACDxiB,IAAK,SACLM,MAAO,SAAgBsI,GACrBiE,KAAK3G,YAAY,wBACjB2G,KAAK9G,SAAS,yBACd8G,KAAK2V,YAAY,cAGdygJ,EAhEU,CAiEjBrlI,GAEFqlI,EAAaznK,UAAUu9B,aAAe,SACtCjjB,EAAUsH,kBAAkB,eAAgB6lJ,GAC5C,IAAI5lB,EAAW4lB,EACf/nK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,uBAMA,SAAyB/uI,EAAQC,GAC/B,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAClB,IA6CIqT,EA7CuB,CACzB8lB,OAAO,EACPn2I,OAAO,EACPI,OAAO,EACPg2I,WAAW,EACXvkB,QAAQ,EACRwkB,UAAW,GACXC,YAAa,EACb3I,qBAAqB,EACrBt7H,gBAAYt3B,EACZw7J,WAAY,IACZC,YAAa,IACbjlK,OAAO,EACPklK,KAAK,EACLC,gBAAgB,EAChBC,aAAc,KACdC,YAAa,YACbC,eAAgB,GAChBC,cAAe,aACfC,kBAAmB,OACnBC,eAAgB,GAChBC,oBAAqB,GACrBC,YAAa,YACbC,kBAAmB,OACnBC,cAAe,OACfC,gBAAiB,KACjBC,gBAAiB,MACjBC,aAAc,IACdC,cAAe,EACfC,eAAgB,GAChBC,oBAAqB,GACrBC,mBAAmB,EACnBC,mBAAoB,IACpBC,iBAAkB,GAClBC,gBAAiB,UACjBC,kBAAmB,YACnBC,mBAAoB,IACpBC,UAAW,EACXC,cAAe,GACfC,iBAAkB,GAClBC,eAAgB,GAChBC,aAAa,EACbC,SAAS,EACTC,qBAAsB,IAGxBrqK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,oCAMA,SAAoCmS,EAAyBjhJ,EAAS0uI,GACpE,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQsqK,WAAatqK,EAAQuqK,SAAWvqK,EAAQwqK,OAASxqK,EAAQyqK,gBAAkBzqK,EAAQ0qK,mBAAgB,EAE3G,IAAI/E,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIi8B,EAAYj8B,EAEhB,+BAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExC0sJ,EAAS,UACbxqK,EAAQwqK,OAASA,EACjB,IAAID,EAAW,YACfvqK,EAAQuqK,SAAWA,EACnB,IAAID,EAAa,cACjBtqK,EAAQsqK,WAAaA,EACrB,IAAIG,EAAkB,CAACD,EAAQD,EAAUD,GACzCtqK,EAAQyqK,gBAAkBA,EAE1B,IAAIC,EAAgB,SAAUplJ,IAC5B,EAAIwgJ,EAAWh3B,SAAS47B,EAAeplJ,GAEvC,IAAIkuH,EAASnB,EAAaq4B,GAE1B,SAASA,EAAch6J,EAAQR,GAG7B,OAFA,EAAIy1J,EAAiB72B,SAASn9H,KAAM+4J,GACpCx6J,EAAQ+I,SAAU,EACXu6H,EAAOluI,KAAKqM,KAAMjB,EAAQR,GA0BnC,OAvBA,EAAI01J,EAAc92B,SAAS47B,EAAe,CAAC,CACzC5lK,IAAK,QACLM,MAAO,SAAe48D,EAAW3+D,GAC/BsO,KAAKqwD,UAAYA,EACjBrwD,KAAKtO,MAAQA,IAEd,CACDyB,IAAK,WACLM,MAAO,SAAkB2M,GACvB,OAAO,EAAI44J,EAAUC,mBAAmB74J,KAEzC,CACDjN,IAAK,cACLM,MAAO,SAAqBylK,EAASprK,IACnC,EAAIkrK,EAAUG,aAAaD,EAASprK,KAErC,CACDqF,IAAK,SACLM,MAAO,SAAgBvD,GACrB,IAAIkpK,EAAWlpK,EAAK2C,OAAOC,KAAK5C,GAAM,KACtC,EAAI8oK,EAAUK,cAAcD,EAAUp5J,KAAKjB,SAASu6J,mBAGjDP,EAlCW,CAmClB9vJ,GAEF5a,EAAQ0qK,cAAgBA,EACxBlJ,EAAO1yB,QAAQ47B,cAAgBA,EAC/B9vJ,EAAUsH,kBAAkB,gBAAiBwoJ,IAK/C,mCAMA,SAAmCzpB,EAAyBjhJ,EAAS0uI,GACnE,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQkrK,iBAAmBlrK,EAAQmrK,eAAiBnrK,EAAQorK,oBAAsBprK,EAAQqrK,oBAAiB,EAE3G,IAAI7J,EAAS5yB,EAAuBF,EAEpC,aAEI48B,EAAa18B,EAAuBF,EAExC,kCAEI68B,EAAiB78B,EAErB,qCAEI88B,EAAgB98B,EAEpB,oCAyCA1uI,EAAQqrK,eAvCa,SAAwBrC,GAC3C,IAAIyC,EAEJ,OAAQzC,GACN,KAAKwC,EAAcE,UACjBD,EAAmBH,EAAWx8B,QAC9B,MAEF,KAAK08B,EAAcG,YACjBF,EAAmBjK,EAAO1yB,QAAQ88B,gBAClC,MAEF,KAAKJ,EAAcK,WACjBJ,EAAmBjK,EAAO1yB,QAAQg9B,iBAClC,MAEF,KAAKN,EAAcO,OACjBN,EAAmBjK,EAAO1yB,QAAQk9B,aAClC,MAEF,KAAKR,EAAcS,aACjBR,EAAmBjK,EAAO1yB,QAAQo9B,mBAClC,MAEF,KAAKV,EAAcW,kBACjBV,EAAmBjK,EAAO1yB,QAAQs9B,wBAClC,MAEF,KAAKZ,EAAca,KACjBZ,EAAmBjK,EAAO1yB,QAAQw9B,WAClC,MAEF,QACE,MAAM,IAAI5oK,MAAM,wBAA0BslK,GAG9C,OAAOyC,GAwBTzrK,EAAQmrK,eAnBa,SAAwBzC,GAC3C,IAAI6D,EAEJ,OAAQ7D,GACN,KAAK8C,EAAcE,UACjBa,EAAmBjB,EAAWx8B,QAC9B,MAEF,KAAK08B,EAAcgB,SACjBD,EAAmB/K,EAAO1yB,QAAQ29B,eAClC,MAEF,QACE,MAAM,IAAI/oK,MAAM,wBAA0BglK,GAG9C,OAAO6D,GASTvsK,EAAQorK,oBAJkB,SAA6BpC,GACrD,OAAOwC,EAAckB,cAAc1rK,QAAQgoK,IAAgB,GA+B7DhpK,EAAQkrK,iBA1Be,SAA0BlB,GAC/C,IAAI2C,EAEJ,OAAQ3C,GACN,IAAK,GACH,MAEF,KAAKuB,EAAef,OAClBmC,EAAqBnL,EAAO1yB,QAAQ89B,aACpC,MAEF,KAAKrB,EAAehB,SAClBoC,EAAqBnL,EAAO1yB,QAAQ+9B,eACpC,MAEF,KAAKtB,EAAejB,WAClBqC,EAAqBnL,EAAO1yB,QAAQg+B,iBACpC,MAEF,QACE,MAAM,IAAIppK,MAAM,0BAA4BsmK,GAGhD,OAAO2C,IAQX,mCAMA,SAAmC1rB,EAAyBjhJ,EAAS0uI,GACnE,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQwsK,SAAWxsK,EAAQqsK,KAAOrsK,EAAQmsK,kBAAoBnsK,EAAQisK,aAAejsK,EAAQ+rK,OAAS/rK,EAAQ6rK,WAAa7rK,EAAQ2rK,YAAc3rK,EAAQ0rK,UAAY1rK,EAAQ+sK,cAAgB/sK,EAAQ0sK,cAAgB1sK,EAAQgtK,eAAiBhtK,EAAQitK,kBAAe,EAErQ,IAAItH,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEIi8B,EAAYj8B,EAEhB,+BAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAG5C9d,EAAQ0rK,UADQ,YAEhB,IAAIC,EAAc,eAClB3rK,EAAQ2rK,YAAcA,EACtB,IAAIE,EAAa,cACjB7rK,EAAQ6rK,WAAaA,EACrB,IAAIE,EAAS,SACb/rK,EAAQ+rK,OAASA,EACjB,IAAIE,EAAe,gBACnBjsK,EAAQisK,aAAeA,EACvB,IAAIE,EAAoB,sBACxBnsK,EAAQmsK,kBAAoBA,EAC5B,IAAIE,EAAO,OACXrsK,EAAQqsK,KAAOA,EACf,IAAIG,EAAW,YACfxsK,EAAQwsK,SAAWA,EACnB,IAAIE,EAAgB,CAACf,EAAaE,EAAYE,EAAQE,EAAcE,EAAmBE,GACvFrsK,EAAQ0sK,cAAgBA,EACxB,IAAIK,EAAgB,CAACP,GACrBxsK,EAAQ+sK,cAAgBA,EACxB,IAAIC,EAAiBN,EAAc7rK,OAAOksK,GAC1C/sK,EAAQgtK,eAAiBA,EAEzB,IAAIC,EAAe,SAAU3nJ,IAC3B,EAAIwgJ,EAAWh3B,SAASm+B,EAAc3nJ,GAEtC,IAAIkuH,EAASnB,EAAa46B,GAE1B,SAASA,EAAav8J,EAAQR,GAG5B,OAFA,EAAIy1J,EAAiB72B,SAASn9H,KAAMs7J,GACpC/8J,EAAQ+I,SAAU,EACXu6H,EAAOluI,KAAKqM,KAAMjB,EAAQR,GAiCnC,OA9BA,EAAI01J,EAAc92B,SAASm+B,EAAc,CAAC,CACxCnoK,IAAK,UACLM,MAAO,gBACqByH,IAAtB8E,KAAKu7J,cACPtnG,IAAIoO,gBAAgBriE,KAAKu7J,gBAG5B,CACDpoK,IAAK,UACLM,MAAO,cACN,CACDN,IAAK,cACLM,MAAO,SAAqBylK,IAC1B,EAAIF,EAAUG,aAAaD,KAE5B,CACD/lK,IAAK,kBACLM,MAAO,SAAyB2M,GAC9BJ,KAAKu7J,aAAen7J,EACpBJ,KAAKm5J,YAAYn5J,KAAKu7J,cACtBv7J,KAAKsK,UACLtK,KAAK8D,QAAQysJ,EAAOpzB,QAAQq+B,mBAE7B,CACDroK,IAAK,SACLM,MAAO,SAAgBvD,GACrB,IAAIkpK,EAAWlpK,EAAK2C,OAAOC,KAAK5C,GAAM,KACtC,EAAI8oK,EAAUK,cAAcD,EAAUp5J,KAAKu7J,kBAGxCD,EAzCU,CA0CjBryJ,GAEF5a,EAAQitK,aAAeA,EACvBzL,EAAO1yB,QAAQm+B,aAAeA,EAC9BryJ,EAAUsH,kBAAkB,eAAgB+qJ,IAK9C,iCAMA,SAAiChsB,EAAyBjhJ,GACxD,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQotK,aAAeptK,EAAQqtK,YAAcrtK,EAAQstK,UAAYttK,EAAQutK,YAAcvtK,EAAQwtK,WAAaxtK,EAAQytK,WAAaztK,EAAQ0tK,WAAa1tK,EAAQ2tK,qBAAkB,EAChL,IAAID,EAAa,aACjB1tK,EAAQ0tK,WAAaA,EACrB,IAAID,EAAa,aACjBztK,EAAQytK,WAAaA,EACrB,IAAID,EAAa,aACjBxtK,EAAQwtK,WAAaA,EACrB,IAAID,EAAc,cAClBvtK,EAAQutK,YAAcA,EACtB,IAAIH,EAAe,eACnBptK,EAAQotK,aAAeA,EACvB,IAAIE,EAAY,YAChBttK,EAAQstK,UAAYA,EACpB,IAAID,EAAc,cAClBrtK,EAAQqtK,YAAcA,EAoBtBrtK,EAAQ2tK,gBAlBc,SAAyB1F,EAAOn2I,EAAOI,EAAOg2I,EAAWvkB,GAC7E,OAAIiqB,EAAc3F,GACTyF,EACEE,EAAc1F,GAChBoF,EACEM,EAAc97I,IAAU87I,EAAc17I,GACxCq7I,EACEK,EAAc97I,IAAU87I,EAAcjqB,GACxCypB,GACGQ,EAAc97I,IAAU87I,EAAcjqB,GACzC0pB,EACEO,EAAc97I,KAAW87I,EAAc17I,GACzCu7I,GACGG,EAAc97I,IAAU87I,EAAc17I,GACzCs7I,OADF,GAOT,IAAII,EAAgB,SAAuB59I,GACzC,OAAOA,IAASxrB,OAAOwrB,KAAkB,IAATA,IAOpC,gCAMA,SAAgCjwB,EAAQC,EAAS0uI,GAC/C,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIm/B,EAAaj/B,EAAuBF,EAExC,cAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEI88B,EAAgB98B,EAEpB,oCAMIo/B,GAJiBp/B,EAErB,oCAEkBA,EAElB,mCAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIyT,EAAY4mJ,EAAO1yB,QAAQhxH,aAAa,aAExCiwJ,EAAkB,SAAUC,IAC9B,EAAIlI,EAAWh3B,SAASi/B,EAAiBC,GAEzC,IAAIx6B,EAASnB,EAAa07B,GAE1B,SAASA,IAEP,OADA,EAAIpI,EAAiB72B,SAASn9H,KAAMo8J,GAC7Bv6B,EAAOtuI,MAAMyM,KAAMzS,WAqK5B,OAlKA,EAAI0mK,EAAc92B,SAASi/B,EAAiB,CAAC,CAC3CjpK,IAAK,QACLM,MAAO,SAAe4xE,EAAQhV,EAAW3+D,GACvCsO,KAAKs8J,YAAcj3F,EACnBrlE,KAAKqwD,UAAYA,EACjBrwD,KAAKtO,MAAQA,EAET,WAAYsO,KAAKqwD,YACnBrwD,KAAKqwD,UAAU9vC,OAAQ,QAGCrlB,IAAtB8E,KAAKu8J,eACPv8J,KAAKqwD,UAAU9vC,MAAQvgB,KAAKu8J,cAG9Bv8J,KAAKw8J,OAAS,IAAIN,EAAW/+B,QAAQs/B,WACrCz8J,KAAKw8J,OAAOnsG,UAAYrwD,KAAKqwD,UAC7BrwD,KAAKw8J,OAAOE,aAAe18J,KAAKtO,MAChCsO,KAAKw8J,OAAOG,SAAW38J,KAAK28J,SAC5B38J,KAAKw8J,OAAO3+E,WAAa79E,KAAK69E,WAC9B79E,KAAKw8J,OAAOjwF,WAAavsE,KAAKusE,WAC9BvsE,KAAKw8J,OAAOI,sBAAwB58J,KAAK23J,cACzC33J,KAAKw8J,OAAOj8I,MAAQvgB,KAAKugB,MACzBvgB,KAAKw8J,OAAOx+B,OAASh+H,KAAKg+H,OAC1Bh+H,KAAKw8J,OAAOK,QAAU78J,KAAK88J,QAC3B98J,KAAKw8J,OAAO18B,QAAU9/H,KAAK8/H,QAC3B9/H,KAAKw8J,OAAOO,UAAY/8J,KAAK+8J,eAEN7hK,IAAnB8E,KAAKo4J,YACPp4J,KAAKw8J,OAAOpE,UAAYp4J,KAAKo4J,UAC7Bp4J,KAAKw8J,OAAOQ,YAAch9J,KAAKg9J,YAAYv4J,KAAKzE,OAGlDA,KAAKw8J,OAAOS,WAAaj9J,KAAKi9J,WAC9Bj9J,KAAKw8J,OAAOU,gBAAkBl9J,KAAKo3J,oBACnCp3J,KAAKw8J,OAAOW,UAAUn9J,KAAKs8J,eAE5B,CACDnpK,IAAK,UACLM,MAAO,YACL,EAAIygK,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAASi/B,EAAgBztK,WAAY,UAAWqR,MAAMrM,KAAKqM,MACnGA,KAAKwnI,YAEN,CACDr0I,IAAK,UACLM,MAAO,WACDuM,KAAKw8J,QAAyC,oBAAxBx8J,KAAKw8J,OAAOh1B,SACpCxnI,KAAKw8J,OAAOh1B,YAGf,CACDr0I,IAAK,QACLM,MAAO,WACLuM,KAAKw8J,OAAOY,mBAEb,CACDjqK,IAAK,OACLM,MAAO,WACLuM,KAAKw8J,OAAOa,cAAcr9J,KAAKs9J,gBAAgB74J,KAAKzE,SAErD,CACD7M,IAAK,QACLM,MAAO,WACLuM,KAAKw8J,OAAOe,mBAEb,CACDpqK,IAAK,SACLM,MAAO,WACLuM,KAAKw8J,OAAOgB,oBAEb,CACDrqK,IAAK,SACLM,MAAO,SAAgBvD,GACjB8P,KAAKw8J,aAAmBthK,IAAThL,GACjB8P,KAAKw8J,OAAOiB,KAAKvtK,KAGpB,CACDiD,IAAK,kBACLM,MAAO,SAAyBiqK,EAAe1uK,GAC7C,IAAImW,EAAQnF,KAEZi0D,IAAIoO,gBAAgBq7F,GACpB,IAAIC,EAAa39J,KAAKjB,SAASg2J,SAAS6I,gBACxC59J,KAAKw8J,OAAOx6F,SAAQ,SAAU67F,GAC5B,OAAQF,GACN,KAAKxB,EAAYL,gBACS5gK,IAApB2iK,EAAU19I,QACZhb,EAAMo2J,aAAesC,EAAU19I,OAGjC,MAEF,KAAKg8I,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYT,iBACSxgK,IAApB2iK,EAAUt9I,QACZpb,EAAMo2J,aAAesC,EAAUt9I,OAGjC,MAEF,KAAK47I,EAAYR,eACOzgK,IAAlB2iK,EAAUtzI,MACZplB,EAAMo2J,aAAesC,EAAUtzI,KAMrCplB,EAAMg0J,YAAYh0J,EAAMo2J,cAExBp2J,EAAMrB,QAAQysJ,EAAOpzB,QAAQq+B,sBAGhC,CACDroK,IAAK,cACLM,MAAO,SAAqB0oJ,EAAS3qJ,GAGnC,IAAIysE,EAEJ,OAJAj+D,KAAKjB,SAAS++J,iBAAmB3hB,EACjCn8I,KAAKjB,SAASg/J,cAAgBvsK,EAGtBwO,KAAKjB,SAASg2J,SAAS6I,iBAC7B,KAAKzB,EAAYL,WACf79F,EAAWj+D,KAAKw8J,OAAOwB,cACvB,MAEF,KAAK7B,EAAYR,UACf19F,EAAWj+D,KAAKw8J,OAAOyB,YACvB,MAEF,QACEhgG,EAAWj+D,KAAKw8J,OAAO0B,cAG3B,IAAIC,GAAqB,EAErBlgG,IACFA,EAAWA,EAASmgG,uBAGlBngG,aAAoBi+F,EAAW/+B,QAAQkhC,uBAAwB,IACjEr+J,KAAKjB,SAASw8J,aAAet9F,EAASqgG,kBACtCt+J,KAAKm5J,YAAYn5J,KAAKjB,SAASw8J,aAAav7J,KAAKoJ,QAAQmyJ,aAAa1rK,OAAS,IAE3EmQ,KAAKy2J,YAAc,GACH,IAAI50F,KAAK7hE,KAAKjB,SAASw8J,cAAc/1J,MAEpCxF,KAAKy2J,cACtB0H,GAAqB,IAK3Bn+J,KAAKjB,SAAS+E,QAAQysJ,EAAOpzB,QAAQohC,WAEjCJ,GACFn+J,KAAKjB,SAASg2J,SAASze,WAItB8lB,EA5Ka,CA6KpBvC,EAAcyB,cAEhBzL,EAAO1yB,QAAQi/B,gBAAkBA,EACjCnzJ,EAAUsH,kBAAkB,kBAAmB6rJ,GAC/C,IAAI5rB,EAAW4rB,EACf/tK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,oBAMA,SAAsB/uI,EAAQC,EAAS0uI,GACrC,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIp8F,EAAQ,SAASA,KACnB,EAAIqzH,EAAiB72B,SAASn9H,KAAM2gC,IAGtCA,EAAMotH,MAAQ,QACdptH,EAAM1gB,MAAQ,QACd0gB,EAAMg2G,QAAU,UAChBh2G,EAAM69H,eAAiB,iBACvB79H,EAAM89H,UAAY,YAClB99H,EAAM+9H,aAAe,eACrB/9H,EAAMutH,WAAa,aACnBvtH,EAAMg+H,eAAiB,iBACvBh+H,EAAMwtH,MAAQ,QACdxtH,EAAMytH,MAAQ,QACdztH,EAAMi+H,KAAO,OACbj+H,EAAM8tH,aAAe,cACrB9tH,EAAM+tH,aAAe,cACrB/tH,EAAM8zH,aAAe,cACrB9zH,EAAMg0H,YAAc,aACpBh0H,EAAMk+H,cAAgB,eACtBl+H,EAAM66H,gBAAkB,iBACxB76H,EAAMm+H,gBAAkB,iBACxBn+H,EAAM49H,UAAY,YAClB59H,EAAMo+H,gBAAkB,iBACxBp+H,EAAMq+H,gBAAkB,iBACxBr+H,EAAMs+H,oBAAsB,oBAC5Bt+H,EAAMguH,mBAAqB,mBAC3BhuH,EAAMu+H,cAAgB,eACtBv+H,EAAMw+H,eAAiB,gBACvBx+H,EAAM60H,UAAY,WAClB70H,EAAM80H,UAAY,WAClB90H,EAAMu0H,MAAQ,QACdv0H,EAAMy+H,sBAAwB,wBAC9Bz+H,EAAM0+H,sBAAwB,wBAC9BxsK,OAAO0D,OAAOoqC,GACd,IAAI6vG,EAAW7vG,EACftyC,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,uBAMA,SAAwB/uI,EAAQC,EAAS0uI,GACvC,aAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAIg/B,EAAcp/B,EAElB,kCAoCIyT,EA9BoB,SAA2Bz0I,GACjD,OAAQA,EAAM8G,OACZ,KANQ,GAOE7C,KAAKoJ,QAAQ2rJ,SAAS6I,kBACvBzB,EAAYJ,WACf/7J,KAAKoJ,QAAQk2J,aAAax7J,QAAQ,SAIlC9D,KAAKoJ,QAAQm2J,aAAaz7J,QAAQ,SAGtC,MAEF,KAjBQ,IAkByC,IAA3C9D,KAAKoJ,QAAQ2rJ,SAASyK,kBACxBx/J,KAAKoJ,QAAQq2J,UAAU37J,QAAQ,SAGjC,MAEF,KAvBQ,GAwBF9D,KAAKoJ,QAAQ+9B,WAAW7V,YAActxB,KAAKoJ,QAAQ+9B,WAAW7V,WAAWnmB,aAC3EpM,OAAOooC,WAAW7V,WAAWxtB,QAAQ,WAQ7CzV,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,iCAMA,SAAiC/uI,EAAQC,GACvC,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAUIqT,EAVe,SAAsBnrE,EAAQxsE,GAC3C,cAAeA,EACjBA,EAAQugJ,UAAY/zE,EACX,iBAAkBxsE,EAC3BA,EAAQ6mK,aAAer6F,EAEvBxsE,EAAQugJ,UAAY/zE,GAKxBh3E,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,oCAMA,SAAoC/uI,EAAQC,GAC1C,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAkBIqT,EAlBiB,SAAwBmvB,EAAIC,GAC/C,GAAkB,kBAAPD,EAAiB,OAAO,EACnC,GAAkB,kBAAPC,EAAiB,OAAO,EACnCD,EAAKA,EAAGnmK,MAAM,KACdomK,EAAKA,EAAGpmK,MAAM,KAId,IAHA,IAAIyB,EAAImC,KAAKE,IAAIqiK,EAAG9vK,OAAQ+vK,EAAG/vK,QAC3BD,EAAI,EAEAA,EAAIqL,IAAKrL,EAAG,CAGlB,GAFA+vK,EAAG/vK,GAAKke,SAAS6xJ,EAAG/vK,GAAI,IACxBgwK,EAAGhwK,GAAKke,SAAS8xJ,EAAGhwK,GAAI,IACpB+vK,EAAG/vK,GAAKgwK,EAAGhwK,GAAI,OAAO,EAC1B,GAAI+vK,EAAG/vK,GAAKgwK,EAAGhwK,GAAI,OAAQ,EAG7B,OAAO+vK,EAAG9vK,SAAW+vK,EAAG/vK,OAAS,EAAI8vK,EAAG9vK,OAAS+vK,EAAG/vK,QAAU,EAAI,GAIpExB,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,mCAMA,SAAmCmS,EAAyBjhJ,EAAS0uI,GACnE,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQwxK,UAAYxxK,EAAQyxK,SAAWzxK,EAAQ0xK,SAAW1xK,EAAQ2xK,QAAU3xK,EAAQ4xK,OAAS5xK,EAAQ09J,mBAAgB,EAErH,IAAImU,EAAUjjC,EAAuBF,EAErC,oCAEIgvB,EAAgB,WAClB,IAAIv2J,EAAS,CACbA,QAAiB,KACjBA,QAAiB,KACjBA,WAAoB,MAEpB,GAA+B,qBAApB0qK,EAAQ/iC,UAA4B+iC,EAAQ/iC,QAAQ9oI,UAE7D,OADAmB,EAAOc,QAAU,2BACVd,EAGT,GAAInB,UAAUi4J,gBACZ92J,EAAOc,QAAU,UACjBd,EAAOC,QAAU43J,EAAeh5J,UAAUC,UAAW,mBAAoB,GACzEkB,EAAO83J,WAAa,QACf,GAAIj5J,UAAUg4J,mBACnB72J,EAAOc,QAAU,SACjBd,EAAOC,QAAU43J,EAAeh5J,UAAUC,UAAW,wBAAyB,GAC9EkB,EAAO83J,WAAa,QACf,GAAIj5J,UAAUg1J,cAAgBh1J,UAAUC,UAAUH,MAAM,sBAC7DqB,EAAOc,QAAU,OACjBd,EAAOC,QAAU43J,EAAeh5J,UAAUC,UAAW,qBAAsB,GAC3EkB,EAAO83J,WAAa,UACf,KAAI4S,EAAQ/iC,QAAQowB,oBAAqBl5J,UAAUC,UAAUH,MAAM,wBAKxE,OADAqB,EAAOc,QAAU,2BACVd,EAJPA,EAAOc,QAAU,SACjBd,EAAOC,QAAU43J,EAAeh5J,UAAUC,UAAW,uBAAwB,GAM/E,OAAOkB,GAGTnH,EAAQ09J,cAAgBA,EAExB,IAAIsB,EAAiB,SAAwBF,EAAUC,EAAMxoB,GAC3D,IAAIzwI,EAAQg5J,EAASh5J,MAAMi5J,GAC3B,OAAOj5J,GAASA,EAAMtE,QAAU+0I,GAAO92H,SAAS3Z,EAAMywI,GAAM,KAO9Dv2I,EAAQ4xK,OAJK,WACX,MAAmC,SAA5BlU,IAAgBz1J,SASzBjI,EAAQyxK,SAJO,WACb,MAAmC,WAA5B/T,IAAgBz1J,SASzBjI,EAAQ2xK,QAJM,WACZ,QAASE,EAAQ/iC,QAAQgjC,QAAkD,IAAzC9rK,UAAUC,UAAUjF,QAAQ,SAShEhB,EAAQ0xK,SAJO,WACb,MAAmC,WAA5BhU,IAAgBz1J,SASzBjI,EAAQwxK,UAJQ,WACd,MAAmC,YAA5B9T,IAAgBz1J,UAQ3B,8BAMA,SAA8Bg5I,EAAyBjhJ,EAAS0uI,GAC9D,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8qK,YAAc9qK,EAAQ4qK,kBAAoB5qK,EAAQgrK,kBAAe,EAEzE,IAAI+G,EAAQnjC,EAAuBF,EAEnC,2BA6BA1uI,EAAQgrK,aA3BW,SAAsBD,EAAUh5J,GACjD,GAA0C,qBAA/B/L,UAAUgsK,iBACnB,OAAOhsK,UAAUgsK,iBAAiBjgK,EAAMg5J,GACnC,GAAoC,qBAAzB/kK,UAAUisK,WAC1B,OAAOjsK,UAAUisK,WAAWlgK,EAAMg5J,GAGpC,IAAImH,EAAYtqK,SAAS4B,cAAc,KACvC0oK,EAAU5kJ,KAAOs4C,IAAI2N,gBAAgBxhE,GACrCmgK,EAAUC,SAAWpH,EACrBmH,EAAU9gK,MAAQ,6CACjBxJ,SAASyE,MAAQzE,SAASsM,iBAAiB5J,YAAY4nK,GAEzB,oBAApBA,EAAUzjH,MACnByjH,EAAUzjH,SAEVyjH,EAAUltK,OAAS,SACnBktK,EAAUt7J,cAAc,IAAIw7J,WAAW,QAAS,CAC9C50F,KAAM59E,OACNgW,SAAS,EACTg5C,YAAY,MAIhBgX,IAAIoO,gBAAgBk+F,EAAU5kJ,OAqBhCttB,EAAQ4qK,kBAhBgB,SAA2BC,GACjD,OAAO,IAAIl0I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IAAIowH,EAAS,IAAIC,WAEjBD,EAAOqrB,UAAY,WACjB1iH,EAAQq3F,EAAO7/I,SAGjB6/I,EAAOvxH,QAAU,SAAU68I,GACzB17I,EAAO07I,EAAG/uK,QAGZyjJ,EAAOG,kBAAkB0jB,OAmC7B7qK,EAAQ8qK,YA7BU,SAAqBD,EAAS0H,EAASC,GACvD,GAAI3H,aAAmBr3F,MAAQq3F,aAAmBrG,KAAM,MACtC33J,IAAZ0lK,IACFA,EAAU,IAAI/yK,MAGhB,IACEqrK,EAAQ4H,aAAeF,EAAQlzK,UAC/BwrK,EAAQ6H,iBAAmBH,EAC3B,MAAO3sK,GACP,KAAIA,aAAayzD,WACf,MAAMzzD,OAIYiH,IAAlB2lK,IACFA,EAAgB,KAAM,EAAIT,EAAMjjC,SAAS+7B,EAAQlqK,OAGnD,IACEkqK,EAAQhpK,KAAO0wK,EAAQlzK,UAAYmzK,EACnC,MAAO5sK,GACP,KAAIA,aAAayzD,WACf,MAAMzzD,MAWhB,gCAMA,SAAgC7F,EAAQC,EAAS0uI,GAC/C,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI+xB,EAAWjyB,EAAuBF,EAEtC,qCAEIkyB,EAAWhyB,EAAuBF,EAEtC,qCAsCIyT,EApCa,SAAoBx+G,EAASC,GAC5C,IAAI67H,EAAsBvgK,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,IAAmBA,UAAU,GACzFykC,EAAUA,EAAU,EAAI,EAAIA,GAExB/jB,MAAM+jB,IAAYA,IAAYM,OAChCN,EAAU,GAGZ,IAAIm9H,GAAY,EAAID,EAAS/xB,SAAmB,IAAVnrG,GAClCo9H,EAAYD,OAEFj0J,IAAV+2B,IACFm9H,GAAY,EAAIF,EAAS/xB,SAAiB,IAARlrG,IAGpC,IAAIo9H,GAAK,EAAIJ,EAAS9xB,SAASgyB,EAAUG,OACrChyJ,GAAM,EAAI2xJ,EAAS9xB,SAASgyB,EAAUI,SACtCC,GAAM,EAAIP,EAAS9xB,SAASgyB,EAAUn9H,SACtCy9H,GAAK,EAAIR,EAAS9xB,SAASgyB,EAAUO,aAAc,GAEvD,GAAIP,EAAUQ,KAAO,GAAKP,EAAUO,KAAO,EAAG,CAC5C,IAAIC,GAAM,EAAIX,EAAS9xB,SAASgyB,EAAUQ,MAC1C,MAAO,GAAGzgK,OAAO0gK,EAAK,KAAK1gK,OAAOmgK,EAAI,KAAKngK,OAAOoO,EAAK,KAAKpO,OAAOsgK,GAGrE,OAAIL,EAAUG,MAAQ,GAAKF,EAAUE,MAAQ,EACpC,GAAGpgK,OAAOmgK,EAAI,KAAKngK,OAAOoO,EAAK,KAAKpO,OAAOsgK,GAGhD1B,EACK,GAAG5+J,OAAOoO,EAAK,KAAKpO,OAAOsgK,EAAK,KAAKtgK,OAAOugK,GAG9C,GAAGvgK,OAAOoO,EAAK,KAAKpO,OAAOsgK,IAIpCnhK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,yBAMA,SAA0B/uI,EAAQC,GAChC,aAEAwE,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAClB,IAAI6jC,EAAsB,0BACtBC,EAAY,CACd,YAAa,MACb,YAAa,MACb,mBAAoB,MACpB,aAAc,OACd,YAAa,MACb,aAAc,MACd,YAAa,MACb,aAAc,OACd,YAAa,MACb,YAAa,MACb,aAAc,OACd,wBAAyB,OACzB,aAAc,MACd,YAAa,MACb,YAAa,MACb,gBAAiB,MACjB,aAAc,QASZzwB,EANe,SAAsBmsB,GACvC,IAAIxoK,EAAQ6sK,EAAoBxsK,KAAKmoK,GACjCnnK,EAASrB,GAASA,EAAM,GAAGiI,cAC/B,OAAO6kK,EAAUzrK,IAInBnH,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,kCAMA,SAAoC/uI,EAAQ2hK,EAA0BhzB,GACpE,IAAI/uI,EAGFA,EADoB,qBAAXC,OACHA,OACoC,qBAA1B8uI,EAAoBjC,EAC9BiC,EAAoBjC,EACD,qBAAT3sI,KACVA,KAEA,GAGRC,EAAOC,QAAUL,GAKnB,mCAMA,SAAoCgiK,EAAqCrV,EAAqB5d,GAC5F,aAkBA,SAASkzB,EAAkBP,GACzB,GAA4B,kBAAjBA,EACT,MAAM,IAAIhoG,UAAU,qBAGtB,IAAIwoG,EAAmBR,EAAe,EAAItyJ,KAAK8C,MAAQ9C,KAAKiwE,KAC5D,MAAO,CACLsiF,KAAMO,EAAiBR,EAAe,OACtCJ,MAAOY,EAAiBR,EAAe,MAAW,GAClDH,QAASW,EAAiBR,EAAe,KAAS,GAClD19H,QAASk+H,EAAiBR,EAAe,KAAQ,GACjDA,aAAcQ,EAAiBR,GAAgB,IAC/CS,aAAcD,EAAgC,IAAfR,GAAuB,IACtDU,YAAaF,EAAgC,IAAfR,GAAsB,KA7BxD3yB,EAAoBzqF,EAAEqoG,GAItB5d,EAAoB5+C,EAAEw8D,EAAqB,CAEzC,QAAW,WACT,OAAO,MA8Bb,gDAMA,SAAiDvsJ,GAO/C,IAAI8yK,EAAU,SAAU7yK,GACtB,aAEA,IAEI6M,EAFAimK,EAAKtuK,OAAOlE,UACZyyK,EAASD,EAAGrvK,eAGZuvK,EAA4B,oBAAX7yK,OAAwBA,OAAS,GAClD8yK,EAAiBD,EAAQ5yK,UAAY,aACrC8yK,EAAsBF,EAAQG,eAAiB,kBAC/CC,EAAoBJ,EAAQnZ,aAAe,gBAE/C,SAAS0N,EAAK8L,EAASC,EAASxzK,EAAMyzK,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQhzK,qBAAqBmzK,EAAYH,EAAUG,EAC/EC,EAAYlvK,OAAO2qH,OAAOqkD,EAAelzK,WACzC0I,EAAU,IAAI2qK,EAAQJ,GAAe,IAIzC,OADAG,EAAUE,QA+LZ,SAA0BP,EAASvzK,EAAMkJ,GACvC,IAAIsQ,EAAQu6J,EACZ,OAAO,SAAgB/qK,EAAQywB,GAC7B,GAAIjgB,IAAUw6J,EACZ,MAAM,IAAIpwK,MAAM,gCAGlB,GAAI4V,IAAUy6J,EAAmB,CAC/B,GAAe,UAAXjrK,EACF,MAAMywB,EAKR,OAAOy6I,IAMT,IAHAhrK,EAAQF,OAASA,EACjBE,EAAQuwB,IAAMA,IAED,CACX,IAAI06I,EAAWjrK,EAAQirK,SAEvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUjrK,GAEnD,GAAIkrK,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBlrK,EAAQF,OAGVE,EAAQqrK,KAAOrrK,EAAQsrK,MAAQtrK,EAAQuwB,SAClC,GAAuB,UAAnBvwB,EAAQF,OAAoB,CACrC,GAAIwQ,IAAUu6J,EAEZ,MADAv6J,EAAQy6J,EACF/qK,EAAQuwB,IAGhBvwB,EAAQurK,kBAAkBvrK,EAAQuwB,SACN,WAAnBvwB,EAAQF,QACjBE,EAAQwrK,OAAO,SAAUxrK,EAAQuwB,KAGnCjgB,EAAQw6J,EACR,IAAIpN,EAAS+N,EAASpB,EAASvzK,EAAMkJ,GAErC,GAAoB,WAAhB09J,EAAO/lK,KAAmB,CAK5B,GAFA2Y,EAAQtQ,EAAQ8nE,KAAOijG,EAAoBW,EAEvChO,EAAOntI,MAAQ66I,EACjB,SAGF,MAAO,CACLhvK,MAAOshK,EAAOntI,IACdu3C,KAAM9nE,EAAQ8nE,MAES,UAAhB41F,EAAO/lK,OAChB2Y,EAAQy6J,EAGR/qK,EAAQF,OAAS,QACjBE,EAAQuwB,IAAMmtI,EAAOntI,OAnQPo7I,CAAiBtB,EAASvzK,EAAMkJ,GAC7C0qK,EAcT,SAASe,EAAS7zK,EAAIV,EAAKq5B,GACzB,IACE,MAAO,CACL54B,KAAM,SACN44B,IAAK34B,EAAG0E,KAAKpF,EAAKq5B,IAEpB,MAAO/J,KACP,MAAO,CACL7uB,KAAM,QACN44B,IAAK/J,MApBXxvB,EAAQunK,KAAOA,EAyBf,IAAIsM,EAAyB,iBACzBa,EAAyB,iBACzBZ,EAAoB,YACpBC,EAAoB,YAGpBK,EAAmB,GAKvB,SAASX,KAET,SAASmB,KAET,SAASC,KAIT,IAAIC,EAAoB,GAExBA,EAAkB7B,GAAkB,WAClC,OAAOthK,MAGT,IAAIojK,EAAWvwK,OAAO4uI,eAClB4hC,EAA0BD,GAAYA,EAASA,EAAS9mK,EAAO,MAE/D+mK,GAA2BA,IAA4BlC,GAAMC,EAAOztK,KAAK0vK,EAAyB/B,KAGpG6B,EAAoBE,GAGtB,IAAIC,EAAKJ,EAA2Bv0K,UAAYmzK,EAAUnzK,UAAYkE,OAAO2qH,OAAO2lD,GAMpF,SAASI,EAAsB50K,GAC7B,CAAC,OAAQ,QAAS,UAAUuE,SAAQ,SAAUiE,GAC5CxI,EAAUwI,GAAU,SAAUywB,GAC5B,OAAO5nB,KAAKiiK,QAAQ9qK,EAAQywB,OAqClC,SAAS47I,EAAczB,EAAW0B,GAChC,SAASC,EAAOvsK,EAAQywB,EAAKo2B,EAAS/4B,GACpC,IAAI8vI,EAAS+N,EAASf,EAAU5qK,GAAS4qK,EAAWn6I,GAEpD,GAAoB,UAAhBmtI,EAAO/lK,KAEJ,CACL,IAAIwG,EAASu/J,EAAOntI,IAChBn0B,EAAQ+B,EAAO/B,MAEnB,OAAIA,GAA6B,WAApB+/J,EAAS//J,IAAuB2tK,EAAOztK,KAAKF,EAAO,WACvDgwK,EAAYzlH,QAAQvqD,EAAMkwK,SAASpxJ,MAAK,SAAU9e,GACvDiwK,EAAO,OAAQjwK,EAAOuqD,EAAS/4B,MAC9B,SAAUpH,GACX6lJ,EAAO,QAAS7lJ,EAAKmgC,EAAS/4B,MAI3Bw+I,EAAYzlH,QAAQvqD,GAAO8e,MAAK,SAAUqxJ,GAI/CpuK,EAAO/B,MAAQmwK,EACf5lH,EAAQxoD,MACP,SAAU5D,GAGX,OAAO8xK,EAAO,QAAS9xK,EAAOosD,EAAS/4B,MAtBzCA,EAAO8vI,EAAOntI,KA2BlB,IAAIi8I,EA4BJ7jK,KAAKiiK,QA1BL,SAAiB9qK,EAAQywB,GACvB,SAASk8I,IACP,OAAO,IAAIL,GAAY,SAAUzlH,EAAS/4B,GACxCy+I,EAAOvsK,EAAQywB,EAAKo2B,EAAS/4B,MAIjC,OAAO4+I,EAYPA,EAAkBA,EAAgBtxJ,KAAKuxJ,EAEvCA,GAA8BA,KAyGlC,SAAStB,EAAoBF,EAAUjrK,GACrC,IAAIF,EAASmrK,EAAS7zK,SAAS4I,EAAQF,QAEvC,GAAIA,IAAW+D,EAAW,CAKxB,GAFA7D,EAAQirK,SAAW,KAEI,UAAnBjrK,EAAQF,OAAoB,CAE9B,GAAImrK,EAAS7zK,SAAiB,SAG5B4I,EAAQF,OAAS,SACjBE,EAAQuwB,IAAM1sB,EACdsnK,EAAoBF,EAAUjrK,GAEP,UAAnBA,EAAQF,QAGV,OAAOsrK,EAIXprK,EAAQF,OAAS,QACjBE,EAAQuwB,IAAM,IAAI8/B,UAAU,kDAG9B,OAAO+6G,EAGT,IAAI1N,EAAS+N,EAAS3rK,EAAQmrK,EAAS7zK,SAAU4I,EAAQuwB,KAEzD,GAAoB,UAAhBmtI,EAAO/lK,KAIT,OAHAqI,EAAQF,OAAS,QACjBE,EAAQuwB,IAAMmtI,EAAOntI,IACrBvwB,EAAQirK,SAAW,KACZG,EAGT,IAAIvxK,EAAO6jK,EAAOntI,IAElB,OAAK12B,EAODA,EAAKiuE,MAGP9nE,EAAQirK,EAASyB,YAAc7yK,EAAKuC,MAEpC4D,EAAQmwB,KAAO86I,EAAS0B,QAOD,WAAnB3sK,EAAQF,SACVE,EAAQF,OAAS,OACjBE,EAAQuwB,IAAM1sB,GASlB7D,EAAQirK,SAAW,KACZG,GANEvxK,GAxBPmG,EAAQF,OAAS,QACjBE,EAAQuwB,IAAM,IAAI8/B,UAAU,oCAC5BrwD,EAAQirK,SAAW,KACZG,GA+CX,SAASwB,EAAaC,GACpB,IAAIj9B,EAAQ,CACVk9B,OAAQD,EAAK,IAGX,KAAKA,IACPj9B,EAAMm9B,SAAWF,EAAK,IAGpB,KAAKA,IACPj9B,EAAMo9B,WAAaH,EAAK,GACxBj9B,EAAMq9B,SAAWJ,EAAK,IAGxBlkK,KAAKukK,WAAWvzK,KAAKi2I,GAGvB,SAASu9B,EAAcv9B,GACrB,IAAI8tB,EAAS9tB,EAAMw9B,YAAc,GACjC1P,EAAO/lK,KAAO,gBACP+lK,EAAOntI,IACdq/G,EAAMw9B,WAAa1P,EAGrB,SAASiN,EAAQJ,GAIf5hK,KAAKukK,WAAa,CAAC,CACjBJ,OAAQ,SAEVvC,EAAY1uK,QAAQ+wK,EAAcjkK,MAClCA,KAAKmjB,OAAM,GAgCb,SAAS7mB,EAAOooK,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAASpD,GAE9B,GAAIqD,EACF,OAAOA,EAAehxK,KAAK+wK,GAG7B,GAA6B,oBAAlBA,EAASl9I,KAClB,OAAOk9I,EAGT,IAAKz2J,MAAMy2J,EAAS70K,QAAS,CAC3B,IAAID,GAAK,EACL43B,EAAO,SAASA,IAClB,OAAS53B,EAAI80K,EAAS70K,QACpB,GAAIuxK,EAAOztK,KAAK+wK,EAAU90K,GAGxB,OAFA43B,EAAK/zB,MAAQixK,EAAS90K,GACtB43B,EAAK23C,MAAO,EACL33C,EAMX,OAFAA,EAAK/zB,MAAQyH,EACbssB,EAAK23C,MAAO,EACL33C,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CACLA,KAAM66I,GAMV,SAASA,IACP,MAAO,CACL5uK,MAAOyH,EACPikE,MAAM,GA+LV,OAplBA8jG,EAAkBt0K,UAAY20K,EAAG50K,YAAcw0K,EAC/CA,EAA2Bx0K,YAAcu0K,EACzCC,EAA2BzB,GAAqBwB,EAAkB2B,YAAc,oBAWhFv2K,EAAQw2K,oBAAsB,SAAUC,GACtC,IAAIC,EAAyB,oBAAXD,GAAyBA,EAAOp2K,YAClD,QAAOq2K,IAAOA,IAAS9B,GAEa,uBAAnC8B,EAAKH,aAAeG,EAAK70K,QAG5B7B,EAAQqnK,KAAO,SAAUoP,GAYvB,OAXIjyK,OAAOwqH,eACTxqH,OAAOwqH,eAAeynD,EAAQ5B,IAE9B4B,EAAOtuK,UAAY0sK,EAEbzB,KAAqBqD,IACzBA,EAAOrD,GAAqB,sBAIhCqD,EAAOn2K,UAAYkE,OAAO2qH,OAAO8lD,GAC1BwB,GAOTz2K,EAAQ22K,MAAQ,SAAUp9I,GACxB,MAAO,CACL+7I,QAAS/7I,IAmEb27I,EAAsBC,EAAc70K,WAEpC60K,EAAc70K,UAAU4yK,GAAuB,WAC7C,OAAOvhK,MAGT3R,EAAQm1K,cAAgBA,EAIxBn1K,EAAQ42K,MAAQ,SAAUvD,EAASC,EAASxzK,EAAMyzK,EAAa6B,QACzC,IAAhBA,IAAwBA,EAAcz+I,SAC1C,IAAIu0G,EAAO,IAAIiqC,EAAc5N,EAAK8L,EAASC,EAASxzK,EAAMyzK,GAAc6B,GACxE,OAAOp1K,EAAQw2K,oBAAoBlD,GAAWpoC,EAC5CA,EAAK/xG,OAAOjV,MAAK,SAAU/c,GAC3B,OAAOA,EAAO2pE,KAAO3pE,EAAO/B,MAAQ8lI,EAAK/xG,WAgK7C+7I,EAAsBD,GACtBA,EAAG7B,GAAqB,YAMxB6B,EAAGhC,GAAkB,WACnB,OAAOthK,MAGTsjK,EAAG1wK,SAAW,WACZ,MAAO,sBAsCTvE,EAAQyE,KAAO,SAAUC,GACvB,IAAID,EAAO,GAEX,IAAK,IAAIK,KAAOJ,EACdD,EAAK9B,KAAKmC,GAMZ,OAHAL,EAAK6oF,UAGE,SAASn0D,IACd,KAAO10B,EAAKjD,QAAQ,CAClB,IAAIsD,EAAML,EAAK6B,MAEf,GAAIxB,KAAOJ,EAGT,OAFAy0B,EAAK/zB,MAAQN,EACbq0B,EAAK23C,MAAO,EACL33C,EAQX,OADAA,EAAK23C,MAAO,EACL33C,IA0CXn5B,EAAQiO,OAASA,EASjB0lK,EAAQrzK,UAAY,CAClBD,YAAaszK,EACb7+I,MAAO,SAAe+hJ,GAYpB,GAXAllK,KAAKy4I,KAAO,EACZz4I,KAAKwnB,KAAO,EAGZxnB,KAAK0iK,KAAO1iK,KAAK2iK,MAAQznK,EACzB8E,KAAKm/D,MAAO,EACZn/D,KAAKsiK,SAAW,KAChBtiK,KAAK7I,OAAS,OACd6I,KAAK4nB,IAAM1sB,EACX8E,KAAKukK,WAAWrxK,QAAQsxK,IAEnBU,EACH,IAAK,IAAIh1K,KAAQ8P,KAEQ,MAAnB9P,EAAK6iD,OAAO,IAAcquH,EAAOztK,KAAKqM,KAAM9P,KAAU+d,OAAO/d,EAAKZ,MAAM,MAC1E0Q,KAAK9P,GAAQgL,IAKrBo7I,KAAM,WACJt2I,KAAKm/D,MAAO,EACZ,IACIgmG,EADYnlK,KAAKukK,WAAW,GACLE,WAE3B,GAAwB,UAApBU,EAAWn2K,KACb,MAAMm2K,EAAWv9I,IAGnB,OAAO5nB,KAAKolK,MAEdxC,kBAAmB,SAA2ByC,GAC5C,GAAIrlK,KAAKm/D,KACP,MAAMkmG,EAGR,IAAIhuK,EAAU2I,KAEd,SAASslK,EAAOC,EAAKC,GAYnB,OAXAzQ,EAAO/lK,KAAO,QACd+lK,EAAOntI,IAAMy9I,EACbhuK,EAAQmwB,KAAO+9I,EAEXC,IAGFnuK,EAAQF,OAAS,OACjBE,EAAQuwB,IAAM1sB,KAGPsqK,EAGX,IAAK,IAAI51K,EAAIoQ,KAAKukK,WAAW10K,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIq3I,EAAQjnI,KAAKukK,WAAW30K,GACxBmlK,EAAS9tB,EAAMw9B,WAEnB,GAAqB,SAAjBx9B,EAAMk9B,OAIR,OAAOmB,EAAO,OAGhB,GAAIr+B,EAAMk9B,QAAUnkK,KAAKy4I,KAAM,CAC7B,IAAIgtB,EAAWrE,EAAOztK,KAAKszI,EAAO,YAC9By+B,EAAatE,EAAOztK,KAAKszI,EAAO,cAEpC,GAAIw+B,GAAYC,EAAY,CAC1B,GAAI1lK,KAAKy4I,KAAOxR,EAAMm9B,SACpB,OAAOkB,EAAOr+B,EAAMm9B,UAAU,GACzB,GAAIpkK,KAAKy4I,KAAOxR,EAAMo9B,WAC3B,OAAOiB,EAAOr+B,EAAMo9B,iBAEjB,GAAIoB,GACT,GAAIzlK,KAAKy4I,KAAOxR,EAAMm9B,SACpB,OAAOkB,EAAOr+B,EAAMm9B,UAAU,OAE3B,KAAIsB,EAKT,MAAM,IAAI3zK,MAAM,0CAJhB,GAAIiO,KAAKy4I,KAAOxR,EAAMo9B,WACpB,OAAOiB,EAAOr+B,EAAMo9B,gBAQ9BxB,OAAQ,SAAgB7zK,EAAM44B,GAC5B,IAAK,IAAIh4B,EAAIoQ,KAAKukK,WAAW10K,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIq3I,EAAQjnI,KAAKukK,WAAW30K,GAE5B,GAAIq3I,EAAMk9B,QAAUnkK,KAAKy4I,MAAQ2oB,EAAOztK,KAAKszI,EAAO,eAAiBjnI,KAAKy4I,KAAOxR,EAAMo9B,WAAY,CACjG,IAAIsB,EAAe1+B,EACnB,OAIA0+B,IAA0B,UAAT32K,GAA6B,aAATA,IAAwB22K,EAAaxB,QAAUv8I,GAAOA,GAAO+9I,EAAatB,aAGjHsB,EAAe,MAGjB,IAAI5Q,EAAS4Q,EAAeA,EAAalB,WAAa,GAItD,OAHA1P,EAAO/lK,KAAOA,EACd+lK,EAAOntI,IAAMA,EAET+9I,GACF3lK,KAAK7I,OAAS,OACd6I,KAAKwnB,KAAOm+I,EAAatB,WAClB5B,GAGFziK,KAAK4lK,SAAS7Q,IAEvB6Q,SAAU,SAAkB7Q,EAAQuP,GAClC,GAAoB,UAAhBvP,EAAO/lK,KACT,MAAM+lK,EAAOntI,IAaf,MAVoB,UAAhBmtI,EAAO/lK,MAAoC,aAAhB+lK,EAAO/lK,KACpCgR,KAAKwnB,KAAOutI,EAAOntI,IACM,WAAhBmtI,EAAO/lK,MAChBgR,KAAKolK,KAAOplK,KAAK4nB,IAAMmtI,EAAOntI,IAC9B5nB,KAAK7I,OAAS,SACd6I,KAAKwnB,KAAO,OACa,WAAhButI,EAAO/lK,MAAqBs1K,IACrCtkK,KAAKwnB,KAAO88I,GAGP7B,GAET1X,OAAQ,SAAgBsZ,GACtB,IAAK,IAAIz0K,EAAIoQ,KAAKukK,WAAW10K,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIq3I,EAAQjnI,KAAKukK,WAAW30K,GAE5B,GAAIq3I,EAAMo9B,aAAeA,EAGvB,OAFArkK,KAAK4lK,SAAS3+B,EAAMw9B,WAAYx9B,EAAMq9B,UACtCE,EAAcv9B,GACPw7B,IAIb,MAAS,SAAgB0B,GACvB,IAAK,IAAIv0K,EAAIoQ,KAAKukK,WAAW10K,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAIq3I,EAAQjnI,KAAKukK,WAAW30K,GAE5B,GAAIq3I,EAAMk9B,SAAWA,EAAQ,CAC3B,IAAIpP,EAAS9tB,EAAMw9B,WAEnB,GAAoB,UAAhB1P,EAAO/lK,KAAkB,CAC3B,IAAI62K,EAAS9Q,EAAOntI,IACpB48I,EAAcv9B,GAGhB,OAAO4+B,GAMX,MAAM,IAAI9zK,MAAM,0BAElB+zK,cAAe,SAAuBpB,EAAUX,EAAYC,GAa1D,OAZAhkK,KAAKsiK,SAAW,CACd7zK,SAAU6N,EAAOooK,GACjBX,WAAYA,EACZC,QAASA,GAGS,SAAhBhkK,KAAK7I,SAGP6I,KAAK4nB,IAAM1sB,GAGNunK,IAOJp0K,EAvqBK,CA4qBPD,EAAOC,SAEd,IACE03K,mBAAqB7E,EACrB,MAAO8E,GAUPra,SAAS,IAAK,yBAAdA,CAAwCuV,KAO5C,UAMA,SAAmB9yK,GACjB,aAEAA,EAAOC,QAAUolK,GAKnB,WAMA,SAAiBrlK,GACf,aAEAA,EAAOC,QAAUm/J,IAajB9S,EAA2B,GAQ/B,SAAS3d,EAAoB6d,GAK3B,IAAIC,EAAeH,EAAyBE,GAG5C,QAAqB1/I,IAAjB2/I,EAEF,OAAOA,EAAaxsJ,QAStB,IAAID,EAASssJ,EAAyBE,GAAY,CAQhDvsJ,QAAS,IAoBX,OATAyuI,EAAoB8d,GAAUjnJ,KAAKvF,EAAOC,QAASD,EAAQA,EAAOC,QAAS0uI,GASpE3uI,EAAOC,QAmBd0uI,EAAoB5+C,EAAI,SAAU9vF,EAASgiK,GAEzC,IAAK,IAAIl9J,KAAOk9J,EAEVtzB,EAAoBl3F,EAAEwqH,EAAYl9J,KAAS4pI,EAAoBl3F,EAAEx3C,EAAS8E,IAE5EN,OAAO2Q,eAAenV,EAAS8E,EAAK,CAClC04C,YAAY,EACZrrC,IAAK6vJ,EAAWl9J,MAwBxB4pI,EAAoBjC,EAAI,WAEtB,GAAiF,YAAtD,qBAAf5sC,WAA6B,YAAcslE,EAAStlE,aAA2B,OAAOA,WAGlG,IAEE,OAAOluF,MAAQ,IAAI2rJ,SAAS,cAAb,GAEf,MAAO13J,GAEP,GAAyE,YAAlD,qBAAXhG,OAAyB,YAAculK,EAASvlK,SAAuB,OAAOA,QAXtE,GA+BxB8uI,EAAoBl3F,EAAI,SAAUt3C,EAAKuF,GACrC,OAAOjB,OAAOlE,UAAUmD,eAAe6B,KAAKpF,EAAKuF,IAmBnDipI,EAAoBzqF,EAAI,SAAUjkD,GAEV,qBAAXG,QAA0BA,OAAO05J,aAE1Cr1J,OAAO2Q,eAAenV,EAASG,OAAO05J,YAAa,CACjDz0J,MAAO,WAOXZ,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,KAYb,IAAIknJ,EAAsB,GAy/C1B,OAv/CA,WACE,aAEA,IAAItsJ,EAAUssJ,EAKV1d,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ43K,YAAS,EAEjB,IAAIppC,EAAWI,EAAuBF,EAEtC,oDAEIi3B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEImpC,EAA0BjpC,EAAuBF,EAErD,mEAEIm3B,EAAQj3B,EAAuBF,EAEnC,iDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEIopC,EAAoBlpC,EAAuBF,EAE/C,2CAEIqpC,EAAgBnpC,EAAuBF,EAE3C,uCAEIspC,EAAgBppC,EAAuBF,EAE3C,uCAEIupC,EAAgBrpC,EAAuBF,EAE3C,uCAEIwpC,EAAgBtpC,EAAuBF,EAE3C,uCAEIypC,EAAmBvpC,EAAuBF,EAE9C,0CAEI0pC,EAA0BxpC,EAAuBF,EAErD,mDAEIwzB,EAAStzB,EAAuBF,EAEpC,sBAEI2pC,EAAWzpC,EAAuBF,EAEtC,yBAEI2zB,EAAYzzB,EAAuBF,EAEvC,yBAEI0zB,EAAcxzB,EAAuBF,EAEzC,kCAEI4pC,EAAe1pC,EAAuBF,EAE1C,mCAEI6pC,EAAkB3pC,EAAuBF,EAE7C,sCAEI8pC,EAAiB9pC,EAErB,oCAEI+pC,EAAgB/pC,EAEpB,oCAEIo/B,EAAcp/B,EAElB,kCAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAAIqxD,EAASgpG,EAAO1yB,QAAQ/2E,UAAU,UAElCv1C,EAASg/I,EAAO1yB,QAAQhxH,aAAa,UAErC46J,EAAO,OAEPd,EAAS,SAAUjV,IACrB,EAAImD,EAAWh3B,SAAS8oC,EAAQjV,GAEhC,IAAInvB,EAASnB,EAAaulC,GAE1B,SAASA,EAAOlnK,EAAQR,GACtB,IAAI4G,GAEJ,EAAI6uJ,EAAiB72B,SAASn9H,KAAMimK,GACpC9gK,EAAQ08H,EAAOluI,KAAKqM,KAAMjB,EAAQR,GAElCsS,EAAOliB,UAAUwa,KAAO,WACtB,IAAImjC,EAAStsC,KAAK23C,SAAS,QAM3B,YAJez8C,IAAXoxC,GAA+C,oBAAhBA,EAAO/5B,MACxC+5B,EAAO/5B,KAAK,MAAM,SAAUte,OAGvBq4C,GAGTvtC,EAAO7F,SAAS,cAEhBiM,EAAM6hK,cAEN7hK,EAAM8hK,aAEF1oK,EAAQi0B,YAA4C,oBAAvBj0B,EAAQi0B,WACvCrtB,EAAM+jD,cAAc3qD,EAAQi0B,YAE5BrtB,EAAM+jD,eAAc,SAAUl3B,EAASC,GACrC,OAAO,EAAIw+H,EAAYtzB,SAASnrG,EAASC,EAAO9sB,EAAM2oJ,wBAI1D,IAAIoZ,EAAa,UAEjB,OAAQ/hK,EAAMy4J,iBACZ,KAAKzB,EAAYJ,WACjB,KAAKI,EAAYN,WACjB,KAAKM,EAAYR,UACfuL,EAAa,aACb,MAEF,KAAK/K,EAAYL,WACfoL,EAAa,aACb,MAEF,KAAK/K,EAAYT,YACfwL,EAAa,cACb,MAEF,KAAK/K,EAAYV,aACfyL,EAAa,UAIjBb,EAAclpC,QAAQxuI,UAAUoe,cAAgB,WAC9C,MAAO,qDAAuDm6J,GAGhEnoK,EAAOooK,aAAe,IAAId,EAAclpC,QAAQp+H,EAAQR,GACxDQ,EAAO8M,SAAS9M,EAAOooK,cACvBpoK,EAAOqoK,gBAAkB,IAAIZ,EAAiBrpC,QAAQp+H,EAAQR,GAC9DQ,EAAOqoK,gBAAgB/5J,OACvBtO,EAAO8M,SAAS9M,EAAOqoK,iBACvBroK,EAAOsoK,aAAe,IAAIjB,EAAcjpC,QAAQp+H,EAAQR,GACxDQ,EAAOsoK,aAAah6J,OACpBtO,EAAO8M,SAAS9M,EAAOsoK,cACvBtoK,EAAOuoK,iBAAmB,IAAInB,EAAkBhpC,QAAQp+H,EAAQR,GAChEQ,EAAOuoK,iBAAiBj6J,OACxBtO,EAAO8M,SAAS9M,EAAOuoK,kBACvBvoK,EAAOugK,aAAe,IAAIgH,EAAcnpC,QAAQp+H,EAAQR,GACxDQ,EAAOugK,aAAajyJ,OACpBtO,EAAOwgK,aAAe,IAAIgH,EAAcppC,QAAQp+H,EAAQR,GACxDQ,EAAOwgK,aAAalyJ,OACpB,IAAIk6J,OAAwCrsK,IAA3B20J,EAAO1yB,QAAQr2E,UAA4F,KAAnE,EAAI8/G,EAAgBzpC,SAAS0yB,EAAO1yB,QAAQr2E,QAAS,SAgB9G,GAdM,4BAA6B7wD,WACjCkP,EAAMq6J,kBAAmB,IAGI,IAA3Br6J,EAAMq6J,mBACJ+H,IACFxoK,EAAO0gK,UAAY,IAAIgH,EAAwBtpC,QAAQp+H,EAAQR,GAC/DQ,EAAO0gK,UAAUpyJ,QAGnBlI,EAAMqiK,kBAAoBriK,EAAMsiK,WAAWhjK,MAAK,EAAIyhK,EAAwB/oC,SAASh4H,IACrFA,EAAMuiK,kBAAoBviK,EAAMwiK,WAAWljK,MAAK,EAAIyhK,EAAwB/oC,SAASh4H,KAGnFA,EAAMpG,OAAOwK,SAAS49B,WAAY,CACpC,IAAIygI,EAAmB,CAAC,eAAgB,kBAAmB,eAAgB,gBAEvE7oK,EAAO0gK,WACTmI,EAAiB52K,KAAK,aAGxB42K,EAAiB10K,SAAQ,SAAU2F,QACiBqC,IAA9CiK,EAAMpG,OAAOwK,SAAS49B,WAAWtuC,KACnCsM,EAAMpG,OAAOlG,GAASg8J,eAAgB,EAEtC1vJ,EAAMpG,OAAOlG,GAASwU,WAO5B,OAFAlI,EAAMpG,OAAOoF,IAAIosJ,EAAOpzB,QAAQ4wB,MAAO5oJ,EAAM0iK,QAAQpjK,MAAK,EAAIyhK,EAAwB/oC,SAASh4H,KAExFA,EAiuCT,OA9tCA,EAAI8uJ,EAAc92B,SAAS8oC,EAAQ,CAAC,CAClC9yK,IAAK,cACLM,MAAO,WACL,IAAIikE,EAAanqE,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,GAEjFu6K,EAAgBjY,EAAO1yB,QAAQr0E,aAAa4nG,EAAUvzB,QAASn9H,KAAKjB,OAAOwK,SAASysC,QAAQ++G,OAAQr9F,GAExG13D,KAAK+nK,YAAcD,EAAcxR,MACjCt2J,KAAKgoK,YAAcF,EAAc3nJ,MACjCngB,KAAKioK,YAAcH,EAAcvnJ,MACjCvgB,KAAKkoK,gBAAkBJ,EAAcvR,UACrCv2J,KAAKmoK,aAAeL,EAAc91B,OAClChyI,KAAKw2J,UAAYsR,EAActR,UAC/Bx2J,KAAKy2J,YAAcqR,EAAcrR,YACjCz2J,KAAK8tJ,oBAAsBga,EAAcha,oBACzC9tJ,KAAKtO,MAAQo2K,EAAcp2K,MAC3BsO,KAAKw/J,iBAAmBsI,EAAclR,IACtC52J,KAAKooK,gBAAkBN,EAAc1P,UACrCp4J,KAAK62J,eAAiBiR,EAAcjR,eACpC72J,KAAK04J,qBAAuBoP,EAAcpP,qBAC1C14J,KAAKqoK,gBAAkBP,EAAcpR,WACrC12J,KAAKsoK,iBAAmBR,EAAcnR,YACtC32J,KAAKg3J,eAAiB8Q,EAAc9Q,eACpCh3J,KAAK82J,aAAegR,EAAchR,aAClC92J,KAAK+2J,YAAc+Q,EAAc/Q,YACjC/2J,KAAKk3J,kBAAoB4Q,EAAc5Q,kBACvCl3J,KAAKi3J,cAAgB6Q,EAAc7Q,cACnCj3J,KAAKm3J,eAAiB2Q,EAAc3Q,eACpCn3J,KAAKo3J,oBAAsB0Q,EAAc1Q,oBACzCp3J,KAAKq4J,cAAgByP,EAAczP,cACnCr4J,KAAKw4J,YAAcsP,EAActP,YACjCx4J,KAAKs4J,iBAAmBwP,EAAcxP,iBACtCt4J,KAAKu4J,eAAiBuP,EAAcvP,eACpCv4J,KAAKq3J,YAAcyQ,EAAczQ,YACjCr3J,KAAKs3J,kBAAoBwQ,EAAcxQ,kBACvCt3J,KAAK43J,eAAiBkQ,EAAclQ,eACpC53J,KAAK63J,oBAAsBiQ,EAAcjQ,oBACzC73J,KAAKw3J,gBAAkBsQ,EAActQ,gBACrCx3J,KAAKy3J,gBAAkBqQ,EAAcrQ,gBACrCz3J,KAAK03J,aAAeoQ,EAAcpQ,aAClC13J,KAAK23J,cAAgBmQ,EAAcnQ,cACnC33J,KAAKu3J,cAAgBuQ,EAAcvQ,cACnCv3J,KAAK83J,kBAAoBgQ,EAAchQ,kBACvC93J,KAAKi4J,gBAAkB6P,EAAc7P,gBACrCj4J,KAAKk4J,kBAAoB4P,EAAc5P,kBACvCl4J,KAAKm4J,mBAAqB2P,EAAc3P,mBACxCn4J,KAAK+3J,mBAAqB+P,EAAc/P,mBACxC/3J,KAAKg4J,iBAAmB8P,EAAc9P,mBAEvC,CACD7kK,IAAK,UACLM,MAAO,WACL,IAAImT,EAAS5G,KA2Bb,OAzBAA,KAAKjB,OAAOooC,WAAWt7B,SAAS7L,KAAKjB,OAAOugK,cAC5Ct/J,KAAKjB,OAAOooC,WAAWtzC,KAAK6E,aAAasH,KAAKjB,OAAOugK,aAAazrK,KAAMmM,KAAKjB,OAAOooC,WAAWtzC,KAAK4E,YACpGuH,KAAKjB,OAAOooC,WAAWtzC,KAAK6E,aAAasH,KAAKjB,OAAOwgK,aAAa1rK,KAAMmM,KAAKjB,OAAOooC,WAAWtzC,KAAK4E,aAEtE,IAA1BuH,KAAKw/J,sBAC+CtkK,IAAlD8E,KAAKjB,OAAOooC,WAAWsqH,6BAAkEv2J,IAA1B8E,KAAKjB,OAAO0gK,UAC7Ez/J,KAAKjB,OAAOooC,WAAWt7B,SAAS7L,KAAKjB,OAAO0gK,gBACevkK,IAAlD8E,KAAKjB,OAAOooC,WAAWsqH,yBAChCzxJ,KAAKjB,OAAO0gK,UAAYz/J,KAAKjB,OAAOooC,WAAWsqH,uBAC/CzxJ,KAAKjB,OAAO0gK,UAAUpyJ,SAEW,IAA1BrN,KAAKw/J,uBAAgFtkK,IAAlD8E,KAAKjB,OAAOooC,WAAWsqH,wBACnEzxJ,KAAKjB,OAAOooC,WAAWsqH,uBAAuBpkJ,YAGInS,IAAhD8E,KAAKjB,OAAOooC,WAAWxT,uBACzB3zB,KAAKjB,OAAOooC,WAAWxT,qBAAqB9/B,KAAK4L,MAAMyiI,QAAU,aAGxBhnI,IAAvC8E,KAAKjB,OAAOooC,WAAWohI,cACzBvoK,KAAKjB,OAAOooC,WAAWohI,YAAY10K,KAAK4L,MAAMyiI,QAAU,QAG1DliI,KAAKjB,OAAOm6C,MAAK,GAETl5C,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAShvJ,KAAKjB,OAAO+sJ,aAC1B9rJ,KAAKgvJ,OAAO9lG,cAAclpD,KAAKywJ,aAC/B,MAEF,KAAK0L,EAAYJ,WACjB,KAAKI,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYR,UACjB,KAAKQ,EAAYT,YACjB,KAAKS,EAAYV,kBACmBvgK,IAA9B8E,KAAKjB,OAAOsyJ,eACdrxJ,KAAKjB,OAAOsyJ,cAAchkJ,OAG5BrN,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQqhC,gBAAgB,WAC7C53J,EAAOqxG,YAAYrxG,EAAO4vJ,cAE5Bx2J,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQshC,WAAW,WACxC73J,EAAOqxG,YAAYrxG,EAAO4vJ,eAGa,IAArCx2J,KAAKjB,OAAOqkD,2BACgBloD,IAA1B8E,KAAKjB,OAAO6e,MAAMnW,MACpBzH,KAAKjB,OAAO6e,MAAMnW,IAAI2N,UAAW,GAIrCpV,KAAKjB,OAAO87C,+BAER76C,KAAKjB,OAAOwK,SAAS6L,gBACwBla,IAA3C8E,KAAKjB,OAAOooC,WAAWqqH,iBACzBxxJ,KAAKjB,OAAOooC,WAAWqqH,gBAAgBnkJ,OAGzCrN,KAAKjB,OAAOkE,GAAGstJ,EAAOpzB,QAAQuhC,cAAc,SAAU3iK,GACpD6K,EAAO7H,OAAOy3C,YAAW,MAE3Bx2C,KAAKjB,OAAOooC,WAAW/5B,OACvBpN,KAAKjB,OAAOooC,WAAWtzC,KAAK4L,MAAMyiI,QAAU,QAalD,GAPAliI,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQ+wB,YAC/BluJ,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQwhC,gBAC/B3+J,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQqhC,gBAC/Bx+J,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQshC,WAC/Bz+J,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQgxB,OAC/BnuJ,KAAKi4G,YAAYj4G,KAAKw2J,WAElBx2J,KAAKjB,OAAOwK,SAASysC,QAAQ++G,QAAU/0J,KAAKjB,OAAOwK,SAASysC,QAAQ++G,OAAO0D,UAA2D,IAAhDz4J,KAAKjB,OAAOwK,SAASysC,QAAQ++G,OAAO0D,QAAmB,CAC/I,IAAIhyI,EAAUzmB,KAAKjB,OAAOwK,SAASysC,QAAQ++G,OAAO0D,SAElC,IAAZhyI,IACFA,EAAUigJ,EAASvpC,SAGrBn9H,KAAKjB,OAAOwK,SAASszC,YAAc,CACjCmD,QAASv5B,QAI6BvrB,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YACzBtxB,KAAKjB,OAAOooC,WAAW7V,WAAWjkB,SAGrC,CACDla,IAAK,cACLM,MAAO,WACL,OAAOuM,KAAKwoK,aAEb,CACDr1K,IAAK,eACLM,MAAO,WACL,OAAOuM,KAAKyoK,cAEb,CACDt1K,IAAK,cACLM,MAAO,WACL,IAAIm5I,EAA4B,OAAhB5sI,KAAKjB,OAMrB,OAJkB,IAAd6tI,IACFA,EAAuC,OAA3B5sI,KAAKjB,OAAOsM,YAGnBuhI,IAER,CACDz5I,IAAK,YACLM,MAAO,WACL,IAAIuT,EAAShH,KAkBb,QAhBiC9E,IAA7B8E,KAAK0oK,sBACP1oK,KAAK0oK,oBAAsB1oK,KAAK2oK,cAAclkK,KAAKzE,YAGpB9E,IAA7B8E,KAAK4oK,sBACP5oK,KAAK4oK,oBAAsB5oK,KAAK6oK,cAAcpkK,KAAKzE,YAGrB9E,IAA5B8E,KAAK8oK,qBACP9oK,KAAK8oK,mBAAqB9oK,KAAK+oK,iBAAiBtkK,KAAKzE,YAGpB9E,IAA/B8E,KAAKgpK,wBACPhpK,KAAKgpK,sBAAwBhpK,KAAKipK,gBAAgBxkK,KAAKzE,OAGrDA,KAAK49J,kBAAoBzB,EAAYT,aAAe17J,KAAK49J,kBAAoBzB,EAAYV,cAC3F,QAA+BvgK,IAA3B7G,UAAUg1J,mBAAyEnuJ,IAA3C7G,UAAUg1J,aAAa6f,gBAEjE,YADAlpK,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAO,6EAI5C,QAA+B/kB,IAA3B7G,UAAUg1J,mBAAsEnuJ,IAAxC7G,UAAUg1J,aAAaC,aAEjE,YADAtpJ,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAO,qEAK9C,OAAQjgB,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKqwD,UAAY,CACflwC,MAAOngB,KAAKs3J,oBAAsByP,GAAc/mK,KAAKs3J,kBACrD/2I,OAAO,GAETvgB,KAAKgvJ,OAAOA,OAAO8C,WAAWrlB,GAAG8jB,EAAOpzB,QAAQsxB,aAAczuJ,KAAK0oK,qBACnE1oK,KAAKgvJ,OAAOA,OAAO8C,WAAWrlB,GAAG8jB,EAAOpzB,QAAQuxB,aAAc1uJ,KAAK4oK,qBACnE5oK,KAAKgvJ,OAAOA,OAAO8C,WAAW7uJ,GAAGstJ,EAAOpzB,QAAQsxB,aAAczuJ,KAAK0oK,qBACnE1oK,KAAKgvJ,OAAOA,OAAO8C,WAAW7uJ,GAAGstJ,EAAOpzB,QAAQuxB,aAAc1uJ,KAAK4oK,qBACnE5oK,KAAKgvJ,OAAOqD,qBAAoB,GAChCryJ,KAAKgvJ,OAAOmC,UAAW,EACvBnxJ,KAAKgvJ,OAAOA,OAAO8C,WAAW98I,QAAS,EAEK,cAAxChV,KAAKgvJ,OAAOA,OAAOzd,QAAQ3U,GAAGj1H,OAChC3H,KAAKgvJ,OAAOA,OAAOzd,QAAQ3U,GAAG0d,UAGD,IAA3Bt6I,KAAK83J,oBACP93J,KAAKgvJ,OAAOA,OAAO8C,WAAW9F,qBAAuB,SAAUjwJ,GACxDiL,EAAOgoJ,OAAOA,OAAO8C,WAAW98I,SACnChO,EAAOgoJ,OAAOA,OAAOh5I,QAErBhP,EAAOgoJ,OAAOA,OAAO5Z,kBAAkBr5I,EAAMsuJ,aAE7CrjJ,EAAOjI,OAAOw8J,aAAex/J,EAAMsuJ,YAEnCrjJ,EAAOjI,OAAO+E,QAAQysJ,EAAOpzB,QAAQ8hC,wBAK3Cj/J,KAAKgvJ,OAAOA,OAAO8C,WAAWrgJ,QAC9B,MAEF,KAAK0qJ,EAAYJ,WACjB,KAAKI,EAAYN,WACX77J,KAAK49J,kBAAoBzB,EAAYJ,YACvC/7J,KAAKjB,OAAOlL,KAAK4E,WAAW6G,iBAAiBixJ,EAAOpzB,QAAQwZ,QAAS32I,KAAKgpK,uBAG5EhpK,KAAKqwD,UAAY,CACflwC,OAAO,EACPI,MAAOvgB,KAAKk3J,oBAAsB6P,GAAc/mK,KAAKk3J,mBAEvD7iK,UAAUg1J,aAAaC,aAAa,CAClCnpI,OAAO,EACPI,MAAOvgB,KAAK49J,kBAAoBzB,EAAYJ,WAAa/7J,KAAK+nK,YAAc/nK,KAAKioK,cAChF11J,KAAKvS,KAAK2oK,cAAclkK,KAAKzE,OAAO8uI,MAAM9uI,KAAK6oK,cAAcpkK,KAAKzE,OACrE,MAEF,KAAKm8J,EAAYV,aACfz7J,KAAKqwD,UAAY,CACflwC,MAAOngB,KAAKs3J,oBAAsByP,GAAc/mK,KAAKs3J,kBACrD/2I,MAAOvgB,KAAKk3J,oBAAsB6P,GAAc/mK,KAAKk3J,mBAEvD,IAAIiS,EAAyB,IAEH,IAAtBnpK,KAAKmoK,aACPgB,EAAyB,CACvB5oJ,OAAO,GAE6C,YAA7C,EAAIs8G,EAASM,SAASn9H,KAAKmoK,eAA8BnoK,KAAKmoK,aAAaz5K,cAAgBmE,SACpGs2K,EAAyBnpK,KAAKmoK,cAGhC9zK,UAAUg1J,aAAa6f,gBAAgBC,GAAwB52J,MAAK,SAAU62J,GAC5E/0K,UAAUg1J,aAAaC,aAAa,CAClCnpI,MAAOnZ,EAAOghK,cACbz1J,MAAK,SAAU82J,GAChBD,EAAa1xJ,SAAS2xJ,EAAI19E,YAAY,IAEtC3kF,EAAO2hK,cAAclkK,KAAKuC,EAA1BA,CAAkCoiK,MACjCt6B,OAAM,SAAUlkI,GACbw+J,EAAanqJ,QACfmqJ,EAAa9yB,OAGftvI,EAAO6hK,cAAcj+J,SAEtBkkI,MAAM9uI,KAAK6oK,cAAcpkK,KAAKzE,OACjC,MAEF,KAAKm8J,EAAYP,YACf57J,KAAKqwD,UAAY,CACflwC,MAAOngB,KAAKs3J,oBAAsByP,GAAc/mK,KAAKs3J,kBACrD/2I,MAAOvgB,KAAKk3J,oBAAsB6P,GAAc/mK,KAAKk3J,mBAEvD7iK,UAAUg1J,aAAaC,aAAa,CAClCnpI,MAAOngB,KAAKgoK,YACZznJ,MAAOvgB,KAAKioK,cACX11J,KAAKvS,KAAK2oK,cAAclkK,KAAKzE,OAAO8uI,MAAM9uI,KAAK6oK,cAAcpkK,KAAKzE,OACrE,MAEF,KAAKm8J,EAAYR,UACf37J,KAAKqwD,UAAY,CACflwC,OAAO,EACPI,OAAO,EACPgK,KAAK,GAEPl2B,UAAUg1J,aAAaC,aAAa,CAClCnpI,OAAO,EACPI,MAAOvgB,KAAKkoK,kBACX31J,KAAKvS,KAAK2oK,cAAclkK,KAAKzE,OAAO8uI,MAAM9uI,KAAK6oK,cAAcpkK,KAAKzE,OACrE,MAEF,KAAKm8J,EAAYT,YACf17J,KAAKqwD,UAAY,CACflwC,OAAO,EACPI,OAAO,EACPyxH,QAAQ,EACRznH,KAAK,GAEP,IAAI++I,EAAwB,IAEF,IAAtBtpK,KAAKmoK,aACPmB,EAAwB,CACtB/oJ,OAAO,GAE6C,YAA7C,EAAIs8G,EAASM,SAASn9H,KAAKmoK,eAA8BnoK,KAAKmoK,aAAaz5K,cAAgBmE,SACpGy2K,EAAwBtpK,KAAKmoK,cAG/B9zK,UAAUg1J,aAAa6f,gBAAgBI,GAAuB/2J,KAAKvS,KAAK2oK,cAAclkK,KAAKzE,OAAO8uI,MAAM9uI,KAAK6oK,cAAcpkK,KAAKzE,UAIrI,CACD7M,IAAK,gBACLM,MAAO,SAAuB4xE,GAC5B,IAAIr1D,EAAShQ,KAoBb,GAlBAA,KAAKupK,eAAgB,OAEDruK,IAAhB8E,KAAKqlE,QAAwBrlE,KAAKqlE,OAAOpmD,QAC3Cjf,KAAKqlE,OAAOixE,OAGdt2I,KAAKqlE,OAASA,EACdrlE,KAAKjB,OAAOooK,aAAa95J,OACzBrN,KAAKi4G,YAAYj4G,KAAKw2J,WACtBx2J,KAAKyjB,eAAe,QAEsBvoB,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YACzBtxB,KAAKjB,OAAOooC,WAAW7V,WAAWjkB,OAGpCrN,KAAKvO,IAAIuO,KAAKjB,OAAQwxJ,EAAOpzB,QAAQ+wB,WAAYluJ,KAAKwpK,oBACtDxpK,KAAKvO,IAAIuO,KAAKjB,OAAQwxJ,EAAOpzB,QAAQgxB,MAAOnuJ,KAAKwpK,oBAE7CxpK,KAAK49J,kBAAoBzB,EAAYJ,WAAY,CACnD,GAAI/7J,KAAK49J,kBAAoBzB,EAAYL,aAAc,EAAIgL,EAAcrN,qBAAqBz5J,KAAKq3J,aACjG,MAAM,IAAItlK,MAAM,aAAeiO,KAAKq3J,YAAc,0CAGpD,IAAIoS,EAAaC,EAET1pK,KAAK49J,kBACNzB,EAAYL,YACf2N,GAAc,EAAI3C,EAAcpN,gBAAgB15J,KAAKq3J,aACrDqS,EAAa1pK,KAAKq3J,cAIlBoS,GAAc,EAAI3C,EAActN,gBAAgBx5J,KAAK+2J,aACrD2S,EAAa1pK,KAAK+2J,aAGtB,IACE/2J,KAAKw8J,OAAS,IAAIiN,EAAYzpK,KAAKjB,OAAQiB,KAAKjB,OAAOwK,UACvD,MAAOsU,KACP,MAAM,IAAI9rB,MAAM,kBAAoB23K,EAAa,WA0CnD,GAvCA1pK,KAAKw8J,OAAOv5J,GAAGstJ,EAAOpzB,QAAQq+B,gBAAiBx7J,KAAK8oK,oBACpD9oK,KAAKw8J,OAAO3+E,WAAa79E,KAAKw3J,gBAC9Bx3J,KAAKw8J,OAAOjwF,WAAavsE,KAAKy3J,gBAC9Bz3J,KAAKw8J,OAAOM,QAAU98J,KAAK03J,aAC3B13J,KAAKw8J,OAAO7E,cAAgB33J,KAAK23J,cACjC33J,KAAKw8J,OAAO5E,eAAiB53J,KAAK43J,eAClC53J,KAAKw8J,OAAO3E,oBAAsB73J,KAAK63J,oBACvC73J,KAAKw8J,OAAOG,SAAW,CACrBp8I,MAAOvgB,KAAKi3J,cACZ1sI,IAAK,aAGoB,OAAvBvqB,KAAKu3J,eAA0Bv3J,KAAKu3J,gBAAkBwP,IACxD/mK,KAAKw8J,OAAOG,SAASx8I,MAAQngB,KAAKu3J,eAGpCv3J,KAAKw8J,OAAOrF,eAAiBn3J,KAAKm3J,eAClCn3J,KAAKw8J,OAAOpF,oBAAsBp3J,KAAKo3J,oBACvCp3J,KAAKw8J,OAAO1F,aAAe92J,KAAK82J,aAChC92J,KAAKw8J,OAAOxF,eAAiBh3J,KAAKg3J,eAClCh3J,KAAKw8J,OAAOj8I,MAAQ,CAClBnlB,MAAO4E,KAAKqoK,gBACZltK,OAAQ6E,KAAKsoK,kBAEftoK,KAAKw8J,OAAOx+B,OAAS,CACnB5iI,MAAO4E,KAAKqoK,gBACZltK,OAAQ6E,KAAKsoK,kBAEftoK,KAAKw8J,OAAO18B,QAAU9/H,KAAKg4J,iBAC3Bh4J,KAAKw8J,OAAOO,UAAY/8J,KAAK+3J,mBAEzB/3J,KAAKooK,iBAAmBpoK,KAAKooK,gBAAkB,IACjDpoK,KAAKw8J,OAAOpE,UAAYp4J,KAAKooK,gBAC7BpoK,KAAKw8J,OAAO/F,YAAcz2J,KAAKy2J,aAGjCz2J,KAAKw8J,OAAO9D,qBAAuB14J,KAAK04J,qBACxC14J,KAAKw8J,OAAOmN,MAAM3pK,KAAKqlE,OAAQrlE,KAAKqwD,UAAWrwD,KAAKtO,OAEzB,KAAvBsO,KAAKq4J,cAAsB,CAC7B,IAAI2C,GAAqB,EAAI8L,EAAcvN,kBAAkBv5J,KAAKq4J,eAElE,IACEr4J,KAAK4pK,UAAY,IAAI5O,EAAmBh7J,KAAKjB,OAAQiB,KAAKjB,OAAOwK,UACjE,MAAOsU,KACP,MAAM,IAAI9rB,MAAM,kBAAoBiO,KAAKq4J,cAAgB,WAG3Dr4J,KAAK4pK,UAAUpR,YAAcx4J,KAAKw4J,YAClCx4J,KAAK4pK,UAAUtR,iBAAmBt4J,KAAKs4J,iBACvCt4J,KAAK4pK,UAAUrR,eAAiBv4J,KAAKu4J,eACrCv4J,KAAK4pK,UAAUlR,qBAAuB14J,KAAK04J,qBAC3C14J,KAAK4pK,UAAUD,MAAM3pK,KAAKqwD,UAAWrwD,KAAKtO,OAG3B,CAAC,qBAAsB,cAAe,mBAC5CwB,SAAQ,SAAU2F,QAGXqC,KAFhBrC,EAAUmX,EAAOjR,OAAOooC,WAAWtuC,MAGjCA,EAAQhF,KAAK4L,MAAMyiI,QAAU,QAC7BrpI,EAAQuU,WAGZpN,KAAKjB,OAAOwgK,aAAanyJ,YAEzBpN,KAAKjB,OAAOqoK,gBAAgBh1K,UAC5B4N,KAAKi1J,gBAGHj1J,KAAK49J,kBAAoBzB,EAAYL,YACvC97J,KAAK+qI,aAAe/qI,KAAKjB,OAAOlL,KAAK4E,WACrCuH,KAAK+qI,aAAa31H,UAAW,EAC7BpV,KAAK+qI,aAAa1iH,OAAQ,EAC1BroB,KAAK6pK,sBAAqB,IAEI,IAA1B7pK,KAAKw/J,mBACPx/J,KAAKjB,OAAO0gK,UAAUryJ,OACtBpN,KAAK+qI,aAAa3rI,oBAAoBmxJ,EAAOpzB,QAAQiiC,sBAAuBp/J,KAAKwnK,mBACjFxnK,KAAK+qI,aAAa3rI,oBAAoBmxJ,EAAOpzB,QAAQkiC,sBAAuBr/J,KAAK0nK,mBACjF1nK,KAAK+qI,aAAazrI,iBAAiBixJ,EAAOpzB,QAAQiiC,sBAAuBp/J,KAAKwnK,mBAC9ExnK,KAAK+qI,aAAazrI,iBAAiBixJ,EAAOpzB,QAAQkiC,sBAAuBr/J,KAAK0nK,oBAGhF1nK,KAAK6f,KAAK7f,KAAKqlE,QACfrlE,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQqhC,gBAAgB,WAC7CxuJ,EAAO+6H,aAAa5hI,OAEpB6G,EAAOjR,OAAO+E,QAAQysJ,EAAOpzB,QAAQsxB,kBAGvCzuJ,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQsxB,gBAGtC,CACDt7J,IAAK,gBACLM,MAAO,SAAuBmX,GAC5B5K,KAAKupK,eAAgB,EAEhBvpK,KAAKkzI,gBACRlzI,KAAKjB,OAAO+qK,gBAAkBl/J,EAC9B5K,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQuxB,iBAGtC,CACDv7J,IAAK,QACLM,MAAO,WACL,IAAI0c,EAASnQ,KAEb,IAAKA,KAAKg1J,eAAgB,CACxB,GAAIh1J,KAAKqlE,SAAiC,IAAvBrlE,KAAKqlE,OAAOpmD,OAE7B,YADAjf,KAAKo1J,YAaP,OATAp1J,KAAKwoK,YAAa,OAEwBttK,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YACzBtxB,KAAKjB,OAAOooC,WAAW7V,WAAWjkB,OAGpCrN,KAAKvO,IAAIuO,KAAKjB,OAAQwxJ,EAAOpzB,QAAQ+wB,WAAYluJ,KAAKwpK,oBACtDxpK,KAAKvO,IAAIuO,KAAKjB,OAAQwxJ,EAAOpzB,QAAQgxB,MAAOnuJ,KAAKwpK,oBAEzCxpK,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAOqD,qBAAoB,GAChCryJ,KAAKgvJ,OAAOA,OAAO8C,WAAW98I,QAAS,EACvChV,KAAKgvJ,OAAOmC,UAAW,EACvBnxJ,KAAKgvJ,OAAOA,OAAO8C,WAAW3oJ,OAC9B,MAEF,KAAKgzJ,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYT,YACf17J,KAAK+pK,oBACL,MAEF,KAAK5N,EAAYR,UACf37J,KAAKjB,OAAOsoK,aAAah6J,OACzBrN,KAAKjB,OAAOuoK,iBAAiBj6J,OAC7BrN,KAAK+qI,aAAatrI,MAAMyiI,QAAU,QAClCliI,KAAKgqK,eAAez3J,MAAK,SAAU/c,GACjC2a,EAAO45J,uBASb,OAJI/pK,KAAK62J,gBACP72J,KAAKiqK,YAAW,GAGVjqK,KAAK49J,iBACX,KAAKzB,EAAYJ,WACf/7J,KAAKkqK,iBACLlqK,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQs3B,cACnC,MAEF,KAAK0H,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYR,UACjB,KAAKQ,EAAYT,YACf17J,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQqhC,gBAAgB,WAC7CruJ,EAAOitJ,oBAET,MAEF,QACEp9J,KAAKo9J,qBAIZ,CACDjqK,IAAK,iBACLM,MAAO,WACLuM,KAAKgV,QAAS,EACdhV,KAAKmqK,UAAYnqK,KAAKoqK,WAAa,EACnCpqK,KAAK6S,UAAY1S,YAAYrS,MAE7BkS,KAAKqqK,UAAYrqK,KAAKjB,OAAOwQ,YAAYvP,KAAKsqK,YAAY7lK,KAAKzE,MADzC,UAGF9E,IAAhB8E,KAAKw8J,QACPx8J,KAAKw8J,OAAOlyJ,UAGdtK,KAAKw8J,OAAO/qJ,QACZzR,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQs3B,gBAEpC,CACDthK,IAAK,OACLM,MAAO,WACAuM,KAAKg1J,iBACRh1J,KAAKwoK,YAAa,EAClBxoK,KAAKyoK,aAAc,EAEfzoK,KAAK49J,kBAAoBzB,EAAYJ,YACvC/7J,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQw3B,aACnC30J,KAAKjB,OAAOuQ,cAActP,KAAKqqK,WAE3BrqK,KAAKw8J,QACPx8J,KAAKw8J,OAAOlmB,OAGVt2I,KAAK62J,gBACP72J,KAAKiqK,YAAW,IAGdjqK,KAAKjB,OAAOw8J,cACdv7J,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ0hC,kBAK1C,CACD1rK,IAAK,aACLM,MAAO,WACDuM,KAAKq2J,eACPr2J,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQ0hC,cAAe7+J,KAAKuqK,WAAW9lK,KAAKzE,OACnEA,KAAKs2I,QAELt2I,KAAKuqK,eAGR,CACDp3K,IAAK,aACLM,MAAO,WACL,GAAIuM,KAAKqlE,OAAQ,CAGf,GAFArlE,KAAKupK,eAAgB,EAEjBvpK,KAAK49J,kBAAoBzB,EAAYL,WAEvC,YADA97J,KAAKgvJ,OAAOA,OAAO8C,WAAWhF,aAIhC9sJ,KAAKqlE,OAAOsmB,YAAYz4F,SAAQ,SAAUmyE,GACxCA,EAAOixE,aAIZ,CACDnjJ,IAAK,QACLM,MAAO,WACAuM,KAAKgV,SACRhV,KAAKmqK,UAAYhqK,YAAYrS,MAC7BkS,KAAKgV,QAAS,EACdhV,KAAKw8J,OAAOtnJ,WAGf,CACD/hB,IAAK,SACLM,MAAO,WACDuM,KAAKgV,SACPhV,KAAKoqK,YAAcjqK,YAAYrS,MAAQkS,KAAKmqK,UAC5CnqK,KAAKw8J,OAAOliB,SACZt6I,KAAKgV,QAAS,KAGjB,CACD7hB,IAAK,mBACLM,MAAO,WACL,IAAIswB,EAAS/jB,KAeb,GAbAA,KAAKjB,OAAOw8J,aAAev7J,KAAKw8J,OAAOjB,kBAEGrgK,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,aACzBtxB,KAAKjB,OAAOooC,WAAW7V,WAAWj4B,YAAY,aAC9C2G,KAAKjB,OAAOooC,WAAW7V,WAAWlkB,SAGX,IAArBpN,KAAKw4J,aACPx4J,KAAKwqK,UAGPxqK,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ0hC,gBAE/B7+J,KAAKkzI,cAIT,OAAQlzI,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAO95I,QACZlV,KAAKgvJ,OAAOqD,qBAAoB,GAChCryJ,KAAKjB,OAAOm0J,eAAe9lJ,OAC3BpN,KAAKgvJ,OAAOA,OAAOnZ,KAAK0a,EAAOpzB,QAAQ4wB,OAAO,WAC5ChqI,EAAO0kJ,aAAc,KAEvBzoK,KAAK6f,KAAK7f,KAAKjB,OAAOw8J,cACtB,MAEF,KAAKY,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYT,YACf17J,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQixB,OAAO,WACpCrqI,EAAO0kJ,aAAc,EAErB1kJ,EAAOhlB,OAAOm0J,eAAe7lJ,OAE7B0W,EAAOk0F,YAAYl0F,EAAO0mJ,gBAE1B1mJ,EAAO9gB,GAAG8gB,EAAOhlB,OAAQwxJ,EAAOpzB,QAAQ+wB,WAAYnqI,EAAOylJ,oBAE3DzlJ,EAAO9gB,GAAG8gB,EAAOhlB,OAAQwxJ,EAAOpzB,QAAQgxB,MAAOpqI,EAAOylJ,oBAElDzlJ,EAAO65I,kBAAoBzB,EAAYP,aAAe73I,EAAO65I,kBAAoBzB,EAAYV,eAC/F13I,EAAOgnH,aAAa1iH,OAAQ,EAE5BtE,EAAO8lJ,sBAAqB,IAG9B9lJ,EAAOlE,KAAKkE,EAAOhlB,OAAOw8J,iBAE5Bv7J,KAAKjB,OAAOmW,QACZ,MAEF,KAAKinJ,EAAYR,UACf37J,KAAKyoK,aAAc,EACnBzoK,KAAKjB,OAAOm0J,eAAe7lJ,OAC3BrN,KAAKi4G,YAAYj4G,KAAKyqK,gBACtBzqK,KAAK+qI,aAAatrI,MAAMyiI,QAAU,OAClCliI,KAAKjB,OAAOsoK,aAAaj6J,OACzBpN,KAAKjB,OAAOmW,QACZlV,KAAKiD,GAAGjD,KAAKjB,OAAQwxJ,EAAOpzB,QAAQyhC,KAAM5+J,KAAK0qK,eAC/C1qK,KAAKiD,GAAGjD,KAAKjB,OAAQwxJ,EAAOpzB,QAAQixB,MAAOpuJ,KAAK2qK,kBAIrD,CACDx3K,IAAK,cACLM,MAAO,WACL,IAAKuM,KAAKgV,OAAQ,CAChB,IAAIlnB,EAAMqS,YAAYrS,MAClBgkB,EAAW9R,KAAKw2J,UAChBx3I,GAAelxB,GAAOkS,KAAK6S,UAAY7S,KAAKoqK,aAAe,IAC/DpqK,KAAKyqK,eAAiBzrJ,EAElBA,GAAelN,IACjBkN,EAAclN,EACd9R,KAAKs2I,QAGPt2I,KAAKi4G,YAAYnmG,GACjB9R,KAAKyjB,eAAezE,EAAalN,GACjC9R,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ2hC,oBAGtC,CACD3rK,IAAK,iBACLM,MAAO,WACL,IAAIurB,EAAc/Q,MAAMjO,KAAK4qK,mBAAqB,EAAI5qK,KAAK4qK,kBAM3D,OAJI5qK,KAAK49J,kBAAoBzB,EAAYL,aACvC98I,EAAchf,KAAKgvJ,OAAOljB,kBAGrB9sH,IAER,CACD7rB,IAAK,iBACLM,MAAO,SAAwBurB,EAAalN,GAI1C,OAHAkN,EAAc/Q,MAAM+Q,GAAe,EAAIA,EACvClN,EAAW7D,MAAM6D,GAAY,EAAIA,EAEzB9R,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAOvrI,eAAezE,EAAalN,GACxC,MAEF,KAAKqqJ,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYR,UACjB,KAAKQ,EAAYT,YACX17J,KAAKjB,OAAOooC,WAAW8rH,oBAAsBjzJ,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,aAAenL,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,YAAYw1I,YAC9J3gJ,KAAK4qK,kBAAoBxtK,KAAKE,IAAI0hB,EAAalN,GAC/C9R,KAAKjB,OAAOooC,WAAW8rH,mBAAmBjgI,eAAiBhzB,KAAKjB,OAAOooC,WAAW8rH,mBAAmB9nJ,YAAYw1I,UAAUzoJ,YAAc8H,KAAKywJ,YAAYzwJ,KAAK4qK,kBAAmB94J,EAAU9R,KAAK8tJ,yBAMxM,CACD36J,IAAK,cACLM,MAAO,WAEL,OADewa,MAAMjO,KAAKyqK,gBAAkB,EAAIzqK,KAAKyqK,iBAGtD,CACDt3K,IAAK,cACLM,MAAO,SAAqBqe,GAG1B,OAFAA,EAAW7D,MAAM6D,GAAY,EAAIA,EAEzB9R,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAO/2C,YAAYnmG,GACxB,MAEF,KAAKqqJ,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYR,UACjB,KAAKQ,EAAYT,YACX17J,KAAKjB,OAAOooC,WAAW4b,iBAAmB/iD,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,aAAenL,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,YAAYw1I,YACrJ3gJ,KAAKjB,OAAOooC,WAAW4b,gBAAgB/vB,eAAiBhzB,KAAKjB,OAAOooC,WAAW4b,gBAAgB53C,YAAYw1I,UAAUzoJ,YAAc8H,KAAKywJ,YAAY3+I,EAAUA,EAAU9R,KAAK8tJ,yBAMpL,CACD36J,IAAK,OACLM,MAAO,SAAc+nB,GACnB,OAAQxb,KAAK49J,iBACX,KAAKzB,EAAYL,WACf97J,KAAKgvJ,OAAOnvI,KAAKrE,GACjB,MAEF,KAAK2gJ,EAAYJ,WACjB,KAAKI,EAAYN,WACjB,KAAKM,EAAYP,YACjB,KAAKO,EAAYV,aACjB,KAAKU,EAAYR,UACjB,KAAKQ,EAAYT,YACXlgJ,aAAeqmD,MAAQrmD,aAAeq3I,MACxC7yJ,KAAK+qI,aAAaqO,UAAY,KAC9Bp5I,KAAK+qI,aAAa13H,IAAM4gD,IAAI2N,gBAAgBpmD,KAE5C,EAAImrJ,EAAaxpC,SAAS3hH,EAAKxb,KAAK+qI,iBAM3C,CACD53I,IAAK,SACLM,MAAO,SAAgBvD,GACrB,IAAIlB,EAAOzB,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,SAElE,WAATyB,EACEgR,KAAKw8J,aAAmBthK,IAAThL,GACjB8P,KAAKw8J,OAAOqO,OAAO36K,GAEH,YAATlB,GACLgR,KAAK4pK,gBAAsB1uK,IAAThL,GACpB8P,KAAK4pK,UAAUiB,OAAO36K,KAI3B,CACDiD,IAAK,UACLM,MAAO,WACLuM,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQ4wB,OAC/B/tJ,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQuhC,cAC/B1+J,KAAKjB,OAAOtN,IAAI8+J,EAAOpzB,QAAQqhC,gBAE3Bx+J,KAAKw8J,SACPx8J,KAAKw8J,OAAOlyJ,UACZtK,KAAKw8J,OAAOh1B,UACZxnI,KAAKw8J,OAAO/qK,IAAI8+J,EAAOpzB,QAAQq+B,gBAAiBx7J,KAAK8oK,qBAGvD9oK,KAAKs2I,OACLt2I,KAAK8sJ,aACL9sJ,KAAK8qK,kBACL9qK,KAAKjB,OAAOuQ,cAActP,KAAKqqK,WAE3BrqK,KAAK49J,kBAAoBzB,EAAYL,WACnC97J,KAAKgvJ,QACPhvJ,KAAKgvJ,OAAOxnB,UAELxnI,KAAK49J,kBAAoBzB,EAAYJ,YAC1C/7J,KAAK+qI,cAAgB/qI,KAAKgpK,uBAC5BhpK,KAAK+qI,aAAa3rI,oBAAoBmxJ,EAAOpzB,QAAQwZ,QAAS32I,KAAKgpK,uBAIvEhpK,KAAKinK,cACL,EAAI/S,EAAM/2B,UAAS,EAAIk3B,EAAiBl3B,SAAS8oC,EAAOt3K,WAAY,UAAWqR,MAAMrM,KAAKqM,QAE3F,CACD7M,IAAK,UACLM,MAAO,WACLuM,KAAKjB,OAAOuL,YAEb,CACDnX,IAAK,QACLM,MAAO,WACL,IAAIixB,EAAS1kB,KAiBb,OAfIA,KAAKw8J,SACPx8J,KAAKw8J,OAAOlyJ,UACZtK,KAAKw8J,OAAO/qK,IAAI8+J,EAAOpzB,QAAQq+B,gBAAiBx7J,KAAK8oK,qBAGvD9oK,KAAKs2I,OACLt2I,KAAK8sJ,aACL9sJ,KAAKjB,OAAOuQ,cAActP,KAAKqqK,WAC/BrqK,KAAK8qK,kBACL9qK,KAAKgnK,cACLhnK,KAAKinK,aACLjnK,KAAKi4G,YAAYj4G,KAAKw2J,WACtBx2J,KAAKyjB,eAAe,GACpBzjB,KAAKjB,OAAOokB,QAEJnjB,KAAK49J,iBACX,KAAKzB,EAAYL,WACX97J,KAAKgvJ,QAAUhvJ,KAAKgvJ,OAAOA,QAC7BhvJ,KAAKgvJ,OAAOA,OAAOh5I,QAGrB,MAEF,KAAKmmJ,EAAYJ,WACjB,KAAKI,EAAYR,UACf37J,KAAKjB,OAAOsoK,aAAah6J,OACzBrN,KAAKjB,OAAOugK,aAAajyJ,YAIanS,IAAtC8E,KAAKjB,OAAOooC,WAAW7V,YACzBtxB,KAAKjB,OAAOooC,WAAW7V,WAAWjkB,OAGpCrN,KAAKjB,OAAOooK,aAAa/5J,OACzBpN,KAAKjB,OAAOwgK,aAAalyJ,OACzBrN,KAAKjB,OAAOoF,IAAIosJ,EAAOpzB,QAAQqhC,gBAAgB,WAC7C95I,EAAOuzF,YAAYvzF,EAAO8xI,gBAG7B,CACDrjK,IAAK,aACLM,MAAO,WACLuM,KAAKwoK,YAAa,EAClBxoK,KAAKyoK,aAAc,EACnBzoK,KAAKupK,eAAgB,EACrBvpK,KAAK+qK,QAAU,KAEhB,CACD53K,IAAK,kBACLM,MAAO,WACDuM,KAAK+qI,cAAgB/qI,KAAK+qI,aAAa13H,MAAqD,IAA9CrT,KAAK+qI,aAAa13H,IAAI8/I,WAAW,WACjFl/F,IAAIoO,gBAAgBriE,KAAK+qI,aAAa13H,KACtCrT,KAAK+qI,aAAa13H,IAAM,MAG3B,CACDlgB,IAAK,cACLM,MAAO,WACL,IAAIioF,EAASnuF,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,YAC7EuyI,EAAUvyI,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,EAElF,GAAIyS,KAAK49J,kBAAoBzB,EAAYL,WACvC,OAAO97J,KAAKgvJ,OAAOA,OAAOgE,YAAYt3E,EAAQokD,EAAS,QAEvD,IAAIunC,EAAernK,KAAKjB,OAAOsoK,aAAaxzK,KAAK4E,WAEjD,OADAuH,KAAKgrK,WAAW3D,EAAcrnK,KAAK+qI,cAC5B,IAAI/lH,SAAQ,SAAUg5B,GAC3BqpH,EAAatnC,OAAO/hF,EAAS09B,EAAQokD,QAI1C,CACD3sI,IAAK,aACLM,MAAO,SAAoBghJ,IACpBz0I,KAAK49J,kBAAoBzB,EAAYL,YAAc97J,KAAK49J,kBAAoBzB,EAAYV,cAAgBz7J,KAAK49J,kBAAoBzB,EAAYP,cAAgB57J,KAAKqlE,OAAO4lG,iBAAiBp7K,OAAS,IACtMmQ,KAAKqlE,OAAO4lG,iBAAiB,GAAG3yJ,SAAWm8H,GAGzCz0I,KAAK49J,kBAAoBzB,EAAYL,YAAc97J,KAAKqlE,OAAO6lG,iBAAiBr7K,OAAS,IAC3FmQ,KAAKqlE,OAAO6lG,iBAAiB,GAAG5yJ,SAAWm8H,KAG9C,CACDthJ,IAAK,gBACLM,MAAO,WACL,OAAO,EAAI0oK,EAAYH,iBAAiBh8J,KAAK+nK,YAAa/nK,KAAKgoK,YAAahoK,KAAKioK,YAAajoK,KAAKkoK,gBAAiBloK,KAAKmoK,gBAE1H,CACDh1K,IAAK,UACLM,MAAO,gBACkByH,IAAnB8E,KAAK4pK,WACP5pK,KAAK4pK,UAAUY,QAAQxqK,KAAKjB,OAAOw8J,gBAGtC,CACDpoK,IAAK,iBACLM,MAAO,WACL,IAAI4oD,EAASr8C,KAEbA,KAAKgqK,eAAez3J,MAAK,SAAU/c,GACF,SAA3B6mD,EAAO47G,gBACTziK,EAAOuqI,QAAO,SAAUj+D,GACtBzlB,EAAOt9C,OAAOw8J,aAAez5F,EAE7BzlB,EAAO8uH,qBAE2B,YAA3B9uH,EAAO47G,kBAChB57G,EAAOt9C,OAAOw8J,aAAe/lK,EAAOwqI,UAAU3jF,EAAO67G,kBAAmB77G,EAAO87G,oBAE/E97G,EAAO8uH,qBAERnrK,KAAKk4J,kBAAmBl4J,KAAKm4J,sBAEjC,CACDhlK,IAAK,kBACLM,MAAO,WACLuM,KAAK+qI,aAAatrI,MAAMyiI,QAAU,OAClCliI,KAAKjB,OAAOsoK,aAAaj6J,OACzBpN,KAAKs2I,SAEN,CACDnjJ,IAAK,gBACLM,MAAO,WACLuM,KAAKyoK,aAAc,EACnBzoK,KAAKjB,OAAOsoK,aAAah6J,OACzBrN,KAAKjB,OAAOlL,KAAK4E,WAAWgH,MAAMyiI,QAAU,UAE7C,CACD/uI,IAAK,eACLM,MAAO,WACL,IAAI+pD,EAASx9C,KAETorK,GAAW,EAAIvE,EAAe9a,iBAC9Bsb,EAAernK,KAAKjB,OAAOsoK,aAAaxzK,KAAK4E,WAC7Cia,EAAQ1S,KAAKqlE,OAAO6lG,iBAAiB,GACrC/sJ,EAAWzL,EAAM24J,cAGrB,OAFAhE,EAAajsK,MAAQ+iB,EAAS/iB,MAC9BisK,EAAalsK,OAASgjB,EAAShjB,OACxB,IAAI6pB,SAAQ,SAAUg5B,EAAS/4B,GACpC,IAAIqmJ,EAAoBntJ,EAAS/iB,MAAQ+iB,EAAShjB,OAE9CowK,EAAoB/tH,EAAOz+C,OAAO3D,QAAUoiD,EAAOz+C,OAAO5D,SAE1DqwK,EAAqB,EACrBC,EAAoB,EACpBC,EAAiB,EACjBC,EAAiB,EAYrB,GAVIL,GAAqBC,GACvBC,EAAqBrtJ,EAAShjB,QAAUqiD,EAAOz+C,OAAO3D,QAAU+iB,EAAS/iB,OACzEqwK,EAAoBjuH,EAAOz+C,OAAO3D,QAClCuwK,EAAiBnuH,EAAOz+C,OAAO5D,SAAW,EAAIqwK,EAAqB,IAEnEA,EAAqBhuH,EAAOz+C,OAAO5D,SACnCswK,EAAoBttJ,EAAS/iB,OAASoiD,EAAOz+C,OAAO5D,SAAWgjB,EAAShjB,QACxEuwK,EAAiBluH,EAAOz+C,OAAO3D,QAAU,EAAIqwK,EAAoB,GAG1C,WAArBL,EAAS90K,SAAwB80K,EAAS31K,SAAW,KAA+B,qBAAjBm2K,aAA+B,aAAc,EAAI/uC,EAASM,SAASyuC,kBAAwC,qBAAbjgB,SAA2B,aAAc,EAAI9uB,EAASM,SAASwuB,WAClO,IACqB,IAAIigB,aAAal5J,GACvBm5J,YAAYt5J,MAAK,SAAUu5J,GACtCtuH,EAAOwtH,WAAW3D,EAAcyE,EAAaL,EAAmBD,EAAoBE,EAAgBC,GAEpG3tH,EAAQqpH,MACPv4B,OAAM,SAAUl9I,OACnB,MAAOisB,MAGX2/B,EAAOwtH,WAAW3D,EAAc7pH,EAAOutF,aAAc0gC,EAAmBD,EAAoBE,EAAgBC,GAE5G3tH,EAAQqpH,QAGX,CACDl0K,IAAK,aACLM,MAAO,SAAoBuqI,EAAQnlI,EAASuC,EAAOD,GACjD,IAAIlE,EAAI1J,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,EACxE0O,EAAI1O,UAAUsC,OAAS,QAAsBqL,IAAjB3N,UAAU,GAAmBA,UAAU,GAAK,OAE9D2N,IAAVE,IACFA,EAAQ4iI,EAAO5iI,YAGFF,IAAXC,IACFA,EAAS6iI,EAAO7iI,QAGlB6iI,EAAON,WAAW,MAAMquC,UAAUlzK,EAAS5B,EAAGgF,EAAGb,EAAOD,KAEzD,CACDhI,IAAK,oBACLM,MAAO,WACLuM,KAAKvO,IAAI8+J,EAAOpzB,QAAQ+wB,YACxBluJ,KAAKvO,IAAI8+J,EAAOpzB,QAAQwhC,gBACxB3+J,KAAKvO,IAAI8+J,EAAOpzB,QAAQqhC,gBACxBx+J,KAAKvO,IAAI8+J,EAAOpzB,QAAQyhC,MACxB5+J,KAAK+qI,aAAa1iH,OAAQ,EAC1BroB,KAAK6pK,sBAAqB,GAC1B7pK,KAAK8qK,kBACL9qK,KAAK6f,KAAK7f,KAAKqlE,QACfrlE,KAAK+qI,aAAa5hI,SAEnB,CACDhW,IAAK,gBACLM,MAAO,WACL,IAAI6zK,EAAmBtnK,KAAKjB,OAAOuoK,iBAAiBzzK,KAAK4E,WACzD6uK,EAAiBlsK,MAAQ4E,KAAKjB,OAAO3D,QACrCksK,EAAiBnsK,OAAS6E,KAAKjB,OAAO5D,SACtC6E,KAAKjB,OAAOsoK,aAAah6J,QACzB,EAAIs5J,EAAaxpC,SAASn9H,KAAKjB,OAAOw8J,aAAc+L,GACpDtnK,KAAKjB,OAAOuoK,iBAAiBl6J,SAE9B,CACDja,IAAK,gBACLM,MAAO,WACLuM,KAAKjB,OAAOsoK,aAAaj6J,OACzBpN,KAAKjB,OAAOuoK,iBAAiBj6J,SAE9B,CACDla,IAAK,qBACLM,MAAO,WACLuM,KAAKyjB,eAAezjB,KAAKjB,OAAOigB,cAAehf,KAAKyqK,kBAErD,CACDt3K,IAAK,mBACLM,MAAO,WACL,IAAIsqD,EAAU/9C,KAEd,IAAK3L,UAAUg1J,eAAiBh1J,UAAUg1J,aAAa2iB,iBAGrD,OAFAhsK,KAAKjB,OAAOktK,mBAAqB,yCACjCjsK,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQ6hC,iBAIrC3qK,UAAUg1J,aAAa2iB,iBAAiBhsK,MAAMuS,MAAK,SAAUw4J,GAC3DhtH,EAAQgtH,QAAU,GAClBA,EAAQ73K,SAAQ,SAAUg5K,GACxBnuH,EAAQgtH,QAAQ/5K,KAAKk7K,MAGvBnuH,EAAQh/C,OAAO+E,QAAQysJ,EAAOpzB,QAAQ4hC,oBACrCjwB,OAAM,SAAUjxH,GACjBkgC,EAAQh/C,OAAOktK,mBAAqBpuJ,EAEpCkgC,EAAQh/C,OAAO+E,QAAQysJ,EAAOpzB,QAAQ6hC,sBAGzC,CACD7rK,IAAK,gBACLM,MAAO,SAAuBi5I,GACxB1sI,KAAKioK,cAAgBp1K,OAAOmN,KAAKioK,aACnCjoK,KAAKioK,YAAYv7B,SAAW,CAC1By/B,MAAOz/B,IAEqB,IAArB1sI,KAAKioK,cACdjoK,KAAKioK,YAAc,CACjBv7B,SAAU,CACRy/B,MAAOz/B,KAKb1sI,KAAK8sJ,aACL9sJ,KAAKo1J,cAEN,CACDjiK,IAAK,gBACLM,MAAO,SAAuBi5I,GACxB1sI,KAAKgoK,cAAgBn1K,OAAOmN,KAAKgoK,aACnChoK,KAAKgoK,YAAYt7B,SAAW,CAC1By/B,MAAOz/B,IAEqB,IAArB1sI,KAAKgoK,cACdhoK,KAAKgoK,YAAc,CACjBt7B,SAAU,CACRy/B,MAAOz/B,KAKL1sI,KAAK49J,kBACNzB,EAAYL,aACf97J,KAAKgvJ,OAAOA,OAAO8C,WAAW5F,YAAc,CAC1C3rI,OAAO,EACPJ,MAAOngB,KAAKgoK,cAKlBhoK,KAAK8sJ,aACL9sJ,KAAKo1J,cAEN,CACDjiK,IAAK,iBACLM,MAAO,SAAwBi5I,GAC7B,IAEIljB,EAFAtrE,EAAUl+C,KAId,GAAQA,KAAK49J,kBACNzB,EAAYL,WACf97J,KAAKgvJ,OAAOA,OAAOriB,UAAUD,GAAUn6H,MAAK,SAAU/c,GACpD0oD,EAAQn/C,OAAO+E,QAAQysJ,EAAOpzB,QAAQwxB,uBAGrC7f,OAAM,SAAUjxH,GACjB2rG,EAAe3rG,SAInB,CACE,IAAIhlB,EAAUkG,OAAO6e,MAAMnW,IAEvBilI,EAC4B,qBAAnB7zI,EAAQuzK,OACjBvzK,EAAQ8zI,UAAUD,GAAUn6H,MAAK,SAAU/c,GACzC0oD,EAAQn/C,OAAO+E,QAAQysJ,EAAOpzB,QAAQwxB,uBAGrC7f,OAAM,SAAUjxH,GACjB2rG,EAAe3rG,KAGjB2rG,EAAe,0DAGjBA,EAAe,qBAAqBt6H,OAAOw9I,GAMjD1sI,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQl9G,MAAOupG,KAE3C,CACDr2H,IAAK,gBACLM,MAAO,SAAuB01D,GAC5BnpD,KAAKywJ,YAActnG,EAEnB0mG,EAAO1yB,QAAQj0E,cAAclpD,KAAKywJ,aAE9BzwJ,KAAKgvJ,QACPhvJ,KAAKgvJ,OAAO9lG,cAAclpD,KAAKywJ,eAGlC,CACDt9J,IAAK,uBACLM,MAAO,SAA8ByuI,QACQhnI,IAAvC8E,KAAKjB,OAAOooC,WAAWklI,cAEvBnqC,GADc,IAAZA,EACQ,OAEA,OAGZliI,KAAKjB,OAAOooC,WAAWklI,YAAYx4K,KAAK4L,MAAMyiI,QAAUA,KAG3D,CACD/uI,IAAK,kBACLM,MAAO,SAAyBsI,GAC9BiE,KAAK+qI,aAAa3rI,oBAAoBmxJ,EAAOpzB,QAAQwZ,QAAS32I,KAAKgpK,uBACnEhpK,KAAKjB,OAAOugK,aAAa1K,SACzB50J,KAAKjB,OAAOugK,aAAalyJ,SAE1B,CACDja,IAAK,aACLM,MAAO,SAAoBsI,GACzBiE,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQq4B,UAAWz5J,KAE/C,CACD5I,IAAK,aACLM,MAAO,SAAoBsI,GACzBiE,KAAKjB,OAAO+E,QAAQysJ,EAAOpzB,QAAQs4B,eAGhCwQ,EA/0CI,CAg1CXp/G,GAEFx4D,EAAQ43K,OAASA,EACjBA,EAAOn/G,QAAU,QACjB+oG,EAAO1yB,QAAQ8oC,OAASA,OAEmB/qK,IAAvC20J,EAAO1yB,QAAQ/2E,UAAU,WAC3BypG,EAAO1yB,QAAQl2E,eAAe,SAAUg/G,GAj/C5C,GAu/COtrB,EArpKJ,IAFoE,WAAvB6Y,EAASnlK,IAA+F,WAAtBmlK,EAASplK,GAAuBA,EAAOC,QAAUqzE,EAAQ,EAAQ,MAAc,EAAQ,QAAkE,EAAwB,CAAC,QAAa,cAAoB,2BAAP,EAAF,GAAS,kC,yDCV3V,oBA8BA,SAASpzE,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAEnX,SAAS+9K,EAAUC,EAAa/mI,GAC9B,IAAK+mI,EACH,KAAM,+BAMR/mI,EAAS,IAAIgnI,EAAuBD,EAHpC/mI,EAASA,GAAU,CACjBx2C,KAAM,UAIR,IAAIb,EAAO6R,KAqCX,SAASysK,EAAaC,GAChBA,IACFlnI,EAAOknI,aAAe,WACpBA,IACAA,EAAelnI,EAAOknI,aAAe,OAIzC,IAAIC,EAAW,IAAIC,EAAgBL,EAAa/mI,IAChDqnI,EAAgB,IAAIF,EAASJ,EAAa/mI,IAC5BuvH,SACdntJ,EAAS,aAEJ49B,EAAOk3H,aACVzrK,QAAQZ,IAAI,4BAA6Bw8K,EAAcn+K,YAAYwB,KAAM,mBAAoBs1C,EAAOx2C,MAIxG,SAASquK,EAAcl8J,GAGrB,GAFAA,EAAWA,GAAY,aAElB0rK,EAAL,CAKA,GAAmB,WAAf1+K,EAAKwZ,MAKP,OAJAxZ,EAAKqvK,uBACLt+J,YAAW,WACTm+J,EAAcl8J,KACb,GAIc,cAAfhT,EAAKwZ,OAA0B69B,EAAOk3H,aACxCzrK,QAAQU,KAAK,qEAAsExD,EAAKwZ,OAGrF69B,EAAOk3H,aACVzrK,QAAQZ,IAAI,qBAAuBm1C,EAAOx2C,KAAO,YAG/B,QAAhBw2C,EAAOx2C,KACT69K,EAAcv2B,KAAKx9C,IAEnB+zE,EAAcv2B,OAEdx9C,KAGFlxF,EAAS,gBA5BPklK,IA8BF,SAASh0E,EAAUi0E,GACjB,GAAKF,EAAL,CAUAh6K,OAAOC,KAAK+5K,GAAe35K,SAAQ,SAAUC,GACT,oBAAvB05K,EAAc15K,KAIzBhF,EAAKgF,GAAO05K,EAAc15K,OAE5B,IAAI2uE,EAAO+qG,EAAc/qG,KAEzB,IAAKA,EAAM,CACT,IAAIirG,EAGF,KAAM,oBAFNF,EAAc/qG,KAAOA,EAAOirG,EAUhC,GAJIjrG,IAASt8B,EAAOk3H,aAClBzrK,QAAQZ,IAAIyxE,EAAK9yE,KAAM,KAAMg+K,EAAYlrG,EAAKt8D,OAG5CrE,EAAU,CACZ,IAAIqa,EAEJ,IACEA,EAAMy4C,EAAI2N,gBAAgBE,GAC1B,MAAO7tE,IAEoB,oBAAlBkN,EAASxN,KAClBwN,EAASxN,KAAKxF,EAAMqtB,GAEpBra,EAASqa,GAIRgqB,EAAOynI,iBAIZC,GAAW,SAAUC,GACnB,IAAIC,EAAY,GAChBA,EAAU5nI,EAAOx2C,KAAO,QAAUm+K,EAClCE,EAAYC,MAAMF,UAnDW,oBAAlBjsK,EAASxN,KAClBwN,EAASxN,KAAKxF,EAAM,IAEpBgT,EAAS,KAkGjB,SAASosK,EAASC,GAChBn5E,aAAY,IAAIo5E,gBAAiBC,cAAcF,IAGjD,SAASN,EAAW/rK,EAAUwsK,GAC5B,IAAKxsK,EACH,KAAM,4CAGR,IAAI2gE,EAAO6rG,EAAiBA,EAAe7rG,MAAQ+qG,GAAiB,IAAI/qG,KAExE,IAAKA,EAQH,OAPKt8B,EAAOk3H,aACVzrK,QAAQU,KAAK,iDAGfuN,YAAW,WACTguK,EAAW/rK,EAAUwsK,KACpB,KAIL,GAAsB,qBAAXzrG,QAA2B7tE,UAAUi4J,gBAQzC,CACL,IAAIjX,EAAS,IAAIC,WACjBD,EAAOq4B,cAAc5rG,GAErBuzE,EAAOxxH,OAAS,SAAU9nB,GACxBoF,EAASpF,EAAM1I,OAAOmC,aAbuC,CAC/D,IAAIo4K,EAgBN,SAA4BC,GAC1B,IACE,IAAI/rG,EAAO7N,EAAI2N,gBAAgB,IAAIC,KAAK,CAACgsG,EAAUj7K,WAAY,qCAAuCi7K,EAAU39K,KAAO,gBAAiB,CACtIlB,KAAM,4BAEJizE,EAAS,IAAIC,OAAOJ,GAExB,OADA7N,EAAIoO,gBAAgBP,GACbG,EACP,MAAOhuE,KAxBO65K,CAAmBP,GAEnCK,EAAU93E,UAAY,SAAU/5F,GAC9BoF,EAASpF,EAAMqE,OAGjBwtK,EAAUv5E,YAAYvyB,IAsB1B,SAASisG,EAAwBC,GAC/BA,EAAUA,GAAW,EAEF,WAAf7/K,EAAKwZ,MAOU,YAAfxZ,EAAKwZ,QAILqmK,GAAW7/K,EAAK8/K,kBAClB5Q,EAAclvK,EAAK+/K,qBAIrBF,GAAW,IAEX9uK,YAAW,WACT6uK,EAAwBC,KACvB,OAnBD9uK,YAAW,WACT6uK,EAAwBC,KACvB,KAoBP,SAASpmK,EAASD,GACXxZ,IAILA,EAAKwZ,MAAQA,EAE2B,oBAA7BxZ,EAAKggL,eAAex6K,KAC7BxF,EAAKggL,eAAex6K,KAAKxF,EAAMwZ,GAE/BxZ,EAAKggL,eAAexmK,IAIxB,IAUIklK,EAVAuB,EAAU,8EAAgF5oI,EAAOx2C,KAAO,aAE5G,SAAS89K,KACoB,IAAvBtnI,EAAOk3H,aAIXzrK,QAAQU,KAAKy8K,GAIf,IAAIC,EAAe,CAYjBjR,eAhTF,SAAwBkR,GAetB,OAdK9oI,EAAOk3H,aACVzrK,QAAQZ,IAAI,sBAAuBlC,EAAKsH,SAGpC64K,IAGJ9oI,EAAS,IAAIgnI,EAAuBD,EAAa+B,IAG9C9oI,EAAOk3H,aACVzrK,QAAQZ,IAAI,qBAAuBm1C,EAAOx2C,KAAO,YAG/C69K,GACFA,EAAc0B,oBACd1B,EAAc9X,SACdntJ,EAAS,aAELzZ,EAAK8/K,mBACPF,IAGK5/K,IAGTs+K,GAAa,WACPt+K,EAAK8/K,mBACPF,OAGG5/K,IA+RPkvK,cAAeA,EAYfE,eA1LF,WACOsP,EAKc,cAAf1+K,EAAKwZ,OAQTC,EAAS,UACTilK,EAAc33J,QAETswB,EAAOk3H,aACVzrK,QAAQZ,IAAI,sBAXPm1C,EAAOk3H,aACVzrK,QAAQU,KAAK,mDAAoDxD,EAAKwZ,OANxEmlK,KAmMFtP,gBA/KF,WACOqP,EAKc,WAAf1+K,EAAKwZ,OAQTC,EAAS,aAETilK,EAAcvyB,SAET90G,EAAOk3H,aACVzrK,QAAQZ,IAAI,uBAZPm1C,EAAOk3H,aACVzrK,QAAQU,KAAK,oDAAqDxD,EAAKwZ,OANzEmlK,KAwLFL,aAAcA,EAoBd+B,qBAAsB,SAA8BP,EAAmB9sK,GACrE,GAAiC,qBAAtB8sK,EACT,KAAM,iCAGR,GAAiC,kBAAtBA,EACT,KAAM,sCAOR,OAJA9/K,EAAK8/K,kBAAoBA,EAEzB9/K,EAAK+/K,mBAAqB/sK,GAAY,aAE/B,CACL+sK,mBAAoB,SAA4B/sK,GAC9ChT,EAAK+/K,mBAAqB/sK,KAchCotK,kBAAmB,WACZ1B,GAKLA,EAAc0B,oBAET/oI,EAAOk3H,aACVzrK,QAAQZ,IAAI,+BAPZy8K,KA8BJ9qG,QAAS,WACP,GAAK6qG,EAKL,OAAOA,EAAc/qG,KAJnBgrG,KAoBJI,WAAYA,EAaZuB,MAAO,WACL,GAAK5B,EAKL,OAAO54G,EAAI2N,gBAAgBirG,EAAc/qG,MAJvCgrG,KAoBJ1O,oBAAqB,WACnB,OAAOyO,GAiBTpP,KAAM,SAAcrE,GACbyT,EAKL6B,EAAmB7B,EAAc/qG,KAAMs3F,GAJrC0T,KAkBJ6B,YAAa,SAAqBxtK,GAC3B0rK,EAKLP,EAAUqC,YAAYnpI,EAAOx2C,KAAMmS,GAJjC2rK,KAuBJ8B,sBAAuB,SAA+BC,GACpDrpI,EAAOspI,cAAgB,GAGvB,IAFA,IAAIj/K,EAASg/K,EAAkBh/K,OAEtBD,EAAI,EAAGA,EAAIC,EAAQD,IAC1B41C,EAAOspI,cAAc99K,KAAK,CACxB8gB,SAAUliB,EACV0mK,MAAOuY,EAAkBj/K,MAmB/BkyE,KAAM,KAaN+b,WAAY,EAaZtR,WAAY,EAcZ9T,OAAQ,KAWRt1C,MAAO,WACc,cAAfh1B,EAAKwZ,OAA0B69B,EAAOk3H,aACxCzrK,QAAQU,KAAK,4BAGXk7K,GAA4D,oBAApCA,EAAc0B,mBACxC1B,EAAc0B,oBAGhB1B,EAAgB,KAChBjlK,EAAS,YACTzZ,EAAK2zE,KAAO,MAcdqsG,eAAgB,SAAwBxmK,GACjC69B,EAAOk3H,aACVzrK,QAAQZ,IAAI,0BAA2BsX,IAmB3CA,MAAO,WAUPonK,SAAU,WACR,OAAO5gL,EAAKwZ,OAUd6/H,QAAS,WACP,IAAIwnC,EAAmBxpI,EAAOk3H,YAC9Bl3H,EAAS,CACPk3H,aAAa,GAEfvuK,EAAKg1B,QACLvb,EAAS,aACTymK,EAAelgL,EAAO,KAElB8gL,EAAQC,0BACVD,EAAQC,wBAAwBp7J,QAChCm7J,EAAQC,wBAA0B,MAGpC1pI,EAAOk3H,YAAcsS,EAEhBxpI,EAAOk3H,aACVzrK,QAAQZ,IAAI,4BAahBoF,QAAS,SAGX,IAAKuK,KAEH,OADA7R,EAAOkgL,EACAA,EAIT,IAAK,IAAIv6K,KAAQu6K,EACfruK,KAAKlM,GAAQu6K,EAAav6K,GAI5B,OADA3F,EAAO6R,KACAquK,EA+HT,SAAS7B,EAAuBD,EAAa/mI,GAoD3C,OAnDKA,EAAO+2H,cAAiB/2H,EAAOx2C,OAC5Bw2C,EAAOrlB,OAAWqlB,EAAOjlB,MAC7BilB,EAAOx2C,KAAO,QACHw2C,EAAOrlB,QAAUqlB,EAAOjlB,QACnCilB,EAAOx2C,KAAO,UAIdw2C,EAAO+2H,eAAiB/2H,EAAOx2C,OAC7Bw2C,EAAO+2H,eAAiB4S,GAAkB3pI,EAAO+2H,eAAiB6S,GAAgE5pI,EAAO+2H,eAAiB8S,EAC5J7pI,EAAOx2C,KAAO,QACLw2C,EAAO+2H,eAAiB+S,EACjC9pI,EAAOx2C,KAAO,MACLw2C,EAAO+2H,eAAiBgT,EACjC/pI,EAAOx2C,KAAO,QACLw2C,EAAO+2H,eAAiB8B,IAC7B1yE,EAAU4gF,EAAa,SAAS18K,QAAU87F,EAAU4gF,EAAa,SAAS18K,SAElE87F,EAAU4gF,EAAa,SAAS18K,QAAU87F,EAAU4gF,EAAa,SAAS18K,OADpF21C,EAAOx2C,KAAO,QAGL28F,EAAU4gF,EAAa,SAAS18K,SAAW87F,EAAU4gF,EAAa,SAAS18K,SACpF21C,EAAOx2C,KAAO,WAMuD,qBAAlBwgL,eAAiC,gBAAiBA,cAAc7gL,YAClH62C,EAAOm3H,WACVn3H,EAAOm3H,SAAW,cAGfn3H,EAAOx2C,OACVw2C,EAAOx2C,KAAOw2C,EAAOm3H,SAASnjK,MAAM,KAAK,IAGtCgsC,EAAOiqI,eAKTjqI,EAAOx2C,OACNw2C,EAAOm3H,WACTn3H,EAAOx2C,KAAOw2C,EAAOm3H,SAASnjK,MAAM,KAAK,IAGtCgsC,EAAOx2C,OACVw2C,EAAOx2C,KAAO,UAIXw2C,EAoBT,SAASonI,EAAgBL,EAAa/mI,GACpC,IAAIsvH,EAiEJ,OA9DIiL,GAAYE,GAAUD,KAGxBlL,EAAWya,GAGgB,qBAAlBC,eAAiC,gBAAiBA,cAAc7gL,YAAcoxK,IACvFjL,EAAWuJ,GAIO,UAAhB74H,EAAOx2C,OAAqB+wK,GAAYC,KAC1ClL,EAAWqa,EAEiE,qBAAnB1gC,iBACvDqmB,EAAWua,IAKK,QAAhB7pI,EAAOx2C,OACT8lK,EAAWwa,GAIO,WAAhB9pI,EAAOx2C,OACT8lK,EAAWsa,GAGTM,KAA+B5a,IAAasa,GAAkBta,IAAawa,GAAwC,qBAAlBE,eAAiC,gBAAiBA,cAAc7gL,YAC/Jg9F,EAAU4gF,EAAa,SAAS18K,QAAU87F,EAAU4gF,EAAa,SAAS18K,UAExD,UAAhB21C,EAAOx2C,KACoC,oBAAlCwgL,cAAcG,iBAAkCH,cAAcG,gBAAgB,gBACvF7a,EAAWuJ,GAKgC,oBAAlCmR,cAAcG,iBAAkCH,cAAcG,gBAAgB,gBACvF7a,EAAWuJ,IAMfkO,aAAuB/7K,OAAS+7K,EAAY18K,SAC9CilK,EAAW8a,GAGTpqI,EAAO+2H,eACTzH,EAAWtvH,EAAO+2H,eAGf/2H,EAAOk3H,aAAiB5H,GAAcA,EAAS5kK,MAClDe,QAAQZ,IAAI,sBAAuBykK,EAAS5kK,MAAQ4kK,EAASpmK,YAAYwB,OAGtE4kK,GAAYgL,IACfhL,EAAWuJ,GAGNvJ,EAiCT,SAAS2H,EAAW8P,GASlBvsK,KAAKm9J,UAAY,SAAU0S,GACrBA,IACFtD,EAAcsD,IAiBlB7vK,KAAKqwD,UAAY,CACflwC,OAAO,EACPI,OAAO,GAUTvgB,KAAKo9J,eAAiB,WACpB,IACIb,EADAlsG,EAAYrwD,KAAKqwD,UAEjBssG,EAAW38J,KAAK28J,UAAY,CAC9Bx8I,MAAO,KACPI,MAAO,KACPgK,IAAK,MAeP,GAZ+B,oBAApB8lC,EAAUlwC,OAAwBuvJ,MAAgC/jF,EAAU4gF,EAAa,SAAS18K,SAC3GwgE,EAAUlwC,OAAQ,GAGW,oBAApBkwC,EAAU9vC,OAAwBmvJ,MAAgC/jF,EAAU4gF,EAAa,SAAS18K,SAC3GwgE,EAAU9vC,OAAQ,GAGS,oBAAlB8vC,EAAU9lC,KAAsBmlJ,MAAgC/jF,EAAU4gF,EAAa,SAAS18K,SACzGwgE,EAAU9lC,KAAM,IAGb8lC,EAAUlwC,QAAUkwC,EAAU9vC,QAAU8vC,EAAU9lC,IACrD,KAAM,sDA2BR,GAxBM8lC,EAAUlwC,QACdo8I,EAAe,KAEgB,oBAApBlsG,EAAUlwC,QACnBo8I,EAAelsG,EAAUlwC,OAG3BngB,KAAKg+J,cAAgB,IAAIsO,EAAUC,EAAa,CAC9Cv9K,KAAM,QACN6uF,WAAY79E,KAAK69E,WACjBtR,WAAYvsE,KAAKusE,WACjBqwF,sBAAuB58J,KAAK48J,uBAAyB,EACrDF,YAAa18J,KAAK08J,YAClBH,aAAcA,EACdI,SAAUA,EAASx8I,MACnBi4I,UAAWp4J,KAAKo4J,UAChB4E,YAAah9J,KAAKg9J,cAGf3sG,EAAU9vC,OACbvgB,KAAKg+J,cAAcZ,kBAIjB/sG,EAAU9vC,MAAO,CACrBg8I,EAAe,KAEgB,oBAApBlsG,EAAU9vC,QACnBg8I,EAAelsG,EAAU9vC,OAG3B,IAAIuvJ,EAAYvD,EAEhB,GAAImD,KAAiCr/G,EAAUlwC,OAAoC,oBAApBkwC,EAAUlwC,MAAsB,CAC7F,IAAIopE,EAAaoC,EAAU4gF,EAAa,SAAS,GAE7C1M,IACFiQ,EAAY,IAAIC,GACNr4J,SAAS6xE,GAEfgzE,GAAgBA,IAAiB4S,IAGnC5S,EAAe8B,KAGjByR,EAAY,IAAIC,GACNr4J,SAAS6xE,GAIvBvpF,KAAKk+J,cAAgB,IAAIoO,EAAUwD,EAAW,CAC5C9gL,KAAM,QACNuxB,MAAOvgB,KAAKugB,MACZy9G,OAAQh+H,KAAKg+H,OACbgyC,cAAehwK,KAAKgwK,eAAiB,GACrCtT,YAAa18J,KAAK08J,YAClBH,aAAcA,EACdI,SAAUA,EAASp8I,MACnB63I,UAAWp4J,KAAKo4J,UAChB4E,YAAah9J,KAAKg9J,YAClBC,WAAYj9J,KAAKi9J,WACjBC,gBAAiBl9J,KAAKk9J,gBACtBH,UAAW/8J,KAAK+8J,UAEhBF,QAAS78J,KAAK68J,UAIXxsG,EAAUlwC,OACbngB,KAAKk+J,cAAcd,iBAIvB,GAAM/sG,EAAUlwC,OAAWkwC,EAAU9vC,MAAO,CAC1C,IAAIpyB,EAAO6R,KACPiwK,GAAmD,IAAhCP,KAEnBr/G,EAAUlwC,iBAAiBovJ,GAAyBl/G,EAAU9vC,QAEnC,IAApB8vC,EAAUlwC,QAAsC,IAApBkwC,EAAU9vC,OAAkB8vC,EAAUlwC,QAAUkwC,EAAU9vC,SAD/F0vJ,GAAmB,IAKI,IAArBA,GACF9hL,EAAK6vK,cAAgB,KACrB7vK,EAAK+vK,cAAcd,kBAEnBjvK,EAAK+vK,cAAcuO,cAAa,WAC9Bt+K,EAAK6vK,cAAcyO,cAAa,WAE9Bt+K,EAAK+vK,cAAcd,iBACnBjvK,EAAK6vK,cAAcZ,uBAMrB/sG,EAAU9lC,MACdgyI,EAAe,KAEc,oBAAlBlsG,EAAU9lC,MACnBgyI,EAAelsG,EAAU9lC,KAG3BvqB,KAAKi+J,YAAc,IAAIqO,EAAUC,EAAa,CAC5Cv9K,KAAM,MACN+tK,UAAW/8J,KAAK+8J,WAAa,IAC7Bj9B,QAAS9/H,KAAK8/H,SAAW,GACzB48B,YAAa18J,KAAK08J,YAClBH,aAAcA,EACdI,SAAUA,EAASpyI,MAErBvqB,KAAKi+J,YAAYb,mBAiBrBp9J,KAAKq9J,cAAgB,SAAUl8J,GAC7BA,EAAWA,GAAY,aAEnBnB,KAAKg+J,eACPh+J,KAAKg+J,cAAcX,eAAc,SAAU6S,GACzC/uK,EAAS+uK,EAAS,YAIlBlwK,KAAKk+J,eACPl+J,KAAKk+J,cAAcb,eAAc,SAAU6S,GACzC/uK,EAAS+uK,EAAS,YAIlBlwK,KAAKi+J,aACPj+J,KAAKi+J,YAAYZ,eAAc,SAAU6S,GACvC/uK,EAAS+uK,EAAS,WAaxBlwK,KAAKu9J,eAAiB,WAChBv9J,KAAKg+J,eACPh+J,KAAKg+J,cAAcT,iBAGjBv9J,KAAKk+J,eACPl+J,KAAKk+J,cAAcX,iBAGjBv9J,KAAKi+J,aACPj+J,KAAKi+J,YAAYV,kBAYrBv9J,KAAKw9J,gBAAkB,WACjBx9J,KAAKg+J,eACPh+J,KAAKg+J,cAAcR,kBAGjBx9J,KAAKk+J,eACPl+J,KAAKk+J,cAAcV,kBAGjBx9J,KAAKi+J,aACPj+J,KAAKi+J,YAAYT,mBAoBrBx9J,KAAKgiE,QAAU,SAAU7gE,GACvB,IAAI0oF,EAAS,GAkBb,OAhBI7pF,KAAKg+J,gBACPn0E,EAAO1pE,MAAQngB,KAAKg+J,cAAch8F,WAGhChiE,KAAKk+J,gBACPr0E,EAAOtpE,MAAQvgB,KAAKk+J,cAAcl8F,WAGhChiE,KAAKi+J,cACPp0E,EAAOt/D,IAAMvqB,KAAKi+J,YAAYj8F,WAG5B7gE,GACFA,EAAS0oF,GAGJA,GAWT7pF,KAAKwnI,QAAU,WACTxnI,KAAKg+J,gBACPh+J,KAAKg+J,cAAcx2B,UACnBxnI,KAAKg+J,cAAgB,MAGnBh+J,KAAKk+J,gBACPl+J,KAAKk+J,cAAc12B,UACnBxnI,KAAKk+J,cAAgB,MAGnBl+J,KAAKi+J,cACPj+J,KAAKi+J,YAAYz2B,UACjBxnI,KAAKi+J,YAAc,OAiBvBj+J,KAAKktK,WAAa,SAAU/rK,GA0B1B,SAAS+rK,EAAWprG,EAAMquG,GACxB,GAAsB,qBAAXjuG,OAAwB,CACjC,IAAI0rG,EAmBR,SAA4BC,GAC1B,IAIIryJ,EAJAsmD,EAAO7N,EAAI2N,gBAAgB,IAAIC,KAAK,CAACgsG,EAAUj7K,WAAY,qCAAuCi7K,EAAU39K,KAAO,gBAAiB,CACtIlB,KAAM,4BAEJizE,EAAS,IAAIC,OAAOJ,GAGxB,GAAmB,qBAAR7N,EACTz4C,EAAMy4C,MACD,IAAyB,qBAAdm8G,UAGhB,KAAM,sCAFN50J,EAAM40J,UAMR,OADA50J,EAAI6mD,gBAAgBP,GACbG,EAnCW6rG,EAAmB,SAAkBN,GACnDn5E,aAAY,IAAIo5E,gBAAiBC,cAAcF,OAGjDI,EAAU93E,UAAY,SAAU/5F,GAC9Bo0K,EAAWp0K,EAAMqE,OAGnBwtK,EAAUv5E,YAAYvyB,OACjB,CACL,IAAIuzE,EAAS,IAAIC,WACjBD,EAAOq4B,cAAc5rG,GAErBuzE,EAAOxxH,OAAS,SAAU9nB,GACxBo0K,EAAWp0K,EAAM1I,OAAOmC,UAzC9BwK,KAAKgiE,SAAQ,SAAUF,GACjBA,EAAK3hD,OAAS2hD,EAAKvhD,MACrB2sJ,EAAWprG,EAAK3hD,OAAO,SAAUkwJ,GAC/BnD,EAAWprG,EAAKvhD,OAAO,SAAU+vJ,GAC/BnvK,EAAS,CACPgf,MAAOkwJ,EACP9vJ,MAAO+vJ,UAIJxuG,EAAK3hD,MACd+sJ,EAAWprG,EAAK3hD,OAAO,SAAUkwJ,GAC/BlvK,EAAS,CACPgf,MAAOkwJ,OAGFvuG,EAAKvhD,OACd2sJ,EAAWprG,EAAKvhD,OAAO,SAAU+vJ,GAC/BnvK,EAAS,CACPof,MAAO+vJ,WAuDjBtwK,KAAKuwK,YAAc,WACjBjE,EAAUiE,YAAY,CACpBpwJ,MAAOngB,KAAKg+J,cACZz9I,MAAOvgB,KAAKk+J,cACZ3zI,IAAKvqB,KAAKi+J,eAiBdj+J,KAAKy9J,KAAO,SAAUltK,IACpBA,EAAOA,GAAQ,CACb4vB,OAAO,EACPI,OAAO,EACPgK,KAAK,IAGIpK,OAASngB,KAAKg+J,eACvBh+J,KAAKg+J,cAAcP,KAA2B,kBAAfltK,EAAK4vB,MAAqB5vB,EAAK4vB,MAAQ,IAGlE5vB,EAAKgwB,OAASvgB,KAAKk+J,eACvBl+J,KAAKk+J,cAAcT,KAA2B,kBAAfltK,EAAKgwB,MAAqBhwB,EAAKgwB,MAAQ,IAGlEhwB,EAAKg6B,KAAOvqB,KAAKi+J,aACrBj+J,KAAKi+J,YAAYR,KAAyB,kBAAbltK,EAAKg6B,IAAmBh6B,EAAKg6B,IAAM,KAxuBtE+hJ,EAAU72K,QAAU,QAKhBrH,EAAOC,QAAUi+K,OAMlB,KAFuB,EAAF,WACpB,OAAOA,GACR,QAFmB,OAEnB,aAGHA,EAAUqC,YAAc,SAAU3/K,EAAMmS,GACtC,IAAKA,EACH,KAAM,yBAGRlQ,QAAQZ,IAAI,qBAAgC,QAATrB,EAAiB,QAAUA,EAAO,UAAY,eACjFq+K,EAAYmD,OAAM,SAAUrD,EAAStsE,GACtB,QAAT7xG,GAAkB6xG,IAAU7xG,EAAO,QAAUmS,GAC/CA,EAASgsK,GAGE,QAATn+K,GAAkBmS,GACpBA,EAASgsK,EAAStsE,EAAMx4F,QAAQ,OAAQ,SAkB9CikK,EAAUiE,YAAc,SAAUhyK,GAChCtN,QAAQZ,IAAI,sCACZkO,EAAUA,GAAW,IAET4hB,OAAS5hB,EAAQgiB,OAAShiB,EAAQgsB,IAC5ChsB,EAAQ4hB,MAAM+sJ,YAAW,SAAUuD,GACjClyK,EAAQgiB,MAAM2sJ,YAAW,SAAUwD,GACjCnyK,EAAQgsB,IAAI2iJ,YAAW,SAAUyD,GAC/BtD,EAAYC,MAAM,CAChBsD,UAAWH,EACXI,UAAWH,EACXI,QAASH,aAKRpyK,EAAQ4hB,OAAS5hB,EAAQgiB,MAClChiB,EAAQ4hB,MAAM+sJ,YAAW,SAAUuD,GACjClyK,EAAQgiB,MAAM2sJ,YAAW,SAAUwD,GACjCrD,EAAYC,MAAM,CAChBsD,UAAWH,EACXI,UAAWH,UAIRnyK,EAAQ4hB,OAAS5hB,EAAQgsB,IAClChsB,EAAQ4hB,MAAM+sJ,YAAW,SAAUuD,GACjClyK,EAAQgsB,IAAI2iJ,YAAW,SAAUyD,GAC/BtD,EAAYC,MAAM,CAChBsD,UAAWH,EACXK,QAASH,UAINpyK,EAAQgiB,OAAShiB,EAAQgsB,IAClChsB,EAAQgiB,MAAM2sJ,YAAW,SAAUwD,GACjCnyK,EAAQgsB,IAAI2iJ,YAAW,SAAUyD,GAC/BtD,EAAYC,MAAM,CAChBuD,UAAWH,EACXI,QAASH,UAINpyK,EAAQ4hB,MACjB5hB,EAAQ4hB,MAAM+sJ,YAAW,SAAUuD,GACjCpD,EAAYC,MAAM,CAChBsD,UAAWH,OAGNlyK,EAAQgiB,MACjBhiB,EAAQgiB,MAAM2sJ,YAAW,SAAUwD,GACjCrD,EAAYC,MAAM,CAChBuD,UAAWH,OAGNnyK,EAAQgsB,KACjBhsB,EAAQgsB,IAAI2iJ,YAAW,SAAUyD,GAC/BtD,EAAYC,MAAM,CAChBwD,QAASH,QAqpBjBlU,EAAWkS,YAAcrC,EAAUqC,YAcnClS,EAAW8T,YAAcjE,EAAUiE,YAGjCjE,EAAU7P,WAAaA,EAGzB,IAEWsU,KAyFU,qBAAX7iL,EAAyBA,EAAS,OApFpB,qBAAXD,QAIW,qBAAXC,IAIXA,EAAOmG,UAAY,CACjBC,UAhBuB,sFAiBvBg1J,aAAc,cAGXp7J,EAAO+C,UACV/C,EAAO+C,QAAU,IAGe,qBAAvB/C,EAAO+C,QAAQZ,KAAuD,qBAAzBnC,EAAO+C,QAAQW,QACrE1D,EAAO+C,QAAQW,MAAQ1D,EAAO+C,QAAQZ,IAAMnC,EAAO+C,QAAQZ,KAAO,WAChEY,QAAQZ,IAAI9C,aAIQ,qBAAb0I,WAET86K,EAAK96K,SAAW,CACdsM,gBAAiB,CACf5J,YAAa,WACX,MAAO,MAKb1C,SAAS4B,cAAgB5B,SAAS+6K,cAAgB/6K,SAASg7K,iBAAmB,WAC5E,IAAI1iL,EAAM,CACRmvI,WAAY,WACV,OAAOnvI,GAET4a,KAAM,aACN+L,MAAO,aACP62J,UAAW,aACX/rC,UAAW,WACT,MAAO,IAETvgI,MAAO,IAET,OAAOlR,GAGTwiL,EAAKG,iBAAmB,cAGF,qBAAbn1J,WAETg1J,EAAKh1J,SAAW,CACdF,SAAU,QACVF,KAAM,GACNxY,KAAM,KAIY,qBAAX6uI,SAET++B,EAAK/+B,OAAS,CACZ52I,MAAO,EACPD,OAAQ,IAIO,qBAAR84D,IAET88G,EAAK98G,IAAM,CACT2N,gBAAiB,WACf,MAAO,IAETS,gBAAiB,WACf,MAAO,MAOb0uG,EAAK9iL,OAASC,GAQhB,IAAI2hB,EAAwB5hB,OAAO4hB,sBAEnC,GAAqC,qBAA1BA,EACT,GAA2C,qBAAhC4gI,4BAET5gI,EAAwB4gI,iCACnB,GAAwC,qBAA7BC,yBAEhB7gI,EAAwB6gI,8BACnB,GAAuC,qBAA5BE,wBAEhB/gI,EAAwB+gI,6BACnB,GAAqC,qBAA1B/gI,EAAuC,CAEvD,IAAIshK,EAAW,EAGfthK,EAAwB,SAA+B1O,EAAUtI,GAC/D,IAAIu4K,GAAW,IAAIvjL,MAAOH,UACtB2jL,EAAaj0K,KAAKC,IAAI,EAAG,IAAM+zK,EAAWD,IAC1C1nK,EAAKvK,YAAW,WAClBiC,EAASiwK,EAAWC,KACnBA,GAEH,OADAF,EAAWC,EAAWC,EACf5nK,GAOb,IAAIyG,EAAuBjiB,OAAOiiB,qBAEE,qBAAzBA,IACiC,qBAA/BohK,2BAETphK,EAAuBohK,2BACqB,qBAA5BC,wBAEhBrhK,EAAuBqhK,wBACoB,qBAA3BC,uBAEhBthK,EAAuBshK,uBACkB,qBAAzBthK,IAEhBA,EAAuB,SAA8BzG,GACnDnE,aAAamE,MAMnB,IAAIuuI,EAAe/pJ,OAAO+pJ,aAEE,qBAAjBA,IACyB,qBAAvBC,qBAETD,EAAeC,oBAGc,qBAApBw5B,kBAETz5B,EAAey5B,kBAMnB,IAAIx9G,EAAMhmE,OAAOgmE,IAEE,qBAARA,GAA4C,qBAAdm8G,YAEvCn8G,EAAMm8G,WAGiB,qBAAd/7K,WAA+D,qBAA3BA,UAAUi1J,eAEX,qBAAjCj1J,UAAUg4J,qBACnBh4J,UAAUi1J,aAAej1J,UAAUg4J,oBAGI,qBAA9Bh4J,UAAUi4J,kBACnBj4J,UAAUi1J,aAAej1J,UAAUi4J,kBAIvC,IAAI2T,GAAkD,IAAzC5rK,UAAUC,UAAUjF,QAAQ,YAAqBgF,UAAUisK,cAAgBjsK,UAAUgsK,kBAC9FL,IAAY/xK,OAAOkyK,QAAkD,IAAzC9rK,UAAUC,UAAUjF,QAAQ,QACxDwwK,EAAYxrK,UAAUC,UAAU8H,cAAc/M,QAAQ,YAAc,GAAK,aAAcpB,QAAU,OAAOkD,KAAKkD,UAAUC,WACvHyrK,GAAYC,IAAYC,KAAY5rK,UAAUg4J,oBAAsBqlB,MAA0E,IAA1Dr9K,UAAUC,UAAU8H,cAAc/M,QAAQ,WAC9HywK,EAAW,iCAAiC3uK,KAAKkD,UAAUC,WAE3DwrK,IAAaC,IAAsD,IAA1C1rK,UAAUC,UAAUjF,QAAQ,WACvDywK,GAAW,EACXC,GAAW,GAGb,IAAIgQ,EAAc9hL,OAAO8hL,YA6BzB,SAAS/C,EAAYx0G,GAInB,GAAc,IAAVA,EACF,MAAO,UAGT,IAAI5oE,EAAIke,SAAS1Q,KAAK8C,MAAM9C,KAAK/M,IAAImoE,GAASp7D,KAAK/M,IAP3C,MAOoD,IAC5D,OAAQmoE,EAAQp7D,KAAKmoE,IARb,IAQoB31E,IAAI+hL,YAAY,GAAK,IAPrC,CAAC,QAAS,KAAM,KAAM,KAAM,MAOqB/hL,GAW/D,SAAS8+K,EAAmBkD,EAAMxY,GAChC,IAAKwY,EACH,KAAM,2BAGR,IAAKA,EAAK5iL,KACR,IACE4iL,EAAK5iL,KAAO,aACZ,MAAOiF,IAGX,IAAI4sK,GAAiB+Q,EAAK5iL,MAAQ,cAAcwK,MAAM,KAAK,GAO3D,IALoC,IAAhCqnK,EAAcxxK,QAAQ,OAExBwxK,EAAgBA,EAAcrnK,MAAM,KAAK,IAGvC4/J,IAAuC,IAA3BA,EAAS/pK,QAAQ,KAAa,CAC5C,IAAIwiL,EAAWzY,EAAS5/J,MAAM,KAC9B4/J,EAAWyY,EAAS,GACpBhR,EAAgBgR,EAAS,GAG3B,IAAIC,GAAgB1Y,GAAYh8J,KAAKg6B,MAAsB,WAAhBh6B,KAAKovG,UAAyB,WAAa,IAAMq0D,EAE5F,GAA0C,qBAA/BxsK,UAAUgsK,iBACnB,OAAOhsK,UAAUgsK,iBAAiBuR,EAAME,GACnC,GAAoC,qBAAzBz9K,UAAUisK,WAC1B,OAAOjsK,UAAUisK,WAAWsR,EAAME,GAGpC,IAAIvR,EAAYtqK,SAAS4B,cAAc,KACvC0oK,EAAU5kJ,KAAOs4C,EAAI2N,gBAAgBgwG,GACrCrR,EAAUC,SAAWsR,EACrBvR,EAAU9gK,MAAQ,6CACjBxJ,SAASyE,MAAQzE,SAASsM,iBAAiB5J,YAAY4nK,GAEzB,oBAApBA,EAAUzjH,MACnByjH,EAAUzjH,SAEVyjH,EAAUltK,OAAS,SACnBktK,EAAUt7J,cAAc,IAAIw7J,WAAW,QAAS,CAC9C50F,KAAM59E,OACNgW,SAAS,EACTg5C,YAAY,MAIhBgX,EAAIoO,gBAAgBk+F,EAAU5kJ,MAOhC,SAAS+1J,IAEP,MAAsB,qBAAXzjL,QAAsD,WAA5BK,EAAQL,OAAO8jL,UAAiD,aAAxB9jL,OAAO8jL,QAAQ/iL,SAKrE,qBAAZ+iL,GAAyD,WAA9BzjL,EAAQyjL,EAAQC,YAA4BD,EAAQC,SAASC,WAKrB,YAApD,qBAAd59K,UAA4B,YAAc/F,EAAQ+F,aAA2D,kBAAxBA,UAAUC,WAA0BD,UAAUC,UAAUjF,QAAQ,aAAe,GAOlL,SAASs8F,EAAUtmB,EAAQlsD,GACzB,OAAKksD,GAAWA,EAAOsmB,UAIhBtmB,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACzC,OAAOA,EAAEsV,QAAUA,GAAQ,YAJpB,GAQX,SAAS+4J,EAAa7sG,EAAQxsE,GACxB,cAAeA,EACjBA,EAAQugJ,UAAY/zE,EACX,iBAAkBxsE,EAC3BA,EAAQ6mK,aAAer6F,EAEvBxsE,EAAQugJ,UAAY/zE,EA1IG,qBAAhB0qG,GAA4D,qBAAtBoC,oBAC/CpC,EAAcoC,mBAKW,qBAAhBpC,GAEiC,qBAA/BA,EAAYphL,UAAU2nJ,OAC/By5B,EAAYphL,UAAU2nJ,KAAO,WAC3Bt2I,KAAK2rF,YAAYz4F,SAAQ,SAAUwf,GACjCA,EAAM4jI,YAwKZg2B,EAAUoC,mBAAqBA,EAC/BpC,EAAU3gF,UAAYA,EACtB2gF,EAAU8F,gBA/BZ,SAAyBC,EAAWlxK,GAElC,GAAoB,qBAATmxK,KACT,MAAM,IAAIvgL,MAAM,0DAGlB,IAAIsjJ,EAAS,IAAIi9B,KAAKC,OAClB94D,EAAU,IAAI64D,KAAKE,QACnBC,EAAQH,KAAKG,MACbC,EAAa,IAAIp9B,WAErBo9B,EAAW7uJ,OAAS,SAAU5vB,GACbwlH,EAAQ1jC,OAAO/1E,KAAKxK,QAC1BtC,SAAQ,SAAU2F,GACzBw8I,EAAOpG,KAAKp2I,MAEdw8I,EAAOiB,OACP,IAAIq8B,EAAqBF,EAAMG,qBAAqBv9B,EAAOw9B,UAAWx9B,EAAOvjI,SAAUujI,EAAO1iI,MAC1FjY,EAAOsF,KAAKxK,OAAOlG,MAAM+lJ,EAAOy9B,cAChCC,EAAU,IAAIlxG,KAAK,CAAC8wG,EAAoBj4K,GAAO,CACjD1L,KAAM,eAERmS,EAAS4xK,IAGXL,EAAWl9B,kBAAkB68B,IAO7B/F,EAAUU,YAAcA,EACxBV,EAAUoF,WAAaA,EAezB,IAAIzC,EAAU,GAYd,SAASS,IACP,GAAI7P,GAAaC,GAAYG,EAC3B,OAAO,EAGE5rK,UAAU2+K,WAArB,IAIgBC,EAAWC,EAHvBC,EAAO9+K,UAAUC,UACjB8+K,EAAc,GAAK1+K,WAAWL,UAAU2+K,YACxCz8H,EAAezoC,SAASzZ,UAAU2+K,WAAY,IAwBlD,OArBIjT,GAAYC,KACdiT,EAAYE,EAAK9jL,QAAQ,UACzB+jL,EAAcD,EAAKngI,UAAUigI,EAAY,KAIF,KAApCC,EAAKE,EAAY/jL,QAAQ,QAC5B+jL,EAAcA,EAAYpgI,UAAU,EAAGkgI,KAGA,KAApCA,EAAKE,EAAY/jL,QAAQ,QAC5B+jL,EAAcA,EAAYpgI,UAAU,EAAGkgI,IAGzC38H,EAAezoC,SAAS,GAAKslK,EAAa,IAEtCnlK,MAAMsoC,KACR68H,EAAc,GAAK1+K,WAAWL,UAAU2+K,YACxCz8H,EAAezoC,SAASzZ,UAAU2+K,WAAY,KAGzCz8H,GAAgB,GAoCzB,SAAS8nH,EAAoBkO,EAAa/mI,GACxC,IAAIr3C,EAAO6R,KAEX,GAA2B,qBAAhBusK,EACT,KAAM,4CAGR,GAA6B,qBAAlBiD,cACT,KAAM,6HAQR,GAAoB,WALpBhqI,EAASA,GAAU,CAEjBm3H,SAAU,eAGD3tK,KAAkB,CAEzB,IAAIq2E,EADN,GAAIsmB,EAAU4gF,EAAa,SAAS18K,QAAU87F,EAAU4gF,EAAa,SAAS18K,OAGtEwE,UAAUi4J,iBACdjnF,EAAS,IAAI0qG,GACNr4J,SAASi0E,EAAU4gF,EAAa,SAAS,IAGhDlnG,EAAS,IAAI0qG,EAAYpkF,EAAU4gF,EAAa,UAGlDA,EAAclnG,EAGX7/B,EAAOm3H,WAA2E,IAA/Dn3H,EAAOm3H,SAAS/pK,WAAWwJ,cAAc/M,QAAQ,WACvEm2C,EAAOm3H,SAAWoD,EAAW,aAAe,aAG1Cv6H,EAAOm3H,UAAyD,cAA7Cn3H,EAAOm3H,SAAS/pK,WAAWwJ,eAAmC/H,UAAUi4J,kBAE7F9mH,EAAOm3H,SAAW,aAItB,IA6TIkQ,EA7TAwG,EAAe,GA8MnB,SAASC,IACPnlL,EAAKolL,WAAWviL,MAAK,IAAInD,MAAOH,WAEE,oBAAvB83C,EAAOw3H,aAChBx3H,EAAOw3H,YAAY7uK,EAAKolL,WAAWplL,EAAKolL,WAAW1jL,OAAS,GAAI1B,EAAKolL,YAIzE,SAASC,EAAYC,GACnB,OAAI5G,GAAiBA,EAAclQ,SAC1BkQ,EAAclQ,SAGhB8W,EAAa9W,UAAY,aA2FlC,SAAS+W,IACPL,EAAe,GACfxG,EAAgB,KAChB1+K,EAAKolL,WAAa,GA/SpBvzK,KAAKs+J,gBAAkB,WACrB,OAAO+U,GAWTrzK,KAAK+0J,OAAS,WAEZ5mK,EAAK2zE,KAAO,KACZ3zE,EAAKogL,oBACLpgL,EAAKolL,WAAa,GAClBI,EAAY,GACZN,EAAe,GACf,IAAIO,EAAgBpuI,EAEfA,EAAOk3H,aACVzrK,QAAQZ,IAAI,mDAAoDujL,GAG9D/G,IAEFA,EAAgB,MAGd9M,IAAa2P,MAEfkE,EAAgB,aAG2B,oBAAlCpE,cAAcG,iBAAkCiE,EAAcjX,WAClE6S,cAAcG,gBAAgBiE,EAAcjX,YAC1Cn3H,EAAOk3H,aACVzrK,QAAQU,KAAK,qDAAsDiiL,EAAcjX,UAGnFiX,EAAcjX,SAA2B,UAAhBn3H,EAAOx2C,KAAmB,aAAe,eAKtE,IACE69K,EAAgB,IAAI2C,cAAcjD,EAAaqH,GAE/CpuI,EAAOm3H,SAAWiX,EAAcjX,SAChC,MAAO1oK,GAEP44K,EAAgB,IAAI2C,cAAcjD,GAIhCqH,EAAcjX,WAAa6S,cAAcG,iBAAmB,sBAAuB9C,IAA6E,IAA5DA,EAAcgH,kBAAkBD,EAAcjX,YAC/In3H,EAAOk3H,aACVzrK,QAAQU,KAAK,qDAAsDiiL,EAAcjX,WAKrFkQ,EAAcphB,gBAAkB,SAAUx3J,GAKxC,GAJIA,EAAEmM,MACJuzK,EAAU3iL,KAAK,oBAAsBg8K,EAAY/4K,EAAEmM,KAAKoF,OAG1B,kBAArBggC,EAAO4yH,WAiBbnkK,EAAEmM,OAASnM,EAAEmM,KAAKoF,MAAQvR,EAAEmM,KAAKoF,KAAO,KAAOrX,EAAK2zE,KAGnD3zE,EAAK2lL,oBACP3lL,EAAK2lL,kBAAkB,IAAIjyG,KAAK,GAAI,CAClC7yE,KAAMwkL,EAAYI,MAEpBzlL,EAAK2lL,kBAAoB,OAM7B3lL,EAAK2zE,KAAOt8B,EAAOuuI,cAAgB9/K,EAAEmM,KAAO,IAAIyhE,KAAK,CAAC5tE,EAAEmM,MAAO,CAC7DpR,KAAMwkL,EAAYI,KAGhBzlL,EAAK2lL,oBACP3lL,EAAK2lL,kBAAkB3lL,EAAK2zE,MAC5B3zE,EAAK2lL,kBAAoB,YAnCzB,GAAI7/K,EAAEmM,MAAQnM,EAAEmM,KAAKoF,OACnB6tK,EAAariL,KAAKiD,EAAEmM,MACpBkzK,IAEsC,oBAA3B9tI,EAAOimH,iBAAgC,CAEhD,IAAI3pF,EAAOt8B,EAAOuuI,cAAgB9/K,EAAEmM,KAAO,IAAIyhE,KAAK,CAAC5tE,EAAEmM,MAAO,CAC5DpR,KAAMwkL,EAAYI,KAEpBpuI,EAAOimH,gBAAgB3pF,KA8B/B+qG,EAAcrhB,QAAU,WACtBmoB,EAAU3iL,KAAK,YAGjB67K,EAAcxhB,QAAU,WACtBsoB,EAAU3iL,KAAK,WAGjB67K,EAAcvhB,SAAW,WACvBqoB,EAAU3iL,KAAK,YAGjB67K,EAAcnhB,OAAS,WACrBioB,EAAU3iL,KAAK,YAGjB67K,EAAc/oJ,QAAU,SAAUlyB,GAC3BA,IAIAA,EAAM1B,OACT0B,EAAM1B,KAAO,gBAGfyjL,EAAU3iL,KAAK,UAAYY,GAEtB4zC,EAAOk3H,eAE2D,IAAjE9qK,EAAM1B,KAAK0C,WAAWwJ,cAAc/M,QAAQ,gBAC9C4B,QAAQW,MAAM,iGAAkGA,IACtC,IAAjEA,EAAM1B,KAAK0C,WAAWwJ,cAAc/M,QAAQ,gBACrD4B,QAAQW,MAAM,cAAegiL,EAAcjX,SAAU,sBAAuB/qK,IACN,IAA7DA,EAAM1B,KAAK0C,WAAWwJ,cAAc/M,QAAQ,YACrD4B,QAAQW,MAAM,+BAAgCA,GAExB,gBAAfA,EAAM1B,KACXe,QAAQW,MAAM,4IAA6IA,GACnI,8BAAfA,EAAM1B,KACfe,QAAQW,MAAM,sQAAuQA,GAC7P,wBAAfA,EAAM1B,KACfe,QAAQW,MAAM,yJAA0JA,GAChJ,iBAAfA,EAAM1B,KACfe,QAAQW,MAAM,+EAAgFA,GAE9FX,QAAQW,MAAM,sBAAuBA,IAI3C,SAAWoiL,GACT,IAAK7lL,EAAK8lL,iBAAmBpH,GAAyC,aAAxBA,EAAcllK,MAI1D,cAHO69B,EAAO0uI,eAEdrH,EAAcp7J,MAAM,KAItBvS,gBARF,EAQqB,KARrB,GAW4B,aAAxB2tK,EAAcllK,OAAgD,YAAxBklK,EAAcllK,OACtDklK,EAAcv2B,SAIc,kBAArB9wG,EAAO4yH,WAChBkb,IACAzG,EAAcp7J,MAAM+zB,EAAO4yH,YAI3ByU,EAAcp7J,MAAM,MAGlB+zB,EAAOknI,cACTlnI,EAAOknI,gBAWX1sK,KAAKuzK,WAAa,GA6BlBvzK,KAAKs2I,KAAO,SAAUn1I,GACpBA,EAAWA,GAAY,aAEvBhT,EAAK8lL,iBAAkB,EAElBpH,IAIL7sK,KAAK8zK,kBAAoB3yK,EAEG,cAAxB0rK,EAAcllK,OAChBklK,EAAcv2B,OAGgB,kBAArB9wG,EAAO4yH,WAChBl5J,YAAW,WACT/Q,EAAK2zE,KAAO,IAAID,KAAKwxG,EAAc,CACjCrkL,KAAMwkL,EAAYhuI,KAEpBr3C,EAAK2lL,kBAAkB3lL,EAAK2zE,QAC3B,OAYP9hE,KAAKkV,MAAQ,WACN23J,GAIuB,cAAxBA,EAAcllK,OAChBklK,EAAc33J,SAYlBlV,KAAKs6I,OAAS,WACPuyB,GAIuB,WAAxBA,EAAcllK,OAChBklK,EAAcvyB,UAYlBt6I,KAAKuuK,kBAAoB,WACnB1B,GAAyC,cAAxBA,EAAcllK,OACjCxZ,EAAKmoJ,KAAKo9B,GAGZA,KAuBF1zK,KAAKo+J,oBAAsB,WACzB,OAAOyO,GA2BT7sK,KAAK8hE,KAAO,KAUZ9hE,KAAK+uK,SAAW,WACd,OAAKlC,GAIEA,EAAcllK,OAHZ,YAOX,IAAIgsK,EAAY,GAUhB3zK,KAAKm0K,aAAe,WAClB,OAAOR,GAOoC,qBAAlCnuI,EAAO4uI,yBAChB5uI,EAAO4uI,wBAAyB,GAG9BjmL,EAAO6R,MAGX,SAAUg0K,IACR,GAAKnH,IAAmD,IAAlCrnI,EAAO4uI,uBAI7B,OAA8B,IAzEhC,WACE,GAAI,WAAY7H,GACd,IAAKA,EAAYttJ,OACf,OAAO,OAEJ,GAAI,UAAWstJ,GAEhBA,EAAY/jJ,MACd,OAAO,EAIX,OAAO,EA6DH6rJ,IACG7uI,EAAOk3H,aACVzrK,QAAQZ,IAAI,mCAGdlC,EAAKmoJ,aAIPp3I,WAAW80K,EAAQ,KAdrB,GAkBAh0K,KAAK9P,KAAO,sBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAiChB,SAASq/K,EAAoBhD,EAAa/mI,GACxC,IAAKmmD,EAAU4gF,EAAa,SAAS18K,OACnC,KAAM,mCAIR,IAMIykL,EANAnmL,EAAO6R,KAEPu0K,EAAc,GACdC,EAAe,GACf3W,GAAY,EACZ4W,EAAkB,EAElB7X,EAAwB,EAYxB8X,GApBJlvI,EAASA,GAAU,IAoBUkvI,gBA0B7B,SAASL,IACP,IAAsC,IAAlC7uI,EAAO4uI,uBAET,OAAO,EAGT,GAAI,WAAY7H,GACd,IAAKA,EAAYttJ,OACf,OAAO,OAEJ,GAAI,UAAWstJ,GAEhBA,EAAY/jJ,MACd,OAAO,EAIX,OAAO,EAyBT,SAASmsJ,EAAsBnvI,EAAQrkC,GACrC,SAASyzK,EAAkBpvI,EAAQnU,GACjC,IA4FIwjJ,EA5FAjY,EAAwBp3H,EAAOo3H,sBAE/BkY,EAActvI,EAAOsvI,YAAYxlL,MAAM,GACvCylL,EAAevvI,EAAOuvI,aAAazlL,MAAM,GACzCi9E,EAAa/mC,EAAO+mC,WACpByoG,EAA4BxvI,EAAOwvI,0BACnCN,EAAkBlvI,EAAOkvI,gBA2B7B,SAASO,EAAiB70K,EAAM80K,EAAeC,GAC7C,IAAIC,EAAWh4K,KAAKg6B,MAAMh3B,EAAKvQ,QAAUqlL,EAAgBC,IACrD1mG,EAAU,GACV4mG,EAAe74K,QAAQ4D,EAAKvQ,OAAS,IAAMulL,EAAW,IAC1D3mG,EAAQ,GAAKruE,EAAK,GAElB,IAAK,IAAIxQ,EAAI,EAAGA,EAAIwlL,EAAW,EAAGxlL,IAAK,CACrC,IAAIguH,EAAMhuH,EAAIylL,EACV9uH,EAAS/pD,OAAOY,KAAK8C,MAAM09G,IAAMtoF,UACjCggJ,EAAQ94K,OAAOY,KAAKiwE,KAAKuwC,IAAMtoF,UAC/BigJ,EAAU33D,EAAMr3D,EACpBkoB,EAAQ7+E,GAAK4lL,EAAkBp1K,EAAKmmD,GAASnmD,EAAKk1K,GAAQC,GAI5D,OADA9mG,EAAQ2mG,EAAW,GAAKh1K,EAAKA,EAAKvQ,OAAS,GACpC4+E,EAGT,SAAS+mG,EAAkBjvH,EAAQ+uH,EAAOC,GACxC,OAAOhvH,GAAU+uH,EAAQ/uH,GAAUgvH,EAGrC,SAASE,EAAaC,EAAeC,GAKnC,IAJA,IAAIngL,EAAS,IAAIogL,aAAaD,GAC1B3jH,EAAS,EACT6jH,EAAMH,EAAc7lL,OAEfD,EAAI,EAAGA,EAAIimL,EAAKjmL,IAAK,CAC5B,IAAI6oE,EAASi9G,EAAc9lL,GAC3B4F,EAAO8K,IAAIm4D,EAAQzG,GACnBA,GAAUyG,EAAO5oE,OAGnB,OAAO2F,EAiBT,SAASsgL,EAAcjqG,EAAM7Z,EAAQ5pD,GAGnC,IAFA,IAAIytK,EAAMztK,EAAOvY,OAERD,EAAI,EAAGA,EAAIimL,EAAKjmL,IACvBi8E,EAAKkqG,SAAS/jH,EAASpiE,EAAGwY,EAAO++D,WAAWv3E,IA/ElB,IAA1BgtK,IACFkY,EAAcW,EAAaX,EAAaE,GACxCD,EAAeU,EAAaV,EAAcC,GAEtCN,IACFI,EAAcG,EAAiBH,EAAaJ,EAAiBnoG,GAC7DwoG,EAAeE,EAAiBF,EAAcL,EAAiBnoG,KAIrC,IAA1BqwF,IACFkY,EAAcW,EAAaX,EAAaE,GAEpCN,IACFI,EAAcG,EAAiBH,EAAaJ,EAAiBnoG,KAK7DmoG,IACFnoG,EAAamoG,GAkEe,IAA1B9X,IACFiY,EA1BF,SAAoBmB,EAAaC,GAK/B,IAJA,IAAIpmL,EAASmmL,EAAYnmL,OAASomL,EAAapmL,OAC3C2F,EAAS,IAAIogL,aAAa/lL,GAC1BqmL,EAAa,EAER9mL,EAAQ,EAAGA,EAAQS,GAC1B2F,EAAOpG,KAAW4mL,EAAYE,GAC9B1gL,EAAOpG,KAAW6mL,EAAaC,GAC/BA,IAGF,OAAO1gL,EAeO2gL,CAAWrB,EAAaC,IAGV,IAA1BnY,IACFiY,EAAcC,GAGhB,IAAIsB,EAAoBvB,EAAYhlL,OAGhC4oE,EAAS,IAAIH,YADW,GAAyB,EAApB89G,GAE7BvqG,EAAO,IAAIjG,SAASnN,GAExBq9G,EAAcjqG,EAAM,EAAG,QAGvBA,EAAKxE,UAAU,EAAG,GAAyB,EAApB+uG,GAAuB,GAE9CN,EAAcjqG,EAAM,EAAG,QAGvBiqG,EAAcjqG,EAAM,GAAI,QAExBA,EAAKxE,UAAU,GAAI,IAAI,GAEvBwE,EAAKwqG,UAAU,GAAI,GAAG,GAEtBxqG,EAAKwqG,UAAU,GAAIzZ,GAAuB,GAE1C/wF,EAAKxE,UAAU,GAAIkF,GAAY,GAE/BV,EAAKxE,UAAU,GAAIkF,EAAaqwF,EAAwB,GAAG,GAE3D/wF,EAAKwqG,UAAU,GAA4B,EAAxBzZ,GAA2B,GAE9C/wF,EAAKwqG,UAAU,GAAI,IAAI,GAGvBP,EAAcjqG,EAAM,GAAI,QAExBA,EAAKxE,UAAU,GAAwB,EAApB+uG,GAAuB,GAM1C,IAJA,IAAIP,EAAMO,EACNhnL,EAAQ,GAGHQ,EAAI,EAAGA,EAAIimL,EAAKjmL,IACvBi8E,EAAKyqG,SAASlnL,EAAwB,MAAjBylL,EAAYjlL,IAAwB,GACzDR,GAAS,EAGX,GAAIiiC,EACF,OAAOA,EAAG,CACRonC,OAAQA,EACRoT,KAAMA,IAIVwoB,YAAY,CACV57B,OAAQA,EACRoT,KAAMA,IAIV,GAAIrmC,EAAO+wI,SACT3B,EAAkBpvI,GAAQ,SAAUplC,GAClCe,EAASf,EAAKq4D,OAAQr4D,EAAKyrE,aAF/B,CAOA,IAa0BgiG,EACtB2I,EAGAv0G,EAjBA2rG,GAasBC,EAbS+G,EAc/B4B,EAAYviH,EAAI2N,gBAAgB,IAAIC,KAAK,CAACgsG,EAAUj7K,WAAY,sCAAwCi7K,EAAU39K,KAAO,gBAAiB,CAC5IlB,KAAM,6BAEJizE,EAAS,IAAIC,OAAOs0G,IACjBA,UAAYA,EACZv0G,GAjBP2rG,EAAU93E,UAAY,SAAU/5F,GAC9BoF,EAASpF,EAAMqE,KAAKq4D,OAAQ18D,EAAMqE,KAAKyrE,MAEvC5X,EAAIoO,gBAAgBurG,EAAU4I,WAE9B5I,EAAUxrG,aAGZwrG,EAAUv5E,YAAY7uD,KApPG,IAAvBA,EAAOwwI,cACTpZ,EAAwB,GAGW,IAAjCp3H,EAAOo3H,wBACTA,EAAwB,KAGrBA,GAAyBA,EAAwB,KACpDA,EAAwB,GAGrBp3H,EAAOk3H,aACVzrK,QAAQZ,IAAI,4DAA8DusK,GAO/B,qBAAlCp3H,EAAO4uI,yBAChB5uI,EAAO4uI,wBAAyB,GA+BlCp0K,KAAK+0J,OAAS,WACZ,IAA8B,IAA1Bsf,IACF,KAAM,0CAGRoC,IACAC,EAAwB7qC,GAAW,EACnCgyB,GAAY,EAEoB,qBAArBr4H,EAAO4yH,WAChB4b,KA6MJh0K,KAAKs2I,KAAO,SAAUn1I,GACpBA,EAAWA,GAAY,aAGvB08J,GAAY,EACZ8W,EAAsB,CACpBD,gBAAiBA,EACjBnoG,WAAYA,EACZqwF,sBAAuBA,EACvBoY,0BAA2BP,EAC3BK,YAAaP,EACbQ,aAAwC,IAA1BnY,EAA8B,GAAK4X,EACjD+B,SAAU/wI,EAAO+wI,WAChB,SAAU99G,EAAQoT,GASnB19E,EAAK2zE,KAAO,IAAID,KAAK,CAACgK,GAAO,CAC3B78E,KAAM,cAWRb,EAAKsqE,OAAS,IAAIH,YAAYuT,EAAKpT,OAAOzB,YAU1C7oE,EAAK09E,KAAOA,EACZ19E,EAAKo+E,WAAamoG,GAAmBnoG,EACrCp+E,EAAK0vF,WAAaA,EAElB1vF,EAAK0B,OAAS4kL,EACdiC,GAAwB,EAEpBv1K,GACFA,EAAShT,EAAK2zE,UAKa,qBAAtBwqG,EAAU2C,UACnB3C,EAAU2C,QAAU,CAClBC,wBAAyB,KACzBl3B,aAAc/pJ,OAAO+pJ,cAAgB/pJ,OAAOgqJ,qBAI3Cq0B,EAAU2C,QAAQC,yBAA+E,WAApD5C,EAAU2C,QAAQC,wBAAwBvnK,QAC1F2kK,EAAU2C,QAAQC,wBAA0B,IAAI5C,EAAU2C,QAAQj3B,cAGpE,IAAI3gJ,EAAUi1K,EAAU2C,QAAQC,wBAE5ByH,EAAat/K,EAAQkzJ,wBAAwBgiB,GAC7CqK,EAAoB,CAAC,EAAG,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,OAkB1D/4F,EAA0C,qBAAtBr4C,EAAOq4C,WAA6B,KAAOr4C,EAAOq4C,WAQ1E,IAN+C,IAA3C+4F,EAAkBvnL,QAAQwuF,KACvBr4C,EAAOk3H,aACVzrK,QAAQZ,IAAI,oCAAsCu2C,KAAKI,UAAU4vI,EAAmB,KAAM,QAI1Fv/K,EAAQwhJ,qBACVy7B,EAAcj9K,EAAQwhJ,qBAAqBh7D,EAAY++E,EAAuBA,OACzE,KAAIvlK,EAAQshJ,sBAGjB,KAAM,+CAFN27B,EAAcj9K,EAAQshJ,sBAAsB96D,EAAY++E,EAAuBA,GAMjF+Z,EAAW3rC,QAAQspC,GAEd9uI,EAAOq4C,aACVA,EAAay2F,EAAYz2F,YAqB3B,IAAItR,EAA0C,qBAAtB/mC,EAAO+mC,WAA6B/mC,EAAO+mC,WAAal1E,EAAQk1E,YAAc,OAElGA,EAAa,OAASA,EAAa,QAEhC/mC,EAAOk3H,aACVzrK,QAAQZ,IAAI,qDAIXm1C,EAAOk3H,aACNl3H,EAAOkvI,iBACTzjL,QAAQZ,IAAI,wBAA0Bm1C,EAAOkvI,iBAIjD,IAAI7oC,GAAW,EAwDf,SAAS4qC,IACPlC,EAAc,GACdC,EAAe,GACfC,EAAkB,EAClBiC,GAAwB,EACxB7Y,GAAY,EACZhyB,GAAW,EACXx0I,EAAU,KACVlJ,EAAKomL,YAAcA,EACnBpmL,EAAKqmL,aAAeA,EACpBrmL,EAAKyuK,sBAAwBA,EAC7BzuK,EAAKumL,gBAAkBA,EACvBvmL,EAAKo+E,WAAaA,EAClBp+E,EAAKsmL,gBAAkBA,EACvBoC,EAAwB,CACtBt7K,KAAM,GACN27B,MAAO,GACPu9I,gBAAiB,GAIrB,SAASf,IACHY,IACFA,EAAYx7B,eAAiB,KAC7Bw7B,EAAY9rI,aACZ8rI,EAAc,MAGZqC,IACFA,EAAWnuI,aACXmuI,EAAa,MAGfF,IAhFFz2K,KAAKkV,MAAQ,WACX22H,GAAW,GAWb7rI,KAAKs6I,OAAS,WACZ,IAA8B,IAA1B+5B,IACF,KAAM,0CAGR,IAAKxW,EAMH,OALKr4H,EAAOk3H,aACVzrK,QAAQZ,IAAI,4CAGd2P,KAAK+0J,SAIPlpB,GAAW,GAWb7rI,KAAKuuK,kBAAoB,WACvB/oI,EAAO4uI,wBAAyB,EAE5BvW,GACF79J,KAAKs2I,KAAKo9B,GAGZA,KAwCF1zK,KAAK9P,KAAO,sBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAGd,IAAIwmL,GAAwB,EAsE5BpC,EAAYx7B,eApEZ,SAAqC7kJ,GACnC,IAAI43I,EAaJ,IAT8B,IAA1BwoC,MACG7uI,EAAOk3H,aACVzrK,QAAQZ,IAAI,8BAGdikL,EAAY9rI,aACZq1H,GAAY,GAGTA,EAAL,CAiBK6Y,IACHA,GAAwB,EAEpBlxI,EAAOsxI,uBACTtxI,EAAOsxI,wBAGLtxI,EAAOknI,cACTlnI,EAAOknI,gBAIX,IAAInxK,EAAOtH,EAAEo2J,YAAYrQ,eAAe,GAEpC+8B,EAAS,IAAIC,aAAaz7K,GAG9B,GAFAg5K,EAAYvjL,KAAK+lL,GAEa,IAA1Bna,EAA6B,CAC/B,IAAI1lI,EAAQjjC,EAAEo2J,YAAYrQ,eAAe,GACrCi9B,EAAU,IAAID,aAAa9/I,GAC/Bs9I,EAAaxjL,KAAKimL,GAGpBxC,GAAmB52F,EAEnB1vF,EAAKsmL,gBAAkBA,EAES,qBAArBjvI,EAAO4yH,YAChBye,EAAsBpC,iBAAmB52F,EACzCg5F,EAAsBt7K,KAAKvK,KAAK+lL,GAEF,IAA1Bna,GACFia,EAAsB3/I,MAAMlmC,KAAKimL,SAhD/BN,IACFA,EAAWnuI,aACXmuI,EAAa,OAqDft/K,EAAQ8hJ,6BACVm7B,EAAYtpC,QAAQ3zI,EAAQ8hJ,gCAE5Bm7B,EAAYtpC,QAAQ3zI,EAAQsrE,aAI9B3iE,KAAKu0K,YAAcA,EACnBv0K,KAAKw0K,aAAeA,EACpBx0K,KAAK48J,sBAAwBA,EAC7B58J,KAAK00K,gBAAkBA,EACvB10K,KAAKusE,WAAaA,EAClBp+E,EAAKsmL,gBAAkBA,EAEvB,IAAIoC,EAAwB,CAC1Bt7K,KAAM,GACN27B,MAAO,GACPu9I,gBAAiB,GAGnB,SAAST,IACFnW,GAA+C,oBAA3Br4H,EAAOimH,iBAA8D,qBAArBjmH,EAAO4yH,YAI5Eye,EAAsBt7K,KAAK1L,QAC7B8kL,EAAsB,CACpBD,gBAAiBA,EACjBnoG,WAAYA,EACZqwF,sBAAuBA,EACvBoY,0BAA2B6B,EAAsBpC,gBACjDK,YAAa+B,EAAsBt7K,KACnCw5K,aAAwC,IAA1BnY,EAA8B,GAAKia,EAAsB3/I,QACtE,SAAUuhC,EAAQoT,GACnB,IAAI/J,EAAO,IAAID,KAAK,CAACgK,GAAO,CAC1B78E,KAAM,cAERw2C,EAAOimH,gBAAgB3pF,GACvB5iE,WAAW80K,EAAQxuI,EAAO4yH,cAE5Bye,EAAwB,CACtBt7K,KAAM,GACN27B,MAAO,GACPu9I,gBAAiB,IAGnBv1K,WAAW80K,EAAQxuI,EAAO4yH,aA6BhC,SAASgX,EAAe8H,EAAa1xI,GACnC,GAA2B,qBAAhB2xI,YACT,KAAM,gEAGR3xI,EAASA,GAAU,IAEPwqI,gBACVxqI,EAAOwqI,cAAgB,IAIzB,IAAIoH,GAAkC,EACtC,CAAC,gBAAiB,mBAAoB,uBAAuBlkL,SAAQ,SAAUgJ,GACzEA,KAAQjG,SAAS4B,cAAc,YACjCu/K,GAAkC,MAItC,IAiBIC,EAAcC,EAoBdjhB,EArCAkhB,KAAetpL,OAAOupL,2BAA6BvpL,OAAOo+J,uBAAyBp+J,OAAOwpL,OAE1FC,EAAgB,GAChBC,EAAatjL,UAAUC,UAAUH,MAAM,4BAgB3C,GAdIojL,GAAaI,GAAcA,EAAW,KACxCD,EAAgB5pK,SAAS6pK,EAAW,GAAI,KAGtCJ,GAAaG,EAAgB,KAC/BN,GAAkC,GAGhC5xI,EAAOoyI,oBACTR,GAAkC,GAKhCA,EAKF,GAJK5xI,EAAOk3H,aACVzrK,QAAQZ,IAAI,yEAGV6mL,aAAuBW,kBACzBR,EAAeH,MACV,MAAIA,aAAuBY,0BAGhC,KAAM,oEAFNT,EAAeH,EAAYl5C,YAIlB3pI,UAAUi4J,kBAChB9mH,EAAOk3H,aACVzrK,QAAQW,MAAM,kDAalBoO,KAAK+0J,OAAS,WAGZ,GAFAsB,GAAc,EAEV+gB,IAAoC5xI,EAAOoyI,kBAAmB,CAEhE,IAAIG,EAEA,kBAAmBV,EACrBU,EAAoBV,EAAarG,cAAc,IACtC,qBAAsBqG,EAC/BU,EAAoBV,EAAapG,iBAAiB,IACzC,wBAAyBoG,IAClCU,EAAoBV,EAAaW,oBAAoB,KAGvD,IACE,IAAIC,EAAW,IAAIlI,EACnBkI,EAASvgK,SAASi0E,EAAUosF,EAAmB,SAAS,IACxDA,EAAoBE,EACpB,MAAOhkL,IAET,IAAK8jL,EACH,KAAM,wCAKRT,EAAsB,IAAIjZ,EAAoB0Z,EAAmB,CAC/Dpb,SAAUn3H,EAAOm3H,UAAY,gBAEX5H,cAEpBmjB,EAAO7sG,OAAS,GAChB8lG,GAAW,IAAItjL,MAAOH,UACtByqL,IAGE3yI,EAAOknI,cACTlnI,EAAOknI,gBAIX1sK,KAAKo4K,cAAgB,SAAUj3K,GAC7B,GAA2C,WAAvC+1K,EAAY/6K,SAASC,cAAzB,CAKA,IAAIi8K,EAAeH,EAAO7sG,OAAOx7E,OACjCqoL,EAAO7sG,OAAOn4E,SAAQ,SAAU03E,EAAOmF,GACrC,IAAIuoG,EAAkBD,EAAetoG,EAEhCvqC,EAAOk3H,aACVzrK,QAAQZ,IAAIioL,EAAkB,IAAMD,EAAe,qBAGjD7yI,EAAO+yI,oBACT/yI,EAAO+yI,mBAAmBD,EAAiBD,GAG7C,IAAI3tJ,EAAOkgD,EAAM0rF,MAAMt2B,UAAU,aAAc,GAC/Ck4C,EAAO7sG,OAAO0E,GAAKumF,MAAQ5rI,KAGxB8a,EAAOk3H,aACVzrK,QAAQZ,IAAI,mBAGd8Q,SAxBEA,KAsCJnB,KAAKs2I,KAAO,SAAUn1I,GACpBk1J,GAAc,EACd,IAAI0a,EAAO/wK,KAEPo3K,GAAmCE,EACrCA,EAAoBhhC,KAAKn1I,GAI3BnB,KAAKo4K,eAAc,WASjBF,EAAOM,SAAQ,SAAU12G,GAClBt8B,EAAOk3H,aACVzrK,QAAQZ,IAAI,uBAGd0gL,EAAKjvG,KAAOA,EAERivG,EAAKjvG,KAAK5uE,UACZ69K,EAAKjvG,KAAO,IAAID,KAAK,GAAI,CACvB7yE,KAAM,gBAINmS,GACFA,EAAS4vK,EAAKjvG,MAGhBo2G,EAAO7sG,OAAS,UAKtB,IAAIotG,GAAoB,EAuDxB,SAAS/E,IACPwE,EAAO7sG,OAAS,GAChBgrF,GAAc,EACdoiB,GAAoB,EAuBtB,SAASN,IACP,GAAIM,EAEF,OADAtH,GAAW,IAAItjL,MAAOH,UACfwR,WAAWi5K,EAAiB,KAGrC,GAA2C,WAAvCjB,EAAY/6K,SAASC,cAA4B,CACnD,IAAI0V,GAAW,IAAIjkB,MAAOH,UAAYyjL,EAYtC,OAVAA,GAAW,IAAItjL,MAAOH,UACtBwqL,EAAO7sG,OAAOr6E,KAAK,CACjBslK,OAtBAoiB,EAAYziL,SAAS4B,cAAc,UACnCR,EAAUqhL,EAAUh7C,WAAW,MAEnCg7C,EAAUt9K,MAAQ87K,EAAY97K,MAC9Bs9K,EAAUv9K,OAAS+7K,EAAY/7K,OAE/B9D,EAAQ00K,UAAUmL,EAAa,EAAG,GAE3BwB,GAeH5mK,SAAUA,SAGRukJ,GACFn3J,WAAWi5K,EAAiB3yI,EAAOwqI,gBA7BzC,IAEM0I,EACArhL,EAgCJ8/K,YAAYD,EAAa,CACvByB,UAA8C,qBAA5BnzI,EAAOozI,kBAAoCpzI,EAAOozI,iBACpEC,WAAY,SAAoB76C,GAC9B,IAAIlsH,GAAW,IAAIjkB,MAAOH,UAAYyjL,EAEtC,IAAKr/J,EACH,OAAO5S,WAAWi5K,EAAiB3yI,EAAOwqI,eAI5CmB,GAAW,IAAItjL,MAAOH,UACtBwqL,EAAO7sG,OAAOr6E,KAAK,CACjBslK,MAAOt4B,EAAOgC,UAAU,aAAc,GACtCluH,SAAUA,IAGRukJ,GACFn3J,WAAWi5K,EAAiB3yI,EAAOwqI,kBA/G3ChwK,KAAKkV,MAAQ,WACXujK,GAAoB,EAEhBnB,aAA+BjZ,GACjCiZ,EAAoBpiK,SAaxBlV,KAAKs6I,OAAS,WACZm+B,GAAoB,EAEhBnB,aAA+BjZ,EACjCiZ,EAAoBh9B,SAIjB+b,GACHr2J,KAAK+0J,UAYT/0J,KAAKuuK,kBAAoB,WACnBlY,GACFr2J,KAAKs2I,KAAKo9B,GAGZA,KAUF1zK,KAAK9P,KAAO,iBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MA6Dd,IAAIihL,GAAW,IAAItjL,MAAOH,UACtBwqL,EAAS,IAAIY,EAAOC,MAAM,KA2BhC,SAAS5J,EAAe5C,EAAa/mI,GAqFnC,SAASwzI,EAAWhJ,GAClBA,EAAyC,qBAAlBA,EAAgCA,EAAgB,GACvE,IAAIl+J,GAAW,IAAIjkB,MAAOH,UAAYyjL,EAEtC,OAAKr/J,EAID2mK,GACFtH,GAAW,IAAItjL,MAAOH,UACfwR,WAAW85K,EAAY,OAIhC7H,GAAW,IAAItjL,MAAOH,UAElB6yB,EAAMvL,QAGRuL,EAAMpX,OAGR9R,EAAQ00K,UAAUxrJ,EAAO,EAAG,EAAGy9G,EAAO5iI,MAAO4iI,EAAO7iI,QACpD+8K,EAAO7sG,OAAOr6E,KAAK,CACjB8gB,SAAUA,EACVwkJ,MAAOt4B,EAAOgC,UAAU,qBAGrBi5C,GACH/5K,WAAW85K,EAAYhJ,EAAeA,KAxB/B9wK,WAAW85K,EAAYhJ,EAAeA,GAyDjD,SAASkJ,EAAgBC,EAASC,EAAgBC,EAAeC,EAAiBC,GAChF,IAAIC,EAAcvjL,SAAS4B,cAAc,UACzC2hL,EAAYp+K,MAAQ4iI,EAAO5iI,MAC3Bo+K,EAAYr+K,OAAS6iI,EAAO7iI,OAC5B,IAjCiB0qC,EACbj2C,EACAC,EA+BA4pL,EAAYD,EAAY97C,WAAW,MACnCg8C,EAAe,GACfC,GAAyC,IAApBP,EACrBQ,EAAgBR,GAAkBA,EAAiB,GAAKA,GAAkBD,EAAQtpL,OAASupL,EAAiBD,EAAQtpL,OACpHgqL,EACC,EADDA,EAEC,EAFDA,EAGC,EAEDC,EAAqB18K,KAAK6R,KAAK7R,KAAKmoE,IAAI,IAAK,GAAKnoE,KAAKmoE,IAAI,IAAK,GAAKnoE,KAAKmoE,IAAI,IAAK,IACnFw0G,EAAeV,GAAiBA,GAAiB,GAAKA,GAAiB,EAAIA,EAAgB,EAC3FW,EAAiBV,GAAmBA,GAAmB,GAAKA,GAAmB,EAAIA,EAAkB,EACrGW,GAAiB,EA5CjBrqL,GAAK,EACLC,GAFag2C,EA8CP,CACRh2C,OAAQ+pL,EACRM,eAAgB,SAAwBhhI,EAAMohF,GAC5C,IAAI6/C,EAAeC,EAAaC,EAE5BC,EAAc,YACXL,GAAkBI,EAAcF,GAAiBE,EAAcL,IAG9DL,IACFM,GAAiB,GAGnBP,EAAa1oL,KAAKmoL,EAAQ7+C,KAG5BphF,KAGF,GAAK+gI,EA4BHK,QA5BmB,CACnB,IAAIhkB,EAAQ,IAAIikB,MAEhBjkB,EAAMzyI,OAAS,WACb41J,EAAU1N,UAAUzV,EAAO,EAAG,EAAGt4B,EAAO5iI,MAAO4iI,EAAO7iI,QACtD,IAAIq/K,EAAYf,EAAUgB,aAAa,EAAG,EAAGz8C,EAAO5iI,MAAO4iI,EAAO7iI,QAClEg/K,EAAgB,EAChBC,EAAcI,EAAUp6K,KAAKvQ,OAC7BwqL,EAAcG,EAAUp6K,KAAKvQ,OAAS,EAEtC,IAAK,IAAI6qL,EAAM,EAAGA,EAAMN,EAAaM,GAAO,EAAG,CAC7C,IAAIC,EAAe,CACjBroI,EAAGkoI,EAAUp6K,KAAKs6K,GAClB5/C,EAAG0/C,EAAUp6K,KAAKs6K,EAAM,GACxBl5H,EAAGg5H,EAAUp6K,KAAKs6K,EAAM,IAEJt9K,KAAK6R,KAAK7R,KAAKmoE,IAAIo1G,EAAaroI,EAAIunI,EAAe,GAAKz8K,KAAKmoE,IAAIo1G,EAAa7/C,EAAI++C,EAAe,GAAKz8K,KAAKmoE,IAAIo1G,EAAan5H,EAAIq4H,EAAe,KAE9IC,EAAqBC,GAC1CI,IAIJG,KAGFhkB,EAAMjjJ,IAAM8lK,EAAQ7+C,GAAGg8B,QAK3Bn1J,SAAU,YACRu4K,EAAeA,EAAaxqL,OAAOiqL,EAAQ7pL,MAAMsqL,KAEhC/pL,QAAU,GAGzB6pL,EAAa1oL,KAAKmoL,EAAQA,EAAQtpL,OAAS,IAG7C0pL,EAAWG,MAvGA7pL,OAEf,SAAUqpD,MACRtpD,IAEUC,EAMVqP,YAAW,WACT2mC,EAAEq0I,eAAehhI,EAAMtpD,KACtB,GAPDi2C,EAAE1kC,WAJN,IAzHFqkC,EAASA,GAAU,IAEPwqI,gBACVxqI,EAAOwqI,cAAgB,IAGpBxqI,EAAOk3H,aACVzrK,QAAQZ,IAAI,yBAA0Bm1C,EAAOwqI,eAW/ChwK,KAAK+0J,OAAS,WACPvvH,EAAOpqC,QACVoqC,EAAOpqC,MAAQ,KAGZoqC,EAAOrqC,SACVqqC,EAAOrqC,OAAS,KAGbqqC,EAAOjlB,QACVilB,EAAOjlB,MAAQ,CACbnlB,MAAOoqC,EAAOpqC,MACdD,OAAQqqC,EAAOrqC,SAIdqqC,EAAOw4F,SACVx4F,EAAOw4F,OAAS,CACd5iI,MAAOoqC,EAAOpqC,MACdD,OAAQqqC,EAAOrqC,SAInB6iI,EAAO5iI,MAAQoqC,EAAOw4F,OAAO5iI,OAAS,IACtC4iI,EAAO7iI,OAASqqC,EAAOw4F,OAAO7iI,QAAU,IACxC9D,EAAU2mI,EAAON,WAAW,MAExBl4F,EAAOjlB,OAASilB,EAAOjlB,iBAAiB2wJ,kBAC1C3wJ,EAAQilB,EAAOjlB,MAAM4qB,YAEjB3F,EAAOknI,cACTlnI,EAAOknI,iBAGTnsJ,EAAQtqB,SAAS4B,cAAc,SAC/Bq6K,EAAa3F,EAAahsJ,GAE1BA,EAAMq6J,iBAAmB,WAEnBp1I,EAAOknI,cACTlnI,EAAOknI,gBAIXnsJ,EAAMnlB,MAAQoqC,EAAOjlB,MAAMnlB,MAC3BmlB,EAAMplB,OAASqqC,EAAOjlB,MAAMplB,QAG9BolB,EAAM8H,OAAQ,EACd9H,EAAMpX,OACNgoK,GAAW,IAAItjL,MAAOH,UACtBwqL,EAAS,IAAIY,EAAOC,MAEfvzI,EAAOk3H,cACVzrK,QAAQZ,IAAI,qBAAsB2tI,EAAO5iI,MAAO,IAAK4iI,EAAO7iI,QAC5DlK,QAAQZ,IAAI,qBAAsBkwB,EAAMnlB,OAAS4iI,EAAO5iI,MAAO,IAAKmlB,EAAMplB,QAAU6iI,EAAO7iI,SAG7F69K,EAAWxzI,EAAOwqI,gBAuJpB,IAAIiJ,GAAgB,EAYpBj5K,KAAKs2I,KAAO,SAAUn1I,GACpBA,EAAWA,GAAY,aAEvB83K,GAAgB,EAEhB,IAAI9zK,EAAQnF,KAGZd,YAAW,WAITg6K,EAAgBhB,EAAO7sG,QAAS,EAAG,KAAM,MAAM,SAAUA,GACvD6sG,EAAO7sG,OAASA,EAEZ7lC,EAAOspI,eAAiBtpI,EAAOspI,cAAcj/K,SAC/CqoL,EAAO7sG,OAAS7lC,EAAOspI,cAAc5/K,OAAOgpL,EAAO7sG,SAYrD6sG,EAAOM,SAAQ,SAAU12G,GACvB38D,EAAM28D,KAAOA,EAET38D,EAAM28D,KAAK5uE,UACbiS,EAAM28D,KAAO,IAAID,KAAK,GAAI,CACxB7yE,KAAM,gBAINmS,GACFA,EAASgE,EAAM28D,cAIpB,KAGL,IAAI22G,GAAoB,EA6CxB,SAAS/E,IACPwE,EAAO7sG,OAAS,GAChB4tG,GAAgB,EAChBR,GAAoB,EAvCtBz4K,KAAKkV,MAAQ,WACXujK,GAAoB,GAWtBz4K,KAAKs6I,OAAS,WACZm+B,GAAoB,EAEhBQ,GACFj5K,KAAK+0J,UAYT/0J,KAAKuuK,kBAAoB,WAClB0K,GACHj5K,KAAKs2I,KAAKo9B,GAGZA,KAUF1zK,KAAK9P,KAAO,iBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAGd,IAEIqwB,EACA4wJ,EACA+G,EAJAl6C,EAAS/nI,SAAS4B,cAAc,UAChCR,EAAU2mI,EAAON,WAAW,MAz5DN,qBAAjBsa,EACTi3B,EAAQj3B,aAAeA,EACgB,qBAAvBC,qBAChBg3B,EAAQj3B,aAAeC,oBAIvBq0B,EAAU2C,QAAUA,EA4hBpB3C,EAAUjO,oBAAsBA,EAkrBhCiO,EAAUiD,oBAAsBA,EAqVhCjD,EAAU8C,eAAiBA,EAsX3B9C,EAAU6C,eAAiBA,EAuB7B,IAAI2J,EAAS,WAEX,SAAS+B,EAAY/oK,GACnB9R,KAAKqrE,OAAS,GACdrrE,KAAK8R,SAAWA,GAAY,EAC5B9R,KAAK8/H,QAAU,GA2CjB,SAASg7C,EAAkBzvG,GA+IzB,SAAS0vG,EAAeC,EAAiBC,EAAgBC,GACvD,MAAO,CAAC,CACN,KAAQF,EACR,GAAM,MAEL9rL,OAAOgsL,EAAc3+K,KAAI,SAAUmuB,GACpC,IAAIywJ,EAmHR,SAAyB/6K,GACvB,IAAIynE,EAAQ,EAERznE,EAAKg7K,WACPvzG,GAAS,KAGPznE,EAAKi7K,YACPxzG,GAAS,GAGPznE,EAAKk7K,SACPzzG,GAASznE,EAAKk7K,QAAU,GAGtBl7K,EAAKm7K,cACP1zG,GAAS,GAGX,GAAIznE,EAAKo7K,SAAW,IAClB,KAAM,kCAMR,MAHU,CAAiB,IAAhBp7K,EAAKo7K,SAAiBp7K,EAAKq7K,UAAY,EAAmB,IAAhBr7K,EAAKq7K,SAAiB5zG,GAAOtrE,KAAI,SAAUtI,GAC9F,OAAOmwD,OAAO+T,aAAalkE,MAC1ByF,KAAK,IAAM0G,EAAKwqE,MA5IL8wG,CAAgB,CAC1BH,YAAa,EACb3wG,MAAOlgD,EAAKtqB,KAAK9Q,MAAM,GACvB+rL,UAAW,EACXD,SAAU,EACVE,OAAQ,EACRE,SAAU,EACVC,SAAUr+K,KAAKg6B,MAAM6jJ,KAGvB,OADAA,GAAkBvwJ,EAAK5Y,SAChB,CACL1R,KAAM+6K,EACN1xK,GAAI,SA6BV,SAASkyK,EAAYnuK,GAGnB,IAFA,IAAIu9C,EAAQ,GAELv9C,EAAM,GACXu9C,EAAM/5D,KAAW,IAANwc,GACXA,IAAa,EAGf,OAAO,IAAI05D,WAAWnc,EAAM4wB,WAS9B,SAASigG,EAAa/4F,GACpB,IAAIziF,EAAO,GAEXyiF,GADUA,EAAKhzF,OAAS,EAAI,IAAIW,MAAM,EAAQqyF,EAAKhzF,OAAS,GAAG6J,KAAK,KAAO,IAC9DmpF,EAEb,IAAK,IAAIjzF,EAAI,EAAGA,EAAIizF,EAAKhzF,OAAQD,GAAK,EACpCwQ,EAAKpP,KAAK8c,SAAS+0E,EAAKrQ,OAAO5iF,EAAG,GAAI,IAGxC,OAAO,IAAIs3E,WAAW9mE,GAGxB,SAASy7K,EAAazoK,GAGpB,IAFA,IAAI0oK,EAAO,GAEFlsL,EAAI,EAAGA,EAAIwjB,EAAKvjB,OAAQD,IAAK,CACpC,IAAIwQ,EAAOgT,EAAKxjB,GAAGwQ,KAEG,WAAlB9R,EAAQ8R,KACVA,EAAOy7K,EAAaz7K,IAGF,kBAATA,IACTA,EAAOw7K,EAAax7K,EAAKxN,SAAS,KAGhB,kBAATwN,IACTA,EAhCG,IAAI8mE,WAgCY9mE,EAhCG5G,MAAM,IAAI+C,KAAI,SAAUtI,GAChD,OAAOA,EAAEkzE,WAAW,QAkCpB,IAAIuc,EAAMtjF,EAAKoF,MAAQpF,EAAK42D,YAAc52D,EAAKvQ,OAC3CksL,EAAS3+K,KAAKiwE,KAAKjwE,KAAKiwE,KAAKjwE,KAAK/M,IAAIqzF,GAAOtmF,KAAK/M,IAAI,IAAM,GAC5D2rL,EAAet4F,EAAI9wF,SAAS,GAC5B+tH,EAAS,IAAInwH,MAAe,EAATurL,EAAa,EAAI,EAAIC,EAAansL,QAAQ6J,KAAK,KAAOsiL,EACzEx2K,EAAO,IAAIhV,MAAMurL,GAAQriL,KAAK,KAAO,IAAMinH,EAC/Cm7D,EAAK9qL,KAAK2qL,EAAYvoK,EAAKxjB,GAAG6Z,KAC9BqyK,EAAK9qL,KAAK4qL,EAAap2K,IACvBs2K,EAAK9qL,KAAKoP,GAGZ,OAAO,IAAIyhE,KAAKi6G,EAAM,CACpB9sL,KAAM,eAmEV,SAASitL,EAAa7zK,EAAQ4pD,GAC5B,OAAOlkD,SAAS1F,EAAOoqE,OAAOxgB,EAAS,EAAG,GAAGx4D,MAAM,IAAI+C,KAAI,SAAU3M,GACnE,IAAIssL,EAAWtsL,EAAEu3E,WAAW,GAAGv0E,SAAS,GACxC,OAAO,IAAIpC,MAAM,EAAI0rL,EAASrsL,OAAS,GAAG6J,KAAK,KAAOwiL,KACrDxiL,KAAK,IAAK,GAGf,SAASyiL,EAAU/zK,GAIjB,IAHA,IAAI4pD,EAAS,EACToqH,EAAS,GAENpqH,EAAS5pD,EAAOvY,QAAQ,CAC7B,IAAI4Z,EAAKrB,EAAOoqE,OAAOxgB,EAAQ,GAC3B0xB,EAAMu4F,EAAa7zK,EAAQ4pD,GAC3B5xD,EAAOgI,EAAOoqE,OAAOxgB,EAAS,EAAI,EAAG0xB,GACzC1xB,GAAU,EAAQ0xB,EAClB04F,EAAO3yK,GAAM2yK,EAAO3yK,IAAO,GAEhB,SAAPA,GAAwB,SAAPA,EACnB2yK,EAAO3yK,GAAIzY,KAAKmrL,EAAU/7K,IAE1Bg8K,EAAO3yK,GAAIzY,KAAKoP,GAIpB,OAAOg8K,EAST,IAAIC,EAAO,IA5VX,SAAqBhxG,GACnB,IAAIn6E,EAqKN,SAAqBm6E,GACnB,IAAKA,EAAO,GAIV,YAHAgpB,YAAY,CACVziG,MAAO,qFASX,IAJA,IAAIwJ,EAAQiwE,EAAO,GAAGjwE,MAClBD,EAASkwE,EAAO,GAAGlwE,OACnB2W,EAAWu5D,EAAO,GAAGv5D,SAEhBliB,EAAI,EAAGA,EAAIy7E,EAAOx7E,OAAQD,IACjCkiB,GAAYu5D,EAAOz7E,GAAGkiB,SAGxB,MAAO,CACLA,SAAUA,EACV1W,MAAOA,EACPD,OAAQA,GAxLCmhL,CAAYjxG,GAEvB,IAAKn6E,EACH,MAAO,GAkHT,IA/GA,IA+UsBsc,EA9UlB8kK,EAAO,CAAC,CACV,GAAM,UAEN,KAAQ,CAAC,CACP,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,OACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,SAGP,CACD,GAAM,UAEN,KAAQ,CAAC,CACP,GAAM,UAEN,KAAQ,CAAC,CACP,KAAQ,IAER,GAAM,SAEL,CACD,KAAQ,SACR,GAAM,OAEL,CACD,KAAQ,SACR,GAAM,OAEL,CACD,MA0RgB9kK,EA1ROtc,EAAK4gB,SA2R3B,GAAGxiB,MAAMqE,KAAK,IAAIuzE,WAAW,IAAI0uG,aAAa,CAACpoK,IAAMirD,QAAS,GAAGl8D,KAAI,SAAUtI,GACpF,OAAOmwD,OAAO+T,aAAalkE,MAC1B0nF,UAAUjiF,KAAK,KA5RZ,GAAM,SAGP,CACD,GAAM,UAEN,KAAQ,CAAC,CACP,GAAM,IAEN,KAAQ,CAAC,CACP,KAAQ,EACR,GAAM,KAEL,CACD,KAAQ,EACR,GAAM,OAEL,CACD,KAAQ,EACR,GAAM,KAEL,CACD,KAAQ,MACR,GAAM,SAEL,CACD,KAAQ,QACR,GAAM,KAEL,CACD,KAAQ,MACR,GAAM,SAEL,CACD,KAAQ,EACR,GAAM,KAEL,CACD,GAAM,IAEN,KAAQ,CAAC,CACP,KAAQxI,EAAKkK,MACb,GAAM,KAEL,CACD,KAAQlK,EAAKiK,OACb,GAAM,cAQZohL,EAAc,EACdvB,EAAkB,EAEfuB,EAAclxG,EAAOx7E,QAAQ,CAClC,IAAIqrL,EAAgB,GAChBsB,EAAkB,EAEtB,GACEtB,EAAclqL,KAAKq6E,EAAOkxG,IAC1BC,GAAmBnxG,EAAOkxG,GAAazqK,SACvCyqK,UACOA,EAAclxG,EAAOx7E,QAAU2sL,EAvHjB,KAyHvB,IACIC,EAAU,CACZ,GAAM,UAEN,KAAQ1B,EAAeC,EAJJ,EAIqCE,IAG1D5I,EAAK,GAAGlyK,KAAKpP,KAAKyrL,GAClBzB,GAAmBwB,EAGrB,OAAOX,EAAavJ,GAiNX,CAAgBjnG,EAAO9uE,KAAI,SAAUquE,GAC9C,IAAIlgD,EAzDN,SAAmBgyJ,GAIjB,IAHA,IAAIC,EAAMD,EAAKE,KAAK,GAAGC,KAAK,GACxB7+F,EAAa2+F,EAAIttL,QAAQ,aAEpBO,EAAI,EAAG6J,EAAI,GAAI7J,EAAI,EAAGA,IAC7B6J,EAAE7J,GAAK+sL,EAAIx1G,WAAW6W,EAAa,EAAIpuF,GASzC,MAAO,CACLwL,MAJY,OADR3B,EAAE,IAAM,EAAIA,EAAE,IAMlB0B,OAHa,OADT1B,EAAE,IAAM,EAAIA,EAAE,IAKlB2G,KAAMu8K,EACND,KAAMA,GAuCGI,CAAUX,EAAUtgC,KAAKjxE,EAAM0rF,MAAMhnK,MAAM,OAEtD,OADAo7B,EAAK5Y,SAAW84D,EAAM94D,SACf4Y,MAET2pE,YAAYgoF,GA8Bd,OA7ZAxB,EAAYlsL,UAAUyK,IAAM,SAAUwxE,EAAO94D,GAU3C,GATI,WAAY84D,IAEdA,EAAQA,EAAMozD,QAGZ,cAAepzD,IACjBA,EAAQA,EAAMo1D,UAAU,aAAchgI,KAAK8/H,WAGxC,8BAA8B3uI,KAAKy5E,GACtC,KAAM,kFAGR5qE,KAAKqrE,OAAOr6E,KAAK,CACfslK,MAAO1rF,EACP94D,SAAUA,GAAY9R,KAAK8R,YA8X/B+oK,EAAYlsL,UAAU6pL,QAAU,SAAUr3K,GACxC,IA3X0B0sK,EACtB/rG,EAGAG,EAuXA2rG,GA3XsBC,EA2XSiN,EA1X/Bh5G,EAAO7N,EAAI2N,gBAAgB,IAAIC,KAAK,CAACgsG,EAAUj7K,WAAY,qCAAuCi7K,EAAU39K,KAAO,gBAAiB,CACtIlB,KAAM,4BAEJizE,EAAS,IAAIC,OAAOJ,GACxB7N,EAAIoO,gBAAgBP,GACbG,GAuXP2rG,EAAU93E,UAAY,SAAU/5F,GAC1BA,EAAMqE,KAAKxO,MACbX,QAAQW,MAAMmK,EAAMqE,KAAKxO,OAI3BuP,EAASpF,EAAMqE,OAGjBwtK,EAAUv5E,YAAYr0F,KAAKqrE,SAGtB,CAUL0tG,MAAO8B,GA1bE,GA+bXvO,EAAUwM,OAASA,EA+BrB,IAAIzL,EAAc,CAShB5qG,KAAM,WACJ,IAAIt0E,EAAO6R,KAEX,GAAyB,qBAAd+8K,WAAuD,qBAAnBA,UAAUnoK,KAAzD,CAKA,IAEIooK,EADAC,EAASj9K,KAAKi9K,QAAUlhK,SAASJ,KAAKtT,QAAQ,qBAAsB,IAEpE6zC,EAAU6gI,UAAUnoK,KAAKqoK,EAHb,GAqChB/gI,EAAQp4B,QAAU31B,EAAKqnH,QAEvBt5D,EAAQghI,UAAY,aAClBF,EAAK9gI,EAAQ1mD,QACVsuB,QAAU31B,EAAKqnH,QAEdwnE,EAAGG,YA3CO,IA4CRH,EAAGvnL,QACYunL,EAAGG,WA7CV,GA+CCD,UAAY,WACrBE,EAAkBJ,GAClBK,KAGFA,IAGFA,KAIJnhI,EAAQohI,gBAAkB,SAAUvhL,GAClCqhL,EAAkBrhL,EAAM1I,OAAOmC,cAhE/BvE,QAAQW,MAAM,oDAShB,SAASwrL,EAAkBG,GACzBA,EAASH,kBAAkBjvL,EAAKqvL,eAGlC,SAASH,IACP,IAAII,EAAcT,EAAGS,YAAY,CAACtvL,EAAKqvL,eAAgB,aAcvD,SAASE,EAAaC,GACpBF,EAAYG,YAAYzvL,EAAKqvL,eAAeh9K,IAAIm9K,GAAaT,UAAY,SAAUnhL,GAC7E5N,EAAKgT,UACPhT,EAAKgT,SAASpF,EAAM1I,OAAOmC,OAAQmoL,IAfrCxvL,EAAK0iL,WACP4M,EAAYG,YAAYzvL,EAAKqvL,eAAeK,IAAI1vL,EAAK0iL,UAAW,aAG9D1iL,EAAK2iL,SACP2M,EAAYG,YAAYzvL,EAAKqvL,eAAeK,IAAI1vL,EAAK2iL,QAAS,WAG5D3iL,EAAKyiL,WACP6M,EAAYG,YAAYzvL,EAAKqvL,eAAeK,IAAI1vL,EAAKyiL,UAAW,aAWlE8M,EAAa,aACbA,EAAa,aACbA,EAAa,aA0CjBlN,MAAO,SAAervK,GAGpB,OAFAnB,KAAKmB,SAAWA,EAChBnB,KAAKyiE,OACEziE,MAeTstK,MAAO,SAAe9nI,GAKpB,OAJAxlC,KAAK4wK,UAAYprI,EAAOorI,UACxB5wK,KAAK6wK,UAAYrrI,EAAOqrI,UACxB7wK,KAAK8wK,QAAUtrI,EAAOsrI,QACtB9wK,KAAKyiE,OACEziE,MAaTw1G,QAAS,SAAiB5jH,GACxBX,QAAQW,MAAMg1C,KAAKI,UAAUp1C,EAAO,KAAM,QAU5C4rL,cAAe,YACfP,OAAQ,MA0BV,SAAS3N,EAAY/C,EAAa/mI,GAChC,GAA0B,qBAAfs4I,WAA4B,CACrC,IAAIl6J,EAAS3tB,SAAS4B,cAAc,UACpC+rB,EAAOvQ,IAAM,qDACZpd,SAASyE,MAAQzE,SAASsM,iBAAiB5J,YAAYirB,GAG1D4hB,EAASA,GAAU,GACnB,IAAIu4I,EAAexR,aAAuBuL,0BAA4BvL,aAAuBsL,kBAS7F73K,KAAK+0J,OAAS,WACc,qBAAf+oB,YAKNE,GAKAD,IACEv4I,EAAOpqC,QACVoqC,EAAOpqC,MAAQmlB,EAAM9kB,aAAe,KAGjC+pC,EAAOrqC,SACVqqC,EAAOrqC,OAASolB,EAAM7kB,cAAgB,KAGnC8pC,EAAOjlB,QACVilB,EAAOjlB,MAAQ,CACbnlB,MAAOoqC,EAAOpqC,MACdD,OAAQqqC,EAAOrqC,SAIdqqC,EAAOw4F,SACVx4F,EAAOw4F,OAAS,CACd5iI,MAAOoqC,EAAOpqC,MACdD,OAAQqqC,EAAOrqC,SAInB6iI,EAAO5iI,MAAQoqC,EAAOw4F,OAAO5iI,OAAS,IACtC4iI,EAAO7iI,OAASqqC,EAAOw4F,OAAO7iI,QAAU,IACxColB,EAAMnlB,MAAQoqC,EAAOjlB,MAAMnlB,OAAS,IACpCmlB,EAAMplB,OAASqqC,EAAOjlB,MAAMplB,QAAU,MAIxC8iL,EAAa,IAAIH,YAINI,UAAU,GAKrBD,EAAWE,SAAS34I,EAAOu3H,WAAa,KAQxCkhB,EAAWG,WAAW54I,EAAOs6F,SAAW,IAGxCm+C,EAAWxsK,QAEiC,oBAAjC+zB,EAAO64I,uBAChB74I,EAAO64I,wBAGGxwL,KAAKC,MA0CjBwwL,EAAqBzuK,GAxCrB,SAAS0uK,EAAexrJ,GACtB,IAAiC,IAA7B5kC,EAAKqwL,oBAAT,CAIA,GAAI/F,EACF,OAAOv5K,YAAW,WAChBq/K,EAAexrJ,KACd,KAGLurJ,EAAqBzuK,EAAsB0uK,QAEZrjL,IAA3B5M,EAAQmwL,KACVA,EAAgB1rJ,GAIdA,EAAO0rJ,EAAgB,MAItBV,GAAgBx9J,EAAMvL,QAGzBuL,EAAMpX,OAGH40K,GACH1mL,EAAQ00K,UAAUxrJ,EAAO,EAAG,EAAGy9G,EAAO5iI,MAAO4iI,EAAO7iI,QAGlDqqC,EAAOk5I,cACTl5I,EAAOk5I,aAAa1gD,EAAOgC,UAAU,cAGvCi+C,EAAWU,SAAStnL,GACpBonL,EAAgB1rJ,OAKdyS,EAAOknI,cACTlnI,EAAOknI,gBA9GPxtK,WAAW/Q,EAAK4mK,OAAQ,MA6H5B/0J,KAAKs2I,KAAO,SAAUn1I,GACpBA,EAAWA,GAAY,aAEnBm9K,GACFpuK,EAAqBouK,GAGbzwL,KAAKC,MAUfkS,KAAK8hE,KAAO,IAAID,KAAK,CAAC,IAAIqF,WAAW+2G,EAAW54G,SAAS6mB,MAAO,CAC9Dl9F,KAAM,cAERmS,EAASnB,KAAK8hE,MAEdm8G,EAAW54G,SAAS6mB,IAAM,IAG5B,IAAIusF,GAAoB,EASxBz4K,KAAKkV,MAAQ,WACXujK,GAAoB,GAWtBz4K,KAAKs6I,OAAS,WACZm+B,GAAoB,GAWtBz4K,KAAKuuK,kBAAoB,WACvBpgL,EAAKqwL,qBAAsB,EAKvBP,IACFA,EAAW54G,SAAS6mB,IAAM,KAK9BlsF,KAAK9P,KAAO,cAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAGd,IAAI8tI,EAAS/nI,SAAS4B,cAAc,UAChCR,EAAU2mI,EAAON,WAAW,MAE5BqgD,IACExR,aAAuBuL,yBAEzB95C,GADA3mI,EAAUk1K,GACOvuC,OACRuuC,aAAuBsL,oBAChCxgL,EAAUk1K,EAAY7uC,WAAW,MACjCM,EAASuuC,IAIb,IAAIyR,GAAmB,EAEvB,IAAKD,EAAc,CACjB,IAAIx9J,EAAQtqB,SAAS4B,cAAc,SACnC0oB,EAAM8H,OAAQ,EACd9H,EAAMw1B,UAAW,EACjBx1B,EAAMq+J,aAAc,EACpBZ,GAAmB,EAEnBz9J,EAAMq6J,iBAAmB,WACvBoD,GAAmB,GAGrB9L,EAAa3F,EAAahsJ,GAC1BA,EAAMpX,OAGR,IACwBs1K,EACpBR,EAFAK,EAAqB,KAGrBnwL,EAAO6R,KAeb,SAAS6+K,EAAkBC,EAAqBC,GAmG9CA,EAAeA,GAAgB,sBAC/B,IAAIC,EAAS,GACTC,GAAsB,EACtBjhD,EAAS/nI,SAAS4B,cAAc,UAChCR,EAAU2mI,EAAON,WAAW,MAChCM,EAAOv+H,MAAMsuB,QAAU,EACvBiwG,EAAOv+H,MAAM/C,SAAW,WACxBshI,EAAOv+H,MAAM0mI,QAAU,EACvBnI,EAAOv+H,MAAMjE,IAAM,UACnBwiI,EAAOv+H,MAAMlE,KAAO,UACpByiI,EAAO/kI,UAAY8lL,GAClB9oL,SAASyE,MAAQzE,SAASsM,iBAAiB5J,YAAYqlI,GACxDh+H,KAAK08J,aAAc,EACnB18J,KAAKgwK,cAAgB,GACrBhwK,KAAK5E,MAAQ,IACb4E,KAAK7E,OAAS,IAEd6E,KAAKk/K,aAAc,EACnB,IAAI/wL,EAAO6R,KAIPg4I,EAAe/pJ,OAAO+pJ,aAEE,qBAAjBA,IACyB,qBAAvBC,qBAETD,EAAeC,oBAGc,qBAApBw5B,kBAETz5B,EAAey5B,kBAMnB,IAAIx9G,EAAMhmE,OAAOgmE,IAEE,qBAARA,GAA4C,qBAAdm8G,YAEvCn8G,EAAMm8G,WAGiB,qBAAd/7K,WAA+D,qBAA3BA,UAAUi1J,eAEX,qBAAjCj1J,UAAUg4J,qBACnBh4J,UAAUi1J,aAAej1J,UAAUg4J,oBAGI,qBAA9Bh4J,UAAUi4J,kBACnBj4J,UAAUi1J,aAAej1J,UAAUi4J,kBAIvC,IAAIyjB,EAAc9hL,OAAO8hL,YAEE,qBAAhBA,GAA4D,qBAAtBoC,oBAC/CpC,EAAcoC,mBAKW,qBAAhBpC,GAEiC,qBAA/BA,EAAYphL,UAAU2nJ,OAC/By5B,EAAYphL,UAAU2nJ,KAAO,WAC3Bt2I,KAAK2rF,YAAYz4F,SAAQ,SAAUwf,GACjCA,EAAM4jI,YAMd,IAAI24B,EAAU,GAsBd,SAASkQ,IACP,IAAIF,EAAJ,CAIA,IAAIG,EAAeJ,EAAOnvL,OACtBwvL,GAAa,EACbC,EAAY,GAchB,GAbAN,EAAO9rL,SAAQ,SAAUqtB,GAClBA,EAAM8kD,SACT9kD,EAAM8kD,OAAS,IAGb9kD,EAAM8kD,OAAOg6G,WACfA,EAAa9+J,EAGb++J,EAAUtuL,KAAKuvB,MAIf8+J,EACFrhD,EAAO5iI,MAAQikL,EAAWh6G,OAAOjqE,MACjC4iI,EAAO7iI,OAASkkL,EAAWh6G,OAAOlqE,YAC7B,GAAImkL,EAAUzvL,OAAQ,CAC3BmuI,EAAO5iI,MAAQgkL,EAAe,EAAyB,EAArBE,EAAU,GAAGlkL,MAAYkkL,EAAU,GAAGlkL,MACxE,IAAID,EAAS,EAEQ,IAAjBikL,GAAuC,IAAjBA,IACxBjkL,EAAS,GAGU,IAAjBikL,GAAuC,IAAjBA,IACxBjkL,EAAS,GAGU,IAAjBikL,GAAuC,IAAjBA,IACxBjkL,EAAS,GAGU,IAAjBikL,GAAuC,KAAjBA,IACxBjkL,EAAS,GAGX6iI,EAAO7iI,OAASmkL,EAAU,GAAGnkL,OAASA,OAEtC6iI,EAAO5iI,MAAQjN,EAAKiN,OAAS,IAC7B4iI,EAAO7iI,OAAShN,EAAKgN,QAAU,IAG7BkkL,GAAcA,aAAsBnO,kBACtCnF,EAAUsT,GAGZC,EAAUpsL,SAAQ,SAAUqtB,EAAOwvD,GACjCg8F,EAAUxrJ,EAAOwvD,MAEnB7wE,WAAWigL,EAAoBhxL,EAAK6hL,gBAGtC,SAASjE,EAAUxrJ,EAAOwvD,GACxB,IAAIkvG,EAAJ,CAIA,IAAIhoL,EAAI,EACJgF,EAAI,EACJb,EAAQmlB,EAAMnlB,MACdD,EAASolB,EAAMplB,OAEP,IAAR40E,IACF94E,EAAIspB,EAAMnlB,OAGA,IAAR20E,IACF9zE,EAAIskB,EAAMplB,QAGA,IAAR40E,IACF94E,EAAIspB,EAAMnlB,MACVa,EAAIskB,EAAMplB,QAGA,IAAR40E,IACF9zE,EAAmB,EAAfskB,EAAMplB,QAGA,IAAR40E,IACF94E,EAAIspB,EAAMnlB,MACVa,EAAmB,EAAfskB,EAAMplB,QAGA,IAAR40E,IACF9zE,EAAmB,EAAfskB,EAAMplB,QAGA,IAAR40E,IACF94E,EAAIspB,EAAMnlB,MACVa,EAAmB,EAAfskB,EAAMplB,QAGqB,qBAAtBolB,EAAM8kD,OAAO9pE,OACtBtE,EAAIspB,EAAM8kD,OAAO9pE,MAGa,qBAArBglB,EAAM8kD,OAAO7pE,MACtBS,EAAIskB,EAAM8kD,OAAO7pE,KAGe,qBAAvB+kB,EAAM8kD,OAAOjqE,QACtBA,EAAQmlB,EAAM8kD,OAAOjqE,OAGY,qBAAxBmlB,EAAM8kD,OAAOlqE,SACtBA,EAASolB,EAAM8kD,OAAOlqE,QAGxB9D,EAAQ00K,UAAUxrJ,EAAOtpB,EAAGgF,EAAGb,EAAOD,GAED,oBAA1BolB,EAAM8kD,OAAOk6G,UACtBh/J,EAAM8kD,OAAOk6G,SAASloL,EAASJ,EAAGgF,EAAGb,EAAOD,EAAQ40E,IAiGxD,SAASyvG,EAASn6G,GAChB,IAAI9kD,EAAQtqB,SAAS4B,cAAc,SAQnC,OAhPF,SAAsBwtE,EAAQxsE,GACxB,cAAeA,EACjBA,EAAQugJ,UAAY/zE,EACX,iBAAkBxsE,EAC3BA,EAAQ6mK,aAAer6F,EAEvBxsE,EAAQugJ,UAAY/zE,EAmOtB6sG,CAAa7sG,EAAQ9kD,GACrBA,EAAMtnB,UAAY8lL,EAClBx+J,EAAM8H,OAAQ,EACd9H,EAAMgI,OAAS,EACfhI,EAAMnlB,MAAQiqE,EAAOjqE,OAASjN,EAAKiN,OAAS,IAC5CmlB,EAAMplB,OAASkqE,EAAOlqE,QAAUhN,EAAKgN,QAAU,IAC/ColB,EAAMpX,OACCoX,EAmFT,SAASk/J,EAAkBC,GACzBV,EAAS,IACTU,EAAUA,GAAWZ,GAEb5rL,SAAQ,SAAUmyE,GACxB,GAAKA,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACvC,MAAkB,UAAXA,EAAEsV,QACRtpB,OAFH,CAMA,IAAI0wB,EAAQi/J,EAASn6G,GACrB9kD,EAAM8kD,OAASA,EACf25G,EAAOhuL,KAAKuvB,OAtVY,qBAAjBy3H,EACTi3B,EAAQj3B,aAAeA,EACgB,qBAAvBC,qBAChBg3B,EAAQj3B,aAAeC,oBAazBj4I,KAAK2/K,mBAAqB,WACxBR,KAwOFn/K,KAAK4/K,cAAgB,SAAUF,GAC7B,IAAKA,EACH,KAAM,+BAGFA,aAAmBlvL,QACvBkvL,EAAU,CAACA,IAGbA,EAAQxsL,SAAQ,SAAUmyE,GACxB,IAAIyqG,EAAY,IAAIC,EAEpB,GAAI1qG,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACtC,MAAkB,UAAXA,EAAEsV,QACRtpB,OAAQ,CACT,IAAI0wB,EAAQi/J,EAASn6G,GACrB9kD,EAAM8kD,OAASA,EACf25G,EAAOhuL,KAAKuvB,GACZuvJ,EAAUp4J,SAAS2tD,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACrD,MAAkB,UAAXA,EAAEsV,QACR,IAGL,GAAIksD,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACtC,MAAkB,UAAXA,EAAEsV,QACRtpB,OAAQ,CACT,IAAIgwL,EAAc1xL,EAAKkjJ,aAAakZ,wBAAwBllF,GAC5Dl3E,EAAK2xL,iBAAmB3xL,EAAKkjJ,aAAa8H,+BAC1C0mC,EAAY70C,QAAQ78I,EAAK2xL,kBACzBhQ,EAAUp4J,SAASvpB,EAAK2xL,iBAAiBz6G,OAAOsmB,YAAY35F,QAAO,SAAU6R,GAC3E,MAAkB,UAAXA,EAAEsV,QACR,IAGL2lK,EAAoB9tL,KAAK8+K,OAI7B9vK,KAAK+/K,eAAiB,WACpBf,EAAS,GACTC,GAAsB,EAElB9wL,EAAKspJ,WACPtpJ,EAAKspJ,SAASjvG,aACdr6C,EAAKspJ,SAAW,MAGdtpJ,EAAK6xL,aAAanwL,SACpB1B,EAAK6xL,aAAa9sL,SAAQ,SAAUM,GAClCA,EAAOg1C,gBAETr6C,EAAK6xL,aAAe,IAGlB7xL,EAAK2xL,mBACP3xL,EAAK2xL,iBAAiBt3I,aACtBr6C,EAAK2xL,iBAAmB,MAGtB3xL,EAAKkjJ,cACPljJ,EAAKkjJ,aAAav9H,QAGpB3lB,EAAKkjJ,aAAe,KACpBh6I,EAAQ0mI,UAAU,EAAG,EAAGC,EAAO5iI,MAAO4iI,EAAO7iI,QAEzC6iI,EAAO34D,SACT24D,EAAO34D,OAAOixE,OACdtY,EAAO34D,OAAS,OAIpBrlE,KAAKy/K,kBAAoB,SAAUC,IAC7BA,GAAaA,aAAmBlvL,QAClCkvL,EAAU,CAACA,IAGbD,EAAkBC,IAqBpB1/K,KAAK9P,KAAO,oBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAGd8P,KAAKigL,eAjNL,WACEhB,GAAsB,EACtB,IAAIiB,EAuBN,WAEE,IAAIC,EADJV,IAGI,kBAAmBzhD,EACrBmiD,EAAiBniD,EAAOgzC,gBACf,qBAAsBhzC,EAC/BmiD,EAAiBniD,EAAOizC,mBACd9iL,EAAKuuK,aACfzrK,QAAQW,MAAM,qHAGhB,IAAIwuL,EAAc,IAAIrQ,EAOtB,OANAoQ,EAAex0F,YAAY35F,QAAO,SAAU6R,GAC1C,MAAkB,UAAXA,EAAEsV,QACRjmB,SAAQ,SAAUwf,GACnB0tK,EAAY1oK,SAAShF,MAEvBsrH,EAAO34D,OAAS+6G,EACTA,EA1CgBC,GACnBC,EA4CN,WAEOrR,EAAQC,0BACXD,EAAQC,wBAA0B,IAAID,EAAQj3B,cAGhD7pJ,EAAKkjJ,aAAe49B,EAAQC,wBAC5B/gL,EAAK6xL,aAAe,IAEK,IAArB7xL,EAAK+wL,cACP/wL,EAAKspJ,SAAWtpJ,EAAKkjJ,aAAa2H,aAClC7qJ,EAAKspJ,SAASzM,QAAQ78I,EAAKkjJ,aAAa1uE,aACxCx0E,EAAKspJ,SAAS4B,KAAK5lJ,MAAQ,GAG7B,IAAI8sL,EAAoB,EAkBxB,GAjBAzB,EAAoB5rL,SAAQ,SAAUmyE,GACpC,GAAKA,EAAOsmB,YAAY35F,QAAO,SAAU6R,GACvC,MAAkB,UAAXA,EAAEsV,QACRtpB,OAFH,CAMA0wL,IACA,IAAIV,EAAc1xL,EAAKkjJ,aAAakZ,wBAAwBllF,IAEnC,IAArBl3E,EAAK+wL,aACPW,EAAY70C,QAAQ78I,EAAKspJ,UAG3BtpJ,EAAK6xL,aAAahvL,KAAK6uL,QAGpBU,EAGH,OAOF,OAJApyL,EAAK2xL,iBAAmB3xL,EAAKkjJ,aAAa8H,+BAC1ChrJ,EAAK6xL,aAAa9sL,SAAQ,SAAU2sL,GAClCA,EAAY70C,QAAQ78I,EAAK2xL,qBAEpB3xL,EAAK2xL,iBAAiBz6G,OAvFNm7G,GAmBvB,OAjBIF,GACFA,EAAiB30F,YAAY35F,QAAO,SAAU6R,GAC5C,MAAkB,UAAXA,EAAEsV,QACRjmB,SAAQ,SAAUwf,GACnBwtK,EAAiBxoK,SAAShF,MAK9BosK,EAAoB5rL,SAAQ,SAAUmyE,GAChCA,EAAOg6G,aACI,KAMVa,GA0OX,SAAStQ,EAAoBkP,EAAqBvgL,GAChDugL,EAAsBA,GAAuB,GAC7C,IACI2B,EACA5T,EAFA1+K,EAAO6R,MAGXzB,EAAUA,GAAW,CACnBwgL,aAAc,sBACdpiB,SAAU,aACVp8I,MAAO,CACLnlB,MAAO,IACPD,OAAQ,OAIC60K,gBACXzxK,EAAQyxK,cAAgB,IAGrBzxK,EAAQgiB,QACXhiB,EAAQgiB,MAAQ,IAGbhiB,EAAQgiB,MAAMnlB,QACjBmD,EAAQgiB,MAAMnlB,MAAQ,KAGnBmD,EAAQgiB,MAAMplB,SACjBoD,EAAQgiB,MAAMplB,OAAS,KAWzB6E,KAAK+0J,OAAS,WAoBd,IACMv9I,EAnBJipK,EAAQ,IAAI5B,EAAkBC,EAAqBvgL,EAAQwgL,cAAgB,wBAmBvEvnK,EAAS,GACbsnK,EAAoB5rL,SAAQ,SAAUmyE,GACpCsmB,EAAUtmB,EAAQ,SAASnyE,SAAQ,SAAUwf,GAC3C8E,EAAOxmB,KAAK0hB,SAGT8E,GAvBiB3nB,SACtB4wL,EAAMzQ,cAAgBzxK,EAAQyxK,eAAiB,GAC/CyQ,EAAMrlL,MAAQmD,EAAQgiB,MAAMnlB,OAAS,IACrCqlL,EAAMtlL,OAASoD,EAAQgiB,MAAMplB,QAAU,IACvCslL,EAAMd,sBAGJphL,EAAQmiL,eAAkD,oBAA1BniL,EAAQmiL,eAC1CniL,EAAQmiL,cAAcD,EAAMR,mBAI9BpT,EAAgB,IAAIxO,EAAoBoiB,EAAMR,iBAAkB1hL,IAClDw2J,UAwBhB/0J,KAAKs2I,KAAO,SAAUn1I,GACf0rK,GAILA,EAAcv2B,MAAK,SAAUx0E,GAC3B3zE,EAAK2zE,KAAOA,EACZ3gE,EAAS2gE,GACT3zE,EAAKogL,wBAYTvuK,KAAKkV,MAAQ,WACP23J,GACFA,EAAc33J,SAYlBlV,KAAKs6I,OAAS,WACRuyB,GACFA,EAAcvyB,UAYlBt6I,KAAKuuK,kBAAoB,WACnB1B,IACFA,EAAc0B,oBACd1B,EAAgB,MAGd4T,IACFA,EAAMV,iBACNU,EAAQ,OAaZzgL,KAAK2gL,WAAa,SAAUjB,GAC1B,IAAKA,EACH,KAAM,+BAGFA,aAAmBlvL,QACvBkvL,EAAU,CAACA,IAGbZ,EAAoB5vL,OAAOwwL,GAEtB7S,GAAkB4T,IAIvBA,EAAMb,cAAcF,GAEhBnhL,EAAQmiL,eAAkD,oBAA1BniL,EAAQmiL,eAC1CniL,EAAQmiL,cAAcD,EAAMR,oBAahCjgL,KAAKy/K,kBAAoB,SAAUC,GAC5Be,KAIDf,GAAaA,aAAmBlvL,QAClCkvL,EAAU,CAACA,IAGbe,EAAMhB,kBAAkBC,KAY1B1/K,KAAK4gL,SAAW,WACd,OAAOH,GAITzgL,KAAK9P,KAAO,sBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MA4ThB,SAASm/K,EAAoBhqG,EAAQ7/B,GAoBnC,IAAI83B,EAgDA2E,EAyEA4pE,EAvHJ,SAASg1C,IACP,OAAO,IAAIpyC,eAAe,CACxBh9H,MAAO,SAAem8H,GACpB,IAAIkzC,EAAM7qL,SAAS4B,cAAc,UAC7B0oB,EAAQtqB,SAAS4B,cAAc,SAC/B2nI,GAAQ,EACZj/G,EAAM64H,UAAY/zE,EAClB9kD,EAAM8H,OAAQ,EACd9H,EAAMplB,OAASqqC,EAAOrqC,OACtBolB,EAAMnlB,MAAQoqC,EAAOpqC,MACrBmlB,EAAMgI,OAAS,EAEfhI,EAAMwgK,UAAY,WAChBD,EAAI1lL,MAAQoqC,EAAOpqC,MACnB0lL,EAAI3lL,OAASqqC,EAAOrqC,OACpB,IAAI5D,EAAMupL,EAAIpjD,WAAW,MACrBsjD,EAAe,IAAOx7I,EAAOu3H,UAC7BkkB,EAAc1xK,aAAY,WAgB5B,GAfI+tD,IACFhuD,cAAc2xK,GACdrzC,EAAW95H,SAGT0rH,IACFA,GAAQ,EAEJh6F,EAAO07I,uBACT17I,EAAO07I,yBAIX3pL,EAAIw0K,UAAUxrJ,EAAO,EAAG,GAE2B,WAA/CqtH,EAAWuzC,0BAA0Bx5K,MACvC,IACEimI,EAAWuB,QAAQ53I,EAAIkjL,aAAa,EAAG,EAAGj1I,EAAOpqC,MAAOoqC,EAAOrqC,SAC/D,MAAOlH,OAEV+sL,IAGLzgK,EAAMpX,UAOZ,SAASi0J,EAAe/3F,EAAQ5M,GAC9B,IAAKjzB,EAAOy3H,aAAexkG,EAQzB,OAPA6E,GAAW,OAEX8wE,MAAM,0DAA0D77H,MAAK,SAAU+/B,GAC7EA,EAAEu8F,cAAct8H,MAAK,SAAUkmD,GAC7B2kG,EAAe/3F,EAAQ5M,SAM7B,IAAKjzB,EAAOy3H,YAAcxkG,aAAkBH,YAAa,CACvD,IAAIwJ,EAAO,IAAID,KAAK,CAACpJ,GAAS,CAC5BzpE,KAAM,oBAERw2C,EAAOy3H,WAAahpG,EAAI2N,gBAAgBE,GAGrCt8B,EAAOy3H,YACVhsK,QAAQW,MAAM,qCAGhBqwE,EAAS,IAAIC,OAAO18B,EAAOy3H,aACpB5oE,YAAY7uD,EAAO03H,iBAAmB,0DAC7Cj7F,EAAO3iE,iBAAiB,WAAW,SAAUvD,GACxB,UAAfA,EAAMqE,MACR6hE,EAAOoyB,YAAY,CACjBj5F,MAAOoqC,EAAOpqC,MACdD,OAAQqqC,EAAOrqC,OACf0hK,QAASr3H,EAAOq3H,SAAW,KAC3BukB,YAAa57I,EAAOu3H,WAAa,GACjCskB,SAAU77I,EAAO67I,WAEnBR,IAAeS,OAAO,IAAIC,eAAe,CACvClqJ,MAAO,SAAei/H,GAChBh5F,EACFrsE,QAAQW,MAAM,wCAIhBqwE,EAAOoyB,YAAYiiE,EAAMl2J,KAAKq4D,OAAQ,CAAC69F,EAAMl2J,KAAKq4D,cAG3C18D,EAAMqE,OACZyrI,GACH21C,EAAexwL,KAAK+K,EAAMqE,UAlHJ,qBAAnBquI,gBAA4D,qBAAnB8yC,gBAElDtwL,QAAQW,MAAM,4HAGhB4zC,EAASA,GAAU,IACZpqC,MAAQoqC,EAAOpqC,OAAS,IAC/BoqC,EAAOrqC,OAASqqC,EAAOrqC,QAAU,IACjCqqC,EAAOu3H,UAAYv3H,EAAOu3H,WAAa,GACvCv3H,EAAOq3H,QAAUr3H,EAAOq3H,SAAW,KACnCr3H,EAAO67I,SAAW77I,EAAO67I,WAAY,EAsHrCrhL,KAAK+0J,OAAS,WACZysB,EAAiB,GACjB31C,GAAW,EACX7rI,KAAK8hE,KAAO,KACZs7F,EAAe/3F,GAEoB,oBAAxB7/B,EAAOknI,cAChBlnI,EAAOknI,gBAaX1sK,KAAKkV,MAAQ,WACX22H,GAAW,GAWb7rI,KAAKs6I,OAAS,WACZzO,GAAW,GA0Bb,IAAI21C,EAAiB,GAYrBxhL,KAAKs2I,KAAO,SAAUn1I,GACpBm8D,GAAW,EACX,IAAIw3F,EAAW90J,MArCjB,SAAmBmB,GACZ8gE,GASLA,EAAO3iE,iBAAiB,WAAW,SAAUvD,GACxB,OAAfA,EAAMqE,OACR6hE,EAAOG,YACPH,EAAS,KAEL9gE,GACFA,QAIN8gE,EAAOoyB,YAAY,OAlBblzF,GACFA,IAmCJihE,EAAU,WACR0yF,EAAShzF,KAAO,IAAID,KAAK2/G,EAAgB,CACvCxyL,KAAM,eAERmS,EAAS2zJ,EAAShzF,UAKtB9hE,KAAK9P,KAAO,sBAEZ8P,KAAKpN,SAAW,WACd,OAAOoN,KAAK9P,MAWd8P,KAAKuuK,kBAAoB,WACvBiT,EAAiB,GACjB31C,GAAW,EACX7rI,KAAK8hE,KAAO,MAYd9hE,KAAK8hE,KAAO,KAhmDZwqG,EAAUe,YAAcA,EAuRxBf,EAAUgD,YAAcA,EAgyBxBhD,EAAUsD,oBAAsBA,EAgShCtD,EAAUmV,yBArQZ,SAAkClV,EAAahuK,GAC7C,IAAKyB,KACH,KAAM,uCAGR,GAA2B,qBAAhBusK,EACT,KAAM,4CAGR,IAAIp+K,EAAO6R,KAUX7R,EAAKuzL,UAAY,IAAIpV,EAAUC,EAAahuK,GAW5CyB,KAAKo9J,eAAiB,WACpB,OAAO,IAAIp4I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE92B,EAAKuzL,UAAUtkB,iBACfp/G,IACA,MAAO/pD,GACPgxB,EAAOhxB,QAeb+L,KAAKq9J,cAAgB,WACnB,OAAO,IAAIr4I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE92B,EAAKuzL,UAAUrkB,eAAc,SAAU7hJ,GACrCrtB,EAAK2zE,KAAO3zE,EAAKuzL,UAAU1/G,UAEtB7zE,EAAK2zE,MAAS3zE,EAAK2zE,KAAKt8D,KAK7Bw4C,EAAQxiC,GAJNyJ,EAAO,cAAe92B,EAAK2zE,SAM/B,MAAO7tE,GACPgxB,EAAOhxB,QAeb+L,KAAKu9J,eAAiB,WACpB,OAAO,IAAIv4I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE92B,EAAKuzL,UAAUnkB,iBACfv/G,IACA,MAAO/pD,GACPgxB,EAAOhxB,QAeb+L,KAAKw9J,gBAAkB,WACrB,OAAO,IAAIx4I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE92B,EAAKuzL,UAAUlkB,kBACfx/G,IACA,MAAO/pD,GACPgxB,EAAOhxB,QAiBb+L,KAAKktK,WAAa,SAAU/rK,GAC1B,OAAO,IAAI6jB,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE92B,EAAKuzL,UAAUxU,YAAW,SAAUC,GAClCnvH,EAAQmvH,MAEV,MAAOl5K,GACPgxB,EAAOhxB,QAeb+L,KAAKgiE,QAAU,WACb,OAAO,IAAIh9C,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE+4B,EAAQ7vD,EAAKuzL,UAAU1/G,WACvB,MAAO/tE,GACPgxB,EAAOhxB,QAkBb+L,KAAKo+J,oBAAsB,WACzB,OAAO,IAAIp5I,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE+4B,EAAQ7vD,EAAKuzL,UAAUtjB,uBACvB,MAAOnqK,GACPgxB,EAAOhxB,QAcb+L,KAAKmjB,MAAQ,WACX,OAAO,IAAI6B,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE+4B,EAAQ7vD,EAAKuzL,UAAUv+J,SACvB,MAAOlvB,GACPgxB,EAAOhxB,QAab+L,KAAKwnI,QAAU,WACb,OAAO,IAAIxiH,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE+4B,EAAQ7vD,EAAKuzL,UAAUl6C,WACvB,MAAOvzI,GACPgxB,EAAOhxB,QAgBb+L,KAAK+uK,SAAW,WACd,OAAO,IAAI/pJ,SAAQ,SAAUg5B,EAAS/4B,GACpC,IACE+4B,EAAQ7vD,EAAKuzL,UAAU3S,YACvB,MAAO96K,GACPgxB,EAAOhxB,QAcb+L,KAAK8hE,KAAO,KAWZ9hE,KAAKvK,QAAU,SAiRf62K,EAAU+C,oBAAsBA,I,+CC3jMlC,sBASiD3tG,EATjD,cAAyW,OAA1Om7D,EAArD,oBAAXruI,QAAoD,kBAApBA,OAAOC,SAAoC,SAAkBF,GAAO,cAAcA,GAA4B,SAAkBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBsuI,EAAStuI,GAWtXJ,KAF8CuzE,EAExC,SAAU8rF,GACjB,OAMQ1wB,EAAsB,CAExB,iEAMA,SAAgE1uI,GAS9DA,EAAOC,QARP,SAAgCF,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIozI,eAAe,6DAG3B,OAAOpzI,IAQX,0DAMA,SAAyDC,GAOvDA,EAAOC,QANP,SAAyBs4D,EAAUs2D,GACjC,KAAMt2D,aAAoBs2D,GACxB,MAAM,IAAIv1D,UAAU,uCAS1B,uDAMA,SAAsDt5D,GACpD,SAAS4uH,EAAkB3pH,EAAQooB,GACjC,IAAK,IAAI7rB,EAAI,EAAGA,EAAI6rB,EAAM5rB,OAAQD,IAAK,CACrC,IAAI+7C,EAAalwB,EAAM7rB,GACvB+7C,EAAWE,WAAaF,EAAWE,aAAc,EACjDF,EAAWG,cAAe,EACtB,UAAWH,IAAYA,EAAWuB,UAAW,GACjDr6C,OAAO2Q,eAAenQ,EAAQs4C,EAAWx4C,IAAKw4C,IAUlDv9C,EAAOC,QANP,SAAsB4uH,EAAaC,EAAYC,GAG7C,OAFID,GAAYF,EAAkBC,EAAYtuH,UAAWuuH,GACrDC,GAAaH,EAAkBC,EAAaE,GACzCF,IAQX,0DAMA,SAAyD7uH,GACvD,SAASgzI,EAAgBv7F,GAIvB,OAHAz3C,EAAOC,QAAU+yI,EAAkBvuI,OAAOwqH,eAAiBxqH,OAAO4uI,eAAiB,SAAyB57F,GAC1G,OAAOA,EAAErvC,WAAa3D,OAAO4uI,eAAe57F,IAEvCu7F,EAAgBv7F,GAGzBz3C,EAAOC,QAAU+yI,GAKnB,oDAMA,SAAmDhzI,EAAQ2hK,EAA0BhzB,GACnF,IAAI1f,EAAiB0f,EAErB,2DAiBA3uI,EAAOC,QAfP,SAAmBs6D,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGd2c,GAAY40D,EAAe10D,EAAUF,KAQ7C,iEAMA,SAAgEr6D,GAO9DA,EAAOC,QANP,SAAgCE,GAC9B,OAAOA,GAAOA,EAAI6uH,WAAa7uH,EAAM,CACnC,QAAWA,KASjB,qEAMA,SAAoEH,EAAQ2hK,EAA0BhzB,GACpG,IAAIzuI,EAAUyuI,EAEd,mDAEIg3B,EAAwBh3B,EAE5B,kEAUA3uI,EAAOC,QARP,SAAoCF,EAAMwF,GACxC,OAAIA,GAA2B,WAAlBrF,EAAQqF,IAAsC,oBAATA,EAI3CogK,EAAsB5lK,GAHpBwF,IAWb,0DAMA,SAAyDvF,GACvD,SAASkvH,EAAgBz3E,EAAGmhB,GAM1B,OALA54D,EAAOC,QAAUivH,EAAkBzqH,OAAOwqH,gBAAkB,SAAyBx3E,EAAGmhB,GAEtF,OADAnhB,EAAErvC,UAAYwwD,EACPnhB,GAGFy3E,EAAgBz3E,EAAGmhB,GAG5B54D,EAAOC,QAAUivH,GAKnB,kDAMA,SAAiDlvH,GAC/C,SAASE,EAAQC,GAaf,MAVsB,oBAAXC,QAAoD,kBAApBA,OAAOC,SAChDL,EAAOC,QAAUC,EAAU,SAAiBC,GAC1C,cAAcA,GAGhBH,EAAOC,QAAUC,EAAU,SAAiBC,GAC1C,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAItHD,EAAQC,GAGjBH,EAAOC,QAAUC,GAKnB,2CAMA,SAA0CF,EAAQC,EAAS0uI,GACzD,aAEA,IAAIE,EAAyBF,EAE7B,kEAEAlqI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ8uI,aAAU,EAElB,IAAI62B,EAAmB/2B,EAAuBF,EAE9C,4DAEIk3B,EAAgBh3B,EAAuBF,EAE3C,yDAEIo3B,EAAal3B,EAAuBF,EAExC,sDAEIq3B,EAA8Bn3B,EAAuBF,EAEzD,uEAEIs3B,EAAmBp3B,EAAuBF,EAE9C,4DAEI8yB,EAAS5yB,EAAuBF,EAEpC,aAEA,SAAS2D,EAAaC,GACpB,IAAIC,EAiBN,WACE,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,GA1BuBitI,GAEhC,OAAO,WACL,IACI1rI,EADA2rI,GAAQ,EAAIkzB,EAAiBl3B,SAASwD,GAG1C,GAAIC,EAA2B,CAC7B,IAAIS,GAAY,EAAIgzB,EAAiBl3B,SAASn9H,MAAMtR,YACpD8G,EAASqrI,QAAQC,UAAUK,EAAO5zI,UAAW8zI,QAE7C7rI,EAAS2rI,EAAM5tI,MAAMyM,KAAMzS,WAG7B,OAAO,EAAI6mK,EAA4Bj3B,SAASn9H,KAAMxK,IAiB1D,IAEI+kK,EAAqB,SAAU8B,IACjC,EAAIlI,EAAWh3B,SAASo9B,EAAoB8B,GAE5C,IAAIx6B,EAASnB,EAAa65B,GAE1B,SAASA,EAAmBx7J,EAAQR,GAClC,IAAI4G,EAWJ,OATA,EAAI6uJ,EAAiB72B,SAASn9H,KAAMu6J,IACpCp1J,EAAQ08H,EAAOluI,KAAKqM,KAAMjB,EAAQR,IAC5B7M,OAAQ,EACdyT,EAAMwyJ,cAAgB,EACtBxyJ,EAAM04E,WAAa,KACnB14E,EAAMonE,WAAa,KACnBpnE,EAAMyyJ,eAAiB,uBACvBzyJ,EAAMw8K,UAAY,YAClBx8K,EAAMuzJ,qBAAuB,GACtBvzJ,EAwDT,OArDA,EAAI8uJ,EAAc92B,SAASo9B,EAAoB,CAAC,CAC9CpnK,IAAK,QACLM,MAAO,SAAe4xE,EAAQhV,EAAW3+D,GACvCsO,KAAKs8J,YAAcj3F,EACnBrlE,KAAKqwD,UAAYA,EACjBrwD,KAAKtO,MAAQA,EACb,IAAIsmJ,EAAe/pJ,OAAO+pJ,cAAgB/pJ,OAAOgqJ,mBACjDj4I,KAAKqxI,aAAe,IAAI2G,EACxBh4I,KAAK4hL,gBAAkB5hL,KAAKqxI,aAAakZ,wBAAwBvqJ,KAAKs8J,aACtEt8J,KAAKwlC,OAAS,CACZk0G,iBAAkB15I,KAAK23J,cACvBvP,aAAcpoJ,KAAK69E,WACnB2qE,kBAAmBxoJ,KAAKusE,WACxBg8E,YAAavoJ,KAAK43J,eAClB5O,WAAYhpJ,KAAK4hL,iBAEnB5hL,KAAKwlC,OAAS3yC,OAAOO,OAAO4M,KAAKwlC,OAAQxlC,KAAK04J,sBAC9C14J,KAAKw8J,OAAS,IAAImQ,SAAS3sK,KAAKwlC,QAChCxlC,KAAKw8J,OAAO/Q,gBAAkBzrJ,KAAK6hL,qBAAqBp9K,KAAKzE,QAE9D,CACD7M,IAAK,QACLM,MAAO,WACL,IAAImT,EAAS5G,KAEbA,KAAKw8J,OAAO/qJ,QAAQc,MAAK,eAAgBu8H,OAAM,SAAUjxH,GACvDjX,EAAO7H,SAAS+E,QAAQ,QAAS+Z,QAGpC,CACD1qB,IAAK,OACLM,MAAO,WACLuM,KAAKw8J,OAAOlmB,SAEb,CACDnjJ,IAAK,QACLM,MAAO,WACLuM,KAAKw8J,OAAOtnJ,UAEb,CACD/hB,IAAK,SACLM,MAAO,WACLuM,KAAKw8J,OAAOliB,WAEb,CACDnnJ,IAAK,uBACLM,MAAO,SAA8B2M,GACnC,IAAI0hE,EAAO,IAAID,KAAK,CAACzhE,GAAO,CAC1BpR,KAAMgR,KAAK2hL,YAEb3hL,KAAKs9J,gBAAgBx7F,OAGlBy4F,EAzEgB,CAFN1K,EAAO1yB,QAAQhxH,aAAa,iBA8E/C0jJ,EAAO1yB,QAAQo9B,mBAAqBA,EACpC,IAAI/pB,EAAW+pB,EACflsK,EAAQ8uI,QAAUqT,EAClBpiJ,EAAOC,QAAUA,EAAQ8uI,SAK3B,WAMA,SAAiB/uI,GACf,aAEAA,EAAOC,QAAUm/J,IAajB9S,EAA2B,GA4E3BC,EApEJ,SAAS5d,EAAoB6d,GAK3B,IAAIC,EAAeH,EAAyBE,GAG5C,QAAqB1/I,IAAjB2/I,EAEF,OAAOA,EAAaxsJ,QAStB,IAAID,EAASssJ,EAAyBE,GAAY,CAQhDvsJ,QAAS,IAoBX,OATAyuI,EAAoB8d,GAAUxsJ,EAAQA,EAAOC,QAAS0uI,GAS/C3uI,EAAOC,QAqBU0uI,CAAoB,4CAMvC4d,EAheT,IAIM7d,EA0YA4d,EA4EAC,GA9dmE,WAAvB9d,EAASxuI,IAA+F,WAAtBwuI,EAASzuI,GAAuBA,EAAOC,QAAUqzE,EAAQ,EAAQ,QAAkE,EAAwB,CAAC,cAAoB,2BAAP,EAAF,GAAS,kC,yDCVxT,0CAiCA,SAASogH,EAAmBC,EAAUtiL,EAAOmkB,EAAQo+J,EAASC,EAAsBC,EAElFC,EAAYC,EAAgBC,EAAmBC,GACrB,mBAAfH,IACTE,EAAoBD,EACpBA,EAAiBD,EACjBA,GAAa,GAIf,IAiBIt6H,EAjBAtpD,EAA4B,oBAAXqlB,EAAwBA,EAAOrlB,QAAUqlB,EAsD9D,GApDIm+J,GAAYA,EAASQ,SACvBhkL,EAAQgkL,OAASR,EAASQ,OAC1BhkL,EAAQikL,gBAAkBT,EAASS,gBACnCjkL,EAAQkkL,WAAY,EAEhBR,IACF1jL,EAAQmkL,YAAa,IAKrBV,IACFzjL,EAAQokL,SAAWX,GAKjBE,GAEFr6H,EAAO,SAAcxwD,IAEnBA,EAAUA,GACV2I,KAAK4iL,QAAU5iL,KAAK4iL,OAAOC,YAC3B7iL,KAAKhJ,QAAUgJ,KAAKhJ,OAAO4rL,QAAU5iL,KAAKhJ,OAAO4rL,OAAOC,aAGT,qBAAxBC,sBACrBzrL,EAAUyrL,qBAIRrjL,GACFA,EAAM9L,KAAKqM,KAAMqiL,EAAkBhrL,IAIjCA,GAAWA,EAAQ0rL,uBACrB1rL,EAAQ0rL,sBAAsB3pL,IAAI8oL,IAMtC3jL,EAAQykL,aAAen7H,GACdpoD,IACTooD,EAAOs6H,EAAa,SAAU9qL,GAC5BoI,EAAM9L,KAAKqM,KAAMsiL,EAAqBjrL,EAAS2I,KAAKijL,MAAMC,SAASC,cACjE,SAAU9rL,GACZoI,EAAM9L,KAAKqM,KAAMoiL,EAAe/qL,MAIhCwwD,EACF,GAAItpD,EAAQmkL,WAAY,CAEtB,IAAIU,EAAiB7kL,EAAQgkL,OAE7BhkL,EAAQgkL,OAAS,SAAkCpwJ,EAAG96B,GAEpD,OADAwwD,EAAKl0D,KAAK0D,GACH+rL,EAAejxJ,EAAG96B,QAEtB,CAEL,IAAIgsL,EAAW9kL,EAAQ+kL,aACvB/kL,EAAQ+kL,aAAeD,EAAW,GAAGn0L,OAAOm0L,EAAUx7H,GAAQ,CAACA,GAInE,OAAOjkC,EAKT,IAAI2/J,EApHS,IAAI/6H,OAAO,CACtBt4D,KAAM,SACNurB,MAAO,CACLxiB,UAAWmrD,OACXo/H,KAAMp/H,OACN/rD,KAAM+rD,OACNq/H,UAAW5tL,QACX6tL,YAAat/H,OACbu/H,qBAAsBh4B,SACtBi4B,yBAA0Bj4B,SAC1Bk4B,eAAgBrzL,MAChBszL,oBAAqBjuL,SAEvBkuL,SAAU,CACRC,iBAAkB,WAChB,MAAO,CACLJ,yBAA0B5jL,KAAK4jL,yBAC/BD,qBAAsB3jL,KAAK2jL,qBAC3BE,eAAgB7jL,KAAK6jL,eACrBC,oBAAqB9jL,KAAK8jL,sBAG9BG,cAAe,WACb,OAAO,mBAASjkL,KAAKwjL,KAAMxjL,KAAK3H,KAAM2H,KAAKgkL,mBAE7CE,UAAW,WACT,MAAO,gCAAkCzrD,mBAAmBz4H,KAAKikL,mBA6FnEE,EAAiB,WACnB,IAAIC,EAAMpkL,KAENqkL,EAAKD,EAAIE,eAETC,EAAKH,EAAII,MAAMD,IAAMF,EAEzB,OAAQD,EAAIX,UAKPW,EAAIX,UAAYc,EAAG,MAAO,CAC7BE,MAAO,CAACL,EAAInrL,YACX,CAACsrL,EAAG,SAAU,CACflqL,MAAO,CACLgZ,IAAK+wK,EAAIF,UACThlJ,MAAOklJ,EAAIV,iBAERU,EAAI/pD,KAZakqD,EAAG,MAAO,CAChCE,MAAO,CAACL,EAAInrL,WACZyrL,SAAU,CACRv+I,UAAWi+I,EAAIO,GAAGP,EAAIH,mBAa5BE,EAAeS,eAAgB,EAG/B,IAgBIC,EAAiC/C,EAAmB,CACtDS,OAAQ4B,EACR3B,gBAtB4B,IAIFtnL,UAmBFqoL,EAhBHroL,UAMc,MAHLA,WAauF,OAAOA,OAAWA,OAAWA,GAapJ,IAAIwrD,EAAS,CACXo+H,QAXF,SAASA,EAAQC,GACXD,EAAQE,YAIZF,EAAQE,WAAY,EACpBD,EAAIj5K,UAAU,SAAU+4K,MAQtBI,EAAY,KAEM,qBAAXh3L,OACTg3L,EAAYh3L,OAAO82L,IACQ,qBAAX72L,IAChB+2L,EAAY/2L,EAAO62L,KAGjBE,GACFA,EAAU38H,IAAI5B,GAGD,Q,oDCnMf,sDAEIw+H,EAAuB,KAGvBC,EAAW,CACbC,kBAAmB,OACnBC,kBAAmB,QACnBC,SAAU,cAERC,EAAY,gEACZC,EAAY,4EACZC,EAAgB,gCA2DL,SAASC,EAASC,EAAUC,GACzC,YAAa,EAAGr4L,WAChB,IAAIgR,EAAUqnL,GAAgB,GAC1BC,EAA+C,MAA5BtnL,EAAQsnL,iBAtED,EAsEwD,YAAUtnL,EAAQsnL,kBAExG,GAAyB,IAArBA,GAA+C,IAArBA,GAA+C,IAArBA,EACtD,MAAM,IAAI/pD,WAAW,sCAGvB,GAA0B,kBAAb6pD,GAAsE,oBAA7C9yL,OAAOlE,UAAUiE,SAASe,KAAKgyL,GACnE,OAAO,IAAI93L,KAAKuiD,KAGlB,IACI2uB,EADA+mH,EAAcC,EAAgBJ,GAGlC,GAAIG,EAAY/mH,KAAM,CACpB,IAAIinH,EAAkBC,EAAUH,EAAY/mH,KAAM8mH,GAClD9mH,EAAOmnH,EAAUF,EAAgBG,eAAgBH,EAAgBI,MAGnE,GAAIn4K,MAAM8wD,KAAUA,EAClB,OAAO,IAAIlxE,KAAKuiD,KAGlB,IAEI4hB,EAFAsa,EAAYvN,EAAKrxE,UACjBqlC,EAAO,EAGX,GAAI+yJ,EAAY/yJ,OACdA,EAAOszJ,EAAUP,EAAY/yJ,MAEzB9kB,MAAM8kB,IAAkB,OAATA,GACjB,OAAO,IAAIllC,KAAKuiD,KAIpB,IAAI01I,EAAYR,SAMT,CACL,IAAI13L,EAAY,IAAIC,KAAKy+E,EAAYv5C,GAMjCv9B,EAAS,IAAI3H,KAAK,GAGtB,OAFA2H,EAAO8wL,YAAY14L,EAAU24L,iBAAkB34L,EAAU44L,cAAe54L,EAAU64L,cAClFjxL,EAAOkxL,SAAS94L,EAAU+4L,cAAe/4L,EAAUg5L,gBAAiBh5L,EAAUi5L,gBAAiBj5L,EAAUk5L,sBAClGtxL,EAbP,OAFAw8D,EAAS+0H,EAAcjB,EAAYR,UAE/Br3K,MAAM+jD,GACD,IAAInkE,KAAKuiD,KAeb,IAAIviD,KAAKy+E,EAAYv5C,EAAOi/B,GAGrC,SAAS+zH,EAAgBiB,GACvB,IAEIC,EAFAnB,EAAc,GACdp4G,EAAQs5G,EAAWxtL,MAAM2rL,EAASC,mBAItC,GAAI13G,EAAM79E,OAAS,EACjB,OAAOi2L,EAgBT,GAbI,IAAI30L,KAAKu8E,EAAM,KACjBo4G,EAAY/mH,KAAO,KACnBkoH,EAAav5G,EAAM,KAEnBo4G,EAAY/mH,KAAO2O,EAAM,GACzBu5G,EAAav5G,EAAM,GAEfy3G,EAASE,kBAAkBl0L,KAAK20L,EAAY/mH,QAC9C+mH,EAAY/mH,KAAOioH,EAAWxtL,MAAM2rL,EAASE,mBAAmB,GAChE4B,EAAaD,EAAWx0G,OAAOszG,EAAY/mH,KAAKlvE,OAAQm3L,EAAWn3L,UAInEo3L,EAAY,CACd,IAAIC,EAAQ/B,EAASG,SAAS9wL,KAAKyyL,GAE/BC,GACFpB,EAAY/yJ,KAAOk0J,EAAW5+K,QAAQ6+K,EAAM,GAAI,IAChDpB,EAAYR,SAAW4B,EAAM,IAE7BpB,EAAY/yJ,KAAOk0J,EAIvB,OAAOnB,EAGT,SAASG,EAAUe,EAAYnB,GAC7B,IAAIsB,EAAQ,IAAIt2L,OAAO,wBAA0B,EAAIg1L,GAAoB,uBAAyB,EAAIA,GAAoB,QACtHuB,EAAWJ,EAAW7yL,MAAMgzL,GAEhC,IAAKC,EAAU,MAAO,CACpBhB,KAAM,MAER,IAAIA,EAAOgB,EAAS,IAAMt5K,SAASs5K,EAAS,IACxCC,EAAUD,EAAS,IAAMt5K,SAASs5K,EAAS,IAC/C,MAAO,CACLhB,KAAiB,MAAXiB,EAAkBjB,EAAiB,IAAViB,EAC/BlB,eAAgBa,EAAW13L,OAAO83L,EAAS,IAAMA,EAAS,IAAIv3L,SAIlE,SAASq2L,EAAUc,EAAYZ,GAE7B,GAAa,OAATA,EAAe,OAAO,KAC1B,IAAIgB,EAAWJ,EAAW7yL,MAAMoxL,GAEhC,IAAK6B,EAAU,OAAO,KACtB,IAAIE,IAAeF,EAAS,GACxBG,EAAYC,EAAcJ,EAAS,IACnCK,EAAQD,EAAcJ,EAAS,IAAM,EACrCx3B,EAAM43B,EAAcJ,EAAS,IAC7BM,EAAOF,EAAcJ,EAAS,IAC9BO,EAAYH,EAAcJ,EAAS,IAAM,EAE7C,GAAIE,EACF,OAgFJ,SAA0BM,EAAOF,EAAM93B,GACrC,OAAO83B,GAAQ,GAAKA,GAAQ,IAAM93B,GAAO,GAAKA,GAAO,EAjF9Ci4B,CAAiBzB,EAAMsB,EAAMC,GAuDtC,SAA0BG,EAAaJ,EAAM93B,GAC3C,IAAI7wF,EAAO,IAAIlxE,KAAK,GACpBkxE,EAAKgpH,eAAeD,EAAa,EAAG,GACpC,IAAIE,EAAqBjpH,EAAKkpH,aAAe,EACzC/tE,EAAoB,GAAZwtE,EAAO,GAAS93B,EAAM,EAAIo4B,EAEtC,OADAjpH,EAAKmpH,WAAWnpH,EAAK0nH,aAAevsE,GAC7Bn7C,EAzDEopH,CAAiB/B,EAAMsB,EAAMC,GAH3B,IAAI95L,KAAKuiD,KAKlB,IAAI2uB,EAAO,IAAIlxE,KAAK,GAEpB,OAgEJ,SAAsBu4L,EAAMqB,EAAO1oH,GACjC,OAAO0oH,GAAS,GAAKA,GAAS,IAAM1oH,GAAQ,GAAKA,IAASqpH,EAAaX,KAAWY,EAAgBjC,GAAQ,GAAK,KAjExGkC,CAAalC,EAAMqB,EAAO73B,IAoEnC,SAA+Bw2B,EAAMmB,GACnC,OAAOA,GAAa,GAAKA,IAAcc,EAAgBjC,GAAQ,IAAM,KArE3BmC,CAAsBnC,EAAMmB,IAIpExoH,EAAKgpH,eAAe3B,EAAMqB,EAAOrqL,KAAKC,IAAIkqL,EAAW33B,IAC9C7wF,GAJE,IAAIlxE,KAAKuiD,KAQtB,SAASo3I,EAAc/zL,GACrB,OAAOA,EAAQqa,SAASra,GAAS,EAGnC,SAAS4yL,EAAUY,GACjB,IAAIG,EAAWH,EAAW9yL,MAAMqxL,GAChC,IAAK4B,EAAU,OAAO,KAEtB,IAAI93B,EAAQk5B,EAAcpB,EAAS,IAC/B73B,EAAUi5B,EAAcpB,EAAS,IACjCp1J,EAAUw2J,EAAcpB,EAAS,IAErC,OAuDF,SAAsB93B,EAAOC,EAASv9H,GACpC,GAAc,KAAVs9H,EACF,OAAmB,IAAZC,GAA6B,IAAZv9H,EAG1B,OAAOA,GAAW,GAAKA,EAAU,IAAMu9H,GAAW,GAAKA,EAAU,IAAMD,GAAS,GAAKA,EAAQ,GA5DxFm5B,CAAan5B,EAAOC,EAASv9H,GAI3Bs9H,EAAQ41B,EAlOY,IAkOW31B,EAA6C,IAAVv9H,EAHhEoe,IAMX,SAASo4I,EAAc/0L,GACrB,OAAOA,GAASiB,WAAWjB,EAAM4U,QAAQ,IAAK,OAAS,EAGzD,SAAS0+K,EAAc2B,GACrB,GAAuB,MAAnBA,EAAwB,OAAO,EACnC,IAAItB,EAAWsB,EAAev0L,MAAMsxL,GACpC,IAAK2B,EAAU,OAAO,EACtB,IAAI5sK,EAAuB,MAAhB4sK,EAAS,IAAc,EAAI,EAClC93B,EAAQxhJ,SAASs5K,EAAS,IAC1B73B,EAAU63B,EAAS,IAAMt5K,SAASs5K,EAAS,KAAO,EAEtD,OA4CF,SAA0BuB,EAAQp5B,GAChC,OAAOA,GAAW,GAAKA,GAAW,GA7C7Bq5B,CAAiBt5B,EAAOC,GAItB/0I,GAAQ80I,EAAQ41B,EArPI,IAqPmB31B,GAHrCn/G,IAiBX,IAAIg4I,EAAe,CAAC,GAAI,KAAM,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAElE,SAASC,EAAgBjC,GACvB,OAAOA,EAAO,MAAQ,GAAKA,EAAO,IAAM,GAAKA,EAAO,M,kCCzQtD,8DAmCe,SAASyC,EAAYj7L,EAAWg4L,GAC7C,YAAa,EAAGr4L,WAChB,IAAIgR,EAAUqnL,GAAgB,GAC1BkD,EAASvqL,EAAQuqL,OACjBC,EAAqBD,GAAUA,EAAOvqL,SAAWuqL,EAAOvqL,QAAQyqL,aAChEC,EAA4C,MAAtBF,EAA6B,EAAI,YAAUA,GACjEC,EAAuC,MAAxBzqL,EAAQyqL,aAAuBC,EAAsB,YAAU1qL,EAAQyqL,cAE1F,KAAMA,GAAgB,GAAKA,GAAgB,GACzC,MAAM,IAAIltD,WAAW,oDAGvB,IAAI/8D,EAAO,YAAOnxE,GACdgiK,EAAM7wF,EAAKmqH,SACXhvE,GAAQ01C,EAAMo5B,EAAe,EAAI,GAAKp5B,EAAMo5B,EAGhD,OAFAjqH,EAAKoqH,QAAQpqH,EAAKqqH,UAAYlvE,GAC9Bn7C,EAAK2nH,SAAS,EAAG,EAAG,EAAG,GAChB3nH,I,kCCpDT,+DA0Be,SAASsqH,EAASz7L,EAAW07L,GAC1C,YAAa,EAAG/7L,WAChB,IAAIg8L,EAAS,YAAUD,GACnB35B,EAAgB,EAAT45B,EACX,OAAO,YAAQ37L,EAAW+hK,K,kCC9B5B,sDAwBe,SAAS65B,EAASzqH,GAE/B,OADA,YAAa,EAAGxxE,WACiB,IAA1B,YAAOwxE,GAAMmqH,W,kCC1BtB,sDAyBe,SAASO,EAAa77L,GACnC,YAAa,EAAGL,WAChB,IAAIwxE,EAAO,YAAOnxE,GAGlB,OAFAmxE,EAAKoqH,QAAQ,GACbpqH,EAAK2nH,SAAS,EAAG,EAAG,EAAG,GAChB3nH,I,kCC9BT,8DA0Be,SAAS2qH,EAAW97L,EAAW+7L,GAC5C,YAAa,EAAGp8L,WAChB,IAAIwxE,EAAO,YAAOnxE,GACdokC,EAAU,YAAU23J,GAExB,OADA5qH,EAAK2qH,WAAW13J,GACT+sC,I,kCC/BT,8DA0Be,SAAS6qH,EAAWh8L,EAAWi8L,GAC5C,YAAa,EAAGt8L,WAChB,IAAIwxE,EAAO,YAAOnxE,GACd2hK,EAAU,YAAUs6B,GAExB,OADA9qH,EAAK6qH,WAAWr6B,GACTxwF,I,kCC/BT,8DA0Be,SAAS2nH,EAAS94L,EAAWk8L,GAC1C,YAAa,EAAGv8L,WAChB,IAAIwxE,EAAO,YAAOnxE,GACd0hK,EAAQ,YAAUw6B,GAEtB,OADA/qH,EAAK2nH,SAASp3B,GACPvwF,I,mBC/BT,SAASzwE,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAYnX,SAASwU,EAAQgnL,GAEf,GAAIA,GAAe,WAAaz7L,EAAQy7L,GAAc,CACpD,IAAIC,EAAaD,EAAYlnL,OAASknL,EAAYhnL,SAAWgnL,EAAYjnL,SACrEknL,IAAYD,EAAcC,GAIhC,GAAI,kBAAoBD,EAAa,OAAOt+K,EAAMs+K,GAElD,IAKIE,EALAC,EAAS9lI,OAAO2lI,GAGpB,OADIE,EAAgB9wJ,EAAM+wJ,EAAO9tL,gBACP6tL,GAEtBA,EAAgBE,EAAQD,EAAO9tL,kBAGb,IAAlB8tL,EAAOr6L,OAAqBq6L,EAAO/iH,WAAW,QAAlD,GAaFpkE,EAAQyL,WAAa,SAAoBzS,EAAOquL,GAC9C,GAAIruL,GAAS,WAAazN,EAAQyN,GAAQ,CACxC,IAAIgH,EAAUhH,EAAM8G,OAAS9G,EAAMgH,SAAWhH,EAAM+G,SAEpD,GAAgB,OAAZC,QAAgC7H,IAAZ6H,EACtB,OAAO,EAGT,GAA0B,kBAAfqnL,EAAyB,CAElC,IAOIH,EALJ,GAFIA,EAAgB9wJ,EAAMixJ,EAAWhuL,eAGnC,OAAO6tL,IAAkBlnL,EAM3B,GAFIknL,EAAgBE,EAAQC,EAAWhuL,eAGrC,OAAO6tL,IAAkBlnL,OAEtB,GAA0B,kBAAfqnL,EAChB,OAAOA,IAAernL,EAGxB,OAAO,IAWX,IAAIo2B,GAPJ9qC,EAAUD,EAAOC,QAAU0U,GAOP6H,KAAOvc,EAAQ8qC,MAAQ,CACzC,UAAa,EACb,IAAO,EACP,MAAS,GACT,MAAS,GACT,KAAQ,GACR,IAAO,GACP,cAAe,GACf,YAAa,GACb,IAAO,GACP,MAAS,GACT,UAAW,GACX,YAAa,GACb,IAAO,GACP,KAAQ,GACR,KAAQ,GACR,GAAM,GACN,MAAS,GACT,KAAQ,GACR,OAAU,GACV,OAAU,GACV,QAAW,GACX,eAAgB,GAChB,gBAAiB,GACjB,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,cAAe,IACf,cAAe,IACf,gBAAiB,IACjB,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,KAGHgxJ,EAAU97L,EAAQ87L,QAAU,CAC9B,QAAW,GACX,SAAK,GACL,SAAK,GACL,SAAK,GACL,SAAK,GACL,IAAO,GACP,QAAW,GACX,OAAU,GACV,MAAS,GACT,MAAS,GACT,KAAQ,GACR,OAAU,GACV,OAAU,GACV,IAAO,GACP,SAAY,GACZ,KAAQ,GACR,KAAQ,GACR,IAAO,GACP,IAAO,GACP,IAAO,IAOT,IAAKv6L,EAAI,GAAIA,EAAI,IAAKA,IACpBupC,EAAMirB,OAAO+T,aAAavoE,IAAMA,EAAI,GAItC,IAAK,IAAIA,EAAI,GAAIA,EAAI,GAAIA,IACvBupC,EAAMvpC,EAAI,IAAMA,EAIlB,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAClBupC,EAAM,IAAMvpC,GAAKA,EAAI,IAIvB,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAClBupC,EAAM,UAAYvpC,GAAKA,EAAI,GAS7B,IAAI6b,EAAQpd,EAAQod,MAAQpd,EAAQ6wC,MAAQ,GAG5C,IAAKtvC,KAAKupC,EACR1tB,EAAM0tB,EAAMvpC,IAAMA,EAIpB,IAAK,IAAIy6L,KAASF,EAChBhxJ,EAAMkxJ,GAASF,EAAQE,I,mBC3LzBj8L,EAAOC,QAEP,SAAwBE,EAAK+7L,GAC3B,IAAIl3K,EACAxhB,EAAQ,KAEZ,IACEwhB,EAAOwzB,KAAKzpB,MAAM5uB,EAAK+7L,GACvB,MAAOzsK,KACPjsB,EAAQisB,IAGV,MAAO,CAACjsB,EAAOwhB,K,kCCVjB,IAAInlB,EAAS,EAAQ,MAEjB6sJ,EAAW,EAAQ,MAEnByvC,EAAa,EAAQ,MAEzBC,EAAUC,YAAc,EAAQ,MA2DhC,SAASC,EAAWltK,EAAKjf,EAAS4C,GAChC,IAAI2gI,EAAStkH,EAiBb,OAfI+sK,EAAWhsL,IACb4C,EAAW5C,EAEQ,kBAARif,IACTskH,EAAS,CACPtkH,IAAKA,KAITskH,EAASgZ,EAAS,GAAIv8I,EAAS,CAC7Bif,IAAKA,IAITskH,EAAO3gI,SAAWA,EACX2gI,EAGT,SAAS0oD,EAAUhtK,EAAKjf,EAAS4C,GAE/B,OAAOwpL,EADPpsL,EAAUmsL,EAAWltK,EAAKjf,EAAS4C,IAIrC,SAASwpL,EAAWpsL,GAClB,GAAgC,qBAArBA,EAAQ4C,SACjB,MAAM,IAAIpP,MAAM,6BAGlB,IAAI64L,GAAS,EAETzpL,EAAW,SAAgB0c,EAAKC,EAAUpjB,GACvCkwL,IACHA,GAAS,EACTrsL,EAAQ4C,SAAS0c,EAAKC,EAAUpjB,KAUpC,SAASmwL,IAEP,IAAInwL,OAAOQ,EAQX,GALER,EADE4uD,EAAIxrC,SACCwrC,EAAIxrC,SAEJwrC,EAAIiL,cA6JjB,SAAgBjL,GAGd,IACE,GAAyB,aAArBA,EAAIsN,aACN,OAAOtN,EAAIwhI,YAGb,IAAIC,EAAwBzhI,EAAIwhI,aAA4D,gBAA7CxhI,EAAIwhI,YAAYvoL,gBAAgBpG,SAE/E,GAAyB,KAArBmtD,EAAIsN,eAAwBm0H,EAC9B,OAAOzhI,EAAIwhI,YAEb,MAAO72L,IAET,OAAO,KA5KwB+2L,CAAO1hI,GAGhC2hI,EACF,IACEvwL,EAAOksC,KAAKzpB,MAAMziB,GAClB,MAAOzG,IAGX,OAAOyG,EAGT,SAASwwL,EAAUC,GAQjB,OAPA7lL,aAAa8lL,GAEPD,aAAep5L,QACnBo5L,EAAM,IAAIp5L,MAAM,IAAMo5L,GAAO,kCAG/BA,EAAI9zH,WAAa,EACVl2D,EAASgqL,EAAKE,GAIvB,SAASC,IACP,IAAIl0H,EAAJ,CACA,IAAIjlD,EACJ7M,aAAa8lL,GAIXj5K,EAFE5T,EAAQgtL,aAAyBrwL,IAAfouD,EAAIn3C,OAEf,IAEe,OAAfm3C,EAAIn3C,OAAkB,IAAMm3C,EAAIn3C,OAG3C,IAAI2L,EAAWutK,EACXxtK,EAAM,KAoBV,OAlBe,IAAX1L,GACF2L,EAAW,CACTpjB,KAAMmwL,IACNxzH,WAAYllD,EACZhb,OAAQA,EACR8/D,QAAS,GACTz7C,IAAKgC,EACLguK,WAAYliI,GAGVA,EAAImiI,wBAEN3tK,EAASm5C,QA1JE,SAAsBA,GACvC,IAAIzhE,EAAS,GAEb,OAAKyhE,GAILA,EAAQtgE,OAAO6C,MAAM,MAAMtG,SAAQ,SAAUq/E,GAC3C,IAAInjF,EAAQmjF,EAAIljF,QAAQ,KACpB8D,EAAMo/E,EAAIjjF,MAAM,EAAGF,GAAOuH,OAAOyF,cACjC3I,EAAQ8+E,EAAIjjF,MAAMF,EAAQ,GAAGuH,OAEN,qBAAhBnB,EAAOrC,GAChBqC,EAAOrC,GAAOM,EACLjD,MAAMY,QAAQoE,EAAOrC,IAC9BqC,EAAOrC,GAAKnC,KAAKyC,GAEjB+B,EAAOrC,GAAO,CAACqC,EAAOrC,GAAMM,MAGzB+B,GAhBEA,EAsJgBk2L,CAAapiI,EAAImiI,2BAGtC5tK,EAAM,IAAI9rB,MAAM,iCAGXoP,EAAS0c,EAAKC,EAAUA,EAASpjB,OAG1C,IAUIvH,EACAikE,EAXA9N,EAAM/qD,EAAQ+qD,KAAO,KAEpBA,IAEDA,EADE/qD,EAAQmf,MAAQnf,EAAQgtL,OACpB,IAAIf,EAAUmB,eAEd,IAAInB,EAAUoB,gBAMxB,IAMIR,EANA5tK,EAAM8rC,EAAI9tC,IAAMjd,EAAQif,KAAOjf,EAAQid,IACvCrkB,EAASmyD,EAAInyD,OAASoH,EAAQpH,QAAU,MACxCuD,EAAO6D,EAAQ7D,MAAQ6D,EAAQ6B,KAC/B62D,EAAU3N,EAAI2N,QAAU14D,EAAQ04D,SAAW,GAC3CjqD,IAASzO,EAAQyO,KACjBi+K,GAAS,EAETI,EAAkB,CACpB3wL,UAAMQ,EACN+7D,QAAS,GACTI,WAAY,EACZlgE,OAAQA,EACRqkB,IAAKgC,EACLguK,WAAYliI,GA+Cd,GA5CI,SAAU/qD,IAA4B,IAAjBA,EAAQ6U,OAC/B63K,GAAS,EACTh0H,EAAgB,QAAKA,EAAgB,SAAMA,EAAgB,OAAI,oBAEhD,QAAX9/D,GAA+B,SAAXA,IACtB8/D,EAAQ,iBAAmBA,EAAQ,kBAAoBA,EAAQ,gBAAkB,oBAEjFv8D,EAAOksC,KAAKI,WAA2B,IAAjBzoC,EAAQ6U,KAAgB1Y,EAAO6D,EAAQ6U,QAIjEk2C,EAAIwM,mBAhHJ,WACyB,IAAnBxM,EAAIjqD,YACNH,WAAWosL,EAAU,IA+GzBhiI,EAAIzlC,OAASynK,EACbhiI,EAAIxlC,QAAUonK,EAEd5hI,EAAIuiI,WAAa,aAGjBviI,EAAIwiI,QAAU,WACZ10H,GAAU,GAGZ9N,EAAIyiI,UAAYb,EAChB5hI,EAAI10C,KAAKzd,EAAQqmB,GAAMxQ,EAAMzO,EAAQytL,SAAUztL,EAAQ0tL,UAElDj/K,IACHs8C,EAAI3rC,kBAAoBpf,EAAQof,kBAM7B3Q,GAAQzO,EAAQgH,QAAU,IAC7B6lL,EAAelsL,YAAW,WACxB,IAAIk4D,EAAJ,CACAA,GAAU,EAEV9N,EAAIyM,MAAM,WACV,IAAI9hE,EAAI,IAAIlC,MAAM,0BAClBkC,EAAE2W,KAAO,YACTsgL,EAAUj3L,MACTsK,EAAQgH,UAGT+jD,EAAI4iI,iBACN,IAAK/4L,KAAO8jE,EACNA,EAAQnlE,eAAeqB,IACzBm2D,EAAI4iI,iBAAiB/4L,EAAK8jE,EAAQ9jE,SAGjC,GAAIoL,EAAQ04D,UAvMrB,SAAiB1oE,GACf,IAAK,IAAIqB,KAAKrB,EACZ,GAAIA,EAAIuD,eAAelC,GAAI,OAAO,EAGpC,OAAO,EAkMwBwiF,CAAQ7zE,EAAQ04D,SAC7C,MAAM,IAAIllE,MAAM,qDAelB,MAZI,iBAAkBwM,IACpB+qD,EAAIsN,aAAer4D,EAAQq4D,cAGzB,eAAgBr4D,GAAyC,oBAAvBA,EAAQo/D,YAC5Cp/D,EAAQo/D,WAAWrU,GAMrBA,EAAI6iI,KAAKzxL,GAAQ,MACV4uD,EA1OTl7D,EAAOC,QAAUm8L,EAEjBp8L,EAAOC,QAAQ8uI,QAAUqtD,EACzBA,EAAUoB,eAAiB39L,EAAO29L,gBA4PlC,aA3PApB,EAAUmB,eAAiB,oBAAqB,IAAInB,EAAUoB,eAAmBpB,EAAUoB,eAAiB39L,EAAO09L,eASnH,SAAsBj+G,EAAOj/E,GAC3B,IAAK,IAAImB,EAAI,EAAGA,EAAI89E,EAAM79E,OAAQD,IAChCnB,EAASi/E,EAAM99E,IAVnBw8L,CAAa,CAAC,MAAO,MAAO,OAAQ,QAAS,OAAQ,WAAW,SAAUj1L,GACxEqzL,EAAqB,WAAXrzL,EAAsB,MAAQA,GAAU,SAAUqmB,EAAKjf,EAAS4C,GAGxE,OAFA5C,EAAUmsL,EAAWltK,EAAKjf,EAAS4C,IAC3BhK,OAASA,EAAOpG,cACjB45L,EAAWpsL,Q,mBCjDtBnQ,EAAOC,QAGP,SAAoBY,GAClB,IAAKA,EACH,OAAO,EAGT,IAAImZ,EAASxV,EAASe,KAAK1E,GAC3B,MAAkB,sBAAXmZ,GAAgD,oBAAPnZ,GAAgC,oBAAXmZ,GAAkD,qBAAXna,SAC5GgB,IAAOhB,OAAOiR,YAAcjQ,IAAOhB,OAAOo+L,OAASp9L,IAAOhB,OAAOq+L,SAAWr9L,IAAOhB,OAAOs+L,SAT5F,IAAI35L,EAAWC,OAAOlE,UAAUiE,U,kCCChC,IAAI3E,EAAS,EAAQ,MA2DrBG,EAAOC,QAzDmB,SAA6B8S,EAAUqrL,GAK/D,YAJ2B,IAAvBA,IACFA,GAAqB,GAGhB,SAAU3uK,EAAKC,EAAUC,GAE9B,GAAIF,EACF1c,EAAS0c,QAKX,GAAIC,EAASu5C,YAAc,KAAOv5C,EAASu5C,YAAc,IAAzD,CACE,IAAIuvD,EAAQ7oG,EAEZ,GAAIyuK,EACF,GAAIv+L,EAAOglF,YAAa,CACtB,IAAIw5G,EAqBd,SAAoBC,QACQ,IAAtBA,IACFA,EAAoB,IAGtB,OAAOA,EAAkBtwL,cAAc5C,MAAM,KAAKkS,QAAO,SAAU+gL,EAASE,GAC1E,IAAIC,EAAqBD,EAAYnzL,MAAM,KACvCxK,EAAO49L,EAAmB,GAC1Bn5L,EAAQm5L,EAAmB,GAE/B,MAAoB,YAAhB59L,EAAK2H,OACAlD,EAAMkD,OAGR81L,IACN,SApCmBI,CAAW/uK,EAASm5C,SAAWn5C,EAASm5C,QAAQ,iBAE9D,IACE2vD,EAAQ,IAAI3zC,YAAYw5G,GAAS12G,OAAOh4D,GACxC,MAAO9pB,UAET2yH,EAAQxiE,OAAO+T,aAAa5kE,MAAM,KAAM,IAAI2zE,WAAWnpD,IAI3D5c,EAAS,CACPylH,MAAOA,SAMXzlH,EAAS,KAAM4c,M,qBCpBnB,IAAI9vB,EAAS,EAAQ,MAEjB4uB,EAAQzuB,EAAOC,QAAU,CAC3BsuB,OAAQ,EAAQ,MAChBwC,OAAQ,EAAQ,MAChB2tK,UAAW,EAAQ,OAErB7+L,EAAO4uB,MAAQA,EACf5uB,EAAO0uB,OAASE,EAAMF,OACtB,IAAIowK,EAAUlwK,EAAMsC,OAChB6tK,EAAanwK,EAAMiwK,UACnBG,EAAeh/L,EAAOkxB,OACtB+tK,EAAkBj/L,EAAO6+L,UAE7BjwK,EAAMswK,KAAO,WACXl/L,EAAOkxB,OAAS4tK,EAChB9+L,EAAO6+L,UAAYE,GAGrBnwK,EAAMuwK,QAAU,WACdn/L,EAAOkxB,OAAS8tK,EAChBh/L,EAAO6+L,UAAYI,GAGhBj/L,EAAOkxB,QACVtC,EAAMswK,Q,qBCzBR,IAAIl3L,EAAW,EAAQ,MAEnBo3L,EAAax6L,OAAO2qH,QAAU,WAChC,SAAS4c,KAET,OAAO,SAAUv0F,GACf,GAAyB,IAArBt4C,UAAUsC,OACZ,MAAM,IAAIkC,MAAM,kDAIlB,OADAqoI,EAAEzrI,UAAYk3C,EACP,IAAIu0F,GATmB,GAiBlC,SAASkzD,EAAaC,EAAWt7K,GAC/BjS,KAAK9P,KAAO,eACZ8P,KAAK4K,KAAO2iL,EAAU3iL,KACtB5K,KAAKiS,QAAUA,GAAWs7K,EAAUt7K,QAiBtC,SAASu7K,EAAevxC,GACtB,SAASwxC,EAAet7J,EAAG9uB,EAAG6uB,EAAGooG,GAC/B,OAAiB,MAAL,EAAJnoG,GAA0B,IAAL,EAAJ9uB,IAAmB,EAAJ6uB,IAAc,EAAJooG,GAAS,IAG7D,IAAIj3H,EAAI44I,EAAM9nJ,MAAM,wCAEpB,OAAKkP,EAIDA,EAAE,GAEGoqL,EAAepqL,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAGgF,QAAQ,IAAK,IAAKhF,EAAE,IAClDA,EAAE,GAAK,GAGToqL,EAAepqL,EAAE,GAAIA,EAAE,GAAI,EAAGA,EAAE,IAGhCoqL,EAAe,EAAGpqL,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAZhC,KAkBX,SAASqqL,IACP1tL,KAAK1D,OAAS+wL,EAAW,MA4D3B,SAAS97B,EAAatV,EAAO96I,EAAUwsL,EAAeC,GACpD,IAAItrE,EAASsrE,EAAa3xC,EAAMziJ,MAAMo0L,GAAc,CAAC3xC,GAErD,IAAK,IAAIrsJ,KAAK0yH,EACZ,GAAyB,kBAAdA,EAAO1yH,GAAlB,CAIA,IAAIi+L,EAAKvrE,EAAO1yH,GAAG4J,MAAMm0L,GAEzB,GAAkB,IAAdE,EAAGh+L,OAMPsR,EAFQ0sL,EAAG,GACHA,EAAG,KAKf,SAASC,EAAS7xC,EAAOrpI,EAAKm7K,GAE5B,IAAIC,EAAS/xC,EAEb,SAASgyC,IACP,IAAIt7F,EAAK66F,EAAevxC,GAExB,GAAW,OAAPtpD,EACF,MAAM,IAAI26F,EAAaA,EAAaY,OAAOC,aAAc,wBAA0BH,GAKrF,OADA/xC,EAAQA,EAAM5zI,QAAQ,iBAAkB,IACjCsqF,EAgGT,SAASy7F,IACPnyC,EAAQA,EAAM5zI,QAAQ,OAAQ,IAShC,GALA+lL,IACAx7K,EAAIC,UAAYo7K,IAEhBG,IAE2B,WAAvBnyC,EAAMzpE,OAAO,EAAG,GAElB,MAAM,IAAI86G,EAAaA,EAAaY,OAAOC,aAAc,qEAAoEH,GAG/H/xC,EAAQA,EAAMzpE,OAAO,GACrB47G,IACAx7K,EAAIE,QAAUm7K,IAGdG,IAhHA,SAA4BnyC,EAAOrpI,GACjC,IAAIuL,EAAW,IAAIuvK,EACnBn8B,EAAatV,GAAO,SAAUhhJ,EAAGgqC,GAC/B,OAAQhqC,GACN,IAAK,SAEH,IAAK,IAAIrL,EAAIm+L,EAAWl+L,OAAS,EAAGD,GAAK,EAAGA,IAC1C,GAAIm+L,EAAWn+L,GAAG6Z,KAAOw7B,EAAG,CAC1B9mB,EAAS7d,IAAIrF,EAAG8yL,EAAWn+L,GAAGy+L,QAC9B,MAIJ,MAEF,IAAK,WACHlwK,EAASmwK,IAAIrzL,EAAGgqC,EAAG,CAAC,KAAM,OAC1B,MAEF,IAAK,OACH,IAAIspJ,EAAOtpJ,EAAEzrC,MAAM,KACfg1L,EAAQD,EAAK,GACjBpwK,EAASswK,QAAQxzL,EAAGuzL,GACpBrwK,EAASmY,QAAQr7B,EAAGuzL,IAASrwK,EAAS7d,IAAI,eAAe,GACzD6d,EAASmwK,IAAIrzL,EAAGuzL,EAAO,CAAC,SAEJ,IAAhBD,EAAK1+L,QACPsuB,EAASmwK,IAAI,YAAaC,EAAK,GAAI,CAAC,QAAS,SAAU,QAGzD,MAEF,IAAK,WACHA,EAAOtpJ,EAAEzrC,MAAM,KACf2kB,EAASmY,QAAQr7B,EAAGszL,EAAK,IAEL,IAAhBA,EAAK1+L,QACPsuB,EAASmwK,IAAI,gBAAiBC,EAAK,GAAI,CAAC,QAAS,SAAU,QAG7D,MAEF,IAAK,OACHpwK,EAASmY,QAAQr7B,EAAGgqC,GACpB,MAEF,IAAK,QACH9mB,EAASmwK,IAAIrzL,EAAGgqC,EAAG,CAAC,QAAS,SAAU,MAAO,OAAQ,aAGzD,IAAK,MAERryB,EAAIy7K,OAASlwK,EAAS3d,IAAI,SAAU,MACpCoS,EAAIoiB,SAAW7W,EAAS3d,IAAI,WAAY,IAExC,IACEoS,EAAI87K,KAAOvwK,EAAS3d,IAAI,OAAQ,QAChC,MAAOvM,IAET2e,EAAI+7K,UAAYxwK,EAAS3d,IAAI,YAAa,SAC1CoS,EAAIg8K,YAAczwK,EAAS3d,IAAI,eAAe,GAC9CoS,EAAIpN,KAAO2Y,EAAS3d,IAAI,OAAQ,KAEhC,IACEoS,EAAIi2E,MAAQ1qE,EAAS3d,IAAI,QAAS,UAClC,MAAOvM,GACP2e,EAAIi2E,MAAQ1qE,EAAS3d,IAAI,QAAS,UAGpC,IACEoS,EAAIlW,SAAWyhB,EAAS3d,IAAI,WAAY,QACxC,MAAOvM,GACP2e,EAAIlW,SAAWyhB,EAAS3d,IAAI,WAAY,CACtCiR,MAAO,EACPlW,KAAM,EACNszL,OAAQ,GACRlpG,OAAQ,GACRj0E,IAAK,IACLwlB,MAAO,KACNtkB,EAAIi2E,OAGTj2E,EAAIk8K,cAAgB3wK,EAAS3d,IAAI,gBAAiB,CAChDiR,MAAO,QACPlW,KAAM,QACNszL,OAAQ,SACRlpG,OAAQ,SACRj0E,IAAK,MACLwlB,MAAO,OACNtkB,EAAIi2E,OAwBTkmG,CAAmB9yC,EAAOrpI,GA3P5B06K,EAAa3+L,UAAY0+L,EAAWt7L,MAAMpD,WAC1C2+L,EAAa3+L,UAAUD,YAAc4+L,EAErCA,EAAaY,OAAS,CACpBc,aAAc,CACZpkL,KAAM,EACNqH,QAAS,+BAEXk8K,aAAc,CACZvjL,KAAM,EACNqH,QAAS,0BAkCby7K,EAAS/+L,UAAY,CAEnB2R,IAAK,SAAarF,EAAGgqC,GACdjlC,KAAKQ,IAAIvF,IAAY,KAANgqC,IAClBjlC,KAAK1D,OAAOrB,GAAKgqC,IAQrBzkC,IAAK,SAAavF,EAAGg0L,EAAMC,GACzB,OAAIA,EACKlvL,KAAKlG,IAAImB,GAAK+E,KAAK1D,OAAOrB,GAAKg0L,EAAKC,GAGtClvL,KAAKlG,IAAImB,GAAK+E,KAAK1D,OAAOrB,GAAKg0L,GAGxCn1L,IAAK,SAAamB,GAChB,OAAOA,KAAK+E,KAAK1D,QAGnBgyL,IAAK,SAAarzL,EAAGgqC,EAAGvpB,GACtB,IAAK,IAAIpY,EAAI,EAAGA,EAAIoY,EAAE7rB,SAAUyT,EAC9B,GAAI2hC,IAAMvpB,EAAEpY,GAAI,CACdtD,KAAKM,IAAIrF,EAAGgqC,GACZ,QAKNwpJ,QAAS,SAAiBxzL,EAAGgqC,GACvB,UAAU9zC,KAAK8zC,IAEjBjlC,KAAKM,IAAIrF,EAAG6S,SAASm3B,EAAG,MAI5B3O,QAAS,SAAiBr7B,EAAGgqC,GAG3B,SAAQA,EAAE9wC,MAAM,8BACd8wC,EAAIvwC,WAAWuwC,KAEN,GAAKA,GAAK,OACjBjlC,KAAKM,IAAIrF,EAAGgqC,IACL,KAoKf,IAAIkqJ,EAAmBl5L,EAAS4B,eAAiB5B,EAAS4B,cAAc,YACpEu3L,EAAW,CACb31L,EAAG,OACH7J,EAAG,IACH4xD,EAAG,IACHy5E,EAAG,IACHo0D,KAAM,OACNC,GAAI,KACJrqJ,EAAG,OACHsqJ,KAAM,QAIJC,EAAsB,CACxBC,MAAO,sBACPC,KAAM,kBACNC,KAAM,oBACNC,IAAK,kBACLC,OAAQ,oBACRC,QAAS,oBACTC,KAAM,kBACNC,MAAO,iBAELC,EAAiB,CACnBhrJ,EAAG,QACHsqJ,KAAM,QAEJW,EAAe,CACjBZ,GAAI,QAGN,SAASa,EAAaliM,EAAQguJ,GAC5B,SAASm0C,IAEP,IAAKn0C,EACH,OAAO,KAST,IALiBzmJ,EAKb6N,EAAI44I,EAAM9nJ,MAAM,uBAGpB,OARiBqB,EAQF6N,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAP7B44I,EAAQA,EAAMzpE,OAAOh9E,EAAO3F,QACrB2F,EAgBX,SAAS66L,EAAUl0C,EAAStjJ,GAC1B,OAAQq3L,EAAar3L,EAAQgnJ,YAAcqwC,EAAar3L,EAAQgnJ,aAAe1D,EAAQ0D,UAIzF,SAAShoJ,EAAc7I,EAAMshM,GAC3B,IAAI74L,EAAU23L,EAASpgM,GAEvB,IAAKyI,EACH,OAAO,KAGT,IAAIoB,EAAU5K,EAAOgI,SAAS4B,cAAcJ,GACxCvH,EAAO+/L,EAAejhM,GAM1B,OAJIkB,GAAQogM,IACVz3L,EAAQ3I,GAAQogM,EAAW35L,QAGtBkC,EAQT,IALA,IAEIgL,EA/BcquB,EA6Bdq+J,EAAUtiM,EAAOgI,SAAS4B,cAAc,OACxCskJ,EAAUo0C,EAEVC,EAAW,GAEc,QAArB3sL,EAAIusL,MACV,GAAa,MAATvsL,EAAE,GAmENs4I,EAAQxjJ,YAAY1K,EAAOgI,SAAS0H,gBAtGpBu0B,EAsG4CruB,EArG5DsrL,EAAiBhpJ,UAAYjU,EAC7BA,EAAIi9J,EAAiBj3L,YACrBi3L,EAAiBj3L,YAAc,GACxBg6B,SA+BP,CACE,GAAa,MAATruB,EAAE,GAAY,CAEZ2sL,EAAS3gM,QAAU2gM,EAASA,EAAS3gM,OAAS,KAAOgU,EAAE2uE,OAAO,GAAGnqE,QAAQ,IAAK,MAChFmoL,EAAS77L,MACTwnJ,EAAUA,EAAQphJ,YAIpB,SAGF,IACI6C,EADA+0F,EAAK66F,EAAe3pL,EAAE2uE,OAAO,EAAG3uE,EAAEhU,OAAS,IAG/C,GAAI8iG,EAAI,CAEN/0F,EAAO3P,EAAOgI,SAASswJ,4BAA4B,YAAa5zD,GAChEwpD,EAAQxjJ,YAAYiF,GACpB,SAGF,IAAIyF,EAAIQ,EAAE1P,MAAM,oDAEhB,IAAKkP,EACH,SAMF,KAFAzF,EAAO/F,EAAcwL,EAAE,GAAIA,EAAE,KAG3B,SAKF,IAAKgtL,EAAUl0C,EAASv+I,GACtB,SAIF,GAAIyF,EAAE,GAAI,CACR,IAAIotL,EAAUptL,EAAE,GAAG7J,MAAM,KACzBi3L,EAAQv9L,SAAQ,SAAUw9L,GACxB,IAAIC,EAAU,OAAOx/L,KAAKu/L,GAEtBE,EAAYD,EAAUD,EAAGphM,MAAM,GAAKohM,EAExC,GAAIlB,EAAoB19L,eAAe8+L,GAAY,CACjD,IAAI74L,EAAW44L,EAAU,mBAAqB,QAC1CE,EAAYrB,EAAoBoB,GACpChzL,EAAK6B,MAAM1H,GAAY84L,MAG3BjzL,EAAK3E,UAAYw3L,EAAQ/2L,KAAK,KAKhC82L,EAASx/L,KAAKqS,EAAE,IAChB84I,EAAQxjJ,YAAYiF,GACpBu+I,EAAUv+I,EAQd,OAAO2yL,EAQT,IAAIO,EAAkB,CAAC,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAQ,MAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,QAAU,UAEp6D,SAASC,EAAgBjuL,GACvB,IAAK,IAAIlT,EAAI,EAAGA,EAAIkhM,EAAgBjhM,OAAQD,IAAK,CAC/C,IAAIg/H,EAAekiE,EAAgBlhM,GAEnC,GAAIkT,GAAY8rH,EAAa,IAAM9rH,GAAY8rH,EAAa,GAC1D,OAAO,EAIX,OAAO,EAGT,SAASoiE,EAActhK,GACrB,IAAIuhK,EAAY,GACZ54L,EAAO,GAGX,IAAKq3B,IAAWA,EAAO6b,WACrB,MAAO,MAGT,SAAS2lJ,EAAUD,EAAWrzL,GAC5B,IAAK,IAAIhO,EAAIgO,EAAK2tC,WAAW17C,OAAS,EAAGD,GAAK,EAAGA,IAC/CqhM,EAAUjgM,KAAK4M,EAAK2tC,WAAW37C,IAInC,SAASuhM,EAAaF,GACpB,IAAKA,IAAcA,EAAUphM,OAC3B,OAAO,KAGT,IAAI+N,EAAOqzL,EAAUt8L,MACjB0D,EAAOuF,EAAK1F,aAAe0F,EAAKtF,UAEpC,GAAID,EAAM,CAGR,IAAIgL,EAAIhL,EAAKlE,MAAM,cAEnB,OAAIkP,GACF4tL,EAAUphM,OAAS,EACZwT,EAAE,IAGJhL,EAGT,MAAqB,SAAjBuF,EAAKnG,QACA05L,EAAaF,GAGlBrzL,EAAK2tC,YACP2lJ,EAAUD,EAAWrzL,GACduzL,EAAaF,SAFtB,EAQF,IAFAC,EAAUD,EAAWvhK,GAEdr3B,EAAO84L,EAAaF,IACzB,IAAK,IAAIrhM,EAAI,EAAGA,EAAIyI,EAAKxI,OAAQD,IAG/B,GAAImhM,EAFO14L,EAAK8uE,WAAWv3E,IAGzB,MAAO,MAKb,MAAO,MAyBT,SAASwhM,KAoBT,SAASC,EAAYpjM,EAAQ2kB,EAAK0+K,GAChCF,EAASz9L,KAAKqM,MACdA,KAAK4S,IAAMA,EAGX5S,KAAK0vB,OAASygK,EAAaliM,EAAQ2kB,EAAIva,MACvC,IAAI4pI,EAAS,CACXn0G,MAAO,yBACP+B,gBAAiB,qBACjBnzB,SAAU,WACVnB,KAAM,EACN27B,MAAO,EACP17B,IAAK,EACL0/B,OAAQ,EACRgnG,QAAS,SACTqvD,YAA8B,KAAjB3+K,EAAIoiB,SAAkB,gBAAmC,OAAjBpiB,EAAIoiB,SAAoB,cAAgB,cAC7Fw8J,YAAa,aAEfxxL,KAAKyxL,YAAYxvD,EAAQjiI,KAAK0vB,QAI9B1vB,KAAKwzB,IAAMvlC,EAAOgI,SAAS4B,cAAc,OACzCoqI,EAAS,CACPzlD,UAAWw0G,EAAchxL,KAAK0vB,QAC9B6hK,YAA8B,KAAjB3+K,EAAIoiB,SAAkB,gBAAmC,OAAjBpiB,EAAIoiB,SAAoB,cAAgB,cAC7Fw8J,YAAa,YACbE,UAAyB,WAAd9+K,EAAIi2E,MAAqB,SAAWj2E,EAAIi2E,MACnD8oG,KAAML,EAAaK,KACnBC,WAAY,WACZl1L,SAAU,YAEZsD,KAAKyxL,YAAYxvD,GACjBjiI,KAAKwzB,IAAI76B,YAAYqH,KAAK0vB,QAI1B,IAAImiK,EAAU,EAEd,OAAQj/K,EAAIk8K,eACV,IAAK,QACH+C,EAAUj/K,EAAIlW,SACd,MAEF,IAAK,SACHm1L,EAAUj/K,EAAIlW,SAAWkW,EAAIpN,KAAO,EACpC,MAEF,IAAK,MACHqsL,EAAUj/K,EAAIlW,SAAWkW,EAAIpN,KAOZ,KAAjBoN,EAAIoiB,SACNh1B,KAAKyxL,YAAY,CACfl2L,KAAMyE,KAAK8xL,YAAYD,EAAS,KAChCz2L,MAAO4E,KAAK8xL,YAAYl/K,EAAIpN,KAAM,OAKpCxF,KAAKyxL,YAAY,CACfj2L,IAAKwE,KAAK8xL,YAAYD,EAAS,KAC/B12L,OAAQ6E,KAAK8xL,YAAYl/K,EAAIpN,KAAM,OAIvCxF,KAAK+xL,KAAO,SAAUn1L,GACpBoD,KAAKyxL,YAAY,CACfj2L,IAAKwE,KAAK8xL,YAAYl1L,EAAIpB,IAAK,MAC/B0/B,OAAQl7B,KAAK8xL,YAAYl1L,EAAIs+B,OAAQ,MACrC3/B,KAAMyE,KAAK8xL,YAAYl1L,EAAIrB,KAAM,MACjC27B,MAAOl3B,KAAK8xL,YAAYl1L,EAAIs6B,MAAO,MACnC/7B,OAAQ6E,KAAK8xL,YAAYl1L,EAAIzB,OAAQ,MACrCC,MAAO4E,KAAK8xL,YAAYl1L,EAAIxB,MAAO,SAUzC,SAAS42L,EAAYzjM,GAKnB,IAAI0jM,EAAI92L,EAAQC,EAAOI,EAEvB,GAAIjN,EAAIilC,IAAK,CACXr4B,EAAS5M,EAAIilC,IAAI93B,aACjBN,EAAQ7M,EAAIilC,IAAI/3B,YAChBD,EAAMjN,EAAIilC,IAAI33B,UACd,IAAIq2L,GAASA,EAAQ3jM,EAAIilC,IAAI+X,cAAgB2mJ,EAAQA,EAAM,KAAOA,EAAMC,gBAAkBD,EAAMC,iBAChG5jM,EAAMA,EAAIilC,IAAI14B,wBAKdm3L,EAAKC,EAAQ90L,KAAKC,IAAI60L,EAAM,IAAMA,EAAM,GAAG/2L,QAAU,EAAG5M,EAAI4M,OAAS+2L,EAAMriM,QAAU,EAGvFmQ,KAAKzE,KAAOhN,EAAIgN,KAChByE,KAAKk3B,MAAQ3oC,EAAI2oC,MACjBl3B,KAAKxE,IAAMjN,EAAIiN,KAAOA,EACtBwE,KAAK7E,OAAS5M,EAAI4M,QAAUA,EAC5B6E,KAAKk7B,OAAS3sC,EAAI2sC,QAAU1/B,GAAOjN,EAAI4M,QAAUA,GACjD6E,KAAK5E,MAAQ7M,EAAI6M,OAASA,EAC1B4E,KAAKoyL,gBAAoBl3L,IAAP+2L,EAAmBA,EAAK1jM,EAAI6jM,WAsHhD,SAASC,EAAsBpkM,EAAQqkM,EAAUC,EAAcC,GAqC7D,IAAIC,EAAc,IAAIT,EAAYM,GAC9B1/K,EAAM0/K,EAAS1/K,IACf8/K,EAxTN,SAAwB9/K,GACtB,GAAwB,kBAAbA,EAAI87K,OAAsB97K,EAAIg8K,aAAeh8K,EAAI87K,MAAQ,GAAK97K,EAAI87K,MAAQ,KACnF,OAAO97K,EAAI87K,KAGb,IAAK97K,EAAIF,QAAUE,EAAIF,MAAMigL,gBAAkB//K,EAAIF,MAAMigL,cAAc5nD,aACrE,OAAQ,EAOV,IAJA,IAAIr4H,EAAQE,EAAIF,MACZgc,EAAYhc,EAAMigL,cAClB9mI,EAAQ,EAEHj8D,EAAI,EAAGA,EAAI8+B,EAAU7+B,QAAU6+B,EAAU9+B,KAAO8iB,EAAO9iB,IACpC,YAAtB8+B,EAAU9+B,GAAGyuB,MACfwtC,IAIJ,OAAkB,IAATA,EAqSK+mI,CAAehgL,GACzBigL,EAAO,GAEX,GAAIjgL,EAAIg8K,YAAa,CACnB,IAAIppL,EAEJ,OAAQoN,EAAIoiB,UACV,IAAK,GACH69J,EAAO,CAAC,KAAM,MACdrtL,EAAO,SACP,MAEF,IAAK,KACHqtL,EAAO,CAAC,KAAM,MACdrtL,EAAO,QACP,MAEF,IAAK,KACHqtL,EAAO,CAAC,KAAM,MACdrtL,EAAO,QAIX,IAAIuzD,EAAO05H,EAAYL,WACnB11L,EAAWq8D,EAAO37D,KAAKg6B,MAAMs7J,GAC7BI,EAAcP,EAAa/sL,GAAQuzD,EACnCg6H,EAAcF,EAAK,GAInBz1L,KAAK8sC,IAAIxtC,GAAYo2L,IACvBp2L,EAAWA,EAAW,GAAK,EAAI,EAC/BA,GAAYU,KAAKiwE,KAAKylH,EAAc/5H,GAAQA,GAO1C25H,EAAU,IACZh2L,GAA6B,KAAjBkW,EAAIoiB,SAAkBu9J,EAAap3L,OAASo3L,EAAan3L,MACrEy3L,EAAOA,EAAKl3G,WAKd82G,EAAYV,KAAKgB,EAAar2L,OACzB,CAEL,IAAIs2L,EAAuBP,EAAYL,WAAaG,EAAap3L,OAAS,IAE1E,OAAQyX,EAAI+7K,WACV,IAAK,SACH+D,GAAWM,EAAuB,EAClC,MAEF,IAAK,MACHN,GAAWM,EAKf,OAAQpgL,EAAIoiB,UACV,IAAK,GACHs9J,EAASb,YAAY,CACnBj2L,IAAK82L,EAASR,YAAYY,EAAS,OAErC,MAEF,IAAK,KACHJ,EAASb,YAAY,CACnBl2L,KAAM+2L,EAASR,YAAYY,EAAS,OAEtC,MAEF,IAAK,KACHJ,EAASb,YAAY,CACnBv6J,MAAOo7J,EAASR,YAAYY,EAAS,OAK3CG,EAAO,CAAC,KAAM,KAAM,KAAM,MAG1BJ,EAAc,IAAIT,EAAYM,GAGhC,IAAIW,EAzHJ,SAA0BzxI,EAAGqxI,GAK3B,IAJA,IAAII,EACAC,EAAoB,IAAIlB,EAAYxwI,GACpC2xI,EAAa,EAERvjM,EAAI,EAAGA,EAAIijM,EAAKhjM,OAAQD,IAAK,CACpC,KAAO4xD,EAAE4xI,qBAAqBb,EAAcM,EAAKjjM,KAAO4xD,EAAE6xI,OAAOd,IAAiB/wI,EAAE8xI,YAAYd,IAC9FhxI,EAAEuwI,KAAKc,EAAKjjM,IAKd,GAAI4xD,EAAE6xI,OAAOd,GACX,OAAO/wI,EAGT,IAAIwF,EAAIxF,EAAE+xI,oBAAoBhB,GAG1BY,EAAansI,IACfisI,EAAe,IAAIjB,EAAYxwI,GAC/B2xI,EAAansI,GAIfxF,EAAI,IAAIwwI,EAAYkB,GAGtB,OAAOD,GAAgBC,EA6FNM,CAAiBf,EAAaI,GACjDP,EAASP,KAAKkB,EAAaQ,kBAAkBlB,IAG/C,SAAS51K,KA1XTy0K,EAASziM,UAAU8iM,YAAc,SAAUxvD,EAAQzuG,GAGjD,IAAK,IAAI1/B,KAFT0/B,EAAMA,GAAOxzB,KAAKwzB,IAEDyuG,EACXA,EAAOnwI,eAAegC,KACxB0/B,EAAI/zB,MAAM3L,GAAQmuI,EAAOnuI,KAK/Bs9L,EAASziM,UAAUmjM,YAAc,SAAU95L,EAAK07L,GAC9C,OAAe,IAAR17L,EAAY,EAAIA,EAAM07L,GAuF/BrC,EAAY1iM,UAAY0+L,EAAW+D,EAASziM,WAC5C0iM,EAAY1iM,UAAUD,YAAc2iM,EAoCpCW,EAAYrjM,UAAUojM,KAAO,SAAUc,EAAMc,GAG3C,OAFAA,OAAoBz4L,IAAXy4L,EAAuBA,EAAS3zL,KAAKoyL,WAEtCS,GACN,IAAK,KACH7yL,KAAKzE,MAAQo4L,EACb3zL,KAAKk3B,OAASy8J,EACd,MAEF,IAAK,KACH3zL,KAAKzE,MAAQo4L,EACb3zL,KAAKk3B,OAASy8J,EACd,MAEF,IAAK,KACH3zL,KAAKxE,KAAOm4L,EACZ3zL,KAAKk7B,QAAUy4J,EACf,MAEF,IAAK,KACH3zL,KAAKxE,KAAOm4L,EACZ3zL,KAAKk7B,QAAUy4J,IAMrB3B,EAAYrjM,UAAUilM,SAAW,SAAUx0E,GACzC,OAAOp/G,KAAKzE,KAAO6jH,EAAGloF,OAASl3B,KAAKk3B,MAAQkoF,EAAG7jH,MAAQyE,KAAKxE,IAAM4jH,EAAGlkF,QAAUl7B,KAAKk7B,OAASkkF,EAAG5jH,KAIlGw2L,EAAYrjM,UAAU2kM,YAAc,SAAU1rH,GAC5C,IAAK,IAAIh4E,EAAI,EAAGA,EAAIg4E,EAAM/3E,OAAQD,IAChC,GAAIoQ,KAAK4zL,SAAShsH,EAAMh4E,IACtB,OAAO,EAIX,OAAO,GAIToiM,EAAYrjM,UAAU0kM,OAAS,SAAUr1H,GACvC,OAAOh+D,KAAKxE,KAAOwiE,EAAUxiE,KAAOwE,KAAKk7B,QAAU8iC,EAAU9iC,QAAUl7B,KAAKzE,MAAQyiE,EAAUziE,MAAQyE,KAAKk3B,OAAS8mC,EAAU9mC,OAOhI86J,EAAYrjM,UAAUykM,qBAAuB,SAAUp1H,EAAW60H,GAChE,OAAQA,GACN,IAAK,KACH,OAAO7yL,KAAKzE,KAAOyiE,EAAUziE,KAE/B,IAAK,KACH,OAAOyE,KAAKk3B,MAAQ8mC,EAAU9mC,MAEhC,IAAK,KACH,OAAOl3B,KAAKxE,IAAMwiE,EAAUxiE,IAE9B,IAAK,KACH,OAAOwE,KAAKk7B,OAAS8iC,EAAU9iC,SAMrC82J,EAAYrjM,UAAU4kM,oBAAsB,SAAUn0E,GAIpD,OAHQhiH,KAAKC,IAAI,EAAGD,KAAKE,IAAI0C,KAAKk3B,MAAOkoF,EAAGloF,OAAS95B,KAAKC,IAAI2C,KAAKzE,KAAM6jH,EAAG7jH,OACpE6B,KAAKC,IAAI,EAAGD,KAAKE,IAAI0C,KAAKk7B,OAAQkkF,EAAGlkF,QAAU99B,KAAKC,IAAI2C,KAAKxE,IAAK4jH,EAAG5jH,OAErDwE,KAAK7E,OAAS6E,KAAK5E,QAO7C42L,EAAYrjM,UAAU8kM,kBAAoB,SAAUl3G,GAClD,MAAO,CACL/gF,IAAKwE,KAAKxE,IAAM+gF,EAAU/gF,IAC1B0/B,OAAQqhD,EAAUrhD,OAASl7B,KAAKk7B,OAChC3/B,KAAMyE,KAAKzE,KAAOghF,EAAUhhF,KAC5B27B,MAAOqlD,EAAUrlD,MAAQl3B,KAAKk3B,MAC9B/7B,OAAQ6E,KAAK7E,OACbC,MAAO4E,KAAK5E,QAMhB42L,EAAY6B,qBAAuB,SAAUtlM,GAC3C,IAAI4M,EAAS5M,EAAIilC,IAAMjlC,EAAIilC,IAAI93B,aAAenN,EAAIkJ,QAAUlJ,EAAImN,aAAe,EAC3EN,EAAQ7M,EAAIilC,IAAMjlC,EAAIilC,IAAI/3B,YAAclN,EAAIkJ,QAAUlJ,EAAIkN,YAAc,EACxED,EAAMjN,EAAIilC,IAAMjlC,EAAIilC,IAAI33B,UAAYtN,EAAIkJ,QAAUlJ,EAAIsN,UAAY,EAUtE,MARU,CACRN,MAFFhN,EAAMA,EAAIilC,IAAMjlC,EAAIilC,IAAI14B,wBAA0BvM,EAAIkJ,QAAUlJ,EAAIuM,wBAA0BvM,GAElFgN,KACV27B,MAAO3oC,EAAI2oC,MACX17B,IAAKjN,EAAIiN,KAAOA,EAChBL,OAAQ5M,EAAI4M,QAAUA,EACtB+/B,OAAQ3sC,EAAI2sC,QAAU1/B,GAAOjN,EAAI4M,QAAUA,GAC3CC,MAAO7M,EAAI6M,OAASA,IA+IxBuhB,EAAOG,cAAgB,WACrB,MAAO,CACLi5D,OAAQ,SAAgB31E,GACtB,IAAKA,EACH,MAAO,GAGT,GAAoB,kBAATA,EACT,MAAM,IAAIrO,MAAM,iCAGlB,OAAOorF,mBAAmBs7C,mBAAmBr4H,OAKnDuc,EAAOm3K,oBAAsB,SAAU7lM,EAAQ8lM,GAC7C,OAAK9lM,GAAW8lM,EAIT5D,EAAaliM,EAAQ8lM,GAHnB,MAYXp3K,EAAOoS,YAAc,SAAU9gC,EAAQ0kB,EAAM82H,GAC3C,IAAKx7I,IAAW0kB,IAAS82H,EACvB,OAAO,KAIT,KAAOA,EAAQhxI,YACbgxI,EAAQhsI,YAAYgsI,EAAQhxI,YAG9B,IAAIu7L,EAAgB/lM,EAAOgI,SAAS4B,cAAc,OAsBlD,GArBAm8L,EAAcv0L,MAAM/C,SAAW,WAC/Bs3L,EAAcv0L,MAAMlE,KAAO,IAC3By4L,EAAcv0L,MAAMy3B,MAAQ,IAC5B88J,EAAcv0L,MAAMjE,IAAM,IAC1Bw4L,EAAcv0L,MAAMy7B,OAAS,IAC7B84J,EAAcv0L,MAAMw0L,OApBO,OAqB3BxqD,EAAQ9wI,YAAYq7L,GAIpB,SAAuBrhL,GACrB,IAAK,IAAI/iB,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAC/B,GAAI+iB,EAAK/iB,GAAGskM,eAAiBvhL,EAAK/iB,GAAG+/B,aACnC,OAAO,EAIX,OAAO,EAIJwkK,CAAcxhL,GAAnB,CAQA,IAAI6/K,EAAe,GACfD,EAAeP,EAAY6B,qBAAqBG,GAEhD1C,EAAe,CACjBK,KAFav0L,KAAKg6B,MAhDE,IAgDIm7J,EAAap3L,OAA6B,KAAO,IAEnEi1B,kBAGR,WAGE,IAFA,IAAIkiK,EAAU1/K,EAELhjB,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAC/BgjB,EAAMD,EAAK/iB,GAEX0iM,EAAW,IAAIjB,EAAYpjM,EAAQ2kB,EAAK0+K,GACxC0C,EAAcr7L,YAAY25L,EAAS9+J,KAEnC6+J,EAAsBpkM,EAAQqkM,EAAUC,EAAcC,GAGtD5/K,EAAI+c,aAAe2iK,EAAS9+J,IAC5Bg/J,EAAaxhM,KAAKghM,EAAY6B,qBAAqBvB,IAbvD,QAdE,IAAK,IAAI1iM,EAAI,EAAGA,EAAI+iB,EAAK9iB,OAAQD,IAC/BokM,EAAcr7L,YAAYga,EAAK/iB,GAAG+/B,eA+BxChT,EAAOC,OAAS,SAAU3uB,EAAQ4uB,EAAO48F,GAClCA,IACHA,EAAU58F,EACVA,EAAQ,IAGLA,IACHA,EAAQ,IAGV7c,KAAK/R,OAASA,EACd+R,KAAK6c,MAAQA,EACb7c,KAAK2H,MAAQ,UACb3H,KAAKy4D,OAAS,GACdz4D,KAAKy5G,QAAUA,GAAW,IAAIxmC,YAAY,QAC1CjzE,KAAK+tL,WAAa,IAGpBpxK,EAAOC,OAAOjuB,UAAY,CAGxBylM,mBAAoB,SAA4BngM,GAC9C,KAAIA,aAAaq5L,GAGf,MAAMr5L,EAFN+L,KAAKid,gBAAkBjd,KAAKid,eAAehpB,IAK/CkpB,MAAO,SAAe/c,GACpB,IAAIjS,EAAO6R,KAWX,SAASq0L,IAIP,IAHA,IAAI57H,EAAStqE,EAAKsqE,OACdmsE,EAAM,EAEHA,EAAMnsE,EAAO5oE,QAA0B,OAAhB4oE,EAAOmsE,IAAiC,OAAhBnsE,EAAOmsE,MACzDA,EAGJ,IAAI8pD,EAAOj2H,EAAO+Z,OAAO,EAAGoyD,GAW5B,MAToB,OAAhBnsE,EAAOmsE,MACPA,EAGgB,OAAhBnsE,EAAOmsE,MACPA,EAGJz2I,EAAKsqE,OAASA,EAAO+Z,OAAOoyD,GACrB8pD,EA4FT,SAAS4F,EAAYr4C,GACfA,EAAM9nJ,MAAM,mBAEdo9J,EAAatV,GAAO,SAAUhhJ,EAAGgqC,GAC/B,GACO,oBADChqC,GAxBd,SAA2BghJ,GACzB,IAAI99H,EAAW,IAAIuvK,EACnBn8B,EAAatV,GAAO,SAAUhhJ,EAAGgqC,GAC/B,OAAQhqC,GACN,IAAK,QACHkjB,EAASswK,QAAQxzL,EAAI,IAAKgqC,GAC1B,MAEF,IAAK,OACH9mB,EAAS7d,IAAIrF,EAAI,IAAKuyL,EAAevoJ,OAGxC,SAAU,KACb92C,EAAK2rH,gBAAkB3rH,EAAK2rH,eAAe,CACzC,OAAU37F,EAAS3d,IAAI,UACvB,MAAS2d,EAAS3d,IAAI,WAWhB+zL,CAAkBtvJ,KAGrB,KAEHssH,EAAatV,GAAO,SAAUhhJ,EAAGgqC,GAC/B,GACO,WADChqC,GApGd,SAAqBghJ,GACnB,IAAI99H,EAAW,IAAIuvK,EA4CnB,GA3CAn8B,EAAatV,GAAO,SAAUhhJ,EAAGgqC,GAC/B,OAAQhqC,GACN,IAAK,KACHkjB,EAAS7d,IAAIrF,EAAGgqC,GAChB,MAEF,IAAK,QACH9mB,EAASmY,QAAQr7B,EAAGgqC,GACpB,MAEF,IAAK,QACH9mB,EAASswK,QAAQxzL,EAAGgqC,GACpB,MAEF,IAAK,eACL,IAAK,iBACH,IAAIuvJ,EAAKvvJ,EAAEzrC,MAAM,KAEjB,GAAkB,IAAdg7L,EAAG3kM,OACL,MAKF,IAAI4kM,EAAS,IAAI/G,EAIjB,GAHA+G,EAAOn+J,QAAQ,IAAKk+J,EAAG,IACvBC,EAAOn+J,QAAQ,IAAKk+J,EAAG,KAElBC,EAAO36L,IAAI,OAAS26L,EAAO36L,IAAI,KAClC,MAGFqkB,EAAS7d,IAAIrF,EAAI,IAAKw5L,EAAOj0L,IAAI,MACjC2d,EAAS7d,IAAIrF,EAAI,IAAKw5L,EAAOj0L,IAAI,MACjC,MAEF,IAAK,SACH2d,EAASmwK,IAAIrzL,EAAGgqC,EAAG,CAAC,UAGvB,IAAK,MAGJ9mB,EAASrkB,IAAI,MAAO,CACtB,IAAIu0L,EAAS,IAAKlgM,EAAK0uB,MAAMiwK,WAAa3+L,EAAKF,OAAO6+L,WACtDuB,EAAOjzL,MAAQ+iB,EAAS3d,IAAI,QAAS,KACrC6tL,EAAOqG,MAAQv2K,EAAS3d,IAAI,QAAS,GACrC6tL,EAAOsG,cAAgBx2K,EAAS3d,IAAI,gBAAiB,GACrD6tL,EAAOuG,cAAgBz2K,EAAS3d,IAAI,gBAAiB,KACrD6tL,EAAOwG,gBAAkB12K,EAAS3d,IAAI,kBAAmB,GACzD6tL,EAAOyG,gBAAkB32K,EAAS3d,IAAI,kBAAmB,KACzD6tL,EAAO0G,OAAS52K,EAAS3d,IAAI,SAAU,IAEvCrS,EAAK6mM,UAAY7mM,EAAK6mM,SAAS3G,GAG/BlgM,EAAK4/L,WAAW/8L,KAAK,CACnByY,GAAI0U,EAAS3d,IAAI,MACjB6tL,OAAQA,KA2CJ4G,CAAYhwJ,KAGf,KAxIH7kC,IAEFjS,EAAKsqE,QAAUtqE,EAAKsrH,QAAQ1jC,OAAO31E,EAAM,CACvCilE,QAAQ,KA0IZ,IACE,IAAIqpH,EAEJ,GAAmB,YAAfvgM,EAAKwZ,MAAqB,CAE5B,IAAK,UAAUxW,KAAKhD,EAAKsqE,QACvB,OAAOz4D,KAIT,IAAIqD,GADJqrL,EAAO2F,KACMlgM,MAAM,sBAEnB,IAAKkP,IAAMA,EAAE,GACX,MAAM,IAAIiqL,EAAaA,EAAaY,OAAOc,cAG7C7gM,EAAKwZ,MAAQ,SAKf,IAFA,IAAIutL,GAAuB,EAEpB/mM,EAAKsqE,QAAQ,CAElB,IAAK,UAAUtnE,KAAKhD,EAAKsqE,QACvB,OAAOz4D,KAST,OANKk1L,EAGHA,GAAuB,EAFvBxG,EAAO2F,IAKDlmM,EAAKwZ,OACX,IAAK,SAEC,IAAIxW,KAAKu9L,GACX4F,EAAY5F,GACFA,IAEVvgM,EAAKwZ,MAAQ,MAGf,SAEF,IAAK,OAEE+mL,IACHvgM,EAAKwZ,MAAQ,MAGf,SAEF,IAAK,KAEH,GAAI,iBAAiBxW,KAAKu9L,GAAO,CAC/BvgM,EAAKwZ,MAAQ,OACb,MAIF,IAAK+mL,EACH,SAGFvgM,EAAKykB,IAAM,IAAKzkB,EAAK0uB,MAAMsC,QAAUhxB,EAAKF,OAAOkxB,QAAQ,EAAG,EAAG,IAE/D,IACEhxB,EAAKykB,IAAIi2E,MAAQ,SACjB,MAAO50F,GACP9F,EAAKykB,IAAIi2E,MAAQ,SAKnB,GAFA16F,EAAKwZ,MAAQ,OAEgB,IAAzB+mL,EAAKr/L,QAAQ,UAAe,CAC9BlB,EAAKykB,IAAInJ,GAAKilL,EACd,SAOJ,IAAK,MAEH,IACEZ,EAASY,EAAMvgM,EAAKykB,IAAKzkB,EAAK4/L,YAC9B,MAAO95L,GACP9F,EAAKimM,mBAAmBngM,GAExB9F,EAAKykB,IAAM,KACXzkB,EAAKwZ,MAAQ,SACb,SAGFxZ,EAAKwZ,MAAQ,UACb,SAEF,IAAK,UACH,IAAIwtL,GAAwC,IAAzBzG,EAAKr/L,QAAQ,UAKhC,IAAKq/L,GAAQyG,IAAiBD,GAAuB,GAAO,CAE1D/mM,EAAK6uB,OAAS7uB,EAAK6uB,MAAM7uB,EAAKykB,KAC9BzkB,EAAKykB,IAAM,KACXzkB,EAAKwZ,MAAQ,KACb,SAGExZ,EAAKykB,IAAIva,OACXlK,EAAKykB,IAAIva,MAAQ,MAGnBlK,EAAKykB,IAAIva,MAAQq2L,EAAKrmL,QAAQ,UAAW,MAAMA,QAAQ,SAAU,MACjE,SAEF,IAAK,SAGEqmL,IACHvgM,EAAKwZ,MAAQ,MAGf,WAGN,MAAO1T,GACP9F,EAAKimM,mBAAmBngM,GAEL,YAAf9F,EAAKwZ,OAAuBxZ,EAAKykB,KAAOzkB,EAAK6uB,OAC/C7uB,EAAK6uB,MAAM7uB,EAAKykB,KAGlBzkB,EAAKykB,IAAM,KAGXzkB,EAAKwZ,MAAuB,YAAfxZ,EAAKwZ,MAAsB,YAAc,SAGxD,OAAO3H,MAETsd,MAAO,WACL,IAAInvB,EAAO6R,KAEX,IAYE,GAVA7R,EAAKsqE,QAAUtqE,EAAKsrH,QAAQ1jC,UAExB5nF,EAAKykB,KAAsB,WAAfzkB,EAAKwZ,SACnBxZ,EAAKsqE,QAAU,OACftqE,EAAKgvB,SAMY,YAAfhvB,EAAKwZ,MACP,MAAM,IAAI2lL,EAAaA,EAAaY,OAAOc,cAE7C,MAAO/6L,GACP9F,EAAKimM,mBAAmBngM,GAI1B,OADA9F,EAAK+uB,SAAW/uB,EAAK+uB,UACdld,OAGX5R,EAAOC,QAAUsuB,G,mBC31CjB,IACIy4K,EAAmB,CACrB,GAAI,EACJ,GAAM,EACN,GAAM,GAEJC,EAAe,CACjB,MAAS,EACT,OAAU,EACV,IAAO,EACP,KAAQ,EACR,MAAS,EACT,KAAQ,EACR,YAAa,EACb,aAAc,GAYhB,SAASC,EAAiB7hM,GACxB,MAAqB,kBAAVA,MAIC4hM,EAAa5hM,EAAM2I,gBAChB3I,EAAM2I,eAGvB,SAAS+iB,EAAOtM,EAAWC,EAASza,GAQlC2H,KAAKk0L,cAAe,EAMpB,IAAIqB,EAAM,GACNC,GAAe,EACfC,EAAa5iL,EACb6iL,EAAW5iL,EACX6iL,EAAQt9L,EACRu9L,EAAU,KACVC,EAAY,GACZC,GAAe,EACfC,EAAQ,OACRC,EAAa,QACbC,EAAY,OACZC,EAAiB,OACjBC,EAAQ,IACRC,EAAS,SACbvjM,OAAOgsB,iBAAiB7e,KAAM,CAC5B,GAAM,CACJ6rC,YAAY,EACZrrC,IAAK,WACH,OAAO+0L,GAETj1L,IAAK,SAAa7M,GAChB8hM,EAAM,GAAK9hM,IAGf,YAAe,CACbo4C,YAAY,EACZrrC,IAAK,WACH,OAAOg1L,GAETl1L,IAAK,SAAa7M,GAChB+hM,IAAiB/hM,IAGrB,UAAa,CACXo4C,YAAY,EACZrrC,IAAK,WACH,OAAOi1L,GAETn1L,IAAK,SAAa7M,GAChB,GAAqB,kBAAVA,EACT,MAAM,IAAIi0D,UAAU,uCAGtB+tI,EAAahiM,EACbuM,KAAKk0L,cAAe,IAGxB,QAAW,CACTroJ,YAAY,EACZrrC,IAAK,WACH,OAAOk1L,GAETp1L,IAAK,SAAa7M,GAChB,GAAqB,kBAAVA,EACT,MAAM,IAAIi0D,UAAU,qCAGtBguI,EAAWjiM,EACXuM,KAAKk0L,cAAe,IAGxB,KAAQ,CACNroJ,YAAY,EACZrrC,IAAK,WACH,OAAOm1L,GAETr1L,IAAK,SAAa7M,GAChBkiM,EAAQ,GAAKliM,EACbuM,KAAKk0L,cAAe,IAGxB,OAAU,CACRroJ,YAAY,EACZrrC,IAAK,WACH,OAAOo1L,GAETt1L,IAAK,SAAa7M,GAChBmiM,EAAUniM,EACVuM,KAAKk0L,cAAe,IAGxB,SAAY,CACVroJ,YAAY,EACZrrC,IAAK,WACH,OAAOq1L,GAETv1L,IAAK,SAAa7M,GAChB,IAAI4iM,EAvHZ,SAA8B5iM,GAC5B,MAAqB,kBAAVA,KAID2hM,EAAiB3hM,EAAM2I,gBACpB3I,EAAM2I,cAiHCk6L,CAAqB7iM,GAEnC,IAAgB,IAAZ4iM,EACF,MAAM,IAAIE,YAAY,mEAGxBV,EAAYQ,EACZr2L,KAAKk0L,cAAe,IAGxB,YAAe,CACbroJ,YAAY,EACZrrC,IAAK,WACH,OAAOs1L,GAETx1L,IAAK,SAAa7M,GAChBqiM,IAAiBriM,EACjBuM,KAAKk0L,cAAe,IAGxB,KAAQ,CACNroJ,YAAY,EACZrrC,IAAK,WACH,OAAOu1L,GAETz1L,IAAK,SAAa7M,GAChB,GAAqB,kBAAVA,GAlKD,SAkKuBA,EAC/B,MAAM,IAAI8iM,YAAY,4DAGxBR,EAAQtiM,EACRuM,KAAKk0L,cAAe,IAGxB,UAAa,CACXroJ,YAAY,EACZrrC,IAAK,WACH,OAAOw1L,GAET11L,IAAK,SAAa7M,GAChB,IAAI4iM,EAAUf,EAAiB7hM,GAE1B4iM,GAGHL,EAAaK,EACbr2L,KAAKk0L,cAAe,GAHpBjjM,QAAQU,KAAK,4DAOnB,SAAY,CACVk6C,YAAY,EACZrrC,IAAK,WACH,OAAOy1L,GAET31L,IAAK,SAAa7M,GAChB,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAI1B,MAAM,uCAGlBkkM,EAAYxiM,EACZuM,KAAKk0L,cAAe,IAGxB,cAAiB,CACfroJ,YAAY,EACZrrC,IAAK,WACH,OAAO01L,GAET51L,IAAK,SAAa7M,GAChB,IAAI4iM,EAAUf,EAAiB7hM,GAE1B4iM,GAGHH,EAAiBG,EACjBr2L,KAAKk0L,cAAe,GAHpBjjM,QAAQU,KAAK,gEAOnB,KAAQ,CACNk6C,YAAY,EACZrrC,IAAK,WACH,OAAO21L,GAET71L,IAAK,SAAa7M,GAChB,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAI1B,MAAM,mCAGlBokM,EAAQ1iM,EACRuM,KAAKk0L,cAAe,IAGxB,MAAS,CACProJ,YAAY,EACZrrC,IAAK,WACH,OAAO41L,GAET91L,IAAK,SAAa7M,GAChB,IAAI4iM,EAAUf,EAAiB7hM,GAE/B,IAAK4iM,EACH,MAAM,IAAIE,YAAY,gEAGxBH,EAASC,EACTr2L,KAAKk0L,cAAe,MAS1Bl0L,KAAK2vB,kBAAez0B,EAOtBikB,EAAOxwB,UAAU6nM,aAAe,WAE9B,OAAO75K,OAAOm3K,oBAAoB7lM,OAAQ+R,KAAK3H,OAGjDjK,EAAOC,QAAU8wB,G,mBCxQjB,IAAIs3K,EAAgB,CAClB,IAAI,EACJ,IAAM,GAYR,SAASC,EAAoBjjM,GAC3B,MAAwB,kBAAVA,GAAsBA,GAAS,GAAKA,GAAS,IA6G7DrF,EAAOC,QAzGP,WACE,IAAIoqD,EAAS,IACTk+I,EAAS,EACTC,EAAiB,EACjBC,EAAiB,IACjBC,EAAmB,EACnBC,EAAmB,IACnBC,EAAU,GACdnkM,OAAOgsB,iBAAiB7e,KAAM,CAC5B,MAAS,CACP6rC,YAAY,EACZrrC,IAAK,WACH,OAAOi4C,GAETn4C,IAAK,SAAa7M,GAChB,IAAKijM,EAAoBjjM,GACvB,MAAM,IAAI1B,MAAM,oCAGlB0mD,EAAShlD,IAGb,MAAS,CACPo4C,YAAY,EACZrrC,IAAK,WACH,OAAOm2L,GAETr2L,IAAK,SAAa7M,GAChB,GAAqB,kBAAVA,EACT,MAAM,IAAIi0D,UAAU,kCAGtBivI,EAASljM,IAGb,cAAiB,CACfo4C,YAAY,EACZrrC,IAAK,WACH,OAAOq2L,GAETv2L,IAAK,SAAa7M,GAChB,IAAKijM,EAAoBjjM,GACvB,MAAM,IAAI1B,MAAM,4CAGlB8kM,EAAiBpjM,IAGrB,cAAiB,CACfo4C,YAAY,EACZrrC,IAAK,WACH,OAAOo2L,GAETt2L,IAAK,SAAa7M,GAChB,IAAKijM,EAAoBjjM,GACvB,MAAM,IAAI1B,MAAM,4CAGlB6kM,EAAiBnjM,IAGrB,gBAAmB,CACjBo4C,YAAY,EACZrrC,IAAK,WACH,OAAOu2L,GAETz2L,IAAK,SAAa7M,GAChB,IAAKijM,EAAoBjjM,GACvB,MAAM,IAAI1B,MAAM,8CAGlBglM,EAAmBtjM,IAGvB,gBAAmB,CACjBo4C,YAAY,EACZrrC,IAAK,WACH,OAAOs2L,GAETx2L,IAAK,SAAa7M,GAChB,IAAKijM,EAAoBjjM,GACvB,MAAM,IAAI1B,MAAM,8CAGlB+kM,EAAmBrjM,IAGvB,OAAU,CACRo4C,YAAY,EACZrrC,IAAK,WACH,OAAOw2L,GAET12L,IAAK,SAAa7M,GAChB,IAAI4iM,EA3GZ,SAA2B5iM,GACzB,MAAqB,kBAAVA,KAIEgjM,EAAchjM,EAAM2I,gBACjB3I,EAAM2I,cAqGF66L,CAAkBxjM,IAEhB,IAAZ4iM,EACFplM,QAAQU,KAAK,uDAEbqlM,EAAUX,Q,qBCpIpB,IAAIh5E,EAAiB,EAAQ,MAEzB65E,EAA2B,EAAQ,MAEvC,SAASC,EAAWC,EAAQ7mM,EAAMisJ,GAiBhC,OAhBI06C,KACF9oM,EAAOC,QAAU8oM,EAAat2D,QAAQC,UACtC1yI,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,IAExEhvH,EAAOC,QAAU8oM,EAAa,SAAoBC,EAAQ7mM,EAAMisJ,GAC9D,IAAI9gI,EAAI,CAAC,MACTA,EAAE1qB,KAAKuC,MAAMmoB,EAAGnrB,GAChB,IACIo2D,EAAW,IADGglG,SAASlnJ,KAAKlR,MAAM6jM,EAAQ17K,IAG9C,OADI8gI,GAAOn/B,EAAe12D,EAAU61F,EAAM7tJ,WACnCg4D,GAGTv4D,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,GAGnE+5E,EAAW5jM,MAAM,KAAMhG,WAGhCa,EAAOC,QAAU8oM,EACjB/oM,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,mBCZxEhvH,EAAOC,QAbP,WACE,GAAuB,qBAAZwyI,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAnrI,QAAQlH,UAAUsyI,QAAQttI,KAAKktI,QAAQC,UAAUjrI,QAAS,IAAI,iBACvD,EACP,MAAO5B,GACP,OAAO,IAKX7F,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,qBCdxE,IAAIC,EAAiB,EAAQ,MAiB7BjvH,EAAOC,QAfP,SAAmBs6D,EAAUF,GAC3B,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIf,UAAU,sDAGtBiB,EAASh6D,UAAYkE,OAAO2qH,OAAO/0D,GAAcA,EAAW95D,UAAW,CACrED,YAAa,CACX+E,MAAOk1D,EACPzb,UAAU,EACVpB,cAAc,KAGd2c,GAAY40D,EAAe10D,EAAUF,IAI3Cr6D,EAAOC,QAAiB,QAAID,EAAOC,QAASD,EAAOC,QAAQ+uH,YAAa,G,sBClBxE,kBAIMi6E,EACAC,EACAC,EACAC,EACAC,EARN,cAAoW,OAAtOnpM,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAI7W8oM,EAAY,iIACZC,EAAsB,2BACtBC,EAAkB,oBAClBC,EAAsB,wCACtBC,EAAa,CAOfj8C,iBAAkB,SAA0Bk8C,EAASC,EAAap0L,GAMhE,GALAA,EAAOA,GAAQ,GAEfm0L,EAAUA,EAAQ/gM,SAClBghM,EAAcA,EAAYhhM,QAER,CAIhB,IAAK4M,EAAKq0L,gBACR,OAAOF,EAGT,IAAIG,EAAwBJ,EAAWK,SAASJ,GAEhD,IAAKG,EACH,MAAM,IAAI9lM,MAAM,mCAIlB,OADA8lM,EAAsB37K,KAAOu7K,EAAWM,cAAcF,EAAsB37K,MACrEu7K,EAAWO,kBAAkBH,GAGtC,IAAII,EAAgBR,EAAWK,SAASH,GAExC,IAAKM,EACH,MAAM,IAAIlmM,MAAM,uCAGlB,GAAIkmM,EAAcC,OAGhB,OAAK30L,EAAKq0L,iBAIVK,EAAc/7K,KAAOu7K,EAAWM,cAAcE,EAAc/7K,MACrDu7K,EAAWO,kBAAkBC,IAJ3BN,EAOX,IAAIQ,EAAYV,EAAWK,SAASJ,GAEpC,IAAKS,EACH,MAAM,IAAIpmM,MAAM,mCAGlB,IAAKomM,EAAUC,QAAUD,EAAUj8K,MAA8B,MAAtBi8K,EAAUj8K,KAAK,GAAY,CAGpE,IAAIC,EAAYm7K,EAAoB9iM,KAAK2jM,EAAUj8K,MACnDi8K,EAAUC,OAASj8K,EAAU,GAC7Bg8K,EAAUj8K,KAAOC,EAAU,GAGzBg8K,EAAUC,SAAWD,EAAUj8K,OACjCi8K,EAAUj8K,KAAO,KAGnB,IAAIm8K,EAAa,CAGfH,OAAQC,EAAUD,OAClBE,OAAQH,EAAcG,OACtBl8K,KAAM,KACN4lH,OAAQm2D,EAAcn2D,OACtBw2D,MAAOL,EAAcK,MACrBn4G,SAAU83G,EAAc93G,UAG1B,IAAK83G,EAAcG,SAIjBC,EAAWD,OAASD,EAAUC,OAGA,MAA1BH,EAAc/7K,KAAK,IACrB,GAAK+7K,EAAc/7K,KAgBZ,CAKL,IAAIq8K,EAAcJ,EAAUj8K,KACxBs8K,EAAUD,EAAYvlJ,UAAU,EAAGulJ,EAAYE,YAAY,KAAO,GAAKR,EAAc/7K,KACzFm8K,EAAWn8K,KAAOu7K,EAAWM,cAAcS,QApB3CH,EAAWn8K,KAAOi8K,EAAUj8K,KAIvB+7K,EAAcn2D,SACjBu2D,EAAWv2D,OAASq2D,EAAUr2D,OAIzBm2D,EAAcK,QACjBD,EAAWC,MAAQH,EAAUG,QAmBvC,OAJwB,OAApBD,EAAWn8K,OACbm8K,EAAWn8K,KAAO3Y,EAAKq0L,gBAAkBH,EAAWM,cAAcE,EAAc/7K,MAAQ+7K,EAAc/7K,MAGjGu7K,EAAWO,kBAAkBK,IAEtCP,SAAU,SAAkBt8K,GAC1B,IAAIuvC,EAAQssI,EAAU7iM,KAAKgnB,GAE3B,OAAKuvC,EAIE,CACLmtI,OAAQntI,EAAM,IAAM,GACpBqtI,OAAQrtI,EAAM,IAAM,GACpB7uC,KAAM6uC,EAAM,IAAM,GAClB+2E,OAAQ/2E,EAAM,IAAM,GACpButI,MAAOvtI,EAAM,IAAM,GACnBo1B,SAAUp1B,EAAM,IAAM,IATf,MAYXgtI,cAAe,SAAuB77K,GAgBpC,IATAA,EAAOA,EAAK1iB,MAAM,IAAImiF,UAAUjiF,KAAK,IAAI2O,QAAQkvL,EAAiB,IAS3Dr7K,EAAKrsB,UAAYqsB,EAAOA,EAAK7T,QAAQmvL,EAAqB,KAAK3nM,SAEtE,OAAOqsB,EAAK1iB,MAAM,IAAImiF,UAAUjiF,KAAK,KAEvCs+L,kBAAmB,SAA2BjtI,GAC5C,OAAOA,EAAMmtI,OAASntI,EAAMqtI,OAASrtI,EAAM7uC,KAAO6uC,EAAM+2E,OAAS/2E,EAAMutI,MAAQvtI,EAAMo1B,WAGf,WAAtB7xF,EAAQD,IAA8F,WAArBC,EAAQF,GAAuBA,EAAOC,QAAUopM,OAEpL,KAF+P,EAAF,WAC5P,OAAOA,GACR,QAF2P,OAE3P,e,wDCzKH,yUACIiB,EAAS,CAEXjvK,IAAK,oEACL4yJ,KAAM,gCACNsc,IAAK,sCAELp4K,MAAO,sDACPJ,MAAO,2DACP9nB,KAAM,oBAENugM,WAAY,YACZC,WAAY,UAIZC,UAAW,MAETn3E,EAAa,CAAC,QAAS,QAAS,QAChCo3E,EAAkB,CAAC,QAAS,QAAS,QAW9BC,EAAuB,SAA8Bv4G,GAC9D,OAAKA,EAIEA,EAAMp4E,QAAQ,uBAAuB,SAAU4wL,EAAMC,EAASC,GAGnE,MAAO,SAFW,KAAO38L,OAAO08L,GAAStmM,SAAS,KAAKtD,OAAO,GAEhC,MADX,KAAOkN,OAAO28L,GAAUvmM,SAAS,KAAKtD,OAAO,MALzDmxF,GA6DA24G,EAAc,SAAqBtuE,QACxB,IAAhBA,IACFA,EAAc,IAGhB,IAAIhtB,EAASgtB,EAAYtxH,MAAM,KAC3BhE,EAAS,GA8Bb,OA7BAsoG,EAAO5qG,SAAQ,SAAUutF,GAEvB,IAAI44G,EADJ54G,EAAQA,EAAM9pF,OAEdgrH,EAAWzuH,SAAQ,SAAUhD,GAC3B,IAAIiE,EAAQukM,EAAOxoM,GAAMsE,KAAKisF,EAAMrkF,eAEpC,GAAKjI,KAASA,EAAMtE,QAAU,GAA9B,CAIAwpM,EAAYnpM,EAEZ,IAAIlB,EAAOyxF,EAAMztC,UAAU,EAAG7+C,EAAM,GAAGtE,QACnC+rB,EAAU6kE,EAAMp4E,QAAQrZ,EAAM,IAClCwG,EAAOxE,KAAK,CACVhC,KAAMA,EACN4sB,QAASA,EACTy0C,UAAWngE,QAIVmpM,GACH7jM,EAAOxE,KAAK,CACVhC,KAAMyxF,EACN7kE,QAAS,GACTy0C,UAAW,eAIV76D,GAcE8jM,EAAoB,SAA2BttI,EAAQutI,GAChE,IAAKvtI,EAAO2C,YAAYD,QAAU6qI,EAChC,OAAO,KAGT,IAAIn7F,EAAapyC,EAAO2C,YAAYD,MAAM6qI,GAE1C,IAAKn7F,EACH,OAAO,KAGT,IAAK,IAAIluG,KAAQkuG,EAAY,CAC3B,IAAIujF,EAAYvjF,EAAWluG,GAE3B,GAAIyxL,EAAUxkD,SAAWwkD,EAAUxzH,UAEjC,OAAOirI,EAAYzX,EAAUxzH,UAAU,GAAGx2D,WAAWo3D,QAIzD,OAAO,MASEyqI,EAAe,SAAsB/4G,GAK9C,YAJc,IAAVA,IACFA,EAAQ,IAGHi4G,EAAOv4K,MAAMhvB,KAAKsvF,EAAM9pF,OAAOyF,gBAS7Bq9L,EAAkB,SAAyB3uE,GACpD,GAAKA,GAAsC,kBAAhBA,EAA3B,CAIA,IAZ4CrqC,EAYxCqd,EAASgtB,EAAY1uH,cAAc5C,MAAM,KAAK+C,KAAI,SAAU9C,GAC9D,OAAOu/L,EAAqBv/L,EAAE9C,WAG5B3H,EAAO,QAGW,IAAlB8uG,EAAOjuG,QAAgB2pM,EAAa17F,EAAO,IAC7C9uG,EAAO,QACoB,IAAlB8uG,EAAOjuG,cApBJ,KAD8B4wF,EAqBEqd,EAAO,MAnBnDrd,EAAQ,IAGHi4G,EAAOrgM,KAAKlH,KAAKsvF,EAAM9pF,OAAOyF,kBAkBnCpN,EAAO,eAIT,IAAIgvE,EAAY,MAiBhB,OAdI8/B,EAAOj4F,OAAM,SAAUpM,GACzB,OAAOi/L,EAAOjvK,IAAIt4B,KAAKsI,MAEvBukE,EAAY,MACH8/B,EAAOj4F,OAAM,SAAUpM,GAChC,OAAOi/L,EAAOrc,KAAKlrL,KAAKsI,MAExBukE,EAAY,OACH8/B,EAAOj4F,OAAM,SAAUpM,GAChC,OAAOi/L,EAAOC,IAAIxnM,KAAKsI,QAEvBukE,EAAY,OAGPhvE,EAAO,IAAMgvE,EAAY,YAAe8sD,EAAc,MAEpD4uE,EAAuB,SAA8B5uE,GAK9D,YAJoB,IAAhBA,IACFA,EAAc,IAGT,IAAOzT,aAAe,IAAOA,YAAYs4D,iBAAmB,IAAOt4D,YAAYs4D,gBAAgB8pB,EAAgB3uE,MAAiB,GAE9H6uE,EAAqB,SAA4B7uE,GAK1D,YAJoB,IAAhBA,IACFA,EAAc,IAGTA,EAAY1uH,cAAc5C,MAAM,KAAKqM,OAAM,SAAU46E,GAC1DA,EAAQA,EAAM9pF,OAEd,IAAK,IAAI/G,EAAI,EAAGA,EAAImpM,EAAgBlpM,OAAQD,IAAK,CAG/C,GAAI8oM,EAAO,QAFAK,EAAgBnpM,IAEAuB,KAAKsvF,GAC9B,OAAO,EAIX,OAAO,MAGAm5G,EAAsB,YACtBC,EAAsB,e,kCC5PjC,sCAAIC,EAAgB,yDAChBC,EAAa,2BAaNC,EAA2B,SAAkChrM,GACtE,OAAI8qM,EAAc3oM,KAAKnC,GACd,MAGL+qM,EAAW5oM,KAAKnC,GACX,OAUI,qCAATA,EACK,WAGF,O,qBClCT,IAAIu6D,EAAM,EAAQ,MAElBl7D,EAAQ4xJ,kBAAoB12F,EAAI02F,kBAChC5xJ,EAAQs0J,cAAgBp5F,EAAIo5F,cAC5Bt0J,EAAQ4rM,UAAY,EAAQ,MAAgBA,W,qBCJ5C,IAAIl+C,EAAc,EAAQ,MAEtBxyF,EAAM,EAAQ,MAEd2wI,EAAW,EAAQ,MAEnBC,EAAM,EAAQ,MAEdl6C,EAAoB12F,EAAI02F,kBACxB1jB,EAAYwf,EAAYxf,UACxB69D,EAAaD,EAAIC,WACjBC,EAAYF,EAAIE,UAEpB,SAASJ,EAAU17L,GACjByB,KAAKzB,QAAUA,GAAW,CACxB+7L,QAAS,IAkFb,SAASC,IACPv6L,KAAKw6L,OAAQ,EAGf,SAAS99L,EAAS49L,EAAS18L,GACzBA,EAAK68L,WAAaH,EAAQG,WAC1B78L,EAAK88L,aAAeJ,EAAQI,aAoH9B,SAASC,EAAS7iL,GAChB,GAAIA,EACF,MAAO,OAASA,EAAEgsI,UAAY,IAAM,UAAYhsI,EAAE2iL,WAAa,QAAU3iL,EAAE4iL,aAAe,IAI9F,SAASE,EAAUC,EAAOppL,EAAO5hB,GAC/B,MAAoB,iBAATgrM,EACFA,EAAMroH,OAAO/gE,EAAO5hB,GAGvBgrM,EAAMhrM,QAAU4hB,EAAQ5hB,GAAU4hB,EAC7B,IAAIqpL,KAAKvL,KAAKnrI,OAAOy2I,EAAOppL,EAAO5hB,GAAU,GAG/CgrM,EA2CX,SAASE,EAAcC,EAAQp9L,GACxBo9L,EAAOC,eAGVD,EAAOC,eAAetiM,YAAYiF,GAFlCo9L,EAAO14L,IAAI3J,YAAYiF,GApQ3Bq8L,EAAUtrM,UAAUusM,gBAAkB,SAAU1nM,EAAQmpK,GACtD,IAAIp+J,EAAUyB,KAAKzB,QACf47L,EAAM,IAAIE,EACVc,EAAa58L,EAAQ48L,YAAc,IAAIZ,EAEvCr7I,EAAe3gD,EAAQ2gD,aACvBo7I,EAAU/7L,EAAQ+7L,QAClBc,EAAe78L,EAAQ88L,OAAS,GAChCn/D,EAAS,aAAa/qI,KAAKwrK,GAE3B2+B,EAAYp/D,EAASg+D,EAASqB,cAAgBrB,EAASsB,aAqB3D,OAnBIlB,GACFa,EAAWM,mBAAmBnB,GAGhCH,EAAIj7I,aAkBN,SAA2Bw8I,EAAWP,EAAYb,GAChD,IAAKoB,EAAW,CACd,GAAIP,aAAsBZ,EACxB,OAAOY,EAGTO,EAAYP,EAGd,IAAIj8I,EAAe,GACfy8I,EAAaD,aAAqB/vC,SAGtC,SAASiwC,EAAMzoM,GACb,IAAIlE,EAAKysM,EAAUvoM,IAEdlE,GAAM0sM,IACT1sM,EAAyB,GAApBysM,EAAU7rM,OAAc,SAAUgsM,GACrCH,EAAUvoM,EAAK0oM,IACbH,GAGNx8I,EAAa/rD,GAAOlE,GAAM,SAAU4sM,GAClC5sM,EAAG,WAAakE,EAAM,MAAQ0oM,EAAMlB,EAASL,MAC1C,aAMP,OAnBAA,EAAUA,GAAW,GAgBrBsB,EAAM,WACNA,EAAM,SACNA,EAAM,cACC18I,EAhDY48I,CAAkB58I,EAAci8I,EAAYb,GAC/DH,EAAIgB,WAAa58L,EAAQ48L,YAAcA,EAEnCj/D,IACFk/D,EAAa,IAAM7+D,EAAUN,MAG/Bm/D,EAAaW,IAAMX,EAAaW,KAAOx/D,EAAUE,IAE7CjpI,GAA4B,kBAAXA,EACnB2mM,EAAIh9K,MAAM3pB,EAAQ4nM,EAAcE,GAEhCnB,EAAIj7I,aAAattD,MAAM,sBAGlBupM,EAAW74L,KA6DpBi4L,EAAW5rM,UAAY,CACrBqtM,cAAe,WACbh8L,KAAKsC,KAAM,IAAI29I,GAAoB+E,eAAe,KAAM,KAAM,MAE1DhlJ,KAAKs6L,UACPt6L,KAAKsC,IAAI25L,YAAcj8L,KAAKs6L,QAAQx2C,WAGxCo4C,aAAc,SAAsBv8C,EAAcE,EAAWs8C,EAAO9hM,GAClE,IAAIiI,EAAMtC,KAAKsC,IACXzO,EAAKyO,EAAI6iJ,gBAAgBxF,EAAcw8C,GAASt8C,GAChDn8D,EAAMrpF,EAAMxK,OAChBkrM,EAAc/6L,KAAMnM,GACpBmM,KAAKi7L,eAAiBpnM,EACtBmM,KAAKs6L,SAAW59L,EAASsD,KAAKs6L,QAASzmM,GAEvC,IAAK,IAAIjE,EAAI,EAAGA,EAAI8zF,EAAK9zF,IAAK,CACxB+vJ,EAAetlJ,EAAM+hM,OAAOxsM,GAAhC,IACI6D,EAAQ4G,EAAM2yC,SAASp9C,GAEvB+/C,GADAwsJ,EAAQ9hM,EAAMgiM,SAASzsM,GAChB0S,EAAIskJ,kBAAkBjH,EAAcw8C,IAC/Cn8L,KAAKs6L,SAAW59L,EAASrC,EAAMiiM,WAAW1sM,GAAI+/C,GAC9CA,EAAKl8C,MAAQk8C,EAAK01G,UAAY5xJ,EAC9BI,EAAG0wJ,iBAAiB50G,KAGxB4sJ,WAAY,SAAoB58C,EAAcE,EAAWs8C,GACvD,IAAIhgD,EAAUn8I,KAAKi7L,eACL9+C,EAAQ1kJ,QACtBuI,KAAKi7L,eAAiB9+C,EAAQphJ,YAEhCyhM,mBAAoB,SAA4BntD,EAAQ7xH,KACxDi/K,iBAAkB,SAA0BptD,KAC5CqtD,sBAAuB,SAA+BrpM,EAAQ+M,GAC5D,IAAIu8L,EAAM38L,KAAKsC,IAAIikJ,4BAA4BlzJ,EAAQ+M,GACvDJ,KAAKs6L,SAAW59L,EAASsD,KAAKs6L,QAASqC,GACvC5B,EAAc/6L,KAAM28L,IAEtBC,oBAAqB,SAA6Bj1D,EAAIl2H,EAAO5hB,KAC7DgtM,WAAY,SAAoBhC,EAAOppL,EAAO5hB,GAG5C,GAFAgrM,EAAQD,EAAUrnM,MAAMyM,KAAMzS,WAEnB,CACT,GAAIyS,KAAKw6L,MACP,IAAIsC,EAAW98L,KAAKsC,IAAIgkJ,mBAAmBu0C,QAEvCiC,EAAW98L,KAAKsC,IAAI3E,eAAek9L,GAGrC76L,KAAKi7L,eACPj7L,KAAKi7L,eAAetiM,YAAYmkM,GACvB,QAAQ3rM,KAAK0pM,IACtB76L,KAAKsC,IAAI3J,YAAYmkM,GAGvB98L,KAAKs6L,SAAW59L,EAASsD,KAAKs6L,QAASwC,KAG3CC,cAAe,SAAuB7sM,KACtC8sM,YAAa,WACXh9L,KAAKsC,IAAIynI,aAEX0xD,mBAAoB,SAA4BnB,IAC1Ct6L,KAAKs6L,QAAUA,KAEjBA,EAAQG,WAAa,IAIzBwC,QAAS,SAAiBpC,EAAOppL,EAAO5hB,GACtCgrM,EAAQD,EAAUrnM,MAAMyM,KAAMzS,WAC9B,IAAI2vM,EAAOl9L,KAAKsC,IAAI+jJ,cAAcw0C,GAClC76L,KAAKs6L,SAAW59L,EAASsD,KAAKs6L,QAAS4C,GACvCnC,EAAc/6L,KAAMk9L,IAEtBC,WAAY,WAEVn9L,KAAKw6L,OAAQ,GAEf4C,SAAU,WACRp9L,KAAKw6L,OAAQ,GAEf6C,SAAU,SAAkBntM,EAAM0zJ,EAAUE,GAC1C,IAAIw5C,EAAOt9L,KAAKsC,IAAIiwB,eAEpB,GAAI+qK,GAAQA,EAAKl4C,mBAAoB,CACnC,IAAIm4C,EAAKD,EAAKl4C,mBAAmBl1J,EAAM0zJ,EAAUE,GACjD9jJ,KAAKs6L,SAAW59L,EAASsD,KAAKs6L,QAASiD,GACvCxC,EAAc/6L,KAAMu9L,GACpBv9L,KAAKsC,IAAI2iJ,QAAUs4C,IAQvBC,QAAS,SAAiB5rM,GACxBX,QAAQU,KAAK,qBAAuBC,EAAO+oM,EAAS36L,KAAKs6L,WAE3D1oM,MAAO,SAAe03G,GACpBr4G,QAAQW,MAAM,mBAAqB03G,EAAQqxF,EAAS36L,KAAKs6L,WAE3DmD,WAAY,SAAoB7rM,GAC9B,MAAM,IAAIwoM,EAAWxoM,EAAOoO,KAAKs6L,WAuDrC,+JAA+JjyL,QAAQ,QAAQ,SAAUlV,GACvLonM,EAAW5rM,UAAUwE,GAAO,WAC1B,OAAO,SAcX9E,EAAQqvM,aAAenD,EACvBlsM,EAAQ4rM,UAAYA,EAKpB5rM,EAAQ4xJ,kBAAoB12F,EAAI02F,kBAKhC5xJ,EAAQs0J,cAAgBp5F,EAAIo5F,e,qBCzS5B,IAAIpsJ,EAAS,EAAQ,MAAiBA,OAUtClI,EAAQmtM,aAAejlM,EAAO,CAC5BonM,IAAK,IACLC,KAAM,IACNC,GAAI,IACJC,GAAI,IACJC,KAAM,MAgBR1vM,EAAQktM,cAAgBhlM,EAAO,CAC7BunM,GAAI,IACJD,GAAI,IACJF,IAAK,IACLI,KAAM,IACNH,KAAM,IACNI,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,OAAQ,OACRC,KAAM,OACNC,MAAO,OACPC,MAAO,OACPC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,IAAK,OACLC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,OAAQ,OACRC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,OAAQ,OACRC,MAAO,OACPC,MAAO,OACPC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,OAAQ,OACRC,KAAM,OACNC,MAAO,OACPC,MAAO,OACPC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,IAAK,OACLC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,OAAQ,OACRC,KAAM,OACNC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,KAAM,OACNC,MAAO,OACPC,KAAM,OACNC,MAAO,OACPC,OAAQ,OACRC,IAAK,OACLC,OAAQ,OACRC,KAAM,OACNC,IAAK,OACLhmD,KAAM,OACNimD,KAAM,OACNC,MAAO,OACPC,IAAK,OACLC,IAAK,WACLC,IAAK,OACLC,KAAM,OACNC,IAAK,OACLC,OAAQ,OACRC,KAAM,OACNC,KAAM,OACNC,MAAO,OACPC,MAAO,OACPC,KAAM,OACNC,OAAQ,OACRC,MAAO,OACPC,KAAM,OACNC,KAAM,OACNC,MAAO,OACPC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,OAAQ,OACRC,MAAO,OACPC,OAAQ,OACRC,OAAQ,SACRvtK,KAAM,SACNwtK,MAAO,SACPhuL,MAAO,SACPiuL,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,GAAI,SACJC,KAAM,SACN12H,IAAK,SACL22H,MAAO,SACPC,OAAQ,SACRC,MAAO,SACP1wM,KAAM,SACN2wM,MAAO,SACPC,IAAK,SACLC,IAAK,SACLC,GAAI,SACJC,IAAK,SACLC,IAAK,SACL,IAAO,SACPC,OAAQ,SACRC,IAAK,SACLC,KAAM,SACNC,MAAO,SACPC,GAAI,SACJC,MAAO,SACPttE,GAAI,SACJutE,GAAI,SACJthD,IAAK,SACLuhD,IAAK,SACLC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,MAAO,SACPC,OAAQ,SACRC,KAAM,SACNC,KAAM,SACNC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,MAAO,SACPC,QAAS,SACTC,KAAM,SACNC,IAAK,SACLC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,OAAQ,SACRC,GAAI,SACJC,GAAI,SACJC,GAAI,SACJC,QAAS,SACTC,GAAI,SACJC,IAAK,SACLC,MAAO,SACPC,IAAK,SACLC,QAAS,SACTC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,MAAO,SACPC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,MAAO,SACPC,QAAS,SACTC,KAAM,SACNC,IAAK,SACLC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,OAAQ,SACRC,GAAI,SACJC,GAAI,SACJC,GAAI,SACJC,QAAS,SACT/8I,GAAI,SACJg9I,IAAK,SACLC,OAAQ,SACRC,MAAO,SACPC,IAAK,SACLC,QAAS,SACTC,IAAK,SACLC,IAAK,SACL1pH,IAAK,SACL2pH,MAAO,SACPC,SAAU,SACVC,MAAO,SACPC,IAAK,SACLC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,OAAQ,SACRC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,MAAO,SACPC,KAAM,SACNC,KAAM,SACNC,OAAQ,SACRC,KAAM,SACNC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,OAAQ,SACRC,KAAM,SACNC,OAAQ,SACRC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,OAAQ,SACRC,MAAO,SACPC,KAAM,SACNC,MAAO,SACPC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,MAAO,SACPC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,OAAQ,SACRC,IAAK,SACLC,OAAQ,SACRC,MAAO,SACPC,OAAQ,SACRC,MAAO,WAOT59M,EAAQitM,UAAYjtM,EAAQktM,e,qBCvR5B,IAAIh/D,EAAY,EAAQ,MAAiBA,UAKrC2vE,EAAgB,mJAEhBC,EAAW,IAAIt7M,OAAO,aAAeq7M,EAAc14M,OAAOlE,MAAM,GAAI,GAAK,0CACzE88M,EAAiB,IAAIv7M,OAAO,IAAMq7M,EAAc14M,OAAS24M,EAAS34M,OAAS,QAAW04M,EAAc14M,OAAS24M,EAAS34M,OAAS,QA6BnI,SAAS4mM,EAAWnoL,EAASqoL,GAC3Bt6L,KAAKiS,QAAUA,EACfjS,KAAKs6L,QAAUA,EACXvoM,MAAM0sJ,mBAAmB1sJ,MAAM0sJ,kBAAkBz+I,KAAMo6L,GAM7D,SAASC,KAgNT,SAASgS,EAAY/xE,EAAGz2H,GAGtB,OAFAA,EAAE42L,WAAangE,EAAEmgE,WACjB52L,EAAE62L,aAAepgE,EAAEogE,aACZ72L,EAQT,SAASyoM,EAAsB94M,EAAQie,EAAO5d,EAAI04M,EAAcC,EAAgBttJ,GAM9E,SAASutJ,EAAaC,EAAOj5M,EAAO45D,GAC9Bx5D,EAAG84M,eAAe76M,eAAe46M,IACnCxtJ,EAAau+I,WAAW,aAAeiP,EAAQ,cAGjD74M,EAAG+4M,SAASF,EAAOj5M,EAAO45D,GAQ5B,IALA,IAAIl1D,EAEA6uD,IAAMv1C,EACNygB,EA7QM,IA+QG,CACX,IAAIz4B,EAAIjG,EAAOu/C,OAAOiU,GAEtB,OAAQvtD,GACN,IAAK,IACH,GAlRK,IAkRDy4B,EAEF/5B,EAAW3E,EAAOlE,MAAMmiB,EAAOu1C,GAC/B90B,EAjRC,MAkRI,IApRI,IAoRAA,EAIT,MAAM,IAAIngC,MAAM,uCAHhBmgC,EAnRC,EAyRH,MAEF,IAAK,IACL,IAAK,IACH,GA7RG,IA6RCA,GAjSC,IAiSaA,EAChB,CAUE,GA5SC,IAoSGA,IACFgtB,EAAas+I,QAAQ,kCACrBrlM,EAAW3E,EAAOlE,MAAMmiB,EAAOu1C,IAGjCv1C,EAAQu1C,EAAI,KACZA,EAAIxzD,EAAOnE,QAAQoK,EAAGgY,IAEd,GAMN,MAAM,IAAI1f,MAAM,2BAA8B0H,EAAI,WAJlDgzM,EAAat0M,EADb1E,EAAQD,EAAOlE,MAAMmiB,EAAOu1C,GAAG3+C,QAAQ,WAAYmkM,GACrB/6L,EAAQ,GACtCygB,EAvSG,MA4SA,IA9SS,GA8SLA,EAUX,MAAM,IAAIngC,MAAM,kCAPhB06M,EAAat0M,EAFb1E,EAAQD,EAAOlE,MAAMmiB,EAAOu1C,GAAG3+C,QAAQ,WAAYmkM,GAErB/6L,GAE9BytC,EAAas+I,QAAQ,cAAgBrlM,EAAW,uBAAyBsB,EAAI,OAC7EgY,EAAQu1C,EAAI,EACZ90B,EAnTO,EAyTT,MAEF,IAAK,IACH,OAAQA,GACN,KAvUE,EAwUAr+B,EAAGg5M,WAAWr5M,EAAOlE,MAAMmiB,EAAOu1C,IAEpC,KAhUO,EAiUP,KA/TQ,EAgUR,KA9TQ,EA+TN90B,EA/TM,EAgUNr+B,EAAGi5M,QAAS,EAEd,KAxUgB,EAyUhB,KA/UG,EAgVH,KA9US,EA+UP,MAGF,QACE,MAAM,IAAI/6M,MAAM,qCAIpB,MAEF,IAAK,GAQH,OANAmtD,EAAattD,MAAM,2BA/Vf,GAiWAsgC,GACFr+B,EAAGg5M,WAAWr5M,EAAOlE,MAAMmiB,EAAOu1C,IAG7BA,EAET,IAAK,IACH,OAAQ90B,GACN,KAzWE,EA0WAr+B,EAAGg5M,WAAWr5M,EAAOlE,MAAMmiB,EAAOu1C,IAEpC,KAlWO,EAmWP,KAjWQ,EAkWR,KAhWQ,EAiWN,MAGF,KA1WgB,EA4WhB,KAlXG,EAqXuB,OAFxBvzD,EAAQD,EAAOlE,MAAMmiB,EAAOu1C,IAElB13D,OAAO,KACfuE,EAAGi5M,QAAS,EACZr5M,EAAQA,EAAMnE,MAAM,GAAI,IAG5B,KAxXS,MAyXH4iC,IACFz+B,EAAQ0E,GAtXI,GAyXV+5B,GACFgtB,EAAas+I,QAAQ,cAAgB/pM,EAAQ,qBAC7Cg5M,EAAat0M,EAAU1E,EAAM4U,QAAQ,WAAYmkM,GAAiB/6L,KAE7D8qH,EAAUL,OAAOqwE,EAAa,MAAS94M,EAAMU,MAAM,qCACtD+qD,EAAas+I,QAAQ,cAAgB/pM,EAAQ,qBAAuBA,EAAQ,eAG9Eg5M,EAAah5M,EAAOA,EAAOge,IAG7B,MAEF,KAxYC,EAyYC,MAAM,IAAI1f,MAAM,4BAIpB,OAAOi1D,EAIT,IAAK,OACHvtD,EAAI,IAEN,QACE,GAAIA,GAAK,IAEP,OAAQy4B,GACN,KA9ZA,EA+ZEr+B,EAAGg5M,WAAWr5M,EAAOlE,MAAMmiB,EAAOu1C,IAElC90B,EArZI,EAsZJ,MAEF,KAlaC,EAmaC/5B,EAAW3E,EAAOlE,MAAMmiB,EAAOu1C,GAC/B90B,EAlaK,EAmaL,MAEF,KAjac,EAkaZ,IAAIz+B,EAAQD,EAAOlE,MAAMmiB,EAAOu1C,GAAG3+C,QAAQ,WAAYmkM,GACvDttJ,EAAas+I,QAAQ,cAAgB/pM,EAAQ,sBAC7Cg5M,EAAat0M,EAAU1E,EAAOge,GAEhC,KApaK,EAqaHygB,EAnaI,OAgbR,OAAQA,GAIN,KA5bO,EA6bSr+B,EAAG4D,QAEZ8kI,EAAUL,OAAOqwE,EAAa,MAASp0M,EAAShE,MAAM,qCACzD+qD,EAAas+I,QAAQ,cAAgBrlM,EAAW,qBAAuBA,EAAW,gBAGpFs0M,EAAat0M,EAAUA,EAAUsZ,GACjCA,EAAQu1C,EACR90B,EAvcD,EAwcC,MAEF,KAlcK,EAmcHgtB,EAAas+I,QAAQ,+BAAiCrlM,EAAW,OAEnE,KAncM,EAocJ+5B,EA9cD,EA+cCzgB,EAAQu1C,EACR,MAEF,KA9cD,EA+cG90B,EA7cY,EA8cZzgB,EAAQu1C,EACR,MAEF,KA3cM,EA4cJ,MAAM,IAAIj1D,MAAM,+DAQ1Bi1D,KAQJ,SAAS+zI,EAAclnM,EAAIsnM,EAAYoR,GAMrC,IALA,IAAI90M,EAAU5D,EAAG4D,QACbs1M,EAAa,KAEbn9M,EAAIiE,EAAGhE,OAEJD,KAAK,CACV,IAAI8rB,EAAI7nB,EAAGjE,GACPusM,EAAQzgL,EAAEygL,MACV1oM,EAAQioB,EAAEjoB,MAGd,IAFIu5M,EAAM7Q,EAAM9sM,QAAQ,MAEd,EACR,IAAIggJ,EAAS3zH,EAAE2zH,OAAS8sD,EAAM7sM,MAAM,EAAG09M,GACnCntD,EAAYs8C,EAAM7sM,MAAM09M,EAAM,GAC9BC,EAAsB,UAAX59D,GAAsBwQ,OAErCA,EAAYs8C,EACZ9sD,EAAS,KACT49D,EAAqB,UAAV9Q,GAAqB,GAIlCzgL,EAAEmkI,UAAYA,GAEG,IAAbotD,IAEgB,MAAdF,IACFA,EAAa,GAEbG,EAAMX,EAAcA,EAAe,KAIrCA,EAAaU,GAAYF,EAAWE,GAAYx5M,EAChDioB,EAAE8B,IAAM++G,EAAUG,MAClBy+D,EAAWqB,mBAAmByQ,EAAUx5M,IAM5C,IAFI7D,EAAIiE,EAAGhE,OAEJD,KAAK,EAENy/I,GADJ3zH,EAAI7nB,EAAGjE,IACQy/I,UAIE,QAAXA,IACF3zH,EAAE8B,IAAM++G,EAAUE,KAGL,UAAX4S,IACF3zH,EAAE8B,IAAM+uL,EAAal9D,GAAU,MAKrC,IAAI29D,KAAMv1M,EAAQpI,QAAQ,MAEhB,GACRggJ,EAASx7I,EAAGw7I,OAAS53I,EAAQnI,MAAM,EAAG09M,GACtCntD,EAAYhsJ,EAAGgsJ,UAAYpoJ,EAAQnI,MAAM09M,EAAM,KAE/C39D,EAAS,KAETwQ,EAAYhsJ,EAAGgsJ,UAAYpoJ,GAI7B,IAAI2rJ,EAAKvvJ,EAAG2pB,IAAM+uL,EAAal9D,GAAU,IAIzC,GAHA8rD,EAAWe,aAAa94C,EAAIvD,EAAWpoJ,EAAS5D,IAG5CA,EAAGi5M,OAcL,OAHAj5M,EAAG04M,aAAeA,EAClB14M,EAAGk5M,WAAaA,GAET,EAXP,GAFA5R,EAAWoB,WAAWn5C,EAAIvD,EAAWpoJ,GAEjCs1M,EACF,IAAK19D,KAAU09D,EACTl6M,OAAOlE,UAAUmD,eAAe6B,KAAKo5M,EAAY19D,IACnD8rD,EAAWsB,iBAAiBptD,GAYtC,SAAS89D,EAAwB35M,EAAQ45M,EAAY31M,EAAS+0M,EAAgBrR,GAC5E,GAAI,yBAAyBhqM,KAAKsG,GAAU,CAC1C,IAAI41M,EAAa75M,EAAOnE,QAAQ,KAAOoI,EAAU,IAAK21M,GAClD/0M,EAAO7E,EAAOw/C,UAAUo6J,EAAa,EAAGC,GAE5C,GAAI,OAAOl8M,KAAKkH,GACd,MAAI,YAAYlH,KAAKsG,IAGnB0jM,EAAW0B,WAAWxkM,EAAM,EAAGA,EAAKxI,QAE7Bw9M,IAITh1M,EAAOA,EAAKgQ,QAAQ,WAAYmkM,GAChCrR,EAAW0B,WAAWxkM,EAAM,EAAGA,EAAKxI,QAC7Bw9M,GAIX,OAAOD,EAAa,EAGtB,SAASE,EAAc95M,EAAQ45M,EAAY31M,EAAS81M,GAElD,IAAI3oE,EAAM2oE,EAAS91M,GAcnB,OAZW,MAAPmtI,KAEFA,EAAMpxI,EAAOilM,YAAY,KAAOhhM,EAAU,MAEhC21M,IAERxoE,EAAMpxI,EAAOilM,YAAY,KAAOhhM,IAGlC81M,EAAS91M,GAAWmtI,GAGfA,EAAMwoE,EAGf,SAASF,EAAM15M,EAAQH,GACrB,IAAK,IAAIiQ,KAAK9P,EACRX,OAAOlE,UAAUmD,eAAe6B,KAAKH,EAAQ8P,KAC/CjQ,EAAOiQ,GAAK9P,EAAO8P,IAKzB,SAASkqM,EAASh6M,EAAQie,EAAO0pL,EAAYj8I,GAI3C,GACO,MAHI1rD,EAAOu/C,OAAOthC,EAAQ,GAI7B,MAAiC,MAA7Bje,EAAOu/C,OAAOthC,EAAQ,IACpBC,EAAMle,EAAOnE,QAAQ,SAAOoiB,EAAQ,IAE9BA,GACR0pL,EAAW8B,QAAQzpM,EAAQie,EAAQ,EAAGC,EAAMD,EAAQ,GAC7CC,EAAM,IAEbwtC,EAAattD,MAAM,qBACX,IAIF,EAIV,GAAmC,UAA/B4B,EAAOg/E,OAAO/gE,EAAQ,EAAG,GAAgB,CAC3C,IAAIC,EAAMle,EAAOnE,QAAQ,MAAOoiB,EAAQ,GAIxC,OAHA0pL,EAAWgC,aACXhC,EAAW0B,WAAWrpM,EAAQie,EAAQ,EAAGC,EAAMD,EAAQ,GACvD0pL,EAAWiC,WACJ1rL,EAAM,EAKf,IAAI+7L,EAmGV,SAAej6M,EAAQie,GACrB,IAAItd,EACA0kI,EAAM,GACN8pE,EAAM,6CACVA,EAAI3iD,UAAYvuI,EAChBkxL,EAAInuM,KAAKhB,GAET,KAAOW,EAAQwuM,EAAInuM,KAAKhB,IAEtB,GADAqlI,EAAI7nI,KAAKmD,GACLA,EAAM,GAAI,OAAO0kI,EA5GNr/H,CAAMhG,EAAQie,GACvBiyE,EAAM+pH,EAAO59M,OAEjB,GAAI6zF,EAAM,GAAK,YAAYvyF,KAAKs8M,EAAO,GAAG,IAAK,CAC7C,IAAIv9M,EAAOu9M,EAAO,GAAG,GACjB9pD,GAAQ,EACRE,GAAQ,EAERngE,EAAM,IACJ,YAAYvyF,KAAKs8M,EAAO,GAAG,KAC7B9pD,EAAQ8pD,EAAO,GAAG,GAClB5pD,EAAQngE,EAAM,GAAK+pH,EAAO,GAAG,IACpB,YAAYt8M,KAAKs8M,EAAO,GAAG,MACpC5pD,EAAQ4pD,EAAO,GAAG,KAItB,IAAIC,EAAYD,EAAO/pH,EAAM,GAG7B,OAFAy3G,EAAWkC,SAASntM,EAAMyzJ,EAAOE,GACjCs3C,EAAWwS,SACJD,EAAUt+M,MAAQs+M,EAAU,GAAG79M,OAK5C,OAAQ,EAGV,SAAS+9M,EAAiBp6M,EAAQie,EAAO0pL,GACvC,IAAIzpL,EAAMle,EAAOnE,QAAQ,KAAMoiB,GAE/B,GAAIC,EAAK,CACP,IAAIvd,EAAQX,EAAOw/C,UAAUvhC,EAAOC,GAAKvd,MAAM,8BAE/C,GAAIA,EAAO,CACCA,EAAM,GAAGtE,OAEnB,OADAsrM,EAAWuB,sBAAsBvoM,EAAM,GAAIA,EAAM,IAC1Cud,EAAM,EAGb,OAAQ,EAIZ,OAAQ,EAGV,SAASm8L,IACP7tM,KAAK2sM,eAAiB,GA3qBxBvS,EAAWzrM,UAAY,IAAIoD,MAC3BqoM,EAAWzrM,UAAUuB,KAAOkqM,EAAWlqM,KAIvCmqM,EAAU1rM,UAAY,CACpBwuB,MAAO,SAAe3pB,EAAQ4nM,EAAcE,GAC1C,IAAIH,EAAan7L,KAAKm7L,WACtBA,EAAWa,gBAEXkR,EAAM9R,EAAcA,EAAe,IAQvC,SAAgB5nM,EAAQs6M,EAAkBxS,EAAWH,EAAYj8I,GAC/D,SAAS6uJ,EAAkBnjM,GAGzB,GAAIA,EAAO,MAAQ,CAEjB,IAAIojM,EAAa,QADjBpjM,GAAQ,QAC2B,IAC/BqjM,EAAa,OAAiB,KAAPrjM,GAC3B,OAAOw5C,OAAO+T,aAAa61I,EAAYC,GAEvC,OAAO7pJ,OAAO+T,aAAavtD,GAI/B,SAAS4hM,EAAe9wL,GACtB,IAAIzgB,EAAIygB,EAAEpsB,MAAM,GAAI,GAEpB,OAAI2L,KAAKqgM,EACAA,EAAUrgM,GACQ,MAAhBA,EAAE83C,OAAO,GACXg7J,EAAkBjgM,SAAS7S,EAAEu3E,OAAO,GAAGnqE,QAAQ,IAAK,SAE3D62C,EAAattD,MAAM,oBAAsB8pB,GAClCA,GAIX,SAASwyL,EAAWx8L,GAElB,GAAIA,EAAMD,EAAO,CACf,IAAI08L,EAAK36M,EAAOw/C,UAAUvhC,EAAOC,GAAKrJ,QAAQ,WAAYmkM,GAC1DlS,GAAW59L,EAAS+U,GACpB0pL,EAAW0B,WAAWsR,EAAI,EAAGz8L,EAAMD,GACnCA,EAAQC,GAIZ,SAAShV,EAASsqD,EAAG3jD,GACnB,KAAO2jD,GAAKonJ,IAAY/qM,EAAIgrM,EAAY75M,KAAKhB,KAC3C86M,EAAYjrM,EAAEjU,MACdg/M,EAAUE,EAAYjrM,EAAE,GAAGxT,OAC3ByqM,EAAQG,aAGVH,EAAQI,aAAe1zI,EAAIsnJ,EAAY,EAGzC,IAAIA,EAAY,EACZF,EAAU,EACVC,EAAc,sBACd/T,EAAUa,EAAWb,QACrBiU,EAAa,CAAC,CAChBhC,aAAcuB,IAEZP,EAAW,GACX97L,EAAQ,EAEZ,OAAa,CACX,IACE,IAAI+8L,EAAWh7M,EAAOnE,QAAQ,IAAKoiB,GAEnC,GAAI+8L,EAAW,EAAG,CAChB,IAAKh7M,EAAOg/E,OAAO/gE,GAAOtd,MAAM,SAAU,CACxC,IAAImO,EAAM64L,EAAW74L,IACjBjK,EAAOiK,EAAI3E,eAAenK,EAAOg/E,OAAO/gE,IAC5CnP,EAAI3J,YAAYN,GAChB8iM,EAAWF,eAAiB5iM,EAG9B,OAOF,OAJIm2M,EAAW/8L,GACby8L,EAAWM,GAGLh7M,EAAOu/C,OAAOy7J,EAAW,IAC/B,IAAK,IACH,IAAI98L,EAAMle,EAAOnE,QAAQ,IAAKm/M,EAAW,GACrC/2M,EAAUjE,EAAOw/C,UAAUw7J,EAAW,EAAG98L,GAAKrJ,QAAQ,eAAgB,IACtEm9B,EAAS+oK,EAAW55M,MAEpB+c,EAAM,GACRja,EAAUjE,EAAOw/C,UAAUw7J,EAAW,GAAGnmM,QAAQ,UAAW,IAC5D62C,EAAattD,MAAM,iBAAmB6F,EAAU,oBAAsB+tC,EAAO/tC,SAC7Eia,EAAM88L,EAAW,EAAI/2M,EAAQ5H,QACpB4H,EAAQtD,MAAM,SACvBsD,EAAUA,EAAQ4Q,QAAQ,UAAW,IACrC62C,EAAattD,MAAM,iBAAmB6F,EAAU,uBAChDia,EAAM88L,EAAW,EAAI/2M,EAAQ5H,QAG/B,IAAIk9M,EAAavnK,EAAOunK,WACpB0B,EAAWjpK,EAAO/tC,SAAWA,EAGjC,GAFwBg3M,GAAYjpK,EAAO/tC,SAAW+tC,EAAO/tC,QAAQ2E,eAAiB3E,EAAQ2E,cAEvE,CAGrB,GAFA++L,EAAWoB,WAAW/2J,EAAOhoB,IAAKgoB,EAAOq6G,UAAWpoJ,GAEhDs1M,EACF,IAAK,IAAI19D,KAAU09D,EACbl6M,OAAOlE,UAAUmD,eAAe6B,KAAKo5M,EAAY19D,IACnD8rD,EAAWsB,iBAAiBptD,GAK7Bo/D,GACHvvJ,EAAau+I,WAAW,iBAAmBhmM,EAAU,2CAA6C+tC,EAAO/tC,cAG3G82M,EAAWv9M,KAAKw0C,GAGlB9zB,IACA,MAGF,IAAK,IAEH4oL,GAAW59L,EAAS8xM,GACpB98L,EAAMk8L,EAAiBp6M,EAAQg7M,EAAUrT,GACzC,MAEF,IAAK,IAEHb,GAAW59L,EAAS8xM,GACpB98L,EAAM87L,EAASh6M,EAAQg7M,EAAUrT,EAAYj8I,GAC7C,MAEF,QACEo7I,GAAW59L,EAAS8xM,GACpB,IAAI36M,EAAK,IAAIg6M,EACTtB,EAAegC,EAAWA,EAAW1+M,OAAS,GAAG08M,aAGjD7oH,GADAhyE,EAAM46L,EAAsB94M,EAAQg7M,EAAU36M,EAAI04M,EAAcC,EAAgBttJ,GAC1ErrD,EAAGhE,QAUb,IARKgE,EAAGi5M,QAAUQ,EAAc95M,EAAQke,EAAK7d,EAAG4D,QAAS81M,KACvD15M,EAAGi5M,QAAS,EAEPxR,EAAUwG,MACb5iJ,EAAas+I,QAAQ,2BAIrBlD,GAAW52G,EAAK,CAGlB,IAFA,IAAIgrH,EAAWrC,EAAY/R,EAAS,IAE3B1qM,EAAI,EAAGA,EAAI8zF,EAAK9zF,IAAK,CAC5B,IAAI8rB,EAAI7nB,EAAGjE,GACX8M,EAASgf,EAAEs2C,QACXt2C,EAAE4+K,QAAU+R,EAAY/R,EAAS,IAGnCa,EAAWb,QAAUoU,EAEjB3T,EAAclnM,EAAIsnM,EAAYoR,IAChCgC,EAAWv9M,KAAK6C,GAGlBsnM,EAAWb,QAAUA,OAEjBS,EAAclnM,EAAIsnM,EAAYoR,IAChCgC,EAAWv9M,KAAK6C,GAIhB0oI,EAAUL,OAAOroI,EAAG2pB,OAAS3pB,EAAGi5M,OAClCp7L,EAAMy7L,EAAwB35M,EAAQke,EAAK7d,EAAG4D,QAAS+0M,EAAgBrR,GAEvEzpL,KAIN,MAAOzd,GACP,GAAIA,aAAammM,EACf,MAAMnmM,EAGRirD,EAAattD,MAAM,wBAA0BqC,GAC7Cyd,GAAO,EAGLA,EAAMD,EACRA,EAAQC,EAGRw8L,EAAW9wM,KAAKC,IAAImxM,EAAU/8L,GAAS,IAlMzCk9L,CAAOn7M,EAAQ4nM,EAAcE,EAAWH,EAAYn7L,KAAKk/C,cAEzDi8I,EAAW6B,gBAgqBf6Q,EAAkBl/M,UAAY,CAC5Bk+M,WAAY,SAAoBp1M,GAC9B,IAAK20M,EAAej7M,KAAKsG,GACvB,MAAM,IAAI1F,MAAM,mBAAqB0F,GAGvCuI,KAAKvI,QAAUA,GAEjBm1M,SAAU,SAAkBzQ,EAAO1oM,EAAOu+D,GACxC,IAAKo6I,EAAej7M,KAAKgrM,GACvB,MAAM,IAAIpqM,MAAM,qBAAuBoqM,GAGzCn8L,KAAK2sM,eAAexQ,GAASn8L,KAAKnQ,OAClCmQ,KAAKA,KAAKnQ,UAAY,CACpBssM,MAAOA,EACP1oM,MAAOA,EACPu+D,OAAQA,IAGZniE,OAAQ,EACR++M,aAAc,SAAsBh/M,GAClC,OAAOoQ,KAAKpQ,GAAGiwJ,WAEjBy8C,WAAY,SAAoB1sM,GAC9B,OAAOoQ,KAAKpQ,GAAG0qM,SAEjB+B,SAAU,SAAkBzsM,GAC1B,OAAOoQ,KAAKpQ,GAAGusM,OAEjBC,OAAQ,SAAgBxsM,GACtB,OAAOoQ,KAAKpQ,GAAG4tB,KAEjBwvB,SAAU,SAAkBp9C,GAC1B,OAAOoQ,KAAKpQ,GAAG6D,QA2BnBpF,EAAQgsM,UAAYA,EACpBhsM,EAAQ+rM,WAAaA,G,qBCvxBrB,IAAI30H,EAAY,EAAQ,MAAuBA,UA2C/Cr3E,EAAOC,QAzCS,SAAmB+R,GACjC,IAAIyrE,EAAO,IAAIjG,SAASxlE,EAAKq4D,OAAQr4D,EAAKs4D,WAAYt4D,EAAK42D,YACvDxhE,EAAS,CACXC,QAAS2K,EAAK,GACdynE,MAAO,IAAIX,WAAW9mE,EAAKg9D,SAAS,EAAG,IACvCyxI,WAAY,GACZC,YAAajjI,EAAK9F,UAAU,GAC5B6pB,UAAW/jB,EAAK9F,UAAU,IAExBn2E,EAAI,GAEe,IAAnB4F,EAAOC,SACTD,EAAOu5M,yBAA2BljI,EAAK9F,UAAUn2E,GACjD4F,EAAOw5M,YAAcnjI,EAAK9F,UAAUn2E,EAAI,GACxCA,GAAK,IAGL4F,EAAOu5M,yBAA2BtpI,EAAUrlE,EAAKg9D,SAASxtE,IAC1D4F,EAAOw5M,YAAcvpI,EAAUrlE,EAAKg9D,SAASxtE,EAAI,IACjDA,GAAK,IAGPA,GAAK,EAEL,IAAIq/M,EAAiBpjI,EAAKqjI,UAAUt/M,GAGpC,IAFAA,GAAK,EAEEq/M,EAAiB,EAAGr/M,GAAK,GAAIq/M,IAClCz5M,EAAOq5M,WAAW79M,KAAK,CACrBm+M,eAA0B,IAAV/uM,EAAKxQ,MAAe,EACpCw/M,eAAoC,WAApBvjI,EAAK9F,UAAUn2E,GAC/By/M,mBAAoBxjI,EAAK9F,UAAUn2E,EAAI,GACvC0/M,iBAAgC,IAAdlvM,EAAKxQ,EAAI,IAC3B2/M,SAAwB,IAAdnvM,EAAKxQ,EAAI,MAAe,EAClC4/M,aAAsC,UAAxB3jI,EAAK9F,UAAUn2E,EAAI,KAIrC,OAAO4F,I,mBCxCT,IAAIwwE,EAAa5oE,KAAKmoE,IAAI,EAAG,IAmB7Bn3E,EAAOC,QAAU,CACfo3E,UAlBc,SAAmBC,GACjC,IACIjyE,EADAkyE,EAAK,IAAIC,SAASF,EAAMjN,OAAQiN,EAAMhN,WAAYgN,EAAM1O,YAG5D,OAAI2O,EAAGE,cACLpyE,EAAQkyE,EAAGE,aAAa,IAEZrpE,OAAOspE,iBACVtpE,OAAO/I,GAGTA,EAGFkyE,EAAGI,UAAU,GAAKC,EAAaL,EAAGI,UAAU,IAKnDC,WAAYA,I,mBCfd,IAEAiE,EACIC,EACAC,EACAC,EACAC,EACAC,EACAC,EARAqoB,EAAmB,IAUvB3oB,EAAmB,SAA0Bj4C,GAC3C,OAAOA,EAAU4gE,GAGnB1oB,EAAmB,SAA0Bl4C,EAASu6C,GACpD,OAAOv6C,EAAUu6C,GAGnBpC,EAAmB,SAA0BmC,GAC3C,OAAOA,EAAYsmB,GAGrBxoB,EAAmB,SAA0BkC,EAAWC,GACtD,OAAOD,EAAYC,GAGrBlC,EAAmB,SAA0BiC,EAAWC,GACtD,OAAOtC,EAAiBG,EAAiBkC,EAAWC,KAGtDjC,EAAmB,SAA0BgC,EAAWC,GACtD,OAAOrC,EAAiBC,EAAiBmC,GAAYC,IAQvDhC,EAAsB,SAA6B+B,EAAWE,EAAkBC,GAC9E,OAAOtC,EAAiBsC,EAAyBH,EAAYA,EAAYE,IAG3Ep+E,EAAOC,QAAU,CACfukG,iBAAkBA,EAClB3oB,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,oBAAqBA,I,kCCvDvB,SAASowD,EAA2B90F,EAAGq0F,GAAkB,IAAIC,EAAuB,qBAAX3rI,QAA0Bq3C,EAAEr3C,OAAOC,WAAao3C,EAAE,cAAe,IAAKs0F,EAAI,CAAE,GAAI3pI,MAAMY,QAAQy0C,KAAOs0F,EAAKV,EAA4B5zF,KAAOq0F,GAAkBr0F,GAAyB,kBAAbA,EAAEh2C,OAAqB,CAAMsqI,IAAIt0F,EAAIs0F,GAAI,IAAIvqI,EAAI,EAAOwqI,EAAI,aAAiB,MAAO,CAAEloG,EAAGkoG,EAAG92H,EAAG,WAAe,OAAI1T,GAAKi2C,EAAEh2C,OAAe,CAAEsvE,MAAM,GAAe,CAAEA,MAAM,EAAO1rE,MAAOoyC,EAAEj2C,OAAWqE,EAAG,SAAWwmI,GAAO,MAAMA,GAAQH,EAAGF,GAAO,MAAM,IAAI1yE,UAAU,yIAA4I,IAA6C7pC,EAAzC08G,GAAmB,EAAMC,GAAS,EAAY,MAAO,CAAEtoG,EAAG,WAAeioG,EAAKA,EAAGxmI,KAAKkyC,IAAOviC,EAAG,WAAe,IAAIy1D,EAAOohE,EAAG3yG,OAAsC,OAA9B+yG,EAAmBxhE,EAAKoG,KAAapG,GAAS9kE,EAAG,SAAWw7M,GAAOj1E,GAAS,EAAM38G,EAAM4xL,GAAQn1E,EAAG,WAAe,IAAWC,GAAiC,MAAbJ,EAAGO,QAAgBP,EAAGO,SAAY,QAAU,GAAIF,EAAQ,MAAM38G,KAE39B,SAASu7G,EAAmBhtD,GAAO,OAQnC,SAA4BA,GAAO,GAAI57E,MAAMY,QAAQg7E,GAAM,OAAOitD,EAAkBjtD,GAR1CktD,CAAmBltD,IAM7D,SAA0BmtD,GAAQ,GAAsB,qBAAX/qI,QAAmD,MAAzB+qI,EAAK/qI,OAAOC,WAA2C,MAAtB8qI,EAAK,cAAuB,OAAO/oI,MAAMuX,KAAKwxH,GANjFC,CAAiBptD,IAAQqtD,EAA4BrtD,IAE1H,WAAgC,MAAM,IAAI1kB,UAAU,wIAF8EgyE,GAIlI,SAASD,EAA4B5zF,EAAG8zF,GAAU,GAAK9zF,EAAL,CAAgB,GAAiB,kBAANA,EAAgB,OAAOwzF,EAAkBxzF,EAAG8zF,GAAS,IAAIr2H,EAAIzQ,OAAOlE,UAAUiE,SAASe,KAAKkyC,GAAGv2C,MAAM,GAAI,GAAiE,MAAnD,WAANgU,GAAkBuiC,EAAEn3C,cAAa4U,EAAIuiC,EAAEn3C,YAAYwB,MAAgB,QAANoT,GAAqB,QAANA,EAAoB9S,MAAMuX,KAAK89B,GAAc,cAANviC,GAAqB,2CAA2CnS,KAAKmS,GAAW+1H,EAAkBxzF,EAAG8zF,QAAzG,GAM7S,SAASN,EAAkBjtD,EAAKsX,IAAkB,MAAPA,GAAeA,EAAMtX,EAAIv8E,UAAQ6zF,EAAMtX,EAAIv8E,QAAQ,IAAK,IAAID,EAAI,EAAGgqI,EAAO,IAAIppI,MAAMkzF,GAAM9zF,EAAI8zF,EAAK9zF,IAAOgqI,EAAKhqI,GAAKw8E,EAAIx8E,GAAM,OAAOgqI,EAEhL/mI,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQqhN,cAAW,EAEnB,IAAIC,EAAc,EAAQ,MAiB1B,SAASC,EAAiBC,EAAUhsB,EAAgBD,GAClD,OAAOisB,EAASl5M,OAAO0R,QAAQ,uBAAwB,IAAIA,QAAQ,2BAA2B,SAAUlU,EAAOqnB,GAC7G,IAAIs0L,EAAQ,GAQZ,OANI37M,EAAMg/J,WAAW,SACnB28C,EAAQ,IACC37M,EAAMg/J,WAAW,WAC1B28C,EAAQ,KAGNjsB,EAAexoD,SAAS7/G,EAAIpf,cAAc5C,MAAM,KAAK,IACnDoqL,EACK,OAASksB,EAAQlsB,EAAyBpoK,GAAOs0L,EAAQ,IAEzD37M,EAGF,MAKb,SAAS47M,EAAiBtwM,EAAOokL,EAAgBC,EAAqBF,GACpE,GAAKnkL,EAAL,CAMA,IAFA,IAAI/H,EAAa,GAER9H,EAAI,EAAGA,EAAI6P,EAAM5P,OAAQD,IAAK,CACrC,IAAIM,EAAOuP,EAAM7P,GACjB8H,EAAW1G,KAAKd,GAGlB,IAAK,IAAIJ,EAAK,EAAGkgN,EAAct4M,EAAY5H,EAAKkgN,EAAYngN,OAAQC,IAAM,CACxE,IAAImgN,EAAQD,EAAYlgN,GAExB,GAAI6/M,EAAYO,qBAAqB70E,SAAS40E,GAAQ,CACpD,IAAIx8M,EAAQgM,EAAMvL,iBAAiB+7M,GACnCxwM,EAAM0wM,YAAYF,EAAOL,EAAiBn8M,EAAOowL,EAAgBD,GAA2BE,EAAsBrkL,EAAM2wM,oBAAoBH,QAAS/0M,QAErJuE,EAAM4wM,eAAeJ,KAK3B,SAASK,EAAgBpiM,EAAMzE,EAAIo6K,EAAgBC,EAAqBF,GACtE11K,EAAKqiM,aA9DP,SAAiCA,EAAc9mM,GAC7C,OAAKA,EACE8mM,EAAa/2M,MAAM,KAAK+C,KAAI,SAAUnF,GAC3C,OAAOA,EAAST,UACf4F,KAAI,SAAUnF,GACf,IAAI86B,EAAI96B,EAASiR,QAAQ,MAAO,IAAMoB,EAAK,KAAKpB,QAAQ,KAAM,IAAMoB,EAAK,KAEzE,OAAIyoB,EAAE91B,cAAc+2J,WAAW,QACtB,IAAM1pJ,EAAK,IAAMyoB,EAAE8gB,UAAU,GAE7B,IAAMvpC,EAAK,IAAMyoB,KAEzBx4B,KAAK,KAXQ62M,EA6DIC,CAAwBtiM,EAAKqiM,aAAc9mM,GAC/DsmM,EAAiB7hM,EAAKzO,MAAOokL,EAAgBC,EAAqBF,GAGpE,IAAI6sB,EAAwB,CAAC,OAAQ,QAAS,UA+N9CpiN,EAAQqhN,SAZR,SAAkBlsB,EAAMnrL,EAAMkG,GAC5B,IAAImyM,EAAoB,OAATltB,QAA0B,IAATA,EAAkBA,EAAO,GAQzD,OAN8E,KAA5D,OAAbktB,QAAkC,IAAbA,OAAsB,EAASA,EAAS7gN,SAAiBwI,IACjFq4M,EAVJ,SAAsBr4M,GACpB,IAAIm7B,EAAMv9B,SAAS4B,cAAc,OAEjC,OADA27B,EAAIt7B,YAAcG,EACXm7B,EAAI2S,UAOEwqK,CAAat4M,GAAMmB,MAAM,MAAM+C,KAAI,SAAUmyL,GACtD,MAAO,MAAQA,EAAO,UACrBh1L,KAAK,OAvNZ,SAAsBuiJ,EAAO7rI,GAC3B,IAeIwgM,EAAIC,EAAItsB,EAAIusB,EAAIz2E,EAAI02E,EAAIC,EAAI3sB,EAf5B4sB,EAAuB7gM,EAAK8gM,gBAC5BA,OAA2C,IAAzBD,GAA0CA,EAC5DttB,EAAuBvzK,EAAKuzK,qBAC5BC,EAA2BxzK,EAAKwzK,yBAChCutB,EAAU/gM,EAAK3G,GACfA,OAAiB,IAAZ0nM,EAAqB,OAAS/sJ,OAAO+T,aAAa5kE,MAAM6wD,OAAQg1E,EAAmB,IAAI5oI,MAAM,IAAIskB,UAAK5Z,GAAWqB,KAAI,WAC5H,OAAuB,GAAhBa,KAAKovG,SAAgB,GAAK,QAC5B2kG,EACHC,EAAsBhhM,EAAKyzK,eAC3BA,OAAyC,IAAxButB,EAAiCX,EAAwBW,EAC1EC,EAAwBjhM,EAAK0zK,oBAC7BA,OAAgD,IAA1ButB,GAA0CA,EAChEC,EAAiBlhM,EAAKmhM,UACtBA,OAA+B,IAAnBD,GAAoCA,EAIhDC,IAAW9nM,EAAK,IACpB,IAAInH,GAAM,IAAI23L,WAAYiB,gBAAgBj/C,EAAO,aAEjD4nC,EAAiBrzL,MAAMY,QAAQyyL,GAAkBA,EAAetnL,KAAI,SAAUi1M,GAC5E,OAAOA,EAAOp1M,iBACXq0M,EAKL,IAHA,IACI7yM,EADA6zM,EAAcnvM,EAAIovM,mBAAmBpvM,EAAIC,gBAAiBovM,WAAWC,cAGlEh0M,EAAO6zM,EAAYI,YACG,QAA1BjB,EAAKhzM,EAAK7C,kBAA+B,IAAP61M,GAAyBA,EAAGnzM,YAAYG,GAG7E,IAAIk0M,EAAa14E,EAAmBu2E,EAAYoC,oBAE5Cb,GACFY,EAAW9gN,KAAK,SAIGsR,EAAIqU,iBAAiBm7L,EAAWp4M,KAAK,OAC3CxG,SAAQ,SAAU2F,GAC/B,OAAOA,EAAQU,YAGD+I,EAAIqU,iBAAiB,gBAC3BzjB,SAAQ,SAAU2F,GAC1ByJ,EAAI5H,KAAK/B,YAAYE,MAUvB,IAPA,IAAIm5M,EAAW,GACXC,EAAc3vM,EAAIovM,mBAAmBpvM,EAAI5H,KAAMi3M,WAAWO,aAAc,CAC1EC,WAAY,WACV,OAAOR,WAAWS,iBAIfx0M,EAAOq0M,EAAYJ,YAAY,CACpC,IAAIh5M,EAAU+E,EACVnG,EAAUoB,EAAQpB,QAAQ2E,cAE9B,GAAgB,SAAZ3E,GAAkC,SAAZA,EAI1B,GAAIy5M,EACF,GAAItzM,EAAK1F,YAAa,CACpB,IAAIm6M,EAAW/vM,EAAI3E,eAAeC,EAAK1F,aACZ,QAA1B24M,EAAKjzM,EAAK7C,kBAA+B,IAAP81M,GAAyBA,EAAG39K,aAAam/K,EAAUz0M,QAE3D,QAA1B2mL,EAAK3mL,EAAK7C,kBAA+B,IAAPwpL,GAAyBA,EAAG9mL,YAAYG,QAM/E,GAAInG,KAAWk4M,EAAY2C,YAAa,CACtC,IAGIt4E,EAHAu4E,EAAoB5C,EAAY2C,YAAY76M,GAE5CwiI,EAAYU,EAA2B9hI,EAAQ25M,qBAGnD,IACE,IAAKv4E,EAAU/nG,MAAO8nG,EAAQC,EAAU32H,KAAK67D,MAAO,CAClD,IAAI3kE,EAAYw/H,EAAMvmI,MAEtB,GAAK8+M,EAAkBl3E,SAAS7gI,GAEzB,GAAkB,UAAdA,GAA0B+2M,EAI9B,GAAkB,OAAd/2M,GAAuB+2M,GAE3B,GAAkB,SAAd/2M,GAAsC,QAAdA,EAAqB,CACtD,IAAI/G,EAAmD,QAA1Cu9M,EAAKn4M,EAAQ0B,aAAaC,UAA+B,IAAPw2M,EAAgBA,EAAK,GAE/EntB,EAAexoD,SAAS5nI,EAAM2I,cAAc5C,MAAM,KAAK,IAEnC,SAAdgB,GAAwBmpL,EACjC9qL,EAAQZ,aAAauC,EAAWmpL,EAAqBlwL,IAC9B,QAAd+G,GAAuBopL,GAChC/qL,EAAQZ,aAAauC,EAAWopL,EAAyBnwL,IAJzDoF,EAAQoB,gBAAgBO,SAL1B3B,EAAQZ,aAAauC,EAAWiP,EAAK,KAAkD,QAA1CsnM,EAAKl4M,EAAQ0B,aAAaC,UAA+B,IAAPu2M,EAAgBA,EAAK,UAJpHl4M,EAAQZ,aAAauC,EAEH,QAFe6/H,EAAgD,QAA1Cy2E,EAAKj4M,EAAQ0B,aAAaC,UAA+B,IAAPs2M,OAAgB,EAASA,EAAGt3M,MAAM,KAAK+C,KAAI,SAAUtD,GAC5I,OAAOwQ,EAAK,IAAMxQ,KACjBS,KAAK,YAAyB,IAAP2gI,EAAgBA,EAAK,SAJ/CxhI,EAAQoB,gBAAgBO,IAoB5B,MAAOqjB,KACPo8G,EAAUhmI,EAAE4pB,KACZ,QACAo8G,EAAUK,IAGZy1E,EAAiBl3M,EAAQ4G,MAAOokL,EAAgBC,EAAqBF,GAErD,MAAZnsL,IAEFoB,EAAQZ,aAAa,MAAO,uBAE5BY,EAAQZ,aAAa,SAAU,gBAGjCY,EAAQ45M,mBAAmB,WAAY55M,EAAQstC,WAC/C6rK,EAAShhN,KAAK6H,GAIlB,IAAK,IAAI03B,EAAM,EAAGmiL,EAAYV,EAAUzhL,EAAMmiL,EAAU7iN,OAAQ0gC,IAAO,CACrE,IAAIoiL,EAAWD,EAAUniL,GAEzB,IACE,IACiC,QAA9B8zJ,EAAKsuB,EAAS53M,kBAA+B,IAAPspL,GAAyBA,EAAG5mL,YAAYk1M,GAC/E,MAAOliL,GACPkiL,EAASC,UAAY,IAEvB,MAAOC,GACP,IACEF,EAASp5M,SACT,MAAOu5M,MAuDb,GAlDoBxwM,EAAIqU,iBAAiB,cAC3BzjB,SAAQ,SAAU2F,GAC9B,IAAIk6M,EAAel6M,EACfm6M,EAAaD,EAAaE,MAC1BC,EAAW,GAEf,GAAKF,EAAWG,SAAhB,CAKA,IAAK,IAAIvjN,EAAI,EAAGA,EAAIojN,EAAWG,SAAStjN,OAAQD,IAAK,CACnD,IAAIse,EAAO8kM,EAAWG,SAASvjN,GAE/B,GAAI,iBAAkBse,EACpBoiM,EAAgBpiM,EAAMzE,EAAIo6K,EAAgBC,EAAqBF,GAC/DsvB,EAASliN,KAAKkd,QACT,GAAI,aAAcA,GAAQ,UAAWA,EAAM,CAMhD,IAHA,IAAIklM,EAAYllM,EACZmlM,EAAgB,GAEX3jJ,EAAM,EAAGA,EAAM0jJ,EAAUD,SAAStjN,OAAQ6/D,IAAO,CACxD,IAAI4jJ,EAAQF,EAAUD,SAASzjJ,GAE3B4jJ,EAAMtkN,OAASskN,EAAMC,aACvBjD,EAAgBgD,EAAO7pM,EAAIo6K,EAAgBC,EAAqBF,GAChEyvB,EAAcriN,KAAKsiN,IAIvB,KAAOF,EAAUD,SAAStjN,OAAS,GACjCujN,EAAUI,WAAW,GAGvB,IAAK,IAAI7jJ,EAAM,EAAG8jJ,EAAiBJ,EAAe1jJ,EAAM8jJ,EAAe5jN,OAAQ8/D,IAAO,CACpF,IAAI+jJ,EAASD,EAAe9jJ,GAC5ByjJ,EAAUO,WAAWD,EAAO9zM,QAASwzM,EAAUD,SAAStjN,QAG1DqjN,EAASliN,KAAKoiN,IAIlBL,EAAa76M,YAAcg7M,EAAS32M,KAAI,SAAU2R,GAChD,OAAOA,EAAKtO,WACXlG,KAAK,WAxCNq5M,EAAa76M,YAAc,MA2C3Bq5M,EACF,OAAOjvM,EAAI5H,KAAKyrC,UAEhB,IAAI3S,EAAMlxB,EAAIzK,cAAc,OAG5B,OAFA27B,EAAI/pB,GAAKA,EACT+pB,EAAI2S,UAAY7jC,EAAI5H,KAAKyrC,UAClB3S,EAAIo/K,UAmBNgB,CAAalD,EAAsB,OAAZnyM,QAAgC,IAAZA,EAAqBA,EAAU,M,kCCnTnF1L,OAAO2Q,eAAenV,EAAS,aAAc,CAC3CoF,OAAO,IAETpF,EAAQ6hN,qBAAuB7hN,EAAQ0jN,mBAAqB1jN,EAAQikN,iBAAc,EAClFjkN,EAAQikN,YAAc,CACpB52L,EAAG,CAAC,QAAS,OAAQ,KAAM,QAAS,UACpCm4L,QAAS,CAAC,QAAS,KAAM,SACzBryJ,EAAG,CAAC,QAAS,KAAM,SACnBsyJ,WAAY,CAAC,QAAS,KAAM,SAC5BC,GAAI,CAAC,QAAS,KAAM,SACpBhqH,QAAS,CAAC,QAAS,KAAM,SACzBiqH,KAAM,CAAC,QAAS,KAAM,SACtBppM,KAAM,CAAC,QAAS,KAAM,SACtBqpM,IAAK,CAAC,QAAS,UAAW,OAAQ,UAAW,QAAS,KAAM,QAAS,SAAU,SAC/EC,SAAU,CAAC,QAAS,UAAW,OAAQ,UAAW,QAAS,KAAM,QAAS,SAAU,SACpFrlB,OAAQ,CAAC,QAAS,KAAM,SACxBslB,GAAI,CAAC,QAAS,KAAM,SACpB3gL,IAAK,CAAC,QAAS,QAAS,MAAO,KAAM,SACrC+pK,GAAI,CAAC,QAAS,KAAM,SACpB6W,GAAI,CAAC,QAAS,KAAM,SACpBziB,KAAM,CAAC,QAAS,QAAS,OAAQ,KAAM,OAAQ,SAC/C0iB,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCC,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCC,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCC,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCC,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCC,GAAI,CAAC,QAAS,QAAS,MAAO,KAAM,SACpCrlD,GAAI,CAAC,QAAS,OAAQ,SACtBz/J,EAAG,CAAC,QAAS,KAAM,SACnB+kN,IAAK,CAAC,QAAS,MAAO,SAAU,QAAS,SAAU,SAAU,KAAM,MAAO,QAAS,SAAU,SAAU,SACvGlgM,MAAO,CAAC,QAAS,KAAM,SACvBmgM,OAAQ,CAAC,QAAS,KAAM,SACxBC,GAAI,CAAC,QAAS,MAAO,KAAM,QAAS,QACpCC,GAAI,CAAC,QAAS,MAAO,KAAM,QAAS,OAAQ,QAAS,YACrD9tJ,EAAG,CAAC,QAAS,QAAS,MAAO,KAAM,SACnC+6F,IAAK,CAAC,QAAS,KAAM,SACrBnvH,KAAM,CAAC,QAAS,KAAM,SACtBmiL,OAAQ,CAAC,QAAS,KAAM,SACxBt1M,MAAO,GACPskJ,IAAK,CAAC,QAAS,KAAM,SACrBuhD,IAAK,CAAC,QAAS,KAAM,SACrBpyG,MAAO,CAAC,QAAS,UAAW,SAAU,cAAe,cAAe,QAAS,MAAO,QAAS,KAAM,QAAS,QAAS,SACrH8hH,MAAO,CAAC,QAAS,KAAM,SACvBC,GAAI,CAAC,OAAQ,QAAS,UAAW,QAAS,UAAW,MAAO,SAAU,KAAM,OAAQ,UAAW,QAAS,QAAS,SAAU,SAC3HC,MAAO,CAAC,QAAS,UAAW,OAAQ,UAAW,QAAS,KAAM,QAAS,UACvE32F,GAAI,CAAC,OAAQ,QAAS,UAAW,QAAS,UAAW,MAAO,SAAU,KAAM,OAAQ,UAAW,QAAS,QAAS,SAAU,SAC3H42F,MAAO,CAAC,QAAS,UAAW,OAAQ,UAAW,QAAS,KAAM,QAAS,UACvEC,GAAI,CAAC,QAAS,UAAW,OAAQ,UAAW,QAAS,MAAO,KAAM,QAAS,UAC3En6E,EAAG,CAAC,QAAS,KAAM,SACnBo6E,GAAI,CAAC,QAAS,MAAO,KAAM,UAE7BhnN,EAAQ0jN,mBAAqB,CAAC,SAAU,SAAU,WAAY,QAAS,WAAY,UAAW,OAC9F1jN,EAAQ6hN,qBAAuB,CAAC,UAAW,aAAc,wBAAyB,kBAAmB,mBAAoB,mBAAoB,oBAAqB,sBAAuB,wBAAyB,wBAAyB,oBAAqB,sBAAuB,sBAAuB,kBAAmB,SAAU,gBAAiB,sBAAuB,4BAA6B,6BAA8B,sBAAuB,sBAAuB,kBAAmB,eAAgB,cAAe,oBAAqB,oBAAqB,oBAAqB,gBAAiB,eAAgB,qBAAsB,qBAAsB,qBAAsB,iBAAkB,eAAgB,aAAc,mBAAoB,yBAA0B,0BAA2B,mBAAoB,mBAAoB,eAAgB,aAAc,cAAe,eAAgB,eAAgB,eAAgB,QAAS,QAAS,eAAgB,cAAe,aAAc,cAAe,oBAAqB,oBAAqB,oBAAqB,cAAe,eAAgB,UAAW,YAAa,UAAW,YAAa,cAAe,QAAS,OAAQ,cAAe,wBAAyB,eAAgB,YAAa,mBAAoB,eAAgB,aAAc,iBAAkB,eAAgB,0BAA2B,oBAAqB,0BAA2B,yBAA0B,uBAAwB,cAAe,SAAU,oBAAqB,mBAAoB,WAAY,YAAa,cAAe,cAAe,mBAAoB,2BAA4B,mBAAoB,mBAAoB,mBAAoB,iBAAkB,aAAc,cAAe,aAAc,sBAAuB,kBAAmB,SAAU,gBAAiB,cAAe,eAAgB,aAAc,gBAAiB,aAAc,YAAa,aAAc,YAAa,iBAAkB,aAAc,kBAAmB,UAAW,UAAW,gBAAiB,gBAAiB,gBAAiB,WAAY,aAAc,aAAc,UAAW,iBAAkB,eAAgB,gBAAiB,cAAe,mBAAoB,oBAAqB,oBAAqB,QAAS,cAAe,eAAgB,QAAS,cAAe,SAAU,WAAY,QAAS,eAAgB,gBAAiB,oBAAqB,cAAe,SAAU,eAAgB,aAAc,kBAAmB,iBAAkB,uBAAwB,kBAAmB,wBAAyB,uBAAwB,uBAAwB,wBAAyB,gBAAiB,sBAAuB,sBAAuB,cAAe,eAAgB,qBAAsB,mBAAoB,gBAAiB,iBAAkB,0BAA2B,eAAgB,iBAAkB,eAAgB,cAAe,QAAS,aAAc,eAAgB,YAAa,eAAgB,S,0GC5B/4FoF,E,UAtBA,GCJmB,IAAIpuI,WAAW,CACtC,GAAM,IAAM,IAAM,IAClB,GAAM,IAAM,GAAM,MDEE,SAAuBhrD,GACzC,MAAoB,kBAATA,EACF,YAAcA,GAIdA,IAiBA,EAAmB,SAA0Bs8C,GACtDA,EAAQ,YAAQA,GAIhB,IAHA,IAAItO,EAAU,GACVt6D,EAAI,EAED4oE,EAAM3oE,OAASD,GAAG,CACvB,IAAIuK,EAAMq+D,EAAM5oE,GACZ4V,EAAO,EACP+vM,EAAa,EAGbx9E,EAAOv/D,IADX+8I,GAKA,IAFAA,IAEc,IAAPx9E,GACLvyH,GAAe,IAAPuyH,IAAgB,EACxBA,EAAOv/D,EAAM+8I,GACbA,IAGF/vM,GAAe,IAAPuyH,EAER,IAAK,IAAIjd,EAAI,EAAGA,EAAIw6F,EAAYzlN,OAAQirH,IAAK,CAC3C,IAAI06F,EAAiBF,EAAYx6F,GAC7BrxG,EAAK+rM,EAAe/rM,GACpBiT,EAAS84L,EAAe94L,OAE5B,GAAIviB,IAAQsP,EAAI,CACdygD,EAAQl5D,KAAK0rB,EAAO87C,EAAM4E,SAASm4I,EAAYA,EAAa/vM,KAC5D,OAIJ5V,GAAK4V,EAAO+vM,EAGd,OAAOrrJ,GAETorJ,EAAc,CAAC,CACb7rM,GAAI,EACJiT,OAAQ,SAAgB87C,GACtB,IAAI7jD,EAAO,CACTxa,IAAK,EACLsP,GAAI+uD,EAAM,IAAM,EAAIA,EAAM,GAC1BqP,MAAOrP,EAAM,GACbhzD,KAAM,EACNiwM,cAAe,EACfC,QAAS,EACTC,YAAa,GACbn6L,IAAK,IASP,GANiB,IAAb7G,EAAKkzD,QACPlzD,EAAK8gM,cAAgBj9I,EAAM7jD,EAAKnP,OAAS,EAAIgzD,EAAM7jD,EAAKnP,KAAO,GAC/DmP,EAAKnP,MAAQ,GAIE,GAAbmP,EAAKkzD,MAAc,CACrB,IAAI6b,EAAMlrB,EAAM7jD,EAAKnP,MACrBmP,EAAK6G,IAAM,YAAcg9C,EAAM4E,SAASzoD,EAAKnP,KAAO,EAAGmP,EAAKnP,KAAO,EAAIk+E,IACvE/uE,EAAKnP,MAAQk+E,EAUf,OANiB,GAAb/uE,EAAKkzD,QACPlzD,EAAK+gM,QAAUl9I,EAAM7jD,EAAKnP,OAAS,EAAIgzD,EAAM7jD,EAAKnP,KAAO,GACzDmP,EAAKnP,MAAQ,GAGfmP,EAAKghM,YAAc,EAAiBn9I,EAAM4E,SAASzoD,EAAKnP,QAAU,GAC3DmP,IAER,CACDlL,GAAI,EACJiT,OAAQ,SAAgB87C,GAWtB,MATW,CACTr+D,IAAK,EACLy7M,IAAKp9I,EAAM,GACXinB,WAAYjnB,EAAM,GAClBqlB,WAAYrlB,EAAM,IAAM,GAAKA,EAAM,IAAM,EAAIA,EAAM,GACnDq9I,WAAYr9I,EAAM,IAAM,GAAKA,EAAM,IAAM,GAAKA,EAAM,IAAM,EAAIA,EAAM,GACpEs9I,WAAYt9I,EAAM,IAAM,GAAKA,EAAM,KAAO,GAAKA,EAAM,KAAO,EAAIA,EAAM,IACtEm9I,YAAa,EAAiBn9I,EAAM4E,SAAS,QAIhD,CACD3zD,GAAI,EACJiT,OAAQ,SAAgB87C,GAEtB,MAAO,CACLr+D,IAAK,EACLq+D,MAAOA,KAGV,CACD/uD,GAAI,EACJiT,OAAQ,SAAgB87C,GAEtB,MAAO,CACLr+D,IAAK,EACLq+D,MAAOA,MAyBN,IAAI,EAAU,SAAS8zB,EAAQ9zB,EAAOu9I,EAAOnwC,QACjC,IAAbA,IACFA,GAAW,GAGbmwC,EAjJmB,SAAwBA,GAC3C,OAAKvlN,MAAMY,QAAQ2kN,GAIZA,EAAMx5M,KAAI,SAAUyqD,GACzB,OAAO,EAAcA,MAJd,CAAC,EAAc+uJ,IA+IhBC,CAAeD,GACvBv9I,EAAQ,YAAQA,GAChB,IAAItO,EAAU,GAEd,IAAK6rJ,EAAMlmN,OAET,OAAOq6D,EAKT,IAFA,IAAIt6D,EAAI,EAEDA,EAAI4oE,EAAM3oE,QAAQ,CACvB,IAAI2V,GAAQgzD,EAAM5oE,IAAM,GAAK4oE,EAAM5oE,EAAI,IAAM,GAAK4oE,EAAM5oE,EAAI,IAAM,EAAI4oE,EAAM5oE,EAAI,MAAQ,EACpFZ,EAAOwpE,EAAM4E,SAASxtE,EAAI,EAAGA,EAAI,GAErC,GAAa,IAAT4V,EACF,MAGF,IAAIkM,EAAM9hB,EAAI4V,EAEd,GAAIkM,EAAM8mD,EAAM3oE,OAAQ,CAGtB,GAAI+1K,EACF,MAGFl0J,EAAM8mD,EAAM3oE,OAGd,IAAIuQ,EAAOo4D,EAAM4E,SAASxtE,EAAI,EAAG8hB,GAE7B,YAAW1iB,EAAM+mN,EAAM,MACJ,IAAjBA,EAAMlmN,OAGRq6D,EAAQl5D,KAAKoP,GAGb8pD,EAAQl5D,KAAKuC,MAAM22D,EAASoiC,EAAQlsF,EAAM21M,EAAMzmN,MAAM,GAAIs2K,KAI9Dh2K,EAAI8hB,EAIN,OAAOw4C,GE3ME+rJ,EAAY,CACrB3jC,KAAM,YAAQ,CAAC,GAAM,GAAM,IAAM,MACjC4jC,QAAS,YAAQ,CAAC,GAAM,MACxBC,QAAS,YAAQ,CAAC,GAAM,GAAM,IAAM,MACpCC,YAAa,YAAQ,CAAC,GAAM,GAAM,IAAM,MACxCC,OAAQ,YAAQ,CAAC,GAAM,GAAM,IAAM,MACnCl7L,MAAO,YAAQ,CAAC,MAChBm7L,YAAa,YAAQ,CAAC,MACtBC,gBAAiB,YAAQ,CAAC,GAAM,IAAM,MACtCC,WAAY,YAAQ,CAAC,MACrBC,UAAW,YAAQ,CAAC,MACpBC,YAAa,YAAQ,CAAC,MACtBC,QAAS,YAAQ,CAAC,MAClBC,aAAc,YAAQ,CAAC,GAAM,MAC7Bl3L,WAAY,YAAQ,CAAC,MACrBF,WAAY,YAAQ,CAAC,MAIrBq3L,QAAS,YAAQ,CAAC,GAAM,GAAM,IAAM,MACpCC,UAAW,YAAQ,CAAC,MACpBC,eAAgB,YAAQ,CAAC,GAAM,IAAM,MACrCC,WAAY,YAAQ,CAAC,MACrBC,cAAe,YAAQ,CAAC,MACxBC,MAAO,YAAQ,CAAC,MAChBC,YAAa,YAAQ,CAAC,OAUpBC,EAAe,CAAC,IAAK,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,GAqB1C,EAAU,SAAiB5+I,EAAOxG,EAAQqlJ,EAAcz/E,QACrC,IAAjBy/E,IACFA,GAAe,QAGF,IAAXz/E,IACFA,GAAS,GAGX,IAAI/nI,EA5BU,SAAmBkoI,GAGjC,IAFA,IAAIr0C,EAAM,EAED9zF,EAAI,EAAGA,EAAIwnN,EAAavnN,UAC3BkoI,EAAOq/E,EAAaxnN,IADeA,IAKvC8zF,IAGF,OAAOA,EAiBM4zH,CAAU9+I,EAAMxG,IACzBulJ,EAAa/+I,EAAM4E,SAASpL,EAAQA,EAASniE,GAUjD,OALIwnN,KACFE,EAAa/mN,MAAM7B,UAAUW,MAAMqE,KAAK6kE,EAAOxG,EAAQA,EAASniE,IACrD,IAAMunN,EAAavnN,EAAS,IAGlC,CACLA,OAAQA,EACR4D,MAAO,YAAc8jN,EAAY,CAC/B3/E,OAAQA,IAEVp/D,MAAO++I,IAIP,EAAgB,SAASxf,EAAc77K,GACzC,MAAoB,kBAATA,EACFA,EAAK/nB,MAAM,WAAWoI,KAAI,SAAUyqD,GACzC,OAAO+wI,EAAc/wI,MAIL,kBAAT9qC,EACF,YAAcA,GAGhBA,GAaL,EAAsB,SAASs7L,EAAoB/tM,EAAI+uD,EAAOxG,GAChE,GAAIA,GAAUwG,EAAM3oE,OAClB,OAAO2oE,EAAM3oE,OAGf,IAAI4nN,EAAU,EAAQj/I,EAAOxG,GAAQ,GAErC,GAAI,YAAWvoD,EAAG+uD,MAAOi/I,EAAQj/I,OAC/B,OAAOxG,EAGT,IAAI0lJ,EAAa,EAAQl/I,EAAOxG,EAASylJ,EAAQ5nN,QACjD,OAAO2nN,EAAoB/tM,EAAI+uD,EAAOxG,EAAS0lJ,EAAW7nN,OAAS6nN,EAAWjkN,MAAQgkN,EAAQ5nN,SAuBrF,EAAW,SAAS8nN,EAASn/I,EAAOu9I,GAC7CA,EA9CmB,SAAwBA,GAC3C,OAAKvlN,MAAMY,QAAQ2kN,GAIZA,EAAMx5M,KAAI,SAAUyqD,GACzB,OAAO,EAAcA,MAJd,CAAC,EAAc+uJ,IA4ChB,CAAeA,GACvBv9I,EAAQ,YAAQA,GAChB,IAAItO,EAAU,GAEd,IAAK6rJ,EAAMlmN,OACT,OAAOq6D,EAKT,IAFA,IAAIt6D,EAAI,EAEDA,EAAI4oE,EAAM3oE,QAAQ,CACvB,IAAI4Z,EAAK,EAAQ+uD,EAAO5oE,GAAG,GACvB8nN,EAAa,EAAQl/I,EAAO5oE,EAAI6Z,EAAG5Z,QACnC+nN,EAAYhoN,EAAI6Z,EAAG5Z,OAAS6nN,EAAW7nN,OAElB,MAArB6nN,EAAWjkN,QACbikN,EAAWjkN,MAAQ,EAAoBgW,EAAI+uD,EAAOo/I,GAE9CF,EAAWjkN,QAAU+kE,EAAM3oE,SAC7B6nN,EAAWjkN,OAASmkN,IAIxB,IAAIC,EAAUD,EAAYF,EAAWjkN,MAAQ+kE,EAAM3oE,OAAS2oE,EAAM3oE,OAAS+nN,EAAYF,EAAWjkN,MAC9F2M,EAAOo4D,EAAM4E,SAASw6I,EAAWC,GAEjC,YAAW9B,EAAM,GAAItsM,EAAG+uD,SACL,IAAjBu9I,EAAMlmN,OAGRq6D,EAAQl5D,KAAKoP,GAIb8pD,EAAUA,EAAQh7D,OAAOyoN,EAASv3M,EAAM21M,EAAMzmN,MAAM,MAMxDM,GAFkB6Z,EAAG5Z,OAAS6nN,EAAW7nN,OAASuQ,EAAKvQ,OAKzD,OAAOq6D,G,UCjME4tJ,EAAe,YAAQ,CAAC,EAAM,EAAM,EAAM,IAC1CC,EAAe,YAAQ,CAAC,EAAM,EAAM,IACpCC,EAAuB,YAAQ,CAAC,EAAM,EAAM,IAW5C,EAAkC,SAAyCx/I,GAIpF,IAHA,IAAIy/I,EAAY,GACZroN,EAAI,EAEDA,EAAI4oE,EAAM3oE,OAAS,GACpB,YAAW2oE,EAAM4E,SAASxtE,EAAGA,EAAI,GAAIooN,KACvCC,EAAUjnN,KAAKpB,EAAI,GACnBA,KAGFA,IAKF,GAAyB,IAArBqoN,EAAUpoN,OACZ,OAAO2oE,EAIT,IAAIgW,EAAYhW,EAAM3oE,OAASooN,EAAUpoN,OACrC4+E,EAAU,IAAIvH,WAAWsH,GACzBG,EAAc,EAElB,IAAK/+E,EAAI,EAAGA,EAAI4+E,EAAWG,IAAe/+E,IACpC++E,IAAgBspI,EAAU,KAE5BtpI,IAEAspI,EAAU3xM,SAGZmoE,EAAQ7+E,GAAK4oE,EAAMmW,GAGrB,OAAOF,GAEE,EAAU,SAAiBjW,EAAO0/I,EAAUh3M,EAAOi3M,QAC3C,IAAbA,IACFA,EAAW7lL,KAGbkmC,EAAQ,YAAQA,GAChBt3D,EAAQ,GAAGhS,OAAOgS,GASlB,IARA,IACIk3M,EADAxoN,EAAI,EAEJyoN,EAAY,EAMTzoN,EAAI4oE,EAAM3oE,SAAWwoN,EAAYF,GAAYC,IAAW,CAC7D,IAAIE,OAAY,EAUhB,GARI,YAAW9/I,EAAM4E,SAASxtE,GAAIkoN,GAChCQ,EAAY,EACH,YAAW9/I,EAAM4E,SAASxtE,GAAImoN,KACvCO,EAAY,GAKTA,EAAL,CAOA,GAFAD,IAEID,EACF,OAAO,EAAgC5/I,EAAM4E,SAASg7I,EAAUxoN,IAGlE,IAAI2oN,OAAU,EAEG,SAAbL,EACFK,EAAiC,GAAvB//I,EAAM5oE,EAAI0oN,GACE,SAAbJ,IACTK,EAAU//I,EAAM5oE,EAAI0oN,IAAc,EAAI,KAGR,IAA5Bp3M,EAAM7R,QAAQkpN,KAChBH,EAAWxoN,EAAI0oN,GAIjB1oN,GAAK0oN,GAA0B,SAAbJ,EAAsB,EAAI,QAvB1CtoN,IA0BJ,OAAO4oE,EAAM4E,SAAS,EAAG,ICnGvBo7I,EAAY,CAEd,KAAQ,YAAQ,CAAC,IAAM,IAAM,GAAM,MAEnC,SAAY,YAAQ,CAAC,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KAE/D,KAAQ,YAAQ,CAAC,IAAM,GAAM,GAAM,KAEnC,IAAO,YAAQ,CAAC,GAAM,IAAM,IAAM,KAGlC,IAAO,YAAQ,CAAC,GAAM,MAEtB,KAAQ,YAAQ,CAAC,GAAM,GAAM,GAAM,KAEnC,IAAO,YAAQ,CAAC,GAAM,GAAM,KAE5B,IAAO,YAAQ,CAAC,GAAM,GAAM,GAAM,KAElC,MAAO,YAAQ,CAAC,IAAM,IAAM,IAAM,IAAM,GAAM,MAE9C,IAAO,YAAQ,CAAC,IAAM,IAAM,IAAM,MAElC,KAAQ,YAAQ,CAAC,IAAM,IAAM,IAAM,MAEnC,IAAO,YAAQ,CAAC,IAAM,IAAM,IAAM,IAAM,IAAM,MAE9C,KAAQ,YAAQ,CAAC,IAAM,IAAM,IAAM,MAEnC,KAAQ,YAAQ,CAAC,IAAM,IAAM,IAAM,OAEjCC,EAAY,CACd1uL,IAAK,SAAayuC,GAChB,IAAIxG,EAAS,YAAawG,GAC1B,OAAO,YAAWA,EAAO,CAAC,IAAM,IAAO,CACrCxG,OAAQA,EACRknE,KAAM,CAAC,IAAM,OAGjBpvG,IAAK,SAAa0uC,GAChB,IAAIxG,EAAS,YAAawG,GAC1B,OAAO,YAAWA,EAAO,CAAC,IAAM,GAAO,CACrCxG,OAAQA,EACRknE,KAAM,CAAC,IAAM,MAGjBmjD,KAAM,SAAc7jH,GAClB,IAAIkgJ,EAAU,EAASlgJ,EAAO,CAACy9I,EAAU3jC,KAAM2jC,EAAUC,UAAU,GAEnE,OAAO,YAAWwC,EAASF,EAAUn8B,OAEvCzyJ,IAAK,SAAa4uC,GAChB,IAAIkgJ,EAAU,EAASlgJ,EAAO,CAACy9I,EAAU3jC,KAAM2jC,EAAUC,UAAU,GAEnE,OAAO,YAAWwC,EAASF,EAAUG,WAEvClvL,IAAK,SAAa+uC,GAEhB,OAAIigJ,EAAU,OAAOjgJ,KAAUigJ,EAAU/uL,IAAI8uC,QAKzC,YAAWA,EAAOggJ,EAAU/uL,IAAK,CACnCuoC,OAAQ,MACJ,YAAWwG,EAAOggJ,EAAUI,KAAM,CACtC5mJ,OAAQ,UAMN,YAAWwG,EAAOggJ,EAAUp1I,KAAM,CACpCpR,OAAQ,MACJ,YAAWwG,EAAOggJ,EAAUn1I,KAAM,CACtCrR,OAAQ,WAHV,KAQFtoC,IAAK,SAAa8uC,GAChB,OAAO,YAAWA,EAAOggJ,EAAU9uL,IAAK,CACtCsoC,OAAQ,KAGZ,MAAO,SAAYwG,GACjB,OAAO,YAAWA,EAAOggJ,EAAU,OAAQ,CACzCxmJ,OAAQ,KAGZ6mJ,IAAK,SAAargJ,GAChB,IAAIxG,EAAS,YAAawG,GAC1B,OAAO,YAAWA,EAAOggJ,EAAUK,IAAK,CACtC7mJ,OAAQA,KAGZ2gC,GAAI,SAAYn6B,GACd,GAAIA,EAAM3oE,OAAS,KAAO2oE,EAAM3oE,QAAU,EACxC,OAAoB,KAAb2oE,EAAM,GAKf,IAFA,IAAI5oE,EAAI,EAEDA,EAAI,IAAM4oE,EAAM3oE,QAAUD,EAAI,KAAK,CACxC,GAAiB,KAAb4oE,EAAM5oE,IAAkC,KAAnB4oE,EAAM5oE,EAAI,KACjC,OAAO,EAGTA,GAAK,EAGP,OAAO,GAETq6B,KAAM,SAAcuuC,GAClB,IAAIxG,EAAS,YAAawG,GAC1B,OAAO,YAAWA,EAAOggJ,EAAUvuL,KAAM,CACvC+nC,OAAQA,KAGZ2mI,IAAK,SAAangI,GAChB,OAAO,YAAWA,EAAOggJ,EAAU7f,MAErCmgB,IAAK,SAAatgJ,GAChB,OAAO,YAAWA,EAAOggJ,EAAU97B,OAAS,YAAWlkH,EAAOggJ,EAAUM,IAAK,CAC3E9mJ,OAAQ,KAGZ7nC,IAAK,SAAaquC,GAChB,OAAO,YAAWA,EAAOggJ,EAAU97B,OAAS,YAAWlkH,EAAOggJ,EAAUruL,IAAK,CAC3E6nC,OAAQ,KAGZ,KAAQ,SAAcwG,GAEpB,ODjCqB,SAAqBA,EAAOxpE,EAAMmpN,GACzD,OAAO,EAAQ3/I,EAAO,OAAQxpE,EAAMmpN,GCgC3BY,CAAYvgJ,EAAO,EAAG,GAAG3oE,QAElC,KAAQ,SAAc2oE,GAEpB,ODlCqB,SAAqBA,EAAOxpE,EAAMmpN,GACzD,OAAO,EAAQ3/I,EAAO,OAAQxpE,EAAMmpN,GCiC3Ba,CAAYxgJ,EAAO,CAAC,GAAI,IAAK,GAAG3oE,SAMvCopN,EAAgBpmN,OAAOC,KAAK2lN,GAC/BzmN,QAAO,SAAU6R,GAChB,MAAa,OAANA,GAAoB,SAANA,GAAsB,SAANA,KAEtC3U,OAAO,CAAC,KAAM,OAAQ,SAEvB+pN,EAAc/lN,SAAQ,SAAUlE,GAC9B,IAAIkqN,EAAaT,EAAUzpN,GAE3BypN,EAAUzpN,GAAQ,SAAUwpE,GAC1B,OAAO0gJ,EAAW,YAAQ1gJ,QAIvB,IAAI2gJ,EAAWV,EAGX,EAA0B,SAAiCjgJ,GACpEA,EAAQ,YAAQA,GAEhB,IAAK,IAAI5oE,EAAI,EAAGA,EAAIqpN,EAAcppN,OAAQD,IAAK,CAC7C,IAAIZ,EAAOiqN,EAAcrpN,GAEzB,GAAIupN,EAASnqN,GAAMwpE,GACjB,OAAOxpE,EAIX,MAAO,IAGE,EAA2B,SAAkCwpE,GACtE,OAAO,EAAQA,EAAO,CAAC,SAAS3oE,OAAS,I,yGC3J5B,SAASupN,EAAUxrN,EAAW07L,GAC3C,OAAA+vB,EAAA,GAAa,EAAG9rN,WAChB,IAAIwxE,EAAO,OAAAu6I,EAAA,GAAO1rN,GACd27L,EAAS,OAAAgwB,EAAA,GAAUjwB,GAEvB,GAAIr7K,MAAMs7K,GACR,OAAO,IAAI17L,KAAKuiD,KAGlB,IAAKm5I,EAEH,OAAOxqH,EAGT,IAAIy6I,EAAaz6I,EAAKqqH,UASlBqwB,EAAoB,IAAI5rN,KAAKkxE,EAAKrxE,WACtC+rN,EAAkBC,SAAS36I,EAAK46I,WAAapwB,EAAS,EAAG,GACzD,IAAIqwB,EAAcH,EAAkBrwB,UAEpC,OAAIowB,GAAcI,EAGTH,GASP16I,EAAKunH,YAAYmzB,EAAkBI,cAAeJ,EAAkBE,WAAYH,GACzEz6I,GClEX,SAASzwE,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GA+CpW,SAAS6K,EAAIxL,EAAWkkB,GAErC,GADA,OAAAunM,EAAA,GAAa,EAAG9rN,YACXukB,GAAkC,WAAtBxjB,EAAQwjB,GAAwB,OAAO,IAAIjkB,KAAKuiD,KACjE,IAAI0pK,EAAQ,UAAWhoM,EAAW,OAAAynM,EAAA,GAAUznM,EAASgoM,OAAS,EAC1DC,EAAS,WAAYjoM,EAAW,OAAAynM,EAAA,GAAUznM,EAASioM,QAAU,EAC7DC,EAAQ,UAAWloM,EAAW,OAAAynM,EAAA,GAAUznM,EAASkoM,OAAS,EAC1DrqD,EAAO,SAAU79I,EAAW,OAAAynM,EAAA,GAAUznM,EAAS69I,MAAQ,EACvDL,EAAQ,UAAWx9I,EAAW,OAAAynM,EAAA,GAAUznM,EAASw9I,OAAS,EAC1DC,EAAU,YAAaz9I,EAAW,OAAAynM,EAAA,GAAUznM,EAASy9I,SAAW,EAChEv9H,EAAU,YAAalgB,EAAW,OAAAynM,EAAA,GAAUznM,EAASkgB,SAAW,EAEhE+sC,EAAO,OAAAu6I,EAAA,GAAO1rN,GACdqsN,EAAiBF,GAAUD,EAAQV,EAAUr6I,EAAMg7I,EAAiB,GAARD,GAAc/6I,EAE1Em7I,EAAevqD,GAAQqqD,EAAQ,OAAAG,EAAA,GAAQF,EAAgBtqD,EAAe,EAARqqD,GAAaC,EAE3EG,EAAe7qD,EAAkB,GAARD,EACzB+qD,EAAeroL,EAAyB,GAAfooL,EACzBE,EAAyB,IAAfD,EACVE,EAAY,IAAI1sN,KAAKqsN,EAAaxsN,UAAY4sN,GAClD,OAAOC,I,2FC1DL/3I,EAAsB,WACxB,SAASA,IACPxiE,KAAK+uC,UAAY,GAWnB,IAAI1uC,EAASmiE,EAAO7zE,UA+FpB,OA7FA0R,EAAO4C,GAAK,SAAYjU,EAAMmX,GACvBnG,KAAK+uC,UAAU//C,KAClBgR,KAAK+uC,UAAU//C,GAAQ,IAGzBgR,KAAK+uC,UAAU//C,GAAMgC,KAAKmV,IAY5B9F,EAAO5O,IAAM,SAAazC,EAAMmX,GAC9B,IAAKnG,KAAK+uC,UAAU//C,GAClB,OAAO,EAGT,IAAII,EAAQ4Q,KAAK+uC,UAAU//C,GAAMK,QAAQ8W,GAWzC,OAFAnG,KAAK+uC,UAAU//C,GAAQgR,KAAK+uC,UAAU//C,GAAMM,MAAM,GAClD0Q,KAAK+uC,UAAU//C,GAAMO,OAAOH,EAAO,GAC5BA,GAAS,GAUlBiR,EAAOyD,QAAU,SAAiB9U,GAChC,IAAIyvD,EAAYz+C,KAAK+uC,UAAU//C,GAE/B,GAAKyvD,EAQL,GAAyB,IAArBlxD,UAAUsC,OAGZ,IAFA,IAAIA,EAAS4uD,EAAU5uD,OAEdD,EAAI,EAAGA,EAAIC,IAAUD,EAC5B6uD,EAAU7uD,GAAG+D,KAAKqM,KAAMzS,UAAU,SAMpC,IAHA,IAAIgD,EAAOC,MAAM7B,UAAUW,MAAMqE,KAAKpG,UAAW,GAC7CkwH,EAAUh/D,EAAU5uD,OAEfC,EAAK,EAAGA,EAAK2tH,IAAW3tH,EAC/B2uD,EAAU3uD,GAAIyD,MAAMyM,KAAMzP,IAShC8P,EAAOiK,QAAU,WACftK,KAAK+uC,UAAY,IAYnB1uC,EAAOqiE,KAAO,SAAcC,GAC1B3iE,KAAKiD,GAAG,QAAQ,SAAU7C,GACxBuiE,EAAY3xE,KAAKoP,OAIdoiE,EA5GiB,G,gDCKtB,EAA0B,SAAUq9C,GAGtC,SAAS26F,IACP,IAAIr1M,EAIJ,OAFAA,EAAQ06G,EAAQlsH,KAAKqM,OAASA,MACxBy4D,OAAS,GACRtzD,EAsBT,OA7BA,IAAeq1M,EAAY36F,GAgBd26F,EAAW7rN,UAEjBqC,KAAO,SAAcoP,GAC1B,IAAIq6M,EAIJ,IAHAz6M,KAAKy4D,QAAUr4D,EACfq6M,EAAcz6M,KAAKy4D,OAAOppE,QAAQ,MAE3BorN,GAAe,EAAGA,EAAcz6M,KAAKy4D,OAAOppE,QAAQ,MACzD2Q,KAAK8D,QAAQ,OAAQ9D,KAAKy4D,OAAOzlB,UAAU,EAAGynK,IAC9Cz6M,KAAKy4D,OAASz4D,KAAKy4D,OAAOzlB,UAAUynK,EAAc,IAI/CD,EA9BqB,CA+B5Bh4I,GAEEk4I,EAAMt2J,OAAO+T,aAAa,GAE1BwiJ,EAAiB,SAAwBC,GAG3C,IAAIzmN,EAAQ,yBAAyBK,KAAKomN,GAAmB,IACzDplN,EAAS,GAUb,OARIrB,EAAM,KACRqB,EAAO3F,OAASie,SAAS3Z,EAAM,GAAI,KAGjCA,EAAM,KACRqB,EAAOw8D,OAASlkD,SAAS3Z,EAAM,GAAI,KAG9BqB,GAwBLqlN,EAAkB,SAAyBljN,GAO7C,IALA,IAGIg4C,EAHAt1C,EAAQ1C,EAAW6B,MAXhB,IAAI3I,OAAO,yCAYd2E,EAAS,GACT5F,EAAIyK,EAAMxK,OAGPD,KAEY,KAAbyK,EAAMzK,MAKV+/C,EAAO,eAAen7C,KAAK6F,EAAMzK,IAAIN,MAAM,IAEtC,GAAKqgD,EAAK,GAAGtnC,QAAQ,aAAc,IACxCsnC,EAAK,GAAKA,EAAK,GAAGtnC,QAAQ,aAAc,IACxCsnC,EAAK,GAAKA,EAAK,GAAGtnC,QAAQ,kBAAmB,MAC7C7S,EAAOm6C,EAAK,IAAMA,EAAK,IAGzB,OAAOn6C,GA4BL,EAA2B,SAAUqqH,GAGvC,SAASi7F,IACP,IAAI31M,EAKJ,OAHAA,EAAQ06G,EAAQlsH,KAAKqM,OAASA,MACxB+6M,cAAgB,GACtB51M,EAAM61M,WAAa,GACZ71M,EART,IAAe21M,EAAaj7F,GAiB5B,IAAIx/G,EAASy6M,EAAYnsN,UA6nBzB,OA3nBA0R,EAAOrP,KAAO,SAAc09L,GAC1B,IAEIv6L,EACA4H,EAHA6K,EAAS5G,KAOO,KAFpB0uL,EAAOA,EAAK/3L,QAEH9G,SAMO,MAAZ6+L,EAAK,GASM1uL,KAAKg7M,WAAWtvM,QAAO,SAAUC,EAAKspD,GACnD,IAAIgmJ,EAAahmJ,EAAOy5H,GAExB,OAAIusB,IAAevsB,EACV/iL,EAGFA,EAAIzc,OAAO,CAAC+rN,MAClB,CAACvsB,IACKx7L,SAAQ,SAAUg/E,GACzB,IAAK,IAAItiF,EAAI,EAAGA,EAAIgX,EAAOm0M,cAAclrN,OAAQD,IAC/C,GAAIgX,EAAOm0M,cAAcnrN,GAAG+D,KAAKiT,EAAQsrE,GACvC,OAKJ,GAAgC,IAA5BA,EAAQ7iF,QAAQ,QAepB,GAJA6iF,EAAUA,EAAQ7pE,QAAQ,KAAM,IAEhClU,EAAQ,WAAWK,KAAK09E,GAGtBtrE,EAAO9C,QAAQ,OAAQ,CACrB9U,KAAM,MACNksN,QAAS,YAHb,CAWA,GAFA/mN,EAAQ,gCAAgCK,KAAK09E,GAkB3C,OAfAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,OAGP/mN,EAAM,KACR4H,EAAM+V,SAAWpd,WAAWP,EAAM,KAGhCA,EAAM,KACR4H,EAAMmjC,MAAQ/qC,EAAM,SAGtByS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,qCAAqCK,KAAK09E,GAchD,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,kBAGP/mN,EAAM,KACR4H,EAAM+V,SAAWhE,SAAS3Z,EAAM,GAAI,UAGtCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,8BAA8BK,KAAK09E,GAczC,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,WAGP/mN,EAAM,KACR4H,EAAMtG,QAAUqY,SAAS3Z,EAAM,GAAI,UAGrCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,wCAAwCK,KAAK09E,GAcnD,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,kBAGP/mN,EAAM,KACR4H,EAAMw4B,OAASzmB,SAAS3Z,EAAM,GAAI,UAGpCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,gDAAgDK,KAAK09E,GAc3D,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,0BAGP/mN,EAAM,KACR4H,EAAMw4B,OAASzmB,SAAS3Z,EAAM,GAAI,UAGpCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,gCAAgCK,KAAK09E,GAc3C,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,iBAGP/mN,EAAM,KACR4H,EAAMo/M,aAAehnN,EAAM,SAG7ByS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,4BAA4BK,KAAK09E,GAUvC,OAPAn2E,EAAQ,IAAS4+M,EAAexmN,EAAM,IAAK,CACzCnF,KAAM,MACNksN,QAAS,mBAGXt0M,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,iCAAiCK,KAAK09E,GAc5C,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,eAGP/mN,EAAM,KACR4H,EAAMq/M,SAAW,KAAKjqN,KAAKgD,EAAM,UAGnCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,qBAAqBK,KAAK09E,GAElC,CAME,GALAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,OAGP/mN,EAAM,GAAI,CACZ,IAAIwD,EAAakjN,EAAgB1mN,EAAM,IAEnCwD,EAAW0jN,MACbt/M,EAAMyhB,IAAM7lB,EAAW0jN,KAGrB1jN,EAAW2jN,YACbv/M,EAAM87D,UAAY8iJ,EAAehjN,EAAW2jN,YAIhD10M,EAAO9C,QAAQ,OAAQ/H,QAOzB,GAFA5H,EAAQ,4BAA4BK,KAAK09E,GAEzC,CAME,GALAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,cAGP/mN,EAAM,GAAI,CAGZ,GAFA4H,EAAMpE,WAAakjN,EAAgB1mN,EAAM,IAErC4H,EAAMpE,WAAWgoG,WAAY,CAC/B,IAAInmG,EAAQuC,EAAMpE,WAAWgoG,WAAWnmG,MAAM,KAC1Cg7G,EAAa,GAEbh7G,EAAM,KACRg7G,EAAWp5G,MAAQ0S,SAAStU,EAAM,GAAI,KAGpCA,EAAM,KACRg7G,EAAWr5G,OAAS2S,SAAStU,EAAM,GAAI,KAGzCuC,EAAMpE,WAAWgoG,WAAa6U,EAG5Bz4G,EAAMpE,WAAW02D,YACnBtyD,EAAMpE,WAAW02D,UAAYvgD,SAAS/R,EAAMpE,WAAW02D,UAAW,KAGhEtyD,EAAMpE,WAAW,gBACnBoE,EAAMpE,WAAW,cAAgBmW,SAAS/R,EAAMpE,WAAW,cAAe,KAI9EiP,EAAO9C,QAAQ,OAAQ/H,OAjCzB,CAwCA,GAFA5H,EAAQ,uBAAuBK,KAAK09E,GAclC,OAXAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,SAGP/mN,EAAM,KACR4H,EAAMpE,WAAakjN,EAAgB1mN,EAAM,UAG3CyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,kBAAkBK,KAAK09E,GAG7BtrE,EAAO9C,QAAQ,OAAQ,CACrB9U,KAAM,MACNksN,QAAS,iBAQb,GAFA/mN,EAAQ,wBAAwBK,KAAK09E,GAGnCtrE,EAAO9C,QAAQ,OAAQ,CACrB9U,KAAM,MACNksN,QAAS,sBAHb,CAWA,GAFA/mN,EAAQ,mCAAmCK,KAAK09E,GAe9C,OAZAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,qBAGP/mN,EAAM,KACR4H,EAAMw4G,eAAiBpgH,EAAM,GAC7B4H,EAAMk+D,eAAiB,IAAIpsE,KAAKsG,EAAM,UAGxCyS,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,qBAAqBK,KAAK09E,GA2BhC,OAxBAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,OAGP/mN,EAAM,KACR4H,EAAMpE,WAAakjN,EAAgB1mN,EAAM,IAErC4H,EAAMpE,WAAW4jN,KACuC,OAAtDx/M,EAAMpE,WAAW4jN,GAAGvoK,UAAU,EAAG,GAAG52C,gBACtCL,EAAMpE,WAAW4jN,GAAKx/M,EAAMpE,WAAW4jN,GAAGvoK,UAAU,IAGtDj3C,EAAMpE,WAAW4jN,GAAKx/M,EAAMpE,WAAW4jN,GAAGpnN,MAAM,SAChD4H,EAAMpE,WAAW4jN,GAAG,GAAKztM,SAAS/R,EAAMpE,WAAW4jN,GAAG,GAAI,IAC1Dx/M,EAAMpE,WAAW4jN,GAAG,GAAKztM,SAAS/R,EAAMpE,WAAW4jN,GAAG,GAAI,IAC1Dx/M,EAAMpE,WAAW4jN,GAAG,GAAKztM,SAAS/R,EAAMpE,WAAW4jN,GAAG,GAAI,IAC1Dx/M,EAAMpE,WAAW4jN,GAAG,GAAKztM,SAAS/R,EAAMpE,WAAW4jN,GAAG,GAAI,IAC1Dx/M,EAAMpE,WAAW4jN,GAAK,IAAI3iH,YAAY78F,EAAMpE,WAAW4jN,WAI3D30M,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,uBAAuBK,KAAK09E,GAgBlC,OAbAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,SAGP/mN,EAAM,KACR4H,EAAMpE,WAAakjN,EAAgB1mN,EAAM,IACzC4H,EAAMpE,WAAW,eAAiBjD,WAAWqH,EAAMpE,WAAW,gBAC9DoE,EAAMpE,WAAW6jN,QAAU,MAAMrqN,KAAK4K,EAAMpE,WAAW6jN,eAGzD50M,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,+BAA+BK,KAAK09E,GAgB1C,OAbAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,gBAGP/mN,EAAM,GACR4H,EAAMqE,KAAOjM,EAAM,GAEnB4H,EAAMqE,KAAO,QAGfwG,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,0BAA0BK,KAAK09E,GAgBrC,OAbAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,WAGP/mN,EAAM,GACR4H,EAAMqE,KAAOjM,EAAM,GAEnB4H,EAAMqE,KAAO,QAGfwG,EAAO9C,QAAQ,OAAQ/H,GAOzB,GAFA5H,EAAQ,yBAAyBK,KAAK09E,GAgBpC,OAbAn2E,EAAQ,CACN/M,KAAM,MACNksN,QAAS,UAGP/mN,EAAM,GACR4H,EAAMqE,KAAOjM,EAAM,GAEnB4H,EAAMqE,KAAO,QAGfwG,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,qBAAqBK,KAAK09E,KAErB/9E,EAAM,GAiBjB,OAhBA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,SAELvjN,WAAakjN,EAAgB1mN,EAAM,IAErC4H,EAAMpE,WAAW7F,eAAe,sBAClCiK,EAAMpE,WAAW,oBAAsBmW,SAAS/R,EAAMpE,WAAW,oBAAqB,KAGpFoE,EAAMpE,WAAW7F,eAAe,iCAClCiK,EAAMpE,WAAW,+BAAiCoE,EAAMpE,WAAW,+BAA+B6B,MAAMkhN,SAG1G9zM,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,qBAAqBK,KAAK09E,KAErB/9E,EAAM,GAuBjB,OAtBA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,SAELvjN,WAAakjN,EAAgB1mN,EAAM,IACzC,CAAC,YAAYjB,SAAQ,SAAUC,GACzB4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAOuB,WAAWqH,EAAMpE,WAAWxE,QAGxD,CAAC,cAAe,OAAOD,SAAQ,SAAUC,GACnC4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAO,MAAMhC,KAAK4K,EAAMpE,WAAWxE,QAIpD4I,EAAMpE,WAAW7F,eAAe,eAClCiK,EAAMpE,WAAWkgE,UAAY8iJ,EAAe5+M,EAAMpE,WAAW2jN,iBAG/D10M,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,+BAA+BK,KAAK09E,KAE/B/9E,EAAM,GAmBjB,OAlBA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,mBAELvjN,WAAakjN,EAAgB1mN,EAAM,IACzC,CAAC,iBAAkB,iBAAkB,aAAajB,SAAQ,SAAUC,GAC9D4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAOuB,WAAWqH,EAAMpE,WAAWxE,QAGxD,CAAC,sBAAuB,oBAAoBD,SAAQ,SAAUC,GACxD4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAO,MAAMhC,KAAK4K,EAAMpE,WAAWxE,aAIxDyT,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,yBAAyBK,KAAK09E,KAEzB/9E,EAAM,GAcjB,OAbA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,aAELvjN,WAAakjN,EAAgB1mN,EAAM,IACzC,CAAC,eAAejB,SAAQ,SAAUC,GAC5B4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAOuB,WAAWqH,EAAMpE,WAAWxE,aAIxDyT,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,6BAA6BK,KAAK09E,KAE7B/9E,EAAM,GAmBjB,OAlBA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,iBAELvjN,WAAakjN,EAAgB1mN,EAAM,IACzC,CAAC,kBAAmB,oBAAoBjB,SAAQ,SAAUC,GACxD,GAAI4I,EAAMpE,WAAW7F,eAAeqB,GAAM,CACxC4I,EAAMpE,WAAWxE,GAAO2a,SAAS/R,EAAMpE,WAAWxE,GAAM,IACxD,IAAIsoN,EAAiB,qBAARtoN,EAA6B,SAAW,SACrD4I,EAAMpE,WAAWkgE,UAAY97D,EAAMpE,WAAWkgE,WAAa,GAC3D97D,EAAMpE,WAAWkgE,UAAU4jJ,GAAU1/M,EAAMpE,WAAWxE,UAE/C4I,EAAMpE,WAAWxE,YAI5ByT,EAAO9C,QAAQ,OAAQ/H,GAOzB,IAFA5H,EAAQ,iCAAiCK,KAAK09E,KAEjC/9E,EAAM,GAcjB,OAbA4H,EAAQ,CACN/M,KAAM,MACNksN,QAAS,qBAELvjN,WAAakjN,EAAgB1mN,EAAM,IACzC,CAAC,WAAY,aAAajB,SAAQ,SAAUC,GACtC4I,EAAMpE,WAAW7F,eAAeqB,KAClC4I,EAAMpE,WAAWxE,GAAO2a,SAAS/R,EAAMpE,WAAWxE,GAAM,aAI5DyT,EAAO9C,QAAQ,OAAQ/H,GAMzB6K,EAAO9C,QAAQ,OAAQ,CACrB9U,KAAM,MACNoR,KAAM8xE,EAAQ5iF,MAAM,YA9gBpBsX,EAAO9C,QAAQ,OAAQ,CACrB9U,KAAM,UACNqJ,KAAM65E,EAAQ5iF,MAAM,QA5BxB0Q,KAAK8D,QAAQ,OAAQ,CACnB9U,KAAM,MACNwuB,IAAKkxK,MAqjBXruL,EAAO20D,UAAY,SAAmB5kD,GACpC,IAAIpJ,EAAShH,KAET07M,EAAatrM,EAAKsrM,WAClBC,EAAavrM,EAAKurM,WAClBC,EAAaxrM,EAAKwrM,WAClB9wJ,EAAU16C,EAAK06C,QAEO,oBAAf8wJ,IACTA,EAAa,SAAoBltB,GAC/B,OAAOA,IAIX1uL,KAAK+6M,cAAc/pN,MAAK,SAAU09L,GAGhC,GAFYgtB,EAAWlnN,KAAKk6L,GAU1B,OAPA1nL,EAAOlD,QAAQ,OAAQ,CACrB9U,KAAM,SACNoR,KAAMw7M,EAAWltB,GACjBitB,WAAYA,EACZ7wJ,QAASA,KAGJ,MAabzqD,EAAO60D,aAAe,SAAsB5T,GAC1C,IAAIo6J,EAAap6J,EAAMo6J,WACnBn/M,EAAM+kD,EAAM/kD,IAUhByD,KAAKg7M,WAAWhqN,MARJ,SAAe09L,GACzB,OAAIgtB,EAAWvqN,KAAKu9L,GACXnyL,EAAImyL,GAGNA,MAMJosB,EA/oBsB,CAgpB7Bt4I,GAQEq5I,EAAgB,SAAuBlkN,GACzC,IAAInC,EAAS,GAIb,OAHA3C,OAAOC,KAAK6E,GAAYzE,SAAQ,SAAUC,GAR5B,IAAmBuD,EAS/BlB,GAT+BkB,EASdvD,EARZuD,EAAI0F,cAAciM,QAAQ,UAAU,SAAUqT,GACnD,OAAOA,EAAE,GAAG3qB,mBAOa4G,EAAWxE,MAE/BqC,GAOLsmN,EAAc,SAAqB3mJ,GACrC,IAAI/I,EAAgB+I,EAAS/I,cACzBG,EAAiB4I,EAAS5I,eAC1BtB,EAAqBkK,EAASlK,mBAElC,GAAKmB,EAAL,CAIA,IAAIjyD,EAAM,wBACN4hN,EAAK,WACLC,EAAM,eACNC,EAAoB1vJ,GAAmC,EAAjBA,EACtC2vJ,EAAkBjxJ,GAA2C,EAArBA,EAExCsB,IAAmBH,EAAct6D,eAAeiqN,KAClD3vJ,EAAc2vJ,GAAME,EACpBj8M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS9X,EAAM,gDAAkD8hN,EAAoB,QAIrFA,GAAqB7vJ,EAAc2vJ,GAAME,IAC3Cj8M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS9X,EAAM,wBAA0BiyD,EAAc2vJ,GAAM,4BAA8BE,EAAoB,MAEjH7vJ,EAAc2vJ,GAAME,GAIlBhxJ,IAAuBmB,EAAct6D,eAAekqN,KACtD5vJ,EAAc4vJ,GAA4B,EAArB/wJ,EACrBjrD,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS9X,EAAM,yDAA2DiyD,EAAc4vJ,GAAO,QAK/F/wJ,GAAsBmB,EAAc4vJ,GAAOE,IAC7Cl8M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS9X,EAAM,6BAA+BiyD,EAAc4vJ,GAAO,gCAAkCE,EAAkB,OAEzH9vJ,EAAc4vJ,GAAOE,KA0BrB,EAAsB,SAAUr8F,GAGlC,SAASjjG,IACP,IAAIzX,GAEJA,EAAQ06G,EAAQlsH,KAAKqM,OAASA,MACxBm8M,WAAa,IAAI,EACvBh3M,EAAMgmF,YAAc,IAAI,EAExBhmF,EAAMg3M,WAAWz5I,KAAKv9D,EAAMgmF,aAI5B,IAOIh5B,EAEA1hE,EATAtC,EAAO,IAAuBgX,GAI9Bi3M,EAAO,GACPC,EAAa,GAMblwJ,GAAW,EAEXpa,EAAO,aAEPuqK,EAAqB,CACvB,MAAS,GACT,MAAS,GACT,kBAAmB,GACnB,UAAa,IAMXj5G,EAAkB,EAEtBl+F,EAAMgwD,SAAW,CACfonJ,YAAY,EACZxhG,oBAAqB,GACrB5vD,SAAU,IAKZ,IAAIqxJ,EAAmB,EAEnBC,EAAuB,EA4gB3B,OA1gBAt3M,EAAMlC,GAAG,OAAO,WAGVo5M,EAAW7+L,MAAQ6+L,EAAWtxJ,QAAUsxJ,EAAWrxJ,gBAIlDqxJ,EAAW9/M,KAAO41D,IACrBkqJ,EAAW9/M,IAAM41D,IAGdkqJ,EAAWlpN,KAAO1C,IACrB4rN,EAAWlpN,IAAM1C,GAGd4rN,EAAW15G,UAAuC,kBAApBU,IACjCg5G,EAAW15G,SAAWU,GAGxBl+F,EAAMgwD,SAASxJ,eAAiB0wJ,MAIlCl3M,EAAMgmF,YAAYloF,GAAG,QAAQ,SAAUgkI,GACrC,IAAIjf,EACA00F,GACJ,CACEviN,IAAK,YAEF,CACC1E,QAAS,WACHwxI,EAAMxxI,UACRuK,KAAKm1D,SAAS1/D,QAAUwxI,EAAMxxI,UAGlC,cAAe,WACbuK,KAAKm1D,SAASonJ,WAAat1E,EAAMm0E,QAE3B,YAAan0E,IACjBjnI,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,iCAEXjS,KAAKm1D,SAASonJ,YAAa,IAG/B1kJ,UAAW,WACT,IAAIA,EAAY,GAEZ,WAAYovE,IACdo1E,EAAWxkJ,UAAYA,EACvBA,EAAUhoE,OAASo3I,EAAMp3I,OAEnB,WAAYo3I,IAWhBA,EAAMj1E,OAASwqJ,IAIf,WAAYv1E,IACdo1E,EAAWxkJ,UAAYA,EACvBA,EAAU7F,OAASi1E,EAAMj1E,QAG3BwqJ,EAAmB3kJ,EAAU7F,OAAS6F,EAAUhoE,QAElD8sN,QAAS,WACP38M,KAAKm1D,SAASlJ,SAAU,GAE1B2wJ,IAAK,WACG,kBAAmB58M,KAAKm1D,WAC5Bn1D,KAAKm1D,SAASxI,cAAgB,EAC9B3sD,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,uCAIP,0BAA2BjS,KAAKm1D,WACpCn1D,KAAKm1D,SAAS6lD,sBAAwB,EACtCh7G,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,+CAITg1H,EAAMn1H,SAAW,IACnBuqM,EAAWvqM,SAAWm1H,EAAMn1H,UAGP,IAAnBm1H,EAAMn1H,WACRuqM,EAAWvqM,SAAW,IACtB9R,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qDAIbjS,KAAKm1D,SAAShK,SAAWixJ,GAE3BjpN,IAAK,WACH,GAAK8zI,EAAMtvI,WAQX,GAAgC,SAA5BsvI,EAAMtvI,WAAWklN,OAKrB,GAAK51E,EAAMtvI,WAAW0jN,IAAtB,CAOA,GAAmC,mCAA/Bp0E,EAAMtvI,WAAWmlN,UAMnB,OALA98M,KAAKm1D,SAASu8D,kBAAoB1xH,KAAKm1D,SAASu8D,mBAAqB,QAErE1xH,KAAKm1D,SAASu8D,kBAAkB,qBAAuB,CACrD/5H,WAAYsvI,EAAMtvI,aAOtB,GAzJS,kDAyJLsvI,EAAMtvI,WAAWmlN,UAA4B,CAG/C,OAAwD,IAFpC,CAAC,aAAc,iBAAkB,mBAEnCztN,QAAQ43I,EAAMtvI,WAAWklN,aACzC78M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,8CAKmB,oBAA5Bg1H,EAAMtvI,WAAWklN,QACnB78M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qEAIiC,4BAA1Cg1H,EAAMtvI,WAAW0jN,IAAIroK,UAAU,EAAG,SACpChzC,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,0CAKPg1H,EAAMtvI,WAAWolN,OAAoD,OAA3C91E,EAAMtvI,WAAWolN,MAAM/pK,UAAU,EAAG,IASpEhzC,KAAKm1D,SAASu8D,kBAAoB1xH,KAAKm1D,SAASu8D,mBAAqB,QACrE1xH,KAAKm1D,SAASu8D,kBAAkB,sBAAwB,CACtD/5H,WAAY,CACVqlN,YAAa/1E,EAAMtvI,WAAWmlN,UAE9BG,MAAOh2E,EAAMtvI,WAAWolN,MAAM/pK,UAAU,IAG1C++E,KAAM,YAAsBkV,EAAMtvI,WAAW0jN,IAAI7hN,MAAM,KAAK,YAhB5DwG,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,0CAoBVg1H,EAAMtvI,WAAWklN,QACpB78M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qCAKbxhB,EAAO,CACL0G,OAAQ8vI,EAAMtvI,WAAWklN,QAAU,UACnCr/L,IAAKypH,EAAMtvI,WAAW0jN,KAGW,qBAAxBp0E,EAAMtvI,WAAW4jN,KAC1B9qN,EAAK8qG,GAAK0rC,EAAMtvI,WAAW4jN,SA3E3Bv7M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,8CANXxhB,EAAO,UARPuP,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qDA0Ff,iBAAkB,WACXk/E,SAAS81C,EAAM1yG,QAOpBv0B,KAAKm1D,SAASxI,cAAgBs6E,EAAM1yG,OANlCv0B,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,oCAAsCg1H,EAAM1yG,UAO3D,yBAA0B,WACnB48D,SAAS81C,EAAM1yG,SAOpBv0B,KAAKm1D,SAAS6lD,sBAAwBisB,EAAM1yG,OAC5C8uE,EAAkB4jC,EAAM1yG,QAPtBv0B,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,4CAA8Cg1H,EAAM1yG,UAQnE,gBAAiB,WACV,YAAYpjC,KAAK81I,EAAMk0E,cAO5Bn7M,KAAKm1D,SAASgmJ,aAAel0E,EAAMk0E,aANjCn7M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,mCAAqCg1H,EAAMp8E,YAO1DtuD,IAAK,WACH41D,EAAa,GAET80E,EAAMzpH,MACR20C,EAAW30C,IAAMypH,EAAMzpH,KAGrBypH,EAAMpvE,YACR1F,EAAW0F,UAAYovE,EAAMpvE,WAG3BpnE,IACF0hE,EAAWh/D,IAAM1C,IAGrB,aAAc,WACZuP,KAAKm1D,SAAShH,UAAYiuJ,EAC1Bp8M,KAAKm1D,SAASxG,YAAc3uD,KAAKm1D,SAASxG,aAAe2tJ,EAEpDr1E,EAAMtvI,YAON0kN,EAAW1kN,aACd0kN,EAAW1kN,WAAa,IAG1B,IAAS0kN,EAAW1kN,WAAYsvI,EAAMtvI,aAVpCqI,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,0CAWf4rC,MAAO,WAGL,GAFA79C,KAAKm1D,SAASxG,YAAc3uD,KAAKm1D,SAASxG,aAAe2tJ,EAEnDr1E,EAAMtvI,YAAcsvI,EAAMtvI,WAAWulN,MAAQj2E,EAAMtvI,WAAW,aAAesvI,EAAMtvI,WAAWwlN,KAApG,CAQA,IAAIC,EAAiBp9M,KAAKm1D,SAASxG,YAAYs4E,EAAMtvI,WAAWulN,MAChEE,EAAen2E,EAAMtvI,WAAW,aAAeylN,EAAen2E,EAAMtvI,WAAW,cAAgB,GAC/FqwH,EAAao1F,EAAen2E,EAAMtvI,WAAW,cAE7C+kN,EAAY,CACVv/E,QAAS,OAAOhsI,KAAK81I,EAAMtvI,WAAW9F,WAG1BsrI,QACZu/E,EAAU/5F,YAAa,EAEvB+5F,EAAU/5F,WAAa,OAAOxxH,KAAK81I,EAAMtvI,WAAW0lN,YAGlDp2E,EAAMtvI,WAAW2lN,WACnBZ,EAAU7xM,SAAWo8H,EAAMtvI,WAAW2lN,UAGpCr2E,EAAMtvI,WAAW0jN,MACnBqB,EAAUl/L,IAAMypH,EAAMtvI,WAAW0jN,KAG/Bp0E,EAAMtvI,WAAW,iBACnB+kN,EAAUxtG,WAAa+3B,EAAMtvI,WAAW,gBAGtCsvI,EAAMtvI,WAAW4lN,kBACnBb,EAAUt7F,gBAAkB6lB,EAAMtvI,WAAW4lN,iBAG3Ct2E,EAAMtvI,WAAW6lN,SACnBd,EAAUh6F,OAAS,OAAOvxH,KAAK81I,EAAMtvI,WAAW6lN,SAIlDx1F,EAAWif,EAAMtvI,WAAWwlN,MAAQT,OA1ClC18M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,gDA2Cf6qE,cAAe,WACbumB,GAAmB,EACnBg5G,EAAWv/H,eAAgB,EAC3B98E,KAAKm1D,SAAS4lD,oBAAoB/pH,KAAKorN,EAAKvsN,SAE9C,oBAAqB,WACyB,qBAAjCmQ,KAAKm1D,SAASo/C,iBAKvBv0G,KAAKm1D,SAASo/C,eAAiB0yB,EAAM1yB,eACrCv0G,KAAKm1D,SAAS8E,eAAiBgtE,EAAMhtE,gBAGvCoiJ,EAAW9nG,eAAiB0yB,EAAM1yB,eAClC8nG,EAAWpiJ,eAAiBgtE,EAAMhtE,gBAEpCwjJ,eAAgB,YACTtsH,SAAS81C,EAAMn1H,WAAam1H,EAAMn1H,SAAW,EAChD9R,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qCAAuCg1H,EAAMn1H,YAK1D9R,KAAKm1D,SAAS5I,eAAiB06E,EAAMn1H,SACrCgqM,EAAYnoN,KAAKqM,KAAMA,KAAKm1D,YAE9B1jD,MAAO,WACAw1H,EAAMtvI,aAAcsW,MAAMg5H,EAAMtvI,WAAW,gBAOhDqI,KAAKm1D,SAAS1jD,MAAQ,CACpBisM,WAAYz2E,EAAMtvI,WAAW,eAC7Bk1D,QAASo6E,EAAMtvI,WAAW6jN,SAR1Bx7M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,mEAUf,UAAW,WACToqM,EAAW3wF,OAASub,EAAM7mI,MAE5B,eAAgB,WACdi8M,EAAWzwF,WAAaqb,EAAM7mI,MAEhC,SAAU,WACRi8M,EAAWsB,MAAQ12E,EAAM7mI,MAE3B,KAAQ,WACNJ,KAAKm1D,SAASrD,KAAO+pJ,EAAc50E,EAAMtvI,YACzCqI,KAAK49M,yBAAyB,cAAe32E,EAAMtvI,WAAY,CAAC,sBAElE,KAAQ,WACN,IAAIiP,EAAS5G,KAEbmsD,GAAW,EAEX,IAAIb,EAAetrD,KAAKm1D,SAAShK,SAASt7D,OACtC2mC,EAAOqlL,EAAc50E,EAAMtvI,YAC/B0kN,EAAWtxJ,MAAQsxJ,EAAWtxJ,OAAS,GACvCsxJ,EAAWtxJ,MAAM/5D,KAAKwlC,GAElBA,EAAKqhC,YACFrhC,EAAKqhC,UAAU/lE,eAAe,YACjC0kC,EAAKqhC,UAAU7F,OAASyqJ,GAG1BA,EAAuBjmL,EAAKqhC,UAAU7F,OAASx7B,EAAKqhC,UAAUhoE,QAGhE,IAAI07D,EAAY8wJ,EAAWtxJ,MAAMl7D,OAAS,EAC1CmQ,KAAK49M,yBAAyB,gBAAkBryJ,EAAY,iBAAmBD,EAAc27E,EAAMtvI,WAAY,CAAC,MAAO,aAEnHqI,KAAKm1D,SAAS0oJ,kBAChB79M,KAAKm1D,SAAS0oJ,iBAAiB3qN,SAAQ,SAAUo/C,EAAG1iD,GAC7C0iD,EAAExgD,eAAe,aACpB8U,EAAO9C,QAAQ,OAAQ,CACrBmO,QAAS,4BAA8BriB,EAAI,gDAMrD,iBAAkB,WAChB,IAAIyK,EAAQ2F,KAAKm1D,SAAS/I,cAAgByvJ,EAAc50E,EAAMtvI,YAEzD0C,EAAMvI,eAAe,oBACxBuI,EAAMm5D,gBAAiB,EACvBxzD,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,gEAIb6pM,EAAYnoN,KAAKqM,KAAMA,KAAKm1D,UAExB96D,EAAM05D,oBAAsB15D,EAAMvI,eAAe,iBACnDkO,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,qHAIf,eAAgB,WAEd,IAAIq5C,EAAetrD,KAAKm1D,SAAShK,SAASt7D,OACtCi8D,EAAO+vJ,EAAc50E,EAAMtvI,YAC3BmmN,EAAShyJ,EAAK98D,MAAsB,SAAd88D,EAAK98D,KAC/BqtN,EAAWrxJ,aAAeqxJ,EAAWrxJ,cAAgB,GACrDqxJ,EAAWrxJ,aAAah6D,KAAK86D,GAEzBA,EAAK+L,YACF/L,EAAK+L,UAAU/lE,eAAe,YAEjCg6D,EAAK+L,UAAU7F,OAAS8rJ,EAASrB,EAAuB,EAEpDqB,IACFrB,EAAuB3wJ,EAAK+L,UAAU7F,OAASlG,EAAK+L,UAAUhoE,UAKpE,IAAIT,EAAQitN,EAAWrxJ,aAAan7D,OAAS,EAG7C,GAFAmQ,KAAK49M,yBAAyB,wBAA0BxuN,EAAQ,iBAAmBk8D,EAAc27E,EAAMtvI,WAAY,CAAC,OAAQ,QAEvHm0D,EAAK98D,KAMV,IAAK,IAAIY,EAAI,EAAGA,EAAIysN,EAAWrxJ,aAAan7D,OAAS,EAAGD,IAAK,CAC3D,IAAImuN,EAAY1B,EAAWrxJ,aAAap7D,GAEnCmuN,EAAU/uN,OAIX+uN,EAAU/uN,OAAS88D,EAAK98D,MAC1BgR,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,wBAA0B7iB,EAAQ,iBAAmBk8D,EAAe,sBAAwBQ,EAAK98D,KAAO,qBAAuBY,OAKhJ,mBAAoB,WAClB,IAAIyf,EAASwsM,EAAc50E,EAAMtvI,YACjCqI,KAAKm1D,SAAS0oJ,iBAAmB79M,KAAKm1D,SAAS0oJ,kBAAoB,GACnE79M,KAAKm1D,SAAS0oJ,iBAAiB7sN,KAAKqe,GACpC,IAAIjgB,EAAQ4Q,KAAKm1D,SAAS0oJ,iBAAiBhuN,OAAS,EAChDmuN,EAAW,CAAC,WAAY,OAExB7xJ,GACF6xJ,EAAShtN,KAAK,aAGhBgP,KAAK49M,yBAAyB,4BAA8BxuN,EAAO63I,EAAMtvI,WAAYqmN,IAEvF,WAAY,WACVh+M,KAAKm1D,SAAS8oJ,QAAUpC,EAAc50E,EAAMtvI,YAC5CqI,KAAK49M,yBAAyB,kBAAmB32E,EAAMtvI,WAAY,CAAC,gBAEhEqI,KAAKm1D,SAAS8oJ,QAAQC,aACxBl+M,KAAKm1D,SAASlK,mBAAqBjrD,KAAKm1D,SAAS8oJ,QAAQC,YAG3DpC,EAAYnoN,KAAKqM,KAAMA,KAAKm1D,YAE7B8xE,EAAMi0E,UAAYnpK,GAAMp+C,KAAKxF,IAElCqvB,IAAK,WACH6+L,EAAW7+L,IAAMypH,EAAMzpH,IACvB4+L,EAAKprN,KAAKqrN,GAENr8M,KAAKm1D,SAAS5I,kBAAoB,aAAc8vJ,KAClDr8M,KAAK8D,QAAQ,OAAQ,CACnBmO,QAAS,uDAEXoqM,EAAWvqM,SAAW9R,KAAKm1D,SAAS5I,gBAIlC97D,IACF4rN,EAAWlpN,IAAM1C,GAGnB4rN,EAAW15G,SAAWU,EAElBlxC,IACFkqJ,EAAW9/M,IAAM41D,GAInBsqJ,EAAuB,EAEvBJ,EAAa,IAEfpf,QAAS,aAET3oF,OAAQ,WAEF2yB,EAAMn8E,SACRuxJ,EAAW/nG,OAAS+nG,EAAW/nG,QAAU,GACzC+nG,EAAW/nG,OAAO2yB,EAAM00E,YAAc10E,EAAM7mI,OAE5CJ,KAAKm1D,SAASm/C,OAASt0G,KAAKm1D,SAASm/C,QAAU,GAC/Ct0G,KAAKm1D,SAASm/C,OAAO2yB,EAAM00E,YAAc10E,EAAM7mI,SAGlD6mI,EAAMj4I,MAAM2E,KAAKxF,MAGfgX,EA9jBT,IAAeyX,EAAQijG,GAikBvB,IAAIx/G,EAASuc,EAAOjuB,UAiEpB,OA/DA0R,EAAOu9M,yBAA2B,SAAkCO,EAAYxmN,EAAYqmN,GAC1F,IAAII,EAAU,GACdJ,EAAS9qN,SAAQ,SAAUC,GACpBwE,EAAW7F,eAAeqB,IAC7BirN,EAAQptN,KAAKmC,MAIbirN,EAAQvuN,QACVmQ,KAAK8D,QAAQ,OAAQ,CACnBmO,QAASksM,EAAa,iCAAmCC,EAAQ1kN,KAAK,SAW5E2G,EAAOrP,KAAO,SAAc+sF,GAC1B/9E,KAAKm8M,WAAWnrN,KAAK+sF,IASvB19E,EAAOqR,IAAM,WAEX1R,KAAKm8M,WAAWnrN,KAAK,MACrBgP,KAAK8D,QAAQ,QAafzD,EAAO20D,UAAY,SAAmBz2D,GACpCyB,KAAKmrF,YAAYn2B,UAAUz2D,IAW7B8B,EAAO60D,aAAe,SAAsB32D,GAC1CyB,KAAKmrF,YAAYj2B,aAAa32D,IAGzBqe,EAnoBiB,CAooBxB4lD,I,iOCr/CF,SAASl0E,EAAQC,GAAmV,OAAtOD,EAArD,oBAAXE,QAAoD,kBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,oBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,GAAiBD,EAAQC,GAQnX,IAEIyE,EAAW,SAAkBzE,GAC/B,QAASA,GAAwB,WAAjBD,EAAQC,IAGtB8vN,EAAQ,SAASA,IACnB,IAAK,IAAI/tN,EAAO/C,UAAUsC,OAAQ4oG,EAAU,IAAIjoG,MAAMF,GAAOG,EAAO,EAAGA,EAAOH,EAAMG,IAClFgoG,EAAQhoG,GAAQlD,UAAUkD,GAG5B,OAAOgoG,EAAQ/sF,QAAO,SAAUlW,EAAQhC,GACtC,MAAwB,WAApBlF,EAAQkF,IAIZX,OAAOC,KAAKU,GAAQN,SAAQ,SAAUC,GAChC3C,MAAMY,QAAQoE,EAAOrC,KAAS3C,MAAMY,QAAQoC,EAAOL,IACrDqC,EAAOrC,GAAOqC,EAAOrC,GAAKjE,OAAOsE,EAAOL,IAC/BH,EAASwC,EAAOrC,KAASH,EAASQ,EAAOL,IAClDqC,EAAOrC,GAAOkrN,EAAM7oN,EAAOrC,GAAMK,EAAOL,IAExCqC,EAAOrC,GAAOK,EAAOL,MAThBqC,IAaR,KAGD8G,EAAS,SAAgBupC,GAC3B,OAAOhzC,OAAOC,KAAK+yC,GAAGtpC,KAAI,SAAUtB,GAClC,OAAO4qC,EAAE5qC,OAcTqjN,EAAU,SAAiBC,GAC7B,OAAOA,EAAM7yM,QAAO,SAAUzU,EAAGgF,GAC/B,OAAOhF,EAAE/H,OAAO+M,KACf,KAGD8L,EAAO,SAAcsQ,GACvB,IAAKA,EAAKxoB,OACR,MAAO,GAKT,IAFA,IAAI2F,EAAS,GAEJ5F,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAC/B4F,EAAOxE,KAAKqnB,EAAKzoB,IAGnB,OAAO4F,GAwBLgpN,EAAY,SAAmBnmM,EAAMomM,GACvC,IAAK,IAAI7uN,EAAI,EAAGA,EAAIyoB,EAAKxoB,OAAQD,IAC/B,GAAI6uN,EAAiBpmM,EAAKzoB,IACxB,OAAOA,EAIX,OAAQ,GAqBNmtB,EACwB,2BADxBA,EAEmB,sBAFnBA,EAGgB,mBAHhBA,EAIW,cAJXA,EAMwB,2BANxBA,EAO6B,gCA4B7B,EAAmB,SAA0B3M,GAC/C,IAAIsuM,EAAetuM,EAAK+qI,QACpBA,OAA2B,IAAjBujE,EAA0B,GAAKA,EACzCC,EAAcvuM,EAAK5c,OACnBA,OAAyB,IAAhBmrN,EAAyB,GAAKA,EACvCC,EAAaxuM,EAAKk6C,MAClBA,OAAuB,IAAfs0J,EAAwB,GAAKA,EACrCC,EAAkBzuM,EAAK0uM,WACvBA,OAAiC,IAApBD,EAA6B,GAAKA,EAC/C/zJ,EAAU,CACZttC,IAAKhqB,EACLg7D,YAAa,YAAW2sF,GAAW,GAAI3nJ,IAGzC,GAAI82D,GAASw0J,EAAY,CACvB,IAcIjvN,EAbAshB,GADWm5C,GAAgBw0J,GACTtlN,MAAM,KAExBulN,EAAa,IAAOhnJ,OAAS,IAAOA,OAAO5mD,EAAO,IAAMrD,SAASqD,EAAO,GAAI,IAC5E6tM,EAAW,IAAOjnJ,OAAS,IAAOA,OAAO5mD,EAAO,IAAMrD,SAASqD,EAAO,GAAI,IAE1E4tM,EAAaviN,OAAOspE,kBAA0C,kBAAfi5I,IACjDA,EAAaviN,OAAOuiN,IAGlBC,EAAWxiN,OAAOspE,kBAAwC,kBAAbk5I,IAC/CA,EAAWxiN,OAAOwiN,IAWE,kBALpBnvN,EADsB,kBAAbmvN,GAA+C,kBAAfD,EAChC,IAAOhnJ,OAAOinJ,GAAY,IAAOjnJ,OAAOgnJ,GAAc,IAAOhnJ,OAAO,GAEpEinJ,EAAWD,EAAa,IAGDlvN,EAAS2M,OAAOspE,mBAChDj2E,EAAS2M,OAAO3M,IAKlBi7D,EAAQ+M,UAAY,CAClBhoE,OAAQA,EACRmiE,OAAQ+sJ,GAIZ,OAAOj0J,GA4BLm0J,EAAiB,SAAwBC,GAK3C,OAJIA,GAAkC,kBAAdA,IACtBA,EAAYpxM,SAASoxM,EAAW,KAG9BjxM,MAAMixM,GACD,KAGFA,GAQLC,EAAe,CASjBC,OAAQ,SAAiBznN,GACvB,IAAIma,EAAWna,EAAWma,SACtButM,EAAwB1nN,EAAWi4F,UACnCA,OAAsC,IAA1ByvH,EAAmC,EAAIA,EACnDC,EAAiB3nN,EAAW2nN,eAC5BC,EAAiB5nN,EAAW4nN,eAC5BL,EAAYD,EAAetnN,EAAWunN,WACtClvJ,EAAkBl+C,EAAW89E,EAEjC,MAAyB,kBAAdsvH,EACF,CACLztM,MAAO,EACPC,IAAKwtM,GAIqB,kBAAnBK,EACF,CACL9tM,MAAO,EACPC,IAAK6tM,EAAiBvvJ,GAInB,CACLv+C,MAAO,EACPC,IAAK4tM,EAAiBtvJ,IAY1BwvJ,QAAS,SAAiB7nN,GACxB,IAAI8nN,EAAM9nN,EAAW8nN,IACjBjgJ,EAAe7nE,EAAW6nE,aAC1BkgJ,EAAwB/nN,EAAW+nN,sBACnCC,EAAyBhoN,EAAWi4F,UACpCA,OAAuC,IAA3B+vH,EAAoC,EAAIA,EACpD7tM,EAAWna,EAAWma,SACtB8tM,EAAwBjoN,EAAWkoN,YACnCA,OAAwC,IAA1BD,EAAmC,EAAIA,EACrDE,EAAwBnoN,EAAWmoE,oBACnCA,OAAgD,IAA1BggJ,EAAmC,EAAIA,EAC7DC,EAAwBpoN,EAAWqoN,qBACnCA,OAAiD,IAA1BD,EAAmCztL,IAAWytL,EACrEb,EAAYD,EAAetnN,EAAWunN,WAGtCpxN,GAAO2xN,EAAMjgJ,GAAgB,IAG7BygJ,EAAgBP,EAAwBG,EAGxCN,EADczxN,EAAMgyE,EACWmgJ,EAC/BC,EAAe9iN,KAAKiwE,KAAKkyI,EAAiB3vH,EAAY99E,GACtDquM,EAAiB/iN,KAAK8C,OAAOpS,EAAMmyN,EAAgBD,GAAwBpwH,EAAY99E,GACvFsuM,EAAehjN,KAAK8C,OAAOpS,EAAMmyN,GAAiBrwH,EAAY99E,GAClE,MAAO,CACLL,MAAOrU,KAAKC,IAAI,EAAG8iN,GACnBzuM,IAA0B,kBAAdwtM,EAAyBA,EAAY9hN,KAAKE,IAAI4iN,EAAcE,MAwD1EC,EAAkB,SAAyB1oN,GAC7C,IAAI3I,EAAO2I,EAAW3I,KAClB8iB,EAAWna,EAAWma,SACtBwuM,EAAyB3oN,EAAWi4F,UACpCA,OAAuC,IAA3B0wH,EAAoC,EAAIA,EACpDf,EAAiB5nN,EAAW4nN,eAC5BD,EAAiB3nN,EAAW2nN,eAE5BiB,EAAqBpB,EAAanwN,GAAM2I,GAIxCwzD,EA9VM,SAAe15C,EAAOC,GAGhC,IAFA,IAAIlc,EAAS,GAEJ5F,EAAI6hB,EAAO7hB,EAAI8hB,EAAK9hB,IAC3B4F,EAAOxE,KAAKpB,GAGd,OAAO4F,EAuVQ,CAHH+qN,EAAmB9uM,MACrB8uM,EAAmB7uM,KAEInV,IAxClB,SAAoB5E,GACnC,OAAO,SAAU48B,GACf,IAAIziB,EAAWna,EAAWma,SACtB0uM,EAAyB7oN,EAAWi4F,UACpCA,OAAuC,IAA3B4wH,EAAoC,EAAIA,EACpDX,EAAcloN,EAAWkoN,YACzBY,EAAwB9oN,EAAW+oN,YAEvC,MAAO,CACLnsL,aAF0C,IAA1BksL,EAAmC,EAAIA,GAEjClsL,EACtBziB,SAAUA,EAAW89E,EACrB+S,SAAUk9G,EACV9sL,KAAMwB,EAASziB,IA4BkB6uM,CAAWhpN,IAEhD,GAAa,WAAT3I,EAAmB,CACrB,IAAII,EAAQ+7D,EAASt7D,OAAS,EAE1B+wN,EAA4C,kBAAnBrB,EAA8BA,EAAiBD,EAE5En0J,EAAS/7D,GAAO0iB,SAAW8uM,EAAkB9uM,EAAW89E,EAAYxgG,EAGtE,OAAO+7D,GAcL01J,EAAmB,SAA0BlpN,GAC/C,IAAIwjJ,EAAUxjJ,EAAWwjJ,QACrB2lE,EAAwBnpN,EAAWopN,eACnCA,OAA2C,IAA1BD,EAAmC,GAAKA,EACzDxB,EAAiB3nN,EAAW2nN,eAC5B0B,EAAwBrpN,EAAWmnN,WACnCA,OAAuC,IAA1BkC,EAAmC,GAAKA,EACrDnB,EAAcloN,EAAWkoN,YACzBoB,EAAmBtpN,EAAWspN,iBAC9BC,EAAqBvpN,EAAW48B,OAChCA,OAAgC,IAAvB2sL,EAAgC,EAAIA,EAC7CpvM,EAAWna,EAAWma,SAE1B,IAAKqpI,EACH,MAAM,IAAIppJ,MAAMgrB,GAGlB,IAAI67C,EAAc,EAAiB,CACjCuiF,QAASA,EACT3nJ,OAAQutN,EAAeI,UACvB72J,MAAOy2J,EAAez2J,QAEpBQ,EAAU,EAAiB,CAC7BqwF,QAASA,EACT3nJ,OAAQ2nJ,EACR2jE,WAAYA,IAKd,GAHAh0J,EAAQvuD,IAAMq8D,EAGV9mD,EAAU,CACZ,IAAIsvM,EAAkBf,EAAgB1oN,GAElCypN,EAAgBvxN,SAClBi7D,EAAQh5C,SAAWsvM,EAAgB,GAAGtvM,SACtCg5C,EAAQ63C,SAAWy+G,EAAgB,GAAGz+G,eAE/B28G,IACTx0J,EAAQh5C,SAAWwtM,EACnBx0J,EAAQ63C,SAAWk9G,GASrB,OAFA/0J,EAAQm2J,iBAAmBA,GAAoBpB,EAC/C/0J,EAAQv2B,OAASA,EACV,CAACu2B,IAeNu2J,EAA8B,SAAmCx2J,EAAU4Q,EAAM0/E,GAEnF,IAmBI9tF,EAnBAuL,EAAc/N,EAAS4Q,KAAKl/D,IAAMsuD,EAAS4Q,KAAKl/D,IAAM,KAEtD+iN,EAAiBz0J,EAAS4Q,KAAK3pD,SAE/B6wF,EAAW93C,EAAS83C,UAAY,EAChC2+G,EAAgBz2J,EAAS4Q,KAAK5D,UAC9B0pJ,EAAUD,EAActvJ,OAASsvJ,EAAczxN,OAE/C+/F,EAAYn0B,EAAKm0B,UAEjB4xH,EAAkB/lJ,EAAKozI,WAAW78M,QAAO,SAAUsgD,GACrD,OAA2B,IAApBA,EAAE68J,iBAEPhkJ,EAAW,GACXn8D,EAAO67D,EAASoB,QAAU,SAAW,UACrC4zJ,EAAch1J,EAAS4Q,KAAKknC,SAC5Bs+G,EAAmBpB,EACnBtrL,EAASs2B,EAAS8B,eAAiB,EAKrCU,EAD8B,kBAArBoO,EAAKuzI,YACD,IAAOj3I,OAAOwpJ,GAAW9lJ,EAAKuzI,YAE9BuS,EAAU9lJ,EAAKuzI,YAG9B,IAAK,IAAIp/M,EAAI,EAAGA,EAAI4xN,EAAgB3xN,OAAQD,IAAK,CAC/C,IAAI2sF,EAAY9gB,EAAKozI,WAAWj/M,GAE5B4V,EAAO+2E,EAAU6yH,eAGjBt9L,EAAWyqE,EAAU8yH,mBAErB/hJ,OAAW,EAGbA,EADwB,kBAAfD,EACEA,EAAa,IAAO0K,OAAOvyD,GAAQ,IAAOuyD,OAAO,GAEjD1K,EAAa7nD,EAAO,EAGjC,IAaIslD,EAAU+1J,EAZG,CACf1lE,QAASA,EACTvrD,UAAWA,EACX+S,SAAUA,EACVk9G,YAAaA,EACboB,iBAAkBA,EAClB1sL,OAAQA,EACRziB,SAAUA,EACVwtM,eAAgBA,EAChBR,WAVezxJ,EAAa,IAAMC,EAWlCt+D,KAAMA,IAEmC,GAEvC4pE,IACF9N,EAAQvuD,IAAMq8D,GAGhBzN,EAASn6D,KAAK85D,GAGZuC,GADwB,kBAAfA,EACK,IAAO0K,OAAOvyD,GAEdA,EAGhBy7M,GAAoBnvM,EAAW89E,EAC/Br7D,IAIF,OADAs2B,EAASM,SAAWA,EACbN,GAGL42J,EAAwB,CAAC,QAAS,aAWlCC,EAA0B,SAAiC3hJ,GAC7D,OA3cyBw+I,EA2cZx+I,EA3cmB4hJ,EA2cH,SAAUvxM,GAErC,OADeA,EAAKuyF,UA3cfrmG,EAAOiiN,EAAM7yM,QAAO,SAAUC,EAAK0M,GAIxC,OAHAA,EAAKnlB,SAAQ,SAAUW,GACrB8X,EAAIg2M,EAAY9tN,IAAOA,KAElB8X,IACN,MAwcAk/B,MAAK,SAAUnvB,EAAG8lC,GACnB,OAAO9lC,EAAEinF,SAAWnhD,EAAEmhD,SAAW,GAAK,KA/c9B,IAAe47G,EAAOoD,GA8e9B,EAAyB,SAAgCxsJ,GAC3D,ICrlBwDnJ,EAAgB7qD,EDqlBpEygN,EAAsB,GAI1B,OCzlBwD51J,EDslBtCmJ,ECtlBsDh0D,EDslBrB,SAAUzJ,EAAY1I,EAAMixE,EAAOxrD,GACpFmtM,EAAsBA,EAAoB1yN,OAAOwI,EAAWy2D,WAAa,KAD/CszJ,ECrlBrBvuN,SAAQ,SAAUm9D,GACvB,IAAK,IAAIC,KAAYtE,EAAO2C,YAAY0B,GACtC,IAAK,IAAIE,KAAYvE,EAAO2C,YAAY0B,GAAWC,GAAW,CAC5D,IAAIE,EAAkBxE,EAAO2C,YAAY0B,GAAWC,GAAUC,GAC9DpvD,EAASqvD,EAAiBH,EAAWC,EAAUC,ODolB9CqxJ,GAWLC,EAAiC,SAAwCvgK,GAC3E,IAAIuJ,EAAWvJ,EAAMuJ,SACjB8B,EAAgBrL,EAAMqL,cAC1B9B,EAAS8B,cAAgBA,EACzB9B,EAASM,SAASj4D,SAAQ,SAAU43D,EAAS17D,GAC3C07D,EAAQv2B,OAASs2B,EAAS8B,cAAgBv9D,MAsI1C0yN,EAA6B,SAAoCrnH,GACnE,IAAIsnH,EAActnH,EAAMsnH,YACpBC,EAAcvnH,EAAMunH,YAoBpBC,EAAeF,EAAY5zJ,UAAUj/D,OAAO,EAAuB6yN,IACnEG,EAAeF,EAAY7zJ,UAAUj/D,OAAO,EAAuB8yN,IAavE,OANAA,EAAYjiJ,eAAiB2hJ,EAAwB,CAACK,EAAYhiJ,eAAgBiiJ,EAAYjiJ,iBAjJpE,SAA+BvS,GACzD,IAAIy0J,EAAez0J,EAAMy0J,aACrBC,EAAe10J,EAAM00J,aACrBniJ,EAAiBvS,EAAMuS,eAC3BmiJ,EAAahvN,SAAQ,SAAU23D,GAC7BA,EAASmwD,sBAAwBwjG,EAAUz+I,GAAgB,SAAU5Q,GAEnE,OADeA,EAAMwzC,WACD93C,EAAS83C,YAM/B,IAAI0H,EAvEmB,SAA8Bl8C,EAAWj+D,GAClE,IAAK,IAAIN,EAAI,EAAGA,EAAIu+D,EAAUt+D,OAAQD,IACpC,GAAIu+D,EAAUv+D,GAAG+H,WAAWwlN,OAASjtN,EACnC,OAAOi+D,EAAUv+D,GAIrB,OAAO,KAgEauyN,CAAqBF,EAAcp3J,EAASlzD,WAAWwlN,MAEzE,GAAK9yG,IAgBDx/C,EAAS4Q,KAAb,CAMA,IAAI2mJ,EAAkBv3J,EAASM,SAAS,GACpCk3J,EAA0B7D,EAAUn0G,EAAYl/C,UAAU,SAAUiH,GACtE,OAAOh1D,KAAK8sC,IAAIkoB,EAAW6uJ,iBAAmBmB,EAAgBnB,kBA5HnD,uBAkIb,IAAiC,IAA7BoB,EA8BF,OA7BAR,EAA+B,CAC7Bh3J,SAAUA,EACV8B,cAAe09C,EAAY19C,cAAgB09C,EAAYl/C,SAASt7D,SAElEg7D,EAASM,SAAS,GAAG2xB,eAAgB,EACrCjyB,EAASkwD,oBAAoBjqH,QAAQ,UAoBhCu5G,EAAYl/C,SAASt7D,QAAUg7D,EAAS83C,SAAW0H,EAAY1H,UAAY0H,EAAYl/C,SAASt7D,QAAUg7D,EAAS83C,SAAW0H,EAAYl/C,SAASk/C,EAAYl/C,SAASt7D,OAAS,GAAG8yG,WACvL93C,EAASmwD,yBAiBY3Q,EAAYl/C,SAASk3J,GAEvBvlI,gBAAkBslI,EAAgBtlI,gBACvDslI,EAAgBtlI,eAAgB,EAChCjyB,EAASkwD,oBAAoBjqH,QAAQ,GACrC+5D,EAASmwD,yBAGX6mG,EAA+B,CAC7Bh3J,SAAUA,EACV8B,cAAe09C,EAAYl/C,SAASk3J,GAAyB9tL,aA+CjE+tL,CAAsB,CACpBL,aAAcA,EACdC,aAAcA,EACdniJ,eAAgBiiJ,EAAYjiJ,iBAEvBiiJ,GAGLO,EAAkB,SAAyB9mJ,GAC7C,OAAOA,GAAQA,EAAKj+C,IAAM,KAjlBuBq6C,EAilBC4D,EAAK5D,UA3kBrDmnJ,EAD8B,kBAArBnnJ,EAAU7F,QAAmD,kBAArB6F,EAAUhoE,OAChD,IAAOkoE,OAAOF,EAAU7F,QAAU,IAAO+F,OAAOF,EAAUhoE,QAAU,IAAOkoE,OAAO,GAElFF,EAAU7F,OAAS6F,EAAUhoE,OAAS,EAG5CgoE,EAAU7F,OAAS,IAAMgtJ,GAXV,IAA2BnnJ,EAG7CmnJ,GAilBFwD,EAA8B,SAAqCr0J,GAuCrE,OAtCsB7xD,EAAO6xD,EAAUziD,QAAO,SAAUC,EAAKk/C,GAI3D,IAAI36D,EAAO26D,EAASlzD,WAAW8R,IAAMohD,EAASlzD,WAAW43L,MAAQ,IAEjE,GAAK5jL,EAAIzb,GAIF,CAGH,IAAIuyN,EADN,GAAI53J,EAASM,SAIPN,EAASM,SAAS,KACpBN,EAASM,SAAS,GAAG2xB,eAAgB,IAGtC2lI,EAAqB92M,EAAIzb,GAAMi7D,UAAUn6D,KAAKuC,MAAMkvN,EAAoB53J,EAASM,UAKhFN,EAASlzD,WAAW+5H,oBACtB/lH,EAAIzb,GAAMyH,WAAW+5H,kBAAoB7mE,EAASlzD,WAAW+5H,wBAlB/D/lH,EAAIzb,GAAQ26D,EACZl/C,EAAIzb,GAAMyH,WAAWooE,eAAiB,GA2BxC,OANAp0D,EAAIzb,GAAMyH,WAAWooE,eAAe/uE,KAAK,CAGvCygB,MAAOo5C,EAASlzD,WAAWkoN,YAC3Bl9G,SAAU93C,EAASlzD,WAAWkoN,cAEzBl0M,IACN,KACoBpP,KAAI,SAAUsuD,GAnwBrB,IAAqB/yC,EAAG3kB,EAqwBtC,OADA03D,EAASkwD,qBApwB0BjjG,EAowBQ+yC,EAASM,UAAY,GApwB1Bh4D,EAowB8B,gBAnwB/D2kB,EAAEpM,QAAO,SAAUgQ,EAAGznB,EAAGrE,GAK9B,OAJIqE,EAAEd,IACJuoB,EAAE1qB,KAAKpB,GAGF8rB,IACN,KA8vBMmvC,MAIP,EAA4B,SAAmCA,EAAUsS,GAC3E,IAAIF,EAAUslJ,EAAgB13J,EAAS4Q,MACnCinJ,EAAYzlJ,GAAWE,EAAYF,IAAYE,EAAYF,GAASxB,KAMxE,OAJIinJ,GACFrB,EAA4Bx2J,EAAU63J,EAAW73J,EAAS4Q,KAAKjN,aAG1D3D,GAGL83J,EAA6B,SAAoCx0J,EAAWgP,GAK9E,QAJoB,IAAhBA,IACFA,EAAc,KAGXtqE,OAAOC,KAAKqqE,GAAattE,OAC5B,OAAOs+D,EAGT,IAAK,IAAIv+D,KAAKu+D,EACZA,EAAUv+D,GAAK,EAA0Bu+D,EAAUv+D,GAAIutE,GAGzD,OAAOhP,GAoMLy0J,EAAsB,SAA6Bp1J,GACrD,IAAIq1J,EAEAlrN,EAAa61D,EAAM71D,WACnBwzD,EAAWqC,EAAMrC,SACjBsQ,EAAOjO,EAAMiO,KACbs/C,EAAsBvtD,EAAMutD,oBAC5BlwD,EAAW,CACblzD,YAAakrN,EAAe,CAC1B1F,KAAMxlN,EAAW8R,GACjBilD,MAAO,QACPuzD,UAAW,OACXtiB,WAAY,CACVvkG,MAAOzD,EAAWyD,MAClBD,OAAQxD,EAAWwD,QAErB4zD,OAAQp3D,EAAWmmG,OACnBzvC,UAAW12D,EAAWs4D,WACrB4yJ,EAAa,cAAgB,EAAGA,GACnCrlM,IAAK,GACLyuC,QAA6B,WAApBt0D,EAAW3I,KACpB2zG,SAAUhrG,EAAWkoN,YACrBrxJ,YAAa,GACbjC,eAAgB50D,EAAWma,SAC3BipG,oBAAqBA,EACrBh7C,eAAgBpoE,EAAWooE,eAC3B5U,SAAUA,GAWZ,OARIxzD,EAAW+5H,oBACb7mE,EAAS6mE,kBAAoB/5H,EAAW+5H,mBAGtCj2D,IACF5Q,EAAS4Q,KAAOA,GAGX5Q,GAGLi4J,EAAY,SAAmB3zJ,GACjC,IAAIx3D,EAAaw3D,EAAMx3D,WACvB,MAA+B,cAAxBA,EAAWglK,UAAoD,eAAxBhlK,EAAWglK,UAAwD,UAA3BhlK,EAAWg1L,aAG/FltF,EAAY,SAAmBhF,GACjC,IAAI9iG,EAAa8iG,EAAM9iG,WACvB,MAA+B,cAAxBA,EAAWglK,UAAoD,eAAxBhlK,EAAWglK,UAAwD,UAA3BhlK,EAAWg1L,aAG/Fo2B,EAAU,SAAiBhoH,GAC7B,IAAIpjG,EAAaojG,EAAMpjG,WACvB,MAA+B,aAAxBA,EAAWglK,UAAsD,SAA3BhlK,EAAWg1L,aA+DtDq2B,EAA6B,SAAoCC,GACnE,OAAKA,EAIEpwN,OAAOC,KAAKmwN,GAAkBv3M,QAAO,SAAUC,EAAK8I,GACzD,IAAIyuM,EAAgBD,EAAiBxuM,GACrC,OAAO9I,EAAIzc,OAAOg0N,EAAc/0J,aAC/B,IANM,IASPg1J,EAAS,SAAgBvnH,GAC3B,IAAIwnH,EAEAC,EAAgBznH,EAAMynH,cACtBjjJ,EAAYw7B,EAAMx7B,UAClBkjJ,EAAoB1nH,EAAMz+B,YAC1BA,OAAoC,IAAtBmmJ,EAA+B,GAAKA,EAClD7jJ,EAAmBm8B,EAAMn8B,iBAE7B,IAAK4jJ,EAAcxzN,OACjB,MAAO,GAIT,IAAI0zN,EAAwBF,EAAc,GAAG1rN,WACzCma,EAAWyxM,EAAsBjE,eACjCtwN,EAAOu0N,EAAsBv0N,KAC7Bk9D,EAA6Bq3J,EAAsBr3J,2BACnD4T,EAAsByjJ,EAAsBzjJ,oBAC5C0jJ,EAAiBhB,EAA4Ba,EAAcrxN,OAAO8wN,IAAYvmN,IAAIqmN,GAClFa,EAAiBjB,EAA4Ba,EAAcrxN,OAAOytG,IAClEikH,EAAelB,EAA4Ba,EAAcrxN,OAAO+wN,IAChEzoM,EAAW+oM,EAAc9mN,KAAI,SAAUsuD,GACzC,OAAOA,EAASlzD,WAAW03E,mBAC1Br9E,OAAO6D,SACNs/D,EAAW,CACbonJ,YAAY,EACZxhG,oBAAqB,GACrB5vD,SAAU,GACVc,SAAS,EACT0C,aAAcy0J,EAAe,CAC3B10J,MAAO,GACPi1J,MAAO,IACNP,EAAa,mBAAqB,GAAIA,EAAanhG,UAAY,GAAImhG,GACtE5lM,IAAK,GACL1L,SAAUA,EACVq8C,UAAWw0J,EAA2Ba,EAAgBrmJ,IAGpD2C,GAAuB,IACzB3K,EAAS2K,oBAA4C,IAAtBA,GAG7BM,IACFjL,EAASiL,UAAYA,GAGV,YAATpxE,IACFmmE,EAASjJ,2BAA6BA,GAGxC,IA3F2DiC,EAAW4R,EA2FlElR,EAA4C,IAA9BsG,EAAShH,UAAUt+D,OACjC+zN,EAAsBH,EAAe5zN,OA1Rd,SAAgCs+D,EAAWgP,EAAatO,GASnF,IAAIyjE,OARgB,IAAhBn1D,IACFA,EAAc,SAGI,IAAhBtO,IACFA,GAAc,GAIhB,IAAIg1J,EAAqB11J,EAAUziD,QAAO,SAAUgQ,EAAGmvC,GACrD,IAAIx2C,EAAOw2C,EAASlzD,WAAW0c,MAAQw2C,EAASlzD,WAAW0c,KAAK5gB,OAAS,GACrEoX,EAAWggD,EAASlzD,WAAW43L,MAAQ,GACvC96K,EAAQo2C,EAASlzD,WAAW8c,OAAS,OAEzC,GAAI5J,IAAaggD,EAASlzD,WAAW8c,MAAO,CAC1C,IAAIqvM,EAAYzvM,EAAO,KAAOA,EAAO,IAAM,GAC3CI,EAAQ,GAAKo2C,EAASlzD,WAAW43L,KAAOu0B,EAGrCpoM,EAAEjH,KACLiH,EAAEjH,GAAS,CACT5J,SAAUA,EACV83G,YAAY,EACZwa,QAAkB,SAAT9oH,EACT85C,UAAW,GACX3wC,IAAK,KAIT,IAAIumM,EAAY,EAvHM,SAA6B3zM,EAAMy+C,GAC3D,IAAIm1J,EAEArsN,EAAayY,EAAKzY,WAClBwzD,EAAW/6C,EAAK+6C,SAChBsQ,EAAOrrD,EAAKqrD,KACZ9O,EAAgBv8C,EAAKu8C,cACrBquD,EAAwB5qG,EAAK4qG,sBAC7BD,EAAsB3qG,EAAK2qG,oBAC3BlwD,EAAW,CACblzD,YAAaqsN,EAAc,CACzB7G,KAAMxlN,EAAW8R,GACjB4kD,UAAW12D,EAAWs4D,UACtBlB,OAAQp3D,EAAWmmG,QAClBkmH,EAAY,cAAgB,EAAGA,GAClCxmM,IAAK,GACLyuC,QAA6B,WAApBt0D,EAAW3I,KACpB2zG,SAAUhrG,EAAWkoN,YACrBrxJ,YAAa,GACbjC,eAAgB50D,EAAWma,SAC3BkpG,sBAAuBA,EACvBD,oBAAqBA,EACrBh7C,eAAgBpoE,EAAWooE,eAC3BpT,cAAeA,EACfxB,SAAUA,GAgBZ,OAbIxzD,EAAW+5H,oBACb7mE,EAAS6mE,kBAAoB/5H,EAAW+5H,mBAGtCj2D,IACF5Q,EAAS4Q,KAAOA,GAGd5M,IACFhE,EAASlzD,WAAW+2D,MAAQ,QAC5B7D,EAASlzD,WAAWsqH,UAAY,QAG3Bp3D,EA+EqCo5J,CAAoBp5J,EAAUgE,GAAcsO,GAQtF,OAPAzhD,EAAEjH,GAAO05C,UAAUn9D,KAAK+yN,GAEI,qBAAjBzxF,GAAyC,SAATj+G,KACzCi+G,EAAeznE,GACFsyE,SAAU,GAGlBzhH,IACN,IAOH,OALK42G,IAEHuxF,EADiBhxN,OAAOC,KAAK+wN,GAAoB,IAClB1mF,SAAU,GAGpC0mF,EA4O2CK,CAAuBT,EAAgBtmJ,EAAatO,GAAe,KACjHs1J,EAAoBT,EAAa7zN,OA1OZ,SAA8Bs+D,EAAWgP,GAKlE,YAJoB,IAAhBA,IACFA,EAAc,IAGThP,EAAUziD,QAAO,SAAUgQ,EAAGmvC,GACnC,IAAIp2C,EAAQo2C,EAASlzD,WAAW43L,MAAQ,OAaxC,OAXK7zK,EAAEjH,KACLiH,EAAEjH,GAAS,CACT5J,SAAU4J,EACV0oH,SAAS,EACTxa,YAAY,EACZx0D,UAAW,GACX3wC,IAAK,KAIT9B,EAAEjH,GAAO05C,UAAUn9D,KAAK,EAjHJ,SAA2BswD,GACjD,IAAI8iK,EAEAzsN,EAAa2pD,EAAM3pD,WACnBwzD,EAAW7J,EAAM6J,SACjBwB,EAAgBrL,EAAMqL,cACtBouD,EAAsBz5D,EAAMy5D,oBAC5BC,EAAwB15D,EAAM05D,sBAEV,qBAAb7vD,IAETA,EAAW,CAAC,CACV3tC,IAAK7lB,EAAWwjJ,QAChBx4C,SAAUhrG,EAAWkoN,YACrBrxJ,YAAa72D,EAAWwjJ,SAAW,GACnCrpI,SAAUna,EAAW2nN,eACrB/qL,OAAQ,IAGV58B,EAAWma,SAAWna,EAAW2nN,gBAGnC,IAAI+E,IAAkBD,EAAkB,CACtCjH,KAAMxlN,EAAW8R,GACjB4kD,UAAW12D,EAAWs4D,YACL,cAAgB,EAAGm0J,GAMtC,OAJIzsN,EAAWmmG,SACbumH,EAAet1J,OAASp3D,EAAWmmG,QAG9B,CACLnmG,WAAY0sN,EACZ7mM,IAAK,GACLyuC,QAA6B,WAApBt0D,EAAW3I,KACpB2zG,SAAUhrG,EAAWkoN,YACrBrxJ,YAAa72D,EAAWwjJ,SAAW,GACnC5uF,eAAgB50D,EAAWma,SAC3BiuD,eAAgBpoE,EAAWooE,eAC3Bg7C,oBAAqBA,EACrBC,sBAAuBA,EACvBruD,cAAeA,EACfxB,SAAUA,GAuEwCm5J,CAAkBz5J,GAAWsS,IACxEzhD,IACN,IAsN2C6oM,CAAqBb,EAAcvmJ,GAAe,KAC5F0mJ,EAAqBL,EAAet0N,OAAO8zN,EAA2BY,GAAsBZ,EAA2BmB,IACvHK,EAAyBX,EAAmBtnN,KAAI,SAAUk/F,GAE5D,OADqBA,EAAM17B,kBAkB7B,OAfA5K,EAAS4K,eAAiB2hJ,EAAwB8C,GAnGSr2J,EAoGpC01J,EApG+C9jJ,EAoG3B5K,EAAS4K,eAlGpD5R,EAAUj7D,SAAQ,SAAU23D,GAC1BA,EAAS8B,cAAgB,EACzB9B,EAASmwD,sBAAwBwjG,EAAUz+I,GAAgB,SAAUk7B,GAEnE,OADeA,EAAM0H,WACD93C,EAAS83C,YAG1B93C,EAASM,UAIdN,EAASM,SAASj4D,SAAQ,SAAU43D,EAAS17D,GAC3C07D,EAAQv2B,OAASnlC,QAwFjBw0N,IACFzuJ,EAASxG,YAAYD,MAAMvuC,MAAQyjM,GAGjCO,IACFhvJ,EAASxG,YAAYszD,UAAUwiG,KAAON,GAGpC7pM,EAASzqB,SACXslE,EAASxG,YAAY,mBAAmB2gB,GAA6Bh1D,EApOhD5O,QAAO,SAAUg5M,EAAQC,GAC9C,OAAKA,GAILA,EAAIzxN,SAAQ,SAAUmhF,GACpB,IAAI64E,EAAU74E,EAAQ64E,QAClBriJ,EAAWwpE,EAAQxpE,SACvB65M,EAAO75M,GAAY,CACjB83G,YAAY,EACZwa,SAAS,EACTjuB,WAAYg+C,EACZriJ,SAAUA,GAGRwpE,EAAQviF,eAAe,iBACzB4yN,EAAO75M,GAAU0sC,YAAc88B,EAAQ98B,aAGrC88B,EAAQviF,eAAe,gBACzB4yN,EAAO75M,GAAU+5M,WAAavwI,EAAQuwI,YAGpCvwI,EAAQviF,eAAe,QACzB4yN,EAAO75M,GAAU,MAAQwpE,EAAQ,UAG9BqwI,GAzBEA,IA0BR,KA2MCjlJ,EACKqiJ,EAA2B,CAChCC,YAAatiJ,EACbuiJ,YAAa7sJ,IAIVA,GAmBL0vJ,EAAgB,SAAuBltN,EAAYo7B,EAAMjhB,GAC3D,IAAI2tM,EAAM9nN,EAAW8nN,IACjBjgJ,EAAe7nE,EAAW6nE,aAC1BkgJ,EAAwB/nN,EAAW+nN,sBACnCL,EAAwB1nN,EAAWi4F,UACnCA,OAAsC,IAA1ByvH,EAAmC,EAAIA,EACnDO,EAAwBjoN,EAAWkoN,YACnCA,OAAwC,IAA1BD,EAAmC,EAAIA,EACrDE,EAAwBnoN,EAAWmoE,oBAKnCy/I,GAHOE,EAAMjgJ,GAAgB,UADmB,IAA1BsgJ,EAAmC,EAAIA,IAE7CJ,EAAwBG,GAG5C,OAAOziN,KAAKiwE,MAAMkyI,EAAiB3vH,EAAY78D,GAAQjhB,IAiBrDgzM,EAAkB,SAAyBntN,EAAY2rG,GAezD,IAdA,IAAIt0G,EAAO2I,EAAW3I,KAClB+1N,EAAyBptN,EAAWmoE,oBACpCA,OAAiD,IAA3BilJ,EAAoC,EAAIA,EAC9DC,EAAoBrtN,EAAWkmD,MAC/BA,OAA8B,IAAtBmnK,EAA+B,GAAKA,EAC5C1F,EAAiB3nN,EAAW2nN,eAC5BK,EAAyBhoN,EAAWi4F,UACpCA,OAAuC,IAA3B+vH,EAAoC,EAAIA,EACpDc,EAAwB9oN,EAAW+oN,YACnCA,OAAwC,IAA1BD,EAAmC,EAAIA,EACrD99G,EAAWhrG,EAAWkoN,YACtB10J,EAAW,GACXp4B,GAAQ,EAEHkyL,EAAS,EAAGA,EAAS3hH,EAAgBzzG,OAAQo1N,IAAU,CAC9D,IAAI1pF,EAAIj4B,EAAgB2hH,GACpBnzM,EAAWypH,EAAEp9C,EACb+4C,EAASqE,EAAEjpF,GAAK,EAChB4yK,EAAc3pF,EAAE13H,GAAK,EAErBkvB,EAAO,IAETA,EAAOmyL,GAGLA,GAAeA,EAAcnyL,IAqB/BA,EAAOmyL,GAGT,IAAIr5J,OAAQ,EAEZ,GAAIqrE,EAAS,EAAG,CACd,IAAIiuF,EAAQF,EAAS,EAKjBp5J,EAHAs5J,IAAU7hH,EAAgBzzG,OAEf,YAATb,GAAsB8wE,EAAsB,GAAKjiB,EAAMxuD,QAAQ,YAAc,EACvEw1N,EAAcltN,EAAYo7B,EAAMjhB,IAG/BwtM,EAAiB1vH,EAAY78D,GAAQjhB,GAGvCwxF,EAAgB6hH,GAAOthN,EAAIkvB,GAAQjhB,OAG9C+5C,EAAQqrE,EAAS,EAMnB,IAHA,IAAIxlH,EAAMgvM,EAAcv1J,EAASt7D,OAASg8D,EACtCt3B,EAASmsL,EAAcv1J,EAASt7D,OAE7B0kC,EAAS7iB,GACdy5C,EAASn6D,KAAK,CACZujC,OAAQA,EACRziB,SAAUA,EAAW89E,EACrB78D,KAAMA,EACN4vE,SAAUA,IAEZ5vE,GAAQjhB,EACRyiB,IAIJ,OAAO42B,GAGLi6J,EAAoB,kCAyFpBC,EAAuB,SAA8B7pM,EAAKlf,GAC5D,OAAOkf,EAAInT,QAAQ+8M,EApDO,SAA+B9oN,GACzD,OAAO,SAAUnI,EAAOgqN,EAAYziI,EAAQtgF,GAC1C,GAAc,OAAVjH,EAEF,MAAO,IAGT,GAAkC,qBAAvBmI,EAAO6hN,GAChB,OAAOhqN,EAGT,IAAIV,EAAQ,GAAK6I,EAAO6hN,GAExB,MAAmB,qBAAfA,EAEK1qN,GAMP2H,EAHGsgF,EAGK5tE,SAAS1S,EAAO,IAFhB,EAKN3H,EAAM5D,QAAUuL,EACX3H,EAGF,GAAK,IAAIjD,MAAM4K,EAAQ3H,EAAM5D,OAAS,GAAG6J,KAAK,KAAOjG,IAwBxB6xN,CAAsBhpN,KAiD1D,EAAuB,SAA8B3E,EAAY2rG,GACnE,IAAIiiH,EAAiB,CACnBC,iBAAkB7tN,EAAW8R,GAC7Bg8M,UAAW9tN,EAAWs4D,WAAa,GAEjC6wJ,EAAwBnpN,EAAWopN,eACnCA,OAA2C,IAA1BD,EAAmC,CACtDK,UAAW,GACX72J,MAAO,IACLw2J,EACA4E,EAAa,EAAiB,CAChCvqE,QAASxjJ,EAAWwjJ,QACpB3nJ,OAAQ6xN,EAAqBtE,EAAeI,UAAWoE,GACvDj7J,MAAOy2J,EAAez2J,QAEpBa,EA/CkB,SAA2BxzD,EAAY2rG,GAC7D,OAAK3rG,EAAWma,UAAawxF,EAWzB3rG,EAAWma,SACNuuM,EAAgB1oN,GAGlBmtN,EAAgBntN,EAAY2rG,GAZ1B,CAAC,CACN/uE,OAAQ58B,EAAW+oN,aAAe,EAClC5uM,SAAUna,EAAW2nN,eACrBvsL,KAAM,EACN4vE,SAAUhrG,EAAWkoN,cAuCV8F,CAAkBhuN,EAAY2rG,GAC7C,OAAOn4C,EAAS5uD,KAAI,SAAUuuD,GAC5By6J,EAAe/oN,OAASsuD,EAAQv2B,OAChCgxL,EAAeK,KAAO96J,EAAQ/3B,KAC9B,IAAIvV,EAAM6nM,EAAqB1tN,EAAWkmD,OAAS,GAAI0nK,GAGnD31H,EAAYj4F,EAAWi4F,WAAa,EAEpCi2H,EAAyBluN,EAAWkuN,wBAA0B,EAC9D5E,EAEJtpN,EAAWkoN,aAAe/0J,EAAQ/3B,KAAO8yL,GAA0Bj2H,EAUnE,MATU,CACRpyE,IAAKA,EACLmlF,SAAU73C,EAAQ63C,SAClB7wF,SAAUg5C,EAAQh5C,SAClB08C,YAAa,YAAW72D,EAAWwjJ,SAAW,GAAI39H,GAClDjhB,IAAKmpN,EACLnxL,OAAQu2B,EAAQv2B,OAChB0sL,iBAAkBA,OAkDpB6E,EAAmB,SAA0BnuN,EAAY2rG,GAC3D,IAAIxxF,EAAWna,EAAWma,SACtBi0M,EAAwBpuN,EAAWquN,YACnCA,OAAwC,IAA1BD,EAAmC,GAAKA,EACtDlG,EAAcloN,EAAWkoN,YAG7B,IAAK/tM,IAAawxF,GAAmBxxF,GAAYwxF,EAC/C,MAAM,IAAIvxG,MAAMgrB,GAGlB,IAGIqkM,EAHA6E,EAAgBD,EAAYzpN,KAAI,SAAU2pN,GAC5C,OA5C4B,SAAmCvuN,EAAYwuN,GAC7E,IAAIhrE,EAAUxjJ,EAAWwjJ,QACrB2lE,EAAwBnpN,EAAWopN,eACnCA,OAA2C,IAA1BD,EAAmC,GAAKA,EACzDloJ,EAAc,EAAiB,CACjCuiF,QAASA,EACT3nJ,OAAQutN,EAAeI,UACvB72J,MAAOy2J,EAAez2J,QAEpBQ,EAAU,EAAiB,CAC7BqwF,QAASA,EACT3nJ,OAAQ2yN,EAAWtoK,MACnByM,MAAO67J,EAAWC,aAGpB,OADAt7J,EAAQvuD,IAAMq8D,EACP9N,EA6BEu7J,CAA0B1uN,EAAYuuN,MAgC/C,OA5BIp0M,IACFsvM,EAAkBf,EAAgB1oN,IAGhC2rG,IACF89G,EAAkB0D,EAAgBntN,EAAY2rG,IAGjC89G,EAAgB7kN,KAAI,SAAU2oN,EAAa91N,GACxD,GAAI62N,EAAc72N,GAAQ,CACxB,IAAI07D,EAAUm7J,EAAc72N,GAGxBwgG,EAAYj4F,EAAWi4F,WAAa,EAEpCi2H,EAAyBluN,EAAWkuN,wBAA0B,EAKlE,OAJA/6J,EAAQ63C,SAAWuiH,EAAYviH,SAC/B73C,EAAQh5C,SAAWozM,EAAYpzM,SAC/Bg5C,EAAQv2B,OAAS2wL,EAAY3wL,OAC7Bu2B,EAAQm2J,iBAAmBpB,GAAeqF,EAAYnyL,KAAO8yL,GAA0Bj2H,EAChF9kC,MAKR94D,QAAO,SAAU84D,GAClB,OAAOA,MAKPw7J,EAAmB,SAA0Bl2M,GAC/C,IAEIm2M,EACAC,EAHA7uN,EAAayY,EAAKzY,WAClBi8F,EAAcxjF,EAAKwjF,YAInBA,EAAYmuF,UACdykC,EAAa,EACbD,EAAoBlI,EAAM1mN,EAAYi8F,EAAYmuF,WACzCnuF,EAAYipB,MACrB2pG,EAAa3F,EACb0F,EAAoBlI,EAAM1mN,EAAYi8F,EAAYipB,OACzCjpB,EAAYv7E,OACrBmuM,EAAaV,EACbS,EAAoBlI,EAAM1mN,EAAYi8F,EAAYv7E,OAGpD,IAAIouM,EAAe,CACjB9uN,WAAYA,GAGd,IAAK6uN,EACH,OAAOC,EAGT,IAAIt7J,EAAWq7J,EAAWD,EAAmB3yH,EAAY0P,iBAIzD,GAAIijH,EAAkBz0M,SAAU,CAC9B,IAAI40M,EAAqBH,EACrBz0M,EAAW40M,EAAmB50M,SAC9B60M,EAAwBD,EAAmB92H,UAC3CA,OAAsC,IAA1B+2H,EAAmC,EAAIA,EACvDJ,EAAkBz0M,SAAWA,EAAW89E,OAC/BzkC,EAASt7D,OAGlB02N,EAAkBz0M,SAAWq5C,EAASz/C,QAAO,SAAUrO,EAAKytD,GAC1D,OAAO1tD,KAAKC,IAAIA,EAAKD,KAAKiwE,KAAKviB,EAAQh5C,aACtC,GAEHy0M,EAAkBz0M,SAAW,EAW/B,OARA20M,EAAa9uN,WAAa4uN,EAC1BE,EAAat7J,SAAWA,EAEpByoC,EAAYipB,MAAQ0pG,EAAkBzH,aACxC2H,EAAahrJ,KAAOtQ,EAAS,GAC7Bs7J,EAAat7J,SAAW,IAGnBs7J,GAOLG,EAAe,SAAsB/tN,EAAS3I,GAChD,OAAO6X,EAAKlP,EAAQ0yC,YAAYv5C,QAAO,SAAUoe,GAE/C,OADcA,EAAK3Y,UACAvH,MAInB22N,EAAa,SAAoBhuN,GACnC,OAAOA,EAAQX,YAAYvB,QAGzBmwN,EAAgB,SAAuBpwN,GACzC,IAOIvC,EADgB,+EACMK,KAAKkC,GAE/B,IAAKvC,EACH,OAAO,EAGT,IAAI4yN,EAAe5yN,EAAM7E,MAAM,GAC3B82L,EAAO2gC,EAAa,GACpBt/B,EAAQs/B,EAAa,GACrBn3D,EAAMm3D,EAAa,GACnBC,EAAOD,EAAa,GACpBE,EAASF,EAAa,GACtBG,EAASH,EAAa,GAE1B,OArBsB,QAqBfryN,WAAW0xL,GAAQ,GApBH,OAoB0B1xL,WAAW+yL,GAAS,GAnBhD,MAmBwE/yL,WAAWk7J,GAAO,GAlBzF,KAkB+Gl7J,WAAWsyN,GAAQ,GAjBnI,GAiB0JtyN,WAAWuyN,GAAU,GAAsBvyN,WAAWwyN,GAAU,IAgB7OC,EAAU,CAUZC,0BAA2B,SAAmC3zN,GAC5D,OAAOqzN,EAAcrzN,IAavBisN,sBAAuB,SAA+BjsN,GACpD,MAnCc,oCAGFtC,KANmBuF,EAsCdjD,KA/BjBiD,GAAO,KAGF7I,KAAKsvB,MAAMzmB,GA4BU,IAtCd,IAAmBA,GAkDjCopE,oBAAqB,SAA6BrsE,GAChD,OAAOqzN,EAAcrzN,IAYvBy4D,2BAA4B,SAAoCz4D,GAC9D,OAAOqzN,EAAcrzN,IAYvBzE,KAAM,SAAcyE,GAClB,OAAOA,GAYTusN,qBAAsB,SAA8BvsN,GAClD,OAAOqzN,EAAcrzN,IAYvBge,MAAO,SAAehe,GACpB,OAAOqzN,EAAcrzN,IAWvB2H,MAAO,SAAe3H,GACpB,OAAOqa,SAASra,EAAO,KAWzB0H,OAAQ,SAAgB1H,GACtB,OAAOqa,SAASra,EAAO,KAWzBw8D,UAAW,SAAmBx8D,GAC5B,OAAOqa,SAASra,EAAO,KAWzBitN,YAAa,SAAqBjtN,GAChC,OAAOqa,SAASra,EAAO,KAWzBm8F,UAAW,SAAmBn8F,GAC5B,OAAOqa,SAASra,EAAO,KAYzBoyN,uBAAwB,SAAgCpyN,GACtD,OAAOqa,SAASra,EAAO,KAezBqe,SAAU,SAAkBre,GAC1B,IAAI4zN,EAAcv5M,SAASra,EAAO,IAElC,OAAIwa,MAAMo5M,GACDP,EAAcrzN,GAGhB4zN,GAWTlpI,EAAG,SAAW1qF,GACZ,OAAOqa,SAASra,EAAO,KAYzBoQ,EAAG,SAAWpQ,GACZ,OAAOqa,SAASra,EAAO,KAYzB6+C,EAAG,SAAW7+C,GACZ,OAAOqa,SAASra,EAAO,KAYzB5B,QAAS,SAAiB4B,GACxB,OAAOA,IAaPonN,EAAkB,SAAyBhnN,GAC7C,OAAMA,GAAMA,EAAG8D,WAIRoQ,EAAKlU,EAAG8D,YAAY+T,QAAO,SAAUgQ,EAAGznB,GAC7C,IAAIqzN,EAAUH,EAAQlzN,EAAE/D,OAASi3N,EAAQt1N,QAEzC,OADA6pB,EAAEznB,EAAE/D,MAAQo3N,EAAQrzN,EAAER,OACfioB,IACN,IAPM,IAUP6rM,GAAgB,CAClB,gDAAiD,kBACjD,gDAAiD,qBACjD,gDAAiD,0BACjD,gDAAiD,uBAa/C,GAAgB,SAAuBC,EAAeC,GACxD,OAAKA,EAAgB53N,OAIdyuN,EAAQkJ,EAAcjrN,KAAI,SAAUggF,GACzC,OAAOkrI,EAAgBlrN,KAAI,SAAUmrN,GACnC,OAAO,YAAWnrI,EAAWsqI,EAAWa,WALnCF,GAiCPG,GAAwB,SAA+BC,GACzD,IAAIC,EAAkBjB,EAAagB,EAAe,mBAAmB,GACjEE,EAAclB,EAAagB,EAAe,eAAe,GACzD5B,EAAc8B,GAAelB,EAAakB,EAAa,cAAcvrN,KAAI,SAAU21B,GACrF,OAAOmsL,EAAM,CACXlkN,IAAK,cACJ0gN,EAAgB3oL,OAEjB61L,EAAcnB,EAAagB,EAAe,eAAe,GACzDI,EAA4BF,GAAeD,EAC3CvkH,EAAkB0kH,GAA6BpB,EAAaoB,EAA2B,mBAAmB,GAC1GC,EAAkCH,GAAeC,GAAeF,EAChEK,EAAwBD,GAAmCrB,EAAaqB,EAAiC,kBAAkB,GAM3HlmC,EAAW8lC,GAAmBhN,EAAgBgN,GAE9C9lC,GAAYmmC,EACdnmC,EAASg/B,eAAiBmH,GAAyBrN,EAAgBqN,GAC1DnmC,GAAYA,EAASg/B,iBAI9Bh/B,EAASg/B,eAAiB,CACxBI,UAAWp/B,EAASg/B,iBAIxB,IAAIntH,EAAc,CAChBmuF,SAAUA,EACVz+E,gBAAiBA,GAAmBsjH,EAAatjH,EAAiB,KAAK/mG,KAAI,SAAU21B,GACnF,OAAO2oL,EAAgB3oL,MAEzB7Z,KAAMyvM,GAAezJ,EAAMxD,EAAgBiN,GAAc,CACvD9B,YAAaA,EACbjF,eAAgBlG,EAAgBqN,KAElCrrG,KAAMkrG,GAAe1J,EAAMxD,EAAgBkN,GAAc,CACvDhH,eAAgBlG,EAAgBqN,MAQpC,OALAr1N,OAAOC,KAAK8gG,GAAa1gG,SAAQ,SAAUC,GACpCygG,EAAYzgG,WACRygG,EAAYzgG,MAGhBygG,GAqMLu0H,GAAoB,SAA2BC,EAAkBC,EAAgBC,GACnF,OAAO,SAAUV,GACf,IA9GmEvzI,EA8G/Dk0I,EAA0B1N,EAAgB+M,GAC1CY,EAAwB,GAAcH,EAAgBzB,EAAagB,EAAe,YAClFvzM,EAAOuyM,EAAagB,EAAe,QAAQ,GAC3Ca,EAAiB,CACnBp0M,KAAMwmM,EAAgBxmM,IAEpBha,EAAQgkN,EAAM+J,EAAkBG,EAAyBE,GACzDC,EAAgB9B,EAAagB,EAAe,iBAAiB,GAC7Dv4I,EApHsB,mCAFyCgF,EAsHjBwmI,EAAgB6N,IApHxD1L,aAC4B,kBAAlB3oI,EAAQ5gF,MAAqB,GAAK4gF,EAAQ5gF,MAAM+F,MAAM,MAC5D+C,KAAI,SAAU9I,GAC1B,IAAIy5J,EACAriJ,EAIJ,GAFAA,EAAWpX,EAEP,SAAStC,KAAKsC,GAAQ,CACxB,IAAIk1N,EAAel1N,EAAM+F,MAAM,KAE/B0zJ,EAAUy7D,EAAa,GACvB99M,EAAW89M,EAAa,OACf,SAASx3N,KAAKsC,KACvBy5J,EAAUz5J,GAGZ,MAAO,CACLy5J,QAASA,EACTriJ,SAAUA,MAGmB,kCAAxBwpE,EAAQ2oI,aACsB,kBAAlB3oI,EAAQ5gF,MAAqB,GAAK4gF,EAAQ5gF,MAAM+F,MAAM,MAE5D+C,KAAI,SAAU9I,GAC3B,IAAIo0E,EAAQ,CAEV,aAAW3sE,EAGX,cAAYA,EAGZ,YAAe,EAIf,WAAc,EAId,KAAM,GAGR,GAAI,IAAI/J,KAAKsC,GAAQ,CACnB,IAAIm1N,EAAgBn1N,EAAM+F,MAAM,KAC5B0zJ,EAAU07D,EAAc,GACxBC,EAAiBD,EAAc,GAC/BrlN,OAA0B,IAAnBslN,EAA4B,GAAKA,EAE5ChhJ,EAAMqlF,QAAUA,EAChBrlF,EAAMh9D,SAAWpX,EACjB8P,EAAK/J,MAAM,KAAKtG,SAAQ,SAAU41N,GAChC,IAAIC,EAAaD,EAAItvN,MAAM,KACvBtJ,EAAO64N,EAAW,GAClB/wN,EAAM+wN,EAAW,GAER,SAAT74N,EACF23E,EAAMh9D,SAAW7S,EACC,OAAT9H,EACT23E,EAAM+8I,WAAapoN,OAAOxE,GACR,QAAT9H,EACT23E,EAAMtwB,YAAc/6C,OAAOxE,GACT,OAAT9H,IACT23E,EAAM,MAAQrrE,OAAOxE,YAIzB6vE,EAAMh9D,SAAWpX,EAOnB,OAJIo0E,EAAMqlF,UACRrlF,EAAMqlF,QAAU,UAAYrlF,EAAMqlF,SAG7BrlF,UAtDJ,EAgGDwH,IACFh1E,EAAQgkN,EAAMhkN,EAAO,CACnBg1E,gBAAiBA,KAIrB,IAAI56D,EAAQmyM,EAAagB,EAAe,SAAS,GAEjD,GAAInzM,GAASA,EAAM82B,WAAW17C,OAAQ,CACpC,IAAIm5N,EAAWv0M,EAAM82B,WAAW,GAAG85G,UAAU1uJ,OAC7C0D,EAAQgkN,EAAMhkN,EAAO,CACnBoa,MAAOu0M,IAIX,IAAIt3F,EAAiDk1F,EAAagB,EAAe,qBA7JrDl8M,QAAO,SAAUC,EAAK/N,GAClD,IAAIjG,EAAakjN,EAAgBj9M,GAC7Bi0H,EAAY01F,GAAc5vN,EAAWqlN,aAEzC,GAAInrF,EAAW,CACblmH,EAAIkmH,GAAa,CACfl6H,WAAYA,GAEd,IAAIsxN,EAAWrC,EAAahpN,EAAM,aAAa,GAE/C,GAAIqrN,EAAU,CACZ,IAAIl3F,EAAO80F,EAAWoC,GAClBC,EAAan3F,GAAQ,YAAsBA,GAC/CpmH,EAAIkmH,GAAWE,KAAOm3F,GAI1B,OAAOv9M,IACN,IA6IG9Y,OAAOC,KAAK4+H,GAAmB7hI,SACjCwK,EAAQgkN,EAAMhkN,EAAO,CACnBq3H,kBAAmBA,KAIvB,IAAI99B,EAAc+zH,GAAsBC,GACpC/xF,EAAkB+wF,EAAagB,EAAe,kBAC9CuB,EAA2B9K,EAAMiK,EAAmB10H,GACxD,OAAO0qH,EAAQzoF,EAAgBt5H,IApMb,SAAyBgsN,EAAyBC,EAAuBW,GAC7F,OAAO,SAAU3qH,GACf,IAAI4qH,EAAqBxC,EAAapoH,EAAgB,WAClD6qH,EAAc,GAAcb,EAAuBY,GACnDzxN,EAAa0mN,EAAMkK,EAAyB1N,EAAgBr8G,IAC5D8qH,EAA4B3B,GAAsBnpH,GACtD,OAAO6qH,EAAY9sN,KAAI,SAAU4+I,GAC/B,MAAO,CACLvnD,YAAayqH,EAAM8K,EAA0BG,GAC7C3xN,WAAY0mN,EAAM1mN,EAAY,CAC5BwjJ,QAASA,SA0LoBouE,CAAgBlvN,EAAOmuN,EAAuBW,OAwCjFK,GAAmB,SAA0BC,EAAeC,GAC9D,OAAO,SAAUC,EAAQv6N,GACvB,IAAIi5N,EAAiB,GAAcqB,EAAa9C,EAAa+C,EAAO/rN,KAAM,YACtEwqN,EAAmB/J,EAAMoL,EAAe,CAC1C5J,YAAa8J,EAAOhyN,WAAW8Z,QAGS,kBAA/Bk4M,EAAOhyN,WAAWma,WAC3Bs2M,EAAiB7I,eAAiBoK,EAAOhyN,WAAWma,UAGtD,IAAI83M,EAAiBhD,EAAa+C,EAAO/rN,KAAM,iBAC3C0qN,EAAoBX,GAAsBgC,EAAO/rN,MACrD,OAAO0gN,EAAQsL,EAAertN,IAAI4rN,GAAkBC,EAAkBC,EAAgBC,OAwItF,GAAiB,SAAwB1zJ,GAC3C,GAAuB,KAAnBA,EACF,MAAM,IAAI7iE,MAAMgrB,GAGlB,IACIg/K,EACA8tB,EAFAntM,EAAS,IAAI,YAIjB,IAEEmtM,GADA9tB,EAAMr/K,EAAOw+K,gBAAgBtmI,EAAgB,qBACA,QAAhCmnI,EAAIx5L,gBAAgB9K,QAAoBskM,EAAIx5L,gBAAkB,KAC3E,MAAOtO,IAGT,IAAK41N,GAAOA,GAAOA,EAAIprN,qBAAqB,eAAe5O,OAAS,EAClE,MAAM,IAAIkC,MAAMgrB,GAGlB,OAAO8sM,GAiEL1sM,GAAQ,SAAey3C,EAAgBr2D,QACzB,IAAZA,IACFA,EAAU,IAGZ,IAAIurN,EAlJkB,SAA2BD,EAAKtrN,QACtC,IAAZA,IACFA,EAAU,IAGZ,IAAIs0D,EAAWt0D,EACXwrN,EAAuBl3J,EAAS+M,YAChCA,OAAuC,IAAzBmqJ,EAAkC,GAAKA,EACrDC,EAAen3J,EAAS4sJ,IACxBA,OAAuB,IAAjBuK,EAA0Bn8N,KAAKC,MAAQk8N,EAC7CC,EAAwBp3J,EAAS2M,aACjCA,OAAyC,IAA1ByqJ,EAAmC,EAAIA,EACtDC,EAActD,EAAaiD,EAAK,UAEpC,IAAKK,EAAYr6N,OACf,MAAM,IAAIkC,MAAMgrB,GAGlB,IAAIqjD,EAAYwmJ,EAAaiD,EAAK,YAC9BJ,EAAgB5O,EAAgBgP,GAChCH,EAAc,GAAc,CAAC9pJ,GAAcgnJ,EAAaiD,EAAK,YAEjEJ,EAAcz6N,KAAOy6N,EAAcz6N,MAAQ,SAC3Cy6N,EAAcnK,eAAiBmK,EAAcrC,2BAA6B,EAC1EqC,EAAchK,IAAMA,EACpBgK,EAAcjqJ,aAAeA,EAEzBY,EAAUvwE,SACZ45N,EAAcrpJ,UAAYA,EAAU7jE,IAAIsqN,IAG1C,IAAIsD,EAAU,GAoBd,OAfAD,EAAYh3N,SAAQ,SAAU0K,EAAMxO,GAClC,IAAIuI,EAAakjN,EAAgBj9M,GAG7BwsN,EAAcD,EAAQ/6N,EAAQ,GAClCuI,EAAW8Z,MArGM,SAAwBrB,GAC3C,IAAIzY,EAAayY,EAAKzY,WAClB0yN,EAAwBj6M,EAAKi6M,sBAC7BC,EAAUl6M,EAAKk6M,QAenB,MAAgC,kBAArB3yN,EAAW8Z,MACb9Z,EAAW8Z,MAIhB44M,GAAgE,kBAAhCA,EAAsB54M,OAAgE,kBAAnC44M,EAAsBv4M,SACpGu4M,EAAsB54M,MAAQ44M,EAAsBv4M,SAIxDu4M,GAAqC,WAAZC,EAWvB,KAVE,EAwEYC,CAAe,CAChC5yN,WAAYA,EACZ0yN,sBAAuBD,EAAcA,EAAYzyN,WAAa,KAC9D2yN,QAASb,EAAcz6N,OAEzBm7N,EAAQn5N,KAAK,CACX4M,KAAMA,EACNjG,WAAYA,OAGT,CACLyoE,UAAWqpJ,EAAcrpJ,UACzBoqJ,mBAAoBlM,EAAQ6L,EAAQ5tN,IAAIitN,GAAiBC,EAAeC,MA6FjDe,CAAkB,GAAe71J,GAAiBr2D,GACvE4vD,EAAwB27J,EAAmBU,mBAh6BxBjuN,IAAI+pN,GAi6B3B,OAAOnD,EAAO,CACZE,cAAel1J,EACfiS,UAAW0pJ,EAAmB1pJ,UAC9BjD,YAAa5+D,EAAQ4+D,YACrBsC,iBAAkBlhE,EAAQkhE,oBAa1BirJ,GAAiB,SAAwB91J,GAC3C,OA9EyB,SAA8Bi1J,GACvD,IAAIc,EAAgB/D,EAAaiD,EAAK,aAAa,GAEnD,IAAKc,EACH,OAAO,KAGT,IAAIhzN,EAAakjN,EAAgB8P,GAEjC,OAAQhzN,EAAWqlN,aACjB,IAAK,mCACL,IAAK,mCACHrlN,EAAWR,OAAS,OACpB,MAEF,IAAK,qCACL,IAAK,kCACL,IAAK,qCACL,IAAK,kCACHQ,EAAWR,OAAS,MACpB,MAEF,IAAK,gCACL,IAAK,gCACHQ,EAAWR,OAAS,SACpBQ,EAAWlE,MAAQ5F,KAAKsvB,MAAMxlB,EAAWlE,OACzC,MAKF,QACE,MAAM,IAAI1B,MAAMgrB,GAGpB,OAAOplB,EA2CAizN,CAAqB,GAAeh2J,M,kCEloF7C,+DA0Be,SAASi2J,EAAWj9N,EAAW07L,GAC5C,YAAa,EAAG/7L,WAChB,IAAIg8L,EAAS,YAAUD,GACvB,OAAO,YAAgB17L,EAAoB,IAAT27L","file":"js/13-4567c8f76faa7c1b36f0.chunk.js","sourcesContent":["import startOfDay from \"../startOfDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day?\n *\n * @description\n * Are the given dates in the same day?\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the first date to check\n * @param {Date|Number} dateRight - the second date to check\n * @returns {Boolean} the dates are in the same day\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * var result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n */\n\nexport default function isSameDay(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var dateLeftStartOfDay = startOfDay(dirtyDateLeft);\n  var dateRightStartOfDay = startOfDay(dirtyDateRight);\n  return dateLeftStartOfDay.getTime() === dateRightStartOfDay.getTime();\n}","import isSameDay from \"../isSameDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isToday\n * @category Day Helpers\n * @summary Is the given date today?\n * @pure false\n *\n * @description\n * Is the given date today?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is today\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 6 October 14:00:00 today?\n * var result = isToday(new Date(2014, 9, 6, 14, 0))\n * //=> true\n */\n\nexport default function isToday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, Date.now());\n}","import isSameDay from \"../isSameDay/index.js\";\nimport subDays from \"../subDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isYesterday\n * @category Day Helpers\n * @summary Is the given date yesterday?\n * @pure false\n *\n * @description\n * Is the given date yesterday?\n *\n * > ⚠️ Please note that this function is not present in the FP submodule as\n * > it uses `Date.now()` internally hence impure and can't be safely curried.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is yesterday\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // If today is 6 October 2014, is 5 October 14:00:00 yesterday?\n * var result = isYesterday(new Date(2014, 9, 5, 14, 0))\n * //=> true\n */\n\nexport default function isYesterday(dirtyDate) {\n  requiredArgs(1, arguments);\n  return isSameDay(dirtyDate, subDays(Date.now(), 1));\n}","var win;\n\nif (typeof window !== \"undefined\") {\n  win = window;\n} else if (typeof global !== \"undefined\") {\n  win = global;\n} else if (typeof self !== \"undefined\") {\n  win = self;\n} else {\n  win = {};\n}\n\nmodule.exports = win;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * @license\n * Video.js 7.18.1 <http://videojs.com/>\n * Copyright Brightcove, Inc. <https://www.brightcove.com/>\n * Available under Apache License Version 2.0\n * <https://github.com/videojs/video.js/blob/main/LICENSE>\n *\n * Includes vtt.js <https://github.com/mozilla/vtt.js>\n * Available under Apache License Version 2.0\n * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>\n */\nimport window$1 from 'global/window';\nimport document from 'global/document';\nimport _extends from '@babel/runtime/helpers/extends';\nimport keycode from 'keycode';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport safeParseTuple from 'safe-json-parse/tuple';\nimport XHR from '@videojs/xhr';\nimport vtt from 'videojs-vtt.js';\nimport _construct from '@babel/runtime/helpers/construct';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _resolveUrl from '@videojs/vhs-utils/es/resolve-url.js';\nimport { Parser } from 'm3u8-parser';\nimport { browserSupportsCodec, DEFAULT_VIDEO_CODEC, DEFAULT_AUDIO_CODEC, muxerSupportsCodec, parseCodecs, translateLegacyCodec, codecsFromDefault, getMimeForCodec, isAudioCodec } from '@videojs/vhs-utils/es/codecs.js';\nimport { simpleTypeFromSourceType } from '@videojs/vhs-utils/es/media-types.js';\nimport { generateSidxKey, parseUTCTiming, parse, addSidxSegmentsToPlaylist } from 'mpd-parser';\nimport parseSidx from 'mux.js/lib/tools/parse-sidx';\nimport { getId3Offset } from '@videojs/vhs-utils/es/id3-helpers';\nimport { detectContainerForBytes, isLikelyFmp4MediaSegment } from '@videojs/vhs-utils/es/containers';\nimport { concatTypedArrays, stringToBytes, toUint8 } from '@videojs/vhs-utils/es/byte-helpers';\nimport { ONE_SECOND_IN_TS } from 'mux.js/lib/utils/clock';\nvar version$5 = \"7.18.1\";\n/**\n * An Object that contains lifecycle hooks as keys which point to an array\n * of functions that are run when a lifecycle is triggered\n *\n * @private\n */\n\nvar hooks_ = {};\n/**\n * Get a list of hooks for a specific lifecycle\n *\n * @param  {string} type\n *         the lifecyle to get hooks from\n *\n * @param  {Function|Function[]} [fn]\n *         Optionally add a hook (or hooks) to the lifecycle that your are getting.\n *\n * @return {Array}\n *         an array of hooks, or an empty array if there are none.\n */\n\nvar hooks = function hooks(type, fn) {\n  hooks_[type] = hooks_[type] || [];\n\n  if (fn) {\n    hooks_[type] = hooks_[type].concat(fn);\n  }\n\n  return hooks_[type];\n};\n/**\n * Add a function hook to a specific videojs lifecycle.\n *\n * @param {string} type\n *        the lifecycle to hook the function to.\n *\n * @param {Function|Function[]}\n *        The function or array of functions to attach.\n */\n\n\nvar hook = function hook(type, fn) {\n  hooks(type, fn);\n};\n/**\n * Remove a hook from a specific videojs lifecycle.\n *\n * @param  {string} type\n *         the lifecycle that the function hooked to\n *\n * @param  {Function} fn\n *         The hooked function to remove\n *\n * @return {boolean}\n *         The function that was removed or undef\n */\n\n\nvar removeHook = function removeHook(type, fn) {\n  var index = hooks(type).indexOf(fn);\n\n  if (index <= -1) {\n    return false;\n  }\n\n  hooks_[type] = hooks_[type].slice();\n  hooks_[type].splice(index, 1);\n  return true;\n};\n/**\n * Add a function hook that will only run once to a specific videojs lifecycle.\n *\n * @param {string} type\n *        the lifecycle to hook the function to.\n *\n * @param {Function|Function[]}\n *        The function or array of functions to attach.\n */\n\n\nvar hookOnce = function hookOnce(type, fn) {\n  hooks(type, [].concat(fn).map(function (original) {\n    var wrapper = function wrapper() {\n      removeHook(type, wrapper);\n      return original.apply(void 0, arguments);\n    };\n\n    return wrapper;\n  }));\n};\n/**\n * @file fullscreen-api.js\n * @module fullscreen-api\n * @private\n */\n\n/**\n * Store the browser-specific methods for the fullscreen API.\n *\n * @type {Object}\n * @see [Specification]{@link https://fullscreen.spec.whatwg.org}\n * @see [Map Approach From Screenfull.js]{@link https://github.com/sindresorhus/screenfull.js}\n */\n\n\nvar FullscreenApi = {\n  prefixed: true\n}; // browser API methods\n\nvar apiMap = [['requestFullscreen', 'exitFullscreen', 'fullscreenElement', 'fullscreenEnabled', 'fullscreenchange', 'fullscreenerror', 'fullscreen'], // WebKit\n['webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitFullscreenElement', 'webkitFullscreenEnabled', 'webkitfullscreenchange', 'webkitfullscreenerror', '-webkit-full-screen'], // Mozilla\n['mozRequestFullScreen', 'mozCancelFullScreen', 'mozFullScreenElement', 'mozFullScreenEnabled', 'mozfullscreenchange', 'mozfullscreenerror', '-moz-full-screen'], // Microsoft\n['msRequestFullscreen', 'msExitFullscreen', 'msFullscreenElement', 'msFullscreenEnabled', 'MSFullscreenChange', 'MSFullscreenError', '-ms-fullscreen']];\nvar specApi = apiMap[0];\nvar browserApi; // determine the supported set of functions\n\nfor (var i = 0; i < apiMap.length; i++) {\n  // check for exitFullscreen function\n  if (apiMap[i][1] in document) {\n    browserApi = apiMap[i];\n    break;\n  }\n} // map the browser API names to the spec API names\n\n\nif (browserApi) {\n  for (var _i = 0; _i < browserApi.length; _i++) {\n    FullscreenApi[specApi[_i]] = browserApi[_i];\n  }\n\n  FullscreenApi.prefixed = browserApi[0] !== specApi[0];\n}\n/**\n * @file create-logger.js\n * @module create-logger\n */\n\n\nvar history = [];\n/**\n * Log messages to the console and history based on the type of message\n *\n * @private\n * @param  {string} type\n *         The name of the console method to use.\n *\n * @param  {Array} args\n *         The arguments to be passed to the matching console method.\n */\n\nvar LogByTypeFactory = function LogByTypeFactory(name, log) {\n  return function (type, level, args) {\n    var lvl = log.levels[level];\n    var lvlRegExp = new RegExp(\"^(\" + lvl + \")$\");\n\n    if (type !== 'log') {\n      // Add the type to the front of the message when it's not \"log\".\n      args.unshift(type.toUpperCase() + ':');\n    } // Add console prefix after adding to history.\n\n\n    args.unshift(name + ':'); // Add a clone of the args at this point to history.\n\n    if (history) {\n      history.push([].concat(args)); // only store 1000 history entries\n\n      var splice = history.length - 1000;\n      history.splice(0, splice > 0 ? splice : 0);\n    } // If there's no console then don't try to output messages, but they will\n    // still be stored in history.\n\n\n    if (!window$1.console) {\n      return;\n    } // Was setting these once outside of this function, but containing them\n    // in the function makes it easier to test cases where console doesn't exist\n    // when the module is executed.\n\n\n    var fn = window$1.console[type];\n\n    if (!fn && type === 'debug') {\n      // Certain browsers don't have support for console.debug. For those, we\n      // should default to the closest comparable log.\n      fn = window$1.console.info || window$1.console.log;\n    } // Bail out if there's no console or if this type is not allowed by the\n    // current logging level.\n\n\n    if (!fn || !lvl || !lvlRegExp.test(type)) {\n      return;\n    }\n\n    fn[Array.isArray(args) ? 'apply' : 'call'](window$1.console, args);\n  };\n};\n\nfunction createLogger$1(name) {\n  // This is the private tracking variable for logging level.\n  var level = 'info'; // the curried logByType bound to the specific log and history\n\n  var logByType;\n  /**\n   * Logs plain debug messages. Similar to `console.log`.\n   *\n   * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)\n   * of our JSDoc template, we cannot properly document this as both a function\n   * and a namespace, so its function signature is documented here.\n   *\n   * #### Arguments\n   * ##### *args\n   * Mixed[]\n   *\n   * Any combination of values that could be passed to `console.log()`.\n   *\n   * #### Return Value\n   *\n   * `undefined`\n   *\n   * @namespace\n   * @param    {Mixed[]} args\n   *           One or more messages or objects that should be logged.\n   */\n\n  var log = function log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    logByType('log', level, args);\n  }; // This is the logByType helper that the logging methods below use\n\n\n  logByType = LogByTypeFactory(name, log);\n  /**\n   * Create a new sublogger which chains the old name to the new name.\n   *\n   * For example, doing `videojs.log.createLogger('player')` and then using that logger will log the following:\n   * ```js\n   *  mylogger('foo');\n   *  // > VIDEOJS: player: foo\n   * ```\n   *\n   * @param {string} name\n   *        The name to add call the new logger\n   * @return {Object}\n   */\n\n  log.createLogger = function (subname) {\n    return createLogger$1(name + ': ' + subname);\n  };\n  /**\n   * Enumeration of available logging levels, where the keys are the level names\n   * and the values are `|`-separated strings containing logging methods allowed\n   * in that logging level. These strings are used to create a regular expression\n   * matching the function name being called.\n   *\n   * Levels provided by Video.js are:\n   *\n   * - `off`: Matches no calls. Any value that can be cast to `false` will have\n   *   this effect. The most restrictive.\n   * - `all`: Matches only Video.js-provided functions (`debug`, `log`,\n   *   `log.warn`, and `log.error`).\n   * - `debug`: Matches `log.debug`, `log`, `log.warn`, and `log.error` calls.\n   * - `info` (default): Matches `log`, `log.warn`, and `log.error` calls.\n   * - `warn`: Matches `log.warn` and `log.error` calls.\n   * - `error`: Matches only `log.error` calls.\n   *\n   * @type {Object}\n   */\n\n\n  log.levels = {\n    all: 'debug|log|warn|error',\n    off: '',\n    debug: 'debug|log|warn|error',\n    info: 'log|warn|error',\n    warn: 'warn|error',\n    error: 'error',\n    DEFAULT: level\n  };\n  /**\n   * Get or set the current logging level.\n   *\n   * If a string matching a key from {@link module:log.levels} is provided, acts\n   * as a setter.\n   *\n   * @param  {string} [lvl]\n   *         Pass a valid level to set a new logging level.\n   *\n   * @return {string}\n   *         The current logging level.\n   */\n\n  log.level = function (lvl) {\n    if (typeof lvl === 'string') {\n      if (!log.levels.hasOwnProperty(lvl)) {\n        throw new Error(\"\\\"\" + lvl + \"\\\" in not a valid log level\");\n      }\n\n      level = lvl;\n    }\n\n    return level;\n  };\n  /**\n   * Returns an array containing everything that has been logged to the history.\n   *\n   * This array is a shallow clone of the internal history record. However, its\n   * contents are _not_ cloned; so, mutating objects inside this array will\n   * mutate them in history.\n   *\n   * @return {Array}\n   */\n\n\n  log.history = function () {\n    return history ? [].concat(history) : [];\n  };\n  /**\n   * Allows you to filter the history by the given logger name\n   *\n   * @param {string} fname\n   *        The name to filter by\n   *\n   * @return {Array}\n   *         The filtered list to return\n   */\n\n\n  log.history.filter = function (fname) {\n    return (history || []).filter(function (historyItem) {\n      // if the first item in each historyItem includes `fname`, then it's a match\n      return new RegExp(\".*\" + fname + \".*\").test(historyItem[0]);\n    });\n  };\n  /**\n   * Clears the internal history tracking, but does not prevent further history\n   * tracking.\n   */\n\n\n  log.history.clear = function () {\n    if (history) {\n      history.length = 0;\n    }\n  };\n  /**\n   * Disable history tracking if it is currently enabled.\n   */\n\n\n  log.history.disable = function () {\n    if (history !== null) {\n      history.length = 0;\n      history = null;\n    }\n  };\n  /**\n   * Enable history tracking if it is currently disabled.\n   */\n\n\n  log.history.enable = function () {\n    if (history === null) {\n      history = [];\n    }\n  };\n  /**\n   * Logs error messages. Similar to `console.error`.\n   *\n   * @param {Mixed[]} args\n   *        One or more messages or objects that should be logged as an error\n   */\n\n\n  log.error = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return logByType('error', level, args);\n  };\n  /**\n   * Logs warning messages. Similar to `console.warn`.\n   *\n   * @param {Mixed[]} args\n   *        One or more messages or objects that should be logged as a warning.\n   */\n\n\n  log.warn = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return logByType('warn', level, args);\n  };\n  /**\n   * Logs debug messages. Similar to `console.debug`, but may also act as a comparable\n   * log if `console.debug` is not available\n   *\n   * @param {Mixed[]} args\n   *        One or more messages or objects that should be logged as debug.\n   */\n\n\n  log.debug = function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return logByType('debug', level, args);\n  };\n\n  return log;\n}\n/**\n * @file log.js\n * @module log\n */\n\n\nvar log$1 = createLogger$1('VIDEOJS');\nvar createLogger = log$1.createLogger;\n/**\n * @file obj.js\n * @module obj\n */\n\n/**\n * @callback obj:EachCallback\n *\n * @param {Mixed} value\n *        The current key for the object that is being iterated over.\n *\n * @param {string} key\n *        The current key-value for object that is being iterated over\n */\n\n/**\n * @callback obj:ReduceCallback\n *\n * @param {Mixed} accum\n *        The value that is accumulating over the reduce loop.\n *\n * @param {Mixed} value\n *        The current key for the object that is being iterated over.\n *\n * @param {string} key\n *        The current key-value for object that is being iterated over\n *\n * @return {Mixed}\n *         The new accumulated value.\n */\n\nvar toString = Object.prototype.toString;\n/**\n * Get the keys of an Object\n *\n * @param {Object}\n *        The Object to get the keys from\n *\n * @return {string[]}\n *         An array of the keys from the object. Returns an empty array if the\n *         object passed in was invalid or had no keys.\n *\n * @private\n */\n\nvar keys = function keys(object) {\n  return isObject(object) ? Object.keys(object) : [];\n};\n/**\n * Array-like iteration for objects.\n *\n * @param {Object} object\n *        The object to iterate over\n *\n * @param {obj:EachCallback} fn\n *        The callback function which is called for each key in the object.\n */\n\n\nfunction each(object, fn) {\n  keys(object).forEach(function (key) {\n    return fn(object[key], key);\n  });\n}\n/**\n * Array-like reduce for objects.\n *\n * @param {Object} object\n *        The Object that you want to reduce.\n *\n * @param {Function} fn\n *         A callback function which is called for each key in the object. It\n *         receives the accumulated value and the per-iteration value and key\n *         as arguments.\n *\n * @param {Mixed} [initial = 0]\n *        Starting value\n *\n * @return {Mixed}\n *         The final accumulated value.\n */\n\n\nfunction reduce(object, fn, initial) {\n  if (initial === void 0) {\n    initial = 0;\n  }\n\n  return keys(object).reduce(function (accum, key) {\n    return fn(accum, object[key], key);\n  }, initial);\n}\n/**\n * Object.assign-style object shallow merge/extend.\n *\n * @param  {Object} target\n * @param  {Object} ...sources\n * @return {Object}\n */\n\n\nfunction assign(target) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  if (Object.assign) {\n    return _extends.apply(void 0, [target].concat(sources));\n  }\n\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n\n    each(source, function (value, key) {\n      target[key] = value;\n    });\n  });\n  return target;\n}\n/**\n * Returns whether a value is an object of any kind - including DOM nodes,\n * arrays, regular expressions, etc. Not functions, though.\n *\n * This avoids the gotcha where using `typeof` on a `null` value\n * results in `'object'`.\n *\n * @param  {Object} value\n * @return {boolean}\n */\n\n\nfunction isObject(value) {\n  return !!value && _typeof(value) === 'object';\n}\n/**\n * Returns whether an object appears to be a \"plain\" object - that is, a\n * direct instance of `Object`.\n *\n * @param  {Object} value\n * @return {boolean}\n */\n\n\nfunction isPlain(value) {\n  return isObject(value) && toString.call(value) === '[object Object]' && value.constructor === Object;\n}\n/**\n * @file computed-style.js\n * @module computed-style\n */\n\n/**\n * A safe getComputedStyle.\n *\n * This is needed because in Firefox, if the player is loaded in an iframe with\n * `display:none`, then `getComputedStyle` returns `null`, so, we do a\n * null-check to make sure that the player doesn't break in these cases.\n *\n * @function\n * @param    {Element} el\n *           The element you want the computed style of\n *\n * @param    {string} prop\n *           The property name you want\n *\n * @see      https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\n\n\nfunction computedStyle(el, prop) {\n  if (!el || !prop) {\n    return '';\n  }\n\n  if (typeof window$1.getComputedStyle === 'function') {\n    var computedStyleValue;\n\n    try {\n      computedStyleValue = window$1.getComputedStyle(el);\n    } catch (e) {\n      return '';\n    }\n\n    return computedStyleValue ? computedStyleValue.getPropertyValue(prop) || computedStyleValue[prop] : '';\n  }\n\n  return '';\n}\n/**\n * @file browser.js\n * @module browser\n */\n\n\nvar USER_AGENT = window$1.navigator && window$1.navigator.userAgent || '';\nvar webkitVersionMap = /AppleWebKit\\/([\\d.]+)/i.exec(USER_AGENT);\nvar appleWebkitVersion = webkitVersionMap ? parseFloat(webkitVersionMap.pop()) : null;\n/**\n * Whether or not this device is an iPod.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_IPOD = /iPod/i.test(USER_AGENT);\n/**\n * The detected iOS version - or `null`.\n *\n * @static\n * @const\n * @type {string|null}\n */\n\nvar IOS_VERSION = function () {\n  var match = USER_AGENT.match(/OS (\\d+)_/i);\n\n  if (match && match[1]) {\n    return match[1];\n  }\n\n  return null;\n}();\n/**\n * Whether or not this is an Android device.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\n\nvar IS_ANDROID = /Android/i.test(USER_AGENT);\n/**\n * The detected Android version - or `null`.\n *\n * @static\n * @const\n * @type {number|string|null}\n */\n\nvar ANDROID_VERSION = function () {\n  // This matches Android Major.Minor.Patch versions\n  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned\n  var match = USER_AGENT.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);\n\n  if (!match) {\n    return null;\n  }\n\n  var major = match[1] && parseFloat(match[1]);\n  var minor = match[2] && parseFloat(match[2]);\n\n  if (major && minor) {\n    return parseFloat(match[1] + '.' + match[2]);\n  } else if (major) {\n    return major;\n  }\n\n  return null;\n}();\n/**\n * Whether or not this is a native Android browser.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\n\nvar IS_NATIVE_ANDROID = IS_ANDROID && ANDROID_VERSION < 5 && appleWebkitVersion < 537;\n/**\n * Whether or not this is Mozilla Firefox.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_FIREFOX = /Firefox/i.test(USER_AGENT);\n/**\n * Whether or not this is Microsoft Edge.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_EDGE = /Edg/i.test(USER_AGENT);\n/**\n * Whether or not this is Google Chrome.\n *\n * This will also be `true` for Chrome on iOS, which will have different support\n * as it is actually Safari under the hood.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_CHROME = !IS_EDGE && (/Chrome/i.test(USER_AGENT) || /CriOS/i.test(USER_AGENT));\n/**\n * The detected Google Chrome version - or `null`.\n *\n * @static\n * @const\n * @type {number|null}\n */\n\nvar CHROME_VERSION = function () {\n  var match = USER_AGENT.match(/(Chrome|CriOS)\\/(\\d+)/);\n\n  if (match && match[2]) {\n    return parseFloat(match[2]);\n  }\n\n  return null;\n}();\n/**\n * The detected Internet Explorer version - or `null`.\n *\n * @static\n * @const\n * @type {number|null}\n */\n\n\nvar IE_VERSION = function () {\n  var result = /MSIE\\s(\\d+)\\.\\d/.exec(USER_AGENT);\n  var version = result && parseFloat(result[1]);\n\n  if (!version && /Trident\\/7.0/i.test(USER_AGENT) && /rv:11.0/.test(USER_AGENT)) {\n    // IE 11 has a different user agent string than other IE versions\n    version = 11.0;\n  }\n\n  return version;\n}();\n/**\n * Whether or not this is desktop Safari.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\n\nvar IS_SAFARI = /Safari/i.test(USER_AGENT) && !IS_CHROME && !IS_ANDROID && !IS_EDGE;\n/**\n * Whether or not this is a Windows machine.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_WINDOWS = /Windows/i.test(USER_AGENT);\n/**\n * Whether or not this device is touch-enabled.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar TOUCH_ENABLED = Boolean(isReal() && ('ontouchstart' in window$1 || window$1.navigator.maxTouchPoints || window$1.DocumentTouch && window$1.document instanceof window$1.DocumentTouch));\n/**\n * Whether or not this device is an iPad.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_IPAD = /iPad/i.test(USER_AGENT) || IS_SAFARI && TOUCH_ENABLED && !/iPhone/i.test(USER_AGENT);\n/**\n * Whether or not this device is an iPhone.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n// The Facebook app's UIWebView identifies as both an iPhone and iPad, so\n// to identify iPhones, we need to exclude iPads.\n// http://artsy.github.io/blog/2012/10/18/the-perils-of-ios-user-agent-sniffing/\n\nvar IS_IPHONE = /iPhone/i.test(USER_AGENT) && !IS_IPAD;\n/**\n * Whether or not this is an iOS device.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_IOS = IS_IPHONE || IS_IPAD || IS_IPOD;\n/**\n * Whether or not this is any flavor of Safari - including iOS.\n *\n * @static\n * @const\n * @type {Boolean}\n */\n\nvar IS_ANY_SAFARI = (IS_SAFARI || IS_IOS) && !IS_CHROME;\nvar browser = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  IS_IPOD: IS_IPOD,\n  IOS_VERSION: IOS_VERSION,\n  IS_ANDROID: IS_ANDROID,\n  ANDROID_VERSION: ANDROID_VERSION,\n  IS_NATIVE_ANDROID: IS_NATIVE_ANDROID,\n  IS_FIREFOX: IS_FIREFOX,\n  IS_EDGE: IS_EDGE,\n  IS_CHROME: IS_CHROME,\n  CHROME_VERSION: CHROME_VERSION,\n  IE_VERSION: IE_VERSION,\n  IS_SAFARI: IS_SAFARI,\n  IS_WINDOWS: IS_WINDOWS,\n  TOUCH_ENABLED: TOUCH_ENABLED,\n  IS_IPAD: IS_IPAD,\n  IS_IPHONE: IS_IPHONE,\n  IS_IOS: IS_IOS,\n  IS_ANY_SAFARI: IS_ANY_SAFARI\n});\n/**\n * @file dom.js\n * @module dom\n */\n\n/**\n * Detect if a value is a string with any non-whitespace characters.\n *\n * @private\n * @param  {string} str\n *         The string to check\n *\n * @return {boolean}\n *         Will be `true` if the string is non-blank, `false` otherwise.\n *\n */\n\nfunction isNonBlankString(str) {\n  // we use str.trim as it will trim any whitespace characters\n  // from the front or back of non-whitespace characters. aka\n  // Any string that contains non-whitespace characters will\n  // still contain them after `trim` but whitespace only strings\n  // will have a length of 0, failing this check.\n  return typeof str === 'string' && Boolean(str.trim());\n}\n/**\n * Throws an error if the passed string has whitespace. This is used by\n * class methods to be relatively consistent with the classList API.\n *\n * @private\n * @param  {string} str\n *         The string to check for whitespace.\n *\n * @throws {Error}\n *         Throws an error if there is whitespace in the string.\n */\n\n\nfunction throwIfWhitespace(str) {\n  // str.indexOf instead of regex because str.indexOf is faster performance wise.\n  if (str.indexOf(' ') >= 0) {\n    throw new Error('class has illegal whitespace characters');\n  }\n}\n/**\n * Produce a regular expression for matching a className within an elements className.\n *\n * @private\n * @param  {string} className\n *         The className to generate the RegExp for.\n *\n * @return {RegExp}\n *         The RegExp that will check for a specific `className` in an elements\n *         className.\n */\n\n\nfunction classRegExp(className) {\n  return new RegExp('(^|\\\\s)' + className + '($|\\\\s)');\n}\n/**\n * Whether the current DOM interface appears to be real (i.e. not simulated).\n *\n * @return {boolean}\n *         Will be `true` if the DOM appears to be real, `false` otherwise.\n */\n\n\nfunction isReal() {\n  // Both document and window will never be undefined thanks to `global`.\n  return document === window$1.document;\n}\n/**\n * Determines, via duck typing, whether or not a value is a DOM element.\n *\n * @param  {Mixed} value\n *         The value to check.\n *\n * @return {boolean}\n *         Will be `true` if the value is a DOM element, `false` otherwise.\n */\n\n\nfunction isEl(value) {\n  return isObject(value) && value.nodeType === 1;\n}\n/**\n * Determines if the current DOM is embedded in an iframe.\n *\n * @return {boolean}\n *         Will be `true` if the DOM is embedded in an iframe, `false`\n *         otherwise.\n */\n\n\nfunction isInFrame() {\n  // We need a try/catch here because Safari will throw errors when attempting\n  // to get either `parent` or `self`\n  try {\n    return window$1.parent !== window$1.self;\n  } catch (x) {\n    return true;\n  }\n}\n/**\n * Creates functions to query the DOM using a given method.\n *\n * @private\n * @param   {string} method\n *          The method to create the query with.\n *\n * @return  {Function}\n *          The query method\n */\n\n\nfunction createQuerier(method) {\n  return function (selector, context) {\n    if (!isNonBlankString(selector)) {\n      return document[method](null);\n    }\n\n    if (isNonBlankString(context)) {\n      context = document.querySelector(context);\n    }\n\n    var ctx = isEl(context) ? context : document;\n    return ctx[method] && ctx[method](selector);\n  };\n}\n/**\n * Creates an element and applies properties, attributes, and inserts content.\n *\n * @param  {string} [tagName='div']\n *         Name of tag to be created.\n *\n * @param  {Object} [properties={}]\n *         Element properties to be applied.\n *\n * @param  {Object} [attributes={}]\n *         Element attributes to be applied.\n *\n * @param {module:dom~ContentDescriptor} content\n *        A content descriptor object.\n *\n * @return {Element}\n *         The element that was created.\n */\n\n\nfunction createEl(tagName, properties, attributes, content) {\n  if (tagName === void 0) {\n    tagName = 'div';\n  }\n\n  if (properties === void 0) {\n    properties = {};\n  }\n\n  if (attributes === void 0) {\n    attributes = {};\n  }\n\n  var el = document.createElement(tagName);\n  Object.getOwnPropertyNames(properties).forEach(function (propName) {\n    var val = properties[propName]; // See #2176\n    // We originally were accepting both properties and attributes in the\n    // same object, but that doesn't work so well.\n\n    if (propName.indexOf('aria-') !== -1 || propName === 'role' || propName === 'type') {\n      log$1.warn('Setting attributes in the second argument of createEl()\\n' + 'has been deprecated. Use the third argument instead.\\n' + (\"createEl(type, properties, attributes). Attempting to set \" + propName + \" to \" + val + \".\"));\n      el.setAttribute(propName, val); // Handle textContent since it's not supported everywhere and we have a\n      // method for it.\n    } else if (propName === 'textContent') {\n      textContent(el, val);\n    } else if (el[propName] !== val || propName === 'tabIndex') {\n      el[propName] = val;\n    }\n  });\n  Object.getOwnPropertyNames(attributes).forEach(function (attrName) {\n    el.setAttribute(attrName, attributes[attrName]);\n  });\n\n  if (content) {\n    appendContent(el, content);\n  }\n\n  return el;\n}\n/**\n * Injects text into an element, replacing any existing contents entirely.\n *\n * @param  {Element} el\n *         The element to add text content into\n *\n * @param  {string} text\n *         The text content to add.\n *\n * @return {Element}\n *         The element with added text content.\n */\n\n\nfunction textContent(el, text) {\n  if (typeof el.textContent === 'undefined') {\n    el.innerText = text;\n  } else {\n    el.textContent = text;\n  }\n\n  return el;\n}\n/**\n * Insert an element as the first child node of another\n *\n * @param {Element} child\n *        Element to insert\n *\n * @param {Element} parent\n *        Element to insert child into\n */\n\n\nfunction prependTo(child, parent) {\n  if (parent.firstChild) {\n    parent.insertBefore(child, parent.firstChild);\n  } else {\n    parent.appendChild(child);\n  }\n}\n/**\n * Check if an element has a class name.\n *\n * @param  {Element} element\n *         Element to check\n *\n * @param  {string} classToCheck\n *         Class name to check for\n *\n * @return {boolean}\n *         Will be `true` if the element has a class, `false` otherwise.\n *\n * @throws {Error}\n *         Throws an error if `classToCheck` has white space.\n */\n\n\nfunction hasClass(element, classToCheck) {\n  throwIfWhitespace(classToCheck);\n\n  if (element.classList) {\n    return element.classList.contains(classToCheck);\n  }\n\n  return classRegExp(classToCheck).test(element.className);\n}\n/**\n * Add a class name to an element.\n *\n * @param  {Element} element\n *         Element to add class name to.\n *\n * @param  {string} classToAdd\n *         Class name to add.\n *\n * @return {Element}\n *         The DOM element with the added class name.\n */\n\n\nfunction addClass(element, classToAdd) {\n  if (element.classList) {\n    element.classList.add(classToAdd); // Don't need to `throwIfWhitespace` here because `hasElClass` will do it\n    // in the case of classList not being supported.\n  } else if (!hasClass(element, classToAdd)) {\n    element.className = (element.className + ' ' + classToAdd).trim();\n  }\n\n  return element;\n}\n/**\n * Remove a class name from an element.\n *\n * @param  {Element} element\n *         Element to remove a class name from.\n *\n * @param  {string} classToRemove\n *         Class name to remove\n *\n * @return {Element}\n *         The DOM element with class name removed.\n */\n\n\nfunction removeClass(element, classToRemove) {\n  // Protect in case the player gets disposed\n  if (!element) {\n    log$1.warn(\"removeClass was called with an element that doesn't exist\");\n    return null;\n  }\n\n  if (element.classList) {\n    element.classList.remove(classToRemove);\n  } else {\n    throwIfWhitespace(classToRemove);\n    element.className = element.className.split(/\\s+/).filter(function (c) {\n      return c !== classToRemove;\n    }).join(' ');\n  }\n\n  return element;\n}\n/**\n * The callback definition for toggleClass.\n *\n * @callback module:dom~PredicateCallback\n * @param    {Element} element\n *           The DOM element of the Component.\n *\n * @param    {string} classToToggle\n *           The `className` that wants to be toggled\n *\n * @return   {boolean|undefined}\n *           If `true` is returned, the `classToToggle` will be added to the\n *           `element`. If `false`, the `classToToggle` will be removed from\n *           the `element`. If `undefined`, the callback will be ignored.\n */\n\n/**\n * Adds or removes a class name to/from an element depending on an optional\n * condition or the presence/absence of the class name.\n *\n * @param  {Element} element\n *         The element to toggle a class name on.\n *\n * @param  {string} classToToggle\n *         The class that should be toggled.\n *\n * @param  {boolean|module:dom~PredicateCallback} [predicate]\n *         See the return value for {@link module:dom~PredicateCallback}\n *\n * @return {Element}\n *         The element with a class that has been toggled.\n */\n\n\nfunction toggleClass(element, classToToggle, predicate) {\n  // This CANNOT use `classList` internally because IE11 does not support the\n  // second parameter to the `classList.toggle()` method! Which is fine because\n  // `classList` will be used by the add/remove functions.\n  var has = hasClass(element, classToToggle);\n\n  if (typeof predicate === 'function') {\n    predicate = predicate(element, classToToggle);\n  }\n\n  if (typeof predicate !== 'boolean') {\n    predicate = !has;\n  } // If the necessary class operation matches the current state of the\n  // element, no action is required.\n\n\n  if (predicate === has) {\n    return;\n  }\n\n  if (predicate) {\n    addClass(element, classToToggle);\n  } else {\n    removeClass(element, classToToggle);\n  }\n\n  return element;\n}\n/**\n * Apply attributes to an HTML element.\n *\n * @param {Element} el\n *        Element to add attributes to.\n *\n * @param {Object} [attributes]\n *        Attributes to be applied.\n */\n\n\nfunction setAttributes(el, attributes) {\n  Object.getOwnPropertyNames(attributes).forEach(function (attrName) {\n    var attrValue = attributes[attrName];\n\n    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {\n      el.removeAttribute(attrName);\n    } else {\n      el.setAttribute(attrName, attrValue === true ? '' : attrValue);\n    }\n  });\n}\n/**\n * Get an element's attribute values, as defined on the HTML tag.\n *\n * Attributes are not the same as properties. They're defined on the tag\n * or with setAttribute.\n *\n * @param  {Element} tag\n *         Element from which to get tag attributes.\n *\n * @return {Object}\n *         All attributes of the element. Boolean attributes will be `true` or\n *         `false`, others will be strings.\n */\n\n\nfunction getAttributes(tag) {\n  var obj = {}; // known boolean attributes\n  // we can check for matching boolean properties, but not all browsers\n  // and not all tags know about these attributes, so, we still want to check them manually\n\n  var knownBooleans = ',' + 'autoplay,controls,playsinline,loop,muted,default,defaultMuted' + ',';\n\n  if (tag && tag.attributes && tag.attributes.length > 0) {\n    var attrs = tag.attributes;\n\n    for (var i = attrs.length - 1; i >= 0; i--) {\n      var attrName = attrs[i].name;\n      var attrVal = attrs[i].value; // check for known booleans\n      // the matching element property will return a value for typeof\n\n      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(',' + attrName + ',') !== -1) {\n        // the value of an included boolean attribute is typically an empty\n        // string ('') which would equal false if we just check for a false value.\n        // we also don't want support bad code like autoplay='false'\n        attrVal = attrVal !== null ? true : false;\n      }\n\n      obj[attrName] = attrVal;\n    }\n  }\n\n  return obj;\n}\n/**\n * Get the value of an element's attribute.\n *\n * @param {Element} el\n *        A DOM element.\n *\n * @param {string} attribute\n *        Attribute to get the value of.\n *\n * @return {string}\n *         The value of the attribute.\n */\n\n\nfunction getAttribute(el, attribute) {\n  return el.getAttribute(attribute);\n}\n/**\n * Set the value of an element's attribute.\n *\n * @param {Element} el\n *        A DOM element.\n *\n * @param {string} attribute\n *        Attribute to set.\n *\n * @param {string} value\n *        Value to set the attribute to.\n */\n\n\nfunction setAttribute(el, attribute, value) {\n  el.setAttribute(attribute, value);\n}\n/**\n * Remove an element's attribute.\n *\n * @param {Element} el\n *        A DOM element.\n *\n * @param {string} attribute\n *        Attribute to remove.\n */\n\n\nfunction removeAttribute(el, attribute) {\n  el.removeAttribute(attribute);\n}\n/**\n * Attempt to block the ability to select text.\n */\n\n\nfunction blockTextSelection() {\n  document.body.focus();\n\n  document.onselectstart = function () {\n    return false;\n  };\n}\n/**\n * Turn off text selection blocking.\n */\n\n\nfunction unblockTextSelection() {\n  document.onselectstart = function () {\n    return true;\n  };\n}\n/**\n * Identical to the native `getBoundingClientRect` function, but ensures that\n * the method is supported at all (it is in all browsers we claim to support)\n * and that the element is in the DOM before continuing.\n *\n * This wrapper function also shims properties which are not provided by some\n * older browsers (namely, IE8).\n *\n * Additionally, some browsers do not support adding properties to a\n * `ClientRect`/`DOMRect` object; so, we shallow-copy it with the standard\n * properties (except `x` and `y` which are not widely supported). This helps\n * avoid implementations where keys are non-enumerable.\n *\n * @param  {Element} el\n *         Element whose `ClientRect` we want to calculate.\n *\n * @return {Object|undefined}\n *         Always returns a plain object - or `undefined` if it cannot.\n */\n\n\nfunction getBoundingClientRect(el) {\n  if (el && el.getBoundingClientRect && el.parentNode) {\n    var rect = el.getBoundingClientRect();\n    var result = {};\n    ['bottom', 'height', 'left', 'right', 'top', 'width'].forEach(function (k) {\n      if (rect[k] !== undefined) {\n        result[k] = rect[k];\n      }\n    });\n\n    if (!result.height) {\n      result.height = parseFloat(computedStyle(el, 'height'));\n    }\n\n    if (!result.width) {\n      result.width = parseFloat(computedStyle(el, 'width'));\n    }\n\n    return result;\n  }\n}\n/**\n * Represents the position of a DOM element on the page.\n *\n * @typedef  {Object} module:dom~Position\n *\n * @property {number} left\n *           Pixels to the left.\n *\n * @property {number} top\n *           Pixels from the top.\n */\n\n/**\n * Get the position of an element in the DOM.\n *\n * Uses `getBoundingClientRect` technique from John Resig.\n *\n * @see http://ejohn.org/blog/getboundingclientrect-is-awesome/\n *\n * @param  {Element} el\n *         Element from which to get offset.\n *\n * @return {module:dom~Position}\n *         The position of the element that was passed in.\n */\n\n\nfunction findPosition(el) {\n  if (!el || el && !el.offsetParent) {\n    return {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    };\n  }\n\n  var width = el.offsetWidth;\n  var height = el.offsetHeight;\n  var left = 0;\n  var top = 0;\n\n  while (el.offsetParent && el !== document[FullscreenApi.fullscreenElement]) {\n    left += el.offsetLeft;\n    top += el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  return {\n    left: left,\n    top: top,\n    width: width,\n    height: height\n  };\n}\n/**\n * Represents x and y coordinates for a DOM element or mouse pointer.\n *\n * @typedef  {Object} module:dom~Coordinates\n *\n * @property {number} x\n *           x coordinate in pixels\n *\n * @property {number} y\n *           y coordinate in pixels\n */\n\n/**\n * Get the pointer position within an element.\n *\n * The base on the coordinates are the bottom left of the element.\n *\n * @param  {Element} el\n *         Element on which to get the pointer position on.\n *\n * @param  {EventTarget~Event} event\n *         Event object.\n *\n * @return {module:dom~Coordinates}\n *         A coordinates object corresponding to the mouse position.\n *\n */\n\n\nfunction getPointerPosition(el, event) {\n  var translated = {\n    x: 0,\n    y: 0\n  };\n\n  if (IS_IOS) {\n    var item = el;\n\n    while (item && item.nodeName.toLowerCase() !== 'html') {\n      var transform = computedStyle(item, 'transform');\n\n      if (/^matrix/.test(transform)) {\n        var values = transform.slice(7, -1).split(/,\\s/).map(Number);\n        translated.x += values[4];\n        translated.y += values[5];\n      } else if (/^matrix3d/.test(transform)) {\n        var _values = transform.slice(9, -1).split(/,\\s/).map(Number);\n\n        translated.x += _values[12];\n        translated.y += _values[13];\n      }\n\n      item = item.parentNode;\n    }\n  }\n\n  var position = {};\n  var boxTarget = findPosition(event.target);\n  var box = findPosition(el);\n  var boxW = box.width;\n  var boxH = box.height;\n  var offsetY = event.offsetY - (box.top - boxTarget.top);\n  var offsetX = event.offsetX - (box.left - boxTarget.left);\n\n  if (event.changedTouches) {\n    offsetX = event.changedTouches[0].pageX - box.left;\n    offsetY = event.changedTouches[0].pageY + box.top;\n\n    if (IS_IOS) {\n      offsetX -= translated.x;\n      offsetY -= translated.y;\n    }\n  }\n\n  position.y = 1 - Math.max(0, Math.min(1, offsetY / boxH));\n  position.x = Math.max(0, Math.min(1, offsetX / boxW));\n  return position;\n}\n/**\n * Determines, via duck typing, whether or not a value is a text node.\n *\n * @param  {Mixed} value\n *         Check if this value is a text node.\n *\n * @return {boolean}\n *         Will be `true` if the value is a text node, `false` otherwise.\n */\n\n\nfunction isTextNode(value) {\n  return isObject(value) && value.nodeType === 3;\n}\n/**\n * Empties the contents of an element.\n *\n * @param  {Element} el\n *         The element to empty children from\n *\n * @return {Element}\n *         The element with no children\n */\n\n\nfunction emptyEl(el) {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n\n  return el;\n}\n/**\n * This is a mixed value that describes content to be injected into the DOM\n * via some method. It can be of the following types:\n *\n * Type       | Description\n * -----------|-------------\n * `string`   | The value will be normalized into a text node.\n * `Element`  | The value will be accepted as-is.\n * `TextNode` | The value will be accepted as-is.\n * `Array`    | A one-dimensional array of strings, elements, text nodes, or functions. These functions should return a string, element, or text node (any other return value, like an array, will be ignored).\n * `Function` | A function, which is expected to return a string, element, text node, or array - any of the other possible values described above. This means that a content descriptor could be a function that returns an array of functions, but those second-level functions must return strings, elements, or text nodes.\n *\n * @typedef {string|Element|TextNode|Array|Function} module:dom~ContentDescriptor\n */\n\n/**\n * Normalizes content for eventual insertion into the DOM.\n *\n * This allows a wide range of content definition methods, but helps protect\n * from falling into the trap of simply writing to `innerHTML`, which could\n * be an XSS concern.\n *\n * The content for an element can be passed in multiple types and\n * combinations, whose behavior is as follows:\n *\n * @param {module:dom~ContentDescriptor} content\n *        A content descriptor value.\n *\n * @return {Array}\n *         All of the content that was passed in, normalized to an array of\n *         elements or text nodes.\n */\n\n\nfunction normalizeContent(content) {\n  // First, invoke content if it is a function. If it produces an array,\n  // that needs to happen before normalization.\n  if (typeof content === 'function') {\n    content = content();\n  } // Next up, normalize to an array, so one or many items can be normalized,\n  // filtered, and returned.\n\n\n  return (Array.isArray(content) ? content : [content]).map(function (value) {\n    // First, invoke value if it is a function to produce a new value,\n    // which will be subsequently normalized to a Node of some kind.\n    if (typeof value === 'function') {\n      value = value();\n    }\n\n    if (isEl(value) || isTextNode(value)) {\n      return value;\n    }\n\n    if (typeof value === 'string' && /\\S/.test(value)) {\n      return document.createTextNode(value);\n    }\n  }).filter(function (value) {\n    return value;\n  });\n}\n/**\n * Normalizes and appends content to an element.\n *\n * @param  {Element} el\n *         Element to append normalized content to.\n *\n * @param {module:dom~ContentDescriptor} content\n *        A content descriptor value.\n *\n * @return {Element}\n *         The element with appended normalized content.\n */\n\n\nfunction appendContent(el, content) {\n  normalizeContent(content).forEach(function (node) {\n    return el.appendChild(node);\n  });\n  return el;\n}\n/**\n * Normalizes and inserts content into an element; this is identical to\n * `appendContent()`, except it empties the element first.\n *\n * @param {Element} el\n *        Element to insert normalized content into.\n *\n * @param {module:dom~ContentDescriptor} content\n *        A content descriptor value.\n *\n * @return {Element}\n *         The element with inserted normalized content.\n */\n\n\nfunction insertContent(el, content) {\n  return appendContent(emptyEl(el), content);\n}\n/**\n * Check if an event was a single left click.\n *\n * @param  {EventTarget~Event} event\n *         Event object.\n *\n * @return {boolean}\n *         Will be `true` if a single left click, `false` otherwise.\n */\n\n\nfunction isSingleLeftClick(event) {\n  // Note: if you create something draggable, be sure to\n  // call it on both `mousedown` and `mousemove` event,\n  // otherwise `mousedown` should be enough for a button\n  if (event.button === undefined && event.buttons === undefined) {\n    // Why do we need `buttons` ?\n    // Because, middle mouse sometimes have this:\n    // e.button === 0 and e.buttons === 4\n    // Furthermore, we want to prevent combination click, something like\n    // HOLD middlemouse then left click, that would be\n    // e.button === 0, e.buttons === 5\n    // just `button` is not gonna work\n    // Alright, then what this block does ?\n    // this is for chrome `simulate mobile devices`\n    // I want to support this as well\n    return true;\n  }\n\n  if (event.button === 0 && event.buttons === undefined) {\n    // Touch screen, sometimes on some specific device, `buttons`\n    // doesn't have anything (safari on ios, blackberry...)\n    return true;\n  } // `mouseup` event on a single left click has\n  // `button` and `buttons` equal to 0\n\n\n  if (event.type === 'mouseup' && event.button === 0 && event.buttons === 0) {\n    return true;\n  }\n\n  if (event.button !== 0 || event.buttons !== 1) {\n    // This is the reason we have those if else block above\n    // if any special case we can catch and let it slide\n    // we do it above, when get to here, this definitely\n    // is-not-left-click\n    return false;\n  }\n\n  return true;\n}\n/**\n * Finds a single DOM element matching `selector` within the optional\n * `context` of another DOM element (defaulting to `document`).\n *\n * @param  {string} selector\n *         A valid CSS selector, which will be passed to `querySelector`.\n *\n * @param  {Element|String} [context=document]\n *         A DOM element within which to query. Can also be a selector\n *         string in which case the first matching element will be used\n *         as context. If missing (or no element matches selector), falls\n *         back to `document`.\n *\n * @return {Element|null}\n *         The element that was found or null.\n */\n\n\nvar $ = createQuerier('querySelector');\n/**\n * Finds a all DOM elements matching `selector` within the optional\n * `context` of another DOM element (defaulting to `document`).\n *\n * @param  {string} selector\n *         A valid CSS selector, which will be passed to `querySelectorAll`.\n *\n * @param  {Element|String} [context=document]\n *         A DOM element within which to query. Can also be a selector\n *         string in which case the first matching element will be used\n *         as context. If missing (or no element matches selector), falls\n *         back to `document`.\n *\n * @return {NodeList}\n *         A element list of elements that were found. Will be empty if none\n *         were found.\n *\n */\n\nvar $$ = createQuerier('querySelectorAll');\nvar Dom = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  isReal: isReal,\n  isEl: isEl,\n  isInFrame: isInFrame,\n  createEl: createEl,\n  textContent: textContent,\n  prependTo: prependTo,\n  hasClass: hasClass,\n  addClass: addClass,\n  removeClass: removeClass,\n  toggleClass: toggleClass,\n  setAttributes: setAttributes,\n  getAttributes: getAttributes,\n  getAttribute: getAttribute,\n  setAttribute: setAttribute,\n  removeAttribute: removeAttribute,\n  blockTextSelection: blockTextSelection,\n  unblockTextSelection: unblockTextSelection,\n  getBoundingClientRect: getBoundingClientRect,\n  findPosition: findPosition,\n  getPointerPosition: getPointerPosition,\n  isTextNode: isTextNode,\n  emptyEl: emptyEl,\n  normalizeContent: normalizeContent,\n  appendContent: appendContent,\n  insertContent: insertContent,\n  isSingleLeftClick: isSingleLeftClick,\n  $: $,\n  $$: $$\n});\n/**\n * @file setup.js - Functions for setting up a player without\n * user interaction based on the data-setup `attribute` of the video tag.\n *\n * @module setup\n */\n\nvar _windowLoaded = false;\nvar videojs$1;\n/**\n * Set up any tags that have a data-setup `attribute` when the player is started.\n */\n\nvar autoSetup = function autoSetup() {\n  if (videojs$1.options.autoSetup === false) {\n    return;\n  }\n\n  var vids = Array.prototype.slice.call(document.getElementsByTagName('video'));\n  var audios = Array.prototype.slice.call(document.getElementsByTagName('audio'));\n  var divs = Array.prototype.slice.call(document.getElementsByTagName('video-js'));\n  var mediaEls = vids.concat(audios, divs); // Check if any media elements exist\n\n  if (mediaEls && mediaEls.length > 0) {\n    for (var i = 0, e = mediaEls.length; i < e; i++) {\n      var mediaEl = mediaEls[i]; // Check if element exists, has getAttribute func.\n\n      if (mediaEl && mediaEl.getAttribute) {\n        // Make sure this player hasn't already been set up.\n        if (mediaEl.player === undefined) {\n          var options = mediaEl.getAttribute('data-setup'); // Check if data-setup attr exists.\n          // We only auto-setup if they've added the data-setup attr.\n\n          if (options !== null) {\n            // Create new video.js instance.\n            videojs$1(mediaEl);\n          }\n        } // If getAttribute isn't defined, we need to wait for the DOM.\n\n      } else {\n        autoSetupTimeout(1);\n        break;\n      }\n    } // No videos were found, so keep looping unless page is finished loading.\n\n  } else if (!_windowLoaded) {\n    autoSetupTimeout(1);\n  }\n};\n/**\n * Wait until the page is loaded before running autoSetup. This will be called in\n * autoSetup if `hasLoaded` returns false.\n *\n * @param {number} wait\n *        How long to wait in ms\n *\n * @param {module:videojs} [vjs]\n *        The videojs library function\n */\n\n\nfunction autoSetupTimeout(wait, vjs) {\n  // Protect against breakage in non-browser environments\n  if (!isReal()) {\n    return;\n  }\n\n  if (vjs) {\n    videojs$1 = vjs;\n  }\n\n  window$1.setTimeout(autoSetup, wait);\n}\n/**\n * Used to set the internal tracking of window loaded state to true.\n *\n * @private\n */\n\n\nfunction setWindowLoaded() {\n  _windowLoaded = true;\n  window$1.removeEventListener('load', setWindowLoaded);\n}\n\nif (isReal()) {\n  if (document.readyState === 'complete') {\n    setWindowLoaded();\n  } else {\n    /**\n     * Listen for the load event on window, and set _windowLoaded to true.\n     *\n     * We use a standard event listener here to avoid incrementing the GUID\n     * before any players are created.\n     *\n     * @listens load\n     */\n    window$1.addEventListener('load', setWindowLoaded);\n  }\n}\n/**\n * @file stylesheet.js\n * @module stylesheet\n */\n\n/**\n * Create a DOM syle element given a className for it.\n *\n * @param {string} className\n *        The className to add to the created style element.\n *\n * @return {Element}\n *         The element that was created.\n */\n\n\nvar createStyleElement = function createStyleElement(className) {\n  var style = document.createElement('style');\n  style.className = className;\n  return style;\n};\n/**\n * Add text to a DOM element.\n *\n * @param {Element} el\n *        The Element to add text content to.\n *\n * @param {string} content\n *        The text to add to the element.\n */\n\n\nvar setTextContent = function setTextContent(el, content) {\n  if (el.styleSheet) {\n    el.styleSheet.cssText = content;\n  } else {\n    el.textContent = content;\n  }\n};\n/**\n * @file guid.js\n * @module guid\n */\n// Default value for GUIDs. This allows us to reset the GUID counter in tests.\n//\n// The initial GUID is 3 because some users have come to rely on the first\n// default player ID ending up as `vjs_video_3`.\n//\n// See: https://github.com/videojs/video.js/pull/6216\n\n\nvar _initialGuid = 3;\n/**\n * Unique ID for an element or function\n *\n * @type {Number}\n */\n\nvar _guid = _initialGuid;\n/**\n * Get a unique auto-incrementing ID by number that has not been returned before.\n *\n * @return {number}\n *         A new unique ID.\n */\n\nfunction newGUID() {\n  return _guid++;\n}\n/**\n * @file dom-data.js\n * @module dom-data\n */\n\n\nvar FakeWeakMap;\n\nif (!window$1.WeakMap) {\n  FakeWeakMap = /*#__PURE__*/function () {\n    function FakeWeakMap() {\n      this.vdata = 'vdata' + Math.floor(window$1.performance && window$1.performance.now() || Date.now());\n      this.data = {};\n    }\n\n    var _proto = FakeWeakMap.prototype;\n\n    _proto.set = function set(key, value) {\n      var access = key[this.vdata] || newGUID();\n\n      if (!key[this.vdata]) {\n        key[this.vdata] = access;\n      }\n\n      this.data[access] = value;\n      return this;\n    };\n\n    _proto.get = function get(key) {\n      var access = key[this.vdata]; // we have data, return it\n\n      if (access) {\n        return this.data[access];\n      } // we don't have data, return nothing.\n      // return undefined explicitly as that's the contract for this method\n\n\n      log$1('We have no data for this element', key);\n      return undefined;\n    };\n\n    _proto.has = function has(key) {\n      var access = key[this.vdata];\n      return access in this.data;\n    };\n\n    _proto[\"delete\"] = function _delete(key) {\n      var access = key[this.vdata];\n\n      if (access) {\n        delete this.data[access];\n        delete key[this.vdata];\n      }\n    };\n\n    return FakeWeakMap;\n  }();\n}\n/**\n * Element Data Store.\n *\n * Allows for binding data to an element without putting it directly on the\n * element. Ex. Event listeners are stored here.\n * (also from jsninja.com, slightly modified and updated for closure compiler)\n *\n * @type {Object}\n * @private\n */\n\n\nvar DomData = window$1.WeakMap ? new WeakMap() : new FakeWeakMap();\n/**\n * @file events.js. An Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)\n * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)\n * This should work very similarly to jQuery's events, however it's based off the book version which isn't as\n * robust as jquery's, so there's probably some differences.\n *\n * @file events.js\n * @module events\n */\n\n/**\n * Clean up the listener cache and dispatchers\n *\n * @param {Element|Object} elem\n *        Element to clean up\n *\n * @param {string} type\n *        Type of event to clean up\n */\n\nfunction _cleanUpEvents(elem, type) {\n  if (!DomData.has(elem)) {\n    return;\n  }\n\n  var data = DomData.get(elem); // Remove the events of a particular type if there are none left\n\n  if (data.handlers[type].length === 0) {\n    delete data.handlers[type]; // data.handlers[type] = null;\n    // Setting to null was causing an error with data.handlers\n    // Remove the meta-handler from the element\n\n    if (elem.removeEventListener) {\n      elem.removeEventListener(type, data.dispatcher, false);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + type, data.dispatcher);\n    }\n  } // Remove the events object if there are no types left\n\n\n  if (Object.getOwnPropertyNames(data.handlers).length <= 0) {\n    delete data.handlers;\n    delete data.dispatcher;\n    delete data.disabled;\n  } // Finally remove the element data if there is no data left\n\n\n  if (Object.getOwnPropertyNames(data).length === 0) {\n    DomData[\"delete\"](elem);\n  }\n}\n/**\n * Loops through an array of event types and calls the requested method for each type.\n *\n * @param {Function} fn\n *        The event method we want to use.\n *\n * @param {Element|Object} elem\n *        Element or object to bind listeners to\n *\n * @param {string} type\n *        Type of event to bind to.\n *\n * @param {EventTarget~EventListener} callback\n *        Event listener.\n */\n\n\nfunction _handleMultipleEvents(fn, elem, types, callback) {\n  types.forEach(function (type) {\n    // Call the event method for each one of the types\n    fn(elem, type, callback);\n  });\n}\n/**\n * Fix a native event to have standard property values\n *\n * @param {Object} event\n *        Event object to fix.\n *\n * @return {Object}\n *         Fixed event object.\n */\n\n\nfunction fixEvent(event) {\n  if (event.fixed_) {\n    return event;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function returnFalse() {\n    return false;\n  } // Test if fixing up is needed\n  // Used to check if !event.stopPropagation instead of isPropagationStopped\n  // But native events return true for stopPropagation, but don't have\n  // other expected methods like isPropagationStopped. Seems to be a problem\n  // with the Javascript Ninja code. So we're just overriding all events now.\n\n\n  if (!event || !event.isPropagationStopped || !event.isImmediatePropagationStopped) {\n    var old = event || window$1.event;\n    event = {}; // Clone the old object so that we can modify the values event = {};\n    // IE8 Doesn't like when you mess with native event properties\n    // Firefox returns false for event.hasOwnProperty('type') and other props\n    //  which makes copying more difficult.\n    // TODO: Probably best to create a whitelist of event props\n\n    for (var key in old) {\n      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y\n      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation\n      // and webkitMovementX/Y\n      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyLocation' && key !== 'webkitMovementX' && key !== 'webkitMovementY') {\n        // Chrome 32+ warns if you try to copy deprecated returnValue, but\n        // we still want to if preventDefault isn't supported (IE8).\n        if (!(key === 'returnValue' && old.preventDefault)) {\n          event[key] = old[key];\n        }\n      }\n    } // The event occurred on this element\n\n\n    if (!event.target) {\n      event.target = event.srcElement || document;\n    } // Handle which other element the event is related to\n\n\n    if (!event.relatedTarget) {\n      event.relatedTarget = event.fromElement === event.target ? event.toElement : event.fromElement;\n    } // Stop the default browser action\n\n\n    event.preventDefault = function () {\n      if (old.preventDefault) {\n        old.preventDefault();\n      }\n\n      event.returnValue = false;\n      old.returnValue = false;\n      event.defaultPrevented = true;\n    };\n\n    event.defaultPrevented = false; // Stop the event from bubbling\n\n    event.stopPropagation = function () {\n      if (old.stopPropagation) {\n        old.stopPropagation();\n      }\n\n      event.cancelBubble = true;\n      old.cancelBubble = true;\n      event.isPropagationStopped = returnTrue;\n    };\n\n    event.isPropagationStopped = returnFalse; // Stop the event from bubbling and executing other handlers\n\n    event.stopImmediatePropagation = function () {\n      if (old.stopImmediatePropagation) {\n        old.stopImmediatePropagation();\n      }\n\n      event.isImmediatePropagationStopped = returnTrue;\n      event.stopPropagation();\n    };\n\n    event.isImmediatePropagationStopped = returnFalse; // Handle mouse position\n\n    if (event.clientX !== null && event.clientX !== undefined) {\n      var doc = document.documentElement;\n      var body = document.body;\n      event.pageX = event.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n      event.pageY = event.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n    } // Handle key presses\n\n\n    event.which = event.charCode || event.keyCode; // Fix button for mouse clicks:\n    // 0 == left; 1 == middle; 2 == right\n\n    if (event.button !== null && event.button !== undefined) {\n      // The following is disabled because it does not pass videojs-standard\n      // and... yikes.\n\n      /* eslint-disable */\n      event.button = event.button & 1 ? 0 : event.button & 4 ? 1 : event.button & 2 ? 2 : 0;\n      /* eslint-enable */\n    }\n  }\n\n  event.fixed_ = true; // Returns fixed-up instance\n\n  return event;\n}\n/**\n * Whether passive event listeners are supported\n */\n\n\nvar _supportsPassive;\n\nvar supportsPassive = function supportsPassive() {\n  if (typeof _supportsPassive !== 'boolean') {\n    _supportsPassive = false;\n\n    try {\n      var opts = Object.defineProperty({}, 'passive', {\n        get: function get() {\n          _supportsPassive = true;\n        }\n      });\n      window$1.addEventListener('test', null, opts);\n      window$1.removeEventListener('test', null, opts);\n    } catch (e) {// disregard\n    }\n  }\n\n  return _supportsPassive;\n};\n/**\n * Touch events Chrome expects to be passive\n */\n\n\nvar passiveEvents = ['touchstart', 'touchmove'];\n/**\n * Add an event listener to element\n * It stores the handler function in a separate cache object\n * and adds a generic handler to the element's event,\n * along with a unique id (guid) to the element.\n *\n * @param {Element|Object} elem\n *        Element or object to bind listeners to\n *\n * @param {string|string[]} type\n *        Type of event to bind to.\n *\n * @param {EventTarget~EventListener} fn\n *        Event listener.\n */\n\nfunction on(elem, type, fn) {\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(on, elem, type, fn);\n  }\n\n  if (!DomData.has(elem)) {\n    DomData.set(elem, {});\n  }\n\n  var data = DomData.get(elem); // We need a place to store all our handler data\n\n  if (!data.handlers) {\n    data.handlers = {};\n  }\n\n  if (!data.handlers[type]) {\n    data.handlers[type] = [];\n  }\n\n  if (!fn.guid) {\n    fn.guid = newGUID();\n  }\n\n  data.handlers[type].push(fn);\n\n  if (!data.dispatcher) {\n    data.disabled = false;\n\n    data.dispatcher = function (event, hash) {\n      if (data.disabled) {\n        return;\n      }\n\n      event = fixEvent(event);\n      var handlers = data.handlers[event.type];\n\n      if (handlers) {\n        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.\n        var handlersCopy = handlers.slice(0);\n\n        for (var m = 0, n = handlersCopy.length; m < n; m++) {\n          if (event.isImmediatePropagationStopped()) {\n            break;\n          } else {\n            try {\n              handlersCopy[m].call(elem, event, hash);\n            } catch (e) {\n              log$1.error(e);\n            }\n          }\n        }\n      }\n    };\n  }\n\n  if (data.handlers[type].length === 1) {\n    if (elem.addEventListener) {\n      var options = false;\n\n      if (supportsPassive() && passiveEvents.indexOf(type) > -1) {\n        options = {\n          passive: true\n        };\n      }\n\n      elem.addEventListener(type, data.dispatcher, options);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + type, data.dispatcher);\n    }\n  }\n}\n/**\n * Removes event listeners from an element\n *\n * @param {Element|Object} elem\n *        Object to remove listeners from.\n *\n * @param {string|string[]} [type]\n *        Type of listener to remove. Don't include to remove all events from element.\n *\n * @param {EventTarget~EventListener} [fn]\n *        Specific listener to remove. Don't include to remove listeners for an event\n *        type.\n */\n\n\nfunction off(elem, type, fn) {\n  // Don't want to add a cache object through getElData if not needed\n  if (!DomData.has(elem)) {\n    return;\n  }\n\n  var data = DomData.get(elem); // If no events exist, nothing to unbind\n\n  if (!data.handlers) {\n    return;\n  }\n\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(off, elem, type, fn);\n  } // Utility function\n\n\n  var removeType = function removeType(el, t) {\n    data.handlers[t] = [];\n\n    _cleanUpEvents(el, t);\n  }; // Are we removing all bound events?\n\n\n  if (type === undefined) {\n    for (var t in data.handlers) {\n      if (Object.prototype.hasOwnProperty.call(data.handlers || {}, t)) {\n        removeType(elem, t);\n      }\n    }\n\n    return;\n  }\n\n  var handlers = data.handlers[type]; // If no handlers exist, nothing to unbind\n\n  if (!handlers) {\n    return;\n  } // If no listener was provided, remove all listeners for type\n\n\n  if (!fn) {\n    removeType(elem, type);\n    return;\n  } // We're only removing a single handler\n\n\n  if (fn.guid) {\n    for (var n = 0; n < handlers.length; n++) {\n      if (handlers[n].guid === fn.guid) {\n        handlers.splice(n--, 1);\n      }\n    }\n  }\n\n  _cleanUpEvents(elem, type);\n}\n/**\n * Trigger an event for an element\n *\n * @param {Element|Object} elem\n *        Element to trigger an event on\n *\n * @param {EventTarget~Event|string} event\n *        A string (the type) or an event object with a type attribute\n *\n * @param {Object} [hash]\n *        data hash to pass along with the event\n *\n * @return {boolean|undefined}\n *         Returns the opposite of `defaultPrevented` if default was\n *         prevented. Otherwise, returns `undefined`\n */\n\n\nfunction trigger(elem, event, hash) {\n  // Fetches element data and a reference to the parent (for bubbling).\n  // Don't want to add a data object to cache for every parent,\n  // so checking hasElData first.\n  var elemData = DomData.has(elem) ? DomData.get(elem) : {};\n  var parent = elem.parentNode || elem.ownerDocument; // type = event.type || event,\n  // handler;\n  // If an event name was passed as a string, creates an event out of it\n\n  if (typeof event === 'string') {\n    event = {\n      type: event,\n      target: elem\n    };\n  } else if (!event.target) {\n    event.target = elem;\n  } // Normalizes the event properties.\n\n\n  event = fixEvent(event); // If the passed element has a dispatcher, executes the established handlers.\n\n  if (elemData.dispatcher) {\n    elemData.dispatcher.call(elem, event, hash);\n  } // Unless explicitly stopped or the event does not bubble (e.g. media events)\n  // recursively calls this function to bubble the event up the DOM.\n\n\n  if (parent && !event.isPropagationStopped() && event.bubbles === true) {\n    trigger.call(null, parent, event, hash); // If at the top of the DOM, triggers the default action unless disabled.\n  } else if (!parent && !event.defaultPrevented && event.target && event.target[event.type]) {\n    if (!DomData.has(event.target)) {\n      DomData.set(event.target, {});\n    }\n\n    var targetData = DomData.get(event.target); // Checks if the target has a default action for this event.\n\n    if (event.target[event.type]) {\n      // Temporarily disables event dispatching on the target as we have already executed the handler.\n      targetData.disabled = true; // Executes the default action.\n\n      if (typeof event.target[event.type] === 'function') {\n        event.target[event.type]();\n      } // Re-enables event dispatching.\n\n\n      targetData.disabled = false;\n    }\n  } // Inform the triggerer if the default was prevented by returning false\n\n\n  return !event.defaultPrevented;\n}\n/**\n * Trigger a listener only once for an event.\n *\n * @param {Element|Object} elem\n *        Element or object to bind to.\n *\n * @param {string|string[]} type\n *        Name/type of event\n *\n * @param {Event~EventListener} fn\n *        Event listener function\n */\n\n\nfunction one(elem, type, fn) {\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(one, elem, type, fn);\n  }\n\n  var func = function func() {\n    off(elem, type, func);\n    fn.apply(this, arguments);\n  }; // copy the guid to the new function so it can removed using the original function's ID\n\n\n  func.guid = fn.guid = fn.guid || newGUID();\n  on(elem, type, func);\n}\n/**\n * Trigger a listener only once and then turn if off for all\n * configured events\n *\n * @param {Element|Object} elem\n *        Element or object to bind to.\n *\n * @param {string|string[]} type\n *        Name/type of event\n *\n * @param {Event~EventListener} fn\n *        Event listener function\n */\n\n\nfunction any(elem, type, fn) {\n  var func = function func() {\n    off(elem, type, func);\n    fn.apply(this, arguments);\n  }; // copy the guid to the new function so it can removed using the original function's ID\n\n\n  func.guid = fn.guid = fn.guid || newGUID(); // multiple ons, but one off for everything\n\n  on(elem, type, func);\n}\n\nvar Events = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  fixEvent: fixEvent,\n  on: on,\n  off: off,\n  trigger: trigger,\n  one: one,\n  any: any\n});\n/**\n * @file fn.js\n * @module fn\n */\n\nvar UPDATE_REFRESH_INTERVAL = 30;\n/**\n * Bind (a.k.a proxy or context). A simple method for changing the context of\n * a function.\n *\n * It also stores a unique id on the function so it can be easily removed from\n * events.\n *\n * @function\n * @param    {Mixed} context\n *           The object to bind as scope.\n *\n * @param    {Function} fn\n *           The function to be bound to a scope.\n *\n * @param    {number} [uid]\n *           An optional unique ID for the function to be set\n *\n * @return   {Function}\n *           The new function that will be bound into the context given\n */\n\nvar bind = function bind(context, fn, uid) {\n  // Make sure the function has a unique ID\n  if (!fn.guid) {\n    fn.guid = newGUID();\n  } // Create the new function that changes the context\n\n\n  var bound = fn.bind(context); // Allow for the ability to individualize this function\n  // Needed in the case where multiple objects might share the same prototype\n  // IF both items add an event listener with the same function, then you try to remove just one\n  // it will remove both because they both have the same guid.\n  // when using this, you need to use the bind method when you remove the listener as well.\n  // currently used in text tracks\n\n  bound.guid = uid ? uid + '_' + fn.guid : fn.guid;\n  return bound;\n};\n/**\n * Wraps the given function, `fn`, with a new function that only invokes `fn`\n * at most once per every `wait` milliseconds.\n *\n * @function\n * @param    {Function} fn\n *           The function to be throttled.\n *\n * @param    {number}   wait\n *           The number of milliseconds by which to throttle.\n *\n * @return   {Function}\n */\n\n\nvar throttle = function throttle(fn, wait) {\n  var last = window$1.performance.now();\n\n  var throttled = function throttled() {\n    var now = window$1.performance.now();\n\n    if (now - last >= wait) {\n      fn.apply(void 0, arguments);\n      last = now;\n    }\n  };\n\n  return throttled;\n};\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked.\n *\n * Inspired by lodash and underscore implementations.\n *\n * @function\n * @param    {Function} func\n *           The function to wrap with debounce behavior.\n *\n * @param    {number} wait\n *           The number of milliseconds to wait after the last invocation.\n *\n * @param    {boolean} [immediate]\n *           Whether or not to invoke the function immediately upon creation.\n *\n * @param    {Object} [context=window]\n *           The \"context\" in which the debounced function should debounce. For\n *           example, if this function should be tied to a Video.js player,\n *           the player can be passed here. Alternatively, defaults to the\n *           global `window` object.\n *\n * @return   {Function}\n *           A debounced function.\n */\n\n\nvar debounce = function debounce(func, wait, immediate, context) {\n  if (context === void 0) {\n    context = window$1;\n  }\n\n  var timeout;\n\n  var cancel = function cancel() {\n    context.clearTimeout(timeout);\n    timeout = null;\n  };\n  /* eslint-disable consistent-this */\n\n\n  var debounced = function debounced() {\n    var self = this;\n    var args = arguments;\n\n    var _later = function later() {\n      timeout = null;\n      _later = null;\n\n      if (!immediate) {\n        func.apply(self, args);\n      }\n    };\n\n    if (!timeout && immediate) {\n      func.apply(self, args);\n    }\n\n    context.clearTimeout(timeout);\n    timeout = context.setTimeout(_later, wait);\n  };\n  /* eslint-enable consistent-this */\n\n\n  debounced.cancel = cancel;\n  return debounced;\n};\n/**\n * @file src/js/event-target.js\n */\n\n/**\n * `EventTarget` is a class that can have the same API as the DOM `EventTarget`. It\n * adds shorthand functions that wrap around lengthy functions. For example:\n * the `on` function is a wrapper around `addEventListener`.\n *\n * @see [EventTarget Spec]{@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget}\n * @class EventTarget\n */\n\n\nvar EventTarget$2 = function EventTarget() {};\n/**\n * A Custom DOM event.\n *\n * @typedef {Object} EventTarget~Event\n * @see [Properties]{@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}\n */\n\n/**\n * All event listeners should follow the following format.\n *\n * @callback EventTarget~EventListener\n * @this {EventTarget}\n *\n * @param {EventTarget~Event} event\n *        the event that triggered this function\n *\n * @param {Object} [hash]\n *        hash of data sent during the event\n */\n\n/**\n * An object containing event names as keys and booleans as values.\n *\n * > NOTE: If an event name is set to a true value here {@link EventTarget#trigger}\n *         will have extra functionality. See that function for more information.\n *\n * @property EventTarget.prototype.allowedEvents_\n * @private\n */\n\n\nEventTarget$2.prototype.allowedEvents_ = {};\n/**\n * Adds an `event listener` to an instance of an `EventTarget`. An `event listener` is a\n * function that will get called when an event with a certain name gets triggered.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to call with `EventTarget`s\n */\n\nEventTarget$2.prototype.on = function (type, fn) {\n  // Remove the addEventListener alias before calling Events.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n\n  this.addEventListener = function () {};\n\n  on(this, type, fn);\n  this.addEventListener = ael;\n};\n/**\n * An alias of {@link EventTarget#on}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#on}\n */\n\n\nEventTarget$2.prototype.addEventListener = EventTarget$2.prototype.on;\n/**\n * Removes an `event listener` for a specific event from an instance of `EventTarget`.\n * This makes it so that the `event listener` will no longer get called when the\n * named event happens.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to remove.\n */\n\nEventTarget$2.prototype.off = function (type, fn) {\n  off(this, type, fn);\n};\n/**\n * An alias of {@link EventTarget#off}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#off}\n */\n\n\nEventTarget$2.prototype.removeEventListener = EventTarget$2.prototype.off;\n/**\n * This function will add an `event listener` that gets triggered only once. After the\n * first trigger it will get removed. This is like adding an `event listener`\n * with {@link EventTarget#on} that calls {@link EventTarget#off} on itself.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to be called once for each event name.\n */\n\nEventTarget$2.prototype.one = function (type, fn) {\n  // Remove the addEventListener aliasing Events.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n\n  this.addEventListener = function () {};\n\n  one(this, type, fn);\n  this.addEventListener = ael;\n};\n\nEventTarget$2.prototype.any = function (type, fn) {\n  // Remove the addEventListener aliasing Events.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n\n  this.addEventListener = function () {};\n\n  any(this, type, fn);\n  this.addEventListener = ael;\n};\n/**\n * This function causes an event to happen. This will then cause any `event listeners`\n * that are waiting for that event, to get called. If there are no `event listeners`\n * for an event then nothing will happen.\n *\n * If the name of the `Event` that is being triggered is in `EventTarget.allowedEvents_`.\n * Trigger will also call the `on` + `uppercaseEventName` function.\n *\n * Example:\n * 'click' is in `EventTarget.allowedEvents_`, so, trigger will attempt to call\n * `onClick` if it exists.\n *\n * @param {string|EventTarget~Event|Object} event\n *        The name of the event, an `Event`, or an object with a key of type set to\n *        an event name.\n */\n\n\nEventTarget$2.prototype.trigger = function (event) {\n  var type = event.type || event; // deprecation\n  // In a future version we should default target to `this`\n  // similar to how we default the target to `elem` in\n  // `Events.trigger`. Right now the default `target` will be\n  // `document` due to the `Event.fixEvent` call.\n\n  if (typeof event === 'string') {\n    event = {\n      type: type\n    };\n  }\n\n  event = fixEvent(event);\n\n  if (this.allowedEvents_[type] && this['on' + type]) {\n    this['on' + type](event);\n  }\n\n  trigger(this, event);\n};\n/**\n * An alias of {@link EventTarget#trigger}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#trigger}\n */\n\n\nEventTarget$2.prototype.dispatchEvent = EventTarget$2.prototype.trigger;\nvar EVENT_MAP;\n\nEventTarget$2.prototype.queueTrigger = function (event) {\n  var _this = this; // only set up EVENT_MAP if it'll be used\n\n\n  if (!EVENT_MAP) {\n    EVENT_MAP = new Map();\n  }\n\n  var type = event.type || event;\n  var map = EVENT_MAP.get(this);\n\n  if (!map) {\n    map = new Map();\n    EVENT_MAP.set(this, map);\n  }\n\n  var oldTimeout = map.get(type);\n  map[\"delete\"](type);\n  window$1.clearTimeout(oldTimeout);\n  var timeout = window$1.setTimeout(function () {\n    // if we cleared out all timeouts for the current target, delete its map\n    if (map.size === 0) {\n      map = null;\n      EVENT_MAP[\"delete\"](_this);\n    }\n\n    _this.trigger(event);\n  }, 0);\n  map.set(type, timeout);\n};\n/**\n * @file mixins/evented.js\n * @module evented\n */\n\n\nvar objName = function objName(obj) {\n  if (typeof obj.name === 'function') {\n    return obj.name();\n  }\n\n  if (typeof obj.name === 'string') {\n    return obj.name;\n  }\n\n  if (obj.name_) {\n    return obj.name_;\n  }\n\n  if (obj.constructor && obj.constructor.name) {\n    return obj.constructor.name;\n  }\n\n  return _typeof(obj);\n};\n/**\n * Returns whether or not an object has had the evented mixin applied.\n *\n * @param  {Object} object\n *         An object to test.\n *\n * @return {boolean}\n *         Whether or not the object appears to be evented.\n */\n\n\nvar isEvented = function isEvented(object) {\n  return object instanceof EventTarget$2 || !!object.eventBusEl_ && ['on', 'one', 'off', 'trigger'].every(function (k) {\n    return typeof object[k] === 'function';\n  });\n};\n/**\n * Adds a callback to run after the evented mixin applied.\n *\n * @param  {Object} object\n *         An object to Add\n * @param  {Function} callback\n *         The callback to run.\n */\n\n\nvar addEventedCallback = function addEventedCallback(target, callback) {\n  if (isEvented(target)) {\n    callback();\n  } else {\n    if (!target.eventedCallbacks) {\n      target.eventedCallbacks = [];\n    }\n\n    target.eventedCallbacks.push(callback);\n  }\n};\n/**\n * Whether a value is a valid event type - non-empty string or array.\n *\n * @private\n * @param  {string|Array} type\n *         The type value to test.\n *\n * @return {boolean}\n *         Whether or not the type is a valid event type.\n */\n\n\nvar isValidEventType = function isValidEventType(type) {\n  return (// The regex here verifies that the `type` contains at least one non-\n    // whitespace character.\n    typeof type === 'string' && /\\S/.test(type) || Array.isArray(type) && !!type.length\n  );\n};\n/**\n * Validates a value to determine if it is a valid event target. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the target does not appear to be a valid event target.\n *\n * @param  {Object} target\n *         The object to test.\n *\n * @param  {Object} obj\n *         The evented object we are validating for\n *\n * @param  {string} fnName\n *         The name of the evented mixin function that called this.\n */\n\n\nvar validateTarget = function validateTarget(target, obj, fnName) {\n  if (!target || !target.nodeName && !isEvented(target)) {\n    throw new Error(\"Invalid target for \" + objName(obj) + \"#\" + fnName + \"; must be a DOM node or evented object.\");\n  }\n};\n/**\n * Validates a value to determine if it is a valid event target. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the type does not appear to be a valid event type.\n *\n * @param  {string|Array} type\n *         The type to test.\n *\n * @param  {Object} obj\n*         The evented object we are validating for\n *\n * @param  {string} fnName\n *         The name of the evented mixin function that called this.\n */\n\n\nvar validateEventType = function validateEventType(type, obj, fnName) {\n  if (!isValidEventType(type)) {\n    throw new Error(\"Invalid event type for \" + objName(obj) + \"#\" + fnName + \"; must be a non-empty string or array.\");\n  }\n};\n/**\n * Validates a value to determine if it is a valid listener. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the listener is not a function.\n *\n * @param  {Function} listener\n *         The listener to test.\n *\n * @param  {Object} obj\n *         The evented object we are validating for\n *\n * @param  {string} fnName\n *         The name of the evented mixin function that called this.\n */\n\n\nvar validateListener = function validateListener(listener, obj, fnName) {\n  if (typeof listener !== 'function') {\n    throw new Error(\"Invalid listener for \" + objName(obj) + \"#\" + fnName + \"; must be a function.\");\n  }\n};\n/**\n * Takes an array of arguments given to `on()` or `one()`, validates them, and\n * normalizes them into an object.\n *\n * @private\n * @param  {Object} self\n *         The evented object on which `on()` or `one()` was called. This\n *         object will be bound as the `this` value for the listener.\n *\n * @param  {Array} args\n *         An array of arguments passed to `on()` or `one()`.\n *\n * @param  {string} fnName\n *         The name of the evented mixin function that called this.\n *\n * @return {Object}\n *         An object containing useful values for `on()` or `one()` calls.\n */\n\n\nvar normalizeListenArgs = function normalizeListenArgs(self, args, fnName) {\n  // If the number of arguments is less than 3, the target is always the\n  // evented object itself.\n  var isTargetingSelf = args.length < 3 || args[0] === self || args[0] === self.eventBusEl_;\n  var target;\n  var type;\n  var listener;\n\n  if (isTargetingSelf) {\n    target = self.eventBusEl_; // Deal with cases where we got 3 arguments, but we are still listening to\n    // the evented object itself.\n\n    if (args.length >= 3) {\n      args.shift();\n    }\n\n    type = args[0];\n    listener = args[1];\n  } else {\n    target = args[0];\n    type = args[1];\n    listener = args[2];\n  }\n\n  validateTarget(target, self, fnName);\n  validateEventType(type, self, fnName);\n  validateListener(listener, self, fnName);\n  listener = bind(self, listener);\n  return {\n    isTargetingSelf: isTargetingSelf,\n    target: target,\n    type: type,\n    listener: listener\n  };\n};\n/**\n * Adds the listener to the event type(s) on the target, normalizing for\n * the type of target.\n *\n * @private\n * @param  {Element|Object} target\n *         A DOM node or evented object.\n *\n * @param  {string} method\n *         The event binding method to use (\"on\" or \"one\").\n *\n * @param  {string|Array} type\n *         One or more event type(s).\n *\n * @param  {Function} listener\n *         A listener function.\n */\n\n\nvar listen = function listen(target, method, type, listener) {\n  validateTarget(target, target, method);\n\n  if (target.nodeName) {\n    Events[method](target, type, listener);\n  } else {\n    target[method](type, listener);\n  }\n};\n/**\n * Contains methods that provide event capabilities to an object which is passed\n * to {@link module:evented|evented}.\n *\n * @mixin EventedMixin\n */\n\n\nvar EventedMixin = {\n  /**\n   * Add a listener to an event (or events) on this object or another evented\n   * object.\n   *\n   * @param  {string|Array|Element|Object} targetOrType\n   *         If this is a string or array, it represents the event type(s)\n   *         that will trigger the listener.\n   *\n   *         Another evented object can be passed here instead, which will\n   *         cause the listener to listen for events on _that_ object.\n   *\n   *         In either case, the listener's `this` value will be bound to\n   *         this object.\n   *\n   * @param  {string|Array|Function} typeOrListener\n   *         If the first argument was a string or array, this should be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function.\n   */\n  on: function on() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _normalizeListenArgs = normalizeListenArgs(this, args, 'on'),\n        isTargetingSelf = _normalizeListenArgs.isTargetingSelf,\n        target = _normalizeListenArgs.target,\n        type = _normalizeListenArgs.type,\n        listener = _normalizeListenArgs.listener;\n\n    listen(target, 'on', type, listener); // If this object is listening to another evented object.\n\n    if (!isTargetingSelf) {\n      // If this object is disposed, remove the listener.\n      var removeListenerOnDispose = function removeListenerOnDispose() {\n        return _this.off(target, type, listener);\n      }; // Use the same function ID as the listener so we can remove it later it\n      // using the ID of the original listener.\n\n\n      removeListenerOnDispose.guid = listener.guid; // Add a listener to the target's dispose event as well. This ensures\n      // that if the target is disposed BEFORE this object, we remove the\n      // removal listener that was just added. Otherwise, we create a memory leak.\n\n      var removeRemoverOnTargetDispose = function removeRemoverOnTargetDispose() {\n        return _this.off('dispose', removeListenerOnDispose);\n      }; // Use the same function ID as the listener so we can remove it later\n      // it using the ID of the original listener.\n\n\n      removeRemoverOnTargetDispose.guid = listener.guid;\n      listen(this, 'on', 'dispose', removeListenerOnDispose);\n      listen(target, 'on', 'dispose', removeRemoverOnTargetDispose);\n    }\n  },\n\n  /**\n   * Add a listener to an event (or events) on this object or another evented\n   * object. The listener will be called once per event and then removed.\n   *\n   * @param  {string|Array|Element|Object} targetOrType\n   *         If this is a string or array, it represents the event type(s)\n   *         that will trigger the listener.\n   *\n   *         Another evented object can be passed here instead, which will\n   *         cause the listener to listen for events on _that_ object.\n   *\n   *         In either case, the listener's `this` value will be bound to\n   *         this object.\n   *\n   * @param  {string|Array|Function} typeOrListener\n   *         If the first argument was a string or array, this should be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function.\n   */\n  one: function one() {\n    var _this2 = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var _normalizeListenArgs2 = normalizeListenArgs(this, args, 'one'),\n        isTargetingSelf = _normalizeListenArgs2.isTargetingSelf,\n        target = _normalizeListenArgs2.target,\n        type = _normalizeListenArgs2.type,\n        listener = _normalizeListenArgs2.listener; // Targeting this evented object.\n\n\n    if (isTargetingSelf) {\n      listen(target, 'one', type, listener); // Targeting another evented object.\n    } else {\n      // TODO: This wrapper is incorrect! It should only\n      //       remove the wrapper for the event type that called it.\n      //       Instead all listners are removed on the first trigger!\n      //       see https://github.com/videojs/video.js/issues/5962\n      var wrapper = function wrapper() {\n        _this2.off(target, type, wrapper);\n\n        for (var _len3 = arguments.length, largs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          largs[_key3] = arguments[_key3];\n        }\n\n        listener.apply(null, largs);\n      }; // Use the same function ID as the listener so we can remove it later\n      // it using the ID of the original listener.\n\n\n      wrapper.guid = listener.guid;\n      listen(target, 'one', type, wrapper);\n    }\n  },\n\n  /**\n   * Add a listener to an event (or events) on this object or another evented\n   * object. The listener will only be called once for the first event that is triggered\n   * then removed.\n   *\n   * @param  {string|Array|Element|Object} targetOrType\n   *         If this is a string or array, it represents the event type(s)\n   *         that will trigger the listener.\n   *\n   *         Another evented object can be passed here instead, which will\n   *         cause the listener to listen for events on _that_ object.\n   *\n   *         In either case, the listener's `this` value will be bound to\n   *         this object.\n   *\n   * @param  {string|Array|Function} typeOrListener\n   *         If the first argument was a string or array, this should be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function.\n   */\n  any: function any() {\n    var _this3 = this;\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    var _normalizeListenArgs3 = normalizeListenArgs(this, args, 'any'),\n        isTargetingSelf = _normalizeListenArgs3.isTargetingSelf,\n        target = _normalizeListenArgs3.target,\n        type = _normalizeListenArgs3.type,\n        listener = _normalizeListenArgs3.listener; // Targeting this evented object.\n\n\n    if (isTargetingSelf) {\n      listen(target, 'any', type, listener); // Targeting another evented object.\n    } else {\n      var wrapper = function wrapper() {\n        _this3.off(target, type, wrapper);\n\n        for (var _len5 = arguments.length, largs = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          largs[_key5] = arguments[_key5];\n        }\n\n        listener.apply(null, largs);\n      }; // Use the same function ID as the listener so we can remove it later\n      // it using the ID of the original listener.\n\n\n      wrapper.guid = listener.guid;\n      listen(target, 'any', type, wrapper);\n    }\n  },\n\n  /**\n   * Removes listener(s) from event(s) on an evented object.\n   *\n   * @param  {string|Array|Element|Object} [targetOrType]\n   *         If this is a string or array, it represents the event type(s).\n   *\n   *         Another evented object can be passed here instead, in which case\n   *         ALL 3 arguments are _required_.\n   *\n   * @param  {string|Array|Function} [typeOrListener]\n   *         If the first argument was a string or array, this may be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function; otherwise, _all_ listeners bound to the\n   *         event type(s) will be removed.\n   */\n  off: function off$1(targetOrType, typeOrListener, listener) {\n    // Targeting this evented object.\n    if (!targetOrType || isValidEventType(targetOrType)) {\n      off(this.eventBusEl_, targetOrType, typeOrListener); // Targeting another evented object.\n    } else {\n      var target = targetOrType;\n      var type = typeOrListener; // Fail fast and in a meaningful way!\n\n      validateTarget(target, this, 'off');\n      validateEventType(type, this, 'off');\n      validateListener(listener, this, 'off'); // Ensure there's at least a guid, even if the function hasn't been used\n\n      listener = bind(this, listener); // Remove the dispose listener on this evented object, which was given\n      // the same guid as the event listener in on().\n\n      this.off('dispose', listener);\n\n      if (target.nodeName) {\n        off(target, type, listener);\n        off(target, 'dispose', listener);\n      } else if (isEvented(target)) {\n        target.off(type, listener);\n        target.off('dispose', listener);\n      }\n    }\n  },\n\n  /**\n   * Fire an event on this evented object, causing its listeners to be called.\n   *\n   * @param   {string|Object} event\n   *          An event type or an object with a type property.\n   *\n   * @param   {Object} [hash]\n   *          An additional object to pass along to listeners.\n   *\n   * @return {boolean}\n   *          Whether or not the default behavior was prevented.\n   */\n  trigger: function trigger$1(event, hash) {\n    validateTarget(this.eventBusEl_, this, 'trigger');\n    var type = event && typeof event !== 'string' ? event.type : event;\n\n    if (!isValidEventType(type)) {\n      var error = \"Invalid event type for \" + objName(this) + \"#trigger; \" + 'must be a non-empty string or object with a type key that has a non-empty value.';\n\n      if (event) {\n        (this.log || log$1).error(error);\n      } else {\n        throw new Error(error);\n      }\n    }\n\n    return trigger(this.eventBusEl_, event, hash);\n  }\n};\n/**\n * Applies {@link module:evented~EventedMixin|EventedMixin} to a target object.\n *\n * @param  {Object} target\n *         The object to which to add event methods.\n *\n * @param  {Object} [options={}]\n *         Options for customizing the mixin behavior.\n *\n * @param  {string} [options.eventBusKey]\n *         By default, adds a `eventBusEl_` DOM element to the target object,\n *         which is used as an event bus. If the target object already has a\n *         DOM element that should be used, pass its key here.\n *\n * @return {Object}\n *         The target object.\n */\n\nfunction evented(target, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      eventBusKey = _options.eventBusKey; // Set or create the eventBusEl_.\n\n  if (eventBusKey) {\n    if (!target[eventBusKey].nodeName) {\n      throw new Error(\"The eventBusKey \\\"\" + eventBusKey + \"\\\" does not refer to an element.\");\n    }\n\n    target.eventBusEl_ = target[eventBusKey];\n  } else {\n    target.eventBusEl_ = createEl('span', {\n      className: 'vjs-event-bus'\n    });\n  }\n\n  assign(target, EventedMixin);\n\n  if (target.eventedCallbacks) {\n    target.eventedCallbacks.forEach(function (callback) {\n      callback();\n    });\n  } // When any evented object is disposed, it removes all its listeners.\n\n\n  target.on('dispose', function () {\n    target.off();\n    [target, target.el_, target.eventBusEl_].forEach(function (val) {\n      if (val && DomData.has(val)) {\n        DomData[\"delete\"](val);\n      }\n    });\n    window$1.setTimeout(function () {\n      target.eventBusEl_ = null;\n    }, 0);\n  });\n  return target;\n}\n/**\n * @file mixins/stateful.js\n * @module stateful\n */\n\n/**\n * Contains methods that provide statefulness to an object which is passed\n * to {@link module:stateful}.\n *\n * @mixin StatefulMixin\n */\n\n\nvar StatefulMixin = {\n  /**\n   * A hash containing arbitrary keys and values representing the state of\n   * the object.\n   *\n   * @type {Object}\n   */\n  state: {},\n\n  /**\n   * Set the state of an object by mutating its\n   * {@link module:stateful~StatefulMixin.state|state} object in place.\n   *\n   * @fires   module:stateful~StatefulMixin#statechanged\n   * @param   {Object|Function} stateUpdates\n   *          A new set of properties to shallow-merge into the plugin state.\n   *          Can be a plain object or a function returning a plain object.\n   *\n   * @return {Object|undefined}\n   *          An object containing changes that occurred. If no changes\n   *          occurred, returns `undefined`.\n   */\n  setState: function setState(stateUpdates) {\n    var _this = this; // Support providing the `stateUpdates` state as a function.\n\n\n    if (typeof stateUpdates === 'function') {\n      stateUpdates = stateUpdates();\n    }\n\n    var changes;\n    each(stateUpdates, function (value, key) {\n      // Record the change if the value is different from what's in the\n      // current state.\n      if (_this.state[key] !== value) {\n        changes = changes || {};\n        changes[key] = {\n          from: _this.state[key],\n          to: value\n        };\n      }\n\n      _this.state[key] = value;\n    }); // Only trigger \"statechange\" if there were changes AND we have a trigger\n    // function. This allows us to not require that the target object be an\n    // evented object.\n\n    if (changes && isEvented(this)) {\n      /**\n       * An event triggered on an object that is both\n       * {@link module:stateful|stateful} and {@link module:evented|evented}\n       * indicating that its state has changed.\n       *\n       * @event    module:stateful~StatefulMixin#statechanged\n       * @type     {Object}\n       * @property {Object} changes\n       *           A hash containing the properties that were changed and\n       *           the values they were changed `from` and `to`.\n       */\n      this.trigger({\n        changes: changes,\n        type: 'statechanged'\n      });\n    }\n\n    return changes;\n  }\n};\n/**\n * Applies {@link module:stateful~StatefulMixin|StatefulMixin} to a target\n * object.\n *\n * If the target object is {@link module:evented|evented} and has a\n * `handleStateChanged` method, that method will be automatically bound to the\n * `statechanged` event on itself.\n *\n * @param   {Object} target\n *          The object to be made stateful.\n *\n * @param   {Object} [defaultState]\n *          A default set of properties to populate the newly-stateful object's\n *          `state` property.\n *\n * @return {Object}\n *          Returns the `target`.\n */\n\nfunction stateful(target, defaultState) {\n  assign(target, StatefulMixin); // This happens after the mixing-in because we need to replace the `state`\n  // added in that step.\n\n  target.state = assign({}, target.state, defaultState); // Auto-bind the `handleStateChanged` method of the target object if it exists.\n\n  if (typeof target.handleStateChanged === 'function' && isEvented(target)) {\n    target.on('statechanged', target.handleStateChanged);\n  }\n\n  return target;\n}\n/**\n * @file string-cases.js\n * @module to-lower-case\n */\n\n/**\n * Lowercase the first letter of a string.\n *\n * @param {string} string\n *        String to be lowercased\n *\n * @return {string}\n *         The string with a lowercased first letter\n */\n\n\nvar toLowerCase = function toLowerCase(string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n\n  return string.replace(/./, function (w) {\n    return w.toLowerCase();\n  });\n};\n/**\n * Uppercase the first letter of a string.\n *\n * @param {string} string\n *        String to be uppercased\n *\n * @return {string}\n *         The string with an uppercased first letter\n */\n\n\nvar toTitleCase$1 = function toTitleCase(string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n\n  return string.replace(/./, function (w) {\n    return w.toUpperCase();\n  });\n};\n/**\n * Compares the TitleCase versions of the two strings for equality.\n *\n * @param {string} str1\n *        The first string to compare\n *\n * @param {string} str2\n *        The second string to compare\n *\n * @return {boolean}\n *         Whether the TitleCase versions of the strings are equal\n */\n\n\nvar titleCaseEquals = function titleCaseEquals(str1, str2) {\n  return toTitleCase$1(str1) === toTitleCase$1(str2);\n};\n/**\n * @file merge-options.js\n * @module merge-options\n */\n\n/**\n * Merge two objects recursively.\n *\n * Performs a deep merge like\n * {@link https://lodash.com/docs/4.17.10#merge|lodash.merge}, but only merges\n * plain objects (not arrays, elements, or anything else).\n *\n * Non-plain object values will be copied directly from the right-most\n * argument.\n *\n * @static\n * @param   {Object[]} sources\n *          One or more objects to merge into a new object.\n *\n * @return {Object}\n *          A new object that is the merged result of all sources.\n */\n\n\nfunction mergeOptions$3() {\n  var result = {};\n\n  for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n\n    each(source, function (value, key) {\n      if (!isPlain(value)) {\n        result[key] = value;\n        return;\n      }\n\n      if (!isPlain(result[key])) {\n        result[key] = {};\n      }\n\n      result[key] = mergeOptions$3(result[key], value);\n    });\n  });\n  return result;\n}\n\nvar MapSham = /*#__PURE__*/function () {\n  function MapSham() {\n    this.map_ = {};\n  }\n\n  var _proto = MapSham.prototype;\n\n  _proto.has = function has(key) {\n    return key in this.map_;\n  };\n\n  _proto[\"delete\"] = function _delete(key) {\n    var has = this.has(key);\n    delete this.map_[key];\n    return has;\n  };\n\n  _proto.set = function set(key, value) {\n    this.map_[key] = value;\n    return this;\n  };\n\n  _proto.forEach = function forEach(callback, thisArg) {\n    for (var key in this.map_) {\n      callback.call(thisArg, this.map_[key], key, this);\n    }\n  };\n\n  return MapSham;\n}();\n\nvar Map$1 = window$1.Map ? window$1.Map : MapSham;\n\nvar SetSham = /*#__PURE__*/function () {\n  function SetSham() {\n    this.set_ = {};\n  }\n\n  var _proto = SetSham.prototype;\n\n  _proto.has = function has(key) {\n    return key in this.set_;\n  };\n\n  _proto[\"delete\"] = function _delete(key) {\n    var has = this.has(key);\n    delete this.set_[key];\n    return has;\n  };\n\n  _proto.add = function add(key) {\n    this.set_[key] = 1;\n    return this;\n  };\n\n  _proto.forEach = function forEach(callback, thisArg) {\n    for (var key in this.set_) {\n      callback.call(thisArg, key, key, this);\n    }\n  };\n\n  return SetSham;\n}();\n\nvar Set = window$1.Set ? window$1.Set : SetSham;\n/**\n * Player Component - Base class for all UI objects\n *\n * @file component.js\n */\n\n/**\n * Base class for all UI Components.\n * Components are UI objects which represent both a javascript object and an element\n * in the DOM. They can be children of other components, and can have\n * children themselves.\n *\n * Components can also use methods from {@link EventTarget}\n */\n\nvar Component$1 = /*#__PURE__*/function () {\n  /**\n   * A callback that is called when a component is ready. Does not have any\n   * paramters and any callback value will be ignored.\n   *\n   * @callback Component~ReadyCallback\n   * @this Component\n   */\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Object[]} [options.children]\n   *        An array of children objects to intialize this component with. Children objects have\n   *        a name property that will be used if more than one component of the same type needs to be\n   *        added.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        Function that gets called when the `Component` is ready.\n   */\n  function Component(player, options, ready) {\n    // The component might be the player itself and we can't pass `this` to super\n    if (!player && this.play) {\n      this.player_ = player = this; // eslint-disable-line\n    } else {\n      this.player_ = player;\n    }\n\n    this.isDisposed_ = false; // Hold the reference to the parent component via `addChild` method\n\n    this.parentComponent_ = null; // Make a copy of prototype.options_ to protect against overriding defaults\n\n    this.options_ = mergeOptions$3({}, this.options_); // Updated options with supplied options\n\n    options = this.options_ = mergeOptions$3(this.options_, options); // Get ID from options or options element if one is supplied\n\n    this.id_ = options.id || options.el && options.el.id; // If there was no ID from the options, generate one\n\n    if (!this.id_) {\n      // Don't require the player ID function in the case of mock players\n      var id = player && player.id && player.id() || 'no_player';\n      this.id_ = id + \"_component_\" + newGUID();\n    }\n\n    this.name_ = options.name || null; // Create element if one wasn't provided in options\n\n    if (options.el) {\n      this.el_ = options.el;\n    } else if (options.createEl !== false) {\n      this.el_ = this.createEl();\n    } // if evented is anything except false, we want to mixin in evented\n\n\n    if (options.evented !== false) {\n      // Make this an evented object and use `el_`, if available, as its event bus\n      evented(this, {\n        eventBusKey: this.el_ ? 'el_' : null\n      });\n      this.handleLanguagechange = this.handleLanguagechange.bind(this);\n      this.on(this.player_, 'languagechange', this.handleLanguagechange);\n    }\n\n    stateful(this, this.constructor.defaultState);\n    this.children_ = [];\n    this.childIndex_ = {};\n    this.childNameIndex_ = {};\n    this.setTimeoutIds_ = new Set();\n    this.setIntervalIds_ = new Set();\n    this.rafIds_ = new Set();\n    this.namedRafs_ = new Map$1();\n    this.clearingTimersOnDispose_ = false; // Add any child components in options\n\n    if (options.initChildren !== false) {\n      this.initChildren();\n    } // Don't want to trigger ready here or it will go before init is actually\n    // finished for all children that run this constructor\n\n\n    this.ready(ready);\n\n    if (options.reportTouchActivity !== false) {\n      this.enableTouchActivity();\n    }\n  }\n  /**\n   * Dispose of the `Component` and all child components.\n   *\n   * @fires Component#dispose\n   */\n\n\n  var _proto = Component.prototype;\n\n  _proto.dispose = function dispose() {\n    // Bail out if the component has already been disposed.\n    if (this.isDisposed_) {\n      return;\n    }\n\n    if (this.readyQueue_) {\n      this.readyQueue_.length = 0;\n    }\n    /**\n     * Triggered when a `Component` is disposed.\n     *\n     * @event Component#dispose\n     * @type {EventTarget~Event}\n     *\n     * @property {boolean} [bubbles=false]\n     *           set to false so that the dispose event does not\n     *           bubble up\n     */\n\n\n    this.trigger({\n      type: 'dispose',\n      bubbles: false\n    });\n    this.isDisposed_ = true; // Dispose all children.\n\n    if (this.children_) {\n      for (var i = this.children_.length - 1; i >= 0; i--) {\n        if (this.children_[i].dispose) {\n          this.children_[i].dispose();\n        }\n      }\n    } // Delete child references\n\n\n    this.children_ = null;\n    this.childIndex_ = null;\n    this.childNameIndex_ = null;\n    this.parentComponent_ = null;\n\n    if (this.el_) {\n      // Remove element from DOM\n      if (this.el_.parentNode) {\n        this.el_.parentNode.removeChild(this.el_);\n      }\n\n      this.el_ = null;\n    } // remove reference to the player after disposing of the element\n\n\n    this.player_ = null;\n  }\n  /**\n   * Determine whether or not this component has been disposed.\n   *\n   * @return {boolean}\n   *         If the component has been disposed, will be `true`. Otherwise, `false`.\n   */\n  ;\n\n  _proto.isDisposed = function isDisposed() {\n    return Boolean(this.isDisposed_);\n  }\n  /**\n   * Return the {@link Player} that the `Component` has attached to.\n   *\n   * @return {Player}\n   *         The player that this `Component` has attached to.\n   */\n  ;\n\n  _proto.player = function player() {\n    return this.player_;\n  }\n  /**\n   * Deep merge of options objects with new options.\n   * > Note: When both `obj` and `options` contain properties whose values are objects.\n   *         The two properties get merged using {@link module:mergeOptions}\n   *\n   * @param {Object} obj\n   *        The object that contains new options.\n   *\n   * @return {Object}\n   *         A new object of `this.options_` and `obj` merged together.\n   */\n  ;\n\n  _proto.options = function options(obj) {\n    if (!obj) {\n      return this.options_;\n    }\n\n    this.options_ = mergeOptions$3(this.options_, obj);\n    return this.options_;\n  }\n  /**\n   * Get the `Component`s DOM element\n   *\n   * @return {Element}\n   *         The DOM element for this `Component`.\n   */\n  ;\n\n  _proto.el = function el() {\n    return this.el_;\n  }\n  /**\n   * Create the `Component`s DOM element.\n   *\n   * @param {string} [tagName]\n   *        Element's DOM node type. e.g. 'div'\n   *\n   * @param {Object} [properties]\n   *        An object of properties that should be set.\n   *\n   * @param {Object} [attributes]\n   *        An object of attributes that should be set.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl$1(tagName, properties, attributes) {\n    return createEl(tagName, properties, attributes);\n  }\n  /**\n   * Localize a string given the string in english.\n   *\n   * If tokens are provided, it'll try and run a simple token replacement on the provided string.\n   * The tokens it looks for look like `{1}` with the index being 1-indexed into the tokens array.\n   *\n   * If a `defaultValue` is provided, it'll use that over `string`,\n   * if a value isn't found in provided language files.\n   * This is useful if you want to have a descriptive key for token replacement\n   * but have a succinct localized string and not require `en.json` to be included.\n   *\n   * Currently, it is used for the progress bar timing.\n   * ```js\n   * {\n   *   \"progress bar timing: currentTime={1} duration={2}\": \"{1} of {2}\"\n   * }\n   * ```\n   * It is then used like so:\n   * ```js\n   * this.localize('progress bar timing: currentTime={1} duration{2}',\n   *               [this.player_.currentTime(), this.player_.duration()],\n   *               '{1} of {2}');\n   * ```\n   *\n   * Which outputs something like: `01:23 of 24:56`.\n   *\n   *\n   * @param {string} string\n   *        The string to localize and the key to lookup in the language files.\n   * @param {string[]} [tokens]\n   *        If the current item has token replacements, provide the tokens here.\n   * @param {string} [defaultValue]\n   *        Defaults to `string`. Can be a default value to use for token replacement\n   *        if the lookup key is needed to be separate.\n   *\n   * @return {string}\n   *         The localized string or if no localization exists the english string.\n   */\n  ;\n\n  _proto.localize = function localize(string, tokens, defaultValue) {\n    if (defaultValue === void 0) {\n      defaultValue = string;\n    }\n\n    var code = this.player_.language && this.player_.language();\n    var languages = this.player_.languages && this.player_.languages();\n    var language = languages && languages[code];\n    var primaryCode = code && code.split('-')[0];\n    var primaryLang = languages && languages[primaryCode];\n    var localizedString = defaultValue;\n\n    if (language && language[string]) {\n      localizedString = language[string];\n    } else if (primaryLang && primaryLang[string]) {\n      localizedString = primaryLang[string];\n    }\n\n    if (tokens) {\n      localizedString = localizedString.replace(/\\{(\\d+)\\}/g, function (match, index) {\n        var value = tokens[index - 1];\n        var ret = value;\n\n        if (typeof value === 'undefined') {\n          ret = match;\n        }\n\n        return ret;\n      });\n    }\n\n    return localizedString;\n  }\n  /**\n   * Handles language change for the player in components. Should be overriden by sub-components.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.handleLanguagechange = function handleLanguagechange() {}\n  /**\n   * Return the `Component`s DOM element. This is where children get inserted.\n   * This will usually be the the same as the element returned in {@link Component#el}.\n   *\n   * @return {Element}\n   *         The content element for this `Component`.\n   */\n  ;\n\n  _proto.contentEl = function contentEl() {\n    return this.contentEl_ || this.el_;\n  }\n  /**\n   * Get this `Component`s ID\n   *\n   * @return {string}\n   *         The id of this `Component`\n   */\n  ;\n\n  _proto.id = function id() {\n    return this.id_;\n  }\n  /**\n   * Get the `Component`s name. The name gets used to reference the `Component`\n   * and is set during registration.\n   *\n   * @return {string}\n   *         The name of this `Component`.\n   */\n  ;\n\n  _proto.name = function name() {\n    return this.name_;\n  }\n  /**\n   * Get an array of all child components\n   *\n   * @return {Array}\n   *         The children\n   */\n  ;\n\n  _proto.children = function children() {\n    return this.children_;\n  }\n  /**\n   * Returns the child `Component` with the given `id`.\n   *\n   * @param {string} id\n   *        The id of the child `Component` to get.\n   *\n   * @return {Component|undefined}\n   *         The child `Component` with the given `id` or undefined.\n   */\n  ;\n\n  _proto.getChildById = function getChildById(id) {\n    return this.childIndex_[id];\n  }\n  /**\n   * Returns the child `Component` with the given `name`.\n   *\n   * @param {string} name\n   *        The name of the child `Component` to get.\n   *\n   * @return {Component|undefined}\n   *         The child `Component` with the given `name` or undefined.\n   */\n  ;\n\n  _proto.getChild = function getChild(name) {\n    if (!name) {\n      return;\n    }\n\n    return this.childNameIndex_[name];\n  }\n  /**\n   * Returns the descendant `Component` following the givent\n   * descendant `names`. For instance ['foo', 'bar', 'baz'] would\n   * try to get 'foo' on the current component, 'bar' on the 'foo'\n   * component and 'baz' on the 'bar' component and return undefined\n   * if any of those don't exist.\n   *\n   * @param {...string[]|...string} names\n   *        The name of the child `Component` to get.\n   *\n   * @return {Component|undefined}\n   *         The descendant `Component` following the given descendant\n   *         `names` or undefined.\n   */\n  ;\n\n  _proto.getDescendant = function getDescendant() {\n    for (var _len = arguments.length, names = new Array(_len), _key = 0; _key < _len; _key++) {\n      names[_key] = arguments[_key];\n    } // flatten array argument into the main array\n\n\n    names = names.reduce(function (acc, n) {\n      return acc.concat(n);\n    }, []);\n    var currentChild = this;\n\n    for (var i = 0; i < names.length; i++) {\n      currentChild = currentChild.getChild(names[i]);\n\n      if (!currentChild || !currentChild.getChild) {\n        return;\n      }\n    }\n\n    return currentChild;\n  }\n  /**\n   * Add a child `Component` inside the current `Component`.\n   *\n   *\n   * @param {string|Component} child\n   *        The name or instance of a child to add.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of options that will get passed to children of\n   *        the child.\n   *\n   * @param {number} [index=this.children_.length]\n   *        The index to attempt to add a child into.\n   *\n   * @return {Component}\n   *         The `Component` that gets added as a child. When using a string the\n   *         `Component` will get created by this process.\n   */\n  ;\n\n  _proto.addChild = function addChild(child, options, index) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (index === void 0) {\n      index = this.children_.length;\n    }\n\n    var component;\n    var componentName; // If child is a string, create component with options\n\n    if (typeof child === 'string') {\n      componentName = toTitleCase$1(child);\n      var componentClassName = options.componentClass || componentName; // Set name through options\n\n      options.name = componentName; // Create a new object & element for this controls set\n      // If there's no .player_, this is a player\n\n      var ComponentClass = Component.getComponent(componentClassName);\n\n      if (!ComponentClass) {\n        throw new Error(\"Component \" + componentClassName + \" does not exist\");\n      } // data stored directly on the videojs object may be\n      // misidentified as a component to retain\n      // backwards-compatibility with 4.x. check to make sure the\n      // component class can be instantiated.\n\n\n      if (typeof ComponentClass !== 'function') {\n        return null;\n      }\n\n      component = new ComponentClass(this.player_ || this, options); // child is a component instance\n    } else {\n      component = child;\n    }\n\n    if (component.parentComponent_) {\n      component.parentComponent_.removeChild(component);\n    }\n\n    this.children_.splice(index, 0, component);\n    component.parentComponent_ = this;\n\n    if (typeof component.id === 'function') {\n      this.childIndex_[component.id()] = component;\n    } // If a name wasn't used to create the component, check if we can use the\n    // name function of the component\n\n\n    componentName = componentName || component.name && toTitleCase$1(component.name());\n\n    if (componentName) {\n      this.childNameIndex_[componentName] = component;\n      this.childNameIndex_[toLowerCase(componentName)] = component;\n    } // Add the UI object's element to the container div (box)\n    // Having an element is not required\n\n\n    if (typeof component.el === 'function' && component.el()) {\n      // If inserting before a component, insert before that component's element\n      var refNode = null;\n\n      if (this.children_[index + 1]) {\n        // Most children are components, but the video tech is an HTML element\n        if (this.children_[index + 1].el_) {\n          refNode = this.children_[index + 1].el_;\n        } else if (isEl(this.children_[index + 1])) {\n          refNode = this.children_[index + 1];\n        }\n      }\n\n      this.contentEl().insertBefore(component.el(), refNode);\n    } // Return so it can stored on parent object if desired.\n\n\n    return component;\n  }\n  /**\n   * Remove a child `Component` from this `Component`s list of children. Also removes\n   * the child `Component`s element from this `Component`s element.\n   *\n   * @param {Component} component\n   *        The child `Component` to remove.\n   */\n  ;\n\n  _proto.removeChild = function removeChild(component) {\n    if (typeof component === 'string') {\n      component = this.getChild(component);\n    }\n\n    if (!component || !this.children_) {\n      return;\n    }\n\n    var childFound = false;\n\n    for (var i = this.children_.length - 1; i >= 0; i--) {\n      if (this.children_[i] === component) {\n        childFound = true;\n        this.children_.splice(i, 1);\n        break;\n      }\n    }\n\n    if (!childFound) {\n      return;\n    }\n\n    component.parentComponent_ = null;\n    this.childIndex_[component.id()] = null;\n    this.childNameIndex_[toTitleCase$1(component.name())] = null;\n    this.childNameIndex_[toLowerCase(component.name())] = null;\n    var compEl = component.el();\n\n    if (compEl && compEl.parentNode === this.contentEl()) {\n      this.contentEl().removeChild(component.el());\n    }\n  }\n  /**\n   * Add and initialize default child `Component`s based upon options.\n   */\n  ;\n\n  _proto.initChildren = function initChildren() {\n    var _this = this;\n\n    var children = this.options_.children;\n\n    if (children) {\n      // `this` is `parent`\n      var parentOptions = this.options_;\n\n      var handleAdd = function handleAdd(child) {\n        var name = child.name;\n        var opts = child.opts; // Allow options for children to be set at the parent options\n        // e.g. videojs(id, { controlBar: false });\n        // instead of videojs(id, { children: { controlBar: false });\n\n        if (parentOptions[name] !== undefined) {\n          opts = parentOptions[name];\n        } // Allow for disabling default components\n        // e.g. options['children']['posterImage'] = false\n\n\n        if (opts === false) {\n          return;\n        } // Allow options to be passed as a simple boolean if no configuration\n        // is necessary.\n\n\n        if (opts === true) {\n          opts = {};\n        } // We also want to pass the original player options\n        // to each component as well so they don't need to\n        // reach back into the player for options later.\n\n\n        opts.playerOptions = _this.options_.playerOptions; // Create and add the child component.\n        // Add a direct reference to the child by name on the parent instance.\n        // If two of the same component are used, different names should be supplied\n        // for each\n\n        var newChild = _this.addChild(name, opts);\n\n        if (newChild) {\n          _this[name] = newChild;\n        }\n      }; // Allow for an array of children details to passed in the options\n\n\n      var workingChildren;\n      var Tech = Component.getComponent('Tech');\n\n      if (Array.isArray(children)) {\n        workingChildren = children;\n      } else {\n        workingChildren = Object.keys(children);\n      }\n\n      workingChildren // children that are in this.options_ but also in workingChildren  would\n      // give us extra children we do not want. So, we want to filter them out.\n      .concat(Object.keys(this.options_).filter(function (child) {\n        return !workingChildren.some(function (wchild) {\n          if (typeof wchild === 'string') {\n            return child === wchild;\n          }\n\n          return child === wchild.name;\n        });\n      })).map(function (child) {\n        var name;\n        var opts;\n\n        if (typeof child === 'string') {\n          name = child;\n          opts = children[name] || _this.options_[name] || {};\n        } else {\n          name = child.name;\n          opts = child;\n        }\n\n        return {\n          name: name,\n          opts: opts\n        };\n      }).filter(function (child) {\n        // we have to make sure that child.name isn't in the techOrder since\n        // techs are registerd as Components but can't aren't compatible\n        // See https://github.com/videojs/video.js/issues/2772\n        var c = Component.getComponent(child.opts.componentClass || toTitleCase$1(child.name));\n        return c && !Tech.isTech(c);\n      }).forEach(handleAdd);\n    }\n  }\n  /**\n   * Builds the default DOM class name. Should be overriden by sub-components.\n   *\n   * @return {string}\n   *         The DOM class name for this object.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    // Child classes can include a function that does:\n    // return 'CLASS NAME' + this._super();\n    return '';\n  }\n  /**\n   * Bind a listener to the component's ready state.\n   * Different from event listeners in that if the ready event has already happened\n   * it will trigger the function immediately.\n   *\n   * @return {Component}\n   *         Returns itself; method can be chained.\n   */\n  ;\n\n  _proto.ready = function ready(fn, sync) {\n    if (sync === void 0) {\n      sync = false;\n    }\n\n    if (!fn) {\n      return;\n    }\n\n    if (!this.isReady_) {\n      this.readyQueue_ = this.readyQueue_ || [];\n      this.readyQueue_.push(fn);\n      return;\n    }\n\n    if (sync) {\n      fn.call(this);\n    } else {\n      // Call the function asynchronously by default for consistency\n      this.setTimeout(fn, 1);\n    }\n  }\n  /**\n   * Trigger all the ready listeners for this `Component`.\n   *\n   * @fires Component#ready\n   */\n  ;\n\n  _proto.triggerReady = function triggerReady() {\n    this.isReady_ = true; // Ensure ready is triggered asynchronously\n\n    this.setTimeout(function () {\n      var readyQueue = this.readyQueue_; // Reset Ready Queue\n\n      this.readyQueue_ = [];\n\n      if (readyQueue && readyQueue.length > 0) {\n        readyQueue.forEach(function (fn) {\n          fn.call(this);\n        }, this);\n      } // Allow for using event listeners also\n\n      /**\n       * Triggered when a `Component` is ready.\n       *\n       * @event Component#ready\n       * @type {EventTarget~Event}\n       */\n\n\n      this.trigger('ready');\n    }, 1);\n  }\n  /**\n   * Find a single DOM element matching a `selector`. This can be within the `Component`s\n   * `contentEl()` or another custom context.\n   *\n   * @param {string} selector\n   *        A valid CSS selector, which will be passed to `querySelector`.\n   *\n   * @param {Element|string} [context=this.contentEl()]\n   *        A DOM element within which to query. Can also be a selector string in\n   *        which case the first matching element will get used as context. If\n   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns\n   *        nothing it falls back to `document`.\n   *\n   * @return {Element|null}\n   *         the dom element that was found, or null\n   *\n   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)\n   */\n  ;\n\n  _proto.$ = function $$1(selector, context) {\n    return $(selector, context || this.contentEl());\n  }\n  /**\n   * Finds all DOM element matching a `selector`. This can be within the `Component`s\n   * `contentEl()` or another custom context.\n   *\n   * @param {string} selector\n   *        A valid CSS selector, which will be passed to `querySelectorAll`.\n   *\n   * @param {Element|string} [context=this.contentEl()]\n   *        A DOM element within which to query. Can also be a selector string in\n   *        which case the first matching element will get used as context. If\n   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns\n   *        nothing it falls back to `document`.\n   *\n   * @return {NodeList}\n   *         a list of dom elements that were found\n   *\n   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)\n   */\n  ;\n\n  _proto.$$ = function $$$1(selector, context) {\n    return $$(selector, context || this.contentEl());\n  }\n  /**\n   * Check if a component's element has a CSS class name.\n   *\n   * @param {string} classToCheck\n   *        CSS class name to check.\n   *\n   * @return {boolean}\n   *         - True if the `Component` has the class.\n   *         - False if the `Component` does not have the class`\n   */\n  ;\n\n  _proto.hasClass = function hasClass$1(classToCheck) {\n    return hasClass(this.el_, classToCheck);\n  }\n  /**\n   * Add a CSS class name to the `Component`s element.\n   *\n   * @param {string} classToAdd\n   *        CSS class name to add\n   */\n  ;\n\n  _proto.addClass = function addClass$1(classToAdd) {\n    addClass(this.el_, classToAdd);\n  }\n  /**\n   * Remove a CSS class name from the `Component`s element.\n   *\n   * @param {string} classToRemove\n   *        CSS class name to remove\n   */\n  ;\n\n  _proto.removeClass = function removeClass$1(classToRemove) {\n    removeClass(this.el_, classToRemove);\n  }\n  /**\n   * Add or remove a CSS class name from the component's element.\n   * - `classToToggle` gets added when {@link Component#hasClass} would return false.\n   * - `classToToggle` gets removed when {@link Component#hasClass} would return true.\n   *\n   * @param  {string} classToToggle\n   *         The class to add or remove based on (@link Component#hasClass}\n   *\n   * @param  {boolean|Dom~predicate} [predicate]\n   *         An {@link Dom~predicate} function or a boolean\n   */\n  ;\n\n  _proto.toggleClass = function toggleClass$1(classToToggle, predicate) {\n    toggleClass(this.el_, classToToggle, predicate);\n  }\n  /**\n   * Show the `Component`s element if it is hidden by removing the\n   * 'vjs-hidden' class name from it.\n   */\n  ;\n\n  _proto.show = function show() {\n    this.removeClass('vjs-hidden');\n  }\n  /**\n   * Hide the `Component`s element if it is currently showing by adding the\n   * 'vjs-hidden` class name to it.\n   */\n  ;\n\n  _proto.hide = function hide() {\n    this.addClass('vjs-hidden');\n  }\n  /**\n   * Lock a `Component`s element in its visible state by adding the 'vjs-lock-showing'\n   * class name to it. Used during fadeIn/fadeOut.\n   *\n   * @private\n   */\n  ;\n\n  _proto.lockShowing = function lockShowing() {\n    this.addClass('vjs-lock-showing');\n  }\n  /**\n   * Unlock a `Component`s element from its visible state by removing the 'vjs-lock-showing'\n   * class name from it. Used during fadeIn/fadeOut.\n   *\n   * @private\n   */\n  ;\n\n  _proto.unlockShowing = function unlockShowing() {\n    this.removeClass('vjs-lock-showing');\n  }\n  /**\n   * Get the value of an attribute on the `Component`s element.\n   *\n   * @param {string} attribute\n   *        Name of the attribute to get the value from.\n   *\n   * @return {string|null}\n   *         - The value of the attribute that was asked for.\n   *         - Can be an empty string on some browsers if the attribute does not exist\n   *           or has no value\n   *         - Most browsers will return null if the attibute does not exist or has\n   *           no value.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute}\n   */\n  ;\n\n  _proto.getAttribute = function getAttribute$1(attribute) {\n    return getAttribute(this.el_, attribute);\n  }\n  /**\n   * Set the value of an attribute on the `Component`'s element\n   *\n   * @param {string} attribute\n   *        Name of the attribute to set.\n   *\n   * @param {string} value\n   *        Value to set the attribute to.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute}\n   */\n  ;\n\n  _proto.setAttribute = function setAttribute$1(attribute, value) {\n    setAttribute(this.el_, attribute, value);\n  }\n  /**\n   * Remove an attribute from the `Component`s element.\n   *\n   * @param {string} attribute\n   *        Name of the attribute to remove.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute}\n   */\n  ;\n\n  _proto.removeAttribute = function removeAttribute$1(attribute) {\n    removeAttribute(this.el_, attribute);\n  }\n  /**\n   * Get or set the width of the component based upon the CSS styles.\n   * See {@link Component#dimension} for more detailed information.\n   *\n   * @param {number|string} [num]\n   *        The width that you want to set postfixed with '%', 'px' or nothing.\n   *\n   * @param {boolean} [skipListeners]\n   *        Skip the componentresize event trigger\n   *\n   * @return {number|string}\n   *         The width when getting, zero if there is no width. Can be a string\n   *           postpixed with '%' or 'px'.\n   */\n  ;\n\n  _proto.width = function width(num, skipListeners) {\n    return this.dimension('width', num, skipListeners);\n  }\n  /**\n   * Get or set the height of the component based upon the CSS styles.\n   * See {@link Component#dimension} for more detailed information.\n   *\n   * @param {number|string} [num]\n   *        The height that you want to set postfixed with '%', 'px' or nothing.\n   *\n   * @param {boolean} [skipListeners]\n   *        Skip the componentresize event trigger\n   *\n   * @return {number|string}\n   *         The width when getting, zero if there is no width. Can be a string\n   *         postpixed with '%' or 'px'.\n   */\n  ;\n\n  _proto.height = function height(num, skipListeners) {\n    return this.dimension('height', num, skipListeners);\n  }\n  /**\n   * Set both the width and height of the `Component` element at the same time.\n   *\n   * @param  {number|string} width\n   *         Width to set the `Component`s element to.\n   *\n   * @param  {number|string} height\n   *         Height to set the `Component`s element to.\n   */\n  ;\n\n  _proto.dimensions = function dimensions(width, height) {\n    // Skip componentresize listeners on width for optimization\n    this.width(width, true);\n    this.height(height);\n  }\n  /**\n   * Get or set width or height of the `Component` element. This is the shared code\n   * for the {@link Component#width} and {@link Component#height}.\n   *\n   * Things to know:\n   * - If the width or height in an number this will return the number postfixed with 'px'.\n   * - If the width/height is a percent this will return the percent postfixed with '%'\n   * - Hidden elements have a width of 0 with `window.getComputedStyle`. This function\n   *   defaults to the `Component`s `style.width` and falls back to `window.getComputedStyle`.\n   *   See [this]{@link http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/}\n   *   for more information\n   * - If you want the computed style of the component, use {@link Component#currentWidth}\n   *   and {@link {Component#currentHeight}\n   *\n   * @fires Component#componentresize\n   *\n   * @param {string} widthOrHeight\n   8        'width' or 'height'\n   *\n   * @param  {number|string} [num]\n   8         New dimension\n   *\n   * @param  {boolean} [skipListeners]\n   *         Skip componentresize event trigger\n   *\n   * @return {number}\n   *         The dimension when getting or 0 if unset\n   */\n  ;\n\n  _proto.dimension = function dimension(widthOrHeight, num, skipListeners) {\n    if (num !== undefined) {\n      // Set to zero if null or literally NaN (NaN !== NaN)\n      if (num === null || num !== num) {\n        num = 0;\n      } // Check if using css width/height (% or px) and adjust\n\n\n      if (('' + num).indexOf('%') !== -1 || ('' + num).indexOf('px') !== -1) {\n        this.el_.style[widthOrHeight] = num;\n      } else if (num === 'auto') {\n        this.el_.style[widthOrHeight] = '';\n      } else {\n        this.el_.style[widthOrHeight] = num + 'px';\n      } // skipListeners allows us to avoid triggering the resize event when setting both width and height\n\n\n      if (!skipListeners) {\n        /**\n         * Triggered when a component is resized.\n         *\n         * @event Component#componentresize\n         * @type {EventTarget~Event}\n         */\n        this.trigger('componentresize');\n      }\n\n      return;\n    } // Not setting a value, so getting it\n    // Make sure element exists\n\n\n    if (!this.el_) {\n      return 0;\n    } // Get dimension value from style\n\n\n    var val = this.el_.style[widthOrHeight];\n    var pxIndex = val.indexOf('px');\n\n    if (pxIndex !== -1) {\n      // Return the pixel value with no 'px'\n      return parseInt(val.slice(0, pxIndex), 10);\n    } // No px so using % or no style was set, so falling back to offsetWidth/height\n    // If component has display:none, offset will return 0\n    // TODO: handle display:none and no dimension style using px\n\n\n    return parseInt(this.el_['offset' + toTitleCase$1(widthOrHeight)], 10);\n  }\n  /**\n   * Get the computed width or the height of the component's element.\n   *\n   * Uses `window.getComputedStyle`.\n   *\n   * @param {string} widthOrHeight\n   *        A string containing 'width' or 'height'. Whichever one you want to get.\n   *\n   * @return {number}\n   *         The dimension that gets asked for or 0 if nothing was set\n   *         for that dimension.\n   */\n  ;\n\n  _proto.currentDimension = function currentDimension(widthOrHeight) {\n    var computedWidthOrHeight = 0;\n\n    if (widthOrHeight !== 'width' && widthOrHeight !== 'height') {\n      throw new Error('currentDimension only accepts width or height value');\n    }\n\n    computedWidthOrHeight = computedStyle(this.el_, widthOrHeight); // remove 'px' from variable and parse as integer\n\n    computedWidthOrHeight = parseFloat(computedWidthOrHeight); // if the computed value is still 0, it's possible that the browser is lying\n    // and we want to check the offset values.\n    // This code also runs wherever getComputedStyle doesn't exist.\n\n    if (computedWidthOrHeight === 0 || isNaN(computedWidthOrHeight)) {\n      var rule = \"offset\" + toTitleCase$1(widthOrHeight);\n      computedWidthOrHeight = this.el_[rule];\n    }\n\n    return computedWidthOrHeight;\n  }\n  /**\n   * An object that contains width and height values of the `Component`s\n   * computed style. Uses `window.getComputedStyle`.\n   *\n   * @typedef {Object} Component~DimensionObject\n   *\n   * @property {number} width\n   *           The width of the `Component`s computed style.\n   *\n   * @property {number} height\n   *           The height of the `Component`s computed style.\n   */\n\n  /**\n   * Get an object that contains computed width and height values of the\n   * component's element.\n   *\n   * Uses `window.getComputedStyle`.\n   *\n   * @return {Component~DimensionObject}\n   *         The computed dimensions of the component's element.\n   */\n  ;\n\n  _proto.currentDimensions = function currentDimensions() {\n    return {\n      width: this.currentDimension('width'),\n      height: this.currentDimension('height')\n    };\n  }\n  /**\n   * Get the computed width of the component's element.\n   *\n   * Uses `window.getComputedStyle`.\n   *\n   * @return {number}\n   *         The computed width of the component's element.\n   */\n  ;\n\n  _proto.currentWidth = function currentWidth() {\n    return this.currentDimension('width');\n  }\n  /**\n   * Get the computed height of the component's element.\n   *\n   * Uses `window.getComputedStyle`.\n   *\n   * @return {number}\n   *         The computed height of the component's element.\n   */\n  ;\n\n  _proto.currentHeight = function currentHeight() {\n    return this.currentDimension('height');\n  }\n  /**\n   * Set the focus to this component\n   */\n  ;\n\n  _proto.focus = function focus() {\n    this.el_.focus();\n  }\n  /**\n   * Remove the focus from this component\n   */\n  ;\n\n  _proto.blur = function blur() {\n    this.el_.blur();\n  }\n  /**\n   * When this Component receives a `keydown` event which it does not process,\n   *  it passes the event to the Player for handling.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    if (this.player_) {\n      // We only stop propagation here because we want unhandled events to fall\n      // back to the browser. Exclude Tab for focus trapping.\n      if (!keycode.isEventKey(event, 'Tab')) {\n        event.stopPropagation();\n      }\n\n      this.player_.handleKeyDown(event);\n    }\n  }\n  /**\n   * Many components used to have a `handleKeyPress` method, which was poorly\n   * named because it listened to a `keydown` event. This method name now\n   * delegates to `handleKeyDown`. This means anyone calling `handleKeyPress`\n   * will not see their method calls stop working.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to be called.\n   */\n  ;\n\n  _proto.handleKeyPress = function handleKeyPress(event) {\n    this.handleKeyDown(event);\n  }\n  /**\n   * Emit a 'tap' events when touch event support gets detected. This gets used to\n   * support toggling the controls through a tap on the video. They get enabled\n   * because every sub-component would have extra overhead otherwise.\n   *\n   * @private\n   * @fires Component#tap\n   * @listens Component#touchstart\n   * @listens Component#touchmove\n   * @listens Component#touchleave\n   * @listens Component#touchcancel\n   * @listens Component#touchend\n    */\n  ;\n\n  _proto.emitTapEvents = function emitTapEvents() {\n    // Track the start time so we can determine how long the touch lasted\n    var touchStart = 0;\n    var firstTouch = null; // Maximum movement allowed during a touch event to still be considered a tap\n    // Other popular libs use anywhere from 2 (hammer.js) to 15,\n    // so 10 seems like a nice, round number.\n\n    var tapMovementThreshold = 10; // The maximum length a touch can be while still being considered a tap\n\n    var touchTimeThreshold = 200;\n    var couldBeTap;\n    this.on('touchstart', function (event) {\n      // If more than one finger, don't consider treating this as a click\n      if (event.touches.length === 1) {\n        // Copy pageX/pageY from the object\n        firstTouch = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        }; // Record start time so we can detect a tap vs. \"touch and hold\"\n\n        touchStart = window$1.performance.now(); // Reset couldBeTap tracking\n\n        couldBeTap = true;\n      }\n    });\n    this.on('touchmove', function (event) {\n      // If more than one finger, don't consider treating this as a click\n      if (event.touches.length > 1) {\n        couldBeTap = false;\n      } else if (firstTouch) {\n        // Some devices will throw touchmoves for all but the slightest of taps.\n        // So, if we moved only a small distance, this could still be a tap\n        var xdiff = event.touches[0].pageX - firstTouch.pageX;\n        var ydiff = event.touches[0].pageY - firstTouch.pageY;\n        var touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n\n        if (touchDistance > tapMovementThreshold) {\n          couldBeTap = false;\n        }\n      }\n    });\n\n    var noTap = function noTap() {\n      couldBeTap = false;\n    }; // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s\n\n\n    this.on('touchleave', noTap);\n    this.on('touchcancel', noTap); // When the touch ends, measure how long it took and trigger the appropriate\n    // event\n\n    this.on('touchend', function (event) {\n      firstTouch = null; // Proceed only if the touchmove/leave/cancel event didn't happen\n\n      if (couldBeTap === true) {\n        // Measure how long the touch lasted\n        var touchTime = window$1.performance.now() - touchStart; // Make sure the touch was less than the threshold to be considered a tap\n\n        if (touchTime < touchTimeThreshold) {\n          // Don't let browser turn this into a click\n          event.preventDefault();\n          /**\n           * Triggered when a `Component` is tapped.\n           *\n           * @event Component#tap\n           * @type {EventTarget~Event}\n           */\n\n          this.trigger('tap'); // It may be good to copy the touchend event object and change the\n          // type to tap, if the other event properties aren't exact after\n          // Events.fixEvent runs (e.g. event.target)\n        }\n      }\n    });\n  }\n  /**\n   * This function reports user activity whenever touch events happen. This can get\n   * turned off by any sub-components that wants touch events to act another way.\n   *\n   * Report user touch activity when touch events occur. User activity gets used to\n   * determine when controls should show/hide. It is simple when it comes to mouse\n   * events, because any mouse event should show the controls. So we capture mouse\n   * events that bubble up to the player and report activity when that happens.\n   * With touch events it isn't as easy as `touchstart` and `touchend` toggle player\n   * controls. So touch events can't help us at the player level either.\n   *\n   * User activity gets checked asynchronously. So what could happen is a tap event\n   * on the video turns the controls off. Then the `touchend` event bubbles up to\n   * the player. Which, if it reported user activity, would turn the controls right\n   * back on. We also don't want to completely block touch events from bubbling up.\n   * Furthermore a `touchmove` event and anything other than a tap, should not turn\n   * controls back on.\n   *\n   * @listens Component#touchstart\n   * @listens Component#touchmove\n   * @listens Component#touchend\n   * @listens Component#touchcancel\n   */\n  ;\n\n  _proto.enableTouchActivity = function enableTouchActivity() {\n    // Don't continue if the root player doesn't support reporting user activity\n    if (!this.player() || !this.player().reportUserActivity) {\n      return;\n    } // listener for reporting that the user is active\n\n\n    var report = bind(this.player(), this.player().reportUserActivity);\n    var touchHolding;\n    this.on('touchstart', function () {\n      report(); // For as long as the they are touching the device or have their mouse down,\n      // we consider them active even if they're not moving their finger or mouse.\n      // So we want to continue to update that they are active\n\n      this.clearInterval(touchHolding); // report at the same interval as activityCheck\n\n      touchHolding = this.setInterval(report, 250);\n    });\n\n    var touchEnd = function touchEnd(event) {\n      report(); // stop the interval that maintains activity if the touch is holding\n\n      this.clearInterval(touchHolding);\n    };\n\n    this.on('touchmove', report);\n    this.on('touchend', touchEnd);\n    this.on('touchcancel', touchEnd);\n  }\n  /**\n   * A callback that has no parameters and is bound into `Component`s context.\n   *\n   * @callback Component~GenericCallback\n   * @this Component\n   */\n\n  /**\n   * Creates a function that runs after an `x` millisecond timeout. This function is a\n   * wrapper around `window.setTimeout`. There are a few reasons to use this one\n   * instead though:\n   * 1. It gets cleared via  {@link Component#clearTimeout} when\n   *    {@link Component#dispose} gets called.\n   * 2. The function callback will gets turned into a {@link Component~GenericCallback}\n   *\n   * > Note: You can't use `window.clearTimeout` on the id returned by this function. This\n   *         will cause its dispose listener not to get cleaned up! Please use\n   *         {@link Component#clearTimeout} or {@link Component#dispose} instead.\n   *\n   * @param {Component~GenericCallback} fn\n   *        The function that will be run after `timeout`.\n   *\n   * @param {number} timeout\n   *        Timeout in milliseconds to delay before executing the specified function.\n   *\n   * @return {number}\n   *         Returns a timeout ID that gets used to identify the timeout. It can also\n   *         get used in {@link Component#clearTimeout} to clear the timeout that\n   *         was set.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout}\n   */\n  ;\n\n  _proto.setTimeout = function setTimeout(fn, timeout) {\n    var _this2 = this; // declare as variables so they are properly available in timeout function\n    // eslint-disable-next-line\n\n\n    var timeoutId;\n    fn = bind(this, fn);\n    this.clearTimersOnDispose_();\n    timeoutId = window$1.setTimeout(function () {\n      if (_this2.setTimeoutIds_.has(timeoutId)) {\n        _this2.setTimeoutIds_[\"delete\"](timeoutId);\n      }\n\n      fn();\n    }, timeout);\n    this.setTimeoutIds_.add(timeoutId);\n    return timeoutId;\n  }\n  /**\n   * Clears a timeout that gets created via `window.setTimeout` or\n   * {@link Component#setTimeout}. If you set a timeout via {@link Component#setTimeout}\n   * use this function instead of `window.clearTimout`. If you don't your dispose\n   * listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} timeoutId\n   *        The id of the timeout to clear. The return value of\n   *        {@link Component#setTimeout} or `window.setTimeout`.\n   *\n   * @return {number}\n   *         Returns the timeout id that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearTimeout}\n   */\n  ;\n\n  _proto.clearTimeout = function clearTimeout(timeoutId) {\n    if (this.setTimeoutIds_.has(timeoutId)) {\n      this.setTimeoutIds_[\"delete\"](timeoutId);\n      window$1.clearTimeout(timeoutId);\n    }\n\n    return timeoutId;\n  }\n  /**\n   * Creates a function that gets run every `x` milliseconds. This function is a wrapper\n   * around `window.setInterval`. There are a few reasons to use this one instead though.\n   * 1. It gets cleared via  {@link Component#clearInterval} when\n   *    {@link Component#dispose} gets called.\n   * 2. The function callback will be a {@link Component~GenericCallback}\n   *\n   * @param {Component~GenericCallback} fn\n   *        The function to run every `x` seconds.\n   *\n   * @param {number} interval\n   *        Execute the specified function every `x` milliseconds.\n   *\n   * @return {number}\n   *         Returns an id that can be used to identify the interval. It can also be be used in\n   *         {@link Component#clearInterval} to clear the interval.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval}\n   */\n  ;\n\n  _proto.setInterval = function setInterval(fn, interval) {\n    fn = bind(this, fn);\n    this.clearTimersOnDispose_();\n    var intervalId = window$1.setInterval(fn, interval);\n    this.setIntervalIds_.add(intervalId);\n    return intervalId;\n  }\n  /**\n   * Clears an interval that gets created via `window.setInterval` or\n   * {@link Component#setInterval}. If you set an inteval via {@link Component#setInterval}\n   * use this function instead of `window.clearInterval`. If you don't your dispose\n   * listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} intervalId\n   *        The id of the interval to clear. The return value of\n   *        {@link Component#setInterval} or `window.setInterval`.\n   *\n   * @return {number}\n   *         Returns the interval id that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval}\n   */\n  ;\n\n  _proto.clearInterval = function clearInterval(intervalId) {\n    if (this.setIntervalIds_.has(intervalId)) {\n      this.setIntervalIds_[\"delete\"](intervalId);\n      window$1.clearInterval(intervalId);\n    }\n\n    return intervalId;\n  }\n  /**\n   * Queues up a callback to be passed to requestAnimationFrame (rAF), but\n   * with a few extra bonuses:\n   *\n   * - Supports browsers that do not support rAF by falling back to\n   *   {@link Component#setTimeout}.\n   *\n   * - The callback is turned into a {@link Component~GenericCallback} (i.e.\n   *   bound to the component).\n   *\n   * - Automatic cancellation of the rAF callback is handled if the component\n   *   is disposed before it is called.\n   *\n   * @param  {Component~GenericCallback} fn\n   *         A function that will be bound to this component and executed just\n   *         before the browser's next repaint.\n   *\n   * @return {number}\n   *         Returns an rAF ID that gets used to identify the timeout. It can\n   *         also be used in {@link Component#cancelAnimationFrame} to cancel\n   *         the animation frame callback.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame}\n   */\n  ;\n\n  _proto.requestAnimationFrame = function requestAnimationFrame(fn) {\n    var _this3 = this; // Fall back to using a timer.\n\n\n    if (!this.supportsRaf_) {\n      return this.setTimeout(fn, 1000 / 60);\n    }\n\n    this.clearTimersOnDispose_(); // declare as variables so they are properly available in rAF function\n    // eslint-disable-next-line\n\n    var id;\n    fn = bind(this, fn);\n    id = window$1.requestAnimationFrame(function () {\n      if (_this3.rafIds_.has(id)) {\n        _this3.rafIds_[\"delete\"](id);\n      }\n\n      fn();\n    });\n    this.rafIds_.add(id);\n    return id;\n  }\n  /**\n   * Request an animation frame, but only one named animation\n   * frame will be queued. Another will never be added until\n   * the previous one finishes.\n   *\n   * @param {string} name\n   *        The name to give this requestAnimationFrame\n   *\n   * @param  {Component~GenericCallback} fn\n   *         A function that will be bound to this component and executed just\n   *         before the browser's next repaint.\n   */\n  ;\n\n  _proto.requestNamedAnimationFrame = function requestNamedAnimationFrame(name, fn) {\n    var _this4 = this;\n\n    if (this.namedRafs_.has(name)) {\n      return;\n    }\n\n    this.clearTimersOnDispose_();\n    fn = bind(this, fn);\n    var id = this.requestAnimationFrame(function () {\n      fn();\n\n      if (_this4.namedRafs_.has(name)) {\n        _this4.namedRafs_[\"delete\"](name);\n      }\n    });\n    this.namedRafs_.set(name, id);\n    return name;\n  }\n  /**\n   * Cancels a current named animation frame if it exists.\n   *\n   * @param {string} name\n   *        The name of the requestAnimationFrame to cancel.\n   */\n  ;\n\n  _proto.cancelNamedAnimationFrame = function cancelNamedAnimationFrame(name) {\n    if (!this.namedRafs_.has(name)) {\n      return;\n    }\n\n    this.cancelAnimationFrame(this.namedRafs_.get(name));\n    this.namedRafs_[\"delete\"](name);\n  }\n  /**\n   * Cancels a queued callback passed to {@link Component#requestAnimationFrame}\n   * (rAF).\n   *\n   * If you queue an rAF callback via {@link Component#requestAnimationFrame},\n   * use this function instead of `window.cancelAnimationFrame`. If you don't,\n   * your dispose listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} id\n   *        The rAF ID to clear. The return value of {@link Component#requestAnimationFrame}.\n   *\n   * @return {number}\n   *         Returns the rAF ID that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/cancelAnimationFrame}\n   */\n  ;\n\n  _proto.cancelAnimationFrame = function cancelAnimationFrame(id) {\n    // Fall back to using a timer.\n    if (!this.supportsRaf_) {\n      return this.clearTimeout(id);\n    }\n\n    if (this.rafIds_.has(id)) {\n      this.rafIds_[\"delete\"](id);\n      window$1.cancelAnimationFrame(id);\n    }\n\n    return id;\n  }\n  /**\n   * A function to setup `requestAnimationFrame`, `setTimeout`,\n   * and `setInterval`, clearing on dispose.\n   *\n   * > Previously each timer added and removed dispose listeners on it's own.\n   * For better performance it was decided to batch them all, and use `Set`s\n   * to track outstanding timer ids.\n   *\n   * @private\n   */\n  ;\n\n  _proto.clearTimersOnDispose_ = function clearTimersOnDispose_() {\n    var _this5 = this;\n\n    if (this.clearingTimersOnDispose_) {\n      return;\n    }\n\n    this.clearingTimersOnDispose_ = true;\n    this.one('dispose', function () {\n      [['namedRafs_', 'cancelNamedAnimationFrame'], ['rafIds_', 'cancelAnimationFrame'], ['setTimeoutIds_', 'clearTimeout'], ['setIntervalIds_', 'clearInterval']].forEach(function (_ref) {\n        var idName = _ref[0],\n            cancelName = _ref[1]; // for a `Set` key will actually be the value again\n        // so forEach((val, val) =>` but for maps we want to use\n        // the key.\n\n        _this5[idName].forEach(function (val, key) {\n          return _this5[cancelName](key);\n        });\n      });\n      _this5.clearingTimersOnDispose_ = false;\n    });\n  }\n  /**\n   * Register a `Component` with `videojs` given the name and the component.\n   *\n   * > NOTE: {@link Tech}s should not be registered as a `Component`. {@link Tech}s\n   *         should be registered using {@link Tech.registerTech} or\n   *         {@link videojs:videojs.registerTech}.\n   *\n   * > NOTE: This function can also be seen on videojs as\n   *         {@link videojs:videojs.registerComponent}.\n   *\n   * @param {string} name\n   *        The name of the `Component` to register.\n   *\n   * @param {Component} ComponentToRegister\n   *        The `Component` class to register.\n   *\n   * @return {Component}\n   *         The `Component` that was registered.\n   */\n  ;\n\n  Component.registerComponent = function registerComponent(name, ComponentToRegister) {\n    if (typeof name !== 'string' || !name) {\n      throw new Error(\"Illegal component name, \\\"\" + name + \"\\\"; must be a non-empty string.\");\n    }\n\n    var Tech = Component.getComponent('Tech'); // We need to make sure this check is only done if Tech has been registered.\n\n    var isTech = Tech && Tech.isTech(ComponentToRegister);\n    var isComp = Component === ComponentToRegister || Component.prototype.isPrototypeOf(ComponentToRegister.prototype);\n\n    if (isTech || !isComp) {\n      var reason;\n\n      if (isTech) {\n        reason = 'techs must be registered using Tech.registerTech()';\n      } else {\n        reason = 'must be a Component subclass';\n      }\n\n      throw new Error(\"Illegal component, \\\"\" + name + \"\\\"; \" + reason + \".\");\n    }\n\n    name = toTitleCase$1(name);\n\n    if (!Component.components_) {\n      Component.components_ = {};\n    }\n\n    var Player = Component.getComponent('Player');\n\n    if (name === 'Player' && Player && Player.players) {\n      var players = Player.players;\n      var playerNames = Object.keys(players); // If we have players that were disposed, then their name will still be\n      // in Players.players. So, we must loop through and verify that the value\n      // for each item is not null. This allows registration of the Player component\n      // after all players have been disposed or before any were created.\n\n      if (players && playerNames.length > 0 && playerNames.map(function (pname) {\n        return players[pname];\n      }).every(Boolean)) {\n        throw new Error('Can not register Player component after player has been created.');\n      }\n    }\n\n    Component.components_[name] = ComponentToRegister;\n    Component.components_[toLowerCase(name)] = ComponentToRegister;\n    return ComponentToRegister;\n  }\n  /**\n   * Get a `Component` based on the name it was registered with.\n   *\n   * @param {string} name\n   *        The Name of the component to get.\n   *\n   * @return {Component}\n   *         The `Component` that got registered under the given name.\n   */\n  ;\n\n  Component.getComponent = function getComponent(name) {\n    if (!name || !Component.components_) {\n      return;\n    }\n\n    return Component.components_[name];\n  };\n\n  return Component;\n}();\n/**\n * Whether or not this component supports `requestAnimationFrame`.\n *\n * This is exposed primarily for testing purposes.\n *\n * @private\n * @type {Boolean}\n */\n\n\nComponent$1.prototype.supportsRaf_ = typeof window$1.requestAnimationFrame === 'function' && typeof window$1.cancelAnimationFrame === 'function';\nComponent$1.registerComponent('Component', Component$1);\n/**\n * @file time-ranges.js\n * @module time-ranges\n */\n\n/**\n * Returns the time for the specified index at the start or end\n * of a TimeRange object.\n *\n * @typedef    {Function} TimeRangeIndex\n *\n * @param      {number} [index=0]\n *             The range number to return the time for.\n *\n * @return     {number}\n *             The time offset at the specified index.\n *\n * @deprecated The index argument must be provided.\n *             In the future, leaving it out will throw an error.\n */\n\n/**\n * An object that contains ranges of time.\n *\n * @typedef  {Object} TimeRange\n *\n * @property {number} length\n *           The number of time ranges represented by this object.\n *\n * @property {module:time-ranges~TimeRangeIndex} start\n *           Returns the time offset at which a specified time range begins.\n *\n * @property {module:time-ranges~TimeRangeIndex} end\n *           Returns the time offset at which a specified time range ends.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges\n */\n\n/**\n * Check if any of the time ranges are over the maximum index.\n *\n * @private\n * @param   {string} fnName\n *          The function name to use for logging\n *\n * @param   {number} index\n *          The index to check\n *\n * @param   {number} maxIndex\n *          The maximum possible index\n *\n * @throws  {Error} if the timeRanges provided are over the maxIndex\n */\n\nfunction rangeCheck(fnName, index, maxIndex) {\n  if (typeof index !== 'number' || index < 0 || index > maxIndex) {\n    throw new Error(\"Failed to execute '\" + fnName + \"' on 'TimeRanges': The index provided (\" + index + \") is non-numeric or out of bounds (0-\" + maxIndex + \").\");\n  }\n}\n/**\n * Get the time for the specified index at the start or end\n * of a TimeRange object.\n *\n * @private\n * @param      {string} fnName\n *             The function name to use for logging\n *\n * @param      {string} valueIndex\n *             The property that should be used to get the time. should be\n *             'start' or 'end'\n *\n * @param      {Array} ranges\n *             An array of time ranges\n *\n * @param      {Array} [rangeIndex=0]\n *             The index to start the search at\n *\n * @return     {number}\n *             The time that offset at the specified index.\n *\n * @deprecated rangeIndex must be set to a value, in the future this will throw an error.\n * @throws     {Error} if rangeIndex is more than the length of ranges\n */\n\n\nfunction getRange(fnName, valueIndex, ranges, rangeIndex) {\n  rangeCheck(fnName, rangeIndex, ranges.length - 1);\n  return ranges[rangeIndex][valueIndex];\n}\n/**\n * Create a time range object given ranges of time.\n *\n * @private\n * @param   {Array} [ranges]\n *          An array of time ranges.\n */\n\n\nfunction createTimeRangesObj(ranges) {\n  var timeRangesObj;\n\n  if (ranges === undefined || ranges.length === 0) {\n    timeRangesObj = {\n      length: 0,\n      start: function start() {\n        throw new Error('This TimeRanges object is empty');\n      },\n      end: function end() {\n        throw new Error('This TimeRanges object is empty');\n      }\n    };\n  } else {\n    timeRangesObj = {\n      length: ranges.length,\n      start: getRange.bind(null, 'start', 0, ranges),\n      end: getRange.bind(null, 'end', 1, ranges)\n    };\n  }\n\n  if (window$1.Symbol && window$1.Symbol.iterator) {\n    timeRangesObj[window$1.Symbol.iterator] = function () {\n      return (ranges || []).values();\n    };\n  }\n\n  return timeRangesObj;\n}\n/**\n * Create a `TimeRange` object which mimics an\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges|HTML5 TimeRanges instance}.\n *\n * @param {number|Array[]} start\n *        The start of a single range (a number) or an array of ranges (an\n *        array of arrays of two numbers each).\n *\n * @param {number} end\n *        The end of a single range. Cannot be used with the array form of\n *        the `start` argument.\n */\n\n\nfunction createTimeRanges(start, end) {\n  if (Array.isArray(start)) {\n    return createTimeRangesObj(start);\n  } else if (start === undefined || end === undefined) {\n    return createTimeRangesObj();\n  }\n\n  return createTimeRangesObj([[start, end]]);\n}\n/**\n * @file buffer.js\n * @module buffer\n */\n\n/**\n * Compute the percentage of the media that has been buffered.\n *\n * @param {TimeRange} buffered\n *        The current `TimeRange` object representing buffered time ranges\n *\n * @param {number} duration\n *        Total duration of the media\n *\n * @return {number}\n *         Percent buffered of the total duration in decimal form.\n */\n\n\nfunction bufferedPercent(buffered, duration) {\n  var bufferedDuration = 0;\n  var start;\n  var end;\n\n  if (!duration) {\n    return 0;\n  }\n\n  if (!buffered || !buffered.length) {\n    buffered = createTimeRanges(0, 0);\n  }\n\n  for (var i = 0; i < buffered.length; i++) {\n    start = buffered.start(i);\n    end = buffered.end(i); // buffered end can be bigger than duration by a very small fraction\n\n    if (end > duration) {\n      end = duration;\n    }\n\n    bufferedDuration += end - start;\n  }\n\n  return bufferedDuration / duration;\n}\n/**\n * @file media-error.js\n */\n\n/**\n * A Custom `MediaError` class which mimics the standard HTML5 `MediaError` class.\n *\n * @param {number|string|Object|MediaError} value\n *        This can be of multiple types:\n *        - number: should be a standard error code\n *        - string: an error message (the code will be 0)\n *        - Object: arbitrary properties\n *        - `MediaError` (native): used to populate a video.js `MediaError` object\n *        - `MediaError` (video.js): will return itself if it's already a\n *          video.js `MediaError` object.\n *\n * @see [MediaError Spec]{@link https://dev.w3.org/html5/spec-author-view/video.html#mediaerror}\n * @see [Encrypted MediaError Spec]{@link https://www.w3.org/TR/2013/WD-encrypted-media-20130510/#error-codes}\n *\n * @class MediaError\n */\n\n\nfunction MediaError(value) {\n  // Allow redundant calls to this constructor to avoid having `instanceof`\n  // checks peppered around the code.\n  if (value instanceof MediaError) {\n    return value;\n  }\n\n  if (typeof value === 'number') {\n    this.code = value;\n  } else if (typeof value === 'string') {\n    // default code is zero, so this is a custom error\n    this.message = value;\n  } else if (isObject(value)) {\n    // We assign the `code` property manually because native `MediaError` objects\n    // do not expose it as an own/enumerable property of the object.\n    if (typeof value.code === 'number') {\n      this.code = value.code;\n    }\n\n    assign(this, value);\n  }\n\n  if (!this.message) {\n    this.message = MediaError.defaultMessages[this.code] || '';\n  }\n}\n/**\n * The error code that refers two one of the defined `MediaError` types\n *\n * @type {Number}\n */\n\n\nMediaError.prototype.code = 0;\n/**\n * An optional message that to show with the error. Message is not part of the HTML5\n * video spec but allows for more informative custom errors.\n *\n * @type {String}\n */\n\nMediaError.prototype.message = '';\n/**\n * An optional status code that can be set by plugins to allow even more detail about\n * the error. For example a plugin might provide a specific HTTP status code and an\n * error message for that code. Then when the plugin gets that error this class will\n * know how to display an error message for it. This allows a custom message to show\n * up on the `Player` error overlay.\n *\n * @type {Array}\n */\n\nMediaError.prototype.status = null;\n/**\n * Errors indexed by the W3C standard. The order **CANNOT CHANGE**! See the\n * specification listed under {@link MediaError} for more information.\n *\n * @enum {array}\n * @readonly\n * @property {string} 0 - MEDIA_ERR_CUSTOM\n * @property {string} 1 - MEDIA_ERR_ABORTED\n * @property {string} 2 - MEDIA_ERR_NETWORK\n * @property {string} 3 - MEDIA_ERR_DECODE\n * @property {string} 4 - MEDIA_ERR_SRC_NOT_SUPPORTED\n * @property {string} 5 - MEDIA_ERR_ENCRYPTED\n */\n\nMediaError.errorTypes = ['MEDIA_ERR_CUSTOM', 'MEDIA_ERR_ABORTED', 'MEDIA_ERR_NETWORK', 'MEDIA_ERR_DECODE', 'MEDIA_ERR_SRC_NOT_SUPPORTED', 'MEDIA_ERR_ENCRYPTED'];\n/**\n * The default `MediaError` messages based on the {@link MediaError.errorTypes}.\n *\n * @type {Array}\n * @constant\n */\n\nMediaError.defaultMessages = {\n  1: 'You aborted the media playback',\n  2: 'A network error caused the media download to fail part-way.',\n  3: 'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',\n  4: 'The media could not be loaded, either because the server or network failed or because the format is not supported.',\n  5: 'The media is encrypted and we do not have the keys to decrypt it.'\n}; // Add types as properties on MediaError\n// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;\n\nfor (var errNum = 0; errNum < MediaError.errorTypes.length; errNum++) {\n  MediaError[MediaError.errorTypes[errNum]] = errNum; // values should be accessible on both the class and instance\n\n  MediaError.prototype[MediaError.errorTypes[errNum]] = errNum;\n} // jsdocs for instance/static members added above\n\n/**\n * Returns whether an object is `Promise`-like (i.e. has a `then` method).\n *\n * @param  {Object}  value\n *         An object that may or may not be `Promise`-like.\n *\n * @return {boolean}\n *         Whether or not the object is `Promise`-like.\n */\n\n\nfunction isPromise(value) {\n  return value !== undefined && value !== null && typeof value.then === 'function';\n}\n/**\n * Silence a Promise-like object.\n *\n * This is useful for avoiding non-harmful, but potentially confusing \"uncaught\n * play promise\" rejection error messages.\n *\n * @param  {Object} value\n *         An object that may or may not be `Promise`-like.\n */\n\n\nfunction silencePromise(value) {\n  if (isPromise(value)) {\n    value.then(null, function (e) {});\n  }\n}\n/**\n * @file text-track-list-converter.js Utilities for capturing text track state and\n * re-creating tracks based on a capture.\n *\n * @module text-track-list-converter\n */\n\n/**\n * Examine a single {@link TextTrack} and return a JSON-compatible javascript object that\n * represents the {@link TextTrack}'s state.\n *\n * @param {TextTrack} track\n *        The text track to query.\n *\n * @return {Object}\n *         A serializable javascript representation of the TextTrack.\n * @private\n */\n\n\nvar trackToJson_ = function trackToJson_(track) {\n  var ret = ['kind', 'label', 'language', 'id', 'inBandMetadataTrackDispatchType', 'mode', 'src'].reduce(function (acc, prop, i) {\n    if (track[prop]) {\n      acc[prop] = track[prop];\n    }\n\n    return acc;\n  }, {\n    cues: track.cues && Array.prototype.map.call(track.cues, function (cue) {\n      return {\n        startTime: cue.startTime,\n        endTime: cue.endTime,\n        text: cue.text,\n        id: cue.id\n      };\n    })\n  });\n  return ret;\n};\n/**\n * Examine a {@link Tech} and return a JSON-compatible javascript array that represents the\n * state of all {@link TextTrack}s currently configured. The return array is compatible with\n * {@link text-track-list-converter:jsonToTextTracks}.\n *\n * @param {Tech} tech\n *        The tech object to query\n *\n * @return {Array}\n *         A serializable javascript representation of the {@link Tech}s\n *         {@link TextTrackList}.\n */\n\n\nvar textTracksToJson = function textTracksToJson(tech) {\n  var trackEls = tech.$$('track');\n  var trackObjs = Array.prototype.map.call(trackEls, function (t) {\n    return t.track;\n  });\n  var tracks = Array.prototype.map.call(trackEls, function (trackEl) {\n    var json = trackToJson_(trackEl.track);\n\n    if (trackEl.src) {\n      json.src = trackEl.src;\n    }\n\n    return json;\n  });\n  return tracks.concat(Array.prototype.filter.call(tech.textTracks(), function (track) {\n    return trackObjs.indexOf(track) === -1;\n  }).map(trackToJson_));\n};\n/**\n * Create a set of remote {@link TextTrack}s on a {@link Tech} based on an array of javascript\n * object {@link TextTrack} representations.\n *\n * @param {Array} json\n *        An array of `TextTrack` representation objects, like those that would be\n *        produced by `textTracksToJson`.\n *\n * @param {Tech} tech\n *        The `Tech` to create the `TextTrack`s on.\n */\n\n\nvar jsonToTextTracks = function jsonToTextTracks(json, tech) {\n  json.forEach(function (track) {\n    var addedTrack = tech.addRemoteTextTrack(track).track;\n\n    if (!track.src && track.cues) {\n      track.cues.forEach(function (cue) {\n        return addedTrack.addCue(cue);\n      });\n    }\n  });\n  return tech.textTracks();\n};\n\nvar textTrackConverter = {\n  textTracksToJson: textTracksToJson,\n  jsonToTextTracks: jsonToTextTracks,\n  trackToJson_: trackToJson_\n};\nvar MODAL_CLASS_NAME = 'vjs-modal-dialog';\n/**\n * The `ModalDialog` displays over the video and its controls, which blocks\n * interaction with the player until it is closed.\n *\n * Modal dialogs include a \"Close\" button and will close when that button\n * is activated - or when ESC is pressed anywhere.\n *\n * @extends Component\n */\n\nvar ModalDialog = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ModalDialog, _Component);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Mixed} [options.content=undefined]\n   *        Provide customized content for this modal.\n   *\n   * @param {string} [options.description]\n   *        A text description for the modal, primarily for accessibility.\n   *\n   * @param {boolean} [options.fillAlways=false]\n   *        Normally, modals are automatically filled only the first time\n   *        they open. This tells the modal to refresh its content\n   *        every time it opens.\n   *\n   * @param {string} [options.label]\n   *        A text label for the modal, primarily for accessibility.\n   *\n   * @param {boolean} [options.pauseOnOpen=true]\n   *        If `true`, playback will will be paused if playing when\n   *        the modal opens, and resumed when it closes.\n   *\n   * @param {boolean} [options.temporary=true]\n   *        If `true`, the modal can only be opened once; it will be\n   *        disposed as soon as it's closed.\n   *\n   * @param {boolean} [options.uncloseable=false]\n   *        If `true`, the user will not be able to close the modal\n   *        through the UI in the normal ways. Programmatic closing is\n   *        still possible.\n   */\n\n\n  function ModalDialog(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    _this.handleKeyDown_ = function (e) {\n      return _this.handleKeyDown(e);\n    };\n\n    _this.close_ = function (e) {\n      return _this.close(e);\n    };\n\n    _this.opened_ = _this.hasBeenOpened_ = _this.hasBeenFilled_ = false;\n\n    _this.closeable(!_this.options_.uncloseable);\n\n    _this.content(_this.options_.content); // Make sure the contentEl is defined AFTER any children are initialized\n    // because we only want the contents of the modal in the contentEl\n    // (not the UI elements like the close button).\n\n\n    _this.contentEl_ = createEl('div', {\n      className: MODAL_CLASS_NAME + \"-content\"\n    }, {\n      role: 'document'\n    });\n    _this.descEl_ = createEl('p', {\n      className: MODAL_CLASS_NAME + \"-description vjs-control-text\",\n      id: _this.el().getAttribute('aria-describedby')\n    });\n    textContent(_this.descEl_, _this.description());\n\n    _this.el_.appendChild(_this.descEl_);\n\n    _this.el_.appendChild(_this.contentEl_);\n\n    return _this;\n  }\n  /**\n   * Create the `ModalDialog`'s DOM element\n   *\n   * @return {Element}\n   *         The DOM element that gets created.\n   */\n\n\n  var _proto = ModalDialog.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass(),\n      tabIndex: -1\n    }, {\n      'aria-describedby': this.id() + \"_description\",\n      'aria-hidden': 'true',\n      'aria-label': this.label(),\n      'role': 'dialog'\n    });\n  };\n\n  _proto.dispose = function dispose() {\n    this.contentEl_ = null;\n    this.descEl_ = null;\n    this.previouslyActiveEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return MODAL_CLASS_NAME + \" vjs-hidden \" + _Component.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Returns the label string for this modal. Primarily used for accessibility.\n   *\n   * @return {string}\n   *         the localized or raw label of this modal.\n   */\n  ;\n\n  _proto.label = function label() {\n    return this.localize(this.options_.label || 'Modal Window');\n  }\n  /**\n   * Returns the description string for this modal. Primarily used for\n   * accessibility.\n   *\n   * @return {string}\n   *         The localized or raw description of this modal.\n   */\n  ;\n\n  _proto.description = function description() {\n    var desc = this.options_.description || this.localize('This is a modal window.'); // Append a universal closeability message if the modal is closeable.\n\n    if (this.closeable()) {\n      desc += ' ' + this.localize('This modal can be closed by pressing the Escape key or activating the close button.');\n    }\n\n    return desc;\n  }\n  /**\n   * Opens the modal.\n   *\n   * @fires ModalDialog#beforemodalopen\n   * @fires ModalDialog#modalopen\n   */\n  ;\n\n  _proto.open = function open() {\n    if (!this.opened_) {\n      var player = this.player();\n      /**\n        * Fired just before a `ModalDialog` is opened.\n        *\n        * @event ModalDialog#beforemodalopen\n        * @type {EventTarget~Event}\n        */\n\n      this.trigger('beforemodalopen');\n      this.opened_ = true; // Fill content if the modal has never opened before and\n      // never been filled.\n\n      if (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) {\n        this.fill();\n      } // If the player was playing, pause it and take note of its previously\n      // playing state.\n\n\n      this.wasPlaying_ = !player.paused();\n\n      if (this.options_.pauseOnOpen && this.wasPlaying_) {\n        player.pause();\n      }\n\n      this.on('keydown', this.handleKeyDown_); // Hide controls and note if they were enabled.\n\n      this.hadControls_ = player.controls();\n      player.controls(false);\n      this.show();\n      this.conditionalFocus_();\n      this.el().setAttribute('aria-hidden', 'false');\n      /**\n        * Fired just after a `ModalDialog` is opened.\n        *\n        * @event ModalDialog#modalopen\n        * @type {EventTarget~Event}\n        */\n\n      this.trigger('modalopen');\n      this.hasBeenOpened_ = true;\n    }\n  }\n  /**\n   * If the `ModalDialog` is currently open or closed.\n   *\n   * @param  {boolean} [value]\n   *         If given, it will open (`true`) or close (`false`) the modal.\n   *\n   * @return {boolean}\n   *         the current open state of the modaldialog\n   */\n  ;\n\n  _proto.opened = function opened(value) {\n    if (typeof value === 'boolean') {\n      this[value ? 'open' : 'close']();\n    }\n\n    return this.opened_;\n  }\n  /**\n   * Closes the modal, does nothing if the `ModalDialog` is\n   * not open.\n   *\n   * @fires ModalDialog#beforemodalclose\n   * @fires ModalDialog#modalclose\n   */\n  ;\n\n  _proto.close = function close() {\n    if (!this.opened_) {\n      return;\n    }\n\n    var player = this.player();\n    /**\n      * Fired just before a `ModalDialog` is closed.\n      *\n      * @event ModalDialog#beforemodalclose\n      * @type {EventTarget~Event}\n      */\n\n    this.trigger('beforemodalclose');\n    this.opened_ = false;\n\n    if (this.wasPlaying_ && this.options_.pauseOnOpen) {\n      player.play();\n    }\n\n    this.off('keydown', this.handleKeyDown_);\n\n    if (this.hadControls_) {\n      player.controls(true);\n    }\n\n    this.hide();\n    this.el().setAttribute('aria-hidden', 'true');\n    /**\n      * Fired just after a `ModalDialog` is closed.\n      *\n      * @event ModalDialog#modalclose\n      * @type {EventTarget~Event}\n      */\n\n    this.trigger('modalclose');\n    this.conditionalBlur_();\n\n    if (this.options_.temporary) {\n      this.dispose();\n    }\n  }\n  /**\n   * Check to see if the `ModalDialog` is closeable via the UI.\n   *\n   * @param  {boolean} [value]\n   *         If given as a boolean, it will set the `closeable` option.\n   *\n   * @return {boolean}\n   *         Returns the final value of the closable option.\n   */\n  ;\n\n  _proto.closeable = function closeable(value) {\n    if (typeof value === 'boolean') {\n      var closeable = this.closeable_ = !!value;\n      var close = this.getChild('closeButton'); // If this is being made closeable and has no close button, add one.\n\n      if (closeable && !close) {\n        // The close button should be a child of the modal - not its\n        // content element, so temporarily change the content element.\n        var temp = this.contentEl_;\n        this.contentEl_ = this.el_;\n        close = this.addChild('closeButton', {\n          controlText: 'Close Modal Dialog'\n        });\n        this.contentEl_ = temp;\n        this.on(close, 'close', this.close_);\n      } // If this is being made uncloseable and has a close button, remove it.\n\n\n      if (!closeable && close) {\n        this.off(close, 'close', this.close_);\n        this.removeChild(close);\n        close.dispose();\n      }\n    }\n\n    return this.closeable_;\n  }\n  /**\n   * Fill the modal's content element with the modal's \"content\" option.\n   * The content element will be emptied before this change takes place.\n   */\n  ;\n\n  _proto.fill = function fill() {\n    this.fillWith(this.content());\n  }\n  /**\n   * Fill the modal's content element with arbitrary content.\n   * The content element will be emptied before this change takes place.\n   *\n   * @fires ModalDialog#beforemodalfill\n   * @fires ModalDialog#modalfill\n   *\n   * @param {Mixed} [content]\n   *        The same rules apply to this as apply to the `content` option.\n   */\n  ;\n\n  _proto.fillWith = function fillWith(content) {\n    var contentEl = this.contentEl();\n    var parentEl = contentEl.parentNode;\n    var nextSiblingEl = contentEl.nextSibling;\n    /**\n      * Fired just before a `ModalDialog` is filled with content.\n      *\n      * @event ModalDialog#beforemodalfill\n      * @type {EventTarget~Event}\n      */\n\n    this.trigger('beforemodalfill');\n    this.hasBeenFilled_ = true; // Detach the content element from the DOM before performing\n    // manipulation to avoid modifying the live DOM multiple times.\n\n    parentEl.removeChild(contentEl);\n    this.empty();\n    insertContent(contentEl, content);\n    /**\n     * Fired just after a `ModalDialog` is filled with content.\n     *\n     * @event ModalDialog#modalfill\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('modalfill'); // Re-inject the re-filled content element.\n\n    if (nextSiblingEl) {\n      parentEl.insertBefore(contentEl, nextSiblingEl);\n    } else {\n      parentEl.appendChild(contentEl);\n    } // make sure that the close button is last in the dialog DOM\n\n\n    var closeButton = this.getChild('closeButton');\n\n    if (closeButton) {\n      parentEl.appendChild(closeButton.el_);\n    }\n  }\n  /**\n   * Empties the content element. This happens anytime the modal is filled.\n   *\n   * @fires ModalDialog#beforemodalempty\n   * @fires ModalDialog#modalempty\n   */\n  ;\n\n  _proto.empty = function empty() {\n    /**\n    * Fired just before a `ModalDialog` is emptied.\n    *\n    * @event ModalDialog#beforemodalempty\n    * @type {EventTarget~Event}\n    */\n    this.trigger('beforemodalempty');\n    emptyEl(this.contentEl());\n    /**\n    * Fired just after a `ModalDialog` is emptied.\n    *\n    * @event ModalDialog#modalempty\n    * @type {EventTarget~Event}\n    */\n\n    this.trigger('modalempty');\n  }\n  /**\n   * Gets or sets the modal content, which gets normalized before being\n   * rendered into the DOM.\n   *\n   * This does not update the DOM or fill the modal, but it is called during\n   * that process.\n   *\n   * @param  {Mixed} [value]\n   *         If defined, sets the internal content value to be used on the\n   *         next call(s) to `fill`. This value is normalized before being\n   *         inserted. To \"clear\" the internal content value, pass `null`.\n   *\n   * @return {Mixed}\n   *         The current content of the modal dialog\n   */\n  ;\n\n  _proto.content = function content(value) {\n    if (typeof value !== 'undefined') {\n      this.content_ = value;\n    }\n\n    return this.content_;\n  }\n  /**\n   * conditionally focus the modal dialog if focus was previously on the player.\n   *\n   * @private\n   */\n  ;\n\n  _proto.conditionalFocus_ = function conditionalFocus_() {\n    var activeEl = document.activeElement;\n    var playerEl = this.player_.el_;\n    this.previouslyActiveEl_ = null;\n\n    if (playerEl.contains(activeEl) || playerEl === activeEl) {\n      this.previouslyActiveEl_ = activeEl;\n      this.focus();\n    }\n  }\n  /**\n   * conditionally blur the element and refocus the last focused element\n   *\n   * @private\n   */\n  ;\n\n  _proto.conditionalBlur_ = function conditionalBlur_() {\n    if (this.previouslyActiveEl_) {\n      this.previouslyActiveEl_.focus();\n      this.previouslyActiveEl_ = null;\n    }\n  }\n  /**\n   * Keydown handler. Attached when modal is focused.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Do not allow keydowns to reach out of the modal dialog.\n    event.stopPropagation();\n\n    if (keycode.isEventKey(event, 'Escape') && this.closeable()) {\n      event.preventDefault();\n      this.close();\n      return;\n    } // exit early if it isn't a tab key\n\n\n    if (!keycode.isEventKey(event, 'Tab')) {\n      return;\n    }\n\n    var focusableEls = this.focusableEls_();\n    var activeEl = this.el_.querySelector(':focus');\n    var focusIndex;\n\n    for (var i = 0; i < focusableEls.length; i++) {\n      if (activeEl === focusableEls[i]) {\n        focusIndex = i;\n        break;\n      }\n    }\n\n    if (document.activeElement === this.el_) {\n      focusIndex = 0;\n    }\n\n    if (event.shiftKey && focusIndex === 0) {\n      focusableEls[focusableEls.length - 1].focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && focusIndex === focusableEls.length - 1) {\n      focusableEls[0].focus();\n      event.preventDefault();\n    }\n  }\n  /**\n   * get all focusable elements\n   *\n   * @private\n   */\n  ;\n\n  _proto.focusableEls_ = function focusableEls_() {\n    var allChildren = this.el_.querySelectorAll('*');\n    return Array.prototype.filter.call(allChildren, function (child) {\n      return (child instanceof window$1.HTMLAnchorElement || child instanceof window$1.HTMLAreaElement) && child.hasAttribute('href') || (child instanceof window$1.HTMLInputElement || child instanceof window$1.HTMLSelectElement || child instanceof window$1.HTMLTextAreaElement || child instanceof window$1.HTMLButtonElement) && !child.hasAttribute('disabled') || child instanceof window$1.HTMLIFrameElement || child instanceof window$1.HTMLObjectElement || child instanceof window$1.HTMLEmbedElement || child.hasAttribute('tabindex') && child.getAttribute('tabindex') !== -1 || child.hasAttribute('contenteditable');\n    });\n  };\n\n  return ModalDialog;\n}(Component$1);\n/**\n * Default options for `ModalDialog` default options.\n *\n * @type {Object}\n * @private\n */\n\n\nModalDialog.prototype.options_ = {\n  pauseOnOpen: true,\n  temporary: true\n};\nComponent$1.registerComponent('ModalDialog', ModalDialog);\n/**\n * Common functionaliy between {@link TextTrackList}, {@link AudioTrackList}, and\n * {@link VideoTrackList}\n *\n * @extends EventTarget\n */\n\nvar TrackList = /*#__PURE__*/function (_EventTarget) {\n  _inheritsLoose(TrackList, _EventTarget);\n  /**\n   * Create an instance of this class\n   *\n   * @param {Track[]} tracks\n   *        A list of tracks to initialize the list with.\n   *\n   * @abstract\n   */\n\n\n  function TrackList(tracks) {\n    var _this;\n\n    if (tracks === void 0) {\n      tracks = [];\n    }\n\n    _this = _EventTarget.call(this) || this;\n    _this.tracks_ = [];\n    /**\n     * @memberof TrackList\n     * @member {number} length\n     *         The current number of `Track`s in the this Trackist.\n     * @instance\n     */\n\n    Object.defineProperty(_assertThisInitialized(_this), 'length', {\n      get: function get() {\n        return this.tracks_.length;\n      }\n    });\n\n    for (var i = 0; i < tracks.length; i++) {\n      _this.addTrack(tracks[i]);\n    }\n\n    return _this;\n  }\n  /**\n   * Add a {@link Track} to the `TrackList`\n   *\n   * @param {Track} track\n   *        The audio, video, or text track to add to the list.\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  var _proto = TrackList.prototype;\n\n  _proto.addTrack = function addTrack(track) {\n    var _this2 = this;\n\n    var index = this.tracks_.length;\n\n    if (!('' + index in this)) {\n      Object.defineProperty(this, index, {\n        get: function get() {\n          return this.tracks_[index];\n        }\n      });\n    } // Do not add duplicate tracks\n\n\n    if (this.tracks_.indexOf(track) === -1) {\n      this.tracks_.push(track);\n      /**\n       * Triggered when a track is added to a track list.\n       *\n       * @event TrackList#addtrack\n       * @type {EventTarget~Event}\n       * @property {Track} track\n       *           A reference to track that was added.\n       */\n\n      this.trigger({\n        track: track,\n        type: 'addtrack',\n        target: this\n      });\n    }\n    /**\n     * Triggered when a track label is changed.\n     *\n     * @event TrackList#addtrack\n     * @type {EventTarget~Event}\n     * @property {Track} track\n     *           A reference to track that was added.\n     */\n\n\n    track.labelchange_ = function () {\n      _this2.trigger({\n        track: track,\n        type: 'labelchange',\n        target: _this2\n      });\n    };\n\n    if (isEvented(track)) {\n      track.addEventListener('labelchange', track.labelchange_);\n    }\n  }\n  /**\n   * Remove a {@link Track} from the `TrackList`\n   *\n   * @param {Track} rtrack\n   *        The audio, video, or text track to remove from the list.\n   *\n   * @fires TrackList#removetrack\n   */\n  ;\n\n  _proto.removeTrack = function removeTrack(rtrack) {\n    var track;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (this[i] === rtrack) {\n        track = this[i];\n\n        if (track.off) {\n          track.off();\n        }\n\n        this.tracks_.splice(i, 1);\n        break;\n      }\n    }\n\n    if (!track) {\n      return;\n    }\n    /**\n     * Triggered when a track is removed from track list.\n     *\n     * @event TrackList#removetrack\n     * @type {EventTarget~Event}\n     * @property {Track} track\n     *           A reference to track that was removed.\n     */\n\n\n    this.trigger({\n      track: track,\n      type: 'removetrack',\n      target: this\n    });\n  }\n  /**\n   * Get a Track from the TrackList by a tracks id\n   *\n   * @param {string} id - the id of the track to get\n   * @method getTrackById\n   * @return {Track}\n   * @private\n   */\n  ;\n\n  _proto.getTrackById = function getTrackById(id) {\n    var result = null;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      var track = this[i];\n\n      if (track.id === id) {\n        result = track;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  return TrackList;\n}(EventTarget$2);\n/**\n * Triggered when a different track is selected/enabled.\n *\n * @event TrackList#change\n * @type {EventTarget~Event}\n */\n\n/**\n * Events that can be called with on + eventName. See {@link EventHandler}.\n *\n * @property {Object} TrackList#allowedEvents_\n * @private\n */\n\n\nTrackList.prototype.allowedEvents_ = {\n  change: 'change',\n  addtrack: 'addtrack',\n  removetrack: 'removetrack',\n  labelchange: 'labelchange'\n}; // emulate attribute EventHandler support to allow for feature detection\n\nfor (var event in TrackList.prototype.allowedEvents_) {\n  TrackList.prototype['on' + event] = null;\n}\n/**\n * Anywhere we call this function we diverge from the spec\n * as we only support one enabled audiotrack at a time\n *\n * @param {AudioTrackList} list\n *        list to work on\n *\n * @param {AudioTrack} track\n *        The track to skip\n *\n * @private\n */\n\n\nvar disableOthers$1 = function disableOthers(list, track) {\n  for (var i = 0; i < list.length; i++) {\n    if (!Object.keys(list[i]).length || track.id === list[i].id) {\n      continue;\n    } // another audio track is enabled, disable it\n\n\n    list[i].enabled = false;\n  }\n};\n/**\n * The current list of {@link AudioTrack} for a media file.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist}\n * @extends TrackList\n */\n\n\nvar AudioTrackList = /*#__PURE__*/function (_TrackList) {\n  _inheritsLoose(AudioTrackList, _TrackList);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {AudioTrack[]} [tracks=[]]\n   *        A list of `AudioTrack` to instantiate the list with.\n   */\n\n\n  function AudioTrackList(tracks) {\n    var _this;\n\n    if (tracks === void 0) {\n      tracks = [];\n    } // make sure only 1 track is enabled\n    // sorted from last index to first index\n\n\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      if (tracks[i].enabled) {\n        disableOthers$1(tracks, tracks[i]);\n        break;\n      }\n    }\n\n    _this = _TrackList.call(this, tracks) || this;\n    _this.changing_ = false;\n    return _this;\n  }\n  /**\n   * Add an {@link AudioTrack} to the `AudioTrackList`.\n   *\n   * @param {AudioTrack} track\n   *        The AudioTrack to add to the list\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  var _proto = AudioTrackList.prototype;\n\n  _proto.addTrack = function addTrack(track) {\n    var _this2 = this;\n\n    if (track.enabled) {\n      disableOthers$1(this, track);\n    }\n\n    _TrackList.prototype.addTrack.call(this, track); // native tracks don't have this\n\n\n    if (!track.addEventListener) {\n      return;\n    }\n\n    track.enabledChange_ = function () {\n      // when we are disabling other tracks (since we don't support\n      // more than one track at a time) we will set changing_\n      // to true so that we don't trigger additional change events\n      if (_this2.changing_) {\n        return;\n      }\n\n      _this2.changing_ = true;\n      disableOthers$1(_this2, track);\n      _this2.changing_ = false;\n\n      _this2.trigger('change');\n    };\n    /**\n     * @listens AudioTrack#enabledchange\n     * @fires TrackList#change\n     */\n\n\n    track.addEventListener('enabledchange', track.enabledChange_);\n  };\n\n  _proto.removeTrack = function removeTrack(rtrack) {\n    _TrackList.prototype.removeTrack.call(this, rtrack);\n\n    if (rtrack.removeEventListener && rtrack.enabledChange_) {\n      rtrack.removeEventListener('enabledchange', rtrack.enabledChange_);\n      rtrack.enabledChange_ = null;\n    }\n  };\n\n  return AudioTrackList;\n}(TrackList);\n/**\n * Un-select all other {@link VideoTrack}s that are selected.\n *\n * @param {VideoTrackList} list\n *        list to work on\n *\n * @param {VideoTrack} track\n *        The track to skip\n *\n * @private\n */\n\n\nvar disableOthers = function disableOthers(list, track) {\n  for (var i = 0; i < list.length; i++) {\n    if (!Object.keys(list[i]).length || track.id === list[i].id) {\n      continue;\n    } // another video track is enabled, disable it\n\n\n    list[i].selected = false;\n  }\n};\n/**\n * The current list of {@link VideoTrack} for a video.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist}\n * @extends TrackList\n */\n\n\nvar VideoTrackList = /*#__PURE__*/function (_TrackList) {\n  _inheritsLoose(VideoTrackList, _TrackList);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {VideoTrack[]} [tracks=[]]\n   *        A list of `VideoTrack` to instantiate the list with.\n   */\n\n\n  function VideoTrackList(tracks) {\n    var _this;\n\n    if (tracks === void 0) {\n      tracks = [];\n    } // make sure only 1 track is enabled\n    // sorted from last index to first index\n\n\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      if (tracks[i].selected) {\n        disableOthers(tracks, tracks[i]);\n        break;\n      }\n    }\n\n    _this = _TrackList.call(this, tracks) || this;\n    _this.changing_ = false;\n    /**\n     * @member {number} VideoTrackList#selectedIndex\n     *         The current index of the selected {@link VideoTrack`}.\n     */\n\n    Object.defineProperty(_assertThisInitialized(_this), 'selectedIndex', {\n      get: function get() {\n        for (var _i = 0; _i < this.length; _i++) {\n          if (this[_i].selected) {\n            return _i;\n          }\n        }\n\n        return -1;\n      },\n      set: function set() {}\n    });\n    return _this;\n  }\n  /**\n   * Add a {@link VideoTrack} to the `VideoTrackList`.\n   *\n   * @param {VideoTrack} track\n   *        The VideoTrack to add to the list\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  var _proto = VideoTrackList.prototype;\n\n  _proto.addTrack = function addTrack(track) {\n    var _this2 = this;\n\n    if (track.selected) {\n      disableOthers(this, track);\n    }\n\n    _TrackList.prototype.addTrack.call(this, track); // native tracks don't have this\n\n\n    if (!track.addEventListener) {\n      return;\n    }\n\n    track.selectedChange_ = function () {\n      if (_this2.changing_) {\n        return;\n      }\n\n      _this2.changing_ = true;\n      disableOthers(_this2, track);\n      _this2.changing_ = false;\n\n      _this2.trigger('change');\n    };\n    /**\n     * @listens VideoTrack#selectedchange\n     * @fires TrackList#change\n     */\n\n\n    track.addEventListener('selectedchange', track.selectedChange_);\n  };\n\n  _proto.removeTrack = function removeTrack(rtrack) {\n    _TrackList.prototype.removeTrack.call(this, rtrack);\n\n    if (rtrack.removeEventListener && rtrack.selectedChange_) {\n      rtrack.removeEventListener('selectedchange', rtrack.selectedChange_);\n      rtrack.selectedChange_ = null;\n    }\n  };\n\n  return VideoTrackList;\n}(TrackList);\n/**\n * The current list of {@link TextTrack} for a media file.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist}\n * @extends TrackList\n */\n\n\nvar TextTrackList = /*#__PURE__*/function (_TrackList) {\n  _inheritsLoose(TextTrackList, _TrackList);\n\n  function TextTrackList() {\n    return _TrackList.apply(this, arguments) || this;\n  }\n\n  var _proto = TextTrackList.prototype;\n  /**\n   * Add a {@link TextTrack} to the `TextTrackList`\n   *\n   * @param {TextTrack} track\n   *        The text track to add to the list.\n   *\n   * @fires TrackList#addtrack\n   */\n\n  _proto.addTrack = function addTrack(track) {\n    var _this = this;\n\n    _TrackList.prototype.addTrack.call(this, track);\n\n    if (!this.queueChange_) {\n      this.queueChange_ = function () {\n        return _this.queueTrigger('change');\n      };\n    }\n\n    if (!this.triggerSelectedlanguagechange) {\n      this.triggerSelectedlanguagechange_ = function () {\n        return _this.trigger('selectedlanguagechange');\n      };\n    }\n    /**\n     * @listens TextTrack#modechange\n     * @fires TrackList#change\n     */\n\n\n    track.addEventListener('modechange', this.queueChange_);\n    var nonLanguageTextTrackKind = ['metadata', 'chapters'];\n\n    if (nonLanguageTextTrackKind.indexOf(track.kind) === -1) {\n      track.addEventListener('modechange', this.triggerSelectedlanguagechange_);\n    }\n  };\n\n  _proto.removeTrack = function removeTrack(rtrack) {\n    _TrackList.prototype.removeTrack.call(this, rtrack); // manually remove the event handlers we added\n\n\n    if (rtrack.removeEventListener) {\n      if (this.queueChange_) {\n        rtrack.removeEventListener('modechange', this.queueChange_);\n      }\n\n      if (this.selectedlanguagechange_) {\n        rtrack.removeEventListener('modechange', this.triggerSelectedlanguagechange_);\n      }\n    }\n  };\n\n  return TextTrackList;\n}(TrackList);\n/**\n * @file html-track-element-list.js\n */\n\n/**\n * The current list of {@link HtmlTrackElement}s.\n */\n\n\nvar HtmlTrackElementList = /*#__PURE__*/function () {\n  /**\n   * Create an instance of this class.\n   *\n   * @param {HtmlTrackElement[]} [tracks=[]]\n   *        A list of `HtmlTrackElement` to instantiate the list with.\n   */\n  function HtmlTrackElementList(trackElements) {\n    if (trackElements === void 0) {\n      trackElements = [];\n    }\n\n    this.trackElements_ = [];\n    /**\n     * @memberof HtmlTrackElementList\n     * @member {number} length\n     *         The current number of `Track`s in the this Trackist.\n     * @instance\n     */\n\n    Object.defineProperty(this, 'length', {\n      get: function get() {\n        return this.trackElements_.length;\n      }\n    });\n\n    for (var i = 0, length = trackElements.length; i < length; i++) {\n      this.addTrackElement_(trackElements[i]);\n    }\n  }\n  /**\n   * Add an {@link HtmlTrackElement} to the `HtmlTrackElementList`\n   *\n   * @param {HtmlTrackElement} trackElement\n   *        The track element to add to the list.\n   *\n   * @private\n   */\n\n\n  var _proto = HtmlTrackElementList.prototype;\n\n  _proto.addTrackElement_ = function addTrackElement_(trackElement) {\n    var index = this.trackElements_.length;\n\n    if (!('' + index in this)) {\n      Object.defineProperty(this, index, {\n        get: function get() {\n          return this.trackElements_[index];\n        }\n      });\n    } // Do not add duplicate elements\n\n\n    if (this.trackElements_.indexOf(trackElement) === -1) {\n      this.trackElements_.push(trackElement);\n    }\n  }\n  /**\n   * Get an {@link HtmlTrackElement} from the `HtmlTrackElementList` given an\n   * {@link TextTrack}.\n   *\n   * @param {TextTrack} track\n   *        The track associated with a track element.\n   *\n   * @return {HtmlTrackElement|undefined}\n   *         The track element that was found or undefined.\n   *\n   * @private\n   */\n  ;\n\n  _proto.getTrackElementByTrack_ = function getTrackElementByTrack_(track) {\n    var trackElement_;\n\n    for (var i = 0, length = this.trackElements_.length; i < length; i++) {\n      if (track === this.trackElements_[i].track) {\n        trackElement_ = this.trackElements_[i];\n        break;\n      }\n    }\n\n    return trackElement_;\n  }\n  /**\n   * Remove a {@link HtmlTrackElement} from the `HtmlTrackElementList`\n   *\n   * @param {HtmlTrackElement} trackElement\n   *        The track element to remove from the list.\n   *\n   * @private\n   */\n  ;\n\n  _proto.removeTrackElement_ = function removeTrackElement_(trackElement) {\n    for (var i = 0, length = this.trackElements_.length; i < length; i++) {\n      if (trackElement === this.trackElements_[i]) {\n        if (this.trackElements_[i].track && typeof this.trackElements_[i].track.off === 'function') {\n          this.trackElements_[i].track.off();\n        }\n\n        if (typeof this.trackElements_[i].off === 'function') {\n          this.trackElements_[i].off();\n        }\n\n        this.trackElements_.splice(i, 1);\n        break;\n      }\n    }\n  };\n\n  return HtmlTrackElementList;\n}();\n/**\n * @file text-track-cue-list.js\n */\n\n/**\n * @typedef {Object} TextTrackCueList~TextTrackCue\n *\n * @property {string} id\n *           The unique id for this text track cue\n *\n * @property {number} startTime\n *           The start time for this text track cue\n *\n * @property {number} endTime\n *           The end time for this text track cue\n *\n * @property {boolean} pauseOnExit\n *           Pause when the end time is reached if true.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue}\n */\n\n/**\n * A List of TextTrackCues.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist}\n */\n\n\nvar TextTrackCueList = /*#__PURE__*/function () {\n  /**\n   * Create an instance of this class..\n   *\n   * @param {Array} cues\n   *        A list of cues to be initialized with\n   */\n  function TextTrackCueList(cues) {\n    TextTrackCueList.prototype.setCues_.call(this, cues);\n    /**\n     * @memberof TextTrackCueList\n     * @member {number} length\n     *         The current number of `TextTrackCue`s in the TextTrackCueList.\n     * @instance\n     */\n\n    Object.defineProperty(this, 'length', {\n      get: function get() {\n        return this.length_;\n      }\n    });\n  }\n  /**\n   * A setter for cues in this list. Creates getters\n   * an an index for the cues.\n   *\n   * @param {Array} cues\n   *        An array of cues to set\n   *\n   * @private\n   */\n\n\n  var _proto = TextTrackCueList.prototype;\n\n  _proto.setCues_ = function setCues_(cues) {\n    var oldLength = this.length || 0;\n    var i = 0;\n    var l = cues.length;\n    this.cues_ = cues;\n    this.length_ = cues.length;\n\n    var defineProp = function defineProp(index) {\n      if (!('' + index in this)) {\n        Object.defineProperty(this, '' + index, {\n          get: function get() {\n            return this.cues_[index];\n          }\n        });\n      }\n    };\n\n    if (oldLength < l) {\n      i = oldLength;\n\n      for (; i < l; i++) {\n        defineProp.call(this, i);\n      }\n    }\n  }\n  /**\n   * Get a `TextTrackCue` that is currently in the `TextTrackCueList` by id.\n   *\n   * @param {string} id\n   *        The id of the cue that should be searched for.\n   *\n   * @return {TextTrackCueList~TextTrackCue|null}\n   *         A single cue or null if none was found.\n   */\n  ;\n\n  _proto.getCueById = function getCueById(id) {\n    var result = null;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      var cue = this[i];\n\n      if (cue.id === id) {\n        result = cue;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  return TextTrackCueList;\n}();\n/**\n * @file track-kinds.js\n */\n\n/**\n * All possible `VideoTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-videotrack-kind\n * @typedef VideoTrack~Kind\n * @enum\n */\n\n\nvar VideoTrackKind = {\n  alternative: 'alternative',\n  captions: 'captions',\n  main: 'main',\n  sign: 'sign',\n  subtitles: 'subtitles',\n  commentary: 'commentary'\n};\n/**\n * All possible `AudioTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-audiotrack-kind\n * @typedef AudioTrack~Kind\n * @enum\n */\n\nvar AudioTrackKind = {\n  'alternative': 'alternative',\n  'descriptions': 'descriptions',\n  'main': 'main',\n  'main-desc': 'main-desc',\n  'translation': 'translation',\n  'commentary': 'commentary'\n};\n/**\n * All possible `TextTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-kind\n * @typedef TextTrack~Kind\n * @enum\n */\n\nvar TextTrackKind = {\n  subtitles: 'subtitles',\n  captions: 'captions',\n  descriptions: 'descriptions',\n  chapters: 'chapters',\n  metadata: 'metadata'\n};\n/**\n * All possible `TextTrackMode`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode\n * @typedef TextTrack~Mode\n * @enum\n */\n\nvar TextTrackMode = {\n  disabled: 'disabled',\n  hidden: 'hidden',\n  showing: 'showing'\n};\n/**\n * A Track class that contains all of the common functionality for {@link AudioTrack},\n * {@link VideoTrack}, and {@link TextTrack}.\n *\n * > Note: This class should not be used directly\n *\n * @see {@link https://html.spec.whatwg.org/multipage/embedded-content.html}\n * @extends EventTarget\n * @abstract\n */\n\nvar Track = /*#__PURE__*/function (_EventTarget) {\n  _inheritsLoose(Track, _EventTarget);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {string} [options.kind='']\n   *        A valid kind for the track type you are creating.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @abstract\n   */\n\n\n  function Track(options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _EventTarget.call(this) || this;\n    var trackProps = {\n      id: options.id || 'vjs_track_' + newGUID(),\n      kind: options.kind || '',\n      language: options.language || ''\n    };\n    var label = options.label || '';\n    /**\n     * @memberof Track\n     * @member {string} id\n     *         The id of this track. Cannot be changed after creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    /**\n     * @memberof Track\n     * @member {string} kind\n     *         The kind of track that this is. Cannot be changed after creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    /**\n     * @memberof Track\n     * @member {string} language\n     *         The two letter language code for this track. Cannot be changed after\n     *         creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    var _loop = function _loop(key) {\n      Object.defineProperty(_assertThisInitialized(_this), key, {\n        get: function get() {\n          return trackProps[key];\n        },\n        set: function set() {}\n      });\n    };\n\n    for (var key in trackProps) {\n      _loop(key);\n    }\n    /**\n     * @memberof Track\n     * @member {string} label\n     *         The label of this track. Cannot be changed after creation.\n     * @instance\n     *\n     * @fires Track#labelchange\n     */\n\n\n    Object.defineProperty(_assertThisInitialized(_this), 'label', {\n      get: function get() {\n        return label;\n      },\n      set: function set(newLabel) {\n        if (newLabel !== label) {\n          label = newLabel;\n          /**\n           * An event that fires when label changes on this track.\n           *\n           * > Note: This is not part of the spec!\n           *\n           * @event Track#labelchange\n           * @type {EventTarget~Event}\n           */\n\n          this.trigger('labelchange');\n        }\n      }\n    });\n    return _this;\n  }\n\n  return Track;\n}(EventTarget$2);\n/**\n * @file url.js\n * @module url\n */\n\n/**\n * @typedef {Object} url:URLObject\n *\n * @property {string} protocol\n *           The protocol of the url that was parsed.\n *\n * @property {string} hostname\n *           The hostname of the url that was parsed.\n *\n * @property {string} port\n *           The port of the url that was parsed.\n *\n * @property {string} pathname\n *           The pathname of the url that was parsed.\n *\n * @property {string} search\n *           The search query of the url that was parsed.\n *\n * @property {string} hash\n *           The hash of the url that was parsed.\n *\n * @property {string} host\n *           The host of the url that was parsed.\n */\n\n/**\n * Resolve and parse the elements of a URL.\n *\n * @function\n * @param    {String} url\n *           The url to parse\n *\n * @return   {url:URLObject}\n *           An object of url details\n */\n\n\nvar parseUrl = function parseUrl(url) {\n  // This entire method can be replace with URL once we are able to drop IE11\n  var props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host']; // add the url to an anchor and let the browser parse the URL\n\n  var a = document.createElement('a');\n  a.href = url; // Copy the specific URL properties to a new object\n  // This is also needed for IE because the anchor loses its\n  // properties when it's removed from the dom\n\n  var details = {};\n\n  for (var i = 0; i < props.length; i++) {\n    details[props[i]] = a[props[i]];\n  } // IE adds the port to the host property unlike everyone else. If\n  // a port identifier is added for standard ports, strip it.\n\n\n  if (details.protocol === 'http:') {\n    details.host = details.host.replace(/:80$/, '');\n  }\n\n  if (details.protocol === 'https:') {\n    details.host = details.host.replace(/:443$/, '');\n  }\n\n  if (!details.protocol) {\n    details.protocol = window$1.location.protocol;\n  }\n  /* istanbul ignore if */\n\n\n  if (!details.host) {\n    details.host = window$1.location.host;\n  }\n\n  return details;\n};\n/**\n * Get absolute version of relative URL. Used to tell Flash the correct URL.\n *\n * @function\n * @param    {string} url\n *           URL to make absolute\n *\n * @return   {string}\n *           Absolute URL\n *\n * @see      http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue\n */\n\n\nvar getAbsoluteURL = function getAbsoluteURL(url) {\n  // Check if absolute URL\n  if (!url.match(/^https?:\\/\\//)) {\n    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.\n    // add the url to an anchor and let the browser parse the URL\n    var a = document.createElement('a');\n    a.href = url;\n    url = a.href;\n  }\n\n  return url;\n};\n/**\n * Returns the extension of the passed file name. It will return an empty string\n * if passed an invalid path.\n *\n * @function\n * @param    {string} path\n *           The fileName path like '/path/to/file.mp4'\n *\n * @return  {string}\n *           The extension in lower case or an empty string if no\n *           extension could be found.\n */\n\n\nvar getFileExtension = function getFileExtension(path) {\n  if (typeof path === 'string') {\n    var splitPathRe = /^(\\/?)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?)(\\.([^\\.\\/\\?]+)))(?:[\\/]*|[\\?].*)$/;\n    var pathParts = splitPathRe.exec(path);\n\n    if (pathParts) {\n      return pathParts.pop().toLowerCase();\n    }\n  }\n\n  return '';\n};\n/**\n * Returns whether the url passed is a cross domain request or not.\n *\n * @function\n * @param    {string} url\n *           The url to check.\n *\n * @param    {Object} [winLoc]\n *           the domain to check the url against, defaults to window.location\n *\n * @param    {string} [winLoc.protocol]\n *           The window location protocol defaults to window.location.protocol\n *\n * @param    {string} [winLoc.host]\n *           The window location host defaults to window.location.host\n *\n * @return   {boolean}\n *           Whether it is a cross domain request or not.\n */\n\n\nvar isCrossOrigin = function isCrossOrigin(url, winLoc) {\n  if (winLoc === void 0) {\n    winLoc = window$1.location;\n  }\n\n  var urlInfo = parseUrl(url); // IE8 protocol relative urls will return ':' for protocol\n\n  var srcProtocol = urlInfo.protocol === ':' ? winLoc.protocol : urlInfo.protocol; // Check if url is for another domain/origin\n  // IE8 doesn't know location.origin, so we won't rely on it here\n\n  var crossOrigin = srcProtocol + urlInfo.host !== winLoc.protocol + winLoc.host;\n  return crossOrigin;\n};\n\nvar Url = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  parseUrl: parseUrl,\n  getAbsoluteURL: getAbsoluteURL,\n  getFileExtension: getFileExtension,\n  isCrossOrigin: isCrossOrigin\n});\n/**\n * Takes a webvtt file contents and parses it into cues\n *\n * @param {string} srcContent\n *        webVTT file contents\n *\n * @param {TextTrack} track\n *        TextTrack to add cues to. Cues come from the srcContent.\n *\n * @private\n */\n\nvar parseCues = function parseCues(srcContent, track) {\n  var parser = new window$1.WebVTT.Parser(window$1, window$1.vttjs, window$1.WebVTT.StringDecoder());\n  var errors = [];\n\n  parser.oncue = function (cue) {\n    track.addCue(cue);\n  };\n\n  parser.onparsingerror = function (error) {\n    errors.push(error);\n  };\n\n  parser.onflush = function () {\n    track.trigger({\n      type: 'loadeddata',\n      target: track\n    });\n  };\n\n  parser.parse(srcContent);\n\n  if (errors.length > 0) {\n    if (window$1.console && window$1.console.groupCollapsed) {\n      window$1.console.groupCollapsed(\"Text Track parsing errors for \" + track.src);\n    }\n\n    errors.forEach(function (error) {\n      return log$1.error(error);\n    });\n\n    if (window$1.console && window$1.console.groupEnd) {\n      window$1.console.groupEnd();\n    }\n  }\n\n  parser.flush();\n};\n/**\n * Load a `TextTrack` from a specified url.\n *\n * @param {string} src\n *        Url to load track from.\n *\n * @param {TextTrack} track\n *        Track to add cues to. Comes from the content at the end of `url`.\n *\n * @private\n */\n\n\nvar loadTrack = function loadTrack(src, track) {\n  var opts = {\n    uri: src\n  };\n  var crossOrigin = isCrossOrigin(src);\n\n  if (crossOrigin) {\n    opts.cors = crossOrigin;\n  }\n\n  var withCredentials = track.tech_.crossOrigin() === 'use-credentials';\n\n  if (withCredentials) {\n    opts.withCredentials = withCredentials;\n  }\n\n  XHR(opts, bind(this, function (err, response, responseBody) {\n    if (err) {\n      return log$1.error(err, response);\n    }\n\n    track.loaded_ = true; // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n    // NOTE: this is only used for the alt/video.novtt.js build\n\n    if (typeof window$1.WebVTT !== 'function') {\n      if (track.tech_) {\n        // to prevent use before define eslint error, we define loadHandler\n        // as a let here\n        track.tech_.any(['vttjsloaded', 'vttjserror'], function (event) {\n          if (event.type === 'vttjserror') {\n            log$1.error(\"vttjs failed to load, stopping trying to process \" + track.src);\n            return;\n          }\n\n          return parseCues(responseBody, track);\n        });\n      }\n    } else {\n      parseCues(responseBody, track);\n    }\n  }));\n};\n/**\n * A representation of a single `TextTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}\n * @extends Track\n */\n\n\nvar TextTrack = /*#__PURE__*/function (_Track) {\n  _inheritsLoose(TextTrack, _Track);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this TextTrack.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        version of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n\n\n  function TextTrack(options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!options.tech) {\n      throw new Error('A tech was not provided.');\n    }\n\n    var settings = mergeOptions$3(options, {\n      kind: TextTrackKind[options.kind] || 'subtitles',\n      language: options.language || options.srclang || ''\n    });\n    var mode = TextTrackMode[settings.mode] || 'disabled';\n    var default_ = settings[\"default\"];\n\n    if (settings.kind === 'metadata' || settings.kind === 'chapters') {\n      mode = 'hidden';\n    }\n\n    _this = _Track.call(this, settings) || this;\n    _this.tech_ = settings.tech;\n    _this.cues_ = [];\n    _this.activeCues_ = [];\n    _this.preload_ = _this.tech_.preloadTextTracks !== false;\n    var cues = new TextTrackCueList(_this.cues_);\n    var activeCues = new TextTrackCueList(_this.activeCues_);\n    var changed = false;\n    var timeupdateHandler = bind(_assertThisInitialized(_this), function () {\n      if (!this.tech_.isReady_ || this.tech_.isDisposed()) {\n        return;\n      } // Accessing this.activeCues for the side-effects of updating itself\n      // due to its nature as a getter function. Do not remove or cues will\n      // stop updating!\n      // Use the setter to prevent deletion from uglify (pure_getters rule)\n\n\n      this.activeCues = this.activeCues;\n\n      if (changed) {\n        this.trigger('cuechange');\n        changed = false;\n      }\n    });\n\n    var disposeHandler = function disposeHandler() {\n      _this.tech_.off('timeupdate', timeupdateHandler);\n    };\n\n    _this.tech_.one('dispose', disposeHandler);\n\n    if (mode !== 'disabled') {\n      _this.tech_.on('timeupdate', timeupdateHandler);\n    }\n\n    Object.defineProperties(_assertThisInitialized(_this), {\n      /**\n       * @memberof TextTrack\n       * @member {boolean} default\n       *         If this track was set to be on or off by default. Cannot be changed after\n       *         creation.\n       * @instance\n       *\n       * @readonly\n       */\n      \"default\": {\n        get: function get() {\n          return default_;\n        },\n        set: function set() {}\n      },\n\n      /**\n       * @memberof TextTrack\n       * @member {string} mode\n       *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will\n       *         not be set if setting to an invalid mode.\n       * @instance\n       *\n       * @fires TextTrack#modechange\n       */\n      mode: {\n        get: function get() {\n          return mode;\n        },\n        set: function set(newMode) {\n          if (!TextTrackMode[newMode]) {\n            return;\n          }\n\n          if (mode === newMode) {\n            return;\n          }\n\n          mode = newMode;\n\n          if (!this.preload_ && mode !== 'disabled' && this.cues.length === 0) {\n            // On-demand load.\n            loadTrack(this.src, this);\n          }\n\n          this.tech_.off('timeupdate', timeupdateHandler);\n\n          if (mode !== 'disabled') {\n            this.tech_.on('timeupdate', timeupdateHandler);\n          }\n          /**\n           * An event that fires when mode changes on this track. This allows\n           * the TextTrackList that holds this track to act accordingly.\n           *\n           * > Note: This is not part of the spec!\n           *\n           * @event TextTrack#modechange\n           * @type {EventTarget~Event}\n           */\n\n\n          this.trigger('modechange');\n        }\n      },\n\n      /**\n       * @memberof TextTrack\n       * @member {TextTrackCueList} cues\n       *         The text track cue list for this TextTrack.\n       * @instance\n       */\n      cues: {\n        get: function get() {\n          if (!this.loaded_) {\n            return null;\n          }\n\n          return cues;\n        },\n        set: function set() {}\n      },\n\n      /**\n       * @memberof TextTrack\n       * @member {TextTrackCueList} activeCues\n       *         The list text track cues that are currently active for this TextTrack.\n       * @instance\n       */\n      activeCues: {\n        get: function get() {\n          if (!this.loaded_) {\n            return null;\n          } // nothing to do\n\n\n          if (this.cues.length === 0) {\n            return activeCues;\n          }\n\n          var ct = this.tech_.currentTime();\n          var active = [];\n\n          for (var i = 0, l = this.cues.length; i < l; i++) {\n            var cue = this.cues[i];\n\n            if (cue.startTime <= ct && cue.endTime >= ct) {\n              active.push(cue);\n            } else if (cue.startTime === cue.endTime && cue.startTime <= ct && cue.startTime + 0.5 >= ct) {\n              active.push(cue);\n            }\n          }\n\n          changed = false;\n\n          if (active.length !== this.activeCues_.length) {\n            changed = true;\n          } else {\n            for (var _i = 0; _i < active.length; _i++) {\n              if (this.activeCues_.indexOf(active[_i]) === -1) {\n                changed = true;\n              }\n            }\n          }\n\n          this.activeCues_ = active;\n          activeCues.setCues_(this.activeCues_);\n          return activeCues;\n        },\n        // /!\\ Keep this setter empty (see the timeupdate handler above)\n        set: function set() {}\n      }\n    });\n\n    if (settings.src) {\n      _this.src = settings.src;\n\n      if (!_this.preload_) {\n        // Tracks will load on-demand.\n        // Act like we're loaded for other purposes.\n        _this.loaded_ = true;\n      }\n\n      if (_this.preload_ || settings.kind !== 'subtitles' && settings.kind !== 'captions') {\n        loadTrack(_this.src, _assertThisInitialized(_this));\n      }\n    } else {\n      _this.loaded_ = true;\n    }\n\n    return _this;\n  }\n  /**\n   * Add a cue to the internal list of cues.\n   *\n   * @param {TextTrack~Cue} cue\n   *        The cue to add to our internal list\n   */\n\n\n  var _proto = TextTrack.prototype;\n\n  _proto.addCue = function addCue(originalCue) {\n    var cue = originalCue;\n\n    if (window$1.vttjs && !(originalCue instanceof window$1.vttjs.VTTCue)) {\n      cue = new window$1.vttjs.VTTCue(originalCue.startTime, originalCue.endTime, originalCue.text);\n\n      for (var prop in originalCue) {\n        if (!(prop in cue)) {\n          cue[prop] = originalCue[prop];\n        }\n      } // make sure that `id` is copied over\n\n\n      cue.id = originalCue.id;\n      cue.originalCue_ = originalCue;\n    }\n\n    var tracks = this.tech_.textTracks();\n\n    for (var i = 0; i < tracks.length; i++) {\n      if (tracks[i] !== this) {\n        tracks[i].removeCue(cue);\n      }\n    }\n\n    this.cues_.push(cue);\n    this.cues.setCues_(this.cues_);\n  }\n  /**\n   * Remove a cue from our internal list\n   *\n   * @param {TextTrack~Cue} removeCue\n   *        The cue to remove from our internal list\n   */\n  ;\n\n  _proto.removeCue = function removeCue(_removeCue) {\n    var i = this.cues_.length;\n\n    while (i--) {\n      var cue = this.cues_[i];\n\n      if (cue === _removeCue || cue.originalCue_ && cue.originalCue_ === _removeCue) {\n        this.cues_.splice(i, 1);\n        this.cues.setCues_(this.cues_);\n        break;\n      }\n    }\n  };\n\n  return TextTrack;\n}(Track);\n/**\n * cuechange - One or more cues in the track have become active or stopped being active.\n */\n\n\nTextTrack.prototype.allowedEvents_ = {\n  cuechange: 'cuechange'\n};\n/**\n * A representation of a single `AudioTrack`. If it is part of an {@link AudioTrackList}\n * only one `AudioTrack` in the list will be enabled at a time.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotrack}\n * @extends Track\n */\n\nvar AudioTrack = /*#__PURE__*/function (_Track) {\n  _inheritsLoose(AudioTrack, _Track);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {AudioTrack~Kind} [options.kind='']\n   *        A valid audio track kind\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {boolean} [options.enabled]\n   *        If this track is the one that is currently playing. If this track is part of\n   *        an {@link AudioTrackList}, only one {@link AudioTrack} will be enabled.\n   */\n\n\n  function AudioTrack(options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var settings = mergeOptions$3(options, {\n      kind: AudioTrackKind[options.kind] || ''\n    });\n    _this = _Track.call(this, settings) || this;\n    var enabled = false;\n    /**\n     * @memberof AudioTrack\n     * @member {boolean} enabled\n     *         If this `AudioTrack` is enabled or not. When setting this will\n     *         fire {@link AudioTrack#enabledchange} if the state of enabled is changed.\n     * @instance\n     *\n     * @fires VideoTrack#selectedchange\n     */\n\n    Object.defineProperty(_assertThisInitialized(_this), 'enabled', {\n      get: function get() {\n        return enabled;\n      },\n      set: function set(newEnabled) {\n        // an invalid or unchanged value\n        if (typeof newEnabled !== 'boolean' || newEnabled === enabled) {\n          return;\n        }\n\n        enabled = newEnabled;\n        /**\n         * An event that fires when enabled changes on this track. This allows\n         * the AudioTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec! Native tracks will do\n         *         this internally without an event.\n         *\n         * @event AudioTrack#enabledchange\n         * @type {EventTarget~Event}\n         */\n\n        this.trigger('enabledchange');\n      }\n    }); // if the user sets this track to selected then\n    // set selected to that true value otherwise\n    // we keep it false\n\n    if (settings.enabled) {\n      _this.enabled = settings.enabled;\n    }\n\n    _this.loaded_ = true;\n    return _this;\n  }\n\n  return AudioTrack;\n}(Track);\n/**\n * A representation of a single `VideoTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotrack}\n * @extends Track\n */\n\n\nvar VideoTrack = /*#__PURE__*/function (_Track) {\n  _inheritsLoose(VideoTrack, _Track);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {string} [options.kind='']\n   *        A valid {@link VideoTrack~Kind}\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {boolean} [options.selected]\n   *        If this track is the one that is currently playing.\n   */\n\n\n  function VideoTrack(options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var settings = mergeOptions$3(options, {\n      kind: VideoTrackKind[options.kind] || ''\n    });\n    _this = _Track.call(this, settings) || this;\n    var selected = false;\n    /**\n     * @memberof VideoTrack\n     * @member {boolean} selected\n     *         If this `VideoTrack` is selected or not. When setting this will\n     *         fire {@link VideoTrack#selectedchange} if the state of selected changed.\n     * @instance\n     *\n     * @fires VideoTrack#selectedchange\n     */\n\n    Object.defineProperty(_assertThisInitialized(_this), 'selected', {\n      get: function get() {\n        return selected;\n      },\n      set: function set(newSelected) {\n        // an invalid or unchanged value\n        if (typeof newSelected !== 'boolean' || newSelected === selected) {\n          return;\n        }\n\n        selected = newSelected;\n        /**\n         * An event that fires when selected changes on this track. This allows\n         * the VideoTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec! Native tracks will do\n         *         this internally without an event.\n         *\n         * @event VideoTrack#selectedchange\n         * @type {EventTarget~Event}\n         */\n\n        this.trigger('selectedchange');\n      }\n    }); // if the user sets this track to selected then\n    // set selected to that true value otherwise\n    // we keep it false\n\n    if (settings.selected) {\n      _this.selected = settings.selected;\n    }\n\n    return _this;\n  }\n\n  return VideoTrack;\n}(Track);\n/**\n * @memberof HTMLTrackElement\n * @typedef {HTMLTrackElement~ReadyState}\n * @enum {number}\n */\n\n\nvar NONE = 0;\nvar LOADING = 1;\nvar LOADED = 2;\nvar ERROR = 3;\n/**\n * A single track represented in the DOM.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#htmltrackelement}\n * @extends EventTarget\n */\n\nvar HTMLTrackElement = /*#__PURE__*/function (_EventTarget) {\n  _inheritsLoose(HTMLTrackElement, _EventTarget);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this HTMLTrackElement.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        version of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n\n\n  function HTMLTrackElement(options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _EventTarget.call(this) || this;\n    var readyState;\n    var track = new TextTrack(options);\n    _this.kind = track.kind;\n    _this.src = track.src;\n    _this.srclang = track.language;\n    _this.label = track.label;\n    _this[\"default\"] = track[\"default\"];\n    Object.defineProperties(_assertThisInitialized(_this), {\n      /**\n       * @memberof HTMLTrackElement\n       * @member {HTMLTrackElement~ReadyState} readyState\n       *         The current ready state of the track element.\n       * @instance\n       */\n      readyState: {\n        get: function get() {\n          return readyState;\n        }\n      },\n\n      /**\n       * @memberof HTMLTrackElement\n       * @member {TextTrack} track\n       *         The underlying TextTrack object.\n       * @instance\n       *\n       */\n      track: {\n        get: function get() {\n          return track;\n        }\n      }\n    });\n    readyState = NONE;\n    /**\n     * @listens TextTrack#loadeddata\n     * @fires HTMLTrackElement#load\n     */\n\n    track.addEventListener('loadeddata', function () {\n      readyState = LOADED;\n\n      _this.trigger({\n        type: 'load',\n        target: _assertThisInitialized(_this)\n      });\n    });\n    return _this;\n  }\n\n  return HTMLTrackElement;\n}(EventTarget$2);\n\nHTMLTrackElement.prototype.allowedEvents_ = {\n  load: 'load'\n};\nHTMLTrackElement.NONE = NONE;\nHTMLTrackElement.LOADING = LOADING;\nHTMLTrackElement.LOADED = LOADED;\nHTMLTrackElement.ERROR = ERROR;\n/*\n * This file contains all track properties that are used in\n * player.js, tech.js, html5.js and possibly other techs in the future.\n */\n\nvar NORMAL = {\n  audio: {\n    ListClass: AudioTrackList,\n    TrackClass: AudioTrack,\n    capitalName: 'Audio'\n  },\n  video: {\n    ListClass: VideoTrackList,\n    TrackClass: VideoTrack,\n    capitalName: 'Video'\n  },\n  text: {\n    ListClass: TextTrackList,\n    TrackClass: TextTrack,\n    capitalName: 'Text'\n  }\n};\nObject.keys(NORMAL).forEach(function (type) {\n  NORMAL[type].getterName = type + \"Tracks\";\n  NORMAL[type].privateName = type + \"Tracks_\";\n});\nvar REMOTE = {\n  remoteText: {\n    ListClass: TextTrackList,\n    TrackClass: TextTrack,\n    capitalName: 'RemoteText',\n    getterName: 'remoteTextTracks',\n    privateName: 'remoteTextTracks_'\n  },\n  remoteTextEl: {\n    ListClass: HtmlTrackElementList,\n    TrackClass: HTMLTrackElement,\n    capitalName: 'RemoteTextTrackEls',\n    getterName: 'remoteTextTrackEls',\n    privateName: 'remoteTextTrackEls_'\n  }\n};\n\nvar ALL = _extends({}, NORMAL, REMOTE);\n\nREMOTE.names = Object.keys(REMOTE);\nNORMAL.names = Object.keys(NORMAL);\nALL.names = [].concat(REMOTE.names).concat(NORMAL.names);\n/**\n * An Object containing a structure like: `{src: 'url', type: 'mimetype'}` or string\n * that just contains the src url alone.\n * * `var SourceObject = {src: 'http://ex.com/video.mp4', type: 'video/mp4'};`\n   * `var SourceString = 'http://example.com/some-video.mp4';`\n *\n * @typedef {Object|string} Tech~SourceObject\n *\n * @property {string} src\n *           The url to the source\n *\n * @property {string} type\n *           The mime type of the source\n */\n\n/**\n * A function used by {@link Tech} to create a new {@link TextTrack}.\n *\n * @private\n *\n * @param {Tech} self\n *        An instance of the Tech class.\n *\n * @param {string} kind\n *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n *\n * @param {string} [label]\n *        Label to identify the text track\n *\n * @param {string} [language]\n *        Two letter language abbreviation\n *\n * @param {Object} [options={}]\n *        An object with additional text track options\n *\n * @return {TextTrack}\n *          The text track that was created.\n */\n\nfunction createTrackHelper(self, kind, label, language, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var tracks = self.textTracks();\n  options.kind = kind;\n\n  if (label) {\n    options.label = label;\n  }\n\n  if (language) {\n    options.language = language;\n  }\n\n  options.tech = self;\n  var track = new ALL.text.TrackClass(options);\n  tracks.addTrack(track);\n  return track;\n}\n/**\n * This is the base class for media playback technology controllers, such as\n * {@link HTML5}\n *\n * @extends Component\n */\n\n\nvar Tech = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Tech, _Component);\n  /**\n  * Create an instance of this Tech.\n  *\n  * @param {Object} [options]\n  *        The key/value store of player options.\n  *\n  * @param {Component~ReadyCallback} ready\n  *        Callback function to call when the `HTML5` Tech is ready.\n  */\n\n\n  function Tech(options, ready) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (ready === void 0) {\n      ready = function ready() {};\n    } // we don't want the tech to report user activity automatically.\n    // This is done manually in addControlsListeners\n\n\n    options.reportTouchActivity = false;\n    _this = _Component.call(this, null, options, ready) || this;\n\n    _this.onDurationChange_ = function (e) {\n      return _this.onDurationChange(e);\n    };\n\n    _this.trackProgress_ = function (e) {\n      return _this.trackProgress(e);\n    };\n\n    _this.trackCurrentTime_ = function (e) {\n      return _this.trackCurrentTime(e);\n    };\n\n    _this.stopTrackingCurrentTime_ = function (e) {\n      return _this.stopTrackingCurrentTime(e);\n    };\n\n    _this.disposeSourceHandler_ = function (e) {\n      return _this.disposeSourceHandler(e);\n    }; // keep track of whether the current source has played at all to\n    // implement a very limited played()\n\n\n    _this.hasStarted_ = false;\n\n    _this.on('playing', function () {\n      this.hasStarted_ = true;\n    });\n\n    _this.on('loadstart', function () {\n      this.hasStarted_ = false;\n    });\n\n    ALL.names.forEach(function (name) {\n      var props = ALL[name];\n\n      if (options && options[props.getterName]) {\n        _this[props.privateName] = options[props.getterName];\n      }\n    }); // Manually track progress in cases where the browser/tech doesn't report it.\n\n    if (!_this.featuresProgressEvents) {\n      _this.manualProgressOn();\n    } // Manually track timeupdates in cases where the browser/tech doesn't report it.\n\n\n    if (!_this.featuresTimeupdateEvents) {\n      _this.manualTimeUpdatesOn();\n    }\n\n    ['Text', 'Audio', 'Video'].forEach(function (track) {\n      if (options[\"native\" + track + \"Tracks\"] === false) {\n        _this[\"featuresNative\" + track + \"Tracks\"] = false;\n      }\n    });\n\n    if (options.nativeCaptions === false || options.nativeTextTracks === false) {\n      _this.featuresNativeTextTracks = false;\n    } else if (options.nativeCaptions === true || options.nativeTextTracks === true) {\n      _this.featuresNativeTextTracks = true;\n    }\n\n    if (!_this.featuresNativeTextTracks) {\n      _this.emulateTextTracks();\n    }\n\n    _this.preloadTextTracks = options.preloadTextTracks !== false;\n    _this.autoRemoteTextTracks_ = new ALL.text.ListClass();\n\n    _this.initTrackListeners(); // Turn on component tap events only if not using native controls\n\n\n    if (!options.nativeControlsForTouch) {\n      _this.emitTapEvents();\n    }\n\n    if (_this.constructor) {\n      _this.name_ = _this.constructor.name || 'Unknown Tech';\n    }\n\n    return _this;\n  }\n  /**\n   * A special function to trigger source set in a way that will allow player\n   * to re-trigger if the player or tech are not ready yet.\n   *\n   * @fires Tech#sourceset\n   * @param {string} src The source string at the time of the source changing.\n   */\n\n\n  var _proto = Tech.prototype;\n\n  _proto.triggerSourceset = function triggerSourceset(src) {\n    var _this2 = this;\n\n    if (!this.isReady_) {\n      // on initial ready we have to trigger source set\n      // 1ms after ready so that player can watch for it.\n      this.one('ready', function () {\n        return _this2.setTimeout(function () {\n          return _this2.triggerSourceset(src);\n        }, 1);\n      });\n    }\n    /**\n     * Fired when the source is set on the tech causing the media element\n     * to reload.\n     *\n     * @see {@link Player#event:sourceset}\n     * @event Tech#sourceset\n     * @type {EventTarget~Event}\n     */\n\n\n    this.trigger({\n      src: src,\n      type: 'sourceset'\n    });\n  }\n  /* Fallbacks for unsupported event types\n  ================================================================================ */\n\n  /**\n   * Polyfill the `progress` event for browsers that don't support it natively.\n   *\n   * @see {@link Tech#trackProgress}\n   */\n  ;\n\n  _proto.manualProgressOn = function manualProgressOn() {\n    this.on('durationchange', this.onDurationChange_);\n    this.manualProgress = true; // Trigger progress watching when a source begins loading\n\n    this.one('ready', this.trackProgress_);\n  }\n  /**\n   * Turn off the polyfill for `progress` events that was created in\n   * {@link Tech#manualProgressOn}\n   */\n  ;\n\n  _proto.manualProgressOff = function manualProgressOff() {\n    this.manualProgress = false;\n    this.stopTrackingProgress();\n    this.off('durationchange', this.onDurationChange_);\n  }\n  /**\n   * This is used to trigger a `progress` event when the buffered percent changes. It\n   * sets an interval function that will be called every 500 milliseconds to check if the\n   * buffer end percent has changed.\n   *\n   * > This function is called by {@link Tech#manualProgressOn}\n   *\n   * @param {EventTarget~Event} event\n   *        The `ready` event that caused this to run.\n   *\n   * @listens Tech#ready\n   * @fires Tech#progress\n   */\n  ;\n\n  _proto.trackProgress = function trackProgress(event) {\n    this.stopTrackingProgress();\n    this.progressInterval = this.setInterval(bind(this, function () {\n      // Don't trigger unless buffered amount is greater than last time\n      var numBufferedPercent = this.bufferedPercent();\n\n      if (this.bufferedPercent_ !== numBufferedPercent) {\n        /**\n         * See {@link Player#progress}\n         *\n         * @event Tech#progress\n         * @type {EventTarget~Event}\n         */\n        this.trigger('progress');\n      }\n\n      this.bufferedPercent_ = numBufferedPercent;\n\n      if (numBufferedPercent === 1) {\n        this.stopTrackingProgress();\n      }\n    }), 500);\n  }\n  /**\n   * Update our internal duration on a `durationchange` event by calling\n   * {@link Tech#duration}.\n   *\n   * @param {EventTarget~Event} event\n   *        The `durationchange` event that caused this to run.\n   *\n   * @listens Tech#durationchange\n   */\n  ;\n\n  _proto.onDurationChange = function onDurationChange(event) {\n    this.duration_ = this.duration();\n  }\n  /**\n   * Get and create a `TimeRange` object for buffering.\n   *\n   * @return {TimeRange}\n   *         The time range object that was created.\n   */\n  ;\n\n  _proto.buffered = function buffered() {\n    return createTimeRanges(0, 0);\n  }\n  /**\n   * Get the percentage of the current video that is currently buffered.\n   *\n   * @return {number}\n   *         A number from 0 to 1 that represents the decimal percentage of the\n   *         video that is buffered.\n   *\n   */\n  ;\n\n  _proto.bufferedPercent = function bufferedPercent$1() {\n    return bufferedPercent(this.buffered(), this.duration_);\n  }\n  /**\n   * Turn off the polyfill for `progress` events that was created in\n   * {@link Tech#manualProgressOn}\n   * Stop manually tracking progress events by clearing the interval that was set in\n   * {@link Tech#trackProgress}.\n   */\n  ;\n\n  _proto.stopTrackingProgress = function stopTrackingProgress() {\n    this.clearInterval(this.progressInterval);\n  }\n  /**\n   * Polyfill the `timeupdate` event for browsers that don't support it.\n   *\n   * @see {@link Tech#trackCurrentTime}\n   */\n  ;\n\n  _proto.manualTimeUpdatesOn = function manualTimeUpdatesOn() {\n    this.manualTimeUpdates = true;\n    this.on('play', this.trackCurrentTime_);\n    this.on('pause', this.stopTrackingCurrentTime_);\n  }\n  /**\n   * Turn off the polyfill for `timeupdate` events that was created in\n   * {@link Tech#manualTimeUpdatesOn}\n   */\n  ;\n\n  _proto.manualTimeUpdatesOff = function manualTimeUpdatesOff() {\n    this.manualTimeUpdates = false;\n    this.stopTrackingCurrentTime();\n    this.off('play', this.trackCurrentTime_);\n    this.off('pause', this.stopTrackingCurrentTime_);\n  }\n  /**\n   * Sets up an interval function to track current time and trigger `timeupdate` every\n   * 250 milliseconds.\n   *\n   * @listens Tech#play\n   * @triggers Tech#timeupdate\n   */\n  ;\n\n  _proto.trackCurrentTime = function trackCurrentTime() {\n    if (this.currentTimeInterval) {\n      this.stopTrackingCurrentTime();\n    }\n\n    this.currentTimeInterval = this.setInterval(function () {\n      /**\n       * Triggered at an interval of 250ms to indicated that time is passing in the video.\n       *\n       * @event Tech#timeupdate\n       * @type {EventTarget~Event}\n       */\n      this.trigger({\n        type: 'timeupdate',\n        target: this,\n        manuallyTriggered: true\n      }); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15\n    }, 250);\n  }\n  /**\n   * Stop the interval function created in {@link Tech#trackCurrentTime} so that the\n   * `timeupdate` event is no longer triggered.\n   *\n   * @listens {Tech#pause}\n   */\n  ;\n\n  _proto.stopTrackingCurrentTime = function stopTrackingCurrentTime() {\n    this.clearInterval(this.currentTimeInterval); // #1002 - if the video ends right before the next timeupdate would happen,\n    // the progress bar won't make it all the way to the end\n\n    this.trigger({\n      type: 'timeupdate',\n      target: this,\n      manuallyTriggered: true\n    });\n  }\n  /**\n   * Turn off all event polyfills, clear the `Tech`s {@link AudioTrackList},\n   * {@link VideoTrackList}, and {@link TextTrackList}, and dispose of this Tech.\n   *\n   * @fires Component#dispose\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    // clear out all tracks because we can't reuse them between techs\n    this.clearTracks(NORMAL.names); // Turn off any manual progress or timeupdate tracking\n\n    if (this.manualProgress) {\n      this.manualProgressOff();\n    }\n\n    if (this.manualTimeUpdates) {\n      this.manualTimeUpdatesOff();\n    }\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Clear out a single `TrackList` or an array of `TrackLists` given their names.\n   *\n   * > Note: Techs without source handlers should call this between sources for `video`\n   *         & `audio` tracks. You don't want to use them between tracks!\n   *\n   * @param {string[]|string} types\n   *        TrackList names to clear, valid names are `video`, `audio`, and\n   *        `text`.\n   */\n  ;\n\n  _proto.clearTracks = function clearTracks(types) {\n    var _this3 = this;\n\n    types = [].concat(types); // clear out all tracks because we can't reuse them between techs\n\n    types.forEach(function (type) {\n      var list = _this3[type + \"Tracks\"]() || [];\n      var i = list.length;\n\n      while (i--) {\n        var track = list[i];\n\n        if (type === 'text') {\n          _this3.removeRemoteTextTrack(track);\n        }\n\n        list.removeTrack(track);\n      }\n    });\n  }\n  /**\n   * Remove any TextTracks added via addRemoteTextTrack that are\n   * flagged for automatic garbage collection\n   */\n  ;\n\n  _proto.cleanupAutoTextTracks = function cleanupAutoTextTracks() {\n    var list = this.autoRemoteTextTracks_ || [];\n    var i = list.length;\n\n    while (i--) {\n      var track = list[i];\n      this.removeRemoteTextTrack(track);\n    }\n  }\n  /**\n   * Reset the tech, which will removes all sources and reset the internal readyState.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.reset = function reset() {}\n  /**\n   * Get the value of `crossOrigin` from the tech.\n   *\n   * @abstract\n   *\n   * @see {Html5#crossOrigin}\n   */\n  ;\n\n  _proto.crossOrigin = function crossOrigin() {}\n  /**\n   * Set the value of `crossOrigin` on the tech.\n   *\n   * @abstract\n   *\n   * @param {string} crossOrigin the crossOrigin value\n   * @see {Html5#setCrossOrigin}\n   */\n  ;\n\n  _proto.setCrossOrigin = function setCrossOrigin() {}\n  /**\n   * Get or set an error on the Tech.\n   *\n   * @param {MediaError} [err]\n   *        Error to set on the Tech\n   *\n   * @return {MediaError|null}\n   *         The current error object on the tech, or null if there isn't one.\n   */\n  ;\n\n  _proto.error = function error(err) {\n    if (err !== undefined) {\n      this.error_ = new MediaError(err);\n      this.trigger('error');\n    }\n\n    return this.error_;\n  }\n  /**\n   * Returns the `TimeRange`s that have been played through for the current source.\n   *\n   * > NOTE: This implementation is incomplete. It does not track the played `TimeRange`.\n   *         It only checks whether the source has played at all or not.\n   *\n   * @return {TimeRange}\n   *         - A single time range if this video has played\n   *         - An empty set of ranges if not.\n   */\n  ;\n\n  _proto.played = function played() {\n    if (this.hasStarted_) {\n      return createTimeRanges(0, 0);\n    }\n\n    return createTimeRanges();\n  }\n  /**\n   * Start playback\n   *\n   * @abstract\n   *\n   * @see {Html5#play}\n   */\n  ;\n\n  _proto.play = function play() {}\n  /**\n   * Set whether we are scrubbing or not\n   *\n   * @abstract\n   *\n   * @see {Html5#setScrubbing}\n   */\n  ;\n\n  _proto.setScrubbing = function setScrubbing() {}\n  /**\n   * Get whether we are scrubbing or not\n   *\n   * @abstract\n   *\n   * @see {Html5#scrubbing}\n   */\n  ;\n\n  _proto.scrubbing = function scrubbing() {}\n  /**\n   * Causes a manual time update to occur if {@link Tech#manualTimeUpdatesOn} was\n   * previously called.\n   *\n   * @fires Tech#timeupdate\n   */\n  ;\n\n  _proto.setCurrentTime = function setCurrentTime() {\n    // improve the accuracy of manual timeupdates\n    if (this.manualTimeUpdates) {\n      /**\n       * A manual `timeupdate` event.\n       *\n       * @event Tech#timeupdate\n       * @type {EventTarget~Event}\n       */\n      this.trigger({\n        type: 'timeupdate',\n        target: this,\n        manuallyTriggered: true\n      });\n    }\n  }\n  /**\n   * Turn on listeners for {@link VideoTrackList}, {@link {AudioTrackList}, and\n   * {@link TextTrackList} events.\n   *\n   * This adds {@link EventTarget~EventListeners} for `addtrack`, and  `removetrack`.\n   *\n   * @fires Tech#audiotrackchange\n   * @fires Tech#videotrackchange\n   * @fires Tech#texttrackchange\n   */\n  ;\n\n  _proto.initTrackListeners = function initTrackListeners() {\n    var _this4 = this;\n    /**\n      * Triggered when tracks are added or removed on the Tech {@link AudioTrackList}\n      *\n      * @event Tech#audiotrackchange\n      * @type {EventTarget~Event}\n      */\n\n    /**\n      * Triggered when tracks are added or removed on the Tech {@link VideoTrackList}\n      *\n      * @event Tech#videotrackchange\n      * @type {EventTarget~Event}\n      */\n\n    /**\n      * Triggered when tracks are added or removed on the Tech {@link TextTrackList}\n      *\n      * @event Tech#texttrackchange\n      * @type {EventTarget~Event}\n      */\n\n\n    NORMAL.names.forEach(function (name) {\n      var props = NORMAL[name];\n\n      var trackListChanges = function trackListChanges() {\n        _this4.trigger(name + \"trackchange\");\n      };\n\n      var tracks = _this4[props.getterName]();\n\n      tracks.addEventListener('removetrack', trackListChanges);\n      tracks.addEventListener('addtrack', trackListChanges);\n\n      _this4.on('dispose', function () {\n        tracks.removeEventListener('removetrack', trackListChanges);\n        tracks.removeEventListener('addtrack', trackListChanges);\n      });\n    });\n  }\n  /**\n   * Emulate TextTracks using vtt.js if necessary\n   *\n   * @fires Tech#vttjsloaded\n   * @fires Tech#vttjserror\n   */\n  ;\n\n  _proto.addWebVttScript_ = function addWebVttScript_() {\n    var _this5 = this;\n\n    if (window$1.WebVTT) {\n      return;\n    } // Initially, Tech.el_ is a child of a dummy-div wait until the Component system\n    // signals that the Tech is ready at which point Tech.el_ is part of the DOM\n    // before inserting the WebVTT script\n\n\n    if (document.body.contains(this.el())) {\n      // load via require if available and vtt.js script location was not passed in\n      // as an option. novtt builds will turn the above require call into an empty object\n      // which will cause this if check to always fail.\n      if (!this.options_['vtt.js'] && isPlain(vtt) && Object.keys(vtt).length > 0) {\n        this.trigger('vttjsloaded');\n        return;\n      } // load vtt.js via the script location option or the cdn of no location was\n      // passed in\n\n\n      var script = document.createElement('script');\n      script.src = this.options_['vtt.js'] || 'https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js';\n\n      script.onload = function () {\n        /**\n         * Fired when vtt.js is loaded.\n         *\n         * @event Tech#vttjsloaded\n         * @type {EventTarget~Event}\n         */\n        _this5.trigger('vttjsloaded');\n      };\n\n      script.onerror = function () {\n        /**\n         * Fired when vtt.js was not loaded due to an error\n         *\n         * @event Tech#vttjsloaded\n         * @type {EventTarget~Event}\n         */\n        _this5.trigger('vttjserror');\n      };\n\n      this.on('dispose', function () {\n        script.onload = null;\n        script.onerror = null;\n      }); // but have not loaded yet and we set it to true before the inject so that\n      // we don't overwrite the injected window.WebVTT if it loads right away\n\n      window$1.WebVTT = true;\n      this.el().parentNode.appendChild(script);\n    } else {\n      this.ready(this.addWebVttScript_);\n    }\n  }\n  /**\n   * Emulate texttracks\n   *\n   */\n  ;\n\n  _proto.emulateTextTracks = function emulateTextTracks() {\n    var _this6 = this;\n\n    var tracks = this.textTracks();\n    var remoteTracks = this.remoteTextTracks();\n\n    var handleAddTrack = function handleAddTrack(e) {\n      return tracks.addTrack(e.track);\n    };\n\n    var handleRemoveTrack = function handleRemoveTrack(e) {\n      return tracks.removeTrack(e.track);\n    };\n\n    remoteTracks.on('addtrack', handleAddTrack);\n    remoteTracks.on('removetrack', handleRemoveTrack);\n    this.addWebVttScript_();\n\n    var updateDisplay = function updateDisplay() {\n      return _this6.trigger('texttrackchange');\n    };\n\n    var textTracksChanges = function textTracksChanges() {\n      updateDisplay();\n\n      for (var i = 0; i < tracks.length; i++) {\n        var track = tracks[i];\n        track.removeEventListener('cuechange', updateDisplay);\n\n        if (track.mode === 'showing') {\n          track.addEventListener('cuechange', updateDisplay);\n        }\n      }\n    };\n\n    textTracksChanges();\n    tracks.addEventListener('change', textTracksChanges);\n    tracks.addEventListener('addtrack', textTracksChanges);\n    tracks.addEventListener('removetrack', textTracksChanges);\n    this.on('dispose', function () {\n      remoteTracks.off('addtrack', handleAddTrack);\n      remoteTracks.off('removetrack', handleRemoveTrack);\n      tracks.removeEventListener('change', textTracksChanges);\n      tracks.removeEventListener('addtrack', textTracksChanges);\n      tracks.removeEventListener('removetrack', textTracksChanges);\n\n      for (var i = 0; i < tracks.length; i++) {\n        var track = tracks[i];\n        track.removeEventListener('cuechange', updateDisplay);\n      }\n    });\n  }\n  /**\n   * Create and returns a remote {@link TextTrack} object.\n   *\n   * @param {string} kind\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n   *\n   * @param {string} [label]\n   *        Label to identify the text track\n   *\n   * @param {string} [language]\n   *        Two letter language abbreviation\n   *\n   * @return {TextTrack}\n   *         The TextTrack that gets created.\n   */\n  ;\n\n  _proto.addTextTrack = function addTextTrack(kind, label, language) {\n    if (!kind) {\n      throw new Error('TextTrack kind is required but was not provided');\n    }\n\n    return createTrackHelper(this, kind, label, language);\n  }\n  /**\n   * Create an emulated TextTrack for use by addRemoteTextTrack\n   *\n   * This is intended to be overridden by classes that inherit from\n   * Tech in order to create native or custom TextTracks.\n   *\n   * @param {Object} options\n   *        The object should contain the options to initialize the TextTrack with.\n   *\n   * @param {string} [options.kind]\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).\n   *\n   * @param {string} [options.label].\n   *        Label to identify the text track\n   *\n   * @param {string} [options.language]\n   *        Two letter language abbreviation.\n   *\n   * @return {HTMLTrackElement}\n   *         The track element that gets created.\n   */\n  ;\n\n  _proto.createRemoteTextTrack = function createRemoteTextTrack(options) {\n    var track = mergeOptions$3(options, {\n      tech: this\n    });\n    return new REMOTE.remoteTextEl.TrackClass(track);\n  }\n  /**\n   * Creates a remote text track object and returns an html track element.\n   *\n   * > Note: This can be an emulated {@link HTMLTrackElement} or a native one.\n   *\n   * @param {Object} options\n   *        See {@link Tech#createRemoteTextTrack} for more detailed properties.\n   *\n   * @param {boolean} [manualCleanup=true]\n   *        - When false: the TextTrack will be automatically removed from the video\n   *          element whenever the source changes\n   *        - When True: The TextTrack will have to be cleaned up manually\n   *\n   * @return {HTMLTrackElement}\n   *         An Html Track Element.\n   *\n   * @deprecated The default functionality for this function will be equivalent\n   *             to \"manualCleanup=false\" in the future. The manualCleanup parameter will\n   *             also be removed.\n   */\n  ;\n\n  _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n    var _this7 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var htmlTrackElement = this.createRemoteTextTrack(options);\n\n    if (manualCleanup !== true && manualCleanup !== false) {\n      // deprecation warning\n      log$1.warn('Calling addRemoteTextTrack without explicitly setting the \"manualCleanup\" parameter to `true` is deprecated and default to `false` in future version of video.js');\n      manualCleanup = true;\n    } // store HTMLTrackElement and TextTrack to remote list\n\n\n    this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);\n    this.remoteTextTracks().addTrack(htmlTrackElement.track);\n\n    if (manualCleanup !== true) {\n      // create the TextTrackList if it doesn't exist\n      this.ready(function () {\n        return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);\n      });\n    }\n\n    return htmlTrackElement;\n  }\n  /**\n   * Remove a remote text track from the remote `TextTrackList`.\n   *\n   * @param {TextTrack} track\n   *        `TextTrack` to remove from the `TextTrackList`\n   */\n  ;\n\n  _proto.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n    var trackElement = this.remoteTextTrackEls().getTrackElementByTrack_(track); // remove HTMLTrackElement and TextTrack from remote list\n\n    this.remoteTextTrackEls().removeTrackElement_(trackElement);\n    this.remoteTextTracks().removeTrack(track);\n    this.autoRemoteTextTracks_.removeTrack(track);\n  }\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object}\n   *         An object with supported media playback quality metrics\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    return {};\n  }\n  /**\n   * Attempt to create a floating video window always on top of other windows\n   * so that users may continue consuming media while they interact with other\n   * content sites, or applications on their device.\n   *\n   * @see [Spec]{@link https://wicg.github.io/picture-in-picture}\n   *\n   * @return {Promise|undefined}\n   *         A promise with a Picture-in-Picture window if the browser supports\n   *         Promises (or one was passed in as an option). It returns undefined\n   *         otherwise.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.requestPictureInPicture = function requestPictureInPicture() {\n    var PromiseClass = this.options_.Promise || window$1.Promise;\n\n    if (PromiseClass) {\n      return PromiseClass.reject();\n    }\n  }\n  /**\n   * A method to check for the value of the 'disablePictureInPicture' <video> property.\n   * Defaults to true, as it should be considered disabled if the tech does not support pip\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.disablePictureInPicture = function disablePictureInPicture() {\n    return true;\n  }\n  /**\n   * A method to set or unset the 'disablePictureInPicture' <video> property.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.setDisablePictureInPicture = function setDisablePictureInPicture() {}\n  /**\n   * A method to set a poster from a `Tech`.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.setPoster = function setPoster() {}\n  /**\n   * A method to check for the presence of the 'playsinline' <video> attribute.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.playsinline = function playsinline() {}\n  /**\n   * A method to set or unset the 'playsinline' <video> attribute.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.setPlaysinline = function setPlaysinline() {}\n  /**\n   * Attempt to force override of native audio tracks.\n   *\n   * @param {boolean} override - If set to true native audio will be overridden,\n   * otherwise native audio will potentially be used.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.overrideNativeAudioTracks = function overrideNativeAudioTracks() {}\n  /**\n   * Attempt to force override of native video tracks.\n   *\n   * @param {boolean} override - If set to true native video will be overridden,\n   * otherwise native video will potentially be used.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.overrideNativeVideoTracks = function overrideNativeVideoTracks() {}\n  /*\n   * Check if the tech can support the given mime-type.\n   *\n   * The base tech does not support any type, but source handlers might\n   * overwrite this.\n   *\n   * @param  {string} type\n   *         The mimetype to check for support\n   *\n   * @return {string}\n   *         'probably', 'maybe', or empty string\n   *\n   * @see [Spec]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/canPlayType}\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.canPlayType = function canPlayType() {\n    return '';\n  }\n  /**\n   * Check if the type is supported by this tech.\n   *\n   * The base tech does not support any type, but source handlers might\n   * overwrite this.\n   *\n   * @param {string} type\n   *        The media type to check\n   * @return {string} Returns the native video element's response\n   */\n  ;\n\n  Tech.canPlayType = function canPlayType() {\n    return '';\n  }\n  /**\n   * Check if the tech can support the given source\n   *\n   * @param {Object} srcObj\n   *        The source object\n   * @param {Object} options\n   *        The options passed to the tech\n   * @return {string} 'probably', 'maybe', or '' (empty string)\n   */\n  ;\n\n  Tech.canPlaySource = function canPlaySource(srcObj, options) {\n    return Tech.canPlayType(srcObj.type);\n  }\n  /*\n   * Return whether the argument is a Tech or not.\n   * Can be passed either a Class like `Html5` or a instance like `player.tech_`\n   *\n   * @param {Object} component\n   *        The item to check\n   *\n   * @return {boolean}\n   *         Whether it is a tech or not\n   *         - True if it is a tech\n   *         - False if it is not\n   */\n  ;\n\n  Tech.isTech = function isTech(component) {\n    return component.prototype instanceof Tech || component instanceof Tech || component === Tech;\n  }\n  /**\n   * Registers a `Tech` into a shared list for videojs.\n   *\n   * @param {string} name\n   *        Name of the `Tech` to register.\n   *\n   * @param {Object} tech\n   *        The `Tech` class to register.\n   */\n  ;\n\n  Tech.registerTech = function registerTech(name, tech) {\n    if (!Tech.techs_) {\n      Tech.techs_ = {};\n    }\n\n    if (!Tech.isTech(tech)) {\n      throw new Error(\"Tech \" + name + \" must be a Tech\");\n    }\n\n    if (!Tech.canPlayType) {\n      throw new Error('Techs must have a static canPlayType method on them');\n    }\n\n    if (!Tech.canPlaySource) {\n      throw new Error('Techs must have a static canPlaySource method on them');\n    }\n\n    name = toTitleCase$1(name);\n    Tech.techs_[name] = tech;\n    Tech.techs_[toLowerCase(name)] = tech;\n\n    if (name !== 'Tech') {\n      // camel case the techName for use in techOrder\n      Tech.defaultTechOrder_.push(name);\n    }\n\n    return tech;\n  }\n  /**\n   * Get a `Tech` from the shared list by name.\n   *\n   * @param {string} name\n   *        `camelCase` or `TitleCase` name of the Tech to get\n   *\n   * @return {Tech|undefined}\n   *         The `Tech` or undefined if there was no tech with the name requested.\n   */\n  ;\n\n  Tech.getTech = function getTech(name) {\n    if (!name) {\n      return;\n    }\n\n    if (Tech.techs_ && Tech.techs_[name]) {\n      return Tech.techs_[name];\n    }\n\n    name = toTitleCase$1(name);\n\n    if (window$1 && window$1.videojs && window$1.videojs[name]) {\n      log$1.warn(\"The \" + name + \" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)\");\n      return window$1.videojs[name];\n    }\n  };\n\n  return Tech;\n}(Component$1);\n/**\n * Get the {@link VideoTrackList}\n *\n * @returns {VideoTrackList}\n * @method Tech.prototype.videoTracks\n */\n\n/**\n * Get the {@link AudioTrackList}\n *\n * @returns {AudioTrackList}\n * @method Tech.prototype.audioTracks\n */\n\n/**\n * Get the {@link TextTrackList}\n *\n * @returns {TextTrackList}\n * @method Tech.prototype.textTracks\n */\n\n/**\n * Get the remote element {@link TextTrackList}\n *\n * @returns {TextTrackList}\n * @method Tech.prototype.remoteTextTracks\n */\n\n/**\n * Get the remote element {@link HtmlTrackElementList}\n *\n * @returns {HtmlTrackElementList}\n * @method Tech.prototype.remoteTextTrackEls\n */\n\n\nALL.names.forEach(function (name) {\n  var props = ALL[name];\n\n  Tech.prototype[props.getterName] = function () {\n    this[props.privateName] = this[props.privateName] || new props.ListClass();\n    return this[props.privateName];\n  };\n});\n/**\n * List of associated text tracks\n *\n * @type {TextTrackList}\n * @private\n * @property Tech#textTracks_\n */\n\n/**\n * List of associated audio tracks.\n *\n * @type {AudioTrackList}\n * @private\n * @property Tech#audioTracks_\n */\n\n/**\n * List of associated video tracks.\n *\n * @type {VideoTrackList}\n * @private\n * @property Tech#videoTracks_\n */\n\n/**\n * Boolean indicating whether the `Tech` supports volume control.\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresVolumeControl = true;\n/**\n * Boolean indicating whether the `Tech` supports muting volume.\n *\n * @type {bolean}\n * @default\n */\n\nTech.prototype.featuresMuteControl = true;\n/**\n * Boolean indicating whether the `Tech` supports fullscreen resize control.\n * Resizing plugins using request fullscreen reloads the plugin\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresFullscreenResize = false;\n/**\n * Boolean indicating whether the `Tech` supports changing the speed at which the video\n * plays. Examples:\n *   - Set player to play 2x (twice) as fast\n *   - Set player to play 0.5x (half) as fast\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresPlaybackRate = false;\n/**\n * Boolean indicating whether the `Tech` supports the `progress` event. This is currently\n * not triggered by video-js-swf. This will be used to determine if\n * {@link Tech#manualProgressOn} should be called.\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresProgressEvents = false;\n/**\n * Boolean indicating whether the `Tech` supports the `sourceset` event.\n *\n * A tech should set this to `true` and then use {@link Tech#triggerSourceset}\n * to trigger a {@link Tech#event:sourceset} at the earliest time after getting\n * a new source.\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresSourceset = false;\n/**\n * Boolean indicating whether the `Tech` supports the `timeupdate` event. This is currently\n * not triggered by video-js-swf. This will be used to determine if\n * {@link Tech#manualTimeUpdates} should be called.\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresTimeupdateEvents = false;\n/**\n * Boolean indicating whether the `Tech` supports the native `TextTrack`s.\n * This will help us integrate with native `TextTrack`s if the browser supports them.\n *\n * @type {boolean}\n * @default\n */\n\nTech.prototype.featuresNativeTextTracks = false;\n/**\n * A functional mixin for techs that want to use the Source Handler pattern.\n * Source handlers are scripts for handling specific formats.\n * The source handler pattern is used for adaptive formats (HLS, DASH) that\n * manually load video data and feed it into a Source Buffer (Media Source Extensions)\n * Example: `Tech.withSourceHandlers.call(MyTech);`\n *\n * @param {Tech} _Tech\n *        The tech to add source handler functions to.\n *\n * @mixes Tech~SourceHandlerAdditions\n */\n\nTech.withSourceHandlers = function (_Tech) {\n  /**\n   * Register a source handler\n   *\n   * @param {Function} handler\n   *        The source handler class\n   *\n   * @param {number} [index]\n   *        Register it at the following index\n   */\n  _Tech.registerSourceHandler = function (handler, index) {\n    var handlers = _Tech.sourceHandlers;\n\n    if (!handlers) {\n      handlers = _Tech.sourceHandlers = [];\n    }\n\n    if (index === undefined) {\n      // add to the end of the list\n      index = handlers.length;\n    }\n\n    handlers.splice(index, 0, handler);\n  };\n  /**\n   * Check if the tech can support the given type. Also checks the\n   * Techs sourceHandlers.\n   *\n   * @param {string} type\n   *         The mimetype to check.\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n\n\n  _Tech.canPlayType = function (type) {\n    var handlers = _Tech.sourceHandlers || [];\n    var can;\n\n    for (var i = 0; i < handlers.length; i++) {\n      can = handlers[i].canPlayType(type);\n\n      if (can) {\n        return can;\n      }\n    }\n\n    return '';\n  };\n  /**\n   * Returns the first source handler that supports the source.\n   *\n   * TODO: Answer question: should 'probably' be prioritized over 'maybe'\n   *\n   * @param {Tech~SourceObject} source\n   *        The source object\n   *\n   * @param {Object} options\n   *        The options passed to the tech\n   *\n   * @return {SourceHandler|null}\n   *          The first source handler that supports the source or null if\n   *          no SourceHandler supports the source\n   */\n\n\n  _Tech.selectSourceHandler = function (source, options) {\n    var handlers = _Tech.sourceHandlers || [];\n    var can;\n\n    for (var i = 0; i < handlers.length; i++) {\n      can = handlers[i].canHandleSource(source, options);\n\n      if (can) {\n        return handlers[i];\n      }\n    }\n\n    return null;\n  };\n  /**\n   * Check if the tech can support the given source.\n   *\n   * @param {Tech~SourceObject} srcObj\n   *        The source object\n   *\n   * @param {Object} options\n   *        The options passed to the tech\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n\n\n  _Tech.canPlaySource = function (srcObj, options) {\n    var sh = _Tech.selectSourceHandler(srcObj, options);\n\n    if (sh) {\n      return sh.canHandleSource(srcObj, options);\n    }\n\n    return '';\n  };\n  /**\n   * When using a source handler, prefer its implementation of\n   * any function normally provided by the tech.\n   */\n\n\n  var deferrable = ['seekable', 'seeking', 'duration'];\n  /**\n   * A wrapper around {@link Tech#seekable} that will call a `SourceHandler`s seekable\n   * function if it exists, with a fallback to the Techs seekable function.\n   *\n   * @method _Tech.seekable\n   */\n\n  /**\n   * A wrapper around {@link Tech#duration} that will call a `SourceHandler`s duration\n   * function if it exists, otherwise it will fallback to the techs duration function.\n   *\n   * @method _Tech.duration\n   */\n\n  deferrable.forEach(function (fnName) {\n    var originalFn = this[fnName];\n\n    if (typeof originalFn !== 'function') {\n      return;\n    }\n\n    this[fnName] = function () {\n      if (this.sourceHandler_ && this.sourceHandler_[fnName]) {\n        return this.sourceHandler_[fnName].apply(this.sourceHandler_, arguments);\n      }\n\n      return originalFn.apply(this, arguments);\n    };\n  }, _Tech.prototype);\n  /**\n   * Create a function for setting the source using a source object\n   * and source handlers.\n   * Should never be called unless a source handler was found.\n   *\n   * @param {Tech~SourceObject} source\n   *        A source object with src and type keys\n   */\n\n  _Tech.prototype.setSource = function (source) {\n    var sh = _Tech.selectSourceHandler(source, this.options_);\n\n    if (!sh) {\n      // Fall back to a native source hander when unsupported sources are\n      // deliberately set\n      if (_Tech.nativeSourceHandler) {\n        sh = _Tech.nativeSourceHandler;\n      } else {\n        log$1.error('No source handler found for the current source.');\n      }\n    } // Dispose any existing source handler\n\n\n    this.disposeSourceHandler();\n    this.off('dispose', this.disposeSourceHandler_);\n\n    if (sh !== _Tech.nativeSourceHandler) {\n      this.currentSource_ = source;\n    }\n\n    this.sourceHandler_ = sh.handleSource(source, this, this.options_);\n    this.one('dispose', this.disposeSourceHandler_);\n  };\n  /**\n   * Clean up any existing SourceHandlers and listeners when the Tech is disposed.\n   *\n   * @listens Tech#dispose\n   */\n\n\n  _Tech.prototype.disposeSourceHandler = function () {\n    // if we have a source and get another one\n    // then we are loading something new\n    // than clear all of our current tracks\n    if (this.currentSource_) {\n      this.clearTracks(['audio', 'video']);\n      this.currentSource_ = null;\n    } // always clean up auto-text tracks\n\n\n    this.cleanupAutoTextTracks();\n\n    if (this.sourceHandler_) {\n      if (this.sourceHandler_.dispose) {\n        this.sourceHandler_.dispose();\n      }\n\n      this.sourceHandler_ = null;\n    }\n  };\n}; // The base Tech class needs to be registered as a Component. It is the only\n// Tech that can be registered as a Component.\n\n\nComponent$1.registerComponent('Tech', Tech);\nTech.registerTech('Tech', Tech);\n/**\n * A list of techs that should be added to techOrder on Players\n *\n * @private\n */\n\nTech.defaultTechOrder_ = [];\n/**\n * @file middleware.js\n * @module middleware\n */\n\nvar middlewares = {};\nvar middlewareInstances = {};\nvar TERMINATOR = {};\n/**\n * A middleware object is a plain JavaScript object that has methods that\n * match the {@link Tech} methods found in the lists of allowed\n * {@link module:middleware.allowedGetters|getters},\n * {@link module:middleware.allowedSetters|setters}, and\n * {@link module:middleware.allowedMediators|mediators}.\n *\n * @typedef {Object} MiddlewareObject\n */\n\n/**\n * A middleware factory function that should return a\n * {@link module:middleware~MiddlewareObject|MiddlewareObject}.\n *\n * This factory will be called for each player when needed, with the player\n * passed in as an argument.\n *\n * @callback MiddlewareFactory\n * @param {Player} player\n *        A Video.js player.\n */\n\n/**\n * Define a middleware that the player should use by way of a factory function\n * that returns a middleware object.\n *\n * @param  {string} type\n *         The MIME type to match or `\"*\"` for all MIME types.\n *\n * @param  {MiddlewareFactory} middleware\n *         A middleware factory function that will be executed for\n *         matching types.\n */\n\nfunction use(type, middleware) {\n  middlewares[type] = middlewares[type] || [];\n  middlewares[type].push(middleware);\n}\n/**\n * Asynchronously sets a source using middleware by recursing through any\n * matching middlewares and calling `setSource` on each, passing along the\n * previous returned value each time.\n *\n * @param  {Player} player\n *         A {@link Player} instance.\n *\n * @param  {Tech~SourceObject} src\n *         A source object.\n *\n * @param  {Function}\n *         The next middleware to run.\n */\n\n\nfunction setSource(player, src, next) {\n  player.setTimeout(function () {\n    return setSourceHelper(src, middlewares[src.type], next, player);\n  }, 1);\n}\n/**\n * When the tech is set, passes the tech to each middleware's `setTech` method.\n *\n * @param {Object[]} middleware\n *        An array of middleware instances.\n *\n * @param {Tech} tech\n *        A Video.js tech.\n */\n\n\nfunction setTech(middleware, tech) {\n  middleware.forEach(function (mw) {\n    return mw.setTech && mw.setTech(tech);\n  });\n}\n/**\n * Calls a getter on the tech first, through each middleware\n * from right to left to the player.\n *\n * @param  {Object[]} middleware\n *         An array of middleware instances.\n *\n * @param  {Tech} tech\n *         The current tech.\n *\n * @param  {string} method\n *         A method name.\n *\n * @return {Mixed}\n *         The final value from the tech after middleware has intercepted it.\n */\n\n\nfunction get(middleware, tech, method) {\n  return middleware.reduceRight(middlewareIterator(method), tech[method]());\n}\n/**\n * Takes the argument given to the player and calls the setter method on each\n * middleware from left to right to the tech.\n *\n * @param  {Object[]} middleware\n *         An array of middleware instances.\n *\n * @param  {Tech} tech\n *         The current tech.\n *\n * @param  {string} method\n *         A method name.\n *\n * @param  {Mixed} arg\n *         The value to set on the tech.\n *\n * @return {Mixed}\n *         The return value of the `method` of the `tech`.\n */\n\n\nfunction set(middleware, tech, method, arg) {\n  return tech[method](middleware.reduce(middlewareIterator(method), arg));\n}\n/**\n * Takes the argument given to the player and calls the `call` version of the\n * method on each middleware from left to right.\n *\n * Then, call the passed in method on the tech and return the result unchanged\n * back to the player, through middleware, this time from right to left.\n *\n * @param  {Object[]} middleware\n *         An array of middleware instances.\n *\n * @param  {Tech} tech\n *         The current tech.\n *\n * @param  {string} method\n *         A method name.\n *\n * @param  {Mixed} arg\n *         The value to set on the tech.\n *\n * @return {Mixed}\n *         The return value of the `method` of the `tech`, regardless of the\n *         return values of middlewares.\n */\n\n\nfunction mediate(middleware, tech, method, arg) {\n  if (arg === void 0) {\n    arg = null;\n  }\n\n  var callMethod = 'call' + toTitleCase$1(method);\n  var middlewareValue = middleware.reduce(middlewareIterator(callMethod), arg);\n  var terminated = middlewareValue === TERMINATOR; // deprecated. The `null` return value should instead return TERMINATOR to\n  // prevent confusion if a techs method actually returns null.\n\n  var returnValue = terminated ? null : tech[method](middlewareValue);\n  executeRight(middleware, method, returnValue, terminated);\n  return returnValue;\n}\n/**\n * Enumeration of allowed getters where the keys are method names.\n *\n * @type {Object}\n */\n\n\nvar allowedGetters = {\n  buffered: 1,\n  currentTime: 1,\n  duration: 1,\n  muted: 1,\n  played: 1,\n  paused: 1,\n  seekable: 1,\n  volume: 1,\n  ended: 1\n};\n/**\n * Enumeration of allowed setters where the keys are method names.\n *\n * @type {Object}\n */\n\nvar allowedSetters = {\n  setCurrentTime: 1,\n  setMuted: 1,\n  setVolume: 1\n};\n/**\n * Enumeration of allowed mediators where the keys are method names.\n *\n * @type {Object}\n */\n\nvar allowedMediators = {\n  play: 1,\n  pause: 1\n};\n\nfunction middlewareIterator(method) {\n  return function (value, mw) {\n    // if the previous middleware terminated, pass along the termination\n    if (value === TERMINATOR) {\n      return TERMINATOR;\n    }\n\n    if (mw[method]) {\n      return mw[method](value);\n    }\n\n    return value;\n  };\n}\n\nfunction executeRight(mws, method, value, terminated) {\n  for (var i = mws.length - 1; i >= 0; i--) {\n    var mw = mws[i];\n\n    if (mw[method]) {\n      mw[method](terminated, value);\n    }\n  }\n}\n/**\n * Clear the middleware cache for a player.\n *\n * @param  {Player} player\n *         A {@link Player} instance.\n */\n\n\nfunction clearCacheForPlayer(player) {\n  middlewareInstances[player.id()] = null;\n}\n/**\n * {\n *  [playerId]: [[mwFactory, mwInstance], ...]\n * }\n *\n * @private\n */\n\n\nfunction getOrCreateFactory(player, mwFactory) {\n  var mws = middlewareInstances[player.id()];\n  var mw = null;\n\n  if (mws === undefined || mws === null) {\n    mw = mwFactory(player);\n    middlewareInstances[player.id()] = [[mwFactory, mw]];\n    return mw;\n  }\n\n  for (var i = 0; i < mws.length; i++) {\n    var _mws$i = mws[i],\n        mwf = _mws$i[0],\n        mwi = _mws$i[1];\n\n    if (mwf !== mwFactory) {\n      continue;\n    }\n\n    mw = mwi;\n  }\n\n  if (mw === null) {\n    mw = mwFactory(player);\n    mws.push([mwFactory, mw]);\n  }\n\n  return mw;\n}\n\nfunction setSourceHelper(src, middleware, next, player, acc, lastRun) {\n  if (src === void 0) {\n    src = {};\n  }\n\n  if (middleware === void 0) {\n    middleware = [];\n  }\n\n  if (acc === void 0) {\n    acc = [];\n  }\n\n  if (lastRun === void 0) {\n    lastRun = false;\n  }\n\n  var _middleware = middleware,\n      mwFactory = _middleware[0],\n      mwrest = _middleware.slice(1); // if mwFactory is a string, then we're at a fork in the road\n\n\n  if (typeof mwFactory === 'string') {\n    setSourceHelper(src, middlewares[mwFactory], next, player, acc, lastRun); // if we have an mwFactory, call it with the player to get the mw,\n    // then call the mw's setSource method\n  } else if (mwFactory) {\n    var mw = getOrCreateFactory(player, mwFactory); // if setSource isn't present, implicitly select this middleware\n\n    if (!mw.setSource) {\n      acc.push(mw);\n      return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n    }\n\n    mw.setSource(assign({}, src), function (err, _src) {\n      // something happened, try the next middleware on the current level\n      // make sure to use the old src\n      if (err) {\n        return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n      } // we've succeeded, now we need to go deeper\n\n\n      acc.push(mw); // if it's the same type, continue down the current chain\n      // otherwise, we want to go down the new chain\n\n      setSourceHelper(_src, src.type === _src.type ? mwrest : middlewares[_src.type], next, player, acc, lastRun);\n    });\n  } else if (mwrest.length) {\n    setSourceHelper(src, mwrest, next, player, acc, lastRun);\n  } else if (lastRun) {\n    next(src, acc);\n  } else {\n    setSourceHelper(src, middlewares['*'], next, player, acc, true);\n  }\n}\n/**\n * Mimetypes\n *\n * @see http://hul.harvard.edu/ois/////systems/wax/wax-public-help/mimetypes.htm\n * @typedef Mimetypes~Kind\n * @enum\n */\n\n\nvar MimetypesKind = {\n  opus: 'video/ogg',\n  ogv: 'video/ogg',\n  mp4: 'video/mp4',\n  mov: 'video/mp4',\n  m4v: 'video/mp4',\n  mkv: 'video/x-matroska',\n  m4a: 'audio/mp4',\n  mp3: 'audio/mpeg',\n  aac: 'audio/aac',\n  caf: 'audio/x-caf',\n  flac: 'audio/flac',\n  oga: 'audio/ogg',\n  wav: 'audio/wav',\n  m3u8: 'application/x-mpegURL',\n  jpg: 'image/jpeg',\n  jpeg: 'image/jpeg',\n  gif: 'image/gif',\n  png: 'image/png',\n  svg: 'image/svg+xml',\n  webp: 'image/webp'\n};\n/**\n * Get the mimetype of a given src url if possible\n *\n * @param {string} src\n *        The url to the src\n *\n * @return {string}\n *         return the mimetype if it was known or empty string otherwise\n */\n\nvar getMimetype = function getMimetype(src) {\n  if (src === void 0) {\n    src = '';\n  }\n\n  var ext = getFileExtension(src);\n  var mimetype = MimetypesKind[ext.toLowerCase()];\n  return mimetype || '';\n};\n/**\n * Find the mime type of a given source string if possible. Uses the player\n * source cache.\n *\n * @param {Player} player\n *        The player object\n *\n * @param {string} src\n *        The source string\n *\n * @return {string}\n *         The type that was found\n */\n\n\nvar findMimetype = function findMimetype(player, src) {\n  if (!src) {\n    return '';\n  } // 1. check for the type in the `source` cache\n\n\n  if (player.cache_.source.src === src && player.cache_.source.type) {\n    return player.cache_.source.type;\n  } // 2. see if we have this source in our `currentSources` cache\n\n\n  var matchingSources = player.cache_.sources.filter(function (s) {\n    return s.src === src;\n  });\n\n  if (matchingSources.length) {\n    return matchingSources[0].type;\n  } // 3. look for the src url in source elements and use the type there\n\n\n  var sources = player.$$('source');\n\n  for (var i = 0; i < sources.length; i++) {\n    var s = sources[i];\n\n    if (s.type && s.src && s.src === src) {\n      return s.type;\n    }\n  } // 4. finally fallback to our list of mime types based on src url extension\n\n\n  return getMimetype(src);\n};\n/**\n * @module filter-source\n */\n\n/**\n * Filter out single bad source objects or multiple source objects in an\n * array. Also flattens nested source object arrays into a 1 dimensional\n * array of source objects.\n *\n * @param {Tech~SourceObject|Tech~SourceObject[]} src\n *        The src object to filter\n *\n * @return {Tech~SourceObject[]}\n *         An array of sourceobjects containing only valid sources\n *\n * @private\n */\n\n\nvar filterSource = function filterSource(src) {\n  // traverse array\n  if (Array.isArray(src)) {\n    var newsrc = [];\n    src.forEach(function (srcobj) {\n      srcobj = filterSource(srcobj);\n\n      if (Array.isArray(srcobj)) {\n        newsrc = newsrc.concat(srcobj);\n      } else if (isObject(srcobj)) {\n        newsrc.push(srcobj);\n      }\n    });\n    src = newsrc;\n  } else if (typeof src === 'string' && src.trim()) {\n    // convert string into object\n    src = [fixSource({\n      src: src\n    })];\n  } else if (isObject(src) && typeof src.src === 'string' && src.src && src.src.trim()) {\n    // src is already valid\n    src = [fixSource(src)];\n  } else {\n    // invalid source, turn it into an empty array\n    src = [];\n  }\n\n  return src;\n};\n/**\n * Checks src mimetype, adding it when possible\n *\n * @param {Tech~SourceObject} src\n *        The src object to check\n * @return {Tech~SourceObject}\n *        src Object with known type\n */\n\n\nfunction fixSource(src) {\n  if (!src.type) {\n    var mimetype = getMimetype(src.src);\n\n    if (mimetype) {\n      src.type = mimetype;\n    }\n  }\n\n  return src;\n}\n/**\n * The `MediaLoader` is the `Component` that decides which playback technology to load\n * when a player is initialized.\n *\n * @extends Component\n */\n\n\nvar MediaLoader = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(MediaLoader, _Component);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should attach to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function that is run when this component is ready.\n   */\n\n\n  function MediaLoader(player, options, ready) {\n    var _this; // MediaLoader has no element\n\n\n    var options_ = mergeOptions$3({\n      createEl: false\n    }, options);\n    _this = _Component.call(this, player, options_, ready) || this; // If there are no sources when the player is initialized,\n    // load the first supported playback technology.\n\n    if (!options.playerOptions.sources || options.playerOptions.sources.length === 0) {\n      for (var i = 0, j = options.playerOptions.techOrder; i < j.length; i++) {\n        var techName = toTitleCase$1(j[i]);\n        var tech = Tech.getTech(techName); // Support old behavior of techs being registered as components.\n        // Remove once that deprecated behavior is removed.\n\n        if (!techName) {\n          tech = Component$1.getComponent(techName);\n        } // Check if the browser supports this technology\n\n\n        if (tech && tech.isSupported()) {\n          player.loadTech_(techName);\n          break;\n        }\n      }\n    } else {\n      // Loop through playback technologies (e.g. HTML5) and check for support.\n      // Then load the best source.\n      // A few assumptions here:\n      //   All playback technologies respect preload false.\n      player.src(options.playerOptions.sources);\n    }\n\n    return _this;\n  }\n\n  return MediaLoader;\n}(Component$1);\n\nComponent$1.registerComponent('MediaLoader', MediaLoader);\n/**\n * Component which is clickable or keyboard actionable, but is not a\n * native HTML button.\n *\n * @extends Component\n */\n\nvar ClickableComponent = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ClickableComponent, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param  {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param  {Object} [options]\n   *         The key/value store of player options.\n   *\n   * @param  {function} [options.clickHandler]\n   *         The function to call when the button is clicked / activated\n   */\n\n\n  function ClickableComponent(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    _this.handleMouseOver_ = function (e) {\n      return _this.handleMouseOver(e);\n    };\n\n    _this.handleMouseOut_ = function (e) {\n      return _this.handleMouseOut(e);\n    };\n\n    _this.handleClick_ = function (e) {\n      return _this.handleClick(e);\n    };\n\n    _this.handleKeyDown_ = function (e) {\n      return _this.handleKeyDown(e);\n    };\n\n    _this.emitTapEvents();\n\n    _this.enable();\n\n    return _this;\n  }\n  /**\n   * Create the `ClickableComponent`s DOM element.\n   *\n   * @param {string} [tag=div]\n   *        The element's node type.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element.\n   *\n   * @param {Object} [attributes={}]\n   *        An object of attributes that should be set on the element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  var _proto = ClickableComponent.prototype;\n\n  _proto.createEl = function createEl$1(tag, props, attributes) {\n    if (tag === void 0) {\n      tag = 'div';\n    }\n\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (attributes === void 0) {\n      attributes = {};\n    }\n\n    props = assign({\n      className: this.buildCSSClass(),\n      tabIndex: 0\n    }, props);\n\n    if (tag === 'button') {\n      log$1.error(\"Creating a ClickableComponent with an HTML element of \" + tag + \" is not supported; use a Button instead.\");\n    } // Add ARIA attributes for clickable element which is not a native HTML button\n\n\n    attributes = assign({\n      role: 'button'\n    }, attributes);\n    this.tabIndex_ = props.tabIndex;\n    var el = createEl(tag, props, attributes);\n    el.appendChild(createEl('span', {\n      className: 'vjs-icon-placeholder'\n    }, {\n      'aria-hidden': true\n    }));\n    this.createControlTextEl(el);\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    // remove controlTextEl_ on dispose\n    this.controlTextEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Create a control text element on this `ClickableComponent`\n   *\n   * @param {Element} [el]\n   *        Parent element for the control text.\n   *\n   * @return {Element}\n   *         The control text element that gets created.\n   */\n  ;\n\n  _proto.createControlTextEl = function createControlTextEl(el) {\n    this.controlTextEl_ = createEl('span', {\n      className: 'vjs-control-text'\n    }, {\n      // let the screen reader user know that the text of the element may change\n      'aria-live': 'polite'\n    });\n\n    if (el) {\n      el.appendChild(this.controlTextEl_);\n    }\n\n    this.controlText(this.controlText_, el);\n    return this.controlTextEl_;\n  }\n  /**\n   * Get or set the localize text to use for the controls on the `ClickableComponent`.\n   *\n   * @param {string} [text]\n   *        Control text for element.\n   *\n   * @param {Element} [el=this.el()]\n   *        Element to set the title on.\n   *\n   * @return {string}\n   *         - The control text when getting\n   */\n  ;\n\n  _proto.controlText = function controlText(text, el) {\n    if (el === void 0) {\n      el = this.el();\n    }\n\n    if (text === undefined) {\n      return this.controlText_ || 'Need Text';\n    }\n\n    var localizedText = this.localize(text);\n    this.controlText_ = text;\n    textContent(this.controlTextEl_, localizedText);\n\n    if (!this.nonIconControl && !this.player_.options_.noUITitleAttributes) {\n      // Set title attribute if only an icon is shown\n      el.setAttribute('title', localizedText);\n    }\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-control vjs-button \" + _Component.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Enable this `ClickableComponent`\n   */\n  ;\n\n  _proto.enable = function enable() {\n    if (!this.enabled_) {\n      this.enabled_ = true;\n      this.removeClass('vjs-disabled');\n      this.el_.setAttribute('aria-disabled', 'false');\n\n      if (typeof this.tabIndex_ !== 'undefined') {\n        this.el_.setAttribute('tabIndex', this.tabIndex_);\n      }\n\n      this.on(['tap', 'click'], this.handleClick_);\n      this.on('keydown', this.handleKeyDown_);\n    }\n  }\n  /**\n   * Disable this `ClickableComponent`\n   */\n  ;\n\n  _proto.disable = function disable() {\n    this.enabled_ = false;\n    this.addClass('vjs-disabled');\n    this.el_.setAttribute('aria-disabled', 'true');\n\n    if (typeof this.tabIndex_ !== 'undefined') {\n      this.el_.removeAttribute('tabIndex');\n    }\n\n    this.off('mouseover', this.handleMouseOver_);\n    this.off('mouseout', this.handleMouseOut_);\n    this.off(['tap', 'click'], this.handleClick_);\n    this.off('keydown', this.handleKeyDown_);\n  }\n  /**\n   * Handles language change in ClickableComponent for the player in components\n   *\n   *\n   */\n  ;\n\n  _proto.handleLanguagechange = function handleLanguagechange() {\n    this.controlText(this.controlText_);\n  }\n  /**\n   * Event handler that is called when a `ClickableComponent` receives a\n   * `click` or `tap` event.\n   *\n   * @param {EventTarget~Event} event\n   *        The `tap` or `click` event that caused this function to be called.\n   *\n   * @listens tap\n   * @listens click\n   * @abstract\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    if (this.options_.clickHandler) {\n      this.options_.clickHandler.call(this, arguments);\n    }\n  }\n  /**\n   * Event handler that is called when a `ClickableComponent` receives a\n   * `keydown` event.\n   *\n   * By default, if the key is Space or Enter, it will trigger a `click` event.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Support Space or Enter key operation to fire a click event. Also,\n    // prevent the event from propagating through the DOM and triggering\n    // Player hotkeys.\n    if (keycode.isEventKey(event, 'Space') || keycode.isEventKey(event, 'Enter')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.trigger('click');\n    } else {\n      // Pass keypress handling up for unsupported keys\n      _Component.prototype.handleKeyDown.call(this, event);\n    }\n  };\n\n  return ClickableComponent;\n}(Component$1);\n\nComponent$1.registerComponent('ClickableComponent', ClickableComponent);\n/**\n * A `ClickableComponent` that handles showing the poster image for the player.\n *\n * @extends ClickableComponent\n */\n\nvar PosterImage = /*#__PURE__*/function (_ClickableComponent) {\n  _inheritsLoose(PosterImage, _ClickableComponent);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should attach to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function PosterImage(player, options) {\n    var _this;\n\n    _this = _ClickableComponent.call(this, player, options) || this;\n\n    _this.update();\n\n    _this.update_ = function (e) {\n      return _this.update(e);\n    };\n\n    player.on('posterchange', _this.update_);\n    return _this;\n  }\n  /**\n   * Clean up and dispose of the `PosterImage`.\n   */\n\n\n  var _proto = PosterImage.prototype;\n\n  _proto.dispose = function dispose() {\n    this.player().off('posterchange', this.update_);\n\n    _ClickableComponent.prototype.dispose.call(this);\n  }\n  /**\n   * Create the `PosterImage`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl$1() {\n    var el = createEl('div', {\n      className: 'vjs-poster',\n      // Don't want poster to be tabbable.\n      tabIndex: -1\n    });\n    return el;\n  }\n  /**\n   * An {@link EventTarget~EventListener} for {@link Player#posterchange} events.\n   *\n   * @listens Player#posterchange\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `Player#posterchange` event that triggered this function.\n   */\n  ;\n\n  _proto.update = function update(event) {\n    var url = this.player().poster();\n    this.setSrc(url); // If there's no poster source we should display:none on this component\n    // so it's not still clickable or right-clickable\n\n    if (url) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n  /**\n   * Set the source of the `PosterImage` depending on the display method.\n   *\n   * @param {string} url\n   *        The URL to the source for the `PosterImage`.\n   */\n  ;\n\n  _proto.setSrc = function setSrc(url) {\n    var backgroundImage = ''; // Any falsy value should stay as an empty string, otherwise\n    // this will throw an extra error\n\n    if (url) {\n      backgroundImage = \"url(\\\"\" + url + \"\\\")\";\n    }\n\n    this.el_.style.backgroundImage = backgroundImage;\n  }\n  /**\n   * An {@link EventTarget~EventListener} for clicks on the `PosterImage`. See\n   * {@link ClickableComponent#handleClick} for instances where this will be triggered.\n   *\n   * @listens tap\n   * @listens click\n   * @listens keydown\n   *\n   * @param {EventTarget~Event} event\n   +        The `click`, `tap` or `keydown` event that caused this function to be called.\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    // We don't want a click to trigger playback when controls are disabled\n    if (!this.player_.controls()) {\n      return;\n    }\n\n    var sourceIsEncrypted = this.player_.usingPlugin('eme') && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;\n\n    if (this.player_.tech(true) && // We've observed a bug in IE and Edge when playing back DRM content where\n    // calling .focus() on the video element causes the video to go black,\n    // so we avoid it in that specific case\n    !((IE_VERSION || IS_EDGE) && sourceIsEncrypted)) {\n      this.player_.tech(true).focus();\n    }\n\n    if (this.player_.paused()) {\n      silencePromise(this.player_.play());\n    } else {\n      this.player_.pause();\n    }\n  };\n\n  return PosterImage;\n}(ClickableComponent);\n\nComponent$1.registerComponent('PosterImage', PosterImage);\nvar darkGray = '#222';\nvar lightGray = '#ccc';\nvar fontMap = {\n  monospace: 'monospace',\n  sansSerif: 'sans-serif',\n  serif: 'serif',\n  monospaceSansSerif: '\"Andale Mono\", \"Lucida Console\", monospace',\n  monospaceSerif: '\"Courier New\", monospace',\n  proportionalSansSerif: 'sans-serif',\n  proportionalSerif: 'serif',\n  casual: '\"Comic Sans MS\", Impact, fantasy',\n  script: '\"Monotype Corsiva\", cursive',\n  smallcaps: '\"Andale Mono\", \"Lucida Console\", monospace, sans-serif'\n};\n/**\n * Construct an rgba color from a given hex color code.\n *\n * @param {number} color\n *        Hex number for color, like #f0e or #f604e2.\n *\n * @param {number} opacity\n *        Value for opacity, 0.0 - 1.0.\n *\n * @return {string}\n *         The rgba color that was created, like 'rgba(255, 0, 0, 0.3)'.\n */\n\nfunction constructColor(color, opacity) {\n  var hex;\n\n  if (color.length === 4) {\n    // color looks like \"#f0e\"\n    hex = color[1] + color[1] + color[2] + color[2] + color[3] + color[3];\n  } else if (color.length === 7) {\n    // color looks like \"#f604e2\"\n    hex = color.slice(1);\n  } else {\n    throw new Error('Invalid color code provided, ' + color + '; must be formatted as e.g. #f0e or #f604e2.');\n  }\n\n  return 'rgba(' + parseInt(hex.slice(0, 2), 16) + ',' + parseInt(hex.slice(2, 4), 16) + ',' + parseInt(hex.slice(4, 6), 16) + ',' + opacity + ')';\n}\n/**\n * Try to update the style of a DOM element. Some style changes will throw an error,\n * particularly in IE8. Those should be noops.\n *\n * @param {Element} el\n *        The DOM element to be styled.\n *\n * @param {string} style\n *        The CSS property on the element that should be styled.\n *\n * @param {string} rule\n *        The style rule that should be applied to the property.\n *\n * @private\n */\n\n\nfunction tryUpdateStyle(el, style, rule) {\n  try {\n    el.style[style] = rule;\n  } catch (e) {\n    // Satisfies linter.\n    return;\n  }\n}\n/**\n * The component for displaying text track cues.\n *\n * @extends Component\n */\n\n\nvar TextTrackDisplay = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TextTrackDisplay, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when `TextTrackDisplay` is ready.\n   */\n\n\n  function TextTrackDisplay(player, options, ready) {\n    var _this;\n\n    _this = _Component.call(this, player, options, ready) || this;\n\n    var updateDisplayHandler = function updateDisplayHandler(e) {\n      return _this.updateDisplay(e);\n    };\n\n    player.on('loadstart', function (e) {\n      return _this.toggleDisplay(e);\n    });\n    player.on('texttrackchange', updateDisplayHandler);\n    player.on('loadedmetadata', function (e) {\n      return _this.preselectTrack(e);\n    }); // This used to be called during player init, but was causing an error\n    // if a track should show by default and the display hadn't loaded yet.\n    // Should probably be moved to an external track loader when we support\n    // tracks that don't need a display.\n\n    player.ready(bind(_assertThisInitialized(_this), function () {\n      if (player.tech_ && player.tech_.featuresNativeTextTracks) {\n        this.hide();\n        return;\n      }\n\n      player.on('fullscreenchange', updateDisplayHandler);\n      player.on('playerresize', updateDisplayHandler);\n      window$1.addEventListener('orientationchange', updateDisplayHandler);\n      player.on('dispose', function () {\n        return window$1.removeEventListener('orientationchange', updateDisplayHandler);\n      });\n      var tracks = this.options_.playerOptions.tracks || [];\n\n      for (var i = 0; i < tracks.length; i++) {\n        this.player_.addRemoteTextTrack(tracks[i], true);\n      }\n\n      this.preselectTrack();\n    }));\n    return _this;\n  }\n  /**\n  * Preselect a track following this precedence:\n  * - matches the previously selected {@link TextTrack}'s language and kind\n  * - matches the previously selected {@link TextTrack}'s language only\n  * - is the first default captions track\n  * - is the first default descriptions track\n  *\n  * @listens Player#loadstart\n  */\n\n\n  var _proto = TextTrackDisplay.prototype;\n\n  _proto.preselectTrack = function preselectTrack() {\n    var modes = {\n      captions: 1,\n      subtitles: 1\n    };\n    var trackList = this.player_.textTracks();\n    var userPref = this.player_.cache_.selectedLanguage;\n    var firstDesc;\n    var firstCaptions;\n    var preferredTrack;\n\n    for (var i = 0; i < trackList.length; i++) {\n      var track = trackList[i];\n\n      if (userPref && userPref.enabled && userPref.language && userPref.language === track.language && track.kind in modes) {\n        // Always choose the track that matches both language and kind\n        if (track.kind === userPref.kind) {\n          preferredTrack = track; // or choose the first track that matches language\n        } else if (!preferredTrack) {\n          preferredTrack = track;\n        } // clear everything if offTextTrackMenuItem was clicked\n\n      } else if (userPref && !userPref.enabled) {\n        preferredTrack = null;\n        firstDesc = null;\n        firstCaptions = null;\n      } else if (track[\"default\"]) {\n        if (track.kind === 'descriptions' && !firstDesc) {\n          firstDesc = track;\n        } else if (track.kind in modes && !firstCaptions) {\n          firstCaptions = track;\n        }\n      }\n    } // The preferredTrack matches the user preference and takes\n    // precedence over all the other tracks.\n    // So, display the preferredTrack before the first default track\n    // and the subtitles/captions track before the descriptions track\n\n\n    if (preferredTrack) {\n      preferredTrack.mode = 'showing';\n    } else if (firstCaptions) {\n      firstCaptions.mode = 'showing';\n    } else if (firstDesc) {\n      firstDesc.mode = 'showing';\n    }\n  }\n  /**\n   * Turn display of {@link TextTrack}'s from the current state into the other state.\n   * There are only two states:\n   * - 'shown'\n   * - 'hidden'\n   *\n   * @listens Player#loadstart\n   */\n  ;\n\n  _proto.toggleDisplay = function toggleDisplay() {\n    if (this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  /**\n   * Create the {@link Component}'s DOM element.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-text-track-display'\n    }, {\n      'translate': 'yes',\n      'aria-live': 'off',\n      'aria-atomic': 'true'\n    });\n  }\n  /**\n   * Clear all displayed {@link TextTrack}s.\n   */\n  ;\n\n  _proto.clearDisplay = function clearDisplay() {\n    if (typeof window$1.WebVTT === 'function') {\n      window$1.WebVTT.processCues(window$1, [], this.el_);\n    }\n  }\n  /**\n   * Update the displayed TextTrack when a either a {@link Player#texttrackchange} or\n   * a {@link Player#fullscreenchange} is fired.\n   *\n   * @listens Player#texttrackchange\n   * @listens Player#fullscreenchange\n   */\n  ;\n\n  _proto.updateDisplay = function updateDisplay() {\n    var tracks = this.player_.textTracks();\n    var allowMultipleShowingTracks = this.options_.allowMultipleShowingTracks;\n    this.clearDisplay();\n\n    if (allowMultipleShowingTracks) {\n      var showingTracks = [];\n\n      for (var _i = 0; _i < tracks.length; ++_i) {\n        var track = tracks[_i];\n\n        if (track.mode !== 'showing') {\n          continue;\n        }\n\n        showingTracks.push(track);\n      }\n\n      this.updateForTrack(showingTracks);\n      return;\n    } //  Track display prioritization model: if multiple tracks are 'showing',\n    //  display the first 'subtitles' or 'captions' track which is 'showing',\n    //  otherwise display the first 'descriptions' track which is 'showing'\n\n\n    var descriptionsTrack = null;\n    var captionsSubtitlesTrack = null;\n    var i = tracks.length;\n\n    while (i--) {\n      var _track = tracks[i];\n\n      if (_track.mode === 'showing') {\n        if (_track.kind === 'descriptions') {\n          descriptionsTrack = _track;\n        } else {\n          captionsSubtitlesTrack = _track;\n        }\n      }\n    }\n\n    if (captionsSubtitlesTrack) {\n      if (this.getAttribute('aria-live') !== 'off') {\n        this.setAttribute('aria-live', 'off');\n      }\n\n      this.updateForTrack(captionsSubtitlesTrack);\n    } else if (descriptionsTrack) {\n      if (this.getAttribute('aria-live') !== 'assertive') {\n        this.setAttribute('aria-live', 'assertive');\n      }\n\n      this.updateForTrack(descriptionsTrack);\n    }\n  }\n  /**\n   * Style {@Link TextTrack} activeCues according to {@Link TextTrackSettings}.\n   *\n   * @param {TextTrack} track\n   *        Text track object containing active cues to style.\n   */\n  ;\n\n  _proto.updateDisplayState = function updateDisplayState(track) {\n    var overrides = this.player_.textTrackSettings.getValues();\n    var cues = track.activeCues;\n    var i = cues.length;\n\n    while (i--) {\n      var cue = cues[i];\n\n      if (!cue) {\n        continue;\n      }\n\n      var cueDiv = cue.displayState;\n\n      if (overrides.color) {\n        cueDiv.firstChild.style.color = overrides.color;\n      }\n\n      if (overrides.textOpacity) {\n        tryUpdateStyle(cueDiv.firstChild, 'color', constructColor(overrides.color || '#fff', overrides.textOpacity));\n      }\n\n      if (overrides.backgroundColor) {\n        cueDiv.firstChild.style.backgroundColor = overrides.backgroundColor;\n      }\n\n      if (overrides.backgroundOpacity) {\n        tryUpdateStyle(cueDiv.firstChild, 'backgroundColor', constructColor(overrides.backgroundColor || '#000', overrides.backgroundOpacity));\n      }\n\n      if (overrides.windowColor) {\n        if (overrides.windowOpacity) {\n          tryUpdateStyle(cueDiv, 'backgroundColor', constructColor(overrides.windowColor, overrides.windowOpacity));\n        } else {\n          cueDiv.style.backgroundColor = overrides.windowColor;\n        }\n      }\n\n      if (overrides.edgeStyle) {\n        if (overrides.edgeStyle === 'dropshadow') {\n          cueDiv.firstChild.style.textShadow = \"2px 2px 3px \" + darkGray + \", 2px 2px 4px \" + darkGray + \", 2px 2px 5px \" + darkGray;\n        } else if (overrides.edgeStyle === 'raised') {\n          cueDiv.firstChild.style.textShadow = \"1px 1px \" + darkGray + \", 2px 2px \" + darkGray + \", 3px 3px \" + darkGray;\n        } else if (overrides.edgeStyle === 'depressed') {\n          cueDiv.firstChild.style.textShadow = \"1px 1px \" + lightGray + \", 0 1px \" + lightGray + \", -1px -1px \" + darkGray + \", 0 -1px \" + darkGray;\n        } else if (overrides.edgeStyle === 'uniform') {\n          cueDiv.firstChild.style.textShadow = \"0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray;\n        }\n      }\n\n      if (overrides.fontPercent && overrides.fontPercent !== 1) {\n        var fontSize = window$1.parseFloat(cueDiv.style.fontSize);\n        cueDiv.style.fontSize = fontSize * overrides.fontPercent + 'px';\n        cueDiv.style.height = 'auto';\n        cueDiv.style.top = 'auto';\n      }\n\n      if (overrides.fontFamily && overrides.fontFamily !== 'default') {\n        if (overrides.fontFamily === 'small-caps') {\n          cueDiv.firstChild.style.fontVariant = 'small-caps';\n        } else {\n          cueDiv.firstChild.style.fontFamily = fontMap[overrides.fontFamily];\n        }\n      }\n    }\n  }\n  /**\n   * Add an {@link TextTrack} to to the {@link Tech}s {@link TextTrackList}.\n   *\n   * @param {TextTrack|TextTrack[]} tracks\n   *        Text track object or text track array to be added to the list.\n   */\n  ;\n\n  _proto.updateForTrack = function updateForTrack(tracks) {\n    if (!Array.isArray(tracks)) {\n      tracks = [tracks];\n    }\n\n    if (typeof window$1.WebVTT !== 'function' || tracks.every(function (track) {\n      return !track.activeCues;\n    })) {\n      return;\n    }\n\n    var cues = []; // push all active track cues\n\n    for (var i = 0; i < tracks.length; ++i) {\n      var track = tracks[i];\n\n      for (var j = 0; j < track.activeCues.length; ++j) {\n        cues.push(track.activeCues[j]);\n      }\n    } // removes all cues before it processes new ones\n\n\n    window$1.WebVTT.processCues(window$1, cues, this.el_); // add unique class to each language text track & add settings styling if necessary\n\n    for (var _i2 = 0; _i2 < tracks.length; ++_i2) {\n      var _track2 = tracks[_i2];\n\n      for (var _j = 0; _j < _track2.activeCues.length; ++_j) {\n        var cueEl = _track2.activeCues[_j].displayState;\n        addClass(cueEl, 'vjs-text-track-cue');\n        addClass(cueEl, 'vjs-text-track-cue-' + (_track2.language ? _track2.language : _i2));\n\n        if (_track2.language) {\n          setAttribute(cueEl, 'lang', _track2.language);\n        }\n      }\n\n      if (this.player_.textTrackSettings) {\n        this.updateDisplayState(_track2);\n      }\n    }\n  };\n\n  return TextTrackDisplay;\n}(Component$1);\n\nComponent$1.registerComponent('TextTrackDisplay', TextTrackDisplay);\n/**\n * A loading spinner for use during waiting/loading events.\n *\n * @extends Component\n */\n\nvar LoadingSpinner = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(LoadingSpinner, _Component);\n\n  function LoadingSpinner() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = LoadingSpinner.prototype;\n  /**\n   * Create the `LoadingSpinner`s DOM element.\n   *\n   * @return {Element}\n   *         The dom element that gets created.\n   */\n\n  _proto.createEl = function createEl$1() {\n    var isAudio = this.player_.isAudio();\n    var playerType = this.localize(isAudio ? 'Audio Player' : 'Video Player');\n    var controlText = createEl('span', {\n      className: 'vjs-control-text',\n      textContent: this.localize('{1} is loading.', [playerType])\n    });\n\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-loading-spinner',\n      dir: 'ltr'\n    });\n\n    el.appendChild(controlText);\n    return el;\n  };\n\n  return LoadingSpinner;\n}(Component$1);\n\nComponent$1.registerComponent('LoadingSpinner', LoadingSpinner);\n/**\n * Base class for all buttons.\n *\n * @extends ClickableComponent\n */\n\nvar Button = /*#__PURE__*/function (_ClickableComponent) {\n  _inheritsLoose(Button, _ClickableComponent);\n\n  function Button() {\n    return _ClickableComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = Button.prototype;\n  /**\n   * Create the `Button`s DOM element.\n   *\n   * @param {string} [tag=\"button\"]\n   *        The element's node type. This argument is IGNORED: no matter what\n   *        is passed, it will always create a `button` element.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element.\n   *\n   * @param {Object} [attributes={}]\n   *        An object of attributes that should be set on the element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n  _proto.createEl = function createEl$1(tag, props, attributes) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (attributes === void 0) {\n      attributes = {};\n    }\n\n    tag = 'button';\n    props = assign({\n      className: this.buildCSSClass()\n    }, props); // Add attributes for button element\n\n    attributes = assign({\n      // Necessary since the default button type is \"submit\"\n      type: 'button'\n    }, attributes);\n    var el = createEl(tag, props, attributes);\n    el.appendChild(createEl('span', {\n      className: 'vjs-icon-placeholder'\n    }, {\n      'aria-hidden': true\n    }));\n    this.createControlTextEl(el);\n    return el;\n  }\n  /**\n   * Add a child `Component` inside of this `Button`.\n   *\n   * @param {string|Component} child\n   *        The name or instance of a child to add.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of options that will get passed to children of\n   *        the child.\n   *\n   * @return {Component}\n   *         The `Component` that gets added as a child. When using a string the\n   *         `Component` will get created by this process.\n   *\n   * @deprecated since version 5\n   */\n  ;\n\n  _proto.addChild = function addChild(child, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var className = this.constructor.name;\n    log$1.warn(\"Adding an actionable (user controllable) child to a Button (\" + className + \") is not supported; use a ClickableComponent instead.\"); // Avoid the error message generated by ClickableComponent's addChild method\n\n    return Component$1.prototype.addChild.call(this, child, options);\n  }\n  /**\n   * Enable the `Button` element so that it can be activated or clicked. Use this with\n   * {@link Button#disable}.\n   */\n  ;\n\n  _proto.enable = function enable() {\n    _ClickableComponent.prototype.enable.call(this);\n\n    this.el_.removeAttribute('disabled');\n  }\n  /**\n   * Disable the `Button` element so that it cannot be activated or clicked. Use this with\n   * {@link Button#enable}.\n   */\n  ;\n\n  _proto.disable = function disable() {\n    _ClickableComponent.prototype.disable.call(this);\n\n    this.el_.setAttribute('disabled', 'disabled');\n  }\n  /**\n   * This gets called when a `Button` has focus and `keydown` is triggered via a key\n   * press.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to get called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Ignore Space or Enter key operation, which is handled by the browser for\n    // a button - though not for its super class, ClickableComponent. Also,\n    // prevent the event from propagating through the DOM and triggering Player\n    // hotkeys. We do not preventDefault here because we _want_ the browser to\n    // handle it.\n    if (keycode.isEventKey(event, 'Space') || keycode.isEventKey(event, 'Enter')) {\n      event.stopPropagation();\n      return;\n    } // Pass keypress handling up for unsupported keys\n\n\n    _ClickableComponent.prototype.handleKeyDown.call(this, event);\n  };\n\n  return Button;\n}(ClickableComponent);\n\nComponent$1.registerComponent('Button', Button);\n/**\n * The initial play button that shows before the video has played. The hiding of the\n * `BigPlayButton` get done via CSS and `Player` states.\n *\n * @extends Button\n */\n\nvar BigPlayButton = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(BigPlayButton, _Button);\n\n  function BigPlayButton(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this;\n    _this.mouseused_ = false;\n\n    _this.on('mousedown', function (e) {\n      return _this.handleMouseDown(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object. Always returns 'vjs-big-play-button'.\n   */\n\n\n  var _proto = BigPlayButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return 'vjs-big-play-button';\n  }\n  /**\n   * This gets called when a `BigPlayButton` \"clicked\". See {@link ClickableComponent}\n   * for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    var playPromise = this.player_.play(); // exit early if clicked via the mouse\n\n    if (this.mouseused_ && event.clientX && event.clientY) {\n      var sourceIsEncrypted = this.player_.usingPlugin('eme') && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;\n      silencePromise(playPromise);\n\n      if (this.player_.tech(true) && // We've observed a bug in IE and Edge when playing back DRM content where\n      // calling .focus() on the video element causes the video to go black,\n      // so we avoid it in that specific case\n      !((IE_VERSION || IS_EDGE) && sourceIsEncrypted)) {\n        this.player_.tech(true).focus();\n      }\n\n      return;\n    }\n\n    var cb = this.player_.getChild('controlBar');\n    var playToggle = cb && cb.getChild('playToggle');\n\n    if (!playToggle) {\n      this.player_.tech(true).focus();\n      return;\n    }\n\n    var playFocus = function playFocus() {\n      return playToggle.focus();\n    };\n\n    if (isPromise(playPromise)) {\n      playPromise.then(playFocus, function () {});\n    } else {\n      this.setTimeout(playFocus, 1);\n    }\n  };\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    this.mouseused_ = false;\n\n    _Button.prototype.handleKeyDown.call(this, event);\n  };\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    this.mouseused_ = true;\n  };\n\n  return BigPlayButton;\n}(Button);\n/**\n * The text that should display over the `BigPlayButton`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n */\n\n\nBigPlayButton.prototype.controlText_ = 'Play Video';\nComponent$1.registerComponent('BigPlayButton', BigPlayButton);\n/**\n * The `CloseButton` is a `{@link Button}` that fires a `close` event when\n * it gets clicked.\n *\n * @extends Button\n */\n\nvar CloseButton = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(CloseButton, _Button);\n  /**\n  * Creates an instance of the this class.\n  *\n  * @param  {Player} player\n  *         The `Player` that this class should be attached to.\n  *\n  * @param  {Object} [options]\n  *         The key/value store of player options.\n  */\n\n\n  function CloseButton(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this;\n\n    _this.controlText(options && options.controlText || _this.localize('Close'));\n\n    return _this;\n  }\n  /**\n  * Builds the default DOM `className`.\n  *\n  * @return {string}\n  *         The DOM `className` for this object.\n  */\n\n\n  var _proto = CloseButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-close-button \" + _Button.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * This gets called when a `CloseButton` gets clicked. See\n   * {@link ClickableComponent#handleClick} for more information on when\n   * this will be triggered\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   * @fires CloseButton#close\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    /**\n     * Triggered when the a `CloseButton` is clicked.\n     *\n     * @event CloseButton#close\n     * @type {EventTarget~Event}\n     *\n     * @property {boolean} [bubbles=false]\n     *           set to false so that the close event does not\n     *           bubble up to parents if there is no listener\n     */\n    this.trigger({\n      type: 'close',\n      bubbles: false\n    });\n  }\n  /**\n   * Event handler that is called when a `CloseButton` receives a\n   * `keydown` event.\n   *\n   * By default, if the key is Esc, it will trigger a `click` event.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Esc button will trigger `click` event\n    if (keycode.isEventKey(event, 'Esc')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.trigger('click');\n    } else {\n      // Pass keypress handling up for unsupported keys\n      _Button.prototype.handleKeyDown.call(this, event);\n    }\n  };\n\n  return CloseButton;\n}(Button);\n\nComponent$1.registerComponent('CloseButton', CloseButton);\n/**\n * Button to toggle between play and pause.\n *\n * @extends Button\n */\n\nvar PlayToggle = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(PlayToggle, _Button);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function PlayToggle(player, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _Button.call(this, player, options) || this; // show or hide replay icon\n\n    options.replay = options.replay === undefined || options.replay;\n\n    _this.on(player, 'play', function (e) {\n      return _this.handlePlay(e);\n    });\n\n    _this.on(player, 'pause', function (e) {\n      return _this.handlePause(e);\n    });\n\n    if (options.replay) {\n      _this.on(player, 'ended', function (e) {\n        return _this.handleEnded(e);\n      });\n    }\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = PlayToggle.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-play-control \" + _Button.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * This gets called when an `PlayToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    if (this.player_.paused()) {\n      silencePromise(this.player_.play());\n    } else {\n      this.player_.pause();\n    }\n  }\n  /**\n   * This gets called once after the video has ended and the user seeks so that\n   * we can change the replay button back to a play button.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#seeked\n   */\n  ;\n\n  _proto.handleSeeked = function handleSeeked(event) {\n    this.removeClass('vjs-ended');\n\n    if (this.player_.paused()) {\n      this.handlePause(event);\n    } else {\n      this.handlePlay(event);\n    }\n  }\n  /**\n   * Add the vjs-playing class to the element so it can change appearance.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#play\n   */\n  ;\n\n  _proto.handlePlay = function handlePlay(event) {\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-paused');\n    this.addClass('vjs-playing'); // change the button text to \"Pause\"\n\n    this.controlText('Pause');\n  }\n  /**\n   * Add the vjs-paused class to the element so it can change appearance.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#pause\n   */\n  ;\n\n  _proto.handlePause = function handlePause(event) {\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-paused'); // change the button text to \"Play\"\n\n    this.controlText('Play');\n  }\n  /**\n   * Add the vjs-ended class to the element so it can change appearance\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#ended\n   */\n  ;\n\n  _proto.handleEnded = function handleEnded(event) {\n    var _this2 = this;\n\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-ended'); // change the button text to \"Replay\"\n\n    this.controlText('Replay'); // on the next seek remove the replay button\n\n    this.one(this.player_, 'seeked', function (e) {\n      return _this2.handleSeeked(e);\n    });\n  };\n\n  return PlayToggle;\n}(Button);\n/**\n * The text that should display over the `PlayToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlayToggle.prototype.controlText_ = 'Play';\nComponent$1.registerComponent('PlayToggle', PlayToggle);\n/**\n * @file format-time.js\n * @module format-time\n */\n\n/**\n * Format seconds as a time string, H:MM:SS or M:SS. Supplying a guide (in\n * seconds) will force a number of leading zeros to cover the length of the\n * guide.\n *\n * @private\n * @param  {number} seconds\n *         Number of seconds to be turned into a string\n *\n * @param  {number} guide\n *         Number (in seconds) to model the string after\n *\n * @return {string}\n *         Time formatted as H:MM:SS or M:SS\n */\n\nvar defaultImplementation = function defaultImplementation(seconds, guide) {\n  seconds = seconds < 0 ? 0 : seconds;\n  var s = Math.floor(seconds % 60);\n  var m = Math.floor(seconds / 60 % 60);\n  var h = Math.floor(seconds / 3600);\n  var gm = Math.floor(guide / 60 % 60);\n  var gh = Math.floor(guide / 3600); // handle invalid times\n\n  if (isNaN(seconds) || seconds === Infinity) {\n    // '-' is false for all relational operators (e.g. <, >=) so this setting\n    // will add the minimum number of fields specified by the guide\n    h = m = s = '-';\n  } // Check if we need to show hours\n\n\n  h = h > 0 || gh > 0 ? h + ':' : ''; // If hours are showing, we may need to add a leading zero.\n  // Always show at least one digit of minutes.\n\n  m = ((h || gm >= 10) && m < 10 ? '0' + m : m) + ':'; // Check if leading zero is need for seconds\n\n  s = s < 10 ? '0' + s : s;\n  return h + m + s;\n}; // Internal pointer to the current implementation.\n\n\nvar implementation = defaultImplementation;\n/**\n * Replaces the default formatTime implementation with a custom implementation.\n *\n * @param {Function} customImplementation\n *        A function which will be used in place of the default formatTime\n *        implementation. Will receive the current time in seconds and the\n *        guide (in seconds) as arguments.\n */\n\nfunction setFormatTime(customImplementation) {\n  implementation = customImplementation;\n}\n/**\n * Resets formatTime to the default implementation.\n */\n\n\nfunction resetFormatTime() {\n  implementation = defaultImplementation;\n}\n/**\n * Delegates to either the default time formatting function or a custom\n * function supplied via `setFormatTime`.\n *\n * Formats seconds as a time string (H:MM:SS or M:SS). Supplying a\n * guide (in seconds) will force a number of leading zeros to cover the\n * length of the guide.\n *\n * @static\n * @example  formatTime(125, 600) === \"02:05\"\n * @param    {number} seconds\n *           Number of seconds to be turned into a string\n *\n * @param    {number} guide\n *           Number (in seconds) to model the string after\n *\n * @return   {string}\n *           Time formatted as H:MM:SS or M:SS\n */\n\n\nfunction formatTime(seconds, guide) {\n  if (guide === void 0) {\n    guide = seconds;\n  }\n\n  return implementation(seconds, guide);\n}\n/**\n * Displays time information about the video\n *\n * @extends Component\n */\n\n\nvar TimeDisplay = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TimeDisplay, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function TimeDisplay(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    _this.on(player, ['timeupdate', 'ended'], function (e) {\n      return _this.updateContent(e);\n    });\n\n    _this.updateTextNode_();\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = TimeDisplay.prototype;\n\n  _proto.createEl = function createEl$1() {\n    var className = this.buildCSSClass();\n\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: className + \" vjs-time-control vjs-control\"\n    });\n\n    var span = createEl('span', {\n      className: 'vjs-control-text',\n      textContent: this.localize(this.labelText_) + \"\\xA0\"\n    }, {\n      role: 'presentation'\n    });\n    el.appendChild(span);\n    this.contentEl_ = createEl('span', {\n      className: className + \"-display\"\n    }, {\n      // tell screen readers not to automatically read the time as it changes\n      'aria-live': 'off',\n      // span elements have no implicit role, but some screen readers (notably VoiceOver)\n      // treat them as a break between items in the DOM when using arrow keys\n      // (or left-to-right swipes on iOS) to read contents of a page. Using\n      // role='presentation' causes VoiceOver to NOT treat this span as a break.\n      'role': 'presentation'\n    });\n    el.appendChild(this.contentEl_);\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    this.contentEl_ = null;\n    this.textNode_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Updates the time display text node with a new time\n   *\n   * @param {number} [time=0] the time to update to\n   *\n   * @private\n   */\n  ;\n\n  _proto.updateTextNode_ = function updateTextNode_(time) {\n    var _this2 = this;\n\n    if (time === void 0) {\n      time = 0;\n    }\n\n    time = formatTime(time);\n\n    if (this.formattedTime_ === time) {\n      return;\n    }\n\n    this.formattedTime_ = time;\n    this.requestNamedAnimationFrame('TimeDisplay#updateTextNode_', function () {\n      if (!_this2.contentEl_) {\n        return;\n      }\n\n      var oldNode = _this2.textNode_;\n\n      if (oldNode && _this2.contentEl_.firstChild !== oldNode) {\n        oldNode = null;\n        log$1.warn('TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.');\n      }\n\n      _this2.textNode_ = document.createTextNode(_this2.formattedTime_);\n\n      if (!_this2.textNode_) {\n        return;\n      }\n\n      if (oldNode) {\n        _this2.contentEl_.replaceChild(_this2.textNode_, oldNode);\n      } else {\n        _this2.contentEl_.appendChild(_this2.textNode_);\n      }\n    });\n  }\n  /**\n   * To be filled out in the child class, should update the displayed time\n   * in accordance with the fact that the current time has changed.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate`  event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   */\n  ;\n\n  _proto.updateContent = function updateContent(event) {};\n\n  return TimeDisplay;\n}(Component$1);\n/**\n * The text that is added to the `TimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nTimeDisplay.prototype.labelText_ = 'Time';\n/**\n * The text that should display over the `TimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\n\nTimeDisplay.prototype.controlText_ = 'Time';\nComponent$1.registerComponent('TimeDisplay', TimeDisplay);\n/**\n * Displays the current time\n *\n * @extends Component\n */\n\nvar CurrentTimeDisplay = /*#__PURE__*/function (_TimeDisplay) {\n  _inheritsLoose(CurrentTimeDisplay, _TimeDisplay);\n\n  function CurrentTimeDisplay() {\n    return _TimeDisplay.apply(this, arguments) || this;\n  }\n\n  var _proto = CurrentTimeDisplay.prototype;\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return 'vjs-current-time';\n  }\n  /**\n   * Update current time display\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` event that caused this function to run.\n   *\n   * @listens Player#timeupdate\n   */\n  ;\n\n  _proto.updateContent = function updateContent(event) {\n    // Allows for smooth scrubbing, when player can't keep up.\n    var time;\n\n    if (this.player_.ended()) {\n      time = this.player_.duration();\n    } else {\n      time = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n    }\n\n    this.updateTextNode_(time);\n  };\n\n  return CurrentTimeDisplay;\n}(TimeDisplay);\n/**\n * The text that is added to the `CurrentTimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nCurrentTimeDisplay.prototype.labelText_ = 'Current Time';\n/**\n * The text that should display over the `CurrentTimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\n\nCurrentTimeDisplay.prototype.controlText_ = 'Current Time';\nComponent$1.registerComponent('CurrentTimeDisplay', CurrentTimeDisplay);\n/**\n * Displays the duration\n *\n * @extends Component\n */\n\nvar DurationDisplay = /*#__PURE__*/function (_TimeDisplay) {\n  _inheritsLoose(DurationDisplay, _TimeDisplay);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function DurationDisplay(player, options) {\n    var _this;\n\n    _this = _TimeDisplay.call(this, player, options) || this;\n\n    var updateContent = function updateContent(e) {\n      return _this.updateContent(e);\n    }; // we do not want to/need to throttle duration changes,\n    // as they should always display the changed duration as\n    // it has changed\n\n\n    _this.on(player, 'durationchange', updateContent); // Listen to loadstart because the player duration is reset when a new media element is loaded,\n    // but the durationchange on the user agent will not fire.\n    // @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}\n\n\n    _this.on(player, 'loadstart', updateContent); // Also listen for timeupdate (in the parent) and loadedmetadata because removing those\n    // listeners could have broken dependent applications/libraries. These\n    // can likely be removed for 7.0.\n\n\n    _this.on(player, 'loadedmetadata', updateContent);\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = DurationDisplay.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return 'vjs-duration';\n  }\n  /**\n   * Update duration time display.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `durationchange`, `timeupdate`, or `loadedmetadata` event that caused\n   *        this function to be called.\n   *\n   * @listens Player#durationchange\n   * @listens Player#timeupdate\n   * @listens Player#loadedmetadata\n   */\n  ;\n\n  _proto.updateContent = function updateContent(event) {\n    var duration = this.player_.duration();\n    this.updateTextNode_(duration);\n  };\n\n  return DurationDisplay;\n}(TimeDisplay);\n/**\n * The text that is added to the `DurationDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nDurationDisplay.prototype.labelText_ = 'Duration';\n/**\n * The text that should display over the `DurationDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\n\nDurationDisplay.prototype.controlText_ = 'Duration';\nComponent$1.registerComponent('DurationDisplay', DurationDisplay);\n/**\n * The separator between the current time and duration.\n * Can be hidden if it's not needed in the design.\n *\n * @extends Component\n */\n\nvar TimeDivider = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TimeDivider, _Component);\n\n  function TimeDivider() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = TimeDivider.prototype;\n  /**\n   * Create the component's DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n  _proto.createEl = function createEl() {\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-time-control vjs-time-divider'\n    }, {\n      // this element and its contents can be hidden from assistive techs since\n      // it is made extraneous by the announcement of the control text\n      // for the current time and duration displays\n      'aria-hidden': true\n    });\n\n    var div = _Component.prototype.createEl.call(this, 'div');\n\n    var span = _Component.prototype.createEl.call(this, 'span', {\n      textContent: '/'\n    });\n\n    div.appendChild(span);\n    el.appendChild(div);\n    return el;\n  };\n\n  return TimeDivider;\n}(Component$1);\n\nComponent$1.registerComponent('TimeDivider', TimeDivider);\n/**\n * Displays the time left in the video\n *\n * @extends Component\n */\n\nvar RemainingTimeDisplay = /*#__PURE__*/function (_TimeDisplay) {\n  _inheritsLoose(RemainingTimeDisplay, _TimeDisplay);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function RemainingTimeDisplay(player, options) {\n    var _this;\n\n    _this = _TimeDisplay.call(this, player, options) || this;\n\n    _this.on(player, 'durationchange', function (e) {\n      return _this.updateContent(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = RemainingTimeDisplay.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return 'vjs-remaining-time';\n  }\n  /**\n   * Create the `Component`'s DOM element with the \"minus\" characted prepend to the time\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl$1() {\n    var el = _TimeDisplay.prototype.createEl.call(this);\n\n    if (this.options_.displayNegative !== false) {\n      el.insertBefore(createEl('span', {}, {\n        'aria-hidden': true\n      }, '-'), this.contentEl_);\n    }\n\n    return el;\n  }\n  /**\n   * Update remaining time display.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` or `durationchange` event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   * @listens Player#durationchange\n   */\n  ;\n\n  _proto.updateContent = function updateContent(event) {\n    if (typeof this.player_.duration() !== 'number') {\n      return;\n    }\n\n    var time; // @deprecated We should only use remainingTimeDisplay\n    // as of video.js 7\n\n    if (this.player_.ended()) {\n      time = 0;\n    } else if (this.player_.remainingTimeDisplay) {\n      time = this.player_.remainingTimeDisplay();\n    } else {\n      time = this.player_.remainingTime();\n    }\n\n    this.updateTextNode_(time);\n  };\n\n  return RemainingTimeDisplay;\n}(TimeDisplay);\n/**\n * The text that is added to the `RemainingTimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nRemainingTimeDisplay.prototype.labelText_ = 'Remaining Time';\n/**\n * The text that should display over the `RemainingTimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\n\nRemainingTimeDisplay.prototype.controlText_ = 'Remaining Time';\nComponent$1.registerComponent('RemainingTimeDisplay', RemainingTimeDisplay);\n/**\n * Displays the live indicator when duration is Infinity.\n *\n * @extends Component\n */\n\nvar LiveDisplay = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(LiveDisplay, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function LiveDisplay(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    _this.updateShowing();\n\n    _this.on(_this.player(), 'durationchange', function (e) {\n      return _this.updateShowing(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = LiveDisplay.prototype;\n\n  _proto.createEl = function createEl$1() {\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-live-control vjs-control'\n    });\n\n    this.contentEl_ = createEl('div', {\n      className: 'vjs-live-display'\n    }, {\n      'aria-live': 'off'\n    });\n    this.contentEl_.appendChild(createEl('span', {\n      className: 'vjs-control-text',\n      textContent: this.localize('Stream Type') + \"\\xA0\"\n    }));\n    this.contentEl_.appendChild(document.createTextNode(this.localize('LIVE')));\n    el.appendChild(this.contentEl_);\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    this.contentEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Check the duration to see if the LiveDisplay should be showing or not. Then show/hide\n   * it accordingly\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#durationchange} event that caused this function to run.\n   *\n   * @listens Player#durationchange\n   */\n  ;\n\n  _proto.updateShowing = function updateShowing(event) {\n    if (this.player().duration() === Infinity) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  };\n\n  return LiveDisplay;\n}(Component$1);\n\nComponent$1.registerComponent('LiveDisplay', LiveDisplay);\n/**\n * Displays the live indicator when duration is Infinity.\n *\n * @extends Component\n */\n\nvar SeekToLive = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(SeekToLive, _Button);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function SeekToLive(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this;\n\n    _this.updateLiveEdgeStatus();\n\n    if (_this.player_.liveTracker) {\n      _this.updateLiveEdgeStatusHandler_ = function (e) {\n        return _this.updateLiveEdgeStatus(e);\n      };\n\n      _this.on(_this.player_.liveTracker, 'liveedgechange', _this.updateLiveEdgeStatusHandler_);\n    }\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = SeekToLive.prototype;\n\n  _proto.createEl = function createEl$1() {\n    var el = _Button.prototype.createEl.call(this, 'button', {\n      className: 'vjs-seek-to-live-control vjs-control'\n    });\n\n    this.textEl_ = createEl('span', {\n      className: 'vjs-seek-to-live-text',\n      textContent: this.localize('LIVE')\n    }, {\n      'aria-hidden': 'true'\n    });\n    el.appendChild(this.textEl_);\n    return el;\n  }\n  /**\n   * Update the state of this button if we are at the live edge\n   * or not\n   */\n  ;\n\n  _proto.updateLiveEdgeStatus = function updateLiveEdgeStatus() {\n    // default to live edge\n    if (!this.player_.liveTracker || this.player_.liveTracker.atLiveEdge()) {\n      this.setAttribute('aria-disabled', true);\n      this.addClass('vjs-at-live-edge');\n      this.controlText('Seek to live, currently playing live');\n    } else {\n      this.setAttribute('aria-disabled', false);\n      this.removeClass('vjs-at-live-edge');\n      this.controlText('Seek to live, currently behind live');\n    }\n  }\n  /**\n   * On click bring us as near to the live point as possible.\n   * This requires that we wait for the next `live-seekable-change`\n   * event which will happen every segment length seconds.\n   */\n  ;\n\n  _proto.handleClick = function handleClick() {\n    this.player_.liveTracker.seekToLiveEdge();\n  }\n  /**\n   * Dispose of the element and stop tracking\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    if (this.player_.liveTracker) {\n      this.off(this.player_.liveTracker, 'liveedgechange', this.updateLiveEdgeStatusHandler_);\n    }\n\n    this.textEl_ = null;\n\n    _Button.prototype.dispose.call(this);\n  };\n\n  return SeekToLive;\n}(Button);\n\nSeekToLive.prototype.controlText_ = 'Seek to live, currently playing live';\nComponent$1.registerComponent('SeekToLive', SeekToLive);\n/**\n * Keep a number between a min and a max value\n *\n * @param {number} number\n *        The number to clamp\n *\n * @param {number} min\n *        The minimum value\n * @param {number} max\n *        The maximum value\n *\n * @return {number}\n *         the clamped number\n */\n\nvar clamp = function clamp(number, min, max) {\n  number = Number(number);\n  return Math.min(max, Math.max(min, isNaN(number) ? min : number));\n};\n/**\n * The base functionality for a slider. Can be vertical or horizontal.\n * For instance the volume bar or the seek bar on a video is a slider.\n *\n * @extends Component\n */\n\n\nvar Slider = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Slider, _Component);\n  /**\n  * Create an instance of this class\n  *\n  * @param {Player} player\n  *        The `Player` that this class should be attached to.\n  *\n  * @param {Object} [options]\n  *        The key/value store of player options.\n  */\n\n\n  function Slider(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    _this.handleMouseDown_ = function (e) {\n      return _this.handleMouseDown(e);\n    };\n\n    _this.handleMouseUp_ = function (e) {\n      return _this.handleMouseUp(e);\n    };\n\n    _this.handleKeyDown_ = function (e) {\n      return _this.handleKeyDown(e);\n    };\n\n    _this.handleClick_ = function (e) {\n      return _this.handleClick(e);\n    };\n\n    _this.handleMouseMove_ = function (e) {\n      return _this.handleMouseMove(e);\n    };\n\n    _this.update_ = function (e) {\n      return _this.update(e);\n    }; // Set property names to bar to match with the child Slider class is looking for\n\n\n    _this.bar = _this.getChild(_this.options_.barName); // Set a horizontal or vertical class on the slider depending on the slider type\n\n    _this.vertical(!!_this.options_.vertical);\n\n    _this.enable();\n\n    return _this;\n  }\n  /**\n   * Are controls are currently enabled for this slider or not.\n   *\n   * @return {boolean}\n   *         true if controls are enabled, false otherwise\n   */\n\n\n  var _proto = Slider.prototype;\n\n  _proto.enabled = function enabled() {\n    return this.enabled_;\n  }\n  /**\n   * Enable controls for this slider if they are disabled\n   */\n  ;\n\n  _proto.enable = function enable() {\n    if (this.enabled()) {\n      return;\n    }\n\n    this.on('mousedown', this.handleMouseDown_);\n    this.on('touchstart', this.handleMouseDown_);\n    this.on('keydown', this.handleKeyDown_);\n    this.on('click', this.handleClick_); // TODO: deprecated, controlsvisible does not seem to be fired\n\n    this.on(this.player_, 'controlsvisible', this.update);\n\n    if (this.playerEvent) {\n      this.on(this.player_, this.playerEvent, this.update);\n    }\n\n    this.removeClass('disabled');\n    this.setAttribute('tabindex', 0);\n    this.enabled_ = true;\n  }\n  /**\n   * Disable controls for this slider if they are enabled\n   */\n  ;\n\n  _proto.disable = function disable() {\n    if (!this.enabled()) {\n      return;\n    }\n\n    var doc = this.bar.el_.ownerDocument;\n    this.off('mousedown', this.handleMouseDown_);\n    this.off('touchstart', this.handleMouseDown_);\n    this.off('keydown', this.handleKeyDown_);\n    this.off('click', this.handleClick_);\n    this.off(this.player_, 'controlsvisible', this.update_);\n    this.off(doc, 'mousemove', this.handleMouseMove_);\n    this.off(doc, 'mouseup', this.handleMouseUp_);\n    this.off(doc, 'touchmove', this.handleMouseMove_);\n    this.off(doc, 'touchend', this.handleMouseUp_);\n    this.removeAttribute('tabindex');\n    this.addClass('disabled');\n\n    if (this.playerEvent) {\n      this.off(this.player_, this.playerEvent, this.update);\n    }\n\n    this.enabled_ = false;\n  }\n  /**\n   * Create the `Slider`s DOM element.\n   *\n   * @param {string} type\n   *        Type of element to create.\n   *\n   * @param {Object} [props={}]\n   *        List of properties in Object form.\n   *\n   * @param {Object} [attributes={}]\n   *        list of attributes in Object form.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl(type, props, attributes) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (attributes === void 0) {\n      attributes = {};\n    } // Add the slider element class to all sub classes\n\n\n    props.className = props.className + ' vjs-slider';\n    props = assign({\n      tabIndex: 0\n    }, props);\n    attributes = assign({\n      'role': 'slider',\n      'aria-valuenow': 0,\n      'aria-valuemin': 0,\n      'aria-valuemax': 100,\n      'tabIndex': 0\n    }, attributes);\n    return _Component.prototype.createEl.call(this, type, props, attributes);\n  }\n  /**\n   * Handle `mousedown` or `touchstart` events on the `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   * @fires Slider#slideractive\n   */\n  ;\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.bar.el_.ownerDocument;\n\n    if (event.type === 'mousedown') {\n      event.preventDefault();\n    } // Do not call preventDefault() on touchstart in Chrome\n    // to avoid console warnings. Use a 'touch-action: none' style\n    // instead to prevent unintented scrolling.\n    // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n\n\n    if (event.type === 'touchstart' && !IS_CHROME) {\n      event.preventDefault();\n    }\n\n    blockTextSelection();\n    this.addClass('vjs-sliding');\n    /**\n     * Triggered when the slider is in an active state\n     *\n     * @event Slider#slideractive\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('slideractive');\n    this.on(doc, 'mousemove', this.handleMouseMove_);\n    this.on(doc, 'mouseup', this.handleMouseUp_);\n    this.on(doc, 'touchmove', this.handleMouseMove_);\n    this.on(doc, 'touchend', this.handleMouseUp_);\n    this.handleMouseMove(event, true);\n  }\n  /**\n   * Handle the `mousemove`, `touchmove`, and `mousedown` events on this `Slider`.\n   * The `mousemove` and `touchmove` events will only only trigger this function during\n   * `mousedown` and `touchstart`. This is due to {@link Slider#handleMouseDown} and\n   * {@link Slider#handleMouseUp}.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown`, `mousemove`, `touchstart`, or `touchmove` event that triggered\n   *        this function\n   * @param {boolean} mouseDown this is a flag that should be set to true if `handleMouseMove` is called directly. It allows us to skip things that should not happen if coming from mouse down but should happen on regular mouse move handler. Defaults to false.\n   *\n   * @listens mousemove\n   * @listens touchmove\n   */\n  ;\n\n  _proto.handleMouseMove = function handleMouseMove(event) {}\n  /**\n   * Handle `mouseup` or `touchend` events on the `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   * @fires Slider#sliderinactive\n   */\n  ;\n\n  _proto.handleMouseUp = function handleMouseUp() {\n    var doc = this.bar.el_.ownerDocument;\n    unblockTextSelection();\n    this.removeClass('vjs-sliding');\n    /**\n     * Triggered when the slider is no longer in an active state.\n     *\n     * @event Slider#sliderinactive\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('sliderinactive');\n    this.off(doc, 'mousemove', this.handleMouseMove_);\n    this.off(doc, 'mouseup', this.handleMouseUp_);\n    this.off(doc, 'touchmove', this.handleMouseMove_);\n    this.off(doc, 'touchend', this.handleMouseUp_);\n    this.update();\n  }\n  /**\n   * Update the progress bar of the `Slider`.\n   *\n   * @return {number}\n   *          The percentage of progress the progress bar represents as a\n   *          number from 0 to 1.\n   */\n  ;\n\n  _proto.update = function update() {\n    var _this2 = this; // In VolumeBar init we have a setTimeout for update that pops and update\n    // to the end of the execution stack. The player is destroyed before then\n    // update will cause an error\n    // If there's no bar...\n\n\n    if (!this.el_ || !this.bar) {\n      return;\n    } // clamp progress between 0 and 1\n    // and only round to four decimal places, as we round to two below\n\n\n    var progress = this.getProgress();\n\n    if (progress === this.progress_) {\n      return progress;\n    }\n\n    this.progress_ = progress;\n    this.requestNamedAnimationFrame('Slider#update', function () {\n      // Set the new bar width or height\n      var sizeKey = _this2.vertical() ? 'height' : 'width'; // Convert to a percentage for css value\n\n      _this2.bar.el().style[sizeKey] = (progress * 100).toFixed(2) + '%';\n    });\n    return progress;\n  }\n  /**\n   * Get the percentage of the bar that should be filled\n   * but clamped and rounded.\n   *\n   * @return {number}\n   *         percentage filled that the slider is\n   */\n  ;\n\n  _proto.getProgress = function getProgress() {\n    return Number(clamp(this.getPercent(), 0, 1).toFixed(4));\n  }\n  /**\n   * Calculate distance for slider\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run.\n   *\n   * @return {number}\n   *         The current position of the Slider.\n   *         - position.x for vertical `Slider`s\n   *         - position.y for horizontal `Slider`s\n   */\n  ;\n\n  _proto.calculateDistance = function calculateDistance(event) {\n    var position = getPointerPosition(this.el_, event);\n\n    if (this.vertical()) {\n      return position.y;\n    }\n\n    return position.x;\n  }\n  /**\n   * Handle a `keydown` event on the `Slider`. Watches for left, rigth, up, and down\n   * arrow keys. This function will only be called when the slider has focus. See\n   * {@link Slider#handleFocus} and {@link Slider#handleBlur}.\n   *\n   * @param {EventTarget~Event} event\n   *        the `keydown` event that caused this function to run.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Left and Down Arrows\n    if (keycode.isEventKey(event, 'Left') || keycode.isEventKey(event, 'Down')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.stepBack(); // Up and Right Arrows\n    } else if (keycode.isEventKey(event, 'Right') || keycode.isEventKey(event, 'Up')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.stepForward();\n    } else {\n      // Pass keydown handling up for unsupported keys\n      _Component.prototype.handleKeyDown.call(this, event);\n    }\n  }\n  /**\n   * Listener for click events on slider, used to prevent clicks\n   *   from bubbling up to parent elements like button menus.\n   *\n   * @param {Object} event\n   *        Event that caused this object to run\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  /**\n   * Get/set if slider is horizontal for vertical\n   *\n   * @param {boolean} [bool]\n   *        - true if slider is vertical,\n   *        - false is horizontal\n   *\n   * @return {boolean}\n   *         - true if slider is vertical, and getting\n   *         - false if the slider is horizontal, and getting\n   */\n  ;\n\n  _proto.vertical = function vertical(bool) {\n    if (bool === undefined) {\n      return this.vertical_ || false;\n    }\n\n    this.vertical_ = !!bool;\n\n    if (this.vertical_) {\n      this.addClass('vjs-slider-vertical');\n    } else {\n      this.addClass('vjs-slider-horizontal');\n    }\n  };\n\n  return Slider;\n}(Component$1);\n\nComponent$1.registerComponent('Slider', Slider);\n\nvar percentify = function percentify(time, end) {\n  return clamp(time / end * 100, 0, 100).toFixed(2) + '%';\n};\n/**\n * Shows loading progress\n *\n * @extends Component\n */\n\n\nvar LoadProgressBar = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(LoadProgressBar, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function LoadProgressBar(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.partEls_ = [];\n\n    _this.on(player, 'progress', function (e) {\n      return _this.update(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = LoadProgressBar.prototype;\n\n  _proto.createEl = function createEl$1() {\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-load-progress'\n    });\n\n    var wrapper = createEl('span', {\n      className: 'vjs-control-text'\n    });\n    var loadedText = createEl('span', {\n      textContent: this.localize('Loaded')\n    });\n    var separator = document.createTextNode(': ');\n    this.percentageEl_ = createEl('span', {\n      className: 'vjs-control-text-loaded-percentage',\n      textContent: '0%'\n    });\n    el.appendChild(wrapper);\n    wrapper.appendChild(loadedText);\n    wrapper.appendChild(separator);\n    wrapper.appendChild(this.percentageEl_);\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    this.partEls_ = null;\n    this.percentageEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Update progress bar\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `progress` event that caused this function to run.\n   *\n   * @listens Player#progress\n   */\n  ;\n\n  _proto.update = function update(event) {\n    var _this2 = this;\n\n    this.requestNamedAnimationFrame('LoadProgressBar#update', function () {\n      var liveTracker = _this2.player_.liveTracker;\n\n      var buffered = _this2.player_.buffered();\n\n      var duration = liveTracker && liveTracker.isLive() ? liveTracker.seekableEnd() : _this2.player_.duration();\n\n      var bufferedEnd = _this2.player_.bufferedEnd();\n\n      var children = _this2.partEls_;\n      var percent = percentify(bufferedEnd, duration);\n\n      if (_this2.percent_ !== percent) {\n        // update the width of the progress bar\n        _this2.el_.style.width = percent; // update the control-text\n\n        textContent(_this2.percentageEl_, percent);\n        _this2.percent_ = percent;\n      } // add child elements to represent the individual buffered time ranges\n\n\n      for (var i = 0; i < buffered.length; i++) {\n        var start = buffered.start(i);\n        var end = buffered.end(i);\n        var part = children[i];\n\n        if (!part) {\n          part = _this2.el_.appendChild(createEl());\n          children[i] = part;\n        } //  only update if changed\n\n\n        if (part.dataset.start === start && part.dataset.end === end) {\n          continue;\n        }\n\n        part.dataset.start = start;\n        part.dataset.end = end; // set the percent based on the width of the progress bar (bufferedEnd)\n\n        part.style.left = percentify(start, bufferedEnd);\n        part.style.width = percentify(end - start, bufferedEnd);\n      } // remove unused buffered range elements\n\n\n      for (var _i = children.length; _i > buffered.length; _i--) {\n        _this2.el_.removeChild(children[_i - 1]);\n      }\n\n      children.length = buffered.length;\n    });\n  };\n\n  return LoadProgressBar;\n}(Component$1);\n\nComponent$1.registerComponent('LoadProgressBar', LoadProgressBar);\n/**\n * Time tooltips display a time above the progress bar.\n *\n * @extends Component\n */\n\nvar TimeTooltip = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(TimeTooltip, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function TimeTooltip(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.update = throttle(bind(_assertThisInitialized(_this), _this.update), UPDATE_REFRESH_INTERVAL);\n    return _this;\n  }\n  /**\n   * Create the time tooltip DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = TimeTooltip.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-time-tooltip'\n    }, {\n      'aria-hidden': 'true'\n    });\n  }\n  /**\n   * Updates the position of the time tooltip relative to the `SeekBar`.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n  ;\n\n  _proto.update = function update(seekBarRect, seekBarPoint, content) {\n    var tooltipRect = findPosition(this.el_);\n    var playerRect = getBoundingClientRect(this.player_.el());\n    var seekBarPointPx = seekBarRect.width * seekBarPoint; // do nothing if either rect isn't available\n    // for example, if the player isn't in the DOM for testing\n\n    if (!playerRect || !tooltipRect) {\n      return;\n    } // This is the space left of the `seekBarPoint` available within the bounds\n    // of the player. We calculate any gap between the left edge of the player\n    // and the left edge of the `SeekBar` and add the number of pixels in the\n    // `SeekBar` before hitting the `seekBarPoint`\n\n\n    var spaceLeftOfPoint = seekBarRect.left - playerRect.left + seekBarPointPx; // This is the space right of the `seekBarPoint` available within the bounds\n    // of the player. We calculate the number of pixels from the `seekBarPoint`\n    // to the right edge of the `SeekBar` and add to that any gap between the\n    // right edge of the `SeekBar` and the player.\n\n    var spaceRightOfPoint = seekBarRect.width - seekBarPointPx + (playerRect.right - seekBarRect.right); // This is the number of pixels by which the tooltip will need to be pulled\n    // further to the right to center it over the `seekBarPoint`.\n\n    var pullTooltipBy = tooltipRect.width / 2; // Adjust the `pullTooltipBy` distance to the left or right depending on\n    // the results of the space calculations above.\n\n    if (spaceLeftOfPoint < pullTooltipBy) {\n      pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n    } else if (spaceRightOfPoint < pullTooltipBy) {\n      pullTooltipBy = spaceRightOfPoint;\n    } // Due to the imprecision of decimal/ratio based calculations and varying\n    // rounding behaviors, there are cases where the spacing adjustment is off\n    // by a pixel or two. This adds insurance to these calculations.\n\n\n    if (pullTooltipBy < 0) {\n      pullTooltipBy = 0;\n    } else if (pullTooltipBy > tooltipRect.width) {\n      pullTooltipBy = tooltipRect.width;\n    } // prevent small width fluctuations within 0.4px from\n    // changing the value below.\n    // This really helps for live to prevent the play\n    // progress time tooltip from jittering\n\n\n    pullTooltipBy = Math.round(pullTooltipBy);\n    this.el_.style.right = \"-\" + pullTooltipBy + \"px\";\n    this.write(content);\n  }\n  /**\n   * Write the time to the tooltip DOM element.\n   *\n   * @param {string} content\n   *        The formatted time for the tooltip.\n   */\n  ;\n\n  _proto.write = function write(content) {\n    textContent(this.el_, content);\n  }\n  /**\n   * Updates the position of the time tooltip relative to the `SeekBar`.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   *\n   * @param {number} time\n   *        The time to update the tooltip to, not used during live playback\n   *\n   * @param {Function} cb\n   *        A function that will be called during the request animation frame\n   *        for tooltips that need to do additional animations from the default\n   */\n  ;\n\n  _proto.updateTime = function updateTime(seekBarRect, seekBarPoint, time, cb) {\n    var _this2 = this;\n\n    this.requestNamedAnimationFrame('TimeTooltip#updateTime', function () {\n      var content;\n\n      var duration = _this2.player_.duration();\n\n      if (_this2.player_.liveTracker && _this2.player_.liveTracker.isLive()) {\n        var liveWindow = _this2.player_.liveTracker.liveWindow();\n\n        var secondsBehind = liveWindow - seekBarPoint * liveWindow;\n        content = (secondsBehind < 1 ? '' : '-') + formatTime(secondsBehind, liveWindow);\n      } else {\n        content = formatTime(time, duration);\n      }\n\n      _this2.update(seekBarRect, seekBarPoint, content);\n\n      if (cb) {\n        cb();\n      }\n    });\n  };\n\n  return TimeTooltip;\n}(Component$1);\n\nComponent$1.registerComponent('TimeTooltip', TimeTooltip);\n/**\n * Used by {@link SeekBar} to display media playback progress as part of the\n * {@link ProgressControl}.\n *\n * @extends Component\n */\n\nvar PlayProgressBar = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(PlayProgressBar, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function PlayProgressBar(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.update = throttle(bind(_assertThisInitialized(_this), _this.update), UPDATE_REFRESH_INTERVAL);\n    return _this;\n  }\n  /**\n   * Create the the DOM element for this class.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = PlayProgressBar.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-play-progress vjs-slider-bar'\n    }, {\n      'aria-hidden': 'true'\n    });\n  }\n  /**\n   * Enqueues updates to its own DOM as well as the DOM of its\n   * {@link TimeTooltip} child.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n  ;\n\n  _proto.update = function update(seekBarRect, seekBarPoint) {\n    var timeTooltip = this.getChild('timeTooltip');\n\n    if (!timeTooltip) {\n      return;\n    }\n\n    var time = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n    timeTooltip.updateTime(seekBarRect, seekBarPoint, time);\n  };\n\n  return PlayProgressBar;\n}(Component$1);\n/**\n * Default options for {@link PlayProgressBar}.\n *\n * @type {Object}\n * @private\n */\n\n\nPlayProgressBar.prototype.options_ = {\n  children: []\n}; // Time tooltips should not be added to a player on mobile devices\n\nif (!IS_IOS && !IS_ANDROID) {\n  PlayProgressBar.prototype.options_.children.push('timeTooltip');\n}\n\nComponent$1.registerComponent('PlayProgressBar', PlayProgressBar);\n/**\n * The {@link MouseTimeDisplay} component tracks mouse movement over the\n * {@link ProgressControl}. It displays an indicator and a {@link TimeTooltip}\n * indicating the time which is represented by a given point in the\n * {@link ProgressControl}.\n *\n * @extends Component\n */\n\nvar MouseTimeDisplay = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(MouseTimeDisplay, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function MouseTimeDisplay(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.update = throttle(bind(_assertThisInitialized(_this), _this.update), UPDATE_REFRESH_INTERVAL);\n    return _this;\n  }\n  /**\n   * Create the DOM element for this class.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = MouseTimeDisplay.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-mouse-display'\n    });\n  }\n  /**\n   * Enqueues updates to its own DOM as well as the DOM of its\n   * {@link TimeTooltip} child.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n  ;\n\n  _proto.update = function update(seekBarRect, seekBarPoint) {\n    var _this2 = this;\n\n    var time = seekBarPoint * this.player_.duration();\n    this.getChild('timeTooltip').updateTime(seekBarRect, seekBarPoint, time, function () {\n      _this2.el_.style.left = seekBarRect.width * seekBarPoint + \"px\";\n    });\n  };\n\n  return MouseTimeDisplay;\n}(Component$1);\n/**\n * Default options for `MouseTimeDisplay`\n *\n * @type {Object}\n * @private\n */\n\n\nMouseTimeDisplay.prototype.options_ = {\n  children: ['timeTooltip']\n};\nComponent$1.registerComponent('MouseTimeDisplay', MouseTimeDisplay);\nvar STEP_SECONDS = 5; // The multiplier of STEP_SECONDS that PgUp/PgDown move the timeline.\n\nvar PAGE_KEY_MULTIPLIER = 12;\n/**\n * Seek bar and container for the progress bars. Uses {@link PlayProgressBar}\n * as its `bar`.\n *\n * @extends Slider\n */\n\nvar SeekBar = /*#__PURE__*/function (_Slider) {\n  _inheritsLoose(SeekBar, _Slider);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function SeekBar(player, options) {\n    var _this;\n\n    _this = _Slider.call(this, player, options) || this;\n\n    _this.setEventHandlers_();\n\n    return _this;\n  }\n  /**\n   * Sets the event handlers\n   *\n   * @private\n   */\n\n\n  var _proto = SeekBar.prototype;\n\n  _proto.setEventHandlers_ = function setEventHandlers_() {\n    var _this2 = this;\n\n    this.update_ = bind(this, this.update);\n    this.update = throttle(this.update_, UPDATE_REFRESH_INTERVAL);\n    this.on(this.player_, ['ended', 'durationchange', 'timeupdate'], this.update);\n\n    if (this.player_.liveTracker) {\n      this.on(this.player_.liveTracker, 'liveedgechange', this.update);\n    } // when playing, let's ensure we smoothly update the play progress bar\n    // via an interval\n\n\n    this.updateInterval = null;\n\n    this.enableIntervalHandler_ = function (e) {\n      return _this2.enableInterval_(e);\n    };\n\n    this.disableIntervalHandler_ = function (e) {\n      return _this2.disableInterval_(e);\n    };\n\n    this.on(this.player_, ['playing'], this.enableIntervalHandler_);\n    this.on(this.player_, ['ended', 'pause', 'waiting'], this.disableIntervalHandler_); // we don't need to update the play progress if the document is hidden,\n    // also, this causes the CPU to spike and eventually crash the page on IE11.\n\n    if ('hidden' in document && 'visibilityState' in document) {\n      this.on(document, 'visibilitychange', this.toggleVisibility_);\n    }\n  };\n\n  _proto.toggleVisibility_ = function toggleVisibility_(e) {\n    if (document.visibilityState === 'hidden') {\n      this.cancelNamedAnimationFrame('SeekBar#update');\n      this.cancelNamedAnimationFrame('Slider#update');\n      this.disableInterval_(e);\n    } else {\n      if (!this.player_.ended() && !this.player_.paused()) {\n        this.enableInterval_();\n      } // we just switched back to the page and someone may be looking, so, update ASAP\n\n\n      this.update();\n    }\n  };\n\n  _proto.enableInterval_ = function enableInterval_() {\n    if (this.updateInterval) {\n      return;\n    }\n\n    this.updateInterval = this.setInterval(this.update, UPDATE_REFRESH_INTERVAL);\n  };\n\n  _proto.disableInterval_ = function disableInterval_(e) {\n    if (this.player_.liveTracker && this.player_.liveTracker.isLive() && e && e.type !== 'ended') {\n      return;\n    }\n\n    if (!this.updateInterval) {\n      return;\n    }\n\n    this.clearInterval(this.updateInterval);\n    this.updateInterval = null;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    return _Slider.prototype.createEl.call(this, 'div', {\n      className: 'vjs-progress-holder'\n    }, {\n      'aria-label': this.localize('Progress Bar')\n    });\n  }\n  /**\n   * This function updates the play progress bar and accessibility\n   * attributes to whatever is passed in.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` or `ended` event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   *\n   * @return {number}\n   *          The current percent at a number from 0-1\n   */\n  ;\n\n  _proto.update = function update(event) {\n    var _this3 = this; // ignore updates while the tab is hidden\n\n\n    if (document.visibilityState === 'hidden') {\n      return;\n    }\n\n    var percent = _Slider.prototype.update.call(this);\n\n    this.requestNamedAnimationFrame('SeekBar#update', function () {\n      var currentTime = _this3.player_.ended() ? _this3.player_.duration() : _this3.getCurrentTime_();\n      var liveTracker = _this3.player_.liveTracker;\n\n      var duration = _this3.player_.duration();\n\n      if (liveTracker && liveTracker.isLive()) {\n        duration = _this3.player_.liveTracker.liveCurrentTime();\n      }\n\n      if (_this3.percent_ !== percent) {\n        // machine readable value of progress bar (percentage complete)\n        _this3.el_.setAttribute('aria-valuenow', (percent * 100).toFixed(2));\n\n        _this3.percent_ = percent;\n      }\n\n      if (_this3.currentTime_ !== currentTime || _this3.duration_ !== duration) {\n        // human readable value of progress bar (time complete)\n        _this3.el_.setAttribute('aria-valuetext', _this3.localize('progress bar timing: currentTime={1} duration={2}', [formatTime(currentTime, duration), formatTime(duration, duration)], '{1} of {2}'));\n\n        _this3.currentTime_ = currentTime;\n        _this3.duration_ = duration;\n      } // update the progress bar time tooltip with the current time\n\n\n      if (_this3.bar) {\n        _this3.bar.update(getBoundingClientRect(_this3.el()), _this3.getProgress());\n      }\n    });\n    return percent;\n  }\n  /**\n   * Prevent liveThreshold from causing seeks to seem like they\n   * are not happening from a user perspective.\n   *\n   * @param {number} ct\n   *        current time to seek to\n   */\n  ;\n\n  _proto.userSeek_ = function userSeek_(ct) {\n    if (this.player_.liveTracker && this.player_.liveTracker.isLive()) {\n      this.player_.liveTracker.nextSeekedFromUser();\n    }\n\n    this.player_.currentTime(ct);\n  }\n  /**\n   * Get the value of current time but allows for smooth scrubbing,\n   * when player can't keep up.\n   *\n   * @return {number}\n   *         The current time value to display\n   *\n   * @private\n   */\n  ;\n\n  _proto.getCurrentTime_ = function getCurrentTime_() {\n    return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n  }\n  /**\n   * Get the percentage of media played so far.\n   *\n   * @return {number}\n   *         The percentage of media played so far (0 to 1).\n   */\n  ;\n\n  _proto.getPercent = function getPercent() {\n    var currentTime = this.getCurrentTime_();\n    var percent;\n    var liveTracker = this.player_.liveTracker;\n\n    if (liveTracker && liveTracker.isLive()) {\n      percent = (currentTime - liveTracker.seekableStart()) / liveTracker.liveWindow(); // prevent the percent from changing at the live edge\n\n      if (liveTracker.atLiveEdge()) {\n        percent = 1;\n      }\n    } else {\n      percent = currentTime / this.player_.duration();\n    }\n\n    return percent;\n  }\n  /**\n   * Handle mouse down on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousedown` event that caused this to run.\n   *\n   * @listens mousedown\n   */\n  ;\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    } // Stop event propagation to prevent double fire in progress-control.js\n\n\n    event.stopPropagation();\n    this.videoWasPlaying = !this.player_.paused();\n    this.player_.pause();\n\n    _Slider.prototype.handleMouseDown.call(this, event);\n  }\n  /**\n   * Handle mouse move on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this to run.\n   * @param {boolean} mouseDown this is a flag that should be set to true if `handleMouseMove` is called directly. It allows us to skip things that should not happen if coming from mouse down but should happen on regular mouse move handler. Defaults to false\n   *\n   * @listens mousemove\n   */\n  ;\n\n  _proto.handleMouseMove = function handleMouseMove(event, mouseDown) {\n    if (mouseDown === void 0) {\n      mouseDown = false;\n    }\n\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    if (!mouseDown && !this.player_.scrubbing()) {\n      this.player_.scrubbing(true);\n    }\n\n    var newTime;\n    var distance = this.calculateDistance(event);\n    var liveTracker = this.player_.liveTracker;\n\n    if (!liveTracker || !liveTracker.isLive()) {\n      newTime = distance * this.player_.duration(); // Don't let video end while scrubbing.\n\n      if (newTime === this.player_.duration()) {\n        newTime = newTime - 0.1;\n      }\n    } else {\n      if (distance >= 0.99) {\n        liveTracker.seekToLiveEdge();\n        return;\n      }\n\n      var seekableStart = liveTracker.seekableStart();\n      var seekableEnd = liveTracker.liveCurrentTime();\n      newTime = seekableStart + distance * liveTracker.liveWindow(); // Don't let video end while scrubbing.\n\n      if (newTime >= seekableEnd) {\n        newTime = seekableEnd;\n      } // Compensate for precision differences so that currentTime is not less\n      // than seekable start\n\n\n      if (newTime <= seekableStart) {\n        newTime = seekableStart + 0.1;\n      } // On android seekableEnd can be Infinity sometimes,\n      // this will cause newTime to be Infinity, which is\n      // not a valid currentTime.\n\n\n      if (newTime === Infinity) {\n        return;\n      }\n    } // Set new time (tell player to seek to new time)\n\n\n    this.userSeek_(newTime);\n  };\n\n  _proto.enable = function enable() {\n    _Slider.prototype.enable.call(this);\n\n    var mouseTimeDisplay = this.getChild('mouseTimeDisplay');\n\n    if (!mouseTimeDisplay) {\n      return;\n    }\n\n    mouseTimeDisplay.show();\n  };\n\n  _proto.disable = function disable() {\n    _Slider.prototype.disable.call(this);\n\n    var mouseTimeDisplay = this.getChild('mouseTimeDisplay');\n\n    if (!mouseTimeDisplay) {\n      return;\n    }\n\n    mouseTimeDisplay.hide();\n  }\n  /**\n   * Handle mouse up on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mouseup` event that caused this to run.\n   *\n   * @listens mouseup\n   */\n  ;\n\n  _proto.handleMouseUp = function handleMouseUp(event) {\n    _Slider.prototype.handleMouseUp.call(this, event); // Stop event propagation to prevent double fire in progress-control.js\n\n\n    if (event) {\n      event.stopPropagation();\n    }\n\n    this.player_.scrubbing(false);\n    /**\n     * Trigger timeupdate because we're done seeking and the time has changed.\n     * This is particularly useful for if the player is paused to time the time displays.\n     *\n     * @event Tech#timeupdate\n     * @type {EventTarget~Event}\n     */\n\n    this.player_.trigger({\n      type: 'timeupdate',\n      target: this,\n      manuallyTriggered: true\n    });\n\n    if (this.videoWasPlaying) {\n      silencePromise(this.player_.play());\n    } else {\n      // We're done seeking and the time has changed.\n      // If the player is paused, make sure we display the correct time on the seek bar.\n      this.update_();\n    }\n  }\n  /**\n   * Move more quickly fast forward for keyboard-only users\n   */\n  ;\n\n  _proto.stepForward = function stepForward() {\n    this.userSeek_(this.player_.currentTime() + STEP_SECONDS);\n  }\n  /**\n   * Move more quickly rewind for keyboard-only users\n   */\n  ;\n\n  _proto.stepBack = function stepBack() {\n    this.userSeek_(this.player_.currentTime() - STEP_SECONDS);\n  }\n  /**\n   * Toggles the playback state of the player\n   * This gets called when enter or space is used on the seekbar\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called\n   *\n   */\n  ;\n\n  _proto.handleAction = function handleAction(event) {\n    if (this.player_.paused()) {\n      this.player_.play();\n    } else {\n      this.player_.pause();\n    }\n  }\n  /**\n   * Called when this SeekBar has focus and a key gets pressed down.\n   * Supports the following keys:\n   *\n   *   Space or Enter key fire a click event\n   *   Home key moves to start of the timeline\n   *   End key moves to end of the timeline\n   *   Digit \"0\" through \"9\" keys move to 0%, 10% ... 80%, 90% of the timeline\n   *   PageDown key moves back a larger step than ArrowDown\n   *   PageUp key moves forward a large step\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    var liveTracker = this.player_.liveTracker;\n\n    if (keycode.isEventKey(event, 'Space') || keycode.isEventKey(event, 'Enter')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.handleAction(event);\n    } else if (keycode.isEventKey(event, 'Home')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.userSeek_(0);\n    } else if (keycode.isEventKey(event, 'End')) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (liveTracker && liveTracker.isLive()) {\n        this.userSeek_(liveTracker.liveCurrentTime());\n      } else {\n        this.userSeek_(this.player_.duration());\n      }\n    } else if (/^[0-9]$/.test(keycode(event))) {\n      event.preventDefault();\n      event.stopPropagation();\n      var gotoFraction = (keycode.codes[keycode(event)] - keycode.codes['0']) * 10.0 / 100.0;\n\n      if (liveTracker && liveTracker.isLive()) {\n        this.userSeek_(liveTracker.seekableStart() + liveTracker.liveWindow() * gotoFraction);\n      } else {\n        this.userSeek_(this.player_.duration() * gotoFraction);\n      }\n    } else if (keycode.isEventKey(event, 'PgDn')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.userSeek_(this.player_.currentTime() - STEP_SECONDS * PAGE_KEY_MULTIPLIER);\n    } else if (keycode.isEventKey(event, 'PgUp')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.userSeek_(this.player_.currentTime() + STEP_SECONDS * PAGE_KEY_MULTIPLIER);\n    } else {\n      // Pass keydown handling up for unsupported keys\n      _Slider.prototype.handleKeyDown.call(this, event);\n    }\n  };\n\n  _proto.dispose = function dispose() {\n    this.disableInterval_();\n    this.off(this.player_, ['ended', 'durationchange', 'timeupdate'], this.update);\n\n    if (this.player_.liveTracker) {\n      this.off(this.player_.liveTracker, 'liveedgechange', this.update);\n    }\n\n    this.off(this.player_, ['playing'], this.enableIntervalHandler_);\n    this.off(this.player_, ['ended', 'pause', 'waiting'], this.disableIntervalHandler_); // we don't need to update the play progress if the document is hidden,\n    // also, this causes the CPU to spike and eventually crash the page on IE11.\n\n    if ('hidden' in document && 'visibilityState' in document) {\n      this.off(document, 'visibilitychange', this.toggleVisibility_);\n    }\n\n    _Slider.prototype.dispose.call(this);\n  };\n\n  return SeekBar;\n}(Slider);\n/**\n * Default options for the `SeekBar`\n *\n * @type {Object}\n * @private\n */\n\n\nSeekBar.prototype.options_ = {\n  children: ['loadProgressBar', 'playProgressBar'],\n  barName: 'playProgressBar'\n}; // MouseTimeDisplay tooltips should not be added to a player on mobile devices\n\nif (!IS_IOS && !IS_ANDROID) {\n  SeekBar.prototype.options_.children.splice(1, 0, 'mouseTimeDisplay');\n}\n\nComponent$1.registerComponent('SeekBar', SeekBar);\n/**\n * The Progress Control component contains the seek bar, load progress,\n * and play progress.\n *\n * @extends Component\n */\n\nvar ProgressControl = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ProgressControl, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function ProgressControl(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.handleMouseMove = throttle(bind(_assertThisInitialized(_this), _this.handleMouseMove), UPDATE_REFRESH_INTERVAL);\n    _this.throttledHandleMouseSeek = throttle(bind(_assertThisInitialized(_this), _this.handleMouseSeek), UPDATE_REFRESH_INTERVAL);\n\n    _this.handleMouseUpHandler_ = function (e) {\n      return _this.handleMouseUp(e);\n    };\n\n    _this.handleMouseDownHandler_ = function (e) {\n      return _this.handleMouseDown(e);\n    };\n\n    _this.enable();\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = ProgressControl.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-progress-control vjs-control'\n    });\n  }\n  /**\n   * When the mouse moves over the `ProgressControl`, the pointer position\n   * gets passed down to the `MouseTimeDisplay` component.\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this function to run.\n   *\n   * @listen mousemove\n   */\n  ;\n\n  _proto.handleMouseMove = function handleMouseMove(event) {\n    var seekBar = this.getChild('seekBar');\n\n    if (!seekBar) {\n      return;\n    }\n\n    var playProgressBar = seekBar.getChild('playProgressBar');\n    var mouseTimeDisplay = seekBar.getChild('mouseTimeDisplay');\n\n    if (!playProgressBar && !mouseTimeDisplay) {\n      return;\n    }\n\n    var seekBarEl = seekBar.el();\n    var seekBarRect = findPosition(seekBarEl);\n    var seekBarPoint = getPointerPosition(seekBarEl, event).x; // The default skin has a gap on either side of the `SeekBar`. This means\n    // that it's possible to trigger this behavior outside the boundaries of\n    // the `SeekBar`. This ensures we stay within it at all times.\n\n    seekBarPoint = clamp(seekBarPoint, 0, 1);\n\n    if (mouseTimeDisplay) {\n      mouseTimeDisplay.update(seekBarRect, seekBarPoint);\n    }\n\n    if (playProgressBar) {\n      playProgressBar.update(seekBarRect, seekBar.getProgress());\n    }\n  }\n  /**\n   * A throttled version of the {@link ProgressControl#handleMouseSeek} listener.\n   *\n   * @method ProgressControl#throttledHandleMouseSeek\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this function to run.\n   *\n   * @listen mousemove\n   * @listen touchmove\n   */\n\n  /**\n   * Handle `mousemove` or `touchmove` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousemove\n   * @listens touchmove\n   */\n  ;\n\n  _proto.handleMouseSeek = function handleMouseSeek(event) {\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseMove(event);\n    }\n  }\n  /**\n   * Are controls are currently enabled for this progress control.\n   *\n   * @return {boolean}\n   *         true if controls are enabled, false otherwise\n   */\n  ;\n\n  _proto.enabled = function enabled() {\n    return this.enabled_;\n  }\n  /**\n   * Disable all controls on the progress control and its children\n   */\n  ;\n\n  _proto.disable = function disable() {\n    this.children().forEach(function (child) {\n      return child.disable && child.disable();\n    });\n\n    if (!this.enabled()) {\n      return;\n    }\n\n    this.off(['mousedown', 'touchstart'], this.handleMouseDownHandler_);\n    this.off(this.el_, 'mousemove', this.handleMouseMove);\n    this.removeListenersAddedOnMousedownAndTouchstart();\n    this.addClass('disabled');\n    this.enabled_ = false; // Restore normal playback state if controls are disabled while scrubbing\n\n    if (this.player_.scrubbing()) {\n      var seekBar = this.getChild('seekBar');\n      this.player_.scrubbing(false);\n\n      if (seekBar.videoWasPlaying) {\n        silencePromise(this.player_.play());\n      }\n    }\n  }\n  /**\n   * Enable all controls on the progress control and its children\n   */\n  ;\n\n  _proto.enable = function enable() {\n    this.children().forEach(function (child) {\n      return child.enable && child.enable();\n    });\n\n    if (this.enabled()) {\n      return;\n    }\n\n    this.on(['mousedown', 'touchstart'], this.handleMouseDownHandler_);\n    this.on(this.el_, 'mousemove', this.handleMouseMove);\n    this.removeClass('disabled');\n    this.enabled_ = true;\n  }\n  /**\n   * Cleanup listeners after the user finishes interacting with the progress controls\n   */\n  ;\n\n  _proto.removeListenersAddedOnMousedownAndTouchstart = function removeListenersAddedOnMousedownAndTouchstart() {\n    var doc = this.el_.ownerDocument;\n    this.off(doc, 'mousemove', this.throttledHandleMouseSeek);\n    this.off(doc, 'touchmove', this.throttledHandleMouseSeek);\n    this.off(doc, 'mouseup', this.handleMouseUpHandler_);\n    this.off(doc, 'touchend', this.handleMouseUpHandler_);\n  }\n  /**\n   * Handle `mousedown` or `touchstart` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n  ;\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.el_.ownerDocument;\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseDown(event);\n    }\n\n    this.on(doc, 'mousemove', this.throttledHandleMouseSeek);\n    this.on(doc, 'touchmove', this.throttledHandleMouseSeek);\n    this.on(doc, 'mouseup', this.handleMouseUpHandler_);\n    this.on(doc, 'touchend', this.handleMouseUpHandler_);\n  }\n  /**\n   * Handle `mouseup` or `touchend` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   */\n  ;\n\n  _proto.handleMouseUp = function handleMouseUp(event) {\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseUp(event);\n    }\n\n    this.removeListenersAddedOnMousedownAndTouchstart();\n  };\n\n  return ProgressControl;\n}(Component$1);\n/**\n * Default options for `ProgressControl`\n *\n * @type {Object}\n * @private\n */\n\n\nProgressControl.prototype.options_ = {\n  children: ['seekBar']\n};\nComponent$1.registerComponent('ProgressControl', ProgressControl);\n/**\n * Toggle Picture-in-Picture mode\n *\n * @extends Button\n */\n\nvar PictureInPictureToggle = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(PictureInPictureToggle, _Button);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @listens Player#enterpictureinpicture\n   * @listens Player#leavepictureinpicture\n   */\n\n\n  function PictureInPictureToggle(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this;\n\n    _this.on(player, ['enterpictureinpicture', 'leavepictureinpicture'], function (e) {\n      return _this.handlePictureInPictureChange(e);\n    });\n\n    _this.on(player, ['disablepictureinpicturechanged', 'loadedmetadata'], function (e) {\n      return _this.handlePictureInPictureEnabledChange(e);\n    }); // TODO: Deactivate button on player emptied event.\n\n\n    _this.disable();\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = PictureInPictureToggle.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-picture-in-picture-control \" + _Button.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Enables or disables button based on document.pictureInPictureEnabled property value\n   * or on value returned by player.disablePictureInPicture() method.\n   */\n  ;\n\n  _proto.handlePictureInPictureEnabledChange = function handlePictureInPictureEnabledChange() {\n    if (document.pictureInPictureEnabled && this.player_.disablePictureInPicture() === false) {\n      this.enable();\n    } else {\n      this.disable();\n    }\n  }\n  /**\n   * Handles enterpictureinpicture and leavepictureinpicture on the player and change control text accordingly.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#enterpictureinpicture} or {@link Player#leavepictureinpicture} event that caused this function to be\n   *        called.\n   *\n   * @listens Player#enterpictureinpicture\n   * @listens Player#leavepictureinpicture\n   */\n  ;\n\n  _proto.handlePictureInPictureChange = function handlePictureInPictureChange(event) {\n    if (this.player_.isInPictureInPicture()) {\n      this.controlText('Exit Picture-in-Picture');\n    } else {\n      this.controlText('Picture-in-Picture');\n    }\n\n    this.handlePictureInPictureEnabledChange();\n  }\n  /**\n   * This gets called when an `PictureInPictureToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    if (!this.player_.isInPictureInPicture()) {\n      this.player_.requestPictureInPicture();\n    } else {\n      this.player_.exitPictureInPicture();\n    }\n  };\n\n  return PictureInPictureToggle;\n}(Button);\n/**\n * The text that should display over the `PictureInPictureToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPictureInPictureToggle.prototype.controlText_ = 'Picture-in-Picture';\nComponent$1.registerComponent('PictureInPictureToggle', PictureInPictureToggle);\n/**\n * Toggle fullscreen video\n *\n * @extends Button\n */\n\nvar FullscreenToggle = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(FullscreenToggle, _Button);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function FullscreenToggle(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this;\n\n    _this.on(player, 'fullscreenchange', function (e) {\n      return _this.handleFullscreenChange(e);\n    });\n\n    if (document[player.fsApi_.fullscreenEnabled] === false) {\n      _this.disable();\n    }\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = FullscreenToggle.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-fullscreen-control \" + _Button.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Handles fullscreenchange on the player and change control text accordingly.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#fullscreenchange} event that caused this function to be\n   *        called.\n   *\n   * @listens Player#fullscreenchange\n   */\n  ;\n\n  _proto.handleFullscreenChange = function handleFullscreenChange(event) {\n    if (this.player_.isFullscreen()) {\n      this.controlText('Non-Fullscreen');\n    } else {\n      this.controlText('Fullscreen');\n    }\n  }\n  /**\n   * This gets called when an `FullscreenToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    if (!this.player_.isFullscreen()) {\n      this.player_.requestFullscreen();\n    } else {\n      this.player_.exitFullscreen();\n    }\n  };\n\n  return FullscreenToggle;\n}(Button);\n/**\n * The text that should display over the `FullscreenToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nFullscreenToggle.prototype.controlText_ = 'Fullscreen';\nComponent$1.registerComponent('FullscreenToggle', FullscreenToggle);\n/**\n * Check if volume control is supported and if it isn't hide the\n * `Component` that was passed  using the `vjs-hidden` class.\n *\n * @param {Component} self\n *        The component that should be hidden if volume is unsupported\n *\n * @param {Player} player\n *        A reference to the player\n *\n * @private\n */\n\nvar checkVolumeSupport = function checkVolumeSupport(self, player) {\n  // hide volume controls when they're not supported by the current tech\n  if (player.tech_ && !player.tech_.featuresVolumeControl) {\n    self.addClass('vjs-hidden');\n  }\n\n  self.on(player, 'loadstart', function () {\n    if (!player.tech_.featuresVolumeControl) {\n      self.addClass('vjs-hidden');\n    } else {\n      self.removeClass('vjs-hidden');\n    }\n  });\n};\n/**\n * Shows volume level\n *\n * @extends Component\n */\n\n\nvar VolumeLevel = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(VolumeLevel, _Component);\n\n  function VolumeLevel() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = VolumeLevel.prototype;\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n  _proto.createEl = function createEl() {\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-level'\n    });\n\n    el.appendChild(_Component.prototype.createEl.call(this, 'span', {\n      className: 'vjs-control-text'\n    }));\n    return el;\n  };\n\n  return VolumeLevel;\n}(Component$1);\n\nComponent$1.registerComponent('VolumeLevel', VolumeLevel);\n/**\n * Volume level tooltips display a volume above or side by side the volume bar.\n *\n * @extends Component\n */\n\nvar VolumeLevelTooltip = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(VolumeLevelTooltip, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function VolumeLevelTooltip(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.update = throttle(bind(_assertThisInitialized(_this), _this.update), UPDATE_REFRESH_INTERVAL);\n    return _this;\n  }\n  /**\n   * Create the volume tooltip DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = VolumeLevelTooltip.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-tooltip'\n    }, {\n      'aria-hidden': 'true'\n    });\n  }\n  /**\n   * Updates the position of the tooltip relative to the `VolumeBar` and\n   * its content text.\n   *\n   * @param {Object} rangeBarRect\n   *        The `ClientRect` for the {@link VolumeBar} element.\n   *\n   * @param {number} rangeBarPoint\n   *        A number from 0 to 1, representing a horizontal/vertical reference point\n   *        from the left edge of the {@link VolumeBar}\n   *\n   * @param {boolean} vertical\n   *        Referees to the Volume control position\n   *        in the control bar{@link VolumeControl}\n   *\n   */\n  ;\n\n  _proto.update = function update(rangeBarRect, rangeBarPoint, vertical, content) {\n    if (!vertical) {\n      var tooltipRect = getBoundingClientRect(this.el_);\n      var playerRect = getBoundingClientRect(this.player_.el());\n      var volumeBarPointPx = rangeBarRect.width * rangeBarPoint;\n\n      if (!playerRect || !tooltipRect) {\n        return;\n      }\n\n      var spaceLeftOfPoint = rangeBarRect.left - playerRect.left + volumeBarPointPx;\n      var spaceRightOfPoint = rangeBarRect.width - volumeBarPointPx + (playerRect.right - rangeBarRect.right);\n      var pullTooltipBy = tooltipRect.width / 2;\n\n      if (spaceLeftOfPoint < pullTooltipBy) {\n        pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n      } else if (spaceRightOfPoint < pullTooltipBy) {\n        pullTooltipBy = spaceRightOfPoint;\n      }\n\n      if (pullTooltipBy < 0) {\n        pullTooltipBy = 0;\n      } else if (pullTooltipBy > tooltipRect.width) {\n        pullTooltipBy = tooltipRect.width;\n      }\n\n      this.el_.style.right = \"-\" + pullTooltipBy + \"px\";\n    }\n\n    this.write(content + \"%\");\n  }\n  /**\n   * Write the volume to the tooltip DOM element.\n   *\n   * @param {string} content\n   *        The formatted volume for the tooltip.\n   */\n  ;\n\n  _proto.write = function write(content) {\n    textContent(this.el_, content);\n  }\n  /**\n   * Updates the position of the volume tooltip relative to the `VolumeBar`.\n   *\n   * @param {Object} rangeBarRect\n   *        The `ClientRect` for the {@link VolumeBar} element.\n   *\n   * @param {number} rangeBarPoint\n   *        A number from 0 to 1, representing a horizontal/vertical reference point\n   *        from the left edge of the {@link VolumeBar}\n   *\n   * @param {boolean} vertical\n   *        Referees to the Volume control position\n   *        in the control bar{@link VolumeControl}\n   *\n   * @param {number} volume\n   *        The volume level to update the tooltip to\n   *\n   * @param {Function} cb\n   *        A function that will be called during the request animation frame\n   *        for tooltips that need to do additional animations from the default\n   */\n  ;\n\n  _proto.updateVolume = function updateVolume(rangeBarRect, rangeBarPoint, vertical, volume, cb) {\n    var _this2 = this;\n\n    this.requestNamedAnimationFrame('VolumeLevelTooltip#updateVolume', function () {\n      _this2.update(rangeBarRect, rangeBarPoint, vertical, volume.toFixed(0));\n\n      if (cb) {\n        cb();\n      }\n    });\n  };\n\n  return VolumeLevelTooltip;\n}(Component$1);\n\nComponent$1.registerComponent('VolumeLevelTooltip', VolumeLevelTooltip);\n/**\n * The {@link MouseVolumeLevelDisplay} component tracks mouse movement over the\n * {@link VolumeControl}. It displays an indicator and a {@link VolumeLevelTooltip}\n * indicating the volume level which is represented by a given point in the\n * {@link VolumeBar}.\n *\n * @extends Component\n */\n\nvar MouseVolumeLevelDisplay = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(MouseVolumeLevelDisplay, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function MouseVolumeLevelDisplay(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n    _this.update = throttle(bind(_assertThisInitialized(_this), _this.update), UPDATE_REFRESH_INTERVAL);\n    return _this;\n  }\n  /**\n   * Create the DOM element for this class.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = MouseVolumeLevelDisplay.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-mouse-display'\n    });\n  }\n  /**\n   * Enquires updates to its own DOM as well as the DOM of its\n   * {@link VolumeLevelTooltip} child.\n   *\n   * @param {Object} rangeBarRect\n   *        The `ClientRect` for the {@link VolumeBar} element.\n   *\n   * @param {number} rangeBarPoint\n   *        A number from 0 to 1, representing a horizontal/vertical reference point\n   *        from the left edge of the {@link VolumeBar}\n   *\n   * @param {boolean} vertical\n   *        Referees to the Volume control position\n   *        in the control bar{@link VolumeControl}\n   *\n   */\n  ;\n\n  _proto.update = function update(rangeBarRect, rangeBarPoint, vertical) {\n    var _this2 = this;\n\n    var volume = 100 * rangeBarPoint;\n    this.getChild('volumeLevelTooltip').updateVolume(rangeBarRect, rangeBarPoint, vertical, volume, function () {\n      if (vertical) {\n        _this2.el_.style.bottom = rangeBarRect.height * rangeBarPoint + \"px\";\n      } else {\n        _this2.el_.style.left = rangeBarRect.width * rangeBarPoint + \"px\";\n      }\n    });\n  };\n\n  return MouseVolumeLevelDisplay;\n}(Component$1);\n/**\n * Default options for `MouseVolumeLevelDisplay`\n *\n * @type {Object}\n * @private\n */\n\n\nMouseVolumeLevelDisplay.prototype.options_ = {\n  children: ['volumeLevelTooltip']\n};\nComponent$1.registerComponent('MouseVolumeLevelDisplay', MouseVolumeLevelDisplay);\n/**\n * The bar that contains the volume level and can be clicked on to adjust the level\n *\n * @extends Slider\n */\n\nvar VolumeBar = /*#__PURE__*/function (_Slider) {\n  _inheritsLoose(VolumeBar, _Slider);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function VolumeBar(player, options) {\n    var _this;\n\n    _this = _Slider.call(this, player, options) || this;\n\n    _this.on('slideractive', function (e) {\n      return _this.updateLastVolume_(e);\n    });\n\n    _this.on(player, 'volumechange', function (e) {\n      return _this.updateARIAAttributes(e);\n    });\n\n    player.ready(function () {\n      return _this.updateARIAAttributes();\n    });\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = VolumeBar.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Slider.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-bar vjs-slider-bar'\n    }, {\n      'aria-label': this.localize('Volume Level'),\n      'aria-live': 'polite'\n    });\n  }\n  /**\n   * Handle mouse down on volume bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousedown` event that caused this to run.\n   *\n   * @listens mousedown\n   */\n  ;\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    _Slider.prototype.handleMouseDown.call(this, event);\n  }\n  /**\n   * Handle movement events on the {@link VolumeMenuButton}.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run.\n   *\n   * @listens mousemove\n   */\n  ;\n\n  _proto.handleMouseMove = function handleMouseMove(event) {\n    var mouseVolumeLevelDisplay = this.getChild('mouseVolumeLevelDisplay');\n\n    if (mouseVolumeLevelDisplay) {\n      var volumeBarEl = this.el();\n      var volumeBarRect = getBoundingClientRect(volumeBarEl);\n      var vertical = this.vertical();\n      var volumeBarPoint = getPointerPosition(volumeBarEl, event);\n      volumeBarPoint = vertical ? volumeBarPoint.y : volumeBarPoint.x; // The default skin has a gap on either side of the `VolumeBar`. This means\n      // that it's possible to trigger this behavior outside the boundaries of\n      // the `VolumeBar`. This ensures we stay within it at all times.\n\n      volumeBarPoint = clamp(volumeBarPoint, 0, 1);\n      mouseVolumeLevelDisplay.update(volumeBarRect, volumeBarPoint, vertical);\n    }\n\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    this.checkMuted();\n    this.player_.volume(this.calculateDistance(event));\n  }\n  /**\n   * If the player is muted unmute it.\n   */\n  ;\n\n  _proto.checkMuted = function checkMuted() {\n    if (this.player_.muted()) {\n      this.player_.muted(false);\n    }\n  }\n  /**\n   * Get percent of volume level\n   *\n   * @return {number}\n   *         Volume level percent as a decimal number.\n   */\n  ;\n\n  _proto.getPercent = function getPercent() {\n    if (this.player_.muted()) {\n      return 0;\n    }\n\n    return this.player_.volume();\n  }\n  /**\n   * Increase volume level for keyboard users\n   */\n  ;\n\n  _proto.stepForward = function stepForward() {\n    this.checkMuted();\n    this.player_.volume(this.player_.volume() + 0.1);\n  }\n  /**\n   * Decrease volume level for keyboard users\n   */\n  ;\n\n  _proto.stepBack = function stepBack() {\n    this.checkMuted();\n    this.player_.volume(this.player_.volume() - 0.1);\n  }\n  /**\n   * Update ARIA accessibility attributes\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `volumechange` event that caused this function to run.\n   *\n   * @listens Player#volumechange\n   */\n  ;\n\n  _proto.updateARIAAttributes = function updateARIAAttributes(event) {\n    var ariaValue = this.player_.muted() ? 0 : this.volumeAsPercentage_();\n    this.el_.setAttribute('aria-valuenow', ariaValue);\n    this.el_.setAttribute('aria-valuetext', ariaValue + '%');\n  }\n  /**\n   * Returns the current value of the player volume as a percentage\n   *\n   * @private\n   */\n  ;\n\n  _proto.volumeAsPercentage_ = function volumeAsPercentage_() {\n    return Math.round(this.player_.volume() * 100);\n  }\n  /**\n   * When user starts dragging the VolumeBar, store the volume and listen for\n   * the end of the drag. When the drag ends, if the volume was set to zero,\n   * set lastVolume to the stored volume.\n   *\n   * @listens slideractive\n   * @private\n   */\n  ;\n\n  _proto.updateLastVolume_ = function updateLastVolume_() {\n    var _this2 = this;\n\n    var volumeBeforeDrag = this.player_.volume();\n    this.one('sliderinactive', function () {\n      if (_this2.player_.volume() === 0) {\n        _this2.player_.lastVolume_(volumeBeforeDrag);\n      }\n    });\n  };\n\n  return VolumeBar;\n}(Slider);\n/**\n * Default options for the `VolumeBar`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumeBar.prototype.options_ = {\n  children: ['volumeLevel'],\n  barName: 'volumeLevel'\n}; // MouseVolumeLevelDisplay tooltip should not be added to a player on mobile devices\n\nif (!IS_IOS && !IS_ANDROID) {\n  VolumeBar.prototype.options_.children.splice(0, 0, 'mouseVolumeLevelDisplay');\n}\n/**\n * Call the update event for this Slider when this event happens on the player.\n *\n * @type {string}\n */\n\n\nVolumeBar.prototype.playerEvent = 'volumechange';\nComponent$1.registerComponent('VolumeBar', VolumeBar);\n/**\n * The component for controlling the volume level\n *\n * @extends Component\n */\n\nvar VolumeControl = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(VolumeControl, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function VolumeControl(player, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    options.vertical = options.vertical || false; // Pass the vertical option down to the VolumeBar if\n    // the VolumeBar is turned on.\n\n    if (typeof options.volumeBar === 'undefined' || isPlain(options.volumeBar)) {\n      options.volumeBar = options.volumeBar || {};\n      options.volumeBar.vertical = options.vertical;\n    }\n\n    _this = _Component.call(this, player, options) || this; // hide this control if volume support is missing\n\n    checkVolumeSupport(_assertThisInitialized(_this), player);\n    _this.throttledHandleMouseMove = throttle(bind(_assertThisInitialized(_this), _this.handleMouseMove), UPDATE_REFRESH_INTERVAL);\n\n    _this.handleMouseUpHandler_ = function (e) {\n      return _this.handleMouseUp(e);\n    };\n\n    _this.on('mousedown', function (e) {\n      return _this.handleMouseDown(e);\n    });\n\n    _this.on('touchstart', function (e) {\n      return _this.handleMouseDown(e);\n    });\n\n    _this.on('mousemove', function (e) {\n      return _this.handleMouseMove(e);\n    }); // while the slider is active (the mouse has been pressed down and\n    // is dragging) or in focus we do not want to hide the VolumeBar\n\n\n    _this.on(_this.volumeBar, ['focus', 'slideractive'], function () {\n      _this.volumeBar.addClass('vjs-slider-active');\n\n      _this.addClass('vjs-slider-active');\n\n      _this.trigger('slideractive');\n    });\n\n    _this.on(_this.volumeBar, ['blur', 'sliderinactive'], function () {\n      _this.volumeBar.removeClass('vjs-slider-active');\n\n      _this.removeClass('vjs-slider-active');\n\n      _this.trigger('sliderinactive');\n    });\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = VolumeControl.prototype;\n\n  _proto.createEl = function createEl() {\n    var orientationClass = 'vjs-volume-horizontal';\n\n    if (this.options_.vertical) {\n      orientationClass = 'vjs-volume-vertical';\n    }\n\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: \"vjs-volume-control vjs-control \" + orientationClass\n    });\n  }\n  /**\n   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n  ;\n\n  _proto.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.el_.ownerDocument;\n    this.on(doc, 'mousemove', this.throttledHandleMouseMove);\n    this.on(doc, 'touchmove', this.throttledHandleMouseMove);\n    this.on(doc, 'mouseup', this.handleMouseUpHandler_);\n    this.on(doc, 'touchend', this.handleMouseUpHandler_);\n  }\n  /**\n   * Handle `mouseup` or `touchend` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   */\n  ;\n\n  _proto.handleMouseUp = function handleMouseUp(event) {\n    var doc = this.el_.ownerDocument;\n    this.off(doc, 'mousemove', this.throttledHandleMouseMove);\n    this.off(doc, 'touchmove', this.throttledHandleMouseMove);\n    this.off(doc, 'mouseup', this.handleMouseUpHandler_);\n    this.off(doc, 'touchend', this.handleMouseUpHandler_);\n  }\n  /**\n   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n  ;\n\n  _proto.handleMouseMove = function handleMouseMove(event) {\n    this.volumeBar.handleMouseMove(event);\n  };\n\n  return VolumeControl;\n}(Component$1);\n/**\n * Default options for the `VolumeControl`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumeControl.prototype.options_ = {\n  children: ['volumeBar']\n};\nComponent$1.registerComponent('VolumeControl', VolumeControl);\n/**\n * Check if muting volume is supported and if it isn't hide the mute toggle\n * button.\n *\n * @param {Component} self\n *        A reference to the mute toggle button\n *\n * @param {Player} player\n *        A reference to the player\n *\n * @private\n */\n\nvar checkMuteSupport = function checkMuteSupport(self, player) {\n  // hide mute toggle button if it's not supported by the current tech\n  if (player.tech_ && !player.tech_.featuresMuteControl) {\n    self.addClass('vjs-hidden');\n  }\n\n  self.on(player, 'loadstart', function () {\n    if (!player.tech_.featuresMuteControl) {\n      self.addClass('vjs-hidden');\n    } else {\n      self.removeClass('vjs-hidden');\n    }\n  });\n};\n/**\n * A button component for muting the audio.\n *\n * @extends Button\n */\n\n\nvar MuteToggle = /*#__PURE__*/function (_Button) {\n  _inheritsLoose(MuteToggle, _Button);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function MuteToggle(player, options) {\n    var _this;\n\n    _this = _Button.call(this, player, options) || this; // hide this control if volume support is missing\n\n    checkMuteSupport(_assertThisInitialized(_this), player);\n\n    _this.on(player, ['loadstart', 'volumechange'], function (e) {\n      return _this.update(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = MuteToggle.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-mute-control \" + _Button.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * This gets called when an `MuteToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    var vol = this.player_.volume();\n    var lastVolume = this.player_.lastVolume_();\n\n    if (vol === 0) {\n      var volumeToSet = lastVolume < 0.1 ? 0.1 : lastVolume;\n      this.player_.volume(volumeToSet);\n      this.player_.muted(false);\n    } else {\n      this.player_.muted(this.player_.muted() ? false : true);\n    }\n  }\n  /**\n   * Update the `MuteToggle` button based on the state of `volume` and `muted`\n   * on the player.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#loadstart} event if this function was called\n   *        through an event.\n   *\n   * @listens Player#loadstart\n   * @listens Player#volumechange\n   */\n  ;\n\n  _proto.update = function update(event) {\n    this.updateIcon_();\n    this.updateControlText_();\n  }\n  /**\n   * Update the appearance of the `MuteToggle` icon.\n   *\n   * Possible states (given `level` variable below):\n   * - 0: crossed out\n   * - 1: zero bars of volume\n   * - 2: one bar of volume\n   * - 3: two bars of volume\n   *\n   * @private\n   */\n  ;\n\n  _proto.updateIcon_ = function updateIcon_() {\n    var vol = this.player_.volume();\n    var level = 3; // in iOS when a player is loaded with muted attribute\n    // and volume is changed with a native mute button\n    // we want to make sure muted state is updated\n\n    if (IS_IOS && this.player_.tech_ && this.player_.tech_.el_) {\n      this.player_.muted(this.player_.tech_.el_.muted);\n    }\n\n    if (vol === 0 || this.player_.muted()) {\n      level = 0;\n    } else if (vol < 0.33) {\n      level = 1;\n    } else if (vol < 0.67) {\n      level = 2;\n    } // TODO improve muted icon classes\n\n\n    for (var i = 0; i < 4; i++) {\n      removeClass(this.el_, \"vjs-vol-\" + i);\n    }\n\n    addClass(this.el_, \"vjs-vol-\" + level);\n  }\n  /**\n   * If `muted` has changed on the player, update the control text\n   * (`title` attribute on `vjs-mute-control` element and content of\n   * `vjs-control-text` element).\n   *\n   * @private\n   */\n  ;\n\n  _proto.updateControlText_ = function updateControlText_() {\n    var soundOff = this.player_.muted() || this.player_.volume() === 0;\n    var text = soundOff ? 'Unmute' : 'Mute';\n\n    if (this.controlText() !== text) {\n      this.controlText(text);\n    }\n  };\n\n  return MuteToggle;\n}(Button);\n/**\n * The text that should display over the `MuteToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nMuteToggle.prototype.controlText_ = 'Mute';\nComponent$1.registerComponent('MuteToggle', MuteToggle);\n/**\n * A Component to contain the MuteToggle and VolumeControl so that\n * they can work together.\n *\n * @extends Component\n */\n\nvar VolumePanel = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(VolumePanel, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function VolumePanel(player, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (typeof options.inline !== 'undefined') {\n      options.inline = options.inline;\n    } else {\n      options.inline = true;\n    } // pass the inline option down to the VolumeControl as vertical if\n    // the VolumeControl is on.\n\n\n    if (typeof options.volumeControl === 'undefined' || isPlain(options.volumeControl)) {\n      options.volumeControl = options.volumeControl || {};\n      options.volumeControl.vertical = !options.inline;\n    }\n\n    _this = _Component.call(this, player, options) || this; // this handler is used by mouse handler methods below\n\n    _this.handleKeyPressHandler_ = function (e) {\n      return _this.handleKeyPress(e);\n    };\n\n    _this.on(player, ['loadstart'], function (e) {\n      return _this.volumePanelState_(e);\n    });\n\n    _this.on(_this.muteToggle, 'keyup', function (e) {\n      return _this.handleKeyPress(e);\n    });\n\n    _this.on(_this.volumeControl, 'keyup', function (e) {\n      return _this.handleVolumeControlKeyUp(e);\n    });\n\n    _this.on('keydown', function (e) {\n      return _this.handleKeyPress(e);\n    });\n\n    _this.on('mouseover', function (e) {\n      return _this.handleMouseOver(e);\n    });\n\n    _this.on('mouseout', function (e) {\n      return _this.handleMouseOut(e);\n    }); // while the slider is active (the mouse has been pressed down and\n    // is dragging) we do not want to hide the VolumeBar\n\n\n    _this.on(_this.volumeControl, ['slideractive'], _this.sliderActive_);\n\n    _this.on(_this.volumeControl, ['sliderinactive'], _this.sliderInactive_);\n\n    return _this;\n  }\n  /**\n   * Add vjs-slider-active class to the VolumePanel\n   *\n   * @listens VolumeControl#slideractive\n   * @private\n   */\n\n\n  var _proto = VolumePanel.prototype;\n\n  _proto.sliderActive_ = function sliderActive_() {\n    this.addClass('vjs-slider-active');\n  }\n  /**\n   * Removes vjs-slider-active class to the VolumePanel\n   *\n   * @listens VolumeControl#sliderinactive\n   * @private\n   */\n  ;\n\n  _proto.sliderInactive_ = function sliderInactive_() {\n    this.removeClass('vjs-slider-active');\n  }\n  /**\n   * Adds vjs-hidden or vjs-mute-toggle-only to the VolumePanel\n   * depending on MuteToggle and VolumeControl state\n   *\n   * @listens Player#loadstart\n   * @private\n   */\n  ;\n\n  _proto.volumePanelState_ = function volumePanelState_() {\n    // hide volume panel if neither volume control or mute toggle\n    // are displayed\n    if (this.volumeControl.hasClass('vjs-hidden') && this.muteToggle.hasClass('vjs-hidden')) {\n      this.addClass('vjs-hidden');\n    } // if only mute toggle is visible we don't want\n    // volume panel expanding when hovered or active\n\n\n    if (this.volumeControl.hasClass('vjs-hidden') && !this.muteToggle.hasClass('vjs-hidden')) {\n      this.addClass('vjs-mute-toggle-only');\n    }\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    var orientationClass = 'vjs-volume-panel-horizontal';\n\n    if (!this.options_.inline) {\n      orientationClass = 'vjs-volume-panel-vertical';\n    }\n\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: \"vjs-volume-panel vjs-control \" + orientationClass\n    });\n  }\n  /**\n   * Dispose of the `volume-panel` and all child components.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.handleMouseOut();\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Handles `keyup` events on the `VolumeControl`, looking for ESC, which closes\n   * the volume panel and sets focus on `MuteToggle`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keyup` event that caused this function to be called.\n   *\n   * @listens keyup\n   */\n  ;\n\n  _proto.handleVolumeControlKeyUp = function handleVolumeControlKeyUp(event) {\n    if (keycode.isEventKey(event, 'Esc')) {\n      this.muteToggle.focus();\n    }\n  }\n  /**\n   * This gets called when a `VolumePanel` gains hover via a `mouseover` event.\n   * Turns on listening for `mouseover` event. When they happen it\n   * calls `this.handleMouseOver`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `mouseover` event that caused this function to be called.\n   *\n   * @listens mouseover\n   */\n  ;\n\n  _proto.handleMouseOver = function handleMouseOver(event) {\n    this.addClass('vjs-hover');\n    on(document, 'keyup', this.handleKeyPressHandler_);\n  }\n  /**\n   * This gets called when a `VolumePanel` gains hover via a `mouseout` event.\n   * Turns on listening for `mouseout` event. When they happen it\n   * calls `this.handleMouseOut`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `mouseout` event that caused this function to be called.\n   *\n   * @listens mouseout\n   */\n  ;\n\n  _proto.handleMouseOut = function handleMouseOut(event) {\n    this.removeClass('vjs-hover');\n    off(document, 'keyup', this.handleKeyPressHandler_);\n  }\n  /**\n   * Handles `keyup` event on the document or `keydown` event on the `VolumePanel`,\n   * looking for ESC, which hides the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        The keypress that triggered this event.\n   *\n   * @listens keydown | keyup\n   */\n  ;\n\n  _proto.handleKeyPress = function handleKeyPress(event) {\n    if (keycode.isEventKey(event, 'Esc')) {\n      this.handleMouseOut();\n    }\n  };\n\n  return VolumePanel;\n}(Component$1);\n/**\n * Default options for the `VolumeControl`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumePanel.prototype.options_ = {\n  children: ['muteToggle', 'volumeControl']\n};\nComponent$1.registerComponent('VolumePanel', VolumePanel);\n/**\n * The Menu component is used to build popup menus, including subtitle and\n * captions selection menus.\n *\n * @extends Component\n */\n\nvar Menu = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Menu, _Component);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        the player that this component should attach to\n   *\n   * @param {Object} [options]\n   *        Object of option names and values\n   *\n   */\n\n\n  function Menu(player, options) {\n    var _this;\n\n    _this = _Component.call(this, player, options) || this;\n\n    if (options) {\n      _this.menuButton_ = options.menuButton;\n    }\n\n    _this.focusedChild_ = -1;\n\n    _this.on('keydown', function (e) {\n      return _this.handleKeyDown(e);\n    }); // All the menu item instances share the same blur handler provided by the menu container.\n\n\n    _this.boundHandleBlur_ = function (e) {\n      return _this.handleBlur(e);\n    };\n\n    _this.boundHandleTapClick_ = function (e) {\n      return _this.handleTapClick(e);\n    };\n\n    return _this;\n  }\n  /**\n   * Add event listeners to the {@link MenuItem}.\n   *\n   * @param {Object} component\n   *        The instance of the `MenuItem` to add listeners to.\n   *\n   */\n\n\n  var _proto = Menu.prototype;\n\n  _proto.addEventListenerForItem = function addEventListenerForItem(component) {\n    if (!(component instanceof Component$1)) {\n      return;\n    }\n\n    this.on(component, 'blur', this.boundHandleBlur_);\n    this.on(component, ['tap', 'click'], this.boundHandleTapClick_);\n  }\n  /**\n   * Remove event listeners from the {@link MenuItem}.\n   *\n   * @param {Object} component\n   *        The instance of the `MenuItem` to remove listeners.\n   *\n   */\n  ;\n\n  _proto.removeEventListenerForItem = function removeEventListenerForItem(component) {\n    if (!(component instanceof Component$1)) {\n      return;\n    }\n\n    this.off(component, 'blur', this.boundHandleBlur_);\n    this.off(component, ['tap', 'click'], this.boundHandleTapClick_);\n  }\n  /**\n   * This method will be called indirectly when the component has been added\n   * before the component adds to the new menu instance by `addItem`.\n   * In this case, the original menu instance will remove the component\n   * by calling `removeChild`.\n   *\n   * @param {Object} component\n   *        The instance of the `MenuItem`\n   */\n  ;\n\n  _proto.removeChild = function removeChild(component) {\n    if (typeof component === 'string') {\n      component = this.getChild(component);\n    }\n\n    this.removeEventListenerForItem(component);\n\n    _Component.prototype.removeChild.call(this, component);\n  }\n  /**\n   * Add a {@link MenuItem} to the menu.\n   *\n   * @param {Object|string} component\n   *        The name or instance of the `MenuItem` to add.\n   *\n   */\n  ;\n\n  _proto.addItem = function addItem(component) {\n    var childComponent = this.addChild(component);\n\n    if (childComponent) {\n      this.addEventListenerForItem(childComponent);\n    }\n  }\n  /**\n   * Create the `Menu`s DOM element.\n   *\n   * @return {Element}\n   *         the element that was created\n   */\n  ;\n\n  _proto.createEl = function createEl$1() {\n    var contentElType = this.options_.contentElType || 'ul';\n    this.contentEl_ = createEl(contentElType, {\n      className: 'vjs-menu-content'\n    });\n    this.contentEl_.setAttribute('role', 'menu');\n\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      append: this.contentEl_,\n      className: 'vjs-menu'\n    });\n\n    el.appendChild(this.contentEl_); // Prevent clicks from bubbling up. Needed for Menu Buttons,\n    // where a click on the parent is significant\n\n    on(el, 'click', function (event) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    });\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    this.contentEl_ = null;\n    this.boundHandleBlur_ = null;\n    this.boundHandleTapClick_ = null;\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Called when a `MenuItem` loses focus.\n   *\n   * @param {EventTarget~Event} event\n   *        The `blur` event that caused this function to be called.\n   *\n   * @listens blur\n   */\n  ;\n\n  _proto.handleBlur = function handleBlur(event) {\n    var relatedTarget = event.relatedTarget || document.activeElement; // Close menu popup when a user clicks outside the menu\n\n    if (!this.children().some(function (element) {\n      return element.el() === relatedTarget;\n    })) {\n      var btn = this.menuButton_;\n\n      if (btn && btn.buttonPressed_ && relatedTarget !== btn.el().firstChild) {\n        btn.unpressButton();\n      }\n    }\n  }\n  /**\n   * Called when a `MenuItem` gets clicked or tapped.\n   *\n   * @param {EventTarget~Event} event\n   *        The `click` or `tap` event that caused this function to be called.\n   *\n   * @listens click,tap\n   */\n  ;\n\n  _proto.handleTapClick = function handleTapClick(event) {\n    // Unpress the associated MenuButton, and move focus back to it\n    if (this.menuButton_) {\n      this.menuButton_.unpressButton();\n      var childComponents = this.children();\n\n      if (!Array.isArray(childComponents)) {\n        return;\n      }\n\n      var foundComponent = childComponents.filter(function (component) {\n        return component.el() === event.target;\n      })[0];\n\n      if (!foundComponent) {\n        return;\n      } // don't focus menu button if item is a caption settings item\n      // because focus will move elsewhere\n\n\n      if (foundComponent.name() !== 'CaptionSettingsMenuItem') {\n        this.menuButton_.focus();\n      }\n    }\n  }\n  /**\n   * Handle a `keydown` event on this menu. This listener is added in the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        A `keydown` event that happened on the menu.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Left and Down Arrows\n    if (keycode.isEventKey(event, 'Left') || keycode.isEventKey(event, 'Down')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.stepForward(); // Up and Right Arrows\n    } else if (keycode.isEventKey(event, 'Right') || keycode.isEventKey(event, 'Up')) {\n      event.preventDefault();\n      event.stopPropagation();\n      this.stepBack();\n    }\n  }\n  /**\n   * Move to next (lower) menu item for keyboard users.\n   */\n  ;\n\n  _proto.stepForward = function stepForward() {\n    var stepChild = 0;\n\n    if (this.focusedChild_ !== undefined) {\n      stepChild = this.focusedChild_ + 1;\n    }\n\n    this.focus(stepChild);\n  }\n  /**\n   * Move to previous (higher) menu item for keyboard users.\n   */\n  ;\n\n  _proto.stepBack = function stepBack() {\n    var stepChild = 0;\n\n    if (this.focusedChild_ !== undefined) {\n      stepChild = this.focusedChild_ - 1;\n    }\n\n    this.focus(stepChild);\n  }\n  /**\n   * Set focus on a {@link MenuItem} in the `Menu`.\n   *\n   * @param {Object|string} [item=0]\n   *        Index of child item set focus on.\n   */\n  ;\n\n  _proto.focus = function focus(item) {\n    if (item === void 0) {\n      item = 0;\n    }\n\n    var children = this.children().slice();\n    var haveTitle = children.length && children[0].hasClass('vjs-menu-title');\n\n    if (haveTitle) {\n      children.shift();\n    }\n\n    if (children.length > 0) {\n      if (item < 0) {\n        item = 0;\n      } else if (item >= children.length) {\n        item = children.length - 1;\n      }\n\n      this.focusedChild_ = item;\n      children[item].el_.focus();\n    }\n  };\n\n  return Menu;\n}(Component$1);\n\nComponent$1.registerComponent('Menu', Menu);\n/**\n * A `MenuButton` class for any popup {@link Menu}.\n *\n * @extends Component\n */\n\nvar MenuButton = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(MenuButton, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function MenuButton(player, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _Component.call(this, player, options) || this;\n    _this.menuButton_ = new Button(player, options);\n\n    _this.menuButton_.controlText(_this.controlText_);\n\n    _this.menuButton_.el_.setAttribute('aria-haspopup', 'true'); // Add buildCSSClass values to the button, not the wrapper\n\n\n    var buttonClass = Button.prototype.buildCSSClass();\n    _this.menuButton_.el_.className = _this.buildCSSClass() + ' ' + buttonClass;\n\n    _this.menuButton_.removeClass('vjs-control');\n\n    _this.addChild(_this.menuButton_);\n\n    _this.update();\n\n    _this.enabled_ = true;\n\n    var handleClick = function handleClick(e) {\n      return _this.handleClick(e);\n    };\n\n    _this.handleMenuKeyUp_ = function (e) {\n      return _this.handleMenuKeyUp(e);\n    };\n\n    _this.on(_this.menuButton_, 'tap', handleClick);\n\n    _this.on(_this.menuButton_, 'click', handleClick);\n\n    _this.on(_this.menuButton_, 'keydown', function (e) {\n      return _this.handleKeyDown(e);\n    });\n\n    _this.on(_this.menuButton_, 'mouseenter', function () {\n      _this.addClass('vjs-hover');\n\n      _this.menu.show();\n\n      on(document, 'keyup', _this.handleMenuKeyUp_);\n    });\n\n    _this.on('mouseleave', function (e) {\n      return _this.handleMouseLeave(e);\n    });\n\n    _this.on('keydown', function (e) {\n      return _this.handleSubmenuKeyDown(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Update the menu based on the current state of its items.\n   */\n\n\n  var _proto = MenuButton.prototype;\n\n  _proto.update = function update() {\n    var menu = this.createMenu();\n\n    if (this.menu) {\n      this.menu.dispose();\n      this.removeChild(this.menu);\n    }\n\n    this.menu = menu;\n    this.addChild(menu);\n    /**\n     * Track the state of the menu button\n     *\n     * @type {Boolean}\n     * @private\n     */\n\n    this.buttonPressed_ = false;\n    this.menuButton_.el_.setAttribute('aria-expanded', 'false');\n\n    if (this.items && this.items.length <= this.hideThreshold_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  /**\n   * Create the menu and add all items to it.\n   *\n   * @return {Menu}\n   *         The constructed menu\n   */\n  ;\n\n  _proto.createMenu = function createMenu() {\n    var menu = new Menu(this.player_, {\n      menuButton: this\n    });\n    /**\n     * Hide the menu if the number of items is less than or equal to this threshold. This defaults\n     * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list\n     * it here because every time we run `createMenu` we need to reset the value.\n     *\n     * @protected\n     * @type {Number}\n     */\n\n    this.hideThreshold_ = 0; // Add a title list item to the top\n\n    if (this.options_.title) {\n      var titleEl = createEl('li', {\n        className: 'vjs-menu-title',\n        textContent: toTitleCase$1(this.options_.title),\n        tabIndex: -1\n      });\n      var titleComponent = new Component$1(this.player_, {\n        el: titleEl\n      });\n      menu.addItem(titleComponent);\n    }\n\n    this.items = this.createItems();\n\n    if (this.items) {\n      // Add menu items to the menu\n      for (var i = 0; i < this.items.length; i++) {\n        menu.addItem(this.items[i]);\n      }\n    }\n\n    return menu;\n  }\n  /**\n   * Create the list of menu items. Specific to each subclass.\n   *\n   * @abstract\n   */\n  ;\n\n  _proto.createItems = function createItems() {}\n  /**\n   * Create the `MenuButtons`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: this.buildWrapperCSSClass()\n    }, {});\n  }\n  /**\n   * Allow sub components to stack CSS class names for the wrapper element\n   *\n   * @return {string}\n   *         The constructed wrapper DOM `className`\n   */\n  ;\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    var menuButtonClass = 'vjs-menu-button'; // If the inline option is passed, we want to use different styles altogether.\n\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    } // TODO: Fix the CSS so that this isn't necessary\n\n\n    var buttonClass = Button.prototype.buildCSSClass();\n    return \"vjs-menu-button \" + menuButtonClass + \" \" + buttonClass + \" \" + _Component.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    var menuButtonClass = 'vjs-menu-button'; // If the inline option is passed, we want to use different styles altogether.\n\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    }\n\n    return \"vjs-menu-button \" + menuButtonClass + \" \" + _Component.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Get or set the localized control text that will be used for accessibility.\n   *\n   * > NOTE: This will come from the internal `menuButton_` element.\n   *\n   * @param {string} [text]\n   *        Control text for element.\n   *\n   * @param {Element} [el=this.menuButton_.el()]\n   *        Element to set the title on.\n   *\n   * @return {string}\n   *         - The control text when getting\n   */\n  ;\n\n  _proto.controlText = function controlText(text, el) {\n    if (el === void 0) {\n      el = this.menuButton_.el();\n    }\n\n    return this.menuButton_.controlText(text, el);\n  }\n  /**\n   * Dispose of the `menu-button` and all child components.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.handleMouseLeave();\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Handle a click on a `MenuButton`.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n  }\n  /**\n   * Handle `mouseleave` for `MenuButton`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `mouseleave` event that caused this function to be called.\n   *\n   * @listens mouseleave\n   */\n  ;\n\n  _proto.handleMouseLeave = function handleMouseLeave(event) {\n    this.removeClass('vjs-hover');\n    off(document, 'keyup', this.handleMenuKeyUp_);\n  }\n  /**\n   * Set the focus to the actual button, not to this element\n   */\n  ;\n\n  _proto.focus = function focus() {\n    this.menuButton_.focus();\n  }\n  /**\n   * Remove the focus from the actual button, not this element\n   */\n  ;\n\n  _proto.blur = function blur() {\n    this.menuButton_.blur();\n  }\n  /**\n   * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See\n   * {@link ClickableComponent#handleKeyDown} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    // Escape or Tab unpress the 'button'\n    if (keycode.isEventKey(event, 'Esc') || keycode.isEventKey(event, 'Tab')) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      } // Don't preventDefault for Tab key - we still want to lose focus\n\n\n      if (!keycode.isEventKey(event, 'Tab')) {\n        event.preventDefault(); // Set focus back to the menu button's button\n\n        this.menuButton_.focus();\n      } // Up Arrow or Down Arrow also 'press' the button to open the menu\n\n    } else if (keycode.isEventKey(event, 'Up') || keycode.isEventKey(event, 'Down')) {\n      if (!this.buttonPressed_) {\n        event.preventDefault();\n        this.pressButton();\n      }\n    }\n  }\n  /**\n   * Handle a `keyup` event on a `MenuButton`. The listener for this is added in\n   * the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        Key press event\n   *\n   * @listens keyup\n   */\n  ;\n\n  _proto.handleMenuKeyUp = function handleMenuKeyUp(event) {\n    // Escape hides popup menu\n    if (keycode.isEventKey(event, 'Esc') || keycode.isEventKey(event, 'Tab')) {\n      this.removeClass('vjs-hover');\n    }\n  }\n  /**\n   * This method name now delegates to `handleSubmenuKeyDown`. This means\n   * anyone calling `handleSubmenuKeyPress` will not see their method calls\n   * stop working.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to be called.\n   */\n  ;\n\n  _proto.handleSubmenuKeyPress = function handleSubmenuKeyPress(event) {\n    this.handleSubmenuKeyDown(event);\n  }\n  /**\n   * Handle a `keydown` event on a sub-menu. The listener for this is added in\n   * the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        Key press event\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleSubmenuKeyDown = function handleSubmenuKeyDown(event) {\n    // Escape or Tab unpress the 'button'\n    if (keycode.isEventKey(event, 'Esc') || keycode.isEventKey(event, 'Tab')) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      } // Don't preventDefault for Tab key - we still want to lose focus\n\n\n      if (!keycode.isEventKey(event, 'Tab')) {\n        event.preventDefault(); // Set focus back to the menu button's button\n\n        this.menuButton_.focus();\n      }\n    }\n  }\n  /**\n   * Put the current `MenuButton` into a pressed state.\n   */\n  ;\n\n  _proto.pressButton = function pressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = true;\n      this.menu.show();\n      this.menu.lockShowing();\n      this.menuButton_.el_.setAttribute('aria-expanded', 'true'); // set the focus into the submenu, except on iOS where it is resulting in\n      // undesired scrolling behavior when the player is in an iframe\n\n      if (IS_IOS && isInFrame()) {\n        // Return early so that the menu isn't focused\n        return;\n      }\n\n      this.menu.focus();\n    }\n  }\n  /**\n   * Take the current `MenuButton` out of a pressed state.\n   */\n  ;\n\n  _proto.unpressButton = function unpressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = false;\n      this.menu.unlockShowing();\n      this.menu.hide();\n      this.menuButton_.el_.setAttribute('aria-expanded', 'false');\n    }\n  }\n  /**\n   * Disable the `MenuButton`. Don't allow it to be clicked.\n   */\n  ;\n\n  _proto.disable = function disable() {\n    this.unpressButton();\n    this.enabled_ = false;\n    this.addClass('vjs-disabled');\n    this.menuButton_.disable();\n  }\n  /**\n   * Enable the `MenuButton`. Allow it to be clicked.\n   */\n  ;\n\n  _proto.enable = function enable() {\n    this.enabled_ = true;\n    this.removeClass('vjs-disabled');\n    this.menuButton_.enable();\n  };\n\n  return MenuButton;\n}(Component$1);\n\nComponent$1.registerComponent('MenuButton', MenuButton);\n/**\n * The base class for buttons that toggle specific  track types (e.g. subtitles).\n *\n * @extends MenuButton\n */\n\nvar TrackButton = /*#__PURE__*/function (_MenuButton) {\n  _inheritsLoose(TrackButton, _MenuButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function TrackButton(player, options) {\n    var _this;\n\n    var tracks = options.tracks;\n    _this = _MenuButton.call(this, player, options) || this;\n\n    if (_this.items.length <= 1) {\n      _this.hide();\n    }\n\n    if (!tracks) {\n      return _assertThisInitialized(_this);\n    }\n\n    var updateHandler = bind(_assertThisInitialized(_this), _this.update);\n    tracks.addEventListener('removetrack', updateHandler);\n    tracks.addEventListener('addtrack', updateHandler);\n    tracks.addEventListener('labelchange', updateHandler);\n\n    _this.player_.on('ready', updateHandler);\n\n    _this.player_.on('dispose', function () {\n      tracks.removeEventListener('removetrack', updateHandler);\n      tracks.removeEventListener('addtrack', updateHandler);\n      tracks.removeEventListener('labelchange', updateHandler);\n    });\n\n    return _this;\n  }\n\n  return TrackButton;\n}(MenuButton);\n\nComponent$1.registerComponent('TrackButton', TrackButton);\n/**\n * @file menu-keys.js\n */\n\n/**\n  * All keys used for operation of a menu (`MenuButton`, `Menu`, and `MenuItem`)\n  * Note that 'Enter' and 'Space' are not included here (otherwise they would\n  * prevent the `MenuButton` and `MenuItem` from being keyboard-clickable)\n  * @typedef MenuKeys\n  * @array\n  */\n\nvar MenuKeys = ['Tab', 'Esc', 'Up', 'Down', 'Right', 'Left'];\n/**\n * The component for a menu item. `<li>`\n *\n * @extends ClickableComponent\n */\n\nvar MenuItem = /*#__PURE__*/function (_ClickableComponent) {\n  _inheritsLoose(MenuItem, _ClickableComponent);\n  /**\n   * Creates an instance of the this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   *\n   */\n\n\n  function MenuItem(player, options) {\n    var _this;\n\n    _this = _ClickableComponent.call(this, player, options) || this;\n    _this.selectable = options.selectable;\n    _this.isSelected_ = options.selected || false;\n    _this.multiSelectable = options.multiSelectable;\n\n    _this.selected(_this.isSelected_);\n\n    if (_this.selectable) {\n      if (_this.multiSelectable) {\n        _this.el_.setAttribute('role', 'menuitemcheckbox');\n      } else {\n        _this.el_.setAttribute('role', 'menuitemradio');\n      }\n    } else {\n      _this.el_.setAttribute('role', 'menuitem');\n    }\n\n    return _this;\n  }\n  /**\n   * Create the `MenuItem's DOM element\n   *\n   * @param {string} [type=li]\n   *        Element's node type, not actually used, always set to `li`.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element\n   *\n   * @param {Object} [attrs={}]\n   *        An object of attributes that should be set on the element\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  var _proto = MenuItem.prototype;\n\n  _proto.createEl = function createEl$1(type, props, attrs) {\n    // The control is textual, not just an icon\n    this.nonIconControl = true;\n\n    var el = _ClickableComponent.prototype.createEl.call(this, 'li', assign({\n      className: 'vjs-menu-item',\n      tabIndex: -1\n    }, props), attrs); // swap icon with menu item text.\n\n\n    el.replaceChild(createEl('span', {\n      className: 'vjs-menu-item-text',\n      textContent: this.localize(this.options_.label)\n    }), el.querySelector('.vjs-icon-placeholder'));\n    return el;\n  }\n  /**\n   * Ignore keys which are used by the menu, but pass any other ones up. See\n   * {@link ClickableComponent#handleKeyDown} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    if (!MenuKeys.some(function (key) {\n      return keycode.isEventKey(event, key);\n    })) {\n      // Pass keydown handling up for unused keys\n      _ClickableComponent.prototype.handleKeyDown.call(this, event);\n    }\n  }\n  /**\n   * Any click on a `MenuItem` puts it into the selected state.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    this.selected(true);\n  }\n  /**\n   * Set the state for this menu item as selected or not.\n   *\n   * @param {boolean} selected\n   *        if the menu item is selected or not\n   */\n  ;\n\n  _proto.selected = function selected(_selected) {\n    if (this.selectable) {\n      if (_selected) {\n        this.addClass('vjs-selected');\n        this.el_.setAttribute('aria-checked', 'true'); // aria-checked isn't fully supported by browsers/screen readers,\n        // so indicate selected state to screen reader in the control text.\n\n        this.controlText(', selected');\n        this.isSelected_ = true;\n      } else {\n        this.removeClass('vjs-selected');\n        this.el_.setAttribute('aria-checked', 'false'); // Indicate un-selected state to screen reader\n\n        this.controlText('');\n        this.isSelected_ = false;\n      }\n    }\n  };\n\n  return MenuItem;\n}(ClickableComponent);\n\nComponent$1.registerComponent('MenuItem', MenuItem);\n/**\n * The specific menu item type for selecting a language within a text track kind\n *\n * @extends MenuItem\n */\n\nvar TextTrackMenuItem = /*#__PURE__*/function (_MenuItem) {\n  _inheritsLoose(TextTrackMenuItem, _MenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function TextTrackMenuItem(player, options) {\n    var _this;\n\n    var track = options.track;\n    var tracks = player.textTracks(); // Modify options for parent MenuItem class's init.\n\n    options.label = track.label || track.language || 'Unknown';\n    options.selected = track.mode === 'showing';\n    _this = _MenuItem.call(this, player, options) || this;\n    _this.track = track; // Determine the relevant kind(s) of tracks for this component and filter\n    // out empty kinds.\n\n    _this.kinds = (options.kinds || [options.kind || _this.track.kind]).filter(Boolean);\n\n    var changeHandler = function changeHandler() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.handleTracksChange.apply(_assertThisInitialized(_this), args);\n    };\n\n    var selectedLanguageChangeHandler = function selectedLanguageChangeHandler() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      _this.handleSelectedLanguageChange.apply(_assertThisInitialized(_this), args);\n    };\n\n    player.on(['loadstart', 'texttrackchange'], changeHandler);\n    tracks.addEventListener('change', changeHandler);\n    tracks.addEventListener('selectedlanguagechange', selectedLanguageChangeHandler);\n\n    _this.on('dispose', function () {\n      player.off(['loadstart', 'texttrackchange'], changeHandler);\n      tracks.removeEventListener('change', changeHandler);\n      tracks.removeEventListener('selectedlanguagechange', selectedLanguageChangeHandler);\n    }); // iOS7 doesn't dispatch change events to TextTrackLists when an\n    // associated track's mode changes. Without something like\n    // Object.observe() (also not present on iOS7), it's not\n    // possible to detect changes to the mode attribute and polyfill\n    // the change event. As a poor substitute, we manually dispatch\n    // change events whenever the controls modify the mode.\n\n\n    if (tracks.onchange === undefined) {\n      var event;\n\n      _this.on(['tap', 'click'], function () {\n        if (_typeof(window$1.Event) !== 'object') {\n          // Android 2.3 throws an Illegal Constructor error for window.Event\n          try {\n            event = new window$1.Event('change');\n          } catch (err) {// continue regardless of error\n          }\n        }\n\n        if (!event) {\n          event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n        }\n\n        tracks.dispatchEvent(event);\n      });\n    } // set the default state based on current tracks\n\n\n    _this.handleTracksChange();\n\n    return _this;\n  }\n  /**\n   * This gets called when an `TextTrackMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  var _proto = TextTrackMenuItem.prototype;\n\n  _proto.handleClick = function handleClick(event) {\n    var referenceTrack = this.track;\n    var tracks = this.player_.textTracks();\n\n    _MenuItem.prototype.handleClick.call(this, event);\n\n    if (!tracks) {\n      return;\n    }\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i]; // If the track from the text tracks list is not of the right kind,\n      // skip it. We do not want to affect tracks of incompatible kind(s).\n\n      if (this.kinds.indexOf(track.kind) === -1) {\n        continue;\n      } // If this text track is the component's track and it is not showing,\n      // set it to showing.\n\n\n      if (track === referenceTrack) {\n        if (track.mode !== 'showing') {\n          track.mode = 'showing';\n        } // If this text track is not the component's track and it is not\n        // disabled, set it to disabled.\n\n      } else if (track.mode !== 'disabled') {\n        track.mode = 'disabled';\n      }\n    }\n  }\n  /**\n   * Handle text track list change\n   *\n   * @param {EventTarget~Event} event\n   *        The `change` event that caused this function to be called.\n   *\n   * @listens TextTrackList#change\n   */\n  ;\n\n  _proto.handleTracksChange = function handleTracksChange(event) {\n    var shouldBeSelected = this.track.mode === 'showing'; // Prevent redundant selected() calls because they may cause\n    // screen readers to read the appended control text unnecessarily\n\n    if (shouldBeSelected !== this.isSelected_) {\n      this.selected(shouldBeSelected);\n    }\n  };\n\n  _proto.handleSelectedLanguageChange = function handleSelectedLanguageChange(event) {\n    if (this.track.mode === 'showing') {\n      var selectedLanguage = this.player_.cache_.selectedLanguage; // Don't replace the kind of track across the same language\n\n      if (selectedLanguage && selectedLanguage.enabled && selectedLanguage.language === this.track.language && selectedLanguage.kind !== this.track.kind) {\n        return;\n      }\n\n      this.player_.cache_.selectedLanguage = {\n        enabled: true,\n        language: this.track.language,\n        kind: this.track.kind\n      };\n    }\n  };\n\n  _proto.dispose = function dispose() {\n    // remove reference to track object on dispose\n    this.track = null;\n\n    _MenuItem.prototype.dispose.call(this);\n  };\n\n  return TextTrackMenuItem;\n}(MenuItem);\n\nComponent$1.registerComponent('TextTrackMenuItem', TextTrackMenuItem);\n/**\n * A special menu item for turning of a specific type of text track\n *\n * @extends TextTrackMenuItem\n */\n\nvar OffTextTrackMenuItem = /*#__PURE__*/function (_TextTrackMenuItem) {\n  _inheritsLoose(OffTextTrackMenuItem, _TextTrackMenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function OffTextTrackMenuItem(player, options) {\n    // Create pseudo track info\n    // Requires options['kind']\n    options.track = {\n      player: player,\n      // it is no longer necessary to store `kind` or `kinds` on the track itself\n      // since they are now stored in the `kinds` property of all instances of\n      // TextTrackMenuItem, but this will remain for backwards compatibility\n      kind: options.kind,\n      kinds: options.kinds,\n      \"default\": false,\n      mode: 'disabled'\n    };\n\n    if (!options.kinds) {\n      options.kinds = [options.kind];\n    }\n\n    if (options.label) {\n      options.track.label = options.label;\n    } else {\n      options.track.label = options.kinds.join(' and ') + ' off';\n    } // MenuItem is selectable\n\n\n    options.selectable = true; // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n\n    options.multiSelectable = false;\n    return _TextTrackMenuItem.call(this, player, options) || this;\n  }\n  /**\n   * Handle text track change\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run\n   */\n\n\n  var _proto = OffTextTrackMenuItem.prototype;\n\n  _proto.handleTracksChange = function handleTracksChange(event) {\n    var tracks = this.player().textTracks();\n    var shouldBeSelected = true;\n\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (this.options_.kinds.indexOf(track.kind) > -1 && track.mode === 'showing') {\n        shouldBeSelected = false;\n        break;\n      }\n    } // Prevent redundant selected() calls because they may cause\n    // screen readers to read the appended control text unnecessarily\n\n\n    if (shouldBeSelected !== this.isSelected_) {\n      this.selected(shouldBeSelected);\n    }\n  };\n\n  _proto.handleSelectedLanguageChange = function handleSelectedLanguageChange(event) {\n    var tracks = this.player().textTracks();\n    var allHidden = true;\n\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (['captions', 'descriptions', 'subtitles'].indexOf(track.kind) > -1 && track.mode === 'showing') {\n        allHidden = false;\n        break;\n      }\n    }\n\n    if (allHidden) {\n      this.player_.cache_.selectedLanguage = {\n        enabled: false\n      };\n    }\n  };\n\n  return OffTextTrackMenuItem;\n}(TextTrackMenuItem);\n\nComponent$1.registerComponent('OffTextTrackMenuItem', OffTextTrackMenuItem);\n/**\n * The base class for buttons that toggle specific text track types (e.g. subtitles)\n *\n * @extends MenuButton\n */\n\nvar TextTrackButton = /*#__PURE__*/function (_TrackButton) {\n  _inheritsLoose(TextTrackButton, _TrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function TextTrackButton(player, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    options.tracks = player.textTracks();\n    return _TrackButton.call(this, player, options) || this;\n  }\n  /**\n   * Create a menu item for each text track\n   *\n   * @param {TextTrackMenuItem[]} [items=[]]\n   *        Existing array of items to use during creation\n   *\n   * @return {TextTrackMenuItem[]}\n   *         Array of menu items that were created\n   */\n\n\n  var _proto = TextTrackButton.prototype;\n\n  _proto.createItems = function createItems(items, TrackMenuItem) {\n    if (items === void 0) {\n      items = [];\n    }\n\n    if (TrackMenuItem === void 0) {\n      TrackMenuItem = TextTrackMenuItem;\n    } // Label is an override for the [track] off label\n    // USed to localise captions/subtitles\n\n\n    var label;\n\n    if (this.label_) {\n      label = this.label_ + \" off\";\n    } // Add an OFF menu item to turn all tracks off\n\n\n    items.push(new OffTextTrackMenuItem(this.player_, {\n      kinds: this.kinds_,\n      kind: this.kind_,\n      label: label\n    }));\n    this.hideThreshold_ += 1;\n    var tracks = this.player_.textTracks();\n\n    if (!Array.isArray(this.kinds_)) {\n      this.kinds_ = [this.kind_];\n    }\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i]; // only add tracks that are of an appropriate kind and have a label\n\n      if (this.kinds_.indexOf(track.kind) > -1) {\n        var item = new TrackMenuItem(this.player_, {\n          track: track,\n          kinds: this.kinds_,\n          kind: this.kind_,\n          // MenuItem is selectable\n          selectable: true,\n          // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n          multiSelectable: false\n        });\n        item.addClass(\"vjs-\" + track.kind + \"-menu-item\");\n        items.push(item);\n      }\n    }\n\n    return items;\n  };\n\n  return TextTrackButton;\n}(TrackButton);\n\nComponent$1.registerComponent('TextTrackButton', TextTrackButton);\n/**\n * The chapter track menu item\n *\n * @extends MenuItem\n */\n\nvar ChaptersTrackMenuItem = /*#__PURE__*/function (_MenuItem) {\n  _inheritsLoose(ChaptersTrackMenuItem, _MenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function ChaptersTrackMenuItem(player, options) {\n    var _this;\n\n    var track = options.track;\n    var cue = options.cue;\n    var currentTime = player.currentTime(); // Modify options for parent MenuItem class's init.\n\n    options.selectable = true;\n    options.multiSelectable = false;\n    options.label = cue.text;\n    options.selected = cue.startTime <= currentTime && currentTime < cue.endTime;\n    _this = _MenuItem.call(this, player, options) || this;\n    _this.track = track;\n    _this.cue = cue;\n    track.addEventListener('cuechange', bind(_assertThisInitialized(_this), _this.update));\n    return _this;\n  }\n  /**\n   * This gets called when an `ChaptersTrackMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  var _proto = ChaptersTrackMenuItem.prototype;\n\n  _proto.handleClick = function handleClick(event) {\n    _MenuItem.prototype.handleClick.call(this);\n\n    this.player_.currentTime(this.cue.startTime);\n    this.update(this.cue.startTime);\n  }\n  /**\n   * Update chapter menu item\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `cuechange` event that caused this function to run.\n   *\n   * @listens TextTrack#cuechange\n   */\n  ;\n\n  _proto.update = function update(event) {\n    var cue = this.cue;\n    var currentTime = this.player_.currentTime(); // vjs.log(currentTime, cue.startTime);\n\n    this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);\n  };\n\n  return ChaptersTrackMenuItem;\n}(MenuItem);\n\nComponent$1.registerComponent('ChaptersTrackMenuItem', ChaptersTrackMenuItem);\n/**\n * The button component for toggling and selecting chapters\n * Chapters act much differently than other text tracks\n * Cues are navigation vs. other tracks of alternative languages\n *\n * @extends TextTrackButton\n */\n\nvar ChaptersButton = /*#__PURE__*/function (_TextTrackButton) {\n  _inheritsLoose(ChaptersButton, _TextTrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this function is ready.\n   */\n\n\n  function ChaptersButton(player, options, ready) {\n    return _TextTrackButton.call(this, player, options, ready) || this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = ChaptersButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-chapters-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-chapters-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  }\n  /**\n   * Update the menu based on the current state of its items.\n   *\n   * @param {EventTarget~Event} [event]\n   *        An event that triggered this function to run.\n   *\n   * @listens TextTrackList#addtrack\n   * @listens TextTrackList#removetrack\n   * @listens TextTrackList#change\n   */\n  ;\n\n  _proto.update = function update(event) {\n    if (!this.track_ || event && (event.type === 'addtrack' || event.type === 'removetrack')) {\n      this.setTrack(this.findChaptersTrack());\n    }\n\n    _TextTrackButton.prototype.update.call(this);\n  }\n  /**\n   * Set the currently selected track for the chapters button.\n   *\n   * @param {TextTrack} track\n   *        The new track to select. Nothing will change if this is the currently selected\n   *        track.\n   */\n  ;\n\n  _proto.setTrack = function setTrack(track) {\n    if (this.track_ === track) {\n      return;\n    }\n\n    if (!this.updateHandler_) {\n      this.updateHandler_ = this.update.bind(this);\n    } // here this.track_ refers to the old track instance\n\n\n    if (this.track_) {\n      var remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n\n      if (remoteTextTrackEl) {\n        remoteTextTrackEl.removeEventListener('load', this.updateHandler_);\n      }\n\n      this.track_ = null;\n    }\n\n    this.track_ = track; // here this.track_ refers to the new track instance\n\n    if (this.track_) {\n      this.track_.mode = 'hidden';\n\n      var _remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n\n      if (_remoteTextTrackEl) {\n        _remoteTextTrackEl.addEventListener('load', this.updateHandler_);\n      }\n    }\n  }\n  /**\n   * Find the track object that is currently in use by this ChaptersButton\n   *\n   * @return {TextTrack|undefined}\n   *         The current track or undefined if none was found.\n   */\n  ;\n\n  _proto.findChaptersTrack = function findChaptersTrack() {\n    var tracks = this.player_.textTracks() || [];\n\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      // We will always choose the last track as our chaptersTrack\n      var track = tracks[i];\n\n      if (track.kind === this.kind_) {\n        return track;\n      }\n    }\n  }\n  /**\n   * Get the caption for the ChaptersButton based on the track label. This will also\n   * use the current tracks localized kind as a fallback if a label does not exist.\n   *\n   * @return {string}\n   *         The tracks current label or the localized track kind.\n   */\n  ;\n\n  _proto.getMenuCaption = function getMenuCaption() {\n    if (this.track_ && this.track_.label) {\n      return this.track_.label;\n    }\n\n    return this.localize(toTitleCase$1(this.kind_));\n  }\n  /**\n   * Create menu from chapter track\n   *\n   * @return {Menu}\n   *         New menu for the chapter buttons\n   */\n  ;\n\n  _proto.createMenu = function createMenu() {\n    this.options_.title = this.getMenuCaption();\n    return _TextTrackButton.prototype.createMenu.call(this);\n  }\n  /**\n   * Create a menu item for each text track\n   *\n   * @return {TextTrackMenuItem[]}\n   *         Array of menu items\n   */\n  ;\n\n  _proto.createItems = function createItems() {\n    var items = [];\n\n    if (!this.track_) {\n      return items;\n    }\n\n    var cues = this.track_.cues;\n\n    if (!cues) {\n      return items;\n    }\n\n    for (var i = 0, l = cues.length; i < l; i++) {\n      var cue = cues[i];\n      var mi = new ChaptersTrackMenuItem(this.player_, {\n        track: this.track_,\n        cue: cue\n      });\n      items.push(mi);\n    }\n\n    return items;\n  };\n\n  return ChaptersButton;\n}(TextTrackButton);\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nChaptersButton.prototype.kind_ = 'chapters';\n/**\n * The text that should display over the `ChaptersButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\nChaptersButton.prototype.controlText_ = 'Chapters';\nComponent$1.registerComponent('ChaptersButton', ChaptersButton);\n/**\n * The button component for toggling and selecting descriptions\n *\n * @extends TextTrackButton\n */\n\nvar DescriptionsButton = /*#__PURE__*/function (_TextTrackButton) {\n  _inheritsLoose(DescriptionsButton, _TextTrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n\n\n  function DescriptionsButton(player, options, ready) {\n    var _this;\n\n    _this = _TextTrackButton.call(this, player, options, ready) || this;\n    var tracks = player.textTracks();\n    var changeHandler = bind(_assertThisInitialized(_this), _this.handleTracksChange);\n    tracks.addEventListener('change', changeHandler);\n\n    _this.on('dispose', function () {\n      tracks.removeEventListener('change', changeHandler);\n    });\n\n    return _this;\n  }\n  /**\n   * Handle text track change\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run\n   *\n   * @listens TextTrackList#change\n   */\n\n\n  var _proto = DescriptionsButton.prototype;\n\n  _proto.handleTracksChange = function handleTracksChange(event) {\n    var tracks = this.player().textTracks();\n    var disabled = false; // Check whether a track of a different kind is showing\n\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (track.kind !== this.kind_ && track.mode === 'showing') {\n        disabled = true;\n        break;\n      }\n    } // If another track is showing, disable this menu button\n\n\n    if (disabled) {\n      this.disable();\n    } else {\n      this.enable();\n    }\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-descriptions-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-descriptions-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  return DescriptionsButton;\n}(TextTrackButton);\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nDescriptionsButton.prototype.kind_ = 'descriptions';\n/**\n * The text that should display over the `DescriptionsButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\nDescriptionsButton.prototype.controlText_ = 'Descriptions';\nComponent$1.registerComponent('DescriptionsButton', DescriptionsButton);\n/**\n * The button component for toggling and selecting subtitles\n *\n * @extends TextTrackButton\n */\n\nvar SubtitlesButton = /*#__PURE__*/function (_TextTrackButton) {\n  _inheritsLoose(SubtitlesButton, _TextTrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n\n\n  function SubtitlesButton(player, options, ready) {\n    return _TextTrackButton.call(this, player, options, ready) || this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = SubtitlesButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-subtitles-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-subtitles-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  return SubtitlesButton;\n}(TextTrackButton);\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nSubtitlesButton.prototype.kind_ = 'subtitles';\n/**\n * The text that should display over the `SubtitlesButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\nSubtitlesButton.prototype.controlText_ = 'Subtitles';\nComponent$1.registerComponent('SubtitlesButton', SubtitlesButton);\n/**\n * The menu item for caption track settings menu\n *\n * @extends TextTrackMenuItem\n */\n\nvar CaptionSettingsMenuItem = /*#__PURE__*/function (_TextTrackMenuItem) {\n  _inheritsLoose(CaptionSettingsMenuItem, _TextTrackMenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function CaptionSettingsMenuItem(player, options) {\n    var _this;\n\n    options.track = {\n      player: player,\n      kind: options.kind,\n      label: options.kind + ' settings',\n      selectable: false,\n      \"default\": false,\n      mode: 'disabled'\n    }; // CaptionSettingsMenuItem has no concept of 'selected'\n\n    options.selectable = false;\n    options.name = 'CaptionSettingsMenuItem';\n    _this = _TextTrackMenuItem.call(this, player, options) || this;\n\n    _this.addClass('vjs-texttrack-settings');\n\n    _this.controlText(', opens ' + options.kind + ' settings dialog');\n\n    return _this;\n  }\n  /**\n   * This gets called when an `CaptionSettingsMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  var _proto = CaptionSettingsMenuItem.prototype;\n\n  _proto.handleClick = function handleClick(event) {\n    this.player().getChild('textTrackSettings').open();\n  };\n\n  return CaptionSettingsMenuItem;\n}(TextTrackMenuItem);\n\nComponent$1.registerComponent('CaptionSettingsMenuItem', CaptionSettingsMenuItem);\n/**\n * The button component for toggling and selecting captions\n *\n * @extends TextTrackButton\n */\n\nvar CaptionsButton = /*#__PURE__*/function (_TextTrackButton) {\n  _inheritsLoose(CaptionsButton, _TextTrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n\n\n  function CaptionsButton(player, options, ready) {\n    return _TextTrackButton.call(this, player, options, ready) || this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = CaptionsButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-captions-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-captions-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  }\n  /**\n   * Create caption menu items\n   *\n   * @return {CaptionSettingsMenuItem[]}\n   *         The array of current menu items.\n   */\n  ;\n\n  _proto.createItems = function createItems() {\n    var items = [];\n\n    if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild('textTrackSettings')) {\n      items.push(new CaptionSettingsMenuItem(this.player_, {\n        kind: this.kind_\n      }));\n      this.hideThreshold_ += 1;\n    }\n\n    return _TextTrackButton.prototype.createItems.call(this, items);\n  };\n\n  return CaptionsButton;\n}(TextTrackButton);\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nCaptionsButton.prototype.kind_ = 'captions';\n/**\n * The text that should display over the `CaptionsButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\nCaptionsButton.prototype.controlText_ = 'Captions';\nComponent$1.registerComponent('CaptionsButton', CaptionsButton);\n/**\n * SubsCapsMenuItem has an [cc] icon to distinguish captions from subtitles\n * in the SubsCapsMenu.\n *\n * @extends TextTrackMenuItem\n */\n\nvar SubsCapsMenuItem = /*#__PURE__*/function (_TextTrackMenuItem) {\n  _inheritsLoose(SubsCapsMenuItem, _TextTrackMenuItem);\n\n  function SubsCapsMenuItem() {\n    return _TextTrackMenuItem.apply(this, arguments) || this;\n  }\n\n  var _proto = SubsCapsMenuItem.prototype;\n\n  _proto.createEl = function createEl$1(type, props, attrs) {\n    var el = _TextTrackMenuItem.prototype.createEl.call(this, type, props, attrs);\n\n    var parentSpan = el.querySelector('.vjs-menu-item-text');\n\n    if (this.options_.track.kind === 'captions') {\n      parentSpan.appendChild(createEl('span', {\n        className: 'vjs-icon-placeholder'\n      }, {\n        'aria-hidden': true\n      }));\n      parentSpan.appendChild(createEl('span', {\n        className: 'vjs-control-text',\n        // space added as the text will visually flow with the\n        // label\n        textContent: \" \" + this.localize('Captions')\n      }));\n    }\n\n    return el;\n  };\n\n  return SubsCapsMenuItem;\n}(TextTrackMenuItem);\n\nComponent$1.registerComponent('SubsCapsMenuItem', SubsCapsMenuItem);\n/**\n * The button component for toggling and selecting captions and/or subtitles\n *\n * @extends TextTrackButton\n */\n\nvar SubsCapsButton = /*#__PURE__*/function (_TextTrackButton) {\n  _inheritsLoose(SubsCapsButton, _TextTrackButton);\n\n  function SubsCapsButton(player, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _TextTrackButton.call(this, player, options) || this; // Although North America uses \"captions\" in most cases for\n    // \"captions and subtitles\" other locales use \"subtitles\"\n\n    _this.label_ = 'subtitles';\n\n    if (['en', 'en-us', 'en-ca', 'fr-ca'].indexOf(_this.player_.language_) > -1) {\n      _this.label_ = 'captions';\n    }\n\n    _this.menuButton_.controlText(toTitleCase$1(_this.label_));\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = SubsCapsButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-subs-caps-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-subs-caps-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  }\n  /**\n   * Create caption/subtitles menu items\n   *\n   * @return {CaptionSettingsMenuItem[]}\n   *         The array of current menu items.\n   */\n  ;\n\n  _proto.createItems = function createItems() {\n    var items = [];\n\n    if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild('textTrackSettings')) {\n      items.push(new CaptionSettingsMenuItem(this.player_, {\n        kind: this.label_\n      }));\n      this.hideThreshold_ += 1;\n    }\n\n    items = _TextTrackButton.prototype.createItems.call(this, items, SubsCapsMenuItem);\n    return items;\n  };\n\n  return SubsCapsButton;\n}(TextTrackButton);\n/**\n * `kind`s of TextTrack to look for to associate it with this menu.\n *\n * @type {array}\n * @private\n */\n\n\nSubsCapsButton.prototype.kinds_ = ['captions', 'subtitles'];\n/**\n * The text that should display over the `SubsCapsButton`s controls.\n *\n *\n * @type {string}\n * @private\n */\n\nSubsCapsButton.prototype.controlText_ = 'Subtitles';\nComponent$1.registerComponent('SubsCapsButton', SubsCapsButton);\n/**\n * An {@link AudioTrack} {@link MenuItem}\n *\n * @extends MenuItem\n */\n\nvar AudioTrackMenuItem = /*#__PURE__*/function (_MenuItem) {\n  _inheritsLoose(AudioTrackMenuItem, _MenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function AudioTrackMenuItem(player, options) {\n    var _this;\n\n    var track = options.track;\n    var tracks = player.audioTracks(); // Modify options for parent MenuItem class's init.\n\n    options.label = track.label || track.language || 'Unknown';\n    options.selected = track.enabled;\n    _this = _MenuItem.call(this, player, options) || this;\n    _this.track = track;\n\n    _this.addClass(\"vjs-\" + track.kind + \"-menu-item\");\n\n    var changeHandler = function changeHandler() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.handleTracksChange.apply(_assertThisInitialized(_this), args);\n    };\n\n    tracks.addEventListener('change', changeHandler);\n\n    _this.on('dispose', function () {\n      tracks.removeEventListener('change', changeHandler);\n    });\n\n    return _this;\n  }\n\n  var _proto = AudioTrackMenuItem.prototype;\n\n  _proto.createEl = function createEl$1(type, props, attrs) {\n    var el = _MenuItem.prototype.createEl.call(this, type, props, attrs);\n\n    var parentSpan = el.querySelector('.vjs-menu-item-text');\n\n    if (this.options_.track.kind === 'main-desc') {\n      parentSpan.appendChild(createEl('span', {\n        className: 'vjs-icon-placeholder'\n      }, {\n        'aria-hidden': true\n      }));\n      parentSpan.appendChild(createEl('span', {\n        className: 'vjs-control-text',\n        textContent: ' ' + this.localize('Descriptions')\n      }));\n    }\n\n    return el;\n  }\n  /**\n   * This gets called when an `AudioTrackMenuItem is \"clicked\". See {@link ClickableComponent}\n   * for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    _MenuItem.prototype.handleClick.call(this, event); // the audio track list will automatically toggle other tracks\n    // off for us.\n\n\n    this.track.enabled = true; // when native audio tracks are used, we want to make sure that other tracks are turned off\n\n    if (this.player_.tech_.featuresNativeAudioTracks) {\n      var tracks = this.player_.audioTracks();\n\n      for (var i = 0; i < tracks.length; i++) {\n        var track = tracks[i]; // skip the current track since we enabled it above\n\n        if (track === this.track) {\n          continue;\n        }\n\n        track.enabled = track === this.track;\n      }\n    }\n  }\n  /**\n   * Handle any {@link AudioTrack} change.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link AudioTrackList#change} event that caused this to run.\n   *\n   * @listens AudioTrackList#change\n   */\n  ;\n\n  _proto.handleTracksChange = function handleTracksChange(event) {\n    this.selected(this.track.enabled);\n  };\n\n  return AudioTrackMenuItem;\n}(MenuItem);\n\nComponent$1.registerComponent('AudioTrackMenuItem', AudioTrackMenuItem);\n/**\n * The base class for buttons that toggle specific {@link AudioTrack} types.\n *\n * @extends TrackButton\n */\n\nvar AudioTrackButton = /*#__PURE__*/function (_TrackButton) {\n  _inheritsLoose(AudioTrackButton, _TrackButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function AudioTrackButton(player, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    options.tracks = player.audioTracks();\n    return _TrackButton.call(this, player, options) || this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  var _proto = AudioTrackButton.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-audio-button \" + _TrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-audio-button \" + _TrackButton.prototype.buildWrapperCSSClass.call(this);\n  }\n  /**\n   * Create a menu item for each audio track\n   *\n   * @param {AudioTrackMenuItem[]} [items=[]]\n   *        An array of existing menu items to use.\n   *\n   * @return {AudioTrackMenuItem[]}\n   *         An array of menu items\n   */\n  ;\n\n  _proto.createItems = function createItems(items) {\n    if (items === void 0) {\n      items = [];\n    } // if there's only one audio track, there no point in showing it\n\n\n    this.hideThreshold_ = 1;\n    var tracks = this.player_.audioTracks();\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n      items.push(new AudioTrackMenuItem(this.player_, {\n        track: track,\n        // MenuItem is selectable\n        selectable: true,\n        // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n        multiSelectable: false\n      }));\n    }\n\n    return items;\n  };\n\n  return AudioTrackButton;\n}(TrackButton);\n/**\n * The text that should display over the `AudioTrackButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nAudioTrackButton.prototype.controlText_ = 'Audio Track';\nComponent$1.registerComponent('AudioTrackButton', AudioTrackButton);\n/**\n * The specific menu item type for selecting a playback rate.\n *\n * @extends MenuItem\n */\n\nvar PlaybackRateMenuItem = /*#__PURE__*/function (_MenuItem) {\n  _inheritsLoose(PlaybackRateMenuItem, _MenuItem);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function PlaybackRateMenuItem(player, options) {\n    var _this;\n\n    var label = options.rate;\n    var rate = parseFloat(label, 10); // Modify options for parent MenuItem class's init.\n\n    options.label = label;\n    options.selected = rate === player.playbackRate();\n    options.selectable = true;\n    options.multiSelectable = false;\n    _this = _MenuItem.call(this, player, options) || this;\n    _this.label = label;\n    _this.rate = rate;\n\n    _this.on(player, 'ratechange', function (e) {\n      return _this.update(e);\n    });\n\n    return _this;\n  }\n  /**\n   * This gets called when an `PlaybackRateMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  var _proto = PlaybackRateMenuItem.prototype;\n\n  _proto.handleClick = function handleClick(event) {\n    _MenuItem.prototype.handleClick.call(this);\n\n    this.player().playbackRate(this.rate);\n  }\n  /**\n   * Update the PlaybackRateMenuItem when the playbackrate changes.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `ratechange` event that caused this function to run.\n   *\n   * @listens Player#ratechange\n   */\n  ;\n\n  _proto.update = function update(event) {\n    this.selected(this.player().playbackRate() === this.rate);\n  };\n\n  return PlaybackRateMenuItem;\n}(MenuItem);\n/**\n * The text that should display over the `PlaybackRateMenuItem`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlaybackRateMenuItem.prototype.contentElType = 'button';\nComponent$1.registerComponent('PlaybackRateMenuItem', PlaybackRateMenuItem);\n/**\n * The component for controlling the playback rate.\n *\n * @extends MenuButton\n */\n\nvar PlaybackRateMenuButton = /*#__PURE__*/function (_MenuButton) {\n  _inheritsLoose(PlaybackRateMenuButton, _MenuButton);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n\n\n  function PlaybackRateMenuButton(player, options) {\n    var _this;\n\n    _this = _MenuButton.call(this, player, options) || this;\n\n    _this.menuButton_.el_.setAttribute('aria-describedby', _this.labelElId_);\n\n    _this.updateVisibility();\n\n    _this.updateLabel();\n\n    _this.on(player, 'loadstart', function (e) {\n      return _this.updateVisibility(e);\n    });\n\n    _this.on(player, 'ratechange', function (e) {\n      return _this.updateLabel(e);\n    });\n\n    _this.on(player, 'playbackrateschange', function (e) {\n      return _this.handlePlaybackRateschange(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  var _proto = PlaybackRateMenuButton.prototype;\n\n  _proto.createEl = function createEl$1() {\n    var el = _MenuButton.prototype.createEl.call(this);\n\n    this.labelElId_ = 'vjs-playback-rate-value-label-' + this.id_;\n    this.labelEl_ = createEl('div', {\n      className: 'vjs-playback-rate-value',\n      id: this.labelElId_,\n      textContent: '1x'\n    });\n    el.appendChild(this.labelEl_);\n    return el;\n  };\n\n  _proto.dispose = function dispose() {\n    this.labelEl_ = null;\n\n    _MenuButton.prototype.dispose.call(this);\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  ;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-playback-rate \" + _MenuButton.prototype.buildCSSClass.call(this);\n  };\n\n  _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return \"vjs-playback-rate \" + _MenuButton.prototype.buildWrapperCSSClass.call(this);\n  }\n  /**\n   * Create the list of menu items. Specific to each subclass.\n   *\n   */\n  ;\n\n  _proto.createItems = function createItems() {\n    var rates = this.playbackRates();\n    var items = [];\n\n    for (var i = rates.length - 1; i >= 0; i--) {\n      items.push(new PlaybackRateMenuItem(this.player(), {\n        rate: rates[i] + 'x'\n      }));\n    }\n\n    return items;\n  }\n  /**\n   * Updates ARIA accessibility attributes\n   */\n  ;\n\n  _proto.updateARIAAttributes = function updateARIAAttributes() {\n    // Current playback rate\n    this.el().setAttribute('aria-valuenow', this.player().playbackRate());\n  }\n  /**\n   * This gets called when an `PlaybackRateMenuButton` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n  ;\n\n  _proto.handleClick = function handleClick(event) {\n    // select next rate option\n    var currentRate = this.player().playbackRate();\n    var rates = this.playbackRates();\n    var currentIndex = rates.indexOf(currentRate); // this get the next rate and it will select first one if the last one currently selected\n\n    var newIndex = (currentIndex + 1) % rates.length;\n    this.player().playbackRate(rates[newIndex]);\n  }\n  /**\n   * On playbackrateschange, update the menu to account for the new items.\n   *\n   * @listens Player#playbackrateschange\n   */\n  ;\n\n  _proto.handlePlaybackRateschange = function handlePlaybackRateschange(event) {\n    this.update();\n  }\n  /**\n   * Get possible playback rates\n   *\n   * @return {Array}\n   *         All possible playback rates\n   */\n  ;\n\n  _proto.playbackRates = function playbackRates() {\n    var player = this.player();\n    return player.playbackRates && player.playbackRates() || [];\n  }\n  /**\n   * Get whether playback rates is supported by the tech\n   * and an array of playback rates exists\n   *\n   * @return {boolean}\n   *         Whether changing playback rate is supported\n   */\n  ;\n\n  _proto.playbackRateSupported = function playbackRateSupported() {\n    return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;\n  }\n  /**\n   * Hide playback rate controls when they're no playback rate options to select\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#loadstart\n   */\n  ;\n\n  _proto.updateVisibility = function updateVisibility(event) {\n    if (this.playbackRateSupported()) {\n      this.removeClass('vjs-hidden');\n    } else {\n      this.addClass('vjs-hidden');\n    }\n  }\n  /**\n   * Update button label when rate changed\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#ratechange\n   */\n  ;\n\n  _proto.updateLabel = function updateLabel(event) {\n    if (this.playbackRateSupported()) {\n      this.labelEl_.textContent = this.player().playbackRate() + 'x';\n    }\n  };\n\n  return PlaybackRateMenuButton;\n}(MenuButton);\n/**\n * The text that should display over the `FullscreenToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlaybackRateMenuButton.prototype.controlText_ = 'Playback Rate';\nComponent$1.registerComponent('PlaybackRateMenuButton', PlaybackRateMenuButton);\n/**\n * Just an empty spacer element that can be used as an append point for plugins, etc.\n * Also can be used to create space between elements when necessary.\n *\n * @extends Component\n */\n\nvar Spacer = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Spacer, _Component);\n\n  function Spacer() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Spacer.prototype;\n  /**\n  * Builds the default DOM `className`.\n  *\n  * @return {string}\n  *         The DOM `className` for this object.\n  */\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-spacer \" + _Component.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl(tag, props, attributes) {\n    if (tag === void 0) {\n      tag = 'div';\n    }\n\n    if (props === void 0) {\n      props = {};\n    }\n\n    if (attributes === void 0) {\n      attributes = {};\n    }\n\n    if (!props.className) {\n      props.className = this.buildCSSClass();\n    }\n\n    return _Component.prototype.createEl.call(this, tag, props, attributes);\n  };\n\n  return Spacer;\n}(Component$1);\n\nComponent$1.registerComponent('Spacer', Spacer);\n/**\n * Spacer specifically meant to be used as an insertion point for new plugins, etc.\n *\n * @extends Spacer\n */\n\nvar CustomControlSpacer = /*#__PURE__*/function (_Spacer) {\n  _inheritsLoose(CustomControlSpacer, _Spacer);\n\n  function CustomControlSpacer() {\n    return _Spacer.apply(this, arguments) || this;\n  }\n\n  var _proto = CustomControlSpacer.prototype;\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-custom-control-spacer \" + _Spacer.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    return _Spacer.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass(),\n      // No-flex/table-cell mode requires there be some content\n      // in the cell to fill the remaining space of the table.\n      textContent: \"\\xA0\"\n    });\n  };\n\n  return CustomControlSpacer;\n}(Spacer);\n\nComponent$1.registerComponent('CustomControlSpacer', CustomControlSpacer);\n/**\n * Container of main controls.\n *\n * @extends Component\n */\n\nvar ControlBar = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ControlBar, _Component);\n\n  function ControlBar() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = ControlBar.prototype;\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-control-bar',\n      dir: 'ltr'\n    });\n  };\n\n  return ControlBar;\n}(Component$1);\n/**\n * Default options for `ControlBar`\n *\n * @type {Object}\n * @private\n */\n\n\nControlBar.prototype.options_ = {\n  children: ['playToggle', 'volumePanel', 'currentTimeDisplay', 'timeDivider', 'durationDisplay', 'progressControl', 'liveDisplay', 'seekToLive', 'remainingTimeDisplay', 'customControlSpacer', 'playbackRateMenuButton', 'chaptersButton', 'descriptionsButton', 'subsCapsButton', 'audioTrackButton', 'fullscreenToggle']\n};\n\nif ('exitPictureInPicture' in document) {\n  ControlBar.prototype.options_.children.splice(ControlBar.prototype.options_.children.length - 1, 0, 'pictureInPictureToggle');\n}\n\nComponent$1.registerComponent('ControlBar', ControlBar);\n/**\n * A display that indicates an error has occurred. This means that the video\n * is unplayable.\n *\n * @extends ModalDialog\n */\n\nvar ErrorDisplay = /*#__PURE__*/function (_ModalDialog) {\n  _inheritsLoose(ErrorDisplay, _ModalDialog);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param  {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param  {Object} [options]\n   *         The key/value store of player options.\n   */\n\n\n  function ErrorDisplay(player, options) {\n    var _this;\n\n    _this = _ModalDialog.call(this, player, options) || this;\n\n    _this.on(player, 'error', function (e) {\n      return _this.open(e);\n    });\n\n    return _this;\n  }\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   *\n   * @deprecated Since version 5.\n   */\n\n\n  var _proto = ErrorDisplay.prototype;\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return \"vjs-error-display \" + _ModalDialog.prototype.buildCSSClass.call(this);\n  }\n  /**\n   * Gets the localized error message based on the `Player`s error.\n   *\n   * @return {string}\n   *         The `Player`s error message localized or an empty string.\n   */\n  ;\n\n  _proto.content = function content() {\n    var error = this.player().error();\n    return error ? this.localize(error.message) : '';\n  };\n\n  return ErrorDisplay;\n}(ModalDialog);\n/**\n * The default options for an `ErrorDisplay`.\n *\n * @private\n */\n\n\nErrorDisplay.prototype.options_ = _extends({}, ModalDialog.prototype.options_, {\n  pauseOnOpen: false,\n  fillAlways: true,\n  temporary: false,\n  uncloseable: true\n});\nComponent$1.registerComponent('ErrorDisplay', ErrorDisplay);\nvar LOCAL_STORAGE_KEY$1 = 'vjs-text-track-settings';\nvar COLOR_BLACK = ['#000', 'Black'];\nvar COLOR_BLUE = ['#00F', 'Blue'];\nvar COLOR_CYAN = ['#0FF', 'Cyan'];\nvar COLOR_GREEN = ['#0F0', 'Green'];\nvar COLOR_MAGENTA = ['#F0F', 'Magenta'];\nvar COLOR_RED = ['#F00', 'Red'];\nvar COLOR_WHITE = ['#FFF', 'White'];\nvar COLOR_YELLOW = ['#FF0', 'Yellow'];\nvar OPACITY_OPAQUE = ['1', 'Opaque'];\nvar OPACITY_SEMI = ['0.5', 'Semi-Transparent'];\nvar OPACITY_TRANS = ['0', 'Transparent']; // Configuration for the various <select> elements in the DOM of this component.\n//\n// Possible keys include:\n//\n// `default`:\n//   The default option index. Only needs to be provided if not zero.\n// `parser`:\n//   A function which is used to parse the value from the selected option in\n//   a customized way.\n// `selector`:\n//   The selector used to find the associated <select> element.\n\nvar selectConfigs = {\n  backgroundColor: {\n    selector: '.vjs-bg-color > select',\n    id: 'captions-background-color-%s',\n    label: 'Color',\n    options: [COLOR_BLACK, COLOR_WHITE, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n  },\n  backgroundOpacity: {\n    selector: '.vjs-bg-opacity > select',\n    id: 'captions-background-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_OPAQUE, OPACITY_SEMI, OPACITY_TRANS]\n  },\n  color: {\n    selector: '.vjs-fg-color > select',\n    id: 'captions-foreground-color-%s',\n    label: 'Color',\n    options: [COLOR_WHITE, COLOR_BLACK, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n  },\n  edgeStyle: {\n    selector: '.vjs-edge-style > select',\n    id: '%s',\n    label: 'Text Edge Style',\n    options: [['none', 'None'], ['raised', 'Raised'], ['depressed', 'Depressed'], ['uniform', 'Uniform'], ['dropshadow', 'Dropshadow']]\n  },\n  fontFamily: {\n    selector: '.vjs-font-family > select',\n    id: 'captions-font-family-%s',\n    label: 'Font Family',\n    options: [['proportionalSansSerif', 'Proportional Sans-Serif'], ['monospaceSansSerif', 'Monospace Sans-Serif'], ['proportionalSerif', 'Proportional Serif'], ['monospaceSerif', 'Monospace Serif'], ['casual', 'Casual'], ['script', 'Script'], ['small-caps', 'Small Caps']]\n  },\n  fontPercent: {\n    selector: '.vjs-font-percent > select',\n    id: 'captions-font-size-%s',\n    label: 'Font Size',\n    options: [['0.50', '50%'], ['0.75', '75%'], ['1.00', '100%'], ['1.25', '125%'], ['1.50', '150%'], ['1.75', '175%'], ['2.00', '200%'], ['3.00', '300%'], ['4.00', '400%']],\n    \"default\": 2,\n    parser: function parser(v) {\n      return v === '1.00' ? null : Number(v);\n    }\n  },\n  textOpacity: {\n    selector: '.vjs-text-opacity > select',\n    id: 'captions-foreground-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_OPAQUE, OPACITY_SEMI]\n  },\n  // Options for this object are defined below.\n  windowColor: {\n    selector: '.vjs-window-color > select',\n    id: 'captions-window-color-%s',\n    label: 'Color'\n  },\n  // Options for this object are defined below.\n  windowOpacity: {\n    selector: '.vjs-window-opacity > select',\n    id: 'captions-window-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_TRANS, OPACITY_SEMI, OPACITY_OPAQUE]\n  }\n};\nselectConfigs.windowColor.options = selectConfigs.backgroundColor.options;\n/**\n * Get the actual value of an option.\n *\n * @param  {string} value\n *         The value to get\n *\n * @param  {Function} [parser]\n *         Optional function to adjust the value.\n *\n * @return {Mixed}\n *         - Will be `undefined` if no value exists\n *         - Will be `undefined` if the given value is \"none\".\n *         - Will be the actual value otherwise.\n *\n * @private\n */\n\nfunction parseOptionValue(value, parser) {\n  if (parser) {\n    value = parser(value);\n  }\n\n  if (value && value !== 'none') {\n    return value;\n  }\n}\n/**\n * Gets the value of the selected <option> element within a <select> element.\n *\n * @param  {Element} el\n *         the element to look in\n *\n * @param  {Function} [parser]\n *         Optional function to adjust the value.\n *\n * @return {Mixed}\n *         - Will be `undefined` if no value exists\n *         - Will be `undefined` if the given value is \"none\".\n *         - Will be the actual value otherwise.\n *\n * @private\n */\n\n\nfunction getSelectedOptionValue(el, parser) {\n  var value = el.options[el.options.selectedIndex].value;\n  return parseOptionValue(value, parser);\n}\n/**\n * Sets the selected <option> element within a <select> element based on a\n * given value.\n *\n * @param {Element} el\n *        The element to look in.\n *\n * @param {string} value\n *        the property to look on.\n *\n * @param {Function} [parser]\n *        Optional function to adjust the value before comparing.\n *\n * @private\n */\n\n\nfunction setSelectedOption(el, value, parser) {\n  if (!value) {\n    return;\n  }\n\n  for (var i = 0; i < el.options.length; i++) {\n    if (parseOptionValue(el.options[i].value, parser) === value) {\n      el.selectedIndex = i;\n      break;\n    }\n  }\n}\n/**\n * Manipulate Text Tracks settings.\n *\n * @extends ModalDialog\n */\n\n\nvar TextTrackSettings = /*#__PURE__*/function (_ModalDialog) {\n  _inheritsLoose(TextTrackSettings, _ModalDialog);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *         The key/value store of player options.\n   */\n\n\n  function TextTrackSettings(player, options) {\n    var _this;\n\n    options.temporary = false;\n    _this = _ModalDialog.call(this, player, options) || this;\n    _this.updateDisplay = _this.updateDisplay.bind(_assertThisInitialized(_this)); // fill the modal and pretend we have opened it\n\n    _this.fill();\n\n    _this.hasBeenOpened_ = _this.hasBeenFilled_ = true;\n    _this.endDialog = createEl('p', {\n      className: 'vjs-control-text',\n      textContent: _this.localize('End of dialog window.')\n    });\n\n    _this.el().appendChild(_this.endDialog);\n\n    _this.setDefaults(); // Grab `persistTextTrackSettings` from the player options if not passed in child options\n\n\n    if (options.persistTextTrackSettings === undefined) {\n      _this.options_.persistTextTrackSettings = _this.options_.playerOptions.persistTextTrackSettings;\n    }\n\n    _this.on(_this.$('.vjs-done-button'), 'click', function () {\n      _this.saveSettings();\n\n      _this.close();\n    });\n\n    _this.on(_this.$('.vjs-default-button'), 'click', function () {\n      _this.setDefaults();\n\n      _this.updateDisplay();\n    });\n\n    each(selectConfigs, function (config) {\n      _this.on(_this.$(config.selector), 'change', _this.updateDisplay);\n    });\n\n    if (_this.options_.persistTextTrackSettings) {\n      _this.restoreSettings();\n    }\n\n    return _this;\n  }\n\n  var _proto = TextTrackSettings.prototype;\n\n  _proto.dispose = function dispose() {\n    this.endDialog = null;\n\n    _ModalDialog.prototype.dispose.call(this);\n  }\n  /**\n   * Create a <select> element with configured options.\n   *\n   * @param {string} key\n   *        Configuration key to use during creation.\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElSelect_ = function createElSelect_(key, legendId, type) {\n    var _this2 = this;\n\n    if (legendId === void 0) {\n      legendId = '';\n    }\n\n    if (type === void 0) {\n      type = 'label';\n    }\n\n    var config = selectConfigs[key];\n    var id = config.id.replace('%s', this.id_);\n    var selectLabelledbyIds = [legendId, id].join(' ').trim();\n    return [\"<\" + type + \" id=\\\"\" + id + \"\\\" class=\\\"\" + (type === 'label' ? 'vjs-label' : '') + \"\\\">\", this.localize(config.label), \"</\" + type + \">\", \"<select aria-labelledby=\\\"\" + selectLabelledbyIds + \"\\\">\"].concat(config.options.map(function (o) {\n      var optionId = id + '-' + o[1].replace(/\\W+/g, '');\n      return [\"<option id=\\\"\" + optionId + \"\\\" value=\\\"\" + o[0] + \"\\\" \", \"aria-labelledby=\\\"\" + selectLabelledbyIds + \" \" + optionId + \"\\\">\", _this2.localize(o[1]), '</option>'].join('');\n    })).concat('</select>').join('');\n  }\n  /**\n   * Create foreground color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElFgColor_ = function createElFgColor_() {\n    var legendId = \"captions-text-legend-\" + this.id_;\n    return ['<fieldset class=\"vjs-fg-color vjs-track-setting\">', \"<legend id=\\\"\" + legendId + \"\\\">\", this.localize('Text'), '</legend>', this.createElSelect_('color', legendId), '<span class=\"vjs-text-opacity vjs-opacity\">', this.createElSelect_('textOpacity', legendId), '</span>', '</fieldset>'].join('');\n  }\n  /**\n   * Create background color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElBgColor_ = function createElBgColor_() {\n    var legendId = \"captions-background-\" + this.id_;\n    return ['<fieldset class=\"vjs-bg-color vjs-track-setting\">', \"<legend id=\\\"\" + legendId + \"\\\">\", this.localize('Background'), '</legend>', this.createElSelect_('backgroundColor', legendId), '<span class=\"vjs-bg-opacity vjs-opacity\">', this.createElSelect_('backgroundOpacity', legendId), '</span>', '</fieldset>'].join('');\n  }\n  /**\n   * Create window color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElWinColor_ = function createElWinColor_() {\n    var legendId = \"captions-window-\" + this.id_;\n    return ['<fieldset class=\"vjs-window-color vjs-track-setting\">', \"<legend id=\\\"\" + legendId + \"\\\">\", this.localize('Window'), '</legend>', this.createElSelect_('windowColor', legendId), '<span class=\"vjs-window-opacity vjs-opacity\">', this.createElSelect_('windowOpacity', legendId), '</span>', '</fieldset>'].join('');\n  }\n  /**\n   * Create color elements for the component\n   *\n   * @return {Element}\n   *         The element that was created\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElColors_ = function createElColors_() {\n    return createEl('div', {\n      className: 'vjs-track-settings-colors',\n      innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join('')\n    });\n  }\n  /**\n   * Create font elements for the component\n   *\n   * @return {Element}\n   *         The element that was created.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElFont_ = function createElFont_() {\n    return createEl('div', {\n      className: 'vjs-track-settings-font',\n      innerHTML: ['<fieldset class=\"vjs-font-percent vjs-track-setting\">', this.createElSelect_('fontPercent', '', 'legend'), '</fieldset>', '<fieldset class=\"vjs-edge-style vjs-track-setting\">', this.createElSelect_('edgeStyle', '', 'legend'), '</fieldset>', '<fieldset class=\"vjs-font-family vjs-track-setting\">', this.createElSelect_('fontFamily', '', 'legend'), '</fieldset>'].join('')\n    });\n  }\n  /**\n   * Create controls for the component\n   *\n   * @return {Element}\n   *         The element that was created.\n   *\n   * @private\n   */\n  ;\n\n  _proto.createElControls_ = function createElControls_() {\n    var defaultsDescription = this.localize('restore all settings to the default values');\n    return createEl('div', {\n      className: 'vjs-track-settings-controls',\n      innerHTML: [\"<button type=\\\"button\\\" class=\\\"vjs-default-button\\\" title=\\\"\" + defaultsDescription + \"\\\">\", this.localize('Reset'), \"<span class=\\\"vjs-control-text\\\"> \" + defaultsDescription + \"</span>\", '</button>', \"<button type=\\\"button\\\" class=\\\"vjs-done-button\\\">\" + this.localize('Done') + \"</button>\"].join('')\n    });\n  };\n\n  _proto.content = function content() {\n    return [this.createElColors_(), this.createElFont_(), this.createElControls_()];\n  };\n\n  _proto.label = function label() {\n    return this.localize('Caption Settings Dialog');\n  };\n\n  _proto.description = function description() {\n    return this.localize('Beginning of dialog window. Escape will cancel and close the window.');\n  };\n\n  _proto.buildCSSClass = function buildCSSClass() {\n    return _ModalDialog.prototype.buildCSSClass.call(this) + ' vjs-text-track-settings';\n  }\n  /**\n   * Gets an object of text track settings (or null).\n   *\n   * @return {Object}\n   *         An object with config values parsed from the DOM or localStorage.\n   */\n  ;\n\n  _proto.getValues = function getValues() {\n    var _this3 = this;\n\n    return reduce(selectConfigs, function (accum, config, key) {\n      var value = getSelectedOptionValue(_this3.$(config.selector), config.parser);\n\n      if (value !== undefined) {\n        accum[key] = value;\n      }\n\n      return accum;\n    }, {});\n  }\n  /**\n   * Sets text track settings from an object of values.\n   *\n   * @param {Object} values\n   *        An object with config values parsed from the DOM or localStorage.\n   */\n  ;\n\n  _proto.setValues = function setValues(values) {\n    var _this4 = this;\n\n    each(selectConfigs, function (config, key) {\n      setSelectedOption(_this4.$(config.selector), values[key], config.parser);\n    });\n  }\n  /**\n   * Sets all `<select>` elements to their default values.\n   */\n  ;\n\n  _proto.setDefaults = function setDefaults() {\n    var _this5 = this;\n\n    each(selectConfigs, function (config) {\n      var index = config.hasOwnProperty('default') ? config[\"default\"] : 0;\n      _this5.$(config.selector).selectedIndex = index;\n    });\n  }\n  /**\n   * Restore texttrack settings from localStorage\n   */\n  ;\n\n  _proto.restoreSettings = function restoreSettings() {\n    var values;\n\n    try {\n      values = JSON.parse(window$1.localStorage.getItem(LOCAL_STORAGE_KEY$1));\n    } catch (err) {\n      log$1.warn(err);\n    }\n\n    if (values) {\n      this.setValues(values);\n    }\n  }\n  /**\n   * Save text track settings to localStorage\n   */\n  ;\n\n  _proto.saveSettings = function saveSettings() {\n    if (!this.options_.persistTextTrackSettings) {\n      return;\n    }\n\n    var values = this.getValues();\n\n    try {\n      if (Object.keys(values).length) {\n        window$1.localStorage.setItem(LOCAL_STORAGE_KEY$1, JSON.stringify(values));\n      } else {\n        window$1.localStorage.removeItem(LOCAL_STORAGE_KEY$1);\n      }\n    } catch (err) {\n      log$1.warn(err);\n    }\n  }\n  /**\n   * Update display of text track settings\n   */\n  ;\n\n  _proto.updateDisplay = function updateDisplay() {\n    var ttDisplay = this.player_.getChild('textTrackDisplay');\n\n    if (ttDisplay) {\n      ttDisplay.updateDisplay();\n    }\n  }\n  /**\n   * conditionally blur the element and refocus the captions button\n   *\n   * @private\n   */\n  ;\n\n  _proto.conditionalBlur_ = function conditionalBlur_() {\n    this.previouslyActiveEl_ = null;\n    var cb = this.player_.controlBar;\n    var subsCapsBtn = cb && cb.subsCapsButton;\n    var ccBtn = cb && cb.captionsButton;\n\n    if (subsCapsBtn) {\n      subsCapsBtn.focus();\n    } else if (ccBtn) {\n      ccBtn.focus();\n    }\n  };\n\n  return TextTrackSettings;\n}(ModalDialog);\n\nComponent$1.registerComponent('TextTrackSettings', TextTrackSettings);\n/**\n * A Resize Manager. It is in charge of triggering `playerresize` on the player in the right conditions.\n *\n * It'll either create an iframe and use a debounced resize handler on it or use the new {@link https://wicg.github.io/ResizeObserver/|ResizeObserver}.\n *\n * If the ResizeObserver is available natively, it will be used. A polyfill can be passed in as an option.\n * If a `playerresize` event is not needed, the ResizeManager component can be removed from the player, see the example below.\n * @example <caption>How to disable the resize manager</caption>\n * const player = videojs('#vid', {\n *   resizeManager: false\n * });\n *\n * @see {@link https://wicg.github.io/ResizeObserver/|ResizeObserver specification}\n *\n * @extends Component\n */\n\nvar ResizeManager = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(ResizeManager, _Component);\n  /**\n   * Create the ResizeManager.\n   *\n   * @param {Object} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of ResizeManager options.\n   *\n   * @param {Object} [options.ResizeObserver]\n   *        A polyfill for ResizeObserver can be passed in here.\n   *        If this is set to null it will ignore the native ResizeObserver and fall back to the iframe fallback.\n   */\n\n\n  function ResizeManager(player, options) {\n    var _this;\n\n    var RESIZE_OBSERVER_AVAILABLE = options.ResizeObserver || window$1.ResizeObserver; // if `null` was passed, we want to disable the ResizeObserver\n\n    if (options.ResizeObserver === null) {\n      RESIZE_OBSERVER_AVAILABLE = false;\n    } // Only create an element when ResizeObserver isn't available\n\n\n    var options_ = mergeOptions$3({\n      createEl: !RESIZE_OBSERVER_AVAILABLE,\n      reportTouchActivity: false\n    }, options);\n    _this = _Component.call(this, player, options_) || this;\n    _this.ResizeObserver = options.ResizeObserver || window$1.ResizeObserver;\n    _this.loadListener_ = null;\n    _this.resizeObserver_ = null;\n    _this.debouncedHandler_ = debounce(function () {\n      _this.resizeHandler();\n    }, 100, false, _assertThisInitialized(_this));\n\n    if (RESIZE_OBSERVER_AVAILABLE) {\n      _this.resizeObserver_ = new _this.ResizeObserver(_this.debouncedHandler_);\n\n      _this.resizeObserver_.observe(player.el());\n    } else {\n      _this.loadListener_ = function () {\n        if (!_this.el_ || !_this.el_.contentWindow) {\n          return;\n        }\n\n        var debouncedHandler_ = _this.debouncedHandler_;\n\n        var unloadListener_ = _this.unloadListener_ = function () {\n          off(this, 'resize', debouncedHandler_);\n          off(this, 'unload', unloadListener_);\n          unloadListener_ = null;\n        }; // safari and edge can unload the iframe before resizemanager dispose\n        // we have to dispose of event handlers correctly before that happens\n\n\n        on(_this.el_.contentWindow, 'unload', unloadListener_);\n        on(_this.el_.contentWindow, 'resize', debouncedHandler_);\n      };\n\n      _this.one('load', _this.loadListener_);\n    }\n\n    return _this;\n  }\n\n  var _proto = ResizeManager.prototype;\n\n  _proto.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'iframe', {\n      className: 'vjs-resize-manager',\n      tabIndex: -1\n    }, {\n      'aria-hidden': 'true'\n    });\n  }\n  /**\n   * Called when a resize is triggered on the iframe or a resize is observed via the ResizeObserver\n   *\n   * @fires Player#playerresize\n   */\n  ;\n\n  _proto.resizeHandler = function resizeHandler() {\n    /**\n     * Called when the player size has changed\n     *\n     * @event Player#playerresize\n     * @type {EventTarget~Event}\n     */\n    // make sure player is still around to trigger\n    // prevents this from causing an error after dispose\n    if (!this.player_ || !this.player_.trigger) {\n      return;\n    }\n\n    this.player_.trigger('playerresize');\n  };\n\n  _proto.dispose = function dispose() {\n    if (this.debouncedHandler_) {\n      this.debouncedHandler_.cancel();\n    }\n\n    if (this.resizeObserver_) {\n      if (this.player_.el()) {\n        this.resizeObserver_.unobserve(this.player_.el());\n      }\n\n      this.resizeObserver_.disconnect();\n    }\n\n    if (this.loadListener_) {\n      this.off('load', this.loadListener_);\n    }\n\n    if (this.el_ && this.el_.contentWindow && this.unloadListener_) {\n      this.unloadListener_.call(this.el_.contentWindow);\n    }\n\n    this.ResizeObserver = null;\n    this.resizeObserver = null;\n    this.debouncedHandler_ = null;\n    this.loadListener_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  return ResizeManager;\n}(Component$1);\n\nComponent$1.registerComponent('ResizeManager', ResizeManager);\nvar defaults = {\n  trackingThreshold: 20,\n  liveTolerance: 15\n};\n/*\n  track when we are at the live edge, and other helpers for live playback */\n\n/**\n * A class for checking live current time and determining when the player\n * is at or behind the live edge.\n */\n\nvar LiveTracker = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(LiveTracker, _Component);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {number} [options.trackingThreshold=20]\n   *        Number of seconds of live window (seekableEnd - seekableStart) that\n   *        media needs to have before the liveui will be shown.\n   *\n   * @param {number} [options.liveTolerance=15]\n   *        Number of seconds behind live that we have to be\n   *        before we will be considered non-live. Note that this will only\n   *        be used when playing at the live edge. This allows large seekable end\n   *        changes to not effect wether we are live or not.\n   */\n\n\n  function LiveTracker(player, options) {\n    var _this; // LiveTracker does not need an element\n\n\n    var options_ = mergeOptions$3(defaults, options, {\n      createEl: false\n    });\n    _this = _Component.call(this, player, options_) || this;\n\n    _this.handleVisibilityChange_ = function (e) {\n      return _this.handleVisibilityChange(e);\n    };\n\n    _this.trackLiveHandler_ = function () {\n      return _this.trackLive_();\n    };\n\n    _this.handlePlay_ = function (e) {\n      return _this.handlePlay(e);\n    };\n\n    _this.handleFirstTimeupdate_ = function (e) {\n      return _this.handleFirstTimeupdate(e);\n    };\n\n    _this.handleSeeked_ = function (e) {\n      return _this.handleSeeked(e);\n    };\n\n    _this.seekToLiveEdge_ = function (e) {\n      return _this.seekToLiveEdge(e);\n    };\n\n    _this.reset_();\n\n    _this.on(_this.player_, 'durationchange', function (e) {\n      return _this.handleDurationchange(e);\n    }); // we should try to toggle tracking on canplay as native playback engines, like Safari\n    // may not have the proper values for things like seekableEnd until then\n\n\n    _this.on(_this.player_, 'canplay', function () {\n      return _this.toggleTracking();\n    }); // we don't need to track live playback if the document is hidden,\n    // also, tracking when the document is hidden can\n    // cause the CPU to spike and eventually crash the page on IE11.\n\n\n    if (IE_VERSION && 'hidden' in document && 'visibilityState' in document) {\n      _this.on(document, 'visibilitychange', _this.handleVisibilityChange_);\n    }\n\n    return _this;\n  }\n  /**\n   * toggle tracking based on document visiblility\n   */\n\n\n  var _proto = LiveTracker.prototype;\n\n  _proto.handleVisibilityChange = function handleVisibilityChange() {\n    if (this.player_.duration() !== Infinity) {\n      return;\n    }\n\n    if (document.hidden) {\n      this.stopTracking();\n    } else {\n      this.startTracking();\n    }\n  }\n  /**\n   * all the functionality for tracking when seek end changes\n   * and for tracking how far past seek end we should be\n   */\n  ;\n\n  _proto.trackLive_ = function trackLive_() {\n    var seekable = this.player_.seekable(); // skip undefined seekable\n\n    if (!seekable || !seekable.length) {\n      return;\n    }\n\n    var newTime = Number(window$1.performance.now().toFixed(4));\n    var deltaTime = this.lastTime_ === -1 ? 0 : (newTime - this.lastTime_) / 1000;\n    this.lastTime_ = newTime;\n    this.pastSeekEnd_ = this.pastSeekEnd() + deltaTime;\n    var liveCurrentTime = this.liveCurrentTime();\n    var currentTime = this.player_.currentTime(); // we are behind live if any are true\n    // 1. the player is paused\n    // 2. the user seeked to a location 2 seconds away from live\n    // 3. the difference between live and current time is greater\n    //    liveTolerance which defaults to 15s\n\n    var isBehind = this.player_.paused() || this.seekedBehindLive_ || Math.abs(liveCurrentTime - currentTime) > this.options_.liveTolerance; // we cannot be behind if\n    // 1. until we have not seen a timeupdate yet\n    // 2. liveCurrentTime is Infinity, which happens on Android and Native Safari\n\n    if (!this.timeupdateSeen_ || liveCurrentTime === Infinity) {\n      isBehind = false;\n    }\n\n    if (isBehind !== this.behindLiveEdge_) {\n      this.behindLiveEdge_ = isBehind;\n      this.trigger('liveedgechange');\n    }\n  }\n  /**\n   * handle a durationchange event on the player\n   * and start/stop tracking accordingly.\n   */\n  ;\n\n  _proto.handleDurationchange = function handleDurationchange() {\n    this.toggleTracking();\n  }\n  /**\n   * start/stop tracking\n   */\n  ;\n\n  _proto.toggleTracking = function toggleTracking() {\n    if (this.player_.duration() === Infinity && this.liveWindow() >= this.options_.trackingThreshold) {\n      if (this.player_.options_.liveui) {\n        this.player_.addClass('vjs-liveui');\n      }\n\n      this.startTracking();\n    } else {\n      this.player_.removeClass('vjs-liveui');\n      this.stopTracking();\n    }\n  }\n  /**\n   * start tracking live playback\n   */\n  ;\n\n  _proto.startTracking = function startTracking() {\n    if (this.isTracking()) {\n      return;\n    } // If we haven't seen a timeupdate, we need to check whether playback\n    // began before this component started tracking. This can happen commonly\n    // when using autoplay.\n\n\n    if (!this.timeupdateSeen_) {\n      this.timeupdateSeen_ = this.player_.hasStarted();\n    }\n\n    this.trackingInterval_ = this.setInterval(this.trackLiveHandler_, UPDATE_REFRESH_INTERVAL);\n    this.trackLive_();\n    this.on(this.player_, ['play', 'pause'], this.trackLiveHandler_);\n\n    if (!this.timeupdateSeen_) {\n      this.one(this.player_, 'play', this.handlePlay_);\n      this.one(this.player_, 'timeupdate', this.handleFirstTimeupdate_);\n    } else {\n      this.on(this.player_, 'seeked', this.handleSeeked_);\n    }\n  }\n  /**\n   * handle the first timeupdate on the player if it wasn't already playing\n   * when live tracker started tracking.\n   */\n  ;\n\n  _proto.handleFirstTimeupdate = function handleFirstTimeupdate() {\n    this.timeupdateSeen_ = true;\n    this.on(this.player_, 'seeked', this.handleSeeked_);\n  }\n  /**\n   * Keep track of what time a seek starts, and listen for seeked\n   * to find where a seek ends.\n   */\n  ;\n\n  _proto.handleSeeked = function handleSeeked() {\n    var timeDiff = Math.abs(this.liveCurrentTime() - this.player_.currentTime());\n    this.seekedBehindLive_ = this.nextSeekedFromUser_ && timeDiff > 2;\n    this.nextSeekedFromUser_ = false;\n    this.trackLive_();\n  }\n  /**\n   * handle the first play on the player, and make sure that we seek\n   * right to the live edge.\n   */\n  ;\n\n  _proto.handlePlay = function handlePlay() {\n    this.one(this.player_, 'timeupdate', this.seekToLiveEdge_);\n  }\n  /**\n   * Stop tracking, and set all internal variables to\n   * their initial value.\n   */\n  ;\n\n  _proto.reset_ = function reset_() {\n    this.lastTime_ = -1;\n    this.pastSeekEnd_ = 0;\n    this.lastSeekEnd_ = -1;\n    this.behindLiveEdge_ = true;\n    this.timeupdateSeen_ = false;\n    this.seekedBehindLive_ = false;\n    this.nextSeekedFromUser_ = false;\n    this.clearInterval(this.trackingInterval_);\n    this.trackingInterval_ = null;\n    this.off(this.player_, ['play', 'pause'], this.trackLiveHandler_);\n    this.off(this.player_, 'seeked', this.handleSeeked_);\n    this.off(this.player_, 'play', this.handlePlay_);\n    this.off(this.player_, 'timeupdate', this.handleFirstTimeupdate_);\n    this.off(this.player_, 'timeupdate', this.seekToLiveEdge_);\n  }\n  /**\n   * The next seeked event is from the user. Meaning that any seek\n   * > 2s behind live will be considered behind live for real and\n   * liveTolerance will be ignored.\n   */\n  ;\n\n  _proto.nextSeekedFromUser = function nextSeekedFromUser() {\n    this.nextSeekedFromUser_ = true;\n  }\n  /**\n   * stop tracking live playback\n   */\n  ;\n\n  _proto.stopTracking = function stopTracking() {\n    if (!this.isTracking()) {\n      return;\n    }\n\n    this.reset_();\n    this.trigger('liveedgechange');\n  }\n  /**\n   * A helper to get the player seekable end\n   * so that we don't have to null check everywhere\n   *\n   * @return {number}\n   *         The furthest seekable end or Infinity.\n   */\n  ;\n\n  _proto.seekableEnd = function seekableEnd() {\n    var seekable = this.player_.seekable();\n    var seekableEnds = [];\n    var i = seekable ? seekable.length : 0;\n\n    while (i--) {\n      seekableEnds.push(seekable.end(i));\n    } // grab the furthest seekable end after sorting, or if there are none\n    // default to Infinity\n\n\n    return seekableEnds.length ? seekableEnds.sort()[seekableEnds.length - 1] : Infinity;\n  }\n  /**\n   * A helper to get the player seekable start\n   * so that we don't have to null check everywhere\n   *\n   * @return {number}\n   *         The earliest seekable start or 0.\n   */\n  ;\n\n  _proto.seekableStart = function seekableStart() {\n    var seekable = this.player_.seekable();\n    var seekableStarts = [];\n    var i = seekable ? seekable.length : 0;\n\n    while (i--) {\n      seekableStarts.push(seekable.start(i));\n    } // grab the first seekable start after sorting, or if there are none\n    // default to 0\n\n\n    return seekableStarts.length ? seekableStarts.sort()[0] : 0;\n  }\n  /**\n   * Get the live time window aka\n   * the amount of time between seekable start and\n   * live current time.\n   *\n   * @return {number}\n   *         The amount of seconds that are seekable in\n   *         the live video.\n   */\n  ;\n\n  _proto.liveWindow = function liveWindow() {\n    var liveCurrentTime = this.liveCurrentTime(); // if liveCurrenTime is Infinity then we don't have a liveWindow at all\n\n    if (liveCurrentTime === Infinity) {\n      return 0;\n    }\n\n    return liveCurrentTime - this.seekableStart();\n  }\n  /**\n   * Determines if the player is live, only checks if this component\n   * is tracking live playback or not\n   *\n   * @return {boolean}\n   *         Wether liveTracker is tracking\n   */\n  ;\n\n  _proto.isLive = function isLive() {\n    return this.isTracking();\n  }\n  /**\n   * Determines if currentTime is at the live edge and won't fall behind\n   * on each seekableendchange\n   *\n   * @return {boolean}\n   *         Wether playback is at the live edge\n   */\n  ;\n\n  _proto.atLiveEdge = function atLiveEdge() {\n    return !this.behindLiveEdge();\n  }\n  /**\n   * get what we expect the live current time to be\n   *\n   * @return {number}\n   *         The expected live current time\n   */\n  ;\n\n  _proto.liveCurrentTime = function liveCurrentTime() {\n    return this.pastSeekEnd() + this.seekableEnd();\n  }\n  /**\n   * The number of seconds that have occured after seekable end\n   * changed. This will be reset to 0 once seekable end changes.\n   *\n   * @return {number}\n   *         Seconds past the current seekable end\n   */\n  ;\n\n  _proto.pastSeekEnd = function pastSeekEnd() {\n    var seekableEnd = this.seekableEnd();\n\n    if (this.lastSeekEnd_ !== -1 && seekableEnd !== this.lastSeekEnd_) {\n      this.pastSeekEnd_ = 0;\n    }\n\n    this.lastSeekEnd_ = seekableEnd;\n    return this.pastSeekEnd_;\n  }\n  /**\n   * If we are currently behind the live edge, aka currentTime will be\n   * behind on a seekableendchange\n   *\n   * @return {boolean}\n   *         If we are behind the live edge\n   */\n  ;\n\n  _proto.behindLiveEdge = function behindLiveEdge() {\n    return this.behindLiveEdge_;\n  }\n  /**\n   * Wether live tracker is currently tracking or not.\n   */\n  ;\n\n  _proto.isTracking = function isTracking() {\n    return typeof this.trackingInterval_ === 'number';\n  }\n  /**\n   * Seek to the live edge if we are behind the live edge\n   */\n  ;\n\n  _proto.seekToLiveEdge = function seekToLiveEdge() {\n    this.seekedBehindLive_ = false;\n\n    if (this.atLiveEdge()) {\n      return;\n    }\n\n    this.nextSeekedFromUser_ = false;\n    this.player_.currentTime(this.liveCurrentTime());\n  }\n  /**\n   * Dispose of liveTracker\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.off(document, 'visibilitychange', this.handleVisibilityChange_);\n    this.stopTracking();\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  return LiveTracker;\n}(Component$1);\n\nComponent$1.registerComponent('LiveTracker', LiveTracker);\n/**\n * This function is used to fire a sourceset when there is something\n * similar to `mediaEl.load()` being called. It will try to find the source via\n * the `src` attribute and then the `<source>` elements. It will then fire `sourceset`\n * with the source that was found or empty string if we cannot know. If it cannot\n * find a source then `sourceset` will not be fired.\n *\n * @param {Html5} tech\n *        The tech object that sourceset was setup on\n *\n * @return {boolean}\n *         returns false if the sourceset was not fired and true otherwise.\n */\n\nvar sourcesetLoad = function sourcesetLoad(tech) {\n  var el = tech.el(); // if `el.src` is set, that source will be loaded.\n\n  if (el.hasAttribute('src')) {\n    tech.triggerSourceset(el.src);\n    return true;\n  }\n  /**\n   * Since there isn't a src property on the media element, source elements will be used for\n   * implementing the source selection algorithm. This happens asynchronously and\n   * for most cases were there is more than one source we cannot tell what source will\n   * be loaded, without re-implementing the source selection algorithm. At this time we are not\n   * going to do that. There are three special cases that we do handle here though:\n   *\n   * 1. If there are no sources, do not fire `sourceset`.\n   * 2. If there is only one `<source>` with a `src` property/attribute that is our `src`\n   * 3. If there is more than one `<source>` but all of them have the same `src` url.\n   *    That will be our src.\n   */\n\n\n  var sources = tech.$$('source');\n  var srcUrls = [];\n  var src = ''; // if there are no sources, do not fire sourceset\n\n  if (!sources.length) {\n    return false;\n  } // only count valid/non-duplicate source elements\n\n\n  for (var i = 0; i < sources.length; i++) {\n    var url = sources[i].src;\n\n    if (url && srcUrls.indexOf(url) === -1) {\n      srcUrls.push(url);\n    }\n  } // there were no valid sources\n\n\n  if (!srcUrls.length) {\n    return false;\n  } // there is only one valid source element url\n  // use that\n\n\n  if (srcUrls.length === 1) {\n    src = srcUrls[0];\n  }\n\n  tech.triggerSourceset(src);\n  return true;\n};\n/**\n * our implementation of an `innerHTML` descriptor for browsers\n * that do not have one.\n */\n\n\nvar innerHTMLDescriptorPolyfill = Object.defineProperty({}, 'innerHTML', {\n  get: function get() {\n    return this.cloneNode(true).innerHTML;\n  },\n  set: function set(v) {\n    // make a dummy node to use innerHTML on\n    var dummy = document.createElement(this.nodeName.toLowerCase()); // set innerHTML to the value provided\n\n    dummy.innerHTML = v; // make a document fragment to hold the nodes from dummy\n\n    var docFrag = document.createDocumentFragment(); // copy all of the nodes created by the innerHTML on dummy\n    // to the document fragment\n\n    while (dummy.childNodes.length) {\n      docFrag.appendChild(dummy.childNodes[0]);\n    } // remove content\n\n\n    this.innerText = ''; // now we add all of that html in one by appending the\n    // document fragment. This is how innerHTML does it.\n\n    window$1.Element.prototype.appendChild.call(this, docFrag); // then return the result that innerHTML's setter would\n\n    return this.innerHTML;\n  }\n});\n/**\n * Get a property descriptor given a list of priorities and the\n * property to get.\n */\n\nvar getDescriptor = function getDescriptor(priority, prop) {\n  var descriptor = {};\n\n  for (var i = 0; i < priority.length; i++) {\n    descriptor = Object.getOwnPropertyDescriptor(priority[i], prop);\n\n    if (descriptor && descriptor.set && descriptor.get) {\n      break;\n    }\n  }\n\n  descriptor.enumerable = true;\n  descriptor.configurable = true;\n  return descriptor;\n};\n\nvar getInnerHTMLDescriptor = function getInnerHTMLDescriptor(tech) {\n  return getDescriptor([tech.el(), window$1.HTMLMediaElement.prototype, window$1.Element.prototype, innerHTMLDescriptorPolyfill], 'innerHTML');\n};\n/**\n * Patches browser internal functions so that we can tell synchronously\n * if a `<source>` was appended to the media element. For some reason this\n * causes a `sourceset` if the the media element is ready and has no source.\n * This happens when:\n * - The page has just loaded and the media element does not have a source.\n * - The media element was emptied of all sources, then `load()` was called.\n *\n * It does this by patching the following functions/properties when they are supported:\n *\n * - `append()` - can be used to add a `<source>` element to the media element\n * - `appendChild()` - can be used to add a `<source>` element to the media element\n * - `insertAdjacentHTML()` -  can be used to add a `<source>` element to the media element\n * - `innerHTML` -  can be used to add a `<source>` element to the media element\n *\n * @param {Html5} tech\n *        The tech object that sourceset is being setup on.\n */\n\n\nvar firstSourceWatch = function firstSourceWatch(tech) {\n  var el = tech.el(); // make sure firstSourceWatch isn't setup twice.\n\n  if (el.resetSourceWatch_) {\n    return;\n  }\n\n  var old = {};\n  var innerDescriptor = getInnerHTMLDescriptor(tech);\n\n  var appendWrapper = function appendWrapper(appendFn) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var retval = appendFn.apply(el, args);\n      sourcesetLoad(tech);\n      return retval;\n    };\n  };\n\n  ['append', 'appendChild', 'insertAdjacentHTML'].forEach(function (k) {\n    if (!el[k]) {\n      return;\n    } // store the old function\n\n\n    old[k] = el[k]; // call the old function with a sourceset if a source\n    // was loaded\n\n    el[k] = appendWrapper(old[k]);\n  });\n  Object.defineProperty(el, 'innerHTML', mergeOptions$3(innerDescriptor, {\n    set: appendWrapper(innerDescriptor.set)\n  }));\n\n  el.resetSourceWatch_ = function () {\n    el.resetSourceWatch_ = null;\n    Object.keys(old).forEach(function (k) {\n      el[k] = old[k];\n    });\n    Object.defineProperty(el, 'innerHTML', innerDescriptor);\n  }; // on the first sourceset, we need to revert our changes\n\n\n  tech.one('sourceset', el.resetSourceWatch_);\n};\n/**\n * our implementation of a `src` descriptor for browsers\n * that do not have one.\n */\n\n\nvar srcDescriptorPolyfill = Object.defineProperty({}, 'src', {\n  get: function get() {\n    if (this.hasAttribute('src')) {\n      return getAbsoluteURL(window$1.Element.prototype.getAttribute.call(this, 'src'));\n    }\n\n    return '';\n  },\n  set: function set(v) {\n    window$1.Element.prototype.setAttribute.call(this, 'src', v);\n    return v;\n  }\n});\n\nvar getSrcDescriptor = function getSrcDescriptor(tech) {\n  return getDescriptor([tech.el(), window$1.HTMLMediaElement.prototype, srcDescriptorPolyfill], 'src');\n};\n/**\n * setup `sourceset` handling on the `Html5` tech. This function\n * patches the following element properties/functions:\n *\n * - `src` - to determine when `src` is set\n * - `setAttribute()` - to determine when `src` is set\n * - `load()` - this re-triggers the source selection algorithm, and can\n *              cause a sourceset.\n *\n * If there is no source when we are adding `sourceset` support or during a `load()`\n * we also patch the functions listed in `firstSourceWatch`.\n *\n * @param {Html5} tech\n *        The tech to patch\n */\n\n\nvar setupSourceset = function setupSourceset(tech) {\n  if (!tech.featuresSourceset) {\n    return;\n  }\n\n  var el = tech.el(); // make sure sourceset isn't setup twice.\n\n  if (el.resetSourceset_) {\n    return;\n  }\n\n  var srcDescriptor = getSrcDescriptor(tech);\n  var oldSetAttribute = el.setAttribute;\n  var oldLoad = el.load;\n  Object.defineProperty(el, 'src', mergeOptions$3(srcDescriptor, {\n    set: function set(v) {\n      var retval = srcDescriptor.set.call(el, v); // we use the getter here to get the actual value set on src\n\n      tech.triggerSourceset(el.src);\n      return retval;\n    }\n  }));\n\n  el.setAttribute = function (n, v) {\n    var retval = oldSetAttribute.call(el, n, v);\n\n    if (/src/i.test(n)) {\n      tech.triggerSourceset(el.src);\n    }\n\n    return retval;\n  };\n\n  el.load = function () {\n    var retval = oldLoad.call(el); // if load was called, but there was no source to fire\n    // sourceset on. We have to watch for a source append\n    // as that can trigger a `sourceset` when the media element\n    // has no source\n\n    if (!sourcesetLoad(tech)) {\n      tech.triggerSourceset('');\n      firstSourceWatch(tech);\n    }\n\n    return retval;\n  };\n\n  if (el.currentSrc) {\n    tech.triggerSourceset(el.currentSrc);\n  } else if (!sourcesetLoad(tech)) {\n    firstSourceWatch(tech);\n  }\n\n  el.resetSourceset_ = function () {\n    el.resetSourceset_ = null;\n    el.load = oldLoad;\n    el.setAttribute = oldSetAttribute;\n    Object.defineProperty(el, 'src', srcDescriptor);\n\n    if (el.resetSourceWatch_) {\n      el.resetSourceWatch_();\n    }\n  };\n};\n/**\n * Object.defineProperty but \"lazy\", which means that the value is only set after\n * it retrieved the first time, rather than being set right away.\n *\n * @param {Object} obj the object to set the property on\n * @param {string} key the key for the property to set\n * @param {Function} getValue the function used to get the value when it is needed.\n * @param {boolean} setter wether a setter shoould be allowed or not\n */\n\n\nvar defineLazyProperty = function defineLazyProperty(obj, key, getValue, setter) {\n  if (setter === void 0) {\n    setter = true;\n  }\n\n  var set = function set(value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      writable: true\n    });\n  };\n\n  var options = {\n    configurable: true,\n    enumerable: true,\n    get: function get() {\n      var value = getValue();\n      set(value);\n      return value;\n    }\n  };\n\n  if (setter) {\n    options.set = set;\n  }\n\n  return Object.defineProperty(obj, key, options);\n};\n/**\n * HTML5 Media Controller - Wrapper for HTML5 Media API\n *\n * @mixes Tech~SourceHandlerAdditions\n * @extends Tech\n */\n\n\nvar Html5 = /*#__PURE__*/function (_Tech) {\n  _inheritsLoose(Html5, _Tech);\n  /**\n  * Create an instance of this Tech.\n  *\n  * @param {Object} [options]\n  *        The key/value store of player options.\n  *\n  * @param {Component~ReadyCallback} ready\n  *        Callback function to call when the `HTML5` Tech is ready.\n  */\n\n\n  function Html5(options, ready) {\n    var _this;\n\n    _this = _Tech.call(this, options, ready) || this;\n    var source = options.source;\n    var crossoriginTracks = false; // Set the source if one is provided\n    // 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)\n    // 2) Check to see if the network state of the tag was failed at init, and if so, reset the source\n    // anyway so the error gets fired.\n\n    if (source && (_this.el_.currentSrc !== source.src || options.tag && options.tag.initNetworkState_ === 3)) {\n      _this.setSource(source);\n    } else {\n      _this.handleLateInit_(_this.el_);\n    } // setup sourceset after late sourceset/init\n\n\n    if (options.enableSourceset) {\n      _this.setupSourcesetHandling_();\n    }\n\n    _this.isScrubbing_ = false;\n\n    if (_this.el_.hasChildNodes()) {\n      var nodes = _this.el_.childNodes;\n      var nodesLength = nodes.length;\n      var removeNodes = [];\n\n      while (nodesLength--) {\n        var node = nodes[nodesLength];\n        var nodeName = node.nodeName.toLowerCase();\n\n        if (nodeName === 'track') {\n          if (!_this.featuresNativeTextTracks) {\n            // Empty video tag tracks so the built-in player doesn't use them also.\n            // This may not be fast enough to stop HTML5 browsers from reading the tags\n            // so we'll need to turn off any default tracks if we're manually doing\n            // captions and subtitles. videoElement.textTracks\n            removeNodes.push(node);\n          } else {\n            // store HTMLTrackElement and TextTrack to remote list\n            _this.remoteTextTrackEls().addTrackElement_(node);\n\n            _this.remoteTextTracks().addTrack(node.track);\n\n            _this.textTracks().addTrack(node.track);\n\n            if (!crossoriginTracks && !_this.el_.hasAttribute('crossorigin') && isCrossOrigin(node.src)) {\n              crossoriginTracks = true;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < removeNodes.length; i++) {\n        _this.el_.removeChild(removeNodes[i]);\n      }\n    }\n\n    _this.proxyNativeTracks_();\n\n    if (_this.featuresNativeTextTracks && crossoriginTracks) {\n      log$1.warn('Text Tracks are being loaded from another origin but the crossorigin attribute isn\\'t used.\\n' + 'This may prevent text tracks from loading.');\n    } // prevent iOS Safari from disabling metadata text tracks during native playback\n\n\n    _this.restoreMetadataTracksInIOSNativePlayer_(); // Determine if native controls should be used\n    // Our goal should be to get the custom controls on mobile solid everywhere\n    // so we can remove this all together. Right now this will block custom\n    // controls on touch enabled laptops like the Chrome Pixel\n\n\n    if ((TOUCH_ENABLED || IS_IPHONE || IS_NATIVE_ANDROID) && options.nativeControlsForTouch === true) {\n      _this.setControls(true);\n    } // on iOS, we want to proxy `webkitbeginfullscreen` and `webkitendfullscreen`\n    // into a `fullscreenchange` event\n\n\n    _this.proxyWebkitFullscreen_();\n\n    _this.triggerReady();\n\n    return _this;\n  }\n  /**\n   * Dispose of `HTML5` media element and remove all tracks.\n   */\n\n\n  var _proto = Html5.prototype;\n\n  _proto.dispose = function dispose() {\n    if (this.el_ && this.el_.resetSourceset_) {\n      this.el_.resetSourceset_();\n    }\n\n    Html5.disposeMediaElement(this.el_);\n    this.options_ = null; // tech will handle clearing of the emulated track list\n\n    _Tech.prototype.dispose.call(this);\n  }\n  /**\n   * Modify the media element so that we can detect when\n   * the source is changed. Fires `sourceset` just after the source has changed\n   */\n  ;\n\n  _proto.setupSourcesetHandling_ = function setupSourcesetHandling_() {\n    setupSourceset(this);\n  }\n  /**\n   * When a captions track is enabled in the iOS Safari native player, all other\n   * tracks are disabled (including metadata tracks), which nulls all of their\n   * associated cue points. This will restore metadata tracks to their pre-fullscreen\n   * state in those cases so that cue points are not needlessly lost.\n   *\n   * @private\n   */\n  ;\n\n  _proto.restoreMetadataTracksInIOSNativePlayer_ = function restoreMetadataTracksInIOSNativePlayer_() {\n    var textTracks = this.textTracks();\n    var metadataTracksPreFullscreenState; // captures a snapshot of every metadata track's current state\n\n    var takeMetadataTrackSnapshot = function takeMetadataTrackSnapshot() {\n      metadataTracksPreFullscreenState = [];\n\n      for (var i = 0; i < textTracks.length; i++) {\n        var track = textTracks[i];\n\n        if (track.kind === 'metadata') {\n          metadataTracksPreFullscreenState.push({\n            track: track,\n            storedMode: track.mode\n          });\n        }\n      }\n    }; // snapshot each metadata track's initial state, and update the snapshot\n    // each time there is a track 'change' event\n\n\n    takeMetadataTrackSnapshot();\n    textTracks.addEventListener('change', takeMetadataTrackSnapshot);\n    this.on('dispose', function () {\n      return textTracks.removeEventListener('change', takeMetadataTrackSnapshot);\n    });\n\n    var restoreTrackMode = function restoreTrackMode() {\n      for (var i = 0; i < metadataTracksPreFullscreenState.length; i++) {\n        var storedTrack = metadataTracksPreFullscreenState[i];\n\n        if (storedTrack.track.mode === 'disabled' && storedTrack.track.mode !== storedTrack.storedMode) {\n          storedTrack.track.mode = storedTrack.storedMode;\n        }\n      } // we only want this handler to be executed on the first 'change' event\n\n\n      textTracks.removeEventListener('change', restoreTrackMode);\n    }; // when we enter fullscreen playback, stop updating the snapshot and\n    // restore all track modes to their pre-fullscreen state\n\n\n    this.on('webkitbeginfullscreen', function () {\n      textTracks.removeEventListener('change', takeMetadataTrackSnapshot); // remove the listener before adding it just in case it wasn't previously removed\n\n      textTracks.removeEventListener('change', restoreTrackMode);\n      textTracks.addEventListener('change', restoreTrackMode);\n    }); // start updating the snapshot again after leaving fullscreen\n\n    this.on('webkitendfullscreen', function () {\n      // remove the listener before adding it just in case it wasn't previously removed\n      textTracks.removeEventListener('change', takeMetadataTrackSnapshot);\n      textTracks.addEventListener('change', takeMetadataTrackSnapshot); // remove the restoreTrackMode handler in case it wasn't triggered during fullscreen playback\n\n      textTracks.removeEventListener('change', restoreTrackMode);\n    });\n  }\n  /**\n   * Attempt to force override of tracks for the given type\n   *\n   * @param {string} type - Track type to override, possible values include 'Audio',\n   * 'Video', and 'Text'.\n   * @param {boolean} override - If set to true native audio/video will be overridden,\n   * otherwise native audio/video will potentially be used.\n   * @private\n   */\n  ;\n\n  _proto.overrideNative_ = function overrideNative_(type, override) {\n    var _this2 = this; // If there is no behavioral change don't add/remove listeners\n\n\n    if (override !== this[\"featuresNative\" + type + \"Tracks\"]) {\n      return;\n    }\n\n    var lowerCaseType = type.toLowerCase();\n\n    if (this[lowerCaseType + \"TracksListeners_\"]) {\n      Object.keys(this[lowerCaseType + \"TracksListeners_\"]).forEach(function (eventName) {\n        var elTracks = _this2.el()[lowerCaseType + \"Tracks\"];\n\n        elTracks.removeEventListener(eventName, _this2[lowerCaseType + \"TracksListeners_\"][eventName]);\n      });\n    }\n\n    this[\"featuresNative\" + type + \"Tracks\"] = !override;\n    this[lowerCaseType + \"TracksListeners_\"] = null;\n    this.proxyNativeTracksForType_(lowerCaseType);\n  }\n  /**\n   * Attempt to force override of native audio tracks.\n   *\n   * @param {boolean} override - If set to true native audio will be overridden,\n   * otherwise native audio will potentially be used.\n   */\n  ;\n\n  _proto.overrideNativeAudioTracks = function overrideNativeAudioTracks(override) {\n    this.overrideNative_('Audio', override);\n  }\n  /**\n   * Attempt to force override of native video tracks.\n   *\n   * @param {boolean} override - If set to true native video will be overridden,\n   * otherwise native video will potentially be used.\n   */\n  ;\n\n  _proto.overrideNativeVideoTracks = function overrideNativeVideoTracks(override) {\n    this.overrideNative_('Video', override);\n  }\n  /**\n   * Proxy native track list events for the given type to our track\n   * lists if the browser we are playing in supports that type of track list.\n   *\n   * @param {string} name - Track type; values include 'audio', 'video', and 'text'\n   * @private\n   */\n  ;\n\n  _proto.proxyNativeTracksForType_ = function proxyNativeTracksForType_(name) {\n    var _this3 = this;\n\n    var props = NORMAL[name];\n    var elTracks = this.el()[props.getterName];\n    var techTracks = this[props.getterName]();\n\n    if (!this[\"featuresNative\" + props.capitalName + \"Tracks\"] || !elTracks || !elTracks.addEventListener) {\n      return;\n    }\n\n    var listeners = {\n      change: function change(e) {\n        var event = {\n          type: 'change',\n          target: techTracks,\n          currentTarget: techTracks,\n          srcElement: techTracks\n        };\n        techTracks.trigger(event); // if we are a text track change event, we should also notify the\n        // remote text track list. This can potentially cause a false positive\n        // if we were to get a change event on a non-remote track and\n        // we triggered the event on the remote text track list which doesn't\n        // contain that track. However, best practices mean looping through the\n        // list of tracks and searching for the appropriate mode value, so,\n        // this shouldn't pose an issue\n\n        if (name === 'text') {\n          _this3[REMOTE.remoteText.getterName]().trigger(event);\n        }\n      },\n      addtrack: function addtrack(e) {\n        techTracks.addTrack(e.track);\n      },\n      removetrack: function removetrack(e) {\n        techTracks.removeTrack(e.track);\n      }\n    };\n\n    var removeOldTracks = function removeOldTracks() {\n      var removeTracks = [];\n\n      for (var i = 0; i < techTracks.length; i++) {\n        var found = false;\n\n        for (var j = 0; j < elTracks.length; j++) {\n          if (elTracks[j] === techTracks[i]) {\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          removeTracks.push(techTracks[i]);\n        }\n      }\n\n      while (removeTracks.length) {\n        techTracks.removeTrack(removeTracks.shift());\n      }\n    };\n\n    this[props.getterName + 'Listeners_'] = listeners;\n    Object.keys(listeners).forEach(function (eventName) {\n      var listener = listeners[eventName];\n      elTracks.addEventListener(eventName, listener);\n\n      _this3.on('dispose', function (e) {\n        return elTracks.removeEventListener(eventName, listener);\n      });\n    }); // Remove (native) tracks that are not used anymore\n\n    this.on('loadstart', removeOldTracks);\n    this.on('dispose', function (e) {\n      return _this3.off('loadstart', removeOldTracks);\n    });\n  }\n  /**\n   * Proxy all native track list events to our track lists if the browser we are playing\n   * in supports that type of track list.\n   *\n   * @private\n   */\n  ;\n\n  _proto.proxyNativeTracks_ = function proxyNativeTracks_() {\n    var _this4 = this;\n\n    NORMAL.names.forEach(function (name) {\n      _this4.proxyNativeTracksForType_(name);\n    });\n  }\n  /**\n   * Create the `Html5` Tech's DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    var el = this.options_.tag; // Check if this browser supports moving the element into the box.\n    // On the iPhone video will break if you move the element,\n    // So we have to create a brand new element.\n    // If we ingested the player div, we do not need to move the media element.\n\n    if (!el || !(this.options_.playerElIngest || this.movingMediaElementInDOM)) {\n      // If the original tag is still there, clone and remove it.\n      if (el) {\n        var clone = el.cloneNode(true);\n\n        if (el.parentNode) {\n          el.parentNode.insertBefore(clone, el);\n        }\n\n        Html5.disposeMediaElement(el);\n        el = clone;\n      } else {\n        el = document.createElement('video'); // determine if native controls should be used\n\n        var tagAttributes = this.options_.tag && getAttributes(this.options_.tag);\n        var attributes = mergeOptions$3({}, tagAttributes);\n\n        if (!TOUCH_ENABLED || this.options_.nativeControlsForTouch !== true) {\n          delete attributes.controls;\n        }\n\n        setAttributes(el, assign(attributes, {\n          id: this.options_.techId,\n          \"class\": 'vjs-tech'\n        }));\n      }\n\n      el.playerId = this.options_.playerId;\n    }\n\n    if (typeof this.options_.preload !== 'undefined') {\n      setAttribute(el, 'preload', this.options_.preload);\n    }\n\n    if (this.options_.disablePictureInPicture !== undefined) {\n      el.disablePictureInPicture = this.options_.disablePictureInPicture;\n    } // Update specific tag settings, in case they were overridden\n    // `autoplay` has to be *last* so that `muted` and `playsinline` are present\n    // when iOS/Safari or other browsers attempt to autoplay.\n\n\n    var settingsAttrs = ['loop', 'muted', 'playsinline', 'autoplay'];\n\n    for (var i = 0; i < settingsAttrs.length; i++) {\n      var attr = settingsAttrs[i];\n      var value = this.options_[attr];\n\n      if (typeof value !== 'undefined') {\n        if (value) {\n          setAttribute(el, attr, attr);\n        } else {\n          removeAttribute(el, attr);\n        }\n\n        el[attr] = value;\n      }\n    }\n\n    return el;\n  }\n  /**\n   * This will be triggered if the loadstart event has already fired, before videojs was\n   * ready. Two known examples of when this can happen are:\n   * 1. If we're loading the playback object after it has started loading\n   * 2. The media is already playing the (often with autoplay on) then\n   *\n   * This function will fire another loadstart so that videojs can catchup.\n   *\n   * @fires Tech#loadstart\n   *\n   * @return {undefined}\n   *         returns nothing.\n   */\n  ;\n\n  _proto.handleLateInit_ = function handleLateInit_(el) {\n    if (el.networkState === 0 || el.networkState === 3) {\n      // The video element hasn't started loading the source yet\n      // or didn't find a source\n      return;\n    }\n\n    if (el.readyState === 0) {\n      // NetworkState is set synchronously BUT loadstart is fired at the\n      // end of the current stack, usually before setInterval(fn, 0).\n      // So at this point we know loadstart may have already fired or is\n      // about to fire, and either way the player hasn't seen it yet.\n      // We don't want to fire loadstart prematurely here and cause a\n      // double loadstart so we'll wait and see if it happens between now\n      // and the next loop, and fire it if not.\n      // HOWEVER, we also want to make sure it fires before loadedmetadata\n      // which could also happen between now and the next loop, so we'll\n      // watch for that also.\n      var loadstartFired = false;\n\n      var setLoadstartFired = function setLoadstartFired() {\n        loadstartFired = true;\n      };\n\n      this.on('loadstart', setLoadstartFired);\n\n      var triggerLoadstart = function triggerLoadstart() {\n        // We did miss the original loadstart. Make sure the player\n        // sees loadstart before loadedmetadata\n        if (!loadstartFired) {\n          this.trigger('loadstart');\n        }\n      };\n\n      this.on('loadedmetadata', triggerLoadstart);\n      this.ready(function () {\n        this.off('loadstart', setLoadstartFired);\n        this.off('loadedmetadata', triggerLoadstart);\n\n        if (!loadstartFired) {\n          // We did miss the original native loadstart. Fire it now.\n          this.trigger('loadstart');\n        }\n      });\n      return;\n    } // From here on we know that loadstart already fired and we missed it.\n    // The other readyState events aren't as much of a problem if we double\n    // them, so not going to go to as much trouble as loadstart to prevent\n    // that unless we find reason to.\n\n\n    var eventsToTrigger = ['loadstart']; // loadedmetadata: newly equal to HAVE_METADATA (1) or greater\n\n    eventsToTrigger.push('loadedmetadata'); // loadeddata: newly increased to HAVE_CURRENT_DATA (2) or greater\n\n    if (el.readyState >= 2) {\n      eventsToTrigger.push('loadeddata');\n    } // canplay: newly increased to HAVE_FUTURE_DATA (3) or greater\n\n\n    if (el.readyState >= 3) {\n      eventsToTrigger.push('canplay');\n    } // canplaythrough: newly equal to HAVE_ENOUGH_DATA (4)\n\n\n    if (el.readyState >= 4) {\n      eventsToTrigger.push('canplaythrough');\n    } // We still need to give the player time to add event listeners\n\n\n    this.ready(function () {\n      eventsToTrigger.forEach(function (type) {\n        this.trigger(type);\n      }, this);\n    });\n  }\n  /**\n   * Set whether we are scrubbing or not.\n   * This is used to decide whether we should use `fastSeek` or not.\n   * `fastSeek` is used to provide trick play on Safari browsers.\n   *\n   * @param {boolean} isScrubbing\n   *                  - true for we are currently scrubbing\n   *                  - false for we are no longer scrubbing\n   */\n  ;\n\n  _proto.setScrubbing = function setScrubbing(isScrubbing) {\n    this.isScrubbing_ = isScrubbing;\n  }\n  /**\n   * Get whether we are scrubbing or not.\n   *\n   * @return {boolean} isScrubbing\n   *                  - true for we are currently scrubbing\n   *                  - false for we are no longer scrubbing\n   */\n  ;\n\n  _proto.scrubbing = function scrubbing() {\n    return this.isScrubbing_;\n  }\n  /**\n   * Set current time for the `HTML5` tech.\n   *\n   * @param {number} seconds\n   *        Set the current time of the media to this.\n   */\n  ;\n\n  _proto.setCurrentTime = function setCurrentTime(seconds) {\n    try {\n      if (this.isScrubbing_ && this.el_.fastSeek && IS_ANY_SAFARI) {\n        this.el_.fastSeek(seconds);\n      } else {\n        this.el_.currentTime = seconds;\n      }\n    } catch (e) {\n      log$1(e, 'Video is not ready. (Video.js)'); // this.warning(VideoJS.warnings.videoNotReady);\n    }\n  }\n  /**\n   * Get the current duration of the HTML5 media element.\n   *\n   * @return {number}\n   *         The duration of the media or 0 if there is no duration.\n   */\n  ;\n\n  _proto.duration = function duration() {\n    var _this5 = this; // Android Chrome will report duration as Infinity for VOD HLS until after\n    // playback has started, which triggers the live display erroneously.\n    // Return NaN if playback has not started and trigger a durationupdate once\n    // the duration can be reliably known.\n\n\n    if (this.el_.duration === Infinity && IS_ANDROID && IS_CHROME && this.el_.currentTime === 0) {\n      // Wait for the first `timeupdate` with currentTime > 0 - there may be\n      // several with 0\n      var checkProgress = function checkProgress() {\n        if (_this5.el_.currentTime > 0) {\n          // Trigger durationchange for genuinely live video\n          if (_this5.el_.duration === Infinity) {\n            _this5.trigger('durationchange');\n          }\n\n          _this5.off('timeupdate', checkProgress);\n        }\n      };\n\n      this.on('timeupdate', checkProgress);\n      return NaN;\n    }\n\n    return this.el_.duration || NaN;\n  }\n  /**\n   * Get the current width of the HTML5 media element.\n   *\n   * @return {number}\n   *         The width of the HTML5 media element.\n   */\n  ;\n\n  _proto.width = function width() {\n    return this.el_.offsetWidth;\n  }\n  /**\n   * Get the current height of the HTML5 media element.\n   *\n   * @return {number}\n   *         The height of the HTML5 media element.\n   */\n  ;\n\n  _proto.height = function height() {\n    return this.el_.offsetHeight;\n  }\n  /**\n   * Proxy iOS `webkitbeginfullscreen` and `webkitendfullscreen` into\n   * `fullscreenchange` event.\n   *\n   * @private\n   * @fires fullscreenchange\n   * @listens webkitendfullscreen\n   * @listens webkitbeginfullscreen\n   * @listens webkitbeginfullscreen\n   */\n  ;\n\n  _proto.proxyWebkitFullscreen_ = function proxyWebkitFullscreen_() {\n    var _this6 = this;\n\n    if (!('webkitDisplayingFullscreen' in this.el_)) {\n      return;\n    }\n\n    var endFn = function endFn() {\n      this.trigger('fullscreenchange', {\n        isFullscreen: false\n      }); // Safari will sometimes set contols on the videoelement when existing fullscreen.\n\n      if (this.el_.controls && !this.options_.nativeControlsForTouch && this.controls()) {\n        this.el_.controls = false;\n      }\n    };\n\n    var beginFn = function beginFn() {\n      if ('webkitPresentationMode' in this.el_ && this.el_.webkitPresentationMode !== 'picture-in-picture') {\n        this.one('webkitendfullscreen', endFn);\n        this.trigger('fullscreenchange', {\n          isFullscreen: true,\n          // set a flag in case another tech triggers fullscreenchange\n          nativeIOSFullscreen: true\n        });\n      }\n    };\n\n    this.on('webkitbeginfullscreen', beginFn);\n    this.on('dispose', function () {\n      _this6.off('webkitbeginfullscreen', beginFn);\n\n      _this6.off('webkitendfullscreen', endFn);\n    });\n  }\n  /**\n   * Check if fullscreen is supported on the current playback device.\n   *\n   * @return {boolean}\n   *         - True if fullscreen is supported.\n   *         - False if fullscreen is not supported.\n   */\n  ;\n\n  _proto.supportsFullScreen = function supportsFullScreen() {\n    if (typeof this.el_.webkitEnterFullScreen === 'function') {\n      var userAgent = window$1.navigator && window$1.navigator.userAgent || ''; // Seems to be broken in Chromium/Chrome && Safari in Leopard\n\n      if (/Android/.test(userAgent) || !/Chrome|Mac OS X 10.5/.test(userAgent)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * Request that the `HTML5` Tech enter fullscreen.\n   */\n  ;\n\n  _proto.enterFullScreen = function enterFullScreen() {\n    var video = this.el_;\n\n    if (video.paused && video.networkState <= video.HAVE_METADATA) {\n      // attempt to prime the video element for programmatic access\n      // this isn't necessary on the desktop but shouldn't hurt\n      silencePromise(this.el_.play()); // playing and pausing synchronously during the transition to fullscreen\n      // can get iOS ~6.1 devices into a play/pause loop\n\n      this.setTimeout(function () {\n        video.pause();\n\n        try {\n          video.webkitEnterFullScreen();\n        } catch (e) {\n          this.trigger('fullscreenerror', e);\n        }\n      }, 0);\n    } else {\n      try {\n        video.webkitEnterFullScreen();\n      } catch (e) {\n        this.trigger('fullscreenerror', e);\n      }\n    }\n  }\n  /**\n   * Request that the `HTML5` Tech exit fullscreen.\n   */\n  ;\n\n  _proto.exitFullScreen = function exitFullScreen() {\n    if (!this.el_.webkitDisplayingFullscreen) {\n      this.trigger('fullscreenerror', new Error('The video is not fullscreen'));\n      return;\n    }\n\n    this.el_.webkitExitFullScreen();\n  }\n  /**\n   * Create a floating video window always on top of other windows so that users may\n   * continue consuming media while they interact with other content sites, or\n   * applications on their device.\n   *\n   * @see [Spec]{@link https://wicg.github.io/picture-in-picture}\n   *\n   * @return {Promise}\n   *         A promise with a Picture-in-Picture window.\n   */\n  ;\n\n  _proto.requestPictureInPicture = function requestPictureInPicture() {\n    return this.el_.requestPictureInPicture();\n  }\n  /**\n   * A getter/setter for the `Html5` Tech's source object.\n   * > Note: Please use {@link Html5#setSource}\n   *\n   * @param {Tech~SourceObject} [src]\n   *        The source object you want to set on the `HTML5` techs element.\n   *\n   * @return {Tech~SourceObject|undefined}\n   *         - The current source object when a source is not passed in.\n   *         - undefined when setting\n   *\n   * @deprecated Since version 5.\n   */\n  ;\n\n  _proto.src = function src(_src) {\n    if (_src === undefined) {\n      return this.el_.src;\n    } // Setting src through `src` instead of `setSrc` will be deprecated\n\n\n    this.setSrc(_src);\n  }\n  /**\n   * Reset the tech by removing all sources and then calling\n   * {@link Html5.resetMediaElement}.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    Html5.resetMediaElement(this.el_);\n  }\n  /**\n   * Get the current source on the `HTML5` Tech. Falls back to returning the source from\n   * the HTML5 media element.\n   *\n   * @return {Tech~SourceObject}\n   *         The current source object from the HTML5 tech. With a fallback to the\n   *         elements source.\n   */\n  ;\n\n  _proto.currentSrc = function currentSrc() {\n    if (this.currentSource_) {\n      return this.currentSource_.src;\n    }\n\n    return this.el_.currentSrc;\n  }\n  /**\n   * Set controls attribute for the HTML5 media Element.\n   *\n   * @param {string} val\n   *        Value to set the controls attribute to\n   */\n  ;\n\n  _proto.setControls = function setControls(val) {\n    this.el_.controls = !!val;\n  }\n  /**\n   * Create and returns a remote {@link TextTrack} object.\n   *\n   * @param {string} kind\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n   *\n   * @param {string} [label]\n   *        Label to identify the text track\n   *\n   * @param {string} [language]\n   *        Two letter language abbreviation\n   *\n   * @return {TextTrack}\n   *         The TextTrack that gets created.\n   */\n  ;\n\n  _proto.addTextTrack = function addTextTrack(kind, label, language) {\n    if (!this.featuresNativeTextTracks) {\n      return _Tech.prototype.addTextTrack.call(this, kind, label, language);\n    }\n\n    return this.el_.addTextTrack(kind, label, language);\n  }\n  /**\n   * Creates either native TextTrack or an emulated TextTrack depending\n   * on the value of `featuresNativeTextTracks`\n   *\n   * @param {Object} options\n   *        The object should contain the options to initialize the TextTrack with.\n   *\n   * @param {string} [options.kind]\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).\n   *\n   * @param {string} [options.label]\n   *        Label to identify the text track\n   *\n   * @param {string} [options.language]\n   *        Two letter language abbreviation.\n   *\n   * @param {boolean} [options.default]\n   *        Default this track to on.\n   *\n   * @param {string} [options.id]\n   *        The internal id to assign this track.\n   *\n   * @param {string} [options.src]\n   *        A source url for the track.\n   *\n   * @return {HTMLTrackElement}\n   *         The track element that gets created.\n   */\n  ;\n\n  _proto.createRemoteTextTrack = function createRemoteTextTrack(options) {\n    if (!this.featuresNativeTextTracks) {\n      return _Tech.prototype.createRemoteTextTrack.call(this, options);\n    }\n\n    var htmlTrackElement = document.createElement('track');\n\n    if (options.kind) {\n      htmlTrackElement.kind = options.kind;\n    }\n\n    if (options.label) {\n      htmlTrackElement.label = options.label;\n    }\n\n    if (options.language || options.srclang) {\n      htmlTrackElement.srclang = options.language || options.srclang;\n    }\n\n    if (options[\"default\"]) {\n      htmlTrackElement[\"default\"] = options[\"default\"];\n    }\n\n    if (options.id) {\n      htmlTrackElement.id = options.id;\n    }\n\n    if (options.src) {\n      htmlTrackElement.src = options.src;\n    }\n\n    return htmlTrackElement;\n  }\n  /**\n   * Creates a remote text track object and returns an html track element.\n   *\n   * @param {Object} options The object should contain values for\n   * kind, language, label, and src (location of the WebVTT file)\n   * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be\n   * automatically removed from the video element whenever the source changes\n   * @return {HTMLTrackElement} An Html Track Element.\n   * This can be an emulated {@link HTMLTrackElement} or a native one.\n   * @deprecated The default value of the \"manualCleanup\" parameter will default\n   * to \"false\" in upcoming versions of Video.js\n   */\n  ;\n\n  _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n    var htmlTrackElement = _Tech.prototype.addRemoteTextTrack.call(this, options, manualCleanup);\n\n    if (this.featuresNativeTextTracks) {\n      this.el().appendChild(htmlTrackElement);\n    }\n\n    return htmlTrackElement;\n  }\n  /**\n   * Remove remote `TextTrack` from `TextTrackList` object\n   *\n   * @param {TextTrack} track\n   *        `TextTrack` object to remove\n   */\n  ;\n\n  _proto.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n    _Tech.prototype.removeRemoteTextTrack.call(this, track);\n\n    if (this.featuresNativeTextTracks) {\n      var tracks = this.$$('track');\n      var i = tracks.length;\n\n      while (i--) {\n        if (track === tracks[i] || track === tracks[i].track) {\n          this.el().removeChild(tracks[i]);\n        }\n      }\n    }\n  }\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object}\n   *         An object with supported media playback quality metrics\n   */\n  ;\n\n  _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    if (typeof this.el().getVideoPlaybackQuality === 'function') {\n      return this.el().getVideoPlaybackQuality();\n    }\n\n    var videoPlaybackQuality = {};\n\n    if (typeof this.el().webkitDroppedFrameCount !== 'undefined' && typeof this.el().webkitDecodedFrameCount !== 'undefined') {\n      videoPlaybackQuality.droppedVideoFrames = this.el().webkitDroppedFrameCount;\n      videoPlaybackQuality.totalVideoFrames = this.el().webkitDecodedFrameCount;\n    }\n\n    if (window$1.performance && typeof window$1.performance.now === 'function') {\n      videoPlaybackQuality.creationTime = window$1.performance.now();\n    } else if (window$1.performance && window$1.performance.timing && typeof window$1.performance.timing.navigationStart === 'number') {\n      videoPlaybackQuality.creationTime = window$1.Date.now() - window$1.performance.timing.navigationStart;\n    }\n\n    return videoPlaybackQuality;\n  };\n\n  return Html5;\n}(Tech);\n/* HTML5 Support Testing ---------------------------------------------------- */\n\n/**\n * Element for testing browser HTML5 media capabilities\n *\n * @type {Element}\n * @constant\n * @private\n */\n\n\ndefineLazyProperty(Html5, 'TEST_VID', function () {\n  if (!isReal()) {\n    return;\n  }\n\n  var video = document.createElement('video');\n  var track = document.createElement('track');\n  track.kind = 'captions';\n  track.srclang = 'en';\n  track.label = 'English';\n  video.appendChild(track);\n  return video;\n});\n/**\n * Check if HTML5 media is supported by this browser/device.\n *\n * @return {boolean}\n *         - True if HTML5 media is supported.\n *         - False if HTML5 media is not supported.\n */\n\nHtml5.isSupported = function () {\n  // IE with no Media Player is a LIAR! (#984)\n  try {\n    Html5.TEST_VID.volume = 0.5;\n  } catch (e) {\n    return false;\n  }\n\n  return !!(Html5.TEST_VID && Html5.TEST_VID.canPlayType);\n};\n/**\n * Check if the tech can support the given type\n *\n * @param {string} type\n *        The mimetype to check\n * @return {string} 'probably', 'maybe', or '' (empty string)\n */\n\n\nHtml5.canPlayType = function (type) {\n  return Html5.TEST_VID.canPlayType(type);\n};\n/**\n * Check if the tech can support the given source\n *\n * @param {Object} srcObj\n *        The source object\n * @param {Object} options\n *        The options passed to the tech\n * @return {string} 'probably', 'maybe', or '' (empty string)\n */\n\n\nHtml5.canPlaySource = function (srcObj, options) {\n  return Html5.canPlayType(srcObj.type);\n};\n/**\n * Check if the volume can be changed in this browser/device.\n * Volume cannot be changed in a lot of mobile devices.\n * Specifically, it can't be changed from 1 on iOS.\n *\n * @return {boolean}\n *         - True if volume can be controlled\n *         - False otherwise\n */\n\n\nHtml5.canControlVolume = function () {\n  // IE will error if Windows Media Player not installed #3315\n  try {\n    var volume = Html5.TEST_VID.volume;\n    Html5.TEST_VID.volume = volume / 2 + 0.1;\n    var canControl = volume !== Html5.TEST_VID.volume; // With the introduction of iOS 15, there are cases where the volume is read as\n    // changed but reverts back to its original state at the start of the next tick.\n    // To determine whether volume can be controlled on iOS,\n    // a timeout is set and the volume is checked asynchronously.\n    // Since `features` doesn't currently work asynchronously, the value is manually set.\n\n    if (canControl && IS_IOS) {\n      window$1.setTimeout(function () {\n        if (Html5 && Html5.prototype) {\n          Html5.prototype.featuresVolumeControl = volume !== Html5.TEST_VID.volume;\n        }\n      }); // default iOS to false, which will be updated in the timeout above.\n\n      return false;\n    }\n\n    return canControl;\n  } catch (e) {\n    return false;\n  }\n};\n/**\n * Check if the volume can be muted in this browser/device.\n * Some devices, e.g. iOS, don't allow changing volume\n * but permits muting/unmuting.\n *\n * @return {bolean}\n *      - True if volume can be muted\n *      - False otherwise\n */\n\n\nHtml5.canMuteVolume = function () {\n  try {\n    var muted = Html5.TEST_VID.muted; // in some versions of iOS muted property doesn't always\n    // work, so we want to set both property and attribute\n\n    Html5.TEST_VID.muted = !muted;\n\n    if (Html5.TEST_VID.muted) {\n      setAttribute(Html5.TEST_VID, 'muted', 'muted');\n    } else {\n      removeAttribute(Html5.TEST_VID, 'muted', 'muted');\n    }\n\n    return muted !== Html5.TEST_VID.muted;\n  } catch (e) {\n    return false;\n  }\n};\n/**\n * Check if the playback rate can be changed in this browser/device.\n *\n * @return {boolean}\n *         - True if playback rate can be controlled\n *         - False otherwise\n */\n\n\nHtml5.canControlPlaybackRate = function () {\n  // Playback rate API is implemented in Android Chrome, but doesn't do anything\n  // https://github.com/videojs/video.js/issues/3180\n  if (IS_ANDROID && IS_CHROME && CHROME_VERSION < 58) {\n    return false;\n  } // IE will error if Windows Media Player not installed #3315\n\n\n  try {\n    var playbackRate = Html5.TEST_VID.playbackRate;\n    Html5.TEST_VID.playbackRate = playbackRate / 2 + 0.1;\n    return playbackRate !== Html5.TEST_VID.playbackRate;\n  } catch (e) {\n    return false;\n  }\n};\n/**\n * Check if we can override a video/audio elements attributes, with\n * Object.defineProperty.\n *\n * @return {boolean}\n *         - True if builtin attributes can be overridden\n *         - False otherwise\n */\n\n\nHtml5.canOverrideAttributes = function () {\n  // if we cannot overwrite the src/innerHTML property, there is no support\n  // iOS 7 safari for instance cannot do this.\n  try {\n    var noop = function noop() {};\n\n    Object.defineProperty(document.createElement('video'), 'src', {\n      get: noop,\n      set: noop\n    });\n    Object.defineProperty(document.createElement('audio'), 'src', {\n      get: noop,\n      set: noop\n    });\n    Object.defineProperty(document.createElement('video'), 'innerHTML', {\n      get: noop,\n      set: noop\n    });\n    Object.defineProperty(document.createElement('audio'), 'innerHTML', {\n      get: noop,\n      set: noop\n    });\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n};\n/**\n * Check to see if native `TextTrack`s are supported by this browser/device.\n *\n * @return {boolean}\n *         - True if native `TextTrack`s are supported.\n *         - False otherwise\n */\n\n\nHtml5.supportsNativeTextTracks = function () {\n  return IS_ANY_SAFARI || IS_IOS && IS_CHROME;\n};\n/**\n * Check to see if native `VideoTrack`s are supported by this browser/device\n *\n * @return {boolean}\n *        - True if native `VideoTrack`s are supported.\n *        - False otherwise\n */\n\n\nHtml5.supportsNativeVideoTracks = function () {\n  return !!(Html5.TEST_VID && Html5.TEST_VID.videoTracks);\n};\n/**\n * Check to see if native `AudioTrack`s are supported by this browser/device\n *\n * @return {boolean}\n *        - True if native `AudioTrack`s are supported.\n *        - False otherwise\n */\n\n\nHtml5.supportsNativeAudioTracks = function () {\n  return !!(Html5.TEST_VID && Html5.TEST_VID.audioTracks);\n};\n/**\n * An array of events available on the Html5 tech.\n *\n * @private\n * @type {Array}\n */\n\n\nHtml5.Events = ['loadstart', 'suspend', 'abort', 'error', 'emptied', 'stalled', 'loadedmetadata', 'loadeddata', 'canplay', 'canplaythrough', 'playing', 'waiting', 'seeking', 'seeked', 'ended', 'durationchange', 'timeupdate', 'progress', 'play', 'pause', 'ratechange', 'resize', 'volumechange'];\n/**\n * Boolean indicating whether the `Tech` supports volume control.\n *\n * @type {boolean}\n * @default {@link Html5.canControlVolume}\n */\n\n/**\n * Boolean indicating whether the `Tech` supports muting volume.\n *\n * @type {bolean}\n * @default {@link Html5.canMuteVolume}\n */\n\n/**\n * Boolean indicating whether the `Tech` supports changing the speed at which the media\n * plays. Examples:\n *   - Set player to play 2x (twice) as fast\n *   - Set player to play 0.5x (half) as fast\n *\n * @type {boolean}\n * @default {@link Html5.canControlPlaybackRate}\n */\n\n/**\n * Boolean indicating whether the `Tech` supports the `sourceset` event.\n *\n * @type {boolean}\n * @default\n */\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `TextTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeTextTracks}\n */\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `VideoTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeVideoTracks}\n */\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `AudioTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeAudioTracks}\n */\n\n[['featuresMuteControl', 'canMuteVolume'], ['featuresPlaybackRate', 'canControlPlaybackRate'], ['featuresSourceset', 'canOverrideAttributes'], ['featuresNativeTextTracks', 'supportsNativeTextTracks'], ['featuresNativeVideoTracks', 'supportsNativeVideoTracks'], ['featuresNativeAudioTracks', 'supportsNativeAudioTracks']].forEach(function (_ref) {\n  var key = _ref[0],\n      fn = _ref[1];\n  defineLazyProperty(Html5.prototype, key, function () {\n    return Html5[fn]();\n  }, true);\n});\nHtml5.prototype.featuresVolumeControl = Html5.canControlVolume();\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the media element\n * moving in the DOM. iOS breaks if you move the media element, so this is set this to\n * false there. Everywhere else this should be true.\n *\n * @type {boolean}\n * @default\n */\n\nHtml5.prototype.movingMediaElementInDOM = !IS_IOS; // TODO: Previous comment: No longer appears to be used. Can probably be removed.\n//       Is this true?\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports automatic media resize\n * when going into fullscreen.\n *\n * @type {boolean}\n * @default\n */\n\nHtml5.prototype.featuresFullscreenResize = true;\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the progress event.\n * If this is false, manual `progress` events will be triggered instead.\n *\n * @type {boolean}\n * @default\n */\n\nHtml5.prototype.featuresProgressEvents = true;\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the timeupdate event.\n * If this is false, manual `timeupdate` events will be triggered instead.\n *\n * @default\n */\n\nHtml5.prototype.featuresTimeupdateEvents = true; // HTML5 Feature detection and Device Fixes --------------------------------- //\n\nvar canPlayType;\n\nHtml5.patchCanPlayType = function () {\n  // Android 4.0 and above can play HLS to some extent but it reports being unable to do so\n  // Firefox and Chrome report correctly\n  if (ANDROID_VERSION >= 4.0 && !IS_FIREFOX && !IS_CHROME) {\n    canPlayType = Html5.TEST_VID && Html5.TEST_VID.constructor.prototype.canPlayType;\n\n    Html5.TEST_VID.constructor.prototype.canPlayType = function (type) {\n      var mpegurlRE = /^application\\/(?:x-|vnd\\.apple\\.)mpegurl/i;\n\n      if (type && mpegurlRE.test(type)) {\n        return 'maybe';\n      }\n\n      return canPlayType.call(this, type);\n    };\n  }\n};\n\nHtml5.unpatchCanPlayType = function () {\n  var r = Html5.TEST_VID.constructor.prototype.canPlayType;\n\n  if (canPlayType) {\n    Html5.TEST_VID.constructor.prototype.canPlayType = canPlayType;\n  }\n\n  return r;\n}; // by default, patch the media element\n\n\nHtml5.patchCanPlayType();\n\nHtml5.disposeMediaElement = function (el) {\n  if (!el) {\n    return;\n  }\n\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  } // remove any child track or source nodes to prevent their loading\n\n\n  while (el.hasChildNodes()) {\n    el.removeChild(el.firstChild);\n  } // remove any src reference. not setting `src=''` because that causes a warning\n  // in firefox\n\n\n  el.removeAttribute('src'); // force the media element to update its loading state by calling load()\n  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)\n\n  if (typeof el.load === 'function') {\n    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n    (function () {\n      try {\n        el.load();\n      } catch (e) {// not supported\n      }\n    })();\n  }\n};\n\nHtml5.resetMediaElement = function (el) {\n  if (!el) {\n    return;\n  }\n\n  var sources = el.querySelectorAll('source');\n  var i = sources.length;\n\n  while (i--) {\n    el.removeChild(sources[i]);\n  } // remove any src reference.\n  // not setting `src=''` because that throws an error\n\n\n  el.removeAttribute('src');\n\n  if (typeof el.load === 'function') {\n    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n    (function () {\n      try {\n        el.load();\n      } catch (e) {// satisfy linter\n      }\n    })();\n  }\n};\n/* Native HTML5 element property wrapping ----------------------------------- */\n// Wrap native boolean attributes with getters that check both property and attribute\n// The list is as followed:\n// muted, defaultMuted, autoplay, controls, loop, playsinline\n\n\n[\n/**\n * Get the value of `muted` from the media element. `muted` indicates\n * that the volume for the media should be set to silent. This does not actually change\n * the `volume` attribute.\n *\n * @method Html5#muted\n * @return {boolean}\n *         - True if the value of `volume` should be ignored and the audio set to silent.\n *         - False if the value of `volume` should be used.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n */\n'muted',\n/**\n * Get the value of `defaultMuted` from the media element. `defaultMuted` indicates\n * whether the media should start muted or not. Only changes the default state of the\n * media. `muted` and `defaultMuted` can have different values. {@link Html5#muted} indicates the\n * current state.\n *\n * @method Html5#defaultMuted\n * @return {boolean}\n *         - The value of `defaultMuted` from the media element.\n *         - True indicates that the media should start muted.\n *         - False indicates that the media should not start muted\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n */\n'defaultMuted',\n/**\n * Get the value of `autoplay` from the media element. `autoplay` indicates\n * that the media should start to play as soon as the page is ready.\n *\n * @method Html5#autoplay\n * @return {boolean}\n *         - The value of `autoplay` from the media element.\n *         - True indicates that the media should start as soon as the page loads.\n *         - False indicates that the media should not start as soon as the page loads.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n */\n'autoplay',\n/**\n * Get the value of `controls` from the media element. `controls` indicates\n * whether the native media controls should be shown or hidden.\n *\n * @method Html5#controls\n * @return {boolean}\n *         - The value of `controls` from the media element.\n *         - True indicates that native controls should be showing.\n *         - False indicates that native controls should be hidden.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-controls}\n */\n'controls',\n/**\n * Get the value of `loop` from the media element. `loop` indicates\n * that the media should return to the start of the media and continue playing once\n * it reaches the end.\n *\n * @method Html5#loop\n * @return {boolean}\n *         - The value of `loop` from the media element.\n *         - True indicates that playback should seek back to start once\n *           the end of a media is reached.\n *         - False indicates that playback should not loop back to the start when the\n *           end of the media is reached.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n */\n'loop',\n/**\n * Get the value of `playsinline` from the media element. `playsinline` indicates\n * to the browser that non-fullscreen playback is preferred when fullscreen\n * playback is the native default, such as in iOS Safari.\n *\n * @method Html5#playsinline\n * @return {boolean}\n *         - The value of `playsinline` from the media element.\n *         - True indicates that the media should play inline.\n *         - False indicates that the media should not play inline.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n */\n'playsinline'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop] || this.el_.hasAttribute(prop);\n  };\n}); // Wrap native boolean attributes with setters that set both property and attribute\n// The list is as followed:\n// setMuted, setDefaultMuted, setAutoplay, setLoop, setPlaysinline\n// setControls is special-cased above\n\n[\n/**\n * Set the value of `muted` on the media element. `muted` indicates that the current\n * audio level should be silent.\n *\n * @method Html5#setMuted\n * @param {boolean} muted\n *        - True if the audio should be set to silent\n *        - False otherwise\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n */\n'muted',\n/**\n * Set the value of `defaultMuted` on the media element. `defaultMuted` indicates that the current\n * audio level should be silent, but will only effect the muted level on initial playback..\n *\n * @method Html5.prototype.setDefaultMuted\n * @param {boolean} defaultMuted\n *        - True if the audio should be set to silent\n *        - False otherwise\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n */\n'defaultMuted',\n/**\n * Set the value of `autoplay` on the media element. `autoplay` indicates\n * that the media should start to play as soon as the page is ready.\n *\n * @method Html5#setAutoplay\n * @param {boolean} autoplay\n *         - True indicates that the media should start as soon as the page loads.\n *         - False indicates that the media should not start as soon as the page loads.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n */\n'autoplay',\n/**\n * Set the value of `loop` on the media element. `loop` indicates\n * that the media should return to the start of the media and continue playing once\n * it reaches the end.\n *\n * @method Html5#setLoop\n * @param {boolean} loop\n *         - True indicates that playback should seek back to start once\n *           the end of a media is reached.\n *         - False indicates that playback should not loop back to the start when the\n *           end of the media is reached.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n */\n'loop',\n/**\n * Set the value of `playsinline` from the media element. `playsinline` indicates\n * to the browser that non-fullscreen playback is preferred when fullscreen\n * playback is the native default, such as in iOS Safari.\n *\n * @method Html5#setPlaysinline\n * @param {boolean} playsinline\n *         - True indicates that the media should play inline.\n *         - False indicates that the media should not play inline.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n */\n'playsinline'].forEach(function (prop) {\n  Html5.prototype['set' + toTitleCase$1(prop)] = function (v) {\n    this.el_[prop] = v;\n\n    if (v) {\n      this.el_.setAttribute(prop, prop);\n    } else {\n      this.el_.removeAttribute(prop);\n    }\n  };\n}); // Wrap native properties with a getter\n// The list is as followed\n// paused, currentTime, buffered, volume, poster, preload, error, seeking\n// seekable, ended, playbackRate, defaultPlaybackRate, disablePictureInPicture\n// played, networkState, readyState, videoWidth, videoHeight, crossOrigin\n\n[\n/**\n * Get the value of `paused` from the media element. `paused` indicates whether the media element\n * is currently paused or not.\n *\n * @method Html5#paused\n * @return {boolean}\n *         The value of `paused` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-paused}\n */\n'paused',\n/**\n * Get the value of `currentTime` from the media element. `currentTime` indicates\n * the current second that the media is at in playback.\n *\n * @method Html5#currentTime\n * @return {number}\n *         The value of `currentTime` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-currenttime}\n */\n'currentTime',\n/**\n * Get the value of `buffered` from the media element. `buffered` is a `TimeRange`\n * object that represents the parts of the media that are already downloaded and\n * available for playback.\n *\n * @method Html5#buffered\n * @return {TimeRange}\n *         The value of `buffered` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-buffered}\n */\n'buffered',\n/**\n * Get the value of `volume` from the media element. `volume` indicates\n * the current playback volume of audio for a media. `volume` will be a value from 0\n * (silent) to 1 (loudest and default).\n *\n * @method Html5#volume\n * @return {number}\n *         The value of `volume` from the media element. Value will be between 0-1.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n */\n'volume',\n/**\n * Get the value of `poster` from the media element. `poster` indicates\n * that the url of an image file that can/will be shown when no media data is available.\n *\n * @method Html5#poster\n * @return {string}\n *         The value of `poster` from the media element. Value will be a url to an\n *         image.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-video-poster}\n */\n'poster',\n/**\n * Get the value of `preload` from the media element. `preload` indicates\n * what should download before the media is interacted with. It can have the following\n * values:\n * - none: nothing should be downloaded\n * - metadata: poster and the first few frames of the media may be downloaded to get\n *   media dimensions and other metadata\n * - auto: allow the media and metadata for the media to be downloaded before\n *    interaction\n *\n * @method Html5#preload\n * @return {string}\n *         The value of `preload` from the media element. Will be 'none', 'metadata',\n *         or 'auto'.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n */\n'preload',\n/**\n * Get the value of the `error` from the media element. `error` indicates any\n * MediaError that may have occurred during playback. If error returns null there is no\n * current error.\n *\n * @method Html5#error\n * @return {MediaError|null}\n *         The value of `error` from the media element. Will be `MediaError` if there\n *         is a current error and null otherwise.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-error}\n */\n'error',\n/**\n * Get the value of `seeking` from the media element. `seeking` indicates whether the\n * media is currently seeking to a new position or not.\n *\n * @method Html5#seeking\n * @return {boolean}\n *         - The value of `seeking` from the media element.\n *         - True indicates that the media is currently seeking to a new position.\n *         - False indicates that the media is not seeking to a new position at this time.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seeking}\n */\n'seeking',\n/**\n * Get the value of `seekable` from the media element. `seekable` returns a\n * `TimeRange` object indicating ranges of time that can currently be `seeked` to.\n *\n * @method Html5#seekable\n * @return {TimeRange}\n *         The value of `seekable` from the media element. A `TimeRange` object\n *         indicating the current ranges of time that can be seeked to.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seekable}\n */\n'seekable',\n/**\n * Get the value of `ended` from the media element. `ended` indicates whether\n * the media has reached the end or not.\n *\n * @method Html5#ended\n * @return {boolean}\n *         - The value of `ended` from the media element.\n *         - True indicates that the media has ended.\n *         - False indicates that the media has not ended.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-ended}\n */\n'ended',\n/**\n * Get the value of `playbackRate` from the media element. `playbackRate` indicates\n * the rate at which the media is currently playing back. Examples:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5#playbackRate\n * @return {number}\n *         The value of `playbackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'playbackRate',\n/**\n * Get the value of `defaultPlaybackRate` from the media element. `defaultPlaybackRate` indicates\n * the rate at which the media is currently playing back. This value will not indicate the current\n * `playbackRate` after playback has started, use {@link Html5#playbackRate} for that.\n *\n * Examples:\n *   - if defaultPlaybackRate is set to 2, media will play twice as fast.\n *   - if defaultPlaybackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5.prototype.defaultPlaybackRate\n * @return {number}\n *         The value of `defaultPlaybackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'defaultPlaybackRate',\n/**\n * Get the value of 'disablePictureInPicture' from the video element.\n *\n * @method Html5#disablePictureInPicture\n * @return {boolean} value\n *         - The value of `disablePictureInPicture` from the video element.\n *         - True indicates that the video can't be played in Picture-In-Picture mode\n *         - False indicates that the video can be played in Picture-In-Picture mode\n *\n * @see [Spec]{@link https://w3c.github.io/picture-in-picture/#disable-pip}\n */\n'disablePictureInPicture',\n/**\n * Get the value of `played` from the media element. `played` returns a `TimeRange`\n * object representing points in the media timeline that have been played.\n *\n * @method Html5#played\n * @return {TimeRange}\n *         The value of `played` from the media element. A `TimeRange` object indicating\n *         the ranges of time that have been played.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-played}\n */\n'played',\n/**\n * Get the value of `networkState` from the media element. `networkState` indicates\n * the current network state. It returns an enumeration from the following list:\n * - 0: NETWORK_EMPTY\n * - 1: NETWORK_IDLE\n * - 2: NETWORK_LOADING\n * - 3: NETWORK_NO_SOURCE\n *\n * @method Html5#networkState\n * @return {number}\n *         The value of `networkState` from the media element. This will be a number\n *         from the list in the description.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-networkstate}\n */\n'networkState',\n/**\n * Get the value of `readyState` from the media element. `readyState` indicates\n * the current state of the media element. It returns an enumeration from the\n * following list:\n * - 0: HAVE_NOTHING\n * - 1: HAVE_METADATA\n * - 2: HAVE_CURRENT_DATA\n * - 3: HAVE_FUTURE_DATA\n * - 4: HAVE_ENOUGH_DATA\n *\n * @method Html5#readyState\n * @return {number}\n *         The value of `readyState` from the media element. This will be a number\n *         from the list in the description.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#ready-states}\n */\n'readyState',\n/**\n * Get the value of `videoWidth` from the video element. `videoWidth` indicates\n * the current width of the video in css pixels.\n *\n * @method Html5#videoWidth\n * @return {number}\n *         The value of `videoWidth` from the video element. This will be a number\n *         in css pixels.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n */\n'videoWidth',\n/**\n * Get the value of `videoHeight` from the video element. `videoHeight` indicates\n * the current height of the video in css pixels.\n *\n * @method Html5#videoHeight\n * @return {number}\n *         The value of `videoHeight` from the video element. This will be a number\n *         in css pixels.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n */\n'videoHeight',\n/**\n * Get the value of `crossOrigin` from the media element. `crossOrigin` indicates\n * to the browser that should sent the cookies along with the requests for the\n * different assets/playlists\n *\n * @method Html5#crossOrigin\n * @return {string}\n *         - anonymous indicates that the media should not sent cookies.\n *         - use-credentials indicates that the media should sent cookies along the requests.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-media-crossorigin}\n */\n'crossOrigin'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop];\n  };\n}); // Wrap native properties with a setter in this format:\n// set + toTitleCase(name)\n// The list is as follows:\n// setVolume, setSrc, setPoster, setPreload, setPlaybackRate, setDefaultPlaybackRate,\n// setDisablePictureInPicture, setCrossOrigin\n\n[\n/**\n * Set the value of `volume` on the media element. `volume` indicates the current\n * audio level as a percentage in decimal form. This means that 1 is 100%, 0.5 is 50%, and\n * so on.\n *\n * @method Html5#setVolume\n * @param {number} percentAsDecimal\n *        The volume percent as a decimal. Valid range is from 0-1.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n */\n'volume',\n/**\n * Set the value of `src` on the media element. `src` indicates the current\n * {@link Tech~SourceObject} for the media.\n *\n * @method Html5#setSrc\n * @param {Tech~SourceObject} src\n *        The source object to set as the current source.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-src}\n */\n'src',\n/**\n * Set the value of `poster` on the media element. `poster` is the url to\n * an image file that can/will be shown when no media data is available.\n *\n * @method Html5#setPoster\n * @param {string} poster\n *        The url to an image that should be used as the `poster` for the media\n *        element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-poster}\n */\n'poster',\n/**\n * Set the value of `preload` on the media element. `preload` indicates\n * what should download before the media is interacted with. It can have the following\n * values:\n * - none: nothing should be downloaded\n * - metadata: poster and the first few frames of the media may be downloaded to get\n *   media dimensions and other metadata\n * - auto: allow the media and metadata for the media to be downloaded before\n *    interaction\n *\n * @method Html5#setPreload\n * @param {string} preload\n *         The value of `preload` to set on the media element. Must be 'none', 'metadata',\n *         or 'auto'.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n */\n'preload',\n/**\n * Set the value of `playbackRate` on the media element. `playbackRate` indicates\n * the rate at which the media should play back. Examples:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5#setPlaybackRate\n * @return {number}\n *         The value of `playbackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'playbackRate',\n/**\n * Set the value of `defaultPlaybackRate` on the media element. `defaultPlaybackRate` indicates\n * the rate at which the media should play back upon initial startup. Changing this value\n * after a video has started will do nothing. Instead you should used {@link Html5#setPlaybackRate}.\n *\n * Example Values:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5.prototype.setDefaultPlaybackRate\n * @return {number}\n *         The value of `defaultPlaybackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultplaybackrate}\n */\n'defaultPlaybackRate',\n/**\n * Prevents the browser from suggesting a Picture-in-Picture context menu\n * or to request Picture-in-Picture automatically in some cases.\n *\n * @method Html5#setDisablePictureInPicture\n * @param {boolean} value\n *         The true value will disable Picture-in-Picture mode.\n *\n * @see [Spec]{@link https://w3c.github.io/picture-in-picture/#disable-pip}\n */\n'disablePictureInPicture',\n/**\n * Set the value of `crossOrigin` from the media element. `crossOrigin` indicates\n * to the browser that should sent the cookies along with the requests for the\n * different assets/playlists\n *\n * @method Html5#setCrossOrigin\n * @param {string} crossOrigin\n *         - anonymous indicates that the media should not sent cookies.\n *         - use-credentials indicates that the media should sent cookies along the requests.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-media-crossorigin}\n */\n'crossOrigin'].forEach(function (prop) {\n  Html5.prototype['set' + toTitleCase$1(prop)] = function (v) {\n    this.el_[prop] = v;\n  };\n}); // wrap native functions with a function\n// The list is as follows:\n// pause, load, play\n\n[\n/**\n * A wrapper around the media elements `pause` function. This will call the `HTML5`\n * media elements `pause` function.\n *\n * @method Html5#pause\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-pause}\n */\n'pause',\n/**\n * A wrapper around the media elements `load` function. This will call the `HTML5`s\n * media element `load` function.\n *\n * @method Html5#load\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-load}\n */\n'load',\n/**\n * A wrapper around the media elements `play` function. This will call the `HTML5`s\n * media element `play` function.\n *\n * @method Html5#play\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-play}\n */\n'play'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop]();\n  };\n});\nTech.withSourceHandlers(Html5);\n/**\n * Native source handler for Html5, simply passes the source to the media element.\n *\n * @property {Tech~SourceObject} source\n *        The source object\n *\n * @property {Html5} tech\n *        The instance of the HTML5 tech.\n */\n\nHtml5.nativeSourceHandler = {};\n/**\n * Check if the media element can play the given mime type.\n *\n * @param {string} type\n *        The mimetype to check\n *\n * @return {string}\n *         'probably', 'maybe', or '' (empty string)\n */\n\nHtml5.nativeSourceHandler.canPlayType = function (type) {\n  // IE without MediaPlayer throws an error (#519)\n  try {\n    return Html5.TEST_VID.canPlayType(type);\n  } catch (e) {\n    return '';\n  }\n};\n/**\n * Check if the media element can handle a source natively.\n *\n * @param {Tech~SourceObject} source\n *         The source object\n *\n * @param {Object} [options]\n *         Options to be passed to the tech.\n *\n * @return {string}\n *         'probably', 'maybe', or '' (empty string).\n */\n\n\nHtml5.nativeSourceHandler.canHandleSource = function (source, options) {\n  // If a type was provided we should rely on that\n  if (source.type) {\n    return Html5.nativeSourceHandler.canPlayType(source.type); // If no type, fall back to checking 'video/[EXTENSION]'\n  } else if (source.src) {\n    var ext = getFileExtension(source.src);\n    return Html5.nativeSourceHandler.canPlayType(\"video/\" + ext);\n  }\n\n  return '';\n};\n/**\n * Pass the source to the native media element.\n *\n * @param {Tech~SourceObject} source\n *        The source object\n *\n * @param {Html5} tech\n *        The instance of the Html5 tech\n *\n * @param {Object} [options]\n *        The options to pass to the source\n */\n\n\nHtml5.nativeSourceHandler.handleSource = function (source, tech, options) {\n  tech.setSrc(source.src);\n};\n/**\n * A noop for the native dispose function, as cleanup is not needed.\n */\n\n\nHtml5.nativeSourceHandler.dispose = function () {}; // Register the native source handler\n\n\nHtml5.registerSourceHandler(Html5.nativeSourceHandler);\nTech.registerTech('Html5', Html5); // on the player when they happen\n\nvar TECH_EVENTS_RETRIGGER = [\n/**\n * Fired while the user agent is downloading media data.\n *\n * @event Player#progress\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `progress` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechProgress_\n * @fires Player#progress\n * @listens Tech#progress\n */\n'progress',\n/**\n * Fires when the loading of an audio/video is aborted.\n *\n * @event Player#abort\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `abort` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechAbort_\n * @fires Player#abort\n * @listens Tech#abort\n */\n'abort',\n/**\n * Fires when the browser is intentionally not getting media data.\n *\n * @event Player#suspend\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `suspend` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechSuspend_\n * @fires Player#suspend\n * @listens Tech#suspend\n */\n'suspend',\n/**\n * Fires when the current playlist is empty.\n *\n * @event Player#emptied\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `emptied` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechEmptied_\n * @fires Player#emptied\n * @listens Tech#emptied\n */\n'emptied',\n/**\n * Fires when the browser is trying to get media data, but data is not available.\n *\n * @event Player#stalled\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `stalled` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechStalled_\n * @fires Player#stalled\n * @listens Tech#stalled\n */\n'stalled',\n/**\n * Fires when the browser has loaded meta data for the audio/video.\n *\n * @event Player#loadedmetadata\n * @type {EventTarget~Event}\n */\n\n/**\n * Retrigger the `loadedmetadata` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechLoadedmetadata_\n * @fires Player#loadedmetadata\n * @listens Tech#loadedmetadata\n */\n'loadedmetadata',\n/**\n * Fires when the browser has loaded the current frame of the audio/video.\n *\n * @event Player#loadeddata\n * @type {event}\n */\n\n/**\n * Retrigger the `loadeddata` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechLoaddeddata_\n * @fires Player#loadeddata\n * @listens Tech#loadeddata\n */\n'loadeddata',\n/**\n * Fires when the current playback position has changed.\n *\n * @event Player#timeupdate\n * @type {event}\n */\n\n/**\n * Retrigger the `timeupdate` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechTimeUpdate_\n * @fires Player#timeupdate\n * @listens Tech#timeupdate\n */\n'timeupdate',\n/**\n * Fires when the video's intrinsic dimensions change\n *\n * @event Player#resize\n * @type {event}\n */\n\n/**\n * Retrigger the `resize` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechResize_\n * @fires Player#resize\n * @listens Tech#resize\n */\n'resize',\n/**\n * Fires when the volume has been changed\n *\n * @event Player#volumechange\n * @type {event}\n */\n\n/**\n * Retrigger the `volumechange` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechVolumechange_\n * @fires Player#volumechange\n * @listens Tech#volumechange\n */\n'volumechange',\n/**\n * Fires when the text track has been changed\n *\n * @event Player#texttrackchange\n * @type {event}\n */\n\n/**\n * Retrigger the `texttrackchange` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechTexttrackchange_\n * @fires Player#texttrackchange\n * @listens Tech#texttrackchange\n */\n'texttrackchange']; // events to queue when playback rate is zero\n// this is a hash for the sole purpose of mapping non-camel-cased event names\n// to camel-cased function names\n\nvar TECH_EVENTS_QUEUE = {\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  playing: 'Playing',\n  seeked: 'Seeked'\n};\nvar BREAKPOINT_ORDER = ['tiny', 'xsmall', 'small', 'medium', 'large', 'xlarge', 'huge'];\nvar BREAKPOINT_CLASSES = {}; // grep: vjs-layout-tiny\n// grep: vjs-layout-x-small\n// grep: vjs-layout-small\n// grep: vjs-layout-medium\n// grep: vjs-layout-large\n// grep: vjs-layout-x-large\n// grep: vjs-layout-huge\n\nBREAKPOINT_ORDER.forEach(function (k) {\n  var v = k.charAt(0) === 'x' ? \"x-\" + k.substring(1) : k;\n  BREAKPOINT_CLASSES[k] = \"vjs-layout-\" + v;\n});\nvar DEFAULT_BREAKPOINTS = {\n  tiny: 210,\n  xsmall: 320,\n  small: 425,\n  medium: 768,\n  large: 1440,\n  xlarge: 2560,\n  huge: Infinity\n};\n/**\n * An instance of the `Player` class is created when any of the Video.js setup methods\n * are used to initialize a video.\n *\n * After an instance has been created it can be accessed globally in two ways:\n * 1. By calling `videojs('example_video_1');`\n * 2. By using it directly via  `videojs.players.example_video_1;`\n *\n * @extends Component\n */\n\nvar Player = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Player, _Component);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Element} tag\n   *        The original video DOM element used for configuring options.\n   *\n   * @param {Object} [options]\n   *        Object of option names and values.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        Ready callback function.\n   */\n\n\n  function Player(tag, options, ready) {\n    var _this; // Make sure tag ID exists\n\n\n    tag.id = tag.id || options.id || \"vjs_video_\" + newGUID(); // Set Options\n    // The options argument overrides options set in the video tag\n    // which overrides globally set options.\n    // This latter part coincides with the load order\n    // (tag must exist before Player)\n\n    options = assign(Player.getTagSettings(tag), options); // Delay the initialization of children because we need to set up\n    // player properties first, and can't use `this` before `super()`\n\n    options.initChildren = false; // Same with creating the element\n\n    options.createEl = false; // don't auto mixin the evented mixin\n\n    options.evented = false; // we don't want the player to report touch activity on itself\n    // see enableTouchActivity in Component\n\n    options.reportTouchActivity = false; // If language is not set, get the closest lang attribute\n\n    if (!options.language) {\n      if (typeof tag.closest === 'function') {\n        var closest = tag.closest('[lang]');\n\n        if (closest && closest.getAttribute) {\n          options.language = closest.getAttribute('lang');\n        }\n      } else {\n        var element = tag;\n\n        while (element && element.nodeType === 1) {\n          if (getAttributes(element).hasOwnProperty('lang')) {\n            options.language = element.getAttribute('lang');\n            break;\n          }\n\n          element = element.parentNode;\n        }\n      }\n    } // Run base component initializing with new options\n\n\n    _this = _Component.call(this, null, options, ready) || this; // Create bound methods for document listeners.\n\n    _this.boundDocumentFullscreenChange_ = function (e) {\n      return _this.documentFullscreenChange_(e);\n    };\n\n    _this.boundFullWindowOnEscKey_ = function (e) {\n      return _this.fullWindowOnEscKey(e);\n    };\n\n    _this.boundUpdateStyleEl_ = function (e) {\n      return _this.updateStyleEl_(e);\n    };\n\n    _this.boundApplyInitTime_ = function (e) {\n      return _this.applyInitTime_(e);\n    };\n\n    _this.boundUpdateCurrentBreakpoint_ = function (e) {\n      return _this.updateCurrentBreakpoint_(e);\n    };\n\n    _this.boundHandleTechClick_ = function (e) {\n      return _this.handleTechClick_(e);\n    };\n\n    _this.boundHandleTechDoubleClick_ = function (e) {\n      return _this.handleTechDoubleClick_(e);\n    };\n\n    _this.boundHandleTechTouchStart_ = function (e) {\n      return _this.handleTechTouchStart_(e);\n    };\n\n    _this.boundHandleTechTouchMove_ = function (e) {\n      return _this.handleTechTouchMove_(e);\n    };\n\n    _this.boundHandleTechTouchEnd_ = function (e) {\n      return _this.handleTechTouchEnd_(e);\n    };\n\n    _this.boundHandleTechTap_ = function (e) {\n      return _this.handleTechTap_(e);\n    }; // default isFullscreen_ to false\n\n\n    _this.isFullscreen_ = false; // create logger\n\n    _this.log = createLogger(_this.id_); // Hold our own reference to fullscreen api so it can be mocked in tests\n\n    _this.fsApi_ = FullscreenApi; // Tracks when a tech changes the poster\n\n    _this.isPosterFromTech_ = false; // Holds callback info that gets queued when playback rate is zero\n    // and a seek is happening\n\n    _this.queuedCallbacks_ = []; // Turn off API access because we're loading a new tech that might load asynchronously\n\n    _this.isReady_ = false; // Init state hasStarted_\n\n    _this.hasStarted_ = false; // Init state userActive_\n\n    _this.userActive_ = false; // Init debugEnabled_\n\n    _this.debugEnabled_ = false; // if the global option object was accidentally blown away by\n    // someone, bail early with an informative error\n\n    if (!_this.options_ || !_this.options_.techOrder || !_this.options_.techOrder.length) {\n      throw new Error('No techOrder specified. Did you overwrite ' + 'videojs.options instead of just changing the ' + 'properties you want to override?');\n    } // Store the original tag used to set options\n\n\n    _this.tag = tag; // Store the tag attributes used to restore html5 element\n\n    _this.tagAttributes = tag && getAttributes(tag); // Update current language\n\n    _this.language(_this.options_.language); // Update Supported Languages\n\n\n    if (options.languages) {\n      // Normalise player option languages to lowercase\n      var languagesToLower = {};\n      Object.getOwnPropertyNames(options.languages).forEach(function (name) {\n        languagesToLower[name.toLowerCase()] = options.languages[name];\n      });\n      _this.languages_ = languagesToLower;\n    } else {\n      _this.languages_ = Player.prototype.options_.languages;\n    }\n\n    _this.resetCache_(); // Set poster\n\n\n    _this.poster_ = options.poster || ''; // Set controls\n\n    _this.controls_ = !!options.controls; // Original tag settings stored in options\n    // now remove immediately so native controls don't flash.\n    // May be turned back on by HTML5 tech if nativeControlsForTouch is true\n\n    tag.controls = false;\n    tag.removeAttribute('controls');\n    _this.changingSrc_ = false;\n    _this.playCallbacks_ = [];\n    _this.playTerminatedQueue_ = []; // the attribute overrides the option\n\n    if (tag.hasAttribute('autoplay')) {\n      _this.autoplay(true);\n    } else {\n      // otherwise use the setter to validate and\n      // set the correct value.\n      _this.autoplay(_this.options_.autoplay);\n    } // check plugins\n\n\n    if (options.plugins) {\n      Object.keys(options.plugins).forEach(function (name) {\n        if (typeof _this[name] !== 'function') {\n          throw new Error(\"plugin \\\"\" + name + \"\\\" does not exist\");\n        }\n      });\n    }\n    /*\n     * Store the internal state of scrubbing\n     *\n     * @private\n     * @return {Boolean} True if the user is scrubbing\n     */\n\n\n    _this.scrubbing_ = false;\n    _this.el_ = _this.createEl(); // Make this an evented object and use `el_` as its event bus.\n\n    evented(_assertThisInitialized(_this), {\n      eventBusKey: 'el_'\n    }); // listen to document and player fullscreenchange handlers so we receive those events\n    // before a user can receive them so we can update isFullscreen appropriately.\n    // make sure that we listen to fullscreenchange events before everything else to make sure that\n    // our isFullscreen method is updated properly for internal components as well as external.\n\n    if (_this.fsApi_.requestFullscreen) {\n      on(document, _this.fsApi_.fullscreenchange, _this.boundDocumentFullscreenChange_);\n\n      _this.on(_this.fsApi_.fullscreenchange, _this.boundDocumentFullscreenChange_);\n    }\n\n    if (_this.fluid_) {\n      _this.on(['playerreset', 'resize'], _this.boundUpdateStyleEl_);\n    } // We also want to pass the original player options to each component and plugin\n    // as well so they don't need to reach back into the player for options later.\n    // We also need to do another copy of this.options_ so we don't end up with\n    // an infinite loop.\n\n\n    var playerOptionsCopy = mergeOptions$3(_this.options_); // Load plugins\n\n    if (options.plugins) {\n      Object.keys(options.plugins).forEach(function (name) {\n        _this[name](options.plugins[name]);\n      });\n    } // Enable debug mode to fire debugon event for all plugins.\n\n\n    if (options.debug) {\n      _this.debug(true);\n    }\n\n    _this.options_.playerOptions = playerOptionsCopy;\n    _this.middleware_ = [];\n\n    _this.playbackRates(options.playbackRates);\n\n    _this.initChildren(); // Set isAudio based on whether or not an audio tag was used\n\n\n    _this.isAudio(tag.nodeName.toLowerCase() === 'audio'); // Update controls className. Can't do this when the controls are initially\n    // set because the element doesn't exist yet.\n\n\n    if (_this.controls()) {\n      _this.addClass('vjs-controls-enabled');\n    } else {\n      _this.addClass('vjs-controls-disabled');\n    } // Set ARIA label and region role depending on player type\n\n\n    _this.el_.setAttribute('role', 'region');\n\n    if (_this.isAudio()) {\n      _this.el_.setAttribute('aria-label', _this.localize('Audio Player'));\n    } else {\n      _this.el_.setAttribute('aria-label', _this.localize('Video Player'));\n    }\n\n    if (_this.isAudio()) {\n      _this.addClass('vjs-audio');\n    }\n\n    if (_this.flexNotSupported_()) {\n      _this.addClass('vjs-no-flex');\n    } // TODO: Make this smarter. Toggle user state between touching/mousing\n    // using events, since devices can have both touch and mouse events.\n    // TODO: Make this check be performed again when the window switches between monitors\n    // (See https://github.com/videojs/video.js/issues/5683)\n\n\n    if (TOUCH_ENABLED) {\n      _this.addClass('vjs-touch-enabled');\n    } // iOS Safari has broken hover handling\n\n\n    if (!IS_IOS) {\n      _this.addClass('vjs-workinghover');\n    } // Make player easily findable by ID\n\n\n    Player.players[_this.id_] = _assertThisInitialized(_this); // Add a major version class to aid css in plugins\n\n    var majorVersion = version$5.split('.')[0];\n\n    _this.addClass(\"vjs-v\" + majorVersion); // When the player is first initialized, trigger activity so components\n    // like the control bar show themselves if needed\n\n\n    _this.userActive(true);\n\n    _this.reportUserActivity();\n\n    _this.one('play', function (e) {\n      return _this.listenForUserActivity_(e);\n    });\n\n    _this.on('stageclick', function (e) {\n      return _this.handleStageClick_(e);\n    });\n\n    _this.on('keydown', function (e) {\n      return _this.handleKeyDown(e);\n    });\n\n    _this.on('languagechange', function (e) {\n      return _this.handleLanguagechange(e);\n    });\n\n    _this.breakpoints(_this.options_.breakpoints);\n\n    _this.responsive(_this.options_.responsive);\n\n    return _this;\n  }\n  /**\n   * Destroys the video player and does any necessary cleanup.\n   *\n   * This is especially helpful if you are dynamically adding and removing videos\n   * to/from the DOM.\n   *\n   * @fires Player#dispose\n   */\n\n\n  var _proto = Player.prototype;\n\n  _proto.dispose = function dispose() {\n    var _this2 = this;\n    /**\n     * Called when the player is being disposed of.\n     *\n     * @event Player#dispose\n     * @type {EventTarget~Event}\n     */\n\n\n    this.trigger('dispose'); // prevent dispose from being called twice\n\n    this.off('dispose'); // Make sure all player-specific document listeners are unbound. This is\n\n    off(document, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_);\n    off(document, 'keydown', this.boundFullWindowOnEscKey_);\n\n    if (this.styleEl_ && this.styleEl_.parentNode) {\n      this.styleEl_.parentNode.removeChild(this.styleEl_);\n      this.styleEl_ = null;\n    } // Kill reference to this player\n\n\n    Player.players[this.id_] = null;\n\n    if (this.tag && this.tag.player) {\n      this.tag.player = null;\n    }\n\n    if (this.el_ && this.el_.player) {\n      this.el_.player = null;\n    }\n\n    if (this.tech_) {\n      this.tech_.dispose();\n      this.isPosterFromTech_ = false;\n      this.poster_ = '';\n    }\n\n    if (this.playerElIngest_) {\n      this.playerElIngest_ = null;\n    }\n\n    if (this.tag) {\n      this.tag = null;\n    }\n\n    clearCacheForPlayer(this); // remove all event handlers for track lists\n    // all tracks and track listeners are removed on\n    // tech dispose\n\n    ALL.names.forEach(function (name) {\n      var props = ALL[name];\n\n      var list = _this2[props.getterName](); // if it is not a native list\n      // we have to manually remove event listeners\n\n\n      if (list && list.off) {\n        list.off();\n      }\n    }); // the actual .el_ is removed here\n\n    _Component.prototype.dispose.call(this);\n  }\n  /**\n   * Create the `Player`'s DOM element.\n   *\n   * @return {Element}\n   *         The DOM element that gets created.\n   */\n  ;\n\n  _proto.createEl = function createEl() {\n    var tag = this.tag;\n    var el;\n    var playerElIngest = this.playerElIngest_ = tag.parentNode && tag.parentNode.hasAttribute && tag.parentNode.hasAttribute('data-vjs-player');\n    var divEmbed = this.tag.tagName.toLowerCase() === 'video-js';\n\n    if (playerElIngest) {\n      el = this.el_ = tag.parentNode;\n    } else if (!divEmbed) {\n      el = this.el_ = _Component.prototype.createEl.call(this, 'div');\n    } // Copy over all the attributes from the tag, including ID and class\n    // ID will now reference player box, not the video tag\n\n\n    var attrs = getAttributes(tag);\n\n    if (divEmbed) {\n      el = this.el_ = tag;\n      tag = this.tag = document.createElement('video');\n\n      while (el.children.length) {\n        tag.appendChild(el.firstChild);\n      }\n\n      if (!hasClass(el, 'video-js')) {\n        addClass(el, 'video-js');\n      }\n\n      el.appendChild(tag);\n      playerElIngest = this.playerElIngest_ = el; // move properties over from our custom `video-js` element\n      // to our new `video` element. This will move things like\n      // `src` or `controls` that were set via js before the player\n      // was initialized.\n\n      Object.keys(el).forEach(function (k) {\n        try {\n          tag[k] = el[k];\n        } catch (e) {// we got a a property like outerHTML which we can't actually copy, ignore it\n        }\n      });\n    } // set tabindex to -1 to remove the video element from the focus order\n\n\n    tag.setAttribute('tabindex', '-1');\n    attrs.tabindex = '-1'; // Workaround for #4583 (JAWS+IE doesn't announce BPB or play button), and\n    // for the same issue with Chrome (on Windows) with JAWS.\n    // See https://github.com/FreedomScientific/VFO-standards-support/issues/78\n    // Note that we can't detect if JAWS is being used, but this ARIA attribute\n    //  doesn't change behavior of IE11 or Chrome if JAWS is not being used\n\n    if (IE_VERSION || IS_CHROME && IS_WINDOWS) {\n      tag.setAttribute('role', 'application');\n      attrs.role = 'application';\n    } // Remove width/height attrs from tag so CSS can make it 100% width/height\n\n\n    tag.removeAttribute('width');\n    tag.removeAttribute('height');\n\n    if ('width' in attrs) {\n      delete attrs.width;\n    }\n\n    if ('height' in attrs) {\n      delete attrs.height;\n    }\n\n    Object.getOwnPropertyNames(attrs).forEach(function (attr) {\n      // don't copy over the class attribute to the player element when we're in a div embed\n      // the class is already set up properly in the divEmbed case\n      // and we want to make sure that the `video-js` class doesn't get lost\n      if (!(divEmbed && attr === 'class')) {\n        el.setAttribute(attr, attrs[attr]);\n      }\n\n      if (divEmbed) {\n        tag.setAttribute(attr, attrs[attr]);\n      }\n    }); // Update tag id/class for use as HTML5 playback tech\n    // Might think we should do this after embedding in container so .vjs-tech class\n    // doesn't flash 100% width/height, but class only applies with .video-js parent\n\n    tag.playerId = tag.id;\n    tag.id += '_html5_api';\n    tag.className = 'vjs-tech'; // Make player findable on elements\n\n    tag.player = el.player = this; // Default state of video is paused\n\n    this.addClass('vjs-paused'); // Add a style element in the player that we'll use to set the width/height\n    // of the player in a way that's still overrideable by CSS, just like the\n    // video element\n\n    if (window$1.VIDEOJS_NO_DYNAMIC_STYLE !== true) {\n      this.styleEl_ = createStyleElement('vjs-styles-dimensions');\n      var defaultsStyleEl = $('.vjs-styles-defaults');\n      var head = $('head');\n      head.insertBefore(this.styleEl_, defaultsStyleEl ? defaultsStyleEl.nextSibling : head.firstChild);\n    }\n\n    this.fill_ = false;\n    this.fluid_ = false; // Pass in the width/height/aspectRatio options which will update the style el\n\n    this.width(this.options_.width);\n    this.height(this.options_.height);\n    this.fill(this.options_.fill);\n    this.fluid(this.options_.fluid);\n    this.aspectRatio(this.options_.aspectRatio); // support both crossOrigin and crossorigin to reduce confusion and issues around the name\n\n    this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin); // Hide any links within the video/audio tag,\n    // because IE doesn't hide them completely from screen readers.\n\n    var links = tag.getElementsByTagName('a');\n\n    for (var i = 0; i < links.length; i++) {\n      var linkEl = links.item(i);\n      addClass(linkEl, 'vjs-hidden');\n      linkEl.setAttribute('hidden', 'hidden');\n    } // insertElFirst seems to cause the networkState to flicker from 3 to 2, so\n    // keep track of the original for later so we can know if the source originally failed\n\n\n    tag.initNetworkState_ = tag.networkState; // Wrap video tag in div (el/box) container\n\n    if (tag.parentNode && !playerElIngest) {\n      tag.parentNode.insertBefore(el, tag);\n    } // insert the tag as the first child of the player element\n    // then manually add it to the children array so that this.addChild\n    // will work properly for other components\n    //\n    // Breaks iPhone, fixed in HTML5 setup.\n\n\n    prependTo(tag, el);\n    this.children_.unshift(tag); // Set lang attr on player to ensure CSS :lang() in consistent with player\n    // if it's been set to something different to the doc\n\n    this.el_.setAttribute('lang', this.language_);\n    this.el_.setAttribute('translate', 'no');\n    this.el_ = el;\n    return el;\n  }\n  /**\n   * Get or set the `Player`'s crossOrigin option. For the HTML5 player, this\n   * sets the `crossOrigin` property on the `<video>` tag to control the CORS\n   * behavior.\n   *\n   * @see [Video Element Attributes]{@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attr-crossorigin}\n   *\n   * @param {string} [value]\n   *        The value to set the `Player`'s crossOrigin to. If an argument is\n   *        given, must be one of `anonymous` or `use-credentials`.\n   *\n   * @return {string|undefined}\n   *         - The current crossOrigin value of the `Player` when getting.\n   *         - undefined when setting\n   */\n  ;\n\n  _proto.crossOrigin = function crossOrigin(value) {\n    if (!value) {\n      return this.techGet_('crossOrigin');\n    }\n\n    if (value !== 'anonymous' && value !== 'use-credentials') {\n      log$1.warn(\"crossOrigin must be \\\"anonymous\\\" or \\\"use-credentials\\\", given \\\"\" + value + \"\\\"\");\n      return;\n    }\n\n    this.techCall_('setCrossOrigin', value);\n    return;\n  }\n  /**\n   * A getter/setter for the `Player`'s width. Returns the player's configured value.\n   * To get the current width use `currentWidth()`.\n   *\n   * @param {number} [value]\n   *        The value to set the `Player`'s width to.\n   *\n   * @return {number}\n   *         The current width of the `Player` when getting.\n   */\n  ;\n\n  _proto.width = function width(value) {\n    return this.dimension('width', value);\n  }\n  /**\n   * A getter/setter for the `Player`'s height. Returns the player's configured value.\n   * To get the current height use `currentheight()`.\n   *\n   * @param {number} [value]\n   *        The value to set the `Player`'s heigth to.\n   *\n   * @return {number}\n   *         The current height of the `Player` when getting.\n   */\n  ;\n\n  _proto.height = function height(value) {\n    return this.dimension('height', value);\n  }\n  /**\n   * A getter/setter for the `Player`'s width & height.\n   *\n   * @param {string} dimension\n   *        This string can be:\n   *        - 'width'\n   *        - 'height'\n   *\n   * @param {number} [value]\n   *        Value for dimension specified in the first argument.\n   *\n   * @return {number}\n   *         The dimension arguments value when getting (width/height).\n   */\n  ;\n\n  _proto.dimension = function dimension(_dimension, value) {\n    var privDimension = _dimension + '_';\n\n    if (value === undefined) {\n      return this[privDimension] || 0;\n    }\n\n    if (value === '' || value === 'auto') {\n      // If an empty string is given, reset the dimension to be automatic\n      this[privDimension] = undefined;\n      this.updateStyleEl_();\n      return;\n    }\n\n    var parsedVal = parseFloat(value);\n\n    if (isNaN(parsedVal)) {\n      log$1.error(\"Improper value \\\"\" + value + \"\\\" supplied for for \" + _dimension);\n      return;\n    }\n\n    this[privDimension] = parsedVal;\n    this.updateStyleEl_();\n  }\n  /**\n   * A getter/setter/toggler for the vjs-fluid `className` on the `Player`.\n   *\n   * Turning this on will turn off fill mode.\n   *\n   * @param {boolean} [bool]\n   *        - A value of true adds the class.\n   *        - A value of false removes the class.\n   *        - No value will be a getter.\n   *\n   * @return {boolean|undefined}\n   *         - The value of fluid when getting.\n   *         - `undefined` when setting.\n   */\n  ;\n\n  _proto.fluid = function fluid(bool) {\n    var _this3 = this;\n\n    if (bool === undefined) {\n      return !!this.fluid_;\n    }\n\n    this.fluid_ = !!bool;\n\n    if (isEvented(this)) {\n      this.off(['playerreset', 'resize'], this.boundUpdateStyleEl_);\n    }\n\n    if (bool) {\n      this.addClass('vjs-fluid');\n      this.fill(false);\n      addEventedCallback(this, function () {\n        _this3.on(['playerreset', 'resize'], _this3.boundUpdateStyleEl_);\n      });\n    } else {\n      this.removeClass('vjs-fluid');\n    }\n\n    this.updateStyleEl_();\n  }\n  /**\n   * A getter/setter/toggler for the vjs-fill `className` on the `Player`.\n   *\n   * Turning this on will turn off fluid mode.\n   *\n   * @param {boolean} [bool]\n   *        - A value of true adds the class.\n   *        - A value of false removes the class.\n   *        - No value will be a getter.\n   *\n   * @return {boolean|undefined}\n   *         - The value of fluid when getting.\n   *         - `undefined` when setting.\n   */\n  ;\n\n  _proto.fill = function fill(bool) {\n    if (bool === undefined) {\n      return !!this.fill_;\n    }\n\n    this.fill_ = !!bool;\n\n    if (bool) {\n      this.addClass('vjs-fill');\n      this.fluid(false);\n    } else {\n      this.removeClass('vjs-fill');\n    }\n  }\n  /**\n   * Get/Set the aspect ratio\n   *\n   * @param {string} [ratio]\n   *        Aspect ratio for player\n   *\n   * @return {string|undefined}\n   *         returns the current aspect ratio when getting\n   */\n\n  /**\n   * A getter/setter for the `Player`'s aspect ratio.\n   *\n   * @param {string} [ratio]\n   *        The value to set the `Player`'s aspect ratio to.\n   *\n   * @return {string|undefined}\n   *         - The current aspect ratio of the `Player` when getting.\n   *         - undefined when setting\n   */\n  ;\n\n  _proto.aspectRatio = function aspectRatio(ratio) {\n    if (ratio === undefined) {\n      return this.aspectRatio_;\n    } // Check for width:height format\n\n\n    if (!/^\\d+\\:\\d+$/.test(ratio)) {\n      throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');\n    }\n\n    this.aspectRatio_ = ratio; // We're assuming if you set an aspect ratio you want fluid mode,\n    // because in fixed mode you could calculate width and height yourself.\n\n    this.fluid(true);\n    this.updateStyleEl_();\n  }\n  /**\n   * Update styles of the `Player` element (height, width and aspect ratio).\n   *\n   * @private\n   * @listens Tech#loadedmetadata\n   */\n  ;\n\n  _proto.updateStyleEl_ = function updateStyleEl_() {\n    if (window$1.VIDEOJS_NO_DYNAMIC_STYLE === true) {\n      var _width = typeof this.width_ === 'number' ? this.width_ : this.options_.width;\n\n      var _height = typeof this.height_ === 'number' ? this.height_ : this.options_.height;\n\n      var techEl = this.tech_ && this.tech_.el();\n\n      if (techEl) {\n        if (_width >= 0) {\n          techEl.width = _width;\n        }\n\n        if (_height >= 0) {\n          techEl.height = _height;\n        }\n      }\n\n      return;\n    }\n\n    var width;\n    var height;\n    var aspectRatio;\n    var idClass; // The aspect ratio is either used directly or to calculate width and height.\n\n    if (this.aspectRatio_ !== undefined && this.aspectRatio_ !== 'auto') {\n      // Use any aspectRatio that's been specifically set\n      aspectRatio = this.aspectRatio_;\n    } else if (this.videoWidth() > 0) {\n      // Otherwise try to get the aspect ratio from the video metadata\n      aspectRatio = this.videoWidth() + ':' + this.videoHeight();\n    } else {\n      // Or use a default. The video element's is 2:1, but 16:9 is more common.\n      aspectRatio = '16:9';\n    } // Get the ratio as a decimal we can use to calculate dimensions\n\n\n    var ratioParts = aspectRatio.split(':');\n    var ratioMultiplier = ratioParts[1] / ratioParts[0];\n\n    if (this.width_ !== undefined) {\n      // Use any width that's been specifically set\n      width = this.width_;\n    } else if (this.height_ !== undefined) {\n      // Or calulate the width from the aspect ratio if a height has been set\n      width = this.height_ / ratioMultiplier;\n    } else {\n      // Or use the video's metadata, or use the video el's default of 300\n      width = this.videoWidth() || 300;\n    }\n\n    if (this.height_ !== undefined) {\n      // Use any height that's been specifically set\n      height = this.height_;\n    } else {\n      // Otherwise calculate the height from the ratio and the width\n      height = width * ratioMultiplier;\n    } // Ensure the CSS class is valid by starting with an alpha character\n\n\n    if (/^[^a-zA-Z]/.test(this.id())) {\n      idClass = 'dimensions-' + this.id();\n    } else {\n      idClass = this.id() + '-dimensions';\n    } // Ensure the right class is still on the player for the style element\n\n\n    this.addClass(idClass);\n    setTextContent(this.styleEl_, \"\\n      .\" + idClass + \" {\\n        width: \" + width + \"px;\\n        height: \" + height + \"px;\\n      }\\n\\n      .\" + idClass + \".vjs-fluid {\\n        padding-top: \" + ratioMultiplier * 100 + \"%;\\n      }\\n    \");\n  }\n  /**\n   * Load/Create an instance of playback {@link Tech} including element\n   * and API methods. Then append the `Tech` element in `Player` as a child.\n   *\n   * @param {string} techName\n   *        name of the playback technology\n   *\n   * @param {string} source\n   *        video source\n   *\n   * @private\n   */\n  ;\n\n  _proto.loadTech_ = function loadTech_(techName, source) {\n    var _this4 = this; // Pause and remove current playback technology\n\n\n    if (this.tech_) {\n      this.unloadTech_();\n    }\n\n    var titleTechName = toTitleCase$1(techName);\n    var camelTechName = techName.charAt(0).toLowerCase() + techName.slice(1); // get rid of the HTML5 video tag as soon as we are using another tech\n\n    if (titleTechName !== 'Html5' && this.tag) {\n      Tech.getTech('Html5').disposeMediaElement(this.tag);\n      this.tag.player = null;\n      this.tag = null;\n    }\n\n    this.techName_ = titleTechName; // Turn off API access because we're loading a new tech that might load asynchronously\n\n    this.isReady_ = false;\n    var autoplay = this.autoplay(); // if autoplay is a string (or `true` with normalizeAutoplay: true) we pass false to the tech\n    // because the player is going to handle autoplay on `loadstart`\n\n    if (typeof this.autoplay() === 'string' || this.autoplay() === true && this.options_.normalizeAutoplay) {\n      autoplay = false;\n    } // Grab tech-specific options from player options and add source and parent element to use.\n\n\n    var techOptions = {\n      source: source,\n      autoplay: autoplay,\n      'nativeControlsForTouch': this.options_.nativeControlsForTouch,\n      'playerId': this.id(),\n      'techId': this.id() + \"_\" + camelTechName + \"_api\",\n      'playsinline': this.options_.playsinline,\n      'preload': this.options_.preload,\n      'loop': this.options_.loop,\n      'disablePictureInPicture': this.options_.disablePictureInPicture,\n      'muted': this.options_.muted,\n      'poster': this.poster(),\n      'language': this.language(),\n      'playerElIngest': this.playerElIngest_ || false,\n      'vtt.js': this.options_['vtt.js'],\n      'canOverridePoster': !!this.options_.techCanOverridePoster,\n      'enableSourceset': this.options_.enableSourceset,\n      'Promise': this.options_.Promise\n    };\n    ALL.names.forEach(function (name) {\n      var props = ALL[name];\n      techOptions[props.getterName] = _this4[props.privateName];\n    });\n    assign(techOptions, this.options_[titleTechName]);\n    assign(techOptions, this.options_[camelTechName]);\n    assign(techOptions, this.options_[techName.toLowerCase()]);\n\n    if (this.tag) {\n      techOptions.tag = this.tag;\n    }\n\n    if (source && source.src === this.cache_.src && this.cache_.currentTime > 0) {\n      techOptions.startTime = this.cache_.currentTime;\n    } // Initialize tech instance\n\n\n    var TechClass = Tech.getTech(techName);\n\n    if (!TechClass) {\n      throw new Error(\"No Tech named '\" + titleTechName + \"' exists! '\" + titleTechName + \"' should be registered using videojs.registerTech()'\");\n    }\n\n    this.tech_ = new TechClass(techOptions); // player.triggerReady is always async, so don't need this to be async\n\n    this.tech_.ready(bind(this, this.handleTechReady_), true);\n    textTrackConverter.jsonToTextTracks(this.textTracksJson_ || [], this.tech_); // Listen to all HTML5-defined events and trigger them on the player\n\n    TECH_EVENTS_RETRIGGER.forEach(function (event) {\n      _this4.on(_this4.tech_, event, function (e) {\n        return _this4[\"handleTech\" + toTitleCase$1(event) + \"_\"](e);\n      });\n    });\n    Object.keys(TECH_EVENTS_QUEUE).forEach(function (event) {\n      _this4.on(_this4.tech_, event, function (eventObj) {\n        if (_this4.tech_.playbackRate() === 0 && _this4.tech_.seeking()) {\n          _this4.queuedCallbacks_.push({\n            callback: _this4[\"handleTech\" + TECH_EVENTS_QUEUE[event] + \"_\"].bind(_this4),\n            event: eventObj\n          });\n\n          return;\n        }\n\n        _this4[\"handleTech\" + TECH_EVENTS_QUEUE[event] + \"_\"](eventObj);\n      });\n    });\n    this.on(this.tech_, 'loadstart', function (e) {\n      return _this4.handleTechLoadStart_(e);\n    });\n    this.on(this.tech_, 'sourceset', function (e) {\n      return _this4.handleTechSourceset_(e);\n    });\n    this.on(this.tech_, 'waiting', function (e) {\n      return _this4.handleTechWaiting_(e);\n    });\n    this.on(this.tech_, 'ended', function (e) {\n      return _this4.handleTechEnded_(e);\n    });\n    this.on(this.tech_, 'seeking', function (e) {\n      return _this4.handleTechSeeking_(e);\n    });\n    this.on(this.tech_, 'play', function (e) {\n      return _this4.handleTechPlay_(e);\n    });\n    this.on(this.tech_, 'firstplay', function (e) {\n      return _this4.handleTechFirstPlay_(e);\n    });\n    this.on(this.tech_, 'pause', function (e) {\n      return _this4.handleTechPause_(e);\n    });\n    this.on(this.tech_, 'durationchange', function (e) {\n      return _this4.handleTechDurationChange_(e);\n    });\n    this.on(this.tech_, 'fullscreenchange', function (e, data) {\n      return _this4.handleTechFullscreenChange_(e, data);\n    });\n    this.on(this.tech_, 'fullscreenerror', function (e, err) {\n      return _this4.handleTechFullscreenError_(e, err);\n    });\n    this.on(this.tech_, 'enterpictureinpicture', function (e) {\n      return _this4.handleTechEnterPictureInPicture_(e);\n    });\n    this.on(this.tech_, 'leavepictureinpicture', function (e) {\n      return _this4.handleTechLeavePictureInPicture_(e);\n    });\n    this.on(this.tech_, 'error', function (e) {\n      return _this4.handleTechError_(e);\n    });\n    this.on(this.tech_, 'posterchange', function (e) {\n      return _this4.handleTechPosterChange_(e);\n    });\n    this.on(this.tech_, 'textdata', function (e) {\n      return _this4.handleTechTextData_(e);\n    });\n    this.on(this.tech_, 'ratechange', function (e) {\n      return _this4.handleTechRateChange_(e);\n    });\n    this.on(this.tech_, 'loadedmetadata', this.boundUpdateStyleEl_);\n    this.usingNativeControls(this.techGet_('controls'));\n\n    if (this.controls() && !this.usingNativeControls()) {\n      this.addTechControlsListeners_();\n    } // Add the tech element in the DOM if it was not already there\n    // Make sure to not insert the original video element if using Html5\n\n\n    if (this.tech_.el().parentNode !== this.el() && (titleTechName !== 'Html5' || !this.tag)) {\n      prependTo(this.tech_.el(), this.el());\n    } // Get rid of the original video tag reference after the first tech is loaded\n\n\n    if (this.tag) {\n      this.tag.player = null;\n      this.tag = null;\n    }\n  }\n  /**\n   * Unload and dispose of the current playback {@link Tech}.\n   *\n   * @private\n   */\n  ;\n\n  _proto.unloadTech_ = function unloadTech_() {\n    var _this5 = this; // Save the current text tracks so that we can reuse the same text tracks with the next tech\n\n\n    ALL.names.forEach(function (name) {\n      var props = ALL[name];\n      _this5[props.privateName] = _this5[props.getterName]();\n    });\n    this.textTracksJson_ = textTrackConverter.textTracksToJson(this.tech_);\n    this.isReady_ = false;\n    this.tech_.dispose();\n    this.tech_ = false;\n\n    if (this.isPosterFromTech_) {\n      this.poster_ = '';\n      this.trigger('posterchange');\n    }\n\n    this.isPosterFromTech_ = false;\n  }\n  /**\n   * Return a reference to the current {@link Tech}.\n   * It will print a warning by default about the danger of using the tech directly\n   * but any argument that is passed in will silence the warning.\n   *\n   * @param {*} [safety]\n   *        Anything passed in to silence the warning\n   *\n   * @return {Tech}\n   *         The Tech\n   */\n  ;\n\n  _proto.tech = function tech(safety) {\n    if (safety === undefined) {\n      log$1.warn('Using the tech directly can be dangerous. I hope you know what you\\'re doing.\\n' + 'See https://github.com/videojs/video.js/issues/2617 for more info.\\n');\n    }\n\n    return this.tech_;\n  }\n  /**\n   * Set up click and touch listeners for the playback element\n   *\n   * - On desktops: a click on the video itself will toggle playback\n   * - On mobile devices: a click on the video toggles controls\n   *   which is done by toggling the user state between active and\n   *   inactive\n   * - A tap can signal that a user has become active or has become inactive\n   *   e.g. a quick tap on an iPhone movie should reveal the controls. Another\n   *   quick tap should hide them again (signaling the user is in an inactive\n   *   viewing state)\n   * - In addition to this, we still want the user to be considered inactive after\n   *   a few seconds of inactivity.\n   *\n   * > Note: the only part of iOS interaction we can't mimic with this setup\n   * is a touch and hold on the video element counting as activity in order to\n   * keep the controls showing, but that shouldn't be an issue. A touch and hold\n   * on any controls will still keep the user active\n   *\n   * @private\n   */\n  ;\n\n  _proto.addTechControlsListeners_ = function addTechControlsListeners_() {\n    // Make sure to remove all the previous listeners in case we are called multiple times.\n    this.removeTechControlsListeners_();\n    this.on(this.tech_, 'click', this.boundHandleTechClick_);\n    this.on(this.tech_, 'dblclick', this.boundHandleTechDoubleClick_); // If the controls were hidden we don't want that to change without a tap event\n    // so we'll check if the controls were already showing before reporting user\n    // activity\n\n    this.on(this.tech_, 'touchstart', this.boundHandleTechTouchStart_);\n    this.on(this.tech_, 'touchmove', this.boundHandleTechTouchMove_);\n    this.on(this.tech_, 'touchend', this.boundHandleTechTouchEnd_); // The tap listener needs to come after the touchend listener because the tap\n    // listener cancels out any reportedUserActivity when setting userActive(false)\n\n    this.on(this.tech_, 'tap', this.boundHandleTechTap_);\n  }\n  /**\n   * Remove the listeners used for click and tap controls. This is needed for\n   * toggling to controls disabled, where a tap/touch should do nothing.\n   *\n   * @private\n   */\n  ;\n\n  _proto.removeTechControlsListeners_ = function removeTechControlsListeners_() {\n    // We don't want to just use `this.off()` because there might be other needed\n    // listeners added by techs that extend this.\n    this.off(this.tech_, 'tap', this.boundHandleTechTap_);\n    this.off(this.tech_, 'touchstart', this.boundHandleTechTouchStart_);\n    this.off(this.tech_, 'touchmove', this.boundHandleTechTouchMove_);\n    this.off(this.tech_, 'touchend', this.boundHandleTechTouchEnd_);\n    this.off(this.tech_, 'click', this.boundHandleTechClick_);\n    this.off(this.tech_, 'dblclick', this.boundHandleTechDoubleClick_);\n  }\n  /**\n   * Player waits for the tech to be ready\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleTechReady_ = function handleTechReady_() {\n    this.triggerReady(); // Keep the same volume as before\n\n    if (this.cache_.volume) {\n      this.techCall_('setVolume', this.cache_.volume);\n    } // Look if the tech found a higher resolution poster while loading\n\n\n    this.handleTechPosterChange_(); // Update the duration if available\n\n    this.handleTechDurationChange_();\n  }\n  /**\n   * Retrigger the `loadstart` event that was triggered by the {@link Tech}. This\n   * function will also trigger {@link Player#firstplay} if it is the first loadstart\n   * for a video.\n   *\n   * @fires Player#loadstart\n   * @fires Player#firstplay\n   * @listens Tech#loadstart\n   * @private\n   */\n  ;\n\n  _proto.handleTechLoadStart_ = function handleTechLoadStart_() {\n    // TODO: Update to use `emptied` event instead. See #1277.\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-seeking'); // reset the error state\n\n    this.error(null); // Update the duration\n\n    this.handleTechDurationChange_(); // If it's already playing we want to trigger a firstplay event now.\n    // The firstplay event relies on both the play and loadstart events\n    // which can happen in any order for a new source\n\n    if (!this.paused()) {\n      /**\n       * Fired when the user agent begins looking for media data\n       *\n       * @event Player#loadstart\n       * @type {EventTarget~Event}\n       */\n      this.trigger('loadstart');\n      this.trigger('firstplay');\n    } else {\n      // reset the hasStarted state\n      this.hasStarted(false);\n      this.trigger('loadstart');\n    } // autoplay happens after loadstart for the browser,\n    // so we mimic that behavior\n\n\n    this.manualAutoplay_(this.autoplay() === true && this.options_.normalizeAutoplay ? 'play' : this.autoplay());\n  }\n  /**\n   * Handle autoplay string values, rather than the typical boolean\n   * values that should be handled by the tech. Note that this is not\n   * part of any specification. Valid values and what they do can be\n   * found on the autoplay getter at Player#autoplay()\n   */\n  ;\n\n  _proto.manualAutoplay_ = function manualAutoplay_(type) {\n    var _this6 = this;\n\n    if (!this.tech_ || typeof type !== 'string') {\n      return;\n    } // Save original muted() value, set muted to true, and attempt to play().\n    // On promise rejection, restore muted from saved value\n\n\n    var resolveMuted = function resolveMuted() {\n      var previouslyMuted = _this6.muted();\n\n      _this6.muted(true);\n\n      var restoreMuted = function restoreMuted() {\n        _this6.muted(previouslyMuted);\n      }; // restore muted on play terminatation\n\n\n      _this6.playTerminatedQueue_.push(restoreMuted);\n\n      var mutedPromise = _this6.play();\n\n      if (!isPromise(mutedPromise)) {\n        return;\n      }\n\n      return mutedPromise[\"catch\"](function (err) {\n        restoreMuted();\n        throw new Error(\"Rejection at manualAutoplay. Restoring muted value. \" + (err ? err : ''));\n      });\n    };\n\n    var promise; // if muted defaults to true\n    // the only thing we can do is call play\n\n    if (type === 'any' && !this.muted()) {\n      promise = this.play();\n\n      if (isPromise(promise)) {\n        promise = promise[\"catch\"](resolveMuted);\n      }\n    } else if (type === 'muted' && !this.muted()) {\n      promise = resolveMuted();\n    } else {\n      promise = this.play();\n    }\n\n    if (!isPromise(promise)) {\n      return;\n    }\n\n    return promise.then(function () {\n      _this6.trigger({\n        type: 'autoplay-success',\n        autoplay: type\n      });\n    })[\"catch\"](function () {\n      _this6.trigger({\n        type: 'autoplay-failure',\n        autoplay: type\n      });\n    });\n  }\n  /**\n   * Update the internal source caches so that we return the correct source from\n   * `src()`, `currentSource()`, and `currentSources()`.\n   *\n   * > Note: `currentSources` will not be updated if the source that is passed in exists\n   *         in the current `currentSources` cache.\n   *\n   *\n   * @param {Tech~SourceObject} srcObj\n   *        A string or object source to update our caches to.\n   */\n  ;\n\n  _proto.updateSourceCaches_ = function updateSourceCaches_(srcObj) {\n    if (srcObj === void 0) {\n      srcObj = '';\n    }\n\n    var src = srcObj;\n    var type = '';\n\n    if (typeof src !== 'string') {\n      src = srcObj.src;\n      type = srcObj.type;\n    } // make sure all the caches are set to default values\n    // to prevent null checking\n\n\n    this.cache_.source = this.cache_.source || {};\n    this.cache_.sources = this.cache_.sources || []; // try to get the type of the src that was passed in\n\n    if (src && !type) {\n      type = findMimetype(this, src);\n    } // update `currentSource` cache always\n\n\n    this.cache_.source = mergeOptions$3({}, srcObj, {\n      src: src,\n      type: type\n    });\n    var matchingSources = this.cache_.sources.filter(function (s) {\n      return s.src && s.src === src;\n    });\n    var sourceElSources = [];\n    var sourceEls = this.$$('source');\n    var matchingSourceEls = [];\n\n    for (var i = 0; i < sourceEls.length; i++) {\n      var sourceObj = getAttributes(sourceEls[i]);\n      sourceElSources.push(sourceObj);\n\n      if (sourceObj.src && sourceObj.src === src) {\n        matchingSourceEls.push(sourceObj.src);\n      }\n    } // if we have matching source els but not matching sources\n    // the current source cache is not up to date\n\n\n    if (matchingSourceEls.length && !matchingSources.length) {\n      this.cache_.sources = sourceElSources; // if we don't have matching source or source els set the\n      // sources cache to the `currentSource` cache\n    } else if (!matchingSources.length) {\n      this.cache_.sources = [this.cache_.source];\n    } // update the tech `src` cache\n\n\n    this.cache_.src = src;\n  }\n  /**\n   * *EXPERIMENTAL* Fired when the source is set or changed on the {@link Tech}\n   * causing the media element to reload.\n   *\n   * It will fire for the initial source and each subsequent source.\n   * This event is a custom event from Video.js and is triggered by the {@link Tech}.\n   *\n   * The event object for this event contains a `src` property that will contain the source\n   * that was available when the event was triggered. This is generally only necessary if Video.js\n   * is switching techs while the source was being changed.\n   *\n   * It is also fired when `load` is called on the player (or media element)\n   * because the {@link https://html.spec.whatwg.org/multipage/media.html#dom-media-load|specification for `load`}\n   * says that the resource selection algorithm needs to be aborted and restarted.\n   * In this case, it is very likely that the `src` property will be set to the\n   * empty string `\"\"` to indicate we do not know what the source will be but\n   * that it is changing.\n   *\n   * *This event is currently still experimental and may change in minor releases.*\n   * __To use this, pass `enableSourceset` option to the player.__\n   *\n   * @event Player#sourceset\n   * @type {EventTarget~Event}\n   * @prop {string} src\n   *                The source url available when the `sourceset` was triggered.\n   *                It will be an empty string if we cannot know what the source is\n   *                but know that the source will change.\n   */\n\n  /**\n   * Retrigger the `sourceset` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#sourceset\n   * @listens Tech#sourceset\n   * @private\n   */\n  ;\n\n  _proto.handleTechSourceset_ = function handleTechSourceset_(event) {\n    var _this7 = this; // only update the source cache when the source\n    // was not updated using the player api\n\n\n    if (!this.changingSrc_) {\n      var updateSourceCaches = function updateSourceCaches(src) {\n        return _this7.updateSourceCaches_(src);\n      };\n\n      var playerSrc = this.currentSource().src;\n      var eventSrc = event.src; // if we have a playerSrc that is not a blob, and a tech src that is a blob\n\n      if (playerSrc && !/^blob:/.test(playerSrc) && /^blob:/.test(eventSrc)) {\n        // if both the tech source and the player source were updated we assume\n        // something like @videojs/http-streaming did the sourceset and skip updating the source cache.\n        if (!this.lastSource_ || this.lastSource_.tech !== eventSrc && this.lastSource_.player !== playerSrc) {\n          updateSourceCaches = function updateSourceCaches() {};\n        }\n      } // update the source to the initial source right away\n      // in some cases this will be empty string\n\n\n      updateSourceCaches(eventSrc); // if the `sourceset` `src` was an empty string\n      // wait for a `loadstart` to update the cache to `currentSrc`.\n      // If a sourceset happens before a `loadstart`, we reset the state\n\n      if (!event.src) {\n        this.tech_.any(['sourceset', 'loadstart'], function (e) {\n          // if a sourceset happens before a `loadstart` there\n          // is nothing to do as this `handleTechSourceset_`\n          // will be called again and this will be handled there.\n          if (e.type === 'sourceset') {\n            return;\n          }\n\n          var techSrc = _this7.techGet('currentSrc');\n\n          _this7.lastSource_.tech = techSrc;\n\n          _this7.updateSourceCaches_(techSrc);\n        });\n      }\n    }\n\n    this.lastSource_ = {\n      player: this.currentSource().src,\n      tech: event.src\n    };\n    this.trigger({\n      src: event.src,\n      type: 'sourceset'\n    });\n  }\n  /**\n   * Add/remove the vjs-has-started class\n   *\n   * @fires Player#firstplay\n   *\n   * @param {boolean} request\n   *        - true: adds the class\n   *        - false: remove the class\n   *\n   * @return {boolean}\n   *         the boolean value of hasStarted_\n   */\n  ;\n\n  _proto.hasStarted = function hasStarted(request) {\n    if (request === undefined) {\n      // act as getter, if we have no request to change\n      return this.hasStarted_;\n    }\n\n    if (request === this.hasStarted_) {\n      return;\n    }\n\n    this.hasStarted_ = request;\n\n    if (this.hasStarted_) {\n      this.addClass('vjs-has-started');\n      this.trigger('firstplay');\n    } else {\n      this.removeClass('vjs-has-started');\n    }\n  }\n  /**\n   * Fired whenever the media begins or resumes playback\n   *\n   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play}\n   * @fires Player#play\n   * @listens Tech#play\n   * @private\n   */\n  ;\n\n  _proto.handleTechPlay_ = function handleTechPlay_() {\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-paused');\n    this.addClass('vjs-playing'); // hide the poster when the user hits play\n\n    this.hasStarted(true);\n    /**\n     * Triggered whenever an {@link Tech#play} event happens. Indicates that\n     * playback has started or resumed.\n     *\n     * @event Player#play\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('play');\n  }\n  /**\n   * Retrigger the `ratechange` event that was triggered by the {@link Tech}.\n   *\n   * If there were any events queued while the playback rate was zero, fire\n   * those events now.\n   *\n   * @private\n   * @method Player#handleTechRateChange_\n   * @fires Player#ratechange\n   * @listens Tech#ratechange\n   */\n  ;\n\n  _proto.handleTechRateChange_ = function handleTechRateChange_() {\n    if (this.tech_.playbackRate() > 0 && this.cache_.lastPlaybackRate === 0) {\n      this.queuedCallbacks_.forEach(function (queued) {\n        return queued.callback(queued.event);\n      });\n      this.queuedCallbacks_ = [];\n    }\n\n    this.cache_.lastPlaybackRate = this.tech_.playbackRate();\n    /**\n     * Fires when the playing speed of the audio/video is changed\n     *\n     * @event Player#ratechange\n     * @type {event}\n     */\n\n    this.trigger('ratechange');\n  }\n  /**\n   * Retrigger the `waiting` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#waiting\n   * @listens Tech#waiting\n   * @private\n   */\n  ;\n\n  _proto.handleTechWaiting_ = function handleTechWaiting_() {\n    var _this8 = this;\n\n    this.addClass('vjs-waiting');\n    /**\n     * A readyState change on the DOM element has caused playback to stop.\n     *\n     * @event Player#waiting\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('waiting'); // Browsers may emit a timeupdate event after a waiting event. In order to prevent\n    // premature removal of the waiting class, wait for the time to change.\n\n    var timeWhenWaiting = this.currentTime();\n\n    var timeUpdateListener = function timeUpdateListener() {\n      if (timeWhenWaiting !== _this8.currentTime()) {\n        _this8.removeClass('vjs-waiting');\n\n        _this8.off('timeupdate', timeUpdateListener);\n      }\n    };\n\n    this.on('timeupdate', timeUpdateListener);\n  }\n  /**\n   * Retrigger the `canplay` event that was triggered by the {@link Tech}.\n   * > Note: This is not consistent between browsers. See #1351\n   *\n   * @fires Player#canplay\n   * @listens Tech#canplay\n   * @private\n   */\n  ;\n\n  _proto.handleTechCanPlay_ = function handleTechCanPlay_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media has a readyState of HAVE_FUTURE_DATA or greater.\n     *\n     * @event Player#canplay\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('canplay');\n  }\n  /**\n   * Retrigger the `canplaythrough` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#canplaythrough\n   * @listens Tech#canplaythrough\n   * @private\n   */\n  ;\n\n  _proto.handleTechCanPlayThrough_ = function handleTechCanPlayThrough_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media has a readyState of HAVE_ENOUGH_DATA or greater. This means that the\n     * entire media file can be played without buffering.\n     *\n     * @event Player#canplaythrough\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('canplaythrough');\n  }\n  /**\n   * Retrigger the `playing` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#playing\n   * @listens Tech#playing\n   * @private\n   */\n  ;\n\n  _proto.handleTechPlaying_ = function handleTechPlaying_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media is no longer blocked from playback, and has started playing.\n     *\n     * @event Player#playing\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('playing');\n  }\n  /**\n   * Retrigger the `seeking` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#seeking\n   * @listens Tech#seeking\n   * @private\n   */\n  ;\n\n  _proto.handleTechSeeking_ = function handleTechSeeking_() {\n    this.addClass('vjs-seeking');\n    /**\n     * Fired whenever the player is jumping to a new time\n     *\n     * @event Player#seeking\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('seeking');\n  }\n  /**\n   * Retrigger the `seeked` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#seeked\n   * @listens Tech#seeked\n   * @private\n   */\n  ;\n\n  _proto.handleTechSeeked_ = function handleTechSeeked_() {\n    this.removeClass('vjs-seeking');\n    this.removeClass('vjs-ended');\n    /**\n     * Fired when the player has finished jumping to a new time\n     *\n     * @event Player#seeked\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('seeked');\n  }\n  /**\n   * Retrigger the `firstplay` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#firstplay\n   * @listens Tech#firstplay\n   * @deprecated As of 6.0 firstplay event is deprecated.\n   *             As of 6.0 passing the `starttime` option to the player and the firstplay event are deprecated.\n   * @private\n   */\n  ;\n\n  _proto.handleTechFirstPlay_ = function handleTechFirstPlay_() {\n    // If the first starttime attribute is specified\n    // then we will start at the given offset in seconds\n    if (this.options_.starttime) {\n      log$1.warn('Passing the `starttime` option to the player will be deprecated in 6.0');\n      this.currentTime(this.options_.starttime);\n    }\n\n    this.addClass('vjs-has-started');\n    /**\n     * Fired the first time a video is played. Not part of the HLS spec, and this is\n     * probably not the best implementation yet, so use sparingly. If you don't have a\n     * reason to prevent playback, use `myPlayer.one('play');` instead.\n     *\n     * @event Player#firstplay\n     * @deprecated As of 6.0 firstplay event is deprecated.\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('firstplay');\n  }\n  /**\n   * Retrigger the `pause` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#pause\n   * @listens Tech#pause\n   * @private\n   */\n  ;\n\n  _proto.handleTechPause_ = function handleTechPause_() {\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-paused');\n    /**\n     * Fired whenever the media has been paused\n     *\n     * @event Player#pause\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('pause');\n  }\n  /**\n   * Retrigger the `ended` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#ended\n   * @listens Tech#ended\n   * @private\n   */\n  ;\n\n  _proto.handleTechEnded_ = function handleTechEnded_() {\n    this.addClass('vjs-ended');\n    this.removeClass('vjs-waiting');\n\n    if (this.options_.loop) {\n      this.currentTime(0);\n      this.play();\n    } else if (!this.paused()) {\n      this.pause();\n    }\n    /**\n     * Fired when the end of the media resource is reached (currentTime == duration)\n     *\n     * @event Player#ended\n     * @type {EventTarget~Event}\n     */\n\n\n    this.trigger('ended');\n  }\n  /**\n   * Fired when the duration of the media resource is first known or changed\n   *\n   * @listens Tech#durationchange\n   * @private\n   */\n  ;\n\n  _proto.handleTechDurationChange_ = function handleTechDurationChange_() {\n    this.duration(this.techGet_('duration'));\n  }\n  /**\n   * Handle a click on the media element to play/pause\n   *\n   * @param {EventTarget~Event} event\n   *        the event that caused this function to trigger\n   *\n   * @listens Tech#click\n   * @private\n   */\n  ;\n\n  _proto.handleTechClick_ = function handleTechClick_(event) {\n    // When controls are disabled a click should not toggle playback because\n    // the click is considered a control\n    if (!this.controls_) {\n      return;\n    }\n\n    if (this.options_ === undefined || this.options_.userActions === undefined || this.options_.userActions.click === undefined || this.options_.userActions.click !== false) {\n      if (this.options_ !== undefined && this.options_.userActions !== undefined && typeof this.options_.userActions.click === 'function') {\n        this.options_.userActions.click.call(this, event);\n      } else if (this.paused()) {\n        silencePromise(this.play());\n      } else {\n        this.pause();\n      }\n    }\n  }\n  /**\n   * Handle a double-click on the media element to enter/exit fullscreen\n   *\n   * @param {EventTarget~Event} event\n   *        the event that caused this function to trigger\n   *\n   * @listens Tech#dblclick\n   * @private\n   */\n  ;\n\n  _proto.handleTechDoubleClick_ = function handleTechDoubleClick_(event) {\n    if (!this.controls_) {\n      return;\n    } // we do not want to toggle fullscreen state\n    // when double-clicking inside a control bar or a modal\n\n\n    var inAllowedEls = Array.prototype.some.call(this.$$('.vjs-control-bar, .vjs-modal-dialog'), function (el) {\n      return el.contains(event.target);\n    });\n\n    if (!inAllowedEls) {\n      /*\n       * options.userActions.doubleClick\n       *\n       * If `undefined` or `true`, double-click toggles fullscreen if controls are present\n       * Set to `false` to disable double-click handling\n       * Set to a function to substitute an external double-click handler\n       */\n      if (this.options_ === undefined || this.options_.userActions === undefined || this.options_.userActions.doubleClick === undefined || this.options_.userActions.doubleClick !== false) {\n        if (this.options_ !== undefined && this.options_.userActions !== undefined && typeof this.options_.userActions.doubleClick === 'function') {\n          this.options_.userActions.doubleClick.call(this, event);\n        } else if (this.isFullscreen()) {\n          this.exitFullscreen();\n        } else {\n          this.requestFullscreen();\n        }\n      }\n    }\n  }\n  /**\n   * Handle a tap on the media element. It will toggle the user\n   * activity state, which hides and shows the controls.\n   *\n   * @listens Tech#tap\n   * @private\n   */\n  ;\n\n  _proto.handleTechTap_ = function handleTechTap_() {\n    this.userActive(!this.userActive());\n  }\n  /**\n   * Handle touch to start\n   *\n   * @listens Tech#touchstart\n   * @private\n   */\n  ;\n\n  _proto.handleTechTouchStart_ = function handleTechTouchStart_() {\n    this.userWasActive = this.userActive();\n  }\n  /**\n   * Handle touch to move\n   *\n   * @listens Tech#touchmove\n   * @private\n   */\n  ;\n\n  _proto.handleTechTouchMove_ = function handleTechTouchMove_() {\n    if (this.userWasActive) {\n      this.reportUserActivity();\n    }\n  }\n  /**\n   * Handle touch to end\n   *\n   * @param {EventTarget~Event} event\n   *        the touchend event that triggered\n   *        this function\n   *\n   * @listens Tech#touchend\n   * @private\n   */\n  ;\n\n  _proto.handleTechTouchEnd_ = function handleTechTouchEnd_(event) {\n    // Stop the mouse events from also happening\n    if (event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  /**\n   * native click events on the SWF aren't triggered on IE11, Win8.1RT\n   * use stageclick events triggered from inside the SWF instead\n   *\n   * @private\n   * @listens stageclick\n   */\n  ;\n\n  _proto.handleStageClick_ = function handleStageClick_() {\n    this.reportUserActivity();\n  }\n  /**\n   * @private\n   */\n  ;\n\n  _proto.toggleFullscreenClass_ = function toggleFullscreenClass_() {\n    if (this.isFullscreen()) {\n      this.addClass('vjs-fullscreen');\n    } else {\n      this.removeClass('vjs-fullscreen');\n    }\n  }\n  /**\n   * when the document fschange event triggers it calls this\n   */\n  ;\n\n  _proto.documentFullscreenChange_ = function documentFullscreenChange_(e) {\n    var targetPlayer = e.target.player; // if another player was fullscreen\n    // do a null check for targetPlayer because older firefox's would put document as e.target\n\n    if (targetPlayer && targetPlayer !== this) {\n      return;\n    }\n\n    var el = this.el();\n    var isFs = document[this.fsApi_.fullscreenElement] === el;\n\n    if (!isFs && el.matches) {\n      isFs = el.matches(':' + this.fsApi_.fullscreen);\n    } else if (!isFs && el.msMatchesSelector) {\n      isFs = el.msMatchesSelector(':' + this.fsApi_.fullscreen);\n    }\n\n    this.isFullscreen(isFs);\n  }\n  /**\n   * Handle Tech Fullscreen Change\n   *\n   * @param {EventTarget~Event} event\n   *        the fullscreenchange event that triggered this function\n   *\n   * @param {Object} data\n   *        the data that was sent with the event\n   *\n   * @private\n   * @listens Tech#fullscreenchange\n   * @fires Player#fullscreenchange\n   */\n  ;\n\n  _proto.handleTechFullscreenChange_ = function handleTechFullscreenChange_(event, data) {\n    var _this9 = this;\n\n    if (data) {\n      if (data.nativeIOSFullscreen) {\n        this.addClass('vjs-ios-native-fs');\n        this.tech_.one('webkitendfullscreen', function () {\n          _this9.removeClass('vjs-ios-native-fs');\n        });\n      }\n\n      this.isFullscreen(data.isFullscreen);\n    }\n  };\n\n  _proto.handleTechFullscreenError_ = function handleTechFullscreenError_(event, err) {\n    this.trigger('fullscreenerror', err);\n  }\n  /**\n   * @private\n   */\n  ;\n\n  _proto.togglePictureInPictureClass_ = function togglePictureInPictureClass_() {\n    if (this.isInPictureInPicture()) {\n      this.addClass('vjs-picture-in-picture');\n    } else {\n      this.removeClass('vjs-picture-in-picture');\n    }\n  }\n  /**\n   * Handle Tech Enter Picture-in-Picture.\n   *\n   * @param {EventTarget~Event} event\n   *        the enterpictureinpicture event that triggered this function\n   *\n   * @private\n   * @listens Tech#enterpictureinpicture\n   */\n  ;\n\n  _proto.handleTechEnterPictureInPicture_ = function handleTechEnterPictureInPicture_(event) {\n    this.isInPictureInPicture(true);\n  }\n  /**\n   * Handle Tech Leave Picture-in-Picture.\n   *\n   * @param {EventTarget~Event} event\n   *        the leavepictureinpicture event that triggered this function\n   *\n   * @private\n   * @listens Tech#leavepictureinpicture\n   */\n  ;\n\n  _proto.handleTechLeavePictureInPicture_ = function handleTechLeavePictureInPicture_(event) {\n    this.isInPictureInPicture(false);\n  }\n  /**\n   * Fires when an error occurred during the loading of an audio/video.\n   *\n   * @private\n   * @listens Tech#error\n   */\n  ;\n\n  _proto.handleTechError_ = function handleTechError_() {\n    var error = this.tech_.error();\n    this.error(error);\n  }\n  /**\n   * Retrigger the `textdata` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#textdata\n   * @listens Tech#textdata\n   * @private\n   */\n  ;\n\n  _proto.handleTechTextData_ = function handleTechTextData_() {\n    var data = null;\n\n    if (arguments.length > 1) {\n      data = arguments[1];\n    }\n    /**\n     * Fires when we get a textdata event from tech\n     *\n     * @event Player#textdata\n     * @type {EventTarget~Event}\n     */\n\n\n    this.trigger('textdata', data);\n  }\n  /**\n   * Get object for cached values.\n   *\n   * @return {Object}\n   *         get the current object cache\n   */\n  ;\n\n  _proto.getCache = function getCache() {\n    return this.cache_;\n  }\n  /**\n   * Resets the internal cache object.\n   *\n   * Using this function outside the player constructor or reset method may\n   * have unintended side-effects.\n   *\n   * @private\n   */\n  ;\n\n  _proto.resetCache_ = function resetCache_() {\n    this.cache_ = {\n      // Right now, the currentTime is not _really_ cached because it is always\n      // retrieved from the tech (see: currentTime). However, for completeness,\n      // we set it to zero here to ensure that if we do start actually caching\n      // it, we reset it along with everything else.\n      currentTime: 0,\n      initTime: 0,\n      inactivityTimeout: this.options_.inactivityTimeout,\n      duration: NaN,\n      lastVolume: 1,\n      lastPlaybackRate: this.defaultPlaybackRate(),\n      media: null,\n      src: '',\n      source: {},\n      sources: [],\n      playbackRates: [],\n      volume: 1\n    };\n  }\n  /**\n   * Pass values to the playback tech\n   *\n   * @param {string} [method]\n   *        the method to call\n   *\n   * @param {Object} arg\n   *        the argument to pass\n   *\n   * @private\n   */\n  ;\n\n  _proto.techCall_ = function techCall_(method, arg) {\n    // If it's not ready yet, call method when it is\n    this.ready(function () {\n      if (method in allowedSetters) {\n        return set(this.middleware_, this.tech_, method, arg);\n      } else if (method in allowedMediators) {\n        return mediate(this.middleware_, this.tech_, method, arg);\n      }\n\n      try {\n        if (this.tech_) {\n          this.tech_[method](arg);\n        }\n      } catch (e) {\n        log$1(e);\n        throw e;\n      }\n    }, true);\n  }\n  /**\n   * Get calls can't wait for the tech, and sometimes don't need to.\n   *\n   * @param {string} method\n   *        Tech method\n   *\n   * @return {Function|undefined}\n   *         the method or undefined\n   *\n   * @private\n   */\n  ;\n\n  _proto.techGet_ = function techGet_(method) {\n    if (!this.tech_ || !this.tech_.isReady_) {\n      return;\n    }\n\n    if (method in allowedGetters) {\n      return get(this.middleware_, this.tech_, method);\n    } else if (method in allowedMediators) {\n      return mediate(this.middleware_, this.tech_, method);\n    } // Flash likes to die and reload when you hide or reposition it.\n    // In these cases the object methods go away and we get errors.\n    // TODO: Is this needed for techs other than Flash?\n    // When that happens we'll catch the errors and inform tech that it's not ready any more.\n\n\n    try {\n      return this.tech_[method]();\n    } catch (e) {\n      // When building additional tech libs, an expected method may not be defined yet\n      if (this.tech_[method] === undefined) {\n        log$1(\"Video.js: \" + method + \" method not defined for \" + this.techName_ + \" playback technology.\", e);\n        throw e;\n      } // When a method isn't available on the object it throws a TypeError\n\n\n      if (e.name === 'TypeError') {\n        log$1(\"Video.js: \" + method + \" unavailable on \" + this.techName_ + \" playback technology element.\", e);\n        this.tech_.isReady_ = false;\n        throw e;\n      } // If error unknown, just log and throw\n\n\n      log$1(e);\n      throw e;\n    }\n  }\n  /**\n   * Attempt to begin playback at the first opportunity.\n   *\n   * @return {Promise|undefined}\n   *         Returns a promise if the browser supports Promises (or one\n   *         was passed in as an option). This promise will be resolved on\n   *         the return value of play. If this is undefined it will fulfill the\n   *         promise chain otherwise the promise chain will be fulfilled when\n   *         the promise from play is fulfilled.\n   */\n  ;\n\n  _proto.play = function play() {\n    var _this10 = this;\n\n    var PromiseClass = this.options_.Promise || window$1.Promise;\n\n    if (PromiseClass) {\n      return new PromiseClass(function (resolve) {\n        _this10.play_(resolve);\n      });\n    }\n\n    return this.play_();\n  }\n  /**\n   * The actual logic for play, takes a callback that will be resolved on the\n   * return value of play. This allows us to resolve to the play promise if there\n   * is one on modern browsers.\n   *\n   * @private\n   * @param {Function} [callback]\n   *        The callback that should be called when the techs play is actually called\n   */\n  ;\n\n  _proto.play_ = function play_(callback) {\n    var _this11 = this;\n\n    if (callback === void 0) {\n      callback = silencePromise;\n    }\n\n    this.playCallbacks_.push(callback);\n    var isSrcReady = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc())); // treat calls to play_ somewhat like the `one` event function\n\n    if (this.waitToPlay_) {\n      this.off(['ready', 'loadstart'], this.waitToPlay_);\n      this.waitToPlay_ = null;\n    } // if the player/tech is not ready or the src itself is not ready\n    // queue up a call to play on `ready` or `loadstart`\n\n\n    if (!this.isReady_ || !isSrcReady) {\n      this.waitToPlay_ = function (e) {\n        _this11.play_();\n      };\n\n      this.one(['ready', 'loadstart'], this.waitToPlay_); // if we are in Safari, there is a high chance that loadstart will trigger after the gesture timeperiod\n      // in that case, we need to prime the video element by calling load so it'll be ready in time\n\n      if (!isSrcReady && (IS_ANY_SAFARI || IS_IOS)) {\n        this.load();\n      }\n\n      return;\n    } // If the player/tech is ready and we have a source, we can attempt playback.\n\n\n    var val = this.techGet_('play'); // play was terminated if the returned value is null\n\n    if (val === null) {\n      this.runPlayTerminatedQueue_();\n    } else {\n      this.runPlayCallbacks_(val);\n    }\n  }\n  /**\n   * These functions will be run when if play is terminated. If play\n   * runPlayCallbacks_ is run these function will not be run. This allows us\n   * to differenciate between a terminated play and an actual call to play.\n   */\n  ;\n\n  _proto.runPlayTerminatedQueue_ = function runPlayTerminatedQueue_() {\n    var queue = this.playTerminatedQueue_.slice(0);\n    this.playTerminatedQueue_ = [];\n    queue.forEach(function (q) {\n      q();\n    });\n  }\n  /**\n   * When a callback to play is delayed we have to run these\n   * callbacks when play is actually called on the tech. This function\n   * runs the callbacks that were delayed and accepts the return value\n   * from the tech.\n   *\n   * @param {undefined|Promise} val\n   *        The return value from the tech.\n   */\n  ;\n\n  _proto.runPlayCallbacks_ = function runPlayCallbacks_(val) {\n    var callbacks = this.playCallbacks_.slice(0);\n    this.playCallbacks_ = []; // clear play terminatedQueue since we finished a real play\n\n    this.playTerminatedQueue_ = [];\n    callbacks.forEach(function (cb) {\n      cb(val);\n    });\n  }\n  /**\n   * Pause the video playback\n   *\n   * @return {Player}\n   *         A reference to the player object this function was called on\n   */\n  ;\n\n  _proto.pause = function pause() {\n    this.techCall_('pause');\n  }\n  /**\n   * Check if the player is paused or has yet to play\n   *\n   * @return {boolean}\n   *         - false: if the media is currently playing\n   *         - true: if media is not currently playing\n   */\n  ;\n\n  _proto.paused = function paused() {\n    // The initial state of paused should be true (in Safari it's actually false)\n    return this.techGet_('paused') === false ? false : true;\n  }\n  /**\n   * Get a TimeRange object representing the current ranges of time that the user\n   * has played.\n   *\n   * @return {TimeRange}\n   *         A time range object that represents all the increments of time that have\n   *         been played.\n   */\n  ;\n\n  _proto.played = function played() {\n    return this.techGet_('played') || createTimeRanges(0, 0);\n  }\n  /**\n   * Returns whether or not the user is \"scrubbing\". Scrubbing is\n   * when the user has clicked the progress bar handle and is\n   * dragging it along the progress bar.\n   *\n   * @param {boolean} [isScrubbing]\n   *        whether the user is or is not scrubbing\n   *\n   * @return {boolean}\n   *         The value of scrubbing when getting\n   */\n  ;\n\n  _proto.scrubbing = function scrubbing(isScrubbing) {\n    if (typeof isScrubbing === 'undefined') {\n      return this.scrubbing_;\n    }\n\n    this.scrubbing_ = !!isScrubbing;\n    this.techCall_('setScrubbing', this.scrubbing_);\n\n    if (isScrubbing) {\n      this.addClass('vjs-scrubbing');\n    } else {\n      this.removeClass('vjs-scrubbing');\n    }\n  }\n  /**\n   * Get or set the current time (in seconds)\n   *\n   * @param {number|string} [seconds]\n   *        The time to seek to in seconds\n   *\n   * @return {number}\n   *         - the current time in seconds when getting\n   */\n  ;\n\n  _proto.currentTime = function currentTime(seconds) {\n    if (typeof seconds !== 'undefined') {\n      if (seconds < 0) {\n        seconds = 0;\n      }\n\n      if (!this.isReady_ || this.changingSrc_ || !this.tech_ || !this.tech_.isReady_) {\n        this.cache_.initTime = seconds;\n        this.off('canplay', this.boundApplyInitTime_);\n        this.one('canplay', this.boundApplyInitTime_);\n        return;\n      }\n\n      this.techCall_('setCurrentTime', seconds);\n      this.cache_.initTime = 0;\n      return;\n    } // cache last currentTime and return. default to 0 seconds\n    //\n    // Caching the currentTime is meant to prevent a massive amount of reads on the tech's\n    // currentTime when scrubbing, but may not provide much performance benefit afterall.\n    // Should be tested. Also something has to read the actual current time or the cache will\n    // never get updated.\n\n\n    this.cache_.currentTime = this.techGet_('currentTime') || 0;\n    return this.cache_.currentTime;\n  }\n  /**\n   * Apply the value of initTime stored in cache as currentTime.\n   *\n   * @private\n   */\n  ;\n\n  _proto.applyInitTime_ = function applyInitTime_() {\n    this.currentTime(this.cache_.initTime);\n  }\n  /**\n   * Normally gets the length in time of the video in seconds;\n   * in all but the rarest use cases an argument will NOT be passed to the method\n   *\n   * > **NOTE**: The video must have started loading before the duration can be\n   * known, and depending on preload behaviour may not be known until the video starts\n   * playing.\n   *\n   * @fires Player#durationchange\n   *\n   * @param {number} [seconds]\n   *        The duration of the video to set in seconds\n   *\n   * @return {number}\n   *         - The duration of the video in seconds when getting\n   */\n  ;\n\n  _proto.duration = function duration(seconds) {\n    if (seconds === undefined) {\n      // return NaN if the duration is not known\n      return this.cache_.duration !== undefined ? this.cache_.duration : NaN;\n    }\n\n    seconds = parseFloat(seconds); // Standardize on Infinity for signaling video is live\n\n    if (seconds < 0) {\n      seconds = Infinity;\n    }\n\n    if (seconds !== this.cache_.duration) {\n      // Cache the last set value for optimized scrubbing (esp. Flash)\n      // TODO: Required for techs other than Flash?\n      this.cache_.duration = seconds;\n\n      if (seconds === Infinity) {\n        this.addClass('vjs-live');\n      } else {\n        this.removeClass('vjs-live');\n      }\n\n      if (!isNaN(seconds)) {\n        // Do not fire durationchange unless the duration value is known.\n        // @see [Spec]{@link https://www.w3.org/TR/2011/WD-html5-20110113/video.html#media-element-load-algorithm}\n\n        /**\n         * @event Player#durationchange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('durationchange');\n      }\n    }\n  }\n  /**\n   * Calculates how much time is left in the video. Not part\n   * of the native video API.\n   *\n   * @return {number}\n   *         The time remaining in seconds\n   */\n  ;\n\n  _proto.remainingTime = function remainingTime() {\n    return this.duration() - this.currentTime();\n  }\n  /**\n   * A remaining time function that is intented to be used when\n   * the time is to be displayed directly to the user.\n   *\n   * @return {number}\n   *         The rounded time remaining in seconds\n   */\n  ;\n\n  _proto.remainingTimeDisplay = function remainingTimeDisplay() {\n    return Math.floor(this.duration()) - Math.floor(this.currentTime());\n  } //\n  // Kind of like an array of portions of the video that have been downloaded.\n\n  /**\n   * Get a TimeRange object with an array of the times of the video\n   * that have been downloaded. If you just want the percent of the\n   * video that's been downloaded, use bufferedPercent.\n   *\n   * @see [Buffered Spec]{@link http://dev.w3.org/html5/spec/video.html#dom-media-buffered}\n   *\n   * @return {TimeRange}\n   *         A mock TimeRange object (following HTML spec)\n   */\n  ;\n\n  _proto.buffered = function buffered() {\n    var buffered = this.techGet_('buffered');\n\n    if (!buffered || !buffered.length) {\n      buffered = createTimeRanges(0, 0);\n    }\n\n    return buffered;\n  }\n  /**\n   * Get the percent (as a decimal) of the video that's been downloaded.\n   * This method is not a part of the native HTML video API.\n   *\n   * @return {number}\n   *         A decimal between 0 and 1 representing the percent\n   *         that is buffered 0 being 0% and 1 being 100%\n   */\n  ;\n\n  _proto.bufferedPercent = function bufferedPercent$1() {\n    return bufferedPercent(this.buffered(), this.duration());\n  }\n  /**\n   * Get the ending time of the last buffered time range\n   * This is used in the progress bar to encapsulate all time ranges.\n   *\n   * @return {number}\n   *         The end of the last buffered time range\n   */\n  ;\n\n  _proto.bufferedEnd = function bufferedEnd() {\n    var buffered = this.buffered();\n    var duration = this.duration();\n    var end = buffered.end(buffered.length - 1);\n\n    if (end > duration) {\n      end = duration;\n    }\n\n    return end;\n  }\n  /**\n   * Get or set the current volume of the media\n   *\n   * @param  {number} [percentAsDecimal]\n   *         The new volume as a decimal percent:\n   *         - 0 is muted/0%/off\n   *         - 1.0 is 100%/full\n   *         - 0.5 is half volume or 50%\n   *\n   * @return {number}\n   *         The current volume as a percent when getting\n   */\n  ;\n\n  _proto.volume = function volume(percentAsDecimal) {\n    var vol;\n\n    if (percentAsDecimal !== undefined) {\n      // Force value to between 0 and 1\n      vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal)));\n      this.cache_.volume = vol;\n      this.techCall_('setVolume', vol);\n\n      if (vol > 0) {\n        this.lastVolume_(vol);\n      }\n\n      return;\n    } // Default to 1 when returning current volume.\n\n\n    vol = parseFloat(this.techGet_('volume'));\n    return isNaN(vol) ? 1 : vol;\n  }\n  /**\n   * Get the current muted state, or turn mute on or off\n   *\n   * @param {boolean} [muted]\n   *        - true to mute\n   *        - false to unmute\n   *\n   * @return {boolean}\n   *         - true if mute is on and getting\n   *         - false if mute is off and getting\n   */\n  ;\n\n  _proto.muted = function muted(_muted) {\n    if (_muted !== undefined) {\n      this.techCall_('setMuted', _muted);\n      return;\n    }\n\n    return this.techGet_('muted') || false;\n  }\n  /**\n   * Get the current defaultMuted state, or turn defaultMuted on or off. defaultMuted\n   * indicates the state of muted on initial playback.\n   *\n   * ```js\n   *   var myPlayer = videojs('some-player-id');\n   *\n   *   myPlayer.src(\"http://www.example.com/path/to/video.mp4\");\n   *\n   *   // get, should be false\n   *   console.log(myPlayer.defaultMuted());\n   *   // set to true\n   *   myPlayer.defaultMuted(true);\n   *   // get should be true\n   *   console.log(myPlayer.defaultMuted());\n   * ```\n   *\n   * @param {boolean} [defaultMuted]\n   *        - true to mute\n   *        - false to unmute\n   *\n   * @return {boolean|Player}\n   *         - true if defaultMuted is on and getting\n   *         - false if defaultMuted is off and getting\n   *         - A reference to the current player when setting\n   */\n  ;\n\n  _proto.defaultMuted = function defaultMuted(_defaultMuted) {\n    if (_defaultMuted !== undefined) {\n      return this.techCall_('setDefaultMuted', _defaultMuted);\n    }\n\n    return this.techGet_('defaultMuted') || false;\n  }\n  /**\n   * Get the last volume, or set it\n   *\n   * @param  {number} [percentAsDecimal]\n   *         The new last volume as a decimal percent:\n   *         - 0 is muted/0%/off\n   *         - 1.0 is 100%/full\n   *         - 0.5 is half volume or 50%\n   *\n   * @return {number}\n   *         the current value of lastVolume as a percent when getting\n   *\n   * @private\n   */\n  ;\n\n  _proto.lastVolume_ = function lastVolume_(percentAsDecimal) {\n    if (percentAsDecimal !== undefined && percentAsDecimal !== 0) {\n      this.cache_.lastVolume = percentAsDecimal;\n      return;\n    }\n\n    return this.cache_.lastVolume;\n  }\n  /**\n   * Check if current tech can support native fullscreen\n   * (e.g. with built in controls like iOS)\n   *\n   * @return {boolean}\n   *         if native fullscreen is supported\n   */\n  ;\n\n  _proto.supportsFullScreen = function supportsFullScreen() {\n    return this.techGet_('supportsFullScreen') || false;\n  }\n  /**\n   * Check if the player is in fullscreen mode or tell the player that it\n   * is or is not in fullscreen mode.\n   *\n   * > NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official\n   * property and instead document.fullscreenElement is used. But isFullscreen is\n   * still a valuable property for internal player workings.\n   *\n   * @param  {boolean} [isFS]\n   *         Set the players current fullscreen state\n   *\n   * @return {boolean}\n   *         - true if fullscreen is on and getting\n   *         - false if fullscreen is off and getting\n   */\n  ;\n\n  _proto.isFullscreen = function isFullscreen(isFS) {\n    if (isFS !== undefined) {\n      var oldValue = this.isFullscreen_;\n      this.isFullscreen_ = Boolean(isFS); // if we changed fullscreen state and we're in prefixed mode, trigger fullscreenchange\n      // this is the only place where we trigger fullscreenchange events for older browsers\n      // fullWindow mode is treated as a prefixed event and will get a fullscreenchange event as well\n\n      if (this.isFullscreen_ !== oldValue && this.fsApi_.prefixed) {\n        /**\n           * @event Player#fullscreenchange\n           * @type {EventTarget~Event}\n           */\n        this.trigger('fullscreenchange');\n      }\n\n      this.toggleFullscreenClass_();\n      return;\n    }\n\n    return this.isFullscreen_;\n  }\n  /**\n   * Increase the size of the video to full screen\n   * In some browsers, full screen is not supported natively, so it enters\n   * \"full window mode\", where the video fills the browser window.\n   * In browsers and devices that support native full screen, sometimes the\n   * browser's default controls will be shown, and not the Video.js custom skin.\n   * This includes most mobile devices (iOS, Android) and older versions of\n   * Safari.\n   *\n   * @param  {Object} [fullscreenOptions]\n   *         Override the player fullscreen options\n   *\n   * @fires Player#fullscreenchange\n   */\n  ;\n\n  _proto.requestFullscreen = function requestFullscreen(fullscreenOptions) {\n    var PromiseClass = this.options_.Promise || window$1.Promise;\n\n    if (PromiseClass) {\n      var self = this;\n      return new PromiseClass(function (resolve, reject) {\n        function offHandler() {\n          self.off('fullscreenerror', errorHandler);\n          self.off('fullscreenchange', changeHandler);\n        }\n\n        function changeHandler() {\n          offHandler();\n          resolve();\n        }\n\n        function errorHandler(e, err) {\n          offHandler();\n          reject(err);\n        }\n\n        self.one('fullscreenchange', changeHandler);\n        self.one('fullscreenerror', errorHandler);\n        var promise = self.requestFullscreenHelper_(fullscreenOptions);\n\n        if (promise) {\n          promise.then(offHandler, offHandler);\n          promise.then(resolve, reject);\n        }\n      });\n    }\n\n    return this.requestFullscreenHelper_();\n  };\n\n  _proto.requestFullscreenHelper_ = function requestFullscreenHelper_(fullscreenOptions) {\n    var _this12 = this;\n\n    var fsOptions; // Only pass fullscreen options to requestFullscreen in spec-compliant browsers.\n    // Use defaults or player configured option unless passed directly to this method.\n\n    if (!this.fsApi_.prefixed) {\n      fsOptions = this.options_.fullscreen && this.options_.fullscreen.options || {};\n\n      if (fullscreenOptions !== undefined) {\n        fsOptions = fullscreenOptions;\n      }\n    } // This method works as follows:\n    // 1. if a fullscreen api is available, use it\n    //   1. call requestFullscreen with potential options\n    //   2. if we got a promise from above, use it to update isFullscreen()\n    // 2. otherwise, if the tech supports fullscreen, call `enterFullScreen` on it.\n    //   This is particularly used for iPhone, older iPads, and non-safari browser on iOS.\n    // 3. otherwise, use \"fullWindow\" mode\n\n\n    if (this.fsApi_.requestFullscreen) {\n      var promise = this.el_[this.fsApi_.requestFullscreen](fsOptions);\n\n      if (promise) {\n        promise.then(function () {\n          return _this12.isFullscreen(true);\n        }, function () {\n          return _this12.isFullscreen(false);\n        });\n      }\n\n      return promise;\n    } else if (this.tech_.supportsFullScreen() && !this.options_.preferFullWindow === true) {\n      // we can't take the video.js controls fullscreen but we can go fullscreen\n      // with native controls\n      this.techCall_('enterFullScreen');\n    } else {\n      // fullscreen isn't supported so we'll just stretch the video element to\n      // fill the viewport\n      this.enterFullWindow();\n    }\n  }\n  /**\n   * Return the video to its normal size after having been in full screen mode\n   *\n   * @fires Player#fullscreenchange\n   */\n  ;\n\n  _proto.exitFullscreen = function exitFullscreen() {\n    var PromiseClass = this.options_.Promise || window$1.Promise;\n\n    if (PromiseClass) {\n      var self = this;\n      return new PromiseClass(function (resolve, reject) {\n        function offHandler() {\n          self.off('fullscreenerror', errorHandler);\n          self.off('fullscreenchange', changeHandler);\n        }\n\n        function changeHandler() {\n          offHandler();\n          resolve();\n        }\n\n        function errorHandler(e, err) {\n          offHandler();\n          reject(err);\n        }\n\n        self.one('fullscreenchange', changeHandler);\n        self.one('fullscreenerror', errorHandler);\n        var promise = self.exitFullscreenHelper_();\n\n        if (promise) {\n          promise.then(offHandler, offHandler); // map the promise to our resolve/reject methods\n\n          promise.then(resolve, reject);\n        }\n      });\n    }\n\n    return this.exitFullscreenHelper_();\n  };\n\n  _proto.exitFullscreenHelper_ = function exitFullscreenHelper_() {\n    var _this13 = this;\n\n    if (this.fsApi_.requestFullscreen) {\n      var promise = document[this.fsApi_.exitFullscreen]();\n\n      if (promise) {\n        // we're splitting the promise here, so, we want to catch the\n        // potential error so that this chain doesn't have unhandled errors\n        silencePromise(promise.then(function () {\n          return _this13.isFullscreen(false);\n        }));\n      }\n\n      return promise;\n    } else if (this.tech_.supportsFullScreen() && !this.options_.preferFullWindow === true) {\n      this.techCall_('exitFullScreen');\n    } else {\n      this.exitFullWindow();\n    }\n  }\n  /**\n   * When fullscreen isn't supported we can stretch the\n   * video container to as wide as the browser will let us.\n   *\n   * @fires Player#enterFullWindow\n   */\n  ;\n\n  _proto.enterFullWindow = function enterFullWindow() {\n    this.isFullscreen(true);\n    this.isFullWindow = true; // Storing original doc overflow value to return to when fullscreen is off\n\n    this.docOrigOverflow = document.documentElement.style.overflow; // Add listener for esc key to exit fullscreen\n\n    on(document, 'keydown', this.boundFullWindowOnEscKey_); // Hide any scroll bars\n\n    document.documentElement.style.overflow = 'hidden'; // Apply fullscreen styles\n\n    addClass(document.body, 'vjs-full-window');\n    /**\n     * @event Player#enterFullWindow\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('enterFullWindow');\n  }\n  /**\n   * Check for call to either exit full window or\n   * full screen on ESC key\n   *\n   * @param {string} event\n   *        Event to check for key press\n   */\n  ;\n\n  _proto.fullWindowOnEscKey = function fullWindowOnEscKey(event) {\n    if (keycode.isEventKey(event, 'Esc')) {\n      if (this.isFullscreen() === true) {\n        if (!this.isFullWindow) {\n          this.exitFullscreen();\n        } else {\n          this.exitFullWindow();\n        }\n      }\n    }\n  }\n  /**\n   * Exit full window\n   *\n   * @fires Player#exitFullWindow\n   */\n  ;\n\n  _proto.exitFullWindow = function exitFullWindow() {\n    this.isFullscreen(false);\n    this.isFullWindow = false;\n    off(document, 'keydown', this.boundFullWindowOnEscKey_); // Unhide scroll bars.\n\n    document.documentElement.style.overflow = this.docOrigOverflow; // Remove fullscreen styles\n\n    removeClass(document.body, 'vjs-full-window'); // Resize the box, controller, and poster to original sizes\n    // this.positionAll();\n\n    /**\n     * @event Player#exitFullWindow\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('exitFullWindow');\n  }\n  /**\n   * Disable Picture-in-Picture mode.\n   *\n   * @param {boolean} value\n   *                  - true will disable Picture-in-Picture mode\n   *                  - false will enable Picture-in-Picture mode\n   */\n  ;\n\n  _proto.disablePictureInPicture = function disablePictureInPicture(value) {\n    if (value === undefined) {\n      return this.techGet_('disablePictureInPicture');\n    }\n\n    this.techCall_('setDisablePictureInPicture', value);\n    this.options_.disablePictureInPicture = value;\n    this.trigger('disablepictureinpicturechanged');\n  }\n  /**\n   * Check if the player is in Picture-in-Picture mode or tell the player that it\n   * is or is not in Picture-in-Picture mode.\n   *\n   * @param  {boolean} [isPiP]\n   *         Set the players current Picture-in-Picture state\n   *\n   * @return {boolean}\n   *         - true if Picture-in-Picture is on and getting\n   *         - false if Picture-in-Picture is off and getting\n   */\n  ;\n\n  _proto.isInPictureInPicture = function isInPictureInPicture(isPiP) {\n    if (isPiP !== undefined) {\n      this.isInPictureInPicture_ = !!isPiP;\n      this.togglePictureInPictureClass_();\n      return;\n    }\n\n    return !!this.isInPictureInPicture_;\n  }\n  /**\n   * Create a floating video window always on top of other windows so that users may\n   * continue consuming media while they interact with other content sites, or\n   * applications on their device.\n   *\n   * @see [Spec]{@link https://wicg.github.io/picture-in-picture}\n   *\n   * @fires Player#enterpictureinpicture\n   *\n   * @return {Promise}\n   *         A promise with a Picture-in-Picture window.\n   */\n  ;\n\n  _proto.requestPictureInPicture = function requestPictureInPicture() {\n    if ('pictureInPictureEnabled' in document && this.disablePictureInPicture() === false) {\n      /**\n       * This event fires when the player enters picture in picture mode\n       *\n       * @event Player#enterpictureinpicture\n       * @type {EventTarget~Event}\n       */\n      return this.techGet_('requestPictureInPicture');\n    }\n  }\n  /**\n   * Exit Picture-in-Picture mode.\n   *\n   * @see [Spec]{@link https://wicg.github.io/picture-in-picture}\n   *\n   * @fires Player#leavepictureinpicture\n   *\n   * @return {Promise}\n   *         A promise.\n   */\n  ;\n\n  _proto.exitPictureInPicture = function exitPictureInPicture() {\n    if ('pictureInPictureEnabled' in document) {\n      /**\n       * This event fires when the player leaves picture in picture mode\n       *\n       * @event Player#leavepictureinpicture\n       * @type {EventTarget~Event}\n       */\n      return document.exitPictureInPicture();\n    }\n  }\n  /**\n   * Called when this Player has focus and a key gets pressed down, or when\n   * any Component of this player receives a key press that it doesn't handle.\n   * This allows player-wide hotkeys (either as defined below, or optionally\n   * by an external function).\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n  ;\n\n  _proto.handleKeyDown = function handleKeyDown(event) {\n    var userActions = this.options_.userActions; // Bail out if hotkeys are not configured.\n\n    if (!userActions || !userActions.hotkeys) {\n      return;\n    } // Function that determines whether or not to exclude an element from\n    // hotkeys handling.\n\n\n    var excludeElement = function excludeElement(el) {\n      var tagName = el.tagName.toLowerCase(); // The first and easiest test is for `contenteditable` elements.\n\n      if (el.isContentEditable) {\n        return true;\n      } // Inputs matching these types will still trigger hotkey handling as\n      // they are not text inputs.\n\n\n      var allowedInputTypes = ['button', 'checkbox', 'hidden', 'radio', 'reset', 'submit'];\n\n      if (tagName === 'input') {\n        return allowedInputTypes.indexOf(el.type) === -1;\n      } // The final test is by tag name. These tags will be excluded entirely.\n\n\n      var excludedTags = ['textarea'];\n      return excludedTags.indexOf(tagName) !== -1;\n    }; // Bail out if the user is focused on an interactive form element.\n\n\n    if (excludeElement(this.el_.ownerDocument.activeElement)) {\n      return;\n    }\n\n    if (typeof userActions.hotkeys === 'function') {\n      userActions.hotkeys.call(this, event);\n    } else {\n      this.handleHotkeys(event);\n    }\n  }\n  /**\n   * Called when this Player receives a hotkey keydown event.\n   * Supported player-wide hotkeys are:\n   *\n   *   f          - toggle fullscreen\n   *   m          - toggle mute\n   *   k or Space - toggle play/pause\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   */\n  ;\n\n  _proto.handleHotkeys = function handleHotkeys(event) {\n    var hotkeys = this.options_.userActions ? this.options_.userActions.hotkeys : {}; // set fullscreenKey, muteKey, playPauseKey from `hotkeys`, use defaults if not set\n\n    var _hotkeys$fullscreenKe = hotkeys.fullscreenKey,\n        fullscreenKey = _hotkeys$fullscreenKe === void 0 ? function (keydownEvent) {\n      return keycode.isEventKey(keydownEvent, 'f');\n    } : _hotkeys$fullscreenKe,\n        _hotkeys$muteKey = hotkeys.muteKey,\n        muteKey = _hotkeys$muteKey === void 0 ? function (keydownEvent) {\n      return keycode.isEventKey(keydownEvent, 'm');\n    } : _hotkeys$muteKey,\n        _hotkeys$playPauseKey = hotkeys.playPauseKey,\n        playPauseKey = _hotkeys$playPauseKey === void 0 ? function (keydownEvent) {\n      return keycode.isEventKey(keydownEvent, 'k') || keycode.isEventKey(keydownEvent, 'Space');\n    } : _hotkeys$playPauseKey;\n\n    if (fullscreenKey.call(this, event)) {\n      event.preventDefault();\n      event.stopPropagation();\n      var FSToggle = Component$1.getComponent('FullscreenToggle');\n\n      if (document[this.fsApi_.fullscreenEnabled] !== false) {\n        FSToggle.prototype.handleClick.call(this, event);\n      }\n    } else if (muteKey.call(this, event)) {\n      event.preventDefault();\n      event.stopPropagation();\n      var MuteToggle = Component$1.getComponent('MuteToggle');\n      MuteToggle.prototype.handleClick.call(this, event);\n    } else if (playPauseKey.call(this, event)) {\n      event.preventDefault();\n      event.stopPropagation();\n      var PlayToggle = Component$1.getComponent('PlayToggle');\n      PlayToggle.prototype.handleClick.call(this, event);\n    }\n  }\n  /**\n   * Check whether the player can play a given mimetype\n   *\n   * @see https://www.w3.org/TR/2011/WD-html5-20110113/video.html#dom-navigator-canplaytype\n   *\n   * @param {string} type\n   *        The mimetype to check\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n  ;\n\n  _proto.canPlayType = function canPlayType(type) {\n    var can; // Loop through each playback technology in the options order\n\n    for (var i = 0, j = this.options_.techOrder; i < j.length; i++) {\n      var techName = j[i];\n      var tech = Tech.getTech(techName); // Support old behavior of techs being registered as components.\n      // Remove once that deprecated behavior is removed.\n\n      if (!tech) {\n        tech = Component$1.getComponent(techName);\n      } // Check if the current tech is defined before continuing\n\n\n      if (!tech) {\n        log$1.error(\"The \\\"\" + techName + \"\\\" tech is undefined. Skipped browser support check for that tech.\");\n        continue;\n      } // Check if the browser supports this technology\n\n\n      if (tech.isSupported()) {\n        can = tech.canPlayType(type);\n\n        if (can) {\n          return can;\n        }\n      }\n    }\n\n    return '';\n  }\n  /**\n   * Select source based on tech-order or source-order\n   * Uses source-order selection if `options.sourceOrder` is truthy. Otherwise,\n   * defaults to tech-order selection\n   *\n   * @param {Array} sources\n   *        The sources for a media asset\n   *\n   * @return {Object|boolean}\n   *         Object of source and tech order or false\n   */\n  ;\n\n  _proto.selectSource = function selectSource(sources) {\n    var _this14 = this; // Get only the techs specified in `techOrder` that exist and are supported by the\n    // current platform\n\n\n    var techs = this.options_.techOrder.map(function (techName) {\n      return [techName, Tech.getTech(techName)];\n    }).filter(function (_ref) {\n      var techName = _ref[0],\n          tech = _ref[1]; // Check if the current tech is defined before continuing\n\n      if (tech) {\n        // Check if the browser supports this technology\n        return tech.isSupported();\n      }\n\n      log$1.error(\"The \\\"\" + techName + \"\\\" tech is undefined. Skipped browser support check for that tech.\");\n      return false;\n    }); // Iterate over each `innerArray` element once per `outerArray` element and execute\n    // `tester` with both. If `tester` returns a non-falsy value, exit early and return\n    // that value.\n\n    var findFirstPassingTechSourcePair = function findFirstPassingTechSourcePair(outerArray, innerArray, tester) {\n      var found;\n      outerArray.some(function (outerChoice) {\n        return innerArray.some(function (innerChoice) {\n          found = tester(outerChoice, innerChoice);\n\n          if (found) {\n            return true;\n          }\n        });\n      });\n      return found;\n    };\n\n    var foundSourceAndTech;\n\n    var flip = function flip(fn) {\n      return function (a, b) {\n        return fn(b, a);\n      };\n    };\n\n    var finder = function finder(_ref2, source) {\n      var techName = _ref2[0],\n          tech = _ref2[1];\n\n      if (tech.canPlaySource(source, _this14.options_[techName.toLowerCase()])) {\n        return {\n          source: source,\n          tech: techName\n        };\n      }\n    }; // Depending on the truthiness of `options.sourceOrder`, we swap the order of techs and sources\n    // to select from them based on their priority.\n\n\n    if (this.options_.sourceOrder) {\n      // Source-first ordering\n      foundSourceAndTech = findFirstPassingTechSourcePair(sources, techs, flip(finder));\n    } else {\n      // Tech-first ordering\n      foundSourceAndTech = findFirstPassingTechSourcePair(techs, sources, finder);\n    }\n\n    return foundSourceAndTech || false;\n  }\n  /**\n   * Executes source setting and getting logic\n   *\n   * @param {Tech~SourceObject|Tech~SourceObject[]|string} [source]\n   *        A SourceObject, an array of SourceObjects, or a string referencing\n   *        a URL to a media source. It is _highly recommended_ that an object\n   *        or array of objects is used here, so that source selection\n   *        algorithms can take the `type` into account.\n   *\n   *        If not provided, this method acts as a getter.\n   * @param {boolean} isRetry\n   *        Indicates whether this is being called internally as a result of a retry\n   *\n   * @return {string|undefined}\n   *         If the `source` argument is missing, returns the current source\n   *         URL. Otherwise, returns nothing/undefined.\n   */\n  ;\n\n  _proto.handleSrc_ = function handleSrc_(source, isRetry) {\n    var _this15 = this; // getter usage\n\n\n    if (typeof source === 'undefined') {\n      return this.cache_.src || '';\n    } // Reset retry behavior for new source\n\n\n    if (this.resetRetryOnError_) {\n      this.resetRetryOnError_();\n    } // filter out invalid sources and turn our source into\n    // an array of source objects\n\n\n    var sources = filterSource(source); // if a source was passed in then it is invalid because\n    // it was filtered to a zero length Array. So we have to\n    // show an error\n\n    if (!sources.length) {\n      this.setTimeout(function () {\n        this.error({\n          code: 4,\n          message: this.localize(this.options_.notSupportedMessage)\n        });\n      }, 0);\n      return;\n    } // initial sources\n\n\n    this.changingSrc_ = true; // Only update the cached source list if we are not retrying a new source after error,\n    // since in that case we want to include the failed source(s) in the cache\n\n    if (!isRetry) {\n      this.cache_.sources = sources;\n    }\n\n    this.updateSourceCaches_(sources[0]); // middlewareSource is the source after it has been changed by middleware\n\n    setSource(this, sources[0], function (middlewareSource, mws) {\n      _this15.middleware_ = mws; // since sourceSet is async we have to update the cache again after we select a source since\n      // the source that is selected could be out of order from the cache update above this callback.\n\n      if (!isRetry) {\n        _this15.cache_.sources = sources;\n      }\n\n      _this15.updateSourceCaches_(middlewareSource);\n\n      var err = _this15.src_(middlewareSource);\n\n      if (err) {\n        if (sources.length > 1) {\n          return _this15.handleSrc_(sources.slice(1));\n        }\n\n        _this15.changingSrc_ = false; // We need to wrap this in a timeout to give folks a chance to add error event handlers\n\n        _this15.setTimeout(function () {\n          this.error({\n            code: 4,\n            message: this.localize(this.options_.notSupportedMessage)\n          });\n        }, 0); // we could not find an appropriate tech, but let's still notify the delegate that this is it\n        // this needs a better comment about why this is needed\n\n\n        _this15.triggerReady();\n\n        return;\n      }\n\n      setTech(mws, _this15.tech_);\n    }); // Try another available source if this one fails before playback.\n\n    if (this.options_.retryOnError && sources.length > 1) {\n      var retry = function retry() {\n        // Remove the error modal\n        _this15.error(null);\n\n        _this15.handleSrc_(sources.slice(1), true);\n      };\n\n      var stopListeningForErrors = function stopListeningForErrors() {\n        _this15.off('error', retry);\n      };\n\n      this.one('error', retry);\n      this.one('playing', stopListeningForErrors);\n\n      this.resetRetryOnError_ = function () {\n        _this15.off('error', retry);\n\n        _this15.off('playing', stopListeningForErrors);\n      };\n    }\n  }\n  /**\n   * Get or set the video source.\n   *\n   * @param {Tech~SourceObject|Tech~SourceObject[]|string} [source]\n   *        A SourceObject, an array of SourceObjects, or a string referencing\n   *        a URL to a media source. It is _highly recommended_ that an object\n   *        or array of objects is used here, so that source selection\n   *        algorithms can take the `type` into account.\n   *\n   *        If not provided, this method acts as a getter.\n   *\n   * @return {string|undefined}\n   *         If the `source` argument is missing, returns the current source\n   *         URL. Otherwise, returns nothing/undefined.\n   */\n  ;\n\n  _proto.src = function src(source) {\n    return this.handleSrc_(source, false);\n  }\n  /**\n   * Set the source object on the tech, returns a boolean that indicates whether\n   * there is a tech that can play the source or not\n   *\n   * @param {Tech~SourceObject} source\n   *        The source object to set on the Tech\n   *\n   * @return {boolean}\n   *         - True if there is no Tech to playback this source\n   *         - False otherwise\n   *\n   * @private\n   */\n  ;\n\n  _proto.src_ = function src_(source) {\n    var _this16 = this;\n\n    var sourceTech = this.selectSource([source]);\n\n    if (!sourceTech) {\n      return true;\n    }\n\n    if (!titleCaseEquals(sourceTech.tech, this.techName_)) {\n      this.changingSrc_ = true; // load this technology with the chosen source\n\n      this.loadTech_(sourceTech.tech, sourceTech.source);\n      this.tech_.ready(function () {\n        _this16.changingSrc_ = false;\n      });\n      return false;\n    } // wait until the tech is ready to set the source\n    // and set it synchronously if possible (#2326)\n\n\n    this.ready(function () {\n      // The setSource tech method was added with source handlers\n      // so older techs won't support it\n      // We need to check the direct prototype for the case where subclasses\n      // of the tech do not support source handlers\n      if (this.tech_.constructor.prototype.hasOwnProperty('setSource')) {\n        this.techCall_('setSource', source);\n      } else {\n        this.techCall_('src', source.src);\n      }\n\n      this.changingSrc_ = false;\n    }, true);\n    return false;\n  }\n  /**\n   * Begin loading the src data.\n   */\n  ;\n\n  _proto.load = function load() {\n    this.techCall_('load');\n  }\n  /**\n   * Reset the player. Loads the first tech in the techOrder,\n   * removes all the text tracks in the existing `tech`,\n   * and calls `reset` on the `tech`.\n   */\n  ;\n\n  _proto.reset = function reset() {\n    var _this17 = this;\n\n    var PromiseClass = this.options_.Promise || window$1.Promise;\n\n    if (this.paused() || !PromiseClass) {\n      this.doReset_();\n    } else {\n      var playPromise = this.play();\n      silencePromise(playPromise.then(function () {\n        return _this17.doReset_();\n      }));\n    }\n  };\n\n  _proto.doReset_ = function doReset_() {\n    if (this.tech_) {\n      this.tech_.clearTracks('text');\n    }\n\n    this.resetCache_();\n    this.poster('');\n    this.loadTech_(this.options_.techOrder[0], null);\n    this.techCall_('reset');\n    this.resetControlBarUI_();\n\n    if (isEvented(this)) {\n      this.trigger('playerreset');\n    }\n  }\n  /**\n   * Reset Control Bar's UI by calling sub-methods that reset\n   * all of Control Bar's components\n   */\n  ;\n\n  _proto.resetControlBarUI_ = function resetControlBarUI_() {\n    this.resetProgressBar_();\n    this.resetPlaybackRate_();\n    this.resetVolumeBar_();\n  }\n  /**\n   * Reset tech's progress so progress bar is reset in the UI\n   */\n  ;\n\n  _proto.resetProgressBar_ = function resetProgressBar_() {\n    this.currentTime(0);\n    var _this$controlBar = this.controlBar,\n        durationDisplay = _this$controlBar.durationDisplay,\n        remainingTimeDisplay = _this$controlBar.remainingTimeDisplay;\n\n    if (durationDisplay) {\n      durationDisplay.updateContent();\n    }\n\n    if (remainingTimeDisplay) {\n      remainingTimeDisplay.updateContent();\n    }\n  }\n  /**\n   * Reset Playback ratio\n   */\n  ;\n\n  _proto.resetPlaybackRate_ = function resetPlaybackRate_() {\n    this.playbackRate(this.defaultPlaybackRate());\n    this.handleTechRateChange_();\n  }\n  /**\n   * Reset Volume bar\n   */\n  ;\n\n  _proto.resetVolumeBar_ = function resetVolumeBar_() {\n    this.volume(1.0);\n    this.trigger('volumechange');\n  }\n  /**\n   * Returns all of the current source objects.\n   *\n   * @return {Tech~SourceObject[]}\n   *         The current source objects\n   */\n  ;\n\n  _proto.currentSources = function currentSources() {\n    var source = this.currentSource();\n    var sources = []; // assume `{}` or `{ src }`\n\n    if (Object.keys(source).length !== 0) {\n      sources.push(source);\n    }\n\n    return this.cache_.sources || sources;\n  }\n  /**\n   * Returns the current source object.\n   *\n   * @return {Tech~SourceObject}\n   *         The current source object\n   */\n  ;\n\n  _proto.currentSource = function currentSource() {\n    return this.cache_.source || {};\n  }\n  /**\n   * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4\n   * Can be used in conjunction with `currentType` to assist in rebuilding the current source object.\n   *\n   * @return {string}\n   *         The current source\n   */\n  ;\n\n  _proto.currentSrc = function currentSrc() {\n    return this.currentSource() && this.currentSource().src || '';\n  }\n  /**\n   * Get the current source type e.g. video/mp4\n   * This can allow you rebuild the current source object so that you could load the same\n   * source and tech later\n   *\n   * @return {string}\n   *         The source MIME type\n   */\n  ;\n\n  _proto.currentType = function currentType() {\n    return this.currentSource() && this.currentSource().type || '';\n  }\n  /**\n   * Get or set the preload attribute\n   *\n   * @param {boolean} [value]\n   *        - true means that we should preload\n   *        - false means that we should not preload\n   *\n   * @return {string}\n   *         The preload attribute value when getting\n   */\n  ;\n\n  _proto.preload = function preload(value) {\n    if (value !== undefined) {\n      this.techCall_('setPreload', value);\n      this.options_.preload = value;\n      return;\n    }\n\n    return this.techGet_('preload');\n  }\n  /**\n   * Get or set the autoplay option. When this is a boolean it will\n   * modify the attribute on the tech. When this is a string the attribute on\n   * the tech will be removed and `Player` will handle autoplay on loadstarts.\n   *\n   * @param {boolean|string} [value]\n   *        - true: autoplay using the browser behavior\n   *        - false: do not autoplay\n   *        - 'play': call play() on every loadstart\n   *        - 'muted': call muted() then play() on every loadstart\n   *        - 'any': call play() on every loadstart. if that fails call muted() then play().\n   *        - *: values other than those listed here will be set `autoplay` to true\n   *\n   * @return {boolean|string}\n   *         The current value of autoplay when getting\n   */\n  ;\n\n  _proto.autoplay = function autoplay(value) {\n    // getter usage\n    if (value === undefined) {\n      return this.options_.autoplay || false;\n    }\n\n    var techAutoplay; // if the value is a valid string set it to that, or normalize `true` to 'play', if need be\n\n    if (typeof value === 'string' && /(any|play|muted)/.test(value) || value === true && this.options_.normalizeAutoplay) {\n      this.options_.autoplay = value;\n      this.manualAutoplay_(typeof value === 'string' ? value : 'play');\n      techAutoplay = false; // any falsy value sets autoplay to false in the browser,\n      // lets do the same\n    } else if (!value) {\n      this.options_.autoplay = false; // any other value (ie truthy) sets autoplay to true\n    } else {\n      this.options_.autoplay = true;\n    }\n\n    techAutoplay = typeof techAutoplay === 'undefined' ? this.options_.autoplay : techAutoplay; // if we don't have a tech then we do not queue up\n    // a setAutoplay call on tech ready. We do this because the\n    // autoplay option will be passed in the constructor and we\n    // do not need to set it twice\n\n    if (this.tech_) {\n      this.techCall_('setAutoplay', techAutoplay);\n    }\n  }\n  /**\n   * Set or unset the playsinline attribute.\n   * Playsinline tells the browser that non-fullscreen playback is preferred.\n   *\n   * @param {boolean} [value]\n   *        - true means that we should try to play inline by default\n   *        - false means that we should use the browser's default playback mode,\n   *          which in most cases is inline. iOS Safari is a notable exception\n   *          and plays fullscreen by default.\n   *\n   * @return {string|Player}\n   *         - the current value of playsinline\n   *         - the player when setting\n   *\n   * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n   */\n  ;\n\n  _proto.playsinline = function playsinline(value) {\n    if (value !== undefined) {\n      this.techCall_('setPlaysinline', value);\n      this.options_.playsinline = value;\n      return this;\n    }\n\n    return this.techGet_('playsinline');\n  }\n  /**\n   * Get or set the loop attribute on the video element.\n   *\n   * @param {boolean} [value]\n   *        - true means that we should loop the video\n   *        - false means that we should not loop the video\n   *\n   * @return {boolean}\n   *         The current value of loop when getting\n   */\n  ;\n\n  _proto.loop = function loop(value) {\n    if (value !== undefined) {\n      this.techCall_('setLoop', value);\n      this.options_.loop = value;\n      return;\n    }\n\n    return this.techGet_('loop');\n  }\n  /**\n   * Get or set the poster image source url\n   *\n   * @fires Player#posterchange\n   *\n   * @param {string} [src]\n   *        Poster image source URL\n   *\n   * @return {string}\n   *         The current value of poster when getting\n   */\n  ;\n\n  _proto.poster = function poster(src) {\n    if (src === undefined) {\n      return this.poster_;\n    } // The correct way to remove a poster is to set as an empty string\n    // other falsey values will throw errors\n\n\n    if (!src) {\n      src = '';\n    }\n\n    if (src === this.poster_) {\n      return;\n    } // update the internal poster variable\n\n\n    this.poster_ = src; // update the tech's poster\n\n    this.techCall_('setPoster', src);\n    this.isPosterFromTech_ = false; // alert components that the poster has been set\n\n    /**\n     * This event fires when the poster image is changed on the player.\n     *\n     * @event Player#posterchange\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('posterchange');\n  }\n  /**\n   * Some techs (e.g. YouTube) can provide a poster source in an\n   * asynchronous way. We want the poster component to use this\n   * poster source so that it covers up the tech's controls.\n   * (YouTube's play button). However we only want to use this\n   * source if the player user hasn't set a poster through\n   * the normal APIs.\n   *\n   * @fires Player#posterchange\n   * @listens Tech#posterchange\n   * @private\n   */\n  ;\n\n  _proto.handleTechPosterChange_ = function handleTechPosterChange_() {\n    if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {\n      var newPoster = this.tech_.poster() || '';\n\n      if (newPoster !== this.poster_) {\n        this.poster_ = newPoster;\n        this.isPosterFromTech_ = true; // Let components know the poster has changed\n\n        this.trigger('posterchange');\n      }\n    }\n  }\n  /**\n   * Get or set whether or not the controls are showing.\n   *\n   * @fires Player#controlsenabled\n   *\n   * @param {boolean} [bool]\n   *        - true to turn controls on\n   *        - false to turn controls off\n   *\n   * @return {boolean}\n   *         The current value of controls when getting\n   */\n  ;\n\n  _proto.controls = function controls(bool) {\n    if (bool === undefined) {\n      return !!this.controls_;\n    }\n\n    bool = !!bool; // Don't trigger a change event unless it actually changed\n\n    if (this.controls_ === bool) {\n      return;\n    }\n\n    this.controls_ = bool;\n\n    if (this.usingNativeControls()) {\n      this.techCall_('setControls', bool);\n    }\n\n    if (this.controls_) {\n      this.removeClass('vjs-controls-disabled');\n      this.addClass('vjs-controls-enabled');\n      /**\n       * @event Player#controlsenabled\n       * @type {EventTarget~Event}\n       */\n\n      this.trigger('controlsenabled');\n\n      if (!this.usingNativeControls()) {\n        this.addTechControlsListeners_();\n      }\n    } else {\n      this.removeClass('vjs-controls-enabled');\n      this.addClass('vjs-controls-disabled');\n      /**\n       * @event Player#controlsdisabled\n       * @type {EventTarget~Event}\n       */\n\n      this.trigger('controlsdisabled');\n\n      if (!this.usingNativeControls()) {\n        this.removeTechControlsListeners_();\n      }\n    }\n  }\n  /**\n   * Toggle native controls on/off. Native controls are the controls built into\n   * devices (e.g. default iPhone controls) or other techs\n   * (e.g. Vimeo Controls)\n   * **This should only be set by the current tech, because only the tech knows\n   * if it can support native controls**\n   *\n   * @fires Player#usingnativecontrols\n   * @fires Player#usingcustomcontrols\n   *\n   * @param {boolean} [bool]\n   *        - true to turn native controls on\n   *        - false to turn native controls off\n   *\n   * @return {boolean}\n   *         The current value of native controls when getting\n   */\n  ;\n\n  _proto.usingNativeControls = function usingNativeControls(bool) {\n    if (bool === undefined) {\n      return !!this.usingNativeControls_;\n    }\n\n    bool = !!bool; // Don't trigger a change event unless it actually changed\n\n    if (this.usingNativeControls_ === bool) {\n      return;\n    }\n\n    this.usingNativeControls_ = bool;\n\n    if (this.usingNativeControls_) {\n      this.addClass('vjs-using-native-controls');\n      /**\n       * player is using the native device controls\n       *\n       * @event Player#usingnativecontrols\n       * @type {EventTarget~Event}\n       */\n\n      this.trigger('usingnativecontrols');\n    } else {\n      this.removeClass('vjs-using-native-controls');\n      /**\n       * player is using the custom HTML controls\n       *\n       * @event Player#usingcustomcontrols\n       * @type {EventTarget~Event}\n       */\n\n      this.trigger('usingcustomcontrols');\n    }\n  }\n  /**\n   * Set or get the current MediaError\n   *\n   * @fires Player#error\n   *\n   * @param  {MediaError|string|number} [err]\n   *         A MediaError or a string/number to be turned\n   *         into a MediaError\n   *\n   * @return {MediaError|null}\n   *         The current MediaError when getting (or null)\n   */\n  ;\n\n  _proto.error = function error(err) {\n    var _this18 = this;\n\n    if (err === undefined) {\n      return this.error_ || null;\n    } // allow hooks to modify error object\n\n\n    hooks('beforeerror').forEach(function (hookFunction) {\n      var newErr = hookFunction(_this18, err);\n\n      if (!(isObject(newErr) && !Array.isArray(newErr) || typeof newErr === 'string' || typeof newErr === 'number' || newErr === null)) {\n        _this18.log.error('please return a value that MediaError expects in beforeerror hooks');\n\n        return;\n      }\n\n      err = newErr;\n    }); // Suppress the first error message for no compatible source until\n    // user interaction\n\n    if (this.options_.suppressNotSupportedError && err && err.code === 4) {\n      var triggerSuppressedError = function triggerSuppressedError() {\n        this.error(err);\n      };\n\n      this.options_.suppressNotSupportedError = false;\n      this.any(['click', 'touchstart'], triggerSuppressedError);\n      this.one('loadstart', function () {\n        this.off(['click', 'touchstart'], triggerSuppressedError);\n      });\n      return;\n    } // restoring to default\n\n\n    if (err === null) {\n      this.error_ = err;\n      this.removeClass('vjs-error');\n\n      if (this.errorDisplay) {\n        this.errorDisplay.close();\n      }\n\n      return;\n    }\n\n    this.error_ = new MediaError(err); // add the vjs-error classname to the player\n\n    this.addClass('vjs-error'); // log the name of the error type and any message\n    // IE11 logs \"[object object]\" and required you to expand message to see error object\n\n    log$1.error(\"(CODE:\" + this.error_.code + \" \" + MediaError.errorTypes[this.error_.code] + \")\", this.error_.message, this.error_);\n    /**\n     * @event Player#error\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('error'); // notify hooks of the per player error\n\n    hooks('error').forEach(function (hookFunction) {\n      return hookFunction(_this18, _this18.error_);\n    });\n    return;\n  }\n  /**\n   * Report user activity\n   *\n   * @param {Object} event\n   *        Event object\n   */\n  ;\n\n  _proto.reportUserActivity = function reportUserActivity(event) {\n    this.userActivity_ = true;\n  }\n  /**\n   * Get/set if user is active\n   *\n   * @fires Player#useractive\n   * @fires Player#userinactive\n   *\n   * @param {boolean} [bool]\n   *        - true if the user is active\n   *        - false if the user is inactive\n   *\n   * @return {boolean}\n   *         The current value of userActive when getting\n   */\n  ;\n\n  _proto.userActive = function userActive(bool) {\n    if (bool === undefined) {\n      return this.userActive_;\n    }\n\n    bool = !!bool;\n\n    if (bool === this.userActive_) {\n      return;\n    }\n\n    this.userActive_ = bool;\n\n    if (this.userActive_) {\n      this.userActivity_ = true;\n      this.removeClass('vjs-user-inactive');\n      this.addClass('vjs-user-active');\n      /**\n       * @event Player#useractive\n       * @type {EventTarget~Event}\n       */\n\n      this.trigger('useractive');\n      return;\n    } // Chrome/Safari/IE have bugs where when you change the cursor it can\n    // trigger a mousemove event. This causes an issue when you're hiding\n    // the cursor when the user is inactive, and a mousemove signals user\n    // activity. Making it impossible to go into inactive mode. Specifically\n    // this happens in fullscreen when we really need to hide the cursor.\n    //\n    // When this gets resolved in ALL browsers it can be removed\n    // https://code.google.com/p/chromium/issues/detail?id=103041\n\n\n    if (this.tech_) {\n      this.tech_.one('mousemove', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      });\n    }\n\n    this.userActivity_ = false;\n    this.removeClass('vjs-user-active');\n    this.addClass('vjs-user-inactive');\n    /**\n     * @event Player#userinactive\n     * @type {EventTarget~Event}\n     */\n\n    this.trigger('userinactive');\n  }\n  /**\n   * Listen for user activity based on timeout value\n   *\n   * @private\n   */\n  ;\n\n  _proto.listenForUserActivity_ = function listenForUserActivity_() {\n    var mouseInProgress;\n    var lastMoveX;\n    var lastMoveY;\n    var handleActivity = bind(this, this.reportUserActivity);\n\n    var handleMouseMove = function handleMouseMove(e) {\n      // #1068 - Prevent mousemove spamming\n      // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970\n      if (e.screenX !== lastMoveX || e.screenY !== lastMoveY) {\n        lastMoveX = e.screenX;\n        lastMoveY = e.screenY;\n        handleActivity();\n      }\n    };\n\n    var handleMouseDown = function handleMouseDown() {\n      handleActivity(); // For as long as the they are touching the device or have their mouse down,\n      // we consider them active even if they're not moving their finger or mouse.\n      // So we want to continue to update that they are active\n\n      this.clearInterval(mouseInProgress); // Setting userActivity=true now and setting the interval to the same time\n      // as the activityCheck interval (250) should ensure we never miss the\n      // next activityCheck\n\n      mouseInProgress = this.setInterval(handleActivity, 250);\n    };\n\n    var handleMouseUpAndMouseLeave = function handleMouseUpAndMouseLeave(event) {\n      handleActivity(); // Stop the interval that maintains activity if the mouse/touch is down\n\n      this.clearInterval(mouseInProgress);\n    }; // Any mouse movement will be considered user activity\n\n\n    this.on('mousedown', handleMouseDown);\n    this.on('mousemove', handleMouseMove);\n    this.on('mouseup', handleMouseUpAndMouseLeave);\n    this.on('mouseleave', handleMouseUpAndMouseLeave);\n    var controlBar = this.getChild('controlBar'); // Fixes bug on Android & iOS where when tapping progressBar (when control bar is displayed)\n    // controlBar would no longer be hidden by default timeout.\n\n    if (controlBar && !IS_IOS && !IS_ANDROID) {\n      controlBar.on('mouseenter', function (event) {\n        if (this.player().options_.inactivityTimeout !== 0) {\n          this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout;\n        }\n\n        this.player().options_.inactivityTimeout = 0;\n      });\n      controlBar.on('mouseleave', function (event) {\n        this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;\n      });\n    } // Listen for keyboard navigation\n    // Shouldn't need to use inProgress interval because of key repeat\n\n\n    this.on('keydown', handleActivity);\n    this.on('keyup', handleActivity); // Run an interval every 250 milliseconds instead of stuffing everything into\n    // the mousemove/touchmove function itself, to prevent performance degradation.\n    // `this.reportUserActivity` simply sets this.userActivity_ to true, which\n    // then gets picked up by this loop\n    // http://ejohn.org/blog/learning-from-twitter/\n\n    var inactivityTimeout;\n    this.setInterval(function () {\n      // Check to see if mouse/touch activity has happened\n      if (!this.userActivity_) {\n        return;\n      } // Reset the activity tracker\n\n\n      this.userActivity_ = false; // If the user state was inactive, set the state to active\n\n      this.userActive(true); // Clear any existing inactivity timeout to start the timer over\n\n      this.clearTimeout(inactivityTimeout);\n      var timeout = this.options_.inactivityTimeout;\n\n      if (timeout <= 0) {\n        return;\n      } // In <timeout> milliseconds, if no more activity has occurred the\n      // user will be considered inactive\n\n\n      inactivityTimeout = this.setTimeout(function () {\n        // Protect against the case where the inactivityTimeout can trigger just\n        // before the next user activity is picked up by the activity check loop\n        // causing a flicker\n        if (!this.userActivity_) {\n          this.userActive(false);\n        }\n      }, timeout);\n    }, 250);\n  }\n  /**\n   * Gets or sets the current playback rate. A playback rate of\n   * 1.0 represents normal speed and 0.5 would indicate half-speed\n   * playback, for instance.\n   *\n   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-playbackrate\n   *\n   * @param {number} [rate]\n   *       New playback rate to set.\n   *\n   * @return {number}\n   *         The current playback rate when getting or 1.0\n   */\n  ;\n\n  _proto.playbackRate = function playbackRate(rate) {\n    if (rate !== undefined) {\n      // NOTE: this.cache_.lastPlaybackRate is set from the tech handler\n      // that is registered above\n      this.techCall_('setPlaybackRate', rate);\n      return;\n    }\n\n    if (this.tech_ && this.tech_.featuresPlaybackRate) {\n      return this.cache_.lastPlaybackRate || this.techGet_('playbackRate');\n    }\n\n    return 1.0;\n  }\n  /**\n   * Gets or sets the current default playback rate. A default playback rate of\n   * 1.0 represents normal speed and 0.5 would indicate half-speed playback, for instance.\n   * defaultPlaybackRate will only represent what the initial playbackRate of a video was, not\n   * not the current playbackRate.\n   *\n   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-defaultplaybackrate\n   *\n   * @param {number} [rate]\n   *       New default playback rate to set.\n   *\n   * @return {number|Player}\n   *         - The default playback rate when getting or 1.0\n   *         - the player when setting\n   */\n  ;\n\n  _proto.defaultPlaybackRate = function defaultPlaybackRate(rate) {\n    if (rate !== undefined) {\n      return this.techCall_('setDefaultPlaybackRate', rate);\n    }\n\n    if (this.tech_ && this.tech_.featuresPlaybackRate) {\n      return this.techGet_('defaultPlaybackRate');\n    }\n\n    return 1.0;\n  }\n  /**\n   * Gets or sets the audio flag\n   *\n   * @param {boolean} bool\n   *        - true signals that this is an audio player\n   *        - false signals that this is not an audio player\n   *\n   * @return {boolean}\n   *         The current value of isAudio when getting\n   */\n  ;\n\n  _proto.isAudio = function isAudio(bool) {\n    if (bool !== undefined) {\n      this.isAudio_ = !!bool;\n      return;\n    }\n\n    return !!this.isAudio_;\n  }\n  /**\n   * A helper method for adding a {@link TextTrack} to our\n   * {@link TextTrackList}.\n   *\n   * In addition to the W3C settings we allow adding additional info through options.\n   *\n   * @see http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack\n   *\n   * @param {string} [kind]\n   *        the kind of TextTrack you are adding\n   *\n   * @param {string} [label]\n   *        the label to give the TextTrack label\n   *\n   * @param {string} [language]\n   *        the language to set on the TextTrack\n   *\n   * @return {TextTrack|undefined}\n   *         the TextTrack that was added or undefined\n   *         if there is no tech\n   */\n  ;\n\n  _proto.addTextTrack = function addTextTrack(kind, label, language) {\n    if (this.tech_) {\n      return this.tech_.addTextTrack(kind, label, language);\n    }\n  }\n  /**\n   * Create a remote {@link TextTrack} and an {@link HTMLTrackElement}.\n   * When manualCleanup is set to false, the track will be automatically removed\n   * on source changes.\n   *\n   * @param {Object} options\n   *        Options to pass to {@link HTMLTrackElement} during creation. See\n   *        {@link HTMLTrackElement} for object properties that you should use.\n   *\n   * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be\n   *                                       removed on a source change\n   *\n   * @return {HtmlTrackElement}\n   *         the HTMLTrackElement that was created and added\n   *         to the HtmlTrackElementList and the remote\n   *         TextTrackList\n   *\n   * @deprecated The default value of the \"manualCleanup\" parameter will default\n   *             to \"false\" in upcoming versions of Video.js\n   */\n  ;\n\n  _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n    if (this.tech_) {\n      return this.tech_.addRemoteTextTrack(options, manualCleanup);\n    }\n  }\n  /**\n   * Remove a remote {@link TextTrack} from the respective\n   * {@link TextTrackList} and {@link HtmlTrackElementList}.\n   *\n   * @param {Object} track\n   *        Remote {@link TextTrack} to remove\n   *\n   * @return {undefined}\n   *         does not return anything\n   */\n  ;\n\n  _proto.removeRemoteTextTrack = function removeRemoteTextTrack(obj) {\n    if (obj === void 0) {\n      obj = {};\n    }\n\n    var _obj = obj,\n        track = _obj.track;\n\n    if (!track) {\n      track = obj;\n    } // destructure the input into an object with a track argument, defaulting to arguments[0]\n    // default the whole argument to an empty object if nothing was passed in\n\n\n    if (this.tech_) {\n      return this.tech_.removeRemoteTextTrack(track);\n    }\n  }\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object|undefined}\n   *         An object with supported media playback quality metrics or undefined if there\n   *         is no tech or the tech does not support it.\n   */\n  ;\n\n  _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    return this.techGet_('getVideoPlaybackQuality');\n  }\n  /**\n   * Get video width\n   *\n   * @return {number}\n   *         current video width\n   */\n  ;\n\n  _proto.videoWidth = function videoWidth() {\n    return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;\n  }\n  /**\n   * Get video height\n   *\n   * @return {number}\n   *         current video height\n   */\n  ;\n\n  _proto.videoHeight = function videoHeight() {\n    return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;\n  }\n  /**\n   * The player's language code.\n   *\n   * Changing the langauge will trigger\n   * [languagechange]{@link Player#event:languagechange}\n   * which Components can use to update control text.\n   * ClickableComponent will update its control text by default on\n   * [languagechange]{@link Player#event:languagechange}.\n   *\n   * @fires Player#languagechange\n   *\n   * @param {string} [code]\n   *        the language code to set the player to\n   *\n   * @return {string}\n   *         The current language code when getting\n   */\n  ;\n\n  _proto.language = function language(code) {\n    if (code === undefined) {\n      return this.language_;\n    }\n\n    if (this.language_ !== String(code).toLowerCase()) {\n      this.language_ = String(code).toLowerCase(); // during first init, it's possible some things won't be evented\n\n      if (isEvented(this)) {\n        /**\n        * fires when the player language change\n        *\n        * @event Player#languagechange\n        * @type {EventTarget~Event}\n        */\n        this.trigger('languagechange');\n      }\n    }\n  }\n  /**\n   * Get the player's language dictionary\n   * Merge every time, because a newly added plugin might call videojs.addLanguage() at any time\n   * Languages specified directly in the player options have precedence\n   *\n   * @return {Array}\n   *         An array of of supported languages\n   */\n  ;\n\n  _proto.languages = function languages() {\n    return mergeOptions$3(Player.prototype.options_.languages, this.languages_);\n  }\n  /**\n   * returns a JavaScript object reperesenting the current track\n   * information. **DOES not return it as JSON**\n   *\n   * @return {Object}\n   *         Object representing the current of track info\n   */\n  ;\n\n  _proto.toJSON = function toJSON() {\n    var options = mergeOptions$3(this.options_);\n    var tracks = options.tracks;\n    options.tracks = [];\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i]; // deep merge tracks and null out player so no circular references\n\n      track = mergeOptions$3(track);\n      track.player = undefined;\n      options.tracks[i] = track;\n    }\n\n    return options;\n  }\n  /**\n   * Creates a simple modal dialog (an instance of the {@link ModalDialog}\n   * component) that immediately overlays the player with arbitrary\n   * content and removes itself when closed.\n   *\n   * @param {string|Function|Element|Array|null} content\n   *        Same as {@link ModalDialog#content}'s param of the same name.\n   *        The most straight-forward usage is to provide a string or DOM\n   *        element.\n   *\n   * @param {Object} [options]\n   *        Extra options which will be passed on to the {@link ModalDialog}.\n   *\n   * @return {ModalDialog}\n   *         the {@link ModalDialog} that was created\n   */\n  ;\n\n  _proto.createModal = function createModal(content, options) {\n    var _this19 = this;\n\n    options = options || {};\n    options.content = content || '';\n    var modal = new ModalDialog(this, options);\n    this.addChild(modal);\n    modal.on('dispose', function () {\n      _this19.removeChild(modal);\n    });\n    modal.open();\n    return modal;\n  }\n  /**\n   * Change breakpoint classes when the player resizes.\n   *\n   * @private\n   */\n  ;\n\n  _proto.updateCurrentBreakpoint_ = function updateCurrentBreakpoint_() {\n    if (!this.responsive()) {\n      return;\n    }\n\n    var currentBreakpoint = this.currentBreakpoint();\n    var currentWidth = this.currentWidth();\n\n    for (var i = 0; i < BREAKPOINT_ORDER.length; i++) {\n      var candidateBreakpoint = BREAKPOINT_ORDER[i];\n      var maxWidth = this.breakpoints_[candidateBreakpoint];\n\n      if (currentWidth <= maxWidth) {\n        // The current breakpoint did not change, nothing to do.\n        if (currentBreakpoint === candidateBreakpoint) {\n          return;\n        } // Only remove a class if there is a current breakpoint.\n\n\n        if (currentBreakpoint) {\n          this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);\n        }\n\n        this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);\n        this.breakpoint_ = candidateBreakpoint;\n        break;\n      }\n    }\n  }\n  /**\n   * Removes the current breakpoint.\n   *\n   * @private\n   */\n  ;\n\n  _proto.removeCurrentBreakpoint_ = function removeCurrentBreakpoint_() {\n    var className = this.currentBreakpointClass();\n    this.breakpoint_ = '';\n\n    if (className) {\n      this.removeClass(className);\n    }\n  }\n  /**\n   * Get or set breakpoints on the player.\n   *\n   * Calling this method with an object or `true` will remove any previous\n   * custom breakpoints and start from the defaults again.\n   *\n   * @param  {Object|boolean} [breakpoints]\n   *         If an object is given, it can be used to provide custom\n   *         breakpoints. If `true` is given, will set default breakpoints.\n   *         If this argument is not given, will simply return the current\n   *         breakpoints.\n   *\n   * @param  {number} [breakpoints.tiny]\n   *         The maximum width for the \"vjs-layout-tiny\" class.\n   *\n   * @param  {number} [breakpoints.xsmall]\n   *         The maximum width for the \"vjs-layout-x-small\" class.\n   *\n   * @param  {number} [breakpoints.small]\n   *         The maximum width for the \"vjs-layout-small\" class.\n   *\n   * @param  {number} [breakpoints.medium]\n   *         The maximum width for the \"vjs-layout-medium\" class.\n   *\n   * @param  {number} [breakpoints.large]\n   *         The maximum width for the \"vjs-layout-large\" class.\n   *\n   * @param  {number} [breakpoints.xlarge]\n   *         The maximum width for the \"vjs-layout-x-large\" class.\n   *\n   * @param  {number} [breakpoints.huge]\n   *         The maximum width for the \"vjs-layout-huge\" class.\n   *\n   * @return {Object}\n   *         An object mapping breakpoint names to maximum width values.\n   */\n  ;\n\n  _proto.breakpoints = function breakpoints(_breakpoints) {\n    // Used as a getter.\n    if (_breakpoints === undefined) {\n      return assign(this.breakpoints_);\n    }\n\n    this.breakpoint_ = '';\n    this.breakpoints_ = assign({}, DEFAULT_BREAKPOINTS, _breakpoints); // When breakpoint definitions change, we need to update the currently\n    // selected breakpoint.\n\n    this.updateCurrentBreakpoint_(); // Clone the breakpoints before returning.\n\n    return assign(this.breakpoints_);\n  }\n  /**\n   * Get or set a flag indicating whether or not this player should adjust\n   * its UI based on its dimensions.\n   *\n   * @param  {boolean} value\n   *         Should be `true` if the player should adjust its UI based on its\n   *         dimensions; otherwise, should be `false`.\n   *\n   * @return {boolean}\n   *         Will be `true` if this player should adjust its UI based on its\n   *         dimensions; otherwise, will be `false`.\n   */\n  ;\n\n  _proto.responsive = function responsive(value) {\n    // Used as a getter.\n    if (value === undefined) {\n      return this.responsive_;\n    }\n\n    value = Boolean(value);\n    var current = this.responsive_; // Nothing changed.\n\n    if (value === current) {\n      return;\n    } // The value actually changed, set it.\n\n\n    this.responsive_ = value; // Start listening for breakpoints and set the initial breakpoint if the\n    // player is now responsive.\n\n    if (value) {\n      this.on('playerresize', this.boundUpdateCurrentBreakpoint_);\n      this.updateCurrentBreakpoint_(); // Stop listening for breakpoints if the player is no longer responsive.\n    } else {\n      this.off('playerresize', this.boundUpdateCurrentBreakpoint_);\n      this.removeCurrentBreakpoint_();\n    }\n\n    return value;\n  }\n  /**\n   * Get current breakpoint name, if any.\n   *\n   * @return {string}\n   *         If there is currently a breakpoint set, returns a the key from the\n   *         breakpoints object matching it. Otherwise, returns an empty string.\n   */\n  ;\n\n  _proto.currentBreakpoint = function currentBreakpoint() {\n    return this.breakpoint_;\n  }\n  /**\n   * Get the current breakpoint class name.\n   *\n   * @return {string}\n   *         The matching class name (e.g. `\"vjs-layout-tiny\"` or\n   *         `\"vjs-layout-large\"`) for the current breakpoint. Empty string if\n   *         there is no current breakpoint.\n   */\n  ;\n\n  _proto.currentBreakpointClass = function currentBreakpointClass() {\n    return BREAKPOINT_CLASSES[this.breakpoint_] || '';\n  }\n  /**\n   * An object that describes a single piece of media.\n   *\n   * Properties that are not part of this type description will be retained; so,\n   * this can be viewed as a generic metadata storage mechanism as well.\n   *\n   * @see      {@link https://wicg.github.io/mediasession/#the-mediametadata-interface}\n   * @typedef  {Object} Player~MediaObject\n   *\n   * @property {string} [album]\n   *           Unused, except if this object is passed to the `MediaSession`\n   *           API.\n   *\n   * @property {string} [artist]\n   *           Unused, except if this object is passed to the `MediaSession`\n   *           API.\n   *\n   * @property {Object[]} [artwork]\n   *           Unused, except if this object is passed to the `MediaSession`\n   *           API. If not specified, will be populated via the `poster`, if\n   *           available.\n   *\n   * @property {string} [poster]\n   *           URL to an image that will display before playback.\n   *\n   * @property {Tech~SourceObject|Tech~SourceObject[]|string} [src]\n   *           A single source object, an array of source objects, or a string\n   *           referencing a URL to a media source. It is _highly recommended_\n   *           that an object or array of objects is used here, so that source\n   *           selection algorithms can take the `type` into account.\n   *\n   * @property {string} [title]\n   *           Unused, except if this object is passed to the `MediaSession`\n   *           API.\n   *\n   * @property {Object[]} [textTracks]\n   *           An array of objects to be used to create text tracks, following\n   *           the {@link https://www.w3.org/TR/html50/embedded-content-0.html#the-track-element|native track element format}.\n   *           For ease of removal, these will be created as \"remote\" text\n   *           tracks and set to automatically clean up on source changes.\n   *\n   *           These objects may have properties like `src`, `kind`, `label`,\n   *           and `language`, see {@link Tech#createRemoteTextTrack}.\n   */\n\n  /**\n   * Populate the player using a {@link Player~MediaObject|MediaObject}.\n   *\n   * @param  {Player~MediaObject} media\n   *         A media object.\n   *\n   * @param  {Function} ready\n   *         A callback to be called when the player is ready.\n   */\n  ;\n\n  _proto.loadMedia = function loadMedia(media, ready) {\n    var _this20 = this;\n\n    if (!media || _typeof(media) !== 'object') {\n      return;\n    }\n\n    this.reset(); // Clone the media object so it cannot be mutated from outside.\n\n    this.cache_.media = mergeOptions$3(media);\n    var _this$cache_$media = this.cache_.media,\n        artwork = _this$cache_$media.artwork,\n        poster = _this$cache_$media.poster,\n        src = _this$cache_$media.src,\n        textTracks = _this$cache_$media.textTracks; // If `artwork` is not given, create it using `poster`.\n\n    if (!artwork && poster) {\n      this.cache_.media.artwork = [{\n        src: poster,\n        type: getMimetype(poster)\n      }];\n    }\n\n    if (src) {\n      this.src(src);\n    }\n\n    if (poster) {\n      this.poster(poster);\n    }\n\n    if (Array.isArray(textTracks)) {\n      textTracks.forEach(function (tt) {\n        return _this20.addRemoteTextTrack(tt, false);\n      });\n    }\n\n    this.ready(ready);\n  }\n  /**\n   * Get a clone of the current {@link Player~MediaObject} for this player.\n   *\n   * If the `loadMedia` method has not been used, will attempt to return a\n   * {@link Player~MediaObject} based on the current state of the player.\n   *\n   * @return {Player~MediaObject}\n   */\n  ;\n\n  _proto.getMedia = function getMedia() {\n    if (!this.cache_.media) {\n      var poster = this.poster();\n      var src = this.currentSources();\n      var textTracks = Array.prototype.map.call(this.remoteTextTracks(), function (tt) {\n        return {\n          kind: tt.kind,\n          label: tt.label,\n          language: tt.language,\n          src: tt.src\n        };\n      });\n      var media = {\n        src: src,\n        textTracks: textTracks\n      };\n\n      if (poster) {\n        media.poster = poster;\n        media.artwork = [{\n          src: media.poster,\n          type: getMimetype(media.poster)\n        }];\n      }\n\n      return media;\n    }\n\n    return mergeOptions$3(this.cache_.media);\n  }\n  /**\n   * Gets tag settings\n   *\n   * @param {Element} tag\n   *        The player tag\n   *\n   * @return {Object}\n   *         An object containing all of the settings\n   *         for a player tag\n   */\n  ;\n\n  Player.getTagSettings = function getTagSettings(tag) {\n    var baseOptions = {\n      sources: [],\n      tracks: []\n    };\n    var tagOptions = getAttributes(tag);\n    var dataSetup = tagOptions['data-setup'];\n\n    if (hasClass(tag, 'vjs-fill')) {\n      tagOptions.fill = true;\n    }\n\n    if (hasClass(tag, 'vjs-fluid')) {\n      tagOptions.fluid = true;\n    } // Check if data-setup attr exists.\n\n\n    if (dataSetup !== null) {\n      // Parse options JSON\n      // If empty string, make it a parsable json object.\n      var _safeParseTuple = safeParseTuple(dataSetup || '{}'),\n          err = _safeParseTuple[0],\n          data = _safeParseTuple[1];\n\n      if (err) {\n        log$1.error(err);\n      }\n\n      assign(tagOptions, data);\n    }\n\n    assign(baseOptions, tagOptions); // Get tag children settings\n\n    if (tag.hasChildNodes()) {\n      var children = tag.childNodes;\n\n      for (var i = 0, j = children.length; i < j; i++) {\n        var child = children[i]; // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/\n\n        var childName = child.nodeName.toLowerCase();\n\n        if (childName === 'source') {\n          baseOptions.sources.push(getAttributes(child));\n        } else if (childName === 'track') {\n          baseOptions.tracks.push(getAttributes(child));\n        }\n      }\n    }\n\n    return baseOptions;\n  }\n  /**\n   * Determine whether or not flexbox is supported\n   *\n   * @return {boolean}\n   *         - true if flexbox is supported\n   *         - false if flexbox is not supported\n   */\n  ;\n\n  _proto.flexNotSupported_ = function flexNotSupported_() {\n    var elem = document.createElement('i'); // Note: We don't actually use flexBasis (or flexOrder), but it's one of the more\n    // common flex features that we can rely on when checking for flex support.\n\n    return !('flexBasis' in elem.style || 'webkitFlexBasis' in elem.style || 'mozFlexBasis' in elem.style || 'msFlexBasis' in elem.style || // IE10-specific (2012 flex spec), available for completeness\n    'msFlexOrder' in elem.style);\n  }\n  /**\n   * Set debug mode to enable/disable logs at info level.\n   *\n   * @param {boolean} enabled\n   * @fires Player#debugon\n   * @fires Player#debugoff\n   */\n  ;\n\n  _proto.debug = function debug(enabled) {\n    if (enabled === undefined) {\n      return this.debugEnabled_;\n    }\n\n    if (enabled) {\n      this.trigger('debugon');\n      this.previousLogLevel_ = this.log.level;\n      this.log.level('debug');\n      this.debugEnabled_ = true;\n    } else {\n      this.trigger('debugoff');\n      this.log.level(this.previousLogLevel_);\n      this.previousLogLevel_ = undefined;\n      this.debugEnabled_ = false;\n    }\n  }\n  /**\n   * Set or get current playback rates.\n   * Takes an array and updates the playback rates menu with the new items.\n   * Pass in an empty array to hide the menu.\n   * Values other than arrays are ignored.\n   *\n   * @fires Player#playbackrateschange\n   * @param {number[]} newRates\n   *                   The new rates that the playback rates menu should update to.\n   *                   An empty array will hide the menu\n   * @return {number[]} When used as a getter will return the current playback rates\n   */\n  ;\n\n  _proto.playbackRates = function playbackRates(newRates) {\n    if (newRates === undefined) {\n      return this.cache_.playbackRates;\n    } // ignore any value that isn't an array\n\n\n    if (!Array.isArray(newRates)) {\n      return;\n    } // ignore any arrays that don't only contain numbers\n\n\n    if (!newRates.every(function (rate) {\n      return typeof rate === 'number';\n    })) {\n      return;\n    }\n\n    this.cache_.playbackRates = newRates;\n    /**\n    * fires when the playback rates in a player are changed\n    *\n    * @event Player#playbackrateschange\n    * @type {EventTarget~Event}\n    */\n\n    this.trigger('playbackrateschange');\n  };\n\n  return Player;\n}(Component$1);\n/**\n * Get the {@link VideoTrackList}\n * @link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist\n *\n * @return {VideoTrackList}\n *         the current video track list\n *\n * @method Player.prototype.videoTracks\n */\n\n/**\n * Get the {@link AudioTrackList}\n * @link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist\n *\n * @return {AudioTrackList}\n *         the current audio track list\n *\n * @method Player.prototype.audioTracks\n */\n\n/**\n * Get the {@link TextTrackList}\n *\n * @link http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks\n *\n * @return {TextTrackList}\n *         the current text track list\n *\n * @method Player.prototype.textTracks\n */\n\n/**\n * Get the remote {@link TextTrackList}\n *\n * @return {TextTrackList}\n *         The current remote text track list\n *\n * @method Player.prototype.remoteTextTracks\n */\n\n/**\n * Get the remote {@link HtmlTrackElementList} tracks.\n *\n * @return {HtmlTrackElementList}\n *         The current remote text track element list\n *\n * @method Player.prototype.remoteTextTrackEls\n */\n\n\nALL.names.forEach(function (name) {\n  var props = ALL[name];\n\n  Player.prototype[props.getterName] = function () {\n    if (this.tech_) {\n      return this.tech_[props.getterName]();\n    } // if we have not yet loadTech_, we create {video,audio,text}Tracks_\n    // these will be passed to the tech during loading\n\n\n    this[props.privateName] = this[props.privateName] || new props.ListClass();\n    return this[props.privateName];\n  };\n});\n/**\n * Get or set the `Player`'s crossorigin option. For the HTML5 player, this\n * sets the `crossOrigin` property on the `<video>` tag to control the CORS\n * behavior.\n *\n * @see [Video Element Attributes]{@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#attr-crossorigin}\n *\n * @param {string} [value]\n *        The value to set the `Player`'s crossorigin to. If an argument is\n *        given, must be one of `anonymous` or `use-credentials`.\n *\n * @return {string|undefined}\n *         - The current crossorigin value of the `Player` when getting.\n *         - undefined when setting\n */\n\nPlayer.prototype.crossorigin = Player.prototype.crossOrigin;\n/**\n * Global enumeration of players.\n *\n * The keys are the player IDs and the values are either the {@link Player}\n * instance or `null` for disposed players.\n *\n * @type {Object}\n */\n\nPlayer.players = {};\nvar navigator = window$1.navigator;\n/*\n * Player instance options, surfaced using options\n * options = Player.prototype.options_\n * Make changes in options, not here.\n *\n * @type {Object}\n * @private\n */\n\nPlayer.prototype.options_ = {\n  // Default order of fallback technology\n  techOrder: Tech.defaultTechOrder_,\n  html5: {},\n  // default inactivity timeout\n  inactivityTimeout: 2000,\n  // default playback rates\n  playbackRates: [],\n  // Add playback rate selection by adding rates\n  // 'playbackRates': [0.5, 1, 1.5, 2],\n  liveui: false,\n  // Included control sets\n  children: ['mediaLoader', 'posterImage', 'textTrackDisplay', 'loadingSpinner', 'bigPlayButton', 'liveTracker', 'controlBar', 'errorDisplay', 'textTrackSettings', 'resizeManager'],\n  language: navigator && (navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language) || 'en',\n  // locales and their language translations\n  languages: {},\n  // Default message to show when a video cannot be played.\n  notSupportedMessage: 'No compatible source was found for this media.',\n  normalizeAutoplay: false,\n  fullscreen: {\n    options: {\n      navigationUI: 'hide'\n    }\n  },\n  breakpoints: {},\n  responsive: false\n};\n[\n/**\n * Returns whether or not the player is in the \"ended\" state.\n *\n * @return {Boolean} True if the player is in the ended state, false if not.\n * @method Player#ended\n */\n'ended',\n/**\n * Returns whether or not the player is in the \"seeking\" state.\n *\n * @return {Boolean} True if the player is in the seeking state, false if not.\n * @method Player#seeking\n */\n'seeking',\n/**\n * Returns the TimeRanges of the media that are currently available\n * for seeking to.\n *\n * @return {TimeRanges} the seekable intervals of the media timeline\n * @method Player#seekable\n */\n'seekable',\n/**\n * Returns the current state of network activity for the element, from\n * the codes in the list below.\n * - NETWORK_EMPTY (numeric value 0)\n *   The element has not yet been initialised. All attributes are in\n *   their initial states.\n * - NETWORK_IDLE (numeric value 1)\n *   The element's resource selection algorithm is active and has\n *   selected a resource, but it is not actually using the network at\n *   this time.\n * - NETWORK_LOADING (numeric value 2)\n *   The user agent is actively trying to download data.\n * - NETWORK_NO_SOURCE (numeric value 3)\n *   The element's resource selection algorithm is active, but it has\n *   not yet found a resource to use.\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states\n * @return {number} the current network activity state\n * @method Player#networkState\n */\n'networkState',\n/**\n * Returns a value that expresses the current state of the element\n * with respect to rendering the current playback position, from the\n * codes in the list below.\n * - HAVE_NOTHING (numeric value 0)\n *   No information regarding the media resource is available.\n * - HAVE_METADATA (numeric value 1)\n *   Enough of the resource has been obtained that the duration of the\n *   resource is available.\n * - HAVE_CURRENT_DATA (numeric value 2)\n *   Data for the immediate current playback position is available.\n * - HAVE_FUTURE_DATA (numeric value 3)\n *   Data for the immediate current playback position is available, as\n *   well as enough data for the user agent to advance the current\n *   playback position in the direction of playback.\n * - HAVE_ENOUGH_DATA (numeric value 4)\n *   The user agent estimates that enough data is available for\n *   playback to proceed uninterrupted.\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate\n * @return {number} the current playback rendering state\n * @method Player#readyState\n */\n'readyState'].forEach(function (fn) {\n  Player.prototype[fn] = function () {\n    return this.techGet_(fn);\n  };\n});\nTECH_EVENTS_RETRIGGER.forEach(function (event) {\n  Player.prototype[\"handleTech\" + toTitleCase$1(event) + \"_\"] = function () {\n    return this.trigger(event);\n  };\n});\n/**\n * Fired when the player has initial duration and dimension information\n *\n * @event Player#loadedmetadata\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the player has downloaded data at the current playback position\n *\n * @event Player#loadeddata\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the current playback position has changed *\n * During playback this is fired every 15-250 milliseconds, depending on the\n * playback technology in use.\n *\n * @event Player#timeupdate\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the volume changes\n *\n * @event Player#volumechange\n * @type {EventTarget~Event}\n */\n\n/**\n * Reports whether or not a player has a plugin available.\n *\n * This does not report whether or not the plugin has ever been initialized\n * on this player. For that, [usingPlugin]{@link Player#usingPlugin}.\n *\n * @method Player#hasPlugin\n * @param  {string}  name\n *         The name of a plugin.\n *\n * @return {boolean}\n *         Whether or not this player has the requested plugin available.\n */\n\n/**\n * Reports whether or not a player is using a plugin by name.\n *\n * For basic plugins, this only reports whether the plugin has _ever_ been\n * initialized on this player.\n *\n * @method Player#usingPlugin\n * @param  {string} name\n *         The name of a plugin.\n *\n * @return {boolean}\n *         Whether or not this player is using the requested plugin.\n */\n\nComponent$1.registerComponent('Player', Player);\n/**\n * The base plugin name.\n *\n * @private\n * @constant\n * @type {string}\n */\n\nvar BASE_PLUGIN_NAME = 'plugin';\n/**\n * The key on which a player's active plugins cache is stored.\n *\n * @private\n * @constant\n * @type     {string}\n */\n\nvar PLUGIN_CACHE_KEY = 'activePlugins_';\n/**\n * Stores registered plugins in a private space.\n *\n * @private\n * @type    {Object}\n */\n\nvar pluginStorage = {};\n/**\n * Reports whether or not a plugin has been registered.\n *\n * @private\n * @param   {string} name\n *          The name of a plugin.\n *\n * @return {boolean}\n *          Whether or not the plugin has been registered.\n */\n\nvar pluginExists = function pluginExists(name) {\n  return pluginStorage.hasOwnProperty(name);\n};\n/**\n * Get a single registered plugin by name.\n *\n * @private\n * @param   {string} name\n *          The name of a plugin.\n *\n * @return {Function|undefined}\n *          The plugin (or undefined).\n */\n\n\nvar getPlugin = function getPlugin(name) {\n  return pluginExists(name) ? pluginStorage[name] : undefined;\n};\n/**\n * Marks a plugin as \"active\" on a player.\n *\n * Also, ensures that the player has an object for tracking active plugins.\n *\n * @private\n * @param   {Player} player\n *          A Video.js player instance.\n *\n * @param   {string} name\n *          The name of a plugin.\n */\n\n\nvar markPluginAsActive = function markPluginAsActive(player, name) {\n  player[PLUGIN_CACHE_KEY] = player[PLUGIN_CACHE_KEY] || {};\n  player[PLUGIN_CACHE_KEY][name] = true;\n};\n/**\n * Triggers a pair of plugin setup events.\n *\n * @private\n * @param  {Player} player\n *         A Video.js player instance.\n *\n * @param  {Plugin~PluginEventHash} hash\n *         A plugin event hash.\n *\n * @param  {boolean} [before]\n *         If true, prefixes the event name with \"before\". In other words,\n *         use this to trigger \"beforepluginsetup\" instead of \"pluginsetup\".\n */\n\n\nvar triggerSetupEvent = function triggerSetupEvent(player, hash, before) {\n  var eventName = (before ? 'before' : '') + 'pluginsetup';\n  player.trigger(eventName, hash);\n  player.trigger(eventName + ':' + hash.name, hash);\n};\n/**\n * Takes a basic plugin function and returns a wrapper function which marks\n * on the player that the plugin has been activated.\n *\n * @private\n * @param   {string} name\n *          The name of the plugin.\n *\n * @param   {Function} plugin\n *          The basic plugin.\n *\n * @return {Function}\n *          A wrapper function for the given plugin.\n */\n\n\nvar createBasicPlugin = function createBasicPlugin(name, plugin) {\n  var basicPluginWrapper = function basicPluginWrapper() {\n    // We trigger the \"beforepluginsetup\" and \"pluginsetup\" events on the player\n    // regardless, but we want the hash to be consistent with the hash provided\n    // for advanced plugins.\n    //\n    // The only potentially counter-intuitive thing here is the `instance` in\n    // the \"pluginsetup\" event is the value returned by the `plugin` function.\n    triggerSetupEvent(this, {\n      name: name,\n      plugin: plugin,\n      instance: null\n    }, true);\n    var instance = plugin.apply(this, arguments);\n    markPluginAsActive(this, name);\n    triggerSetupEvent(this, {\n      name: name,\n      plugin: plugin,\n      instance: instance\n    });\n    return instance;\n  };\n\n  Object.keys(plugin).forEach(function (prop) {\n    basicPluginWrapper[prop] = plugin[prop];\n  });\n  return basicPluginWrapper;\n};\n/**\n * Takes a plugin sub-class and returns a factory function for generating\n * instances of it.\n *\n * This factory function will replace itself with an instance of the requested\n * sub-class of Plugin.\n *\n * @private\n * @param   {string} name\n *          The name of the plugin.\n *\n * @param   {Plugin} PluginSubClass\n *          The advanced plugin.\n *\n * @return {Function}\n */\n\n\nvar createPluginFactory = function createPluginFactory(name, PluginSubClass) {\n  // Add a `name` property to the plugin prototype so that each plugin can\n  // refer to itself by name.\n  PluginSubClass.prototype.name = name;\n  return function () {\n    triggerSetupEvent(this, {\n      name: name,\n      plugin: PluginSubClass,\n      instance: null\n    }, true);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var instance = _construct(PluginSubClass, [this].concat(args)); // The plugin is replaced by a function that returns the current instance.\n\n\n    this[name] = function () {\n      return instance;\n    };\n\n    triggerSetupEvent(this, instance.getEventHash());\n    return instance;\n  };\n};\n/**\n * Parent class for all advanced plugins.\n *\n * @mixes   module:evented~EventedMixin\n * @mixes   module:stateful~StatefulMixin\n * @fires   Player#beforepluginsetup\n * @fires   Player#beforepluginsetup:$name\n * @fires   Player#pluginsetup\n * @fires   Player#pluginsetup:$name\n * @listens Player#dispose\n * @throws  {Error}\n *          If attempting to instantiate the base {@link Plugin} class\n *          directly instead of via a sub-class.\n */\n\n\nvar Plugin = /*#__PURE__*/function () {\n  /**\n   * Creates an instance of this class.\n   *\n   * Sub-classes should call `super` to ensure plugins are properly initialized.\n   *\n   * @param {Player} player\n   *        A Video.js player instance.\n   */\n  function Plugin(player) {\n    if (this.constructor === Plugin) {\n      throw new Error('Plugin must be sub-classed; not directly instantiated.');\n    }\n\n    this.player = player;\n\n    if (!this.log) {\n      this.log = this.player.log.createLogger(this.name);\n    } // Make this object evented, but remove the added `trigger` method so we\n    // use the prototype version instead.\n\n\n    evented(this);\n    delete this.trigger;\n    stateful(this, this.constructor.defaultState);\n    markPluginAsActive(player, this.name); // Auto-bind the dispose method so we can use it as a listener and unbind\n    // it later easily.\n\n    this.dispose = this.dispose.bind(this); // If the player is disposed, dispose the plugin.\n\n    player.on('dispose', this.dispose);\n  }\n  /**\n   * Get the version of the plugin that was set on <pluginName>.VERSION\n   */\n\n\n  var _proto = Plugin.prototype;\n\n  _proto.version = function version() {\n    return this.constructor.VERSION;\n  }\n  /**\n   * Each event triggered by plugins includes a hash of additional data with\n   * conventional properties.\n   *\n   * This returns that object or mutates an existing hash.\n   *\n   * @param   {Object} [hash={}]\n   *          An object to be used as event an event hash.\n   *\n   * @return {Plugin~PluginEventHash}\n   *          An event hash object with provided properties mixed-in.\n   */\n  ;\n\n  _proto.getEventHash = function getEventHash(hash) {\n    if (hash === void 0) {\n      hash = {};\n    }\n\n    hash.name = this.name;\n    hash.plugin = this.constructor;\n    hash.instance = this;\n    return hash;\n  }\n  /**\n   * Triggers an event on the plugin object and overrides\n   * {@link module:evented~EventedMixin.trigger|EventedMixin.trigger}.\n   *\n   * @param   {string|Object} event\n   *          An event type or an object with a type property.\n   *\n   * @param   {Object} [hash={}]\n   *          Additional data hash to merge with a\n   *          {@link Plugin~PluginEventHash|PluginEventHash}.\n   *\n   * @return {boolean}\n   *          Whether or not default was prevented.\n   */\n  ;\n\n  _proto.trigger = function trigger$1(event, hash) {\n    if (hash === void 0) {\n      hash = {};\n    }\n\n    return trigger(this.eventBusEl_, event, this.getEventHash(hash));\n  }\n  /**\n   * Handles \"statechanged\" events on the plugin. No-op by default, override by\n   * subclassing.\n   *\n   * @abstract\n   * @param    {Event} e\n   *           An event object provided by a \"statechanged\" event.\n   *\n   * @param    {Object} e.changes\n   *           An object describing changes that occurred with the \"statechanged\"\n   *           event.\n   */\n  ;\n\n  _proto.handleStateChanged = function handleStateChanged(e) {}\n  /**\n   * Disposes a plugin.\n   *\n   * Subclasses can override this if they want, but for the sake of safety,\n   * it's probably best to subscribe the \"dispose\" event.\n   *\n   * @fires Plugin#dispose\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    var name = this.name,\n        player = this.player;\n    /**\n     * Signals that a advanced plugin is about to be disposed.\n     *\n     * @event Plugin#dispose\n     * @type  {EventTarget~Event}\n     */\n\n    this.trigger('dispose');\n    this.off();\n    player.off('dispose', this.dispose); // Eliminate any possible sources of leaking memory by clearing up\n    // references between the player and the plugin instance and nulling out\n    // the plugin's state and replacing methods with a function that throws.\n\n    player[PLUGIN_CACHE_KEY][name] = false;\n    this.player = this.state = null; // Finally, replace the plugin name on the player with a new factory\n    // function, so that the plugin is ready to be set up again.\n\n    player[name] = createPluginFactory(name, pluginStorage[name]);\n  }\n  /**\n   * Determines if a plugin is a basic plugin (i.e. not a sub-class of `Plugin`).\n   *\n   * @param   {string|Function} plugin\n   *          If a string, matches the name of a plugin. If a function, will be\n   *          tested directly.\n   *\n   * @return {boolean}\n   *          Whether or not a plugin is a basic plugin.\n   */\n  ;\n\n  Plugin.isBasic = function isBasic(plugin) {\n    var p = typeof plugin === 'string' ? getPlugin(plugin) : plugin;\n    return typeof p === 'function' && !Plugin.prototype.isPrototypeOf(p.prototype);\n  }\n  /**\n   * Register a Video.js plugin.\n   *\n   * @param   {string} name\n   *          The name of the plugin to be registered. Must be a string and\n   *          must not match an existing plugin or a method on the `Player`\n   *          prototype.\n   *\n   * @param   {Function} plugin\n   *          A sub-class of `Plugin` or a function for basic plugins.\n   *\n   * @return {Function}\n   *          For advanced plugins, a factory function for that plugin. For\n   *          basic plugins, a wrapper function that initializes the plugin.\n   */\n  ;\n\n  Plugin.registerPlugin = function registerPlugin(name, plugin) {\n    if (typeof name !== 'string') {\n      throw new Error(\"Illegal plugin name, \\\"\" + name + \"\\\", must be a string, was \" + _typeof(name) + \".\");\n    }\n\n    if (pluginExists(name)) {\n      log$1.warn(\"A plugin named \\\"\" + name + \"\\\" already exists. You may want to avoid re-registering plugins!\");\n    } else if (Player.prototype.hasOwnProperty(name)) {\n      throw new Error(\"Illegal plugin name, \\\"\" + name + \"\\\", cannot share a name with an existing player method!\");\n    }\n\n    if (typeof plugin !== 'function') {\n      throw new Error(\"Illegal plugin for \\\"\" + name + \"\\\", must be a function, was \" + _typeof(plugin) + \".\");\n    }\n\n    pluginStorage[name] = plugin; // Add a player prototype method for all sub-classed plugins (but not for\n    // the base Plugin class).\n\n    if (name !== BASE_PLUGIN_NAME) {\n      if (Plugin.isBasic(plugin)) {\n        Player.prototype[name] = createBasicPlugin(name, plugin);\n      } else {\n        Player.prototype[name] = createPluginFactory(name, plugin);\n      }\n    }\n\n    return plugin;\n  }\n  /**\n   * De-register a Video.js plugin.\n   *\n   * @param  {string} name\n   *         The name of the plugin to be de-registered. Must be a string that\n   *         matches an existing plugin.\n   *\n   * @throws {Error}\n   *         If an attempt is made to de-register the base plugin.\n   */\n  ;\n\n  Plugin.deregisterPlugin = function deregisterPlugin(name) {\n    if (name === BASE_PLUGIN_NAME) {\n      throw new Error('Cannot de-register base plugin.');\n    }\n\n    if (pluginExists(name)) {\n      delete pluginStorage[name];\n      delete Player.prototype[name];\n    }\n  }\n  /**\n   * Gets an object containing multiple Video.js plugins.\n   *\n   * @param   {Array} [names]\n   *          If provided, should be an array of plugin names. Defaults to _all_\n   *          plugin names.\n   *\n   * @return {Object|undefined}\n   *          An object containing plugin(s) associated with their name(s) or\n   *          `undefined` if no matching plugins exist).\n   */\n  ;\n\n  Plugin.getPlugins = function getPlugins(names) {\n    if (names === void 0) {\n      names = Object.keys(pluginStorage);\n    }\n\n    var result;\n    names.forEach(function (name) {\n      var plugin = getPlugin(name);\n\n      if (plugin) {\n        result = result || {};\n        result[name] = plugin;\n      }\n    });\n    return result;\n  }\n  /**\n   * Gets a plugin's version, if available\n   *\n   * @param   {string} name\n   *          The name of a plugin.\n   *\n   * @return {string}\n   *          The plugin's version or an empty string.\n   */\n  ;\n\n  Plugin.getPluginVersion = function getPluginVersion(name) {\n    var plugin = getPlugin(name);\n    return plugin && plugin.VERSION || '';\n  };\n\n  return Plugin;\n}();\n/**\n * Gets a plugin by name if it exists.\n *\n * @static\n * @method   getPlugin\n * @memberOf Plugin\n * @param    {string} name\n *           The name of a plugin.\n *\n * @returns  {Function|undefined}\n *           The plugin (or `undefined`).\n */\n\n\nPlugin.getPlugin = getPlugin;\n/**\n * The name of the base plugin class as it is registered.\n *\n * @type {string}\n */\n\nPlugin.BASE_PLUGIN_NAME = BASE_PLUGIN_NAME;\nPlugin.registerPlugin(BASE_PLUGIN_NAME, Plugin);\n/**\n * Documented in player.js\n *\n * @ignore\n */\n\nPlayer.prototype.usingPlugin = function (name) {\n  return !!this[PLUGIN_CACHE_KEY] && this[PLUGIN_CACHE_KEY][name] === true;\n};\n/**\n * Documented in player.js\n *\n * @ignore\n */\n\n\nPlayer.prototype.hasPlugin = function (name) {\n  return !!pluginExists(name);\n};\n/**\n * Signals that a plugin is about to be set up on a player.\n *\n * @event    Player#beforepluginsetup\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin is about to be set up on a player - by name. The name\n * is the name of the plugin.\n *\n * @event    Player#beforepluginsetup:$name\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin has just been set up on a player.\n *\n * @event    Player#pluginsetup\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin has just been set up on a player - by name. The name\n * is the name of the plugin.\n *\n * @event    Player#pluginsetup:$name\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * @typedef  {Object} Plugin~PluginEventHash\n *\n * @property {string} instance\n *           For basic plugins, the return value of the plugin function. For\n *           advanced plugins, the plugin instance on which the event is fired.\n *\n * @property {string} name\n *           The name of the plugin.\n *\n * @property {string} plugin\n *           For basic plugins, the plugin function. For advanced plugins, the\n *           plugin class/constructor.\n */\n\n/**\n * @file extend.js\n * @module extend\n */\n\n/**\n * Used to subclass an existing class by emulating ES subclassing using the\n * `extends` keyword.\n *\n * @function\n * @example\n * var MyComponent = videojs.extend(videojs.getComponent('Component'), {\n *   myCustomMethod: function() {\n *     // Do things in my method.\n *   }\n * });\n *\n * @param    {Function} superClass\n *           The class to inherit from\n *\n * @param    {Object}   [subClassMethods={}]\n *           Methods of the new class\n *\n * @return   {Function}\n *           The new class with subClassMethods that inherited superClass.\n */\n\n\nvar extend = function extend(superClass, subClassMethods) {\n  if (subClassMethods === void 0) {\n    subClassMethods = {};\n  }\n\n  var subClass = function subClass() {\n    superClass.apply(this, arguments);\n  };\n\n  var methods = {};\n\n  if (_typeof(subClassMethods) === 'object') {\n    if (subClassMethods.constructor !== Object.prototype.constructor) {\n      subClass = subClassMethods.constructor;\n    }\n\n    methods = subClassMethods;\n  } else if (typeof subClassMethods === 'function') {\n    subClass = subClassMethods;\n  }\n\n  _inherits(subClass, superClass); // this is needed for backward-compatibility and node compatibility.\n\n\n  if (superClass) {\n    subClass.super_ = superClass;\n  } // Extend subObj's prototype with functions and other properties from props\n\n\n  for (var name in methods) {\n    if (methods.hasOwnProperty(name)) {\n      subClass.prototype[name] = methods[name];\n    }\n  }\n\n  return subClass;\n};\n/**\n * @file video.js\n * @module videojs\n */\n\n/**\n * Normalize an `id` value by trimming off a leading `#`\n *\n * @private\n * @param   {string} id\n *          A string, maybe with a leading `#`.\n *\n * @return {string}\n *          The string, without any leading `#`.\n */\n\n\nvar normalizeId = function normalizeId(id) {\n  return id.indexOf('#') === 0 ? id.slice(1) : id;\n};\n/**\n * The `videojs()` function doubles as the main function for users to create a\n * {@link Player} instance as well as the main library namespace.\n *\n * It can also be used as a getter for a pre-existing {@link Player} instance.\n * However, we _strongly_ recommend using `videojs.getPlayer()` for this\n * purpose because it avoids any potential for unintended initialization.\n *\n * Due to [limitations](https://github.com/jsdoc3/jsdoc/issues/955#issuecomment-313829149)\n * of our JSDoc template, we cannot properly document this as both a function\n * and a namespace, so its function signature is documented here.\n *\n * #### Arguments\n * ##### id\n * string|Element, **required**\n *\n * Video element or video element ID.\n *\n * ##### options\n * Object, optional\n *\n * Options object for providing settings.\n * See: [Options Guide](https://docs.videojs.com/tutorial-options.html).\n *\n * ##### ready\n * {@link Component~ReadyCallback}, optional\n *\n * A function to be called when the {@link Player} and {@link Tech} are ready.\n *\n * #### Return Value\n *\n * The `videojs()` function returns a {@link Player} instance.\n *\n * @namespace\n *\n * @borrows AudioTrack as AudioTrack\n * @borrows Component.getComponent as getComponent\n * @borrows module:computed-style~computedStyle as computedStyle\n * @borrows module:events.on as on\n * @borrows module:events.one as one\n * @borrows module:events.off as off\n * @borrows module:events.trigger as trigger\n * @borrows EventTarget as EventTarget\n * @borrows module:extend~extend as extend\n * @borrows module:fn.bind as bind\n * @borrows module:format-time.formatTime as formatTime\n * @borrows module:format-time.resetFormatTime as resetFormatTime\n * @borrows module:format-time.setFormatTime as setFormatTime\n * @borrows module:merge-options.mergeOptions as mergeOptions\n * @borrows module:middleware.use as use\n * @borrows Player.players as players\n * @borrows Plugin.registerPlugin as registerPlugin\n * @borrows Plugin.deregisterPlugin as deregisterPlugin\n * @borrows Plugin.getPlugins as getPlugins\n * @borrows Plugin.getPlugin as getPlugin\n * @borrows Plugin.getPluginVersion as getPluginVersion\n * @borrows Tech.getTech as getTech\n * @borrows Tech.registerTech as registerTech\n * @borrows TextTrack as TextTrack\n * @borrows module:time-ranges.createTimeRanges as createTimeRange\n * @borrows module:time-ranges.createTimeRanges as createTimeRanges\n * @borrows module:url.isCrossOrigin as isCrossOrigin\n * @borrows module:url.parseUrl as parseUrl\n * @borrows VideoTrack as VideoTrack\n *\n * @param  {string|Element} id\n *         Video element or video element ID.\n *\n * @param  {Object} [options]\n *         Options object for providing settings.\n *         See: [Options Guide](https://docs.videojs.com/tutorial-options.html).\n *\n * @param  {Component~ReadyCallback} [ready]\n *         A function to be called when the {@link Player} and {@link Tech} are\n *         ready.\n *\n * @return {Player}\n *         The `videojs()` function returns a {@link Player|Player} instance.\n */\n\n\nfunction videojs(id, options, ready) {\n  var player = videojs.getPlayer(id);\n\n  if (player) {\n    if (options) {\n      log$1.warn(\"Player \\\"\" + id + \"\\\" is already initialised. Options will not be applied.\");\n    }\n\n    if (ready) {\n      player.ready(ready);\n    }\n\n    return player;\n  }\n\n  var el = typeof id === 'string' ? $('#' + normalizeId(id)) : id;\n\n  if (!isEl(el)) {\n    throw new TypeError('The element or ID supplied is not valid. (videojs)');\n  } // document.body.contains(el) will only check if el is contained within that one document.\n  // This causes problems for elements in iframes.\n  // Instead, use the element's ownerDocument instead of the global document.\n  // This will make sure that the element is indeed in the dom of that document.\n  // Additionally, check that the document in question has a default view.\n  // If the document is no longer attached to the dom, the defaultView of the document will be null.\n\n\n  if (!el.ownerDocument.defaultView || !el.ownerDocument.body.contains(el)) {\n    log$1.warn('The element supplied is not included in the DOM');\n  }\n\n  options = options || {};\n  hooks('beforesetup').forEach(function (hookFunction) {\n    var opts = hookFunction(el, mergeOptions$3(options));\n\n    if (!isObject(opts) || Array.isArray(opts)) {\n      log$1.error('please return an object in beforesetup hooks');\n      return;\n    }\n\n    options = mergeOptions$3(options, opts);\n  }); // We get the current \"Player\" component here in case an integration has\n  // replaced it with a custom player.\n\n  var PlayerComponent = Component$1.getComponent('Player');\n  player = new PlayerComponent(el, options, ready);\n  hooks('setup').forEach(function (hookFunction) {\n    return hookFunction(player);\n  });\n  return player;\n}\n\nvideojs.hooks_ = hooks_;\nvideojs.hooks = hooks;\nvideojs.hook = hook;\nvideojs.hookOnce = hookOnce;\nvideojs.removeHook = removeHook; // Add default styles\n\nif (window$1.VIDEOJS_NO_DYNAMIC_STYLE !== true && isReal()) {\n  var style = $('.vjs-styles-defaults');\n\n  if (!style) {\n    style = createStyleElement('vjs-styles-defaults');\n    var head = $('head');\n\n    if (head) {\n      head.insertBefore(style, head.firstChild);\n    }\n\n    setTextContent(style, \"\\n      .video-js {\\n        width: 300px;\\n        height: 150px;\\n      }\\n\\n      .vjs-fluid {\\n        padding-top: 56.25%\\n      }\\n    \");\n  }\n} // Run Auto-load players\n// You have to wait at least once in case this script is loaded after your\n// video in the DOM (weird behavior only with minified version)\n\n\nautoSetupTimeout(1, videojs);\n/**\n * Current Video.js version. Follows [semantic versioning](https://semver.org/).\n *\n * @type {string}\n */\n\nvideojs.VERSION = version$5;\n/**\n * The global options object. These are the settings that take effect\n * if no overrides are specified when the player is created.\n *\n * @type {Object}\n */\n\nvideojs.options = Player.prototype.options_;\n/**\n * Get an object with the currently created players, keyed by player ID\n *\n * @return {Object}\n *         The created players\n */\n\nvideojs.getPlayers = function () {\n  return Player.players;\n};\n/**\n * Get a single player based on an ID or DOM element.\n *\n * This is useful if you want to check if an element or ID has an associated\n * Video.js player, but not create one if it doesn't.\n *\n * @param   {string|Element} id\n *          An HTML element - `<video>`, `<audio>`, or `<video-js>` -\n *          or a string matching the `id` of such an element.\n *\n * @return {Player|undefined}\n *          A player instance or `undefined` if there is no player instance\n *          matching the argument.\n */\n\n\nvideojs.getPlayer = function (id) {\n  var players = Player.players;\n  var tag;\n\n  if (typeof id === 'string') {\n    var nId = normalizeId(id);\n    var player = players[nId];\n\n    if (player) {\n      return player;\n    }\n\n    tag = $('#' + nId);\n  } else {\n    tag = id;\n  }\n\n  if (isEl(tag)) {\n    var _tag = tag,\n        _player = _tag.player,\n        playerId = _tag.playerId; // Element may have a `player` property referring to an already created\n    // player instance. If so, return that.\n\n    if (_player || players[playerId]) {\n      return _player || players[playerId];\n    }\n  }\n};\n/**\n * Returns an array of all current players.\n *\n * @return {Array}\n *         An array of all players. The array will be in the order that\n *         `Object.keys` provides, which could potentially vary between\n *         JavaScript engines.\n *\n */\n\n\nvideojs.getAllPlayers = function () {\n  return (// Disposed players leave a key with a `null` value, so we need to make sure\n    // we filter those out.\n    Object.keys(Player.players).map(function (k) {\n      return Player.players[k];\n    }).filter(Boolean)\n  );\n};\n\nvideojs.players = Player.players;\nvideojs.getComponent = Component$1.getComponent;\n/**\n * Register a component so it can referred to by name. Used when adding to other\n * components, either through addChild `component.addChild('myComponent')` or through\n * default children options  `{ children: ['myComponent'] }`.\n *\n * > NOTE: You could also just initialize the component before adding.\n * `component.addChild(new MyComponent());`\n *\n * @param {string} name\n *        The class name of the component\n *\n * @param {Component} comp\n *        The component class\n *\n * @return {Component}\n *         The newly registered component\n */\n\nvideojs.registerComponent = function (name, comp) {\n  if (Tech.isTech(comp)) {\n    log$1.warn(\"The \" + name + \" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)\");\n  }\n\n  Component$1.registerComponent.call(Component$1, name, comp);\n};\n\nvideojs.getTech = Tech.getTech;\nvideojs.registerTech = Tech.registerTech;\nvideojs.use = use;\n/**\n * An object that can be returned by a middleware to signify\n * that the middleware is being terminated.\n *\n * @type {object}\n * @property {object} middleware.TERMINATOR\n */\n\nObject.defineProperty(videojs, 'middleware', {\n  value: {},\n  writeable: false,\n  enumerable: true\n});\nObject.defineProperty(videojs.middleware, 'TERMINATOR', {\n  value: TERMINATOR,\n  writeable: false,\n  enumerable: true\n});\n/**\n * A reference to the {@link module:browser|browser utility module} as an object.\n *\n * @type {Object}\n * @see  {@link module:browser|browser}\n */\n\nvideojs.browser = browser;\n/**\n * Use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED} instead; only\n * included for backward-compatibility with 4.x.\n *\n * @deprecated Since version 5.0, use {@link module:browser.TOUCH_ENABLED|browser.TOUCH_ENABLED instead.\n * @type {boolean}\n */\n\nvideojs.TOUCH_ENABLED = TOUCH_ENABLED;\nvideojs.extend = extend;\nvideojs.mergeOptions = mergeOptions$3;\nvideojs.bind = bind;\nvideojs.registerPlugin = Plugin.registerPlugin;\nvideojs.deregisterPlugin = Plugin.deregisterPlugin;\n/**\n * Deprecated method to register a plugin with Video.js\n *\n * @deprecated videojs.plugin() is deprecated; use videojs.registerPlugin() instead\n *\n * @param {string} name\n *        The plugin name\n *\n * @param {Plugin|Function} plugin\n *         The plugin sub-class or function\n */\n\nvideojs.plugin = function (name, plugin) {\n  log$1.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead');\n  return Plugin.registerPlugin(name, plugin);\n};\n\nvideojs.getPlugins = Plugin.getPlugins;\nvideojs.getPlugin = Plugin.getPlugin;\nvideojs.getPluginVersion = Plugin.getPluginVersion;\n/**\n * Adding languages so that they're available to all players.\n * Example: `videojs.addLanguage('es', { 'Hello': 'Hola' });`\n *\n * @param {string} code\n *        The language code or dictionary property\n *\n * @param {Object} data\n *        The data values to be translated\n *\n * @return {Object}\n *         The resulting language dictionary object\n */\n\nvideojs.addLanguage = function (code, data) {\n  var _mergeOptions;\n\n  code = ('' + code).toLowerCase();\n  videojs.options.languages = mergeOptions$3(videojs.options.languages, (_mergeOptions = {}, _mergeOptions[code] = data, _mergeOptions));\n  return videojs.options.languages[code];\n};\n/**\n * A reference to the {@link module:log|log utility module} as an object.\n *\n * @type {Function}\n * @see  {@link module:log|log}\n */\n\n\nvideojs.log = log$1;\nvideojs.createLogger = createLogger;\nvideojs.createTimeRange = videojs.createTimeRanges = createTimeRanges;\nvideojs.formatTime = formatTime;\nvideojs.setFormatTime = setFormatTime;\nvideojs.resetFormatTime = resetFormatTime;\nvideojs.parseUrl = parseUrl;\nvideojs.isCrossOrigin = isCrossOrigin;\nvideojs.EventTarget = EventTarget$2;\nvideojs.on = on;\nvideojs.one = one;\nvideojs.off = off;\nvideojs.trigger = trigger;\n/**\n * A cross-browser XMLHttpRequest wrapper.\n *\n * @function\n * @param    {Object} options\n *           Settings for the request.\n *\n * @return   {XMLHttpRequest|XDomainRequest}\n *           The request object.\n *\n * @see      https://github.com/Raynos/xhr\n */\n\nvideojs.xhr = XHR;\nvideojs.TextTrack = TextTrack;\nvideojs.AudioTrack = AudioTrack;\nvideojs.VideoTrack = VideoTrack;\n['isEl', 'isTextNode', 'createEl', 'hasClass', 'addClass', 'removeClass', 'toggleClass', 'setAttributes', 'getAttributes', 'emptyEl', 'appendContent', 'insertContent'].forEach(function (k) {\n  videojs[k] = function () {\n    log$1.warn(\"videojs.\" + k + \"() is deprecated; use videojs.dom.\" + k + \"() instead\");\n    return Dom[k].apply(null, arguments);\n  };\n});\nvideojs.computedStyle = computedStyle;\n/**\n * A reference to the {@link module:dom|DOM utility module} as an object.\n *\n * @type {Object}\n * @see  {@link module:dom|dom}\n */\n\nvideojs.dom = Dom;\n/**\n * A reference to the {@link module:url|URL utility module} as an object.\n *\n * @type {Object}\n * @see  {@link module:url|url}\n */\n\nvideojs.url = Url;\nvideojs.defineLazyProperty = defineLazyProperty; // Adding less ambiguous text for fullscreen button.\n// In a major update this could become the default text and key.\n\nvideojs.addLanguage('en', {\n  'Non-Fullscreen': 'Exit Fullscreen'\n});\n/*! @name @videojs/http-streaming @version 2.13.1 @license Apache-2.0 */\n\n/**\n * @file resolve-url.js - Handling how URLs are resolved and manipulated\n */\n\nvar resolveUrl = _resolveUrl;\n/**\n * Checks whether xhr request was redirected and returns correct url depending\n * on `handleManifestRedirects` option\n *\n * @api private\n *\n * @param  {string} url - an url being requested\n * @param  {XMLHttpRequest} req - xhr request result\n *\n * @return {string}\n */\n\nvar resolveManifestRedirect = function resolveManifestRedirect(handleManifestRedirect, url, req) {\n  // To understand how the responseURL below is set and generated:\n  // - https://fetch.spec.whatwg.org/#concept-response-url\n  // - https://fetch.spec.whatwg.org/#atomic-http-redirect-handling\n  if (handleManifestRedirect && req && req.responseURL && url !== req.responseURL) {\n    return req.responseURL;\n  }\n\n  return url;\n};\n\nvar logger = function logger(source) {\n  if (videojs.log.debug) {\n    return videojs.log.debug.bind(videojs, 'VHS:', source + \" >\");\n  }\n\n  return function () {};\n};\n/**\n * ranges\n *\n * Utilities for working with TimeRanges.\n *\n */\n\n\nvar TIME_FUDGE_FACTOR = 1 / 30; // Comparisons between time values such as current time and the end of the buffered range\n// can be misleading because of precision differences or when the current media has poorly\n// aligned audio and video, which can cause values to be slightly off from what you would\n// expect. This value is what we consider to be safe to use in such comparisons to account\n// for these scenarios.\n\nvar SAFE_TIME_DELTA = TIME_FUDGE_FACTOR * 3;\n\nvar filterRanges = function filterRanges(timeRanges, predicate) {\n  var results = [];\n  var i;\n\n  if (timeRanges && timeRanges.length) {\n    // Search for ranges that match the predicate\n    for (i = 0; i < timeRanges.length; i++) {\n      if (predicate(timeRanges.start(i), timeRanges.end(i))) {\n        results.push([timeRanges.start(i), timeRanges.end(i)]);\n      }\n    }\n  }\n\n  return videojs.createTimeRanges(results);\n};\n/**\n * Attempts to find the buffered TimeRange that contains the specified\n * time.\n *\n * @param {TimeRanges} buffered - the TimeRanges object to query\n * @param {number} time  - the time to filter on.\n * @return {TimeRanges} a new TimeRanges object\n */\n\n\nvar findRange = function findRange(buffered, time) {\n  return filterRanges(buffered, function (start, end) {\n    return start - SAFE_TIME_DELTA <= time && end + SAFE_TIME_DELTA >= time;\n  });\n};\n/**\n * Returns the TimeRanges that begin later than the specified time.\n *\n * @param {TimeRanges} timeRanges - the TimeRanges object to query\n * @param {number} time - the time to filter on.\n * @return {TimeRanges} a new TimeRanges object.\n */\n\n\nvar findNextRange = function findNextRange(timeRanges, time) {\n  return filterRanges(timeRanges, function (start) {\n    return start - TIME_FUDGE_FACTOR >= time;\n  });\n};\n/**\n * Returns gaps within a list of TimeRanges\n *\n * @param {TimeRanges} buffered - the TimeRanges object\n * @return {TimeRanges} a TimeRanges object of gaps\n */\n\n\nvar findGaps = function findGaps(buffered) {\n  if (buffered.length < 2) {\n    return videojs.createTimeRanges();\n  }\n\n  var ranges = [];\n\n  for (var i = 1; i < buffered.length; i++) {\n    var start = buffered.end(i - 1);\n    var end = buffered.start(i);\n    ranges.push([start, end]);\n  }\n\n  return videojs.createTimeRanges(ranges);\n};\n/**\n * Calculate the intersection of two TimeRanges\n *\n * @param {TimeRanges} bufferA\n * @param {TimeRanges} bufferB\n * @return {TimeRanges} The interesection of `bufferA` with `bufferB`\n */\n\n\nvar bufferIntersection = function bufferIntersection(bufferA, bufferB) {\n  var start = null;\n  var end = null;\n  var arity = 0;\n  var extents = [];\n  var ranges = [];\n\n  if (!bufferA || !bufferA.length || !bufferB || !bufferB.length) {\n    return videojs.createTimeRange();\n  } // Handle the case where we have both buffers and create an\n  // intersection of the two\n\n\n  var count = bufferA.length; // A) Gather up all start and end times\n\n  while (count--) {\n    extents.push({\n      time: bufferA.start(count),\n      type: 'start'\n    });\n    extents.push({\n      time: bufferA.end(count),\n      type: 'end'\n    });\n  }\n\n  count = bufferB.length;\n\n  while (count--) {\n    extents.push({\n      time: bufferB.start(count),\n      type: 'start'\n    });\n    extents.push({\n      time: bufferB.end(count),\n      type: 'end'\n    });\n  } // B) Sort them by time\n\n\n  extents.sort(function (a, b) {\n    return a.time - b.time;\n  }); // C) Go along one by one incrementing arity for start and decrementing\n  //    arity for ends\n\n  for (count = 0; count < extents.length; count++) {\n    if (extents[count].type === 'start') {\n      arity++; // D) If arity is ever incremented to 2 we are entering an\n      //    overlapping range\n\n      if (arity === 2) {\n        start = extents[count].time;\n      }\n    } else if (extents[count].type === 'end') {\n      arity--; // E) If arity is ever decremented to 1 we leaving an\n      //    overlapping range\n\n      if (arity === 1) {\n        end = extents[count].time;\n      }\n    } // F) Record overlapping ranges\n\n\n    if (start !== null && end !== null) {\n      ranges.push([start, end]);\n      start = null;\n      end = null;\n    }\n  }\n\n  return videojs.createTimeRanges(ranges);\n};\n/**\n * Gets a human readable string for a TimeRange\n *\n * @param {TimeRange} range\n * @return {string} a human readable string\n */\n\n\nvar printableRange = function printableRange(range) {\n  var strArr = [];\n\n  if (!range || !range.length) {\n    return '';\n  }\n\n  for (var i = 0; i < range.length; i++) {\n    strArr.push(range.start(i) + ' => ' + range.end(i));\n  }\n\n  return strArr.join(', ');\n};\n/**\n * Calculates the amount of time left in seconds until the player hits the end of the\n * buffer and causes a rebuffer\n *\n * @param {TimeRange} buffered\n *        The state of the buffer\n * @param {Numnber} currentTime\n *        The current time of the player\n * @param {number} playbackRate\n *        The current playback rate of the player. Defaults to 1.\n * @return {number}\n *         Time until the player has to start rebuffering in seconds.\n * @function timeUntilRebuffer\n */\n\n\nvar timeUntilRebuffer = function timeUntilRebuffer(buffered, currentTime, playbackRate) {\n  if (playbackRate === void 0) {\n    playbackRate = 1;\n  }\n\n  var bufferedEnd = buffered.length ? buffered.end(buffered.length - 1) : 0;\n  return (bufferedEnd - currentTime) / playbackRate;\n};\n/**\n * Converts a TimeRanges object into an array representation\n *\n * @param {TimeRanges} timeRanges\n * @return {Array}\n */\n\n\nvar timeRangesToArray = function timeRangesToArray(timeRanges) {\n  var timeRangesList = [];\n\n  for (var i = 0; i < timeRanges.length; i++) {\n    timeRangesList.push({\n      start: timeRanges.start(i),\n      end: timeRanges.end(i)\n    });\n  }\n\n  return timeRangesList;\n};\n/**\n * Determines if two time range objects are different.\n *\n * @param {TimeRange} a\n *        the first time range object to check\n *\n * @param {TimeRange} b\n *        the second time range object to check\n *\n * @return {Boolean}\n *         Whether the time range objects differ\n */\n\n\nvar isRangeDifferent = function isRangeDifferent(a, b) {\n  // same object\n  if (a === b) {\n    return false;\n  } // one or the other is undefined\n\n\n  if (!a && b || !b && a) {\n    return true;\n  } // length is different\n\n\n  if (a.length !== b.length) {\n    return true;\n  } // see if any start/end pair is different\n\n\n  for (var i = 0; i < a.length; i++) {\n    if (a.start(i) !== b.start(i) || a.end(i) !== b.end(i)) {\n      return true;\n    }\n  } // if the length and every pair is the same\n  // this is the same time range\n\n\n  return false;\n};\n\nvar lastBufferedEnd = function lastBufferedEnd(a) {\n  if (!a || !a.length || !a.end) {\n    return;\n  }\n\n  return a.end(a.length - 1);\n};\n/**\n * A utility function to add up the amount of time in a timeRange\n * after a specified startTime.\n * ie:[[0, 10], [20, 40], [50, 60]] with a startTime 0\n *     would return 40 as there are 40s seconds after 0 in the timeRange\n *\n * @param {TimeRange} range\n *        The range to check against\n * @param {number} startTime\n *        The time in the time range that you should start counting from\n *\n * @return {number}\n *          The number of seconds in the buffer passed the specified time.\n */\n\n\nvar timeAheadOf = function timeAheadOf(range, startTime) {\n  var time = 0;\n\n  if (!range || !range.length) {\n    return time;\n  }\n\n  for (var i = 0; i < range.length; i++) {\n    var start = range.start(i);\n    var end = range.end(i); // startTime is after this range entirely\n\n    if (startTime > end) {\n      continue;\n    } // startTime is within this range\n\n\n    if (startTime > start && startTime <= end) {\n      time += end - startTime;\n      continue;\n    } // startTime is before this range.\n\n\n    time += end - start;\n  }\n\n  return time;\n};\n/**\n * @file playlist.js\n *\n * Playlist related utilities.\n */\n\n\nvar createTimeRange = videojs.createTimeRange;\n/**\n * Get the duration of a segment, with special cases for\n * llhls segments that do not have a duration yet.\n *\n * @param {Object} playlist\n *        the playlist that the segment belongs to.\n * @param {Object} segment\n *        the segment to get a duration for.\n *\n * @return {number}\n *          the segment duration\n */\n\nvar segmentDurationWithParts = function segmentDurationWithParts(playlist, segment) {\n  // if this isn't a preload segment\n  // then we will have a segment duration that is accurate.\n  if (!segment.preload) {\n    return segment.duration;\n  } // otherwise we have to add up parts and preload hints\n  // to get an up to date duration.\n\n\n  var result = 0;\n  (segment.parts || []).forEach(function (p) {\n    result += p.duration;\n  }); // for preload hints we have to use partTargetDuration\n  // as they won't even have a duration yet.\n\n  (segment.preloadHints || []).forEach(function (p) {\n    if (p.type === 'PART') {\n      result += playlist.partTargetDuration;\n    }\n  });\n  return result;\n};\n/**\n * A function to get a combined list of parts and segments with durations\n * and indexes.\n *\n * @param {Playlist} playlist the playlist to get the list for.\n *\n * @return {Array} The part/segment list.\n */\n\n\nvar getPartsAndSegments = function getPartsAndSegments(playlist) {\n  return (playlist.segments || []).reduce(function (acc, segment, si) {\n    if (segment.parts) {\n      segment.parts.forEach(function (part, pi) {\n        acc.push({\n          duration: part.duration,\n          segmentIndex: si,\n          partIndex: pi,\n          part: part,\n          segment: segment\n        });\n      });\n    } else {\n      acc.push({\n        duration: segment.duration,\n        segmentIndex: si,\n        partIndex: null,\n        segment: segment,\n        part: null\n      });\n    }\n\n    return acc;\n  }, []);\n};\n\nvar getLastParts = function getLastParts(media) {\n  var lastSegment = media.segments && media.segments.length && media.segments[media.segments.length - 1];\n  return lastSegment && lastSegment.parts || [];\n};\n\nvar getKnownPartCount = function getKnownPartCount(_ref) {\n  var preloadSegment = _ref.preloadSegment;\n\n  if (!preloadSegment) {\n    return;\n  }\n\n  var parts = preloadSegment.parts,\n      preloadHints = preloadSegment.preloadHints;\n  var partCount = (preloadHints || []).reduce(function (count, hint) {\n    return count + (hint.type === 'PART' ? 1 : 0);\n  }, 0);\n  partCount += parts && parts.length ? parts.length : 0;\n  return partCount;\n};\n/**\n * Get the number of seconds to delay from the end of a\n * live playlist.\n *\n * @param {Playlist} master the master playlist\n * @param {Playlist} media the media playlist\n * @return {number} the hold back in seconds.\n */\n\n\nvar liveEdgeDelay = function liveEdgeDelay(master, media) {\n  if (media.endList) {\n    return 0;\n  } // dash suggestedPresentationDelay trumps everything\n\n\n  if (master && master.suggestedPresentationDelay) {\n    return master.suggestedPresentationDelay;\n  }\n\n  var hasParts = getLastParts(media).length > 0; // look for \"part\" delays from ll-hls first\n\n  if (hasParts && media.serverControl && media.serverControl.partHoldBack) {\n    return media.serverControl.partHoldBack;\n  } else if (hasParts && media.partTargetDuration) {\n    return media.partTargetDuration * 3; // finally look for full segment delays\n  } else if (media.serverControl && media.serverControl.holdBack) {\n    return media.serverControl.holdBack;\n  } else if (media.targetDuration) {\n    return media.targetDuration * 3;\n  }\n\n  return 0;\n};\n/**\n * walk backward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {Number} endSequence the mediaSequence to stop walking on\n */\n\n\nvar backwardDuration = function backwardDuration(playlist, endSequence) {\n  var result = 0;\n  var i = endSequence - playlist.mediaSequence; // if a start time is available for segment immediately following\n  // the interval, use it\n\n  var segment = playlist.segments[i]; // Walk backward until we find the latest segment with timeline\n  // information that is earlier than endSequence\n\n  if (segment) {\n    if (typeof segment.start !== 'undefined') {\n      return {\n        result: segment.start,\n        precise: true\n      };\n    }\n\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - segment.duration,\n        precise: true\n      };\n    }\n  }\n\n  while (i--) {\n    segment = playlist.segments[i];\n\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: result + segment.end,\n        precise: true\n      };\n    }\n\n    result += segmentDurationWithParts(playlist, segment);\n\n    if (typeof segment.start !== 'undefined') {\n      return {\n        result: result + segment.start,\n        precise: true\n      };\n    }\n  }\n\n  return {\n    result: result,\n    precise: false\n  };\n};\n/**\n * walk forward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {number} endSequence the mediaSequence to stop walking on\n */\n\n\nvar forwardDuration = function forwardDuration(playlist, endSequence) {\n  var result = 0;\n  var segment;\n  var i = endSequence - playlist.mediaSequence; // Walk forward until we find the earliest segment with timeline\n  // information\n\n  for (; i < playlist.segments.length; i++) {\n    segment = playlist.segments[i];\n\n    if (typeof segment.start !== 'undefined') {\n      return {\n        result: segment.start - result,\n        precise: true\n      };\n    }\n\n    result += segmentDurationWithParts(playlist, segment);\n\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - result,\n        precise: true\n      };\n    }\n  } // indicate we didn't find a useful duration estimate\n\n\n  return {\n    result: -1,\n    precise: false\n  };\n};\n/**\n  * Calculate the media duration from the segments associated with a\n  * playlist. The duration of a subinterval of the available segments\n  * may be calculated by specifying an end index.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {number=} endSequence an exclusive upper boundary\n  * for the playlist.  Defaults to playlist length.\n  * @param {number} expired the amount of time that has dropped\n  * off the front of the playlist in a live scenario\n  * @return {number} the duration between the first available segment\n  * and end index.\n  */\n\n\nvar intervalDuration = function intervalDuration(playlist, endSequence, expired) {\n  if (typeof endSequence === 'undefined') {\n    endSequence = playlist.mediaSequence + playlist.segments.length;\n  }\n\n  if (endSequence < playlist.mediaSequence) {\n    return 0;\n  } // do a backward walk to estimate the duration\n\n\n  var backward = backwardDuration(playlist, endSequence);\n\n  if (backward.precise) {\n    // if we were able to base our duration estimate on timing\n    // information provided directly from the Media Source, return\n    // it\n    return backward.result;\n  } // walk forward to see if a precise duration estimate can be made\n  // that way\n\n\n  var forward = forwardDuration(playlist, endSequence);\n\n  if (forward.precise) {\n    // we found a segment that has been buffered and so it's\n    // position is known precisely\n    return forward.result;\n  } // return the less-precise, playlist-based duration estimate\n\n\n  return backward.result + expired;\n};\n/**\n  * Calculates the duration of a playlist. If a start and end index\n  * are specified, the duration will be for the subset of the media\n  * timeline between those two indices. The total duration for live\n  * playlists is always Infinity.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {number=} endSequence an exclusive upper\n  * boundary for the playlist. Defaults to the playlist media\n  * sequence number plus its length.\n  * @param {number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @return {number} the duration between the start index and end\n  * index.\n  */\n\n\nvar duration = function duration(playlist, endSequence, expired) {\n  if (!playlist) {\n    return 0;\n  }\n\n  if (typeof expired !== 'number') {\n    expired = 0;\n  } // if a slice of the total duration is not requested, use\n  // playlist-level duration indicators when they're present\n\n\n  if (typeof endSequence === 'undefined') {\n    // if present, use the duration specified in the playlist\n    if (playlist.totalDuration) {\n      return playlist.totalDuration;\n    } // duration should be Infinity for live playlists\n\n\n    if (!playlist.endList) {\n      return window$1.Infinity;\n    }\n  } // calculate the total duration based on the segment durations\n\n\n  return intervalDuration(playlist, endSequence, expired);\n};\n/**\n  * Calculate the time between two indexes in the current playlist\n  * neight the start- nor the end-index need to be within the current\n  * playlist in which case, the targetDuration of the playlist is used\n  * to approximate the durations of the segments\n  *\n  * @param {Array} options.durationList list to iterate over for durations.\n  * @param {number} options.defaultDuration duration to use for elements before or after the durationList\n  * @param {number} options.startIndex partsAndSegments index to start\n  * @param {number} options.endIndex partsAndSegments index to end.\n  * @return {number} the number of seconds between startIndex and endIndex\n  */\n\n\nvar sumDurations = function sumDurations(_ref2) {\n  var defaultDuration = _ref2.defaultDuration,\n      durationList = _ref2.durationList,\n      startIndex = _ref2.startIndex,\n      endIndex = _ref2.endIndex;\n  var durations = 0;\n\n  if (startIndex > endIndex) {\n    var _ref3 = [endIndex, startIndex];\n    startIndex = _ref3[0];\n    endIndex = _ref3[1];\n  }\n\n  if (startIndex < 0) {\n    for (var i = startIndex; i < Math.min(0, endIndex); i++) {\n      durations += defaultDuration;\n    }\n\n    startIndex = 0;\n  }\n\n  for (var _i = startIndex; _i < endIndex; _i++) {\n    durations += durationList[_i].duration;\n  }\n\n  return durations;\n};\n/**\n * Calculates the playlist end time\n *\n * @param {Object} playlist a media playlist object\n * @param {number=} expired the amount of time that has\n *                  dropped off the front of the playlist in a live scenario\n * @param {boolean|false} useSafeLiveEnd a boolean value indicating whether or not the\n *                        playlist end calculation should consider the safe live end\n *                        (truncate the playlist end by three segments). This is normally\n *                        used for calculating the end of the playlist's seekable range.\n *                        This takes into account the value of liveEdgePadding.\n *                        Setting liveEdgePadding to 0 is equivalent to setting this to false.\n * @param {number} liveEdgePadding a number indicating how far from the end of the playlist we should be in seconds.\n *                 If this is provided, it is used in the safe live end calculation.\n *                 Setting useSafeLiveEnd=false or liveEdgePadding=0 are equivalent.\n *                 Corresponds to suggestedPresentationDelay in DASH manifests.\n * @return {number} the end time of playlist\n * @function playlistEnd\n */\n\n\nvar playlistEnd = function playlistEnd(playlist, expired, useSafeLiveEnd, liveEdgePadding) {\n  if (!playlist || !playlist.segments) {\n    return null;\n  }\n\n  if (playlist.endList) {\n    return duration(playlist);\n  }\n\n  if (expired === null) {\n    return null;\n  }\n\n  expired = expired || 0;\n  var lastSegmentEndTime = intervalDuration(playlist, playlist.mediaSequence + playlist.segments.length, expired);\n\n  if (useSafeLiveEnd) {\n    liveEdgePadding = typeof liveEdgePadding === 'number' ? liveEdgePadding : liveEdgeDelay(null, playlist);\n    lastSegmentEndTime -= liveEdgePadding;\n  } // don't return a time less than zero\n\n\n  return Math.max(0, lastSegmentEndTime);\n};\n/**\n  * Calculates the interval of time that is currently seekable in a\n  * playlist. The returned time ranges are relative to the earliest\n  * moment in the specified playlist that is still available. A full\n  * seekable implementation for live streams would need to offset\n  * these values by the duration of content that has expired from the\n  * stream.\n  *\n  * @param {Object} playlist a media playlist object\n  * dropped off the front of the playlist in a live scenario\n  * @param {number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @param {number} liveEdgePadding how far from the end of the playlist we should be in seconds.\n  *        Corresponds to suggestedPresentationDelay in DASH manifests.\n  * @return {TimeRanges} the periods of time that are valid targets\n  * for seeking\n  */\n\n\nvar seekable = function seekable(playlist, expired, liveEdgePadding) {\n  var useSafeLiveEnd = true;\n  var seekableStart = expired || 0;\n  var seekableEnd = playlistEnd(playlist, expired, useSafeLiveEnd, liveEdgePadding);\n\n  if (seekableEnd === null) {\n    return createTimeRange();\n  }\n\n  return createTimeRange(seekableStart, seekableEnd);\n};\n/**\n * Determine the index and estimated starting time of the segment that\n * contains a specified playback position in a media playlist.\n *\n * @param {Object} options.playlist the media playlist to query\n * @param {number} options.currentTime The number of seconds since the earliest\n * possible position to determine the containing segment for\n * @param {number} options.startTime the time when the segment/part starts\n * @param {number} options.startingSegmentIndex the segment index to start looking at.\n * @param {number?} [options.startingPartIndex] the part index to look at within the segment.\n *\n * @return {Object} an object with partIndex, segmentIndex, and startTime.\n */\n\n\nvar getMediaInfoForTime = function getMediaInfoForTime(_ref4) {\n  var playlist = _ref4.playlist,\n      currentTime = _ref4.currentTime,\n      startingSegmentIndex = _ref4.startingSegmentIndex,\n      startingPartIndex = _ref4.startingPartIndex,\n      startTime = _ref4.startTime,\n      experimentalExactManifestTimings = _ref4.experimentalExactManifestTimings;\n  var time = currentTime - startTime;\n  var partsAndSegments = getPartsAndSegments(playlist);\n  var startIndex = 0;\n\n  for (var i = 0; i < partsAndSegments.length; i++) {\n    var partAndSegment = partsAndSegments[i];\n\n    if (startingSegmentIndex !== partAndSegment.segmentIndex) {\n      continue;\n    } // skip this if part index does not match.\n\n\n    if (typeof startingPartIndex === 'number' && typeof partAndSegment.partIndex === 'number' && startingPartIndex !== partAndSegment.partIndex) {\n      continue;\n    }\n\n    startIndex = i;\n    break;\n  }\n\n  if (time < 0) {\n    // Walk backward from startIndex in the playlist, adding durations\n    // until we find a segment that contains `time` and return it\n    if (startIndex > 0) {\n      for (var _i2 = startIndex - 1; _i2 >= 0; _i2--) {\n        var _partAndSegment = partsAndSegments[_i2];\n        time += _partAndSegment.duration;\n\n        if (experimentalExactManifestTimings) {\n          if (time < 0) {\n            continue;\n          }\n        } else if (time + TIME_FUDGE_FACTOR <= 0) {\n          continue;\n        }\n\n        return {\n          partIndex: _partAndSegment.partIndex,\n          segmentIndex: _partAndSegment.segmentIndex,\n          startTime: startTime - sumDurations({\n            defaultDuration: playlist.targetDuration,\n            durationList: partsAndSegments,\n            startIndex: startIndex,\n            endIndex: _i2\n          })\n        };\n      }\n    } // We were unable to find a good segment within the playlist\n    // so select the first segment\n\n\n    return {\n      partIndex: partsAndSegments[0] && partsAndSegments[0].partIndex || null,\n      segmentIndex: partsAndSegments[0] && partsAndSegments[0].segmentIndex || 0,\n      startTime: currentTime\n    };\n  } // When startIndex is negative, we first walk forward to first segment\n  // adding target durations. If we \"run out of time\" before getting to\n  // the first segment, return the first segment\n\n\n  if (startIndex < 0) {\n    for (var _i3 = startIndex; _i3 < 0; _i3++) {\n      time -= playlist.targetDuration;\n\n      if (time < 0) {\n        return {\n          partIndex: partsAndSegments[0] && partsAndSegments[0].partIndex || null,\n          segmentIndex: partsAndSegments[0] && partsAndSegments[0].segmentIndex || 0,\n          startTime: currentTime\n        };\n      }\n    }\n\n    startIndex = 0;\n  } // Walk forward from startIndex in the playlist, subtracting durations\n  // until we find a segment that contains `time` and return it\n\n\n  for (var _i4 = startIndex; _i4 < partsAndSegments.length; _i4++) {\n    var _partAndSegment2 = partsAndSegments[_i4];\n    time -= _partAndSegment2.duration;\n\n    if (experimentalExactManifestTimings) {\n      if (time > 0) {\n        continue;\n      }\n    } else if (time - TIME_FUDGE_FACTOR >= 0) {\n      continue;\n    }\n\n    return {\n      partIndex: _partAndSegment2.partIndex,\n      segmentIndex: _partAndSegment2.segmentIndex,\n      startTime: startTime + sumDurations({\n        defaultDuration: playlist.targetDuration,\n        durationList: partsAndSegments,\n        startIndex: startIndex,\n        endIndex: _i4\n      })\n    };\n  } // We are out of possible candidates so load the last one...\n\n\n  return {\n    segmentIndex: partsAndSegments[partsAndSegments.length - 1].segmentIndex,\n    partIndex: partsAndSegments[partsAndSegments.length - 1].partIndex,\n    startTime: currentTime\n  };\n};\n/**\n * Check whether the playlist is blacklisted or not.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is blacklisted or not\n * @function isBlacklisted\n */\n\n\nvar isBlacklisted = function isBlacklisted(playlist) {\n  return playlist.excludeUntil && playlist.excludeUntil > Date.now();\n};\n/**\n * Check whether the playlist is compatible with current playback configuration or has\n * been blacklisted permanently for being incompatible.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is incompatible or not\n * @function isIncompatible\n */\n\n\nvar isIncompatible = function isIncompatible(playlist) {\n  return playlist.excludeUntil && playlist.excludeUntil === Infinity;\n};\n/**\n * Check whether the playlist is enabled or not.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is enabled or not\n * @function isEnabled\n */\n\n\nvar isEnabled = function isEnabled(playlist) {\n  var blacklisted = isBlacklisted(playlist);\n  return !playlist.disabled && !blacklisted;\n};\n/**\n * Check whether the playlist has been manually disabled through the representations api.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is disabled manually or not\n * @function isDisabled\n */\n\n\nvar isDisabled = function isDisabled(playlist) {\n  return playlist.disabled;\n};\n/**\n * Returns whether the current playlist is an AES encrypted HLS stream\n *\n * @return {boolean} true if it's an AES encrypted HLS stream\n */\n\n\nvar isAes = function isAes(media) {\n  for (var i = 0; i < media.segments.length; i++) {\n    if (media.segments[i].key) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * Checks if the playlist has a value for the specified attribute\n *\n * @param {string} attr\n *        Attribute to check for\n * @param {Object} playlist\n *        The media playlist object\n * @return {boolean}\n *         Whether the playlist contains a value for the attribute or not\n * @function hasAttribute\n */\n\n\nvar hasAttribute = function hasAttribute(attr, playlist) {\n  return playlist.attributes && playlist.attributes[attr];\n};\n/**\n * Estimates the time required to complete a segment download from the specified playlist\n *\n * @param {number} segmentDuration\n *        Duration of requested segment\n * @param {number} bandwidth\n *        Current measured bandwidth of the player\n * @param {Object} playlist\n *        The media playlist object\n * @param {number=} bytesReceived\n *        Number of bytes already received for the request. Defaults to 0\n * @return {number|NaN}\n *         The estimated time to request the segment. NaN if bandwidth information for\n *         the given playlist is unavailable\n * @function estimateSegmentRequestTime\n */\n\n\nvar estimateSegmentRequestTime = function estimateSegmentRequestTime(segmentDuration, bandwidth, playlist, bytesReceived) {\n  if (bytesReceived === void 0) {\n    bytesReceived = 0;\n  }\n\n  if (!hasAttribute('BANDWIDTH', playlist)) {\n    return NaN;\n  }\n\n  var size = segmentDuration * playlist.attributes.BANDWIDTH;\n  return (size - bytesReceived * 8) / bandwidth;\n};\n/*\n * Returns whether the current playlist is the lowest rendition\n *\n * @return {Boolean} true if on lowest rendition\n */\n\n\nvar isLowestEnabledRendition = function isLowestEnabledRendition(master, media) {\n  if (master.playlists.length === 1) {\n    return true;\n  }\n\n  var currentBandwidth = media.attributes.BANDWIDTH || Number.MAX_VALUE;\n  return master.playlists.filter(function (playlist) {\n    if (!isEnabled(playlist)) {\n      return false;\n    }\n\n    return (playlist.attributes.BANDWIDTH || 0) < currentBandwidth;\n  }).length === 0;\n};\n\nvar playlistMatch = function playlistMatch(a, b) {\n  // both playlits are null\n  // or only one playlist is non-null\n  // no match\n  if (!a && !b || !a && b || a && !b) {\n    return false;\n  } // playlist objects are the same, match\n\n\n  if (a === b) {\n    return true;\n  } // first try to use id as it should be the most\n  // accurate\n\n\n  if (a.id && b.id && a.id === b.id) {\n    return true;\n  } // next try to use reslovedUri as it should be the\n  // second most accurate.\n\n\n  if (a.resolvedUri && b.resolvedUri && a.resolvedUri === b.resolvedUri) {\n    return true;\n  } // finally try to use uri as it should be accurate\n  // but might miss a few cases for relative uris\n\n\n  if (a.uri && b.uri && a.uri === b.uri) {\n    return true;\n  }\n\n  return false;\n};\n\nvar someAudioVariant = function someAudioVariant(master, callback) {\n  var AUDIO = master && master.mediaGroups && master.mediaGroups.AUDIO || {};\n  var found = false;\n\n  for (var groupName in AUDIO) {\n    for (var label in AUDIO[groupName]) {\n      found = callback(AUDIO[groupName][label]);\n\n      if (found) {\n        break;\n      }\n    }\n\n    if (found) {\n      break;\n    }\n  }\n\n  return !!found;\n};\n\nvar isAudioOnly = function isAudioOnly(master) {\n  // we are audio only if we have no main playlists but do\n  // have media group playlists.\n  if (!master || !master.playlists || !master.playlists.length) {\n    // without audio variants or playlists this\n    // is not an audio only master.\n    var found = someAudioVariant(master, function (variant) {\n      return variant.playlists && variant.playlists.length || variant.uri;\n    });\n    return found;\n  } // if every playlist has only an audio codec it is audio only\n\n\n  var _loop = function _loop(i) {\n    var playlist = master.playlists[i];\n    var CODECS = playlist.attributes && playlist.attributes.CODECS; // all codecs are audio, this is an audio playlist.\n\n    if (CODECS && CODECS.split(',').every(function (c) {\n      return isAudioCodec(c);\n    })) {\n      return \"continue\";\n    } // playlist is in an audio group it is audio only\n\n\n    var found = someAudioVariant(master, function (variant) {\n      return playlistMatch(playlist, variant);\n    });\n\n    if (found) {\n      return \"continue\";\n    } // if we make it here this playlist isn't audio and we\n    // are not audio only\n\n\n    return {\n      v: false\n    };\n  };\n\n  for (var i = 0; i < master.playlists.length; i++) {\n    var _ret = _loop(i);\n\n    if (_ret === \"continue\") continue;\n    if (_typeof(_ret) === \"object\") return _ret.v;\n  } // if we make it past every playlist without returning, then\n  // this is an audio only playlist.\n\n\n  return true;\n}; // exports\n\n\nvar Playlist = {\n  liveEdgeDelay: liveEdgeDelay,\n  duration: duration,\n  seekable: seekable,\n  getMediaInfoForTime: getMediaInfoForTime,\n  isEnabled: isEnabled,\n  isDisabled: isDisabled,\n  isBlacklisted: isBlacklisted,\n  isIncompatible: isIncompatible,\n  playlistEnd: playlistEnd,\n  isAes: isAes,\n  hasAttribute: hasAttribute,\n  estimateSegmentRequestTime: estimateSegmentRequestTime,\n  isLowestEnabledRendition: isLowestEnabledRendition,\n  isAudioOnly: isAudioOnly,\n  playlistMatch: playlistMatch,\n  segmentDurationWithParts: segmentDurationWithParts\n};\nvar log = videojs.log;\n\nvar createPlaylistID = function createPlaylistID(index, uri) {\n  return index + \"-\" + uri;\n};\n/**\n * Parses a given m3u8 playlist\n *\n * @param {Function} [onwarn]\n *        a function to call when the parser triggers a warning event.\n * @param {Function} [oninfo]\n *        a function to call when the parser triggers an info event.\n * @param {string} manifestString\n *        The downloaded manifest string\n * @param {Object[]} [customTagParsers]\n *        An array of custom tag parsers for the m3u8-parser instance\n * @param {Object[]} [customTagMappers]\n *        An array of custom tag mappers for the m3u8-parser instance\n * @param {boolean} [experimentalLLHLS=false]\n *        Whether to keep ll-hls features in the manifest after parsing.\n * @return {Object}\n *         The manifest object\n */\n\n\nvar parseManifest = function parseManifest(_ref) {\n  var onwarn = _ref.onwarn,\n      oninfo = _ref.oninfo,\n      manifestString = _ref.manifestString,\n      _ref$customTagParsers = _ref.customTagParsers,\n      customTagParsers = _ref$customTagParsers === void 0 ? [] : _ref$customTagParsers,\n      _ref$customTagMappers = _ref.customTagMappers,\n      customTagMappers = _ref$customTagMappers === void 0 ? [] : _ref$customTagMappers,\n      experimentalLLHLS = _ref.experimentalLLHLS;\n  var parser = new Parser();\n\n  if (onwarn) {\n    parser.on('warn', onwarn);\n  }\n\n  if (oninfo) {\n    parser.on('info', oninfo);\n  }\n\n  customTagParsers.forEach(function (customParser) {\n    return parser.addParser(customParser);\n  });\n  customTagMappers.forEach(function (mapper) {\n    return parser.addTagMapper(mapper);\n  });\n  parser.push(manifestString);\n  parser.end();\n  var manifest = parser.manifest; // remove llhls features from the parsed manifest\n  // if we don't want llhls support.\n\n  if (!experimentalLLHLS) {\n    ['preloadSegment', 'skip', 'serverControl', 'renditionReports', 'partInf', 'partTargetDuration'].forEach(function (k) {\n      if (manifest.hasOwnProperty(k)) {\n        delete manifest[k];\n      }\n    });\n\n    if (manifest.segments) {\n      manifest.segments.forEach(function (segment) {\n        ['parts', 'preloadHints'].forEach(function (k) {\n          if (segment.hasOwnProperty(k)) {\n            delete segment[k];\n          }\n        });\n      });\n    }\n  }\n\n  if (!manifest.targetDuration) {\n    var targetDuration = 10;\n\n    if (manifest.segments && manifest.segments.length) {\n      targetDuration = manifest.segments.reduce(function (acc, s) {\n        return Math.max(acc, s.duration);\n      }, 0);\n    }\n\n    if (onwarn) {\n      onwarn(\"manifest has no targetDuration defaulting to \" + targetDuration);\n    }\n\n    manifest.targetDuration = targetDuration;\n  }\n\n  var parts = getLastParts(manifest);\n\n  if (parts.length && !manifest.partTargetDuration) {\n    var partTargetDuration = parts.reduce(function (acc, p) {\n      return Math.max(acc, p.duration);\n    }, 0);\n\n    if (onwarn) {\n      onwarn(\"manifest has no partTargetDuration defaulting to \" + partTargetDuration);\n      log.error('LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.');\n    }\n\n    manifest.partTargetDuration = partTargetDuration;\n  }\n\n  return manifest;\n};\n/**\n * Loops through all supported media groups in master and calls the provided\n * callback for each group\n *\n * @param {Object} master\n *        The parsed master manifest object\n * @param {Function} callback\n *        Callback to call for each media group\n */\n\n\nvar forEachMediaGroup = function forEachMediaGroup(master, callback) {\n  if (!master.mediaGroups) {\n    return;\n  }\n\n  ['AUDIO', 'SUBTITLES'].forEach(function (mediaType) {\n    if (!master.mediaGroups[mediaType]) {\n      return;\n    }\n\n    for (var groupKey in master.mediaGroups[mediaType]) {\n      for (var labelKey in master.mediaGroups[mediaType][groupKey]) {\n        var mediaProperties = master.mediaGroups[mediaType][groupKey][labelKey];\n        callback(mediaProperties, mediaType, groupKey, labelKey);\n      }\n    }\n  });\n};\n/**\n * Adds properties and attributes to the playlist to keep consistent functionality for\n * playlists throughout VHS.\n *\n * @param {Object} config\n *        Arguments object\n * @param {Object} config.playlist\n *        The media playlist\n * @param {string} [config.uri]\n *        The uri to the media playlist (if media playlist is not from within a master\n *        playlist)\n * @param {string} id\n *        ID to use for the playlist\n */\n\n\nvar setupMediaPlaylist = function setupMediaPlaylist(_ref2) {\n  var playlist = _ref2.playlist,\n      uri = _ref2.uri,\n      id = _ref2.id;\n  playlist.id = id;\n  playlist.playlistErrors_ = 0;\n\n  if (uri) {\n    // For media playlists, m3u8-parser does not have access to a URI, as HLS media\n    // playlists do not contain their own source URI, but one is needed for consistency in\n    // VHS.\n    playlist.uri = uri;\n  } // For HLS master playlists, even though certain attributes MUST be defined, the\n  // stream may still be played without them.\n  // For HLS media playlists, m3u8-parser does not attach an attributes object to the\n  // manifest.\n  //\n  // To avoid undefined reference errors through the project, and make the code easier\n  // to write/read, add an empty attributes object for these cases.\n\n\n  playlist.attributes = playlist.attributes || {};\n};\n/**\n * Adds ID, resolvedUri, and attributes properties to each playlist of the master, where\n * necessary. In addition, creates playlist IDs for each playlist and adds playlist ID to\n * playlist references to the playlists array.\n *\n * @param {Object} master\n *        The master playlist\n */\n\n\nvar setupMediaPlaylists = function setupMediaPlaylists(master) {\n  var i = master.playlists.length;\n\n  while (i--) {\n    var playlist = master.playlists[i];\n    setupMediaPlaylist({\n      playlist: playlist,\n      id: createPlaylistID(i, playlist.uri)\n    });\n    playlist.resolvedUri = resolveUrl(master.uri, playlist.uri);\n    master.playlists[playlist.id] = playlist; // URI reference added for backwards compatibility\n\n    master.playlists[playlist.uri] = playlist; // Although the spec states an #EXT-X-STREAM-INF tag MUST have a BANDWIDTH attribute,\n    // the stream can be played without it. Although an attributes property may have been\n    // added to the playlist to prevent undefined references, issue a warning to fix the\n    // manifest.\n\n    if (!playlist.attributes.BANDWIDTH) {\n      log.warn('Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.');\n    }\n  }\n};\n/**\n * Adds resolvedUri properties to each media group.\n *\n * @param {Object} master\n *        The master playlist\n */\n\n\nvar resolveMediaGroupUris = function resolveMediaGroupUris(master) {\n  forEachMediaGroup(master, function (properties) {\n    if (properties.uri) {\n      properties.resolvedUri = resolveUrl(master.uri, properties.uri);\n    }\n  });\n};\n/**\n * Creates a master playlist wrapper to insert a sole media playlist into.\n *\n * @param {Object} media\n *        Media playlist\n * @param {string} uri\n *        The media URI\n *\n * @return {Object}\n *         Master playlist\n */\n\n\nvar masterForMedia = function masterForMedia(media, uri) {\n  var id = createPlaylistID(0, uri);\n  var master = {\n    mediaGroups: {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    },\n    uri: window$1.location.href,\n    resolvedUri: window$1.location.href,\n    playlists: [{\n      uri: uri,\n      id: id,\n      resolvedUri: uri,\n      // m3u8-parser does not attach an attributes property to media playlists so make\n      // sure that the property is attached to avoid undefined reference errors\n      attributes: {}\n    }]\n  }; // set up ID reference\n\n  master.playlists[id] = master.playlists[0]; // URI reference added for backwards compatibility\n\n  master.playlists[uri] = master.playlists[0];\n  return master;\n};\n/**\n * Does an in-place update of the master manifest to add updated playlist URI references\n * as well as other properties needed by VHS that aren't included by the parser.\n *\n * @param {Object} master\n *        Master manifest object\n * @param {string} uri\n *        The source URI\n */\n\n\nvar addPropertiesToMaster = function addPropertiesToMaster(master, uri) {\n  master.uri = uri;\n\n  for (var i = 0; i < master.playlists.length; i++) {\n    if (!master.playlists[i].uri) {\n      // Set up phony URIs for the playlists since playlists are referenced by their URIs\n      // throughout VHS, but some formats (e.g., DASH) don't have external URIs\n      // TODO: consider adding dummy URIs in mpd-parser\n      var phonyUri = \"placeholder-uri-\" + i;\n      master.playlists[i].uri = phonyUri;\n    }\n  }\n\n  var audioOnlyMaster = isAudioOnly(master);\n  forEachMediaGroup(master, function (properties, mediaType, groupKey, labelKey) {\n    var groupId = \"placeholder-uri-\" + mediaType + \"-\" + groupKey + \"-\" + labelKey; // add a playlist array under properties\n\n    if (!properties.playlists || !properties.playlists.length) {\n      // If the manifest is audio only and this media group does not have a uri, check\n      // if the media group is located in the main list of playlists. If it is, don't add\n      // placeholder properties as it shouldn't be considered an alternate audio track.\n      if (audioOnlyMaster && mediaType === 'AUDIO' && !properties.uri) {\n        for (var _i = 0; _i < master.playlists.length; _i++) {\n          var p = master.playlists[_i];\n\n          if (p.attributes && p.attributes.AUDIO && p.attributes.AUDIO === groupKey) {\n            return;\n          }\n        }\n      }\n\n      properties.playlists = [_extends({}, properties)];\n    }\n\n    properties.playlists.forEach(function (p, i) {\n      var id = createPlaylistID(i, groupId);\n\n      if (p.uri) {\n        p.resolvedUri = p.resolvedUri || resolveUrl(master.uri, p.uri);\n      } else {\n        // DEPRECATED, this has been added to prevent a breaking change.\n        // previously we only ever had a single media group playlist, so\n        // we mark the first playlist uri without prepending the index as we used to\n        // ideally we would do all of the playlists the same way.\n        p.uri = i === 0 ? groupId : id; // don't resolve a placeholder uri to an absolute url, just use\n        // the placeholder again\n\n        p.resolvedUri = p.uri;\n      }\n\n      p.id = p.id || id; // add an empty attributes object, all playlists are\n      // expected to have this.\n\n      p.attributes = p.attributes || {}; // setup ID and URI references (URI for backwards compatibility)\n\n      master.playlists[p.id] = p;\n      master.playlists[p.uri] = p;\n    });\n  });\n  setupMediaPlaylists(master);\n  resolveMediaGroupUris(master);\n};\n\nvar mergeOptions$2 = videojs.mergeOptions,\n    EventTarget$1 = videojs.EventTarget;\n\nvar addLLHLSQueryDirectives = function addLLHLSQueryDirectives(uri, media) {\n  if (media.endList || !media.serverControl) {\n    return uri;\n  }\n\n  var parameters = {};\n\n  if (media.serverControl.canBlockReload) {\n    var preloadSegment = media.preloadSegment; // next msn is a zero based value, length is not.\n\n    var nextMSN = media.mediaSequence + media.segments.length; // If preload segment has parts then it is likely\n    // that we are going to request a part of that preload segment.\n    // the logic below is used to determine that.\n\n    if (preloadSegment) {\n      var parts = preloadSegment.parts || []; // _HLS_part is a zero based index\n\n      var nextPart = getKnownPartCount(media) - 1; // if nextPart is > -1 and not equal to just the\n      // length of parts, then we know we had part preload hints\n      // and we need to add the _HLS_part= query\n\n      if (nextPart > -1 && nextPart !== parts.length - 1) {\n        // add existing parts to our preload hints\n        // eslint-disable-next-line\n        parameters._HLS_part = nextPart;\n      } // this if statement makes sure that we request the msn\n      // of the preload segment if:\n      // 1. the preload segment had parts (and was not yet a full segment)\n      //    but was added to our segments array\n      // 2. the preload segment had preload hints for parts that are not in\n      //    the manifest yet.\n      // in all other cases we want the segment after the preload segment\n      // which will be given by using media.segments.length because it is 1 based\n      // rather than 0 based.\n\n\n      if (nextPart > -1 || parts.length) {\n        nextMSN--;\n      }\n    } // add _HLS_msn= in front of any _HLS_part query\n    // eslint-disable-next-line\n\n\n    parameters._HLS_msn = nextMSN;\n  }\n\n  if (media.serverControl && media.serverControl.canSkipUntil) {\n    // add _HLS_skip= infront of all other queries.\n    // eslint-disable-next-line\n    parameters._HLS_skip = media.serverControl.canSkipDateranges ? 'v2' : 'YES';\n  }\n\n  if (Object.keys(parameters).length) {\n    var parsedUri = new window$1.URL(uri);\n    ['_HLS_skip', '_HLS_msn', '_HLS_part'].forEach(function (name) {\n      if (!parameters.hasOwnProperty(name)) {\n        return;\n      }\n\n      parsedUri.searchParams.set(name, parameters[name]);\n    });\n    uri = parsedUri.toString();\n  }\n\n  return uri;\n};\n/**\n * Returns a new segment object with properties and\n * the parts array merged.\n *\n * @param {Object} a the old segment\n * @param {Object} b the new segment\n *\n * @return {Object} the merged segment\n */\n\n\nvar updateSegment = function updateSegment(a, b) {\n  if (!a) {\n    return b;\n  }\n\n  var result = mergeOptions$2(a, b); // if only the old segment has preload hints\n  // and the new one does not, remove preload hints.\n\n  if (a.preloadHints && !b.preloadHints) {\n    delete result.preloadHints;\n  } // if only the old segment has parts\n  // then the parts are no longer valid\n\n\n  if (a.parts && !b.parts) {\n    delete result.parts; // if both segments have parts\n    // copy part propeties from the old segment\n    // to the new one.\n  } else if (a.parts && b.parts) {\n    for (var i = 0; i < b.parts.length; i++) {\n      if (a.parts && a.parts[i]) {\n        result.parts[i] = mergeOptions$2(a.parts[i], b.parts[i]);\n      }\n    }\n  } // set skipped to false for segments that have\n  // have had information merged from the old segment.\n\n\n  if (!a.skipped && b.skipped) {\n    result.skipped = false;\n  } // set preload to false for segments that have\n  // had information added in the new segment.\n\n\n  if (a.preload && !b.preload) {\n    result.preload = false;\n  }\n\n  return result;\n};\n/**\n * Returns a new array of segments that is the result of merging\n * properties from an older list of segments onto an updated\n * list. No properties on the updated playlist will be ovewritten.\n *\n * @param {Array} original the outdated list of segments\n * @param {Array} update the updated list of segments\n * @param {number=} offset the index of the first update\n * segment in the original segment list. For non-live playlists,\n * this should always be zero and does not need to be\n * specified. For live playlists, it should be the difference\n * between the media sequence numbers in the original and updated\n * playlists.\n * @return {Array} a list of merged segment objects\n */\n\n\nvar updateSegments = function updateSegments(original, update, offset) {\n  var oldSegments = original.slice();\n  var newSegments = update.slice();\n  offset = offset || 0;\n  var result = [];\n  var currentMap;\n\n  for (var newIndex = 0; newIndex < newSegments.length; newIndex++) {\n    var oldSegment = oldSegments[newIndex + offset];\n    var newSegment = newSegments[newIndex];\n\n    if (oldSegment) {\n      currentMap = oldSegment.map || currentMap;\n      result.push(updateSegment(oldSegment, newSegment));\n    } else {\n      // carry over map to new segment if it is missing\n      if (currentMap && !newSegment.map) {\n        newSegment.map = currentMap;\n      }\n\n      result.push(newSegment);\n    }\n  }\n\n  return result;\n};\n\nvar resolveSegmentUris = function resolveSegmentUris(segment, baseUri) {\n  // preloadSegment will not have a uri at all\n  // as the segment isn't actually in the manifest yet, only parts\n  if (!segment.resolvedUri && segment.uri) {\n    segment.resolvedUri = resolveUrl(baseUri, segment.uri);\n  }\n\n  if (segment.key && !segment.key.resolvedUri) {\n    segment.key.resolvedUri = resolveUrl(baseUri, segment.key.uri);\n  }\n\n  if (segment.map && !segment.map.resolvedUri) {\n    segment.map.resolvedUri = resolveUrl(baseUri, segment.map.uri);\n  }\n\n  if (segment.map && segment.map.key && !segment.map.key.resolvedUri) {\n    segment.map.key.resolvedUri = resolveUrl(baseUri, segment.map.key.uri);\n  }\n\n  if (segment.parts && segment.parts.length) {\n    segment.parts.forEach(function (p) {\n      if (p.resolvedUri) {\n        return;\n      }\n\n      p.resolvedUri = resolveUrl(baseUri, p.uri);\n    });\n  }\n\n  if (segment.preloadHints && segment.preloadHints.length) {\n    segment.preloadHints.forEach(function (p) {\n      if (p.resolvedUri) {\n        return;\n      }\n\n      p.resolvedUri = resolveUrl(baseUri, p.uri);\n    });\n  }\n};\n\nvar getAllSegments = function getAllSegments(media) {\n  var segments = media.segments || [];\n  var preloadSegment = media.preloadSegment; // a preloadSegment with only preloadHints is not currently\n  // a usable segment, only include a preloadSegment that has\n  // parts.\n\n  if (preloadSegment && preloadSegment.parts && preloadSegment.parts.length) {\n    // if preloadHints has a MAP that means that the\n    // init segment is going to change. We cannot use any of the parts\n    // from this preload segment.\n    if (preloadSegment.preloadHints) {\n      for (var i = 0; i < preloadSegment.preloadHints.length; i++) {\n        if (preloadSegment.preloadHints[i].type === 'MAP') {\n          return segments;\n        }\n      }\n    } // set the duration for our preload segment to target duration.\n\n\n    preloadSegment.duration = media.targetDuration;\n    preloadSegment.preload = true;\n    segments.push(preloadSegment);\n  }\n\n  return segments;\n}; // consider the playlist unchanged if the playlist object is the same or\n// the number of segments is equal, the media sequence number is unchanged,\n// and this playlist hasn't become the end of the playlist\n\n\nvar isPlaylistUnchanged = function isPlaylistUnchanged(a, b) {\n  return a === b || a.segments && b.segments && a.segments.length === b.segments.length && a.endList === b.endList && a.mediaSequence === b.mediaSequence && a.preloadSegment === b.preloadSegment;\n};\n/**\n  * Returns a new master playlist that is the result of merging an\n  * updated media playlist into the original version. If the\n  * updated media playlist does not match any of the playlist\n  * entries in the original master playlist, null is returned.\n  *\n  * @param {Object} master a parsed master M3U8 object\n  * @param {Object} media a parsed media M3U8 object\n  * @return {Object} a new object that represents the original\n  * master playlist with the updated media playlist merged in, or\n  * null if the merge produced no change.\n  */\n\n\nvar updateMaster$1 = function updateMaster(master, newMedia, unchangedCheck) {\n  if (unchangedCheck === void 0) {\n    unchangedCheck = isPlaylistUnchanged;\n  }\n\n  var result = mergeOptions$2(master, {});\n  var oldMedia = result.playlists[newMedia.id];\n\n  if (!oldMedia) {\n    return null;\n  }\n\n  if (unchangedCheck(oldMedia, newMedia)) {\n    return null;\n  }\n\n  newMedia.segments = getAllSegments(newMedia);\n  var mergedPlaylist = mergeOptions$2(oldMedia, newMedia); // always use the new media's preload segment\n\n  if (mergedPlaylist.preloadSegment && !newMedia.preloadSegment) {\n    delete mergedPlaylist.preloadSegment;\n  } // if the update could overlap existing segment information, merge the two segment lists\n\n\n  if (oldMedia.segments) {\n    if (newMedia.skip) {\n      newMedia.segments = newMedia.segments || []; // add back in objects for skipped segments, so that we merge\n      // old properties into the new segments\n\n      for (var i = 0; i < newMedia.skip.skippedSegments; i++) {\n        newMedia.segments.unshift({\n          skipped: true\n        });\n      }\n    }\n\n    mergedPlaylist.segments = updateSegments(oldMedia.segments, newMedia.segments, newMedia.mediaSequence - oldMedia.mediaSequence);\n  } // resolve any segment URIs to prevent us from having to do it later\n\n\n  mergedPlaylist.segments.forEach(function (segment) {\n    resolveSegmentUris(segment, mergedPlaylist.resolvedUri);\n  }); // TODO Right now in the playlists array there are two references to each playlist, one\n  // that is referenced by index, and one by URI. The index reference may no longer be\n  // necessary.\n\n  for (var _i = 0; _i < result.playlists.length; _i++) {\n    if (result.playlists[_i].id === newMedia.id) {\n      result.playlists[_i] = mergedPlaylist;\n    }\n  }\n\n  result.playlists[newMedia.id] = mergedPlaylist; // URI reference added for backwards compatibility\n\n  result.playlists[newMedia.uri] = mergedPlaylist; // update media group playlist references.\n\n  forEachMediaGroup(master, function (properties, mediaType, groupKey, labelKey) {\n    if (!properties.playlists) {\n      return;\n    }\n\n    for (var _i2 = 0; _i2 < properties.playlists.length; _i2++) {\n      if (newMedia.id === properties.playlists[_i2].id) {\n        properties.playlists[_i2] = newMedia;\n      }\n    }\n  });\n  return result;\n};\n/**\n * Calculates the time to wait before refreshing a live playlist\n *\n * @param {Object} media\n *        The current media\n * @param {boolean} update\n *        True if there were any updates from the last refresh, false otherwise\n * @return {number}\n *         The time in ms to wait before refreshing the live playlist\n */\n\n\nvar refreshDelay = function refreshDelay(media, update) {\n  var segments = media.segments || [];\n  var lastSegment = segments[segments.length - 1];\n  var lastPart = lastSegment && lastSegment.parts && lastSegment.parts[lastSegment.parts.length - 1];\n  var lastDuration = lastPart && lastPart.duration || lastSegment && lastSegment.duration;\n\n  if (update && lastDuration) {\n    return lastDuration * 1000;\n  } // if the playlist is unchanged since the last reload or last segment duration\n  // cannot be determined, try again after half the target duration\n\n\n  return (media.partTargetDuration || media.targetDuration || 10) * 500;\n};\n/**\n * Load a playlist from a remote location\n *\n * @class PlaylistLoader\n * @extends Stream\n * @param {string|Object} src url or object of manifest\n * @param {boolean} withCredentials the withCredentials xhr option\n * @class\n */\n\n\nvar PlaylistLoader = /*#__PURE__*/function (_EventTarget) {\n  _inheritsLoose(PlaylistLoader, _EventTarget);\n\n  function PlaylistLoader(src, vhs, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _EventTarget.call(this) || this;\n\n    if (!src) {\n      throw new Error('A non-empty playlist URL or object is required');\n    }\n\n    _this.logger_ = logger('PlaylistLoader');\n    var _options = options,\n        _options$withCredenti = _options.withCredentials,\n        withCredentials = _options$withCredenti === void 0 ? false : _options$withCredenti,\n        _options$handleManife = _options.handleManifestRedirects,\n        handleManifestRedirects = _options$handleManife === void 0 ? false : _options$handleManife;\n    _this.src = src;\n    _this.vhs_ = vhs;\n    _this.withCredentials = withCredentials;\n    _this.handleManifestRedirects = handleManifestRedirects;\n    var vhsOptions = vhs.options_;\n    _this.customTagParsers = vhsOptions && vhsOptions.customTagParsers || [];\n    _this.customTagMappers = vhsOptions && vhsOptions.customTagMappers || [];\n    _this.experimentalLLHLS = vhsOptions && vhsOptions.experimentalLLHLS || false; // force experimentalLLHLS for IE 11\n\n    if (videojs.browser.IE_VERSION) {\n      _this.experimentalLLHLS = false;\n    } // initialize the loader state\n\n\n    _this.state = 'HAVE_NOTHING'; // live playlist staleness timeout\n\n    _this.handleMediaupdatetimeout_ = _this.handleMediaupdatetimeout_.bind(_assertThisInitialized(_this));\n\n    _this.on('mediaupdatetimeout', _this.handleMediaupdatetimeout_);\n\n    return _this;\n  }\n\n  var _proto = PlaylistLoader.prototype;\n\n  _proto.handleMediaupdatetimeout_ = function handleMediaupdatetimeout_() {\n    var _this2 = this;\n\n    if (this.state !== 'HAVE_METADATA') {\n      // only refresh the media playlist if no other activity is going on\n      return;\n    }\n\n    var media = this.media();\n    var uri = resolveUrl(this.master.uri, media.uri);\n\n    if (this.experimentalLLHLS) {\n      uri = addLLHLSQueryDirectives(uri, media);\n    }\n\n    this.state = 'HAVE_CURRENT_METADATA';\n    this.request = this.vhs_.xhr({\n      uri: uri,\n      withCredentials: this.withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!_this2.request) {\n        return;\n      }\n\n      if (error) {\n        return _this2.playlistRequestError(_this2.request, _this2.media(), 'HAVE_METADATA');\n      }\n\n      _this2.haveMetadata({\n        playlistString: _this2.request.responseText,\n        url: _this2.media().uri,\n        id: _this2.media().id\n      });\n    });\n  };\n\n  _proto.playlistRequestError = function playlistRequestError(xhr, playlist, startingState) {\n    var uri = playlist.uri,\n        id = playlist.id; // any in-flight request is now finished\n\n    this.request = null;\n\n    if (startingState) {\n      this.state = startingState;\n    }\n\n    this.error = {\n      playlist: this.master.playlists[id],\n      status: xhr.status,\n      message: \"HLS playlist request error at URL: \" + uri + \".\",\n      responseText: xhr.responseText,\n      code: xhr.status >= 500 ? 4 : 2\n    };\n    this.trigger('error');\n  };\n\n  _proto.parseManifest_ = function parseManifest_(_ref) {\n    var _this3 = this;\n\n    var url = _ref.url,\n        manifestString = _ref.manifestString;\n    return parseManifest({\n      onwarn: function onwarn(_ref2) {\n        var message = _ref2.message;\n        return _this3.logger_(\"m3u8-parser warn for \" + url + \": \" + message);\n      },\n      oninfo: function oninfo(_ref3) {\n        var message = _ref3.message;\n        return _this3.logger_(\"m3u8-parser info for \" + url + \": \" + message);\n      },\n      manifestString: manifestString,\n      customTagParsers: this.customTagParsers,\n      customTagMappers: this.customTagMappers,\n      experimentalLLHLS: this.experimentalLLHLS\n    });\n  }\n  /**\n   * Update the playlist loader's state in response to a new or updated playlist.\n   *\n   * @param {string} [playlistString]\n   *        Playlist string (if playlistObject is not provided)\n   * @param {Object} [playlistObject]\n   *        Playlist object (if playlistString is not provided)\n   * @param {string} url\n   *        URL of playlist\n   * @param {string} id\n   *        ID to use for playlist\n   */\n  ;\n\n  _proto.haveMetadata = function haveMetadata(_ref4) {\n    var playlistString = _ref4.playlistString,\n        playlistObject = _ref4.playlistObject,\n        url = _ref4.url,\n        id = _ref4.id; // any in-flight request is now finished\n\n    this.request = null;\n    this.state = 'HAVE_METADATA';\n    var playlist = playlistObject || this.parseManifest_({\n      url: url,\n      manifestString: playlistString\n    });\n    playlist.lastRequest = Date.now();\n    setupMediaPlaylist({\n      playlist: playlist,\n      uri: url,\n      id: id\n    }); // merge this playlist into the master\n\n    var update = updateMaster$1(this.master, playlist);\n    this.targetDuration = playlist.partTargetDuration || playlist.targetDuration;\n    this.pendingMedia_ = null;\n\n    if (update) {\n      this.master = update;\n      this.media_ = this.master.playlists[id];\n    } else {\n      this.trigger('playlistunchanged');\n    }\n\n    this.updateMediaUpdateTimeout_(refreshDelay(this.media(), !!update));\n    this.trigger('loadedplaylist');\n  }\n  /**\n    * Abort any outstanding work and clean up.\n    */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.trigger('dispose');\n    this.stopRequest();\n    window$1.clearTimeout(this.mediaUpdateTimeout);\n    window$1.clearTimeout(this.finalRenditionTimeout);\n    this.off();\n  };\n\n  _proto.stopRequest = function stopRequest() {\n    if (this.request) {\n      var oldRequest = this.request;\n      this.request = null;\n      oldRequest.onreadystatechange = null;\n      oldRequest.abort();\n    }\n  }\n  /**\n    * When called without any arguments, returns the currently\n    * active media playlist. When called with a single argument,\n    * triggers the playlist loader to asynchronously switch to the\n    * specified media playlist. Calling this method while the\n    * loader is in the HAVE_NOTHING causes an error to be emitted\n    * but otherwise has no effect.\n    *\n    * @param {Object=} playlist the parsed media playlist\n    * object to switch to\n    * @param {boolean=} shouldDelay whether we should delay the request by half target duration\n    *\n    * @return {Playlist} the current loaded media\n    */\n  ;\n\n  _proto.media = function media(playlist, shouldDelay) {\n    var _this4 = this; // getter\n\n\n    if (!playlist) {\n      return this.media_;\n    } // setter\n\n\n    if (this.state === 'HAVE_NOTHING') {\n      throw new Error('Cannot switch media playlist from ' + this.state);\n    } // find the playlist object if the target playlist has been\n    // specified by URI\n\n\n    if (typeof playlist === 'string') {\n      if (!this.master.playlists[playlist]) {\n        throw new Error('Unknown playlist URI: ' + playlist);\n      }\n\n      playlist = this.master.playlists[playlist];\n    }\n\n    window$1.clearTimeout(this.finalRenditionTimeout);\n\n    if (shouldDelay) {\n      var delay = (playlist.partTargetDuration || playlist.targetDuration) / 2 * 1000 || 5 * 1000;\n      this.finalRenditionTimeout = window$1.setTimeout(this.media.bind(this, playlist, false), delay);\n      return;\n    }\n\n    var startingState = this.state;\n    var mediaChange = !this.media_ || playlist.id !== this.media_.id;\n    var masterPlaylistRef = this.master.playlists[playlist.id]; // switch to fully loaded playlists immediately\n\n    if (masterPlaylistRef && masterPlaylistRef.endList || // handle the case of a playlist object (e.g., if using vhs-json with a resolved\n    // media playlist or, for the case of demuxed audio, a resolved audio media group)\n    playlist.endList && playlist.segments.length) {\n      // abort outstanding playlist requests\n      if (this.request) {\n        this.request.onreadystatechange = null;\n        this.request.abort();\n        this.request = null;\n      }\n\n      this.state = 'HAVE_METADATA';\n      this.media_ = playlist; // trigger media change if the active media has been updated\n\n      if (mediaChange) {\n        this.trigger('mediachanging');\n\n        if (startingState === 'HAVE_MASTER') {\n          // The initial playlist was a master manifest, and the first media selected was\n          // also provided (in the form of a resolved playlist object) as part of the\n          // source object (rather than just a URL). Therefore, since the media playlist\n          // doesn't need to be requested, loadedmetadata won't trigger as part of the\n          // normal flow, and needs an explicit trigger here.\n          this.trigger('loadedmetadata');\n        } else {\n          this.trigger('mediachange');\n        }\n      }\n\n      return;\n    } // We update/set the timeout here so that live playlists\n    // that are not a media change will \"start\" the loader as expected.\n    // We expect that this function will start the media update timeout\n    // cycle again. This also prevents a playlist switch failure from\n    // causing us to stall during live.\n\n\n    this.updateMediaUpdateTimeout_(refreshDelay(playlist, true)); // switching to the active playlist is a no-op\n\n    if (!mediaChange) {\n      return;\n    }\n\n    this.state = 'SWITCHING_MEDIA'; // there is already an outstanding playlist request\n\n    if (this.request) {\n      if (playlist.resolvedUri === this.request.url) {\n        // requesting to switch to the same playlist multiple times\n        // has no effect after the first\n        return;\n      }\n\n      this.request.onreadystatechange = null;\n      this.request.abort();\n      this.request = null;\n    } // request the new playlist\n\n\n    if (this.media_) {\n      this.trigger('mediachanging');\n    }\n\n    this.pendingMedia_ = playlist;\n    this.request = this.vhs_.xhr({\n      uri: playlist.resolvedUri,\n      withCredentials: this.withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!_this4.request) {\n        return;\n      }\n\n      playlist.lastRequest = Date.now();\n      playlist.resolvedUri = resolveManifestRedirect(_this4.handleManifestRedirects, playlist.resolvedUri, req);\n\n      if (error) {\n        return _this4.playlistRequestError(_this4.request, playlist, startingState);\n      }\n\n      _this4.haveMetadata({\n        playlistString: req.responseText,\n        url: playlist.uri,\n        id: playlist.id\n      }); // fire loadedmetadata the first time a media playlist is loaded\n\n\n      if (startingState === 'HAVE_MASTER') {\n        _this4.trigger('loadedmetadata');\n      } else {\n        _this4.trigger('mediachange');\n      }\n    });\n  }\n  /**\n   * pause loading of the playlist\n   */\n  ;\n\n  _proto.pause = function pause() {\n    if (this.mediaUpdateTimeout) {\n      window$1.clearTimeout(this.mediaUpdateTimeout);\n      this.mediaUpdateTimeout = null;\n    }\n\n    this.stopRequest();\n\n    if (this.state === 'HAVE_NOTHING') {\n      // If we pause the loader before any data has been retrieved, its as if we never\n      // started, so reset to an unstarted state.\n      this.started = false;\n    } // Need to restore state now that no activity is happening\n\n\n    if (this.state === 'SWITCHING_MEDIA') {\n      // if the loader was in the process of switching media, it should either return to\n      // HAVE_MASTER or HAVE_METADATA depending on if the loader has loaded a media\n      // playlist yet. This is determined by the existence of loader.media_\n      if (this.media_) {\n        this.state = 'HAVE_METADATA';\n      } else {\n        this.state = 'HAVE_MASTER';\n      }\n    } else if (this.state === 'HAVE_CURRENT_METADATA') {\n      this.state = 'HAVE_METADATA';\n    }\n  }\n  /**\n   * start loading of the playlist\n   */\n  ;\n\n  _proto.load = function load(shouldDelay) {\n    var _this5 = this;\n\n    if (this.mediaUpdateTimeout) {\n      window$1.clearTimeout(this.mediaUpdateTimeout);\n      this.mediaUpdateTimeout = null;\n    }\n\n    var media = this.media();\n\n    if (shouldDelay) {\n      var delay = media ? (media.partTargetDuration || media.targetDuration) / 2 * 1000 : 5 * 1000;\n      this.mediaUpdateTimeout = window$1.setTimeout(function () {\n        _this5.mediaUpdateTimeout = null;\n\n        _this5.load();\n      }, delay);\n      return;\n    }\n\n    if (!this.started) {\n      this.start();\n      return;\n    }\n\n    if (media && !media.endList) {\n      this.trigger('mediaupdatetimeout');\n    } else {\n      this.trigger('loadedplaylist');\n    }\n  };\n\n  _proto.updateMediaUpdateTimeout_ = function updateMediaUpdateTimeout_(delay) {\n    var _this6 = this;\n\n    if (this.mediaUpdateTimeout) {\n      window$1.clearTimeout(this.mediaUpdateTimeout);\n      this.mediaUpdateTimeout = null;\n    } // we only have use mediaupdatetimeout for live playlists.\n\n\n    if (!this.media() || this.media().endList) {\n      return;\n    }\n\n    this.mediaUpdateTimeout = window$1.setTimeout(function () {\n      _this6.mediaUpdateTimeout = null;\n\n      _this6.trigger('mediaupdatetimeout');\n\n      _this6.updateMediaUpdateTimeout_(delay);\n    }, delay);\n  }\n  /**\n   * start loading of the playlist\n   */\n  ;\n\n  _proto.start = function start() {\n    var _this7 = this;\n\n    this.started = true;\n\n    if (_typeof(this.src) === 'object') {\n      // in the case of an entirely constructed manifest object (meaning there's no actual\n      // manifest on a server), default the uri to the page's href\n      if (!this.src.uri) {\n        this.src.uri = window$1.location.href;\n      } // resolvedUri is added on internally after the initial request. Since there's no\n      // request for pre-resolved manifests, add on resolvedUri here.\n\n\n      this.src.resolvedUri = this.src.uri; // Since a manifest object was passed in as the source (instead of a URL), the first\n      // request can be skipped (since the top level of the manifest, at a minimum, is\n      // already available as a parsed manifest object). However, if the manifest object\n      // represents a master playlist, some media playlists may need to be resolved before\n      // the starting segment list is available. Therefore, go directly to setup of the\n      // initial playlist, and let the normal flow continue from there.\n      //\n      // Note that the call to setup is asynchronous, as other sections of VHS may assume\n      // that the first request is asynchronous.\n\n      setTimeout(function () {\n        _this7.setupInitialPlaylist(_this7.src);\n      }, 0);\n      return;\n    } // request the specified URL\n\n\n    this.request = this.vhs_.xhr({\n      uri: this.src,\n      withCredentials: this.withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!_this7.request) {\n        return;\n      } // clear the loader's request reference\n\n\n      _this7.request = null;\n\n      if (error) {\n        _this7.error = {\n          status: req.status,\n          message: \"HLS playlist request error at URL: \" + _this7.src + \".\",\n          responseText: req.responseText,\n          // MEDIA_ERR_NETWORK\n          code: 2\n        };\n\n        if (_this7.state === 'HAVE_NOTHING') {\n          _this7.started = false;\n        }\n\n        return _this7.trigger('error');\n      }\n\n      _this7.src = resolveManifestRedirect(_this7.handleManifestRedirects, _this7.src, req);\n\n      var manifest = _this7.parseManifest_({\n        manifestString: req.responseText,\n        url: _this7.src\n      });\n\n      _this7.setupInitialPlaylist(manifest);\n    });\n  };\n\n  _proto.srcUri = function srcUri() {\n    return typeof this.src === 'string' ? this.src : this.src.uri;\n  }\n  /**\n   * Given a manifest object that's either a master or media playlist, trigger the proper\n   * events and set the state of the playlist loader.\n   *\n   * If the manifest object represents a master playlist, `loadedplaylist` will be\n   * triggered to allow listeners to select a playlist. If none is selected, the loader\n   * will default to the first one in the playlists array.\n   *\n   * If the manifest object represents a media playlist, `loadedplaylist` will be\n   * triggered followed by `loadedmetadata`, as the only available playlist is loaded.\n   *\n   * In the case of a media playlist, a master playlist object wrapper with one playlist\n   * will be created so that all logic can handle playlists in the same fashion (as an\n   * assumed manifest object schema).\n   *\n   * @param {Object} manifest\n   *        The parsed manifest object\n   */\n  ;\n\n  _proto.setupInitialPlaylist = function setupInitialPlaylist(manifest) {\n    this.state = 'HAVE_MASTER';\n\n    if (manifest.playlists) {\n      this.master = manifest;\n      addPropertiesToMaster(this.master, this.srcUri()); // If the initial master playlist has playlists wtih segments already resolved,\n      // then resolve URIs in advance, as they are usually done after a playlist request,\n      // which may not happen if the playlist is resolved.\n\n      manifest.playlists.forEach(function (playlist) {\n        playlist.segments = getAllSegments(playlist);\n        playlist.segments.forEach(function (segment) {\n          resolveSegmentUris(segment, playlist.resolvedUri);\n        });\n      });\n      this.trigger('loadedplaylist');\n\n      if (!this.request) {\n        // no media playlist was specifically selected so start\n        // from the first listed one\n        this.media(this.master.playlists[0]);\n      }\n\n      return;\n    } // In order to support media playlists passed in as vhs-json, the case where the uri\n    // is not provided as part of the manifest should be considered, and an appropriate\n    // default used.\n\n\n    var uri = this.srcUri() || window$1.location.href;\n    this.master = masterForMedia(manifest, uri);\n    this.haveMetadata({\n      playlistObject: manifest,\n      url: uri,\n      id: this.master.playlists[0].id\n    });\n    this.trigger('loadedmetadata');\n  };\n\n  return PlaylistLoader;\n}(EventTarget$1);\n/**\n * @file xhr.js\n */\n\n\nvar videojsXHR = videojs.xhr,\n    mergeOptions$1 = videojs.mergeOptions;\n\nvar callbackWrapper = function callbackWrapper(request, error, response, callback) {\n  var reqResponse = request.responseType === 'arraybuffer' ? request.response : request.responseText;\n\n  if (!error && reqResponse) {\n    request.responseTime = Date.now();\n    request.roundTripTime = request.responseTime - request.requestTime;\n    request.bytesReceived = reqResponse.byteLength || reqResponse.length;\n\n    if (!request.bandwidth) {\n      request.bandwidth = Math.floor(request.bytesReceived / request.roundTripTime * 8 * 1000);\n    }\n  }\n\n  if (response.headers) {\n    request.responseHeaders = response.headers;\n  } // videojs.xhr now uses a specific code on the error\n  // object to signal that a request has timed out instead\n  // of setting a boolean on the request object\n\n\n  if (error && error.code === 'ETIMEDOUT') {\n    request.timedout = true;\n  } // videojs.xhr no longer considers status codes outside of 200 and 0\n  // (for file uris) to be errors, but the old XHR did, so emulate that\n  // behavior. Status 206 may be used in response to byterange requests.\n\n\n  if (!error && !request.aborted && response.statusCode !== 200 && response.statusCode !== 206 && response.statusCode !== 0) {\n    error = new Error('XHR Failed with a response of: ' + (request && (reqResponse || request.responseText)));\n  }\n\n  callback(error, request);\n};\n\nvar xhrFactory = function xhrFactory() {\n  var xhr = function XhrFunction(options, callback) {\n    // Add a default timeout\n    options = mergeOptions$1({\n      timeout: 45e3\n    }, options); // Allow an optional user-specified function to modify the option\n    // object before we construct the xhr request\n\n    var beforeRequest = XhrFunction.beforeRequest || videojs.Vhs.xhr.beforeRequest;\n\n    if (beforeRequest && typeof beforeRequest === 'function') {\n      var newOptions = beforeRequest(options);\n\n      if (newOptions) {\n        options = newOptions;\n      }\n    } // Use the standard videojs.xhr() method unless `videojs.Vhs.xhr` has been overriden\n    // TODO: switch back to videojs.Vhs.xhr.name === 'XhrFunction' when we drop IE11\n\n\n    var xhrMethod = videojs.Vhs.xhr.original === true ? videojsXHR : videojs.Vhs.xhr;\n    var request = xhrMethod(options, function (error, response) {\n      return callbackWrapper(request, error, response, callback);\n    });\n    var originalAbort = request.abort;\n\n    request.abort = function () {\n      request.aborted = true;\n      return originalAbort.apply(request, arguments);\n    };\n\n    request.uri = options.uri;\n    request.requestTime = Date.now();\n    return request;\n  };\n\n  xhr.original = true;\n  return xhr;\n};\n/**\n * Turns segment byterange into a string suitable for use in\n * HTTP Range requests\n *\n * @param {Object} byterange - an object with two values defining the start and end\n *                             of a byte-range\n */\n\n\nvar byterangeStr = function byterangeStr(byterange) {\n  // `byterangeEnd` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  var byterangeEnd;\n  var byterangeStart = byterange.offset;\n\n  if (typeof byterange.offset === 'bigint' || typeof byterange.length === 'bigint') {\n    byterangeEnd = window$1.BigInt(byterange.offset) + window$1.BigInt(byterange.length) - window$1.BigInt(1);\n  } else {\n    byterangeEnd = byterange.offset + byterange.length - 1;\n  }\n\n  return 'bytes=' + byterangeStart + '-' + byterangeEnd;\n};\n/**\n * Defines headers for use in the xhr request for a particular segment.\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n */\n\n\nvar segmentXhrHeaders = function segmentXhrHeaders(segment) {\n  var headers = {};\n\n  if (segment.byterange) {\n    headers.Range = byterangeStr(segment.byterange);\n  }\n\n  return headers;\n};\n/**\n * @file bin-utils.js\n */\n\n/**\n * convert a TimeRange to text\n *\n * @param {TimeRange} range the timerange to use for conversion\n * @param {number} i the iterator on the range to convert\n * @return {string} the range in string format\n */\n\n\nvar textRange = function textRange(range, i) {\n  return range.start(i) + '-' + range.end(i);\n};\n/**\n * format a number as hex string\n *\n * @param {number} e The number\n * @param {number} i the iterator\n * @return {string} the hex formatted number as a string\n */\n\n\nvar formatHexString = function formatHexString(e, i) {\n  var value = e.toString(16);\n  return '00'.substring(0, 2 - value.length) + value + (i % 2 ? ' ' : '');\n};\n\nvar formatAsciiString = function formatAsciiString(e) {\n  if (e >= 0x20 && e < 0x7e) {\n    return String.fromCharCode(e);\n  }\n\n  return '.';\n};\n/**\n * Creates an object for sending to a web worker modifying properties that are TypedArrays\n * into a new object with seperated properties for the buffer, byteOffset, and byteLength.\n *\n * @param {Object} message\n *        Object of properties and values to send to the web worker\n * @return {Object}\n *         Modified message with TypedArray values expanded\n * @function createTransferableMessage\n */\n\n\nvar createTransferableMessage = function createTransferableMessage(message) {\n  var transferable = {};\n  Object.keys(message).forEach(function (key) {\n    var value = message[key];\n\n    if (ArrayBuffer.isView(value)) {\n      transferable[key] = {\n        bytes: value.buffer,\n        byteOffset: value.byteOffset,\n        byteLength: value.byteLength\n      };\n    } else {\n      transferable[key] = value;\n    }\n  });\n  return transferable;\n};\n/**\n * Returns a unique string identifier for a media initialization\n * segment.\n *\n * @param {Object} initSegment\n *        the init segment object.\n *\n * @return {string} the generated init segment id\n */\n\n\nvar initSegmentId = function initSegmentId(initSegment) {\n  var byterange = initSegment.byterange || {\n    length: Infinity,\n    offset: 0\n  };\n  return [byterange.length, byterange.offset, initSegment.resolvedUri].join(',');\n};\n/**\n * Returns a unique string identifier for a media segment key.\n *\n * @param {Object} key the encryption key\n * @return {string} the unique id for the media segment key.\n */\n\n\nvar segmentKeyId = function segmentKeyId(key) {\n  return key.resolvedUri;\n};\n/**\n * utils to help dump binary data to the console\n *\n * @param {Array|TypedArray} data\n *        data to dump to a string\n *\n * @return {string} the data as a hex string.\n */\n\n\nvar hexDump = function hexDump(data) {\n  var bytes = Array.prototype.slice.call(data);\n  var step = 16;\n  var result = '';\n  var hex;\n  var ascii;\n\n  for (var j = 0; j < bytes.length / step; j++) {\n    hex = bytes.slice(j * step, j * step + step).map(formatHexString).join('');\n    ascii = bytes.slice(j * step, j * step + step).map(formatAsciiString).join('');\n    result += hex + ' ' + ascii + '\\n';\n  }\n\n  return result;\n};\n\nvar tagDump = function tagDump(_ref) {\n  var bytes = _ref.bytes;\n  return hexDump(bytes);\n};\n\nvar textRanges = function textRanges(ranges) {\n  var result = '';\n  var i;\n\n  for (i = 0; i < ranges.length; i++) {\n    result += textRange(ranges, i) + ' ';\n  }\n\n  return result;\n};\n\nvar utils = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  createTransferableMessage: createTransferableMessage,\n  initSegmentId: initSegmentId,\n  segmentKeyId: segmentKeyId,\n  hexDump: hexDump,\n  tagDump: tagDump,\n  textRanges: textRanges\n}); // TODO handle fmp4 case where the timing info is accurate and doesn't involve transmux\n// 25% was arbitrarily chosen, and may need to be refined over time.\n\nvar SEGMENT_END_FUDGE_PERCENT = 0.25;\n/**\n * Converts a player time (any time that can be gotten/set from player.currentTime(),\n * e.g., any time within player.seekable().start(0) to player.seekable().end(0)) to a\n * program time (any time referencing the real world (e.g., EXT-X-PROGRAM-DATE-TIME)).\n *\n * The containing segment is required as the EXT-X-PROGRAM-DATE-TIME serves as an \"anchor\n * point\" (a point where we have a mapping from program time to player time, with player\n * time being the post transmux start of the segment).\n *\n * For more details, see [this doc](../../docs/program-time-from-player-time.md).\n *\n * @param {number} playerTime the player time\n * @param {Object} segment the segment which contains the player time\n * @return {Date} program time\n */\n\nvar playerTimeToProgramTime = function playerTimeToProgramTime(playerTime, segment) {\n  if (!segment.dateTimeObject) {\n    // Can't convert without an \"anchor point\" for the program time (i.e., a time that can\n    // be used to map the start of a segment with a real world time).\n    return null;\n  }\n\n  var transmuxerPrependedSeconds = segment.videoTimingInfo.transmuxerPrependedSeconds;\n  var transmuxedStart = segment.videoTimingInfo.transmuxedPresentationStart; // get the start of the content from before old content is prepended\n\n  var startOfSegment = transmuxedStart + transmuxerPrependedSeconds;\n  var offsetFromSegmentStart = playerTime - startOfSegment;\n  return new Date(segment.dateTimeObject.getTime() + offsetFromSegmentStart * 1000);\n};\n\nvar originalSegmentVideoDuration = function originalSegmentVideoDuration(videoTimingInfo) {\n  return videoTimingInfo.transmuxedPresentationEnd - videoTimingInfo.transmuxedPresentationStart - videoTimingInfo.transmuxerPrependedSeconds;\n};\n/**\n * Finds a segment that contains the time requested given as an ISO-8601 string. The\n * returned segment might be an estimate or an accurate match.\n *\n * @param {string} programTime The ISO-8601 programTime to find a match for\n * @param {Object} playlist A playlist object to search within\n */\n\n\nvar findSegmentForProgramTime = function findSegmentForProgramTime(programTime, playlist) {\n  // Assumptions:\n  //  - verifyProgramDateTimeTags has already been run\n  //  - live streams have been started\n  var dateTimeObject;\n\n  try {\n    dateTimeObject = new Date(programTime);\n  } catch (e) {\n    return null;\n  }\n\n  if (!playlist || !playlist.segments || playlist.segments.length === 0) {\n    return null;\n  }\n\n  var segment = playlist.segments[0];\n\n  if (dateTimeObject < segment.dateTimeObject) {\n    // Requested time is before stream start.\n    return null;\n  }\n\n  for (var i = 0; i < playlist.segments.length - 1; i++) {\n    segment = playlist.segments[i];\n    var nextSegmentStart = playlist.segments[i + 1].dateTimeObject;\n\n    if (dateTimeObject < nextSegmentStart) {\n      break;\n    }\n  }\n\n  var lastSegment = playlist.segments[playlist.segments.length - 1];\n  var lastSegmentStart = lastSegment.dateTimeObject;\n  var lastSegmentDuration = lastSegment.videoTimingInfo ? originalSegmentVideoDuration(lastSegment.videoTimingInfo) : lastSegment.duration + lastSegment.duration * SEGMENT_END_FUDGE_PERCENT;\n  var lastSegmentEnd = new Date(lastSegmentStart.getTime() + lastSegmentDuration * 1000);\n\n  if (dateTimeObject > lastSegmentEnd) {\n    // Beyond the end of the stream, or our best guess of the end of the stream.\n    return null;\n  }\n\n  if (dateTimeObject > lastSegmentStart) {\n    segment = lastSegment;\n  }\n\n  return {\n    segment: segment,\n    estimatedStart: segment.videoTimingInfo ? segment.videoTimingInfo.transmuxedPresentationStart : Playlist.duration(playlist, playlist.mediaSequence + playlist.segments.indexOf(segment)),\n    // Although, given that all segments have accurate date time objects, the segment\n    // selected should be accurate, unless the video has been transmuxed at some point\n    // (determined by the presence of the videoTimingInfo object), the segment's \"player\n    // time\" (the start time in the player) can't be considered accurate.\n    type: segment.videoTimingInfo ? 'accurate' : 'estimate'\n  };\n};\n/**\n * Finds a segment that contains the given player time(in seconds).\n *\n * @param {number} time The player time to find a match for\n * @param {Object} playlist A playlist object to search within\n */\n\n\nvar findSegmentForPlayerTime = function findSegmentForPlayerTime(time, playlist) {\n  // Assumptions:\n  // - there will always be a segment.duration\n  // - we can start from zero\n  // - segments are in time order\n  if (!playlist || !playlist.segments || playlist.segments.length === 0) {\n    return null;\n  }\n\n  var segmentEnd = 0;\n  var segment;\n\n  for (var i = 0; i < playlist.segments.length; i++) {\n    segment = playlist.segments[i]; // videoTimingInfo is set after the segment is downloaded and transmuxed, and\n    // should contain the most accurate values we have for the segment's player times.\n    //\n    // Use the accurate transmuxedPresentationEnd value if it is available, otherwise fall\n    // back to an estimate based on the manifest derived (inaccurate) segment.duration, to\n    // calculate an end value.\n\n    segmentEnd = segment.videoTimingInfo ? segment.videoTimingInfo.transmuxedPresentationEnd : segmentEnd + segment.duration;\n\n    if (time <= segmentEnd) {\n      break;\n    }\n  }\n\n  var lastSegment = playlist.segments[playlist.segments.length - 1];\n\n  if (lastSegment.videoTimingInfo && lastSegment.videoTimingInfo.transmuxedPresentationEnd < time) {\n    // The time requested is beyond the stream end.\n    return null;\n  }\n\n  if (time > segmentEnd) {\n    // The time is within or beyond the last segment.\n    //\n    // Check to see if the time is beyond a reasonable guess of the end of the stream.\n    if (time > segmentEnd + lastSegment.duration * SEGMENT_END_FUDGE_PERCENT) {\n      // Technically, because the duration value is only an estimate, the time may still\n      // exist in the last segment, however, there isn't enough information to make even\n      // a reasonable estimate.\n      return null;\n    }\n\n    segment = lastSegment;\n  }\n\n  return {\n    segment: segment,\n    estimatedStart: segment.videoTimingInfo ? segment.videoTimingInfo.transmuxedPresentationStart : segmentEnd - segment.duration,\n    // Because videoTimingInfo is only set after transmux, it is the only way to get\n    // accurate timing values.\n    type: segment.videoTimingInfo ? 'accurate' : 'estimate'\n  };\n};\n/**\n * Gives the offset of the comparisonTimestamp from the programTime timestamp in seconds.\n * If the offset returned is positive, the programTime occurs after the\n * comparisonTimestamp.\n * If the offset is negative, the programTime occurs before the comparisonTimestamp.\n *\n * @param {string} comparisonTimeStamp An ISO-8601 timestamp to compare against\n * @param {string} programTime The programTime as an ISO-8601 string\n * @return {number} offset\n */\n\n\nvar getOffsetFromTimestamp = function getOffsetFromTimestamp(comparisonTimeStamp, programTime) {\n  var segmentDateTime;\n  var programDateTime;\n\n  try {\n    segmentDateTime = new Date(comparisonTimeStamp);\n    programDateTime = new Date(programTime);\n  } catch (e) {// TODO handle error\n  }\n\n  var segmentTimeEpoch = segmentDateTime.getTime();\n  var programTimeEpoch = programDateTime.getTime();\n  return (programTimeEpoch - segmentTimeEpoch) / 1000;\n};\n/**\n * Checks that all segments in this playlist have programDateTime tags.\n *\n * @param {Object} playlist A playlist object\n */\n\n\nvar verifyProgramDateTimeTags = function verifyProgramDateTimeTags(playlist) {\n  if (!playlist.segments || playlist.segments.length === 0) {\n    return false;\n  }\n\n  for (var i = 0; i < playlist.segments.length; i++) {\n    var segment = playlist.segments[i];\n\n    if (!segment.dateTimeObject) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * Returns the programTime of the media given a playlist and a playerTime.\n * The playlist must have programDateTime tags for a programDateTime tag to be returned.\n * If the segments containing the time requested have not been buffered yet, an estimate\n * may be returned to the callback.\n *\n * @param {Object} args\n * @param {Object} args.playlist A playlist object to search within\n * @param {number} time A playerTime in seconds\n * @param {Function} callback(err, programTime)\n * @return {string} err.message A detailed error message\n * @return {Object} programTime\n * @return {number} programTime.mediaSeconds The streamTime in seconds\n * @return {string} programTime.programDateTime The programTime as an ISO-8601 String\n */\n\n\nvar getProgramTime = function getProgramTime(_ref) {\n  var playlist = _ref.playlist,\n      _ref$time = _ref.time,\n      time = _ref$time === void 0 ? undefined : _ref$time,\n      callback = _ref.callback;\n\n  if (!callback) {\n    throw new Error('getProgramTime: callback must be provided');\n  }\n\n  if (!playlist || time === undefined) {\n    return callback({\n      message: 'getProgramTime: playlist and time must be provided'\n    });\n  }\n\n  var matchedSegment = findSegmentForPlayerTime(time, playlist);\n\n  if (!matchedSegment) {\n    return callback({\n      message: 'valid programTime was not found'\n    });\n  }\n\n  if (matchedSegment.type === 'estimate') {\n    return callback({\n      message: 'Accurate programTime could not be determined.' + ' Please seek to e.seekTime and try again',\n      seekTime: matchedSegment.estimatedStart\n    });\n  }\n\n  var programTimeObject = {\n    mediaSeconds: time\n  };\n  var programTime = playerTimeToProgramTime(time, matchedSegment.segment);\n\n  if (programTime) {\n    programTimeObject.programDateTime = programTime.toISOString();\n  }\n\n  return callback(null, programTimeObject);\n};\n/**\n * Seeks in the player to a time that matches the given programTime ISO-8601 string.\n *\n * @param {Object} args\n * @param {string} args.programTime A programTime to seek to as an ISO-8601 String\n * @param {Object} args.playlist A playlist to look within\n * @param {number} args.retryCount The number of times to try for an accurate seek. Default is 2.\n * @param {Function} args.seekTo A method to perform a seek\n * @param {boolean} args.pauseAfterSeek Whether to end in a paused state after seeking. Default is true.\n * @param {Object} args.tech The tech to seek on\n * @param {Function} args.callback(err, newTime) A callback to return the new time to\n * @return {string} err.message A detailed error message\n * @return {number} newTime The exact time that was seeked to in seconds\n */\n\n\nvar seekToProgramTime = function seekToProgramTime(_ref2) {\n  var programTime = _ref2.programTime,\n      playlist = _ref2.playlist,\n      _ref2$retryCount = _ref2.retryCount,\n      retryCount = _ref2$retryCount === void 0 ? 2 : _ref2$retryCount,\n      seekTo = _ref2.seekTo,\n      _ref2$pauseAfterSeek = _ref2.pauseAfterSeek,\n      pauseAfterSeek = _ref2$pauseAfterSeek === void 0 ? true : _ref2$pauseAfterSeek,\n      tech = _ref2.tech,\n      callback = _ref2.callback;\n\n  if (!callback) {\n    throw new Error('seekToProgramTime: callback must be provided');\n  }\n\n  if (typeof programTime === 'undefined' || !playlist || !seekTo) {\n    return callback({\n      message: 'seekToProgramTime: programTime, seekTo and playlist must be provided'\n    });\n  }\n\n  if (!playlist.endList && !tech.hasStarted_) {\n    return callback({\n      message: 'player must be playing a live stream to start buffering'\n    });\n  }\n\n  if (!verifyProgramDateTimeTags(playlist)) {\n    return callback({\n      message: 'programDateTime tags must be provided in the manifest ' + playlist.resolvedUri\n    });\n  }\n\n  var matchedSegment = findSegmentForProgramTime(programTime, playlist); // no match\n\n  if (!matchedSegment) {\n    return callback({\n      message: programTime + \" was not found in the stream\"\n    });\n  }\n\n  var segment = matchedSegment.segment;\n  var mediaOffset = getOffsetFromTimestamp(segment.dateTimeObject, programTime);\n\n  if (matchedSegment.type === 'estimate') {\n    // we've run out of retries\n    if (retryCount === 0) {\n      return callback({\n        message: programTime + \" is not buffered yet. Try again\"\n      });\n    }\n\n    seekTo(matchedSegment.estimatedStart + mediaOffset);\n    tech.one('seeked', function () {\n      seekToProgramTime({\n        programTime: programTime,\n        playlist: playlist,\n        retryCount: retryCount - 1,\n        seekTo: seekTo,\n        pauseAfterSeek: pauseAfterSeek,\n        tech: tech,\n        callback: callback\n      });\n    });\n    return;\n  } // Since the segment.start value is determined from the buffered end or ending time\n  // of the prior segment, the seekToTime doesn't need to account for any transmuxer\n  // modifications.\n\n\n  var seekToTime = segment.start + mediaOffset;\n\n  var seekedCallback = function seekedCallback() {\n    return callback(null, tech.currentTime());\n  }; // listen for seeked event\n\n\n  tech.one('seeked', seekedCallback); // pause before seeking as video.js will restore this state\n\n  if (pauseAfterSeek) {\n    tech.pause();\n  }\n\n  seekTo(seekToTime);\n}; // which will only happen if the request is complete.\n\n\nvar callbackOnCompleted = function callbackOnCompleted(request, cb) {\n  if (request.readyState === 4) {\n    return cb();\n  }\n\n  return;\n};\n\nvar containerRequest = function containerRequest(uri, xhr, cb) {\n  var bytes = [];\n  var id3Offset;\n  var finished = false;\n\n  var endRequestAndCallback = function endRequestAndCallback(err, req, type, _bytes) {\n    req.abort();\n    finished = true;\n    return cb(err, req, type, _bytes);\n  };\n\n  var progressListener = function progressListener(error, request) {\n    if (finished) {\n      return;\n    }\n\n    if (error) {\n      return endRequestAndCallback(error, request, '', bytes);\n    } // grap the new part of content that was just downloaded\n\n\n    var newPart = request.responseText.substring(bytes && bytes.byteLength || 0, request.responseText.length); // add that onto bytes\n\n    bytes = concatTypedArrays(bytes, stringToBytes(newPart, true));\n    id3Offset = id3Offset || getId3Offset(bytes); // we need at least 10 bytes to determine a type\n    // or we need at least two bytes after an id3Offset\n\n    if (bytes.length < 10 || id3Offset && bytes.length < id3Offset + 2) {\n      return callbackOnCompleted(request, function () {\n        return endRequestAndCallback(error, request, '', bytes);\n      });\n    }\n\n    var type = detectContainerForBytes(bytes); // if this looks like a ts segment but we don't have enough data\n    // to see the second sync byte, wait until we have enough data\n    // before declaring it ts\n\n    if (type === 'ts' && bytes.length < 188) {\n      return callbackOnCompleted(request, function () {\n        return endRequestAndCallback(error, request, '', bytes);\n      });\n    } // this may be an unsynced ts segment\n    // wait for 376 bytes before detecting no container\n\n\n    if (!type && bytes.length < 376) {\n      return callbackOnCompleted(request, function () {\n        return endRequestAndCallback(error, request, '', bytes);\n      });\n    }\n\n    return endRequestAndCallback(null, request, type, bytes);\n  };\n\n  var options = {\n    uri: uri,\n    beforeSend: function beforeSend(request) {\n      // this forces the browser to pass the bytes to us unprocessed\n      request.overrideMimeType('text/plain; charset=x-user-defined');\n      request.addEventListener('progress', function (_ref) {\n        _ref.total;\n        _ref.loaded;\n        return callbackWrapper(request, null, {\n          statusCode: request.status\n        }, progressListener);\n      });\n    }\n  };\n  var request = xhr(options, function (error, response) {\n    return callbackWrapper(request, error, response, progressListener);\n  });\n  return request;\n};\n\nvar EventTarget = videojs.EventTarget,\n    mergeOptions = videojs.mergeOptions;\n\nvar dashPlaylistUnchanged = function dashPlaylistUnchanged(a, b) {\n  if (!isPlaylistUnchanged(a, b)) {\n    return false;\n  } // for dash the above check will often return true in scenarios where\n  // the playlist actually has changed because mediaSequence isn't a\n  // dash thing, and we often set it to 1. So if the playlists have the same amount\n  // of segments we return true.\n  // So for dash we need to make sure that the underlying segments are different.\n  // if sidx changed then the playlists are different.\n\n\n  if (a.sidx && b.sidx && (a.sidx.offset !== b.sidx.offset || a.sidx.length !== b.sidx.length)) {\n    return false;\n  } else if (!a.sidx && b.sidx || a.sidx && !b.sidx) {\n    return false;\n  } // one or the other does not have segments\n  // there was a change.\n\n\n  if (a.segments && !b.segments || !a.segments && b.segments) {\n    return false;\n  } // neither has segments nothing changed\n\n\n  if (!a.segments && !b.segments) {\n    return true;\n  } // check segments themselves\n\n\n  for (var i = 0; i < a.segments.length; i++) {\n    var aSegment = a.segments[i];\n    var bSegment = b.segments[i]; // if uris are different between segments there was a change\n\n    if (aSegment.uri !== bSegment.uri) {\n      return false;\n    } // neither segment has a byterange, there will be no byterange change.\n\n\n    if (!aSegment.byterange && !bSegment.byterange) {\n      continue;\n    }\n\n    var aByterange = aSegment.byterange;\n    var bByterange = bSegment.byterange; // if byterange only exists on one of the segments, there was a change.\n\n    if (aByterange && !bByterange || !aByterange && bByterange) {\n      return false;\n    } // if both segments have byterange with different offsets, there was a change.\n\n\n    if (aByterange.offset !== bByterange.offset || aByterange.length !== bByterange.length) {\n      return false;\n    }\n  } // if everything was the same with segments, this is the same playlist.\n\n\n  return true;\n};\n/**\n * Parses the master XML string and updates playlist URI references.\n *\n * @param {Object} config\n *        Object of arguments\n * @param {string} config.masterXml\n *        The mpd XML\n * @param {string} config.srcUrl\n *        The mpd URL\n * @param {Date} config.clientOffset\n *         A time difference between server and client\n * @param {Object} config.sidxMapping\n *        SIDX mappings for moof/mdat URIs and byte ranges\n * @return {Object}\n *         The parsed mpd manifest object\n */\n\n\nvar parseMasterXml = function parseMasterXml(_ref) {\n  var masterXml = _ref.masterXml,\n      srcUrl = _ref.srcUrl,\n      clientOffset = _ref.clientOffset,\n      sidxMapping = _ref.sidxMapping,\n      previousManifest = _ref.previousManifest;\n  var manifest = parse(masterXml, {\n    manifestUri: srcUrl,\n    clientOffset: clientOffset,\n    sidxMapping: sidxMapping,\n    previousManifest: previousManifest\n  });\n  addPropertiesToMaster(manifest, srcUrl);\n  return manifest;\n};\n/**\n * Returns a new master manifest that is the result of merging an updated master manifest\n * into the original version.\n *\n * @param {Object} oldMaster\n *        The old parsed mpd object\n * @param {Object} newMaster\n *        The updated parsed mpd object\n * @return {Object}\n *         A new object representing the original master manifest with the updated media\n *         playlists merged in\n */\n\n\nvar updateMaster = function updateMaster(oldMaster, newMaster, sidxMapping) {\n  var noChanges = true;\n  var update = mergeOptions(oldMaster, {\n    // These are top level properties that can be updated\n    duration: newMaster.duration,\n    minimumUpdatePeriod: newMaster.minimumUpdatePeriod,\n    timelineStarts: newMaster.timelineStarts\n  }); // First update the playlists in playlist list\n\n  for (var i = 0; i < newMaster.playlists.length; i++) {\n    var playlist = newMaster.playlists[i];\n\n    if (playlist.sidx) {\n      var sidxKey = generateSidxKey(playlist.sidx); // add sidx segments to the playlist if we have all the sidx info already\n\n      if (sidxMapping && sidxMapping[sidxKey] && sidxMapping[sidxKey].sidx) {\n        addSidxSegmentsToPlaylist(playlist, sidxMapping[sidxKey].sidx, playlist.sidx.resolvedUri);\n      }\n    }\n\n    var playlistUpdate = updateMaster$1(update, playlist, dashPlaylistUnchanged);\n\n    if (playlistUpdate) {\n      update = playlistUpdate;\n      noChanges = false;\n    }\n  } // Then update media group playlists\n\n\n  forEachMediaGroup(newMaster, function (properties, type, group, label) {\n    if (properties.playlists && properties.playlists.length) {\n      var id = properties.playlists[0].id;\n\n      var _playlistUpdate = updateMaster$1(update, properties.playlists[0], dashPlaylistUnchanged);\n\n      if (_playlistUpdate) {\n        update = _playlistUpdate; // update the playlist reference within media groups\n\n        update.mediaGroups[type][group][label].playlists[0] = update.playlists[id];\n        noChanges = false;\n      }\n    }\n  });\n\n  if (newMaster.minimumUpdatePeriod !== oldMaster.minimumUpdatePeriod) {\n    noChanges = false;\n  }\n\n  if (noChanges) {\n    return null;\n  }\n\n  return update;\n}; // SIDX should be equivalent if the URI and byteranges of the SIDX match.\n// If the SIDXs have maps, the two maps should match,\n// both `a` and `b` missing SIDXs is considered matching.\n// If `a` or `b` but not both have a map, they aren't matching.\n\n\nvar equivalentSidx = function equivalentSidx(a, b) {\n  var neitherMap = Boolean(!a.map && !b.map);\n  var equivalentMap = neitherMap || Boolean(a.map && b.map && a.map.byterange.offset === b.map.byterange.offset && a.map.byterange.length === b.map.byterange.length);\n  return equivalentMap && a.uri === b.uri && a.byterange.offset === b.byterange.offset && a.byterange.length === b.byterange.length;\n}; // exported for testing\n\n\nvar compareSidxEntry = function compareSidxEntry(playlists, oldSidxMapping) {\n  var newSidxMapping = {};\n\n  for (var id in playlists) {\n    var playlist = playlists[id];\n    var currentSidxInfo = playlist.sidx;\n\n    if (currentSidxInfo) {\n      var key = generateSidxKey(currentSidxInfo);\n\n      if (!oldSidxMapping[key]) {\n        break;\n      }\n\n      var savedSidxInfo = oldSidxMapping[key].sidxInfo;\n\n      if (equivalentSidx(savedSidxInfo, currentSidxInfo)) {\n        newSidxMapping[key] = oldSidxMapping[key];\n      }\n    }\n  }\n\n  return newSidxMapping;\n};\n/**\n *  A function that filters out changed items as they need to be requested separately.\n *\n *  The method is exported for testing\n *\n *  @param {Object} master the parsed mpd XML returned via mpd-parser\n *  @param {Object} oldSidxMapping the SIDX to compare against\n */\n\n\nvar filterChangedSidxMappings = function filterChangedSidxMappings(master, oldSidxMapping) {\n  var videoSidx = compareSidxEntry(master.playlists, oldSidxMapping);\n  var mediaGroupSidx = videoSidx;\n  forEachMediaGroup(master, function (properties, mediaType, groupKey, labelKey) {\n    if (properties.playlists && properties.playlists.length) {\n      var playlists = properties.playlists;\n      mediaGroupSidx = mergeOptions(mediaGroupSidx, compareSidxEntry(playlists, oldSidxMapping));\n    }\n  });\n  return mediaGroupSidx;\n};\n\nvar DashPlaylistLoader = /*#__PURE__*/function (_EventTarget) {\n  _inheritsLoose(DashPlaylistLoader, _EventTarget); // DashPlaylistLoader must accept either a src url or a playlist because subsequent\n  // playlist loader setups from media groups will expect to be able to pass a playlist\n  // (since there aren't external URLs to media playlists with DASH)\n\n\n  function DashPlaylistLoader(srcUrlOrPlaylist, vhs, options, masterPlaylistLoader) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _EventTarget.call(this) || this;\n    _this.masterPlaylistLoader_ = masterPlaylistLoader || _assertThisInitialized(_this);\n\n    if (!masterPlaylistLoader) {\n      _this.isMaster_ = true;\n    }\n\n    var _options = options,\n        _options$withCredenti = _options.withCredentials,\n        withCredentials = _options$withCredenti === void 0 ? false : _options$withCredenti,\n        _options$handleManife = _options.handleManifestRedirects,\n        handleManifestRedirects = _options$handleManife === void 0 ? false : _options$handleManife;\n    _this.vhs_ = vhs;\n    _this.withCredentials = withCredentials;\n    _this.handleManifestRedirects = handleManifestRedirects;\n\n    if (!srcUrlOrPlaylist) {\n      throw new Error('A non-empty playlist URL or object is required');\n    } // event naming?\n\n\n    _this.on('minimumUpdatePeriod', function () {\n      _this.refreshXml_();\n    }); // live playlist staleness timeout\n\n\n    _this.on('mediaupdatetimeout', function () {\n      _this.refreshMedia_(_this.media().id);\n    });\n\n    _this.state = 'HAVE_NOTHING';\n    _this.loadedPlaylists_ = {};\n    _this.logger_ = logger('DashPlaylistLoader'); // initialize the loader state\n    // The masterPlaylistLoader will be created with a string\n\n    if (_this.isMaster_) {\n      _this.masterPlaylistLoader_.srcUrl = srcUrlOrPlaylist; // TODO: reset sidxMapping between period changes\n      // once multi-period is refactored\n\n      _this.masterPlaylistLoader_.sidxMapping_ = {};\n    } else {\n      _this.childPlaylist_ = srcUrlOrPlaylist;\n    }\n\n    return _this;\n  }\n\n  var _proto = DashPlaylistLoader.prototype;\n\n  _proto.requestErrored_ = function requestErrored_(err, request, startingState) {\n    // disposed\n    if (!this.request) {\n      return true;\n    } // pending request is cleared\n\n\n    this.request = null;\n\n    if (err) {\n      // use the provided error object or create one\n      // based on the request/response\n      this.error = _typeof(err) === 'object' && !(err instanceof Error) ? err : {\n        status: request.status,\n        message: 'DASH request error at URL: ' + request.uri,\n        response: request.response,\n        // MEDIA_ERR_NETWORK\n        code: 2\n      };\n\n      if (startingState) {\n        this.state = startingState;\n      }\n\n      this.trigger('error');\n      return true;\n    }\n  }\n  /**\n   * Verify that the container of the sidx segment can be parsed\n   * and if it can, get and parse that segment.\n   */\n  ;\n\n  _proto.addSidxSegments_ = function addSidxSegments_(playlist, startingState, cb) {\n    var _this2 = this;\n\n    var sidxKey = playlist.sidx && generateSidxKey(playlist.sidx); // playlist lacks sidx or sidx segments were added to this playlist already.\n\n    if (!playlist.sidx || !sidxKey || this.masterPlaylistLoader_.sidxMapping_[sidxKey]) {\n      // keep this function async\n      this.mediaRequest_ = window$1.setTimeout(function () {\n        return cb(false);\n      }, 0);\n      return;\n    } // resolve the segment URL relative to the playlist\n\n\n    var uri = resolveManifestRedirect(this.handleManifestRedirects, playlist.sidx.resolvedUri);\n\n    var fin = function fin(err, request) {\n      if (_this2.requestErrored_(err, request, startingState)) {\n        return;\n      }\n\n      var sidxMapping = _this2.masterPlaylistLoader_.sidxMapping_;\n      var sidx;\n\n      try {\n        sidx = parseSidx(toUint8(request.response).subarray(8));\n      } catch (e) {\n        // sidx parsing failed.\n        _this2.requestErrored_(e, request, startingState);\n\n        return;\n      }\n\n      sidxMapping[sidxKey] = {\n        sidxInfo: playlist.sidx,\n        sidx: sidx\n      };\n      addSidxSegmentsToPlaylist(playlist, sidx, playlist.sidx.resolvedUri);\n      return cb(true);\n    };\n\n    this.request = containerRequest(uri, this.vhs_.xhr, function (err, request, container, bytes) {\n      if (err) {\n        return fin(err, request);\n      }\n\n      if (!container || container !== 'mp4') {\n        return fin({\n          status: request.status,\n          message: \"Unsupported \" + (container || 'unknown') + \" container type for sidx segment at URL: \" + uri,\n          // response is just bytes in this case\n          // but we really don't want to return that.\n          response: '',\n          playlist: playlist,\n          internal: true,\n          blacklistDuration: Infinity,\n          // MEDIA_ERR_NETWORK\n          code: 2\n        }, request);\n      } // if we already downloaded the sidx bytes in the container request, use them\n\n\n      var _playlist$sidx$bytera = playlist.sidx.byterange,\n          offset = _playlist$sidx$bytera.offset,\n          length = _playlist$sidx$bytera.length;\n\n      if (bytes.length >= length + offset) {\n        return fin(err, {\n          response: bytes.subarray(offset, offset + length),\n          status: request.status,\n          uri: request.uri\n        });\n      } // otherwise request sidx bytes\n\n\n      _this2.request = _this2.vhs_.xhr({\n        uri: uri,\n        responseType: 'arraybuffer',\n        headers: segmentXhrHeaders({\n          byterange: playlist.sidx.byterange\n        })\n      }, fin);\n    });\n  };\n\n  _proto.dispose = function dispose() {\n    this.trigger('dispose');\n    this.stopRequest();\n    this.loadedPlaylists_ = {};\n    window$1.clearTimeout(this.minimumUpdatePeriodTimeout_);\n    window$1.clearTimeout(this.mediaRequest_);\n    window$1.clearTimeout(this.mediaUpdateTimeout);\n    this.mediaUpdateTimeout = null;\n    this.mediaRequest_ = null;\n    this.minimumUpdatePeriodTimeout_ = null;\n\n    if (this.masterPlaylistLoader_.createMupOnMedia_) {\n      this.off('loadedmetadata', this.masterPlaylistLoader_.createMupOnMedia_);\n      this.masterPlaylistLoader_.createMupOnMedia_ = null;\n    }\n\n    this.off();\n  };\n\n  _proto.hasPendingRequest = function hasPendingRequest() {\n    return this.request || this.mediaRequest_;\n  };\n\n  _proto.stopRequest = function stopRequest() {\n    if (this.request) {\n      var oldRequest = this.request;\n      this.request = null;\n      oldRequest.onreadystatechange = null;\n      oldRequest.abort();\n    }\n  };\n\n  _proto.media = function media(playlist) {\n    var _this3 = this; // getter\n\n\n    if (!playlist) {\n      return this.media_;\n    } // setter\n\n\n    if (this.state === 'HAVE_NOTHING') {\n      throw new Error('Cannot switch media playlist from ' + this.state);\n    }\n\n    var startingState = this.state; // find the playlist object if the target playlist has been specified by URI\n\n    if (typeof playlist === 'string') {\n      if (!this.masterPlaylistLoader_.master.playlists[playlist]) {\n        throw new Error('Unknown playlist URI: ' + playlist);\n      }\n\n      playlist = this.masterPlaylistLoader_.master.playlists[playlist];\n    }\n\n    var mediaChange = !this.media_ || playlist.id !== this.media_.id; // switch to previously loaded playlists immediately\n\n    if (mediaChange && this.loadedPlaylists_[playlist.id] && this.loadedPlaylists_[playlist.id].endList) {\n      this.state = 'HAVE_METADATA';\n      this.media_ = playlist; // trigger media change if the active media has been updated\n\n      if (mediaChange) {\n        this.trigger('mediachanging');\n        this.trigger('mediachange');\n      }\n\n      return;\n    } // switching to the active playlist is a no-op\n\n\n    if (!mediaChange) {\n      return;\n    } // switching from an already loaded playlist\n\n\n    if (this.media_) {\n      this.trigger('mediachanging');\n    }\n\n    this.addSidxSegments_(playlist, startingState, function (sidxChanged) {\n      // everything is ready just continue to haveMetadata\n      _this3.haveMetadata({\n        startingState: startingState,\n        playlist: playlist\n      });\n    });\n  };\n\n  _proto.haveMetadata = function haveMetadata(_ref2) {\n    var startingState = _ref2.startingState,\n        playlist = _ref2.playlist;\n    this.state = 'HAVE_METADATA';\n    this.loadedPlaylists_[playlist.id] = playlist;\n    this.mediaRequest_ = null; // This will trigger loadedplaylist\n\n    this.refreshMedia_(playlist.id); // fire loadedmetadata the first time a media playlist is loaded\n    // to resolve setup of media groups\n\n    if (startingState === 'HAVE_MASTER') {\n      this.trigger('loadedmetadata');\n    } else {\n      // trigger media change if the active media has been updated\n      this.trigger('mediachange');\n    }\n  };\n\n  _proto.pause = function pause() {\n    if (this.masterPlaylistLoader_.createMupOnMedia_) {\n      this.off('loadedmetadata', this.masterPlaylistLoader_.createMupOnMedia_);\n      this.masterPlaylistLoader_.createMupOnMedia_ = null;\n    }\n\n    this.stopRequest();\n    window$1.clearTimeout(this.mediaUpdateTimeout);\n    this.mediaUpdateTimeout = null;\n\n    if (this.isMaster_) {\n      window$1.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_);\n      this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_ = null;\n    }\n\n    if (this.state === 'HAVE_NOTHING') {\n      // If we pause the loader before any data has been retrieved, its as if we never\n      // started, so reset to an unstarted state.\n      this.started = false;\n    }\n  };\n\n  _proto.load = function load(isFinalRendition) {\n    var _this4 = this;\n\n    window$1.clearTimeout(this.mediaUpdateTimeout);\n    this.mediaUpdateTimeout = null;\n    var media = this.media();\n\n    if (isFinalRendition) {\n      var delay = media ? media.targetDuration / 2 * 1000 : 5 * 1000;\n      this.mediaUpdateTimeout = window$1.setTimeout(function () {\n        return _this4.load();\n      }, delay);\n      return;\n    } // because the playlists are internal to the manifest, load should either load the\n    // main manifest, or do nothing but trigger an event\n\n\n    if (!this.started) {\n      this.start();\n      return;\n    }\n\n    if (media && !media.endList) {\n      // Check to see if this is the master loader and the MUP was cleared (this happens\n      // when the loader was paused). `media` should be set at this point since one is always\n      // set during `start()`.\n      if (this.isMaster_ && !this.minimumUpdatePeriodTimeout_) {\n        // Trigger minimumUpdatePeriod to refresh the master manifest\n        this.trigger('minimumUpdatePeriod'); // Since there was no prior minimumUpdatePeriodTimeout it should be recreated\n\n        this.updateMinimumUpdatePeriodTimeout_();\n      }\n\n      this.trigger('mediaupdatetimeout');\n    } else {\n      this.trigger('loadedplaylist');\n    }\n  };\n\n  _proto.start = function start() {\n    var _this5 = this;\n\n    this.started = true; // We don't need to request the master manifest again\n    // Call this asynchronously to match the xhr request behavior below\n\n    if (!this.isMaster_) {\n      this.mediaRequest_ = window$1.setTimeout(function () {\n        return _this5.haveMaster_();\n      }, 0);\n      return;\n    }\n\n    this.requestMaster_(function (req, masterChanged) {\n      _this5.haveMaster_();\n\n      if (!_this5.hasPendingRequest() && !_this5.media_) {\n        _this5.media(_this5.masterPlaylistLoader_.master.playlists[0]);\n      }\n    });\n  };\n\n  _proto.requestMaster_ = function requestMaster_(cb) {\n    var _this6 = this;\n\n    this.request = this.vhs_.xhr({\n      uri: this.masterPlaylistLoader_.srcUrl,\n      withCredentials: this.withCredentials\n    }, function (error, req) {\n      if (_this6.requestErrored_(error, req)) {\n        if (_this6.state === 'HAVE_NOTHING') {\n          _this6.started = false;\n        }\n\n        return;\n      }\n\n      var masterChanged = req.responseText !== _this6.masterPlaylistLoader_.masterXml_;\n      _this6.masterPlaylistLoader_.masterXml_ = req.responseText;\n\n      if (req.responseHeaders && req.responseHeaders.date) {\n        _this6.masterLoaded_ = Date.parse(req.responseHeaders.date);\n      } else {\n        _this6.masterLoaded_ = Date.now();\n      }\n\n      _this6.masterPlaylistLoader_.srcUrl = resolveManifestRedirect(_this6.handleManifestRedirects, _this6.masterPlaylistLoader_.srcUrl, req);\n\n      if (masterChanged) {\n        _this6.handleMaster_();\n\n        _this6.syncClientServerClock_(function () {\n          return cb(req, masterChanged);\n        });\n\n        return;\n      }\n\n      return cb(req, masterChanged);\n    });\n  }\n  /**\n   * Parses the master xml for UTCTiming node to sync the client clock to the server\n   * clock. If the UTCTiming node requires a HEAD or GET request, that request is made.\n   *\n   * @param {Function} done\n   *        Function to call when clock sync has completed\n   */\n  ;\n\n  _proto.syncClientServerClock_ = function syncClientServerClock_(done) {\n    var _this7 = this;\n\n    var utcTiming = parseUTCTiming(this.masterPlaylistLoader_.masterXml_); // No UTCTiming element found in the mpd. Use Date header from mpd request as the\n    // server clock\n\n    if (utcTiming === null) {\n      this.masterPlaylistLoader_.clientOffset_ = this.masterLoaded_ - Date.now();\n      return done();\n    }\n\n    if (utcTiming.method === 'DIRECT') {\n      this.masterPlaylistLoader_.clientOffset_ = utcTiming.value - Date.now();\n      return done();\n    }\n\n    this.request = this.vhs_.xhr({\n      uri: resolveUrl(this.masterPlaylistLoader_.srcUrl, utcTiming.value),\n      method: utcTiming.method,\n      withCredentials: this.withCredentials\n    }, function (error, req) {\n      // disposed\n      if (!_this7.request) {\n        return;\n      }\n\n      if (error) {\n        // sync request failed, fall back to using date header from mpd\n        // TODO: log warning\n        _this7.masterPlaylistLoader_.clientOffset_ = _this7.masterLoaded_ - Date.now();\n        return done();\n      }\n\n      var serverTime;\n\n      if (utcTiming.method === 'HEAD') {\n        if (!req.responseHeaders || !req.responseHeaders.date) {\n          // expected date header not preset, fall back to using date header from mpd\n          // TODO: log warning\n          serverTime = _this7.masterLoaded_;\n        } else {\n          serverTime = Date.parse(req.responseHeaders.date);\n        }\n      } else {\n        serverTime = Date.parse(req.responseText);\n      }\n\n      _this7.masterPlaylistLoader_.clientOffset_ = serverTime - Date.now();\n      done();\n    });\n  };\n\n  _proto.haveMaster_ = function haveMaster_() {\n    this.state = 'HAVE_MASTER';\n\n    if (this.isMaster_) {\n      // We have the master playlist at this point, so\n      // trigger this to allow MasterPlaylistController\n      // to make an initial playlist selection\n      this.trigger('loadedplaylist');\n    } else if (!this.media_) {\n      // no media playlist was specifically selected so select\n      // the one the child playlist loader was created with\n      this.media(this.childPlaylist_);\n    }\n  };\n\n  _proto.handleMaster_ = function handleMaster_() {\n    // clear media request\n    this.mediaRequest_ = null;\n    var oldMaster = this.masterPlaylistLoader_.master;\n    var newMaster = parseMasterXml({\n      masterXml: this.masterPlaylistLoader_.masterXml_,\n      srcUrl: this.masterPlaylistLoader_.srcUrl,\n      clientOffset: this.masterPlaylistLoader_.clientOffset_,\n      sidxMapping: this.masterPlaylistLoader_.sidxMapping_,\n      previousManifest: oldMaster\n    }); // if we have an old master to compare the new master against\n\n    if (oldMaster) {\n      newMaster = updateMaster(oldMaster, newMaster, this.masterPlaylistLoader_.sidxMapping_);\n    } // only update master if we have a new master\n\n\n    this.masterPlaylistLoader_.master = newMaster ? newMaster : oldMaster;\n    var location = this.masterPlaylistLoader_.master.locations && this.masterPlaylistLoader_.master.locations[0];\n\n    if (location && location !== this.masterPlaylistLoader_.srcUrl) {\n      this.masterPlaylistLoader_.srcUrl = location;\n    }\n\n    if (!oldMaster || newMaster && newMaster.minimumUpdatePeriod !== oldMaster.minimumUpdatePeriod) {\n      this.updateMinimumUpdatePeriodTimeout_();\n    }\n\n    return Boolean(newMaster);\n  };\n\n  _proto.updateMinimumUpdatePeriodTimeout_ = function updateMinimumUpdatePeriodTimeout_() {\n    var mpl = this.masterPlaylistLoader_; // cancel any pending creation of mup on media\n    // a new one will be added if needed.\n\n    if (mpl.createMupOnMedia_) {\n      mpl.off('loadedmetadata', mpl.createMupOnMedia_);\n      mpl.createMupOnMedia_ = null;\n    } // clear any pending timeouts\n\n\n    if (mpl.minimumUpdatePeriodTimeout_) {\n      window$1.clearTimeout(mpl.minimumUpdatePeriodTimeout_);\n      mpl.minimumUpdatePeriodTimeout_ = null;\n    }\n\n    var mup = mpl.master && mpl.master.minimumUpdatePeriod; // If the minimumUpdatePeriod has a value of 0, that indicates that the current\n    // MPD has no future validity, so a new one will need to be acquired when new\n    // media segments are to be made available. Thus, we use the target duration\n    // in this case\n\n    if (mup === 0) {\n      if (mpl.media()) {\n        mup = mpl.media().targetDuration * 1000;\n      } else {\n        mpl.createMupOnMedia_ = mpl.updateMinimumUpdatePeriodTimeout_;\n        mpl.one('loadedmetadata', mpl.createMupOnMedia_);\n      }\n    } // if minimumUpdatePeriod is invalid or <= zero, which\n    // can happen when a live video becomes VOD. skip timeout\n    // creation.\n\n\n    if (typeof mup !== 'number' || mup <= 0) {\n      if (mup < 0) {\n        this.logger_(\"found invalid minimumUpdatePeriod of \" + mup + \", not setting a timeout\");\n      }\n\n      return;\n    }\n\n    this.createMUPTimeout_(mup);\n  };\n\n  _proto.createMUPTimeout_ = function createMUPTimeout_(mup) {\n    var mpl = this.masterPlaylistLoader_;\n    mpl.minimumUpdatePeriodTimeout_ = window$1.setTimeout(function () {\n      mpl.minimumUpdatePeriodTimeout_ = null;\n      mpl.trigger('minimumUpdatePeriod');\n      mpl.createMUPTimeout_(mup);\n    }, mup);\n  }\n  /**\n   * Sends request to refresh the master xml and updates the parsed master manifest\n   */\n  ;\n\n  _proto.refreshXml_ = function refreshXml_() {\n    var _this8 = this;\n\n    this.requestMaster_(function (req, masterChanged) {\n      if (!masterChanged) {\n        return;\n      }\n\n      if (_this8.media_) {\n        _this8.media_ = _this8.masterPlaylistLoader_.master.playlists[_this8.media_.id];\n      } // This will filter out updated sidx info from the mapping\n\n\n      _this8.masterPlaylistLoader_.sidxMapping_ = filterChangedSidxMappings(_this8.masterPlaylistLoader_.master, _this8.masterPlaylistLoader_.sidxMapping_);\n\n      _this8.addSidxSegments_(_this8.media(), _this8.state, function (sidxChanged) {\n        // TODO: do we need to reload the current playlist?\n        _this8.refreshMedia_(_this8.media().id);\n      });\n    });\n  }\n  /**\n   * Refreshes the media playlist by re-parsing the master xml and updating playlist\n   * references. If this is an alternate loader, the updated parsed manifest is retrieved\n   * from the master loader.\n   */\n  ;\n\n  _proto.refreshMedia_ = function refreshMedia_(mediaID) {\n    var _this9 = this;\n\n    if (!mediaID) {\n      throw new Error('refreshMedia_ must take a media id');\n    } // for master we have to reparse the master xml\n    // to re-create segments based on current timing values\n    // which may change media. We only skip updating master\n    // if this is the first time this.media_ is being set.\n    // as master was just parsed in that case.\n\n\n    if (this.media_ && this.isMaster_) {\n      this.handleMaster_();\n    }\n\n    var playlists = this.masterPlaylistLoader_.master.playlists;\n    var mediaChanged = !this.media_ || this.media_ !== playlists[mediaID];\n\n    if (mediaChanged) {\n      this.media_ = playlists[mediaID];\n    } else {\n      this.trigger('playlistunchanged');\n    }\n\n    if (!this.mediaUpdateTimeout) {\n      var createMediaUpdateTimeout = function createMediaUpdateTimeout() {\n        if (_this9.media().endList) {\n          return;\n        }\n\n        _this9.mediaUpdateTimeout = window$1.setTimeout(function () {\n          _this9.trigger('mediaupdatetimeout');\n\n          createMediaUpdateTimeout();\n        }, refreshDelay(_this9.media(), Boolean(mediaChanged)));\n      };\n\n      createMediaUpdateTimeout();\n    }\n\n    this.trigger('loadedplaylist');\n  };\n\n  return DashPlaylistLoader;\n}(EventTarget);\n\nvar Config = {\n  GOAL_BUFFER_LENGTH: 30,\n  MAX_GOAL_BUFFER_LENGTH: 60,\n  BACK_BUFFER_LENGTH: 30,\n  GOAL_BUFFER_LENGTH_RATE: 1,\n  // 0.5 MB/s\n  INITIAL_BANDWIDTH: 4194304,\n  // A fudge factor to apply to advertised playlist bitrates to account for\n  // temporary flucations in client bandwidth\n  BANDWIDTH_VARIANCE: 1.2,\n  // How much of the buffer must be filled before we consider upswitching\n  BUFFER_LOW_WATER_LINE: 0,\n  MAX_BUFFER_LOW_WATER_LINE: 30,\n  // TODO: Remove this when experimentalBufferBasedABR is removed\n  EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE: 16,\n  BUFFER_LOW_WATER_LINE_RATE: 1,\n  // If the buffer is greater than the high water line, we won't switch down\n  BUFFER_HIGH_WATER_LINE: 30\n};\n\nvar stringToArrayBuffer = function stringToArrayBuffer(string) {\n  var view = new Uint8Array(new ArrayBuffer(string.length));\n\n  for (var i = 0; i < string.length; i++) {\n    view[i] = string.charCodeAt(i);\n  }\n\n  return view.buffer;\n};\n/* global Blob, BlobBuilder, Worker */\n// unify worker interface\n\n\nvar browserWorkerPolyFill = function browserWorkerPolyFill(workerObj) {\n  // node only supports on/off\n  workerObj.on = workerObj.addEventListener;\n  workerObj.off = workerObj.removeEventListener;\n  return workerObj;\n};\n\nvar createObjectURL = function createObjectURL(str) {\n  try {\n    return URL.createObjectURL(new Blob([str], {\n      type: 'application/javascript'\n    }));\n  } catch (e) {\n    var blob = new BlobBuilder();\n    blob.append(str);\n    return URL.createObjectURL(blob.getBlob());\n  }\n};\n\nvar factory = function factory(code) {\n  return function () {\n    var objectUrl = createObjectURL(code);\n    var worker = browserWorkerPolyFill(new Worker(objectUrl));\n    worker.objURL = objectUrl;\n    var terminate = worker.terminate;\n    worker.on = worker.addEventListener;\n    worker.off = worker.removeEventListener;\n\n    worker.terminate = function () {\n      URL.revokeObjectURL(objectUrl);\n      return terminate.call(this);\n    };\n\n    return worker;\n  };\n};\n\nvar transform = function transform(code) {\n  return \"var browserWorkerPolyFill = \" + browserWorkerPolyFill.toString() + \";\\n\" + 'browserWorkerPolyFill(self);\\n' + code;\n};\n\nvar getWorkerString = function getWorkerString(fn) {\n  return fn.toString().replace(/^function.+?{/, '').slice(0, -1);\n};\n/* rollup-plugin-worker-factory start for worker!/Users/gsinger/repos/clean/http-streaming/src/transmuxer-worker.js */\n\n\nvar workerCode$1 = transform(getWorkerString(function () {\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * A lightweight readable stream implemention that handles event dispatching.\n   * Objects that inherit from streams should call init in their constructors.\n   */\n  var Stream = function Stream() {\n    this.init = function () {\n      var listeners = {};\n      /**\n       * Add a listener for a specified event type.\n       * @param type {string} the event name\n       * @param listener {function} the callback to be invoked when an event of\n       * the specified type occurs\n       */\n\n      this.on = function (type, listener) {\n        if (!listeners[type]) {\n          listeners[type] = [];\n        }\n\n        listeners[type] = listeners[type].concat(listener);\n      };\n      /**\n       * Remove a listener for a specified event type.\n       * @param type {string} the event name\n       * @param listener {function} a function previously registered for this\n       * type of event through `on`\n       */\n\n\n      this.off = function (type, listener) {\n        var index;\n\n        if (!listeners[type]) {\n          return false;\n        }\n\n        index = listeners[type].indexOf(listener);\n        listeners[type] = listeners[type].slice();\n        listeners[type].splice(index, 1);\n        return index > -1;\n      };\n      /**\n       * Trigger an event of the specified type on this stream. Any additional\n       * arguments to this function are passed as parameters to event listeners.\n       * @param type {string} the event name\n       */\n\n\n      this.trigger = function (type) {\n        var callbacks, i, length, args;\n        callbacks = listeners[type];\n\n        if (!callbacks) {\n          return;\n        } // Slicing the arguments on every invocation of this method\n        // can add a significant amount of overhead. Avoid the\n        // intermediate object creation for the common case of a\n        // single callback argument\n\n\n        if (arguments.length === 2) {\n          length = callbacks.length;\n\n          for (i = 0; i < length; ++i) {\n            callbacks[i].call(this, arguments[1]);\n          }\n        } else {\n          args = [];\n          i = arguments.length;\n\n          for (i = 1; i < arguments.length; ++i) {\n            args.push(arguments[i]);\n          }\n\n          length = callbacks.length;\n\n          for (i = 0; i < length; ++i) {\n            callbacks[i].apply(this, args);\n          }\n        }\n      };\n      /**\n       * Destroys the stream and cleans up.\n       */\n\n\n      this.dispose = function () {\n        listeners = {};\n      };\n    };\n  };\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   * @param destination {stream} the stream that will receive all `data` events\n   * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n   *                            when the current stream emits a 'done' event\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n\n\n  Stream.prototype.pipe = function (destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n    this.on('done', function (flushSource) {\n      destination.flush(flushSource);\n    });\n    this.on('partialdone', function (flushSource) {\n      destination.partialFlush(flushSource);\n    });\n    this.on('endedtimeline', function (flushSource) {\n      destination.endTimeline(flushSource);\n    });\n    this.on('reset', function (flushSource) {\n      destination.reset(flushSource);\n    });\n    return destination;\n  }; // Default stream functions that are expected to be overridden to perform\n  // actual work. These are provided by the prototype as a sort of no-op\n  // implementation so that we don't have to check for their existence in the\n  // `pipe` function above.\n\n\n  Stream.prototype.push = function (data) {\n    this.trigger('data', data);\n  };\n\n  Stream.prototype.flush = function (flushSource) {\n    this.trigger('done', flushSource);\n  };\n\n  Stream.prototype.partialFlush = function (flushSource) {\n    this.trigger('partialdone', flushSource);\n  };\n\n  Stream.prototype.endTimeline = function (flushSource) {\n    this.trigger('endedtimeline', flushSource);\n  };\n\n  Stream.prototype.reset = function (flushSource) {\n    this.trigger('reset', flushSource);\n  };\n\n  var stream = Stream;\n  var MAX_UINT32$1 = Math.pow(2, 32);\n\n  var getUint64$2 = function getUint64(uint8) {\n    var dv = new DataView(uint8.buffer, uint8.byteOffset, uint8.byteLength);\n    var value;\n\n    if (dv.getBigUint64) {\n      value = dv.getBigUint64(0);\n\n      if (value < Number.MAX_SAFE_INTEGER) {\n        return Number(value);\n      }\n\n      return value;\n    }\n\n    return dv.getUint32(0) * MAX_UINT32$1 + dv.getUint32(4);\n  };\n\n  var numbers = {\n    getUint64: getUint64$2,\n    MAX_UINT32: MAX_UINT32$1\n  };\n  var MAX_UINT32 = numbers.MAX_UINT32;\n  var box, dinf, esds, ftyp, mdat, mfhd, minf, moof, moov, mvex, mvhd, trak, tkhd, mdia, mdhd, hdlr, sdtp, stbl, stsd, traf, trex, trun$1, types, MAJOR_BRAND, MINOR_VERSION, AVC1_BRAND, VIDEO_HDLR, AUDIO_HDLR, HDLR_TYPES, VMHD, SMHD, DREF, STCO, STSC, STSZ, STTS; // pre-calculate constants\n\n  (function () {\n    var i;\n    types = {\n      avc1: [],\n      // codingname\n      avcC: [],\n      btrt: [],\n      dinf: [],\n      dref: [],\n      esds: [],\n      ftyp: [],\n      hdlr: [],\n      mdat: [],\n      mdhd: [],\n      mdia: [],\n      mfhd: [],\n      minf: [],\n      moof: [],\n      moov: [],\n      mp4a: [],\n      // codingname\n      mvex: [],\n      mvhd: [],\n      pasp: [],\n      sdtp: [],\n      smhd: [],\n      stbl: [],\n      stco: [],\n      stsc: [],\n      stsd: [],\n      stsz: [],\n      stts: [],\n      styp: [],\n      tfdt: [],\n      tfhd: [],\n      traf: [],\n      trak: [],\n      trun: [],\n      trex: [],\n      tkhd: [],\n      vmhd: []\n    }; // In environments where Uint8Array is undefined (e.g., IE8), skip set up so that we\n    // don't throw an error\n\n    if (typeof Uint8Array === 'undefined') {\n      return;\n    }\n\n    for (i in types) {\n      if (types.hasOwnProperty(i)) {\n        types[i] = [i.charCodeAt(0), i.charCodeAt(1), i.charCodeAt(2), i.charCodeAt(3)];\n      }\n    }\n\n    MAJOR_BRAND = new Uint8Array(['i'.charCodeAt(0), 's'.charCodeAt(0), 'o'.charCodeAt(0), 'm'.charCodeAt(0)]);\n    AVC1_BRAND = new Uint8Array(['a'.charCodeAt(0), 'v'.charCodeAt(0), 'c'.charCodeAt(0), '1'.charCodeAt(0)]);\n    MINOR_VERSION = new Uint8Array([0, 0, 0, 1]);\n    VIDEO_HDLR = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65, 0x6f, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n    ]);\n    AUDIO_HDLR = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x53, 0x6f, 0x75, 0x6e, 0x64, 0x48, 0x61, 0x6e, 0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\n    ]);\n    HDLR_TYPES = {\n      video: VIDEO_HDLR,\n      audio: AUDIO_HDLR\n    };\n    DREF = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n    ]);\n    SMHD = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, // balance, 0 means centered\n    0x00, 0x00 // reserved\n    ]);\n    STCO = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    STSC = STCO;\n    STSZ = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00 // sample_count\n    ]);\n    STTS = STCO;\n    VMHD = new Uint8Array([0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00 // opcolor\n    ]);\n  })();\n\n  box = function box(type) {\n    var payload = [],\n        size = 0,\n        i,\n        result,\n        view;\n\n    for (i = 1; i < arguments.length; i++) {\n      payload.push(arguments[i]);\n    }\n\n    i = payload.length; // calculate the total size we need to allocate\n\n    while (i--) {\n      size += payload[i].byteLength;\n    }\n\n    result = new Uint8Array(size + 8);\n    view = new DataView(result.buffer, result.byteOffset, result.byteLength);\n    view.setUint32(0, result.byteLength);\n    result.set(type, 4); // copy the payload into the result\n\n    for (i = 0, size = 8; i < payload.length; i++) {\n      result.set(payload[i], size);\n      size += payload[i].byteLength;\n    }\n\n    return result;\n  };\n\n  dinf = function dinf() {\n    return box(types.dinf, box(types.dref, DREF));\n  };\n\n  esds = function esds(track) {\n    return box(types.esds, new Uint8Array([0x00, // version\n    0x00, 0x00, 0x00, // flags\n    // ES_Descriptor\n    0x03, // tag, ES_DescrTag\n    0x19, // length\n    0x00, 0x00, // ES_ID\n    0x00, // streamDependenceFlag, URL_flag, reserved, streamPriority\n    // DecoderConfigDescriptor\n    0x04, // tag, DecoderConfigDescrTag\n    0x11, // length\n    0x40, // object type\n    0x15, // streamType\n    0x00, 0x06, 0x00, // bufferSizeDB\n    0x00, 0x00, 0xda, 0xc0, // maxBitrate\n    0x00, 0x00, 0xda, 0xc0, // avgBitrate\n    // DecoderSpecificInfo\n    0x05, // tag, DecoderSpecificInfoTag\n    0x02, // length\n    // ISO/IEC 14496-3, AudioSpecificConfig\n    // for samplingFrequencyIndex see ISO/IEC 13818-7:2006, 8.1.3.2.2, Table 35\n    track.audioobjecttype << 3 | track.samplingfrequencyindex >>> 1, track.samplingfrequencyindex << 7 | track.channelcount << 3, 0x06, 0x01, 0x02 // GASpecificConfig\n    ]));\n  };\n\n  ftyp = function ftyp() {\n    return box(types.ftyp, MAJOR_BRAND, MINOR_VERSION, MAJOR_BRAND, AVC1_BRAND);\n  };\n\n  hdlr = function hdlr(type) {\n    return box(types.hdlr, HDLR_TYPES[type]);\n  };\n\n  mdat = function mdat(data) {\n    return box(types.mdat, data);\n  };\n\n  mdhd = function mdhd(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x02, // creation_time\n    0x00, 0x00, 0x00, 0x03, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n    track.duration >>> 24 & 0xFF, track.duration >>> 16 & 0xFF, track.duration >>> 8 & 0xFF, track.duration & 0xFF, // duration\n    0x55, 0xc4, // 'und' language (undetermined)\n    0x00, 0x00]); // Use the sample rate from the track metadata, when it is\n    // defined. The sample rate can be parsed out of an ADTS header, for\n    // instance.\n\n    if (track.samplerate) {\n      result[12] = track.samplerate >>> 24 & 0xFF;\n      result[13] = track.samplerate >>> 16 & 0xFF;\n      result[14] = track.samplerate >>> 8 & 0xFF;\n      result[15] = track.samplerate & 0xFF;\n    }\n\n    return box(types.mdhd, result);\n  };\n\n  mdia = function mdia(track) {\n    return box(types.mdia, mdhd(track), hdlr(track.type), minf(track));\n  };\n\n  mfhd = function mfhd(sequenceNumber) {\n    return box(types.mfhd, new Uint8Array([0x00, 0x00, 0x00, 0x00, // flags\n    (sequenceNumber & 0xFF000000) >> 24, (sequenceNumber & 0xFF0000) >> 16, (sequenceNumber & 0xFF00) >> 8, sequenceNumber & 0xFF // sequence_number\n    ]));\n  };\n\n  minf = function minf(track) {\n    return box(types.minf, track.type === 'video' ? box(types.vmhd, VMHD) : box(types.smhd, SMHD), dinf(), stbl(track));\n  };\n\n  moof = function moof(sequenceNumber, tracks) {\n    var trackFragments = [],\n        i = tracks.length; // build traf boxes for each track fragment\n\n    while (i--) {\n      trackFragments[i] = traf(tracks[i]);\n    }\n\n    return box.apply(null, [types.moof, mfhd(sequenceNumber)].concat(trackFragments));\n  };\n  /**\n   * Returns a movie box.\n   * @param tracks {array} the tracks associated with this movie\n   * @see ISO/IEC 14496-12:2012(E), section 8.2.1\n   */\n\n\n  moov = function moov(tracks) {\n    var i = tracks.length,\n        boxes = [];\n\n    while (i--) {\n      boxes[i] = trak(tracks[i]);\n    }\n\n    return box.apply(null, [types.moov, mvhd(0xffffffff)].concat(boxes).concat(mvex(tracks)));\n  };\n\n  mvex = function mvex(tracks) {\n    var i = tracks.length,\n        boxes = [];\n\n    while (i--) {\n      boxes[i] = trex(tracks[i]);\n    }\n\n    return box.apply(null, [types.mvex].concat(boxes));\n  };\n\n  mvhd = function mvhd(duration) {\n    var bytes = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // creation_time\n    0x00, 0x00, 0x00, 0x02, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n    (duration & 0xFF000000) >> 24, (duration & 0xFF0000) >> 16, (duration & 0xFF00) >> 8, duration & 0xFF, // duration\n    0x00, 0x01, 0x00, 0x00, // 1.0 rate\n    0x01, 0x00, // 1.0 volume\n    0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n    0xff, 0xff, 0xff, 0xff // next_track_ID\n    ]);\n    return box(types.mvhd, bytes);\n  };\n\n  sdtp = function sdtp(track) {\n    var samples = track.samples || [],\n        bytes = new Uint8Array(4 + samples.length),\n        flags,\n        i; // leave the full box header (4 bytes) all zero\n    // write the sample table\n\n    for (i = 0; i < samples.length; i++) {\n      flags = samples[i].flags;\n      bytes[i + 4] = flags.dependsOn << 4 | flags.isDependedOn << 2 | flags.hasRedundancy;\n    }\n\n    return box(types.sdtp, bytes);\n  };\n\n  stbl = function stbl(track) {\n    return box(types.stbl, stsd(track), box(types.stts, STTS), box(types.stsc, STSC), box(types.stsz, STSZ), box(types.stco, STCO));\n  };\n\n  (function () {\n    var videoSample, audioSample;\n\n    stsd = function stsd(track) {\n      return box(types.stsd, new Uint8Array([0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01]), track.type === 'video' ? videoSample(track) : audioSample(track));\n    };\n\n    videoSample = function videoSample(track) {\n      var sps = track.sps || [],\n          pps = track.pps || [],\n          sequenceParameterSets = [],\n          pictureParameterSets = [],\n          i,\n          avc1Box; // assemble the SPSs\n\n      for (i = 0; i < sps.length; i++) {\n        sequenceParameterSets.push((sps[i].byteLength & 0xFF00) >>> 8);\n        sequenceParameterSets.push(sps[i].byteLength & 0xFF); // sequenceParameterSetLength\n\n        sequenceParameterSets = sequenceParameterSets.concat(Array.prototype.slice.call(sps[i])); // SPS\n      } // assemble the PPSs\n\n\n      for (i = 0; i < pps.length; i++) {\n        pictureParameterSets.push((pps[i].byteLength & 0xFF00) >>> 8);\n        pictureParameterSets.push(pps[i].byteLength & 0xFF);\n        pictureParameterSets = pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));\n      }\n\n      avc1Box = [types.avc1, new Uint8Array([0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // pre_defined\n      (track.width & 0xff00) >> 8, track.width & 0xff, // width\n      (track.height & 0xff00) >> 8, track.height & 0xff, // height\n      0x00, 0x48, 0x00, 0x00, // horizresolution\n      0x00, 0x48, 0x00, 0x00, // vertresolution\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // frame_count\n      0x13, 0x76, 0x69, 0x64, 0x65, 0x6f, 0x6a, 0x73, 0x2d, 0x63, 0x6f, 0x6e, 0x74, 0x72, 0x69, 0x62, 0x2d, 0x68, 0x6c, 0x73, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // compressorname\n      0x00, 0x18, // depth = 24\n      0x11, 0x11 // pre_defined = -1\n      ]), box(types.avcC, new Uint8Array([0x01, // configurationVersion\n      track.profileIdc, // AVCProfileIndication\n      track.profileCompatibility, // profile_compatibility\n      track.levelIdc, // AVCLevelIndication\n      0xff // lengthSizeMinusOne, hard-coded to 4 bytes\n      ].concat([sps.length], // numOfSequenceParameterSets\n      sequenceParameterSets, // \"SPS\"\n      [pps.length], // numOfPictureParameterSets\n      pictureParameterSets // \"PPS\"\n      ))), box(types.btrt, new Uint8Array([0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n      0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n      0x00, 0x2d, 0xc6, 0xc0 // avgBitrate\n      ]))];\n\n      if (track.sarRatio) {\n        var hSpacing = track.sarRatio[0],\n            vSpacing = track.sarRatio[1];\n        avc1Box.push(box(types.pasp, new Uint8Array([(hSpacing & 0xFF000000) >> 24, (hSpacing & 0xFF0000) >> 16, (hSpacing & 0xFF00) >> 8, hSpacing & 0xFF, (vSpacing & 0xFF000000) >> 24, (vSpacing & 0xFF0000) >> 16, (vSpacing & 0xFF00) >> 8, vSpacing & 0xFF])));\n      }\n\n      return box.apply(null, avc1Box);\n    };\n\n    audioSample = function audioSample(track) {\n      return box(types.mp4a, new Uint8Array([// SampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      // AudioSampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      (track.channelcount & 0xff00) >> 8, track.channelcount & 0xff, // channelcount\n      (track.samplesize & 0xff00) >> 8, track.samplesize & 0xff, // samplesize\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      (track.samplerate & 0xff00) >> 8, track.samplerate & 0xff, 0x00, 0x00 // samplerate, 16.16\n      // MP4AudioSampleEntry, ISO/IEC 14496-14\n      ]), esds(track));\n    };\n  })();\n\n  tkhd = function tkhd(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x07, // flags\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x00, // reserved\n    (track.duration & 0xFF000000) >> 24, (track.duration & 0xFF0000) >> 16, (track.duration & 0xFF00) >> 8, track.duration & 0xFF, // duration\n    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, // layer\n    0x00, 0x00, // alternate_group\n    0x01, 0x00, // non-audio track volume\n    0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    (track.width & 0xFF00) >> 8, track.width & 0xFF, 0x00, 0x00, // width\n    (track.height & 0xFF00) >> 8, track.height & 0xFF, 0x00, 0x00 // height\n    ]);\n    return box(types.tkhd, result);\n  };\n  /**\n   * Generate a track fragment (traf) box. A traf box collects metadata\n   * about tracks in a movie fragment (moof) box.\n   */\n\n\n  traf = function traf(track) {\n    var trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun, sampleDependencyTable, dataOffset, upperWordBaseMediaDecodeTime, lowerWordBaseMediaDecodeTime;\n    trackFragmentHeader = box(types.tfhd, new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x3a, // flags\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x01, // sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x00, 0x00, 0x00 // default_sample_flags\n    ]));\n    upperWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime / MAX_UINT32);\n    lowerWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime % MAX_UINT32);\n    trackFragmentDecodeTime = box(types.tfdt, new Uint8Array([0x01, // version 1\n    0x00, 0x00, 0x00, // flags\n    // baseMediaDecodeTime\n    upperWordBaseMediaDecodeTime >>> 24 & 0xFF, upperWordBaseMediaDecodeTime >>> 16 & 0xFF, upperWordBaseMediaDecodeTime >>> 8 & 0xFF, upperWordBaseMediaDecodeTime & 0xFF, lowerWordBaseMediaDecodeTime >>> 24 & 0xFF, lowerWordBaseMediaDecodeTime >>> 16 & 0xFF, lowerWordBaseMediaDecodeTime >>> 8 & 0xFF, lowerWordBaseMediaDecodeTime & 0xFF])); // the data offset specifies the number of bytes from the start of\n    // the containing moof to the first payload byte of the associated\n    // mdat\n\n    dataOffset = 32 + // tfhd\n    20 + // tfdt\n    8 + // traf header\n    16 + // mfhd\n    8 + // moof header\n    8; // mdat header\n    // audio tracks require less metadata\n\n    if (track.type === 'audio') {\n      trackFragmentRun = trun$1(track, dataOffset);\n      return box(types.traf, trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun);\n    } // video tracks should contain an independent and disposable samples\n    // box (sdtp)\n    // generate one and adjust offsets to match\n\n\n    sampleDependencyTable = sdtp(track);\n    trackFragmentRun = trun$1(track, sampleDependencyTable.length + dataOffset);\n    return box(types.traf, trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun, sampleDependencyTable);\n  };\n  /**\n   * Generate a track box.\n   * @param track {object} a track definition\n   * @return {Uint8Array} the track box\n   */\n\n\n  trak = function trak(track) {\n    track.duration = track.duration || 0xffffffff;\n    return box(types.trak, tkhd(track), mdia(track));\n  };\n\n  trex = function trex(track) {\n    var result = new Uint8Array([0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    (track.id & 0xFF000000) >> 24, (track.id & 0xFF0000) >> 16, (track.id & 0xFF00) >> 8, track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n    ]); // the last two bytes of default_sample_flags is the sample\n    // degradation priority, a hint about the importance of this sample\n    // relative to others. Lower the degradation priority for all sample\n    // types other than video.\n\n    if (track.type !== 'video') {\n      result[result.length - 1] = 0x00;\n    }\n\n    return box(types.trex, result);\n  };\n\n  (function () {\n    var audioTrun, videoTrun, trunHeader; // This method assumes all samples are uniform. That is, if a\n    // duration is present for the first sample, it will be present for\n    // all subsequent samples.\n    // see ISO/IEC 14496-12:2012, Section 8.8.8.1\n\n    trunHeader = function trunHeader(samples, offset) {\n      var durationPresent = 0,\n          sizePresent = 0,\n          flagsPresent = 0,\n          compositionTimeOffset = 0; // trun flag constants\n\n      if (samples.length) {\n        if (samples[0].duration !== undefined) {\n          durationPresent = 0x1;\n        }\n\n        if (samples[0].size !== undefined) {\n          sizePresent = 0x2;\n        }\n\n        if (samples[0].flags !== undefined) {\n          flagsPresent = 0x4;\n        }\n\n        if (samples[0].compositionTimeOffset !== undefined) {\n          compositionTimeOffset = 0x8;\n        }\n      }\n\n      return [0x00, // version 0\n      0x00, durationPresent | sizePresent | flagsPresent | compositionTimeOffset, 0x01, // flags\n      (samples.length & 0xFF000000) >>> 24, (samples.length & 0xFF0000) >>> 16, (samples.length & 0xFF00) >>> 8, samples.length & 0xFF, // sample_count\n      (offset & 0xFF000000) >>> 24, (offset & 0xFF0000) >>> 16, (offset & 0xFF00) >>> 8, offset & 0xFF // data_offset\n      ];\n    };\n\n    videoTrun = function videoTrun(track, offset) {\n      var bytesOffest, bytes, header, samples, sample, i;\n      samples = track.samples || [];\n      offset += 8 + 12 + 16 * samples.length;\n      header = trunHeader(samples, offset);\n      bytes = new Uint8Array(header.length + samples.length * 16);\n      bytes.set(header);\n      bytesOffest = header.length;\n\n      for (i = 0; i < samples.length; i++) {\n        sample = samples[i];\n        bytes[bytesOffest++] = (sample.duration & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.duration & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.duration & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.duration & 0xFF; // sample_duration\n\n        bytes[bytesOffest++] = (sample.size & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.size & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.size & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.size & 0xFF; // sample_size\n\n        bytes[bytesOffest++] = sample.flags.isLeading << 2 | sample.flags.dependsOn;\n        bytes[bytesOffest++] = sample.flags.isDependedOn << 6 | sample.flags.hasRedundancy << 4 | sample.flags.paddingValue << 1 | sample.flags.isNonSyncSample;\n        bytes[bytesOffest++] = sample.flags.degradationPriority & 0xF0 << 8;\n        bytes[bytesOffest++] = sample.flags.degradationPriority & 0x0F; // sample_flags\n\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.compositionTimeOffset & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.compositionTimeOffset & 0xFF; // sample_composition_time_offset\n      }\n\n      return box(types.trun, bytes);\n    };\n\n    audioTrun = function audioTrun(track, offset) {\n      var bytes, bytesOffest, header, samples, sample, i;\n      samples = track.samples || [];\n      offset += 8 + 12 + 8 * samples.length;\n      header = trunHeader(samples, offset);\n      bytes = new Uint8Array(header.length + samples.length * 8);\n      bytes.set(header);\n      bytesOffest = header.length;\n\n      for (i = 0; i < samples.length; i++) {\n        sample = samples[i];\n        bytes[bytesOffest++] = (sample.duration & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.duration & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.duration & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.duration & 0xFF; // sample_duration\n\n        bytes[bytesOffest++] = (sample.size & 0xFF000000) >>> 24;\n        bytes[bytesOffest++] = (sample.size & 0xFF0000) >>> 16;\n        bytes[bytesOffest++] = (sample.size & 0xFF00) >>> 8;\n        bytes[bytesOffest++] = sample.size & 0xFF; // sample_size\n      }\n\n      return box(types.trun, bytes);\n    };\n\n    trun$1 = function trun(track, offset) {\n      if (track.type === 'audio') {\n        return audioTrun(track, offset);\n      }\n\n      return videoTrun(track, offset);\n    };\n  })();\n\n  var mp4Generator = {\n    ftyp: ftyp,\n    mdat: mdat,\n    moof: moof,\n    moov: moov,\n    initSegment: function initSegment(tracks) {\n      var fileType = ftyp(),\n          movie = moov(tracks),\n          result;\n      result = new Uint8Array(fileType.byteLength + movie.byteLength);\n      result.set(fileType);\n      result.set(movie, fileType.byteLength);\n      return result;\n    }\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n  // Convert an array of nal units into an array of frames with each frame being\n  // composed of the nal units that make up that frame\n  // Also keep track of cummulative data about the frame from the nal units such\n  // as the frame duration, starting pts, etc.\n\n  var groupNalsIntoFrames = function groupNalsIntoFrames(nalUnits) {\n    var i,\n        currentNal,\n        currentFrame = [],\n        frames = []; // TODO added for LHLS, make sure this is OK\n\n    frames.byteLength = 0;\n    frames.nalCount = 0;\n    frames.duration = 0;\n    currentFrame.byteLength = 0;\n\n    for (i = 0; i < nalUnits.length; i++) {\n      currentNal = nalUnits[i]; // Split on 'aud'-type nal units\n\n      if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        // Since the very first nal unit is expected to be an AUD\n        // only push to the frames array when currentFrame is not empty\n        if (currentFrame.length) {\n          currentFrame.duration = currentNal.dts - currentFrame.dts; // TODO added for LHLS, make sure this is OK\n\n          frames.byteLength += currentFrame.byteLength;\n          frames.nalCount += currentFrame.length;\n          frames.duration += currentFrame.duration;\n          frames.push(currentFrame);\n        }\n\n        currentFrame = [currentNal];\n        currentFrame.byteLength = currentNal.data.byteLength;\n        currentFrame.pts = currentNal.pts;\n        currentFrame.dts = currentNal.dts;\n      } else {\n        // Specifically flag key frames for ease of use later\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          currentFrame.keyFrame = true;\n        }\n\n        currentFrame.duration = currentNal.dts - currentFrame.dts;\n        currentFrame.byteLength += currentNal.data.byteLength;\n        currentFrame.push(currentNal);\n      }\n    } // For the last frame, use the duration of the previous frame if we\n    // have nothing better to go on\n\n\n    if (frames.length && (!currentFrame.duration || currentFrame.duration <= 0)) {\n      currentFrame.duration = frames[frames.length - 1].duration;\n    } // Push the final frame\n    // TODO added for LHLS, make sure this is OK\n\n\n    frames.byteLength += currentFrame.byteLength;\n    frames.nalCount += currentFrame.length;\n    frames.duration += currentFrame.duration;\n    frames.push(currentFrame);\n    return frames;\n  }; // Convert an array of frames into an array of Gop with each Gop being composed\n  // of the frames that make up that Gop\n  // Also keep track of cummulative data about the Gop from the frames such as the\n  // Gop duration, starting pts, etc.\n\n\n  var groupFramesIntoGops = function groupFramesIntoGops(frames) {\n    var i,\n        currentFrame,\n        currentGop = [],\n        gops = []; // We must pre-set some of the values on the Gop since we\n    // keep running totals of these values\n\n    currentGop.byteLength = 0;\n    currentGop.nalCount = 0;\n    currentGop.duration = 0;\n    currentGop.pts = frames[0].pts;\n    currentGop.dts = frames[0].dts; // store some metadata about all the Gops\n\n    gops.byteLength = 0;\n    gops.nalCount = 0;\n    gops.duration = 0;\n    gops.pts = frames[0].pts;\n    gops.dts = frames[0].dts;\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      if (currentFrame.keyFrame) {\n        // Since the very first frame is expected to be an keyframe\n        // only push to the gops array when currentGop is not empty\n        if (currentGop.length) {\n          gops.push(currentGop);\n          gops.byteLength += currentGop.byteLength;\n          gops.nalCount += currentGop.nalCount;\n          gops.duration += currentGop.duration;\n        }\n\n        currentGop = [currentFrame];\n        currentGop.nalCount = currentFrame.length;\n        currentGop.byteLength = currentFrame.byteLength;\n        currentGop.pts = currentFrame.pts;\n        currentGop.dts = currentFrame.dts;\n        currentGop.duration = currentFrame.duration;\n      } else {\n        currentGop.duration += currentFrame.duration;\n        currentGop.nalCount += currentFrame.length;\n        currentGop.byteLength += currentFrame.byteLength;\n        currentGop.push(currentFrame);\n      }\n    }\n\n    if (gops.length && currentGop.duration <= 0) {\n      currentGop.duration = gops[gops.length - 1].duration;\n    }\n\n    gops.byteLength += currentGop.byteLength;\n    gops.nalCount += currentGop.nalCount;\n    gops.duration += currentGop.duration; // push the final Gop\n\n    gops.push(currentGop);\n    return gops;\n  };\n  /*\n   * Search for the first keyframe in the GOPs and throw away all frames\n   * until that keyframe. Then extend the duration of the pulled keyframe\n   * and pull the PTS and DTS of the keyframe so that it covers the time\n   * range of the frames that were disposed.\n   *\n   * @param {Array} gops video GOPs\n   * @returns {Array} modified video GOPs\n   */\n\n\n  var extendFirstKeyFrame = function extendFirstKeyFrame(gops) {\n    var currentGop;\n\n    if (!gops[0][0].keyFrame && gops.length > 1) {\n      // Remove the first GOP\n      currentGop = gops.shift();\n      gops.byteLength -= currentGop.byteLength;\n      gops.nalCount -= currentGop.nalCount; // Extend the first frame of what is now the\n      // first gop to cover the time period of the\n      // frames we just removed\n\n      gops[0][0].dts = currentGop.dts;\n      gops[0][0].pts = currentGop.pts;\n      gops[0][0].duration += currentGop.duration;\n    }\n\n    return gops;\n  };\n  /**\n   * Default sample object\n   * see ISO/IEC 14496-12:2012, section 8.6.4.3\n   */\n\n\n  var createDefaultSample = function createDefaultSample() {\n    return {\n      size: 0,\n      flags: {\n        isLeading: 0,\n        dependsOn: 1,\n        isDependedOn: 0,\n        hasRedundancy: 0,\n        degradationPriority: 0,\n        isNonSyncSample: 1\n      }\n    };\n  };\n  /*\n   * Collates information from a video frame into an object for eventual\n   * entry into an MP4 sample table.\n   *\n   * @param {Object} frame the video frame\n   * @param {Number} dataOffset the byte offset to position the sample\n   * @return {Object} object containing sample table info for a frame\n   */\n\n\n  var sampleForFrame = function sampleForFrame(frame, dataOffset) {\n    var sample = createDefaultSample();\n    sample.dataOffset = dataOffset;\n    sample.compositionTimeOffset = frame.pts - frame.dts;\n    sample.duration = frame.duration;\n    sample.size = 4 * frame.length; // Space for nal unit size\n\n    sample.size += frame.byteLength;\n\n    if (frame.keyFrame) {\n      sample.flags.dependsOn = 2;\n      sample.flags.isNonSyncSample = 0;\n    }\n\n    return sample;\n  }; // generate the track's sample table from an array of gops\n\n\n  var generateSampleTable$1 = function generateSampleTable(gops, baseDataOffset) {\n    var h,\n        i,\n        sample,\n        currentGop,\n        currentFrame,\n        dataOffset = baseDataOffset || 0,\n        samples = [];\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n        sample = sampleForFrame(currentFrame, dataOffset);\n        dataOffset += sample.size;\n        samples.push(sample);\n      }\n    }\n\n    return samples;\n  }; // generate the track's raw mdat data from an array of gops\n\n\n  var concatenateNalData = function concatenateNalData(gops) {\n    var h,\n        i,\n        j,\n        currentGop,\n        currentFrame,\n        currentNal,\n        dataOffset = 0,\n        nalsByteLength = gops.byteLength,\n        numberOfNals = gops.nalCount,\n        totalByteLength = nalsByteLength + 4 * numberOfNals,\n        data = new Uint8Array(totalByteLength),\n        view = new DataView(data.buffer); // For each Gop..\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h]; // For each Frame..\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i]; // For each NAL..\n\n        for (j = 0; j < currentFrame.length; j++) {\n          currentNal = currentFrame[j];\n          view.setUint32(dataOffset, currentNal.data.byteLength);\n          dataOffset += 4;\n          data.set(currentNal.data, dataOffset);\n          dataOffset += currentNal.data.byteLength;\n        }\n      }\n    }\n\n    return data;\n  }; // generate the track's sample table from a frame\n\n\n  var generateSampleTableForFrame = function generateSampleTableForFrame(frame, baseDataOffset) {\n    var sample,\n        dataOffset = baseDataOffset || 0,\n        samples = [];\n    sample = sampleForFrame(frame, dataOffset);\n    samples.push(sample);\n    return samples;\n  }; // generate the track's raw mdat data from a frame\n\n\n  var concatenateNalDataForFrame = function concatenateNalDataForFrame(frame) {\n    var i,\n        currentNal,\n        dataOffset = 0,\n        nalsByteLength = frame.byteLength,\n        numberOfNals = frame.length,\n        totalByteLength = nalsByteLength + 4 * numberOfNals,\n        data = new Uint8Array(totalByteLength),\n        view = new DataView(data.buffer); // For each NAL..\n\n    for (i = 0; i < frame.length; i++) {\n      currentNal = frame[i];\n      view.setUint32(dataOffset, currentNal.data.byteLength);\n      dataOffset += 4;\n      data.set(currentNal.data, dataOffset);\n      dataOffset += currentNal.data.byteLength;\n    }\n\n    return data;\n  };\n\n  var frameUtils = {\n    groupNalsIntoFrames: groupNalsIntoFrames,\n    groupFramesIntoGops: groupFramesIntoGops,\n    extendFirstKeyFrame: extendFirstKeyFrame,\n    generateSampleTable: generateSampleTable$1,\n    concatenateNalData: concatenateNalData,\n    generateSampleTableForFrame: generateSampleTableForFrame,\n    concatenateNalDataForFrame: concatenateNalDataForFrame\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var highPrefix = [33, 16, 5, 32, 164, 27];\n  var lowPrefix = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252];\n\n  var zeroFill = function zeroFill(count) {\n    var a = [];\n\n    while (count--) {\n      a.push(0);\n    }\n\n    return a;\n  };\n\n  var makeTable = function makeTable(metaTable) {\n    return Object.keys(metaTable).reduce(function (obj, key) {\n      obj[key] = new Uint8Array(metaTable[key].reduce(function (arr, part) {\n        return arr.concat(part);\n      }, []));\n      return obj;\n    }, {});\n  };\n\n  var silence;\n\n  var silence_1 = function silence_1() {\n    if (!silence) {\n      // Frames-of-silence to use for filling in missing AAC frames\n      var coneOfSilence = {\n        96000: [highPrefix, [227, 64], zeroFill(154), [56]],\n        88200: [highPrefix, [231], zeroFill(170), [56]],\n        64000: [highPrefix, [248, 192], zeroFill(240), [56]],\n        48000: [highPrefix, [255, 192], zeroFill(268), [55, 148, 128], zeroFill(54), [112]],\n        44100: [highPrefix, [255, 192], zeroFill(268), [55, 163, 128], zeroFill(84), [112]],\n        32000: [highPrefix, [255, 192], zeroFill(268), [55, 234], zeroFill(226), [112]],\n        24000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 112], zeroFill(126), [224]],\n        16000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 255], zeroFill(269), [223, 108], zeroFill(195), [1, 192]],\n        12000: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 253, 128], zeroFill(259), [56]],\n        11025: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 255, 192], zeroFill(268), [55, 175, 128], zeroFill(108), [112]],\n        8000: [lowPrefix, zeroFill(268), [3, 121, 16], zeroFill(47), [7]]\n      };\n      silence = makeTable(coneOfSilence);\n    }\n\n    return silence;\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n\n  var ONE_SECOND_IN_TS$4 = 90000,\n      // 90kHz clock\n  secondsToVideoTs,\n      secondsToAudioTs,\n      videoTsToSeconds,\n      audioTsToSeconds,\n      audioTsToVideoTs,\n      videoTsToAudioTs,\n      metadataTsToSeconds;\n\n  secondsToVideoTs = function secondsToVideoTs(seconds) {\n    return seconds * ONE_SECOND_IN_TS$4;\n  };\n\n  secondsToAudioTs = function secondsToAudioTs(seconds, sampleRate) {\n    return seconds * sampleRate;\n  };\n\n  videoTsToSeconds = function videoTsToSeconds(timestamp) {\n    return timestamp / ONE_SECOND_IN_TS$4;\n  };\n\n  audioTsToSeconds = function audioTsToSeconds(timestamp, sampleRate) {\n    return timestamp / sampleRate;\n  };\n\n  audioTsToVideoTs = function audioTsToVideoTs(timestamp, sampleRate) {\n    return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n  };\n\n  videoTsToAudioTs = function videoTsToAudioTs(timestamp, sampleRate) {\n    return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n  };\n  /**\n   * Adjust ID3 tag or caption timing information by the timeline pts values\n   * (if keepOriginalTimestamps is false) and convert to seconds\n   */\n\n\n  metadataTsToSeconds = function metadataTsToSeconds(timestamp, timelineStartPts, keepOriginalTimestamps) {\n    return videoTsToSeconds(keepOriginalTimestamps ? timestamp : timestamp - timelineStartPts);\n  };\n\n  var clock = {\n    ONE_SECOND_IN_TS: ONE_SECOND_IN_TS$4,\n    secondsToVideoTs: secondsToVideoTs,\n    secondsToAudioTs: secondsToAudioTs,\n    videoTsToSeconds: videoTsToSeconds,\n    audioTsToSeconds: audioTsToSeconds,\n    audioTsToVideoTs: audioTsToVideoTs,\n    videoTsToAudioTs: videoTsToAudioTs,\n    metadataTsToSeconds: metadataTsToSeconds\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  /**\n   * Sum the `byteLength` properties of the data in each AAC frame\n   */\n\n  var sumFrameByteLengths = function sumFrameByteLengths(array) {\n    var i,\n        currentObj,\n        sum = 0; // sum the byteLength's all each nal unit in the frame\n\n    for (i = 0; i < array.length; i++) {\n      currentObj = array[i];\n      sum += currentObj.data.byteLength;\n    }\n\n    return sum;\n  }; // Possibly pad (prefix) the audio track with silence if appending this track\n  // would lead to the introduction of a gap in the audio buffer\n\n\n  var prefixWithSilence = function prefixWithSilence(track, frames, audioAppendStartTs, videoBaseMediaDecodeTime) {\n    var baseMediaDecodeTimeTs,\n        frameDuration = 0,\n        audioGapDuration = 0,\n        audioFillFrameCount = 0,\n        audioFillDuration = 0,\n        silentFrame,\n        i,\n        firstFrame;\n\n    if (!frames.length) {\n      return;\n    }\n\n    baseMediaDecodeTimeTs = clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate); // determine frame clock duration based on sample rate, round up to avoid overfills\n\n    frameDuration = Math.ceil(clock.ONE_SECOND_IN_TS / (track.samplerate / 1024));\n\n    if (audioAppendStartTs && videoBaseMediaDecodeTime) {\n      // insert the shortest possible amount (audio gap or audio to video gap)\n      audioGapDuration = baseMediaDecodeTimeTs - Math.max(audioAppendStartTs, videoBaseMediaDecodeTime); // number of full frames in the audio gap\n\n      audioFillFrameCount = Math.floor(audioGapDuration / frameDuration);\n      audioFillDuration = audioFillFrameCount * frameDuration;\n    } // don't attempt to fill gaps smaller than a single frame or larger\n    // than a half second\n\n\n    if (audioFillFrameCount < 1 || audioFillDuration > clock.ONE_SECOND_IN_TS / 2) {\n      return;\n    }\n\n    silentFrame = silence_1()[track.samplerate];\n\n    if (!silentFrame) {\n      // we don't have a silent frame pregenerated for the sample rate, so use a frame\n      // from the content instead\n      silentFrame = frames[0].data;\n    }\n\n    for (i = 0; i < audioFillFrameCount; i++) {\n      firstFrame = frames[0];\n      frames.splice(0, 0, {\n        data: silentFrame,\n        dts: firstFrame.dts - frameDuration,\n        pts: firstFrame.pts - frameDuration\n      });\n    }\n\n    track.baseMediaDecodeTime -= Math.floor(clock.videoTsToAudioTs(audioFillDuration, track.samplerate));\n    return audioFillDuration;\n  }; // If the audio segment extends before the earliest allowed dts\n  // value, remove AAC frames until starts at or after the earliest\n  // allowed DTS so that we don't end up with a negative baseMedia-\n  // DecodeTime for the audio track\n\n\n  var trimAdtsFramesByEarliestDts = function trimAdtsFramesByEarliestDts(adtsFrames, track, earliestAllowedDts) {\n    if (track.minSegmentDts >= earliestAllowedDts) {\n      return adtsFrames;\n    } // We will need to recalculate the earliest segment Dts\n\n\n    track.minSegmentDts = Infinity;\n    return adtsFrames.filter(function (currentFrame) {\n      // If this is an allowed frame, keep it and record it's Dts\n      if (currentFrame.dts >= earliestAllowedDts) {\n        track.minSegmentDts = Math.min(track.minSegmentDts, currentFrame.dts);\n        track.minSegmentPts = track.minSegmentDts;\n        return true;\n      } // Otherwise, discard it\n\n\n      return false;\n    });\n  }; // generate the track's raw mdat data from an array of frames\n\n\n  var generateSampleTable = function generateSampleTable(frames) {\n    var i,\n        currentFrame,\n        samples = [];\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      samples.push({\n        size: currentFrame.data.byteLength,\n        duration: 1024 // For AAC audio, all samples contain 1024 samples\n\n      });\n    }\n\n    return samples;\n  }; // generate the track's sample table from an array of frames\n\n\n  var concatenateFrameData = function concatenateFrameData(frames) {\n    var i,\n        currentFrame,\n        dataOffset = 0,\n        data = new Uint8Array(sumFrameByteLengths(frames));\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      data.set(currentFrame.data, dataOffset);\n      dataOffset += currentFrame.data.byteLength;\n    }\n\n    return data;\n  };\n\n  var audioFrameUtils = {\n    prefixWithSilence: prefixWithSilence,\n    trimAdtsFramesByEarliestDts: trimAdtsFramesByEarliestDts,\n    generateSampleTable: generateSampleTable,\n    concatenateFrameData: concatenateFrameData\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var ONE_SECOND_IN_TS$3 = clock.ONE_SECOND_IN_TS;\n  /**\n   * Store information about the start and end of the track and the\n   * duration for each frame/sample we process in order to calculate\n   * the baseMediaDecodeTime\n   */\n\n  var collectDtsInfo = function collectDtsInfo(track, data) {\n    if (typeof data.pts === 'number') {\n      if (track.timelineStartInfo.pts === undefined) {\n        track.timelineStartInfo.pts = data.pts;\n      }\n\n      if (track.minSegmentPts === undefined) {\n        track.minSegmentPts = data.pts;\n      } else {\n        track.minSegmentPts = Math.min(track.minSegmentPts, data.pts);\n      }\n\n      if (track.maxSegmentPts === undefined) {\n        track.maxSegmentPts = data.pts;\n      } else {\n        track.maxSegmentPts = Math.max(track.maxSegmentPts, data.pts);\n      }\n    }\n\n    if (typeof data.dts === 'number') {\n      if (track.timelineStartInfo.dts === undefined) {\n        track.timelineStartInfo.dts = data.dts;\n      }\n\n      if (track.minSegmentDts === undefined) {\n        track.minSegmentDts = data.dts;\n      } else {\n        track.minSegmentDts = Math.min(track.minSegmentDts, data.dts);\n      }\n\n      if (track.maxSegmentDts === undefined) {\n        track.maxSegmentDts = data.dts;\n      } else {\n        track.maxSegmentDts = Math.max(track.maxSegmentDts, data.dts);\n      }\n    }\n  };\n  /**\n   * Clear values used to calculate the baseMediaDecodeTime between\n   * tracks\n   */\n\n\n  var clearDtsInfo = function clearDtsInfo(track) {\n    delete track.minSegmentDts;\n    delete track.maxSegmentDts;\n    delete track.minSegmentPts;\n    delete track.maxSegmentPts;\n  };\n  /**\n   * Calculate the track's baseMediaDecodeTime based on the earliest\n   * DTS the transmuxer has ever seen and the minimum DTS for the\n   * current track\n   * @param track {object} track metadata configuration\n   * @param keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n\n  var calculateTrackBaseMediaDecodeTime = function calculateTrackBaseMediaDecodeTime(track, keepOriginalTimestamps) {\n    var baseMediaDecodeTime,\n        scale,\n        minSegmentDts = track.minSegmentDts; // Optionally adjust the time so the first segment starts at zero.\n\n    if (!keepOriginalTimestamps) {\n      minSegmentDts -= track.timelineStartInfo.dts;\n    } // track.timelineStartInfo.baseMediaDecodeTime is the location, in time, where\n    // we want the start of the first segment to be placed\n\n\n    baseMediaDecodeTime = track.timelineStartInfo.baseMediaDecodeTime; // Add to that the distance this segment is from the very first\n\n    baseMediaDecodeTime += minSegmentDts; // baseMediaDecodeTime must not become negative\n\n    baseMediaDecodeTime = Math.max(0, baseMediaDecodeTime);\n\n    if (track.type === 'audio') {\n      // Audio has a different clock equal to the sampling_rate so we need to\n      // scale the PTS values into the clock rate of the track\n      scale = track.samplerate / ONE_SECOND_IN_TS$3;\n      baseMediaDecodeTime *= scale;\n      baseMediaDecodeTime = Math.floor(baseMediaDecodeTime);\n    }\n\n    return baseMediaDecodeTime;\n  };\n\n  var trackDecodeInfo = {\n    clearDtsInfo: clearDtsInfo,\n    calculateTrackBaseMediaDecodeTime: calculateTrackBaseMediaDecodeTime,\n    collectDtsInfo: collectDtsInfo\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * Reads in-band caption information from a video elementary\n   * stream. Captions must follow the CEA-708 standard for injection\n   * into an MPEG-2 transport streams.\n   * @see https://en.wikipedia.org/wiki/CEA-708\n   * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf\n   */\n  // payload type field to indicate how they are to be\n  // interpreted. CEAS-708 caption content is always transmitted with\n  // payload type 0x04.\n\n  var USER_DATA_REGISTERED_ITU_T_T35 = 4,\n      RBSP_TRAILING_BITS = 128;\n  /**\n    * Parse a supplemental enhancement information (SEI) NAL unit.\n    * Stops parsing once a message of type ITU T T35 has been found.\n    *\n    * @param bytes {Uint8Array} the bytes of a SEI NAL unit\n    * @return {object} the parsed SEI payload\n    * @see Rec. ITU-T H.264, 7.3.2.3.1\n    */\n\n  var parseSei = function parseSei(bytes) {\n    var i = 0,\n        result = {\n      payloadType: -1,\n      payloadSize: 0\n    },\n        payloadType = 0,\n        payloadSize = 0; // go through the sei_rbsp parsing each each individual sei_message\n\n    while (i < bytes.byteLength) {\n      // stop once we have hit the end of the sei_rbsp\n      if (bytes[i] === RBSP_TRAILING_BITS) {\n        break;\n      } // Parse payload type\n\n\n      while (bytes[i] === 0xFF) {\n        payloadType += 255;\n        i++;\n      }\n\n      payloadType += bytes[i++]; // Parse payload size\n\n      while (bytes[i] === 0xFF) {\n        payloadSize += 255;\n        i++;\n      }\n\n      payloadSize += bytes[i++]; // this sei_message is a 608/708 caption so save it and break\n      // there can only ever be one caption message in a frame's sei\n\n      if (!result.payload && payloadType === USER_DATA_REGISTERED_ITU_T_T35) {\n        var userIdentifier = String.fromCharCode(bytes[i + 3], bytes[i + 4], bytes[i + 5], bytes[i + 6]);\n\n        if (userIdentifier === 'GA94') {\n          result.payloadType = payloadType;\n          result.payloadSize = payloadSize;\n          result.payload = bytes.subarray(i, i + payloadSize);\n          break;\n        } else {\n          result.payload = void 0;\n        }\n      } // skip the payload and parse the next message\n\n\n      i += payloadSize;\n      payloadType = 0;\n      payloadSize = 0;\n    }\n\n    return result;\n  }; // see ANSI/SCTE 128-1 (2013), section 8.1\n\n\n  var parseUserData = function parseUserData(sei) {\n    // itu_t_t35_contry_code must be 181 (United States) for\n    // captions\n    if (sei.payload[0] !== 181) {\n      return null;\n    } // itu_t_t35_provider_code should be 49 (ATSC) for captions\n\n\n    if ((sei.payload[1] << 8 | sei.payload[2]) !== 49) {\n      return null;\n    } // the user_identifier should be \"GA94\" to indicate ATSC1 data\n\n\n    if (String.fromCharCode(sei.payload[3], sei.payload[4], sei.payload[5], sei.payload[6]) !== 'GA94') {\n      return null;\n    } // finally, user_data_type_code should be 0x03 for caption data\n\n\n    if (sei.payload[7] !== 0x03) {\n      return null;\n    } // return the user_data_type_structure and strip the trailing\n    // marker bits\n\n\n    return sei.payload.subarray(8, sei.payload.length - 1);\n  }; // see CEA-708-D, section 4.4\n\n\n  var parseCaptionPackets = function parseCaptionPackets(pts, userData) {\n    var results = [],\n        i,\n        count,\n        offset,\n        data; // if this is just filler, return immediately\n\n    if (!(userData[0] & 0x40)) {\n      return results;\n    } // parse out the cc_data_1 and cc_data_2 fields\n\n\n    count = userData[0] & 0x1f;\n\n    for (i = 0; i < count; i++) {\n      offset = i * 3;\n      data = {\n        type: userData[offset + 2] & 0x03,\n        pts: pts\n      }; // capture cc data when cc_valid is 1\n\n      if (userData[offset + 2] & 0x04) {\n        data.ccData = userData[offset + 3] << 8 | userData[offset + 4];\n        results.push(data);\n      }\n    }\n\n    return results;\n  };\n\n  var discardEmulationPreventionBytes$1 = function discardEmulationPreventionBytes(data) {\n    var length = data.byteLength,\n        emulationPreventionBytesPositions = [],\n        i = 1,\n        newLength,\n        newData; // Find all `Emulation Prevention Bytes`\n\n    while (i < length - 2) {\n      if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n        emulationPreventionBytesPositions.push(i + 2);\n        i += 2;\n      } else {\n        i++;\n      }\n    } // If no Emulation Prevention Bytes were found just return the original\n    // array\n\n\n    if (emulationPreventionBytesPositions.length === 0) {\n      return data;\n    } // Create a new array to hold the NAL unit data\n\n\n    newLength = length - emulationPreventionBytesPositions.length;\n    newData = new Uint8Array(newLength);\n    var sourceIndex = 0;\n\n    for (i = 0; i < newLength; sourceIndex++, i++) {\n      if (sourceIndex === emulationPreventionBytesPositions[0]) {\n        // Skip this byte\n        sourceIndex++; // Remove this position index\n\n        emulationPreventionBytesPositions.shift();\n      }\n\n      newData[i] = data[sourceIndex];\n    }\n\n    return newData;\n  }; // exports\n\n\n  var captionPacketParser = {\n    parseSei: parseSei,\n    parseUserData: parseUserData,\n    parseCaptionPackets: parseCaptionPackets,\n    discardEmulationPreventionBytes: discardEmulationPreventionBytes$1,\n    USER_DATA_REGISTERED_ITU_T_T35: USER_DATA_REGISTERED_ITU_T_T35\n  }; // Link To Transport\n  // -----------------\n\n  var CaptionStream$1 = function CaptionStream(options) {\n    options = options || {};\n    CaptionStream.prototype.init.call(this); // parse708captions flag, default to true\n\n    this.parse708captions_ = typeof options.parse708captions === 'boolean' ? options.parse708captions : true;\n    this.captionPackets_ = [];\n    this.ccStreams_ = [new Cea608Stream(0, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(0, 1), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 1) // eslint-disable-line no-use-before-define\n    ];\n\n    if (this.parse708captions_) {\n      this.cc708Stream_ = new Cea708Stream({\n        captionServices: options.captionServices\n      }); // eslint-disable-line no-use-before-define\n    }\n\n    this.reset(); // forward data and done events from CCs to this CaptionStream\n\n    this.ccStreams_.forEach(function (cc) {\n      cc.on('data', this.trigger.bind(this, 'data'));\n      cc.on('partialdone', this.trigger.bind(this, 'partialdone'));\n      cc.on('done', this.trigger.bind(this, 'done'));\n    }, this);\n\n    if (this.parse708captions_) {\n      this.cc708Stream_.on('data', this.trigger.bind(this, 'data'));\n      this.cc708Stream_.on('partialdone', this.trigger.bind(this, 'partialdone'));\n      this.cc708Stream_.on('done', this.trigger.bind(this, 'done'));\n    }\n  };\n\n  CaptionStream$1.prototype = new stream();\n\n  CaptionStream$1.prototype.push = function (event) {\n    var sei, userData, newCaptionPackets; // only examine SEI NALs\n\n    if (event.nalUnitType !== 'sei_rbsp') {\n      return;\n    } // parse the sei\n\n\n    sei = captionPacketParser.parseSei(event.escapedRBSP); // no payload data, skip\n\n    if (!sei.payload) {\n      return;\n    } // ignore everything but user_data_registered_itu_t_t35\n\n\n    if (sei.payloadType !== captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35) {\n      return;\n    } // parse out the user data payload\n\n\n    userData = captionPacketParser.parseUserData(sei); // ignore unrecognized userData\n\n    if (!userData) {\n      return;\n    } // Sometimes, the same segment # will be downloaded twice. To stop the\n    // caption data from being processed twice, we track the latest dts we've\n    // received and ignore everything with a dts before that. However, since\n    // data for a specific dts can be split across packets on either side of\n    // a segment boundary, we need to make sure we *don't* ignore the packets\n    // from the *next* segment that have dts === this.latestDts_. By constantly\n    // tracking the number of packets received with dts === this.latestDts_, we\n    // know how many should be ignored once we start receiving duplicates.\n\n\n    if (event.dts < this.latestDts_) {\n      // We've started getting older data, so set the flag.\n      this.ignoreNextEqualDts_ = true;\n      return;\n    } else if (event.dts === this.latestDts_ && this.ignoreNextEqualDts_) {\n      this.numSameDts_--;\n\n      if (!this.numSameDts_) {\n        // We've received the last duplicate packet, time to start processing again\n        this.ignoreNextEqualDts_ = false;\n      }\n\n      return;\n    } // parse out CC data packets and save them for later\n\n\n    newCaptionPackets = captionPacketParser.parseCaptionPackets(event.pts, userData);\n    this.captionPackets_ = this.captionPackets_.concat(newCaptionPackets);\n\n    if (this.latestDts_ !== event.dts) {\n      this.numSameDts_ = 0;\n    }\n\n    this.numSameDts_++;\n    this.latestDts_ = event.dts;\n  };\n\n  CaptionStream$1.prototype.flushCCStreams = function (flushType) {\n    this.ccStreams_.forEach(function (cc) {\n      return flushType === 'flush' ? cc.flush() : cc.partialFlush();\n    }, this);\n  };\n\n  CaptionStream$1.prototype.flushStream = function (flushType) {\n    // make sure we actually parsed captions before proceeding\n    if (!this.captionPackets_.length) {\n      this.flushCCStreams(flushType);\n      return;\n    } // In Chrome, the Array#sort function is not stable so add a\n    // presortIndex that we can use to ensure we get a stable-sort\n\n\n    this.captionPackets_.forEach(function (elem, idx) {\n      elem.presortIndex = idx;\n    }); // sort caption byte-pairs based on their PTS values\n\n    this.captionPackets_.sort(function (a, b) {\n      if (a.pts === b.pts) {\n        return a.presortIndex - b.presortIndex;\n      }\n\n      return a.pts - b.pts;\n    });\n    this.captionPackets_.forEach(function (packet) {\n      if (packet.type < 2) {\n        // Dispatch packet to the right Cea608Stream\n        this.dispatchCea608Packet(packet);\n      } else {\n        // Dispatch packet to the Cea708Stream\n        this.dispatchCea708Packet(packet);\n      }\n    }, this);\n    this.captionPackets_.length = 0;\n    this.flushCCStreams(flushType);\n  };\n\n  CaptionStream$1.prototype.flush = function () {\n    return this.flushStream('flush');\n  }; // Only called if handling partial data\n\n\n  CaptionStream$1.prototype.partialFlush = function () {\n    return this.flushStream('partialFlush');\n  };\n\n  CaptionStream$1.prototype.reset = function () {\n    this.latestDts_ = null;\n    this.ignoreNextEqualDts_ = false;\n    this.numSameDts_ = 0;\n    this.activeCea608Channel_ = [null, null];\n    this.ccStreams_.forEach(function (ccStream) {\n      ccStream.reset();\n    });\n  }; // From the CEA-608 spec:\n\n  /*\n   * When XDS sub-packets are interleaved with other services, the end of each sub-packet shall be followed\n   * by a control pair to change to a different service. When any of the control codes from 0x10 to 0x1F is\n   * used to begin a control code pair, it indicates the return to captioning or Text data. The control code pair\n   * and subsequent data should then be processed according to the FCC rules. It may be necessary for the\n   * line 21 data encoder to automatically insert a control code pair (i.e. RCL, RU2, RU3, RU4, RDC, or RTD)\n   * to switch to captioning or Text.\n  */\n  // With that in mind, we ignore any data between an XDS control code and a\n  // subsequent closed-captioning control code.\n\n\n  CaptionStream$1.prototype.dispatchCea608Packet = function (packet) {\n    // NOTE: packet.type is the CEA608 field\n    if (this.setsTextOrXDSActive(packet)) {\n      this.activeCea608Channel_[packet.type] = null;\n    } else if (this.setsChannel1Active(packet)) {\n      this.activeCea608Channel_[packet.type] = 0;\n    } else if (this.setsChannel2Active(packet)) {\n      this.activeCea608Channel_[packet.type] = 1;\n    }\n\n    if (this.activeCea608Channel_[packet.type] === null) {\n      // If we haven't received anything to set the active channel, or the\n      // packets are Text/XDS data, discard the data; we don't want jumbled\n      // captions\n      return;\n    }\n\n    this.ccStreams_[(packet.type << 1) + this.activeCea608Channel_[packet.type]].push(packet);\n  };\n\n  CaptionStream$1.prototype.setsChannel1Active = function (packet) {\n    return (packet.ccData & 0x7800) === 0x1000;\n  };\n\n  CaptionStream$1.prototype.setsChannel2Active = function (packet) {\n    return (packet.ccData & 0x7800) === 0x1800;\n  };\n\n  CaptionStream$1.prototype.setsTextOrXDSActive = function (packet) {\n    return (packet.ccData & 0x7100) === 0x0100 || (packet.ccData & 0x78fe) === 0x102a || (packet.ccData & 0x78fe) === 0x182a;\n  };\n\n  CaptionStream$1.prototype.dispatchCea708Packet = function (packet) {\n    if (this.parse708captions_) {\n      this.cc708Stream_.push(packet);\n    }\n  }; // ----------------------\n  // Session to Application\n  // ----------------------\n  // This hash maps special and extended character codes to their\n  // proper Unicode equivalent. The first one-byte key is just a\n  // non-standard character code. The two-byte keys that follow are\n  // the extended CEA708 character codes, along with the preceding\n  // 0x10 extended character byte to distinguish these codes from\n  // non-extended character codes. Every CEA708 character code that\n  // is not in this object maps directly to a standard unicode\n  // character code.\n  // The transparent space and non-breaking transparent space are\n  // technically not fully supported since there is no code to\n  // make them transparent, so they have normal non-transparent\n  // stand-ins.\n  // The special closed caption (CC) character isn't a standard\n  // unicode character, so a fairly similar unicode character was\n  // chosen in it's place.\n\n\n  var CHARACTER_TRANSLATION_708 = {\n    0x7f: 0x266a,\n    // ♪\n    0x1020: 0x20,\n    // Transparent Space\n    0x1021: 0xa0,\n    // Nob-breaking Transparent Space\n    0x1025: 0x2026,\n    // …\n    0x102a: 0x0160,\n    // Š\n    0x102c: 0x0152,\n    // Œ\n    0x1030: 0x2588,\n    // █\n    0x1031: 0x2018,\n    // ‘\n    0x1032: 0x2019,\n    // ’\n    0x1033: 0x201c,\n    // “\n    0x1034: 0x201d,\n    // ”\n    0x1035: 0x2022,\n    // •\n    0x1039: 0x2122,\n    // ™\n    0x103a: 0x0161,\n    // š\n    0x103c: 0x0153,\n    // œ\n    0x103d: 0x2120,\n    // ℠\n    0x103f: 0x0178,\n    // Ÿ\n    0x1076: 0x215b,\n    // ⅛\n    0x1077: 0x215c,\n    // ⅜\n    0x1078: 0x215d,\n    // ⅝\n    0x1079: 0x215e,\n    // ⅞\n    0x107a: 0x23d0,\n    // ⏐\n    0x107b: 0x23a4,\n    // ⎤\n    0x107c: 0x23a3,\n    // ⎣\n    0x107d: 0x23af,\n    // ⎯\n    0x107e: 0x23a6,\n    // ⎦\n    0x107f: 0x23a1,\n    // ⎡\n    0x10a0: 0x3138 // ㄸ (CC char)\n\n  };\n\n  var get708CharFromCode = function get708CharFromCode(code) {\n    var newCode = CHARACTER_TRANSLATION_708[code] || code;\n\n    if (code & 0x1000 && code === newCode) {\n      // Invalid extended code\n      return '';\n    }\n\n    return String.fromCharCode(newCode);\n  };\n\n  var within708TextBlock = function within708TextBlock(b) {\n    return 0x20 <= b && b <= 0x7f || 0xa0 <= b && b <= 0xff;\n  };\n\n  var Cea708Window = function Cea708Window(windowNum) {\n    this.windowNum = windowNum;\n    this.reset();\n  };\n\n  Cea708Window.prototype.reset = function () {\n    this.clearText();\n    this.pendingNewLine = false;\n    this.winAttr = {};\n    this.penAttr = {};\n    this.penLoc = {};\n    this.penColor = {}; // These default values are arbitrary,\n    // defineWindow will usually override them\n\n    this.visible = 0;\n    this.rowLock = 0;\n    this.columnLock = 0;\n    this.priority = 0;\n    this.relativePositioning = 0;\n    this.anchorVertical = 0;\n    this.anchorHorizontal = 0;\n    this.anchorPoint = 0;\n    this.rowCount = 1;\n    this.virtualRowCount = this.rowCount + 1;\n    this.columnCount = 41;\n    this.windowStyle = 0;\n    this.penStyle = 0;\n  };\n\n  Cea708Window.prototype.getText = function () {\n    return this.rows.join('\\n');\n  };\n\n  Cea708Window.prototype.clearText = function () {\n    this.rows = [''];\n    this.rowIdx = 0;\n  };\n\n  Cea708Window.prototype.newLine = function (pts) {\n    if (this.rows.length >= this.virtualRowCount && typeof this.beforeRowOverflow === 'function') {\n      this.beforeRowOverflow(pts);\n    }\n\n    if (this.rows.length > 0) {\n      this.rows.push('');\n      this.rowIdx++;\n    } // Show all virtual rows since there's no visible scrolling\n\n\n    while (this.rows.length > this.virtualRowCount) {\n      this.rows.shift();\n      this.rowIdx--;\n    }\n  };\n\n  Cea708Window.prototype.isEmpty = function () {\n    if (this.rows.length === 0) {\n      return true;\n    } else if (this.rows.length === 1) {\n      return this.rows[0] === '';\n    }\n\n    return false;\n  };\n\n  Cea708Window.prototype.addText = function (text) {\n    this.rows[this.rowIdx] += text;\n  };\n\n  Cea708Window.prototype.backspace = function () {\n    if (!this.isEmpty()) {\n      var row = this.rows[this.rowIdx];\n      this.rows[this.rowIdx] = row.substr(0, row.length - 1);\n    }\n  };\n\n  var Cea708Service = function Cea708Service(serviceNum, encoding, stream) {\n    this.serviceNum = serviceNum;\n    this.text = '';\n    this.currentWindow = new Cea708Window(-1);\n    this.windows = [];\n    this.stream = stream; // Try to setup a TextDecoder if an `encoding` value was provided\n\n    if (typeof encoding === 'string') {\n      this.createTextDecoder(encoding);\n    }\n  };\n  /**\n   * Initialize service windows\n   * Must be run before service use\n   *\n   * @param  {Integer}  pts               PTS value\n   * @param  {Function} beforeRowOverflow Function to execute before row overflow of a window\n   */\n\n\n  Cea708Service.prototype.init = function (pts, beforeRowOverflow) {\n    this.startPts = pts;\n\n    for (var win = 0; win < 8; win++) {\n      this.windows[win] = new Cea708Window(win);\n\n      if (typeof beforeRowOverflow === 'function') {\n        this.windows[win].beforeRowOverflow = beforeRowOverflow;\n      }\n    }\n  };\n  /**\n   * Set current window of service to be affected by commands\n   *\n   * @param  {Integer} windowNum Window number\n   */\n\n\n  Cea708Service.prototype.setCurrentWindow = function (windowNum) {\n    this.currentWindow = this.windows[windowNum];\n  };\n  /**\n   * Try to create a TextDecoder if it is natively supported\n   */\n\n\n  Cea708Service.prototype.createTextDecoder = function (encoding) {\n    if (typeof TextDecoder === 'undefined') {\n      this.stream.trigger('log', {\n        level: 'warn',\n        message: 'The `encoding` option is unsupported without TextDecoder support'\n      });\n    } else {\n      try {\n        this.textDecoder_ = new TextDecoder(encoding);\n      } catch (error) {\n        this.stream.trigger('log', {\n          level: 'warn',\n          message: 'TextDecoder could not be created with ' + encoding + ' encoding. ' + error\n        });\n      }\n    }\n  };\n\n  var Cea708Stream = function Cea708Stream(options) {\n    options = options || {};\n    Cea708Stream.prototype.init.call(this);\n    var self = this;\n    var captionServices = options.captionServices || {};\n    var captionServiceEncodings = {};\n    var serviceProps; // Get service encodings from captionServices option block\n\n    Object.keys(captionServices).forEach(function (serviceName) {\n      serviceProps = captionServices[serviceName];\n\n      if (/^SERVICE/.test(serviceName)) {\n        captionServiceEncodings[serviceName] = serviceProps.encoding;\n      }\n    });\n    this.serviceEncodings = captionServiceEncodings;\n    this.current708Packet = null;\n    this.services = {};\n\n    this.push = function (packet) {\n      if (packet.type === 3) {\n        // 708 packet start\n        self.new708Packet();\n        self.add708Bytes(packet);\n      } else {\n        if (self.current708Packet === null) {\n          // This should only happen at the start of a file if there's no packet start.\n          self.new708Packet();\n        }\n\n        self.add708Bytes(packet);\n      }\n    };\n  };\n\n  Cea708Stream.prototype = new stream();\n  /**\n   * Push current 708 packet, create new 708 packet.\n   */\n\n  Cea708Stream.prototype.new708Packet = function () {\n    if (this.current708Packet !== null) {\n      this.push708Packet();\n    }\n\n    this.current708Packet = {\n      data: [],\n      ptsVals: []\n    };\n  };\n  /**\n   * Add pts and both bytes from packet into current 708 packet.\n   */\n\n\n  Cea708Stream.prototype.add708Bytes = function (packet) {\n    var data = packet.ccData;\n    var byte0 = data >>> 8;\n    var byte1 = data & 0xff; // I would just keep a list of packets instead of bytes, but it isn't clear in the spec\n    // that service blocks will always line up with byte pairs.\n\n    this.current708Packet.ptsVals.push(packet.pts);\n    this.current708Packet.data.push(byte0);\n    this.current708Packet.data.push(byte1);\n  };\n  /**\n   * Parse completed 708 packet into service blocks and push each service block.\n   */\n\n\n  Cea708Stream.prototype.push708Packet = function () {\n    var packet708 = this.current708Packet;\n    var packetData = packet708.data;\n    var serviceNum = null;\n    var blockSize = null;\n    var i = 0;\n    var b = packetData[i++];\n    packet708.seq = b >> 6;\n    packet708.sizeCode = b & 0x3f; // 0b00111111;\n\n    for (; i < packetData.length; i++) {\n      b = packetData[i++];\n      serviceNum = b >> 5;\n      blockSize = b & 0x1f; // 0b00011111\n\n      if (serviceNum === 7 && blockSize > 0) {\n        // Extended service num\n        b = packetData[i++];\n        serviceNum = b;\n      }\n\n      this.pushServiceBlock(serviceNum, i, blockSize);\n\n      if (blockSize > 0) {\n        i += blockSize - 1;\n      }\n    }\n  };\n  /**\n   * Parse service block, execute commands, read text.\n   *\n   * Note: While many of these commands serve important purposes,\n   * many others just parse out the parameters or attributes, but\n   * nothing is done with them because this is not a full and complete\n   * implementation of the entire 708 spec.\n   *\n   * @param  {Integer} serviceNum Service number\n   * @param  {Integer} start      Start index of the 708 packet data\n   * @param  {Integer} size       Block size\n   */\n\n\n  Cea708Stream.prototype.pushServiceBlock = function (serviceNum, start, size) {\n    var b;\n    var i = start;\n    var packetData = this.current708Packet.data;\n    var service = this.services[serviceNum];\n\n    if (!service) {\n      service = this.initService(serviceNum, i);\n    }\n\n    for (; i < start + size && i < packetData.length; i++) {\n      b = packetData[i];\n\n      if (within708TextBlock(b)) {\n        i = this.handleText(i, service);\n      } else if (b === 0x18) {\n        i = this.multiByteCharacter(i, service);\n      } else if (b === 0x10) {\n        i = this.extendedCommands(i, service);\n      } else if (0x80 <= b && b <= 0x87) {\n        i = this.setCurrentWindow(i, service);\n      } else if (0x98 <= b && b <= 0x9f) {\n        i = this.defineWindow(i, service);\n      } else if (b === 0x88) {\n        i = this.clearWindows(i, service);\n      } else if (b === 0x8c) {\n        i = this.deleteWindows(i, service);\n      } else if (b === 0x89) {\n        i = this.displayWindows(i, service);\n      } else if (b === 0x8a) {\n        i = this.hideWindows(i, service);\n      } else if (b === 0x8b) {\n        i = this.toggleWindows(i, service);\n      } else if (b === 0x97) {\n        i = this.setWindowAttributes(i, service);\n      } else if (b === 0x90) {\n        i = this.setPenAttributes(i, service);\n      } else if (b === 0x91) {\n        i = this.setPenColor(i, service);\n      } else if (b === 0x92) {\n        i = this.setPenLocation(i, service);\n      } else if (b === 0x8f) {\n        service = this.reset(i, service);\n      } else if (b === 0x08) {\n        // BS: Backspace\n        service.currentWindow.backspace();\n      } else if (b === 0x0c) {\n        // FF: Form feed\n        service.currentWindow.clearText();\n      } else if (b === 0x0d) {\n        // CR: Carriage return\n        service.currentWindow.pendingNewLine = true;\n      } else if (b === 0x0e) {\n        // HCR: Horizontal carriage return\n        service.currentWindow.clearText();\n      } else if (b === 0x8d) {\n        // DLY: Delay, nothing to do\n        i++;\n      } else ;\n    }\n  };\n  /**\n   * Execute an extended command\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.extendedCommands = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n\n    if (within708TextBlock(b)) {\n      i = this.handleText(i, service, {\n        isExtended: true\n      });\n    }\n\n    return i;\n  };\n  /**\n   * Get PTS value of a given byte index\n   *\n   * @param  {Integer} byteIndex  Index of the byte\n   * @return {Integer}            PTS\n   */\n\n\n  Cea708Stream.prototype.getPts = function (byteIndex) {\n    // There's 1 pts value per 2 bytes\n    return this.current708Packet.ptsVals[Math.floor(byteIndex / 2)];\n  };\n  /**\n   * Initializes a service\n   *\n   * @param  {Integer} serviceNum Service number\n   * @return {Service}            Initialized service object\n   */\n\n\n  Cea708Stream.prototype.initService = function (serviceNum, i) {\n    var serviceName = 'SERVICE' + serviceNum;\n    var self = this;\n    var serviceName;\n    var encoding;\n\n    if (serviceName in this.serviceEncodings) {\n      encoding = this.serviceEncodings[serviceName];\n    }\n\n    this.services[serviceNum] = new Cea708Service(serviceNum, encoding, self);\n    this.services[serviceNum].init(this.getPts(i), function (pts) {\n      self.flushDisplayed(pts, self.services[serviceNum]);\n    });\n    return this.services[serviceNum];\n  };\n  /**\n   * Execute text writing to current window\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.handleText = function (i, service, options) {\n    var isExtended = options && options.isExtended;\n    var isMultiByte = options && options.isMultiByte;\n    var packetData = this.current708Packet.data;\n    var extended = isExtended ? 0x1000 : 0x0000;\n    var currentByte = packetData[i];\n    var nextByte = packetData[i + 1];\n    var win = service.currentWindow;\n\n    var _char;\n\n    var charCodeArray; // Use the TextDecoder if one was created for this service\n\n    if (service.textDecoder_ && !isExtended) {\n      if (isMultiByte) {\n        charCodeArray = [currentByte, nextByte];\n        i++;\n      } else {\n        charCodeArray = [currentByte];\n      }\n\n      _char = service.textDecoder_.decode(new Uint8Array(charCodeArray));\n    } else {\n      _char = get708CharFromCode(extended | currentByte);\n    }\n\n    if (win.pendingNewLine && !win.isEmpty()) {\n      win.newLine(this.getPts(i));\n    }\n\n    win.pendingNewLine = false;\n    win.addText(_char);\n    return i;\n  };\n  /**\n   * Handle decoding of multibyte character\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.multiByteCharacter = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var firstByte = packetData[i + 1];\n    var secondByte = packetData[i + 2];\n\n    if (within708TextBlock(firstByte) && within708TextBlock(secondByte)) {\n      i = this.handleText(++i, service, {\n        isMultiByte: true\n      });\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the CW# command.\n   *\n   * Set the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setCurrentWindow = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var windowNum = b & 0x07;\n    service.setCurrentWindow(windowNum);\n    return i;\n  };\n  /**\n   * Parse and execute the DF# command.\n   *\n   * Define a window and set it as the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.defineWindow = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var windowNum = b & 0x07;\n    service.setCurrentWindow(windowNum);\n    var win = service.currentWindow;\n    b = packetData[++i];\n    win.visible = (b & 0x20) >> 5; // v\n\n    win.rowLock = (b & 0x10) >> 4; // rl\n\n    win.columnLock = (b & 0x08) >> 3; // cl\n\n    win.priority = b & 0x07; // p\n\n    b = packetData[++i];\n    win.relativePositioning = (b & 0x80) >> 7; // rp\n\n    win.anchorVertical = b & 0x7f; // av\n\n    b = packetData[++i];\n    win.anchorHorizontal = b; // ah\n\n    b = packetData[++i];\n    win.anchorPoint = (b & 0xf0) >> 4; // ap\n\n    win.rowCount = b & 0x0f; // rc\n\n    b = packetData[++i];\n    win.columnCount = b & 0x3f; // cc\n\n    b = packetData[++i];\n    win.windowStyle = (b & 0x38) >> 3; // ws\n\n    win.penStyle = b & 0x07; // ps\n    // The spec says there are (rowCount+1) \"virtual rows\"\n\n    win.virtualRowCount = win.rowCount + 1;\n    return i;\n  };\n  /**\n   * Parse and execute the SWA command.\n   *\n   * Set attributes of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setWindowAttributes = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var winAttr = service.currentWindow.winAttr;\n    b = packetData[++i];\n    winAttr.fillOpacity = (b & 0xc0) >> 6; // fo\n\n    winAttr.fillRed = (b & 0x30) >> 4; // fr\n\n    winAttr.fillGreen = (b & 0x0c) >> 2; // fg\n\n    winAttr.fillBlue = b & 0x03; // fb\n\n    b = packetData[++i];\n    winAttr.borderType = (b & 0xc0) >> 6; // bt\n\n    winAttr.borderRed = (b & 0x30) >> 4; // br\n\n    winAttr.borderGreen = (b & 0x0c) >> 2; // bg\n\n    winAttr.borderBlue = b & 0x03; // bb\n\n    b = packetData[++i];\n    winAttr.borderType += (b & 0x80) >> 5; // bt\n\n    winAttr.wordWrap = (b & 0x40) >> 6; // ww\n\n    winAttr.printDirection = (b & 0x30) >> 4; // pd\n\n    winAttr.scrollDirection = (b & 0x0c) >> 2; // sd\n\n    winAttr.justify = b & 0x03; // j\n\n    b = packetData[++i];\n    winAttr.effectSpeed = (b & 0xf0) >> 4; // es\n\n    winAttr.effectDirection = (b & 0x0c) >> 2; // ed\n\n    winAttr.displayEffect = b & 0x03; // de\n\n    return i;\n  };\n  /**\n   * Gather text from all displayed windows and push a caption to output.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   */\n\n\n  Cea708Stream.prototype.flushDisplayed = function (pts, service) {\n    var displayedText = []; // TODO: Positioning not supported, displaying multiple windows will not necessarily\n    // display text in the correct order, but sample files so far have not shown any issue.\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (service.windows[winId].visible && !service.windows[winId].isEmpty()) {\n        displayedText.push(service.windows[winId].getText());\n      }\n    }\n\n    service.endPts = pts;\n    service.text = displayedText.join('\\n\\n');\n    this.pushCaption(service);\n    service.startPts = pts;\n  };\n  /**\n   * Push a caption to output if the caption contains text.\n   *\n   * @param  {Service} service  The service object to be affected\n   */\n\n\n  Cea708Stream.prototype.pushCaption = function (service) {\n    if (service.text !== '') {\n      this.trigger('data', {\n        startPts: service.startPts,\n        endPts: service.endPts,\n        text: service.text,\n        stream: 'cc708_' + service.serviceNum\n      });\n      service.text = '';\n      service.startPts = service.endPts;\n    }\n  };\n  /**\n   * Parse and execute the DSW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.displayWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible = 1;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the HDW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.hideWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible = 0;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the TGW command.\n   *\n   * Set visible property of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.toggleWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].visible ^= 1;\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the CLW command.\n   *\n   * Clear text of windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.clearWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].clearText();\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the DLW command.\n   *\n   * Re-initialize windows based on the parsed bitmask.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.deleteWindows = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[++i];\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n\n    for (var winId = 0; winId < 8; winId++) {\n      if (b & 0x01 << winId) {\n        service.windows[winId].reset();\n      }\n    }\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPA command.\n   *\n   * Set pen attributes of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenAttributes = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penAttr = service.currentWindow.penAttr;\n    b = packetData[++i];\n    penAttr.textTag = (b & 0xf0) >> 4; // tt\n\n    penAttr.offset = (b & 0x0c) >> 2; // o\n\n    penAttr.penSize = b & 0x03; // s\n\n    b = packetData[++i];\n    penAttr.italics = (b & 0x80) >> 7; // i\n\n    penAttr.underline = (b & 0x40) >> 6; // u\n\n    penAttr.edgeType = (b & 0x38) >> 3; // et\n\n    penAttr.fontStyle = b & 0x07; // fs\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPC command.\n   *\n   * Set pen color of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenColor = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penColor = service.currentWindow.penColor;\n    b = packetData[++i];\n    penColor.fgOpacity = (b & 0xc0) >> 6; // fo\n\n    penColor.fgRed = (b & 0x30) >> 4; // fr\n\n    penColor.fgGreen = (b & 0x0c) >> 2; // fg\n\n    penColor.fgBlue = b & 0x03; // fb\n\n    b = packetData[++i];\n    penColor.bgOpacity = (b & 0xc0) >> 6; // bo\n\n    penColor.bgRed = (b & 0x30) >> 4; // br\n\n    penColor.bgGreen = (b & 0x0c) >> 2; // bg\n\n    penColor.bgBlue = b & 0x03; // bb\n\n    b = packetData[++i];\n    penColor.edgeRed = (b & 0x30) >> 4; // er\n\n    penColor.edgeGreen = (b & 0x0c) >> 2; // eg\n\n    penColor.edgeBlue = b & 0x03; // eb\n\n    return i;\n  };\n  /**\n   * Parse and execute the SPL command.\n   *\n   * Set pen location of the current window.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Integer}          New index after parsing\n   */\n\n\n  Cea708Stream.prototype.setPenLocation = function (i, service) {\n    var packetData = this.current708Packet.data;\n    var b = packetData[i];\n    var penLoc = service.currentWindow.penLoc; // Positioning isn't really supported at the moment, so this essentially just inserts a linebreak\n\n    service.currentWindow.pendingNewLine = true;\n    b = packetData[++i];\n    penLoc.row = b & 0x0f; // r\n\n    b = packetData[++i];\n    penLoc.column = b & 0x3f; // c\n\n    return i;\n  };\n  /**\n   * Execute the RST command.\n   *\n   * Reset service to a clean slate. Re-initialize.\n   *\n   * @param  {Integer} i        Current index in the 708 packet\n   * @param  {Service} service  The service object to be affected\n   * @return {Service}          Re-initialized service\n   */\n\n\n  Cea708Stream.prototype.reset = function (i, service) {\n    var pts = this.getPts(i);\n    this.flushDisplayed(pts, service);\n    return this.initService(service.serviceNum, i);\n  }; // This hash maps non-ASCII, special, and extended character codes to their\n  // proper Unicode equivalent. The first keys that are only a single byte\n  // are the non-standard ASCII characters, which simply map the CEA608 byte\n  // to the standard ASCII/Unicode. The two-byte keys that follow are the CEA608\n  // character codes, but have their MSB bitmasked with 0x03 so that a lookup\n  // can be performed regardless of the field and data channel on which the\n  // character code was received.\n\n\n  var CHARACTER_TRANSLATION = {\n    0x2a: 0xe1,\n    // á\n    0x5c: 0xe9,\n    // é\n    0x5e: 0xed,\n    // í\n    0x5f: 0xf3,\n    // ó\n    0x60: 0xfa,\n    // ú\n    0x7b: 0xe7,\n    // ç\n    0x7c: 0xf7,\n    // ÷\n    0x7d: 0xd1,\n    // Ñ\n    0x7e: 0xf1,\n    // ñ\n    0x7f: 0x2588,\n    // █\n    0x0130: 0xae,\n    // ®\n    0x0131: 0xb0,\n    // °\n    0x0132: 0xbd,\n    // ½\n    0x0133: 0xbf,\n    // ¿\n    0x0134: 0x2122,\n    // ™\n    0x0135: 0xa2,\n    // ¢\n    0x0136: 0xa3,\n    // £\n    0x0137: 0x266a,\n    // ♪\n    0x0138: 0xe0,\n    // à\n    0x0139: 0xa0,\n    //\n    0x013a: 0xe8,\n    // è\n    0x013b: 0xe2,\n    // â\n    0x013c: 0xea,\n    // ê\n    0x013d: 0xee,\n    // î\n    0x013e: 0xf4,\n    // ô\n    0x013f: 0xfb,\n    // û\n    0x0220: 0xc1,\n    // Á\n    0x0221: 0xc9,\n    // É\n    0x0222: 0xd3,\n    // Ó\n    0x0223: 0xda,\n    // Ú\n    0x0224: 0xdc,\n    // Ü\n    0x0225: 0xfc,\n    // ü\n    0x0226: 0x2018,\n    // ‘\n    0x0227: 0xa1,\n    // ¡\n    0x0228: 0x2a,\n    // *\n    0x0229: 0x27,\n    // '\n    0x022a: 0x2014,\n    // —\n    0x022b: 0xa9,\n    // ©\n    0x022c: 0x2120,\n    // ℠\n    0x022d: 0x2022,\n    // •\n    0x022e: 0x201c,\n    // “\n    0x022f: 0x201d,\n    // ”\n    0x0230: 0xc0,\n    // À\n    0x0231: 0xc2,\n    // Â\n    0x0232: 0xc7,\n    // Ç\n    0x0233: 0xc8,\n    // È\n    0x0234: 0xca,\n    // Ê\n    0x0235: 0xcb,\n    // Ë\n    0x0236: 0xeb,\n    // ë\n    0x0237: 0xce,\n    // Î\n    0x0238: 0xcf,\n    // Ï\n    0x0239: 0xef,\n    // ï\n    0x023a: 0xd4,\n    // Ô\n    0x023b: 0xd9,\n    // Ù\n    0x023c: 0xf9,\n    // ù\n    0x023d: 0xdb,\n    // Û\n    0x023e: 0xab,\n    // «\n    0x023f: 0xbb,\n    // »\n    0x0320: 0xc3,\n    // Ã\n    0x0321: 0xe3,\n    // ã\n    0x0322: 0xcd,\n    // Í\n    0x0323: 0xcc,\n    // Ì\n    0x0324: 0xec,\n    // ì\n    0x0325: 0xd2,\n    // Ò\n    0x0326: 0xf2,\n    // ò\n    0x0327: 0xd5,\n    // Õ\n    0x0328: 0xf5,\n    // õ\n    0x0329: 0x7b,\n    // {\n    0x032a: 0x7d,\n    // }\n    0x032b: 0x5c,\n    // \\\n    0x032c: 0x5e,\n    // ^\n    0x032d: 0x5f,\n    // _\n    0x032e: 0x7c,\n    // |\n    0x032f: 0x7e,\n    // ~\n    0x0330: 0xc4,\n    // Ä\n    0x0331: 0xe4,\n    // ä\n    0x0332: 0xd6,\n    // Ö\n    0x0333: 0xf6,\n    // ö\n    0x0334: 0xdf,\n    // ß\n    0x0335: 0xa5,\n    // ¥\n    0x0336: 0xa4,\n    // ¤\n    0x0337: 0x2502,\n    // │\n    0x0338: 0xc5,\n    // Å\n    0x0339: 0xe5,\n    // å\n    0x033a: 0xd8,\n    // Ø\n    0x033b: 0xf8,\n    // ø\n    0x033c: 0x250c,\n    // ┌\n    0x033d: 0x2510,\n    // ┐\n    0x033e: 0x2514,\n    // └\n    0x033f: 0x2518 // ┘\n\n  };\n\n  var getCharFromCode = function getCharFromCode(code) {\n    if (code === null) {\n      return '';\n    }\n\n    code = CHARACTER_TRANSLATION[code] || code;\n    return String.fromCharCode(code);\n  }; // the index of the last row in a CEA-608 display buffer\n\n\n  var BOTTOM_ROW = 14; // This array is used for mapping PACs -> row #, since there's no way of\n  // getting it through bit logic.\n\n  var ROWS = [0x1100, 0x1120, 0x1200, 0x1220, 0x1500, 0x1520, 0x1600, 0x1620, 0x1700, 0x1720, 0x1000, 0x1300, 0x1320, 0x1400, 0x1420]; // CEA-608 captions are rendered onto a 34x15 matrix of character\n  // cells. The \"bottom\" row is the last element in the outer array.\n\n  var createDisplayBuffer = function createDisplayBuffer() {\n    var result = [],\n        i = BOTTOM_ROW + 1;\n\n    while (i--) {\n      result.push('');\n    }\n\n    return result;\n  };\n\n  var Cea608Stream = function Cea608Stream(field, dataChannel) {\n    Cea608Stream.prototype.init.call(this);\n    this.field_ = field || 0;\n    this.dataChannel_ = dataChannel || 0;\n    this.name_ = 'CC' + ((this.field_ << 1 | this.dataChannel_) + 1);\n    this.setConstants();\n    this.reset();\n\n    this.push = function (packet) {\n      var data, swap, char0, char1, text; // remove the parity bits\n\n      data = packet.ccData & 0x7f7f; // ignore duplicate control codes; the spec demands they're sent twice\n\n      if (data === this.lastControlCode_) {\n        this.lastControlCode_ = null;\n        return;\n      } // Store control codes\n\n\n      if ((data & 0xf000) === 0x1000) {\n        this.lastControlCode_ = data;\n      } else if (data !== this.PADDING_) {\n        this.lastControlCode_ = null;\n      }\n\n      char0 = data >>> 8;\n      char1 = data & 0xff;\n\n      if (data === this.PADDING_) {\n        return;\n      } else if (data === this.RESUME_CAPTION_LOADING_) {\n        this.mode_ = 'popOn';\n      } else if (data === this.END_OF_CAPTION_) {\n        // If an EOC is received while in paint-on mode, the displayed caption\n        // text should be swapped to non-displayed memory as if it was a pop-on\n        // caption. Because of that, we should explicitly switch back to pop-on\n        // mode\n        this.mode_ = 'popOn';\n        this.clearFormatting(packet.pts); // if a caption was being displayed, it's gone now\n\n        this.flushDisplayed(packet.pts); // flip memory\n\n        swap = this.displayed_;\n        this.displayed_ = this.nonDisplayed_;\n        this.nonDisplayed_ = swap; // start measuring the time to display the caption\n\n        this.startPts_ = packet.pts;\n      } else if (data === this.ROLL_UP_2_ROWS_) {\n        this.rollUpRows_ = 2;\n        this.setRollUp(packet.pts);\n      } else if (data === this.ROLL_UP_3_ROWS_) {\n        this.rollUpRows_ = 3;\n        this.setRollUp(packet.pts);\n      } else if (data === this.ROLL_UP_4_ROWS_) {\n        this.rollUpRows_ = 4;\n        this.setRollUp(packet.pts);\n      } else if (data === this.CARRIAGE_RETURN_) {\n        this.clearFormatting(packet.pts);\n        this.flushDisplayed(packet.pts);\n        this.shiftRowsUp_();\n        this.startPts_ = packet.pts;\n      } else if (data === this.BACKSPACE_) {\n        if (this.mode_ === 'popOn') {\n          this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n        } else {\n          this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n        }\n      } else if (data === this.ERASE_DISPLAYED_MEMORY_) {\n        this.flushDisplayed(packet.pts);\n        this.displayed_ = createDisplayBuffer();\n      } else if (data === this.ERASE_NON_DISPLAYED_MEMORY_) {\n        this.nonDisplayed_ = createDisplayBuffer();\n      } else if (data === this.RESUME_DIRECT_CAPTIONING_) {\n        if (this.mode_ !== 'paintOn') {\n          // NOTE: This should be removed when proper caption positioning is\n          // implemented\n          this.flushDisplayed(packet.pts);\n          this.displayed_ = createDisplayBuffer();\n        }\n\n        this.mode_ = 'paintOn';\n        this.startPts_ = packet.pts; // Append special characters to caption text\n      } else if (this.isSpecialCharacter(char0, char1)) {\n        // Bitmask char0 so that we can apply character transformations\n        // regardless of field and data channel.\n        // Then byte-shift to the left and OR with char1 so we can pass the\n        // entire character code to `getCharFromCode`.\n        char0 = (char0 & 0x03) << 8;\n        text = getCharFromCode(char0 | char1);\n        this[this.mode_](packet.pts, text);\n        this.column_++; // Append extended characters to caption text\n      } else if (this.isExtCharacter(char0, char1)) {\n        // Extended characters always follow their \"non-extended\" equivalents.\n        // IE if a \"è\" is desired, you'll always receive \"eè\"; non-compliant\n        // decoders are supposed to drop the \"è\", while compliant decoders\n        // backspace the \"e\" and insert \"è\".\n        // Delete the previous character\n        if (this.mode_ === 'popOn') {\n          this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n        } else {\n          this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);\n        } // Bitmask char0 so that we can apply character transformations\n        // regardless of field and data channel.\n        // Then byte-shift to the left and OR with char1 so we can pass the\n        // entire character code to `getCharFromCode`.\n\n\n        char0 = (char0 & 0x03) << 8;\n        text = getCharFromCode(char0 | char1);\n        this[this.mode_](packet.pts, text);\n        this.column_++; // Process mid-row codes\n      } else if (this.isMidRowCode(char0, char1)) {\n        // Attributes are not additive, so clear all formatting\n        this.clearFormatting(packet.pts); // According to the standard, mid-row codes\n        // should be replaced with spaces, so add one now\n\n        this[this.mode_](packet.pts, ' ');\n        this.column_++;\n\n        if ((char1 & 0xe) === 0xe) {\n          this.addFormatting(packet.pts, ['i']);\n        }\n\n        if ((char1 & 0x1) === 0x1) {\n          this.addFormatting(packet.pts, ['u']);\n        } // Detect offset control codes and adjust cursor\n\n      } else if (this.isOffsetControlCode(char0, char1)) {\n        // Cursor position is set by indent PAC (see below) in 4-column\n        // increments, with an additional offset code of 1-3 to reach any\n        // of the 32 columns specified by CEA-608. So all we need to do\n        // here is increment the column cursor by the given offset.\n        this.column_ += char1 & 0x03; // Detect PACs (Preamble Address Codes)\n      } else if (this.isPAC(char0, char1)) {\n        // There's no logic for PAC -> row mapping, so we have to just\n        // find the row code in an array and use its index :(\n        var row = ROWS.indexOf(data & 0x1f20); // Configure the caption window if we're in roll-up mode\n\n        if (this.mode_ === 'rollUp') {\n          // This implies that the base row is incorrectly set.\n          // As per the recommendation in CEA-608(Base Row Implementation), defer to the number\n          // of roll-up rows set.\n          if (row - this.rollUpRows_ + 1 < 0) {\n            row = this.rollUpRows_ - 1;\n          }\n\n          this.setRollUp(packet.pts, row);\n        }\n\n        if (row !== this.row_) {\n          // formatting is only persistent for current row\n          this.clearFormatting(packet.pts);\n          this.row_ = row;\n        } // All PACs can apply underline, so detect and apply\n        // (All odd-numbered second bytes set underline)\n\n\n        if (char1 & 0x1 && this.formatting_.indexOf('u') === -1) {\n          this.addFormatting(packet.pts, ['u']);\n        }\n\n        if ((data & 0x10) === 0x10) {\n          // We've got an indent level code. Each successive even number\n          // increments the column cursor by 4, so we can get the desired\n          // column position by bit-shifting to the right (to get n/2)\n          // and multiplying by 4.\n          this.column_ = ((data & 0xe) >> 1) * 4;\n        }\n\n        if (this.isColorPAC(char1)) {\n          // it's a color code, though we only support white, which\n          // can be either normal or italicized. white italics can be\n          // either 0x4e or 0x6e depending on the row, so we just\n          // bitwise-and with 0xe to see if italics should be turned on\n          if ((char1 & 0xe) === 0xe) {\n            this.addFormatting(packet.pts, ['i']);\n          }\n        } // We have a normal character in char0, and possibly one in char1\n\n      } else if (this.isNormalChar(char0)) {\n        if (char1 === 0x00) {\n          char1 = null;\n        }\n\n        text = getCharFromCode(char0);\n        text += getCharFromCode(char1);\n        this[this.mode_](packet.pts, text);\n        this.column_ += text.length;\n      } // finish data processing\n\n    };\n  };\n\n  Cea608Stream.prototype = new stream(); // Trigger a cue point that captures the current state of the\n  // display buffer\n\n  Cea608Stream.prototype.flushDisplayed = function (pts) {\n    var content = this.displayed_ // remove spaces from the start and end of the string\n    .map(function (row, index) {\n      try {\n        return row.trim();\n      } catch (e) {\n        // Ordinarily, this shouldn't happen. However, caption\n        // parsing errors should not throw exceptions and\n        // break playback.\n        this.trigger('log', {\n          level: 'warn',\n          message: 'Skipping a malformed 608 caption at index ' + index + '.'\n        });\n        return '';\n      }\n    }, this) // combine all text rows to display in one cue\n    .join('\\n') // and remove blank rows from the start and end, but not the middle\n    .replace(/^\\n+|\\n+$/g, '');\n\n    if (content.length) {\n      this.trigger('data', {\n        startPts: this.startPts_,\n        endPts: pts,\n        text: content,\n        stream: this.name_\n      });\n    }\n  };\n  /**\n   * Zero out the data, used for startup and on seek\n   */\n\n\n  Cea608Stream.prototype.reset = function () {\n    this.mode_ = 'popOn'; // When in roll-up mode, the index of the last row that will\n    // actually display captions. If a caption is shifted to a row\n    // with a lower index than this, it is cleared from the display\n    // buffer\n\n    this.topRow_ = 0;\n    this.startPts_ = 0;\n    this.displayed_ = createDisplayBuffer();\n    this.nonDisplayed_ = createDisplayBuffer();\n    this.lastControlCode_ = null; // Track row and column for proper line-breaking and spacing\n\n    this.column_ = 0;\n    this.row_ = BOTTOM_ROW;\n    this.rollUpRows_ = 2; // This variable holds currently-applied formatting\n\n    this.formatting_ = [];\n  };\n  /**\n   * Sets up control code and related constants for this instance\n   */\n\n\n  Cea608Stream.prototype.setConstants = function () {\n    // The following attributes have these uses:\n    // ext_ :    char0 for mid-row codes, and the base for extended\n    //           chars (ext_+0, ext_+1, and ext_+2 are char0s for\n    //           extended codes)\n    // control_: char0 for control codes, except byte-shifted to the\n    //           left so that we can do this.control_ | CONTROL_CODE\n    // offset_:  char0 for tab offset codes\n    //\n    // It's also worth noting that control codes, and _only_ control codes,\n    // differ between field 1 and field2. Field 2 control codes are always\n    // their field 1 value plus 1. That's why there's the \"| field\" on the\n    // control value.\n    if (this.dataChannel_ === 0) {\n      this.BASE_ = 0x10;\n      this.EXT_ = 0x11;\n      this.CONTROL_ = (0x14 | this.field_) << 8;\n      this.OFFSET_ = 0x17;\n    } else if (this.dataChannel_ === 1) {\n      this.BASE_ = 0x18;\n      this.EXT_ = 0x19;\n      this.CONTROL_ = (0x1c | this.field_) << 8;\n      this.OFFSET_ = 0x1f;\n    } // Constants for the LSByte command codes recognized by Cea608Stream. This\n    // list is not exhaustive. For a more comprehensive listing and semantics see\n    // http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf\n    // Padding\n\n\n    this.PADDING_ = 0x0000; // Pop-on Mode\n\n    this.RESUME_CAPTION_LOADING_ = this.CONTROL_ | 0x20;\n    this.END_OF_CAPTION_ = this.CONTROL_ | 0x2f; // Roll-up Mode\n\n    this.ROLL_UP_2_ROWS_ = this.CONTROL_ | 0x25;\n    this.ROLL_UP_3_ROWS_ = this.CONTROL_ | 0x26;\n    this.ROLL_UP_4_ROWS_ = this.CONTROL_ | 0x27;\n    this.CARRIAGE_RETURN_ = this.CONTROL_ | 0x2d; // paint-on mode\n\n    this.RESUME_DIRECT_CAPTIONING_ = this.CONTROL_ | 0x29; // Erasure\n\n    this.BACKSPACE_ = this.CONTROL_ | 0x21;\n    this.ERASE_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2c;\n    this.ERASE_NON_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2e;\n  };\n  /**\n   * Detects if the 2-byte packet data is a special character\n   *\n   * Special characters have a second byte in the range 0x30 to 0x3f,\n   * with the first byte being 0x11 (for data channel 1) or 0x19 (for\n   * data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an special character\n   */\n\n\n  Cea608Stream.prototype.isSpecialCharacter = function (char0, char1) {\n    return char0 === this.EXT_ && char1 >= 0x30 && char1 <= 0x3f;\n  };\n  /**\n   * Detects if the 2-byte packet data is an extended character\n   *\n   * Extended characters have a second byte in the range 0x20 to 0x3f,\n   * with the first byte being 0x12 or 0x13 (for data channel 1) or\n   * 0x1a or 0x1b (for data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an extended character\n   */\n\n\n  Cea608Stream.prototype.isExtCharacter = function (char0, char1) {\n    return (char0 === this.EXT_ + 1 || char0 === this.EXT_ + 2) && char1 >= 0x20 && char1 <= 0x3f;\n  };\n  /**\n   * Detects if the 2-byte packet is a mid-row code\n   *\n   * Mid-row codes have a second byte in the range 0x20 to 0x2f, with\n   * the first byte being 0x11 (for data channel 1) or 0x19 (for data\n   * channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are a mid-row code\n   */\n\n\n  Cea608Stream.prototype.isMidRowCode = function (char0, char1) {\n    return char0 === this.EXT_ && char1 >= 0x20 && char1 <= 0x2f;\n  };\n  /**\n   * Detects if the 2-byte packet is an offset control code\n   *\n   * Offset control codes have a second byte in the range 0x21 to 0x23,\n   * with the first byte being 0x17 (for data channel 1) or 0x1f (for\n   * data channel 2).\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are an offset control code\n   */\n\n\n  Cea608Stream.prototype.isOffsetControlCode = function (char0, char1) {\n    return char0 === this.OFFSET_ && char1 >= 0x21 && char1 <= 0x23;\n  };\n  /**\n   * Detects if the 2-byte packet is a Preamble Address Code\n   *\n   * PACs have a first byte in the range 0x10 to 0x17 (for data channel 1)\n   * or 0x18 to 0x1f (for data channel 2), with the second byte in the\n   * range 0x40 to 0x7f.\n   *\n   * @param  {Integer} char0 The first byte\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the 2 bytes are a PAC\n   */\n\n\n  Cea608Stream.prototype.isPAC = function (char0, char1) {\n    return char0 >= this.BASE_ && char0 < this.BASE_ + 8 && char1 >= 0x40 && char1 <= 0x7f;\n  };\n  /**\n   * Detects if a packet's second byte is in the range of a PAC color code\n   *\n   * PAC color codes have the second byte be in the range 0x40 to 0x4f, or\n   * 0x60 to 0x6f.\n   *\n   * @param  {Integer} char1 The second byte\n   * @return {Boolean}       Whether the byte is a color PAC\n   */\n\n\n  Cea608Stream.prototype.isColorPAC = function (char1) {\n    return char1 >= 0x40 && char1 <= 0x4f || char1 >= 0x60 && char1 <= 0x7f;\n  };\n  /**\n   * Detects if a single byte is in the range of a normal character\n   *\n   * Normal text bytes are in the range 0x20 to 0x7f.\n   *\n   * @param  {Integer} char  The byte\n   * @return {Boolean}       Whether the byte is a normal character\n   */\n\n\n  Cea608Stream.prototype.isNormalChar = function (_char2) {\n    return _char2 >= 0x20 && _char2 <= 0x7f;\n  };\n  /**\n   * Configures roll-up\n   *\n   * @param  {Integer} pts         Current PTS\n   * @param  {Integer} newBaseRow  Used by PACs to slide the current window to\n   *                               a new position\n   */\n\n\n  Cea608Stream.prototype.setRollUp = function (pts, newBaseRow) {\n    // Reset the base row to the bottom row when switching modes\n    if (this.mode_ !== 'rollUp') {\n      this.row_ = BOTTOM_ROW;\n      this.mode_ = 'rollUp'; // Spec says to wipe memories when switching to roll-up\n\n      this.flushDisplayed(pts);\n      this.nonDisplayed_ = createDisplayBuffer();\n      this.displayed_ = createDisplayBuffer();\n    }\n\n    if (newBaseRow !== undefined && newBaseRow !== this.row_) {\n      // move currently displayed captions (up or down) to the new base row\n      for (var i = 0; i < this.rollUpRows_; i++) {\n        this.displayed_[newBaseRow - i] = this.displayed_[this.row_ - i];\n        this.displayed_[this.row_ - i] = '';\n      }\n    }\n\n    if (newBaseRow === undefined) {\n      newBaseRow = this.row_;\n    }\n\n    this.topRow_ = newBaseRow - this.rollUpRows_ + 1;\n  }; // Adds the opening HTML tag for the passed character to the caption text,\n  // and keeps track of it for later closing\n\n\n  Cea608Stream.prototype.addFormatting = function (pts, format) {\n    this.formatting_ = this.formatting_.concat(format);\n    var text = format.reduce(function (text, format) {\n      return text + '<' + format + '>';\n    }, '');\n    this[this.mode_](pts, text);\n  }; // Adds HTML closing tags for current formatting to caption text and\n  // clears remembered formatting\n\n\n  Cea608Stream.prototype.clearFormatting = function (pts) {\n    if (!this.formatting_.length) {\n      return;\n    }\n\n    var text = this.formatting_.reverse().reduce(function (text, format) {\n      return text + '</' + format + '>';\n    }, '');\n    this.formatting_ = [];\n    this[this.mode_](pts, text);\n  }; // Mode Implementations\n\n\n  Cea608Stream.prototype.popOn = function (pts, text) {\n    var baseRow = this.nonDisplayed_[this.row_]; // buffer characters\n\n    baseRow += text;\n    this.nonDisplayed_[this.row_] = baseRow;\n  };\n\n  Cea608Stream.prototype.rollUp = function (pts, text) {\n    var baseRow = this.displayed_[this.row_];\n    baseRow += text;\n    this.displayed_[this.row_] = baseRow;\n  };\n\n  Cea608Stream.prototype.shiftRowsUp_ = function () {\n    var i; // clear out inactive rows\n\n    for (i = 0; i < this.topRow_; i++) {\n      this.displayed_[i] = '';\n    }\n\n    for (i = this.row_ + 1; i < BOTTOM_ROW + 1; i++) {\n      this.displayed_[i] = '';\n    } // shift displayed rows up\n\n\n    for (i = this.topRow_; i < this.row_; i++) {\n      this.displayed_[i] = this.displayed_[i + 1];\n    } // clear out the bottom row\n\n\n    this.displayed_[this.row_] = '';\n  };\n\n  Cea608Stream.prototype.paintOn = function (pts, text) {\n    var baseRow = this.displayed_[this.row_];\n    baseRow += text;\n    this.displayed_[this.row_] = baseRow;\n  }; // exports\n\n\n  var captionStream = {\n    CaptionStream: CaptionStream$1,\n    Cea608Stream: Cea608Stream,\n    Cea708Stream: Cea708Stream\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var streamTypes = {\n    H264_STREAM_TYPE: 0x1B,\n    ADTS_STREAM_TYPE: 0x0F,\n    METADATA_STREAM_TYPE: 0x15\n  };\n  var MAX_TS = 8589934592;\n  var RO_THRESH = 4294967296;\n  var TYPE_SHARED = 'shared';\n\n  var handleRollover$1 = function handleRollover(value, reference) {\n    var direction = 1;\n\n    if (value > reference) {\n      // If the current timestamp value is greater than our reference timestamp and we detect a\n      // timestamp rollover, this means the roll over is happening in the opposite direction.\n      // Example scenario: Enter a long stream/video just after a rollover occurred. The reference\n      // point will be set to a small number, e.g. 1. The user then seeks backwards over the\n      // rollover point. In loading this segment, the timestamp values will be very large,\n      // e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust\n      // the time stamp to be `value - 2^33`.\n      direction = -1;\n    } // Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will\n    // cause an incorrect adjustment.\n\n\n    while (Math.abs(reference - value) > RO_THRESH) {\n      value += direction * MAX_TS;\n    }\n\n    return value;\n  };\n\n  var TimestampRolloverStream$1 = function TimestampRolloverStream(type) {\n    var lastDTS, referenceDTS;\n    TimestampRolloverStream.prototype.init.call(this); // The \"shared\" type is used in cases where a stream will contain muxed\n    // video and audio. We could use `undefined` here, but having a string\n    // makes debugging a little clearer.\n\n    this.type_ = type || TYPE_SHARED;\n\n    this.push = function (data) {\n      // Any \"shared\" rollover streams will accept _all_ data. Otherwise,\n      // streams will only accept data that matches their type.\n      if (this.type_ !== TYPE_SHARED && data.type !== this.type_) {\n        return;\n      }\n\n      if (referenceDTS === undefined) {\n        referenceDTS = data.dts;\n      }\n\n      data.dts = handleRollover$1(data.dts, referenceDTS);\n      data.pts = handleRollover$1(data.pts, referenceDTS);\n      lastDTS = data.dts;\n      this.trigger('data', data);\n    };\n\n    this.flush = function () {\n      referenceDTS = lastDTS;\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n\n    this.discontinuity = function () {\n      referenceDTS = void 0;\n      lastDTS = void 0;\n    };\n\n    this.reset = function () {\n      this.discontinuity();\n      this.trigger('reset');\n    };\n  };\n\n  TimestampRolloverStream$1.prototype = new stream();\n  var timestampRolloverStream = {\n    TimestampRolloverStream: TimestampRolloverStream$1,\n    handleRollover: handleRollover$1\n  };\n\n  var percentEncode$1 = function percentEncode(bytes, start, end) {\n    var i,\n        result = '';\n\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n\n    return result;\n  },\n      // return the string representation of the specified byte range,\n  // interpreted as UTf-8.\n  parseUtf8 = function parseUtf8(bytes, start, end) {\n    return decodeURIComponent(percentEncode$1(bytes, start, end));\n  },\n      // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n  parseIso88591$1 = function parseIso88591(bytes, start, end) {\n    return unescape(percentEncode$1(bytes, start, end)); // jshint ignore:line\n  },\n      parseSyncSafeInteger$1 = function parseSyncSafeInteger(data) {\n    return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n  },\n      tagParsers = {\n    TXXX: function TXXX(tag) {\n      var i;\n\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the text fields\n          tag.description = parseUtf8(tag.data, 1, i); // do not include the null terminator in the tag value\n\n          tag.value = parseUtf8(tag.data, i + 1, tag.data.length).replace(/\\0*$/, '');\n          break;\n        }\n      }\n\n      tag.data = tag.value;\n    },\n    WXXX: function WXXX(tag) {\n      var i;\n\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.description = parseUtf8(tag.data, 1, i);\n          tag.url = parseUtf8(tag.data, i + 1, tag.data.length);\n          break;\n        }\n      }\n    },\n    PRIV: function PRIV(tag) {\n      var i;\n\n      for (i = 0; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.owner = parseIso88591$1(tag.data, 0, i);\n          break;\n        }\n      }\n\n      tag.privateData = tag.data.subarray(i + 1);\n      tag.data = tag.privateData;\n    }\n  },\n      _MetadataStream;\n\n  _MetadataStream = function MetadataStream(options) {\n    var settings = {\n      // the bytes of the program-level descriptor field in MP2T\n      // see ISO/IEC 13818-1:2013 (E), section 2.6 \"Program and\n      // program element descriptors\"\n      descriptor: options && options.descriptor\n    },\n        // the total size in bytes of the ID3 tag being parsed\n    tagSize = 0,\n        // tag data that is not complete enough to be parsed\n    buffer = [],\n        // the total number of bytes currently in the buffer\n    bufferSize = 0,\n        i;\n\n    _MetadataStream.prototype.init.call(this); // calculate the text track in-band metadata track dispatch type\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track\n\n\n    this.dispatchType = streamTypes.METADATA_STREAM_TYPE.toString(16);\n\n    if (settings.descriptor) {\n      for (i = 0; i < settings.descriptor.length; i++) {\n        this.dispatchType += ('00' + settings.descriptor[i].toString(16)).slice(-2);\n      }\n    }\n\n    this.push = function (chunk) {\n      var tag, frameStart, frameSize, frame, i, frameHeader;\n\n      if (chunk.type !== 'timed-metadata') {\n        return;\n      } // if data_alignment_indicator is set in the PES header,\n      // we must have the start of a new ID3 tag. Assume anything\n      // remaining in the buffer was malformed and throw it out\n\n\n      if (chunk.dataAlignmentIndicator) {\n        bufferSize = 0;\n        buffer.length = 0;\n      } // ignore events that don't look like ID3 data\n\n\n      if (buffer.length === 0 && (chunk.data.length < 10 || chunk.data[0] !== 'I'.charCodeAt(0) || chunk.data[1] !== 'D'.charCodeAt(0) || chunk.data[2] !== '3'.charCodeAt(0))) {\n        this.trigger('log', {\n          level: 'warn',\n          message: 'Skipping unrecognized metadata packet'\n        });\n        return;\n      } // add this chunk to the data we've collected so far\n\n\n      buffer.push(chunk);\n      bufferSize += chunk.data.byteLength; // grab the size of the entire frame from the ID3 header\n\n      if (buffer.length === 1) {\n        // the frame size is transmitted as a 28-bit integer in the\n        // last four bytes of the ID3 header.\n        // The most significant bit of each byte is dropped and the\n        // results concatenated to recover the actual value.\n        tagSize = parseSyncSafeInteger$1(chunk.data.subarray(6, 10)); // ID3 reports the tag size excluding the header but it's more\n        // convenient for our comparisons to include it\n\n        tagSize += 10;\n      } // if the entire frame has not arrived, wait for more data\n\n\n      if (bufferSize < tagSize) {\n        return;\n      } // collect the entire frame so it can be parsed\n\n\n      tag = {\n        data: new Uint8Array(tagSize),\n        frames: [],\n        pts: buffer[0].pts,\n        dts: buffer[0].dts\n      };\n\n      for (i = 0; i < tagSize;) {\n        tag.data.set(buffer[0].data.subarray(0, tagSize - i), i);\n        i += buffer[0].data.byteLength;\n        bufferSize -= buffer[0].data.byteLength;\n        buffer.shift();\n      } // find the start of the first frame and the end of the tag\n\n\n      frameStart = 10;\n\n      if (tag.data[5] & 0x40) {\n        // advance the frame start past the extended header\n        frameStart += 4; // header size field\n\n        frameStart += parseSyncSafeInteger$1(tag.data.subarray(10, 14)); // clip any padding off the end\n\n        tagSize -= parseSyncSafeInteger$1(tag.data.subarray(16, 20));\n      } // parse one or more ID3 frames\n      // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n      do {\n        // determine the number of bytes in this frame\n        frameSize = parseSyncSafeInteger$1(tag.data.subarray(frameStart + 4, frameStart + 8));\n\n        if (frameSize < 1) {\n          this.trigger('log', {\n            level: 'warn',\n            message: 'Malformed ID3 frame encountered. Skipping metadata parsing.'\n          });\n          return;\n        }\n\n        frameHeader = String.fromCharCode(tag.data[frameStart], tag.data[frameStart + 1], tag.data[frameStart + 2], tag.data[frameStart + 3]);\n        frame = {\n          id: frameHeader,\n          data: tag.data.subarray(frameStart + 10, frameStart + frameSize + 10)\n        };\n        frame.key = frame.id;\n\n        if (tagParsers[frame.id]) {\n          tagParsers[frame.id](frame); // handle the special PRIV frame used to indicate the start\n          // time for raw AAC data\n\n          if (frame.owner === 'com.apple.streaming.transportStreamTimestamp') {\n            var d = frame.data,\n                size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n            size *= 4;\n            size += d[7] & 0x03;\n            frame.timeStamp = size; // in raw AAC, all subsequent data will be timestamped based\n            // on the value of this frame\n            // we couldn't have known the appropriate pts and dts before\n            // parsing this ID3 tag so set those values now\n\n            if (tag.pts === undefined && tag.dts === undefined) {\n              tag.pts = frame.timeStamp;\n              tag.dts = frame.timeStamp;\n            }\n\n            this.trigger('timestamp', frame);\n          }\n        }\n\n        tag.frames.push(frame);\n        frameStart += 10; // advance past the frame header\n\n        frameStart += frameSize; // advance past the frame body\n      } while (frameStart < tagSize);\n\n      this.trigger('data', tag);\n    };\n  };\n\n  _MetadataStream.prototype = new stream();\n  var metadataStream = _MetadataStream;\n  var TimestampRolloverStream = timestampRolloverStream.TimestampRolloverStream; // object types\n\n  var _TransportPacketStream, _TransportParseStream, _ElementaryStream; // constants\n\n\n  var MP2T_PACKET_LENGTH$1 = 188,\n      // bytes\n  SYNC_BYTE$1 = 0x47;\n  /**\n   * Splits an incoming stream of binary data into MPEG-2 Transport\n   * Stream packets.\n   */\n\n  _TransportPacketStream = function TransportPacketStream() {\n    var buffer = new Uint8Array(MP2T_PACKET_LENGTH$1),\n        bytesInBuffer = 0;\n\n    _TransportPacketStream.prototype.init.call(this); // Deliver new bytes to the stream.\n\n    /**\n     * Split a stream of data into M2TS packets\n    **/\n\n\n    this.push = function (bytes) {\n      var startIndex = 0,\n          endIndex = MP2T_PACKET_LENGTH$1,\n          everything; // If there are bytes remaining from the last segment, prepend them to the\n      // bytes that were pushed in\n\n      if (bytesInBuffer) {\n        everything = new Uint8Array(bytes.byteLength + bytesInBuffer);\n        everything.set(buffer.subarray(0, bytesInBuffer));\n        everything.set(bytes, bytesInBuffer);\n        bytesInBuffer = 0;\n      } else {\n        everything = bytes;\n      } // While we have enough data for a packet\n\n\n      while (endIndex < everything.byteLength) {\n        // Look for a pair of start and end sync bytes in the data..\n        if (everything[startIndex] === SYNC_BYTE$1 && everything[endIndex] === SYNC_BYTE$1) {\n          // We found a packet so emit it and jump one whole packet forward in\n          // the stream\n          this.trigger('data', everything.subarray(startIndex, endIndex));\n          startIndex += MP2T_PACKET_LENGTH$1;\n          endIndex += MP2T_PACKET_LENGTH$1;\n          continue;\n        } // If we get here, we have somehow become de-synchronized and we need to step\n        // forward one byte at a time until we find a pair of sync bytes that denote\n        // a packet\n\n\n        startIndex++;\n        endIndex++;\n      } // If there was some data left over at the end of the segment that couldn't\n      // possibly be a whole packet, keep it because it might be the start of a packet\n      // that continues in the next segment\n\n\n      if (startIndex < everything.byteLength) {\n        buffer.set(everything.subarray(startIndex), 0);\n        bytesInBuffer = everything.byteLength - startIndex;\n      }\n    };\n    /**\n     * Passes identified M2TS packets to the TransportParseStream to be parsed\n    **/\n\n\n    this.flush = function () {\n      // If the buffer contains a whole packet when we are being flushed, emit it\n      // and empty the buffer. Otherwise hold onto the data because it may be\n      // important for decoding the next segment\n      if (bytesInBuffer === MP2T_PACKET_LENGTH$1 && buffer[0] === SYNC_BYTE$1) {\n        this.trigger('data', buffer);\n        bytesInBuffer = 0;\n      }\n\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n\n    this.reset = function () {\n      bytesInBuffer = 0;\n      this.trigger('reset');\n    };\n  };\n\n  _TransportPacketStream.prototype = new stream();\n  /**\n   * Accepts an MP2T TransportPacketStream and emits data events with parsed\n   * forms of the individual transport stream packets.\n   */\n\n  _TransportParseStream = function TransportParseStream() {\n    var parsePsi, parsePat, parsePmt, self;\n\n    _TransportParseStream.prototype.init.call(this);\n\n    self = this;\n    this.packetsWaitingForPmt = [];\n    this.programMapTable = undefined;\n\n    parsePsi = function parsePsi(payload, psi) {\n      var offset = 0; // PSI packets may be split into multiple sections and those\n      // sections may be split into multiple packets. If a PSI\n      // section starts in this packet, the payload_unit_start_indicator\n      // will be true and the first byte of the payload will indicate\n      // the offset from the current position to the start of the\n      // section.\n\n      if (psi.payloadUnitStartIndicator) {\n        offset += payload[offset] + 1;\n      }\n\n      if (psi.type === 'pat') {\n        parsePat(payload.subarray(offset), psi);\n      } else {\n        parsePmt(payload.subarray(offset), psi);\n      }\n    };\n\n    parsePat = function parsePat(payload, pat) {\n      pat.section_number = payload[7]; // eslint-disable-line camelcase\n\n      pat.last_section_number = payload[8]; // eslint-disable-line camelcase\n      // skip the PSI header and parse the first PMT entry\n\n      self.pmtPid = (payload[10] & 0x1F) << 8 | payload[11];\n      pat.pmtPid = self.pmtPid;\n    };\n    /**\n     * Parse out the relevant fields of a Program Map Table (PMT).\n     * @param payload {Uint8Array} the PMT-specific portion of an MP2T\n     * packet. The first byte in this array should be the table_id\n     * field.\n     * @param pmt {object} the object that should be decorated with\n     * fields parsed from the PMT.\n     */\n\n\n    parsePmt = function parsePmt(payload, pmt) {\n      var sectionLength, tableEnd, programInfoLength, offset; // PMTs can be sent ahead of the time when they should actually\n      // take effect. We don't believe this should ever be the case\n      // for HLS but we'll ignore \"forward\" PMT declarations if we see\n      // them. Future PMT declarations have the current_next_indicator\n      // set to zero.\n\n      if (!(payload[5] & 0x01)) {\n        return;\n      } // overwrite any existing program map table\n\n\n      self.programMapTable = {\n        video: null,\n        audio: null,\n        'timed-metadata': {}\n      }; // the mapping table ends at the end of the current section\n\n      sectionLength = (payload[1] & 0x0f) << 8 | payload[2];\n      tableEnd = 3 + sectionLength - 4; // to determine where the table is, we have to figure out how\n      // long the program info descriptors are\n\n      programInfoLength = (payload[10] & 0x0f) << 8 | payload[11]; // advance the offset to the first entry in the mapping table\n\n      offset = 12 + programInfoLength;\n\n      while (offset < tableEnd) {\n        var streamType = payload[offset];\n        var pid = (payload[offset + 1] & 0x1F) << 8 | payload[offset + 2]; // only map a single elementary_pid for audio and video stream types\n        // TODO: should this be done for metadata too? for now maintain behavior of\n        //       multiple metadata streams\n\n        if (streamType === streamTypes.H264_STREAM_TYPE && self.programMapTable.video === null) {\n          self.programMapTable.video = pid;\n        } else if (streamType === streamTypes.ADTS_STREAM_TYPE && self.programMapTable.audio === null) {\n          self.programMapTable.audio = pid;\n        } else if (streamType === streamTypes.METADATA_STREAM_TYPE) {\n          // map pid to stream type for metadata streams\n          self.programMapTable['timed-metadata'][pid] = streamType;\n        } // move to the next table entry\n        // skip past the elementary stream descriptors, if present\n\n\n        offset += ((payload[offset + 3] & 0x0F) << 8 | payload[offset + 4]) + 5;\n      } // record the map on the packet as well\n\n\n      pmt.programMapTable = self.programMapTable;\n    };\n    /**\n     * Deliver a new MP2T packet to the next stream in the pipeline.\n     */\n\n\n    this.push = function (packet) {\n      var result = {},\n          offset = 4;\n      result.payloadUnitStartIndicator = !!(packet[1] & 0x40); // pid is a 13-bit field starting at the last bit of packet[1]\n\n      result.pid = packet[1] & 0x1f;\n      result.pid <<= 8;\n      result.pid |= packet[2]; // if an adaption field is present, its length is specified by the\n      // fifth byte of the TS packet header. The adaptation field is\n      // used to add stuffing to PES packets that don't fill a complete\n      // TS packet, and to specify some forms of timing and control data\n      // that we do not currently use.\n\n      if ((packet[3] & 0x30) >>> 4 > 0x01) {\n        offset += packet[offset] + 1;\n      } // parse the rest of the packet based on the type\n\n\n      if (result.pid === 0) {\n        result.type = 'pat';\n        parsePsi(packet.subarray(offset), result);\n        this.trigger('data', result);\n      } else if (result.pid === this.pmtPid) {\n        result.type = 'pmt';\n        parsePsi(packet.subarray(offset), result);\n        this.trigger('data', result); // if there are any packets waiting for a PMT to be found, process them now\n\n        while (this.packetsWaitingForPmt.length) {\n          this.processPes_.apply(this, this.packetsWaitingForPmt.shift());\n        }\n      } else if (this.programMapTable === undefined) {\n        // When we have not seen a PMT yet, defer further processing of\n        // PES packets until one has been parsed\n        this.packetsWaitingForPmt.push([packet, offset, result]);\n      } else {\n        this.processPes_(packet, offset, result);\n      }\n    };\n\n    this.processPes_ = function (packet, offset, result) {\n      // set the appropriate stream type\n      if (result.pid === this.programMapTable.video) {\n        result.streamType = streamTypes.H264_STREAM_TYPE;\n      } else if (result.pid === this.programMapTable.audio) {\n        result.streamType = streamTypes.ADTS_STREAM_TYPE;\n      } else {\n        // if not video or audio, it is timed-metadata or unknown\n        // if unknown, streamType will be undefined\n        result.streamType = this.programMapTable['timed-metadata'][result.pid];\n      }\n\n      result.type = 'pes';\n      result.data = packet.subarray(offset);\n      this.trigger('data', result);\n    };\n  };\n\n  _TransportParseStream.prototype = new stream();\n  _TransportParseStream.STREAM_TYPES = {\n    h264: 0x1b,\n    adts: 0x0f\n  };\n  /**\n   * Reconsistutes program elementary stream (PES) packets from parsed\n   * transport stream packets. That is, if you pipe an\n   * mp2t.TransportParseStream into a mp2t.ElementaryStream, the output\n   * events will be events which capture the bytes for individual PES\n   * packets plus relevant metadata that has been extracted from the\n   * container.\n   */\n\n  _ElementaryStream = function ElementaryStream() {\n    var self = this,\n        segmentHadPmt = false,\n        // PES packet fragments\n    video = {\n      data: [],\n      size: 0\n    },\n        audio = {\n      data: [],\n      size: 0\n    },\n        timedMetadata = {\n      data: [],\n      size: 0\n    },\n        programMapTable,\n        parsePes = function parsePes(payload, pes) {\n      var ptsDtsFlags;\n      var startPrefix = payload[0] << 16 | payload[1] << 8 | payload[2]; // default to an empty array\n\n      pes.data = new Uint8Array(); // In certain live streams, the start of a TS fragment has ts packets\n      // that are frame data that is continuing from the previous fragment. This\n      // is to check that the pes data is the start of a new pes payload\n\n      if (startPrefix !== 1) {\n        return;\n      } // get the packet length, this will be 0 for video\n\n\n      pes.packetLength = 6 + (payload[4] << 8 | payload[5]); // find out if this packets starts a new keyframe\n\n      pes.dataAlignmentIndicator = (payload[6] & 0x04) !== 0; // PES packets may be annotated with a PTS value, or a PTS value\n      // and a DTS value. Determine what combination of values is\n      // available to work with.\n\n      ptsDtsFlags = payload[7]; // PTS and DTS are normally stored as a 33-bit number.  Javascript\n      // performs all bitwise operations on 32-bit integers but javascript\n      // supports a much greater range (52-bits) of integer using standard\n      // mathematical operations.\n      // We construct a 31-bit value using bitwise operators over the 31\n      // most significant bits and then multiply by 4 (equal to a left-shift\n      // of 2) before we add the final 2 least significant bits of the\n      // timestamp (equal to an OR.)\n\n      if (ptsDtsFlags & 0xC0) {\n        // the PTS and DTS are not written out directly. For information\n        // on how they are encoded, see\n        // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n        pes.pts = (payload[9] & 0x0E) << 27 | (payload[10] & 0xFF) << 20 | (payload[11] & 0xFE) << 12 | (payload[12] & 0xFF) << 5 | (payload[13] & 0xFE) >>> 3;\n        pes.pts *= 4; // Left shift by 2\n\n        pes.pts += (payload[13] & 0x06) >>> 1; // OR by the two LSBs\n\n        pes.dts = pes.pts;\n\n        if (ptsDtsFlags & 0x40) {\n          pes.dts = (payload[14] & 0x0E) << 27 | (payload[15] & 0xFF) << 20 | (payload[16] & 0xFE) << 12 | (payload[17] & 0xFF) << 5 | (payload[18] & 0xFE) >>> 3;\n          pes.dts *= 4; // Left shift by 2\n\n          pes.dts += (payload[18] & 0x06) >>> 1; // OR by the two LSBs\n        }\n      } // the data section starts immediately after the PES header.\n      // pes_header_data_length specifies the number of header bytes\n      // that follow the last byte of the field.\n\n\n      pes.data = payload.subarray(9 + payload[8]);\n    },\n\n    /**\n      * Pass completely parsed PES packets to the next stream in the pipeline\n     **/\n    flushStream = function flushStream(stream, type, forceFlush) {\n      var packetData = new Uint8Array(stream.size),\n          event = {\n        type: type\n      },\n          i = 0,\n          offset = 0,\n          packetFlushable = false,\n          fragment; // do nothing if there is not enough buffered data for a complete\n      // PES header\n\n      if (!stream.data.length || stream.size < 9) {\n        return;\n      }\n\n      event.trackId = stream.data[0].pid; // reassemble the packet\n\n      for (i = 0; i < stream.data.length; i++) {\n        fragment = stream.data[i];\n        packetData.set(fragment.data, offset);\n        offset += fragment.data.byteLength;\n      } // parse assembled packet's PES header\n\n\n      parsePes(packetData, event); // non-video PES packets MUST have a non-zero PES_packet_length\n      // check that there is enough stream data to fill the packet\n\n      packetFlushable = type === 'video' || event.packetLength <= stream.size; // flush pending packets if the conditions are right\n\n      if (forceFlush || packetFlushable) {\n        stream.size = 0;\n        stream.data.length = 0;\n      } // only emit packets that are complete. this is to avoid assembling\n      // incomplete PES packets due to poor segmentation\n\n\n      if (packetFlushable) {\n        self.trigger('data', event);\n      }\n    };\n\n    _ElementaryStream.prototype.init.call(this);\n    /**\n     * Identifies M2TS packet types and parses PES packets using metadata\n     * parsed from the PMT\n     **/\n\n\n    this.push = function (data) {\n      ({\n        pat: function pat() {// we have to wait for the PMT to arrive as well before we\n          // have any meaningful metadata\n        },\n        pes: function pes() {\n          var stream, streamType;\n\n          switch (data.streamType) {\n            case streamTypes.H264_STREAM_TYPE:\n              stream = video;\n              streamType = 'video';\n              break;\n\n            case streamTypes.ADTS_STREAM_TYPE:\n              stream = audio;\n              streamType = 'audio';\n              break;\n\n            case streamTypes.METADATA_STREAM_TYPE:\n              stream = timedMetadata;\n              streamType = 'timed-metadata';\n              break;\n\n            default:\n              // ignore unknown stream types\n              return;\n          } // if a new packet is starting, we can flush the completed\n          // packet\n\n\n          if (data.payloadUnitStartIndicator) {\n            flushStream(stream, streamType, true);\n          } // buffer this fragment until we are sure we've received the\n          // complete payload\n\n\n          stream.data.push(data);\n          stream.size += data.data.byteLength;\n        },\n        pmt: function pmt() {\n          var event = {\n            type: 'metadata',\n            tracks: []\n          };\n          programMapTable = data.programMapTable; // translate audio and video streams to tracks\n\n          if (programMapTable.video !== null) {\n            event.tracks.push({\n              timelineStartInfo: {\n                baseMediaDecodeTime: 0\n              },\n              id: +programMapTable.video,\n              codec: 'avc',\n              type: 'video'\n            });\n          }\n\n          if (programMapTable.audio !== null) {\n            event.tracks.push({\n              timelineStartInfo: {\n                baseMediaDecodeTime: 0\n              },\n              id: +programMapTable.audio,\n              codec: 'adts',\n              type: 'audio'\n            });\n          }\n\n          segmentHadPmt = true;\n          self.trigger('data', event);\n        }\n      })[data.type]();\n    };\n\n    this.reset = function () {\n      video.size = 0;\n      video.data.length = 0;\n      audio.size = 0;\n      audio.data.length = 0;\n      this.trigger('reset');\n    };\n    /**\n     * Flush any remaining input. Video PES packets may be of variable\n     * length. Normally, the start of a new video packet can trigger the\n     * finalization of the previous packet. That is not possible if no\n     * more video is forthcoming, however. In that case, some other\n     * mechanism (like the end of the file) has to be employed. When it is\n     * clear that no additional data is forthcoming, calling this method\n     * will flush the buffered packets.\n     */\n\n\n    this.flushStreams_ = function () {\n      // !!THIS ORDER IS IMPORTANT!!\n      // video first then audio\n      flushStream(video, 'video');\n      flushStream(audio, 'audio');\n      flushStream(timedMetadata, 'timed-metadata');\n    };\n\n    this.flush = function () {\n      // if on flush we haven't had a pmt emitted\n      // and we have a pmt to emit. emit the pmt\n      // so that we trigger a trackinfo downstream.\n      if (!segmentHadPmt && programMapTable) {\n        var pmt = {\n          type: 'metadata',\n          tracks: []\n        }; // translate audio and video streams to tracks\n\n        if (programMapTable.video !== null) {\n          pmt.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.video,\n            codec: 'avc',\n            type: 'video'\n          });\n        }\n\n        if (programMapTable.audio !== null) {\n          pmt.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.audio,\n            codec: 'adts',\n            type: 'audio'\n          });\n        }\n\n        self.trigger('data', pmt);\n      }\n\n      segmentHadPmt = false;\n      this.flushStreams_();\n      this.trigger('done');\n    };\n  };\n\n  _ElementaryStream.prototype = new stream();\n  var m2ts = {\n    PAT_PID: 0x0000,\n    MP2T_PACKET_LENGTH: MP2T_PACKET_LENGTH$1,\n    TransportPacketStream: _TransportPacketStream,\n    TransportParseStream: _TransportParseStream,\n    ElementaryStream: _ElementaryStream,\n    TimestampRolloverStream: TimestampRolloverStream,\n    CaptionStream: captionStream.CaptionStream,\n    Cea608Stream: captionStream.Cea608Stream,\n    Cea708Stream: captionStream.Cea708Stream,\n    MetadataStream: metadataStream\n  };\n\n  for (var type in streamTypes) {\n    if (streamTypes.hasOwnProperty(type)) {\n      m2ts[type] = streamTypes[type];\n    }\n  }\n\n  var m2ts_1 = m2ts;\n  var ONE_SECOND_IN_TS$2 = clock.ONE_SECOND_IN_TS;\n\n  var _AdtsStream;\n\n  var ADTS_SAMPLING_FREQUENCIES$1 = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n  /*\n   * Accepts a ElementaryStream and emits data events with parsed\n   * AAC Audio Frames of the individual packets. Input audio in ADTS\n   * format is unpacked and re-emitted as AAC frames.\n   *\n   * @see http://wiki.multimedia.cx/index.php?title=ADTS\n   * @see http://wiki.multimedia.cx/?title=Understanding_AAC\n   */\n\n  _AdtsStream = function AdtsStream(handlePartialSegments) {\n    var buffer,\n        frameNum = 0;\n\n    _AdtsStream.prototype.init.call(this);\n\n    this.skipWarn_ = function (start, end) {\n      this.trigger('log', {\n        level: 'warn',\n        message: \"adts skiping bytes \" + start + \" to \" + end + \" in frame \" + frameNum + \" outside syncword\"\n      });\n    };\n\n    this.push = function (packet) {\n      var i = 0,\n          frameLength,\n          protectionSkipBytes,\n          oldBuffer,\n          sampleCount,\n          adtsFrameDuration;\n\n      if (!handlePartialSegments) {\n        frameNum = 0;\n      }\n\n      if (packet.type !== 'audio') {\n        // ignore non-audio data\n        return;\n      } // Prepend any data in the buffer to the input data so that we can parse\n      // aac frames the cross a PES packet boundary\n\n\n      if (buffer && buffer.length) {\n        oldBuffer = buffer;\n        buffer = new Uint8Array(oldBuffer.byteLength + packet.data.byteLength);\n        buffer.set(oldBuffer);\n        buffer.set(packet.data, oldBuffer.byteLength);\n      } else {\n        buffer = packet.data;\n      } // unpack any ADTS frames which have been fully received\n      // for details on the ADTS header, see http://wiki.multimedia.cx/index.php?title=ADTS\n\n\n      var skip; // We use i + 7 here because we want to be able to parse the entire header.\n      // If we don't have enough bytes to do that, then we definitely won't have a full frame.\n\n      while (i + 7 < buffer.length) {\n        // Look for the start of an ADTS header..\n        if (buffer[i] !== 0xFF || (buffer[i + 1] & 0xF6) !== 0xF0) {\n          if (typeof skip !== 'number') {\n            skip = i;\n          } // If a valid header was not found,  jump one forward and attempt to\n          // find a valid ADTS header starting at the next byte\n\n\n          i++;\n          continue;\n        }\n\n        if (typeof skip === 'number') {\n          this.skipWarn_(skip, i);\n          skip = null;\n        } // The protection skip bit tells us if we have 2 bytes of CRC data at the\n        // end of the ADTS header\n\n\n        protectionSkipBytes = (~buffer[i + 1] & 0x01) * 2; // Frame length is a 13 bit integer starting 16 bits from the\n        // end of the sync sequence\n        // NOTE: frame length includes the size of the header\n\n        frameLength = (buffer[i + 3] & 0x03) << 11 | buffer[i + 4] << 3 | (buffer[i + 5] & 0xe0) >> 5;\n        sampleCount = ((buffer[i + 6] & 0x03) + 1) * 1024;\n        adtsFrameDuration = sampleCount * ONE_SECOND_IN_TS$2 / ADTS_SAMPLING_FREQUENCIES$1[(buffer[i + 2] & 0x3c) >>> 2]; // If we don't have enough data to actually finish this ADTS frame,\n        // then we have to wait for more data\n\n        if (buffer.byteLength - i < frameLength) {\n          break;\n        } // Otherwise, deliver the complete AAC frame\n\n\n        this.trigger('data', {\n          pts: packet.pts + frameNum * adtsFrameDuration,\n          dts: packet.dts + frameNum * adtsFrameDuration,\n          sampleCount: sampleCount,\n          audioobjecttype: (buffer[i + 2] >>> 6 & 0x03) + 1,\n          channelcount: (buffer[i + 2] & 1) << 2 | (buffer[i + 3] & 0xc0) >>> 6,\n          samplerate: ADTS_SAMPLING_FREQUENCIES$1[(buffer[i + 2] & 0x3c) >>> 2],\n          samplingfrequencyindex: (buffer[i + 2] & 0x3c) >>> 2,\n          // assume ISO/IEC 14496-12 AudioSampleEntry default of 16\n          samplesize: 16,\n          // data is the frame without it's header\n          data: buffer.subarray(i + 7 + protectionSkipBytes, i + frameLength)\n        });\n        frameNum++;\n        i += frameLength;\n      }\n\n      if (typeof skip === 'number') {\n        this.skipWarn_(skip, i);\n        skip = null;\n      } // remove processed bytes from the buffer.\n\n\n      buffer = buffer.subarray(i);\n    };\n\n    this.flush = function () {\n      frameNum = 0;\n      this.trigger('done');\n    };\n\n    this.reset = function () {\n      buffer = void 0;\n      this.trigger('reset');\n    };\n\n    this.endTimeline = function () {\n      buffer = void 0;\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _AdtsStream.prototype = new stream();\n  var adts = _AdtsStream;\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var ExpGolomb;\n  /**\n   * Parser for exponential Golomb codes, a variable-bitwidth number encoding\n   * scheme used by h264.\n   */\n\n  ExpGolomb = function ExpGolomb(workingData) {\n    var // the number of bytes left to examine in workingData\n    workingBytesAvailable = workingData.byteLength,\n        // the current word being examined\n    workingWord = 0,\n        // :uint\n    // the number of bits left to examine in the current word\n    workingBitsAvailable = 0; // :uint;\n    // ():uint\n\n    this.length = function () {\n      return 8 * workingBytesAvailable;\n    }; // ():uint\n\n\n    this.bitsAvailable = function () {\n      return 8 * workingBytesAvailable + workingBitsAvailable;\n    }; // ():void\n\n\n    this.loadWord = function () {\n      var position = workingData.byteLength - workingBytesAvailable,\n          workingBytes = new Uint8Array(4),\n          availableBytes = Math.min(4, workingBytesAvailable);\n\n      if (availableBytes === 0) {\n        throw new Error('no bytes available');\n      }\n\n      workingBytes.set(workingData.subarray(position, position + availableBytes));\n      workingWord = new DataView(workingBytes.buffer).getUint32(0); // track the amount of workingData that has been processed\n\n      workingBitsAvailable = availableBytes * 8;\n      workingBytesAvailable -= availableBytes;\n    }; // (count:int):void\n\n\n    this.skipBits = function (count) {\n      var skipBytes; // :int\n\n      if (workingBitsAvailable > count) {\n        workingWord <<= count;\n        workingBitsAvailable -= count;\n      } else {\n        count -= workingBitsAvailable;\n        skipBytes = Math.floor(count / 8);\n        count -= skipBytes * 8;\n        workingBytesAvailable -= skipBytes;\n        this.loadWord();\n        workingWord <<= count;\n        workingBitsAvailable -= count;\n      }\n    }; // (size:int):uint\n\n\n    this.readBits = function (size) {\n      var bits = Math.min(workingBitsAvailable, size),\n          // :uint\n      valu = workingWord >>> 32 - bits; // :uint\n      // if size > 31, handle error\n\n      workingBitsAvailable -= bits;\n\n      if (workingBitsAvailable > 0) {\n        workingWord <<= bits;\n      } else if (workingBytesAvailable > 0) {\n        this.loadWord();\n      }\n\n      bits = size - bits;\n\n      if (bits > 0) {\n        return valu << bits | this.readBits(bits);\n      }\n\n      return valu;\n    }; // ():uint\n\n\n    this.skipLeadingZeros = function () {\n      var leadingZeroCount; // :uint\n\n      for (leadingZeroCount = 0; leadingZeroCount < workingBitsAvailable; ++leadingZeroCount) {\n        if ((workingWord & 0x80000000 >>> leadingZeroCount) !== 0) {\n          // the first bit of working word is 1\n          workingWord <<= leadingZeroCount;\n          workingBitsAvailable -= leadingZeroCount;\n          return leadingZeroCount;\n        }\n      } // we exhausted workingWord and still have not found a 1\n\n\n      this.loadWord();\n      return leadingZeroCount + this.skipLeadingZeros();\n    }; // ():void\n\n\n    this.skipUnsignedExpGolomb = function () {\n      this.skipBits(1 + this.skipLeadingZeros());\n    }; // ():void\n\n\n    this.skipExpGolomb = function () {\n      this.skipBits(1 + this.skipLeadingZeros());\n    }; // ():uint\n\n\n    this.readUnsignedExpGolomb = function () {\n      var clz = this.skipLeadingZeros(); // :uint\n\n      return this.readBits(clz + 1) - 1;\n    }; // ():int\n\n\n    this.readExpGolomb = function () {\n      var valu = this.readUnsignedExpGolomb(); // :int\n\n      if (0x01 & valu) {\n        // the number is odd if the low order bit is set\n        return 1 + valu >>> 1; // add 1 to make it even, and divide by 2\n      }\n\n      return -1 * (valu >>> 1); // divide by two then make it negative\n    }; // Some convenience functions\n    // :Boolean\n\n\n    this.readBoolean = function () {\n      return this.readBits(1) === 1;\n    }; // ():int\n\n\n    this.readUnsignedByte = function () {\n      return this.readBits(8);\n    };\n\n    this.loadWord();\n  };\n\n  var expGolomb = ExpGolomb;\n\n  var _H264Stream, _NalByteStream;\n\n  var PROFILES_WITH_OPTIONAL_SPS_DATA;\n  /**\n   * Accepts a NAL unit byte stream and unpacks the embedded NAL units.\n   */\n\n  _NalByteStream = function NalByteStream() {\n    var syncPoint = 0,\n        i,\n        buffer;\n\n    _NalByteStream.prototype.init.call(this);\n    /*\n     * Scans a byte stream and triggers a data event with the NAL units found.\n     * @param {Object} data Event received from H264Stream\n     * @param {Uint8Array} data.data The h264 byte stream to be scanned\n     *\n     * @see H264Stream.push\n     */\n\n\n    this.push = function (data) {\n      var swapBuffer;\n\n      if (!buffer) {\n        buffer = data.data;\n      } else {\n        swapBuffer = new Uint8Array(buffer.byteLength + data.data.byteLength);\n        swapBuffer.set(buffer);\n        swapBuffer.set(data.data, buffer.byteLength);\n        buffer = swapBuffer;\n      }\n\n      var len = buffer.byteLength; // Rec. ITU-T H.264, Annex B\n      // scan for NAL unit boundaries\n      // a match looks like this:\n      // 0 0 1 .. NAL .. 0 0 1\n      // ^ sync point        ^ i\n      // or this:\n      // 0 0 1 .. NAL .. 0 0 0\n      // ^ sync point        ^ i\n      // advance the sync point to a NAL start, if necessary\n\n      for (; syncPoint < len - 3; syncPoint++) {\n        if (buffer[syncPoint + 2] === 1) {\n          // the sync point is properly aligned\n          i = syncPoint + 5;\n          break;\n        }\n      }\n\n      while (i < len) {\n        // look at the current byte to determine if we've hit the end of\n        // a NAL unit boundary\n        switch (buffer[i]) {\n          case 0:\n            // skip past non-sync sequences\n            if (buffer[i - 1] !== 0) {\n              i += 2;\n              break;\n            } else if (buffer[i - 2] !== 0) {\n              i++;\n              break;\n            } // deliver the NAL unit if it isn't empty\n\n\n            if (syncPoint + 3 !== i - 2) {\n              this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n            } // drop trailing zeroes\n\n\n            do {\n              i++;\n            } while (buffer[i] !== 1 && i < len);\n\n            syncPoint = i - 2;\n            i += 3;\n            break;\n\n          case 1:\n            // skip past non-sync sequences\n            if (buffer[i - 1] !== 0 || buffer[i - 2] !== 0) {\n              i += 3;\n              break;\n            } // deliver the NAL unit\n\n\n            this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n            syncPoint = i - 2;\n            i += 3;\n            break;\n\n          default:\n            // the current byte isn't a one or zero, so it cannot be part\n            // of a sync sequence\n            i += 3;\n            break;\n        }\n      } // filter out the NAL units that were delivered\n\n\n      buffer = buffer.subarray(syncPoint);\n      i -= syncPoint;\n      syncPoint = 0;\n    };\n\n    this.reset = function () {\n      buffer = null;\n      syncPoint = 0;\n      this.trigger('reset');\n    };\n\n    this.flush = function () {\n      // deliver the last buffered NAL unit\n      if (buffer && buffer.byteLength > 3) {\n        this.trigger('data', buffer.subarray(syncPoint + 3));\n      } // reset the stream state\n\n\n      buffer = null;\n      syncPoint = 0;\n      this.trigger('done');\n    };\n\n    this.endTimeline = function () {\n      this.flush();\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _NalByteStream.prototype = new stream(); // values of profile_idc that indicate additional fields are included in the SPS\n  // see Recommendation ITU-T H.264 (4/2013),\n  // 7.3.2.1.1 Sequence parameter set data syntax\n\n  PROFILES_WITH_OPTIONAL_SPS_DATA = {\n    100: true,\n    110: true,\n    122: true,\n    244: true,\n    44: true,\n    83: true,\n    86: true,\n    118: true,\n    128: true,\n    // TODO: the three profiles below don't\n    // appear to have sps data in the specificiation anymore?\n    138: true,\n    139: true,\n    134: true\n  };\n  /**\n   * Accepts input from a ElementaryStream and produces H.264 NAL unit data\n   * events.\n   */\n\n  _H264Stream = function H264Stream() {\n    var nalByteStream = new _NalByteStream(),\n        self,\n        trackId,\n        currentPts,\n        currentDts,\n        discardEmulationPreventionBytes,\n        readSequenceParameterSet,\n        skipScalingList;\n\n    _H264Stream.prototype.init.call(this);\n\n    self = this;\n    /*\n     * Pushes a packet from a stream onto the NalByteStream\n     *\n     * @param {Object} packet - A packet received from a stream\n     * @param {Uint8Array} packet.data - The raw bytes of the packet\n     * @param {Number} packet.dts - Decode timestamp of the packet\n     * @param {Number} packet.pts - Presentation timestamp of the packet\n     * @param {Number} packet.trackId - The id of the h264 track this packet came from\n     * @param {('video'|'audio')} packet.type - The type of packet\n     *\n     */\n\n    this.push = function (packet) {\n      if (packet.type !== 'video') {\n        return;\n      }\n\n      trackId = packet.trackId;\n      currentPts = packet.pts;\n      currentDts = packet.dts;\n      nalByteStream.push(packet);\n    };\n    /*\n     * Identify NAL unit types and pass on the NALU, trackId, presentation and decode timestamps\n     * for the NALUs to the next stream component.\n     * Also, preprocess caption and sequence parameter NALUs.\n     *\n     * @param {Uint8Array} data - A NAL unit identified by `NalByteStream.push`\n     * @see NalByteStream.push\n     */\n\n\n    nalByteStream.on('data', function (data) {\n      var event = {\n        trackId: trackId,\n        pts: currentPts,\n        dts: currentDts,\n        data: data,\n        nalUnitTypeCode: data[0] & 0x1f\n      };\n\n      switch (event.nalUnitTypeCode) {\n        case 0x05:\n          event.nalUnitType = 'slice_layer_without_partitioning_rbsp_idr';\n          break;\n\n        case 0x06:\n          event.nalUnitType = 'sei_rbsp';\n          event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n          break;\n\n        case 0x07:\n          event.nalUnitType = 'seq_parameter_set_rbsp';\n          event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n          event.config = readSequenceParameterSet(event.escapedRBSP);\n          break;\n\n        case 0x08:\n          event.nalUnitType = 'pic_parameter_set_rbsp';\n          break;\n\n        case 0x09:\n          event.nalUnitType = 'access_unit_delimiter_rbsp';\n          break;\n      } // This triggers data on the H264Stream\n\n\n      self.trigger('data', event);\n    });\n    nalByteStream.on('done', function () {\n      self.trigger('done');\n    });\n    nalByteStream.on('partialdone', function () {\n      self.trigger('partialdone');\n    });\n    nalByteStream.on('reset', function () {\n      self.trigger('reset');\n    });\n    nalByteStream.on('endedtimeline', function () {\n      self.trigger('endedtimeline');\n    });\n\n    this.flush = function () {\n      nalByteStream.flush();\n    };\n\n    this.partialFlush = function () {\n      nalByteStream.partialFlush();\n    };\n\n    this.reset = function () {\n      nalByteStream.reset();\n    };\n\n    this.endTimeline = function () {\n      nalByteStream.endTimeline();\n    };\n    /**\n     * Advance the ExpGolomb decoder past a scaling list. The scaling\n     * list is optionally transmitted as part of a sequence parameter\n     * set and is not relevant to transmuxing.\n     * @param count {number} the number of entries in this scaling list\n     * @param expGolombDecoder {object} an ExpGolomb pointed to the\n     * start of a scaling list\n     * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n     */\n\n\n    skipScalingList = function skipScalingList(count, expGolombDecoder) {\n      var lastScale = 8,\n          nextScale = 8,\n          j,\n          deltaScale;\n\n      for (j = 0; j < count; j++) {\n        if (nextScale !== 0) {\n          deltaScale = expGolombDecoder.readExpGolomb();\n          nextScale = (lastScale + deltaScale + 256) % 256;\n        }\n\n        lastScale = nextScale === 0 ? lastScale : nextScale;\n      }\n    };\n    /**\n     * Expunge any \"Emulation Prevention\" bytes from a \"Raw Byte\n     * Sequence Payload\"\n     * @param data {Uint8Array} the bytes of a RBSP from a NAL\n     * unit\n     * @return {Uint8Array} the RBSP without any Emulation\n     * Prevention Bytes\n     */\n\n\n    discardEmulationPreventionBytes = function discardEmulationPreventionBytes(data) {\n      var length = data.byteLength,\n          emulationPreventionBytesPositions = [],\n          i = 1,\n          newLength,\n          newData; // Find all `Emulation Prevention Bytes`\n\n      while (i < length - 2) {\n        if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n          emulationPreventionBytesPositions.push(i + 2);\n          i += 2;\n        } else {\n          i++;\n        }\n      } // If no Emulation Prevention Bytes were found just return the original\n      // array\n\n\n      if (emulationPreventionBytesPositions.length === 0) {\n        return data;\n      } // Create a new array to hold the NAL unit data\n\n\n      newLength = length - emulationPreventionBytesPositions.length;\n      newData = new Uint8Array(newLength);\n      var sourceIndex = 0;\n\n      for (i = 0; i < newLength; sourceIndex++, i++) {\n        if (sourceIndex === emulationPreventionBytesPositions[0]) {\n          // Skip this byte\n          sourceIndex++; // Remove this position index\n\n          emulationPreventionBytesPositions.shift();\n        }\n\n        newData[i] = data[sourceIndex];\n      }\n\n      return newData;\n    };\n    /**\n     * Read a sequence parameter set and return some interesting video\n     * properties. A sequence parameter set is the H264 metadata that\n     * describes the properties of upcoming video frames.\n     * @param data {Uint8Array} the bytes of a sequence parameter set\n     * @return {object} an object with configuration parsed from the\n     * sequence parameter set, including the dimensions of the\n     * associated video frames.\n     */\n\n\n    readSequenceParameterSet = function readSequenceParameterSet(data) {\n      var frameCropLeftOffset = 0,\n          frameCropRightOffset = 0,\n          frameCropTopOffset = 0,\n          frameCropBottomOffset = 0,\n          expGolombDecoder,\n          profileIdc,\n          levelIdc,\n          profileCompatibility,\n          chromaFormatIdc,\n          picOrderCntType,\n          numRefFramesInPicOrderCntCycle,\n          picWidthInMbsMinus1,\n          picHeightInMapUnitsMinus1,\n          frameMbsOnlyFlag,\n          scalingListCount,\n          sarRatio = [1, 1],\n          aspectRatioIdc,\n          i;\n      expGolombDecoder = new expGolomb(data);\n      profileIdc = expGolombDecoder.readUnsignedByte(); // profile_idc\n\n      profileCompatibility = expGolombDecoder.readUnsignedByte(); // constraint_set[0-5]_flag\n\n      levelIdc = expGolombDecoder.readUnsignedByte(); // level_idc u(8)\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // seq_parameter_set_id\n      // some profiles have more optional data we don't need\n\n      if (PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]) {\n        chromaFormatIdc = expGolombDecoder.readUnsignedExpGolomb();\n\n        if (chromaFormatIdc === 3) {\n          expGolombDecoder.skipBits(1); // separate_colour_plane_flag\n        }\n\n        expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_luma_minus8\n\n        expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_chroma_minus8\n\n        expGolombDecoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\n\n        if (expGolombDecoder.readBoolean()) {\n          // seq_scaling_matrix_present_flag\n          scalingListCount = chromaFormatIdc !== 3 ? 8 : 12;\n\n          for (i = 0; i < scalingListCount; i++) {\n            if (expGolombDecoder.readBoolean()) {\n              // seq_scaling_list_present_flag[ i ]\n              if (i < 6) {\n                skipScalingList(16, expGolombDecoder);\n              } else {\n                skipScalingList(64, expGolombDecoder);\n              }\n            }\n          }\n        }\n      }\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // log2_max_frame_num_minus4\n\n      picOrderCntType = expGolombDecoder.readUnsignedExpGolomb();\n\n      if (picOrderCntType === 0) {\n        expGolombDecoder.readUnsignedExpGolomb(); // log2_max_pic_order_cnt_lsb_minus4\n      } else if (picOrderCntType === 1) {\n        expGolombDecoder.skipBits(1); // delta_pic_order_always_zero_flag\n\n        expGolombDecoder.skipExpGolomb(); // offset_for_non_ref_pic\n\n        expGolombDecoder.skipExpGolomb(); // offset_for_top_to_bottom_field\n\n        numRefFramesInPicOrderCntCycle = expGolombDecoder.readUnsignedExpGolomb();\n\n        for (i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n          expGolombDecoder.skipExpGolomb(); // offset_for_ref_frame[ i ]\n        }\n      }\n\n      expGolombDecoder.skipUnsignedExpGolomb(); // max_num_ref_frames\n\n      expGolombDecoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\n\n      picWidthInMbsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n      picHeightInMapUnitsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n      frameMbsOnlyFlag = expGolombDecoder.readBits(1);\n\n      if (frameMbsOnlyFlag === 0) {\n        expGolombDecoder.skipBits(1); // mb_adaptive_frame_field_flag\n      }\n\n      expGolombDecoder.skipBits(1); // direct_8x8_inference_flag\n\n      if (expGolombDecoder.readBoolean()) {\n        // frame_cropping_flag\n        frameCropLeftOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropRightOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropTopOffset = expGolombDecoder.readUnsignedExpGolomb();\n        frameCropBottomOffset = expGolombDecoder.readUnsignedExpGolomb();\n      }\n\n      if (expGolombDecoder.readBoolean()) {\n        // vui_parameters_present_flag\n        if (expGolombDecoder.readBoolean()) {\n          // aspect_ratio_info_present_flag\n          aspectRatioIdc = expGolombDecoder.readUnsignedByte();\n\n          switch (aspectRatioIdc) {\n            case 1:\n              sarRatio = [1, 1];\n              break;\n\n            case 2:\n              sarRatio = [12, 11];\n              break;\n\n            case 3:\n              sarRatio = [10, 11];\n              break;\n\n            case 4:\n              sarRatio = [16, 11];\n              break;\n\n            case 5:\n              sarRatio = [40, 33];\n              break;\n\n            case 6:\n              sarRatio = [24, 11];\n              break;\n\n            case 7:\n              sarRatio = [20, 11];\n              break;\n\n            case 8:\n              sarRatio = [32, 11];\n              break;\n\n            case 9:\n              sarRatio = [80, 33];\n              break;\n\n            case 10:\n              sarRatio = [18, 11];\n              break;\n\n            case 11:\n              sarRatio = [15, 11];\n              break;\n\n            case 12:\n              sarRatio = [64, 33];\n              break;\n\n            case 13:\n              sarRatio = [160, 99];\n              break;\n\n            case 14:\n              sarRatio = [4, 3];\n              break;\n\n            case 15:\n              sarRatio = [3, 2];\n              break;\n\n            case 16:\n              sarRatio = [2, 1];\n              break;\n\n            case 255:\n              {\n                sarRatio = [expGolombDecoder.readUnsignedByte() << 8 | expGolombDecoder.readUnsignedByte(), expGolombDecoder.readUnsignedByte() << 8 | expGolombDecoder.readUnsignedByte()];\n                break;\n              }\n          }\n\n          if (sarRatio) {\n            sarRatio[0] / sarRatio[1];\n          }\n        }\n      }\n\n      return {\n        profileIdc: profileIdc,\n        levelIdc: levelIdc,\n        profileCompatibility: profileCompatibility,\n        width: (picWidthInMbsMinus1 + 1) * 16 - frameCropLeftOffset * 2 - frameCropRightOffset * 2,\n        height: (2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16 - frameCropTopOffset * 2 - frameCropBottomOffset * 2,\n        // sar is sample aspect ratio\n        sarRatio: sarRatio\n      };\n    };\n  };\n\n  _H264Stream.prototype = new stream();\n  var h264 = {\n    H264Stream: _H264Stream,\n    NalByteStream: _NalByteStream\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   *\n   * Utilities to detect basic properties and metadata about Aac data.\n   */\n\n  var ADTS_SAMPLING_FREQUENCIES = [96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350];\n\n  var parseId3TagSize = function parseId3TagSize(header, byteIndex) {\n    var returnSize = header[byteIndex + 6] << 21 | header[byteIndex + 7] << 14 | header[byteIndex + 8] << 7 | header[byteIndex + 9],\n        flags = header[byteIndex + 5],\n        footerPresent = (flags & 16) >> 4; // if we get a negative returnSize clamp it to 0\n\n    returnSize = returnSize >= 0 ? returnSize : 0;\n\n    if (footerPresent) {\n      return returnSize + 20;\n    }\n\n    return returnSize + 10;\n  };\n\n  var getId3Offset = function getId3Offset(data, offset) {\n    if (data.length - offset < 10 || data[offset] !== 'I'.charCodeAt(0) || data[offset + 1] !== 'D'.charCodeAt(0) || data[offset + 2] !== '3'.charCodeAt(0)) {\n      return offset;\n    }\n\n    offset += parseId3TagSize(data, offset);\n    return getId3Offset(data, offset);\n  }; // TODO: use vhs-utils\n\n\n  var isLikelyAacData$1 = function isLikelyAacData(data) {\n    var offset = getId3Offset(data, 0);\n    return data.length >= offset + 2 && (data[offset] & 0xFF) === 0xFF && (data[offset + 1] & 0xF0) === 0xF0 && // verify that the 2 layer bits are 0, aka this\n    // is not mp3 data but aac data.\n    (data[offset + 1] & 0x16) === 0x10;\n  };\n\n  var parseSyncSafeInteger = function parseSyncSafeInteger(data) {\n    return data[0] << 21 | data[1] << 14 | data[2] << 7 | data[3];\n  }; // return a percent-encoded representation of the specified byte range\n  // @see http://en.wikipedia.org/wiki/Percent-encoding\n\n\n  var percentEncode = function percentEncode(bytes, start, end) {\n    var i,\n        result = '';\n\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n\n    return result;\n  }; // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n\n\n  var parseIso88591 = function parseIso88591(bytes, start, end) {\n    return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n  };\n\n  var parseAdtsSize = function parseAdtsSize(header, byteIndex) {\n    var lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n        middle = header[byteIndex + 4] << 3,\n        highTwo = header[byteIndex + 3] & 0x3 << 11;\n    return highTwo | middle | lowThree;\n  };\n\n  var parseType$2 = function parseType(header, byteIndex) {\n    if (header[byteIndex] === 'I'.charCodeAt(0) && header[byteIndex + 1] === 'D'.charCodeAt(0) && header[byteIndex + 2] === '3'.charCodeAt(0)) {\n      return 'timed-metadata';\n    } else if (header[byteIndex] & 0xff === 0xff && (header[byteIndex + 1] & 0xf0) === 0xf0) {\n      return 'audio';\n    }\n\n    return null;\n  };\n\n  var parseSampleRate = function parseSampleRate(packet) {\n    var i = 0;\n\n    while (i + 5 < packet.length) {\n      if (packet[i] !== 0xFF || (packet[i + 1] & 0xF6) !== 0xF0) {\n        // If a valid header was not found,  jump one forward and attempt to\n        // find a valid ADTS header starting at the next byte\n        i++;\n        continue;\n      }\n\n      return ADTS_SAMPLING_FREQUENCIES[(packet[i + 2] & 0x3c) >>> 2];\n    }\n\n    return null;\n  };\n\n  var parseAacTimestamp = function parseAacTimestamp(packet) {\n    var frameStart, frameSize, frame, frameHeader; // find the start of the first frame and the end of the tag\n\n    frameStart = 10;\n\n    if (packet[5] & 0x40) {\n      // advance the frame start past the extended header\n      frameStart += 4; // header size field\n\n      frameStart += parseSyncSafeInteger(packet.subarray(10, 14));\n    } // parse one or more ID3 frames\n    // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n\n\n    do {\n      // determine the number of bytes in this frame\n      frameSize = parseSyncSafeInteger(packet.subarray(frameStart + 4, frameStart + 8));\n\n      if (frameSize < 1) {\n        return null;\n      }\n\n      frameHeader = String.fromCharCode(packet[frameStart], packet[frameStart + 1], packet[frameStart + 2], packet[frameStart + 3]);\n\n      if (frameHeader === 'PRIV') {\n        frame = packet.subarray(frameStart + 10, frameStart + frameSize + 10);\n\n        for (var i = 0; i < frame.byteLength; i++) {\n          if (frame[i] === 0) {\n            var owner = parseIso88591(frame, 0, i);\n\n            if (owner === 'com.apple.streaming.transportStreamTimestamp') {\n              var d = frame.subarray(i + 1);\n              var size = (d[3] & 0x01) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;\n              size *= 4;\n              size += d[7] & 0x03;\n              return size;\n            }\n\n            break;\n          }\n        }\n      }\n\n      frameStart += 10; // advance past the frame header\n\n      frameStart += frameSize; // advance past the frame body\n    } while (frameStart < packet.byteLength);\n\n    return null;\n  };\n\n  var utils = {\n    isLikelyAacData: isLikelyAacData$1,\n    parseId3TagSize: parseId3TagSize,\n    parseAdtsSize: parseAdtsSize,\n    parseType: parseType$2,\n    parseSampleRate: parseSampleRate,\n    parseAacTimestamp: parseAacTimestamp\n  };\n\n  var _AacStream;\n  /**\n   * Splits an incoming stream of binary data into ADTS and ID3 Frames.\n   */\n\n\n  _AacStream = function AacStream() {\n    var everything = new Uint8Array(),\n        timeStamp = 0;\n\n    _AacStream.prototype.init.call(this);\n\n    this.setTimestamp = function (timestamp) {\n      timeStamp = timestamp;\n    };\n\n    this.push = function (bytes) {\n      var frameSize = 0,\n          byteIndex = 0,\n          bytesLeft,\n          chunk,\n          packet,\n          tempLength; // If there are bytes remaining from the last segment, prepend them to the\n      // bytes that were pushed in\n\n      if (everything.length) {\n        tempLength = everything.length;\n        everything = new Uint8Array(bytes.byteLength + tempLength);\n        everything.set(everything.subarray(0, tempLength));\n        everything.set(bytes, tempLength);\n      } else {\n        everything = bytes;\n      }\n\n      while (everything.length - byteIndex >= 3) {\n        if (everything[byteIndex] === 'I'.charCodeAt(0) && everything[byteIndex + 1] === 'D'.charCodeAt(0) && everything[byteIndex + 2] === '3'.charCodeAt(0)) {\n          // Exit early because we don't have enough to parse\n          // the ID3 tag header\n          if (everything.length - byteIndex < 10) {\n            break;\n          } // check framesize\n\n\n          frameSize = utils.parseId3TagSize(everything, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n          // Add to byteIndex to support multiple ID3 tags in sequence\n\n          if (byteIndex + frameSize > everything.length) {\n            break;\n          }\n\n          chunk = {\n            type: 'timed-metadata',\n            data: everything.subarray(byteIndex, byteIndex + frameSize)\n          };\n          this.trigger('data', chunk);\n          byteIndex += frameSize;\n          continue;\n        } else if ((everything[byteIndex] & 0xff) === 0xff && (everything[byteIndex + 1] & 0xf0) === 0xf0) {\n          // Exit early because we don't have enough to parse\n          // the ADTS frame header\n          if (everything.length - byteIndex < 7) {\n            break;\n          }\n\n          frameSize = utils.parseAdtsSize(everything, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n\n          if (byteIndex + frameSize > everything.length) {\n            break;\n          }\n\n          packet = {\n            type: 'audio',\n            data: everything.subarray(byteIndex, byteIndex + frameSize),\n            pts: timeStamp,\n            dts: timeStamp\n          };\n          this.trigger('data', packet);\n          byteIndex += frameSize;\n          continue;\n        }\n\n        byteIndex++;\n      }\n\n      bytesLeft = everything.length - byteIndex;\n\n      if (bytesLeft > 0) {\n        everything = everything.subarray(byteIndex);\n      } else {\n        everything = new Uint8Array();\n      }\n    };\n\n    this.reset = function () {\n      everything = new Uint8Array();\n      this.trigger('reset');\n    };\n\n    this.endTimeline = function () {\n      everything = new Uint8Array();\n      this.trigger('endedtimeline');\n    };\n  };\n\n  _AacStream.prototype = new stream();\n  var aac = _AacStream; // constants\n\n  var AUDIO_PROPERTIES = ['audioobjecttype', 'channelcount', 'samplerate', 'samplingfrequencyindex', 'samplesize'];\n  var audioProperties = AUDIO_PROPERTIES;\n  var VIDEO_PROPERTIES = ['width', 'height', 'profileIdc', 'levelIdc', 'profileCompatibility', 'sarRatio'];\n  var videoProperties = VIDEO_PROPERTIES;\n  var H264Stream = h264.H264Stream;\n  var isLikelyAacData = utils.isLikelyAacData;\n  var ONE_SECOND_IN_TS$1 = clock.ONE_SECOND_IN_TS; // object types\n\n  var _VideoSegmentStream, _AudioSegmentStream, _Transmuxer, _CoalesceStream;\n\n  var retriggerForStream = function retriggerForStream(key, event) {\n    event.stream = key;\n    this.trigger('log', event);\n  };\n\n  var addPipelineLogRetriggers = function addPipelineLogRetriggers(transmuxer, pipeline) {\n    var keys = Object.keys(pipeline);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i]; // skip non-stream keys and headOfPipeline\n      // which is just a duplicate\n\n      if (key === 'headOfPipeline' || !pipeline[key].on) {\n        continue;\n      }\n\n      pipeline[key].on('log', retriggerForStream.bind(transmuxer, key));\n    }\n  };\n  /**\n   * Compare two arrays (even typed) for same-ness\n   */\n\n\n  var arrayEquals = function arrayEquals(a, b) {\n    var i;\n\n    if (a.length !== b.length) {\n      return false;\n    } // compare the value of each element in the array\n\n\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  var generateSegmentTimingInfo = function generateSegmentTimingInfo(baseMediaDecodeTime, startDts, startPts, endDts, endPts, prependedContentDuration) {\n    var ptsOffsetFromDts = startPts - startDts,\n        decodeDuration = endDts - startDts,\n        presentationDuration = endPts - startPts; // The PTS and DTS values are based on the actual stream times from the segment,\n    // however, the player time values will reflect a start from the baseMediaDecodeTime.\n    // In order to provide relevant values for the player times, base timing info on the\n    // baseMediaDecodeTime and the DTS and PTS durations of the segment.\n\n    return {\n      start: {\n        dts: baseMediaDecodeTime,\n        pts: baseMediaDecodeTime + ptsOffsetFromDts\n      },\n      end: {\n        dts: baseMediaDecodeTime + decodeDuration,\n        pts: baseMediaDecodeTime + presentationDuration\n      },\n      prependedContentDuration: prependedContentDuration,\n      baseMediaDecodeTime: baseMediaDecodeTime\n    };\n  };\n  /**\n   * Constructs a single-track, ISO BMFF media segment from AAC data\n   * events. The output of this stream can be fed to a SourceBuffer\n   * configured with a suitable initialization segment.\n   * @param track {object} track metadata configuration\n   * @param options {object} transmuxer options object\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n\n  _AudioSegmentStream = function AudioSegmentStream(track, options) {\n    var adtsFrames = [],\n        sequenceNumber,\n        earliestAllowedDts = 0,\n        audioAppendStartTs = 0,\n        videoBaseMediaDecodeTime = Infinity;\n    options = options || {};\n    sequenceNumber = options.firstSequenceNumber || 0;\n\n    _AudioSegmentStream.prototype.init.call(this);\n\n    this.push = function (data) {\n      trackDecodeInfo.collectDtsInfo(track, data);\n\n      if (track) {\n        audioProperties.forEach(function (prop) {\n          track[prop] = data[prop];\n        });\n      } // buffer audio data until end() is called\n\n\n      adtsFrames.push(data);\n    };\n\n    this.setEarliestDts = function (earliestDts) {\n      earliestAllowedDts = earliestDts;\n    };\n\n    this.setVideoBaseMediaDecodeTime = function (baseMediaDecodeTime) {\n      videoBaseMediaDecodeTime = baseMediaDecodeTime;\n    };\n\n    this.setAudioAppendStart = function (timestamp) {\n      audioAppendStartTs = timestamp;\n    };\n\n    this.flush = function () {\n      var frames, moof, mdat, boxes, frameDuration, segmentDuration, videoClockCyclesOfSilencePrefixed; // return early if no audio data has been observed\n\n      if (adtsFrames.length === 0) {\n        this.trigger('done', 'AudioSegmentStream');\n        return;\n      }\n\n      frames = audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames, track, earliestAllowedDts);\n      track.baseMediaDecodeTime = trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track, options.keepOriginalTimestamps); // amount of audio filled but the value is in video clock rather than audio clock\n\n      videoClockCyclesOfSilencePrefixed = audioFrameUtils.prefixWithSilence(track, frames, audioAppendStartTs, videoBaseMediaDecodeTime); // we have to build the index from byte locations to\n      // samples (that is, adts frames) in the audio data\n\n      track.samples = audioFrameUtils.generateSampleTable(frames); // concatenate the audio data to constuct the mdat\n\n      mdat = mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));\n      adtsFrames = [];\n      moof = mp4Generator.moof(sequenceNumber, [track]);\n      boxes = new Uint8Array(moof.byteLength + mdat.byteLength); // bump the sequence number for next time\n\n      sequenceNumber++;\n      boxes.set(moof);\n      boxes.set(mdat, moof.byteLength);\n      trackDecodeInfo.clearDtsInfo(track);\n      frameDuration = Math.ceil(ONE_SECOND_IN_TS$1 * 1024 / track.samplerate); // TODO this check was added to maintain backwards compatibility (particularly with\n      // tests) on adding the timingInfo event. However, it seems unlikely that there's a\n      // valid use-case where an init segment/data should be triggered without associated\n      // frames. Leaving for now, but should be looked into.\n\n      if (frames.length) {\n        segmentDuration = frames.length * frameDuration;\n        this.trigger('segmentTimingInfo', generateSegmentTimingInfo( // The audio track's baseMediaDecodeTime is in audio clock cycles, but the\n        // frame info is in video clock cycles. Convert to match expectation of\n        // listeners (that all timestamps will be based on video clock cycles).\n        clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate), // frame times are already in video clock, as is segment duration\n        frames[0].dts, frames[0].pts, frames[0].dts + segmentDuration, frames[0].pts + segmentDuration, videoClockCyclesOfSilencePrefixed || 0));\n        this.trigger('timingInfo', {\n          start: frames[0].pts,\n          end: frames[0].pts + segmentDuration\n        });\n      }\n\n      this.trigger('data', {\n        track: track,\n        boxes: boxes\n      });\n      this.trigger('done', 'AudioSegmentStream');\n    };\n\n    this.reset = function () {\n      trackDecodeInfo.clearDtsInfo(track);\n      adtsFrames = [];\n      this.trigger('reset');\n    };\n  };\n\n  _AudioSegmentStream.prototype = new stream();\n  /**\n   * Constructs a single-track, ISO BMFF media segment from H264 data\n   * events. The output of this stream can be fed to a SourceBuffer\n   * configured with a suitable initialization segment.\n   * @param track {object} track metadata configuration\n   * @param options {object} transmuxer options object\n   * @param options.alignGopsAtEnd {boolean} If true, start from the end of the\n   *        gopsToAlignWith list when attempting to align gop pts\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at 0.\n   */\n\n  _VideoSegmentStream = function VideoSegmentStream(track, options) {\n    var sequenceNumber,\n        nalUnits = [],\n        gopsToAlignWith = [],\n        config,\n        pps;\n    options = options || {};\n    sequenceNumber = options.firstSequenceNumber || 0;\n\n    _VideoSegmentStream.prototype.init.call(this);\n\n    delete track.minPTS;\n    this.gopCache_ = [];\n    /**\n      * Constructs a ISO BMFF segment given H264 nalUnits\n      * @param {Object} nalUnit A data event representing a nalUnit\n      * @param {String} nalUnit.nalUnitType\n      * @param {Object} nalUnit.config Properties for a mp4 track\n      * @param {Uint8Array} nalUnit.data The nalUnit bytes\n      * @see lib/codecs/h264.js\n     **/\n\n    this.push = function (nalUnit) {\n      trackDecodeInfo.collectDtsInfo(track, nalUnit); // record the track config\n\n      if (nalUnit.nalUnitType === 'seq_parameter_set_rbsp' && !config) {\n        config = nalUnit.config;\n        track.sps = [nalUnit.data];\n        videoProperties.forEach(function (prop) {\n          track[prop] = config[prop];\n        }, this);\n      }\n\n      if (nalUnit.nalUnitType === 'pic_parameter_set_rbsp' && !pps) {\n        pps = nalUnit.data;\n        track.pps = [nalUnit.data];\n      } // buffer video until flush() is called\n\n\n      nalUnits.push(nalUnit);\n    };\n    /**\n      * Pass constructed ISO BMFF track and boxes on to the\n      * next stream in the pipeline\n     **/\n\n\n    this.flush = function () {\n      var frames,\n          gopForFusion,\n          gops,\n          moof,\n          mdat,\n          boxes,\n          prependedContentDuration = 0,\n          firstGop,\n          lastGop; // Throw away nalUnits at the start of the byte stream until\n      // we find the first AUD\n\n      while (nalUnits.length) {\n        if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n          break;\n        }\n\n        nalUnits.shift();\n      } // Return early if no video data has been observed\n\n\n      if (nalUnits.length === 0) {\n        this.resetStream_();\n        this.trigger('done', 'VideoSegmentStream');\n        return;\n      } // Organize the raw nal-units into arrays that represent\n      // higher-level constructs such as frames and gops\n      // (group-of-pictures)\n\n\n      frames = frameUtils.groupNalsIntoFrames(nalUnits);\n      gops = frameUtils.groupFramesIntoGops(frames); // If the first frame of this fragment is not a keyframe we have\n      // a problem since MSE (on Chrome) requires a leading keyframe.\n      //\n      // We have two approaches to repairing this situation:\n      // 1) GOP-FUSION:\n      //    This is where we keep track of the GOPS (group-of-pictures)\n      //    from previous fragments and attempt to find one that we can\n      //    prepend to the current fragment in order to create a valid\n      //    fragment.\n      // 2) KEYFRAME-PULLING:\n      //    Here we search for the first keyframe in the fragment and\n      //    throw away all the frames between the start of the fragment\n      //    and that keyframe. We then extend the duration and pull the\n      //    PTS of the keyframe forward so that it covers the time range\n      //    of the frames that were disposed of.\n      //\n      // #1 is far prefereable over #2 which can cause \"stuttering\" but\n      // requires more things to be just right.\n\n      if (!gops[0][0].keyFrame) {\n        // Search for a gop for fusion from our gopCache\n        gopForFusion = this.getGopForFusion_(nalUnits[0], track);\n\n        if (gopForFusion) {\n          // in order to provide more accurate timing information about the segment, save\n          // the number of seconds prepended to the original segment due to GOP fusion\n          prependedContentDuration = gopForFusion.duration;\n          gops.unshift(gopForFusion); // Adjust Gops' metadata to account for the inclusion of the\n          // new gop at the beginning\n\n          gops.byteLength += gopForFusion.byteLength;\n          gops.nalCount += gopForFusion.nalCount;\n          gops.pts = gopForFusion.pts;\n          gops.dts = gopForFusion.dts;\n          gops.duration += gopForFusion.duration;\n        } else {\n          // If we didn't find a candidate gop fall back to keyframe-pulling\n          gops = frameUtils.extendFirstKeyFrame(gops);\n        }\n      } // Trim gops to align with gopsToAlignWith\n\n\n      if (gopsToAlignWith.length) {\n        var alignedGops;\n\n        if (options.alignGopsAtEnd) {\n          alignedGops = this.alignGopsAtEnd_(gops);\n        } else {\n          alignedGops = this.alignGopsAtStart_(gops);\n        }\n\n        if (!alignedGops) {\n          // save all the nals in the last GOP into the gop cache\n          this.gopCache_.unshift({\n            gop: gops.pop(),\n            pps: track.pps,\n            sps: track.sps\n          }); // Keep a maximum of 6 GOPs in the cache\n\n          this.gopCache_.length = Math.min(6, this.gopCache_.length); // Clear nalUnits\n\n          nalUnits = []; // return early no gops can be aligned with desired gopsToAlignWith\n\n          this.resetStream_();\n          this.trigger('done', 'VideoSegmentStream');\n          return;\n        } // Some gops were trimmed. clear dts info so minSegmentDts and pts are correct\n        // when recalculated before sending off to CoalesceStream\n\n\n        trackDecodeInfo.clearDtsInfo(track);\n        gops = alignedGops;\n      }\n\n      trackDecodeInfo.collectDtsInfo(track, gops); // First, we have to build the index from byte locations to\n      // samples (that is, frames) in the video data\n\n      track.samples = frameUtils.generateSampleTable(gops); // Concatenate the video data and construct the mdat\n\n      mdat = mp4Generator.mdat(frameUtils.concatenateNalData(gops));\n      track.baseMediaDecodeTime = trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track, options.keepOriginalTimestamps);\n      this.trigger('processedGopsInfo', gops.map(function (gop) {\n        return {\n          pts: gop.pts,\n          dts: gop.dts,\n          byteLength: gop.byteLength\n        };\n      }));\n      firstGop = gops[0];\n      lastGop = gops[gops.length - 1];\n      this.trigger('segmentTimingInfo', generateSegmentTimingInfo(track.baseMediaDecodeTime, firstGop.dts, firstGop.pts, lastGop.dts + lastGop.duration, lastGop.pts + lastGop.duration, prependedContentDuration));\n      this.trigger('timingInfo', {\n        start: gops[0].pts,\n        end: gops[gops.length - 1].pts + gops[gops.length - 1].duration\n      }); // save all the nals in the last GOP into the gop cache\n\n      this.gopCache_.unshift({\n        gop: gops.pop(),\n        pps: track.pps,\n        sps: track.sps\n      }); // Keep a maximum of 6 GOPs in the cache\n\n      this.gopCache_.length = Math.min(6, this.gopCache_.length); // Clear nalUnits\n\n      nalUnits = [];\n      this.trigger('baseMediaDecodeTime', track.baseMediaDecodeTime);\n      this.trigger('timelineStartInfo', track.timelineStartInfo);\n      moof = mp4Generator.moof(sequenceNumber, [track]); // it would be great to allocate this array up front instead of\n      // throwing away hundreds of media segment fragments\n\n      boxes = new Uint8Array(moof.byteLength + mdat.byteLength); // Bump the sequence number for next time\n\n      sequenceNumber++;\n      boxes.set(moof);\n      boxes.set(mdat, moof.byteLength);\n      this.trigger('data', {\n        track: track,\n        boxes: boxes\n      });\n      this.resetStream_(); // Continue with the flush process now\n\n      this.trigger('done', 'VideoSegmentStream');\n    };\n\n    this.reset = function () {\n      this.resetStream_();\n      nalUnits = [];\n      this.gopCache_.length = 0;\n      gopsToAlignWith.length = 0;\n      this.trigger('reset');\n    };\n\n    this.resetStream_ = function () {\n      trackDecodeInfo.clearDtsInfo(track); // reset config and pps because they may differ across segments\n      // for instance, when we are rendition switching\n\n      config = undefined;\n      pps = undefined;\n    }; // Search for a candidate Gop for gop-fusion from the gop cache and\n    // return it or return null if no good candidate was found\n\n\n    this.getGopForFusion_ = function (nalUnit) {\n      var halfSecond = 45000,\n          // Half-a-second in a 90khz clock\n      allowableOverlap = 10000,\n          // About 3 frames @ 30fps\n      nearestDistance = Infinity,\n          dtsDistance,\n          nearestGopObj,\n          currentGop,\n          currentGopObj,\n          i; // Search for the GOP nearest to the beginning of this nal unit\n\n      for (i = 0; i < this.gopCache_.length; i++) {\n        currentGopObj = this.gopCache_[i];\n        currentGop = currentGopObj.gop; // Reject Gops with different SPS or PPS\n\n        if (!(track.pps && arrayEquals(track.pps[0], currentGopObj.pps[0])) || !(track.sps && arrayEquals(track.sps[0], currentGopObj.sps[0]))) {\n          continue;\n        } // Reject Gops that would require a negative baseMediaDecodeTime\n\n\n        if (currentGop.dts < track.timelineStartInfo.dts) {\n          continue;\n        } // The distance between the end of the gop and the start of the nalUnit\n\n\n        dtsDistance = nalUnit.dts - currentGop.dts - currentGop.duration; // Only consider GOPS that start before the nal unit and end within\n        // a half-second of the nal unit\n\n        if (dtsDistance >= -allowableOverlap && dtsDistance <= halfSecond) {\n          // Always use the closest GOP we found if there is more than\n          // one candidate\n          if (!nearestGopObj || nearestDistance > dtsDistance) {\n            nearestGopObj = currentGopObj;\n            nearestDistance = dtsDistance;\n          }\n        }\n      }\n\n      if (nearestGopObj) {\n        return nearestGopObj.gop;\n      }\n\n      return null;\n    }; // trim gop list to the first gop found that has a matching pts with a gop in the list\n    // of gopsToAlignWith starting from the START of the list\n\n\n    this.alignGopsAtStart_ = function (gops) {\n      var alignIndex, gopIndex, align, gop, byteLength, nalCount, duration, alignedGops;\n      byteLength = gops.byteLength;\n      nalCount = gops.nalCount;\n      duration = gops.duration;\n      alignIndex = gopIndex = 0;\n\n      while (alignIndex < gopsToAlignWith.length && gopIndex < gops.length) {\n        align = gopsToAlignWith[alignIndex];\n        gop = gops[gopIndex];\n\n        if (align.pts === gop.pts) {\n          break;\n        }\n\n        if (gop.pts > align.pts) {\n          // this current gop starts after the current gop we want to align on, so increment\n          // align index\n          alignIndex++;\n          continue;\n        } // current gop starts before the current gop we want to align on. so increment gop\n        // index\n\n\n        gopIndex++;\n        byteLength -= gop.byteLength;\n        nalCount -= gop.nalCount;\n        duration -= gop.duration;\n      }\n\n      if (gopIndex === 0) {\n        // no gops to trim\n        return gops;\n      }\n\n      if (gopIndex === gops.length) {\n        // all gops trimmed, skip appending all gops\n        return null;\n      }\n\n      alignedGops = gops.slice(gopIndex);\n      alignedGops.byteLength = byteLength;\n      alignedGops.duration = duration;\n      alignedGops.nalCount = nalCount;\n      alignedGops.pts = alignedGops[0].pts;\n      alignedGops.dts = alignedGops[0].dts;\n      return alignedGops;\n    }; // trim gop list to the first gop found that has a matching pts with a gop in the list\n    // of gopsToAlignWith starting from the END of the list\n\n\n    this.alignGopsAtEnd_ = function (gops) {\n      var alignIndex, gopIndex, align, gop, alignEndIndex, matchFound;\n      alignIndex = gopsToAlignWith.length - 1;\n      gopIndex = gops.length - 1;\n      alignEndIndex = null;\n      matchFound = false;\n\n      while (alignIndex >= 0 && gopIndex >= 0) {\n        align = gopsToAlignWith[alignIndex];\n        gop = gops[gopIndex];\n\n        if (align.pts === gop.pts) {\n          matchFound = true;\n          break;\n        }\n\n        if (align.pts > gop.pts) {\n          alignIndex--;\n          continue;\n        }\n\n        if (alignIndex === gopsToAlignWith.length - 1) {\n          // gop.pts is greater than the last alignment candidate. If no match is found\n          // by the end of this loop, we still want to append gops that come after this\n          // point\n          alignEndIndex = gopIndex;\n        }\n\n        gopIndex--;\n      }\n\n      if (!matchFound && alignEndIndex === null) {\n        return null;\n      }\n\n      var trimIndex;\n\n      if (matchFound) {\n        trimIndex = gopIndex;\n      } else {\n        trimIndex = alignEndIndex;\n      }\n\n      if (trimIndex === 0) {\n        return gops;\n      }\n\n      var alignedGops = gops.slice(trimIndex);\n      var metadata = alignedGops.reduce(function (total, gop) {\n        total.byteLength += gop.byteLength;\n        total.duration += gop.duration;\n        total.nalCount += gop.nalCount;\n        return total;\n      }, {\n        byteLength: 0,\n        duration: 0,\n        nalCount: 0\n      });\n      alignedGops.byteLength = metadata.byteLength;\n      alignedGops.duration = metadata.duration;\n      alignedGops.nalCount = metadata.nalCount;\n      alignedGops.pts = alignedGops[0].pts;\n      alignedGops.dts = alignedGops[0].dts;\n      return alignedGops;\n    };\n\n    this.alignGopsWith = function (newGopsToAlignWith) {\n      gopsToAlignWith = newGopsToAlignWith;\n    };\n  };\n\n  _VideoSegmentStream.prototype = new stream();\n  /**\n   * A Stream that can combine multiple streams (ie. audio & video)\n   * into a single output segment for MSE. Also supports audio-only\n   * and video-only streams.\n   * @param options {object} transmuxer options object\n   * @param options.keepOriginalTimestamps {boolean} If true, keep the timestamps\n   *        in the source; false to adjust the first segment to start at media timeline start.\n   */\n\n  _CoalesceStream = function CoalesceStream(options, metadataStream) {\n    // Number of Tracks per output segment\n    // If greater than 1, we combine multiple\n    // tracks into a single segment\n    this.numberOfTracks = 0;\n    this.metadataStream = metadataStream;\n    options = options || {};\n\n    if (typeof options.remux !== 'undefined') {\n      this.remuxTracks = !!options.remux;\n    } else {\n      this.remuxTracks = true;\n    }\n\n    if (typeof options.keepOriginalTimestamps === 'boolean') {\n      this.keepOriginalTimestamps = options.keepOriginalTimestamps;\n    } else {\n      this.keepOriginalTimestamps = false;\n    }\n\n    this.pendingTracks = [];\n    this.videoTrack = null;\n    this.pendingBoxes = [];\n    this.pendingCaptions = [];\n    this.pendingMetadata = [];\n    this.pendingBytes = 0;\n    this.emittedTracks = 0;\n\n    _CoalesceStream.prototype.init.call(this); // Take output from multiple\n\n\n    this.push = function (output) {\n      // buffer incoming captions until the associated video segment\n      // finishes\n      if (output.text) {\n        return this.pendingCaptions.push(output);\n      } // buffer incoming id3 tags until the final flush\n\n\n      if (output.frames) {\n        return this.pendingMetadata.push(output);\n      } // Add this track to the list of pending tracks and store\n      // important information required for the construction of\n      // the final segment\n\n\n      this.pendingTracks.push(output.track);\n      this.pendingBytes += output.boxes.byteLength; // TODO: is there an issue for this against chrome?\n      // We unshift audio and push video because\n      // as of Chrome 75 when switching from\n      // one init segment to another if the video\n      // mdat does not appear after the audio mdat\n      // only audio will play for the duration of our transmux.\n\n      if (output.track.type === 'video') {\n        this.videoTrack = output.track;\n        this.pendingBoxes.push(output.boxes);\n      }\n\n      if (output.track.type === 'audio') {\n        this.audioTrack = output.track;\n        this.pendingBoxes.unshift(output.boxes);\n      }\n    };\n  };\n\n  _CoalesceStream.prototype = new stream();\n\n  _CoalesceStream.prototype.flush = function (flushSource) {\n    var offset = 0,\n        event = {\n      captions: [],\n      captionStreams: {},\n      metadata: [],\n      info: {}\n    },\n        caption,\n        id3,\n        initSegment,\n        timelineStartPts = 0,\n        i;\n\n    if (this.pendingTracks.length < this.numberOfTracks) {\n      if (flushSource !== 'VideoSegmentStream' && flushSource !== 'AudioSegmentStream') {\n        // Return because we haven't received a flush from a data-generating\n        // portion of the segment (meaning that we have only recieved meta-data\n        // or captions.)\n        return;\n      } else if (this.remuxTracks) {\n        // Return until we have enough tracks from the pipeline to remux (if we\n        // are remuxing audio and video into a single MP4)\n        return;\n      } else if (this.pendingTracks.length === 0) {\n        // In the case where we receive a flush without any data having been\n        // received we consider it an emitted track for the purposes of coalescing\n        // `done` events.\n        // We do this for the case where there is an audio and video track in the\n        // segment but no audio data. (seen in several playlists with alternate\n        // audio tracks and no audio present in the main TS segments.)\n        this.emittedTracks++;\n\n        if (this.emittedTracks >= this.numberOfTracks) {\n          this.trigger('done');\n          this.emittedTracks = 0;\n        }\n\n        return;\n      }\n    }\n\n    if (this.videoTrack) {\n      timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n      videoProperties.forEach(function (prop) {\n        event.info[prop] = this.videoTrack[prop];\n      }, this);\n    } else if (this.audioTrack) {\n      timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n      audioProperties.forEach(function (prop) {\n        event.info[prop] = this.audioTrack[prop];\n      }, this);\n    }\n\n    if (this.videoTrack || this.audioTrack) {\n      if (this.pendingTracks.length === 1) {\n        event.type = this.pendingTracks[0].type;\n      } else {\n        event.type = 'combined';\n      }\n\n      this.emittedTracks += this.pendingTracks.length;\n      initSegment = mp4Generator.initSegment(this.pendingTracks); // Create a new typed array to hold the init segment\n\n      event.initSegment = new Uint8Array(initSegment.byteLength); // Create an init segment containing a moov\n      // and track definitions\n\n      event.initSegment.set(initSegment); // Create a new typed array to hold the moof+mdats\n\n      event.data = new Uint8Array(this.pendingBytes); // Append each moof+mdat (one per track) together\n\n      for (i = 0; i < this.pendingBoxes.length; i++) {\n        event.data.set(this.pendingBoxes[i], offset);\n        offset += this.pendingBoxes[i].byteLength;\n      } // Translate caption PTS times into second offsets to match the\n      // video timeline for the segment, and add track info\n\n\n      for (i = 0; i < this.pendingCaptions.length; i++) {\n        caption = this.pendingCaptions[i];\n        caption.startTime = clock.metadataTsToSeconds(caption.startPts, timelineStartPts, this.keepOriginalTimestamps);\n        caption.endTime = clock.metadataTsToSeconds(caption.endPts, timelineStartPts, this.keepOriginalTimestamps);\n        event.captionStreams[caption.stream] = true;\n        event.captions.push(caption);\n      } // Translate ID3 frame PTS times into second offsets to match the\n      // video timeline for the segment\n\n\n      for (i = 0; i < this.pendingMetadata.length; i++) {\n        id3 = this.pendingMetadata[i];\n        id3.cueTime = clock.metadataTsToSeconds(id3.pts, timelineStartPts, this.keepOriginalTimestamps);\n        event.metadata.push(id3);\n      } // We add this to every single emitted segment even though we only need\n      // it for the first\n\n\n      event.metadata.dispatchType = this.metadataStream.dispatchType; // Reset stream state\n\n      this.pendingTracks.length = 0;\n      this.videoTrack = null;\n      this.pendingBoxes.length = 0;\n      this.pendingCaptions.length = 0;\n      this.pendingBytes = 0;\n      this.pendingMetadata.length = 0; // Emit the built segment\n      // We include captions and ID3 tags for backwards compatibility,\n      // ideally we should send only video and audio in the data event\n\n      this.trigger('data', event); // Emit each caption to the outside world\n      // Ideally, this would happen immediately on parsing captions,\n      // but we need to ensure that video data is sent back first\n      // so that caption timing can be adjusted to match video timing\n\n      for (i = 0; i < event.captions.length; i++) {\n        caption = event.captions[i];\n        this.trigger('caption', caption);\n      } // Emit each id3 tag to the outside world\n      // Ideally, this would happen immediately on parsing the tag,\n      // but we need to ensure that video data is sent back first\n      // so that ID3 frame timing can be adjusted to match video timing\n\n\n      for (i = 0; i < event.metadata.length; i++) {\n        id3 = event.metadata[i];\n        this.trigger('id3Frame', id3);\n      }\n    } // Only emit `done` if all tracks have been flushed and emitted\n\n\n    if (this.emittedTracks >= this.numberOfTracks) {\n      this.trigger('done');\n      this.emittedTracks = 0;\n    }\n  };\n\n  _CoalesceStream.prototype.setRemux = function (val) {\n    this.remuxTracks = val;\n  };\n  /**\n   * A Stream that expects MP2T binary data as input and produces\n   * corresponding media segments, suitable for use with Media Source\n   * Extension (MSE) implementations that support the ISO BMFF byte\n   * stream format, like Chrome.\n   */\n\n\n  _Transmuxer = function Transmuxer(options) {\n    var self = this,\n        hasFlushed = true,\n        videoTrack,\n        audioTrack;\n\n    _Transmuxer.prototype.init.call(this);\n\n    options = options || {};\n    this.baseMediaDecodeTime = options.baseMediaDecodeTime || 0;\n    this.transmuxPipeline_ = {};\n\n    this.setupAacPipeline = function () {\n      var pipeline = {};\n      this.transmuxPipeline_ = pipeline;\n      pipeline.type = 'aac';\n      pipeline.metadataStream = new m2ts_1.MetadataStream(); // set up the parsing pipeline\n\n      pipeline.aacStream = new aac();\n      pipeline.audioTimestampRolloverStream = new m2ts_1.TimestampRolloverStream('audio');\n      pipeline.timedMetadataTimestampRolloverStream = new m2ts_1.TimestampRolloverStream('timed-metadata');\n      pipeline.adtsStream = new adts();\n      pipeline.coalesceStream = new _CoalesceStream(options, pipeline.metadataStream);\n      pipeline.headOfPipeline = pipeline.aacStream;\n      pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);\n      pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);\n      pipeline.metadataStream.on('timestamp', function (frame) {\n        pipeline.aacStream.setTimestamp(frame.timeStamp);\n      });\n      pipeline.aacStream.on('data', function (data) {\n        if (data.type !== 'timed-metadata' && data.type !== 'audio' || pipeline.audioSegmentStream) {\n          return;\n        }\n\n        audioTrack = audioTrack || {\n          timelineStartInfo: {\n            baseMediaDecodeTime: self.baseMediaDecodeTime\n          },\n          codec: 'adts',\n          type: 'audio'\n        }; // hook up the audio segment stream to the first track with aac data\n\n        pipeline.coalesceStream.numberOfTracks++;\n        pipeline.audioSegmentStream = new _AudioSegmentStream(audioTrack, options);\n        pipeline.audioSegmentStream.on('log', self.getLogTrigger_('audioSegmentStream'));\n        pipeline.audioSegmentStream.on('timingInfo', self.trigger.bind(self, 'audioTimingInfo')); // Set up the final part of the audio pipeline\n\n        pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream); // emit pmt info\n\n        self.trigger('trackinfo', {\n          hasAudio: !!audioTrack,\n          hasVideo: !!videoTrack\n        });\n      }); // Re-emit any data coming from the coalesce stream to the outside world\n\n      pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data')); // Let the consumer know we have finished flushing the entire pipeline\n\n      pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n      addPipelineLogRetriggers(this, pipeline);\n    };\n\n    this.setupTsPipeline = function () {\n      var pipeline = {};\n      this.transmuxPipeline_ = pipeline;\n      pipeline.type = 'ts';\n      pipeline.metadataStream = new m2ts_1.MetadataStream(); // set up the parsing pipeline\n\n      pipeline.packetStream = new m2ts_1.TransportPacketStream();\n      pipeline.parseStream = new m2ts_1.TransportParseStream();\n      pipeline.elementaryStream = new m2ts_1.ElementaryStream();\n      pipeline.timestampRolloverStream = new m2ts_1.TimestampRolloverStream();\n      pipeline.adtsStream = new adts();\n      pipeline.h264Stream = new H264Stream();\n      pipeline.captionStream = new m2ts_1.CaptionStream(options);\n      pipeline.coalesceStream = new _CoalesceStream(options, pipeline.metadataStream);\n      pipeline.headOfPipeline = pipeline.packetStream; // disassemble MPEG2-TS packets into elementary streams\n\n      pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream).pipe(pipeline.timestampRolloverStream); // !!THIS ORDER IS IMPORTANT!!\n      // demux the streams\n\n      pipeline.timestampRolloverStream.pipe(pipeline.h264Stream);\n      pipeline.timestampRolloverStream.pipe(pipeline.adtsStream);\n      pipeline.timestampRolloverStream.pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream); // Hook up CEA-608/708 caption stream\n\n      pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);\n      pipeline.elementaryStream.on('data', function (data) {\n        var i;\n\n        if (data.type === 'metadata') {\n          i = data.tracks.length; // scan the tracks listed in the metadata\n\n          while (i--) {\n            if (!videoTrack && data.tracks[i].type === 'video') {\n              videoTrack = data.tracks[i];\n              videoTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n            } else if (!audioTrack && data.tracks[i].type === 'audio') {\n              audioTrack = data.tracks[i];\n              audioTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n            }\n          } // hook up the video segment stream to the first track with h264 data\n\n\n          if (videoTrack && !pipeline.videoSegmentStream) {\n            pipeline.coalesceStream.numberOfTracks++;\n            pipeline.videoSegmentStream = new _VideoSegmentStream(videoTrack, options);\n            pipeline.videoSegmentStream.on('log', self.getLogTrigger_('videoSegmentStream'));\n            pipeline.videoSegmentStream.on('timelineStartInfo', function (timelineStartInfo) {\n              // When video emits timelineStartInfo data after a flush, we forward that\n              // info to the AudioSegmentStream, if it exists, because video timeline\n              // data takes precedence.  Do not do this if keepOriginalTimestamps is set,\n              // because this is a particularly subtle form of timestamp alteration.\n              if (audioTrack && !options.keepOriginalTimestamps) {\n                audioTrack.timelineStartInfo = timelineStartInfo; // On the first segment we trim AAC frames that exist before the\n                // very earliest DTS we have seen in video because Chrome will\n                // interpret any video track with a baseMediaDecodeTime that is\n                // non-zero as a gap.\n\n                pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts - self.baseMediaDecodeTime);\n              }\n            });\n            pipeline.videoSegmentStream.on('processedGopsInfo', self.trigger.bind(self, 'gopInfo'));\n            pipeline.videoSegmentStream.on('segmentTimingInfo', self.trigger.bind(self, 'videoSegmentTimingInfo'));\n            pipeline.videoSegmentStream.on('baseMediaDecodeTime', function (baseMediaDecodeTime) {\n              if (audioTrack) {\n                pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);\n              }\n            });\n            pipeline.videoSegmentStream.on('timingInfo', self.trigger.bind(self, 'videoTimingInfo')); // Set up the final part of the video pipeline\n\n            pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream);\n          }\n\n          if (audioTrack && !pipeline.audioSegmentStream) {\n            // hook up the audio segment stream to the first track with aac data\n            pipeline.coalesceStream.numberOfTracks++;\n            pipeline.audioSegmentStream = new _AudioSegmentStream(audioTrack, options);\n            pipeline.audioSegmentStream.on('log', self.getLogTrigger_('audioSegmentStream'));\n            pipeline.audioSegmentStream.on('timingInfo', self.trigger.bind(self, 'audioTimingInfo'));\n            pipeline.audioSegmentStream.on('segmentTimingInfo', self.trigger.bind(self, 'audioSegmentTimingInfo')); // Set up the final part of the audio pipeline\n\n            pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);\n          } // emit pmt info\n\n\n          self.trigger('trackinfo', {\n            hasAudio: !!audioTrack,\n            hasVideo: !!videoTrack\n          });\n        }\n      }); // Re-emit any data coming from the coalesce stream to the outside world\n\n      pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n      pipeline.coalesceStream.on('id3Frame', function (id3Frame) {\n        id3Frame.dispatchType = pipeline.metadataStream.dispatchType;\n        self.trigger('id3Frame', id3Frame);\n      });\n      pipeline.coalesceStream.on('caption', this.trigger.bind(this, 'caption')); // Let the consumer know we have finished flushing the entire pipeline\n\n      pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n      addPipelineLogRetriggers(this, pipeline);\n    }; // hook up the segment streams once track metadata is delivered\n\n\n    this.setBaseMediaDecodeTime = function (baseMediaDecodeTime) {\n      var pipeline = this.transmuxPipeline_;\n\n      if (!options.keepOriginalTimestamps) {\n        this.baseMediaDecodeTime = baseMediaDecodeTime;\n      }\n\n      if (audioTrack) {\n        audioTrack.timelineStartInfo.dts = undefined;\n        audioTrack.timelineStartInfo.pts = undefined;\n        trackDecodeInfo.clearDtsInfo(audioTrack);\n\n        if (pipeline.audioTimestampRolloverStream) {\n          pipeline.audioTimestampRolloverStream.discontinuity();\n        }\n      }\n\n      if (videoTrack) {\n        if (pipeline.videoSegmentStream) {\n          pipeline.videoSegmentStream.gopCache_ = [];\n        }\n\n        videoTrack.timelineStartInfo.dts = undefined;\n        videoTrack.timelineStartInfo.pts = undefined;\n        trackDecodeInfo.clearDtsInfo(videoTrack);\n        pipeline.captionStream.reset();\n      }\n\n      if (pipeline.timestampRolloverStream) {\n        pipeline.timestampRolloverStream.discontinuity();\n      }\n    };\n\n    this.setAudioAppendStart = function (timestamp) {\n      if (audioTrack) {\n        this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);\n      }\n    };\n\n    this.setRemux = function (val) {\n      var pipeline = this.transmuxPipeline_;\n      options.remux = val;\n\n      if (pipeline && pipeline.coalesceStream) {\n        pipeline.coalesceStream.setRemux(val);\n      }\n    };\n\n    this.alignGopsWith = function (gopsToAlignWith) {\n      if (videoTrack && this.transmuxPipeline_.videoSegmentStream) {\n        this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith);\n      }\n    };\n\n    this.getLogTrigger_ = function (key) {\n      var self = this;\n      return function (event) {\n        event.stream = key;\n        self.trigger('log', event);\n      };\n    }; // feed incoming data to the front of the parsing pipeline\n\n\n    this.push = function (data) {\n      if (hasFlushed) {\n        var isAac = isLikelyAacData(data);\n\n        if (isAac && this.transmuxPipeline_.type !== 'aac') {\n          this.setupAacPipeline();\n        } else if (!isAac && this.transmuxPipeline_.type !== 'ts') {\n          this.setupTsPipeline();\n        }\n\n        hasFlushed = false;\n      }\n\n      this.transmuxPipeline_.headOfPipeline.push(data);\n    }; // flush any buffered data\n\n\n    this.flush = function () {\n      hasFlushed = true; // Start at the top of the pipeline and flush all pending work\n\n      this.transmuxPipeline_.headOfPipeline.flush();\n    };\n\n    this.endTimeline = function () {\n      this.transmuxPipeline_.headOfPipeline.endTimeline();\n    };\n\n    this.reset = function () {\n      if (this.transmuxPipeline_.headOfPipeline) {\n        this.transmuxPipeline_.headOfPipeline.reset();\n      }\n    }; // Caption data has to be reset when seeking outside buffered range\n\n\n    this.resetCaptions = function () {\n      if (this.transmuxPipeline_.captionStream) {\n        this.transmuxPipeline_.captionStream.reset();\n      }\n    };\n  };\n\n  _Transmuxer.prototype = new stream();\n  var transmuxer = {\n    Transmuxer: _Transmuxer,\n    VideoSegmentStream: _VideoSegmentStream,\n    AudioSegmentStream: _AudioSegmentStream,\n    AUDIO_PROPERTIES: audioProperties,\n    VIDEO_PROPERTIES: videoProperties,\n    // exported for testing\n    generateSegmentTimingInfo: generateSegmentTimingInfo\n  };\n  /**\n   * mux.js\n   *\n   * Copyright (c) Brightcove\n   * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n   */\n\n  var toUnsigned$3 = function toUnsigned(value) {\n    return value >>> 0;\n  };\n\n  var toHexString$1 = function toHexString(value) {\n    return ('00' + value.toString(16)).slice(-2);\n  };\n\n  var bin = {\n    toUnsigned: toUnsigned$3,\n    toHexString: toHexString$1\n  };\n\n  var parseType$1 = function parseType(buffer) {\n    var result = '';\n    result += String.fromCharCode(buffer[0]);\n    result += String.fromCharCode(buffer[1]);\n    result += String.fromCharCode(buffer[2]);\n    result += String.fromCharCode(buffer[3]);\n    return result;\n  };\n\n  var parseType_1 = parseType$1;\n  var toUnsigned$2 = bin.toUnsigned;\n\n  var findBox = function findBox(data, path) {\n    var results = [],\n        i,\n        size,\n        type,\n        end,\n        subresults;\n\n    if (!path.length) {\n      // short-circuit the search for empty paths\n      return null;\n    }\n\n    for (i = 0; i < data.byteLength;) {\n      size = toUnsigned$2(data[i] << 24 | data[i + 1] << 16 | data[i + 2] << 8 | data[i + 3]);\n      type = parseType_1(data.subarray(i + 4, i + 8));\n      end = size > 1 ? i + size : data.byteLength;\n\n      if (type === path[0]) {\n        if (path.length === 1) {\n          // this is the end of the path and we've found the box we were\n          // looking for\n          results.push(data.subarray(i + 8, end));\n        } else {\n          // recursively search for the next box along the path\n          subresults = findBox(data.subarray(i + 8, end), path.slice(1));\n\n          if (subresults.length) {\n            results = results.concat(subresults);\n          }\n        }\n      }\n\n      i = end;\n    } // we've finished searching all of data\n\n\n    return results;\n  };\n\n  var findBox_1 = findBox;\n  var toUnsigned$1 = bin.toUnsigned;\n  var getUint64$1 = numbers.getUint64;\n\n  var tfdt = function tfdt(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4))\n    };\n\n    if (result.version === 1) {\n      result.baseMediaDecodeTime = getUint64$1(data.subarray(4));\n    } else {\n      result.baseMediaDecodeTime = toUnsigned$1(data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7]);\n    }\n\n    return result;\n  };\n\n  var parseTfdt = tfdt;\n\n  var parseSampleFlags = function parseSampleFlags(flags) {\n    return {\n      isLeading: (flags[0] & 0x0c) >>> 2,\n      dependsOn: flags[0] & 0x03,\n      isDependedOn: (flags[1] & 0xc0) >>> 6,\n      hasRedundancy: (flags[1] & 0x30) >>> 4,\n      paddingValue: (flags[1] & 0x0e) >>> 1,\n      isNonSyncSample: flags[1] & 0x01,\n      degradationPriority: flags[2] << 8 | flags[3]\n    };\n  };\n\n  var parseSampleFlags_1 = parseSampleFlags;\n\n  var trun = function trun(data) {\n    var result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      samples: []\n    },\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        // Flag interpretation\n    dataOffsetPresent = result.flags[2] & 0x01,\n        // compare with 2nd byte of 0x1\n    firstSampleFlagsPresent = result.flags[2] & 0x04,\n        // compare with 2nd byte of 0x4\n    sampleDurationPresent = result.flags[1] & 0x01,\n        // compare with 2nd byte of 0x100\n    sampleSizePresent = result.flags[1] & 0x02,\n        // compare with 2nd byte of 0x200\n    sampleFlagsPresent = result.flags[1] & 0x04,\n        // compare with 2nd byte of 0x400\n    sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\n        // compare with 2nd byte of 0x800\n    sampleCount = view.getUint32(4),\n        offset = 8,\n        sample;\n\n    if (dataOffsetPresent) {\n      // 32 bit signed integer\n      result.dataOffset = view.getInt32(offset);\n      offset += 4;\n    } // Overrides the flags for the first sample only. The order of\n    // optional values will be: duration, size, compositionTimeOffset\n\n\n    if (firstSampleFlagsPresent && sampleCount) {\n      sample = {\n        flags: parseSampleFlags_1(data.subarray(offset, offset + 4))\n      };\n      offset += 4;\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        if (result.version === 1) {\n          sample.compositionTimeOffset = view.getInt32(offset);\n        } else {\n          sample.compositionTimeOffset = view.getUint32(offset);\n        }\n\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n      sampleCount--;\n    }\n\n    while (sampleCount--) {\n      sample = {};\n\n      if (sampleDurationPresent) {\n        sample.duration = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleSizePresent) {\n        sample.size = view.getUint32(offset);\n        offset += 4;\n      }\n\n      if (sampleFlagsPresent) {\n        sample.flags = parseSampleFlags_1(data.subarray(offset, offset + 4));\n        offset += 4;\n      }\n\n      if (sampleCompositionTimeOffsetPresent) {\n        if (result.version === 1) {\n          sample.compositionTimeOffset = view.getInt32(offset);\n        } else {\n          sample.compositionTimeOffset = view.getUint32(offset);\n        }\n\n        offset += 4;\n      }\n\n      result.samples.push(sample);\n    }\n\n    return result;\n  };\n\n  var parseTrun = trun;\n\n  var tfhd = function tfhd(data) {\n    var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n        result = {\n      version: data[0],\n      flags: new Uint8Array(data.subarray(1, 4)),\n      trackId: view.getUint32(4)\n    },\n        baseDataOffsetPresent = result.flags[2] & 0x01,\n        sampleDescriptionIndexPresent = result.flags[2] & 0x02,\n        defaultSampleDurationPresent = result.flags[2] & 0x08,\n        defaultSampleSizePresent = result.flags[2] & 0x10,\n        defaultSampleFlagsPresent = result.flags[2] & 0x20,\n        durationIsEmpty = result.flags[0] & 0x010000,\n        defaultBaseIsMoof = result.flags[0] & 0x020000,\n        i;\n    i = 8;\n\n    if (baseDataOffsetPresent) {\n      i += 4; // truncate top 4 bytes\n      // FIXME: should we read the full 64 bits?\n\n      result.baseDataOffset = view.getUint32(12);\n      i += 4;\n    }\n\n    if (sampleDescriptionIndexPresent) {\n      result.sampleDescriptionIndex = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleDurationPresent) {\n      result.defaultSampleDuration = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleSizePresent) {\n      result.defaultSampleSize = view.getUint32(i);\n      i += 4;\n    }\n\n    if (defaultSampleFlagsPresent) {\n      result.defaultSampleFlags = view.getUint32(i);\n    }\n\n    if (durationIsEmpty) {\n      result.durationIsEmpty = true;\n    }\n\n    if (!baseDataOffsetPresent && defaultBaseIsMoof) {\n      result.baseDataOffsetIsMoof = true;\n    }\n\n    return result;\n  };\n\n  var parseTfhd = tfhd;\n  var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n  var win;\n\n  if (typeof window !== \"undefined\") {\n    win = window;\n  } else if (typeof commonjsGlobal !== \"undefined\") {\n    win = commonjsGlobal;\n  } else if (typeof self !== \"undefined\") {\n    win = self;\n  } else {\n    win = {};\n  }\n\n  var window_1 = win;\n  var discardEmulationPreventionBytes = captionPacketParser.discardEmulationPreventionBytes;\n  var CaptionStream = captionStream.CaptionStream;\n  /**\n    * Maps an offset in the mdat to a sample based on the the size of the samples.\n    * Assumes that `parseSamples` has been called first.\n    *\n    * @param {Number} offset - The offset into the mdat\n    * @param {Object[]} samples - An array of samples, parsed using `parseSamples`\n    * @return {?Object} The matching sample, or null if no match was found.\n    *\n    * @see ISO-BMFF-12/2015, Section 8.8.8\n   **/\n\n  var mapToSample = function mapToSample(offset, samples) {\n    var approximateOffset = offset;\n\n    for (var i = 0; i < samples.length; i++) {\n      var sample = samples[i];\n\n      if (approximateOffset < sample.size) {\n        return sample;\n      }\n\n      approximateOffset -= sample.size;\n    }\n\n    return null;\n  };\n  /**\n    * Finds SEI nal units contained in a Media Data Box.\n    * Assumes that `parseSamples` has been called first.\n    *\n    * @param {Uint8Array} avcStream - The bytes of the mdat\n    * @param {Object[]} samples - The samples parsed out by `parseSamples`\n    * @param {Number} trackId - The trackId of this video track\n    * @return {Object[]} seiNals - the parsed SEI NALUs found.\n    *   The contents of the seiNal should match what is expected by\n    *   CaptionStream.push (nalUnitType, size, data, escapedRBSP, pts, dts)\n    *\n    * @see ISO-BMFF-12/2015, Section 8.1.1\n    * @see Rec. ITU-T H.264, 7.3.2.3.1\n   **/\n\n\n  var findSeiNals = function findSeiNals(avcStream, samples, trackId) {\n    var avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\n        result = {\n      logs: [],\n      seiNals: []\n    },\n        seiNal,\n        i,\n        length,\n        lastMatchedSample;\n\n    for (i = 0; i + 4 < avcStream.length; i += length) {\n      length = avcView.getUint32(i);\n      i += 4; // Bail if this doesn't appear to be an H264 stream\n\n      if (length <= 0) {\n        continue;\n      }\n\n      switch (avcStream[i] & 0x1F) {\n        case 0x06:\n          var data = avcStream.subarray(i + 1, i + 1 + length);\n          var matchingSample = mapToSample(i, samples);\n          seiNal = {\n            nalUnitType: 'sei_rbsp',\n            size: length,\n            data: data,\n            escapedRBSP: discardEmulationPreventionBytes(data),\n            trackId: trackId\n          };\n\n          if (matchingSample) {\n            seiNal.pts = matchingSample.pts;\n            seiNal.dts = matchingSample.dts;\n            lastMatchedSample = matchingSample;\n          } else if (lastMatchedSample) {\n            // If a matching sample cannot be found, use the last\n            // sample's values as they should be as close as possible\n            seiNal.pts = lastMatchedSample.pts;\n            seiNal.dts = lastMatchedSample.dts;\n          } else {\n            result.logs.push({\n              level: 'warn',\n              message: 'We\\'ve encountered a nal unit without data at ' + i + ' for trackId ' + trackId + '. See mux.js#223.'\n            });\n            break;\n          }\n\n          result.seiNals.push(seiNal);\n          break;\n      }\n    }\n\n    return result;\n  };\n  /**\n    * Parses sample information out of Track Run Boxes and calculates\n    * the absolute presentation and decode timestamps of each sample.\n    *\n    * @param {Array<Uint8Array>} truns - The Trun Run boxes to be parsed\n    * @param {Number|BigInt} baseMediaDecodeTime - base media decode time from tfdt\n        @see ISO-BMFF-12/2015, Section 8.8.12\n    * @param {Object} tfhd - The parsed Track Fragment Header\n    *   @see inspect.parseTfhd\n    * @return {Object[]} the parsed samples\n    *\n    * @see ISO-BMFF-12/2015, Section 8.8.8\n   **/\n\n\n  var parseSamples = function parseSamples(truns, baseMediaDecodeTime, tfhd) {\n    var currentDts = baseMediaDecodeTime;\n    var defaultSampleDuration = tfhd.defaultSampleDuration || 0;\n    var defaultSampleSize = tfhd.defaultSampleSize || 0;\n    var trackId = tfhd.trackId;\n    var allSamples = [];\n    truns.forEach(function (trun) {\n      // Note: We currently do not parse the sample table as well\n      // as the trun. It's possible some sources will require this.\n      // moov > trak > mdia > minf > stbl\n      var trackRun = parseTrun(trun);\n      var samples = trackRun.samples;\n      samples.forEach(function (sample) {\n        if (sample.duration === undefined) {\n          sample.duration = defaultSampleDuration;\n        }\n\n        if (sample.size === undefined) {\n          sample.size = defaultSampleSize;\n        }\n\n        sample.trackId = trackId;\n        sample.dts = currentDts;\n\n        if (sample.compositionTimeOffset === undefined) {\n          sample.compositionTimeOffset = 0;\n        }\n\n        if (typeof currentDts === 'bigint') {\n          sample.pts = currentDts + window_1.BigInt(sample.compositionTimeOffset);\n          currentDts += window_1.BigInt(sample.duration);\n        } else {\n          sample.pts = currentDts + sample.compositionTimeOffset;\n          currentDts += sample.duration;\n        }\n      });\n      allSamples = allSamples.concat(samples);\n    });\n    return allSamples;\n  };\n  /**\n    * Parses out caption nals from an FMP4 segment's video tracks.\n    *\n    * @param {Uint8Array} segment - The bytes of a single segment\n    * @param {Number} videoTrackId - The trackId of a video track in the segment\n    * @return {Object.<Number, Object[]>} A mapping of video trackId to\n    *   a list of seiNals found in that track\n   **/\n\n\n  var parseCaptionNals = function parseCaptionNals(segment, videoTrackId) {\n    // To get the samples\n    var trafs = findBox_1(segment, ['moof', 'traf']); // To get SEI NAL units\n\n    var mdats = findBox_1(segment, ['mdat']);\n    var captionNals = {};\n    var mdatTrafPairs = []; // Pair up each traf with a mdat as moofs and mdats are in pairs\n\n    mdats.forEach(function (mdat, index) {\n      var matchingTraf = trafs[index];\n      mdatTrafPairs.push({\n        mdat: mdat,\n        traf: matchingTraf\n      });\n    });\n    mdatTrafPairs.forEach(function (pair) {\n      var mdat = pair.mdat;\n      var traf = pair.traf;\n      var tfhd = findBox_1(traf, ['tfhd']); // Exactly 1 tfhd per traf\n\n      var headerInfo = parseTfhd(tfhd[0]);\n      var trackId = headerInfo.trackId;\n      var tfdt = findBox_1(traf, ['tfdt']); // Either 0 or 1 tfdt per traf\n\n      var baseMediaDecodeTime = tfdt.length > 0 ? parseTfdt(tfdt[0]).baseMediaDecodeTime : 0;\n      var truns = findBox_1(traf, ['trun']);\n      var samples;\n      var result; // Only parse video data for the chosen video track\n\n      if (videoTrackId === trackId && truns.length > 0) {\n        samples = parseSamples(truns, baseMediaDecodeTime, headerInfo);\n        result = findSeiNals(mdat, samples, trackId);\n\n        if (!captionNals[trackId]) {\n          captionNals[trackId] = {\n            seiNals: [],\n            logs: []\n          };\n        }\n\n        captionNals[trackId].seiNals = captionNals[trackId].seiNals.concat(result.seiNals);\n        captionNals[trackId].logs = captionNals[trackId].logs.concat(result.logs);\n      }\n    });\n    return captionNals;\n  };\n  /**\n    * Parses out inband captions from an MP4 container and returns\n    * caption objects that can be used by WebVTT and the TextTrack API.\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/VTTCue\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/TextTrack\n    * Assumes that `probe.getVideoTrackIds` and `probe.timescale` have been called first\n    *\n    * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n    * @param {Number} trackId - The id of the video track to parse\n    * @param {Number} timescale - The timescale for the video track from the init segment\n    *\n    * @return {?Object[]} parsedCaptions - A list of captions or null if no video tracks\n    * @return {Number} parsedCaptions[].startTime - The time to show the caption in seconds\n    * @return {Number} parsedCaptions[].endTime - The time to stop showing the caption in seconds\n    * @return {String} parsedCaptions[].text - The visible content of the caption\n   **/\n\n\n  var parseEmbeddedCaptions = function parseEmbeddedCaptions(segment, trackId, timescale) {\n    var captionNals; // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n\n    if (trackId === null) {\n      return null;\n    }\n\n    captionNals = parseCaptionNals(segment, trackId);\n    var trackNals = captionNals[trackId] || {};\n    return {\n      seiNals: trackNals.seiNals,\n      logs: trackNals.logs,\n      timescale: timescale\n    };\n  };\n  /**\n    * Converts SEI NALUs into captions that can be used by video.js\n   **/\n\n\n  var CaptionParser = function CaptionParser() {\n    var isInitialized = false;\n    var captionStream; // Stores segments seen before trackId and timescale are set\n\n    var segmentCache; // Stores video track ID of the track being parsed\n\n    var trackId; // Stores the timescale of the track being parsed\n\n    var timescale; // Stores captions parsed so far\n\n    var parsedCaptions; // Stores whether we are receiving partial data or not\n\n    var parsingPartial;\n    /**\n      * A method to indicate whether a CaptionParser has been initalized\n      * @returns {Boolean}\n     **/\n\n    this.isInitialized = function () {\n      return isInitialized;\n    };\n    /**\n      * Initializes the underlying CaptionStream, SEI NAL parsing\n      * and management, and caption collection\n     **/\n\n\n    this.init = function (options) {\n      captionStream = new CaptionStream();\n      isInitialized = true;\n      parsingPartial = options ? options.isPartial : false; // Collect dispatched captions\n\n      captionStream.on('data', function (event) {\n        // Convert to seconds in the source's timescale\n        event.startTime = event.startPts / timescale;\n        event.endTime = event.endPts / timescale;\n        parsedCaptions.captions.push(event);\n        parsedCaptions.captionStreams[event.stream] = true;\n      });\n      captionStream.on('log', function (log) {\n        parsedCaptions.logs.push(log);\n      });\n    };\n    /**\n      * Determines if a new video track will be selected\n      * or if the timescale changed\n      * @return {Boolean}\n     **/\n\n\n    this.isNewInit = function (videoTrackIds, timescales) {\n      if (videoTrackIds && videoTrackIds.length === 0 || timescales && _typeof(timescales) === 'object' && Object.keys(timescales).length === 0) {\n        return false;\n      }\n\n      return trackId !== videoTrackIds[0] || timescale !== timescales[trackId];\n    };\n    /**\n      * Parses out SEI captions and interacts with underlying\n      * CaptionStream to return dispatched captions\n      *\n      * @param {Uint8Array} segment - The fmp4 segment containing embedded captions\n      * @param {Number[]} videoTrackIds - A list of video tracks found in the init segment\n      * @param {Object.<Number, Number>} timescales - The timescales found in the init segment\n      * @see parseEmbeddedCaptions\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.parse = function (segment, videoTrackIds, timescales) {\n      var parsedData;\n\n      if (!this.isInitialized()) {\n        return null; // This is not likely to be a video segment\n      } else if (!videoTrackIds || !timescales) {\n        return null;\n      } else if (this.isNewInit(videoTrackIds, timescales)) {\n        // Use the first video track only as there is no\n        // mechanism to switch to other video tracks\n        trackId = videoTrackIds[0];\n        timescale = timescales[trackId]; // If an init segment has not been seen yet, hold onto segment\n        // data until we have one.\n        // the ISO-BMFF spec says that trackId can't be zero, but there's some broken content out there\n      } else if (trackId === null || !timescale) {\n        segmentCache.push(segment);\n        return null;\n      } // Now that a timescale and trackId is set, parse cached segments\n\n\n      while (segmentCache.length > 0) {\n        var cachedSegment = segmentCache.shift();\n        this.parse(cachedSegment, videoTrackIds, timescales);\n      }\n\n      parsedData = parseEmbeddedCaptions(segment, trackId, timescale);\n\n      if (parsedData && parsedData.logs) {\n        parsedCaptions.logs = parsedCaptions.logs.concat(parsedData.logs);\n      }\n\n      if (parsedData === null || !parsedData.seiNals) {\n        if (parsedCaptions.logs.length) {\n          return {\n            logs: parsedCaptions.logs,\n            captions: [],\n            captionStreams: []\n          };\n        }\n\n        return null;\n      }\n\n      this.pushNals(parsedData.seiNals); // Force the parsed captions to be dispatched\n\n      this.flushStream();\n      return parsedCaptions;\n    };\n    /**\n      * Pushes SEI NALUs onto CaptionStream\n      * @param {Object[]} nals - A list of SEI nals parsed using `parseCaptionNals`\n      * Assumes that `parseCaptionNals` has been called first\n      * @see m2ts/caption-stream.js\n      **/\n\n\n    this.pushNals = function (nals) {\n      if (!this.isInitialized() || !nals || nals.length === 0) {\n        return null;\n      }\n\n      nals.forEach(function (nal) {\n        captionStream.push(nal);\n      });\n    };\n    /**\n      * Flushes underlying CaptionStream to dispatch processed, displayable captions\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.flushStream = function () {\n      if (!this.isInitialized()) {\n        return null;\n      }\n\n      if (!parsingPartial) {\n        captionStream.flush();\n      } else {\n        captionStream.partialFlush();\n      }\n    };\n    /**\n      * Reset caption buckets for new data\n     **/\n\n\n    this.clearParsedCaptions = function () {\n      parsedCaptions.captions = [];\n      parsedCaptions.captionStreams = {};\n      parsedCaptions.logs = [];\n    };\n    /**\n      * Resets underlying CaptionStream\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.resetCaptionStream = function () {\n      if (!this.isInitialized()) {\n        return null;\n      }\n\n      captionStream.reset();\n    };\n    /**\n      * Convenience method to clear all captions flushed from the\n      * CaptionStream and still being parsed\n      * @see m2ts/caption-stream.js\n     **/\n\n\n    this.clearAllCaptions = function () {\n      this.clearParsedCaptions();\n      this.resetCaptionStream();\n    };\n    /**\n      * Reset caption parser\n     **/\n\n\n    this.reset = function () {\n      segmentCache = [];\n      trackId = null;\n      timescale = null;\n\n      if (!parsedCaptions) {\n        parsedCaptions = {\n          captions: [],\n          // CC1, CC2, CC3, CC4\n          captionStreams: {},\n          logs: []\n        };\n      } else {\n        this.clearParsedCaptions();\n      }\n\n      this.resetCaptionStream();\n    };\n\n    this.reset();\n  };\n\n  var captionParser = CaptionParser;\n  var toUnsigned = bin.toUnsigned;\n  var toHexString = bin.toHexString;\n  var getUint64 = numbers.getUint64;\n  var timescale, startTime, compositionStartTime, getVideoTrackIds, getTracks, getTimescaleFromMediaHeader;\n  /**\n   * Parses an MP4 initialization segment and extracts the timescale\n   * values for any declared tracks. Timescale values indicate the\n   * number of clock ticks per second to assume for time-based values\n   * elsewhere in the MP4.\n   *\n   * To determine the start time of an MP4, you need two pieces of\n   * information: the timescale unit and the earliest base media decode\n   * time. Multiple timescales can be specified within an MP4 but the\n   * base media decode time is always expressed in the timescale from\n   * the media header box for the track:\n   * ```\n   * moov > trak > mdia > mdhd.timescale\n   * ```\n   * @param init {Uint8Array} the bytes of the init segment\n   * @return {object} a hash of track ids to timescale values or null if\n   * the init segment is malformed.\n   */\n\n  timescale = function timescale(init) {\n    var result = {},\n        traks = findBox_1(init, ['moov', 'trak']); // mdhd timescale\n\n    return traks.reduce(function (result, trak) {\n      var tkhd, version, index, id, mdhd;\n      tkhd = findBox_1(trak, ['tkhd'])[0];\n\n      if (!tkhd) {\n        return null;\n      }\n\n      version = tkhd[0];\n      index = version === 0 ? 12 : 20;\n      id = toUnsigned(tkhd[index] << 24 | tkhd[index + 1] << 16 | tkhd[index + 2] << 8 | tkhd[index + 3]);\n      mdhd = findBox_1(trak, ['mdia', 'mdhd'])[0];\n\n      if (!mdhd) {\n        return null;\n      }\n\n      version = mdhd[0];\n      index = version === 0 ? 12 : 20;\n      result[id] = toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n      return result;\n    }, result);\n  };\n  /**\n   * Determine the base media decode start time, in seconds, for an MP4\n   * fragment. If multiple fragments are specified, the earliest time is\n   * returned.\n   *\n   * The base media decode time can be parsed from track fragment\n   * metadata:\n   * ```\n   * moof > traf > tfdt.baseMediaDecodeTime\n   * ```\n   * It requires the timescale value from the mdhd to interpret.\n   *\n   * @param timescale {object} a hash of track ids to timescale values.\n   * @return {number} the earliest base media decode start time for the\n   * fragment, in seconds\n   */\n\n\n  startTime = function startTime(timescale, fragment) {\n    var trafs; // we need info from two childrend of each track fragment box\n\n    trafs = findBox_1(fragment, ['moof', 'traf']); // determine the start times for each track\n\n    var lowestTime = trafs.reduce(function (acc, traf) {\n      var tfhd = findBox_1(traf, ['tfhd'])[0]; // get the track id from the tfhd\n\n      var id = toUnsigned(tfhd[4] << 24 | tfhd[5] << 16 | tfhd[6] << 8 | tfhd[7]); // assume a 90kHz clock if no timescale was specified\n\n      var scale = timescale[id] || 90e3; // get the base media decode time from the tfdt\n\n      var tfdt = findBox_1(traf, ['tfdt'])[0];\n      var dv = new DataView(tfdt.buffer, tfdt.byteOffset, tfdt.byteLength);\n      var baseTime; // version 1 is 64 bit\n\n      if (tfdt[0] === 1) {\n        baseTime = getUint64(tfdt.subarray(4, 12));\n      } else {\n        baseTime = dv.getUint32(4);\n      } // convert base time to seconds if it is a valid number.\n\n\n      var seconds;\n\n      if (typeof baseTime === 'bigint') {\n        seconds = baseTime / window_1.BigInt(scale);\n      } else if (typeof baseTime === 'number' && !isNaN(baseTime)) {\n        seconds = baseTime / scale;\n      }\n\n      if (seconds < Number.MAX_SAFE_INTEGER) {\n        seconds = Number(seconds);\n      }\n\n      if (seconds < acc) {\n        acc = seconds;\n      }\n\n      return acc;\n    }, Infinity);\n    return typeof lowestTime === 'bigint' || isFinite(lowestTime) ? lowestTime : 0;\n  };\n  /**\n   * Determine the composition start, in seconds, for an MP4\n   * fragment.\n   *\n   * The composition start time of a fragment can be calculated using the base\n   * media decode time, composition time offset, and timescale, as follows:\n   *\n   * compositionStartTime = (baseMediaDecodeTime + compositionTimeOffset) / timescale\n   *\n   * All of the aforementioned information is contained within a media fragment's\n   * `traf` box, except for timescale info, which comes from the initialization\n   * segment, so a track id (also contained within a `traf`) is also necessary to\n   * associate it with a timescale\n   *\n   *\n   * @param timescales {object} - a hash of track ids to timescale values.\n   * @param fragment {Unit8Array} - the bytes of a media segment\n   * @return {number} the composition start time for the fragment, in seconds\n   **/\n\n\n  compositionStartTime = function compositionStartTime(timescales, fragment) {\n    var trafBoxes = findBox_1(fragment, ['moof', 'traf']);\n    var baseMediaDecodeTime = 0;\n    var compositionTimeOffset = 0;\n    var trackId;\n\n    if (trafBoxes && trafBoxes.length) {\n      // The spec states that track run samples contained within a `traf` box are contiguous, but\n      // it does not explicitly state whether the `traf` boxes themselves are contiguous.\n      // We will assume that they are, so we only need the first to calculate start time.\n      var tfhd = findBox_1(trafBoxes[0], ['tfhd'])[0];\n      var trun = findBox_1(trafBoxes[0], ['trun'])[0];\n      var tfdt = findBox_1(trafBoxes[0], ['tfdt'])[0];\n\n      if (tfhd) {\n        var parsedTfhd = parseTfhd(tfhd);\n        trackId = parsedTfhd.trackId;\n      }\n\n      if (tfdt) {\n        var parsedTfdt = parseTfdt(tfdt);\n        baseMediaDecodeTime = parsedTfdt.baseMediaDecodeTime;\n      }\n\n      if (trun) {\n        var parsedTrun = parseTrun(trun);\n\n        if (parsedTrun.samples && parsedTrun.samples.length) {\n          compositionTimeOffset = parsedTrun.samples[0].compositionTimeOffset || 0;\n        }\n      }\n    } // Get timescale for this specific track. Assume a 90kHz clock if no timescale was\n    // specified.\n\n\n    var timescale = timescales[trackId] || 90e3; // return the composition start time, in seconds\n\n    if (typeof baseMediaDecodeTime === 'bigint') {\n      compositionTimeOffset = window_1.BigInt(compositionTimeOffset);\n      timescale = window_1.BigInt(timescale);\n    }\n\n    var result = (baseMediaDecodeTime + compositionTimeOffset) / timescale;\n\n    if (typeof result === 'bigint' && result < Number.MAX_SAFE_INTEGER) {\n      result = Number(result);\n    }\n\n    return result;\n  };\n  /**\n    * Find the trackIds of the video tracks in this source.\n    * Found by parsing the Handler Reference and Track Header Boxes:\n    *   moov > trak > mdia > hdlr\n    *   moov > trak > tkhd\n    *\n    * @param {Uint8Array} init - The bytes of the init segment for this source\n    * @return {Number[]} A list of trackIds\n    *\n    * @see ISO-BMFF-12/2015, Section 8.4.3\n   **/\n\n\n  getVideoTrackIds = function getVideoTrackIds(init) {\n    var traks = findBox_1(init, ['moov', 'trak']);\n    var videoTrackIds = [];\n    traks.forEach(function (trak) {\n      var hdlrs = findBox_1(trak, ['mdia', 'hdlr']);\n      var tkhds = findBox_1(trak, ['tkhd']);\n      hdlrs.forEach(function (hdlr, index) {\n        var handlerType = parseType_1(hdlr.subarray(8, 12));\n        var tkhd = tkhds[index];\n        var view;\n        var version;\n        var trackId;\n\n        if (handlerType === 'vide') {\n          view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n          version = view.getUint8(0);\n          trackId = version === 0 ? view.getUint32(12) : view.getUint32(20);\n          videoTrackIds.push(trackId);\n        }\n      });\n    });\n    return videoTrackIds;\n  };\n\n  getTimescaleFromMediaHeader = function getTimescaleFromMediaHeader(mdhd) {\n    // mdhd is a FullBox, meaning it will have its own version as the first byte\n    var version = mdhd[0];\n    var index = version === 0 ? 12 : 20;\n    return toUnsigned(mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]);\n  };\n  /**\n   * Get all the video, audio, and hint tracks from a non fragmented\n   * mp4 segment\n   */\n\n\n  getTracks = function getTracks(init) {\n    var traks = findBox_1(init, ['moov', 'trak']);\n    var tracks = [];\n    traks.forEach(function (trak) {\n      var track = {};\n      var tkhd = findBox_1(trak, ['tkhd'])[0];\n      var view, tkhdVersion; // id\n\n      if (tkhd) {\n        view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n        tkhdVersion = view.getUint8(0);\n        track.id = tkhdVersion === 0 ? view.getUint32(12) : view.getUint32(20);\n      }\n\n      var hdlr = findBox_1(trak, ['mdia', 'hdlr'])[0]; // type\n\n      if (hdlr) {\n        var type = parseType_1(hdlr.subarray(8, 12));\n\n        if (type === 'vide') {\n          track.type = 'video';\n        } else if (type === 'soun') {\n          track.type = 'audio';\n        } else {\n          track.type = type;\n        }\n      } // codec\n\n\n      var stsd = findBox_1(trak, ['mdia', 'minf', 'stbl', 'stsd'])[0];\n\n      if (stsd) {\n        var sampleDescriptions = stsd.subarray(8); // gives the codec type string\n\n        track.codec = parseType_1(sampleDescriptions.subarray(4, 8));\n        var codecBox = findBox_1(sampleDescriptions, [track.codec])[0];\n        var codecConfig, codecConfigType;\n\n        if (codecBox) {\n          // https://tools.ietf.org/html/rfc6381#section-3.3\n          if (/^[asm]vc[1-9]$/i.test(track.codec)) {\n            // we don't need anything but the \"config\" parameter of the\n            // avc1 codecBox\n            codecConfig = codecBox.subarray(78);\n            codecConfigType = parseType_1(codecConfig.subarray(4, 8));\n\n            if (codecConfigType === 'avcC' && codecConfig.length > 11) {\n              track.codec += '.'; // left padded with zeroes for single digit hex\n              // profile idc\n\n              track.codec += toHexString(codecConfig[9]); // the byte containing the constraint_set flags\n\n              track.codec += toHexString(codecConfig[10]); // level idc\n\n              track.codec += toHexString(codecConfig[11]);\n            } else {\n              // TODO: show a warning that we couldn't parse the codec\n              // and are using the default\n              track.codec = 'avc1.4d400d';\n            }\n          } else if (/^mp4[a,v]$/i.test(track.codec)) {\n            // we do not need anything but the streamDescriptor of the mp4a codecBox\n            codecConfig = codecBox.subarray(28);\n            codecConfigType = parseType_1(codecConfig.subarray(4, 8));\n\n            if (codecConfigType === 'esds' && codecConfig.length > 20 && codecConfig[19] !== 0) {\n              track.codec += '.' + toHexString(codecConfig[19]); // this value is only a single digit\n\n              track.codec += '.' + toHexString(codecConfig[20] >>> 2 & 0x3f).replace(/^0/, '');\n            } else {\n              // TODO: show a warning that we couldn't parse the codec\n              // and are using the default\n              track.codec = 'mp4a.40.2';\n            }\n          } else {\n            // flac, opus, etc\n            track.codec = track.codec.toLowerCase();\n          }\n        }\n      }\n\n      var mdhd = findBox_1(trak, ['mdia', 'mdhd'])[0];\n\n      if (mdhd) {\n        track.timescale = getTimescaleFromMediaHeader(mdhd);\n      }\n\n      tracks.push(track);\n    });\n    return tracks;\n  };\n\n  var probe$2 = {\n    // export mp4 inspector's findBox and parseType for backwards compatibility\n    findBox: findBox_1,\n    parseType: parseType_1,\n    timescale: timescale,\n    startTime: startTime,\n    compositionStartTime: compositionStartTime,\n    videoTrackIds: getVideoTrackIds,\n    tracks: getTracks,\n    getTimescaleFromMediaHeader: getTimescaleFromMediaHeader\n  };\n\n  var parsePid = function parsePid(packet) {\n    var pid = packet[1] & 0x1f;\n    pid <<= 8;\n    pid |= packet[2];\n    return pid;\n  };\n\n  var parsePayloadUnitStartIndicator = function parsePayloadUnitStartIndicator(packet) {\n    return !!(packet[1] & 0x40);\n  };\n\n  var parseAdaptionField = function parseAdaptionField(packet) {\n    var offset = 0; // if an adaption field is present, its length is specified by the\n    // fifth byte of the TS packet header. The adaptation field is\n    // used to add stuffing to PES packets that don't fill a complete\n    // TS packet, and to specify some forms of timing and control data\n    // that we do not currently use.\n\n    if ((packet[3] & 0x30) >>> 4 > 0x01) {\n      offset += packet[4] + 1;\n    }\n\n    return offset;\n  };\n\n  var parseType = function parseType(packet, pmtPid) {\n    var pid = parsePid(packet);\n\n    if (pid === 0) {\n      return 'pat';\n    } else if (pid === pmtPid) {\n      return 'pmt';\n    } else if (pmtPid) {\n      return 'pes';\n    }\n\n    return null;\n  };\n\n  var parsePat = function parsePat(packet) {\n    var pusi = parsePayloadUnitStartIndicator(packet);\n    var offset = 4 + parseAdaptionField(packet);\n\n    if (pusi) {\n      offset += packet[offset] + 1;\n    }\n\n    return (packet[offset + 10] & 0x1f) << 8 | packet[offset + 11];\n  };\n\n  var parsePmt = function parsePmt(packet) {\n    var programMapTable = {};\n    var pusi = parsePayloadUnitStartIndicator(packet);\n    var payloadOffset = 4 + parseAdaptionField(packet);\n\n    if (pusi) {\n      payloadOffset += packet[payloadOffset] + 1;\n    } // PMTs can be sent ahead of the time when they should actually\n    // take effect. We don't believe this should ever be the case\n    // for HLS but we'll ignore \"forward\" PMT declarations if we see\n    // them. Future PMT declarations have the current_next_indicator\n    // set to zero.\n\n\n    if (!(packet[payloadOffset + 5] & 0x01)) {\n      return;\n    }\n\n    var sectionLength, tableEnd, programInfoLength; // the mapping table ends at the end of the current section\n\n    sectionLength = (packet[payloadOffset + 1] & 0x0f) << 8 | packet[payloadOffset + 2];\n    tableEnd = 3 + sectionLength - 4; // to determine where the table is, we have to figure out how\n    // long the program info descriptors are\n\n    programInfoLength = (packet[payloadOffset + 10] & 0x0f) << 8 | packet[payloadOffset + 11]; // advance the offset to the first entry in the mapping table\n\n    var offset = 12 + programInfoLength;\n\n    while (offset < tableEnd) {\n      var i = payloadOffset + offset; // add an entry that maps the elementary_pid to the stream_type\n\n      programMapTable[(packet[i + 1] & 0x1F) << 8 | packet[i + 2]] = packet[i]; // move to the next table entry\n      // skip past the elementary stream descriptors, if present\n\n      offset += ((packet[i + 3] & 0x0F) << 8 | packet[i + 4]) + 5;\n    }\n\n    return programMapTable;\n  };\n\n  var parsePesType = function parsePesType(packet, programMapTable) {\n    var pid = parsePid(packet);\n    var type = programMapTable[pid];\n\n    switch (type) {\n      case streamTypes.H264_STREAM_TYPE:\n        return 'video';\n\n      case streamTypes.ADTS_STREAM_TYPE:\n        return 'audio';\n\n      case streamTypes.METADATA_STREAM_TYPE:\n        return 'timed-metadata';\n\n      default:\n        return null;\n    }\n  };\n\n  var parsePesTime = function parsePesTime(packet) {\n    var pusi = parsePayloadUnitStartIndicator(packet);\n\n    if (!pusi) {\n      return null;\n    }\n\n    var offset = 4 + parseAdaptionField(packet);\n\n    if (offset >= packet.byteLength) {\n      // From the H 222.0 MPEG-TS spec\n      // \"For transport stream packets carrying PES packets, stuffing is needed when there\n      //  is insufficient PES packet data to completely fill the transport stream packet\n      //  payload bytes. Stuffing is accomplished by defining an adaptation field longer than\n      //  the sum of the lengths of the data elements in it, so that the payload bytes\n      //  remaining after the adaptation field exactly accommodates the available PES packet\n      //  data.\"\n      //\n      // If the offset is >= the length of the packet, then the packet contains no data\n      // and instead is just adaption field stuffing bytes\n      return null;\n    }\n\n    var pes = null;\n    var ptsDtsFlags; // PES packets may be annotated with a PTS value, or a PTS value\n    // and a DTS value. Determine what combination of values is\n    // available to work with.\n\n    ptsDtsFlags = packet[offset + 7]; // PTS and DTS are normally stored as a 33-bit number.  Javascript\n    // performs all bitwise operations on 32-bit integers but javascript\n    // supports a much greater range (52-bits) of integer using standard\n    // mathematical operations.\n    // We construct a 31-bit value using bitwise operators over the 31\n    // most significant bits and then multiply by 4 (equal to a left-shift\n    // of 2) before we add the final 2 least significant bits of the\n    // timestamp (equal to an OR.)\n\n    if (ptsDtsFlags & 0xC0) {\n      pes = {}; // the PTS and DTS are not written out directly. For information\n      // on how they are encoded, see\n      // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n\n      pes.pts = (packet[offset + 9] & 0x0E) << 27 | (packet[offset + 10] & 0xFF) << 20 | (packet[offset + 11] & 0xFE) << 12 | (packet[offset + 12] & 0xFF) << 5 | (packet[offset + 13] & 0xFE) >>> 3;\n      pes.pts *= 4; // Left shift by 2\n\n      pes.pts += (packet[offset + 13] & 0x06) >>> 1; // OR by the two LSBs\n\n      pes.dts = pes.pts;\n\n      if (ptsDtsFlags & 0x40) {\n        pes.dts = (packet[offset + 14] & 0x0E) << 27 | (packet[offset + 15] & 0xFF) << 20 | (packet[offset + 16] & 0xFE) << 12 | (packet[offset + 17] & 0xFF) << 5 | (packet[offset + 18] & 0xFE) >>> 3;\n        pes.dts *= 4; // Left shift by 2\n\n        pes.dts += (packet[offset + 18] & 0x06) >>> 1; // OR by the two LSBs\n      }\n    }\n\n    return pes;\n  };\n\n  var parseNalUnitType = function parseNalUnitType(type) {\n    switch (type) {\n      case 0x05:\n        return 'slice_layer_without_partitioning_rbsp_idr';\n\n      case 0x06:\n        return 'sei_rbsp';\n\n      case 0x07:\n        return 'seq_parameter_set_rbsp';\n\n      case 0x08:\n        return 'pic_parameter_set_rbsp';\n\n      case 0x09:\n        return 'access_unit_delimiter_rbsp';\n\n      default:\n        return null;\n    }\n  };\n\n  var videoPacketContainsKeyFrame = function videoPacketContainsKeyFrame(packet) {\n    var offset = 4 + parseAdaptionField(packet);\n    var frameBuffer = packet.subarray(offset);\n    var frameI = 0;\n    var frameSyncPoint = 0;\n    var foundKeyFrame = false;\n    var nalType; // advance the sync point to a NAL start, if necessary\n\n    for (; frameSyncPoint < frameBuffer.byteLength - 3; frameSyncPoint++) {\n      if (frameBuffer[frameSyncPoint + 2] === 1) {\n        // the sync point is properly aligned\n        frameI = frameSyncPoint + 5;\n        break;\n      }\n    }\n\n    while (frameI < frameBuffer.byteLength) {\n      // look at the current byte to determine if we've hit the end of\n      // a NAL unit boundary\n      switch (frameBuffer[frameI]) {\n        case 0:\n          // skip past non-sync sequences\n          if (frameBuffer[frameI - 1] !== 0) {\n            frameI += 2;\n            break;\n          } else if (frameBuffer[frameI - 2] !== 0) {\n            frameI++;\n            break;\n          }\n\n          if (frameSyncPoint + 3 !== frameI - 2) {\n            nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n            if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n              foundKeyFrame = true;\n            }\n          } // drop trailing zeroes\n\n\n          do {\n            frameI++;\n          } while (frameBuffer[frameI] !== 1 && frameI < frameBuffer.length);\n\n          frameSyncPoint = frameI - 2;\n          frameI += 3;\n          break;\n\n        case 1:\n          // skip past non-sync sequences\n          if (frameBuffer[frameI - 1] !== 0 || frameBuffer[frameI - 2] !== 0) {\n            frameI += 3;\n            break;\n          }\n\n          nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n          if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n            foundKeyFrame = true;\n          }\n\n          frameSyncPoint = frameI - 2;\n          frameI += 3;\n          break;\n\n        default:\n          // the current byte isn't a one or zero, so it cannot be part\n          // of a sync sequence\n          frameI += 3;\n          break;\n      }\n    }\n\n    frameBuffer = frameBuffer.subarray(frameSyncPoint);\n    frameI -= frameSyncPoint;\n    frameSyncPoint = 0; // parse the final nal\n\n    if (frameBuffer && frameBuffer.byteLength > 3) {\n      nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n\n      if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n        foundKeyFrame = true;\n      }\n    }\n\n    return foundKeyFrame;\n  };\n\n  var probe$1 = {\n    parseType: parseType,\n    parsePat: parsePat,\n    parsePmt: parsePmt,\n    parsePayloadUnitStartIndicator: parsePayloadUnitStartIndicator,\n    parsePesType: parsePesType,\n    parsePesTime: parsePesTime,\n    videoPacketContainsKeyFrame: videoPacketContainsKeyFrame\n  };\n  var handleRollover = timestampRolloverStream.handleRollover;\n  var probe = {};\n  probe.ts = probe$1;\n  probe.aac = utils;\n  var ONE_SECOND_IN_TS = clock.ONE_SECOND_IN_TS;\n  var MP2T_PACKET_LENGTH = 188,\n      // bytes\n  SYNC_BYTE = 0x47;\n  /**\n   * walks through segment data looking for pat and pmt packets to parse out\n   * program map table information\n   */\n\n  var parsePsi_ = function parsePsi_(bytes, pmt) {\n    var startIndex = 0,\n        endIndex = MP2T_PACKET_LENGTH,\n        packet,\n        type;\n\n    while (endIndex < bytes.byteLength) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n        // We found a packet\n        packet = bytes.subarray(startIndex, endIndex);\n        type = probe.ts.parseType(packet, pmt.pid);\n\n        switch (type) {\n          case 'pat':\n            pmt.pid = probe.ts.parsePat(packet);\n            break;\n\n          case 'pmt':\n            var table = probe.ts.parsePmt(packet);\n            pmt.table = pmt.table || {};\n            Object.keys(table).forEach(function (key) {\n              pmt.table[key] = table[key];\n            });\n            break;\n        }\n\n        startIndex += MP2T_PACKET_LENGTH;\n        endIndex += MP2T_PACKET_LENGTH;\n        continue;\n      } // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n\n\n      startIndex++;\n      endIndex++;\n    }\n  };\n  /**\n   * walks through the segment data from the start and end to get timing information\n   * for the first and last audio pes packets\n   */\n\n\n  var parseAudioPes_ = function parseAudioPes_(bytes, pmt, result) {\n    var startIndex = 0,\n        endIndex = MP2T_PACKET_LENGTH,\n        packet,\n        type,\n        pesType,\n        pusi,\n        parsed;\n    var endLoop = false; // Start walking from start of segment to get first audio packet\n\n    while (endIndex <= bytes.byteLength) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n        // We found a packet\n        packet = bytes.subarray(startIndex, endIndex);\n        type = probe.ts.parseType(packet, pmt.pid);\n\n        switch (type) {\n          case 'pes':\n            pesType = probe.ts.parsePesType(packet, pmt.table);\n            pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n            if (pesType === 'audio' && pusi) {\n              parsed = probe.ts.parsePesTime(packet);\n\n              if (parsed) {\n                parsed.type = 'audio';\n                result.audio.push(parsed);\n                endLoop = true;\n              }\n            }\n\n            break;\n        }\n\n        if (endLoop) {\n          break;\n        }\n\n        startIndex += MP2T_PACKET_LENGTH;\n        endIndex += MP2T_PACKET_LENGTH;\n        continue;\n      } // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n\n\n      startIndex++;\n      endIndex++;\n    } // Start walking from end of segment to get last audio packet\n\n\n    endIndex = bytes.byteLength;\n    startIndex = endIndex - MP2T_PACKET_LENGTH;\n    endLoop = false;\n\n    while (startIndex >= 0) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (bytes[startIndex] === SYNC_BYTE && (bytes[endIndex] === SYNC_BYTE || endIndex === bytes.byteLength)) {\n        // We found a packet\n        packet = bytes.subarray(startIndex, endIndex);\n        type = probe.ts.parseType(packet, pmt.pid);\n\n        switch (type) {\n          case 'pes':\n            pesType = probe.ts.parsePesType(packet, pmt.table);\n            pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n            if (pesType === 'audio' && pusi) {\n              parsed = probe.ts.parsePesTime(packet);\n\n              if (parsed) {\n                parsed.type = 'audio';\n                result.audio.push(parsed);\n                endLoop = true;\n              }\n            }\n\n            break;\n        }\n\n        if (endLoop) {\n          break;\n        }\n\n        startIndex -= MP2T_PACKET_LENGTH;\n        endIndex -= MP2T_PACKET_LENGTH;\n        continue;\n      } // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n\n\n      startIndex--;\n      endIndex--;\n    }\n  };\n  /**\n   * walks through the segment data from the start and end to get timing information\n   * for the first and last video pes packets as well as timing information for the first\n   * key frame.\n   */\n\n\n  var parseVideoPes_ = function parseVideoPes_(bytes, pmt, result) {\n    var startIndex = 0,\n        endIndex = MP2T_PACKET_LENGTH,\n        packet,\n        type,\n        pesType,\n        pusi,\n        parsed,\n        frame,\n        i,\n        pes;\n    var endLoop = false;\n    var currentFrame = {\n      data: [],\n      size: 0\n    }; // Start walking from start of segment to get first video packet\n\n    while (endIndex < bytes.byteLength) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n        // We found a packet\n        packet = bytes.subarray(startIndex, endIndex);\n        type = probe.ts.parseType(packet, pmt.pid);\n\n        switch (type) {\n          case 'pes':\n            pesType = probe.ts.parsePesType(packet, pmt.table);\n            pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n            if (pesType === 'video') {\n              if (pusi && !endLoop) {\n                parsed = probe.ts.parsePesTime(packet);\n\n                if (parsed) {\n                  parsed.type = 'video';\n                  result.video.push(parsed);\n                  endLoop = true;\n                }\n              }\n\n              if (!result.firstKeyFrame) {\n                if (pusi) {\n                  if (currentFrame.size !== 0) {\n                    frame = new Uint8Array(currentFrame.size);\n                    i = 0;\n\n                    while (currentFrame.data.length) {\n                      pes = currentFrame.data.shift();\n                      frame.set(pes, i);\n                      i += pes.byteLength;\n                    }\n\n                    if (probe.ts.videoPacketContainsKeyFrame(frame)) {\n                      var firstKeyFrame = probe.ts.parsePesTime(frame); // PTS/DTS may not be available. Simply *not* setting\n                      // the keyframe seems to work fine with HLS playback\n                      // and definitely preferable to a crash with TypeError...\n\n                      if (firstKeyFrame) {\n                        result.firstKeyFrame = firstKeyFrame;\n                        result.firstKeyFrame.type = 'video';\n                      } else {\n                        // eslint-disable-next-line\n                        console.warn('Failed to extract PTS/DTS from PES at first keyframe. ' + 'This could be an unusual TS segment, or else mux.js did not ' + 'parse your TS segment correctly. If you know your TS ' + 'segments do contain PTS/DTS on keyframes please file a bug ' + 'report! You can try ffprobe to double check for yourself.');\n                      }\n                    }\n\n                    currentFrame.size = 0;\n                  }\n                }\n\n                currentFrame.data.push(packet);\n                currentFrame.size += packet.byteLength;\n              }\n            }\n\n            break;\n        }\n\n        if (endLoop && result.firstKeyFrame) {\n          break;\n        }\n\n        startIndex += MP2T_PACKET_LENGTH;\n        endIndex += MP2T_PACKET_LENGTH;\n        continue;\n      } // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n\n\n      startIndex++;\n      endIndex++;\n    } // Start walking from end of segment to get last video packet\n\n\n    endIndex = bytes.byteLength;\n    startIndex = endIndex - MP2T_PACKET_LENGTH;\n    endLoop = false;\n\n    while (startIndex >= 0) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n        // We found a packet\n        packet = bytes.subarray(startIndex, endIndex);\n        type = probe.ts.parseType(packet, pmt.pid);\n\n        switch (type) {\n          case 'pes':\n            pesType = probe.ts.parsePesType(packet, pmt.table);\n            pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n\n            if (pesType === 'video' && pusi) {\n              parsed = probe.ts.parsePesTime(packet);\n\n              if (parsed) {\n                parsed.type = 'video';\n                result.video.push(parsed);\n                endLoop = true;\n              }\n            }\n\n            break;\n        }\n\n        if (endLoop) {\n          break;\n        }\n\n        startIndex -= MP2T_PACKET_LENGTH;\n        endIndex -= MP2T_PACKET_LENGTH;\n        continue;\n      } // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n\n\n      startIndex--;\n      endIndex--;\n    }\n  };\n  /**\n   * Adjusts the timestamp information for the segment to account for\n   * rollover and convert to seconds based on pes packet timescale (90khz clock)\n   */\n\n\n  var adjustTimestamp_ = function adjustTimestamp_(segmentInfo, baseTimestamp) {\n    if (segmentInfo.audio && segmentInfo.audio.length) {\n      var audioBaseTimestamp = baseTimestamp;\n\n      if (typeof audioBaseTimestamp === 'undefined' || isNaN(audioBaseTimestamp)) {\n        audioBaseTimestamp = segmentInfo.audio[0].dts;\n      }\n\n      segmentInfo.audio.forEach(function (info) {\n        info.dts = handleRollover(info.dts, audioBaseTimestamp);\n        info.pts = handleRollover(info.pts, audioBaseTimestamp); // time in seconds\n\n        info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n        info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n      });\n    }\n\n    if (segmentInfo.video && segmentInfo.video.length) {\n      var videoBaseTimestamp = baseTimestamp;\n\n      if (typeof videoBaseTimestamp === 'undefined' || isNaN(videoBaseTimestamp)) {\n        videoBaseTimestamp = segmentInfo.video[0].dts;\n      }\n\n      segmentInfo.video.forEach(function (info) {\n        info.dts = handleRollover(info.dts, videoBaseTimestamp);\n        info.pts = handleRollover(info.pts, videoBaseTimestamp); // time in seconds\n\n        info.dtsTime = info.dts / ONE_SECOND_IN_TS;\n        info.ptsTime = info.pts / ONE_SECOND_IN_TS;\n      });\n\n      if (segmentInfo.firstKeyFrame) {\n        var frame = segmentInfo.firstKeyFrame;\n        frame.dts = handleRollover(frame.dts, videoBaseTimestamp);\n        frame.pts = handleRollover(frame.pts, videoBaseTimestamp); // time in seconds\n\n        frame.dtsTime = frame.dts / ONE_SECOND_IN_TS;\n        frame.ptsTime = frame.pts / ONE_SECOND_IN_TS;\n      }\n    }\n  };\n  /**\n   * inspects the aac data stream for start and end time information\n   */\n\n\n  var inspectAac_ = function inspectAac_(bytes) {\n    var endLoop = false,\n        audioCount = 0,\n        sampleRate = null,\n        timestamp = null,\n        frameSize = 0,\n        byteIndex = 0,\n        packet;\n\n    while (bytes.length - byteIndex >= 3) {\n      var type = probe.aac.parseType(bytes, byteIndex);\n\n      switch (type) {\n        case 'timed-metadata':\n          // Exit early because we don't have enough to parse\n          // the ID3 tag header\n          if (bytes.length - byteIndex < 10) {\n            endLoop = true;\n            break;\n          }\n\n          frameSize = probe.aac.parseId3TagSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n\n          if (frameSize > bytes.length) {\n            endLoop = true;\n            break;\n          }\n\n          if (timestamp === null) {\n            packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n            timestamp = probe.aac.parseAacTimestamp(packet);\n          }\n\n          byteIndex += frameSize;\n          break;\n\n        case 'audio':\n          // Exit early because we don't have enough to parse\n          // the ADTS frame header\n          if (bytes.length - byteIndex < 7) {\n            endLoop = true;\n            break;\n          }\n\n          frameSize = probe.aac.parseAdtsSize(bytes, byteIndex); // Exit early if we don't have enough in the buffer\n          // to emit a full packet\n\n          if (frameSize > bytes.length) {\n            endLoop = true;\n            break;\n          }\n\n          if (sampleRate === null) {\n            packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n            sampleRate = probe.aac.parseSampleRate(packet);\n          }\n\n          audioCount++;\n          byteIndex += frameSize;\n          break;\n\n        default:\n          byteIndex++;\n          break;\n      }\n\n      if (endLoop) {\n        return null;\n      }\n    }\n\n    if (sampleRate === null || timestamp === null) {\n      return null;\n    }\n\n    var audioTimescale = ONE_SECOND_IN_TS / sampleRate;\n    var result = {\n      audio: [{\n        type: 'audio',\n        dts: timestamp,\n        pts: timestamp\n      }, {\n        type: 'audio',\n        dts: timestamp + audioCount * 1024 * audioTimescale,\n        pts: timestamp + audioCount * 1024 * audioTimescale\n      }]\n    };\n    return result;\n  };\n  /**\n   * inspects the transport stream segment data for start and end time information\n   * of the audio and video tracks (when present) as well as the first key frame's\n   * start time.\n   */\n\n\n  var inspectTs_ = function inspectTs_(bytes) {\n    var pmt = {\n      pid: null,\n      table: null\n    };\n    var result = {};\n    parsePsi_(bytes, pmt);\n\n    for (var pid in pmt.table) {\n      if (pmt.table.hasOwnProperty(pid)) {\n        var type = pmt.table[pid];\n\n        switch (type) {\n          case streamTypes.H264_STREAM_TYPE:\n            result.video = [];\n            parseVideoPes_(bytes, pmt, result);\n\n            if (result.video.length === 0) {\n              delete result.video;\n            }\n\n            break;\n\n          case streamTypes.ADTS_STREAM_TYPE:\n            result.audio = [];\n            parseAudioPes_(bytes, pmt, result);\n\n            if (result.audio.length === 0) {\n              delete result.audio;\n            }\n\n            break;\n        }\n      }\n    }\n\n    return result;\n  };\n  /**\n   * Inspects segment byte data and returns an object with start and end timing information\n   *\n   * @param {Uint8Array} bytes The segment byte data\n   * @param {Number} baseTimestamp Relative reference timestamp used when adjusting frame\n   *  timestamps for rollover. This value must be in 90khz clock.\n   * @return {Object} Object containing start and end frame timing info of segment.\n   */\n\n\n  var inspect = function inspect(bytes, baseTimestamp) {\n    var isAacData = probe.aac.isLikelyAacData(bytes);\n    var result;\n\n    if (isAacData) {\n      result = inspectAac_(bytes);\n    } else {\n      result = inspectTs_(bytes);\n    }\n\n    if (!result || !result.audio && !result.video) {\n      return null;\n    }\n\n    adjustTimestamp_(result, baseTimestamp);\n    return result;\n  };\n\n  var tsInspector = {\n    inspect: inspect,\n    parseAudioPes_: parseAudioPes_\n  };\n  /* global self */\n\n  /**\n   * Re-emits transmuxer events by converting them into messages to the\n   * world outside the worker.\n   *\n   * @param {Object} transmuxer the transmuxer to wire events on\n   * @private\n   */\n\n  var wireTransmuxerEvents = function wireTransmuxerEvents(self, transmuxer) {\n    transmuxer.on('data', function (segment) {\n      // transfer ownership of the underlying ArrayBuffer\n      // instead of doing a copy to save memory\n      // ArrayBuffers are transferable but generic TypedArrays are not\n      // @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Passing_data_by_transferring_ownership_(transferable_objects)\n      var initArray = segment.initSegment;\n      segment.initSegment = {\n        data: initArray.buffer,\n        byteOffset: initArray.byteOffset,\n        byteLength: initArray.byteLength\n      };\n      var typedArray = segment.data;\n      segment.data = typedArray.buffer;\n      self.postMessage({\n        action: 'data',\n        segment: segment,\n        byteOffset: typedArray.byteOffset,\n        byteLength: typedArray.byteLength\n      }, [segment.data]);\n    });\n    transmuxer.on('done', function (data) {\n      self.postMessage({\n        action: 'done'\n      });\n    });\n    transmuxer.on('gopInfo', function (gopInfo) {\n      self.postMessage({\n        action: 'gopInfo',\n        gopInfo: gopInfo\n      });\n    });\n    transmuxer.on('videoSegmentTimingInfo', function (timingInfo) {\n      var videoSegmentTimingInfo = {\n        start: {\n          decode: clock.videoTsToSeconds(timingInfo.start.dts),\n          presentation: clock.videoTsToSeconds(timingInfo.start.pts)\n        },\n        end: {\n          decode: clock.videoTsToSeconds(timingInfo.end.dts),\n          presentation: clock.videoTsToSeconds(timingInfo.end.pts)\n        },\n        baseMediaDecodeTime: clock.videoTsToSeconds(timingInfo.baseMediaDecodeTime)\n      };\n\n      if (timingInfo.prependedContentDuration) {\n        videoSegmentTimingInfo.prependedContentDuration = clock.videoTsToSeconds(timingInfo.prependedContentDuration);\n      }\n\n      self.postMessage({\n        action: 'videoSegmentTimingInfo',\n        videoSegmentTimingInfo: videoSegmentTimingInfo\n      });\n    });\n    transmuxer.on('audioSegmentTimingInfo', function (timingInfo) {\n      // Note that all times for [audio/video]SegmentTimingInfo events are in video clock\n      var audioSegmentTimingInfo = {\n        start: {\n          decode: clock.videoTsToSeconds(timingInfo.start.dts),\n          presentation: clock.videoTsToSeconds(timingInfo.start.pts)\n        },\n        end: {\n          decode: clock.videoTsToSeconds(timingInfo.end.dts),\n          presentation: clock.videoTsToSeconds(timingInfo.end.pts)\n        },\n        baseMediaDecodeTime: clock.videoTsToSeconds(timingInfo.baseMediaDecodeTime)\n      };\n\n      if (timingInfo.prependedContentDuration) {\n        audioSegmentTimingInfo.prependedContentDuration = clock.videoTsToSeconds(timingInfo.prependedContentDuration);\n      }\n\n      self.postMessage({\n        action: 'audioSegmentTimingInfo',\n        audioSegmentTimingInfo: audioSegmentTimingInfo\n      });\n    });\n    transmuxer.on('id3Frame', function (id3Frame) {\n      self.postMessage({\n        action: 'id3Frame',\n        id3Frame: id3Frame\n      });\n    });\n    transmuxer.on('caption', function (caption) {\n      self.postMessage({\n        action: 'caption',\n        caption: caption\n      });\n    });\n    transmuxer.on('trackinfo', function (trackInfo) {\n      self.postMessage({\n        action: 'trackinfo',\n        trackInfo: trackInfo\n      });\n    });\n    transmuxer.on('audioTimingInfo', function (audioTimingInfo) {\n      // convert to video TS since we prioritize video time over audio\n      self.postMessage({\n        action: 'audioTimingInfo',\n        audioTimingInfo: {\n          start: clock.videoTsToSeconds(audioTimingInfo.start),\n          end: clock.videoTsToSeconds(audioTimingInfo.end)\n        }\n      });\n    });\n    transmuxer.on('videoTimingInfo', function (videoTimingInfo) {\n      self.postMessage({\n        action: 'videoTimingInfo',\n        videoTimingInfo: {\n          start: clock.videoTsToSeconds(videoTimingInfo.start),\n          end: clock.videoTsToSeconds(videoTimingInfo.end)\n        }\n      });\n    });\n    transmuxer.on('log', function (log) {\n      self.postMessage({\n        action: 'log',\n        log: log\n      });\n    });\n  };\n  /**\n   * All incoming messages route through this hash. If no function exists\n   * to handle an incoming message, then we ignore the message.\n   *\n   * @class MessageHandlers\n   * @param {Object} options the options to initialize with\n   */\n\n\n  var MessageHandlers = /*#__PURE__*/function () {\n    function MessageHandlers(self, options) {\n      this.options = options || {};\n      this.self = self;\n      this.init();\n    }\n    /**\n     * initialize our web worker and wire all the events.\n     */\n\n\n    var _proto = MessageHandlers.prototype;\n\n    _proto.init = function init() {\n      if (this.transmuxer) {\n        this.transmuxer.dispose();\n      }\n\n      this.transmuxer = new transmuxer.Transmuxer(this.options);\n      wireTransmuxerEvents(this.self, this.transmuxer);\n    };\n\n    _proto.pushMp4Captions = function pushMp4Captions(data) {\n      if (!this.captionParser) {\n        this.captionParser = new captionParser();\n        this.captionParser.init();\n      }\n\n      var segment = new Uint8Array(data.data, data.byteOffset, data.byteLength);\n      var parsed = this.captionParser.parse(segment, data.trackIds, data.timescales);\n      this.self.postMessage({\n        action: 'mp4Captions',\n        captions: parsed && parsed.captions || [],\n        logs: parsed && parsed.logs || [],\n        data: segment.buffer\n      }, [segment.buffer]);\n    };\n\n    _proto.probeMp4StartTime = function probeMp4StartTime(_ref) {\n      var timescales = _ref.timescales,\n          data = _ref.data;\n      var startTime = probe$2.startTime(timescales, data);\n      this.self.postMessage({\n        action: 'probeMp4StartTime',\n        startTime: startTime,\n        data: data\n      }, [data.buffer]);\n    };\n\n    _proto.probeMp4Tracks = function probeMp4Tracks(_ref2) {\n      var data = _ref2.data;\n      var tracks = probe$2.tracks(data);\n      this.self.postMessage({\n        action: 'probeMp4Tracks',\n        tracks: tracks,\n        data: data\n      }, [data.buffer]);\n    }\n    /**\n     * Probe an mpeg2-ts segment to determine the start time of the segment in it's\n     * internal \"media time,\" as well as whether it contains video and/or audio.\n     *\n     * @private\n     * @param {Uint8Array} bytes - segment bytes\n     * @param {number} baseStartTime\n     *        Relative reference timestamp used when adjusting frame timestamps for rollover.\n     *        This value should be in seconds, as it's converted to a 90khz clock within the\n     *        function body.\n     * @return {Object} The start time of the current segment in \"media time\" as well as\n     *                  whether it contains video and/or audio\n     */\n    ;\n\n    _proto.probeTs = function probeTs(_ref3) {\n      var data = _ref3.data,\n          baseStartTime = _ref3.baseStartTime;\n      var tsStartTime = typeof baseStartTime === 'number' && !isNaN(baseStartTime) ? baseStartTime * clock.ONE_SECOND_IN_TS : void 0;\n      var timeInfo = tsInspector.inspect(data, tsStartTime);\n      var result = null;\n\n      if (timeInfo) {\n        result = {\n          // each type's time info comes back as an array of 2 times, start and end\n          hasVideo: timeInfo.video && timeInfo.video.length === 2 || false,\n          hasAudio: timeInfo.audio && timeInfo.audio.length === 2 || false\n        };\n\n        if (result.hasVideo) {\n          result.videoStart = timeInfo.video[0].ptsTime;\n        }\n\n        if (result.hasAudio) {\n          result.audioStart = timeInfo.audio[0].ptsTime;\n        }\n      }\n\n      this.self.postMessage({\n        action: 'probeTs',\n        result: result,\n        data: data\n      }, [data.buffer]);\n    };\n\n    _proto.clearAllMp4Captions = function clearAllMp4Captions() {\n      if (this.captionParser) {\n        this.captionParser.clearAllCaptions();\n      }\n    };\n\n    _proto.clearParsedMp4Captions = function clearParsedMp4Captions() {\n      if (this.captionParser) {\n        this.captionParser.clearParsedCaptions();\n      }\n    }\n    /**\n     * Adds data (a ts segment) to the start of the transmuxer pipeline for\n     * processing.\n     *\n     * @param {ArrayBuffer} data data to push into the muxer\n     */\n    ;\n\n    _proto.push = function push(data) {\n      // Cast array buffer to correct type for transmuxer\n      var segment = new Uint8Array(data.data, data.byteOffset, data.byteLength);\n      this.transmuxer.push(segment);\n    }\n    /**\n     * Recreate the transmuxer so that the next segment added via `push`\n     * start with a fresh transmuxer.\n     */\n    ;\n\n    _proto.reset = function reset() {\n      this.transmuxer.reset();\n    }\n    /**\n     * Set the value that will be used as the `baseMediaDecodeTime` time for the\n     * next segment pushed in. Subsequent segments will have their `baseMediaDecodeTime`\n     * set relative to the first based on the PTS values.\n     *\n     * @param {Object} data used to set the timestamp offset in the muxer\n     */\n    ;\n\n    _proto.setTimestampOffset = function setTimestampOffset(data) {\n      var timestampOffset = data.timestampOffset || 0;\n      this.transmuxer.setBaseMediaDecodeTime(Math.round(clock.secondsToVideoTs(timestampOffset)));\n    };\n\n    _proto.setAudioAppendStart = function setAudioAppendStart(data) {\n      this.transmuxer.setAudioAppendStart(Math.ceil(clock.secondsToVideoTs(data.appendStart)));\n    };\n\n    _proto.setRemux = function setRemux(data) {\n      this.transmuxer.setRemux(data.remux);\n    }\n    /**\n     * Forces the pipeline to finish processing the last segment and emit it's\n     * results.\n     *\n     * @param {Object} data event data, not really used\n     */\n    ;\n\n    _proto.flush = function flush(data) {\n      this.transmuxer.flush(); // transmuxed done action is fired after both audio/video pipelines are flushed\n\n      self.postMessage({\n        action: 'done',\n        type: 'transmuxed'\n      });\n    };\n\n    _proto.endTimeline = function endTimeline() {\n      this.transmuxer.endTimeline(); // transmuxed endedtimeline action is fired after both audio/video pipelines end their\n      // timelines\n\n      self.postMessage({\n        action: 'endedtimeline',\n        type: 'transmuxed'\n      });\n    };\n\n    _proto.alignGopsWith = function alignGopsWith(data) {\n      this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice());\n    };\n\n    return MessageHandlers;\n  }();\n  /**\n   * Our web worker interface so that things can talk to mux.js\n   * that will be running in a web worker. the scope is passed to this by\n   * webworkify.\n   *\n   * @param {Object} self the scope for the web worker\n   */\n\n\n  self.onmessage = function (event) {\n    if (event.data.action === 'init' && event.data.options) {\n      this.messageHandlers = new MessageHandlers(self, event.data.options);\n      return;\n    }\n\n    if (!this.messageHandlers) {\n      this.messageHandlers = new MessageHandlers(self);\n    }\n\n    if (event.data && event.data.action && event.data.action !== 'init') {\n      if (this.messageHandlers[event.data.action]) {\n        this.messageHandlers[event.data.action](event.data);\n      }\n    }\n  };\n}));\nvar TransmuxWorker = factory(workerCode$1);\n/* rollup-plugin-worker-factory end for worker!/Users/gsinger/repos/clean/http-streaming/src/transmuxer-worker.js */\n\nvar handleData_ = function handleData_(event, transmuxedData, callback) {\n  var _event$data$segment = event.data.segment,\n      type = _event$data$segment.type,\n      initSegment = _event$data$segment.initSegment,\n      captions = _event$data$segment.captions,\n      captionStreams = _event$data$segment.captionStreams,\n      metadata = _event$data$segment.metadata,\n      videoFrameDtsTime = _event$data$segment.videoFrameDtsTime,\n      videoFramePtsTime = _event$data$segment.videoFramePtsTime;\n  transmuxedData.buffer.push({\n    captions: captions,\n    captionStreams: captionStreams,\n    metadata: metadata\n  });\n  var boxes = event.data.segment.boxes || {\n    data: event.data.segment.data\n  };\n  var result = {\n    type: type,\n    // cast ArrayBuffer to TypedArray\n    data: new Uint8Array(boxes.data, boxes.data.byteOffset, boxes.data.byteLength),\n    initSegment: new Uint8Array(initSegment.data, initSegment.byteOffset, initSegment.byteLength)\n  };\n\n  if (typeof videoFrameDtsTime !== 'undefined') {\n    result.videoFrameDtsTime = videoFrameDtsTime;\n  }\n\n  if (typeof videoFramePtsTime !== 'undefined') {\n    result.videoFramePtsTime = videoFramePtsTime;\n  }\n\n  callback(result);\n};\n\nvar handleDone_ = function handleDone_(_ref) {\n  var transmuxedData = _ref.transmuxedData,\n      callback = _ref.callback; // Previously we only returned data on data events,\n  // not on done events. Clear out the buffer to keep that consistent.\n\n  transmuxedData.buffer = []; // all buffers should have been flushed from the muxer, so start processing anything we\n  // have received\n\n  callback(transmuxedData);\n};\n\nvar handleGopInfo_ = function handleGopInfo_(event, transmuxedData) {\n  transmuxedData.gopInfo = event.data.gopInfo;\n};\n\nvar processTransmux = function processTransmux(options) {\n  var transmuxer = options.transmuxer,\n      bytes = options.bytes,\n      audioAppendStart = options.audioAppendStart,\n      gopsToAlignWith = options.gopsToAlignWith,\n      remux = options.remux,\n      onData = options.onData,\n      onTrackInfo = options.onTrackInfo,\n      onAudioTimingInfo = options.onAudioTimingInfo,\n      onVideoTimingInfo = options.onVideoTimingInfo,\n      onVideoSegmentTimingInfo = options.onVideoSegmentTimingInfo,\n      onAudioSegmentTimingInfo = options.onAudioSegmentTimingInfo,\n      onId3 = options.onId3,\n      onCaptions = options.onCaptions,\n      onDone = options.onDone,\n      onEndedTimeline = options.onEndedTimeline,\n      onTransmuxerLog = options.onTransmuxerLog,\n      isEndOfTimeline = options.isEndOfTimeline;\n  var transmuxedData = {\n    buffer: []\n  };\n  var waitForEndedTimelineEvent = isEndOfTimeline;\n\n  var handleMessage = function handleMessage(event) {\n    if (transmuxer.currentTransmux !== options) {\n      // disposed\n      return;\n    }\n\n    if (event.data.action === 'data') {\n      handleData_(event, transmuxedData, onData);\n    }\n\n    if (event.data.action === 'trackinfo') {\n      onTrackInfo(event.data.trackInfo);\n    }\n\n    if (event.data.action === 'gopInfo') {\n      handleGopInfo_(event, transmuxedData);\n    }\n\n    if (event.data.action === 'audioTimingInfo') {\n      onAudioTimingInfo(event.data.audioTimingInfo);\n    }\n\n    if (event.data.action === 'videoTimingInfo') {\n      onVideoTimingInfo(event.data.videoTimingInfo);\n    }\n\n    if (event.data.action === 'videoSegmentTimingInfo') {\n      onVideoSegmentTimingInfo(event.data.videoSegmentTimingInfo);\n    }\n\n    if (event.data.action === 'audioSegmentTimingInfo') {\n      onAudioSegmentTimingInfo(event.data.audioSegmentTimingInfo);\n    }\n\n    if (event.data.action === 'id3Frame') {\n      onId3([event.data.id3Frame], event.data.id3Frame.dispatchType);\n    }\n\n    if (event.data.action === 'caption') {\n      onCaptions(event.data.caption);\n    }\n\n    if (event.data.action === 'endedtimeline') {\n      waitForEndedTimelineEvent = false;\n      onEndedTimeline();\n    }\n\n    if (event.data.action === 'log') {\n      onTransmuxerLog(event.data.log);\n    } // wait for the transmuxed event since we may have audio and video\n\n\n    if (event.data.type !== 'transmuxed') {\n      return;\n    } // If the \"endedtimeline\" event has not yet fired, and this segment represents the end\n    // of a timeline, that means there may still be data events before the segment\n    // processing can be considerred complete. In that case, the final event should be\n    // an \"endedtimeline\" event with the type \"transmuxed.\"\n\n\n    if (waitForEndedTimelineEvent) {\n      return;\n    }\n\n    transmuxer.onmessage = null;\n    handleDone_({\n      transmuxedData: transmuxedData,\n      callback: onDone\n    });\n    /* eslint-disable no-use-before-define */\n\n    dequeue(transmuxer);\n    /* eslint-enable */\n  };\n\n  transmuxer.onmessage = handleMessage;\n\n  if (audioAppendStart) {\n    transmuxer.postMessage({\n      action: 'setAudioAppendStart',\n      appendStart: audioAppendStart\n    });\n  } // allow empty arrays to be passed to clear out GOPs\n\n\n  if (Array.isArray(gopsToAlignWith)) {\n    transmuxer.postMessage({\n      action: 'alignGopsWith',\n      gopsToAlignWith: gopsToAlignWith\n    });\n  }\n\n  if (typeof remux !== 'undefined') {\n    transmuxer.postMessage({\n      action: 'setRemux',\n      remux: remux\n    });\n  }\n\n  if (bytes.byteLength) {\n    var buffer = bytes instanceof ArrayBuffer ? bytes : bytes.buffer;\n    var byteOffset = bytes instanceof ArrayBuffer ? 0 : bytes.byteOffset;\n    transmuxer.postMessage({\n      action: 'push',\n      // Send the typed-array of data as an ArrayBuffer so that\n      // it can be sent as a \"Transferable\" and avoid the costly\n      // memory copy\n      data: buffer,\n      // To recreate the original typed-array, we need information\n      // about what portion of the ArrayBuffer it was a view into\n      byteOffset: byteOffset,\n      byteLength: bytes.byteLength\n    }, [buffer]);\n  }\n\n  if (isEndOfTimeline) {\n    transmuxer.postMessage({\n      action: 'endTimeline'\n    });\n  } // even if we didn't push any bytes, we have to make sure we flush in case we reached\n  // the end of the segment\n\n\n  transmuxer.postMessage({\n    action: 'flush'\n  });\n};\n\nvar dequeue = function dequeue(transmuxer) {\n  transmuxer.currentTransmux = null;\n\n  if (transmuxer.transmuxQueue.length) {\n    transmuxer.currentTransmux = transmuxer.transmuxQueue.shift();\n\n    if (typeof transmuxer.currentTransmux === 'function') {\n      transmuxer.currentTransmux();\n    } else {\n      processTransmux(transmuxer.currentTransmux);\n    }\n  }\n};\n\nvar processAction = function processAction(transmuxer, action) {\n  transmuxer.postMessage({\n    action: action\n  });\n  dequeue(transmuxer);\n};\n\nvar enqueueAction = function enqueueAction(action, transmuxer) {\n  if (!transmuxer.currentTransmux) {\n    transmuxer.currentTransmux = action;\n    processAction(transmuxer, action);\n    return;\n  }\n\n  transmuxer.transmuxQueue.push(processAction.bind(null, transmuxer, action));\n};\n\nvar reset = function reset(transmuxer) {\n  enqueueAction('reset', transmuxer);\n};\n\nvar endTimeline = function endTimeline(transmuxer) {\n  enqueueAction('endTimeline', transmuxer);\n};\n\nvar transmux = function transmux(options) {\n  if (!options.transmuxer.currentTransmux) {\n    options.transmuxer.currentTransmux = options;\n    processTransmux(options);\n    return;\n  }\n\n  options.transmuxer.transmuxQueue.push(options);\n};\n\nvar createTransmuxer = function createTransmuxer(options) {\n  var transmuxer = new TransmuxWorker();\n  transmuxer.currentTransmux = null;\n  transmuxer.transmuxQueue = [];\n  var term = transmuxer.terminate;\n\n  transmuxer.terminate = function () {\n    transmuxer.currentTransmux = null;\n    transmuxer.transmuxQueue.length = 0;\n    return term.call(transmuxer);\n  };\n\n  transmuxer.postMessage({\n    action: 'init',\n    options: options\n  });\n  return transmuxer;\n};\n\nvar segmentTransmuxer = {\n  reset: reset,\n  endTimeline: endTimeline,\n  transmux: transmux,\n  createTransmuxer: createTransmuxer\n};\n\nvar workerCallback = function workerCallback(options) {\n  var transmuxer = options.transmuxer;\n  var endAction = options.endAction || options.action;\n  var callback = options.callback;\n\n  var message = _extends({}, options, {\n    endAction: null,\n    transmuxer: null,\n    callback: null\n  });\n\n  var listenForEndEvent = function listenForEndEvent(event) {\n    if (event.data.action !== endAction) {\n      return;\n    }\n\n    transmuxer.removeEventListener('message', listenForEndEvent); // transfer ownership of bytes back to us.\n\n    if (event.data.data) {\n      event.data.data = new Uint8Array(event.data.data, options.byteOffset || 0, options.byteLength || event.data.data.byteLength);\n\n      if (options.data) {\n        options.data = event.data.data;\n      }\n    }\n\n    callback(event.data);\n  };\n\n  transmuxer.addEventListener('message', listenForEndEvent);\n\n  if (options.data) {\n    var isArrayBuffer = options.data instanceof ArrayBuffer;\n    message.byteOffset = isArrayBuffer ? 0 : options.data.byteOffset;\n    message.byteLength = options.data.byteLength;\n    var transfers = [isArrayBuffer ? options.data : options.data.buffer];\n    transmuxer.postMessage(message, transfers);\n  } else {\n    transmuxer.postMessage(message);\n  }\n};\n\nvar REQUEST_ERRORS = {\n  FAILURE: 2,\n  TIMEOUT: -101,\n  ABORTED: -102\n};\n/**\n * Abort all requests\n *\n * @param {Object} activeXhrs - an object that tracks all XHR requests\n */\n\nvar abortAll = function abortAll(activeXhrs) {\n  activeXhrs.forEach(function (xhr) {\n    xhr.abort();\n  });\n};\n/**\n * Gather important bandwidth stats once a request has completed\n *\n * @param {Object} request - the XHR request from which to gather stats\n */\n\n\nvar getRequestStats = function getRequestStats(request) {\n  return {\n    bandwidth: request.bandwidth,\n    bytesReceived: request.bytesReceived || 0,\n    roundTripTime: request.roundTripTime || 0\n  };\n};\n/**\n * If possible gather bandwidth stats as a request is in\n * progress\n *\n * @param {Event} progressEvent - an event object from an XHR's progress event\n */\n\n\nvar getProgressStats = function getProgressStats(progressEvent) {\n  var request = progressEvent.target;\n  var roundTripTime = Date.now() - request.requestTime;\n  var stats = {\n    bandwidth: Infinity,\n    bytesReceived: 0,\n    roundTripTime: roundTripTime || 0\n  };\n  stats.bytesReceived = progressEvent.loaded; // This can result in Infinity if stats.roundTripTime is 0 but that is ok\n  // because we should only use bandwidth stats on progress to determine when\n  // abort a request early due to insufficient bandwidth\n\n  stats.bandwidth = Math.floor(stats.bytesReceived / stats.roundTripTime * 8 * 1000);\n  return stats;\n};\n/**\n * Handle all error conditions in one place and return an object\n * with all the information\n *\n * @param {Error|null} error - if non-null signals an error occured with the XHR\n * @param {Object} request -  the XHR request that possibly generated the error\n */\n\n\nvar handleErrors = function handleErrors(error, request) {\n  if (request.timedout) {\n    return {\n      status: request.status,\n      message: 'HLS request timed-out at URL: ' + request.uri,\n      code: REQUEST_ERRORS.TIMEOUT,\n      xhr: request\n    };\n  }\n\n  if (request.aborted) {\n    return {\n      status: request.status,\n      message: 'HLS request aborted at URL: ' + request.uri,\n      code: REQUEST_ERRORS.ABORTED,\n      xhr: request\n    };\n  }\n\n  if (error) {\n    return {\n      status: request.status,\n      message: 'HLS request errored at URL: ' + request.uri,\n      code: REQUEST_ERRORS.FAILURE,\n      xhr: request\n    };\n  }\n\n  if (request.responseType === 'arraybuffer' && request.response.byteLength === 0) {\n    return {\n      status: request.status,\n      message: 'Empty HLS response at URL: ' + request.uri,\n      code: REQUEST_ERRORS.FAILURE,\n      xhr: request\n    };\n  }\n\n  return null;\n};\n/**\n * Handle responses for key data and convert the key data to the correct format\n * for the decryption step later\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Array} objects - objects to add the key bytes to.\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\n\n\nvar handleKeyResponse = function handleKeyResponse(segment, objects, finishProcessingFn) {\n  return function (error, request) {\n    var response = request.response;\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    if (response.byteLength !== 16) {\n      return finishProcessingFn({\n        status: request.status,\n        message: 'Invalid HLS key at URL: ' + request.uri,\n        code: REQUEST_ERRORS.FAILURE,\n        xhr: request\n      }, segment);\n    }\n\n    var view = new DataView(response);\n    var bytes = new Uint32Array([view.getUint32(0), view.getUint32(4), view.getUint32(8), view.getUint32(12)]);\n\n    for (var i = 0; i < objects.length; i++) {\n      objects[i].bytes = bytes;\n    }\n\n    return finishProcessingFn(null, segment);\n  };\n};\n\nvar parseInitSegment = function parseInitSegment(segment, _callback) {\n  var type = detectContainerForBytes(segment.map.bytes); // TODO: We should also handle ts init segments here, but we\n  // only know how to parse mp4 init segments at the moment\n\n  if (type !== 'mp4') {\n    var uri = segment.map.resolvedUri || segment.map.uri;\n    return _callback({\n      internal: true,\n      message: \"Found unsupported \" + (type || 'unknown') + \" container for initialization segment at URL: \" + uri,\n      code: REQUEST_ERRORS.FAILURE\n    });\n  }\n\n  workerCallback({\n    action: 'probeMp4Tracks',\n    data: segment.map.bytes,\n    transmuxer: segment.transmuxer,\n    callback: function callback(_ref) {\n      var tracks = _ref.tracks,\n          data = _ref.data; // transfer bytes back to us\n\n      segment.map.bytes = data;\n      tracks.forEach(function (track) {\n        segment.map.tracks = segment.map.tracks || {}; // only support one track of each type for now\n\n        if (segment.map.tracks[track.type]) {\n          return;\n        }\n\n        segment.map.tracks[track.type] = track;\n\n        if (typeof track.id === 'number' && track.timescale) {\n          segment.map.timescales = segment.map.timescales || {};\n          segment.map.timescales[track.id] = track.timescale;\n        }\n      });\n      return _callback(null);\n    }\n  });\n};\n/**\n * Handle init-segment responses\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\n\n\nvar handleInitSegmentResponse = function handleInitSegmentResponse(_ref2) {\n  var segment = _ref2.segment,\n      finishProcessingFn = _ref2.finishProcessingFn;\n  return function (error, request) {\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    var bytes = new Uint8Array(request.response); // init segment is encypted, we will have to wait\n    // until the key request is done to decrypt.\n\n    if (segment.map.key) {\n      segment.map.encryptedBytes = bytes;\n      return finishProcessingFn(null, segment);\n    }\n\n    segment.map.bytes = bytes;\n    parseInitSegment(segment, function (parseError) {\n      if (parseError) {\n        parseError.xhr = request;\n        parseError.status = request.status;\n        return finishProcessingFn(parseError, segment);\n      }\n\n      finishProcessingFn(null, segment);\n    });\n  };\n};\n/**\n * Response handler for segment-requests being sure to set the correct\n * property depending on whether the segment is encryped or not\n * Also records and keeps track of stats that are used for ABR purposes\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\n\n\nvar handleSegmentResponse = function handleSegmentResponse(_ref3) {\n  var segment = _ref3.segment,\n      finishProcessingFn = _ref3.finishProcessingFn,\n      responseType = _ref3.responseType;\n  return function (error, request) {\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    var newBytes = // although responseText \"should\" exist, this guard serves to prevent an error being\n    // thrown for two primary cases:\n    // 1. the mime type override stops working, or is not implemented for a specific\n    //    browser\n    // 2. when using mock XHR libraries like sinon that do not allow the override behavior\n    responseType === 'arraybuffer' || !request.responseText ? request.response : stringToArrayBuffer(request.responseText.substring(segment.lastReachedChar || 0));\n    segment.stats = getRequestStats(request);\n\n    if (segment.key) {\n      segment.encryptedBytes = new Uint8Array(newBytes);\n    } else {\n      segment.bytes = new Uint8Array(newBytes);\n    }\n\n    return finishProcessingFn(null, segment);\n  };\n};\n\nvar transmuxAndNotify = function transmuxAndNotify(_ref4) {\n  var segment = _ref4.segment,\n      bytes = _ref4.bytes,\n      trackInfoFn = _ref4.trackInfoFn,\n      timingInfoFn = _ref4.timingInfoFn,\n      videoSegmentTimingInfoFn = _ref4.videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn = _ref4.audioSegmentTimingInfoFn,\n      id3Fn = _ref4.id3Fn,\n      captionsFn = _ref4.captionsFn,\n      isEndOfTimeline = _ref4.isEndOfTimeline,\n      endedTimelineFn = _ref4.endedTimelineFn,\n      dataFn = _ref4.dataFn,\n      doneFn = _ref4.doneFn,\n      onTransmuxerLog = _ref4.onTransmuxerLog;\n  var fmp4Tracks = segment.map && segment.map.tracks || {};\n  var isMuxed = Boolean(fmp4Tracks.audio && fmp4Tracks.video); // Keep references to each function so we can null them out after we're done with them.\n  // One reason for this is that in the case of full segments, we want to trust start\n  // times from the probe, rather than the transmuxer.\n\n  var audioStartFn = timingInfoFn.bind(null, segment, 'audio', 'start');\n  var audioEndFn = timingInfoFn.bind(null, segment, 'audio', 'end');\n  var videoStartFn = timingInfoFn.bind(null, segment, 'video', 'start');\n  var videoEndFn = timingInfoFn.bind(null, segment, 'video', 'end');\n\n  var finish = function finish() {\n    return transmux({\n      bytes: bytes,\n      transmuxer: segment.transmuxer,\n      audioAppendStart: segment.audioAppendStart,\n      gopsToAlignWith: segment.gopsToAlignWith,\n      remux: isMuxed,\n      onData: function onData(result) {\n        result.type = result.type === 'combined' ? 'video' : result.type;\n        dataFn(segment, result);\n      },\n      onTrackInfo: function onTrackInfo(trackInfo) {\n        if (trackInfoFn) {\n          if (isMuxed) {\n            trackInfo.isMuxed = true;\n          }\n\n          trackInfoFn(segment, trackInfo);\n        }\n      },\n      onAudioTimingInfo: function onAudioTimingInfo(audioTimingInfo) {\n        // we only want the first start value we encounter\n        if (audioStartFn && typeof audioTimingInfo.start !== 'undefined') {\n          audioStartFn(audioTimingInfo.start);\n          audioStartFn = null;\n        } // we want to continually update the end time\n\n\n        if (audioEndFn && typeof audioTimingInfo.end !== 'undefined') {\n          audioEndFn(audioTimingInfo.end);\n        }\n      },\n      onVideoTimingInfo: function onVideoTimingInfo(videoTimingInfo) {\n        // we only want the first start value we encounter\n        if (videoStartFn && typeof videoTimingInfo.start !== 'undefined') {\n          videoStartFn(videoTimingInfo.start);\n          videoStartFn = null;\n        } // we want to continually update the end time\n\n\n        if (videoEndFn && typeof videoTimingInfo.end !== 'undefined') {\n          videoEndFn(videoTimingInfo.end);\n        }\n      },\n      onVideoSegmentTimingInfo: function onVideoSegmentTimingInfo(videoSegmentTimingInfo) {\n        videoSegmentTimingInfoFn(videoSegmentTimingInfo);\n      },\n      onAudioSegmentTimingInfo: function onAudioSegmentTimingInfo(audioSegmentTimingInfo) {\n        audioSegmentTimingInfoFn(audioSegmentTimingInfo);\n      },\n      onId3: function onId3(id3Frames, dispatchType) {\n        id3Fn(segment, id3Frames, dispatchType);\n      },\n      onCaptions: function onCaptions(captions) {\n        captionsFn(segment, [captions]);\n      },\n      isEndOfTimeline: isEndOfTimeline,\n      onEndedTimeline: function onEndedTimeline() {\n        endedTimelineFn();\n      },\n      onTransmuxerLog: onTransmuxerLog,\n      onDone: function onDone(result) {\n        if (!doneFn) {\n          return;\n        }\n\n        result.type = result.type === 'combined' ? 'video' : result.type;\n        doneFn(null, segment, result);\n      }\n    });\n  }; // In the transmuxer, we don't yet have the ability to extract a \"proper\" start time.\n  // Meaning cached frame data may corrupt our notion of where this segment\n  // really starts. To get around this, probe for the info needed.\n\n\n  workerCallback({\n    action: 'probeTs',\n    transmuxer: segment.transmuxer,\n    data: bytes,\n    baseStartTime: segment.baseStartTime,\n    callback: function callback(data) {\n      segment.bytes = bytes = data.data;\n      var probeResult = data.result;\n\n      if (probeResult) {\n        trackInfoFn(segment, {\n          hasAudio: probeResult.hasAudio,\n          hasVideo: probeResult.hasVideo,\n          isMuxed: isMuxed\n        });\n        trackInfoFn = null;\n\n        if (probeResult.hasAudio && !isMuxed) {\n          audioStartFn(probeResult.audioStart);\n        }\n\n        if (probeResult.hasVideo) {\n          videoStartFn(probeResult.videoStart);\n        }\n\n        audioStartFn = null;\n        videoStartFn = null;\n      }\n\n      finish();\n    }\n  });\n};\n\nvar handleSegmentBytes = function handleSegmentBytes(_ref5) {\n  var segment = _ref5.segment,\n      bytes = _ref5.bytes,\n      trackInfoFn = _ref5.trackInfoFn,\n      timingInfoFn = _ref5.timingInfoFn,\n      videoSegmentTimingInfoFn = _ref5.videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn = _ref5.audioSegmentTimingInfoFn,\n      id3Fn = _ref5.id3Fn,\n      captionsFn = _ref5.captionsFn,\n      isEndOfTimeline = _ref5.isEndOfTimeline,\n      endedTimelineFn = _ref5.endedTimelineFn,\n      dataFn = _ref5.dataFn,\n      doneFn = _ref5.doneFn,\n      onTransmuxerLog = _ref5.onTransmuxerLog;\n  var bytesAsUint8Array = new Uint8Array(bytes); // TODO:\n  // We should have a handler that fetches the number of bytes required\n  // to check if something is fmp4. This will allow us to save bandwidth\n  // because we can only blacklist a playlist and abort requests\n  // by codec after trackinfo triggers.\n\n  if (isLikelyFmp4MediaSegment(bytesAsUint8Array)) {\n    segment.isFmp4 = true;\n    var tracks = segment.map.tracks;\n    var trackInfo = {\n      isFmp4: true,\n      hasVideo: !!tracks.video,\n      hasAudio: !!tracks.audio\n    }; // if we have a audio track, with a codec that is not set to\n    // encrypted audio\n\n    if (tracks.audio && tracks.audio.codec && tracks.audio.codec !== 'enca') {\n      trackInfo.audioCodec = tracks.audio.codec;\n    } // if we have a video track, with a codec that is not set to\n    // encrypted video\n\n\n    if (tracks.video && tracks.video.codec && tracks.video.codec !== 'encv') {\n      trackInfo.videoCodec = tracks.video.codec;\n    }\n\n    if (tracks.video && tracks.audio) {\n      trackInfo.isMuxed = true;\n    } // since we don't support appending fmp4 data on progress, we know we have the full\n    // segment here\n\n\n    trackInfoFn(segment, trackInfo); // The probe doesn't provide the segment end time, so only callback with the start\n    // time. The end time can be roughly calculated by the receiver using the duration.\n    //\n    // Note that the start time returned by the probe reflects the baseMediaDecodeTime, as\n    // that is the true start of the segment (where the playback engine should begin\n    // decoding).\n\n    var finishLoading = function finishLoading(captions) {\n      // if the track still has audio at this point it is only possible\n      // for it to be audio only. See `tracks.video && tracks.audio` if statement\n      // above.\n      // we make sure to use segment.bytes here as that\n      dataFn(segment, {\n        data: bytesAsUint8Array,\n        type: trackInfo.hasAudio && !trackInfo.isMuxed ? 'audio' : 'video'\n      });\n\n      if (captions && captions.length) {\n        captionsFn(segment, captions);\n      }\n\n      doneFn(null, segment, {});\n    };\n\n    workerCallback({\n      action: 'probeMp4StartTime',\n      timescales: segment.map.timescales,\n      data: bytesAsUint8Array,\n      transmuxer: segment.transmuxer,\n      callback: function callback(_ref6) {\n        var data = _ref6.data,\n            startTime = _ref6.startTime; // transfer bytes back to us\n\n        bytes = data.buffer;\n        segment.bytes = bytesAsUint8Array = data;\n\n        if (trackInfo.hasAudio && !trackInfo.isMuxed) {\n          timingInfoFn(segment, 'audio', 'start', startTime);\n        }\n\n        if (trackInfo.hasVideo) {\n          timingInfoFn(segment, 'video', 'start', startTime);\n        } // Run through the CaptionParser in case there are captions.\n        // Initialize CaptionParser if it hasn't been yet\n\n\n        if (!tracks.video || !data.byteLength || !segment.transmuxer) {\n          finishLoading();\n          return;\n        }\n\n        workerCallback({\n          action: 'pushMp4Captions',\n          endAction: 'mp4Captions',\n          transmuxer: segment.transmuxer,\n          data: bytesAsUint8Array,\n          timescales: segment.map.timescales,\n          trackIds: [tracks.video.id],\n          callback: function callback(message) {\n            // transfer bytes back to us\n            bytes = message.data.buffer;\n            segment.bytes = bytesAsUint8Array = message.data;\n            message.logs.forEach(function (log) {\n              onTransmuxerLog(videojs.mergeOptions(log, {\n                stream: 'mp4CaptionParser'\n              }));\n            });\n            finishLoading(message.captions);\n          }\n        });\n      }\n    });\n    return;\n  } // VTT or other segments that don't need processing\n\n\n  if (!segment.transmuxer) {\n    doneFn(null, segment, {});\n    return;\n  }\n\n  if (typeof segment.container === 'undefined') {\n    segment.container = detectContainerForBytes(bytesAsUint8Array);\n  }\n\n  if (segment.container !== 'ts' && segment.container !== 'aac') {\n    trackInfoFn(segment, {\n      hasAudio: false,\n      hasVideo: false\n    });\n    doneFn(null, segment, {});\n    return;\n  } // ts or aac\n\n\n  transmuxAndNotify({\n    segment: segment,\n    bytes: bytes,\n    trackInfoFn: trackInfoFn,\n    timingInfoFn: timingInfoFn,\n    videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n    audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n    id3Fn: id3Fn,\n    captionsFn: captionsFn,\n    isEndOfTimeline: isEndOfTimeline,\n    endedTimelineFn: endedTimelineFn,\n    dataFn: dataFn,\n    doneFn: doneFn,\n    onTransmuxerLog: onTransmuxerLog\n  });\n};\n\nvar decrypt = function decrypt(_ref7, callback) {\n  var id = _ref7.id,\n      key = _ref7.key,\n      encryptedBytes = _ref7.encryptedBytes,\n      decryptionWorker = _ref7.decryptionWorker;\n\n  var decryptionHandler = function decryptionHandler(event) {\n    if (event.data.source === id) {\n      decryptionWorker.removeEventListener('message', decryptionHandler);\n      var decrypted = event.data.decrypted;\n      callback(new Uint8Array(decrypted.bytes, decrypted.byteOffset, decrypted.byteLength));\n    }\n  };\n\n  decryptionWorker.addEventListener('message', decryptionHandler);\n  var keyBytes;\n\n  if (key.bytes.slice) {\n    keyBytes = key.bytes.slice();\n  } else {\n    keyBytes = new Uint32Array(Array.prototype.slice.call(key.bytes));\n  } // incrementally decrypt the bytes\n\n\n  decryptionWorker.postMessage(createTransferableMessage({\n    source: id,\n    encrypted: encryptedBytes,\n    key: keyBytes,\n    iv: key.iv\n  }), [encryptedBytes.buffer, keyBytes.buffer]);\n};\n/**\n * Decrypt the segment via the decryption web worker\n *\n * @param {WebWorker} decryptionWorker - a WebWorker interface to AES-128 decryption\n *                                       routines\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} trackInfoFn - a callback that receives track info\n * @param {Function} timingInfoFn - a callback that receives timing info\n * @param {Function} videoSegmentTimingInfoFn\n *                   a callback that receives video timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} audioSegmentTimingInfoFn\n *                   a callback that receives audio timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {boolean}  isEndOfTimeline\n *                   true if this segment represents the last segment in a timeline\n * @param {Function} endedTimelineFn\n *                   a callback made when a timeline is ended, will only be called if\n *                   isEndOfTimeline is true\n * @param {Function} dataFn - a callback that is executed when segment bytes are available\n *                            and ready to use\n * @param {Function} doneFn - a callback that is executed after decryption has completed\n */\n\n\nvar decryptSegment = function decryptSegment(_ref8) {\n  var decryptionWorker = _ref8.decryptionWorker,\n      segment = _ref8.segment,\n      trackInfoFn = _ref8.trackInfoFn,\n      timingInfoFn = _ref8.timingInfoFn,\n      videoSegmentTimingInfoFn = _ref8.videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn = _ref8.audioSegmentTimingInfoFn,\n      id3Fn = _ref8.id3Fn,\n      captionsFn = _ref8.captionsFn,\n      isEndOfTimeline = _ref8.isEndOfTimeline,\n      endedTimelineFn = _ref8.endedTimelineFn,\n      dataFn = _ref8.dataFn,\n      doneFn = _ref8.doneFn,\n      onTransmuxerLog = _ref8.onTransmuxerLog;\n  decrypt({\n    id: segment.requestId,\n    key: segment.key,\n    encryptedBytes: segment.encryptedBytes,\n    decryptionWorker: decryptionWorker\n  }, function (decryptedBytes) {\n    segment.bytes = decryptedBytes;\n    handleSegmentBytes({\n      segment: segment,\n      bytes: segment.bytes,\n      trackInfoFn: trackInfoFn,\n      timingInfoFn: timingInfoFn,\n      videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n      id3Fn: id3Fn,\n      captionsFn: captionsFn,\n      isEndOfTimeline: isEndOfTimeline,\n      endedTimelineFn: endedTimelineFn,\n      dataFn: dataFn,\n      doneFn: doneFn,\n      onTransmuxerLog: onTransmuxerLog\n    });\n  });\n};\n/**\n * This function waits for all XHRs to finish (with either success or failure)\n * before continueing processing via it's callback. The function gathers errors\n * from each request into a single errors array so that the error status for\n * each request can be examined later.\n *\n * @param {Object} activeXhrs - an object that tracks all XHR requests\n * @param {WebWorker} decryptionWorker - a WebWorker interface to AES-128 decryption\n *                                       routines\n * @param {Function} trackInfoFn - a callback that receives track info\n * @param {Function} timingInfoFn - a callback that receives timing info\n * @param {Function} videoSegmentTimingInfoFn\n *                   a callback that receives video timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} audioSegmentTimingInfoFn\n *                   a callback that receives audio timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} id3Fn - a callback that receives ID3 metadata\n * @param {Function} captionsFn - a callback that receives captions\n * @param {boolean}  isEndOfTimeline\n *                   true if this segment represents the last segment in a timeline\n * @param {Function} endedTimelineFn\n *                   a callback made when a timeline is ended, will only be called if\n *                   isEndOfTimeline is true\n * @param {Function} dataFn - a callback that is executed when segment bytes are available\n *                            and ready to use\n * @param {Function} doneFn - a callback that is executed after all resources have been\n *                            downloaded and any decryption completed\n */\n\n\nvar waitForCompletion = function waitForCompletion(_ref9) {\n  var activeXhrs = _ref9.activeXhrs,\n      decryptionWorker = _ref9.decryptionWorker,\n      trackInfoFn = _ref9.trackInfoFn,\n      timingInfoFn = _ref9.timingInfoFn,\n      videoSegmentTimingInfoFn = _ref9.videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn = _ref9.audioSegmentTimingInfoFn,\n      id3Fn = _ref9.id3Fn,\n      captionsFn = _ref9.captionsFn,\n      isEndOfTimeline = _ref9.isEndOfTimeline,\n      endedTimelineFn = _ref9.endedTimelineFn,\n      dataFn = _ref9.dataFn,\n      doneFn = _ref9.doneFn,\n      onTransmuxerLog = _ref9.onTransmuxerLog;\n  var count = 0;\n  var didError = false;\n  return function (error, segment) {\n    if (didError) {\n      return;\n    }\n\n    if (error) {\n      didError = true; // If there are errors, we have to abort any outstanding requests\n\n      abortAll(activeXhrs); // Even though the requests above are aborted, and in theory we could wait until we\n      // handle the aborted events from those requests, there are some cases where we may\n      // never get an aborted event. For instance, if the network connection is lost and\n      // there were two requests, the first may have triggered an error immediately, while\n      // the second request remains unsent. In that case, the aborted algorithm will not\n      // trigger an abort: see https://xhr.spec.whatwg.org/#the-abort()-method\n      //\n      // We also can't rely on the ready state of the XHR, since the request that\n      // triggered the connection error may also show as a ready state of 0 (unsent).\n      // Therefore, we have to finish this group of requests immediately after the first\n      // seen error.\n\n      return doneFn(error, segment);\n    }\n\n    count += 1;\n\n    if (count === activeXhrs.length) {\n      var segmentFinish = function segmentFinish() {\n        if (segment.encryptedBytes) {\n          return decryptSegment({\n            decryptionWorker: decryptionWorker,\n            segment: segment,\n            trackInfoFn: trackInfoFn,\n            timingInfoFn: timingInfoFn,\n            videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n            audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n            id3Fn: id3Fn,\n            captionsFn: captionsFn,\n            isEndOfTimeline: isEndOfTimeline,\n            endedTimelineFn: endedTimelineFn,\n            dataFn: dataFn,\n            doneFn: doneFn,\n            onTransmuxerLog: onTransmuxerLog\n          });\n        } // Otherwise, everything is ready just continue\n\n\n        handleSegmentBytes({\n          segment: segment,\n          bytes: segment.bytes,\n          trackInfoFn: trackInfoFn,\n          timingInfoFn: timingInfoFn,\n          videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n          audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n          id3Fn: id3Fn,\n          captionsFn: captionsFn,\n          isEndOfTimeline: isEndOfTimeline,\n          endedTimelineFn: endedTimelineFn,\n          dataFn: dataFn,\n          doneFn: doneFn,\n          onTransmuxerLog: onTransmuxerLog\n        });\n      }; // Keep track of when *all* of the requests have completed\n\n\n      segment.endOfAllRequests = Date.now();\n\n      if (segment.map && segment.map.encryptedBytes && !segment.map.bytes) {\n        return decrypt({\n          decryptionWorker: decryptionWorker,\n          // add -init to the \"id\" to differentiate between segment\n          // and init segment decryption, just in case they happen\n          // at the same time at some point in the future.\n          id: segment.requestId + '-init',\n          encryptedBytes: segment.map.encryptedBytes,\n          key: segment.map.key\n        }, function (decryptedBytes) {\n          segment.map.bytes = decryptedBytes;\n          parseInitSegment(segment, function (parseError) {\n            if (parseError) {\n              abortAll(activeXhrs);\n              return doneFn(parseError, segment);\n            }\n\n            segmentFinish();\n          });\n        });\n      }\n\n      segmentFinish();\n    }\n  };\n};\n/**\n * Calls the abort callback if any request within the batch was aborted. Will only call\n * the callback once per batch of requests, even if multiple were aborted.\n *\n * @param {Object} loadendState - state to check to see if the abort function was called\n * @param {Function} abortFn - callback to call for abort\n */\n\n\nvar handleLoadEnd = function handleLoadEnd(_ref10) {\n  var loadendState = _ref10.loadendState,\n      abortFn = _ref10.abortFn;\n  return function (event) {\n    var request = event.target;\n\n    if (request.aborted && abortFn && !loadendState.calledAbortFn) {\n      abortFn();\n      loadendState.calledAbortFn = true;\n    }\n  };\n};\n/**\n * Simple progress event callback handler that gathers some stats before\n * executing a provided callback with the `segment` object\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} progressFn - a callback that is executed each time a progress event\n *                                is received\n * @param {Function} trackInfoFn - a callback that receives track info\n * @param {Function} timingInfoFn - a callback that receives timing info\n * @param {Function} videoSegmentTimingInfoFn\n *                   a callback that receives video timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} audioSegmentTimingInfoFn\n *                   a callback that receives audio timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {boolean}  isEndOfTimeline\n *                   true if this segment represents the last segment in a timeline\n * @param {Function} endedTimelineFn\n *                   a callback made when a timeline is ended, will only be called if\n *                   isEndOfTimeline is true\n * @param {Function} dataFn - a callback that is executed when segment bytes are available\n *                            and ready to use\n * @param {Event} event - the progress event object from XMLHttpRequest\n */\n\n\nvar handleProgress = function handleProgress(_ref11) {\n  var segment = _ref11.segment,\n      progressFn = _ref11.progressFn;\n  _ref11.trackInfoFn;\n  _ref11.timingInfoFn;\n  _ref11.videoSegmentTimingInfoFn;\n  _ref11.audioSegmentTimingInfoFn;\n  _ref11.id3Fn;\n  _ref11.captionsFn;\n  _ref11.isEndOfTimeline;\n  _ref11.endedTimelineFn;\n  _ref11.dataFn;\n  return function (event) {\n    var request = event.target;\n\n    if (request.aborted) {\n      return;\n    }\n\n    segment.stats = videojs.mergeOptions(segment.stats, getProgressStats(event)); // record the time that we receive the first byte of data\n\n    if (!segment.stats.firstBytesReceivedAt && segment.stats.bytesReceived) {\n      segment.stats.firstBytesReceivedAt = Date.now();\n    }\n\n    return progressFn(event, segment);\n  };\n};\n/**\n * Load all resources and does any processing necessary for a media-segment\n *\n * Features:\n *   decrypts the media-segment if it has a key uri and an iv\n *   aborts *all* requests if *any* one request fails\n *\n * The segment object, at minimum, has the following format:\n * {\n *   resolvedUri: String,\n *   [transmuxer]: Object,\n *   [byterange]: {\n *     offset: Number,\n *     length: Number\n *   },\n *   [key]: {\n *     resolvedUri: String\n *     [byterange]: {\n *       offset: Number,\n *       length: Number\n *     },\n *     iv: {\n *       bytes: Uint32Array\n *     }\n *   },\n *   [map]: {\n *     resolvedUri: String,\n *     [byterange]: {\n *       offset: Number,\n *       length: Number\n *     },\n *     [bytes]: Uint8Array\n *   }\n * }\n * ...where [name] denotes optional properties\n *\n * @param {Function} xhr - an instance of the xhr wrapper in xhr.js\n * @param {Object} xhrOptions - the base options to provide to all xhr requests\n * @param {WebWorker} decryptionWorker - a WebWorker interface to AES-128\n *                                       decryption routines\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} abortFn - a callback called (only once) if any piece of a request was\n *                             aborted\n * @param {Function} progressFn - a callback that receives progress events from the main\n *                                segment's xhr request\n * @param {Function} trackInfoFn - a callback that receives track info\n * @param {Function} timingInfoFn - a callback that receives timing info\n * @param {Function} videoSegmentTimingInfoFn\n *                   a callback that receives video timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} audioSegmentTimingInfoFn\n *                   a callback that receives audio timing info based on media times and\n *                   any adjustments made by the transmuxer\n * @param {Function} id3Fn - a callback that receives ID3 metadata\n * @param {Function} captionsFn - a callback that receives captions\n * @param {boolean}  isEndOfTimeline\n *                   true if this segment represents the last segment in a timeline\n * @param {Function} endedTimelineFn\n *                   a callback made when a timeline is ended, will only be called if\n *                   isEndOfTimeline is true\n * @param {Function} dataFn - a callback that receives data from the main segment's xhr\n *                            request, transmuxed if needed\n * @param {Function} doneFn - a callback that is executed only once all requests have\n *                            succeeded or failed\n * @return {Function} a function that, when invoked, immediately aborts all\n *                     outstanding requests\n */\n\n\nvar mediaSegmentRequest = function mediaSegmentRequest(_ref12) {\n  var xhr = _ref12.xhr,\n      xhrOptions = _ref12.xhrOptions,\n      decryptionWorker = _ref12.decryptionWorker,\n      segment = _ref12.segment,\n      abortFn = _ref12.abortFn,\n      progressFn = _ref12.progressFn,\n      trackInfoFn = _ref12.trackInfoFn,\n      timingInfoFn = _ref12.timingInfoFn,\n      videoSegmentTimingInfoFn = _ref12.videoSegmentTimingInfoFn,\n      audioSegmentTimingInfoFn = _ref12.audioSegmentTimingInfoFn,\n      id3Fn = _ref12.id3Fn,\n      captionsFn = _ref12.captionsFn,\n      isEndOfTimeline = _ref12.isEndOfTimeline,\n      endedTimelineFn = _ref12.endedTimelineFn,\n      dataFn = _ref12.dataFn,\n      doneFn = _ref12.doneFn,\n      onTransmuxerLog = _ref12.onTransmuxerLog;\n  var activeXhrs = [];\n  var finishProcessingFn = waitForCompletion({\n    activeXhrs: activeXhrs,\n    decryptionWorker: decryptionWorker,\n    trackInfoFn: trackInfoFn,\n    timingInfoFn: timingInfoFn,\n    videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n    audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n    id3Fn: id3Fn,\n    captionsFn: captionsFn,\n    isEndOfTimeline: isEndOfTimeline,\n    endedTimelineFn: endedTimelineFn,\n    dataFn: dataFn,\n    doneFn: doneFn,\n    onTransmuxerLog: onTransmuxerLog\n  }); // optionally, request the decryption key\n\n  if (segment.key && !segment.key.bytes) {\n    var objects = [segment.key];\n\n    if (segment.map && !segment.map.bytes && segment.map.key && segment.map.key.resolvedUri === segment.key.resolvedUri) {\n      objects.push(segment.map.key);\n    }\n\n    var keyRequestOptions = videojs.mergeOptions(xhrOptions, {\n      uri: segment.key.resolvedUri,\n      responseType: 'arraybuffer'\n    });\n    var keyRequestCallback = handleKeyResponse(segment, objects, finishProcessingFn);\n    var keyXhr = xhr(keyRequestOptions, keyRequestCallback);\n    activeXhrs.push(keyXhr);\n  } // optionally, request the associated media init segment\n\n\n  if (segment.map && !segment.map.bytes) {\n    var differentMapKey = segment.map.key && (!segment.key || segment.key.resolvedUri !== segment.map.key.resolvedUri);\n\n    if (differentMapKey) {\n      var mapKeyRequestOptions = videojs.mergeOptions(xhrOptions, {\n        uri: segment.map.key.resolvedUri,\n        responseType: 'arraybuffer'\n      });\n      var mapKeyRequestCallback = handleKeyResponse(segment, [segment.map.key], finishProcessingFn);\n      var mapKeyXhr = xhr(mapKeyRequestOptions, mapKeyRequestCallback);\n      activeXhrs.push(mapKeyXhr);\n    }\n\n    var initSegmentOptions = videojs.mergeOptions(xhrOptions, {\n      uri: segment.map.resolvedUri,\n      responseType: 'arraybuffer',\n      headers: segmentXhrHeaders(segment.map)\n    });\n    var initSegmentRequestCallback = handleInitSegmentResponse({\n      segment: segment,\n      finishProcessingFn: finishProcessingFn\n    });\n    var initSegmentXhr = xhr(initSegmentOptions, initSegmentRequestCallback);\n    activeXhrs.push(initSegmentXhr);\n  }\n\n  var segmentRequestOptions = videojs.mergeOptions(xhrOptions, {\n    uri: segment.part && segment.part.resolvedUri || segment.resolvedUri,\n    responseType: 'arraybuffer',\n    headers: segmentXhrHeaders(segment)\n  });\n  var segmentRequestCallback = handleSegmentResponse({\n    segment: segment,\n    finishProcessingFn: finishProcessingFn,\n    responseType: segmentRequestOptions.responseType\n  });\n  var segmentXhr = xhr(segmentRequestOptions, segmentRequestCallback);\n  segmentXhr.addEventListener('progress', handleProgress({\n    segment: segment,\n    progressFn: progressFn,\n    trackInfoFn: trackInfoFn,\n    timingInfoFn: timingInfoFn,\n    videoSegmentTimingInfoFn: videoSegmentTimingInfoFn,\n    audioSegmentTimingInfoFn: audioSegmentTimingInfoFn,\n    id3Fn: id3Fn,\n    captionsFn: captionsFn,\n    isEndOfTimeline: isEndOfTimeline,\n    endedTimelineFn: endedTimelineFn,\n    dataFn: dataFn\n  }));\n  activeXhrs.push(segmentXhr); // since all parts of the request must be considered, but should not make callbacks\n  // multiple times, provide a shared state object\n\n  var loadendState = {};\n  activeXhrs.forEach(function (activeXhr) {\n    activeXhr.addEventListener('loadend', handleLoadEnd({\n      loadendState: loadendState,\n      abortFn: abortFn\n    }));\n  });\n  return function () {\n    return abortAll(activeXhrs);\n  };\n};\n/**\n * @file - codecs.js - Handles tasks regarding codec strings such as translating them to\n * codec strings, or translating codec strings into objects that can be examined.\n */\n\n\nvar logFn$1 = logger('CodecUtils');\n/**\n * Returns a set of codec strings parsed from the playlist or the default\n * codec strings if no codecs were specified in the playlist\n *\n * @param {Playlist} media the current media playlist\n * @return {Object} an object with the video and audio codecs\n */\n\nvar getCodecs = function getCodecs(media) {\n  // if the codecs were explicitly specified, use them instead of the\n  // defaults\n  var mediaAttributes = media.attributes || {};\n\n  if (mediaAttributes.CODECS) {\n    return parseCodecs(mediaAttributes.CODECS);\n  }\n};\n\nvar isMaat = function isMaat(master, media) {\n  var mediaAttributes = media.attributes || {};\n  return master && master.mediaGroups && master.mediaGroups.AUDIO && mediaAttributes.AUDIO && master.mediaGroups.AUDIO[mediaAttributes.AUDIO];\n};\n\nvar isMuxed = function isMuxed(master, media) {\n  if (!isMaat(master, media)) {\n    return true;\n  }\n\n  var mediaAttributes = media.attributes || {};\n  var audioGroup = master.mediaGroups.AUDIO[mediaAttributes.AUDIO];\n\n  for (var groupId in audioGroup) {\n    // If an audio group has a URI (the case for HLS, as HLS will use external playlists),\n    // or there are listed playlists (the case for DASH, as the manifest will have already\n    // provided all of the details necessary to generate the audio playlist, as opposed to\n    // HLS' externally requested playlists), then the content is demuxed.\n    if (!audioGroup[groupId].uri && !audioGroup[groupId].playlists) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar unwrapCodecList = function unwrapCodecList(codecList) {\n  var codecs = {};\n  codecList.forEach(function (_ref) {\n    var mediaType = _ref.mediaType,\n        type = _ref.type,\n        details = _ref.details;\n    codecs[mediaType] = codecs[mediaType] || [];\n    codecs[mediaType].push(translateLegacyCodec(\"\" + type + details));\n  });\n  Object.keys(codecs).forEach(function (mediaType) {\n    if (codecs[mediaType].length > 1) {\n      logFn$1(\"multiple \" + mediaType + \" codecs found as attributes: \" + codecs[mediaType].join(', ') + \". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.\");\n      codecs[mediaType] = null;\n      return;\n    }\n\n    codecs[mediaType] = codecs[mediaType][0];\n  });\n  return codecs;\n};\n\nvar codecCount = function codecCount(codecObj) {\n  var count = 0;\n\n  if (codecObj.audio) {\n    count++;\n  }\n\n  if (codecObj.video) {\n    count++;\n  }\n\n  return count;\n};\n/**\n * Calculates the codec strings for a working configuration of\n * SourceBuffers to play variant streams in a master playlist. If\n * there is no possible working configuration, an empty object will be\n * returned.\n *\n * @param master {Object} the m3u8 object for the master playlist\n * @param media {Object} the m3u8 object for the variant playlist\n * @return {Object} the codec strings.\n *\n * @private\n */\n\n\nvar codecsForPlaylist = function codecsForPlaylist(master, media) {\n  var mediaAttributes = media.attributes || {};\n  var codecInfo = unwrapCodecList(getCodecs(media) || []); // HLS with multiple-audio tracks must always get an audio codec.\n  // Put another way, there is no way to have a video-only multiple-audio HLS!\n\n  if (isMaat(master, media) && !codecInfo.audio) {\n    if (!isMuxed(master, media)) {\n      // It is possible for codecs to be specified on the audio media group playlist but\n      // not on the rendition playlist. This is mostly the case for DASH, where audio and\n      // video are always separate (and separately specified).\n      var defaultCodecs = unwrapCodecList(codecsFromDefault(master, mediaAttributes.AUDIO) || []);\n\n      if (defaultCodecs.audio) {\n        codecInfo.audio = defaultCodecs.audio;\n      }\n    }\n  }\n\n  return codecInfo;\n};\n\nvar logFn = logger('PlaylistSelector');\n\nvar representationToString = function representationToString(representation) {\n  if (!representation || !representation.playlist) {\n    return;\n  }\n\n  var playlist = representation.playlist;\n  return JSON.stringify({\n    id: playlist.id,\n    bandwidth: representation.bandwidth,\n    width: representation.width,\n    height: representation.height,\n    codecs: playlist.attributes && playlist.attributes.CODECS || ''\n  });\n}; // Utilities\n\n/**\n * Returns the CSS value for the specified property on an element\n * using `getComputedStyle`. Firefox has a long-standing issue where\n * getComputedStyle() may return null when running in an iframe with\n * `display: none`.\n *\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n * @param {HTMLElement} el the htmlelement to work on\n * @param {string} the proprety to get the style for\n */\n\n\nvar safeGetComputedStyle = function safeGetComputedStyle(el, property) {\n  if (!el) {\n    return '';\n  }\n\n  var result = window$1.getComputedStyle(el);\n\n  if (!result) {\n    return '';\n  }\n\n  return result[property];\n};\n/**\n * Resuable stable sort function\n *\n * @param {Playlists} array\n * @param {Function} sortFn Different comparators\n * @function stableSort\n */\n\n\nvar stableSort = function stableSort(array, sortFn) {\n  var newArray = array.slice();\n  array.sort(function (left, right) {\n    var cmp = sortFn(left, right);\n\n    if (cmp === 0) {\n      return newArray.indexOf(left) - newArray.indexOf(right);\n    }\n\n    return cmp;\n  });\n};\n/**\n * A comparator function to sort two playlist object by bandwidth.\n *\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {number} Greater than zero if the bandwidth attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the bandwidth of right is greater than left and\n * exactly zero if the two are equal.\n */\n\n\nvar comparePlaylistBandwidth = function comparePlaylistBandwidth(left, right) {\n  var leftBandwidth;\n  var rightBandwidth;\n\n  if (left.attributes.BANDWIDTH) {\n    leftBandwidth = left.attributes.BANDWIDTH;\n  }\n\n  leftBandwidth = leftBandwidth || window$1.Number.MAX_VALUE;\n\n  if (right.attributes.BANDWIDTH) {\n    rightBandwidth = right.attributes.BANDWIDTH;\n  }\n\n  rightBandwidth = rightBandwidth || window$1.Number.MAX_VALUE;\n  return leftBandwidth - rightBandwidth;\n};\n/**\n * A comparator function to sort two playlist object by resolution (width).\n *\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {number} Greater than zero if the resolution.width attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the resolution.width of right is greater than left and\n * exactly zero if the two are equal.\n */\n\n\nvar comparePlaylistResolution = function comparePlaylistResolution(left, right) {\n  var leftWidth;\n  var rightWidth;\n\n  if (left.attributes.RESOLUTION && left.attributes.RESOLUTION.width) {\n    leftWidth = left.attributes.RESOLUTION.width;\n  }\n\n  leftWidth = leftWidth || window$1.Number.MAX_VALUE;\n\n  if (right.attributes.RESOLUTION && right.attributes.RESOLUTION.width) {\n    rightWidth = right.attributes.RESOLUTION.width;\n  }\n\n  rightWidth = rightWidth || window$1.Number.MAX_VALUE; // NOTE - Fallback to bandwidth sort as appropriate in cases where multiple renditions\n  // have the same media dimensions/ resolution\n\n  if (leftWidth === rightWidth && left.attributes.BANDWIDTH && right.attributes.BANDWIDTH) {\n    return left.attributes.BANDWIDTH - right.attributes.BANDWIDTH;\n  }\n\n  return leftWidth - rightWidth;\n};\n/**\n * Chooses the appropriate media playlist based on bandwidth and player size\n *\n * @param {Object} master\n *        Object representation of the master manifest\n * @param {number} playerBandwidth\n *        Current calculated bandwidth of the player\n * @param {number} playerWidth\n *        Current width of the player element (should account for the device pixel ratio)\n * @param {number} playerHeight\n *        Current height of the player element (should account for the device pixel ratio)\n * @param {boolean} limitRenditionByPlayerDimensions\n *        True if the player width and height should be used during the selection, false otherwise\n * @param {Object} masterPlaylistController\n *        the current masterPlaylistController object\n * @return {Playlist} the highest bitrate playlist less than the\n * currently detected bandwidth, accounting for some amount of\n * bandwidth variance\n */\n\n\nvar simpleSelector = function simpleSelector(master, playerBandwidth, playerWidth, playerHeight, limitRenditionByPlayerDimensions, masterPlaylistController) {\n  // If we end up getting called before `master` is available, exit early\n  if (!master) {\n    return;\n  }\n\n  var options = {\n    bandwidth: playerBandwidth,\n    width: playerWidth,\n    height: playerHeight,\n    limitRenditionByPlayerDimensions: limitRenditionByPlayerDimensions\n  };\n  var playlists = master.playlists; // if playlist is audio only, select between currently active audio group playlists.\n\n  if (Playlist.isAudioOnly(master)) {\n    playlists = masterPlaylistController.getAudioTrackPlaylists_(); // add audioOnly to options so that we log audioOnly: true\n    // at the buttom of this function for debugging.\n\n    options.audioOnly = true;\n  } // convert the playlists to an intermediary representation to make comparisons easier\n\n\n  var sortedPlaylistReps = playlists.map(function (playlist) {\n    var bandwidth;\n    var width = playlist.attributes && playlist.attributes.RESOLUTION && playlist.attributes.RESOLUTION.width;\n    var height = playlist.attributes && playlist.attributes.RESOLUTION && playlist.attributes.RESOLUTION.height;\n    bandwidth = playlist.attributes && playlist.attributes.BANDWIDTH;\n    bandwidth = bandwidth || window$1.Number.MAX_VALUE;\n    return {\n      bandwidth: bandwidth,\n      width: width,\n      height: height,\n      playlist: playlist\n    };\n  });\n  stableSort(sortedPlaylistReps, function (left, right) {\n    return left.bandwidth - right.bandwidth;\n  }); // filter out any playlists that have been excluded due to\n  // incompatible configurations\n\n  sortedPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n    return !Playlist.isIncompatible(rep.playlist);\n  }); // filter out any playlists that have been disabled manually through the representations\n  // api or blacklisted temporarily due to playback errors.\n\n  var enabledPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n    return Playlist.isEnabled(rep.playlist);\n  });\n\n  if (!enabledPlaylistReps.length) {\n    // if there are no enabled playlists, then they have all been blacklisted or disabled\n    // by the user through the representations api. In this case, ignore blacklisting and\n    // fallback to what the user wants by using playlists the user has not disabled.\n    enabledPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n      return !Playlist.isDisabled(rep.playlist);\n    });\n  } // filter out any variant that has greater effective bitrate\n  // than the current estimated bandwidth\n\n\n  var bandwidthPlaylistReps = enabledPlaylistReps.filter(function (rep) {\n    return rep.bandwidth * Config.BANDWIDTH_VARIANCE < playerBandwidth;\n  });\n  var highestRemainingBandwidthRep = bandwidthPlaylistReps[bandwidthPlaylistReps.length - 1]; // get all of the renditions with the same (highest) bandwidth\n  // and then taking the very first element\n\n  var bandwidthBestRep = bandwidthPlaylistReps.filter(function (rep) {\n    return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n  })[0]; // if we're not going to limit renditions by player size, make an early decision.\n\n  if (limitRenditionByPlayerDimensions === false) {\n    var _chosenRep = bandwidthBestRep || enabledPlaylistReps[0] || sortedPlaylistReps[0];\n\n    if (_chosenRep && _chosenRep.playlist) {\n      var type = 'sortedPlaylistReps';\n\n      if (bandwidthBestRep) {\n        type = 'bandwidthBestRep';\n      }\n\n      if (enabledPlaylistReps[0]) {\n        type = 'enabledPlaylistReps';\n      }\n\n      logFn(\"choosing \" + representationToString(_chosenRep) + \" using \" + type + \" with options\", options);\n      return _chosenRep.playlist;\n    }\n\n    logFn('could not choose a playlist with options', options);\n    return null;\n  } // filter out playlists without resolution information\n\n\n  var haveResolution = bandwidthPlaylistReps.filter(function (rep) {\n    return rep.width && rep.height;\n  }); // sort variants by resolution\n\n  stableSort(haveResolution, function (left, right) {\n    return left.width - right.width;\n  }); // if we have the exact resolution as the player use it\n\n  var resolutionBestRepList = haveResolution.filter(function (rep) {\n    return rep.width === playerWidth && rep.height === playerHeight;\n  });\n  highestRemainingBandwidthRep = resolutionBestRepList[resolutionBestRepList.length - 1]; // ensure that we pick the highest bandwidth variant that have exact resolution\n\n  var resolutionBestRep = resolutionBestRepList.filter(function (rep) {\n    return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n  })[0];\n  var resolutionPlusOneList;\n  var resolutionPlusOneSmallest;\n  var resolutionPlusOneRep; // find the smallest variant that is larger than the player\n  // if there is no match of exact resolution\n\n  if (!resolutionBestRep) {\n    resolutionPlusOneList = haveResolution.filter(function (rep) {\n      return rep.width > playerWidth || rep.height > playerHeight;\n    }); // find all the variants have the same smallest resolution\n\n    resolutionPlusOneSmallest = resolutionPlusOneList.filter(function (rep) {\n      return rep.width === resolutionPlusOneList[0].width && rep.height === resolutionPlusOneList[0].height;\n    }); // ensure that we also pick the highest bandwidth variant that\n    // is just-larger-than the video player\n\n    highestRemainingBandwidthRep = resolutionPlusOneSmallest[resolutionPlusOneSmallest.length - 1];\n    resolutionPlusOneRep = resolutionPlusOneSmallest.filter(function (rep) {\n      return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n    })[0];\n  }\n\n  var leastPixelDiffRep; // If this selector proves to be better than others,\n  // resolutionPlusOneRep and resolutionBestRep and all\n  // the code involving them should be removed.\n\n  if (masterPlaylistController.experimentalLeastPixelDiffSelector) {\n    // find the variant that is closest to the player's pixel size\n    var leastPixelDiffList = haveResolution.map(function (rep) {\n      rep.pixelDiff = Math.abs(rep.width - playerWidth) + Math.abs(rep.height - playerHeight);\n      return rep;\n    }); // get the highest bandwidth, closest resolution playlist\n\n    stableSort(leastPixelDiffList, function (left, right) {\n      // sort by highest bandwidth if pixelDiff is the same\n      if (left.pixelDiff === right.pixelDiff) {\n        return right.bandwidth - left.bandwidth;\n      }\n\n      return left.pixelDiff - right.pixelDiff;\n    });\n    leastPixelDiffRep = leastPixelDiffList[0];\n  } // fallback chain of variants\n\n\n  var chosenRep = leastPixelDiffRep || resolutionPlusOneRep || resolutionBestRep || bandwidthBestRep || enabledPlaylistReps[0] || sortedPlaylistReps[0];\n\n  if (chosenRep && chosenRep.playlist) {\n    var _type = 'sortedPlaylistReps';\n\n    if (leastPixelDiffRep) {\n      _type = 'leastPixelDiffRep';\n    } else if (resolutionPlusOneRep) {\n      _type = 'resolutionPlusOneRep';\n    } else if (resolutionBestRep) {\n      _type = 'resolutionBestRep';\n    } else if (bandwidthBestRep) {\n      _type = 'bandwidthBestRep';\n    } else if (enabledPlaylistReps[0]) {\n      _type = 'enabledPlaylistReps';\n    }\n\n    logFn(\"choosing \" + representationToString(chosenRep) + \" using \" + _type + \" with options\", options);\n    return chosenRep.playlist;\n  }\n\n  logFn('could not choose a playlist with options', options);\n  return null;\n};\n/**\n * Chooses the appropriate media playlist based on the most recent\n * bandwidth estimate and the player size.\n *\n * Expects to be called within the context of an instance of VhsHandler\n *\n * @return {Playlist} the highest bitrate playlist less than the\n * currently detected bandwidth, accounting for some amount of\n * bandwidth variance\n */\n\n\nvar lastBandwidthSelector = function lastBandwidthSelector() {\n  var pixelRatio = this.useDevicePixelRatio ? window$1.devicePixelRatio || 1 : 1;\n  return simpleSelector(this.playlists.master, this.systemBandwidth, parseInt(safeGetComputedStyle(this.tech_.el(), 'width'), 10) * pixelRatio, parseInt(safeGetComputedStyle(this.tech_.el(), 'height'), 10) * pixelRatio, this.limitRenditionByPlayerDimensions, this.masterPlaylistController_);\n};\n/**\n * Chooses the appropriate media playlist based on an\n * exponential-weighted moving average of the bandwidth after\n * filtering for player size.\n *\n * Expects to be called within the context of an instance of VhsHandler\n *\n * @param {number} decay - a number between 0 and 1. Higher values of\n * this parameter will cause previous bandwidth estimates to lose\n * significance more quickly.\n * @return {Function} a function which can be invoked to create a new\n * playlist selector function.\n * @see https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average\n */\n\n\nvar movingAverageBandwidthSelector = function movingAverageBandwidthSelector(decay) {\n  var average = -1;\n  var lastSystemBandwidth = -1;\n\n  if (decay < 0 || decay > 1) {\n    throw new Error('Moving average bandwidth decay must be between 0 and 1.');\n  }\n\n  return function () {\n    var pixelRatio = this.useDevicePixelRatio ? window$1.devicePixelRatio || 1 : 1;\n\n    if (average < 0) {\n      average = this.systemBandwidth;\n      lastSystemBandwidth = this.systemBandwidth;\n    } // stop the average value from decaying for every 250ms\n    // when the systemBandwidth is constant\n    // and\n    // stop average from setting to a very low value when the\n    // systemBandwidth becomes 0 in case of chunk cancellation\n\n\n    if (this.systemBandwidth > 0 && this.systemBandwidth !== lastSystemBandwidth) {\n      average = decay * this.systemBandwidth + (1 - decay) * average;\n      lastSystemBandwidth = this.systemBandwidth;\n    }\n\n    return simpleSelector(this.playlists.master, average, parseInt(safeGetComputedStyle(this.tech_.el(), 'width'), 10) * pixelRatio, parseInt(safeGetComputedStyle(this.tech_.el(), 'height'), 10) * pixelRatio, this.limitRenditionByPlayerDimensions, this.masterPlaylistController_);\n  };\n};\n/**\n * Chooses the appropriate media playlist based on the potential to rebuffer\n *\n * @param {Object} settings\n *        Object of information required to use this selector\n * @param {Object} settings.master\n *        Object representation of the master manifest\n * @param {number} settings.currentTime\n *        The current time of the player\n * @param {number} settings.bandwidth\n *        Current measured bandwidth\n * @param {number} settings.duration\n *        Duration of the media\n * @param {number} settings.segmentDuration\n *        Segment duration to be used in round trip time calculations\n * @param {number} settings.timeUntilRebuffer\n *        Time left in seconds until the player has to rebuffer\n * @param {number} settings.currentTimeline\n *        The current timeline segments are being loaded from\n * @param {SyncController} settings.syncController\n *        SyncController for determining if we have a sync point for a given playlist\n * @return {Object|null}\n *         {Object} return.playlist\n *         The highest bandwidth playlist with the least amount of rebuffering\n *         {Number} return.rebufferingImpact\n *         The amount of time in seconds switching to this playlist will rebuffer. A\n *         negative value means that switching will cause zero rebuffering.\n */\n\n\nvar minRebufferMaxBandwidthSelector = function minRebufferMaxBandwidthSelector(settings) {\n  var master = settings.master,\n      currentTime = settings.currentTime,\n      bandwidth = settings.bandwidth,\n      duration = settings.duration,\n      segmentDuration = settings.segmentDuration,\n      timeUntilRebuffer = settings.timeUntilRebuffer,\n      currentTimeline = settings.currentTimeline,\n      syncController = settings.syncController; // filter out any playlists that have been excluded due to\n  // incompatible configurations\n\n  var compatiblePlaylists = master.playlists.filter(function (playlist) {\n    return !Playlist.isIncompatible(playlist);\n  }); // filter out any playlists that have been disabled manually through the representations\n  // api or blacklisted temporarily due to playback errors.\n\n  var enabledPlaylists = compatiblePlaylists.filter(Playlist.isEnabled);\n\n  if (!enabledPlaylists.length) {\n    // if there are no enabled playlists, then they have all been blacklisted or disabled\n    // by the user through the representations api. In this case, ignore blacklisting and\n    // fallback to what the user wants by using playlists the user has not disabled.\n    enabledPlaylists = compatiblePlaylists.filter(function (playlist) {\n      return !Playlist.isDisabled(playlist);\n    });\n  }\n\n  var bandwidthPlaylists = enabledPlaylists.filter(Playlist.hasAttribute.bind(null, 'BANDWIDTH'));\n  var rebufferingEstimates = bandwidthPlaylists.map(function (playlist) {\n    var syncPoint = syncController.getSyncPoint(playlist, duration, currentTimeline, currentTime); // If there is no sync point for this playlist, switching to it will require a\n    // sync request first. This will double the request time\n\n    var numRequests = syncPoint ? 1 : 2;\n    var requestTimeEstimate = Playlist.estimateSegmentRequestTime(segmentDuration, bandwidth, playlist);\n    var rebufferingImpact = requestTimeEstimate * numRequests - timeUntilRebuffer;\n    return {\n      playlist: playlist,\n      rebufferingImpact: rebufferingImpact\n    };\n  });\n  var noRebufferingPlaylists = rebufferingEstimates.filter(function (estimate) {\n    return estimate.rebufferingImpact <= 0;\n  }); // Sort by bandwidth DESC\n\n  stableSort(noRebufferingPlaylists, function (a, b) {\n    return comparePlaylistBandwidth(b.playlist, a.playlist);\n  });\n\n  if (noRebufferingPlaylists.length) {\n    return noRebufferingPlaylists[0];\n  }\n\n  stableSort(rebufferingEstimates, function (a, b) {\n    return a.rebufferingImpact - b.rebufferingImpact;\n  });\n  return rebufferingEstimates[0] || null;\n};\n/**\n * Chooses the appropriate media playlist, which in this case is the lowest bitrate\n * one with video.  If no renditions with video exist, return the lowest audio rendition.\n *\n * Expects to be called within the context of an instance of VhsHandler\n *\n * @return {Object|null}\n *         {Object} return.playlist\n *         The lowest bitrate playlist that contains a video codec.  If no such rendition\n *         exists pick the lowest audio rendition.\n */\n\n\nvar lowestBitrateCompatibleVariantSelector = function lowestBitrateCompatibleVariantSelector() {\n  var _this = this; // filter out any playlists that have been excluded due to\n  // incompatible configurations or playback errors\n\n\n  var playlists = this.playlists.master.playlists.filter(Playlist.isEnabled); // Sort ascending by bitrate\n\n  stableSort(playlists, function (a, b) {\n    return comparePlaylistBandwidth(a, b);\n  }); // Parse and assume that playlists with no video codec have no video\n  // (this is not necessarily true, although it is generally true).\n  //\n  // If an entire manifest has no valid videos everything will get filtered\n  // out.\n\n  var playlistsWithVideo = playlists.filter(function (playlist) {\n    return !!codecsForPlaylist(_this.playlists.master, playlist).video;\n  });\n  return playlistsWithVideo[0] || null;\n};\n/**\n * Combine all segments into a single Uint8Array\n *\n * @param {Object} segmentObj\n * @return {Uint8Array} concatenated bytes\n * @private\n */\n\n\nvar concatSegments = function concatSegments(segmentObj) {\n  var offset = 0;\n  var tempBuffer;\n\n  if (segmentObj.bytes) {\n    tempBuffer = new Uint8Array(segmentObj.bytes); // combine the individual segments into one large typed-array\n\n    segmentObj.segments.forEach(function (segment) {\n      tempBuffer.set(segment, offset);\n      offset += segment.byteLength;\n    });\n  }\n\n  return tempBuffer;\n};\n/**\n * @file text-tracks.js\n */\n\n/**\n * Create captions text tracks on video.js if they do not exist\n *\n * @param {Object} inbandTextTracks a reference to current inbandTextTracks\n * @param {Object} tech the video.js tech\n * @param {Object} captionStream the caption stream to create\n * @private\n */\n\n\nvar createCaptionsTrackIfNotExists = function createCaptionsTrackIfNotExists(inbandTextTracks, tech, captionStream) {\n  if (!inbandTextTracks[captionStream]) {\n    tech.trigger({\n      type: 'usage',\n      name: 'vhs-608'\n    });\n    tech.trigger({\n      type: 'usage',\n      name: 'hls-608'\n    });\n    var instreamId = captionStream; // we need to translate SERVICEn for 708 to how mux.js currently labels them\n\n    if (/^cc708_/.test(captionStream)) {\n      instreamId = 'SERVICE' + captionStream.split('_')[1];\n    }\n\n    var track = tech.textTracks().getTrackById(instreamId);\n\n    if (track) {\n      // Resuse an existing track with a CC# id because this was\n      // very likely created by videojs-contrib-hls from information\n      // in the m3u8 for us to use\n      inbandTextTracks[captionStream] = track;\n    } else {\n      // This section gets called when we have caption services that aren't specified in the manifest.\n      // Manifest level caption services are handled in media-groups.js under CLOSED-CAPTIONS.\n      var captionServices = tech.options_.vhs && tech.options_.vhs.captionServices || {};\n      var label = captionStream;\n      var language = captionStream;\n      var def = false;\n      var captionService = captionServices[instreamId];\n\n      if (captionService) {\n        label = captionService.label;\n        language = captionService.language;\n        def = captionService[\"default\"];\n      } // Otherwise, create a track with the default `CC#` label and\n      // without a language\n\n\n      inbandTextTracks[captionStream] = tech.addRemoteTextTrack({\n        kind: 'captions',\n        id: instreamId,\n        // TODO: investigate why this doesn't seem to turn the caption on by default\n        \"default\": def,\n        label: label,\n        language: language\n      }, false).track;\n    }\n  }\n};\n/**\n * Add caption text track data to a source handler given an array of captions\n *\n * @param {Object}\n *   @param {Object} inbandTextTracks the inband text tracks\n *   @param {number} timestampOffset the timestamp offset of the source buffer\n *   @param {Array} captionArray an array of caption data\n * @private\n */\n\n\nvar addCaptionData = function addCaptionData(_ref) {\n  var inbandTextTracks = _ref.inbandTextTracks,\n      captionArray = _ref.captionArray,\n      timestampOffset = _ref.timestampOffset;\n\n  if (!captionArray) {\n    return;\n  }\n\n  var Cue = window$1.WebKitDataCue || window$1.VTTCue;\n  captionArray.forEach(function (caption) {\n    var track = caption.stream;\n    inbandTextTracks[track].addCue(new Cue(caption.startTime + timestampOffset, caption.endTime + timestampOffset, caption.text));\n  });\n};\n/**\n * Define properties on a cue for backwards compatability,\n * but warn the user that the way that they are using it\n * is depricated and will be removed at a later date.\n *\n * @param {Cue} cue the cue to add the properties on\n * @private\n */\n\n\nvar deprecateOldCue = function deprecateOldCue(cue) {\n  Object.defineProperties(cue.frame, {\n    id: {\n      get: function get() {\n        videojs.log.warn('cue.frame.id is deprecated. Use cue.value.key instead.');\n        return cue.value.key;\n      }\n    },\n    value: {\n      get: function get() {\n        videojs.log.warn('cue.frame.value is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    },\n    privateData: {\n      get: function get() {\n        videojs.log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    }\n  });\n};\n/**\n * Add metadata text track data to a source handler given an array of metadata\n *\n * @param {Object}\n *   @param {Object} inbandTextTracks the inband text tracks\n *   @param {Array} metadataArray an array of meta data\n *   @param {number} timestampOffset the timestamp offset of the source buffer\n *   @param {number} videoDuration the duration of the video\n * @private\n */\n\n\nvar addMetadata = function addMetadata(_ref2) {\n  var inbandTextTracks = _ref2.inbandTextTracks,\n      metadataArray = _ref2.metadataArray,\n      timestampOffset = _ref2.timestampOffset,\n      videoDuration = _ref2.videoDuration;\n\n  if (!metadataArray) {\n    return;\n  }\n\n  var Cue = window$1.WebKitDataCue || window$1.VTTCue;\n  var metadataTrack = inbandTextTracks.metadataTrack_;\n\n  if (!metadataTrack) {\n    return;\n  }\n\n  metadataArray.forEach(function (metadata) {\n    var time = metadata.cueTime + timestampOffset; // if time isn't a finite number between 0 and Infinity, like NaN,\n    // ignore this bit of metadata.\n    // This likely occurs when you have an non-timed ID3 tag like TIT2,\n    // which is the \"Title/Songname/Content description\" frame\n\n    if (typeof time !== 'number' || window$1.isNaN(time) || time < 0 || !(time < Infinity)) {\n      return;\n    }\n\n    metadata.frames.forEach(function (frame) {\n      var cue = new Cue(time, time, frame.value || frame.url || frame.data || '');\n      cue.frame = frame;\n      cue.value = frame;\n      deprecateOldCue(cue);\n      metadataTrack.addCue(cue);\n    });\n  });\n\n  if (!metadataTrack.cues || !metadataTrack.cues.length) {\n    return;\n  } // Updating the metadeta cues so that\n  // the endTime of each cue is the startTime of the next cue\n  // the endTime of last cue is the duration of the video\n\n\n  var cues = metadataTrack.cues;\n  var cuesArray = []; // Create a copy of the TextTrackCueList...\n  // ...disregarding cues with a falsey value\n\n  for (var i = 0; i < cues.length; i++) {\n    if (cues[i]) {\n      cuesArray.push(cues[i]);\n    }\n  } // Group cues by their startTime value\n\n\n  var cuesGroupedByStartTime = cuesArray.reduce(function (obj, cue) {\n    var timeSlot = obj[cue.startTime] || [];\n    timeSlot.push(cue);\n    obj[cue.startTime] = timeSlot;\n    return obj;\n  }, {}); // Sort startTimes by ascending order\n\n  var sortedStartTimes = Object.keys(cuesGroupedByStartTime).sort(function (a, b) {\n    return Number(a) - Number(b);\n  }); // Map each cue group's endTime to the next group's startTime\n\n  sortedStartTimes.forEach(function (startTime, idx) {\n    var cueGroup = cuesGroupedByStartTime[startTime];\n    var nextTime = Number(sortedStartTimes[idx + 1]) || videoDuration; // Map each cue's endTime the next group's startTime\n\n    cueGroup.forEach(function (cue) {\n      cue.endTime = nextTime;\n    });\n  });\n};\n/**\n * Create metadata text track on video.js if it does not exist\n *\n * @param {Object} inbandTextTracks a reference to current inbandTextTracks\n * @param {string} dispatchType the inband metadata track dispatch type\n * @param {Object} tech the video.js tech\n * @private\n */\n\n\nvar createMetadataTrackIfNotExists = function createMetadataTrackIfNotExists(inbandTextTracks, dispatchType, tech) {\n  if (inbandTextTracks.metadataTrack_) {\n    return;\n  }\n\n  inbandTextTracks.metadataTrack_ = tech.addRemoteTextTrack({\n    kind: 'metadata',\n    label: 'Timed Metadata'\n  }, false).track;\n  inbandTextTracks.metadataTrack_.inBandMetadataTrackDispatchType = dispatchType;\n};\n/**\n * Remove cues from a track on video.js.\n *\n * @param {Double} start start of where we should remove the cue\n * @param {Double} end end of where the we should remove the cue\n * @param {Object} track the text track to remove the cues from\n * @private\n */\n\n\nvar removeCuesFromTrack = function removeCuesFromTrack(start, end, track) {\n  var i;\n  var cue;\n\n  if (!track) {\n    return;\n  }\n\n  if (!track.cues) {\n    return;\n  }\n\n  i = track.cues.length;\n\n  while (i--) {\n    cue = track.cues[i]; // Remove any cue within the provided start and end time\n\n    if (cue.startTime >= start && cue.endTime <= end) {\n      track.removeCue(cue);\n    }\n  }\n};\n/**\n * Remove duplicate cues from a track on video.js (a cue is considered a\n * duplicate if it has the same time interval and text as another)\n *\n * @param {Object} track the text track to remove the duplicate cues from\n * @private\n */\n\n\nvar removeDuplicateCuesFromTrack = function removeDuplicateCuesFromTrack(track) {\n  var cues = track.cues;\n\n  if (!cues) {\n    return;\n  }\n\n  for (var i = 0; i < cues.length; i++) {\n    var duplicates = [];\n    var occurrences = 0;\n\n    for (var j = 0; j < cues.length; j++) {\n      if (cues[i].startTime === cues[j].startTime && cues[i].endTime === cues[j].endTime && cues[i].text === cues[j].text) {\n        occurrences++;\n\n        if (occurrences > 1) {\n          duplicates.push(cues[j]);\n        }\n      }\n    }\n\n    if (duplicates.length) {\n      duplicates.forEach(function (dupe) {\n        return track.removeCue(dupe);\n      });\n    }\n  }\n};\n/**\n * Returns a list of gops in the buffer that have a pts value of 3 seconds or more in\n * front of current time.\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {number} currentTime\n *        The current time\n * @param {Double} mapping\n *        Offset to map display time to stream presentation time\n * @return {Array}\n *         List of gops considered safe to append over\n */\n\n\nvar gopsSafeToAlignWith = function gopsSafeToAlignWith(buffer, currentTime, mapping) {\n  if (typeof currentTime === 'undefined' || currentTime === null || !buffer.length) {\n    return [];\n  } // pts value for current time + 3 seconds to give a bit more wiggle room\n\n\n  var currentTimePts = Math.ceil((currentTime - mapping + 3) * ONE_SECOND_IN_TS);\n  var i;\n\n  for (i = 0; i < buffer.length; i++) {\n    if (buffer[i].pts > currentTimePts) {\n      break;\n    }\n  }\n\n  return buffer.slice(i);\n};\n/**\n * Appends gop information (timing and byteLength) received by the transmuxer for the\n * gops appended in the last call to appendBuffer\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {Array} gops\n *        List of new gop information\n * @param {boolean} replace\n *        If true, replace the buffer with the new gop information. If false, append the\n *        new gop information to the buffer in the right location of time.\n * @return {Array}\n *         Updated list of gop information\n */\n\n\nvar updateGopBuffer = function updateGopBuffer(buffer, gops, replace) {\n  if (!gops.length) {\n    return buffer;\n  }\n\n  if (replace) {\n    // If we are in safe append mode, then completely overwrite the gop buffer\n    // with the most recent appeneded data. This will make sure that when appending\n    // future segments, we only try to align with gops that are both ahead of current\n    // time and in the last segment appended.\n    return gops.slice();\n  }\n\n  var start = gops[0].pts;\n  var i = 0;\n\n  for (i; i < buffer.length; i++) {\n    if (buffer[i].pts >= start) {\n      break;\n    }\n  }\n\n  return buffer.slice(0, i).concat(gops);\n};\n/**\n * Removes gop information in buffer that overlaps with provided start and end\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {Double} start\n *        position to start the remove at\n * @param {Double} end\n *        position to end the remove at\n * @param {Double} mapping\n *        Offset to map display time to stream presentation time\n */\n\n\nvar removeGopBuffer = function removeGopBuffer(buffer, start, end, mapping) {\n  var startPts = Math.ceil((start - mapping) * ONE_SECOND_IN_TS);\n  var endPts = Math.ceil((end - mapping) * ONE_SECOND_IN_TS);\n  var updatedBuffer = buffer.slice();\n  var i = buffer.length;\n\n  while (i--) {\n    if (buffer[i].pts <= endPts) {\n      break;\n    }\n  }\n\n  if (i === -1) {\n    // no removal because end of remove range is before start of buffer\n    return updatedBuffer;\n  }\n\n  var j = i + 1;\n\n  while (j--) {\n    if (buffer[j].pts <= startPts) {\n      break;\n    }\n  } // clamp remove range start to 0 index\n\n\n  j = Math.max(j, 0);\n  updatedBuffer.splice(j, i - j + 1);\n  return updatedBuffer;\n};\n\nvar shallowEqual = function shallowEqual(a, b) {\n  // if both are undefined\n  // or one or the other is undefined\n  // they are not equal\n  if (!a && !b || !a && b || a && !b) {\n    return false;\n  } // they are the same object and thus, equal\n\n\n  if (a === b) {\n    return true;\n  } // sort keys so we can make sure they have\n  // all the same keys later.\n\n\n  var akeys = Object.keys(a).sort();\n  var bkeys = Object.keys(b).sort(); // different number of keys, not equal\n\n  if (akeys.length !== bkeys.length) {\n    return false;\n  }\n\n  for (var i = 0; i < akeys.length; i++) {\n    var key = akeys[i]; // different sorted keys, not equal\n\n    if (key !== bkeys[i]) {\n      return false;\n    } // different values, not equal\n\n\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}; // https://www.w3.org/TR/WebIDL-1/#quotaexceedederror\n\n\nvar QUOTA_EXCEEDED_ERR = 22;\n/**\n * The segment loader has no recourse except to fetch a segment in the\n * current playlist and use the internal timestamps in that segment to\n * generate a syncPoint. This function returns a good candidate index\n * for that process.\n *\n * @param {Array} segments - the segments array from a playlist.\n * @return {number} An index of a segment from the playlist to load\n */\n\nvar getSyncSegmentCandidate = function getSyncSegmentCandidate(currentTimeline, segments, targetTime) {\n  segments = segments || [];\n  var timelineSegments = [];\n  var time = 0;\n\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n\n    if (currentTimeline === segment.timeline) {\n      timelineSegments.push(i);\n      time += segment.duration;\n\n      if (time > targetTime) {\n        return i;\n      }\n    }\n  }\n\n  if (timelineSegments.length === 0) {\n    return 0;\n  } // default to the last timeline segment\n\n\n  return timelineSegments[timelineSegments.length - 1];\n}; // In the event of a quota exceeded error, keep at least one second of back buffer. This\n// number was arbitrarily chosen and may be updated in the future, but seemed reasonable\n// as a start to prevent any potential issues with removing content too close to the\n// playhead.\n\n\nvar MIN_BACK_BUFFER = 1; // in ms\n\nvar CHECK_BUFFER_DELAY = 500;\n\nvar finite = function finite(num) {\n  return typeof num === 'number' && isFinite(num);\n}; // With most content hovering around 30fps, if a segment has a duration less than a half\n// frame at 30fps or one frame at 60fps, the bandwidth and throughput calculations will\n// not accurately reflect the rest of the content.\n\n\nvar MIN_SEGMENT_DURATION_TO_SAVE_STATS = 1 / 60;\n\nvar illegalMediaSwitch = function illegalMediaSwitch(loaderType, startingMedia, trackInfo) {\n  // Although these checks should most likely cover non 'main' types, for now it narrows\n  // the scope of our checks.\n  if (loaderType !== 'main' || !startingMedia || !trackInfo) {\n    return null;\n  }\n\n  if (!trackInfo.hasAudio && !trackInfo.hasVideo) {\n    return 'Neither audio nor video found in segment.';\n  }\n\n  if (startingMedia.hasVideo && !trackInfo.hasVideo) {\n    return 'Only audio found in segment when we expected video.' + ' We can\\'t switch to audio only from a stream that had video.' + ' To get rid of this message, please add codec information to the manifest.';\n  }\n\n  if (!startingMedia.hasVideo && trackInfo.hasVideo) {\n    return 'Video found in segment when we expected only audio.' + ' We can\\'t switch to a stream with video from an audio only stream.' + ' To get rid of this message, please add codec information to the manifest.';\n  }\n\n  return null;\n};\n/**\n * Calculates a time value that is safe to remove from the back buffer without interrupting\n * playback.\n *\n * @param {TimeRange} seekable\n *        The current seekable range\n * @param {number} currentTime\n *        The current time of the player\n * @param {number} targetDuration\n *        The target duration of the current playlist\n * @return {number}\n *         Time that is safe to remove from the back buffer without interrupting playback\n */\n\n\nvar safeBackBufferTrimTime = function safeBackBufferTrimTime(seekable, currentTime, targetDuration) {\n  // 30 seconds before the playhead provides a safe default for trimming.\n  //\n  // Choosing a reasonable default is particularly important for high bitrate content and\n  // VOD videos/live streams with large windows, as the buffer may end up overfilled and\n  // throw an APPEND_BUFFER_ERR.\n  var trimTime = currentTime - Config.BACK_BUFFER_LENGTH;\n\n  if (seekable.length) {\n    // Some live playlists may have a shorter window of content than the full allowed back\n    // buffer. For these playlists, don't save content that's no longer within the window.\n    trimTime = Math.max(trimTime, seekable.start(0));\n  } // Don't remove within target duration of the current time to avoid the possibility of\n  // removing the GOP currently being played, as removing it can cause playback stalls.\n\n\n  var maxTrimTime = currentTime - targetDuration;\n  return Math.min(maxTrimTime, trimTime);\n};\n\nvar segmentInfoString = function segmentInfoString(segmentInfo) {\n  var startOfSegment = segmentInfo.startOfSegment,\n      duration = segmentInfo.duration,\n      segment = segmentInfo.segment,\n      part = segmentInfo.part,\n      _segmentInfo$playlist = segmentInfo.playlist,\n      seq = _segmentInfo$playlist.mediaSequence,\n      id = _segmentInfo$playlist.id,\n      _segmentInfo$playlist2 = _segmentInfo$playlist.segments,\n      segments = _segmentInfo$playlist2 === void 0 ? [] : _segmentInfo$playlist2,\n      index = segmentInfo.mediaIndex,\n      partIndex = segmentInfo.partIndex,\n      timeline = segmentInfo.timeline;\n  var segmentLen = segments.length - 1;\n  var selection = 'mediaIndex/partIndex increment';\n\n  if (segmentInfo.getMediaInfoForTime) {\n    selection = \"getMediaInfoForTime (\" + segmentInfo.getMediaInfoForTime + \")\";\n  } else if (segmentInfo.isSyncRequest) {\n    selection = 'getSyncSegmentCandidate (isSyncRequest)';\n  }\n\n  if (segmentInfo.independent) {\n    selection += \" with independent \" + segmentInfo.independent;\n  }\n\n  var hasPartIndex = typeof partIndex === 'number';\n  var name = segmentInfo.segment.uri ? 'segment' : 'pre-segment';\n  var zeroBasedPartCount = hasPartIndex ? getKnownPartCount({\n    preloadSegment: segment\n  }) - 1 : 0;\n  return name + \" [\" + (seq + index) + \"/\" + (seq + segmentLen) + \"]\" + (hasPartIndex ? \" part [\" + partIndex + \"/\" + zeroBasedPartCount + \"]\" : '') + (\" segment start/end [\" + segment.start + \" => \" + segment.end + \"]\") + (hasPartIndex ? \" part start/end [\" + part.start + \" => \" + part.end + \"]\" : '') + (\" startOfSegment [\" + startOfSegment + \"]\") + (\" duration [\" + duration + \"]\") + (\" timeline [\" + timeline + \"]\") + (\" selected by [\" + selection + \"]\") + (\" playlist [\" + id + \"]\");\n};\n\nvar timingInfoPropertyForMedia = function timingInfoPropertyForMedia(mediaType) {\n  return mediaType + \"TimingInfo\";\n};\n/**\n * Returns the timestamp offset to use for the segment.\n *\n * @param {number} segmentTimeline\n *        The timeline of the segment\n * @param {number} currentTimeline\n *        The timeline currently being followed by the loader\n * @param {number} startOfSegment\n *        The estimated segment start\n * @param {TimeRange[]} buffered\n *        The loader's buffer\n * @param {boolean} overrideCheck\n *        If true, no checks are made to see if the timestamp offset value should be set,\n *        but sets it directly to a value.\n *\n * @return {number|null}\n *         Either a number representing a new timestamp offset, or null if the segment is\n *         part of the same timeline\n */\n\n\nvar timestampOffsetForSegment = function timestampOffsetForSegment(_ref) {\n  var segmentTimeline = _ref.segmentTimeline,\n      currentTimeline = _ref.currentTimeline,\n      startOfSegment = _ref.startOfSegment,\n      buffered = _ref.buffered,\n      overrideCheck = _ref.overrideCheck; // Check to see if we are crossing a discontinuity to see if we need to set the\n  // timestamp offset on the transmuxer and source buffer.\n  //\n  // Previously, we changed the timestampOffset if the start of this segment was less than\n  // the currently set timestampOffset, but this isn't desirable as it can produce bad\n  // behavior, especially around long running live streams.\n\n  if (!overrideCheck && segmentTimeline === currentTimeline) {\n    return null;\n  } // When changing renditions, it's possible to request a segment on an older timeline. For\n  // instance, given two renditions with the following:\n  //\n  // #EXTINF:10\n  // segment1\n  // #EXT-X-DISCONTINUITY\n  // #EXTINF:10\n  // segment2\n  // #EXTINF:10\n  // segment3\n  //\n  // And the current player state:\n  //\n  // current time: 8\n  // buffer: 0 => 20\n  //\n  // The next segment on the current rendition would be segment3, filling the buffer from\n  // 20s onwards. However, if a rendition switch happens after segment2 was requested,\n  // then the next segment to be requested will be segment1 from the new rendition in\n  // order to fill time 8 and onwards. Using the buffered end would result in repeated\n  // content (since it would position segment1 of the new rendition starting at 20s). This\n  // case can be identified when the new segment's timeline is a prior value. Instead of\n  // using the buffered end, the startOfSegment can be used, which, hopefully, will be\n  // more accurate to the actual start time of the segment.\n\n\n  if (segmentTimeline < currentTimeline) {\n    return startOfSegment;\n  } // segmentInfo.startOfSegment used to be used as the timestamp offset, however, that\n  // value uses the end of the last segment if it is available. While this value\n  // should often be correct, it's better to rely on the buffered end, as the new\n  // content post discontinuity should line up with the buffered end as if it were\n  // time 0 for the new content.\n\n\n  return buffered.length ? buffered.end(buffered.length - 1) : startOfSegment;\n};\n/**\n * Returns whether or not the loader should wait for a timeline change from the timeline\n * change controller before processing the segment.\n *\n * Primary timing in VHS goes by video. This is different from most media players, as\n * audio is more often used as the primary timing source. For the foreseeable future, VHS\n * will continue to use video as the primary timing source, due to the current logic and\n * expectations built around it.\n\n * Since the timing follows video, in order to maintain sync, the video loader is\n * responsible for setting both audio and video source buffer timestamp offsets.\n *\n * Setting different values for audio and video source buffers could lead to\n * desyncing. The following examples demonstrate some of the situations where this\n * distinction is important. Note that all of these cases involve demuxed content. When\n * content is muxed, the audio and video are packaged together, therefore syncing\n * separate media playlists is not an issue.\n *\n * CASE 1: Audio prepares to load a new timeline before video:\n *\n * Timeline:       0                 1\n * Audio Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Audio Loader:                     ^\n * Video Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Video Loader              ^\n *\n * In the above example, the audio loader is preparing to load the 6th segment, the first\n * after a discontinuity, while the video loader is still loading the 5th segment, before\n * the discontinuity.\n *\n * If the audio loader goes ahead and loads and appends the 6th segment before the video\n * loader crosses the discontinuity, then when appended, the 6th audio segment will use\n * the timestamp offset from timeline 0. This will likely lead to desyncing. In addition,\n * the audio loader must provide the audioAppendStart value to trim the content in the\n * transmuxer, and that value relies on the audio timestamp offset. Since the audio\n * timestamp offset is set by the video (main) loader, the audio loader shouldn't load the\n * segment until that value is provided.\n *\n * CASE 2: Video prepares to load a new timeline before audio:\n *\n * Timeline:       0                 1\n * Audio Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Audio Loader:             ^\n * Video Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Video Loader                      ^\n *\n * In the above example, the video loader is preparing to load the 6th segment, the first\n * after a discontinuity, while the audio loader is still loading the 5th segment, before\n * the discontinuity.\n *\n * If the video loader goes ahead and loads and appends the 6th segment, then once the\n * segment is loaded and processed, both the video and audio timestamp offsets will be\n * set, since video is used as the primary timing source. This is to ensure content lines\n * up appropriately, as any modifications to the video timing are reflected by audio when\n * the video loader sets the audio and video timestamp offsets to the same value. However,\n * setting the timestamp offset for audio before audio has had a chance to change\n * timelines will likely lead to desyncing, as the audio loader will append segment 5 with\n * a timestamp intended to apply to segments from timeline 1 rather than timeline 0.\n *\n * CASE 3: When seeking, audio prepares to load a new timeline before video\n *\n * Timeline:       0                 1\n * Audio Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Audio Loader:           ^\n * Video Segments: 0 1 2 3 4 5 DISCO 6 7 8 9\n * Video Loader            ^\n *\n * In the above example, both audio and video loaders are loading segments from timeline\n * 0, but imagine that the seek originated from timeline 1.\n *\n * When seeking to a new timeline, the timestamp offset will be set based on the expected\n * segment start of the loaded video segment. In order to maintain sync, the audio loader\n * must wait for the video loader to load its segment and update both the audio and video\n * timestamp offsets before it may load and append its own segment. This is the case\n * whether the seek results in a mismatched segment request (e.g., the audio loader\n * chooses to load segment 3 and the video loader chooses to load segment 4) or the\n * loaders choose to load the same segment index from each playlist, as the segments may\n * not be aligned perfectly, even for matching segment indexes.\n *\n * @param {Object} timelinechangeController\n * @param {number} currentTimeline\n *        The timeline currently being followed by the loader\n * @param {number} segmentTimeline\n *        The timeline of the segment being loaded\n * @param {('main'|'audio')} loaderType\n *        The loader type\n * @param {boolean} audioDisabled\n *        Whether the audio is disabled for the loader. This should only be true when the\n *        loader may have muxed audio in its segment, but should not append it, e.g., for\n *        the main loader when an alternate audio playlist is active.\n *\n * @return {boolean}\n *         Whether the loader should wait for a timeline change from the timeline change\n *         controller before processing the segment\n */\n\n\nvar shouldWaitForTimelineChange = function shouldWaitForTimelineChange(_ref2) {\n  var timelineChangeController = _ref2.timelineChangeController,\n      currentTimeline = _ref2.currentTimeline,\n      segmentTimeline = _ref2.segmentTimeline,\n      loaderType = _ref2.loaderType,\n      audioDisabled = _ref2.audioDisabled;\n\n  if (currentTimeline === segmentTimeline) {\n    return false;\n  }\n\n  if (loaderType === 'audio') {\n    var lastMainTimelineChange = timelineChangeController.lastTimelineChange({\n      type: 'main'\n    }); // Audio loader should wait if:\n    //\n    // * main hasn't had a timeline change yet (thus has not loaded its first segment)\n    // * main hasn't yet changed to the timeline audio is looking to load\n\n    return !lastMainTimelineChange || lastMainTimelineChange.to !== segmentTimeline;\n  } // The main loader only needs to wait for timeline changes if there's demuxed audio.\n  // Otherwise, there's nothing to wait for, since audio would be muxed into the main\n  // loader's segments (or the content is audio/video only and handled by the main\n  // loader).\n\n\n  if (loaderType === 'main' && audioDisabled) {\n    var pendingAudioTimelineChange = timelineChangeController.pendingTimelineChange({\n      type: 'audio'\n    }); // Main loader should wait for the audio loader if audio is not pending a timeline\n    // change to the current timeline.\n    //\n    // Since the main loader is responsible for setting the timestamp offset for both\n    // audio and video, the main loader must wait for audio to be about to change to its\n    // timeline before setting the offset, otherwise, if audio is behind in loading,\n    // segments from the previous timeline would be adjusted by the new timestamp offset.\n    //\n    // This requirement means that video will not cross a timeline until the audio is\n    // about to cross to it, so that way audio and video will always cross the timeline\n    // together.\n    //\n    // In addition to normal timeline changes, these rules also apply to the start of a\n    // stream (going from a non-existent timeline, -1, to timeline 0). It's important\n    // that these rules apply to the first timeline change because if they did not, it's\n    // possible that the main loader will cross two timelines before the audio loader has\n    // crossed one. Logic may be implemented to handle the startup as a special case, but\n    // it's easier to simply treat all timeline changes the same.\n\n    if (pendingAudioTimelineChange && pendingAudioTimelineChange.to === segmentTimeline) {\n      return false;\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\nvar mediaDuration = function mediaDuration(timingInfos) {\n  var maxDuration = 0;\n  ['video', 'audio'].forEach(function (type) {\n    var typeTimingInfo = timingInfos[type + \"TimingInfo\"];\n\n    if (!typeTimingInfo) {\n      return;\n    }\n\n    var start = typeTimingInfo.start,\n        end = typeTimingInfo.end;\n    var duration;\n\n    if (typeof start === 'bigint' || typeof end === 'bigint') {\n      duration = window$1.BigInt(end) - window$1.BigInt(start);\n    } else if (typeof start === 'number' && typeof end === 'number') {\n      duration = end - start;\n    }\n\n    if (typeof duration !== 'undefined' && duration > maxDuration) {\n      maxDuration = duration;\n    }\n  }); // convert back to a number if it is lower than MAX_SAFE_INTEGER\n  // as we only need BigInt when we are above that.\n\n  if (typeof maxDuration === 'bigint' && maxDuration < Number.MAX_SAFE_INTEGER) {\n    maxDuration = Number(maxDuration);\n  }\n\n  return maxDuration;\n};\n\nvar segmentTooLong = function segmentTooLong(_ref3) {\n  var segmentDuration = _ref3.segmentDuration,\n      maxDuration = _ref3.maxDuration; // 0 duration segments are most likely due to metadata only segments or a lack of\n  // information.\n\n  if (!segmentDuration) {\n    return false;\n  } // For HLS:\n  //\n  // https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1\n  // The EXTINF duration of each Media Segment in the Playlist\n  // file, when rounded to the nearest integer, MUST be less than or equal\n  // to the target duration; longer segments can trigger playback stalls\n  // or other errors.\n  //\n  // For DASH, the mpd-parser uses the largest reported segment duration as the target\n  // duration. Although that reported duration is occasionally approximate (i.e., not\n  // exact), a strict check may report that a segment is too long more often in DASH.\n\n\n  return Math.round(segmentDuration) > maxDuration + TIME_FUDGE_FACTOR;\n};\n\nvar getTroublesomeSegmentDurationMessage = function getTroublesomeSegmentDurationMessage(segmentInfo, sourceType) {\n  // Right now we aren't following DASH's timing model exactly, so only perform\n  // this check for HLS content.\n  if (sourceType !== 'hls') {\n    return null;\n  }\n\n  var segmentDuration = mediaDuration({\n    audioTimingInfo: segmentInfo.audioTimingInfo,\n    videoTimingInfo: segmentInfo.videoTimingInfo\n  }); // Don't report if we lack information.\n  //\n  // If the segment has a duration of 0 it is either a lack of information or a\n  // metadata only segment and shouldn't be reported here.\n\n  if (!segmentDuration) {\n    return null;\n  }\n\n  var targetDuration = segmentInfo.playlist.targetDuration;\n  var isSegmentWayTooLong = segmentTooLong({\n    segmentDuration: segmentDuration,\n    maxDuration: targetDuration * 2\n  });\n  var isSegmentSlightlyTooLong = segmentTooLong({\n    segmentDuration: segmentDuration,\n    maxDuration: targetDuration\n  });\n  var segmentTooLongMessage = \"Segment with index \" + segmentInfo.mediaIndex + \" \" + (\"from playlist \" + segmentInfo.playlist.id + \" \") + (\"has a duration of \" + segmentDuration + \" \") + (\"when the reported duration is \" + segmentInfo.duration + \" \") + (\"and the target duration is \" + targetDuration + \". \") + 'For HLS content, a duration in excess of the target duration may result in ' + 'playback issues. See the HLS specification section on EXT-X-TARGETDURATION for ' + 'more details: ' + 'https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1';\n\n  if (isSegmentWayTooLong || isSegmentSlightlyTooLong) {\n    return {\n      severity: isSegmentWayTooLong ? 'warn' : 'info',\n      message: segmentTooLongMessage\n    };\n  }\n\n  return null;\n};\n/**\n * An object that manages segment loading and appending.\n *\n * @class SegmentLoader\n * @param {Object} options required and optional options\n * @extends videojs.EventTarget\n */\n\n\nvar SegmentLoader = /*#__PURE__*/function (_videojs$EventTarget) {\n  _inheritsLoose(SegmentLoader, _videojs$EventTarget);\n\n  function SegmentLoader(settings, options) {\n    var _this;\n\n    _this = _videojs$EventTarget.call(this) || this; // check pre-conditions\n\n    if (!settings) {\n      throw new TypeError('Initialization settings are required');\n    }\n\n    if (typeof settings.currentTime !== 'function') {\n      throw new TypeError('No currentTime getter specified');\n    }\n\n    if (!settings.mediaSource) {\n      throw new TypeError('No MediaSource specified');\n    } // public properties\n\n\n    _this.bandwidth = settings.bandwidth;\n    _this.throughput = {\n      rate: 0,\n      count: 0\n    };\n    _this.roundTrip = NaN;\n\n    _this.resetStats_();\n\n    _this.mediaIndex = null;\n    _this.partIndex = null; // private settings\n\n    _this.hasPlayed_ = settings.hasPlayed;\n    _this.currentTime_ = settings.currentTime;\n    _this.seekable_ = settings.seekable;\n    _this.seeking_ = settings.seeking;\n    _this.duration_ = settings.duration;\n    _this.mediaSource_ = settings.mediaSource;\n    _this.vhs_ = settings.vhs;\n    _this.loaderType_ = settings.loaderType;\n    _this.currentMediaInfo_ = void 0;\n    _this.startingMediaInfo_ = void 0;\n    _this.segmentMetadataTrack_ = settings.segmentMetadataTrack;\n    _this.goalBufferLength_ = settings.goalBufferLength;\n    _this.sourceType_ = settings.sourceType;\n    _this.sourceUpdater_ = settings.sourceUpdater;\n    _this.inbandTextTracks_ = settings.inbandTextTracks;\n    _this.state_ = 'INIT';\n    _this.timelineChangeController_ = settings.timelineChangeController;\n    _this.shouldSaveSegmentTimingInfo_ = true;\n    _this.parse708captions_ = settings.parse708captions;\n    _this.captionServices_ = settings.captionServices;\n    _this.experimentalExactManifestTimings = settings.experimentalExactManifestTimings; // private instance variables\n\n    _this.checkBufferTimeout_ = null;\n    _this.error_ = void 0;\n    _this.currentTimeline_ = -1;\n    _this.pendingSegment_ = null;\n    _this.xhrOptions_ = null;\n    _this.pendingSegments_ = [];\n    _this.audioDisabled_ = false;\n    _this.isPendingTimestampOffset_ = false; // TODO possibly move gopBuffer and timeMapping info to a separate controller\n\n    _this.gopBuffer_ = [];\n    _this.timeMapping_ = 0;\n    _this.safeAppend_ = videojs.browser.IE_VERSION >= 11;\n    _this.appendInitSegment_ = {\n      audio: true,\n      video: true\n    };\n    _this.playlistOfLastInitSegment_ = {\n      audio: null,\n      video: null\n    };\n    _this.callQueue_ = []; // If the segment loader prepares to load a segment, but does not have enough\n    // information yet to start the loading process (e.g., if the audio loader wants to\n    // load a segment from the next timeline but the main loader hasn't yet crossed that\n    // timeline), then the load call will be added to the queue until it is ready to be\n    // processed.\n\n    _this.loadQueue_ = [];\n    _this.metadataQueue_ = {\n      id3: [],\n      caption: []\n    };\n    _this.waitingOnRemove_ = false;\n    _this.quotaExceededErrorRetryTimeout_ = null; // Fragmented mp4 playback\n\n    _this.activeInitSegmentId_ = null;\n    _this.initSegments_ = {}; // HLSe playback\n\n    _this.cacheEncryptionKeys_ = settings.cacheEncryptionKeys;\n    _this.keyCache_ = {};\n    _this.decrypter_ = settings.decrypter; // Manages the tracking and generation of sync-points, mappings\n    // between a time in the display time and a segment index within\n    // a playlist\n\n    _this.syncController_ = settings.syncController;\n    _this.syncPoint_ = {\n      segmentIndex: 0,\n      time: 0\n    };\n    _this.transmuxer_ = _this.createTransmuxer_();\n\n    _this.triggerSyncInfoUpdate_ = function () {\n      return _this.trigger('syncinfoupdate');\n    };\n\n    _this.syncController_.on('syncinfoupdate', _this.triggerSyncInfoUpdate_);\n\n    _this.mediaSource_.addEventListener('sourceopen', function () {\n      if (!_this.isEndOfStream_()) {\n        _this.ended_ = false;\n      }\n    }); // ...for determining the fetch location\n\n\n    _this.fetchAtBuffer_ = false;\n    _this.logger_ = logger(\"SegmentLoader[\" + _this.loaderType_ + \"]\");\n    Object.defineProperty(_assertThisInitialized(_this), 'state', {\n      get: function get() {\n        return this.state_;\n      },\n      set: function set(newState) {\n        if (newState !== this.state_) {\n          this.logger_(this.state_ + \" -> \" + newState);\n          this.state_ = newState;\n          this.trigger('statechange');\n        }\n      }\n    });\n\n    _this.sourceUpdater_.on('ready', function () {\n      if (_this.hasEnoughInfoToAppend_()) {\n        _this.processCallQueue_();\n      }\n    }); // Only the main loader needs to listen for pending timeline changes, as the main\n    // loader should wait for audio to be ready to change its timeline so that both main\n    // and audio timelines change together. For more details, see the\n    // shouldWaitForTimelineChange function.\n\n\n    if (_this.loaderType_ === 'main') {\n      _this.timelineChangeController_.on('pendingtimelinechange', function () {\n        if (_this.hasEnoughInfoToAppend_()) {\n          _this.processCallQueue_();\n        }\n      });\n    } // The main loader only listens on pending timeline changes, but the audio loader,\n    // since its loads follow main, needs to listen on timeline changes. For more details,\n    // see the shouldWaitForTimelineChange function.\n\n\n    if (_this.loaderType_ === 'audio') {\n      _this.timelineChangeController_.on('timelinechange', function () {\n        if (_this.hasEnoughInfoToLoad_()) {\n          _this.processLoadQueue_();\n        }\n\n        if (_this.hasEnoughInfoToAppend_()) {\n          _this.processCallQueue_();\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = SegmentLoader.prototype;\n\n  _proto.createTransmuxer_ = function createTransmuxer_() {\n    return segmentTransmuxer.createTransmuxer({\n      remux: false,\n      alignGopsAtEnd: this.safeAppend_,\n      keepOriginalTimestamps: true,\n      parse708captions: this.parse708captions_,\n      captionServices: this.captionServices_\n    });\n  }\n  /**\n   * reset all of our media stats\n   *\n   * @private\n   */\n  ;\n\n  _proto.resetStats_ = function resetStats_() {\n    this.mediaBytesTransferred = 0;\n    this.mediaRequests = 0;\n    this.mediaRequestsAborted = 0;\n    this.mediaRequestsTimedout = 0;\n    this.mediaRequestsErrored = 0;\n    this.mediaTransferDuration = 0;\n    this.mediaSecondsLoaded = 0;\n    this.mediaAppends = 0;\n  }\n  /**\n   * dispose of the SegmentLoader and reset to the default state\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.trigger('dispose');\n    this.state = 'DISPOSED';\n    this.pause();\n    this.abort_();\n\n    if (this.transmuxer_) {\n      this.transmuxer_.terminate();\n    }\n\n    this.resetStats_();\n\n    if (this.checkBufferTimeout_) {\n      window$1.clearTimeout(this.checkBufferTimeout_);\n    }\n\n    if (this.syncController_ && this.triggerSyncInfoUpdate_) {\n      this.syncController_.off('syncinfoupdate', this.triggerSyncInfoUpdate_);\n    }\n\n    this.off();\n  };\n\n  _proto.setAudio = function setAudio(enable) {\n    this.audioDisabled_ = !enable;\n\n    if (enable) {\n      this.appendInitSegment_.audio = true;\n    } else {\n      // remove current track audio if it gets disabled\n      this.sourceUpdater_.removeAudio(0, this.duration_());\n    }\n  }\n  /**\n   * abort anything that is currently doing on with the SegmentLoader\n   * and reset to a default state\n   */\n  ;\n\n  _proto.abort = function abort() {\n    if (this.state !== 'WAITING') {\n      if (this.pendingSegment_) {\n        this.pendingSegment_ = null;\n      }\n\n      return;\n    }\n\n    this.abort_(); // We aborted the requests we were waiting on, so reset the loader's state to READY\n    // since we are no longer \"waiting\" on any requests. XHR callback is not always run\n    // when the request is aborted. This will prevent the loader from being stuck in the\n    // WAITING state indefinitely.\n\n    this.state = 'READY'; // don't wait for buffer check timeouts to begin fetching the\n    // next segment\n\n    if (!this.paused()) {\n      this.monitorBuffer_();\n    }\n  }\n  /**\n   * abort all pending xhr requests and null any pending segements\n   *\n   * @private\n   */\n  ;\n\n  _proto.abort_ = function abort_() {\n    if (this.pendingSegment_ && this.pendingSegment_.abortRequests) {\n      this.pendingSegment_.abortRequests();\n    } // clear out the segment being processed\n\n\n    this.pendingSegment_ = null;\n    this.callQueue_ = [];\n    this.loadQueue_ = [];\n    this.metadataQueue_.id3 = [];\n    this.metadataQueue_.caption = [];\n    this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);\n    this.waitingOnRemove_ = false;\n    window$1.clearTimeout(this.quotaExceededErrorRetryTimeout_);\n    this.quotaExceededErrorRetryTimeout_ = null;\n  };\n\n  _proto.checkForAbort_ = function checkForAbort_(requestId) {\n    // If the state is APPENDING, then aborts will not modify the state, meaning the first\n    // callback that happens should reset the state to READY so that loading can continue.\n    if (this.state === 'APPENDING' && !this.pendingSegment_) {\n      this.state = 'READY';\n      return true;\n    }\n\n    if (!this.pendingSegment_ || this.pendingSegment_.requestId !== requestId) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * set an error on the segment loader and null out any pending segements\n   *\n   * @param {Error} error the error to set on the SegmentLoader\n   * @return {Error} the error that was set or that is currently set\n   */\n  ;\n\n  _proto.error = function error(_error) {\n    if (typeof _error !== 'undefined') {\n      this.logger_('error occurred:', _error);\n      this.error_ = _error;\n    }\n\n    this.pendingSegment_ = null;\n    return this.error_;\n  };\n\n  _proto.endOfStream = function endOfStream() {\n    this.ended_ = true;\n\n    if (this.transmuxer_) {\n      // need to clear out any cached data to prepare for the new segment\n      segmentTransmuxer.reset(this.transmuxer_);\n    }\n\n    this.gopBuffer_.length = 0;\n    this.pause();\n    this.trigger('ended');\n  }\n  /**\n   * Indicates which time ranges are buffered\n   *\n   * @return {TimeRange}\n   *         TimeRange object representing the current buffered ranges\n   */\n  ;\n\n  _proto.buffered_ = function buffered_() {\n    var trackInfo = this.getMediaInfo_();\n\n    if (!this.sourceUpdater_ || !trackInfo) {\n      return videojs.createTimeRanges();\n    }\n\n    if (this.loaderType_ === 'main') {\n      var hasAudio = trackInfo.hasAudio,\n          hasVideo = trackInfo.hasVideo,\n          isMuxed = trackInfo.isMuxed;\n\n      if (hasVideo && hasAudio && !this.audioDisabled_ && !isMuxed) {\n        return this.sourceUpdater_.buffered();\n      }\n\n      if (hasVideo) {\n        return this.sourceUpdater_.videoBuffered();\n      }\n    } // One case that can be ignored for now is audio only with alt audio,\n    // as we don't yet have proper support for that.\n\n\n    return this.sourceUpdater_.audioBuffered();\n  }\n  /**\n   * Gets and sets init segment for the provided map\n   *\n   * @param {Object} map\n   *        The map object representing the init segment to get or set\n   * @param {boolean=} set\n   *        If true, the init segment for the provided map should be saved\n   * @return {Object}\n   *         map object for desired init segment\n   */\n  ;\n\n  _proto.initSegmentForMap = function initSegmentForMap(map, set) {\n    if (set === void 0) {\n      set = false;\n    }\n\n    if (!map) {\n      return null;\n    }\n\n    var id = initSegmentId(map);\n    var storedMap = this.initSegments_[id];\n\n    if (set && !storedMap && map.bytes) {\n      this.initSegments_[id] = storedMap = {\n        resolvedUri: map.resolvedUri,\n        byterange: map.byterange,\n        bytes: map.bytes,\n        tracks: map.tracks,\n        timescales: map.timescales\n      };\n    }\n\n    return storedMap || map;\n  }\n  /**\n   * Gets and sets key for the provided key\n   *\n   * @param {Object} key\n   *        The key object representing the key to get or set\n   * @param {boolean=} set\n   *        If true, the key for the provided key should be saved\n   * @return {Object}\n   *         Key object for desired key\n   */\n  ;\n\n  _proto.segmentKey = function segmentKey(key, set) {\n    if (set === void 0) {\n      set = false;\n    }\n\n    if (!key) {\n      return null;\n    }\n\n    var id = segmentKeyId(key);\n    var storedKey = this.keyCache_[id]; // TODO: We should use the HTTP Expires header to invalidate our cache per\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-6.2.3\n\n    if (this.cacheEncryptionKeys_ && set && !storedKey && key.bytes) {\n      this.keyCache_[id] = storedKey = {\n        resolvedUri: key.resolvedUri,\n        bytes: key.bytes\n      };\n    }\n\n    var result = {\n      resolvedUri: (storedKey || key).resolvedUri\n    };\n\n    if (storedKey) {\n      result.bytes = storedKey.bytes;\n    }\n\n    return result;\n  }\n  /**\n   * Returns true if all configuration required for loading is present, otherwise false.\n   *\n   * @return {boolean} True if the all configuration is ready for loading\n   * @private\n   */\n  ;\n\n  _proto.couldBeginLoading_ = function couldBeginLoading_() {\n    return this.playlist_ && !this.paused();\n  }\n  /**\n   * load a playlist and start to fill the buffer\n   */\n  ;\n\n  _proto.load = function load() {\n    // un-pause\n    this.monitorBuffer_(); // if we don't have a playlist yet, keep waiting for one to be\n    // specified\n\n    if (!this.playlist_) {\n      return;\n    } // if all the configuration is ready, initialize and begin loading\n\n\n    if (this.state === 'INIT' && this.couldBeginLoading_()) {\n      return this.init_();\n    } // if we're in the middle of processing a segment already, don't\n    // kick off an additional segment request\n\n\n    if (!this.couldBeginLoading_() || this.state !== 'READY' && this.state !== 'INIT') {\n      return;\n    }\n\n    this.state = 'READY';\n  }\n  /**\n   * Once all the starting parameters have been specified, begin\n   * operation. This method should only be invoked from the INIT\n   * state.\n   *\n   * @private\n   */\n  ;\n\n  _proto.init_ = function init_() {\n    this.state = 'READY'; // if this is the audio segment loader, and it hasn't been inited before, then any old\n    // audio data from the muxed content should be removed\n\n    this.resetEverything();\n    return this.monitorBuffer_();\n  }\n  /**\n   * set a playlist on the segment loader\n   *\n   * @param {PlaylistLoader} media the playlist to set on the segment loader\n   */\n  ;\n\n  _proto.playlist = function playlist(newPlaylist, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!newPlaylist) {\n      return;\n    }\n\n    var oldPlaylist = this.playlist_;\n    var segmentInfo = this.pendingSegment_;\n    this.playlist_ = newPlaylist;\n    this.xhrOptions_ = options; // when we haven't started playing yet, the start of a live playlist\n    // is always our zero-time so force a sync update each time the playlist\n    // is refreshed from the server\n    //\n    // Use the INIT state to determine if playback has started, as the playlist sync info\n    // should be fixed once requests begin (as sync points are generated based on sync\n    // info), but not before then.\n\n    if (this.state === 'INIT') {\n      newPlaylist.syncInfo = {\n        mediaSequence: newPlaylist.mediaSequence,\n        time: 0\n      }; // Setting the date time mapping means mapping the program date time (if available)\n      // to time 0 on the player's timeline. The playlist's syncInfo serves a similar\n      // purpose, mapping the initial mediaSequence to time zero. Since the syncInfo can\n      // be updated as the playlist is refreshed before the loader starts loading, the\n      // program date time mapping needs to be updated as well.\n      //\n      // This mapping is only done for the main loader because a program date time should\n      // map equivalently between playlists.\n\n      if (this.loaderType_ === 'main') {\n        this.syncController_.setDateTimeMappingForStart(newPlaylist);\n      }\n    }\n\n    var oldId = null;\n\n    if (oldPlaylist) {\n      if (oldPlaylist.id) {\n        oldId = oldPlaylist.id;\n      } else if (oldPlaylist.uri) {\n        oldId = oldPlaylist.uri;\n      }\n    }\n\n    this.logger_(\"playlist update [\" + oldId + \" => \" + (newPlaylist.id || newPlaylist.uri) + \"]\"); // in VOD, this is always a rendition switch (or we updated our syncInfo above)\n    // in LIVE, we always want to update with new playlists (including refreshes)\n\n    this.trigger('syncinfoupdate'); // if we were unpaused but waiting for a playlist, start\n    // buffering now\n\n    if (this.state === 'INIT' && this.couldBeginLoading_()) {\n      return this.init_();\n    }\n\n    if (!oldPlaylist || oldPlaylist.uri !== newPlaylist.uri) {\n      if (this.mediaIndex !== null) {\n        // we must reset/resync the segment loader when we switch renditions and\n        // the segment loader is already synced to the previous rendition\n        // on playlist changes we want it to be possible to fetch\n        // at the buffer for vod but not for live. So we use resetLoader\n        // for live and resyncLoader for vod. We want this because\n        // if a playlist uses independent and non-independent segments/parts the\n        // buffer may not accurately reflect the next segment that we should try\n        // downloading.\n        if (!newPlaylist.endList) {\n          this.resetLoader();\n        } else {\n          this.resyncLoader();\n        }\n      }\n\n      this.currentMediaInfo_ = void 0;\n      this.trigger('playlistupdate'); // the rest of this function depends on `oldPlaylist` being defined\n\n      return;\n    } // we reloaded the same playlist so we are in a live scenario\n    // and we will likely need to adjust the mediaIndex\n\n\n    var mediaSequenceDiff = newPlaylist.mediaSequence - oldPlaylist.mediaSequence;\n    this.logger_(\"live window shift [\" + mediaSequenceDiff + \"]\"); // update the mediaIndex on the SegmentLoader\n    // this is important because we can abort a request and this value must be\n    // equal to the last appended mediaIndex\n\n    if (this.mediaIndex !== null) {\n      this.mediaIndex -= mediaSequenceDiff; // this can happen if we are going to load the first segment, but get a playlist\n      // update during that. mediaIndex would go from 0 to -1 if mediaSequence in the\n      // new playlist was incremented by 1.\n\n      if (this.mediaIndex < 0) {\n        this.mediaIndex = null;\n        this.partIndex = null;\n      } else {\n        var segment = this.playlist_.segments[this.mediaIndex]; // partIndex should remain the same for the same segment\n        // unless parts fell off of the playlist for this segment.\n        // In that case we need to reset partIndex and resync\n\n        if (this.partIndex && (!segment.parts || !segment.parts.length || !segment.parts[this.partIndex])) {\n          var mediaIndex = this.mediaIndex;\n          this.logger_(\"currently processing part (index \" + this.partIndex + \") no longer exists.\");\n          this.resetLoader(); // We want to throw away the partIndex and the data associated with it,\n          // as the part was dropped from our current playlists segment.\n          // The mediaIndex will still be valid so keep that around.\n\n          this.mediaIndex = mediaIndex;\n        }\n      }\n    } // update the mediaIndex on the SegmentInfo object\n    // this is important because we will update this.mediaIndex with this value\n    // in `handleAppendsDone_` after the segment has been successfully appended\n\n\n    if (segmentInfo) {\n      segmentInfo.mediaIndex -= mediaSequenceDiff;\n\n      if (segmentInfo.mediaIndex < 0) {\n        segmentInfo.mediaIndex = null;\n        segmentInfo.partIndex = null;\n      } else {\n        // we need to update the referenced segment so that timing information is\n        // saved for the new playlist's segment, however, if the segment fell off the\n        // playlist, we can leave the old reference and just lose the timing info\n        if (segmentInfo.mediaIndex >= 0) {\n          segmentInfo.segment = newPlaylist.segments[segmentInfo.mediaIndex];\n        }\n\n        if (segmentInfo.partIndex >= 0 && segmentInfo.segment.parts) {\n          segmentInfo.part = segmentInfo.segment.parts[segmentInfo.partIndex];\n        }\n      }\n    }\n\n    this.syncController_.saveExpiredSegmentInfo(oldPlaylist, newPlaylist);\n  }\n  /**\n   * Prevent the loader from fetching additional segments. If there\n   * is a segment request outstanding, it will finish processing\n   * before the loader halts. A segment loader can be unpaused by\n   * calling load().\n   */\n  ;\n\n  _proto.pause = function pause() {\n    if (this.checkBufferTimeout_) {\n      window$1.clearTimeout(this.checkBufferTimeout_);\n      this.checkBufferTimeout_ = null;\n    }\n  }\n  /**\n   * Returns whether the segment loader is fetching additional\n   * segments when given the opportunity. This property can be\n   * modified through calls to pause() and load().\n   */\n  ;\n\n  _proto.paused = function paused() {\n    return this.checkBufferTimeout_ === null;\n  }\n  /**\n   * Delete all the buffered data and reset the SegmentLoader\n   *\n   * @param {Function} [done] an optional callback to be executed when the remove\n   * operation is complete\n   */\n  ;\n\n  _proto.resetEverything = function resetEverything(done) {\n    this.ended_ = false;\n    this.appendInitSegment_ = {\n      audio: true,\n      video: true\n    };\n    this.resetLoader(); // remove from 0, the earliest point, to Infinity, to signify removal of everything.\n    // VTT Segment Loader doesn't need to do anything but in the regular SegmentLoader,\n    // we then clamp the value to duration if necessary.\n\n    this.remove(0, Infinity, done); // clears fmp4 captions\n\n    if (this.transmuxer_) {\n      this.transmuxer_.postMessage({\n        action: 'clearAllMp4Captions'\n      }); // reset the cache in the transmuxer\n\n      this.transmuxer_.postMessage({\n        action: 'reset'\n      });\n    }\n  }\n  /**\n   * Force the SegmentLoader to resync and start loading around the currentTime instead\n   * of starting at the end of the buffer\n   *\n   * Useful for fast quality changes\n   */\n  ;\n\n  _proto.resetLoader = function resetLoader() {\n    this.fetchAtBuffer_ = false;\n    this.resyncLoader();\n  }\n  /**\n   * Force the SegmentLoader to restart synchronization and make a conservative guess\n   * before returning to the simple walk-forward method\n   */\n  ;\n\n  _proto.resyncLoader = function resyncLoader() {\n    if (this.transmuxer_) {\n      // need to clear out any cached data to prepare for the new segment\n      segmentTransmuxer.reset(this.transmuxer_);\n    }\n\n    this.mediaIndex = null;\n    this.partIndex = null;\n    this.syncPoint_ = null;\n    this.isPendingTimestampOffset_ = false;\n    this.callQueue_ = [];\n    this.loadQueue_ = [];\n    this.metadataQueue_.id3 = [];\n    this.metadataQueue_.caption = [];\n    this.abort();\n\n    if (this.transmuxer_) {\n      this.transmuxer_.postMessage({\n        action: 'clearParsedMp4Captions'\n      });\n    }\n  }\n  /**\n   * Remove any data in the source buffer between start and end times\n   *\n   * @param {number} start - the start time of the region to remove from the buffer\n   * @param {number} end - the end time of the region to remove from the buffer\n   * @param {Function} [done] - an optional callback to be executed when the remove\n   * @param {boolean} force - force all remove operations to happen\n   * operation is complete\n   */\n  ;\n\n  _proto.remove = function remove(start, end, done, force) {\n    if (done === void 0) {\n      done = function done() {};\n    }\n\n    if (force === void 0) {\n      force = false;\n    } // clamp end to duration if we need to remove everything.\n    // This is due to a browser bug that causes issues if we remove to Infinity.\n    // videojs/videojs-contrib-hls#1225\n\n\n    if (end === Infinity) {\n      end = this.duration_();\n    } // skip removes that would throw an error\n    // commonly happens during a rendition switch at the start of a video\n    // from start 0 to end 0\n\n\n    if (end <= start) {\n      this.logger_('skipping remove because end ${end} is <= start ${start}');\n      return;\n    }\n\n    if (!this.sourceUpdater_ || !this.getMediaInfo_()) {\n      this.logger_('skipping remove because no source updater or starting media info'); // nothing to remove if we haven't processed any media\n\n      return;\n    } // set it to one to complete this function's removes\n\n\n    var removesRemaining = 1;\n\n    var removeFinished = function removeFinished() {\n      removesRemaining--;\n\n      if (removesRemaining === 0) {\n        done();\n      }\n    };\n\n    if (force || !this.audioDisabled_) {\n      removesRemaining++;\n      this.sourceUpdater_.removeAudio(start, end, removeFinished);\n    } // While it would be better to only remove video if the main loader has video, this\n    // should be safe with audio only as removeVideo will call back even if there's no\n    // video buffer.\n    //\n    // In theory we can check to see if there's video before calling the remove, but in\n    // the event that we're switching between renditions and from video to audio only\n    // (when we add support for that), we may need to clear the video contents despite\n    // what the new media will contain.\n\n\n    if (force || this.loaderType_ === 'main') {\n      this.gopBuffer_ = removeGopBuffer(this.gopBuffer_, start, end, this.timeMapping_);\n      removesRemaining++;\n      this.sourceUpdater_.removeVideo(start, end, removeFinished);\n    } // remove any captions and ID3 tags\n\n\n    for (var track in this.inbandTextTracks_) {\n      removeCuesFromTrack(start, end, this.inbandTextTracks_[track]);\n    }\n\n    removeCuesFromTrack(start, end, this.segmentMetadataTrack_); // finished this function's removes\n\n    removeFinished();\n  }\n  /**\n   * (re-)schedule monitorBufferTick_ to run as soon as possible\n   *\n   * @private\n   */\n  ;\n\n  _proto.monitorBuffer_ = function monitorBuffer_() {\n    if (this.checkBufferTimeout_) {\n      window$1.clearTimeout(this.checkBufferTimeout_);\n    }\n\n    this.checkBufferTimeout_ = window$1.setTimeout(this.monitorBufferTick_.bind(this), 1);\n  }\n  /**\n   * As long as the SegmentLoader is in the READY state, periodically\n   * invoke fillBuffer_().\n   *\n   * @private\n   */\n  ;\n\n  _proto.monitorBufferTick_ = function monitorBufferTick_() {\n    if (this.state === 'READY') {\n      this.fillBuffer_();\n    }\n\n    if (this.checkBufferTimeout_) {\n      window$1.clearTimeout(this.checkBufferTimeout_);\n    }\n\n    this.checkBufferTimeout_ = window$1.setTimeout(this.monitorBufferTick_.bind(this), CHECK_BUFFER_DELAY);\n  }\n  /**\n   * fill the buffer with segements unless the sourceBuffers are\n   * currently updating\n   *\n   * Note: this function should only ever be called by monitorBuffer_\n   * and never directly\n   *\n   * @private\n   */\n  ;\n\n  _proto.fillBuffer_ = function fillBuffer_() {\n    // TODO since the source buffer maintains a queue, and we shouldn't call this function\n    // except when we're ready for the next segment, this check can most likely be removed\n    if (this.sourceUpdater_.updating()) {\n      return;\n    } // see if we need to begin loading immediately\n\n\n    var segmentInfo = this.chooseNextRequest_();\n\n    if (!segmentInfo) {\n      return;\n    }\n\n    if (typeof segmentInfo.timestampOffset === 'number') {\n      this.isPendingTimestampOffset_ = false;\n      this.timelineChangeController_.pendingTimelineChange({\n        type: this.loaderType_,\n        from: this.currentTimeline_,\n        to: segmentInfo.timeline\n      });\n    }\n\n    this.loadSegment_(segmentInfo);\n  }\n  /**\n   * Determines if we should call endOfStream on the media source based\n   * on the state of the buffer or if appened segment was the final\n   * segment in the playlist.\n   *\n   * @param {number} [mediaIndex] the media index of segment we last appended\n   * @param {Object} [playlist] a media playlist object\n   * @return {boolean} do we need to call endOfStream on the MediaSource\n   */\n  ;\n\n  _proto.isEndOfStream_ = function isEndOfStream_(mediaIndex, playlist, partIndex) {\n    if (mediaIndex === void 0) {\n      mediaIndex = this.mediaIndex;\n    }\n\n    if (playlist === void 0) {\n      playlist = this.playlist_;\n    }\n\n    if (partIndex === void 0) {\n      partIndex = this.partIndex;\n    }\n\n    if (!playlist || !this.mediaSource_) {\n      return false;\n    }\n\n    var segment = typeof mediaIndex === 'number' && playlist.segments[mediaIndex]; // mediaIndex is zero based but length is 1 based\n\n    var appendedLastSegment = mediaIndex + 1 === playlist.segments.length; // true if there are no parts, or this is the last part.\n\n    var appendedLastPart = !segment || !segment.parts || partIndex + 1 === segment.parts.length; // if we've buffered to the end of the video, we need to call endOfStream\n    // so that MediaSources can trigger the `ended` event when it runs out of\n    // buffered data instead of waiting for me\n\n    return playlist.endList && this.mediaSource_.readyState === 'open' && appendedLastSegment && appendedLastPart;\n  }\n  /**\n   * Determines what request should be made given current segment loader state.\n   *\n   * @return {Object} a request object that describes the segment/part to load\n   */\n  ;\n\n  _proto.chooseNextRequest_ = function chooseNextRequest_() {\n    var buffered = this.buffered_();\n    var bufferedEnd = lastBufferedEnd(buffered) || 0;\n    var bufferedTime = timeAheadOf(buffered, this.currentTime_());\n    var preloaded = !this.hasPlayed_() && bufferedTime >= 1;\n    var haveEnoughBuffer = bufferedTime >= this.goalBufferLength_();\n    var segments = this.playlist_.segments; // return no segment if:\n    // 1. we don't have segments\n    // 2. The video has not yet played and we already downloaded a segment\n    // 3. we already have enough buffered time\n\n    if (!segments.length || preloaded || haveEnoughBuffer) {\n      return null;\n    }\n\n    this.syncPoint_ = this.syncPoint_ || this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_());\n    var next = {\n      partIndex: null,\n      mediaIndex: null,\n      startOfSegment: null,\n      playlist: this.playlist_,\n      isSyncRequest: Boolean(!this.syncPoint_)\n    };\n\n    if (next.isSyncRequest) {\n      next.mediaIndex = getSyncSegmentCandidate(this.currentTimeline_, segments, bufferedEnd);\n    } else if (this.mediaIndex !== null) {\n      var segment = segments[this.mediaIndex];\n      var partIndex = typeof this.partIndex === 'number' ? this.partIndex : -1;\n      next.startOfSegment = segment.end ? segment.end : bufferedEnd;\n\n      if (segment.parts && segment.parts[partIndex + 1]) {\n        next.mediaIndex = this.mediaIndex;\n        next.partIndex = partIndex + 1;\n      } else {\n        next.mediaIndex = this.mediaIndex + 1;\n      }\n    } else {\n      // Find the segment containing the end of the buffer or current time.\n      var _Playlist$getMediaInf = Playlist.getMediaInfoForTime({\n        experimentalExactManifestTimings: this.experimentalExactManifestTimings,\n        playlist: this.playlist_,\n        currentTime: this.fetchAtBuffer_ ? bufferedEnd : this.currentTime_(),\n        startingPartIndex: this.syncPoint_.partIndex,\n        startingSegmentIndex: this.syncPoint_.segmentIndex,\n        startTime: this.syncPoint_.time\n      }),\n          segmentIndex = _Playlist$getMediaInf.segmentIndex,\n          startTime = _Playlist$getMediaInf.startTime,\n          _partIndex = _Playlist$getMediaInf.partIndex;\n\n      next.getMediaInfoForTime = this.fetchAtBuffer_ ? \"bufferedEnd \" + bufferedEnd : \"currentTime \" + this.currentTime_();\n      next.mediaIndex = segmentIndex;\n      next.startOfSegment = startTime;\n      next.partIndex = _partIndex;\n    }\n\n    var nextSegment = segments[next.mediaIndex];\n    var nextPart = nextSegment && typeof next.partIndex === 'number' && nextSegment.parts && nextSegment.parts[next.partIndex]; // if the next segment index is invalid or\n    // the next partIndex is invalid do not choose a next segment.\n\n    if (!nextSegment || typeof next.partIndex === 'number' && !nextPart) {\n      return null;\n    } // if the next segment has parts, and we don't have a partIndex.\n    // Set partIndex to 0\n\n\n    if (typeof next.partIndex !== 'number' && nextSegment.parts) {\n      next.partIndex = 0;\n      nextPart = nextSegment.parts[0];\n    } // if we have no buffered data then we need to make sure\n    // that the next part we append is \"independent\" if possible.\n    // So we check if the previous part is independent, and request\n    // it if it is.\n\n\n    if (!bufferedTime && nextPart && !nextPart.independent) {\n      if (next.partIndex === 0) {\n        var lastSegment = segments[next.mediaIndex - 1];\n        var lastSegmentLastPart = lastSegment.parts && lastSegment.parts.length && lastSegment.parts[lastSegment.parts.length - 1];\n\n        if (lastSegmentLastPart && lastSegmentLastPart.independent) {\n          next.mediaIndex -= 1;\n          next.partIndex = lastSegment.parts.length - 1;\n          next.independent = 'previous segment';\n        }\n      } else if (nextSegment.parts[next.partIndex - 1].independent) {\n        next.partIndex -= 1;\n        next.independent = 'previous part';\n      }\n    }\n\n    var ended = this.mediaSource_ && this.mediaSource_.readyState === 'ended'; // do not choose a next segment if all of the following:\n    // 1. this is the last segment in the playlist\n    // 2. end of stream has been called on the media source already\n    // 3. the player is not seeking\n\n    if (next.mediaIndex >= segments.length - 1 && ended && !this.seeking_()) {\n      return null;\n    }\n\n    return this.generateSegmentInfo_(next);\n  };\n\n  _proto.generateSegmentInfo_ = function generateSegmentInfo_(options) {\n    var independent = options.independent,\n        playlist = options.playlist,\n        mediaIndex = options.mediaIndex,\n        startOfSegment = options.startOfSegment,\n        isSyncRequest = options.isSyncRequest,\n        partIndex = options.partIndex,\n        forceTimestampOffset = options.forceTimestampOffset,\n        getMediaInfoForTime = options.getMediaInfoForTime;\n    var segment = playlist.segments[mediaIndex];\n    var part = typeof partIndex === 'number' && segment.parts[partIndex];\n    var segmentInfo = {\n      requestId: 'segment-loader-' + Math.random(),\n      // resolve the segment URL relative to the playlist\n      uri: part && part.resolvedUri || segment.resolvedUri,\n      // the segment's mediaIndex at the time it was requested\n      mediaIndex: mediaIndex,\n      partIndex: part ? partIndex : null,\n      // whether or not to update the SegmentLoader's state with this\n      // segment's mediaIndex\n      isSyncRequest: isSyncRequest,\n      startOfSegment: startOfSegment,\n      // the segment's playlist\n      playlist: playlist,\n      // unencrypted bytes of the segment\n      bytes: null,\n      // when a key is defined for this segment, the encrypted bytes\n      encryptedBytes: null,\n      // The target timestampOffset for this segment when we append it\n      // to the source buffer\n      timestampOffset: null,\n      // The timeline that the segment is in\n      timeline: segment.timeline,\n      // The expected duration of the segment in seconds\n      duration: part && part.duration || segment.duration,\n      // retain the segment in case the playlist updates while doing an async process\n      segment: segment,\n      part: part,\n      byteLength: 0,\n      transmuxer: this.transmuxer_,\n      // type of getMediaInfoForTime that was used to get this segment\n      getMediaInfoForTime: getMediaInfoForTime,\n      independent: independent\n    };\n    var overrideCheck = typeof forceTimestampOffset !== 'undefined' ? forceTimestampOffset : this.isPendingTimestampOffset_;\n    segmentInfo.timestampOffset = this.timestampOffsetForSegment_({\n      segmentTimeline: segment.timeline,\n      currentTimeline: this.currentTimeline_,\n      startOfSegment: startOfSegment,\n      buffered: this.buffered_(),\n      overrideCheck: overrideCheck\n    });\n    var audioBufferedEnd = lastBufferedEnd(this.sourceUpdater_.audioBuffered());\n\n    if (typeof audioBufferedEnd === 'number') {\n      // since the transmuxer is using the actual timing values, but the buffer is\n      // adjusted by the timestamp offset, we must adjust the value here\n      segmentInfo.audioAppendStart = audioBufferedEnd - this.sourceUpdater_.audioTimestampOffset();\n    }\n\n    if (this.sourceUpdater_.videoBuffered().length) {\n      segmentInfo.gopsToAlignWith = gopsSafeToAlignWith(this.gopBuffer_, // since the transmuxer is using the actual timing values, but the time is\n      // adjusted by the timestmap offset, we must adjust the value here\n      this.currentTime_() - this.sourceUpdater_.videoTimestampOffset(), this.timeMapping_);\n    }\n\n    return segmentInfo;\n  } // get the timestampoffset for a segment,\n  // added so that vtt segment loader can override and prevent\n  // adding timestamp offsets.\n  ;\n\n  _proto.timestampOffsetForSegment_ = function timestampOffsetForSegment_(options) {\n    return timestampOffsetForSegment(options);\n  }\n  /**\n   * Determines if the network has enough bandwidth to complete the current segment\n   * request in a timely manner. If not, the request will be aborted early and bandwidth\n   * updated to trigger a playlist switch.\n   *\n   * @param {Object} stats\n   *        Object containing stats about the request timing and size\n   * @private\n   */\n  ;\n\n  _proto.earlyAbortWhenNeeded_ = function earlyAbortWhenNeeded_(stats) {\n    if (this.vhs_.tech_.paused() || // Don't abort if the current playlist is on the lowestEnabledRendition\n    // TODO: Replace using timeout with a boolean indicating whether this playlist is\n    //       the lowestEnabledRendition.\n    !this.xhrOptions_.timeout || // Don't abort if we have no bandwidth information to estimate segment sizes\n    !this.playlist_.attributes.BANDWIDTH) {\n      return;\n    } // Wait at least 1 second since the first byte of data has been received before\n    // using the calculated bandwidth from the progress event to allow the bitrate\n    // to stabilize\n\n\n    if (Date.now() - (stats.firstBytesReceivedAt || Date.now()) < 1000) {\n      return;\n    }\n\n    var currentTime = this.currentTime_();\n    var measuredBandwidth = stats.bandwidth;\n    var segmentDuration = this.pendingSegment_.duration;\n    var requestTimeRemaining = Playlist.estimateSegmentRequestTime(segmentDuration, measuredBandwidth, this.playlist_, stats.bytesReceived); // Subtract 1 from the timeUntilRebuffer so we still consider an early abort\n    // if we are only left with less than 1 second when the request completes.\n    // A negative timeUntilRebuffering indicates we are already rebuffering\n\n    var timeUntilRebuffer$1 = timeUntilRebuffer(this.buffered_(), currentTime, this.vhs_.tech_.playbackRate()) - 1; // Only consider aborting early if the estimated time to finish the download\n    // is larger than the estimated time until the player runs out of forward buffer\n\n    if (requestTimeRemaining <= timeUntilRebuffer$1) {\n      return;\n    }\n\n    var switchCandidate = minRebufferMaxBandwidthSelector({\n      master: this.vhs_.playlists.master,\n      currentTime: currentTime,\n      bandwidth: measuredBandwidth,\n      duration: this.duration_(),\n      segmentDuration: segmentDuration,\n      timeUntilRebuffer: timeUntilRebuffer$1,\n      currentTimeline: this.currentTimeline_,\n      syncController: this.syncController_\n    });\n\n    if (!switchCandidate) {\n      return;\n    }\n\n    var rebufferingImpact = requestTimeRemaining - timeUntilRebuffer$1;\n    var timeSavedBySwitching = rebufferingImpact - switchCandidate.rebufferingImpact;\n    var minimumTimeSaving = 0.5; // If we are already rebuffering, increase the amount of variance we add to the\n    // potential round trip time of the new request so that we are not too aggressive\n    // with switching to a playlist that might save us a fraction of a second.\n\n    if (timeUntilRebuffer$1 <= TIME_FUDGE_FACTOR) {\n      minimumTimeSaving = 1;\n    }\n\n    if (!switchCandidate.playlist || switchCandidate.playlist.uri === this.playlist_.uri || timeSavedBySwitching < minimumTimeSaving) {\n      return;\n    } // set the bandwidth to that of the desired playlist being sure to scale by\n    // BANDWIDTH_VARIANCE and add one so the playlist selector does not exclude it\n    // don't trigger a bandwidthupdate as the bandwidth is artifial\n\n\n    this.bandwidth = switchCandidate.playlist.attributes.BANDWIDTH * Config.BANDWIDTH_VARIANCE + 1;\n    this.trigger('earlyabort');\n  };\n\n  _proto.handleAbort_ = function handleAbort_(segmentInfo) {\n    this.logger_(\"Aborting \" + segmentInfoString(segmentInfo));\n    this.mediaRequestsAborted += 1;\n  }\n  /**\n   * XHR `progress` event handler\n   *\n   * @param {Event}\n   *        The XHR `progress` event\n   * @param {Object} simpleSegment\n   *        A simplified segment object copy\n   * @private\n   */\n  ;\n\n  _proto.handleProgress_ = function handleProgress_(event, simpleSegment) {\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    }\n\n    this.trigger('progress');\n  };\n\n  _proto.handleTrackInfo_ = function handleTrackInfo_(simpleSegment, trackInfo) {\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    }\n\n    if (this.checkForIllegalMediaSwitch(trackInfo)) {\n      return;\n    }\n\n    trackInfo = trackInfo || {}; // When we have track info, determine what media types this loader is dealing with.\n    // Guard against cases where we're not getting track info at all until we are\n    // certain that all streams will provide it.\n\n    if (!shallowEqual(this.currentMediaInfo_, trackInfo)) {\n      this.appendInitSegment_ = {\n        audio: true,\n        video: true\n      };\n      this.startingMediaInfo_ = trackInfo;\n      this.currentMediaInfo_ = trackInfo;\n      this.logger_('trackinfo update', trackInfo);\n      this.trigger('trackinfo');\n    } // trackinfo may cause an abort if the trackinfo\n    // causes a codec change to an unsupported codec.\n\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    } // set trackinfo on the pending segment so that\n    // it can append.\n\n\n    this.pendingSegment_.trackInfo = trackInfo; // check if any calls were waiting on the track info\n\n    if (this.hasEnoughInfoToAppend_()) {\n      this.processCallQueue_();\n    }\n  };\n\n  _proto.handleTimingInfo_ = function handleTimingInfo_(simpleSegment, mediaType, timeType, time) {\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_;\n    var timingInfoProperty = timingInfoPropertyForMedia(mediaType);\n    segmentInfo[timingInfoProperty] = segmentInfo[timingInfoProperty] || {};\n    segmentInfo[timingInfoProperty][timeType] = time;\n    this.logger_(\"timinginfo: \" + mediaType + \" - \" + timeType + \" - \" + time); // check if any calls were waiting on the timing info\n\n    if (this.hasEnoughInfoToAppend_()) {\n      this.processCallQueue_();\n    }\n  };\n\n  _proto.handleCaptions_ = function handleCaptions_(simpleSegment, captionData) {\n    var _this2 = this;\n\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    } // This could only happen with fmp4 segments, but\n    // should still not happen in general\n\n\n    if (captionData.length === 0) {\n      this.logger_('SegmentLoader received no captions from a caption event');\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // Wait until we have some video data so that caption timing\n    // can be adjusted by the timestamp offset\n\n    if (!segmentInfo.hasAppendedData_) {\n      this.metadataQueue_.caption.push(this.handleCaptions_.bind(this, simpleSegment, captionData));\n      return;\n    }\n\n    var timestampOffset = this.sourceUpdater_.videoTimestampOffset() === null ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset();\n    var captionTracks = {}; // get total start/end and captions for each track/stream\n\n    captionData.forEach(function (caption) {\n      // caption.stream is actually a track name...\n      // set to the existing values in tracks or default values\n      captionTracks[caption.stream] = captionTracks[caption.stream] || {\n        // Infinity, as any other value will be less than this\n        startTime: Infinity,\n        captions: [],\n        // 0 as an other value will be more than this\n        endTime: 0\n      };\n      var captionTrack = captionTracks[caption.stream];\n      captionTrack.startTime = Math.min(captionTrack.startTime, caption.startTime + timestampOffset);\n      captionTrack.endTime = Math.max(captionTrack.endTime, caption.endTime + timestampOffset);\n      captionTrack.captions.push(caption);\n    });\n    Object.keys(captionTracks).forEach(function (trackName) {\n      var _captionTracks$trackN = captionTracks[trackName],\n          startTime = _captionTracks$trackN.startTime,\n          endTime = _captionTracks$trackN.endTime,\n          captions = _captionTracks$trackN.captions;\n      var inbandTextTracks = _this2.inbandTextTracks_;\n\n      _this2.logger_(\"adding cues from \" + startTime + \" -> \" + endTime + \" for \" + trackName);\n\n      createCaptionsTrackIfNotExists(inbandTextTracks, _this2.vhs_.tech_, trackName); // clear out any cues that start and end at the same time period for the same track.\n      // We do this because a rendition change that also changes the timescale for captions\n      // will result in captions being re-parsed for certain segments. If we add them again\n      // without clearing we will have two of the same captions visible.\n\n      removeCuesFromTrack(startTime, endTime, inbandTextTracks[trackName]);\n      addCaptionData({\n        captionArray: captions,\n        inbandTextTracks: inbandTextTracks,\n        timestampOffset: timestampOffset\n      });\n    }); // Reset stored captions since we added parsed\n    // captions to a text track at this point\n\n    if (this.transmuxer_) {\n      this.transmuxer_.postMessage({\n        action: 'clearParsedMp4Captions'\n      });\n    }\n  };\n\n  _proto.handleId3_ = function handleId3_(simpleSegment, id3Frames, dispatchType) {\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // we need to have appended data in order for the timestamp offset to be set\n\n    if (!segmentInfo.hasAppendedData_) {\n      this.metadataQueue_.id3.push(this.handleId3_.bind(this, simpleSegment, id3Frames, dispatchType));\n      return;\n    }\n\n    var timestampOffset = this.sourceUpdater_.videoTimestampOffset() === null ? this.sourceUpdater_.audioTimestampOffset() : this.sourceUpdater_.videoTimestampOffset(); // There's potentially an issue where we could double add metadata if there's a muxed\n    // audio/video source with a metadata track, and an alt audio with a metadata track.\n    // However, this probably won't happen, and if it does it can be handled then.\n\n    createMetadataTrackIfNotExists(this.inbandTextTracks_, dispatchType, this.vhs_.tech_);\n    addMetadata({\n      inbandTextTracks: this.inbandTextTracks_,\n      metadataArray: id3Frames,\n      timestampOffset: timestampOffset,\n      videoDuration: this.duration_()\n    });\n  };\n\n  _proto.processMetadataQueue_ = function processMetadataQueue_() {\n    this.metadataQueue_.id3.forEach(function (fn) {\n      return fn();\n    });\n    this.metadataQueue_.caption.forEach(function (fn) {\n      return fn();\n    });\n    this.metadataQueue_.id3 = [];\n    this.metadataQueue_.caption = [];\n  };\n\n  _proto.processCallQueue_ = function processCallQueue_() {\n    var callQueue = this.callQueue_; // Clear out the queue before the queued functions are run, since some of the\n    // functions may check the length of the load queue and default to pushing themselves\n    // back onto the queue.\n\n    this.callQueue_ = [];\n    callQueue.forEach(function (fun) {\n      return fun();\n    });\n  };\n\n  _proto.processLoadQueue_ = function processLoadQueue_() {\n    var loadQueue = this.loadQueue_; // Clear out the queue before the queued functions are run, since some of the\n    // functions may check the length of the load queue and default to pushing themselves\n    // back onto the queue.\n\n    this.loadQueue_ = [];\n    loadQueue.forEach(function (fun) {\n      return fun();\n    });\n  }\n  /**\n   * Determines whether the loader has enough info to load the next segment.\n   *\n   * @return {boolean}\n   *         Whether or not the loader has enough info to load the next segment\n   */\n  ;\n\n  _proto.hasEnoughInfoToLoad_ = function hasEnoughInfoToLoad_() {\n    // Since primary timing goes by video, only the audio loader potentially needs to wait\n    // to load.\n    if (this.loaderType_ !== 'audio') {\n      return true;\n    }\n\n    var segmentInfo = this.pendingSegment_; // A fill buffer must have already run to establish a pending segment before there's\n    // enough info to load.\n\n    if (!segmentInfo) {\n      return false;\n    } // The first segment can and should be loaded immediately so that source buffers are\n    // created together (before appending). Source buffer creation uses the presence of\n    // audio and video data to determine whether to create audio/video source buffers, and\n    // uses processed (transmuxed or parsed) media to determine the types required.\n\n\n    if (!this.getCurrentMediaInfo_()) {\n      return true;\n    }\n\n    if ( // Technically, instead of waiting to load a segment on timeline changes, a segment\n    // can be requested and downloaded and only wait before it is transmuxed or parsed.\n    // But in practice, there are a few reasons why it is better to wait until a loader\n    // is ready to append that segment before requesting and downloading:\n    //\n    // 1. Because audio and main loaders cross discontinuities together, if this loader\n    //    is waiting for the other to catch up, then instead of requesting another\n    //    segment and using up more bandwidth, by not yet loading, more bandwidth is\n    //    allotted to the loader currently behind.\n    // 2. media-segment-request doesn't have to have logic to consider whether a segment\n    // is ready to be processed or not, isolating the queueing behavior to the loader.\n    // 3. The audio loader bases some of its segment properties on timing information\n    //    provided by the main loader, meaning that, if the logic for waiting on\n    //    processing was in media-segment-request, then it would also need to know how\n    //    to re-generate the segment information after the main loader caught up.\n    shouldWaitForTimelineChange({\n      timelineChangeController: this.timelineChangeController_,\n      currentTimeline: this.currentTimeline_,\n      segmentTimeline: segmentInfo.timeline,\n      loaderType: this.loaderType_,\n      audioDisabled: this.audioDisabled_\n    })) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.getCurrentMediaInfo_ = function getCurrentMediaInfo_(segmentInfo) {\n    if (segmentInfo === void 0) {\n      segmentInfo = this.pendingSegment_;\n    }\n\n    return segmentInfo && segmentInfo.trackInfo || this.currentMediaInfo_;\n  };\n\n  _proto.getMediaInfo_ = function getMediaInfo_(segmentInfo) {\n    if (segmentInfo === void 0) {\n      segmentInfo = this.pendingSegment_;\n    }\n\n    return this.getCurrentMediaInfo_(segmentInfo) || this.startingMediaInfo_;\n  };\n\n  _proto.hasEnoughInfoToAppend_ = function hasEnoughInfoToAppend_() {\n    if (!this.sourceUpdater_.ready()) {\n      return false;\n    } // If content needs to be removed or the loader is waiting on an append reattempt,\n    // then no additional content should be appended until the prior append is resolved.\n\n\n    if (this.waitingOnRemove_ || this.quotaExceededErrorRetryTimeout_) {\n      return false;\n    }\n\n    var segmentInfo = this.pendingSegment_;\n    var trackInfo = this.getCurrentMediaInfo_(); // no segment to append any data for or\n    // we do not have information on this specific\n    // segment yet\n\n    if (!segmentInfo || !trackInfo) {\n      return false;\n    }\n\n    var hasAudio = trackInfo.hasAudio,\n        hasVideo = trackInfo.hasVideo,\n        isMuxed = trackInfo.isMuxed;\n\n    if (hasVideo && !segmentInfo.videoTimingInfo) {\n      return false;\n    } // muxed content only relies on video timing information for now.\n\n\n    if (hasAudio && !this.audioDisabled_ && !isMuxed && !segmentInfo.audioTimingInfo) {\n      return false;\n    }\n\n    if (shouldWaitForTimelineChange({\n      timelineChangeController: this.timelineChangeController_,\n      currentTimeline: this.currentTimeline_,\n      segmentTimeline: segmentInfo.timeline,\n      loaderType: this.loaderType_,\n      audioDisabled: this.audioDisabled_\n    })) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.handleData_ = function handleData_(simpleSegment, result) {\n    this.earlyAbortWhenNeeded_(simpleSegment.stats);\n\n    if (this.checkForAbort_(simpleSegment.requestId)) {\n      return;\n    } // If there's anything in the call queue, then this data came later and should be\n    // executed after the calls currently queued.\n\n\n    if (this.callQueue_.length || !this.hasEnoughInfoToAppend_()) {\n      this.callQueue_.push(this.handleData_.bind(this, simpleSegment, result));\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // update the time mapping so we can translate from display time to media time\n\n    this.setTimeMapping_(segmentInfo.timeline); // for tracking overall stats\n\n    this.updateMediaSecondsLoaded_(segmentInfo.part || segmentInfo.segment); // Note that the state isn't changed from loading to appending. This is because abort\n    // logic may change behavior depending on the state, and changing state too early may\n    // inflate our estimates of bandwidth. In the future this should be re-examined to\n    // note more granular states.\n    // don't process and append data if the mediaSource is closed\n\n    if (this.mediaSource_.readyState === 'closed') {\n      return;\n    } // if this request included an initialization segment, save that data\n    // to the initSegment cache\n\n\n    if (simpleSegment.map) {\n      simpleSegment.map = this.initSegmentForMap(simpleSegment.map, true); // move over init segment properties to media request\n\n      segmentInfo.segment.map = simpleSegment.map;\n    } // if this request included a segment key, save that data in the cache\n\n\n    if (simpleSegment.key) {\n      this.segmentKey(simpleSegment.key, true);\n    }\n\n    segmentInfo.isFmp4 = simpleSegment.isFmp4;\n    segmentInfo.timingInfo = segmentInfo.timingInfo || {};\n\n    if (segmentInfo.isFmp4) {\n      this.trigger('fmp4');\n      segmentInfo.timingInfo.start = segmentInfo[timingInfoPropertyForMedia(result.type)].start;\n    } else {\n      var trackInfo = this.getCurrentMediaInfo_();\n      var useVideoTimingInfo = this.loaderType_ === 'main' && trackInfo && trackInfo.hasVideo;\n      var firstVideoFrameTimeForData;\n\n      if (useVideoTimingInfo) {\n        firstVideoFrameTimeForData = segmentInfo.videoTimingInfo.start;\n      } // Segment loader knows more about segment timing than the transmuxer (in certain\n      // aspects), so make any changes required for a more accurate start time.\n      // Don't set the end time yet, as the segment may not be finished processing.\n\n\n      segmentInfo.timingInfo.start = this.trueSegmentStart_({\n        currentStart: segmentInfo.timingInfo.start,\n        playlist: segmentInfo.playlist,\n        mediaIndex: segmentInfo.mediaIndex,\n        currentVideoTimestampOffset: this.sourceUpdater_.videoTimestampOffset(),\n        useVideoTimingInfo: useVideoTimingInfo,\n        firstVideoFrameTimeForData: firstVideoFrameTimeForData,\n        videoTimingInfo: segmentInfo.videoTimingInfo,\n        audioTimingInfo: segmentInfo.audioTimingInfo\n      });\n    } // Init segments for audio and video only need to be appended in certain cases. Now\n    // that data is about to be appended, we can check the final cases to determine\n    // whether we should append an init segment.\n\n\n    this.updateAppendInitSegmentStatus(segmentInfo, result.type); // Timestamp offset should be updated once we get new data and have its timing info,\n    // as we use the start of the segment to offset the best guess (playlist provided)\n    // timestamp offset.\n\n    this.updateSourceBufferTimestampOffset_(segmentInfo); // if this is a sync request we need to determine whether it should\n    // be appended or not.\n\n    if (segmentInfo.isSyncRequest) {\n      // first save/update our timing info for this segment.\n      // this is what allows us to choose an accurate segment\n      // and the main reason we make a sync request.\n      this.updateTimingInfoEnd_(segmentInfo);\n      this.syncController_.saveSegmentTimingInfo({\n        segmentInfo: segmentInfo,\n        shouldSaveTimelineMapping: this.loaderType_ === 'main'\n      });\n      var next = this.chooseNextRequest_(); // If the sync request isn't the segment that would be requested next\n      // after taking into account its timing info, do not append it.\n\n      if (next.mediaIndex !== segmentInfo.mediaIndex || next.partIndex !== segmentInfo.partIndex) {\n        this.logger_('sync segment was incorrect, not appending');\n        return;\n      } // otherwise append it like any other segment as our guess was correct.\n\n\n      this.logger_('sync segment was correct, appending');\n    } // Save some state so that in the future anything waiting on first append (and/or\n    // timestamp offset(s)) can process immediately. While the extra state isn't optimal,\n    // we need some notion of whether the timestamp offset or other relevant information\n    // has had a chance to be set.\n\n\n    segmentInfo.hasAppendedData_ = true; // Now that the timestamp offset should be set, we can append any waiting ID3 tags.\n\n    this.processMetadataQueue_();\n    this.appendData_(segmentInfo, result);\n  };\n\n  _proto.updateAppendInitSegmentStatus = function updateAppendInitSegmentStatus(segmentInfo, type) {\n    // alt audio doesn't manage timestamp offset\n    if (this.loaderType_ === 'main' && typeof segmentInfo.timestampOffset === 'number' && // in the case that we're handling partial data, we don't want to append an init\n    // segment for each chunk\n    !segmentInfo.changedTimestampOffset) {\n      // if the timestamp offset changed, the timeline may have changed, so we have to re-\n      // append init segments\n      this.appendInitSegment_ = {\n        audio: true,\n        video: true\n      };\n    }\n\n    if (this.playlistOfLastInitSegment_[type] !== segmentInfo.playlist) {\n      // make sure we append init segment on playlist changes, in case the media config\n      // changed\n      this.appendInitSegment_[type] = true;\n    }\n  };\n\n  _proto.getInitSegmentAndUpdateState_ = function getInitSegmentAndUpdateState_(_ref4) {\n    var type = _ref4.type,\n        initSegment = _ref4.initSegment,\n        map = _ref4.map,\n        playlist = _ref4.playlist; // \"The EXT-X-MAP tag specifies how to obtain the Media Initialization Section\n    // (Section 3) required to parse the applicable Media Segments.  It applies to every\n    // Media Segment that appears after it in the Playlist until the next EXT-X-MAP tag\n    // or until the end of the playlist.\"\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.5\n\n    if (map) {\n      var id = initSegmentId(map);\n\n      if (this.activeInitSegmentId_ === id) {\n        // don't need to re-append the init segment if the ID matches\n        return null;\n      } // a map-specified init segment takes priority over any transmuxed (or otherwise\n      // obtained) init segment\n      //\n      // this also caches the init segment for later use\n\n\n      initSegment = this.initSegmentForMap(map, true).bytes;\n      this.activeInitSegmentId_ = id;\n    } // We used to always prepend init segments for video, however, that shouldn't be\n    // necessary. Instead, we should only append on changes, similar to what we've always\n    // done for audio. This is more important (though may not be that important) for\n    // frame-by-frame appending for LHLS, simply because of the increased quantity of\n    // appends.\n\n\n    if (initSegment && this.appendInitSegment_[type]) {\n      // Make sure we track the playlist that we last used for the init segment, so that\n      // we can re-append the init segment in the event that we get data from a new\n      // playlist. Discontinuities and track changes are handled in other sections.\n      this.playlistOfLastInitSegment_[type] = playlist; // Disable future init segment appends for this type. Until a change is necessary.\n\n      this.appendInitSegment_[type] = false; // we need to clear out the fmp4 active init segment id, since\n      // we are appending the muxer init segment\n\n      this.activeInitSegmentId_ = null;\n      return initSegment;\n    }\n\n    return null;\n  };\n\n  _proto.handleQuotaExceededError_ = function handleQuotaExceededError_(_ref5, error) {\n    var _this3 = this;\n\n    var segmentInfo = _ref5.segmentInfo,\n        type = _ref5.type,\n        bytes = _ref5.bytes;\n    var audioBuffered = this.sourceUpdater_.audioBuffered();\n    var videoBuffered = this.sourceUpdater_.videoBuffered(); // For now we're ignoring any notion of gaps in the buffer, but they, in theory,\n    // should be cleared out during the buffer removals. However, log in case it helps\n    // debug.\n\n    if (audioBuffered.length > 1) {\n      this.logger_('On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: ' + timeRangesToArray(audioBuffered).join(', '));\n    }\n\n    if (videoBuffered.length > 1) {\n      this.logger_('On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: ' + timeRangesToArray(videoBuffered).join(', '));\n    }\n\n    var audioBufferStart = audioBuffered.length ? audioBuffered.start(0) : 0;\n    var audioBufferEnd = audioBuffered.length ? audioBuffered.end(audioBuffered.length - 1) : 0;\n    var videoBufferStart = videoBuffered.length ? videoBuffered.start(0) : 0;\n    var videoBufferEnd = videoBuffered.length ? videoBuffered.end(videoBuffered.length - 1) : 0;\n\n    if (audioBufferEnd - audioBufferStart <= MIN_BACK_BUFFER && videoBufferEnd - videoBufferStart <= MIN_BACK_BUFFER) {\n      // Can't remove enough buffer to make room for new segment (or the browser doesn't\n      // allow for appends of segments this size). In the future, it may be possible to\n      // split up the segment and append in pieces, but for now, error out this playlist\n      // in an attempt to switch to a more manageable rendition.\n      this.logger_('On QUOTA_EXCEEDED_ERR, single segment too large to append to ' + 'buffer, triggering an error. ' + (\"Appended byte length: \" + bytes.byteLength + \", \") + (\"audio buffer: \" + timeRangesToArray(audioBuffered).join(', ') + \", \") + (\"video buffer: \" + timeRangesToArray(videoBuffered).join(', ') + \", \"));\n      this.error({\n        message: 'Quota exceeded error with append of a single segment of content',\n        excludeUntil: Infinity\n      });\n      this.trigger('error');\n      return;\n    } // To try to resolve the quota exceeded error, clear back buffer and retry. This means\n    // that the segment-loader should block on future events until this one is handled, so\n    // that it doesn't keep moving onto further segments. Adding the call to the call\n    // queue will prevent further appends until waitingOnRemove_ and\n    // quotaExceededErrorRetryTimeout_ are cleared.\n    //\n    // Note that this will only block the current loader. In the case of demuxed content,\n    // the other load may keep filling as fast as possible. In practice, this should be\n    // OK, as it is a rare case when either audio has a high enough bitrate to fill up a\n    // source buffer, or video fills without enough room for audio to append (and without\n    // the availability of clearing out seconds of back buffer to make room for audio).\n    // But it might still be good to handle this case in the future as a TODO.\n\n\n    this.waitingOnRemove_ = true;\n    this.callQueue_.push(this.appendToSourceBuffer_.bind(this, {\n      segmentInfo: segmentInfo,\n      type: type,\n      bytes: bytes\n    }));\n    var currentTime = this.currentTime_(); // Try to remove as much audio and video as possible to make room for new content\n    // before retrying.\n\n    var timeToRemoveUntil = currentTime - MIN_BACK_BUFFER;\n    this.logger_(\"On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to \" + timeToRemoveUntil);\n    this.remove(0, timeToRemoveUntil, function () {\n      _this3.logger_(\"On QUOTA_EXCEEDED_ERR, retrying append in \" + MIN_BACK_BUFFER + \"s\");\n\n      _this3.waitingOnRemove_ = false; // wait the length of time alotted in the back buffer to prevent wasted\n      // attempts (since we can't clear less than the minimum)\n\n      _this3.quotaExceededErrorRetryTimeout_ = window$1.setTimeout(function () {\n        _this3.logger_('On QUOTA_EXCEEDED_ERR, re-processing call queue');\n\n        _this3.quotaExceededErrorRetryTimeout_ = null;\n\n        _this3.processCallQueue_();\n      }, MIN_BACK_BUFFER * 1000);\n    }, true);\n  };\n\n  _proto.handleAppendError_ = function handleAppendError_(_ref6, error) {\n    var segmentInfo = _ref6.segmentInfo,\n        type = _ref6.type,\n        bytes = _ref6.bytes; // if there's no error, nothing to do\n\n    if (!error) {\n      return;\n    }\n\n    if (error.code === QUOTA_EXCEEDED_ERR) {\n      this.handleQuotaExceededError_({\n        segmentInfo: segmentInfo,\n        type: type,\n        bytes: bytes\n      }); // A quota exceeded error should be recoverable with a future re-append, so no need\n      // to trigger an append error.\n\n      return;\n    }\n\n    this.logger_('Received non QUOTA_EXCEEDED_ERR on append', error);\n    this.error(type + \" append of \" + bytes.length + \"b failed for segment \" + (\"#\" + segmentInfo.mediaIndex + \" in playlist \" + segmentInfo.playlist.id)); // If an append errors, we often can't recover.\n    // (see https://w3c.github.io/media-source/#sourcebuffer-append-error).\n    //\n    // Trigger a special error so that it can be handled separately from normal,\n    // recoverable errors.\n\n    this.trigger('appenderror');\n  };\n\n  _proto.appendToSourceBuffer_ = function appendToSourceBuffer_(_ref7) {\n    var segmentInfo = _ref7.segmentInfo,\n        type = _ref7.type,\n        initSegment = _ref7.initSegment,\n        data = _ref7.data,\n        bytes = _ref7.bytes; // If this is a re-append, bytes were already created and don't need to be recreated\n\n    if (!bytes) {\n      var segments = [data];\n      var byteLength = data.byteLength;\n\n      if (initSegment) {\n        // if the media initialization segment is changing, append it before the content\n        // segment\n        segments.unshift(initSegment);\n        byteLength += initSegment.byteLength;\n      } // Technically we should be OK appending the init segment separately, however, we\n      // haven't yet tested that, and prepending is how we have always done things.\n\n\n      bytes = concatSegments({\n        bytes: byteLength,\n        segments: segments\n      });\n    }\n\n    this.sourceUpdater_.appendBuffer({\n      segmentInfo: segmentInfo,\n      type: type,\n      bytes: bytes\n    }, this.handleAppendError_.bind(this, {\n      segmentInfo: segmentInfo,\n      type: type,\n      bytes: bytes\n    }));\n  };\n\n  _proto.handleSegmentTimingInfo_ = function handleSegmentTimingInfo_(type, requestId, segmentTimingInfo) {\n    if (!this.pendingSegment_ || requestId !== this.pendingSegment_.requestId) {\n      return;\n    }\n\n    var segment = this.pendingSegment_.segment;\n    var timingInfoProperty = type + \"TimingInfo\";\n\n    if (!segment[timingInfoProperty]) {\n      segment[timingInfoProperty] = {};\n    }\n\n    segment[timingInfoProperty].transmuxerPrependedSeconds = segmentTimingInfo.prependedContentDuration || 0;\n    segment[timingInfoProperty].transmuxedPresentationStart = segmentTimingInfo.start.presentation;\n    segment[timingInfoProperty].transmuxedDecodeStart = segmentTimingInfo.start.decode;\n    segment[timingInfoProperty].transmuxedPresentationEnd = segmentTimingInfo.end.presentation;\n    segment[timingInfoProperty].transmuxedDecodeEnd = segmentTimingInfo.end.decode; // mainly used as a reference for debugging\n\n    segment[timingInfoProperty].baseMediaDecodeTime = segmentTimingInfo.baseMediaDecodeTime;\n  };\n\n  _proto.appendData_ = function appendData_(segmentInfo, result) {\n    var type = result.type,\n        data = result.data;\n\n    if (!data || !data.byteLength) {\n      return;\n    }\n\n    if (type === 'audio' && this.audioDisabled_) {\n      return;\n    }\n\n    var initSegment = this.getInitSegmentAndUpdateState_({\n      type: type,\n      initSegment: result.initSegment,\n      playlist: segmentInfo.playlist,\n      map: segmentInfo.isFmp4 ? segmentInfo.segment.map : null\n    });\n    this.appendToSourceBuffer_({\n      segmentInfo: segmentInfo,\n      type: type,\n      initSegment: initSegment,\n      data: data\n    });\n  }\n  /**\n   * load a specific segment from a request into the buffer\n   *\n   * @private\n   */\n  ;\n\n  _proto.loadSegment_ = function loadSegment_(segmentInfo) {\n    var _this4 = this;\n\n    this.state = 'WAITING';\n    this.pendingSegment_ = segmentInfo;\n    this.trimBackBuffer_(segmentInfo);\n\n    if (typeof segmentInfo.timestampOffset === 'number') {\n      if (this.transmuxer_) {\n        this.transmuxer_.postMessage({\n          action: 'clearAllMp4Captions'\n        });\n      }\n    }\n\n    if (!this.hasEnoughInfoToLoad_()) {\n      this.loadQueue_.push(function () {\n        // regenerate the audioAppendStart, timestampOffset, etc as they\n        // may have changed since this function was added to the queue.\n        var options = _extends({}, segmentInfo, {\n          forceTimestampOffset: true\n        });\n\n        _extends(segmentInfo, _this4.generateSegmentInfo_(options));\n\n        _this4.isPendingTimestampOffset_ = false;\n\n        _this4.updateTransmuxerAndRequestSegment_(segmentInfo);\n      });\n      return;\n    }\n\n    this.updateTransmuxerAndRequestSegment_(segmentInfo);\n  };\n\n  _proto.updateTransmuxerAndRequestSegment_ = function updateTransmuxerAndRequestSegment_(segmentInfo) {\n    var _this5 = this; // We'll update the source buffer's timestamp offset once we have transmuxed data, but\n    // the transmuxer still needs to be updated before then.\n    //\n    // Even though keepOriginalTimestamps is set to true for the transmuxer, timestamp\n    // offset must be passed to the transmuxer for stream correcting adjustments.\n\n\n    if (this.shouldUpdateTransmuxerTimestampOffset_(segmentInfo.timestampOffset)) {\n      this.gopBuffer_.length = 0; // gopsToAlignWith was set before the GOP buffer was cleared\n\n      segmentInfo.gopsToAlignWith = [];\n      this.timeMapping_ = 0; // reset values in the transmuxer since a discontinuity should start fresh\n\n      this.transmuxer_.postMessage({\n        action: 'reset'\n      });\n      this.transmuxer_.postMessage({\n        action: 'setTimestampOffset',\n        timestampOffset: segmentInfo.timestampOffset\n      });\n    }\n\n    var simpleSegment = this.createSimplifiedSegmentObj_(segmentInfo);\n    var isEndOfStream = this.isEndOfStream_(segmentInfo.mediaIndex, segmentInfo.playlist, segmentInfo.partIndex);\n    var isWalkingForward = this.mediaIndex !== null;\n    var isDiscontinuity = segmentInfo.timeline !== this.currentTimeline_ && // currentTimeline starts at -1, so we shouldn't end the timeline switching to 0,\n    // the first timeline\n    segmentInfo.timeline > 0;\n    var isEndOfTimeline = isEndOfStream || isWalkingForward && isDiscontinuity;\n    this.logger_(\"Requesting \" + segmentInfoString(segmentInfo)); // If there's an init segment associated with this segment, but it is not cached (identified by a lack of bytes),\n    // then this init segment has never been seen before and should be appended.\n    //\n    // At this point the content type (audio/video or both) is not yet known, but it should be safe to set\n    // both to true and leave the decision of whether to append the init segment to append time.\n\n    if (simpleSegment.map && !simpleSegment.map.bytes) {\n      this.logger_('going to request init segment.');\n      this.appendInitSegment_ = {\n        video: true,\n        audio: true\n      };\n    }\n\n    segmentInfo.abortRequests = mediaSegmentRequest({\n      xhr: this.vhs_.xhr,\n      xhrOptions: this.xhrOptions_,\n      decryptionWorker: this.decrypter_,\n      segment: simpleSegment,\n      abortFn: this.handleAbort_.bind(this, segmentInfo),\n      progressFn: this.handleProgress_.bind(this),\n      trackInfoFn: this.handleTrackInfo_.bind(this),\n      timingInfoFn: this.handleTimingInfo_.bind(this),\n      videoSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, 'video', segmentInfo.requestId),\n      audioSegmentTimingInfoFn: this.handleSegmentTimingInfo_.bind(this, 'audio', segmentInfo.requestId),\n      captionsFn: this.handleCaptions_.bind(this),\n      isEndOfTimeline: isEndOfTimeline,\n      endedTimelineFn: function endedTimelineFn() {\n        _this5.logger_('received endedtimeline callback');\n      },\n      id3Fn: this.handleId3_.bind(this),\n      dataFn: this.handleData_.bind(this),\n      doneFn: this.segmentRequestFinished_.bind(this),\n      onTransmuxerLog: function onTransmuxerLog(_ref8) {\n        var message = _ref8.message,\n            level = _ref8.level,\n            stream = _ref8.stream;\n\n        _this5.logger_(segmentInfoString(segmentInfo) + \" logged from transmuxer stream \" + stream + \" as a \" + level + \": \" + message);\n      }\n    });\n  }\n  /**\n   * trim the back buffer so that we don't have too much data\n   * in the source buffer\n   *\n   * @private\n   *\n   * @param {Object} segmentInfo - the current segment\n   */\n  ;\n\n  _proto.trimBackBuffer_ = function trimBackBuffer_(segmentInfo) {\n    var removeToTime = safeBackBufferTrimTime(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10); // Chrome has a hard limit of 150MB of\n    // buffer and a very conservative \"garbage collector\"\n    // We manually clear out the old buffer to ensure\n    // we don't trigger the QuotaExceeded error\n    // on the source buffer during subsequent appends\n\n    if (removeToTime > 0) {\n      this.remove(0, removeToTime);\n    }\n  }\n  /**\n   * created a simplified copy of the segment object with just the\n   * information necessary to perform the XHR and decryption\n   *\n   * @private\n   *\n   * @param {Object} segmentInfo - the current segment\n   * @return {Object} a simplified segment object copy\n   */\n  ;\n\n  _proto.createSimplifiedSegmentObj_ = function createSimplifiedSegmentObj_(segmentInfo) {\n    var segment = segmentInfo.segment;\n    var part = segmentInfo.part;\n    var simpleSegment = {\n      resolvedUri: part ? part.resolvedUri : segment.resolvedUri,\n      byterange: part ? part.byterange : segment.byterange,\n      requestId: segmentInfo.requestId,\n      transmuxer: segmentInfo.transmuxer,\n      audioAppendStart: segmentInfo.audioAppendStart,\n      gopsToAlignWith: segmentInfo.gopsToAlignWith,\n      part: segmentInfo.part\n    };\n    var previousSegment = segmentInfo.playlist.segments[segmentInfo.mediaIndex - 1];\n\n    if (previousSegment && previousSegment.timeline === segment.timeline) {\n      // The baseStartTime of a segment is used to handle rollover when probing the TS\n      // segment to retrieve timing information. Since the probe only looks at the media's\n      // times (e.g., PTS and DTS values of the segment), and doesn't consider the\n      // player's time (e.g., player.currentTime()), baseStartTime should reflect the\n      // media time as well. transmuxedDecodeEnd represents the end time of a segment, in\n      // seconds of media time, so should be used here. The previous segment is used since\n      // the end of the previous segment should represent the beginning of the current\n      // segment, so long as they are on the same timeline.\n      if (previousSegment.videoTimingInfo) {\n        simpleSegment.baseStartTime = previousSegment.videoTimingInfo.transmuxedDecodeEnd;\n      } else if (previousSegment.audioTimingInfo) {\n        simpleSegment.baseStartTime = previousSegment.audioTimingInfo.transmuxedDecodeEnd;\n      }\n    }\n\n    if (segment.key) {\n      // if the media sequence is greater than 2^32, the IV will be incorrect\n      // assuming 10s segments, that would be about 1300 years\n      var iv = segment.key.iv || new Uint32Array([0, 0, 0, segmentInfo.mediaIndex + segmentInfo.playlist.mediaSequence]);\n      simpleSegment.key = this.segmentKey(segment.key);\n      simpleSegment.key.iv = iv;\n    }\n\n    if (segment.map) {\n      simpleSegment.map = this.initSegmentForMap(segment.map);\n    }\n\n    return simpleSegment;\n  };\n\n  _proto.saveTransferStats_ = function saveTransferStats_(stats) {\n    // every request counts as a media request even if it has been aborted\n    // or canceled due to a timeout\n    this.mediaRequests += 1;\n\n    if (stats) {\n      this.mediaBytesTransferred += stats.bytesReceived;\n      this.mediaTransferDuration += stats.roundTripTime;\n    }\n  };\n\n  _proto.saveBandwidthRelatedStats_ = function saveBandwidthRelatedStats_(duration, stats) {\n    // byteLength will be used for throughput, and should be based on bytes receieved,\n    // which we only know at the end of the request and should reflect total bytes\n    // downloaded rather than just bytes processed from components of the segment\n    this.pendingSegment_.byteLength = stats.bytesReceived;\n\n    if (duration < MIN_SEGMENT_DURATION_TO_SAVE_STATS) {\n      this.logger_(\"Ignoring segment's bandwidth because its duration of \" + duration + (\" is less than the min to record \" + MIN_SEGMENT_DURATION_TO_SAVE_STATS));\n      return;\n    }\n\n    this.bandwidth = stats.bandwidth;\n    this.roundTrip = stats.roundTripTime;\n  };\n\n  _proto.handleTimeout_ = function handleTimeout_() {\n    // although the VTT segment loader bandwidth isn't really used, it's good to\n    // maintain functinality between segment loaders\n    this.mediaRequestsTimedout += 1;\n    this.bandwidth = 1;\n    this.roundTrip = NaN;\n    this.trigger('bandwidthupdate');\n  }\n  /**\n   * Handle the callback from the segmentRequest function and set the\n   * associated SegmentLoader state and errors if necessary\n   *\n   * @private\n   */\n  ;\n\n  _proto.segmentRequestFinished_ = function segmentRequestFinished_(error, simpleSegment, result) {\n    // TODO handle special cases, e.g., muxed audio/video but only audio in the segment\n    // check the call queue directly since this function doesn't need to deal with any\n    // data, and can continue even if the source buffers are not set up and we didn't get\n    // any data from the segment\n    if (this.callQueue_.length) {\n      this.callQueue_.push(this.segmentRequestFinished_.bind(this, error, simpleSegment, result));\n      return;\n    }\n\n    this.saveTransferStats_(simpleSegment.stats); // The request was aborted and the SegmentLoader has already been reset\n\n    if (!this.pendingSegment_) {\n      return;\n    } // the request was aborted and the SegmentLoader has already started\n    // another request. this can happen when the timeout for an aborted\n    // request triggers due to a limitation in the XHR library\n    // do not count this as any sort of request or we risk double-counting\n\n\n    if (simpleSegment.requestId !== this.pendingSegment_.requestId) {\n      return;\n    } // an error occurred from the active pendingSegment_ so reset everything\n\n\n    if (error) {\n      this.pendingSegment_ = null;\n      this.state = 'READY'; // aborts are not a true error condition and nothing corrective needs to be done\n\n      if (error.code === REQUEST_ERRORS.ABORTED) {\n        return;\n      }\n\n      this.pause(); // the error is really just that at least one of the requests timed-out\n      // set the bandwidth to a very low value and trigger an ABR switch to\n      // take emergency action\n\n      if (error.code === REQUEST_ERRORS.TIMEOUT) {\n        this.handleTimeout_();\n        return;\n      } // if control-flow has arrived here, then the error is real\n      // emit an error event to blacklist the current playlist\n\n\n      this.mediaRequestsErrored += 1;\n      this.error(error);\n      this.trigger('error');\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // the response was a success so set any bandwidth stats the request\n    // generated for ABR purposes\n\n    this.saveBandwidthRelatedStats_(segmentInfo.duration, simpleSegment.stats);\n    segmentInfo.endOfAllRequests = simpleSegment.endOfAllRequests;\n\n    if (result.gopInfo) {\n      this.gopBuffer_ = updateGopBuffer(this.gopBuffer_, result.gopInfo, this.safeAppend_);\n    } // Although we may have already started appending on progress, we shouldn't switch the\n    // state away from loading until we are officially done loading the segment data.\n\n\n    this.state = 'APPENDING'; // used for testing\n\n    this.trigger('appending');\n    this.waitForAppendsToComplete_(segmentInfo);\n  };\n\n  _proto.setTimeMapping_ = function setTimeMapping_(timeline) {\n    var timelineMapping = this.syncController_.mappingForTimeline(timeline);\n\n    if (timelineMapping !== null) {\n      this.timeMapping_ = timelineMapping;\n    }\n  };\n\n  _proto.updateMediaSecondsLoaded_ = function updateMediaSecondsLoaded_(segment) {\n    if (typeof segment.start === 'number' && typeof segment.end === 'number') {\n      this.mediaSecondsLoaded += segment.end - segment.start;\n    } else {\n      this.mediaSecondsLoaded += segment.duration;\n    }\n  };\n\n  _proto.shouldUpdateTransmuxerTimestampOffset_ = function shouldUpdateTransmuxerTimestampOffset_(timestampOffset) {\n    if (timestampOffset === null) {\n      return false;\n    } // note that we're potentially using the same timestamp offset for both video and\n    // audio\n\n\n    if (this.loaderType_ === 'main' && timestampOffset !== this.sourceUpdater_.videoTimestampOffset()) {\n      return true;\n    }\n\n    if (!this.audioDisabled_ && timestampOffset !== this.sourceUpdater_.audioTimestampOffset()) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.trueSegmentStart_ = function trueSegmentStart_(_ref9) {\n    var currentStart = _ref9.currentStart,\n        playlist = _ref9.playlist,\n        mediaIndex = _ref9.mediaIndex,\n        firstVideoFrameTimeForData = _ref9.firstVideoFrameTimeForData,\n        currentVideoTimestampOffset = _ref9.currentVideoTimestampOffset,\n        useVideoTimingInfo = _ref9.useVideoTimingInfo,\n        videoTimingInfo = _ref9.videoTimingInfo,\n        audioTimingInfo = _ref9.audioTimingInfo;\n\n    if (typeof currentStart !== 'undefined') {\n      // if start was set once, keep using it\n      return currentStart;\n    }\n\n    if (!useVideoTimingInfo) {\n      return audioTimingInfo.start;\n    }\n\n    var previousSegment = playlist.segments[mediaIndex - 1]; // The start of a segment should be the start of the first full frame contained\n    // within that segment. Since the transmuxer maintains a cache of incomplete data\n    // from and/or the last frame seen, the start time may reflect a frame that starts\n    // in the previous segment. Check for that case and ensure the start time is\n    // accurate for the segment.\n\n    if (mediaIndex === 0 || !previousSegment || typeof previousSegment.start === 'undefined' || previousSegment.end !== firstVideoFrameTimeForData + currentVideoTimestampOffset) {\n      return firstVideoFrameTimeForData;\n    }\n\n    return videoTimingInfo.start;\n  };\n\n  _proto.waitForAppendsToComplete_ = function waitForAppendsToComplete_(segmentInfo) {\n    var trackInfo = this.getCurrentMediaInfo_(segmentInfo);\n\n    if (!trackInfo) {\n      this.error({\n        message: 'No starting media returned, likely due to an unsupported media format.',\n        blacklistDuration: Infinity\n      });\n      this.trigger('error');\n      return;\n    } // Although transmuxing is done, appends may not yet be finished. Throw a marker\n    // on each queue this loader is responsible for to ensure that the appends are\n    // complete.\n\n\n    var hasAudio = trackInfo.hasAudio,\n        hasVideo = trackInfo.hasVideo,\n        isMuxed = trackInfo.isMuxed;\n    var waitForVideo = this.loaderType_ === 'main' && hasVideo;\n    var waitForAudio = !this.audioDisabled_ && hasAudio && !isMuxed;\n    segmentInfo.waitingOnAppends = 0; // segments with no data\n\n    if (!segmentInfo.hasAppendedData_) {\n      if (!segmentInfo.timingInfo && typeof segmentInfo.timestampOffset === 'number') {\n        // When there's no audio or video data in the segment, there's no audio or video\n        // timing information.\n        //\n        // If there's no audio or video timing information, then the timestamp offset\n        // can't be adjusted to the appropriate value for the transmuxer and source\n        // buffers.\n        //\n        // Therefore, the next segment should be used to set the timestamp offset.\n        this.isPendingTimestampOffset_ = true;\n      } // override settings for metadata only segments\n\n\n      segmentInfo.timingInfo = {\n        start: 0\n      };\n      segmentInfo.waitingOnAppends++;\n\n      if (!this.isPendingTimestampOffset_) {\n        // update the timestampoffset\n        this.updateSourceBufferTimestampOffset_(segmentInfo); // make sure the metadata queue is processed even though we have\n        // no video/audio data.\n\n        this.processMetadataQueue_();\n      } // append is \"done\" instantly with no data.\n\n\n      this.checkAppendsDone_(segmentInfo);\n      return;\n    } // Since source updater could call back synchronously, do the increments first.\n\n\n    if (waitForVideo) {\n      segmentInfo.waitingOnAppends++;\n    }\n\n    if (waitForAudio) {\n      segmentInfo.waitingOnAppends++;\n    }\n\n    if (waitForVideo) {\n      this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this, segmentInfo));\n    }\n\n    if (waitForAudio) {\n      this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this, segmentInfo));\n    }\n  };\n\n  _proto.checkAppendsDone_ = function checkAppendsDone_(segmentInfo) {\n    if (this.checkForAbort_(segmentInfo.requestId)) {\n      return;\n    }\n\n    segmentInfo.waitingOnAppends--;\n\n    if (segmentInfo.waitingOnAppends === 0) {\n      this.handleAppendsDone_();\n    }\n  };\n\n  _proto.checkForIllegalMediaSwitch = function checkForIllegalMediaSwitch(trackInfo) {\n    var illegalMediaSwitchError = illegalMediaSwitch(this.loaderType_, this.getCurrentMediaInfo_(), trackInfo);\n\n    if (illegalMediaSwitchError) {\n      this.error({\n        message: illegalMediaSwitchError,\n        blacklistDuration: Infinity\n      });\n      this.trigger('error');\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.updateSourceBufferTimestampOffset_ = function updateSourceBufferTimestampOffset_(segmentInfo) {\n    if (segmentInfo.timestampOffset === null || // we don't yet have the start for whatever media type (video or audio) has\n    // priority, timing-wise, so we must wait\n    typeof segmentInfo.timingInfo.start !== 'number' || // already updated the timestamp offset for this segment\n    segmentInfo.changedTimestampOffset || // the alt audio loader should not be responsible for setting the timestamp offset\n    this.loaderType_ !== 'main') {\n      return;\n    }\n\n    var didChange = false; // Primary timing goes by video, and audio is trimmed in the transmuxer, meaning that\n    // the timing info here comes from video. In the event that the audio is longer than\n    // the video, this will trim the start of the audio.\n    // This also trims any offset from 0 at the beginning of the media\n\n    segmentInfo.timestampOffset -= segmentInfo.timingInfo.start; // In the event that there are part segment downloads, each will try to update the\n    // timestamp offset. Retaining this bit of state prevents us from updating in the\n    // future (within the same segment), however, there may be a better way to handle it.\n\n    segmentInfo.changedTimestampOffset = true;\n\n    if (segmentInfo.timestampOffset !== this.sourceUpdater_.videoTimestampOffset()) {\n      this.sourceUpdater_.videoTimestampOffset(segmentInfo.timestampOffset);\n      didChange = true;\n    }\n\n    if (segmentInfo.timestampOffset !== this.sourceUpdater_.audioTimestampOffset()) {\n      this.sourceUpdater_.audioTimestampOffset(segmentInfo.timestampOffset);\n      didChange = true;\n    }\n\n    if (didChange) {\n      this.trigger('timestampoffset');\n    }\n  };\n\n  _proto.updateTimingInfoEnd_ = function updateTimingInfoEnd_(segmentInfo) {\n    segmentInfo.timingInfo = segmentInfo.timingInfo || {};\n    var trackInfo = this.getMediaInfo_();\n    var useVideoTimingInfo = this.loaderType_ === 'main' && trackInfo && trackInfo.hasVideo;\n    var prioritizedTimingInfo = useVideoTimingInfo && segmentInfo.videoTimingInfo ? segmentInfo.videoTimingInfo : segmentInfo.audioTimingInfo;\n\n    if (!prioritizedTimingInfo) {\n      return;\n    }\n\n    segmentInfo.timingInfo.end = typeof prioritizedTimingInfo.end === 'number' ? // End time may not exist in a case where we aren't parsing the full segment (one\n    // current example is the case of fmp4), so use the rough duration to calculate an\n    // end time.\n    prioritizedTimingInfo.end : prioritizedTimingInfo.start + segmentInfo.duration;\n  }\n  /**\n   * callback to run when appendBuffer is finished. detects if we are\n   * in a good state to do things with the data we got, or if we need\n   * to wait for more\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleAppendsDone_ = function handleAppendsDone_() {\n    // appendsdone can cause an abort\n    if (this.pendingSegment_) {\n      this.trigger('appendsdone');\n    }\n\n    if (!this.pendingSegment_) {\n      this.state = 'READY'; // TODO should this move into this.checkForAbort to speed up requests post abort in\n      // all appending cases?\n\n      if (!this.paused()) {\n        this.monitorBuffer_();\n      }\n\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // Now that the end of the segment has been reached, we can set the end time. It's\n    // best to wait until all appends are done so we're sure that the primary media is\n    // finished (and we have its end time).\n\n    this.updateTimingInfoEnd_(segmentInfo);\n\n    if (this.shouldSaveSegmentTimingInfo_) {\n      // Timeline mappings should only be saved for the main loader. This is for multiple\n      // reasons:\n      //\n      // 1) Only one mapping is saved per timeline, meaning that if both the audio loader\n      //    and the main loader try to save the timeline mapping, whichever comes later\n      //    will overwrite the first. In theory this is OK, as the mappings should be the\n      //    same, however, it breaks for (2)\n      // 2) In the event of a live stream, the initial live point will make for a somewhat\n      //    arbitrary mapping. If audio and video streams are not perfectly in-sync, then\n      //    the mapping will be off for one of the streams, dependent on which one was\n      //    first saved (see (1)).\n      // 3) Primary timing goes by video in VHS, so the mapping should be video.\n      //\n      // Since the audio loader will wait for the main loader to load the first segment,\n      // the main loader will save the first timeline mapping, and ensure that there won't\n      // be a case where audio loads two segments without saving a mapping (thus leading\n      // to missing segment timing info).\n      this.syncController_.saveSegmentTimingInfo({\n        segmentInfo: segmentInfo,\n        shouldSaveTimelineMapping: this.loaderType_ === 'main'\n      });\n    }\n\n    var segmentDurationMessage = getTroublesomeSegmentDurationMessage(segmentInfo, this.sourceType_);\n\n    if (segmentDurationMessage) {\n      if (segmentDurationMessage.severity === 'warn') {\n        videojs.log.warn(segmentDurationMessage.message);\n      } else {\n        this.logger_(segmentDurationMessage.message);\n      }\n    }\n\n    this.recordThroughput_(segmentInfo);\n    this.pendingSegment_ = null;\n    this.state = 'READY';\n\n    if (segmentInfo.isSyncRequest) {\n      this.trigger('syncinfoupdate'); // if the sync request was not appended\n      // then it was not the correct segment.\n      // throw it away and use the data it gave us\n      // to get the correct one.\n\n      if (!segmentInfo.hasAppendedData_) {\n        this.logger_(\"Throwing away un-appended sync request \" + segmentInfoString(segmentInfo));\n        return;\n      }\n    }\n\n    this.logger_(\"Appended \" + segmentInfoString(segmentInfo));\n    this.addSegmentMetadataCue_(segmentInfo);\n    this.fetchAtBuffer_ = true;\n\n    if (this.currentTimeline_ !== segmentInfo.timeline) {\n      this.timelineChangeController_.lastTimelineChange({\n        type: this.loaderType_,\n        from: this.currentTimeline_,\n        to: segmentInfo.timeline\n      }); // If audio is not disabled, the main segment loader is responsible for updating\n      // the audio timeline as well. If the content is video only, this won't have any\n      // impact.\n\n      if (this.loaderType_ === 'main' && !this.audioDisabled_) {\n        this.timelineChangeController_.lastTimelineChange({\n          type: 'audio',\n          from: this.currentTimeline_,\n          to: segmentInfo.timeline\n        });\n      }\n    }\n\n    this.currentTimeline_ = segmentInfo.timeline; // We must update the syncinfo to recalculate the seekable range before\n    // the following conditional otherwise it may consider this a bad \"guess\"\n    // and attempt to resync when the post-update seekable window and live\n    // point would mean that this was the perfect segment to fetch\n\n    this.trigger('syncinfoupdate');\n    var segment = segmentInfo.segment;\n    var part = segmentInfo.part;\n    var badSegmentGuess = segment.end && this.currentTime_() - segment.end > segmentInfo.playlist.targetDuration * 3;\n    var badPartGuess = part && part.end && this.currentTime_() - part.end > segmentInfo.playlist.partTargetDuration * 3; // If we previously appended a segment/part that ends more than 3 part/targetDurations before\n    // the currentTime_ that means that our conservative guess was too conservative.\n    // In that case, reset the loader state so that we try to use any information gained\n    // from the previous request to create a new, more accurate, sync-point.\n\n    if (badSegmentGuess || badPartGuess) {\n      this.logger_(\"bad \" + (badSegmentGuess ? 'segment' : 'part') + \" \" + segmentInfoString(segmentInfo));\n      this.resetEverything();\n      return;\n    }\n\n    var isWalkingForward = this.mediaIndex !== null; // Don't do a rendition switch unless we have enough time to get a sync segment\n    // and conservatively guess\n\n    if (isWalkingForward) {\n      this.trigger('bandwidthupdate');\n    }\n\n    this.trigger('progress');\n    this.mediaIndex = segmentInfo.mediaIndex;\n    this.partIndex = segmentInfo.partIndex; // any time an update finishes and the last segment is in the\n    // buffer, end the stream. this ensures the \"ended\" event will\n    // fire if playback reaches that point.\n\n    if (this.isEndOfStream_(segmentInfo.mediaIndex, segmentInfo.playlist, segmentInfo.partIndex)) {\n      this.endOfStream();\n    } // used for testing\n\n\n    this.trigger('appended');\n\n    if (segmentInfo.hasAppendedData_) {\n      this.mediaAppends++;\n    }\n\n    if (!this.paused()) {\n      this.monitorBuffer_();\n    }\n  }\n  /**\n   * Records the current throughput of the decrypt, transmux, and append\n   * portion of the semgment pipeline. `throughput.rate` is a the cumulative\n   * moving average of the throughput. `throughput.count` is the number of\n   * data points in the average.\n   *\n   * @private\n   * @param {Object} segmentInfo the object returned by loadSegment\n   */\n  ;\n\n  _proto.recordThroughput_ = function recordThroughput_(segmentInfo) {\n    if (segmentInfo.duration < MIN_SEGMENT_DURATION_TO_SAVE_STATS) {\n      this.logger_(\"Ignoring segment's throughput because its duration of \" + segmentInfo.duration + (\" is less than the min to record \" + MIN_SEGMENT_DURATION_TO_SAVE_STATS));\n      return;\n    }\n\n    var rate = this.throughput.rate; // Add one to the time to ensure that we don't accidentally attempt to divide\n    // by zero in the case where the throughput is ridiculously high\n\n    var segmentProcessingTime = Date.now() - segmentInfo.endOfAllRequests + 1; // Multiply by 8000 to convert from bytes/millisecond to bits/second\n\n    var segmentProcessingThroughput = Math.floor(segmentInfo.byteLength / segmentProcessingTime * 8 * 1000); // This is just a cumulative moving average calculation:\n    //   newAvg = oldAvg + (sample - oldAvg) / (sampleCount + 1)\n\n    this.throughput.rate += (segmentProcessingThroughput - rate) / ++this.throughput.count;\n  }\n  /**\n   * Adds a cue to the segment-metadata track with some metadata information about the\n   * segment\n   *\n   * @private\n   * @param {Object} segmentInfo\n   *        the object returned by loadSegment\n   * @method addSegmentMetadataCue_\n   */\n  ;\n\n  _proto.addSegmentMetadataCue_ = function addSegmentMetadataCue_(segmentInfo) {\n    if (!this.segmentMetadataTrack_) {\n      return;\n    }\n\n    var segment = segmentInfo.segment;\n    var start = segment.start;\n    var end = segment.end; // Do not try adding the cue if the start and end times are invalid.\n\n    if (!finite(start) || !finite(end)) {\n      return;\n    }\n\n    removeCuesFromTrack(start, end, this.segmentMetadataTrack_);\n    var Cue = window$1.WebKitDataCue || window$1.VTTCue;\n    var value = {\n      custom: segment.custom,\n      dateTimeObject: segment.dateTimeObject,\n      dateTimeString: segment.dateTimeString,\n      bandwidth: segmentInfo.playlist.attributes.BANDWIDTH,\n      resolution: segmentInfo.playlist.attributes.RESOLUTION,\n      codecs: segmentInfo.playlist.attributes.CODECS,\n      byteLength: segmentInfo.byteLength,\n      uri: segmentInfo.uri,\n      timeline: segmentInfo.timeline,\n      playlist: segmentInfo.playlist.id,\n      start: start,\n      end: end\n    };\n    var data = JSON.stringify(value);\n    var cue = new Cue(start, end, data); // Attach the metadata to the value property of the cue to keep consistency between\n    // the differences of WebKitDataCue in safari and VTTCue in other browsers\n\n    cue.value = value;\n    this.segmentMetadataTrack_.addCue(cue);\n  };\n\n  return SegmentLoader;\n}(videojs.EventTarget);\n\nfunction noop() {}\n\nvar toTitleCase = function toTitleCase(string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n\n  return string.replace(/./, function (w) {\n    return w.toUpperCase();\n  });\n};\n\nvar bufferTypes = ['video', 'audio'];\n\nvar _updating = function updating(type, sourceUpdater) {\n  var sourceBuffer = sourceUpdater[type + \"Buffer\"];\n  return sourceBuffer && sourceBuffer.updating || sourceUpdater.queuePending[type];\n};\n\nvar nextQueueIndexOfType = function nextQueueIndexOfType(type, queue) {\n  for (var i = 0; i < queue.length; i++) {\n    var queueEntry = queue[i];\n\n    if (queueEntry.type === 'mediaSource') {\n      // If the next entry is a media source entry (uses multiple source buffers), block\n      // processing to allow it to go through first.\n      return null;\n    }\n\n    if (queueEntry.type === type) {\n      return i;\n    }\n  }\n\n  return null;\n};\n\nvar shiftQueue = function shiftQueue(type, sourceUpdater) {\n  if (sourceUpdater.queue.length === 0) {\n    return;\n  }\n\n  var queueIndex = 0;\n  var queueEntry = sourceUpdater.queue[queueIndex];\n\n  if (queueEntry.type === 'mediaSource') {\n    if (!sourceUpdater.updating() && sourceUpdater.mediaSource.readyState !== 'closed') {\n      sourceUpdater.queue.shift();\n      queueEntry.action(sourceUpdater);\n\n      if (queueEntry.doneFn) {\n        queueEntry.doneFn();\n      } // Only specific source buffer actions must wait for async updateend events. Media\n      // Source actions process synchronously. Therefore, both audio and video source\n      // buffers are now clear to process the next queue entries.\n\n\n      shiftQueue('audio', sourceUpdater);\n      shiftQueue('video', sourceUpdater);\n    } // Media Source actions require both source buffers, so if the media source action\n    // couldn't process yet (because one or both source buffers are busy), block other\n    // queue actions until both are available and the media source action can process.\n\n\n    return;\n  }\n\n  if (type === 'mediaSource') {\n    // If the queue was shifted by a media source action (this happens when pushing a\n    // media source action onto the queue), then it wasn't from an updateend event from an\n    // audio or video source buffer, so there's no change from previous state, and no\n    // processing should be done.\n    return;\n  } // Media source queue entries don't need to consider whether the source updater is\n  // started (i.e., source buffers are created) as they don't need the source buffers, but\n  // source buffer queue entries do.\n\n\n  if (!sourceUpdater.ready() || sourceUpdater.mediaSource.readyState === 'closed' || _updating(type, sourceUpdater)) {\n    return;\n  }\n\n  if (queueEntry.type !== type) {\n    queueIndex = nextQueueIndexOfType(type, sourceUpdater.queue);\n\n    if (queueIndex === null) {\n      // Either there's no queue entry that uses this source buffer type in the queue, or\n      // there's a media source queue entry before the next entry of this type, in which\n      // case wait for that action to process first.\n      return;\n    }\n\n    queueEntry = sourceUpdater.queue[queueIndex];\n  }\n\n  sourceUpdater.queue.splice(queueIndex, 1); // Keep a record that this source buffer type is in use.\n  //\n  // The queue pending operation must be set before the action is performed in the event\n  // that the action results in a synchronous event that is acted upon. For instance, if\n  // an exception is thrown that can be handled, it's possible that new actions will be\n  // appended to an empty queue and immediately executed, but would not have the correct\n  // pending information if this property was set after the action was performed.\n\n  sourceUpdater.queuePending[type] = queueEntry;\n  queueEntry.action(type, sourceUpdater);\n\n  if (!queueEntry.doneFn) {\n    // synchronous operation, process next entry\n    sourceUpdater.queuePending[type] = null;\n    shiftQueue(type, sourceUpdater);\n    return;\n  }\n};\n\nvar cleanupBuffer = function cleanupBuffer(type, sourceUpdater) {\n  var buffer = sourceUpdater[type + \"Buffer\"];\n  var titleType = toTitleCase(type);\n\n  if (!buffer) {\n    return;\n  }\n\n  buffer.removeEventListener('updateend', sourceUpdater[\"on\" + titleType + \"UpdateEnd_\"]);\n  buffer.removeEventListener('error', sourceUpdater[\"on\" + titleType + \"Error_\"]);\n  sourceUpdater.codecs[type] = null;\n  sourceUpdater[type + \"Buffer\"] = null;\n};\n\nvar inSourceBuffers = function inSourceBuffers(mediaSource, sourceBuffer) {\n  return mediaSource && sourceBuffer && Array.prototype.indexOf.call(mediaSource.sourceBuffers, sourceBuffer) !== -1;\n};\n\nvar actions = {\n  appendBuffer: function appendBuffer(bytes, segmentInfo, onError) {\n    return function (type, sourceUpdater) {\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"]; // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"Appending segment \" + segmentInfo.mediaIndex + \"'s \" + bytes.length + \" bytes to \" + type + \"Buffer\");\n\n      try {\n        sourceBuffer.appendBuffer(bytes);\n      } catch (e) {\n        sourceUpdater.logger_(\"Error with code \" + e.code + \" \" + (e.code === QUOTA_EXCEEDED_ERR ? '(QUOTA_EXCEEDED_ERR) ' : '') + (\"when appending segment \" + segmentInfo.mediaIndex + \" to \" + type + \"Buffer\"));\n        sourceUpdater.queuePending[type] = null;\n        onError(e);\n      }\n    };\n  },\n  remove: function remove(start, end) {\n    return function (type, sourceUpdater) {\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"]; // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"Removing \" + start + \" to \" + end + \" from \" + type + \"Buffer\");\n\n      try {\n        sourceBuffer.remove(start, end);\n      } catch (e) {\n        sourceUpdater.logger_(\"Remove \" + start + \" to \" + end + \" from \" + type + \"Buffer failed\");\n      }\n    };\n  },\n  timestampOffset: function timestampOffset(offset) {\n    return function (type, sourceUpdater) {\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"]; // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"Setting \" + type + \"timestampOffset to \" + offset);\n      sourceBuffer.timestampOffset = offset;\n    };\n  },\n  callback: function callback(_callback) {\n    return function (type, sourceUpdater) {\n      _callback();\n    };\n  },\n  endOfStream: function endOfStream(error) {\n    return function (sourceUpdater) {\n      if (sourceUpdater.mediaSource.readyState !== 'open') {\n        return;\n      }\n\n      sourceUpdater.logger_(\"Calling mediaSource endOfStream(\" + (error || '') + \")\");\n\n      try {\n        sourceUpdater.mediaSource.endOfStream(error);\n      } catch (e) {\n        videojs.log.warn('Failed to call media source endOfStream', e);\n      }\n    };\n  },\n  duration: function duration(_duration) {\n    return function (sourceUpdater) {\n      sourceUpdater.logger_(\"Setting mediaSource duration to \" + _duration);\n\n      try {\n        sourceUpdater.mediaSource.duration = _duration;\n      } catch (e) {\n        videojs.log.warn('Failed to set media source duration', e);\n      }\n    };\n  },\n  abort: function abort() {\n    return function (type, sourceUpdater) {\n      if (sourceUpdater.mediaSource.readyState !== 'open') {\n        return;\n      }\n\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"]; // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"calling abort on \" + type + \"Buffer\");\n\n      try {\n        sourceBuffer.abort();\n      } catch (e) {\n        videojs.log.warn(\"Failed to abort on \" + type + \"Buffer\", e);\n      }\n    };\n  },\n  addSourceBuffer: function addSourceBuffer(type, codec) {\n    return function (sourceUpdater) {\n      var titleType = toTitleCase(type);\n      var mime = getMimeForCodec(codec);\n      sourceUpdater.logger_(\"Adding \" + type + \"Buffer with codec \" + codec + \" to mediaSource\");\n      var sourceBuffer = sourceUpdater.mediaSource.addSourceBuffer(mime);\n      sourceBuffer.addEventListener('updateend', sourceUpdater[\"on\" + titleType + \"UpdateEnd_\"]);\n      sourceBuffer.addEventListener('error', sourceUpdater[\"on\" + titleType + \"Error_\"]);\n      sourceUpdater.codecs[type] = codec;\n      sourceUpdater[type + \"Buffer\"] = sourceBuffer;\n    };\n  },\n  removeSourceBuffer: function removeSourceBuffer(type) {\n    return function (sourceUpdater) {\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"];\n      cleanupBuffer(type, sourceUpdater); // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"Removing \" + type + \"Buffer with codec \" + sourceUpdater.codecs[type] + \" from mediaSource\");\n\n      try {\n        sourceUpdater.mediaSource.removeSourceBuffer(sourceBuffer);\n      } catch (e) {\n        videojs.log.warn(\"Failed to removeSourceBuffer \" + type + \"Buffer\", e);\n      }\n    };\n  },\n  changeType: function changeType(codec) {\n    return function (type, sourceUpdater) {\n      var sourceBuffer = sourceUpdater[type + \"Buffer\"];\n      var mime = getMimeForCodec(codec); // can't do anything if the media source / source buffer is null\n      // or the media source does not contain this source buffer.\n\n      if (!inSourceBuffers(sourceUpdater.mediaSource, sourceBuffer)) {\n        return;\n      } // do not update codec if we don't need to.\n\n\n      if (sourceUpdater.codecs[type] === codec) {\n        return;\n      }\n\n      sourceUpdater.logger_(\"changing \" + type + \"Buffer codec from \" + sourceUpdater.codecs[type] + \" to \" + codec);\n      sourceBuffer.changeType(mime);\n      sourceUpdater.codecs[type] = codec;\n    };\n  }\n};\n\nvar pushQueue = function pushQueue(_ref) {\n  var type = _ref.type,\n      sourceUpdater = _ref.sourceUpdater,\n      action = _ref.action,\n      doneFn = _ref.doneFn,\n      name = _ref.name;\n  sourceUpdater.queue.push({\n    type: type,\n    action: action,\n    doneFn: doneFn,\n    name: name\n  });\n  shiftQueue(type, sourceUpdater);\n};\n\nvar onUpdateend = function onUpdateend(type, sourceUpdater) {\n  return function (e) {\n    // Although there should, in theory, be a pending action for any updateend receieved,\n    // there are some actions that may trigger updateend events without set definitions in\n    // the w3c spec. For instance, setting the duration on the media source may trigger\n    // updateend events on source buffers. This does not appear to be in the spec. As such,\n    // if we encounter an updateend without a corresponding pending action from our queue\n    // for that source buffer type, process the next action.\n    if (sourceUpdater.queuePending[type]) {\n      var doneFn = sourceUpdater.queuePending[type].doneFn;\n      sourceUpdater.queuePending[type] = null;\n\n      if (doneFn) {\n        // if there's an error, report it\n        doneFn(sourceUpdater[type + \"Error_\"]);\n      }\n    }\n\n    shiftQueue(type, sourceUpdater);\n  };\n};\n/**\n * A queue of callbacks to be serialized and applied when a\n * MediaSource and its associated SourceBuffers are not in the\n * updating state. It is used by the segment loader to update the\n * underlying SourceBuffers when new data is loaded, for instance.\n *\n * @class SourceUpdater\n * @param {MediaSource} mediaSource the MediaSource to create the SourceBuffer from\n * @param {string} mimeType the desired MIME type of the underlying SourceBuffer\n */\n\n\nvar SourceUpdater = /*#__PURE__*/function (_videojs$EventTarget) {\n  _inheritsLoose(SourceUpdater, _videojs$EventTarget);\n\n  function SourceUpdater(mediaSource) {\n    var _this;\n\n    _this = _videojs$EventTarget.call(this) || this;\n    _this.mediaSource = mediaSource;\n\n    _this.sourceopenListener_ = function () {\n      return shiftQueue('mediaSource', _assertThisInitialized(_this));\n    };\n\n    _this.mediaSource.addEventListener('sourceopen', _this.sourceopenListener_);\n\n    _this.logger_ = logger('SourceUpdater'); // initial timestamp offset is 0\n\n    _this.audioTimestampOffset_ = 0;\n    _this.videoTimestampOffset_ = 0;\n    _this.queue = [];\n    _this.queuePending = {\n      audio: null,\n      video: null\n    };\n    _this.delayedAudioAppendQueue_ = [];\n    _this.videoAppendQueued_ = false;\n    _this.codecs = {};\n    _this.onVideoUpdateEnd_ = onUpdateend('video', _assertThisInitialized(_this));\n    _this.onAudioUpdateEnd_ = onUpdateend('audio', _assertThisInitialized(_this));\n\n    _this.onVideoError_ = function (e) {\n      // used for debugging\n      _this.videoError_ = e;\n    };\n\n    _this.onAudioError_ = function (e) {\n      // used for debugging\n      _this.audioError_ = e;\n    };\n\n    _this.createdSourceBuffers_ = false;\n    _this.initializedEme_ = false;\n    _this.triggeredReady_ = false;\n    return _this;\n  }\n\n  var _proto = SourceUpdater.prototype;\n\n  _proto.initializedEme = function initializedEme() {\n    this.initializedEme_ = true;\n    this.triggerReady();\n  };\n\n  _proto.hasCreatedSourceBuffers = function hasCreatedSourceBuffers() {\n    // if false, likely waiting on one of the segment loaders to get enough data to create\n    // source buffers\n    return this.createdSourceBuffers_;\n  };\n\n  _proto.hasInitializedAnyEme = function hasInitializedAnyEme() {\n    return this.initializedEme_;\n  };\n\n  _proto.ready = function ready() {\n    return this.hasCreatedSourceBuffers() && this.hasInitializedAnyEme();\n  };\n\n  _proto.createSourceBuffers = function createSourceBuffers(codecs) {\n    if (this.hasCreatedSourceBuffers()) {\n      // already created them before\n      return;\n    } // the intial addOrChangeSourceBuffers will always be\n    // two add buffers.\n\n\n    this.addOrChangeSourceBuffers(codecs);\n    this.createdSourceBuffers_ = true;\n    this.trigger('createdsourcebuffers');\n    this.triggerReady();\n  };\n\n  _proto.triggerReady = function triggerReady() {\n    // only allow ready to be triggered once, this prevents the case\n    // where:\n    // 1. we trigger createdsourcebuffers\n    // 2. ie 11 synchronously initializates eme\n    // 3. the synchronous initialization causes us to trigger ready\n    // 4. We go back to the ready check in createSourceBuffers and ready is triggered again.\n    if (this.ready() && !this.triggeredReady_) {\n      this.triggeredReady_ = true;\n      this.trigger('ready');\n    }\n  }\n  /**\n   * Add a type of source buffer to the media source.\n   *\n   * @param {string} type\n   *        The type of source buffer to add.\n   *\n   * @param {string} codec\n   *        The codec to add the source buffer with.\n   */\n  ;\n\n  _proto.addSourceBuffer = function addSourceBuffer(type, codec) {\n    pushQueue({\n      type: 'mediaSource',\n      sourceUpdater: this,\n      action: actions.addSourceBuffer(type, codec),\n      name: 'addSourceBuffer'\n    });\n  }\n  /**\n   * call abort on a source buffer.\n   *\n   * @param {string} type\n   *        The type of source buffer to call abort on.\n   */\n  ;\n\n  _proto.abort = function abort(type) {\n    pushQueue({\n      type: type,\n      sourceUpdater: this,\n      action: actions.abort(type),\n      name: 'abort'\n    });\n  }\n  /**\n   * Call removeSourceBuffer and remove a specific type\n   * of source buffer on the mediaSource.\n   *\n   * @param {string} type\n   *        The type of source buffer to remove.\n   */\n  ;\n\n  _proto.removeSourceBuffer = function removeSourceBuffer(type) {\n    if (!this.canRemoveSourceBuffer()) {\n      videojs.log.error('removeSourceBuffer is not supported!');\n      return;\n    }\n\n    pushQueue({\n      type: 'mediaSource',\n      sourceUpdater: this,\n      action: actions.removeSourceBuffer(type),\n      name: 'removeSourceBuffer'\n    });\n  }\n  /**\n   * Whether or not the removeSourceBuffer function is supported\n   * on the mediaSource.\n   *\n   * @return {boolean}\n   *          if removeSourceBuffer can be called.\n   */\n  ;\n\n  _proto.canRemoveSourceBuffer = function canRemoveSourceBuffer() {\n    // IE reports that it supports removeSourceBuffer, but often throws\n    // errors when attempting to use the function. So we report that it\n    // does not support removeSourceBuffer. As of Firefox 83 removeSourceBuffer\n    // throws errors, so we report that it does not support this as well.\n    return !videojs.browser.IE_VERSION && !videojs.browser.IS_FIREFOX && window$1.MediaSource && window$1.MediaSource.prototype && typeof window$1.MediaSource.prototype.removeSourceBuffer === 'function';\n  }\n  /**\n   * Whether or not the changeType function is supported\n   * on our SourceBuffers.\n   *\n   * @return {boolean}\n   *         if changeType can be called.\n   */\n  ;\n\n  SourceUpdater.canChangeType = function canChangeType() {\n    return window$1.SourceBuffer && window$1.SourceBuffer.prototype && typeof window$1.SourceBuffer.prototype.changeType === 'function';\n  }\n  /**\n   * Whether or not the changeType function is supported\n   * on our SourceBuffers.\n   *\n   * @return {boolean}\n   *         if changeType can be called.\n   */\n  ;\n\n  _proto.canChangeType = function canChangeType() {\n    return this.constructor.canChangeType();\n  }\n  /**\n   * Call the changeType function on a source buffer, given the code and type.\n   *\n   * @param {string} type\n   *        The type of source buffer to call changeType on.\n   *\n   * @param {string} codec\n   *        The codec string to change type with on the source buffer.\n   */\n  ;\n\n  _proto.changeType = function changeType(type, codec) {\n    if (!this.canChangeType()) {\n      videojs.log.error('changeType is not supported!');\n      return;\n    }\n\n    pushQueue({\n      type: type,\n      sourceUpdater: this,\n      action: actions.changeType(codec),\n      name: 'changeType'\n    });\n  }\n  /**\n   * Add source buffers with a codec or, if they are already created,\n   * call changeType on source buffers using changeType.\n   *\n   * @param {Object} codecs\n   *        Codecs to switch to\n   */\n  ;\n\n  _proto.addOrChangeSourceBuffers = function addOrChangeSourceBuffers(codecs) {\n    var _this2 = this;\n\n    if (!codecs || _typeof(codecs) !== 'object' || Object.keys(codecs).length === 0) {\n      throw new Error('Cannot addOrChangeSourceBuffers to undefined codecs');\n    }\n\n    Object.keys(codecs).forEach(function (type) {\n      var codec = codecs[type];\n\n      if (!_this2.hasCreatedSourceBuffers()) {\n        return _this2.addSourceBuffer(type, codec);\n      }\n\n      if (_this2.canChangeType()) {\n        _this2.changeType(type, codec);\n      }\n    });\n  }\n  /**\n   * Queue an update to append an ArrayBuffer.\n   *\n   * @param {MediaObject} object containing audioBytes and/or videoBytes\n   * @param {Function} done the function to call when done\n   * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-appendBuffer-void-ArrayBuffer-data\n   */\n  ;\n\n  _proto.appendBuffer = function appendBuffer(options, doneFn) {\n    var _this3 = this;\n\n    var segmentInfo = options.segmentInfo,\n        type = options.type,\n        bytes = options.bytes;\n    this.processedAppend_ = true;\n\n    if (type === 'audio' && this.videoBuffer && !this.videoAppendQueued_) {\n      this.delayedAudioAppendQueue_.push([options, doneFn]);\n      this.logger_(\"delayed audio append of \" + bytes.length + \" until video append\");\n      return;\n    } // In the case of certain errors, for instance, QUOTA_EXCEEDED_ERR, updateend will\n    // not be fired. This means that the queue will be blocked until the next action\n    // taken by the segment-loader. Provide a mechanism for segment-loader to handle\n    // these errors by calling the doneFn with the specific error.\n\n\n    var onError = doneFn;\n    pushQueue({\n      type: type,\n      sourceUpdater: this,\n      action: actions.appendBuffer(bytes, segmentInfo || {\n        mediaIndex: -1\n      }, onError),\n      doneFn: doneFn,\n      name: 'appendBuffer'\n    });\n\n    if (type === 'video') {\n      this.videoAppendQueued_ = true;\n\n      if (!this.delayedAudioAppendQueue_.length) {\n        return;\n      }\n\n      var queue = this.delayedAudioAppendQueue_.slice();\n      this.logger_(\"queuing delayed audio \" + queue.length + \" appendBuffers\");\n      this.delayedAudioAppendQueue_.length = 0;\n      queue.forEach(function (que) {\n        _this3.appendBuffer.apply(_this3, que);\n      });\n    }\n  }\n  /**\n   * Get the audio buffer's buffered timerange.\n   *\n   * @return {TimeRange}\n   *         The audio buffer's buffered time range\n   */\n  ;\n\n  _proto.audioBuffered = function audioBuffered() {\n    // no media source/source buffer or it isn't in the media sources\n    // source buffer list\n    if (!inSourceBuffers(this.mediaSource, this.audioBuffer)) {\n      return videojs.createTimeRange();\n    }\n\n    return this.audioBuffer.buffered ? this.audioBuffer.buffered : videojs.createTimeRange();\n  }\n  /**\n   * Get the video buffer's buffered timerange.\n   *\n   * @return {TimeRange}\n   *         The video buffer's buffered time range\n   */\n  ;\n\n  _proto.videoBuffered = function videoBuffered() {\n    // no media source/source buffer or it isn't in the media sources\n    // source buffer list\n    if (!inSourceBuffers(this.mediaSource, this.videoBuffer)) {\n      return videojs.createTimeRange();\n    }\n\n    return this.videoBuffer.buffered ? this.videoBuffer.buffered : videojs.createTimeRange();\n  }\n  /**\n   * Get a combined video/audio buffer's buffered timerange.\n   *\n   * @return {TimeRange}\n   *         the combined time range\n   */\n  ;\n\n  _proto.buffered = function buffered() {\n    var video = inSourceBuffers(this.mediaSource, this.videoBuffer) ? this.videoBuffer : null;\n    var audio = inSourceBuffers(this.mediaSource, this.audioBuffer) ? this.audioBuffer : null;\n\n    if (audio && !video) {\n      return this.audioBuffered();\n    }\n\n    if (video && !audio) {\n      return this.videoBuffered();\n    }\n\n    return bufferIntersection(this.audioBuffered(), this.videoBuffered());\n  }\n  /**\n   * Add a callback to the queue that will set duration on the mediaSource.\n   *\n   * @param {number} duration\n   *        The duration to set\n   *\n   * @param {Function} [doneFn]\n   *        function to run after duration has been set.\n   */\n  ;\n\n  _proto.setDuration = function setDuration(duration, doneFn) {\n    if (doneFn === void 0) {\n      doneFn = noop;\n    } // In order to set the duration on the media source, it's necessary to wait for all\n    // source buffers to no longer be updating. \"If the updating attribute equals true on\n    // any SourceBuffer in sourceBuffers, then throw an InvalidStateError exception and\n    // abort these steps.\" (source: https://www.w3.org/TR/media-source/#attributes).\n\n\n    pushQueue({\n      type: 'mediaSource',\n      sourceUpdater: this,\n      action: actions.duration(duration),\n      name: 'duration',\n      doneFn: doneFn\n    });\n  }\n  /**\n   * Add a mediaSource endOfStream call to the queue\n   *\n   * @param {Error} [error]\n   *        Call endOfStream with an error\n   *\n   * @param {Function} [doneFn]\n   *        A function that should be called when the\n   *        endOfStream call has finished.\n   */\n  ;\n\n  _proto.endOfStream = function endOfStream(error, doneFn) {\n    if (error === void 0) {\n      error = null;\n    }\n\n    if (doneFn === void 0) {\n      doneFn = noop;\n    }\n\n    if (typeof error !== 'string') {\n      error = undefined;\n    } // In order to set the duration on the media source, it's necessary to wait for all\n    // source buffers to no longer be updating. \"If the updating attribute equals true on\n    // any SourceBuffer in sourceBuffers, then throw an InvalidStateError exception and\n    // abort these steps.\" (source: https://www.w3.org/TR/media-source/#attributes).\n\n\n    pushQueue({\n      type: 'mediaSource',\n      sourceUpdater: this,\n      action: actions.endOfStream(error),\n      name: 'endOfStream',\n      doneFn: doneFn\n    });\n  }\n  /**\n   * Queue an update to remove a time range from the buffer.\n   *\n   * @param {number} start where to start the removal\n   * @param {number} end where to end the removal\n   * @param {Function} [done=noop] optional callback to be executed when the remove\n   * operation is complete\n   * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-remove-void-double-start-unrestricted-double-end\n   */\n  ;\n\n  _proto.removeAudio = function removeAudio(start, end, done) {\n    if (done === void 0) {\n      done = noop;\n    }\n\n    if (!this.audioBuffered().length || this.audioBuffered().end(0) === 0) {\n      done();\n      return;\n    }\n\n    pushQueue({\n      type: 'audio',\n      sourceUpdater: this,\n      action: actions.remove(start, end),\n      doneFn: done,\n      name: 'remove'\n    });\n  }\n  /**\n   * Queue an update to remove a time range from the buffer.\n   *\n   * @param {number} start where to start the removal\n   * @param {number} end where to end the removal\n   * @param {Function} [done=noop] optional callback to be executed when the remove\n   * operation is complete\n   * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-remove-void-double-start-unrestricted-double-end\n   */\n  ;\n\n  _proto.removeVideo = function removeVideo(start, end, done) {\n    if (done === void 0) {\n      done = noop;\n    }\n\n    if (!this.videoBuffered().length || this.videoBuffered().end(0) === 0) {\n      done();\n      return;\n    }\n\n    pushQueue({\n      type: 'video',\n      sourceUpdater: this,\n      action: actions.remove(start, end),\n      doneFn: done,\n      name: 'remove'\n    });\n  }\n  /**\n   * Whether the underlying sourceBuffer is updating or not\n   *\n   * @return {boolean} the updating status of the SourceBuffer\n   */\n  ;\n\n  _proto.updating = function updating() {\n    // the audio/video source buffer is updating\n    if (_updating('audio', this) || _updating('video', this)) {\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Set/get the timestampoffset on the audio SourceBuffer\n   *\n   * @return {number} the timestamp offset\n   */\n  ;\n\n  _proto.audioTimestampOffset = function audioTimestampOffset(offset) {\n    if (typeof offset !== 'undefined' && this.audioBuffer && // no point in updating if it's the same\n    this.audioTimestampOffset_ !== offset) {\n      pushQueue({\n        type: 'audio',\n        sourceUpdater: this,\n        action: actions.timestampOffset(offset),\n        name: 'timestampOffset'\n      });\n      this.audioTimestampOffset_ = offset;\n    }\n\n    return this.audioTimestampOffset_;\n  }\n  /**\n   * Set/get the timestampoffset on the video SourceBuffer\n   *\n   * @return {number} the timestamp offset\n   */\n  ;\n\n  _proto.videoTimestampOffset = function videoTimestampOffset(offset) {\n    if (typeof offset !== 'undefined' && this.videoBuffer && // no point in updating if it's the same\n    this.videoTimestampOffset !== offset) {\n      pushQueue({\n        type: 'video',\n        sourceUpdater: this,\n        action: actions.timestampOffset(offset),\n        name: 'timestampOffset'\n      });\n      this.videoTimestampOffset_ = offset;\n    }\n\n    return this.videoTimestampOffset_;\n  }\n  /**\n   * Add a function to the queue that will be called\n   * when it is its turn to run in the audio queue.\n   *\n   * @param {Function} callback\n   *        The callback to queue.\n   */\n  ;\n\n  _proto.audioQueueCallback = function audioQueueCallback(callback) {\n    if (!this.audioBuffer) {\n      return;\n    }\n\n    pushQueue({\n      type: 'audio',\n      sourceUpdater: this,\n      action: actions.callback(callback),\n      name: 'callback'\n    });\n  }\n  /**\n   * Add a function to the queue that will be called\n   * when it is its turn to run in the video queue.\n   *\n   * @param {Function} callback\n   *        The callback to queue.\n   */\n  ;\n\n  _proto.videoQueueCallback = function videoQueueCallback(callback) {\n    if (!this.videoBuffer) {\n      return;\n    }\n\n    pushQueue({\n      type: 'video',\n      sourceUpdater: this,\n      action: actions.callback(callback),\n      name: 'callback'\n    });\n  }\n  /**\n   * dispose of the source updater and the underlying sourceBuffer\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    var _this4 = this;\n\n    this.trigger('dispose');\n    bufferTypes.forEach(function (type) {\n      _this4.abort(type);\n\n      if (_this4.canRemoveSourceBuffer()) {\n        _this4.removeSourceBuffer(type);\n      } else {\n        _this4[type + \"QueueCallback\"](function () {\n          return cleanupBuffer(type, _this4);\n        });\n      }\n    });\n    this.videoAppendQueued_ = false;\n    this.delayedAudioAppendQueue_.length = 0;\n\n    if (this.sourceopenListener_) {\n      this.mediaSource.removeEventListener('sourceopen', this.sourceopenListener_);\n    }\n\n    this.off();\n  };\n\n  return SourceUpdater;\n}(videojs.EventTarget);\n\nvar uint8ToUtf8 = function uint8ToUtf8(uintArray) {\n  return decodeURIComponent(escape(String.fromCharCode.apply(null, uintArray)));\n};\n\nvar VTT_LINE_TERMINATORS = new Uint8Array('\\n\\n'.split('').map(function (_char3) {\n  return _char3.charCodeAt(0);\n}));\n/**\n * An object that manages segment loading and appending.\n *\n * @class VTTSegmentLoader\n * @param {Object} options required and optional options\n * @extends videojs.EventTarget\n */\n\nvar VTTSegmentLoader = /*#__PURE__*/function (_SegmentLoader) {\n  _inheritsLoose(VTTSegmentLoader, _SegmentLoader);\n\n  function VTTSegmentLoader(settings, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _SegmentLoader.call(this, settings, options) || this; // SegmentLoader requires a MediaSource be specified or it will throw an error;\n    // however, VTTSegmentLoader has no need of a media source, so delete the reference\n\n    _this.mediaSource_ = null;\n    _this.subtitlesTrack_ = null;\n    _this.loaderType_ = 'subtitle';\n    _this.featuresNativeTextTracks_ = settings.featuresNativeTextTracks; // The VTT segment will have its own time mappings. Saving VTT segment timing info in\n    // the sync controller leads to improper behavior.\n\n    _this.shouldSaveSegmentTimingInfo_ = false;\n    return _this;\n  }\n\n  var _proto = VTTSegmentLoader.prototype;\n\n  _proto.createTransmuxer_ = function createTransmuxer_() {\n    // don't need to transmux any subtitles\n    return null;\n  }\n  /**\n   * Indicates which time ranges are buffered\n   *\n   * @return {TimeRange}\n   *         TimeRange object representing the current buffered ranges\n   */\n  ;\n\n  _proto.buffered_ = function buffered_() {\n    if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues || !this.subtitlesTrack_.cues.length) {\n      return videojs.createTimeRanges();\n    }\n\n    var cues = this.subtitlesTrack_.cues;\n    var start = cues[0].startTime;\n    var end = cues[cues.length - 1].startTime;\n    return videojs.createTimeRanges([[start, end]]);\n  }\n  /**\n   * Gets and sets init segment for the provided map\n   *\n   * @param {Object} map\n   *        The map object representing the init segment to get or set\n   * @param {boolean=} set\n   *        If true, the init segment for the provided map should be saved\n   * @return {Object}\n   *         map object for desired init segment\n   */\n  ;\n\n  _proto.initSegmentForMap = function initSegmentForMap(map, set) {\n    if (set === void 0) {\n      set = false;\n    }\n\n    if (!map) {\n      return null;\n    }\n\n    var id = initSegmentId(map);\n    var storedMap = this.initSegments_[id];\n\n    if (set && !storedMap && map.bytes) {\n      // append WebVTT line terminators to the media initialization segment if it exists\n      // to follow the WebVTT spec (https://w3c.github.io/webvtt/#file-structure) that\n      // requires two or more WebVTT line terminators between the WebVTT header and the\n      // rest of the file\n      var combinedByteLength = VTT_LINE_TERMINATORS.byteLength + map.bytes.byteLength;\n      var combinedSegment = new Uint8Array(combinedByteLength);\n      combinedSegment.set(map.bytes);\n      combinedSegment.set(VTT_LINE_TERMINATORS, map.bytes.byteLength);\n      this.initSegments_[id] = storedMap = {\n        resolvedUri: map.resolvedUri,\n        byterange: map.byterange,\n        bytes: combinedSegment\n      };\n    }\n\n    return storedMap || map;\n  }\n  /**\n   * Returns true if all configuration required for loading is present, otherwise false.\n   *\n   * @return {boolean} True if the all configuration is ready for loading\n   * @private\n   */\n  ;\n\n  _proto.couldBeginLoading_ = function couldBeginLoading_() {\n    return this.playlist_ && this.subtitlesTrack_ && !this.paused();\n  }\n  /**\n   * Once all the starting parameters have been specified, begin\n   * operation. This method should only be invoked from the INIT\n   * state.\n   *\n   * @private\n   */\n  ;\n\n  _proto.init_ = function init_() {\n    this.state = 'READY';\n    this.resetEverything();\n    return this.monitorBuffer_();\n  }\n  /**\n   * Set a subtitle track on the segment loader to add subtitles to\n   *\n   * @param {TextTrack=} track\n   *        The text track to add loaded subtitles to\n   * @return {TextTrack}\n   *        Returns the subtitles track\n   */\n  ;\n\n  _proto.track = function track(_track) {\n    if (typeof _track === 'undefined') {\n      return this.subtitlesTrack_;\n    }\n\n    this.subtitlesTrack_ = _track; // if we were unpaused but waiting for a sourceUpdater, start\n    // buffering now\n\n    if (this.state === 'INIT' && this.couldBeginLoading_()) {\n      this.init_();\n    }\n\n    return this.subtitlesTrack_;\n  }\n  /**\n   * Remove any data in the source buffer between start and end times\n   *\n   * @param {number} start - the start time of the region to remove from the buffer\n   * @param {number} end - the end time of the region to remove from the buffer\n   */\n  ;\n\n  _proto.remove = function remove(start, end) {\n    removeCuesFromTrack(start, end, this.subtitlesTrack_);\n  }\n  /**\n   * fill the buffer with segements unless the sourceBuffers are\n   * currently updating\n   *\n   * Note: this function should only ever be called by monitorBuffer_\n   * and never directly\n   *\n   * @private\n   */\n  ;\n\n  _proto.fillBuffer_ = function fillBuffer_() {\n    var _this2 = this; // see if we need to begin loading immediately\n\n\n    var segmentInfo = this.chooseNextRequest_();\n\n    if (!segmentInfo) {\n      return;\n    }\n\n    if (this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline) === null) {\n      // We don't have the timestamp offset that we need to sync subtitles.\n      // Rerun on a timestamp offset or user interaction.\n      var checkTimestampOffset = function checkTimestampOffset() {\n        _this2.state = 'READY';\n\n        if (!_this2.paused()) {\n          // if not paused, queue a buffer check as soon as possible\n          _this2.monitorBuffer_();\n        }\n      };\n\n      this.syncController_.one('timestampoffset', checkTimestampOffset);\n      this.state = 'WAITING_ON_TIMELINE';\n      return;\n    }\n\n    this.loadSegment_(segmentInfo);\n  } // never set a timestamp offset for vtt segments.\n  ;\n\n  _proto.timestampOffsetForSegment_ = function timestampOffsetForSegment_() {\n    return null;\n  };\n\n  _proto.chooseNextRequest_ = function chooseNextRequest_() {\n    return this.skipEmptySegments_(_SegmentLoader.prototype.chooseNextRequest_.call(this));\n  }\n  /**\n   * Prevents the segment loader from requesting segments we know contain no subtitles\n   * by walking forward until we find the next segment that we don't know whether it is\n   * empty or not.\n   *\n   * @param {Object} segmentInfo\n   *        a segment info object that describes the current segment\n   * @return {Object}\n   *         a segment info object that describes the current segment\n   */\n  ;\n\n  _proto.skipEmptySegments_ = function skipEmptySegments_(segmentInfo) {\n    while (segmentInfo && segmentInfo.segment.empty) {\n      // stop at the last possible segmentInfo\n      if (segmentInfo.mediaIndex + 1 >= segmentInfo.playlist.segments.length) {\n        segmentInfo = null;\n        break;\n      }\n\n      segmentInfo = this.generateSegmentInfo_({\n        playlist: segmentInfo.playlist,\n        mediaIndex: segmentInfo.mediaIndex + 1,\n        startOfSegment: segmentInfo.startOfSegment + segmentInfo.duration,\n        isSyncRequest: segmentInfo.isSyncRequest\n      });\n    }\n\n    return segmentInfo;\n  };\n\n  _proto.stopForError = function stopForError(error) {\n    this.error(error);\n    this.state = 'READY';\n    this.pause();\n    this.trigger('error');\n  }\n  /**\n   * append a decrypted segement to the SourceBuffer through a SourceUpdater\n   *\n   * @private\n   */\n  ;\n\n  _proto.segmentRequestFinished_ = function segmentRequestFinished_(error, simpleSegment, result) {\n    var _this3 = this;\n\n    if (!this.subtitlesTrack_) {\n      this.state = 'READY';\n      return;\n    }\n\n    this.saveTransferStats_(simpleSegment.stats); // the request was aborted\n\n    if (!this.pendingSegment_) {\n      this.state = 'READY';\n      this.mediaRequestsAborted += 1;\n      return;\n    }\n\n    if (error) {\n      if (error.code === REQUEST_ERRORS.TIMEOUT) {\n        this.handleTimeout_();\n      }\n\n      if (error.code === REQUEST_ERRORS.ABORTED) {\n        this.mediaRequestsAborted += 1;\n      } else {\n        this.mediaRequestsErrored += 1;\n      }\n\n      this.stopForError(error);\n      return;\n    }\n\n    var segmentInfo = this.pendingSegment_; // although the VTT segment loader bandwidth isn't really used, it's good to\n    // maintain functionality between segment loaders\n\n    this.saveBandwidthRelatedStats_(segmentInfo.duration, simpleSegment.stats);\n    this.state = 'APPENDING'; // used for tests\n\n    this.trigger('appending');\n    var segment = segmentInfo.segment;\n\n    if (segment.map) {\n      segment.map.bytes = simpleSegment.map.bytes;\n    }\n\n    segmentInfo.bytes = simpleSegment.bytes; // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n\n    if (typeof window$1.WebVTT !== 'function' && this.subtitlesTrack_ && this.subtitlesTrack_.tech_) {\n      var loadHandler;\n\n      var errorHandler = function errorHandler() {\n        _this3.subtitlesTrack_.tech_.off('vttjsloaded', loadHandler);\n\n        _this3.stopForError({\n          message: 'Error loading vtt.js'\n        });\n\n        return;\n      };\n\n      loadHandler = function loadHandler() {\n        _this3.subtitlesTrack_.tech_.off('vttjserror', errorHandler);\n\n        _this3.segmentRequestFinished_(error, simpleSegment, result);\n      };\n\n      this.state = 'WAITING_ON_VTTJS';\n      this.subtitlesTrack_.tech_.one('vttjsloaded', loadHandler);\n      this.subtitlesTrack_.tech_.one('vttjserror', errorHandler);\n      return;\n    }\n\n    segment.requested = true;\n\n    try {\n      this.parseVTTCues_(segmentInfo);\n    } catch (e) {\n      this.stopForError({\n        message: e.message\n      });\n      return;\n    }\n\n    this.updateTimeMapping_(segmentInfo, this.syncController_.timelines[segmentInfo.timeline], this.playlist_);\n\n    if (segmentInfo.cues.length) {\n      segmentInfo.timingInfo = {\n        start: segmentInfo.cues[0].startTime,\n        end: segmentInfo.cues[segmentInfo.cues.length - 1].endTime\n      };\n    } else {\n      segmentInfo.timingInfo = {\n        start: segmentInfo.startOfSegment,\n        end: segmentInfo.startOfSegment + segmentInfo.duration\n      };\n    }\n\n    if (segmentInfo.isSyncRequest) {\n      this.trigger('syncinfoupdate');\n      this.pendingSegment_ = null;\n      this.state = 'READY';\n      return;\n    }\n\n    segmentInfo.byteLength = segmentInfo.bytes.byteLength;\n    this.mediaSecondsLoaded += segment.duration; // Create VTTCue instances for each cue in the new segment and add them to\n    // the subtitle track\n\n    segmentInfo.cues.forEach(function (cue) {\n      _this3.subtitlesTrack_.addCue(_this3.featuresNativeTextTracks_ ? new window$1.VTTCue(cue.startTime, cue.endTime, cue.text) : cue);\n    }); // Remove any duplicate cues from the subtitle track. The WebVTT spec allows\n    // cues to have identical time-intervals, but if the text is also identical\n    // we can safely assume it is a duplicate that can be removed (ex. when a cue\n    // \"overlaps\" VTT segments)\n\n    removeDuplicateCuesFromTrack(this.subtitlesTrack_);\n    this.handleAppendsDone_();\n  };\n\n  _proto.handleData_ = function handleData_() {// noop as we shouldn't be getting video/audio data captions\n    // that we do not support here.\n  };\n\n  _proto.updateTimingInfoEnd_ = function updateTimingInfoEnd_() {// noop\n  }\n  /**\n   * Uses the WebVTT parser to parse the segment response\n   *\n   * @param {Object} segmentInfo\n   *        a segment info object that describes the current segment\n   * @private\n   */\n  ;\n\n  _proto.parseVTTCues_ = function parseVTTCues_(segmentInfo) {\n    var decoder;\n    var decodeBytesToString = false;\n\n    if (typeof window$1.TextDecoder === 'function') {\n      decoder = new window$1.TextDecoder('utf8');\n    } else {\n      decoder = window$1.WebVTT.StringDecoder();\n      decodeBytesToString = true;\n    }\n\n    var parser = new window$1.WebVTT.Parser(window$1, window$1.vttjs, decoder);\n    segmentInfo.cues = [];\n    segmentInfo.timestampmap = {\n      MPEGTS: 0,\n      LOCAL: 0\n    };\n    parser.oncue = segmentInfo.cues.push.bind(segmentInfo.cues);\n\n    parser.ontimestampmap = function (map) {\n      segmentInfo.timestampmap = map;\n    };\n\n    parser.onparsingerror = function (error) {\n      videojs.log.warn('Error encountered when parsing cues: ' + error.message);\n    };\n\n    if (segmentInfo.segment.map) {\n      var mapData = segmentInfo.segment.map.bytes;\n\n      if (decodeBytesToString) {\n        mapData = uint8ToUtf8(mapData);\n      }\n\n      parser.parse(mapData);\n    }\n\n    var segmentData = segmentInfo.bytes;\n\n    if (decodeBytesToString) {\n      segmentData = uint8ToUtf8(segmentData);\n    }\n\n    parser.parse(segmentData);\n    parser.flush();\n  }\n  /**\n   * Updates the start and end times of any cues parsed by the WebVTT parser using\n   * the information parsed from the X-TIMESTAMP-MAP header and a TS to media time mapping\n   * from the SyncController\n   *\n   * @param {Object} segmentInfo\n   *        a segment info object that describes the current segment\n   * @param {Object} mappingObj\n   *        object containing a mapping from TS to media time\n   * @param {Object} playlist\n   *        the playlist object containing the segment\n   * @private\n   */\n  ;\n\n  _proto.updateTimeMapping_ = function updateTimeMapping_(segmentInfo, mappingObj, playlist) {\n    var segment = segmentInfo.segment;\n\n    if (!mappingObj) {\n      // If the sync controller does not have a mapping of TS to Media Time for the\n      // timeline, then we don't have enough information to update the cue\n      // start/end times\n      return;\n    }\n\n    if (!segmentInfo.cues.length) {\n      // If there are no cues, we also do not have enough information to figure out\n      // segment timing. Mark that the segment contains no cues so we don't re-request\n      // an empty segment.\n      segment.empty = true;\n      return;\n    }\n\n    var timestampmap = segmentInfo.timestampmap;\n    var diff = timestampmap.MPEGTS / ONE_SECOND_IN_TS - timestampmap.LOCAL + mappingObj.mapping;\n    segmentInfo.cues.forEach(function (cue) {\n      // First convert cue time to TS time using the timestamp-map provided within the vtt\n      cue.startTime += diff;\n      cue.endTime += diff;\n    });\n\n    if (!playlist.syncInfo) {\n      var firstStart = segmentInfo.cues[0].startTime;\n      var lastStart = segmentInfo.cues[segmentInfo.cues.length - 1].startTime;\n      playlist.syncInfo = {\n        mediaSequence: playlist.mediaSequence + segmentInfo.mediaIndex,\n        time: Math.min(firstStart, lastStart - segment.duration)\n      };\n    }\n  };\n\n  return VTTSegmentLoader;\n}(SegmentLoader);\n/**\n * @file ad-cue-tags.js\n */\n\n/**\n * Searches for an ad cue that overlaps with the given mediaTime\n *\n * @param {Object} track\n *        the track to find the cue for\n *\n * @param {number} mediaTime\n *        the time to find the cue at\n *\n * @return {Object|null}\n *         the found cue or null\n */\n\n\nvar findAdCue = function findAdCue(track, mediaTime) {\n  var cues = track.cues;\n\n  for (var i = 0; i < cues.length; i++) {\n    var cue = cues[i];\n\n    if (mediaTime >= cue.adStartTime && mediaTime <= cue.adEndTime) {\n      return cue;\n    }\n  }\n\n  return null;\n};\n\nvar updateAdCues = function updateAdCues(media, track, offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  if (!media.segments) {\n    return;\n  }\n\n  var mediaTime = offset;\n  var cue;\n\n  for (var i = 0; i < media.segments.length; i++) {\n    var segment = media.segments[i];\n\n    if (!cue) {\n      // Since the cues will span for at least the segment duration, adding a fudge\n      // factor of half segment duration will prevent duplicate cues from being\n      // created when timing info is not exact (e.g. cue start time initialized\n      // at 10.006677, but next call mediaTime is 10.003332 )\n      cue = findAdCue(track, mediaTime + segment.duration / 2);\n    }\n\n    if (cue) {\n      if ('cueIn' in segment) {\n        // Found a CUE-IN so end the cue\n        cue.endTime = mediaTime;\n        cue.adEndTime = mediaTime;\n        mediaTime += segment.duration;\n        cue = null;\n        continue;\n      }\n\n      if (mediaTime < cue.endTime) {\n        // Already processed this mediaTime for this cue\n        mediaTime += segment.duration;\n        continue;\n      } // otherwise extend cue until a CUE-IN is found\n\n\n      cue.endTime += segment.duration;\n    } else {\n      if ('cueOut' in segment) {\n        cue = new window$1.VTTCue(mediaTime, mediaTime + segment.duration, segment.cueOut);\n        cue.adStartTime = mediaTime; // Assumes tag format to be\n        // #EXT-X-CUE-OUT:30\n\n        cue.adEndTime = mediaTime + parseFloat(segment.cueOut);\n        track.addCue(cue);\n      }\n\n      if ('cueOutCont' in segment) {\n        // Entered into the middle of an ad cue\n        // Assumes tag formate to be\n        // #EXT-X-CUE-OUT-CONT:10/30\n        var _segment$cueOutCont$s = segment.cueOutCont.split('/').map(parseFloat),\n            adOffset = _segment$cueOutCont$s[0],\n            adTotal = _segment$cueOutCont$s[1];\n\n        cue = new window$1.VTTCue(mediaTime, mediaTime + segment.duration, '');\n        cue.adStartTime = mediaTime - adOffset;\n        cue.adEndTime = cue.adStartTime + adTotal;\n        track.addCue(cue);\n      }\n    }\n\n    mediaTime += segment.duration;\n  }\n}; // synchronize expired playlist segments.\n// the max media sequence diff is 48 hours of live stream\n// content with two second segments. Anything larger than that\n// will likely be invalid.\n\n\nvar MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC = 86400;\nvar syncPointStrategies = [// Stategy \"VOD\": Handle the VOD-case where the sync-point is *always*\n//                the equivalence display-time 0 === segment-index 0\n{\n  name: 'VOD',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (duration !== Infinity) {\n      var syncPoint = {\n        time: 0,\n        segmentIndex: 0,\n        partIndex: null\n      };\n      return syncPoint;\n    }\n\n    return null;\n  }\n}, // Stategy \"ProgramDateTime\": We have a program-date-time tag in this playlist\n{\n  name: 'ProgramDateTime',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (!Object.keys(syncController.timelineToDatetimeMappings).length) {\n      return null;\n    }\n\n    var syncPoint = null;\n    var lastDistance = null;\n    var partsAndSegments = getPartsAndSegments(playlist);\n    currentTime = currentTime || 0;\n\n    for (var i = 0; i < partsAndSegments.length; i++) {\n      // start from the end and loop backwards for live\n      // or start from the front and loop forwards for non-live\n      var index = playlist.endList || currentTime === 0 ? i : partsAndSegments.length - (i + 1);\n      var partAndSegment = partsAndSegments[index];\n      var segment = partAndSegment.segment;\n      var datetimeMapping = syncController.timelineToDatetimeMappings[segment.timeline];\n\n      if (!datetimeMapping || !segment.dateTimeObject) {\n        continue;\n      }\n\n      var segmentTime = segment.dateTimeObject.getTime() / 1000;\n      var start = segmentTime + datetimeMapping; // take part duration into account.\n\n      if (segment.parts && typeof partAndSegment.partIndex === 'number') {\n        for (var z = 0; z < partAndSegment.partIndex; z++) {\n          start += segment.parts[z].duration;\n        }\n      }\n\n      var distance = Math.abs(currentTime - start); // Once the distance begins to increase, or if distance is 0, we have passed\n      // currentTime and can stop looking for better candidates\n\n      if (lastDistance !== null && (distance === 0 || lastDistance < distance)) {\n        break;\n      }\n\n      lastDistance = distance;\n      syncPoint = {\n        time: start,\n        segmentIndex: partAndSegment.segmentIndex,\n        partIndex: partAndSegment.partIndex\n      };\n    }\n\n    return syncPoint;\n  }\n}, // Stategy \"Segment\": We have a known time mapping for a timeline and a\n//                    segment in the current timeline with timing data\n{\n  name: 'Segment',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    var syncPoint = null;\n    var lastDistance = null;\n    currentTime = currentTime || 0;\n    var partsAndSegments = getPartsAndSegments(playlist);\n\n    for (var i = 0; i < partsAndSegments.length; i++) {\n      // start from the end and loop backwards for live\n      // or start from the front and loop forwards for non-live\n      var index = playlist.endList || currentTime === 0 ? i : partsAndSegments.length - (i + 1);\n      var partAndSegment = partsAndSegments[index];\n      var segment = partAndSegment.segment;\n      var start = partAndSegment.part && partAndSegment.part.start || segment && segment.start;\n\n      if (segment.timeline === currentTimeline && typeof start !== 'undefined') {\n        var distance = Math.abs(currentTime - start); // Once the distance begins to increase, we have passed\n        // currentTime and can stop looking for better candidates\n\n        if (lastDistance !== null && lastDistance < distance) {\n          break;\n        }\n\n        if (!syncPoint || lastDistance === null || lastDistance >= distance) {\n          lastDistance = distance;\n          syncPoint = {\n            time: start,\n            segmentIndex: partAndSegment.segmentIndex,\n            partIndex: partAndSegment.partIndex\n          };\n        }\n      }\n    }\n\n    return syncPoint;\n  }\n}, // Stategy \"Discontinuity\": We have a discontinuity with a known\n//                          display-time\n{\n  name: 'Discontinuity',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    var syncPoint = null;\n    currentTime = currentTime || 0;\n\n    if (playlist.discontinuityStarts && playlist.discontinuityStarts.length) {\n      var lastDistance = null;\n\n      for (var i = 0; i < playlist.discontinuityStarts.length; i++) {\n        var segmentIndex = playlist.discontinuityStarts[i];\n        var discontinuity = playlist.discontinuitySequence + i + 1;\n        var discontinuitySync = syncController.discontinuities[discontinuity];\n\n        if (discontinuitySync) {\n          var distance = Math.abs(currentTime - discontinuitySync.time); // Once the distance begins to increase, we have passed\n          // currentTime and can stop looking for better candidates\n\n          if (lastDistance !== null && lastDistance < distance) {\n            break;\n          }\n\n          if (!syncPoint || lastDistance === null || lastDistance >= distance) {\n            lastDistance = distance;\n            syncPoint = {\n              time: discontinuitySync.time,\n              segmentIndex: segmentIndex,\n              partIndex: null\n            };\n          }\n        }\n      }\n    }\n\n    return syncPoint;\n  }\n}, // Stategy \"Playlist\": We have a playlist with a known mapping of\n//                     segment index to display time\n{\n  name: 'Playlist',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (playlist.syncInfo) {\n      var syncPoint = {\n        time: playlist.syncInfo.time,\n        segmentIndex: playlist.syncInfo.mediaSequence - playlist.mediaSequence,\n        partIndex: null\n      };\n      return syncPoint;\n    }\n\n    return null;\n  }\n}];\n\nvar SyncController = /*#__PURE__*/function (_videojs$EventTarget) {\n  _inheritsLoose(SyncController, _videojs$EventTarget);\n\n  function SyncController(options) {\n    var _this;\n\n    _this = _videojs$EventTarget.call(this) || this; // ...for synching across variants\n\n    _this.timelines = [];\n    _this.discontinuities = [];\n    _this.timelineToDatetimeMappings = {};\n    _this.logger_ = logger('SyncController');\n    return _this;\n  }\n  /**\n   * Find a sync-point for the playlist specified\n   *\n   * A sync-point is defined as a known mapping from display-time to\n   * a segment-index in the current playlist.\n   *\n   * @param {Playlist} playlist\n   *        The playlist that needs a sync-point\n   * @param {number} duration\n   *        Duration of the MediaSource (Infinite if playing a live source)\n   * @param {number} currentTimeline\n   *        The last timeline from which a segment was loaded\n   * @return {Object}\n   *          A sync-point object\n   */\n\n\n  var _proto = SyncController.prototype;\n\n  _proto.getSyncPoint = function getSyncPoint(playlist, duration, currentTimeline, currentTime) {\n    var syncPoints = this.runStrategies_(playlist, duration, currentTimeline, currentTime);\n\n    if (!syncPoints.length) {\n      // Signal that we need to attempt to get a sync-point manually\n      // by fetching a segment in the playlist and constructing\n      // a sync-point from that information\n      return null;\n    } // Now find the sync-point that is closest to the currentTime because\n    // that should result in the most accurate guess about which segment\n    // to fetch\n\n\n    return this.selectSyncPoint_(syncPoints, {\n      key: 'time',\n      value: currentTime\n    });\n  }\n  /**\n   * Calculate the amount of time that has expired off the playlist during playback\n   *\n   * @param {Playlist} playlist\n   *        Playlist object to calculate expired from\n   * @param {number} duration\n   *        Duration of the MediaSource (Infinity if playling a live source)\n   * @return {number|null}\n   *          The amount of time that has expired off the playlist during playback. Null\n   *          if no sync-points for the playlist can be found.\n   */\n  ;\n\n  _proto.getExpiredTime = function getExpiredTime(playlist, duration) {\n    if (!playlist || !playlist.segments) {\n      return null;\n    }\n\n    var syncPoints = this.runStrategies_(playlist, duration, playlist.discontinuitySequence, 0); // Without sync-points, there is not enough information to determine the expired time\n\n    if (!syncPoints.length) {\n      return null;\n    }\n\n    var syncPoint = this.selectSyncPoint_(syncPoints, {\n      key: 'segmentIndex',\n      value: 0\n    }); // If the sync-point is beyond the start of the playlist, we want to subtract the\n    // duration from index 0 to syncPoint.segmentIndex instead of adding.\n\n    if (syncPoint.segmentIndex > 0) {\n      syncPoint.time *= -1;\n    }\n\n    return Math.abs(syncPoint.time + sumDurations({\n      defaultDuration: playlist.targetDuration,\n      durationList: playlist.segments,\n      startIndex: syncPoint.segmentIndex,\n      endIndex: 0\n    }));\n  }\n  /**\n   * Runs each sync-point strategy and returns a list of sync-points returned by the\n   * strategies\n   *\n   * @private\n   * @param {Playlist} playlist\n   *        The playlist that needs a sync-point\n   * @param {number} duration\n   *        Duration of the MediaSource (Infinity if playing a live source)\n   * @param {number} currentTimeline\n   *        The last timeline from which a segment was loaded\n   * @return {Array}\n   *          A list of sync-point objects\n   */\n  ;\n\n  _proto.runStrategies_ = function runStrategies_(playlist, duration, currentTimeline, currentTime) {\n    var syncPoints = []; // Try to find a sync-point in by utilizing various strategies...\n\n    for (var i = 0; i < syncPointStrategies.length; i++) {\n      var strategy = syncPointStrategies[i];\n      var syncPoint = strategy.run(this, playlist, duration, currentTimeline, currentTime);\n\n      if (syncPoint) {\n        syncPoint.strategy = strategy.name;\n        syncPoints.push({\n          strategy: strategy.name,\n          syncPoint: syncPoint\n        });\n      }\n    }\n\n    return syncPoints;\n  }\n  /**\n   * Selects the sync-point nearest the specified target\n   *\n   * @private\n   * @param {Array} syncPoints\n   *        List of sync-points to select from\n   * @param {Object} target\n   *        Object specifying the property and value we are targeting\n   * @param {string} target.key\n   *        Specifies the property to target. Must be either 'time' or 'segmentIndex'\n   * @param {number} target.value\n   *        The value to target for the specified key.\n   * @return {Object}\n   *          The sync-point nearest the target\n   */\n  ;\n\n  _proto.selectSyncPoint_ = function selectSyncPoint_(syncPoints, target) {\n    var bestSyncPoint = syncPoints[0].syncPoint;\n    var bestDistance = Math.abs(syncPoints[0].syncPoint[target.key] - target.value);\n    var bestStrategy = syncPoints[0].strategy;\n\n    for (var i = 1; i < syncPoints.length; i++) {\n      var newDistance = Math.abs(syncPoints[i].syncPoint[target.key] - target.value);\n\n      if (newDistance < bestDistance) {\n        bestDistance = newDistance;\n        bestSyncPoint = syncPoints[i].syncPoint;\n        bestStrategy = syncPoints[i].strategy;\n      }\n    }\n\n    this.logger_(\"syncPoint for [\" + target.key + \": \" + target.value + \"] chosen with strategy\" + (\" [\" + bestStrategy + \"]: [time:\" + bestSyncPoint.time + \",\") + (\" segmentIndex:\" + bestSyncPoint.segmentIndex) + (typeof bestSyncPoint.partIndex === 'number' ? \",partIndex:\" + bestSyncPoint.partIndex : '') + ']');\n    return bestSyncPoint;\n  }\n  /**\n   * Save any meta-data present on the segments when segments leave\n   * the live window to the playlist to allow for synchronization at the\n   * playlist level later.\n   *\n   * @param {Playlist} oldPlaylist - The previous active playlist\n   * @param {Playlist} newPlaylist - The updated and most current playlist\n   */\n  ;\n\n  _proto.saveExpiredSegmentInfo = function saveExpiredSegmentInfo(oldPlaylist, newPlaylist) {\n    var mediaSequenceDiff = newPlaylist.mediaSequence - oldPlaylist.mediaSequence; // Ignore large media sequence gaps\n\n    if (mediaSequenceDiff > MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC) {\n      videojs.log.warn(\"Not saving expired segment info. Media sequence gap \" + mediaSequenceDiff + \" is too large.\");\n      return;\n    } // When a segment expires from the playlist and it has a start time\n    // save that information as a possible sync-point reference in future\n\n\n    for (var i = mediaSequenceDiff - 1; i >= 0; i--) {\n      var lastRemovedSegment = oldPlaylist.segments[i];\n\n      if (lastRemovedSegment && typeof lastRemovedSegment.start !== 'undefined') {\n        newPlaylist.syncInfo = {\n          mediaSequence: oldPlaylist.mediaSequence + i,\n          time: lastRemovedSegment.start\n        };\n        this.logger_(\"playlist refresh sync: [time:\" + newPlaylist.syncInfo.time + \",\" + (\" mediaSequence: \" + newPlaylist.syncInfo.mediaSequence + \"]\"));\n        this.trigger('syncinfoupdate');\n        break;\n      }\n    }\n  }\n  /**\n   * Save the mapping from playlist's ProgramDateTime to display. This should only happen\n   * before segments start to load.\n   *\n   * @param {Playlist} playlist - The currently active playlist\n   */\n  ;\n\n  _proto.setDateTimeMappingForStart = function setDateTimeMappingForStart(playlist) {\n    // It's possible for the playlist to be updated before playback starts, meaning time\n    // zero is not yet set. If, during these playlist refreshes, a discontinuity is\n    // crossed, then the old time zero mapping (for the prior timeline) would be retained\n    // unless the mappings are cleared.\n    this.timelineToDatetimeMappings = {};\n\n    if (playlist.segments && playlist.segments.length && playlist.segments[0].dateTimeObject) {\n      var firstSegment = playlist.segments[0];\n      var playlistTimestamp = firstSegment.dateTimeObject.getTime() / 1000;\n      this.timelineToDatetimeMappings[firstSegment.timeline] = -playlistTimestamp;\n    }\n  }\n  /**\n   * Calculates and saves timeline mappings, playlist sync info, and segment timing values\n   * based on the latest timing information.\n   *\n   * @param {Object} options\n   *        Options object\n   * @param {SegmentInfo} options.segmentInfo\n   *        The current active request information\n   * @param {boolean} options.shouldSaveTimelineMapping\n   *        If there's a timeline change, determines if the timeline mapping should be\n   *        saved for timeline mapping and program date time mappings.\n   */\n  ;\n\n  _proto.saveSegmentTimingInfo = function saveSegmentTimingInfo(_ref) {\n    var segmentInfo = _ref.segmentInfo,\n        shouldSaveTimelineMapping = _ref.shouldSaveTimelineMapping;\n    var didCalculateSegmentTimeMapping = this.calculateSegmentTimeMapping_(segmentInfo, segmentInfo.timingInfo, shouldSaveTimelineMapping);\n    var segment = segmentInfo.segment;\n\n    if (didCalculateSegmentTimeMapping) {\n      this.saveDiscontinuitySyncInfo_(segmentInfo); // If the playlist does not have sync information yet, record that information\n      // now with segment timing information\n\n      if (!segmentInfo.playlist.syncInfo) {\n        segmentInfo.playlist.syncInfo = {\n          mediaSequence: segmentInfo.playlist.mediaSequence + segmentInfo.mediaIndex,\n          time: segment.start\n        };\n      }\n    }\n\n    var dateTime = segment.dateTimeObject;\n\n    if (segment.discontinuity && shouldSaveTimelineMapping && dateTime) {\n      this.timelineToDatetimeMappings[segment.timeline] = -(dateTime.getTime() / 1000);\n    }\n  };\n\n  _proto.timestampOffsetForTimeline = function timestampOffsetForTimeline(timeline) {\n    if (typeof this.timelines[timeline] === 'undefined') {\n      return null;\n    }\n\n    return this.timelines[timeline].time;\n  };\n\n  _proto.mappingForTimeline = function mappingForTimeline(timeline) {\n    if (typeof this.timelines[timeline] === 'undefined') {\n      return null;\n    }\n\n    return this.timelines[timeline].mapping;\n  }\n  /**\n   * Use the \"media time\" for a segment to generate a mapping to \"display time\" and\n   * save that display time to the segment.\n   *\n   * @private\n   * @param {SegmentInfo} segmentInfo\n   *        The current active request information\n   * @param {Object} timingInfo\n   *        The start and end time of the current segment in \"media time\"\n   * @param {boolean} shouldSaveTimelineMapping\n   *        If there's a timeline change, determines if the timeline mapping should be\n   *        saved in timelines.\n   * @return {boolean}\n   *          Returns false if segment time mapping could not be calculated\n   */\n  ;\n\n  _proto.calculateSegmentTimeMapping_ = function calculateSegmentTimeMapping_(segmentInfo, timingInfo, shouldSaveTimelineMapping) {\n    // TODO: remove side effects\n    var segment = segmentInfo.segment;\n    var part = segmentInfo.part;\n    var mappingObj = this.timelines[segmentInfo.timeline];\n    var start;\n    var end;\n\n    if (typeof segmentInfo.timestampOffset === 'number') {\n      mappingObj = {\n        time: segmentInfo.startOfSegment,\n        mapping: segmentInfo.startOfSegment - timingInfo.start\n      };\n\n      if (shouldSaveTimelineMapping) {\n        this.timelines[segmentInfo.timeline] = mappingObj;\n        this.trigger('timestampoffset');\n        this.logger_(\"time mapping for timeline \" + segmentInfo.timeline + \": \" + (\"[time: \" + mappingObj.time + \"] [mapping: \" + mappingObj.mapping + \"]\"));\n      }\n\n      start = segmentInfo.startOfSegment;\n      end = timingInfo.end + mappingObj.mapping;\n    } else if (mappingObj) {\n      start = timingInfo.start + mappingObj.mapping;\n      end = timingInfo.end + mappingObj.mapping;\n    } else {\n      return false;\n    }\n\n    if (part) {\n      part.start = start;\n      part.end = end;\n    } // If we don't have a segment start yet or the start value we got\n    // is less than our current segment.start value, save a new start value.\n    // We have to do this because parts will have segment timing info saved\n    // multiple times and we want segment start to be the earliest part start\n    // value for that segment.\n\n\n    if (!segment.start || start < segment.start) {\n      segment.start = start;\n    }\n\n    segment.end = end;\n    return true;\n  }\n  /**\n   * Each time we have discontinuity in the playlist, attempt to calculate the location\n   * in display of the start of the discontinuity and save that. We also save an accuracy\n   * value so that we save values with the most accuracy (closest to 0.)\n   *\n   * @private\n   * @param {SegmentInfo} segmentInfo - The current active request information\n   */\n  ;\n\n  _proto.saveDiscontinuitySyncInfo_ = function saveDiscontinuitySyncInfo_(segmentInfo) {\n    var playlist = segmentInfo.playlist;\n    var segment = segmentInfo.segment; // If the current segment is a discontinuity then we know exactly where\n    // the start of the range and it's accuracy is 0 (greater accuracy values\n    // mean more approximation)\n\n    if (segment.discontinuity) {\n      this.discontinuities[segment.timeline] = {\n        time: segment.start,\n        accuracy: 0\n      };\n    } else if (playlist.discontinuityStarts && playlist.discontinuityStarts.length) {\n      // Search for future discontinuities that we can provide better timing\n      // information for and save that information for sync purposes\n      for (var i = 0; i < playlist.discontinuityStarts.length; i++) {\n        var segmentIndex = playlist.discontinuityStarts[i];\n        var discontinuity = playlist.discontinuitySequence + i + 1;\n        var mediaIndexDiff = segmentIndex - segmentInfo.mediaIndex;\n        var accuracy = Math.abs(mediaIndexDiff);\n\n        if (!this.discontinuities[discontinuity] || this.discontinuities[discontinuity].accuracy > accuracy) {\n          var time = void 0;\n\n          if (mediaIndexDiff < 0) {\n            time = segment.start - sumDurations({\n              defaultDuration: playlist.targetDuration,\n              durationList: playlist.segments,\n              startIndex: segmentInfo.mediaIndex,\n              endIndex: segmentIndex\n            });\n          } else {\n            time = segment.end + sumDurations({\n              defaultDuration: playlist.targetDuration,\n              durationList: playlist.segments,\n              startIndex: segmentInfo.mediaIndex + 1,\n              endIndex: segmentIndex\n            });\n          }\n\n          this.discontinuities[discontinuity] = {\n            time: time,\n            accuracy: accuracy\n          };\n        }\n      }\n    }\n  };\n\n  _proto.dispose = function dispose() {\n    this.trigger('dispose');\n    this.off();\n  };\n\n  return SyncController;\n}(videojs.EventTarget);\n/**\n * The TimelineChangeController acts as a source for segment loaders to listen for and\n * keep track of latest and pending timeline changes. This is useful to ensure proper\n * sync, as each loader may need to make a consideration for what timeline the other\n * loader is on before making changes which could impact the other loader's media.\n *\n * @class TimelineChangeController\n * @extends videojs.EventTarget\n */\n\n\nvar TimelineChangeController = /*#__PURE__*/function (_videojs$EventTarget) {\n  _inheritsLoose(TimelineChangeController, _videojs$EventTarget);\n\n  function TimelineChangeController() {\n    var _this;\n\n    _this = _videojs$EventTarget.call(this) || this;\n    _this.pendingTimelineChanges_ = {};\n    _this.lastTimelineChanges_ = {};\n    return _this;\n  }\n\n  var _proto = TimelineChangeController.prototype;\n\n  _proto.clearPendingTimelineChange = function clearPendingTimelineChange(type) {\n    this.pendingTimelineChanges_[type] = null;\n    this.trigger('pendingtimelinechange');\n  };\n\n  _proto.pendingTimelineChange = function pendingTimelineChange(_ref) {\n    var type = _ref.type,\n        from = _ref.from,\n        to = _ref.to;\n\n    if (typeof from === 'number' && typeof to === 'number') {\n      this.pendingTimelineChanges_[type] = {\n        type: type,\n        from: from,\n        to: to\n      };\n      this.trigger('pendingtimelinechange');\n    }\n\n    return this.pendingTimelineChanges_[type];\n  };\n\n  _proto.lastTimelineChange = function lastTimelineChange(_ref2) {\n    var type = _ref2.type,\n        from = _ref2.from,\n        to = _ref2.to;\n\n    if (typeof from === 'number' && typeof to === 'number') {\n      this.lastTimelineChanges_[type] = {\n        type: type,\n        from: from,\n        to: to\n      };\n      delete this.pendingTimelineChanges_[type];\n      this.trigger('timelinechange');\n    }\n\n    return this.lastTimelineChanges_[type];\n  };\n\n  _proto.dispose = function dispose() {\n    this.trigger('dispose');\n    this.pendingTimelineChanges_ = {};\n    this.lastTimelineChanges_ = {};\n    this.off();\n  };\n\n  return TimelineChangeController;\n}(videojs.EventTarget);\n/* rollup-plugin-worker-factory start for worker!/Users/gsinger/repos/clean/http-streaming/src/decrypter-worker.js */\n\n\nvar workerCode = transform(getWorkerString(function () {\n  function createCommonjsModule(fn, basedir, module) {\n    return module = {\n      path: basedir,\n      exports: {},\n      require: function require(path, base) {\n        return commonjsRequire(path, base === undefined || base === null ? module.path : base);\n      }\n    }, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire() {\n    throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  var createClass = createCommonjsModule(function (module) {\n    function _defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n      if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) _defineProperties(Constructor, staticProps);\n      return Constructor;\n    }\n\n    module.exports = _createClass;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  });\n  var setPrototypeOf = createCommonjsModule(function (module) {\n    function _setPrototypeOf(o, p) {\n      module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n      module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n      return _setPrototypeOf(o, p);\n    }\n\n    module.exports = _setPrototypeOf;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  });\n  var inheritsLoose = createCommonjsModule(function (module) {\n    function _inheritsLoose(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      setPrototypeOf(subClass, superClass);\n    }\n\n    module.exports = _inheritsLoose;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  });\n  /**\n   * @file stream.js\n   */\n\n  /**\n   * A lightweight readable stream implemention that handles event dispatching.\n   *\n   * @class Stream\n   */\n\n  var Stream = /*#__PURE__*/function () {\n    function Stream() {\n      this.listeners = {};\n    }\n    /**\n     * Add a listener for a specified event type.\n     *\n     * @param {string} type the event name\n     * @param {Function} listener the callback to be invoked when an event of\n     * the specified type occurs\n     */\n\n\n    var _proto = Stream.prototype;\n\n    _proto.on = function on(type, listener) {\n      if (!this.listeners[type]) {\n        this.listeners[type] = [];\n      }\n\n      this.listeners[type].push(listener);\n    }\n    /**\n     * Remove a listener for a specified event type.\n     *\n     * @param {string} type the event name\n     * @param {Function} listener  a function previously registered for this\n     * type of event through `on`\n     * @return {boolean} if we could turn it off or not\n     */\n    ;\n\n    _proto.off = function off(type, listener) {\n      if (!this.listeners[type]) {\n        return false;\n      }\n\n      var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n      // In Video.js we slice listener functions\n      // on trigger so that it does not mess up the order\n      // while we loop through.\n      //\n      // Here we slice on off so that the loop in trigger\n      // can continue using it's old reference to loop without\n      // messing up the order.\n\n      this.listeners[type] = this.listeners[type].slice(0);\n      this.listeners[type].splice(index, 1);\n      return index > -1;\n    }\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     *\n     * @param {string} type the event name\n     */\n    ;\n\n    _proto.trigger = function trigger(type) {\n      var callbacks = this.listeners[type];\n\n      if (!callbacks) {\n        return;\n      } // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n\n\n      if (arguments.length === 2) {\n        var length = callbacks.length;\n\n        for (var i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        var args = Array.prototype.slice.call(arguments, 1);\n        var _length = callbacks.length;\n\n        for (var _i = 0; _i < _length; ++_i) {\n          callbacks[_i].apply(this, args);\n        }\n      }\n    }\n    /**\n     * Destroys the stream and cleans up.\n     */\n    ;\n\n    _proto.dispose = function dispose() {\n      this.listeners = {};\n    }\n    /**\n     * Forwards all `data` events on this stream to the destination stream. The\n     * destination stream should provide a method `push` to receive the data\n     * events as they arrive.\n     *\n     * @param {Stream} destination the stream that will receive all `data` events\n     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n     */\n    ;\n\n    _proto.pipe = function pipe(destination) {\n      this.on('data', function (data) {\n        destination.push(data);\n      });\n    };\n\n    return Stream;\n  }();\n  /*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */\n\n  /**\n   * Returns the subarray of a Uint8Array without PKCS#7 padding.\n   *\n   * @param padded {Uint8Array} unencrypted bytes that have been padded\n   * @return {Uint8Array} the unpadded bytes\n   * @see http://tools.ietf.org/html/rfc5652\n   */\n\n\n  function unpad(padded) {\n    return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);\n  }\n  /*! @name aes-decrypter @version 3.1.2 @license Apache-2.0 */\n\n  /**\n   * @file aes.js\n   *\n   * This file contains an adaptation of the AES decryption algorithm\n   * from the Standford Javascript Cryptography Library. That work is\n   * covered by the following copyright and permissions notice:\n   *\n   * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.\n   * All rights reserved.\n   *\n   * Redistribution and use in source and binary forms, with or without\n   * modification, are permitted provided that the following conditions are\n   * met:\n   *\n   * 1. Redistributions of source code must retain the above copyright\n   *    notice, this list of conditions and the following disclaimer.\n   *\n   * 2. Redistributions in binary form must reproduce the above\n   *    copyright notice, this list of conditions and the following\n   *    disclaimer in the documentation and/or other materials provided\n   *    with the distribution.\n   *\n   * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\n   * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n   * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE\n   * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n   * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n   * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n   * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n   * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n   * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN\n   * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n   *\n   * The views and conclusions contained in the software and documentation\n   * are those of the authors and should not be interpreted as representing\n   * official policies, either expressed or implied, of the authors.\n   */\n\n  /**\n   * Expand the S-box tables.\n   *\n   * @private\n   */\n\n\n  var precompute = function precompute() {\n    var tables = [[[], [], [], [], []], [[], [], [], [], []]];\n    var encTable = tables[0];\n    var decTable = tables[1];\n    var sbox = encTable[4];\n    var sboxInv = decTable[4];\n    var i;\n    var x;\n    var xInv;\n    var d = [];\n    var th = [];\n    var x2;\n    var x4;\n    var x8;\n    var s;\n    var tEnc;\n    var tDec; // Compute double and third tables\n\n    for (i = 0; i < 256; i++) {\n      th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n    }\n\n    for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n      // Compute sbox\n      s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n      s = s >> 8 ^ s & 255 ^ 99;\n      sbox[x] = s;\n      sboxInv[s] = x; // Compute MixColumns\n\n      x8 = d[x4 = d[x2 = d[x]]];\n      tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n      tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n      for (i = 0; i < 4; i++) {\n        encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n        decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n      }\n    } // Compactify. Considerable speedup on Firefox.\n\n\n    for (i = 0; i < 5; i++) {\n      encTable[i] = encTable[i].slice(0);\n      decTable[i] = decTable[i].slice(0);\n    }\n\n    return tables;\n  };\n\n  var aesTables = null;\n  /**\n   * Schedule out an AES key for both encryption and decryption. This\n   * is a low-level class. Use a cipher mode to do bulk encryption.\n   *\n   * @class AES\n   * @param key {Array} The key as an array of 4, 6 or 8 words.\n   */\n\n  var AES = /*#__PURE__*/function () {\n    function AES(key) {\n      /**\n      * The expanded S-box and inverse S-box tables. These will be computed\n      * on the client so that we don't have to send them down the wire.\n      *\n      * There are two tables, _tables[0] is for encryption and\n      * _tables[1] is for decryption.\n      *\n      * The first 4 sub-tables are the expanded S-box with MixColumns. The\n      * last (_tables[01][4]) is the S-box itself.\n      *\n      * @private\n      */\n      // if we have yet to precompute the S-box tables\n      // do so now\n      if (!aesTables) {\n        aesTables = precompute();\n      } // then make a copy of that object for use\n\n\n      this._tables = [[aesTables[0][0].slice(), aesTables[0][1].slice(), aesTables[0][2].slice(), aesTables[0][3].slice(), aesTables[0][4].slice()], [aesTables[1][0].slice(), aesTables[1][1].slice(), aesTables[1][2].slice(), aesTables[1][3].slice(), aesTables[1][4].slice()]];\n      var i;\n      var j;\n      var tmp;\n      var sbox = this._tables[0][4];\n      var decTable = this._tables[1];\n      var keyLen = key.length;\n      var rcon = 1;\n\n      if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n        throw new Error('Invalid aes key size');\n      }\n\n      var encKey = key.slice(0);\n      var decKey = [];\n      this._key = [encKey, decKey]; // schedule encryption keys\n\n      for (i = keyLen; i < 4 * keyLen + 28; i++) {\n        tmp = encKey[i - 1]; // apply sbox\n\n        if (i % keyLen === 0 || keyLen === 8 && i % keyLen === 4) {\n          tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255]; // shift rows and add rcon\n\n          if (i % keyLen === 0) {\n            tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n            rcon = rcon << 1 ^ (rcon >> 7) * 283;\n          }\n        }\n\n        encKey[i] = encKey[i - keyLen] ^ tmp;\n      } // schedule decryption keys\n\n\n      for (j = 0; i; j++, i--) {\n        tmp = encKey[j & 3 ? i : i - 4];\n\n        if (i <= 4 || j < 4) {\n          decKey[j] = tmp;\n        } else {\n          decKey[j] = decTable[0][sbox[tmp >>> 24]] ^ decTable[1][sbox[tmp >> 16 & 255]] ^ decTable[2][sbox[tmp >> 8 & 255]] ^ decTable[3][sbox[tmp & 255]];\n        }\n      }\n    }\n    /**\n     * Decrypt 16 bytes, specified as four 32-bit words.\n     *\n     * @param {number} encrypted0 the first word to decrypt\n     * @param {number} encrypted1 the second word to decrypt\n     * @param {number} encrypted2 the third word to decrypt\n     * @param {number} encrypted3 the fourth word to decrypt\n     * @param {Int32Array} out the array to write the decrypted words\n     * into\n     * @param {number} offset the offset into the output array to start\n     * writing results\n     * @return {Array} The plaintext.\n     */\n\n\n    var _proto = AES.prototype;\n\n    _proto.decrypt = function decrypt(encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {\n      var key = this._key[1]; // state variables a,b,c,d are loaded with pre-whitened data\n\n      var a = encrypted0 ^ key[0];\n      var b = encrypted3 ^ key[1];\n      var c = encrypted2 ^ key[2];\n      var d = encrypted1 ^ key[3];\n      var a2;\n      var b2;\n      var c2; // key.length === 2 ?\n\n      var nInnerRounds = key.length / 4 - 2;\n      var i;\n      var kIndex = 4;\n      var table = this._tables[1]; // load up the tables\n\n      var table0 = table[0];\n      var table1 = table[1];\n      var table2 = table[2];\n      var table3 = table[3];\n      var sbox = table[4]; // Inner rounds. Cribbed from OpenSSL.\n\n      for (i = 0; i < nInnerRounds; i++) {\n        a2 = table0[a >>> 24] ^ table1[b >> 16 & 255] ^ table2[c >> 8 & 255] ^ table3[d & 255] ^ key[kIndex];\n        b2 = table0[b >>> 24] ^ table1[c >> 16 & 255] ^ table2[d >> 8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];\n        c2 = table0[c >>> 24] ^ table1[d >> 16 & 255] ^ table2[a >> 8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];\n        d = table0[d >>> 24] ^ table1[a >> 16 & 255] ^ table2[b >> 8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];\n        kIndex += 4;\n        a = a2;\n        b = b2;\n        c = c2;\n      } // Last round.\n\n\n      for (i = 0; i < 4; i++) {\n        out[(3 & -i) + offset] = sbox[a >>> 24] << 24 ^ sbox[b >> 16 & 255] << 16 ^ sbox[c >> 8 & 255] << 8 ^ sbox[d & 255] ^ key[kIndex++];\n        a2 = a;\n        a = b;\n        b = c;\n        c = d;\n        d = a2;\n      }\n    };\n\n    return AES;\n  }();\n  /**\n   * A wrapper around the Stream class to use setTimeout\n   * and run stream \"jobs\" Asynchronously\n   *\n   * @class AsyncStream\n   * @extends Stream\n   */\n\n\n  var AsyncStream = /*#__PURE__*/function (_Stream) {\n    inheritsLoose(AsyncStream, _Stream);\n\n    function AsyncStream() {\n      var _this;\n\n      _this = _Stream.call(this, Stream) || this;\n      _this.jobs = [];\n      _this.delay = 1;\n      _this.timeout_ = null;\n      return _this;\n    }\n    /**\n     * process an async job\n     *\n     * @private\n     */\n\n\n    var _proto = AsyncStream.prototype;\n\n    _proto.processJob_ = function processJob_() {\n      this.jobs.shift()();\n\n      if (this.jobs.length) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      } else {\n        this.timeout_ = null;\n      }\n    }\n    /**\n     * push a job into the stream\n     *\n     * @param {Function} job the job to push into the stream\n     */\n    ;\n\n    _proto.push = function push(job) {\n      this.jobs.push(job);\n\n      if (!this.timeout_) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      }\n    };\n\n    return AsyncStream;\n  }(Stream);\n  /**\n   * Convert network-order (big-endian) bytes into their little-endian\n   * representation.\n   */\n\n\n  var ntoh = function ntoh(word) {\n    return word << 24 | (word & 0xff00) << 8 | (word & 0xff0000) >> 8 | word >>> 24;\n  };\n  /**\n   * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n   *\n   * @param {Uint8Array} encrypted the encrypted bytes\n   * @param {Uint32Array} key the bytes of the decryption key\n   * @param {Uint32Array} initVector the initialization vector (IV) to\n   * use for the first round of CBC.\n   * @return {Uint8Array} the decrypted bytes\n   *\n   * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n   * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n   * @see https://tools.ietf.org/html/rfc2315\n   */\n\n\n  var decrypt = function decrypt(encrypted, key, initVector) {\n    // word-level access to the encrypted bytes\n    var encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2);\n    var decipher = new AES(Array.prototype.slice.call(key)); // byte and word-level access for the decrypted output\n\n    var decrypted = new Uint8Array(encrypted.byteLength);\n    var decrypted32 = new Int32Array(decrypted.buffer); // temporary variables for working with the IV, encrypted, and\n    // decrypted data\n\n    var init0;\n    var init1;\n    var init2;\n    var init3;\n    var encrypted0;\n    var encrypted1;\n    var encrypted2;\n    var encrypted3; // iteration variable\n\n    var wordIx; // pull out the words of the IV to ensure we don't modify the\n    // passed-in reference and easier access\n\n    init0 = initVector[0];\n    init1 = initVector[1];\n    init2 = initVector[2];\n    init3 = initVector[3]; // decrypt four word sequences, applying cipher-block chaining (CBC)\n    // to each decrypted block\n\n    for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {\n      // convert big-endian (network order) words into little-endian\n      // (javascript order)\n      encrypted0 = ntoh(encrypted32[wordIx]);\n      encrypted1 = ntoh(encrypted32[wordIx + 1]);\n      encrypted2 = ntoh(encrypted32[wordIx + 2]);\n      encrypted3 = ntoh(encrypted32[wordIx + 3]); // decrypt the block\n\n      decipher.decrypt(encrypted0, encrypted1, encrypted2, encrypted3, decrypted32, wordIx); // XOR with the IV, and restore network byte-order to obtain the\n      // plaintext\n\n      decrypted32[wordIx] = ntoh(decrypted32[wordIx] ^ init0);\n      decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);\n      decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);\n      decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3); // setup the IV for the next round\n\n      init0 = encrypted0;\n      init1 = encrypted1;\n      init2 = encrypted2;\n      init3 = encrypted3;\n    }\n\n    return decrypted;\n  };\n  /**\n   * The `Decrypter` class that manages decryption of AES\n   * data through `AsyncStream` objects and the `decrypt`\n   * function\n   *\n   * @param {Uint8Array} encrypted the encrypted bytes\n   * @param {Uint32Array} key the bytes of the decryption key\n   * @param {Uint32Array} initVector the initialization vector (IV) to\n   * @param {Function} done the function to run when done\n   * @class Decrypter\n   */\n\n\n  var Decrypter = /*#__PURE__*/function () {\n    function Decrypter(encrypted, key, initVector, done) {\n      var step = Decrypter.STEP;\n      var encrypted32 = new Int32Array(encrypted.buffer);\n      var decrypted = new Uint8Array(encrypted.byteLength);\n      var i = 0;\n      this.asyncStream_ = new AsyncStream(); // split up the encryption job and do the individual chunks asynchronously\n\n      this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n\n      for (i = step; i < encrypted32.length; i += step) {\n        initVector = new Uint32Array([ntoh(encrypted32[i - 4]), ntoh(encrypted32[i - 3]), ntoh(encrypted32[i - 2]), ntoh(encrypted32[i - 1])]);\n        this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n      } // invoke the done() callback when everything is finished\n\n\n      this.asyncStream_.push(function () {\n        // remove pkcs#7 padding from the decrypted bytes\n        done(null, unpad(decrypted));\n      });\n    }\n    /**\n     * a getter for step the maximum number of bytes to process at one time\n     *\n     * @return {number} the value of step 32000\n     */\n\n\n    var _proto = Decrypter.prototype;\n    /**\n     * @private\n     */\n\n    _proto.decryptChunk_ = function decryptChunk_(encrypted, key, initVector, decrypted) {\n      return function () {\n        var bytes = decrypt(encrypted, key, initVector);\n        decrypted.set(bytes, encrypted.byteOffset);\n      };\n    };\n\n    createClass(Decrypter, null, [{\n      key: \"STEP\",\n      get: function get() {\n        // 4 * 8000;\n        return 32000;\n      }\n    }]);\n    return Decrypter;\n  }();\n  /**\n   * @file bin-utils.js\n   */\n\n  /**\n   * Creates an object for sending to a web worker modifying properties that are TypedArrays\n   * into a new object with seperated properties for the buffer, byteOffset, and byteLength.\n   *\n   * @param {Object} message\n   *        Object of properties and values to send to the web worker\n   * @return {Object}\n   *         Modified message with TypedArray values expanded\n   * @function createTransferableMessage\n   */\n\n\n  var createTransferableMessage = function createTransferableMessage(message) {\n    var transferable = {};\n    Object.keys(message).forEach(function (key) {\n      var value = message[key];\n\n      if (ArrayBuffer.isView(value)) {\n        transferable[key] = {\n          bytes: value.buffer,\n          byteOffset: value.byteOffset,\n          byteLength: value.byteLength\n        };\n      } else {\n        transferable[key] = value;\n      }\n    });\n    return transferable;\n  };\n  /* global self */\n\n  /**\n   * Our web worker interface so that things can talk to aes-decrypter\n   * that will be running in a web worker. the scope is passed to this by\n   * webworkify.\n   */\n\n\n  self.onmessage = function (event) {\n    var data = event.data;\n    var encrypted = new Uint8Array(data.encrypted.bytes, data.encrypted.byteOffset, data.encrypted.byteLength);\n    var key = new Uint32Array(data.key.bytes, data.key.byteOffset, data.key.byteLength / 4);\n    var iv = new Uint32Array(data.iv.bytes, data.iv.byteOffset, data.iv.byteLength / 4);\n    /* eslint-disable no-new, handle-callback-err */\n\n    new Decrypter(encrypted, key, iv, function (err, bytes) {\n      self.postMessage(createTransferableMessage({\n        source: data.source,\n        decrypted: bytes\n      }), [bytes.buffer]);\n    });\n    /* eslint-enable */\n  };\n}));\nvar Decrypter = factory(workerCode);\n/* rollup-plugin-worker-factory end for worker!/Users/gsinger/repos/clean/http-streaming/src/decrypter-worker.js */\n\n/**\n * Convert the properties of an HLS track into an audioTrackKind.\n *\n * @private\n */\n\nvar audioTrackKind_ = function audioTrackKind_(properties) {\n  var kind = properties[\"default\"] ? 'main' : 'alternative';\n\n  if (properties.characteristics && properties.characteristics.indexOf('public.accessibility.describes-video') >= 0) {\n    kind = 'main-desc';\n  }\n\n  return kind;\n};\n/**\n * Pause provided segment loader and playlist loader if active\n *\n * @param {SegmentLoader} segmentLoader\n *        SegmentLoader to pause\n * @param {Object} mediaType\n *        Active media type\n * @function stopLoaders\n */\n\n\nvar stopLoaders = function stopLoaders(segmentLoader, mediaType) {\n  segmentLoader.abort();\n  segmentLoader.pause();\n\n  if (mediaType && mediaType.activePlaylistLoader) {\n    mediaType.activePlaylistLoader.pause();\n    mediaType.activePlaylistLoader = null;\n  }\n};\n/**\n * Start loading provided segment loader and playlist loader\n *\n * @param {PlaylistLoader} playlistLoader\n *        PlaylistLoader to start loading\n * @param {Object} mediaType\n *        Active media type\n * @function startLoaders\n */\n\n\nvar startLoaders = function startLoaders(playlistLoader, mediaType) {\n  // Segment loader will be started after `loadedmetadata` or `loadedplaylist` from the\n  // playlist loader\n  mediaType.activePlaylistLoader = playlistLoader;\n  playlistLoader.load();\n};\n/**\n * Returns a function to be called when the media group changes. It performs a\n * non-destructive (preserve the buffer) resync of the SegmentLoader. This is because a\n * change of group is merely a rendition switch of the same content at another encoding,\n * rather than a change of content, such as switching audio from English to Spanish.\n *\n * @param {string} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Handler for a non-destructive resync of SegmentLoader when the active media\n *         group changes.\n * @function onGroupChanged\n */\n\n\nvar onGroupChanged = function onGroupChanged(type, settings) {\n  return function () {\n    var _settings$segmentLoad = settings.segmentLoaders,\n        segmentLoader = _settings$segmentLoad[type],\n        mainSegmentLoader = _settings$segmentLoad.main,\n        mediaType = settings.mediaTypes[type];\n    var activeTrack = mediaType.activeTrack();\n    var activeGroup = mediaType.getActiveGroup();\n    var previousActiveLoader = mediaType.activePlaylistLoader;\n    var lastGroup = mediaType.lastGroup_; // the group did not change do nothing\n\n    if (activeGroup && lastGroup && activeGroup.id === lastGroup.id) {\n      return;\n    }\n\n    mediaType.lastGroup_ = activeGroup;\n    mediaType.lastTrack_ = activeTrack;\n    stopLoaders(segmentLoader, mediaType);\n\n    if (!activeGroup || activeGroup.isMasterPlaylist) {\n      // there is no group active or active group is a main playlist and won't change\n      return;\n    }\n\n    if (!activeGroup.playlistLoader) {\n      if (previousActiveLoader) {\n        // The previous group had a playlist loader but the new active group does not\n        // this means we are switching from demuxed to muxed audio. In this case we want to\n        // do a destructive reset of the main segment loader and not restart the audio\n        // loaders.\n        mainSegmentLoader.resetEverything();\n      }\n\n      return;\n    } // Non-destructive resync\n\n\n    segmentLoader.resyncLoader();\n    startLoaders(activeGroup.playlistLoader, mediaType);\n  };\n};\n\nvar onGroupChanging = function onGroupChanging(type, settings) {\n  return function () {\n    var segmentLoader = settings.segmentLoaders[type],\n        mediaType = settings.mediaTypes[type];\n    mediaType.lastGroup_ = null;\n    segmentLoader.abort();\n    segmentLoader.pause();\n  };\n};\n/**\n * Returns a function to be called when the media track changes. It performs a\n * destructive reset of the SegmentLoader to ensure we start loading as close to\n * currentTime as possible.\n *\n * @param {string} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Handler for a destructive reset of SegmentLoader when the active media\n *         track changes.\n * @function onTrackChanged\n */\n\n\nvar onTrackChanged = function onTrackChanged(type, settings) {\n  return function () {\n    var masterPlaylistLoader = settings.masterPlaylistLoader,\n        _settings$segmentLoad2 = settings.segmentLoaders,\n        segmentLoader = _settings$segmentLoad2[type],\n        mainSegmentLoader = _settings$segmentLoad2.main,\n        mediaType = settings.mediaTypes[type];\n    var activeTrack = mediaType.activeTrack();\n    var activeGroup = mediaType.getActiveGroup();\n    var previousActiveLoader = mediaType.activePlaylistLoader;\n    var lastTrack = mediaType.lastTrack_; // track did not change, do nothing\n\n    if (lastTrack && activeTrack && lastTrack.id === activeTrack.id) {\n      return;\n    }\n\n    mediaType.lastGroup_ = activeGroup;\n    mediaType.lastTrack_ = activeTrack;\n    stopLoaders(segmentLoader, mediaType);\n\n    if (!activeGroup) {\n      // there is no group active so we do not want to restart loaders\n      return;\n    }\n\n    if (activeGroup.isMasterPlaylist) {\n      // track did not change, do nothing\n      if (!activeTrack || !lastTrack || activeTrack.id === lastTrack.id) {\n        return;\n      }\n\n      var mpc = settings.vhs.masterPlaylistController_;\n      var newPlaylist = mpc.selectPlaylist(); // media will not change do nothing\n\n      if (mpc.media() === newPlaylist) {\n        return;\n      }\n\n      mediaType.logger_(\"track change. Switching master audio from \" + lastTrack.id + \" to \" + activeTrack.id);\n      masterPlaylistLoader.pause();\n      mainSegmentLoader.resetEverything();\n      mpc.fastQualityChange_(newPlaylist);\n      return;\n    }\n\n    if (type === 'AUDIO') {\n      if (!activeGroup.playlistLoader) {\n        // when switching from demuxed audio/video to muxed audio/video (noted by no\n        // playlist loader for the audio group), we want to do a destructive reset of the\n        // main segment loader and not restart the audio loaders\n        mainSegmentLoader.setAudio(true); // don't have to worry about disabling the audio of the audio segment loader since\n        // it should be stopped\n\n        mainSegmentLoader.resetEverything();\n        return;\n      } // although the segment loader is an audio segment loader, call the setAudio\n      // function to ensure it is prepared to re-append the init segment (or handle other\n      // config changes)\n\n\n      segmentLoader.setAudio(true);\n      mainSegmentLoader.setAudio(false);\n    }\n\n    if (previousActiveLoader === activeGroup.playlistLoader) {\n      // Nothing has actually changed. This can happen because track change events can fire\n      // multiple times for a \"single\" change. One for enabling the new active track, and\n      // one for disabling the track that was active\n      startLoaders(activeGroup.playlistLoader, mediaType);\n      return;\n    }\n\n    if (segmentLoader.track) {\n      // For WebVTT, set the new text track in the segmentloader\n      segmentLoader.track(activeTrack);\n    } // destructive reset\n\n\n    segmentLoader.resetEverything();\n    startLoaders(activeGroup.playlistLoader, mediaType);\n  };\n};\n\nvar onError = {\n  /**\n   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters\n   * an error.\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Error handler. Logs warning (or error if the playlist is blacklisted) to\n   *         console and switches back to default audio track.\n   * @function onError.AUDIO\n   */\n  AUDIO: function AUDIO(type, settings) {\n    return function () {\n      var segmentLoader = settings.segmentLoaders[type],\n          mediaType = settings.mediaTypes[type],\n          blacklistCurrentPlaylist = settings.blacklistCurrentPlaylist;\n      stopLoaders(segmentLoader, mediaType); // switch back to default audio track\n\n      var activeTrack = mediaType.activeTrack();\n      var activeGroup = mediaType.activeGroup();\n      var id = (activeGroup.filter(function (group) {\n        return group[\"default\"];\n      })[0] || activeGroup[0]).id;\n      var defaultTrack = mediaType.tracks[id];\n\n      if (activeTrack === defaultTrack) {\n        // Default track encountered an error. All we can do now is blacklist the current\n        // rendition and hope another will switch audio groups\n        blacklistCurrentPlaylist({\n          message: 'Problem encountered loading the default audio track.'\n        });\n        return;\n      }\n\n      videojs.log.warn('Problem encountered loading the alternate audio track.' + 'Switching back to default.');\n\n      for (var trackId in mediaType.tracks) {\n        mediaType.tracks[trackId].enabled = mediaType.tracks[trackId] === defaultTrack;\n      }\n\n      mediaType.onTrackChanged();\n    };\n  },\n\n  /**\n   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters\n   * an error.\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Error handler. Logs warning to console and disables the active subtitle track\n   * @function onError.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, settings) {\n    return function () {\n      var segmentLoader = settings.segmentLoaders[type],\n          mediaType = settings.mediaTypes[type];\n      videojs.log.warn('Problem encountered loading the subtitle track.' + 'Disabling subtitle track.');\n      stopLoaders(segmentLoader, mediaType);\n      var track = mediaType.activeTrack();\n\n      if (track) {\n        track.mode = 'disabled';\n      }\n\n      mediaType.onTrackChanged();\n    };\n  }\n};\nvar setupListeners = {\n  /**\n   * Setup event listeners for audio playlist loader\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {PlaylistLoader|null} playlistLoader\n   *        PlaylistLoader to register listeners on\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function setupListeners.AUDIO\n   */\n  AUDIO: function AUDIO(type, playlistLoader, settings) {\n    if (!playlistLoader) {\n      // no playlist loader means audio will be muxed with the video\n      return;\n    }\n\n    var tech = settings.tech,\n        requestOptions = settings.requestOptions,\n        segmentLoader = settings.segmentLoaders[type];\n    playlistLoader.on('loadedmetadata', function () {\n      var media = playlistLoader.media();\n      segmentLoader.playlist(media, requestOptions); // if the video is already playing, or if this isn't a live video and preload\n      // permits, start downloading segments\n\n      if (!tech.paused() || media.endList && tech.preload() !== 'none') {\n        segmentLoader.load();\n      }\n    });\n    playlistLoader.on('loadedplaylist', function () {\n      segmentLoader.playlist(playlistLoader.media(), requestOptions); // If the player isn't paused, ensure that the segment loader is running\n\n      if (!tech.paused()) {\n        segmentLoader.load();\n      }\n    });\n    playlistLoader.on('error', onError[type](type, settings));\n  },\n\n  /**\n   * Setup event listeners for subtitle playlist loader\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {PlaylistLoader|null} playlistLoader\n   *        PlaylistLoader to register listeners on\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function setupListeners.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, playlistLoader, settings) {\n    var tech = settings.tech,\n        requestOptions = settings.requestOptions,\n        segmentLoader = settings.segmentLoaders[type],\n        mediaType = settings.mediaTypes[type];\n    playlistLoader.on('loadedmetadata', function () {\n      var media = playlistLoader.media();\n      segmentLoader.playlist(media, requestOptions);\n      segmentLoader.track(mediaType.activeTrack()); // if the video is already playing, or if this isn't a live video and preload\n      // permits, start downloading segments\n\n      if (!tech.paused() || media.endList && tech.preload() !== 'none') {\n        segmentLoader.load();\n      }\n    });\n    playlistLoader.on('loadedplaylist', function () {\n      segmentLoader.playlist(playlistLoader.media(), requestOptions); // If the player isn't paused, ensure that the segment loader is running\n\n      if (!tech.paused()) {\n        segmentLoader.load();\n      }\n    });\n    playlistLoader.on('error', onError[type](type, settings));\n  }\n};\nvar initialize = {\n  /**\n   * Setup PlaylistLoaders and AudioTracks for the audio groups\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize.AUDIO\n   */\n  'AUDIO': function AUDIO(type, settings) {\n    var vhs = settings.vhs,\n        sourceType = settings.sourceType,\n        segmentLoader = settings.segmentLoaders[type],\n        requestOptions = settings.requestOptions,\n        mediaGroups = settings.master.mediaGroups,\n        _settings$mediaTypes$ = settings.mediaTypes[type],\n        groups = _settings$mediaTypes$.groups,\n        tracks = _settings$mediaTypes$.tracks,\n        logger_ = _settings$mediaTypes$.logger_,\n        masterPlaylistLoader = settings.masterPlaylistLoader;\n    var audioOnlyMaster = isAudioOnly(masterPlaylistLoader.master); // force a default if we have none\n\n    if (!mediaGroups[type] || Object.keys(mediaGroups[type]).length === 0) {\n      mediaGroups[type] = {\n        main: {\n          \"default\": {\n            \"default\": true\n          }\n        }\n      };\n\n      if (audioOnlyMaster) {\n        mediaGroups[type].main[\"default\"].playlists = masterPlaylistLoader.master.playlists;\n      }\n    }\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        var properties = mediaGroups[type][groupId][variantLabel];\n        var playlistLoader = void 0;\n\n        if (audioOnlyMaster) {\n          logger_(\"AUDIO group '\" + groupId + \"' label '\" + variantLabel + \"' is a master playlist\");\n          properties.isMasterPlaylist = true;\n          playlistLoader = null; // if vhs-json was provided as the source, and the media playlist was resolved,\n          // use the resolved media playlist object\n        } else if (sourceType === 'vhs-json' && properties.playlists) {\n          playlistLoader = new PlaylistLoader(properties.playlists[0], vhs, requestOptions);\n        } else if (properties.resolvedUri) {\n          playlistLoader = new PlaylistLoader(properties.resolvedUri, vhs, requestOptions); // TODO: dash isn't the only type with properties.playlists\n          // should we even have properties.playlists in this check.\n        } else if (properties.playlists && sourceType === 'dash') {\n          playlistLoader = new DashPlaylistLoader(properties.playlists[0], vhs, requestOptions, masterPlaylistLoader);\n        } else {\n          // no resolvedUri means the audio is muxed with the video when using this\n          // audio track\n          playlistLoader = null;\n        }\n\n        properties = videojs.mergeOptions({\n          id: variantLabel,\n          playlistLoader: playlistLoader\n        }, properties);\n        setupListeners[type](type, properties.playlistLoader, settings);\n        groups[groupId].push(properties);\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = new videojs.AudioTrack({\n            id: variantLabel,\n            kind: audioTrackKind_(properties),\n            enabled: false,\n            language: properties.language,\n            \"default\": properties[\"default\"],\n            label: variantLabel\n          });\n          tracks[variantLabel] = track;\n        }\n      }\n    } // setup single error event handler for the segment loader\n\n\n    segmentLoader.on('error', onError[type](type, settings));\n  },\n\n  /**\n   * Setup PlaylistLoaders and TextTracks for the subtitle groups\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize.SUBTITLES\n   */\n  'SUBTITLES': function SUBTITLES(type, settings) {\n    var tech = settings.tech,\n        vhs = settings.vhs,\n        sourceType = settings.sourceType,\n        segmentLoader = settings.segmentLoaders[type],\n        requestOptions = settings.requestOptions,\n        mediaGroups = settings.master.mediaGroups,\n        _settings$mediaTypes$2 = settings.mediaTypes[type],\n        groups = _settings$mediaTypes$2.groups,\n        tracks = _settings$mediaTypes$2.tracks,\n        masterPlaylistLoader = settings.masterPlaylistLoader;\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        if (mediaGroups[type][groupId][variantLabel].forced) {\n          // Subtitle playlists with the forced attribute are not selectable in Safari.\n          // According to Apple's HLS Authoring Specification:\n          //   If content has forced subtitles and regular subtitles in a given language,\n          //   the regular subtitles track in that language MUST contain both the forced\n          //   subtitles and the regular subtitles for that language.\n          // Because of this requirement and that Safari does not add forced subtitles,\n          // forced subtitles are skipped here to maintain consistent experience across\n          // all platforms\n          continue;\n        }\n\n        var properties = mediaGroups[type][groupId][variantLabel];\n        var playlistLoader = void 0;\n\n        if (sourceType === 'hls') {\n          playlistLoader = new PlaylistLoader(properties.resolvedUri, vhs, requestOptions);\n        } else if (sourceType === 'dash') {\n          var playlists = properties.playlists.filter(function (p) {\n            return p.excludeUntil !== Infinity;\n          });\n\n          if (!playlists.length) {\n            return;\n          }\n\n          playlistLoader = new DashPlaylistLoader(properties.playlists[0], vhs, requestOptions, masterPlaylistLoader);\n        } else if (sourceType === 'vhs-json') {\n          playlistLoader = new PlaylistLoader( // if the vhs-json object included the media playlist, use the media playlist\n          // as provided, otherwise use the resolved URI to load the playlist\n          properties.playlists ? properties.playlists[0] : properties.resolvedUri, vhs, requestOptions);\n        }\n\n        properties = videojs.mergeOptions({\n          id: variantLabel,\n          playlistLoader: playlistLoader\n        }, properties);\n        setupListeners[type](type, properties.playlistLoader, settings);\n        groups[groupId].push(properties);\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = tech.addRemoteTextTrack({\n            id: variantLabel,\n            kind: 'subtitles',\n            \"default\": properties[\"default\"] && properties.autoselect,\n            language: properties.language,\n            label: variantLabel\n          }, false).track;\n          tracks[variantLabel] = track;\n        }\n      }\n    } // setup single error event handler for the segment loader\n\n\n    segmentLoader.on('error', onError[type](type, settings));\n  },\n\n  /**\n   * Setup TextTracks for the closed-caption groups\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize['CLOSED-CAPTIONS']\n   */\n  'CLOSED-CAPTIONS': function CLOSEDCAPTIONS(type, settings) {\n    var tech = settings.tech,\n        mediaGroups = settings.master.mediaGroups,\n        _settings$mediaTypes$3 = settings.mediaTypes[type],\n        groups = _settings$mediaTypes$3.groups,\n        tracks = _settings$mediaTypes$3.tracks;\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        var properties = mediaGroups[type][groupId][variantLabel]; // Look for either 608 (CCn) or 708 (SERVICEn) caption services\n\n        if (!/^(?:CC|SERVICE)/.test(properties.instreamId)) {\n          continue;\n        }\n\n        var captionServices = tech.options_.vhs && tech.options_.vhs.captionServices || {};\n        var newProps = {\n          label: variantLabel,\n          language: properties.language,\n          instreamId: properties.instreamId,\n          \"default\": properties[\"default\"] && properties.autoselect\n        };\n\n        if (captionServices[newProps.instreamId]) {\n          newProps = videojs.mergeOptions(newProps, captionServices[newProps.instreamId]);\n        }\n\n        if (newProps[\"default\"] === undefined) {\n          delete newProps[\"default\"];\n        } // No PlaylistLoader is required for Closed-Captions because the captions are\n        // embedded within the video stream\n\n\n        groups[groupId].push(videojs.mergeOptions({\n          id: variantLabel\n        }, properties));\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = tech.addRemoteTextTrack({\n            id: newProps.instreamId,\n            kind: 'captions',\n            \"default\": newProps[\"default\"],\n            language: newProps.language,\n            label: newProps.label\n          }, false).track;\n          tracks[variantLabel] = track;\n        }\n      }\n    }\n  }\n};\n\nvar groupMatch = function groupMatch(list, media) {\n  for (var i = 0; i < list.length; i++) {\n    if (playlistMatch(media, list[i])) {\n      return true;\n    }\n\n    if (list[i].playlists && groupMatch(list[i].playlists, media)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * Returns a function used to get the active group of the provided type\n *\n * @param {string} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Function that returns the active media group for the provided type. Takes an\n *         optional parameter {TextTrack} track. If no track is provided, a list of all\n *         variants in the group, otherwise the variant corresponding to the provided\n *         track is returned.\n * @function activeGroup\n */\n\n\nvar activeGroup = function activeGroup(type, settings) {\n  return function (track) {\n    var masterPlaylistLoader = settings.masterPlaylistLoader,\n        groups = settings.mediaTypes[type].groups;\n    var media = masterPlaylistLoader.media();\n\n    if (!media) {\n      return null;\n    }\n\n    var variants = null; // set to variants to main media active group\n\n    if (media.attributes[type]) {\n      variants = groups[media.attributes[type]];\n    }\n\n    var groupKeys = Object.keys(groups);\n\n    if (!variants) {\n      // find the masterPlaylistLoader media\n      // that is in a media group if we are dealing\n      // with audio only\n      if (type === 'AUDIO' && groupKeys.length > 1 && isAudioOnly(settings.master)) {\n        for (var i = 0; i < groupKeys.length; i++) {\n          var groupPropertyList = groups[groupKeys[i]];\n\n          if (groupMatch(groupPropertyList, media)) {\n            variants = groupPropertyList;\n            break;\n          }\n        } // use the main group if it exists\n\n      } else if (groups.main) {\n        variants = groups.main; // only one group, use that one\n      } else if (groupKeys.length === 1) {\n        variants = groups[groupKeys[0]];\n      }\n    }\n\n    if (typeof track === 'undefined') {\n      return variants;\n    }\n\n    if (track === null || !variants) {\n      // An active track was specified so a corresponding group is expected. track === null\n      // means no track is currently active so there is no corresponding group\n      return null;\n    }\n\n    return variants.filter(function (props) {\n      return props.id === track.id;\n    })[0] || null;\n  };\n};\n\nvar activeTrack = {\n  /**\n   * Returns a function used to get the active track of type provided\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Function that returns the active media track for the provided type. Returns\n   *         null if no track is active\n   * @function activeTrack.AUDIO\n   */\n  AUDIO: function AUDIO(type, settings) {\n    return function () {\n      var tracks = settings.mediaTypes[type].tracks;\n\n      for (var id in tracks) {\n        if (tracks[id].enabled) {\n          return tracks[id];\n        }\n      }\n\n      return null;\n    };\n  },\n\n  /**\n   * Returns a function used to get the active track of type provided\n   *\n   * @param {string} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Function that returns the active media track for the provided type. Returns\n   *         null if no track is active\n   * @function activeTrack.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, settings) {\n    return function () {\n      var tracks = settings.mediaTypes[type].tracks;\n\n      for (var id in tracks) {\n        if (tracks[id].mode === 'showing' || tracks[id].mode === 'hidden') {\n          return tracks[id];\n        }\n      }\n\n      return null;\n    };\n  }\n};\n\nvar getActiveGroup = function getActiveGroup(type, _ref) {\n  var mediaTypes = _ref.mediaTypes;\n  return function () {\n    var activeTrack_ = mediaTypes[type].activeTrack();\n\n    if (!activeTrack_) {\n      return null;\n    }\n\n    return mediaTypes[type].activeGroup(activeTrack_);\n  };\n};\n/**\n * Setup PlaylistLoaders and Tracks for media groups (Audio, Subtitles,\n * Closed-Captions) specified in the master manifest.\n *\n * @param {Object} settings\n *        Object containing required information for setting up the media groups\n * @param {Tech} settings.tech\n *        The tech of the player\n * @param {Object} settings.requestOptions\n *        XHR request options used by the segment loaders\n * @param {PlaylistLoader} settings.masterPlaylistLoader\n *        PlaylistLoader for the master source\n * @param {VhsHandler} settings.vhs\n *        VHS SourceHandler\n * @param {Object} settings.master\n *        The parsed master manifest\n * @param {Object} settings.mediaTypes\n *        Object to store the loaders, tracks, and utility methods for each media type\n * @param {Function} settings.blacklistCurrentPlaylist\n *        Blacklists the current rendition and forces a rendition switch.\n * @function setupMediaGroups\n */\n\n\nvar setupMediaGroups = function setupMediaGroups(settings) {\n  ['AUDIO', 'SUBTITLES', 'CLOSED-CAPTIONS'].forEach(function (type) {\n    initialize[type](type, settings);\n  });\n  var mediaTypes = settings.mediaTypes,\n      masterPlaylistLoader = settings.masterPlaylistLoader,\n      tech = settings.tech,\n      vhs = settings.vhs,\n      _settings$segmentLoad3 = settings.segmentLoaders,\n      audioSegmentLoader = _settings$segmentLoad3['AUDIO'],\n      mainSegmentLoader = _settings$segmentLoad3.main; // setup active group and track getters and change event handlers\n\n  ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n    mediaTypes[type].activeGroup = activeGroup(type, settings);\n    mediaTypes[type].activeTrack = activeTrack[type](type, settings);\n    mediaTypes[type].onGroupChanged = onGroupChanged(type, settings);\n    mediaTypes[type].onGroupChanging = onGroupChanging(type, settings);\n    mediaTypes[type].onTrackChanged = onTrackChanged(type, settings);\n    mediaTypes[type].getActiveGroup = getActiveGroup(type, settings);\n  }); // DO NOT enable the default subtitle or caption track.\n  // DO enable the default audio track\n\n  var audioGroup = mediaTypes.AUDIO.activeGroup();\n\n  if (audioGroup) {\n    var groupId = (audioGroup.filter(function (group) {\n      return group[\"default\"];\n    })[0] || audioGroup[0]).id;\n    mediaTypes.AUDIO.tracks[groupId].enabled = true;\n    mediaTypes.AUDIO.onGroupChanged();\n    mediaTypes.AUDIO.onTrackChanged();\n    var activeAudioGroup = mediaTypes.AUDIO.getActiveGroup(); // a similar check for handling setAudio on each loader is run again each time the\n    // track is changed, but needs to be handled here since the track may not be considered\n    // changed on the first call to onTrackChanged\n\n    if (!activeAudioGroup.playlistLoader) {\n      // either audio is muxed with video or the stream is audio only\n      mainSegmentLoader.setAudio(true);\n    } else {\n      // audio is demuxed\n      mainSegmentLoader.setAudio(false);\n      audioSegmentLoader.setAudio(true);\n    }\n  }\n\n  masterPlaylistLoader.on('mediachange', function () {\n    ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n      return mediaTypes[type].onGroupChanged();\n    });\n  });\n  masterPlaylistLoader.on('mediachanging', function () {\n    ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n      return mediaTypes[type].onGroupChanging();\n    });\n  }); // custom audio track change event handler for usage event\n\n  var onAudioTrackChanged = function onAudioTrackChanged() {\n    mediaTypes.AUDIO.onTrackChanged();\n    tech.trigger({\n      type: 'usage',\n      name: 'vhs-audio-change'\n    });\n    tech.trigger({\n      type: 'usage',\n      name: 'hls-audio-change'\n    });\n  };\n\n  tech.audioTracks().addEventListener('change', onAudioTrackChanged);\n  tech.remoteTextTracks().addEventListener('change', mediaTypes.SUBTITLES.onTrackChanged);\n  vhs.on('dispose', function () {\n    tech.audioTracks().removeEventListener('change', onAudioTrackChanged);\n    tech.remoteTextTracks().removeEventListener('change', mediaTypes.SUBTITLES.onTrackChanged);\n  }); // clear existing audio tracks and add the ones we just created\n\n  tech.clearTracks('audio');\n\n  for (var id in mediaTypes.AUDIO.tracks) {\n    tech.audioTracks().addTrack(mediaTypes.AUDIO.tracks[id]);\n  }\n};\n/**\n * Creates skeleton object used to store the loaders, tracks, and utility methods for each\n * media type\n *\n * @return {Object}\n *         Object to store the loaders, tracks, and utility methods for each media type\n * @function createMediaTypes\n */\n\n\nvar createMediaTypes = function createMediaTypes() {\n  var mediaTypes = {};\n  ['AUDIO', 'SUBTITLES', 'CLOSED-CAPTIONS'].forEach(function (type) {\n    mediaTypes[type] = {\n      groups: {},\n      tracks: {},\n      activePlaylistLoader: null,\n      activeGroup: noop,\n      activeTrack: noop,\n      getActiveGroup: noop,\n      onGroupChanged: noop,\n      onTrackChanged: noop,\n      lastTrack_: null,\n      logger_: logger(\"MediaGroups[\" + type + \"]\")\n    };\n  });\n  return mediaTypes;\n};\n\nvar ABORT_EARLY_BLACKLIST_SECONDS = 60 * 2;\nvar Vhs$1; // SegmentLoader stats that need to have each loader's\n// values summed to calculate the final value\n\nvar loaderStats = ['mediaRequests', 'mediaRequestsAborted', 'mediaRequestsTimedout', 'mediaRequestsErrored', 'mediaTransferDuration', 'mediaBytesTransferred', 'mediaAppends'];\n\nvar sumLoaderStat = function sumLoaderStat(stat) {\n  return this.audioSegmentLoader_[stat] + this.mainSegmentLoader_[stat];\n};\n\nvar shouldSwitchToMedia = function shouldSwitchToMedia(_ref) {\n  var currentPlaylist = _ref.currentPlaylist,\n      buffered = _ref.buffered,\n      currentTime = _ref.currentTime,\n      nextPlaylist = _ref.nextPlaylist,\n      bufferLowWaterLine = _ref.bufferLowWaterLine,\n      bufferHighWaterLine = _ref.bufferHighWaterLine,\n      duration = _ref.duration,\n      experimentalBufferBasedABR = _ref.experimentalBufferBasedABR,\n      log = _ref.log; // we have no other playlist to switch to\n\n  if (!nextPlaylist) {\n    videojs.log.warn('We received no playlist to switch to. Please check your stream.');\n    return false;\n  }\n\n  var sharedLogLine = \"allowing switch \" + (currentPlaylist && currentPlaylist.id || 'null') + \" -> \" + nextPlaylist.id;\n\n  if (!currentPlaylist) {\n    log(sharedLogLine + \" as current playlist is not set\");\n    return true;\n  } // no need to switch if playlist is the same\n\n\n  if (nextPlaylist.id === currentPlaylist.id) {\n    return false;\n  } // determine if current time is in a buffered range.\n\n\n  var isBuffered = Boolean(findRange(buffered, currentTime).length); // If the playlist is live, then we want to not take low water line into account.\n  // This is because in LIVE, the player plays 3 segments from the end of the\n  // playlist, and if `BUFFER_LOW_WATER_LINE` is greater than the duration availble\n  // in those segments, a viewer will never experience a rendition upswitch.\n\n  if (!currentPlaylist.endList) {\n    // For LLHLS live streams, don't switch renditions before playback has started, as it almost\n    // doubles the time to first playback.\n    if (!isBuffered && typeof currentPlaylist.partTargetDuration === 'number') {\n      log(\"not \" + sharedLogLine + \" as current playlist is live llhls, but currentTime isn't in buffered.\");\n      return false;\n    }\n\n    log(sharedLogLine + \" as current playlist is live\");\n    return true;\n  }\n\n  var forwardBuffer = timeAheadOf(buffered, currentTime);\n  var maxBufferLowWaterLine = experimentalBufferBasedABR ? Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE : Config.MAX_BUFFER_LOW_WATER_LINE; // For the same reason as LIVE, we ignore the low water line when the VOD\n  // duration is below the max potential low water line\n\n  if (duration < maxBufferLowWaterLine) {\n    log(sharedLogLine + \" as duration < max low water line (\" + duration + \" < \" + maxBufferLowWaterLine + \")\");\n    return true;\n  }\n\n  var nextBandwidth = nextPlaylist.attributes.BANDWIDTH;\n  var currBandwidth = currentPlaylist.attributes.BANDWIDTH; // when switching down, if our buffer is lower than the high water line,\n  // we can switch down\n\n  if (nextBandwidth < currBandwidth && (!experimentalBufferBasedABR || forwardBuffer < bufferHighWaterLine)) {\n    var logLine = sharedLogLine + \" as next bandwidth < current bandwidth (\" + nextBandwidth + \" < \" + currBandwidth + \")\";\n\n    if (experimentalBufferBasedABR) {\n      logLine += \" and forwardBuffer < bufferHighWaterLine (\" + forwardBuffer + \" < \" + bufferHighWaterLine + \")\";\n    }\n\n    log(logLine);\n    return true;\n  } // and if our buffer is higher than the low water line,\n  // we can switch up\n\n\n  if ((!experimentalBufferBasedABR || nextBandwidth > currBandwidth) && forwardBuffer >= bufferLowWaterLine) {\n    var _logLine = sharedLogLine + \" as forwardBuffer >= bufferLowWaterLine (\" + forwardBuffer + \" >= \" + bufferLowWaterLine + \")\";\n\n    if (experimentalBufferBasedABR) {\n      _logLine += \" and next bandwidth > current bandwidth (\" + nextBandwidth + \" > \" + currBandwidth + \")\";\n    }\n\n    log(_logLine);\n    return true;\n  }\n\n  log(\"not \" + sharedLogLine + \" as no switching criteria met\");\n  return false;\n};\n/**\n * the master playlist controller controller all interactons\n * between playlists and segmentloaders. At this time this mainly\n * involves a master playlist and a series of audio playlists\n * if they are available\n *\n * @class MasterPlaylistController\n * @extends videojs.EventTarget\n */\n\n\nvar MasterPlaylistController = /*#__PURE__*/function (_videojs$EventTarget) {\n  _inheritsLoose(MasterPlaylistController, _videojs$EventTarget);\n\n  function MasterPlaylistController(options) {\n    var _this;\n\n    _this = _videojs$EventTarget.call(this) || this;\n    var src = options.src,\n        handleManifestRedirects = options.handleManifestRedirects,\n        withCredentials = options.withCredentials,\n        tech = options.tech,\n        bandwidth = options.bandwidth,\n        externVhs = options.externVhs,\n        useCueTags = options.useCueTags,\n        blacklistDuration = options.blacklistDuration,\n        enableLowInitialPlaylist = options.enableLowInitialPlaylist,\n        sourceType = options.sourceType,\n        cacheEncryptionKeys = options.cacheEncryptionKeys,\n        experimentalBufferBasedABR = options.experimentalBufferBasedABR,\n        experimentalLeastPixelDiffSelector = options.experimentalLeastPixelDiffSelector,\n        captionServices = options.captionServices;\n\n    if (!src) {\n      throw new Error('A non-empty playlist URL or JSON manifest string is required');\n    }\n\n    var maxPlaylistRetries = options.maxPlaylistRetries;\n\n    if (maxPlaylistRetries === null || typeof maxPlaylistRetries === 'undefined') {\n      maxPlaylistRetries = Infinity;\n    }\n\n    Vhs$1 = externVhs;\n    _this.experimentalBufferBasedABR = Boolean(experimentalBufferBasedABR);\n    _this.experimentalLeastPixelDiffSelector = Boolean(experimentalLeastPixelDiffSelector);\n    _this.withCredentials = withCredentials;\n    _this.tech_ = tech;\n    _this.vhs_ = tech.vhs;\n    _this.sourceType_ = sourceType;\n    _this.useCueTags_ = useCueTags;\n    _this.blacklistDuration = blacklistDuration;\n    _this.maxPlaylistRetries = maxPlaylistRetries;\n    _this.enableLowInitialPlaylist = enableLowInitialPlaylist;\n\n    if (_this.useCueTags_) {\n      _this.cueTagsTrack_ = _this.tech_.addTextTrack('metadata', 'ad-cues');\n      _this.cueTagsTrack_.inBandMetadataTrackDispatchType = '';\n    }\n\n    _this.requestOptions_ = {\n      withCredentials: withCredentials,\n      handleManifestRedirects: handleManifestRedirects,\n      maxPlaylistRetries: maxPlaylistRetries,\n      timeout: null\n    };\n\n    _this.on('error', _this.pauseLoading);\n\n    _this.mediaTypes_ = createMediaTypes();\n    _this.mediaSource = new window$1.MediaSource();\n    _this.handleDurationChange_ = _this.handleDurationChange_.bind(_assertThisInitialized(_this));\n    _this.handleSourceOpen_ = _this.handleSourceOpen_.bind(_assertThisInitialized(_this));\n    _this.handleSourceEnded_ = _this.handleSourceEnded_.bind(_assertThisInitialized(_this));\n\n    _this.mediaSource.addEventListener('durationchange', _this.handleDurationChange_); // load the media source into the player\n\n\n    _this.mediaSource.addEventListener('sourceopen', _this.handleSourceOpen_);\n\n    _this.mediaSource.addEventListener('sourceended', _this.handleSourceEnded_); // we don't have to handle sourceclose since dispose will handle termination of\n    // everything, and the MediaSource should not be detached without a proper disposal\n\n\n    _this.seekable_ = videojs.createTimeRanges();\n    _this.hasPlayed_ = false;\n    _this.syncController_ = new SyncController(options);\n    _this.segmentMetadataTrack_ = tech.addRemoteTextTrack({\n      kind: 'metadata',\n      label: 'segment-metadata'\n    }, false).track;\n    _this.decrypter_ = new Decrypter();\n    _this.sourceUpdater_ = new SourceUpdater(_this.mediaSource);\n    _this.inbandTextTracks_ = {};\n    _this.timelineChangeController_ = new TimelineChangeController();\n    var segmentLoaderSettings = {\n      vhs: _this.vhs_,\n      parse708captions: options.parse708captions,\n      captionServices: captionServices,\n      mediaSource: _this.mediaSource,\n      currentTime: _this.tech_.currentTime.bind(_this.tech_),\n      seekable: function seekable() {\n        return _this.seekable();\n      },\n      seeking: function seeking() {\n        return _this.tech_.seeking();\n      },\n      duration: function duration() {\n        return _this.duration();\n      },\n      hasPlayed: function hasPlayed() {\n        return _this.hasPlayed_;\n      },\n      goalBufferLength: function goalBufferLength() {\n        return _this.goalBufferLength();\n      },\n      bandwidth: bandwidth,\n      syncController: _this.syncController_,\n      decrypter: _this.decrypter_,\n      sourceType: _this.sourceType_,\n      inbandTextTracks: _this.inbandTextTracks_,\n      cacheEncryptionKeys: cacheEncryptionKeys,\n      sourceUpdater: _this.sourceUpdater_,\n      timelineChangeController: _this.timelineChangeController_,\n      experimentalExactManifestTimings: options.experimentalExactManifestTimings\n    }; // The source type check not only determines whether a special DASH playlist loader\n    // should be used, but also covers the case where the provided src is a vhs-json\n    // manifest object (instead of a URL). In the case of vhs-json, the default\n    // PlaylistLoader should be used.\n\n    _this.masterPlaylistLoader_ = _this.sourceType_ === 'dash' ? new DashPlaylistLoader(src, _this.vhs_, _this.requestOptions_) : new PlaylistLoader(src, _this.vhs_, _this.requestOptions_);\n\n    _this.setupMasterPlaylistLoaderListeners_(); // setup segment loaders\n    // combined audio/video or just video when alternate audio track is selected\n\n\n    _this.mainSegmentLoader_ = new SegmentLoader(videojs.mergeOptions(segmentLoaderSettings, {\n      segmentMetadataTrack: _this.segmentMetadataTrack_,\n      loaderType: 'main'\n    }), options); // alternate audio track\n\n    _this.audioSegmentLoader_ = new SegmentLoader(videojs.mergeOptions(segmentLoaderSettings, {\n      loaderType: 'audio'\n    }), options);\n    _this.subtitleSegmentLoader_ = new VTTSegmentLoader(videojs.mergeOptions(segmentLoaderSettings, {\n      loaderType: 'vtt',\n      featuresNativeTextTracks: _this.tech_.featuresNativeTextTracks\n    }), options);\n\n    _this.setupSegmentLoaderListeners_();\n\n    if (_this.experimentalBufferBasedABR) {\n      _this.masterPlaylistLoader_.one('loadedplaylist', function () {\n        return _this.startABRTimer_();\n      });\n\n      _this.tech_.on('pause', function () {\n        return _this.stopABRTimer_();\n      });\n\n      _this.tech_.on('play', function () {\n        return _this.startABRTimer_();\n      });\n    } // Create SegmentLoader stat-getters\n    // mediaRequests_\n    // mediaRequestsAborted_\n    // mediaRequestsTimedout_\n    // mediaRequestsErrored_\n    // mediaTransferDuration_\n    // mediaBytesTransferred_\n    // mediaAppends_\n\n\n    loaderStats.forEach(function (stat) {\n      _this[stat + '_'] = sumLoaderStat.bind(_assertThisInitialized(_this), stat);\n    });\n    _this.logger_ = logger('MPC');\n    _this.triggeredFmp4Usage = false;\n\n    if (_this.tech_.preload() === 'none') {\n      _this.loadOnPlay_ = function () {\n        _this.loadOnPlay_ = null;\n\n        _this.masterPlaylistLoader_.load();\n      };\n\n      _this.tech_.one('play', _this.loadOnPlay_);\n    } else {\n      _this.masterPlaylistLoader_.load();\n    }\n\n    _this.timeToLoadedData__ = -1;\n    _this.mainAppendsToLoadedData__ = -1;\n    _this.audioAppendsToLoadedData__ = -1;\n    var event = _this.tech_.preload() === 'none' ? 'play' : 'loadstart'; // start the first frame timer on loadstart or play (for preload none)\n\n    _this.tech_.one(event, function () {\n      var timeToLoadedDataStart = Date.now();\n\n      _this.tech_.one('loadeddata', function () {\n        _this.timeToLoadedData__ = Date.now() - timeToLoadedDataStart;\n        _this.mainAppendsToLoadedData__ = _this.mainSegmentLoader_.mediaAppends;\n        _this.audioAppendsToLoadedData__ = _this.audioSegmentLoader_.mediaAppends;\n      });\n    });\n\n    return _this;\n  }\n\n  var _proto = MasterPlaylistController.prototype;\n\n  _proto.mainAppendsToLoadedData_ = function mainAppendsToLoadedData_() {\n    return this.mainAppendsToLoadedData__;\n  };\n\n  _proto.audioAppendsToLoadedData_ = function audioAppendsToLoadedData_() {\n    return this.audioAppendsToLoadedData__;\n  };\n\n  _proto.appendsToLoadedData_ = function appendsToLoadedData_() {\n    var main = this.mainAppendsToLoadedData_();\n    var audio = this.audioAppendsToLoadedData_();\n\n    if (main === -1 || audio === -1) {\n      return -1;\n    }\n\n    return main + audio;\n  };\n\n  _proto.timeToLoadedData_ = function timeToLoadedData_() {\n    return this.timeToLoadedData__;\n  }\n  /**\n   * Run selectPlaylist and switch to the new playlist if we should\n   *\n   * @private\n   *\n   */\n  ;\n\n  _proto.checkABR_ = function checkABR_() {\n    var nextPlaylist = this.selectPlaylist();\n\n    if (nextPlaylist && this.shouldSwitchToMedia_(nextPlaylist)) {\n      this.switchMedia_(nextPlaylist, 'abr');\n    }\n  };\n\n  _proto.switchMedia_ = function switchMedia_(playlist, cause, delay) {\n    var oldMedia = this.media();\n    var oldId = oldMedia && (oldMedia.id || oldMedia.uri);\n    var newId = playlist.id || playlist.uri;\n\n    if (oldId && oldId !== newId) {\n      this.logger_(\"switch media \" + oldId + \" -> \" + newId + \" from \" + cause);\n      this.tech_.trigger({\n        type: 'usage',\n        name: \"vhs-rendition-change-\" + cause\n      });\n    }\n\n    this.masterPlaylistLoader_.media(playlist, delay);\n  }\n  /**\n   * Start a timer that periodically calls checkABR_\n   *\n   * @private\n   */\n  ;\n\n  _proto.startABRTimer_ = function startABRTimer_() {\n    var _this2 = this;\n\n    this.stopABRTimer_();\n    this.abrTimer_ = window$1.setInterval(function () {\n      return _this2.checkABR_();\n    }, 250);\n  }\n  /**\n   * Stop the timer that periodically calls checkABR_\n   *\n   * @private\n   */\n  ;\n\n  _proto.stopABRTimer_ = function stopABRTimer_() {\n    // if we're scrubbing, we don't need to pause.\n    // This getter will be added to Video.js in version 7.11.\n    if (this.tech_.scrubbing && this.tech_.scrubbing()) {\n      return;\n    }\n\n    window$1.clearInterval(this.abrTimer_);\n    this.abrTimer_ = null;\n  }\n  /**\n   * Get a list of playlists for the currently selected audio playlist\n   *\n   * @return {Array} the array of audio playlists\n   */\n  ;\n\n  _proto.getAudioTrackPlaylists_ = function getAudioTrackPlaylists_() {\n    var master = this.master();\n    var defaultPlaylists = master && master.playlists || []; // if we don't have any audio groups then we can only\n    // assume that the audio tracks are contained in masters\n    // playlist array, use that or an empty array.\n\n    if (!master || !master.mediaGroups || !master.mediaGroups.AUDIO) {\n      return defaultPlaylists;\n    }\n\n    var AUDIO = master.mediaGroups.AUDIO;\n    var groupKeys = Object.keys(AUDIO);\n    var track; // get the current active track\n\n    if (Object.keys(this.mediaTypes_.AUDIO.groups).length) {\n      track = this.mediaTypes_.AUDIO.activeTrack(); // or get the default track from master if mediaTypes_ isn't setup yet\n    } else {\n      // default group is `main` or just the first group.\n      var defaultGroup = AUDIO.main || groupKeys.length && AUDIO[groupKeys[0]];\n\n      for (var label in defaultGroup) {\n        if (defaultGroup[label][\"default\"]) {\n          track = {\n            label: label\n          };\n          break;\n        }\n      }\n    } // no active track no playlists.\n\n\n    if (!track) {\n      return defaultPlaylists;\n    }\n\n    var playlists = []; // get all of the playlists that are possible for the\n    // active track.\n\n    for (var group in AUDIO) {\n      if (AUDIO[group][track.label]) {\n        var properties = AUDIO[group][track.label];\n\n        if (properties.playlists && properties.playlists.length) {\n          playlists.push.apply(playlists, properties.playlists);\n        } else if (properties.uri) {\n          playlists.push(properties);\n        } else if (master.playlists.length) {\n          // if an audio group does not have a uri\n          // see if we have main playlists that use it as a group.\n          // if we do then add those to the playlists list.\n          for (var i = 0; i < master.playlists.length; i++) {\n            var playlist = master.playlists[i];\n\n            if (playlist.attributes && playlist.attributes.AUDIO && playlist.attributes.AUDIO === group) {\n              playlists.push(playlist);\n            }\n          }\n        }\n      }\n    }\n\n    if (!playlists.length) {\n      return defaultPlaylists;\n    }\n\n    return playlists;\n  }\n  /**\n   * Register event handlers on the master playlist loader. A helper\n   * function for construction time.\n   *\n   * @private\n   */\n  ;\n\n  _proto.setupMasterPlaylistLoaderListeners_ = function setupMasterPlaylistLoaderListeners_() {\n    var _this3 = this;\n\n    this.masterPlaylistLoader_.on('loadedmetadata', function () {\n      var media = _this3.masterPlaylistLoader_.media();\n\n      var requestTimeout = media.targetDuration * 1.5 * 1000; // If we don't have any more available playlists, we don't want to\n      // timeout the request.\n\n      if (isLowestEnabledRendition(_this3.masterPlaylistLoader_.master, _this3.masterPlaylistLoader_.media())) {\n        _this3.requestOptions_.timeout = 0;\n      } else {\n        _this3.requestOptions_.timeout = requestTimeout;\n      } // if this isn't a live video and preload permits, start\n      // downloading segments\n\n\n      if (media.endList && _this3.tech_.preload() !== 'none') {\n        _this3.mainSegmentLoader_.playlist(media, _this3.requestOptions_);\n\n        _this3.mainSegmentLoader_.load();\n      }\n\n      setupMediaGroups({\n        sourceType: _this3.sourceType_,\n        segmentLoaders: {\n          AUDIO: _this3.audioSegmentLoader_,\n          SUBTITLES: _this3.subtitleSegmentLoader_,\n          main: _this3.mainSegmentLoader_\n        },\n        tech: _this3.tech_,\n        requestOptions: _this3.requestOptions_,\n        masterPlaylistLoader: _this3.masterPlaylistLoader_,\n        vhs: _this3.vhs_,\n        master: _this3.master(),\n        mediaTypes: _this3.mediaTypes_,\n        blacklistCurrentPlaylist: _this3.blacklistCurrentPlaylist.bind(_this3)\n      });\n\n      _this3.triggerPresenceUsage_(_this3.master(), media);\n\n      _this3.setupFirstPlay();\n\n      if (!_this3.mediaTypes_.AUDIO.activePlaylistLoader || _this3.mediaTypes_.AUDIO.activePlaylistLoader.media()) {\n        _this3.trigger('selectedinitialmedia');\n      } else {\n        // We must wait for the active audio playlist loader to\n        // finish setting up before triggering this event so the\n        // representations API and EME setup is correct\n        _this3.mediaTypes_.AUDIO.activePlaylistLoader.one('loadedmetadata', function () {\n          _this3.trigger('selectedinitialmedia');\n        });\n      }\n    });\n    this.masterPlaylistLoader_.on('loadedplaylist', function () {\n      if (_this3.loadOnPlay_) {\n        _this3.tech_.off('play', _this3.loadOnPlay_);\n      }\n\n      var updatedPlaylist = _this3.masterPlaylistLoader_.media();\n\n      if (!updatedPlaylist) {\n        // exclude any variants that are not supported by the browser before selecting\n        // an initial media as the playlist selectors do not consider browser support\n        _this3.excludeUnsupportedVariants_();\n\n        var selectedMedia;\n\n        if (_this3.enableLowInitialPlaylist) {\n          selectedMedia = _this3.selectInitialPlaylist();\n        }\n\n        if (!selectedMedia) {\n          selectedMedia = _this3.selectPlaylist();\n        }\n\n        if (!selectedMedia || !_this3.shouldSwitchToMedia_(selectedMedia)) {\n          return;\n        }\n\n        _this3.initialMedia_ = selectedMedia;\n\n        _this3.switchMedia_(_this3.initialMedia_, 'initial'); // Under the standard case where a source URL is provided, loadedplaylist will\n        // fire again since the playlist will be requested. In the case of vhs-json\n        // (where the manifest object is provided as the source), when the media\n        // playlist's `segments` list is already available, a media playlist won't be\n        // requested, and loadedplaylist won't fire again, so the playlist handler must be\n        // called on its own here.\n\n\n        var haveJsonSource = _this3.sourceType_ === 'vhs-json' && _this3.initialMedia_.segments;\n\n        if (!haveJsonSource) {\n          return;\n        }\n\n        updatedPlaylist = _this3.initialMedia_;\n      }\n\n      _this3.handleUpdatedMediaPlaylist(updatedPlaylist);\n    });\n    this.masterPlaylistLoader_.on('error', function () {\n      _this3.blacklistCurrentPlaylist(_this3.masterPlaylistLoader_.error);\n    });\n    this.masterPlaylistLoader_.on('mediachanging', function () {\n      _this3.mainSegmentLoader_.abort();\n\n      _this3.mainSegmentLoader_.pause();\n    });\n    this.masterPlaylistLoader_.on('mediachange', function () {\n      var media = _this3.masterPlaylistLoader_.media();\n\n      var requestTimeout = media.targetDuration * 1.5 * 1000; // If we don't have any more available playlists, we don't want to\n      // timeout the request.\n\n      if (isLowestEnabledRendition(_this3.masterPlaylistLoader_.master, _this3.masterPlaylistLoader_.media())) {\n        _this3.requestOptions_.timeout = 0;\n      } else {\n        _this3.requestOptions_.timeout = requestTimeout;\n      } // TODO: Create a new event on the PlaylistLoader that signals\n      // that the segments have changed in some way and use that to\n      // update the SegmentLoader instead of doing it twice here and\n      // on `loadedplaylist`\n\n\n      _this3.mainSegmentLoader_.playlist(media, _this3.requestOptions_);\n\n      _this3.mainSegmentLoader_.load();\n\n      _this3.tech_.trigger({\n        type: 'mediachange',\n        bubbles: true\n      });\n    });\n    this.masterPlaylistLoader_.on('playlistunchanged', function () {\n      var updatedPlaylist = _this3.masterPlaylistLoader_.media(); // ignore unchanged playlists that have already been\n      // excluded for not-changing. We likely just have a really slowly updating\n      // playlist.\n\n\n      if (updatedPlaylist.lastExcludeReason_ === 'playlist-unchanged') {\n        return;\n      }\n\n      var playlistOutdated = _this3.stuckAtPlaylistEnd_(updatedPlaylist);\n\n      if (playlistOutdated) {\n        // Playlist has stopped updating and we're stuck at its end. Try to\n        // blacklist it and switch to another playlist in the hope that that\n        // one is updating (and give the player a chance to re-adjust to the\n        // safe live point).\n        _this3.blacklistCurrentPlaylist({\n          message: 'Playlist no longer updating.',\n          reason: 'playlist-unchanged'\n        }); // useful for monitoring QoS\n\n\n        _this3.tech_.trigger('playliststuck');\n      }\n    });\n    this.masterPlaylistLoader_.on('renditiondisabled', function () {\n      _this3.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-rendition-disabled'\n      });\n\n      _this3.tech_.trigger({\n        type: 'usage',\n        name: 'hls-rendition-disabled'\n      });\n    });\n    this.masterPlaylistLoader_.on('renditionenabled', function () {\n      _this3.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-rendition-enabled'\n      });\n\n      _this3.tech_.trigger({\n        type: 'usage',\n        name: 'hls-rendition-enabled'\n      });\n    });\n  }\n  /**\n   * Given an updated media playlist (whether it was loaded for the first time, or\n   * refreshed for live playlists), update any relevant properties and state to reflect\n   * changes in the media that should be accounted for (e.g., cues and duration).\n   *\n   * @param {Object} updatedPlaylist the updated media playlist object\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleUpdatedMediaPlaylist = function handleUpdatedMediaPlaylist(updatedPlaylist) {\n    if (this.useCueTags_) {\n      this.updateAdCues_(updatedPlaylist);\n    } // TODO: Create a new event on the PlaylistLoader that signals\n    // that the segments have changed in some way and use that to\n    // update the SegmentLoader instead of doing it twice here and\n    // on `mediachange`\n\n\n    this.mainSegmentLoader_.playlist(updatedPlaylist, this.requestOptions_);\n    this.updateDuration(!updatedPlaylist.endList); // If the player isn't paused, ensure that the segment loader is running,\n    // as it is possible that it was temporarily stopped while waiting for\n    // a playlist (e.g., in case the playlist errored and we re-requested it).\n\n    if (!this.tech_.paused()) {\n      this.mainSegmentLoader_.load();\n\n      if (this.audioSegmentLoader_) {\n        this.audioSegmentLoader_.load();\n      }\n    }\n  }\n  /**\n   * A helper function for triggerring presence usage events once per source\n   *\n   * @private\n   */\n  ;\n\n  _proto.triggerPresenceUsage_ = function triggerPresenceUsage_(master, media) {\n    var mediaGroups = master.mediaGroups || {};\n    var defaultDemuxed = true;\n    var audioGroupKeys = Object.keys(mediaGroups.AUDIO);\n\n    for (var mediaGroup in mediaGroups.AUDIO) {\n      for (var label in mediaGroups.AUDIO[mediaGroup]) {\n        var properties = mediaGroups.AUDIO[mediaGroup][label];\n\n        if (!properties.uri) {\n          defaultDemuxed = false;\n        }\n      }\n    }\n\n    if (defaultDemuxed) {\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-demuxed'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-demuxed'\n      });\n    }\n\n    if (Object.keys(mediaGroups.SUBTITLES).length) {\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-webvtt'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-webvtt'\n      });\n    }\n\n    if (Vhs$1.Playlist.isAes(media)) {\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-aes'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-aes'\n      });\n    }\n\n    if (audioGroupKeys.length && Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length > 1) {\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-alternate-audio'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-alternate-audio'\n      });\n    }\n\n    if (this.useCueTags_) {\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-playlist-cue-tags'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-playlist-cue-tags'\n      });\n    }\n  };\n\n  _proto.shouldSwitchToMedia_ = function shouldSwitchToMedia_(nextPlaylist) {\n    var currentPlaylist = this.masterPlaylistLoader_.media() || this.masterPlaylistLoader_.pendingMedia_;\n    var currentTime = this.tech_.currentTime();\n    var bufferLowWaterLine = this.bufferLowWaterLine();\n    var bufferHighWaterLine = this.bufferHighWaterLine();\n    var buffered = this.tech_.buffered();\n    return shouldSwitchToMedia({\n      buffered: buffered,\n      currentTime: currentTime,\n      currentPlaylist: currentPlaylist,\n      nextPlaylist: nextPlaylist,\n      bufferLowWaterLine: bufferLowWaterLine,\n      bufferHighWaterLine: bufferHighWaterLine,\n      duration: this.duration(),\n      experimentalBufferBasedABR: this.experimentalBufferBasedABR,\n      log: this.logger_\n    });\n  }\n  /**\n   * Register event handlers on the segment loaders. A helper function\n   * for construction time.\n   *\n   * @private\n   */\n  ;\n\n  _proto.setupSegmentLoaderListeners_ = function setupSegmentLoaderListeners_() {\n    var _this4 = this;\n\n    if (!this.experimentalBufferBasedABR) {\n      this.mainSegmentLoader_.on('bandwidthupdate', function () {\n        var nextPlaylist = _this4.selectPlaylist();\n\n        if (_this4.shouldSwitchToMedia_(nextPlaylist)) {\n          _this4.switchMedia_(nextPlaylist, 'bandwidthupdate');\n        }\n\n        _this4.tech_.trigger('bandwidthupdate');\n      });\n      this.mainSegmentLoader_.on('progress', function () {\n        _this4.trigger('progress');\n      });\n    }\n\n    this.mainSegmentLoader_.on('error', function () {\n      _this4.blacklistCurrentPlaylist(_this4.mainSegmentLoader_.error());\n    });\n    this.mainSegmentLoader_.on('appenderror', function () {\n      _this4.error = _this4.mainSegmentLoader_.error_;\n\n      _this4.trigger('error');\n    });\n    this.mainSegmentLoader_.on('syncinfoupdate', function () {\n      _this4.onSyncInfoUpdate_();\n    });\n    this.mainSegmentLoader_.on('timestampoffset', function () {\n      _this4.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-timestamp-offset'\n      });\n\n      _this4.tech_.trigger({\n        type: 'usage',\n        name: 'hls-timestamp-offset'\n      });\n    });\n    this.audioSegmentLoader_.on('syncinfoupdate', function () {\n      _this4.onSyncInfoUpdate_();\n    });\n    this.audioSegmentLoader_.on('appenderror', function () {\n      _this4.error = _this4.audioSegmentLoader_.error_;\n\n      _this4.trigger('error');\n    });\n    this.mainSegmentLoader_.on('ended', function () {\n      _this4.logger_('main segment loader ended');\n\n      _this4.onEndOfStream();\n    });\n    this.mainSegmentLoader_.on('earlyabort', function (event) {\n      // never try to early abort with the new ABR algorithm\n      if (_this4.experimentalBufferBasedABR) {\n        return;\n      }\n\n      _this4.delegateLoaders_('all', ['abort']);\n\n      _this4.blacklistCurrentPlaylist({\n        message: 'Aborted early because there isn\\'t enough bandwidth to complete the ' + 'request without rebuffering.'\n      }, ABORT_EARLY_BLACKLIST_SECONDS);\n    });\n\n    var updateCodecs = function updateCodecs() {\n      if (!_this4.sourceUpdater_.hasCreatedSourceBuffers()) {\n        return _this4.tryToCreateSourceBuffers_();\n      }\n\n      var codecs = _this4.getCodecsOrExclude_(); // no codecs means that the playlist was excluded\n\n\n      if (!codecs) {\n        return;\n      }\n\n      _this4.sourceUpdater_.addOrChangeSourceBuffers(codecs);\n    };\n\n    this.mainSegmentLoader_.on('trackinfo', updateCodecs);\n    this.audioSegmentLoader_.on('trackinfo', updateCodecs);\n    this.mainSegmentLoader_.on('fmp4', function () {\n      if (!_this4.triggeredFmp4Usage) {\n        _this4.tech_.trigger({\n          type: 'usage',\n          name: 'vhs-fmp4'\n        });\n\n        _this4.tech_.trigger({\n          type: 'usage',\n          name: 'hls-fmp4'\n        });\n\n        _this4.triggeredFmp4Usage = true;\n      }\n    });\n    this.audioSegmentLoader_.on('fmp4', function () {\n      if (!_this4.triggeredFmp4Usage) {\n        _this4.tech_.trigger({\n          type: 'usage',\n          name: 'vhs-fmp4'\n        });\n\n        _this4.tech_.trigger({\n          type: 'usage',\n          name: 'hls-fmp4'\n        });\n\n        _this4.triggeredFmp4Usage = true;\n      }\n    });\n    this.audioSegmentLoader_.on('ended', function () {\n      _this4.logger_('audioSegmentLoader ended');\n\n      _this4.onEndOfStream();\n    });\n  };\n\n  _proto.mediaSecondsLoaded_ = function mediaSecondsLoaded_() {\n    return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded);\n  }\n  /**\n   * Call load on our SegmentLoaders\n   */\n  ;\n\n  _proto.load = function load() {\n    this.mainSegmentLoader_.load();\n\n    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n      this.audioSegmentLoader_.load();\n    }\n\n    if (this.mediaTypes_.SUBTITLES.activePlaylistLoader) {\n      this.subtitleSegmentLoader_.load();\n    }\n  }\n  /**\n   * Re-tune playback quality level for the current player\n   * conditions without performing destructive actions, like\n   * removing already buffered content\n   *\n   * @private\n   * @deprecated\n   */\n  ;\n\n  _proto.smoothQualityChange_ = function smoothQualityChange_(media) {\n    if (media === void 0) {\n      media = this.selectPlaylist();\n    }\n\n    this.fastQualityChange_(media);\n  }\n  /**\n   * Re-tune playback quality level for the current player\n   * conditions. This method will perform destructive actions like removing\n   * already buffered content in order to readjust the currently active\n   * playlist quickly. This is good for manual quality changes\n   *\n   * @private\n   */\n  ;\n\n  _proto.fastQualityChange_ = function fastQualityChange_(media) {\n    var _this5 = this;\n\n    if (media === void 0) {\n      media = this.selectPlaylist();\n    }\n\n    if (media === this.masterPlaylistLoader_.media()) {\n      this.logger_('skipping fastQualityChange because new media is same as old');\n      return;\n    }\n\n    this.switchMedia_(media, 'fast-quality'); // Delete all buffered data to allow an immediate quality switch, then seek to give\n    // the browser a kick to remove any cached frames from the previous rendtion (.04 seconds\n    // ahead is roughly the minimum that will accomplish this across a variety of content\n    // in IE and Edge, but seeking in place is sufficient on all other browsers)\n    // Edge/IE bug: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14600375/\n    // Chrome bug: https://bugs.chromium.org/p/chromium/issues/detail?id=651904\n\n    this.mainSegmentLoader_.resetEverything(function () {\n      // Since this is not a typical seek, we avoid the seekTo method which can cause segments\n      // from the previously enabled rendition to load before the new playlist has finished loading\n      if (videojs.browser.IE_VERSION || videojs.browser.IS_EDGE) {\n        _this5.tech_.setCurrentTime(_this5.tech_.currentTime() + 0.04);\n      } else {\n        _this5.tech_.setCurrentTime(_this5.tech_.currentTime());\n      }\n    }); // don't need to reset audio as it is reset when media changes\n  }\n  /**\n   * Begin playback.\n   */\n  ;\n\n  _proto.play = function play() {\n    if (this.setupFirstPlay()) {\n      return;\n    }\n\n    if (this.tech_.ended()) {\n      this.tech_.setCurrentTime(0);\n    }\n\n    if (this.hasPlayed_) {\n      this.load();\n    }\n\n    var seekable = this.tech_.seekable(); // if the viewer has paused and we fell out of the live window,\n    // seek forward to the live point\n\n    if (this.tech_.duration() === Infinity) {\n      if (this.tech_.currentTime() < seekable.start(0)) {\n        return this.tech_.setCurrentTime(seekable.end(seekable.length - 1));\n      }\n    }\n  }\n  /**\n   * Seek to the latest media position if this is a live video and the\n   * player and video are loaded and initialized.\n   */\n  ;\n\n  _proto.setupFirstPlay = function setupFirstPlay() {\n    var _this6 = this;\n\n    var media = this.masterPlaylistLoader_.media(); // Check that everything is ready to begin buffering for the first call to play\n    //  If 1) there is no active media\n    //     2) the player is paused\n    //     3) the first play has already been setup\n    // then exit early\n\n    if (!media || this.tech_.paused() || this.hasPlayed_) {\n      return false;\n    } // when the video is a live stream\n\n\n    if (!media.endList) {\n      var seekable = this.seekable();\n\n      if (!seekable.length) {\n        // without a seekable range, the player cannot seek to begin buffering at the live\n        // point\n        return false;\n      }\n\n      if (videojs.browser.IE_VERSION && this.tech_.readyState() === 0) {\n        // IE11 throws an InvalidStateError if you try to set currentTime while the\n        // readyState is 0, so it must be delayed until the tech fires loadedmetadata.\n        this.tech_.one('loadedmetadata', function () {\n          _this6.trigger('firstplay');\n\n          _this6.tech_.setCurrentTime(seekable.end(0));\n\n          _this6.hasPlayed_ = true;\n        });\n        return false;\n      } // trigger firstplay to inform the source handler to ignore the next seek event\n\n\n      this.trigger('firstplay'); // seek to the live point\n\n      this.tech_.setCurrentTime(seekable.end(0));\n    }\n\n    this.hasPlayed_ = true; // we can begin loading now that everything is ready\n\n    this.load();\n    return true;\n  }\n  /**\n   * handle the sourceopen event on the MediaSource\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleSourceOpen_ = function handleSourceOpen_() {\n    // Only attempt to create the source buffer if none already exist.\n    // handleSourceOpen is also called when we are \"re-opening\" a source buffer\n    // after `endOfStream` has been called (in response to a seek for instance)\n    this.tryToCreateSourceBuffers_(); // if autoplay is enabled, begin playback. This is duplicative of\n    // code in video.js but is required because play() must be invoked\n    // *after* the media source has opened.\n\n    if (this.tech_.autoplay()) {\n      var playPromise = this.tech_.play(); // Catch/silence error when a pause interrupts a play request\n      // on browsers which return a promise\n\n      if (typeof playPromise !== 'undefined' && typeof playPromise.then === 'function') {\n        playPromise.then(null, function (e) {});\n      }\n    }\n\n    this.trigger('sourceopen');\n  }\n  /**\n   * handle the sourceended event on the MediaSource\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleSourceEnded_ = function handleSourceEnded_() {\n    if (!this.inbandTextTracks_.metadataTrack_) {\n      return;\n    }\n\n    var cues = this.inbandTextTracks_.metadataTrack_.cues;\n\n    if (!cues || !cues.length) {\n      return;\n    }\n\n    var duration = this.duration();\n    cues[cues.length - 1].endTime = isNaN(duration) || Math.abs(duration) === Infinity ? Number.MAX_VALUE : duration;\n  }\n  /**\n   * handle the durationchange event on the MediaSource\n   *\n   * @private\n   */\n  ;\n\n  _proto.handleDurationChange_ = function handleDurationChange_() {\n    this.tech_.trigger('durationchange');\n  }\n  /**\n   * Calls endOfStream on the media source when all active stream types have called\n   * endOfStream\n   *\n   * @param {string} streamType\n   *        Stream type of the segment loader that called endOfStream\n   * @private\n   */\n  ;\n\n  _proto.onEndOfStream = function onEndOfStream() {\n    var isEndOfStream = this.mainSegmentLoader_.ended_;\n\n    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n      var mainMediaInfo = this.mainSegmentLoader_.getCurrentMediaInfo_(); // if the audio playlist loader exists, then alternate audio is active\n\n      if (!mainMediaInfo || mainMediaInfo.hasVideo) {\n        // if we do not know if the main segment loader contains video yet or if we\n        // definitively know the main segment loader contains video, then we need to wait\n        // for both main and audio segment loaders to call endOfStream\n        isEndOfStream = isEndOfStream && this.audioSegmentLoader_.ended_;\n      } else {\n        // otherwise just rely on the audio loader\n        isEndOfStream = this.audioSegmentLoader_.ended_;\n      }\n    }\n\n    if (!isEndOfStream) {\n      return;\n    }\n\n    this.stopABRTimer_();\n    this.sourceUpdater_.endOfStream();\n  }\n  /**\n   * Check if a playlist has stopped being updated\n   *\n   * @param {Object} playlist the media playlist object\n   * @return {boolean} whether the playlist has stopped being updated or not\n   */\n  ;\n\n  _proto.stuckAtPlaylistEnd_ = function stuckAtPlaylistEnd_(playlist) {\n    var seekable = this.seekable();\n\n    if (!seekable.length) {\n      // playlist doesn't have enough information to determine whether we are stuck\n      return false;\n    }\n\n    var expired = this.syncController_.getExpiredTime(playlist, this.duration());\n\n    if (expired === null) {\n      return false;\n    } // does not use the safe live end to calculate playlist end, since we\n    // don't want to say we are stuck while there is still content\n\n\n    var absolutePlaylistEnd = Vhs$1.Playlist.playlistEnd(playlist, expired);\n    var currentTime = this.tech_.currentTime();\n    var buffered = this.tech_.buffered();\n\n    if (!buffered.length) {\n      // return true if the playhead reached the absolute end of the playlist\n      return absolutePlaylistEnd - currentTime <= SAFE_TIME_DELTA;\n    }\n\n    var bufferedEnd = buffered.end(buffered.length - 1); // return true if there is too little buffer left and buffer has reached absolute\n    // end of playlist\n\n    return bufferedEnd - currentTime <= SAFE_TIME_DELTA && absolutePlaylistEnd - bufferedEnd <= SAFE_TIME_DELTA;\n  }\n  /**\n   * Blacklists a playlist when an error occurs for a set amount of time\n   * making it unavailable for selection by the rendition selection algorithm\n   * and then forces a new playlist (rendition) selection.\n   *\n   * @param {Object=} error an optional error that may include the playlist\n   * to blacklist\n   * @param {number=} blacklistDuration an optional number of seconds to blacklist the\n   * playlist\n   */\n  ;\n\n  _proto.blacklistCurrentPlaylist = function blacklistCurrentPlaylist(error, blacklistDuration) {\n    if (error === void 0) {\n      error = {};\n    } // If the `error` was generated by the playlist loader, it will contain\n    // the playlist we were trying to load (but failed) and that should be\n    // blacklisted instead of the currently selected playlist which is likely\n    // out-of-date in this scenario\n\n\n    var currentPlaylist = error.playlist || this.masterPlaylistLoader_.media();\n    blacklistDuration = blacklistDuration || error.blacklistDuration || this.blacklistDuration; // If there is no current playlist, then an error occurred while we were\n    // trying to load the master OR while we were disposing of the tech\n\n    if (!currentPlaylist) {\n      this.error = error;\n\n      if (this.mediaSource.readyState !== 'open') {\n        this.trigger('error');\n      } else {\n        this.sourceUpdater_.endOfStream('network');\n      }\n\n      return;\n    }\n\n    currentPlaylist.playlistErrors_++;\n    var playlists = this.masterPlaylistLoader_.master.playlists;\n    var enabledPlaylists = playlists.filter(isEnabled);\n    var isFinalRendition = enabledPlaylists.length === 1 && enabledPlaylists[0] === currentPlaylist; // Don't blacklist the only playlist unless it was blacklisted\n    // forever\n\n    if (playlists.length === 1 && blacklistDuration !== Infinity) {\n      videojs.log.warn(\"Problem encountered with playlist \" + currentPlaylist.id + \". \" + 'Trying again since it is the only playlist.');\n      this.tech_.trigger('retryplaylist'); // if this is a final rendition, we should delay\n\n      return this.masterPlaylistLoader_.load(isFinalRendition);\n    }\n\n    if (isFinalRendition) {\n      // Since we're on the final non-blacklisted playlist, and we're about to blacklist\n      // it, instead of erring the player or retrying this playlist, clear out the current\n      // blacklist. This allows other playlists to be attempted in case any have been\n      // fixed.\n      var reincluded = false;\n      playlists.forEach(function (playlist) {\n        // skip current playlist which is about to be blacklisted\n        if (playlist === currentPlaylist) {\n          return;\n        }\n\n        var excludeUntil = playlist.excludeUntil; // a playlist cannot be reincluded if it wasn't excluded to begin with.\n\n        if (typeof excludeUntil !== 'undefined' && excludeUntil !== Infinity) {\n          reincluded = true;\n          delete playlist.excludeUntil;\n        }\n      });\n\n      if (reincluded) {\n        videojs.log.warn('Removing other playlists from the exclusion list because the last ' + 'rendition is about to be excluded.'); // Technically we are retrying a playlist, in that we are simply retrying a previous\n        // playlist. This is needed for users relying on the retryplaylist event to catch a\n        // case where the player might be stuck and looping through \"dead\" playlists.\n\n        this.tech_.trigger('retryplaylist');\n      }\n    } // Blacklist this playlist\n\n\n    var excludeUntil;\n\n    if (currentPlaylist.playlistErrors_ > this.maxPlaylistRetries) {\n      excludeUntil = Infinity;\n    } else {\n      excludeUntil = Date.now() + blacklistDuration * 1000;\n    }\n\n    currentPlaylist.excludeUntil = excludeUntil;\n\n    if (error.reason) {\n      currentPlaylist.lastExcludeReason_ = error.reason;\n    }\n\n    this.tech_.trigger('blacklistplaylist');\n    this.tech_.trigger({\n      type: 'usage',\n      name: 'vhs-rendition-blacklisted'\n    });\n    this.tech_.trigger({\n      type: 'usage',\n      name: 'hls-rendition-blacklisted'\n    }); // TODO: should we select a new playlist if this blacklist wasn't for the currentPlaylist?\n    // Would be something like media().id !=== currentPlaylist.id and we  would need something\n    // like `pendingMedia` in playlist loaders to check against that too. This will prevent us\n    // from loading a new playlist on any blacklist.\n    // Select a new playlist\n\n    var nextPlaylist = this.selectPlaylist();\n\n    if (!nextPlaylist) {\n      this.error = 'Playback cannot continue. No available working or supported playlists.';\n      this.trigger('error');\n      return;\n    }\n\n    var logFn = error.internal ? this.logger_ : videojs.log.warn;\n    var errorMessage = error.message ? ' ' + error.message : '';\n    logFn((error.internal ? 'Internal problem' : 'Problem') + \" encountered with playlist \" + currentPlaylist.id + \".\" + (errorMessage + \" Switching to playlist \" + nextPlaylist.id + \".\")); // if audio group changed reset audio loaders\n\n    if (nextPlaylist.attributes.AUDIO !== currentPlaylist.attributes.AUDIO) {\n      this.delegateLoaders_('audio', ['abort', 'pause']);\n    } // if subtitle group changed reset subtitle loaders\n\n\n    if (nextPlaylist.attributes.SUBTITLES !== currentPlaylist.attributes.SUBTITLES) {\n      this.delegateLoaders_('subtitle', ['abort', 'pause']);\n    }\n\n    this.delegateLoaders_('main', ['abort', 'pause']);\n    var delayDuration = nextPlaylist.targetDuration / 2 * 1000 || 5 * 1000;\n    var shouldDelay = typeof nextPlaylist.lastRequest === 'number' && Date.now() - nextPlaylist.lastRequest <= delayDuration; // delay if it's a final rendition or if the last refresh is sooner than half targetDuration\n\n    return this.switchMedia_(nextPlaylist, 'exclude', isFinalRendition || shouldDelay);\n  }\n  /**\n   * Pause all segment/playlist loaders\n   */\n  ;\n\n  _proto.pauseLoading = function pauseLoading() {\n    this.delegateLoaders_('all', ['abort', 'pause']);\n    this.stopABRTimer_();\n  }\n  /**\n   * Call a set of functions in order on playlist loaders, segment loaders,\n   * or both types of loaders.\n   *\n   * @param {string} filter\n   *        Filter loaders that should call fnNames using a string. Can be:\n   *        * all - run on all loaders\n   *        * audio - run on all audio loaders\n   *        * subtitle - run on all subtitle loaders\n   *        * main - run on the main/master loaders\n   *\n   * @param {Array|string} fnNames\n   *        A string or array of function names to call.\n   */\n  ;\n\n  _proto.delegateLoaders_ = function delegateLoaders_(filter, fnNames) {\n    var _this7 = this;\n\n    var loaders = [];\n    var dontFilterPlaylist = filter === 'all';\n\n    if (dontFilterPlaylist || filter === 'main') {\n      loaders.push(this.masterPlaylistLoader_);\n    }\n\n    var mediaTypes = [];\n\n    if (dontFilterPlaylist || filter === 'audio') {\n      mediaTypes.push('AUDIO');\n    }\n\n    if (dontFilterPlaylist || filter === 'subtitle') {\n      mediaTypes.push('CLOSED-CAPTIONS');\n      mediaTypes.push('SUBTITLES');\n    }\n\n    mediaTypes.forEach(function (mediaType) {\n      var loader = _this7.mediaTypes_[mediaType] && _this7.mediaTypes_[mediaType].activePlaylistLoader;\n\n      if (loader) {\n        loaders.push(loader);\n      }\n    });\n    ['main', 'audio', 'subtitle'].forEach(function (name) {\n      var loader = _this7[name + \"SegmentLoader_\"];\n\n      if (loader && (filter === name || filter === 'all')) {\n        loaders.push(loader);\n      }\n    });\n    loaders.forEach(function (loader) {\n      return fnNames.forEach(function (fnName) {\n        if (typeof loader[fnName] === 'function') {\n          loader[fnName]();\n        }\n      });\n    });\n  }\n  /**\n   * set the current time on all segment loaders\n   *\n   * @param {TimeRange} currentTime the current time to set\n   * @return {TimeRange} the current time\n   */\n  ;\n\n  _proto.setCurrentTime = function setCurrentTime(currentTime) {\n    var buffered = findRange(this.tech_.buffered(), currentTime);\n\n    if (!(this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media())) {\n      // return immediately if the metadata is not ready yet\n      return 0;\n    } // it's clearly an edge-case but don't thrown an error if asked to\n    // seek within an empty playlist\n\n\n    if (!this.masterPlaylistLoader_.media().segments) {\n      return 0;\n    } // if the seek location is already buffered, continue buffering as usual\n\n\n    if (buffered && buffered.length) {\n      return currentTime;\n    } // cancel outstanding requests so we begin buffering at the new\n    // location\n\n\n    this.mainSegmentLoader_.resetEverything();\n    this.mainSegmentLoader_.abort();\n\n    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n      this.audioSegmentLoader_.resetEverything();\n      this.audioSegmentLoader_.abort();\n    }\n\n    if (this.mediaTypes_.SUBTITLES.activePlaylistLoader) {\n      this.subtitleSegmentLoader_.resetEverything();\n      this.subtitleSegmentLoader_.abort();\n    } // start segment loader loading in case they are paused\n\n\n    this.load();\n  }\n  /**\n   * get the current duration\n   *\n   * @return {TimeRange} the duration\n   */\n  ;\n\n  _proto.duration = function duration() {\n    if (!this.masterPlaylistLoader_) {\n      return 0;\n    }\n\n    var media = this.masterPlaylistLoader_.media();\n\n    if (!media) {\n      // no playlists loaded yet, so can't determine a duration\n      return 0;\n    } // Don't rely on the media source for duration in the case of a live playlist since\n    // setting the native MediaSource's duration to infinity ends up with consequences to\n    // seekable behavior. See https://github.com/w3c/media-source/issues/5 for details.\n    //\n    // This is resolved in the spec by https://github.com/w3c/media-source/pull/92,\n    // however, few browsers have support for setLiveSeekableRange()\n    // https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/setLiveSeekableRange\n    //\n    // Until a time when the duration of the media source can be set to infinity, and a\n    // seekable range specified across browsers, just return Infinity.\n\n\n    if (!media.endList) {\n      return Infinity;\n    } // Since this is a VOD video, it is safe to rely on the media source's duration (if\n    // available). If it's not available, fall back to a playlist-calculated estimate.\n\n\n    if (this.mediaSource) {\n      return this.mediaSource.duration;\n    }\n\n    return Vhs$1.Playlist.duration(media);\n  }\n  /**\n   * check the seekable range\n   *\n   * @return {TimeRange} the seekable range\n   */\n  ;\n\n  _proto.seekable = function seekable() {\n    return this.seekable_;\n  };\n\n  _proto.onSyncInfoUpdate_ = function onSyncInfoUpdate_() {\n    var audioSeekable; // TODO check for creation of both source buffers before updating seekable\n    //\n    // A fix was made to this function where a check for\n    // this.sourceUpdater_.hasCreatedSourceBuffers\n    // was added to ensure that both source buffers were created before seekable was\n    // updated. However, it originally had a bug where it was checking for a true and\n    // returning early instead of checking for false. Setting it to check for false to\n    // return early though created other issues. A call to play() would check for seekable\n    // end without verifying that a seekable range was present. In addition, even checking\n    // for that didn't solve some issues, as handleFirstPlay is sometimes worked around\n    // due to a media update calling load on the segment loaders, skipping a seek to live,\n    // thereby starting live streams at the beginning of the stream rather than at the end.\n    //\n    // This conditional should be fixed to wait for the creation of two source buffers at\n    // the same time as the other sections of code are fixed to properly seek to live and\n    // not throw an error due to checking for a seekable end when no seekable range exists.\n    //\n    // For now, fall back to the older behavior, with the understanding that the seekable\n    // range may not be completely correct, leading to a suboptimal initial live point.\n\n    if (!this.masterPlaylistLoader_) {\n      return;\n    }\n\n    var media = this.masterPlaylistLoader_.media();\n\n    if (!media) {\n      return;\n    }\n\n    var expired = this.syncController_.getExpiredTime(media, this.duration());\n\n    if (expired === null) {\n      // not enough information to update seekable\n      return;\n    }\n\n    var master = this.masterPlaylistLoader_.master;\n    var mainSeekable = Vhs$1.Playlist.seekable(media, expired, Vhs$1.Playlist.liveEdgeDelay(master, media));\n\n    if (mainSeekable.length === 0) {\n      return;\n    }\n\n    if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n      media = this.mediaTypes_.AUDIO.activePlaylistLoader.media();\n      expired = this.syncController_.getExpiredTime(media, this.duration());\n\n      if (expired === null) {\n        return;\n      }\n\n      audioSeekable = Vhs$1.Playlist.seekable(media, expired, Vhs$1.Playlist.liveEdgeDelay(master, media));\n\n      if (audioSeekable.length === 0) {\n        return;\n      }\n    }\n\n    var oldEnd;\n    var oldStart;\n\n    if (this.seekable_ && this.seekable_.length) {\n      oldEnd = this.seekable_.end(0);\n      oldStart = this.seekable_.start(0);\n    }\n\n    if (!audioSeekable) {\n      // seekable has been calculated based on buffering video data so it\n      // can be returned directly\n      this.seekable_ = mainSeekable;\n    } else if (audioSeekable.start(0) > mainSeekable.end(0) || mainSeekable.start(0) > audioSeekable.end(0)) {\n      // seekables are pretty far off, rely on main\n      this.seekable_ = mainSeekable;\n    } else {\n      this.seekable_ = videojs.createTimeRanges([[audioSeekable.start(0) > mainSeekable.start(0) ? audioSeekable.start(0) : mainSeekable.start(0), audioSeekable.end(0) < mainSeekable.end(0) ? audioSeekable.end(0) : mainSeekable.end(0)]]);\n    } // seekable is the same as last time\n\n\n    if (this.seekable_ && this.seekable_.length) {\n      if (this.seekable_.end(0) === oldEnd && this.seekable_.start(0) === oldStart) {\n        return;\n      }\n    }\n\n    this.logger_(\"seekable updated [\" + printableRange(this.seekable_) + \"]\");\n    this.tech_.trigger('seekablechanged');\n  }\n  /**\n   * Update the player duration\n   */\n  ;\n\n  _proto.updateDuration = function updateDuration(isLive) {\n    if (this.updateDuration_) {\n      this.mediaSource.removeEventListener('sourceopen', this.updateDuration_);\n      this.updateDuration_ = null;\n    }\n\n    if (this.mediaSource.readyState !== 'open') {\n      this.updateDuration_ = this.updateDuration.bind(this, isLive);\n      this.mediaSource.addEventListener('sourceopen', this.updateDuration_);\n      return;\n    }\n\n    if (isLive) {\n      var seekable = this.seekable();\n\n      if (!seekable.length) {\n        return;\n      } // Even in the case of a live playlist, the native MediaSource's duration should not\n      // be set to Infinity (even though this would be expected for a live playlist), since\n      // setting the native MediaSource's duration to infinity ends up with consequences to\n      // seekable behavior. See https://github.com/w3c/media-source/issues/5 for details.\n      //\n      // This is resolved in the spec by https://github.com/w3c/media-source/pull/92,\n      // however, few browsers have support for setLiveSeekableRange()\n      // https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/setLiveSeekableRange\n      //\n      // Until a time when the duration of the media source can be set to infinity, and a\n      // seekable range specified across browsers, the duration should be greater than or\n      // equal to the last possible seekable value.\n      // MediaSource duration starts as NaN\n      // It is possible (and probable) that this case will never be reached for many\n      // sources, since the MediaSource reports duration as the highest value without\n      // accounting for timestamp offset. For example, if the timestamp offset is -100 and\n      // we buffered times 0 to 100 with real times of 100 to 200, even though current\n      // time will be between 0 and 100, the native media source may report the duration\n      // as 200. However, since we report duration separate from the media source (as\n      // Infinity), and as long as the native media source duration value is greater than\n      // our reported seekable range, seeks will work as expected. The large number as\n      // duration for live is actually a strategy used by some players to work around the\n      // issue of live seekable ranges cited above.\n\n\n      if (isNaN(this.mediaSource.duration) || this.mediaSource.duration < seekable.end(seekable.length - 1)) {\n        this.sourceUpdater_.setDuration(seekable.end(seekable.length - 1));\n      }\n\n      return;\n    }\n\n    var buffered = this.tech_.buffered();\n    var duration = Vhs$1.Playlist.duration(this.masterPlaylistLoader_.media());\n\n    if (buffered.length > 0) {\n      duration = Math.max(duration, buffered.end(buffered.length - 1));\n    }\n\n    if (this.mediaSource.duration !== duration) {\n      this.sourceUpdater_.setDuration(duration);\n    }\n  }\n  /**\n   * dispose of the MasterPlaylistController and everything\n   * that it controls\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    var _this8 = this;\n\n    this.trigger('dispose');\n    this.decrypter_.terminate();\n    this.masterPlaylistLoader_.dispose();\n    this.mainSegmentLoader_.dispose();\n\n    if (this.loadOnPlay_) {\n      this.tech_.off('play', this.loadOnPlay_);\n    }\n\n    ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n      var groups = _this8.mediaTypes_[type].groups;\n\n      for (var id in groups) {\n        groups[id].forEach(function (group) {\n          if (group.playlistLoader) {\n            group.playlistLoader.dispose();\n          }\n        });\n      }\n    });\n    this.audioSegmentLoader_.dispose();\n    this.subtitleSegmentLoader_.dispose();\n    this.sourceUpdater_.dispose();\n    this.timelineChangeController_.dispose();\n    this.stopABRTimer_();\n\n    if (this.updateDuration_) {\n      this.mediaSource.removeEventListener('sourceopen', this.updateDuration_);\n    }\n\n    this.mediaSource.removeEventListener('durationchange', this.handleDurationChange_); // load the media source into the player\n\n    this.mediaSource.removeEventListener('sourceopen', this.handleSourceOpen_);\n    this.mediaSource.removeEventListener('sourceended', this.handleSourceEnded_);\n    this.off();\n  }\n  /**\n   * return the master playlist object if we have one\n   *\n   * @return {Object} the master playlist object that we parsed\n   */\n  ;\n\n  _proto.master = function master() {\n    return this.masterPlaylistLoader_.master;\n  }\n  /**\n   * return the currently selected playlist\n   *\n   * @return {Object} the currently selected playlist object that we parsed\n   */\n  ;\n\n  _proto.media = function media() {\n    // playlist loader will not return media if it has not been fully loaded\n    return this.masterPlaylistLoader_.media() || this.initialMedia_;\n  };\n\n  _proto.areMediaTypesKnown_ = function areMediaTypesKnown_() {\n    var usingAudioLoader = !!this.mediaTypes_.AUDIO.activePlaylistLoader;\n    var hasMainMediaInfo = !!this.mainSegmentLoader_.getCurrentMediaInfo_(); // if we are not using an audio loader, then we have audio media info\n    // otherwise check on the segment loader.\n\n    var hasAudioMediaInfo = !usingAudioLoader ? true : !!this.audioSegmentLoader_.getCurrentMediaInfo_(); // one or both loaders has not loaded sufficently to get codecs\n\n    if (!hasMainMediaInfo || !hasAudioMediaInfo) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.getCodecsOrExclude_ = function getCodecsOrExclude_() {\n    var _this9 = this;\n\n    var media = {\n      main: this.mainSegmentLoader_.getCurrentMediaInfo_() || {},\n      audio: this.audioSegmentLoader_.getCurrentMediaInfo_() || {}\n    }; // set \"main\" media equal to video\n\n    media.video = media.main;\n    var playlistCodecs = codecsForPlaylist(this.master(), this.media());\n    var codecs = {};\n    var usingAudioLoader = !!this.mediaTypes_.AUDIO.activePlaylistLoader;\n\n    if (media.main.hasVideo) {\n      codecs.video = playlistCodecs.video || media.main.videoCodec || DEFAULT_VIDEO_CODEC;\n    }\n\n    if (media.main.isMuxed) {\n      codecs.video += \",\" + (playlistCodecs.audio || media.main.audioCodec || DEFAULT_AUDIO_CODEC);\n    }\n\n    if (media.main.hasAudio && !media.main.isMuxed || media.audio.hasAudio || usingAudioLoader) {\n      codecs.audio = playlistCodecs.audio || media.main.audioCodec || media.audio.audioCodec || DEFAULT_AUDIO_CODEC; // set audio isFmp4 so we use the correct \"supports\" function below\n\n      media.audio.isFmp4 = media.main.hasAudio && !media.main.isMuxed ? media.main.isFmp4 : media.audio.isFmp4;\n    } // no codecs, no playback.\n\n\n    if (!codecs.audio && !codecs.video) {\n      this.blacklistCurrentPlaylist({\n        playlist: this.media(),\n        message: 'Could not determine codecs for playlist.',\n        blacklistDuration: Infinity\n      });\n      return;\n    } // fmp4 relies on browser support, while ts relies on muxer support\n\n\n    var supportFunction = function supportFunction(isFmp4, codec) {\n      return isFmp4 ? browserSupportsCodec(codec) : muxerSupportsCodec(codec);\n    };\n\n    var unsupportedCodecs = {};\n    var unsupportedAudio;\n    ['video', 'audio'].forEach(function (type) {\n      if (codecs.hasOwnProperty(type) && !supportFunction(media[type].isFmp4, codecs[type])) {\n        var supporter = media[type].isFmp4 ? 'browser' : 'muxer';\n        unsupportedCodecs[supporter] = unsupportedCodecs[supporter] || [];\n        unsupportedCodecs[supporter].push(codecs[type]);\n\n        if (type === 'audio') {\n          unsupportedAudio = supporter;\n        }\n      }\n    });\n\n    if (usingAudioLoader && unsupportedAudio && this.media().attributes.AUDIO) {\n      var audioGroup = this.media().attributes.AUDIO;\n      this.master().playlists.forEach(function (variant) {\n        var variantAudioGroup = variant.attributes && variant.attributes.AUDIO;\n\n        if (variantAudioGroup === audioGroup && variant !== _this9.media()) {\n          variant.excludeUntil = Infinity;\n        }\n      });\n      this.logger_(\"excluding audio group \" + audioGroup + \" as \" + unsupportedAudio + \" does not support codec(s): \\\"\" + codecs.audio + \"\\\"\");\n    } // if we have any unsupported codecs blacklist this playlist.\n\n\n    if (Object.keys(unsupportedCodecs).length) {\n      var message = Object.keys(unsupportedCodecs).reduce(function (acc, supporter) {\n        if (acc) {\n          acc += ', ';\n        }\n\n        acc += supporter + \" does not support codec(s): \\\"\" + unsupportedCodecs[supporter].join(',') + \"\\\"\";\n        return acc;\n      }, '') + '.';\n      this.blacklistCurrentPlaylist({\n        playlist: this.media(),\n        internal: true,\n        message: message,\n        blacklistDuration: Infinity\n      });\n      return;\n    } // check if codec switching is happening\n\n\n    if (this.sourceUpdater_.hasCreatedSourceBuffers() && !this.sourceUpdater_.canChangeType()) {\n      var switchMessages = [];\n      ['video', 'audio'].forEach(function (type) {\n        var newCodec = (parseCodecs(_this9.sourceUpdater_.codecs[type] || '')[0] || {}).type;\n        var oldCodec = (parseCodecs(codecs[type] || '')[0] || {}).type;\n\n        if (newCodec && oldCodec && newCodec.toLowerCase() !== oldCodec.toLowerCase()) {\n          switchMessages.push(\"\\\"\" + _this9.sourceUpdater_.codecs[type] + \"\\\" -> \\\"\" + codecs[type] + \"\\\"\");\n        }\n      });\n\n      if (switchMessages.length) {\n        this.blacklistCurrentPlaylist({\n          playlist: this.media(),\n          message: \"Codec switching not supported: \" + switchMessages.join(', ') + \".\",\n          blacklistDuration: Infinity,\n          internal: true\n        });\n        return;\n      }\n    } // TODO: when using the muxer shouldn't we just return\n    // the codecs that the muxer outputs?\n\n\n    return codecs;\n  }\n  /**\n   * Create source buffers and exlude any incompatible renditions.\n   *\n   * @private\n   */\n  ;\n\n  _proto.tryToCreateSourceBuffers_ = function tryToCreateSourceBuffers_() {\n    // media source is not ready yet or sourceBuffers are already\n    // created.\n    if (this.mediaSource.readyState !== 'open' || this.sourceUpdater_.hasCreatedSourceBuffers()) {\n      return;\n    }\n\n    if (!this.areMediaTypesKnown_()) {\n      return;\n    }\n\n    var codecs = this.getCodecsOrExclude_(); // no codecs means that the playlist was excluded\n\n    if (!codecs) {\n      return;\n    }\n\n    this.sourceUpdater_.createSourceBuffers(codecs);\n    var codecString = [codecs.video, codecs.audio].filter(Boolean).join(',');\n    this.excludeIncompatibleVariants_(codecString);\n  }\n  /**\n   * Excludes playlists with codecs that are unsupported by the muxer and browser.\n   */\n  ;\n\n  _proto.excludeUnsupportedVariants_ = function excludeUnsupportedVariants_() {\n    var _this10 = this;\n\n    var playlists = this.master().playlists;\n    var ids = []; // TODO: why don't we have a property to loop through all\n    // playlist? Why did we ever mix indexes and keys?\n\n    Object.keys(playlists).forEach(function (key) {\n      var variant = playlists[key]; // check if we already processed this playlist.\n\n      if (ids.indexOf(variant.id) !== -1) {\n        return;\n      }\n\n      ids.push(variant.id);\n      var codecs = codecsForPlaylist(_this10.master, variant);\n      var unsupported = [];\n\n      if (codecs.audio && !muxerSupportsCodec(codecs.audio) && !browserSupportsCodec(codecs.audio)) {\n        unsupported.push(\"audio codec \" + codecs.audio);\n      }\n\n      if (codecs.video && !muxerSupportsCodec(codecs.video) && !browserSupportsCodec(codecs.video)) {\n        unsupported.push(\"video codec \" + codecs.video);\n      }\n\n      if (codecs.text && codecs.text === 'stpp.ttml.im1t') {\n        unsupported.push(\"text codec \" + codecs.text);\n      }\n\n      if (unsupported.length) {\n        variant.excludeUntil = Infinity;\n\n        _this10.logger_(\"excluding \" + variant.id + \" for unsupported: \" + unsupported.join(', '));\n      }\n    });\n  }\n  /**\n   * Blacklist playlists that are known to be codec or\n   * stream-incompatible with the SourceBuffer configuration. For\n   * instance, Media Source Extensions would cause the video element to\n   * stall waiting for video data if you switched from a variant with\n   * video and audio to an audio-only one.\n   *\n   * @param {Object} media a media playlist compatible with the current\n   * set of SourceBuffers. Variants in the current master playlist that\n   * do not appear to have compatible codec or stream configurations\n   * will be excluded from the default playlist selection algorithm\n   * indefinitely.\n   * @private\n   */\n  ;\n\n  _proto.excludeIncompatibleVariants_ = function excludeIncompatibleVariants_(codecString) {\n    var _this11 = this;\n\n    var ids = [];\n    var playlists = this.master().playlists;\n    var codecs = unwrapCodecList(parseCodecs(codecString));\n    var codecCount_ = codecCount(codecs);\n    var videoDetails = codecs.video && parseCodecs(codecs.video)[0] || null;\n    var audioDetails = codecs.audio && parseCodecs(codecs.audio)[0] || null;\n    Object.keys(playlists).forEach(function (key) {\n      var variant = playlists[key]; // check if we already processed this playlist.\n      // or it if it is already excluded forever.\n\n      if (ids.indexOf(variant.id) !== -1 || variant.excludeUntil === Infinity) {\n        return;\n      }\n\n      ids.push(variant.id);\n      var blacklistReasons = []; // get codecs from the playlist for this variant\n\n      var variantCodecs = codecsForPlaylist(_this11.masterPlaylistLoader_.master, variant);\n      var variantCodecCount = codecCount(variantCodecs); // if no codecs are listed, we cannot determine that this\n      // variant is incompatible. Wait for mux.js to probe\n\n      if (!variantCodecs.audio && !variantCodecs.video) {\n        return;\n      } // TODO: we can support this by removing the\n      // old media source and creating a new one, but it will take some work.\n      // The number of streams cannot change\n\n\n      if (variantCodecCount !== codecCount_) {\n        blacklistReasons.push(\"codec count \\\"\" + variantCodecCount + \"\\\" !== \\\"\" + codecCount_ + \"\\\"\");\n      } // only exclude playlists by codec change, if codecs cannot switch\n      // during playback.\n\n\n      if (!_this11.sourceUpdater_.canChangeType()) {\n        var variantVideoDetails = variantCodecs.video && parseCodecs(variantCodecs.video)[0] || null;\n        var variantAudioDetails = variantCodecs.audio && parseCodecs(variantCodecs.audio)[0] || null; // the video codec cannot change\n\n        if (variantVideoDetails && videoDetails && variantVideoDetails.type.toLowerCase() !== videoDetails.type.toLowerCase()) {\n          blacklistReasons.push(\"video codec \\\"\" + variantVideoDetails.type + \"\\\" !== \\\"\" + videoDetails.type + \"\\\"\");\n        } // the audio codec cannot change\n\n\n        if (variantAudioDetails && audioDetails && variantAudioDetails.type.toLowerCase() !== audioDetails.type.toLowerCase()) {\n          blacklistReasons.push(\"audio codec \\\"\" + variantAudioDetails.type + \"\\\" !== \\\"\" + audioDetails.type + \"\\\"\");\n        }\n      }\n\n      if (blacklistReasons.length) {\n        variant.excludeUntil = Infinity;\n\n        _this11.logger_(\"blacklisting \" + variant.id + \": \" + blacklistReasons.join(' && '));\n      }\n    });\n  };\n\n  _proto.updateAdCues_ = function updateAdCues_(media) {\n    var offset = 0;\n    var seekable = this.seekable();\n\n    if (seekable.length) {\n      offset = seekable.start(0);\n    }\n\n    updateAdCues(media, this.cueTagsTrack_, offset);\n  }\n  /**\n   * Calculates the desired forward buffer length based on current time\n   *\n   * @return {number} Desired forward buffer length in seconds\n   */\n  ;\n\n  _proto.goalBufferLength = function goalBufferLength() {\n    var currentTime = this.tech_.currentTime();\n    var initial = Config.GOAL_BUFFER_LENGTH;\n    var rate = Config.GOAL_BUFFER_LENGTH_RATE;\n    var max = Math.max(initial, Config.MAX_GOAL_BUFFER_LENGTH);\n    return Math.min(initial + currentTime * rate, max);\n  }\n  /**\n   * Calculates the desired buffer low water line based on current time\n   *\n   * @return {number} Desired buffer low water line in seconds\n   */\n  ;\n\n  _proto.bufferLowWaterLine = function bufferLowWaterLine() {\n    var currentTime = this.tech_.currentTime();\n    var initial = Config.BUFFER_LOW_WATER_LINE;\n    var rate = Config.BUFFER_LOW_WATER_LINE_RATE;\n    var max = Math.max(initial, Config.MAX_BUFFER_LOW_WATER_LINE);\n    var newMax = Math.max(initial, Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);\n    return Math.min(initial + currentTime * rate, this.experimentalBufferBasedABR ? newMax : max);\n  };\n\n  _proto.bufferHighWaterLine = function bufferHighWaterLine() {\n    return Config.BUFFER_HIGH_WATER_LINE;\n  };\n\n  return MasterPlaylistController;\n}(videojs.EventTarget);\n/**\n * Returns a function that acts as the Enable/disable playlist function.\n *\n * @param {PlaylistLoader} loader - The master playlist loader\n * @param {string} playlistID - id of the playlist\n * @param {Function} changePlaylistFn - A function to be called after a\n * playlist's enabled-state has been changed. Will NOT be called if a\n * playlist's enabled-state is unchanged\n * @param {boolean=} enable - Value to set the playlist enabled-state to\n * or if undefined returns the current enabled-state for the playlist\n * @return {Function} Function for setting/getting enabled\n */\n\n\nvar enableFunction = function enableFunction(loader, playlistID, changePlaylistFn) {\n  return function (enable) {\n    var playlist = loader.master.playlists[playlistID];\n    var incompatible = isIncompatible(playlist);\n    var currentlyEnabled = isEnabled(playlist);\n\n    if (typeof enable === 'undefined') {\n      return currentlyEnabled;\n    }\n\n    if (enable) {\n      delete playlist.disabled;\n    } else {\n      playlist.disabled = true;\n    }\n\n    if (enable !== currentlyEnabled && !incompatible) {\n      // Ensure the outside world knows about our changes\n      changePlaylistFn();\n\n      if (enable) {\n        loader.trigger('renditionenabled');\n      } else {\n        loader.trigger('renditiondisabled');\n      }\n    }\n\n    return enable;\n  };\n};\n/**\n * The representation object encapsulates the publicly visible information\n * in a media playlist along with a setter/getter-type function (enabled)\n * for changing the enabled-state of a particular playlist entry\n *\n * @class Representation\n */\n\n\nvar Representation = function Representation(vhsHandler, playlist, id) {\n  var mpc = vhsHandler.masterPlaylistController_,\n      smoothQualityChange = vhsHandler.options_.smoothQualityChange; // Get a reference to a bound version of the quality change function\n\n  var changeType = smoothQualityChange ? 'smooth' : 'fast';\n  var qualityChangeFunction = mpc[changeType + \"QualityChange_\"].bind(mpc); // some playlist attributes are optional\n\n  if (playlist.attributes) {\n    var resolution = playlist.attributes.RESOLUTION;\n    this.width = resolution && resolution.width;\n    this.height = resolution && resolution.height;\n    this.bandwidth = playlist.attributes.BANDWIDTH;\n  }\n\n  this.codecs = codecsForPlaylist(mpc.master(), playlist);\n  this.playlist = playlist; // The id is simply the ordinality of the media playlist\n  // within the master playlist\n\n  this.id = id; // Partially-apply the enableFunction to create a playlist-\n  // specific variant\n\n  this.enabled = enableFunction(vhsHandler.playlists, playlist.id, qualityChangeFunction);\n};\n/**\n * A mixin function that adds the `representations` api to an instance\n * of the VhsHandler class\n *\n * @param {VhsHandler} vhsHandler - An instance of VhsHandler to add the\n * representation API into\n */\n\n\nvar renditionSelectionMixin = function renditionSelectionMixin(vhsHandler) {\n  // Add a single API-specific function to the VhsHandler instance\n  vhsHandler.representations = function () {\n    var master = vhsHandler.masterPlaylistController_.master();\n    var playlists = isAudioOnly(master) ? vhsHandler.masterPlaylistController_.getAudioTrackPlaylists_() : master.playlists;\n\n    if (!playlists) {\n      return [];\n    }\n\n    return playlists.filter(function (media) {\n      return !isIncompatible(media);\n    }).map(function (e, i) {\n      return new Representation(vhsHandler, e, e.id);\n    });\n  };\n};\n/**\n * @file playback-watcher.js\n *\n * Playback starts, and now my watch begins. It shall not end until my death. I shall\n * take no wait, hold no uncleared timeouts, father no bad seeks. I shall wear no crowns\n * and win no glory. I shall live and die at my post. I am the corrector of the underflow.\n * I am the watcher of gaps. I am the shield that guards the realms of seekable. I pledge\n * my life and honor to the Playback Watch, for this Player and all the Players to come.\n */\n\n\nvar timerCancelEvents = ['seeking', 'seeked', 'pause', 'playing', 'error'];\n/**\n * @class PlaybackWatcher\n */\n\nvar PlaybackWatcher = /*#__PURE__*/function () {\n  /**\n   * Represents an PlaybackWatcher object.\n   *\n   * @class\n   * @param {Object} options an object that includes the tech and settings\n   */\n  function PlaybackWatcher(options) {\n    var _this = this;\n\n    this.masterPlaylistController_ = options.masterPlaylistController;\n    this.tech_ = options.tech;\n    this.seekable = options.seekable;\n    this.allowSeeksWithinUnsafeLiveWindow = options.allowSeeksWithinUnsafeLiveWindow;\n    this.liveRangeSafeTimeDelta = options.liveRangeSafeTimeDelta;\n    this.media = options.media;\n    this.consecutiveUpdates = 0;\n    this.lastRecordedTime = null;\n    this.timer_ = null;\n    this.checkCurrentTimeTimeout_ = null;\n    this.logger_ = logger('PlaybackWatcher');\n    this.logger_('initialize');\n\n    var playHandler = function playHandler() {\n      return _this.monitorCurrentTime_();\n    };\n\n    var canPlayHandler = function canPlayHandler() {\n      return _this.monitorCurrentTime_();\n    };\n\n    var waitingHandler = function waitingHandler() {\n      return _this.techWaiting_();\n    };\n\n    var cancelTimerHandler = function cancelTimerHandler() {\n      return _this.cancelTimer_();\n    };\n\n    var mpc = this.masterPlaylistController_;\n    var loaderTypes = ['main', 'subtitle', 'audio'];\n    var loaderChecks = {};\n    loaderTypes.forEach(function (type) {\n      loaderChecks[type] = {\n        reset: function reset() {\n          return _this.resetSegmentDownloads_(type);\n        },\n        updateend: function updateend() {\n          return _this.checkSegmentDownloads_(type);\n        }\n      };\n      mpc[type + \"SegmentLoader_\"].on('appendsdone', loaderChecks[type].updateend); // If a rendition switch happens during a playback stall where the buffer\n      // isn't changing we want to reset. We cannot assume that the new rendition\n      // will also be stalled, until after new appends.\n\n      mpc[type + \"SegmentLoader_\"].on('playlistupdate', loaderChecks[type].reset); // Playback stalls should not be detected right after seeking.\n      // This prevents one segment playlists (single vtt or single segment content)\n      // from being detected as stalling. As the buffer will not change in those cases, since\n      // the buffer is the entire video duration.\n\n      _this.tech_.on(['seeked', 'seeking'], loaderChecks[type].reset);\n    });\n    /**\n     * We check if a seek was into a gap through the following steps:\n     * 1. We get a seeking event and we do not get a seeked event. This means that\n     *    a seek was attempted but not completed.\n     * 2. We run `fixesBadSeeks_` on segment loader appends. This means that we already\n     *    removed everything from our buffer and appended a segment, and should be ready\n     *    to check for gaps.\n     */\n\n    var setSeekingHandlers = function setSeekingHandlers(fn) {\n      ['main', 'audio'].forEach(function (type) {\n        mpc[type + \"SegmentLoader_\"][fn]('appended', _this.seekingAppendCheck_);\n      });\n    };\n\n    this.seekingAppendCheck_ = function () {\n      if (_this.fixesBadSeeks_()) {\n        _this.consecutiveUpdates = 0;\n        _this.lastRecordedTime = _this.tech_.currentTime();\n        setSeekingHandlers('off');\n      }\n    };\n\n    this.clearSeekingAppendCheck_ = function () {\n      return setSeekingHandlers('off');\n    };\n\n    this.watchForBadSeeking_ = function () {\n      _this.clearSeekingAppendCheck_();\n\n      setSeekingHandlers('on');\n    };\n\n    this.tech_.on('seeked', this.clearSeekingAppendCheck_);\n    this.tech_.on('seeking', this.watchForBadSeeking_);\n    this.tech_.on('waiting', waitingHandler);\n    this.tech_.on(timerCancelEvents, cancelTimerHandler);\n    this.tech_.on('canplay', canPlayHandler);\n    /*\n      An edge case exists that results in gaps not being skipped when they exist at the beginning of a stream. This case\n      is surfaced in one of two ways:\n       1)  The `waiting` event is fired before the player has buffered content, making it impossible\n          to find or skip the gap. The `waiting` event is followed by a `play` event. On first play\n          we can check if playback is stalled due to a gap, and skip the gap if necessary.\n      2)  A source with a gap at the beginning of the stream is loaded programatically while the player\n          is in a playing state. To catch this case, it's important that our one-time play listener is setup\n          even if the player is in a playing state\n    */\n\n    this.tech_.one('play', playHandler); // Define the dispose function to clean up our events\n\n    this.dispose = function () {\n      _this.clearSeekingAppendCheck_();\n\n      _this.logger_('dispose');\n\n      _this.tech_.off('waiting', waitingHandler);\n\n      _this.tech_.off(timerCancelEvents, cancelTimerHandler);\n\n      _this.tech_.off('canplay', canPlayHandler);\n\n      _this.tech_.off('play', playHandler);\n\n      _this.tech_.off('seeking', _this.watchForBadSeeking_);\n\n      _this.tech_.off('seeked', _this.clearSeekingAppendCheck_);\n\n      loaderTypes.forEach(function (type) {\n        mpc[type + \"SegmentLoader_\"].off('appendsdone', loaderChecks[type].updateend);\n        mpc[type + \"SegmentLoader_\"].off('playlistupdate', loaderChecks[type].reset);\n\n        _this.tech_.off(['seeked', 'seeking'], loaderChecks[type].reset);\n      });\n\n      if (_this.checkCurrentTimeTimeout_) {\n        window$1.clearTimeout(_this.checkCurrentTimeTimeout_);\n      }\n\n      _this.cancelTimer_();\n    };\n  }\n  /**\n   * Periodically check current time to see if playback stopped\n   *\n   * @private\n   */\n\n\n  var _proto = PlaybackWatcher.prototype;\n\n  _proto.monitorCurrentTime_ = function monitorCurrentTime_() {\n    this.checkCurrentTime_();\n\n    if (this.checkCurrentTimeTimeout_) {\n      window$1.clearTimeout(this.checkCurrentTimeTimeout_);\n    } // 42 = 24 fps // 250 is what Webkit uses // FF uses 15\n\n\n    this.checkCurrentTimeTimeout_ = window$1.setTimeout(this.monitorCurrentTime_.bind(this), 250);\n  }\n  /**\n   * Reset stalled download stats for a specific type of loader\n   *\n   * @param {string} type\n   *        The segment loader type to check.\n   *\n   * @listens SegmentLoader#playlistupdate\n   * @listens Tech#seeking\n   * @listens Tech#seeked\n   */\n  ;\n\n  _proto.resetSegmentDownloads_ = function resetSegmentDownloads_(type) {\n    var loader = this.masterPlaylistController_[type + \"SegmentLoader_\"];\n\n    if (this[type + \"StalledDownloads_\"] > 0) {\n      this.logger_(\"resetting possible stalled download count for \" + type + \" loader\");\n    }\n\n    this[type + \"StalledDownloads_\"] = 0;\n    this[type + \"Buffered_\"] = loader.buffered_();\n  }\n  /**\n   * Checks on every segment `appendsdone` to see\n   * if segment appends are making progress. If they are not\n   * and we are still downloading bytes. We blacklist the playlist.\n   *\n   * @param {string} type\n   *        The segment loader type to check.\n   *\n   * @listens SegmentLoader#appendsdone\n   */\n  ;\n\n  _proto.checkSegmentDownloads_ = function checkSegmentDownloads_(type) {\n    var mpc = this.masterPlaylistController_;\n    var loader = mpc[type + \"SegmentLoader_\"];\n    var buffered = loader.buffered_();\n    var isBufferedDifferent = isRangeDifferent(this[type + \"Buffered_\"], buffered);\n    this[type + \"Buffered_\"] = buffered; // if another watcher is going to fix the issue or\n    // the buffered value for this loader changed\n    // appends are working\n\n    if (isBufferedDifferent) {\n      this.resetSegmentDownloads_(type);\n      return;\n    }\n\n    this[type + \"StalledDownloads_\"]++;\n    this.logger_(\"found #\" + this[type + \"StalledDownloads_\"] + \" \" + type + \" appends that did not increase buffer (possible stalled download)\", {\n      playlistId: loader.playlist_ && loader.playlist_.id,\n      buffered: timeRangesToArray(buffered)\n    }); // after 10 possibly stalled appends with no reset, exclude\n\n    if (this[type + \"StalledDownloads_\"] < 10) {\n      return;\n    }\n\n    this.logger_(type + \" loader stalled download exclusion\");\n    this.resetSegmentDownloads_(type);\n    this.tech_.trigger({\n      type: 'usage',\n      name: \"vhs-\" + type + \"-download-exclusion\"\n    });\n\n    if (type === 'subtitle') {\n      return;\n    } // TODO: should we exclude audio tracks rather than main tracks\n    // when type is audio?\n\n\n    mpc.blacklistCurrentPlaylist({\n      message: \"Excessive \" + type + \" segment downloading detected.\"\n    }, Infinity);\n  }\n  /**\n   * The purpose of this function is to emulate the \"waiting\" event on\n   * browsers that do not emit it when they are waiting for more\n   * data to continue playback\n   *\n   * @private\n   */\n  ;\n\n  _proto.checkCurrentTime_ = function checkCurrentTime_() {\n    if (this.tech_.paused() || this.tech_.seeking()) {\n      return;\n    }\n\n    var currentTime = this.tech_.currentTime();\n    var buffered = this.tech_.buffered();\n\n    if (this.lastRecordedTime === currentTime && (!buffered.length || currentTime + SAFE_TIME_DELTA >= buffered.end(buffered.length - 1))) {\n      // If current time is at the end of the final buffered region, then any playback\n      // stall is most likely caused by buffering in a low bandwidth environment. The tech\n      // should fire a `waiting` event in this scenario, but due to browser and tech\n      // inconsistencies. Calling `techWaiting_` here allows us to simulate\n      // responding to a native `waiting` event when the tech fails to emit one.\n      return this.techWaiting_();\n    }\n\n    if (this.consecutiveUpdates >= 5 && currentTime === this.lastRecordedTime) {\n      this.consecutiveUpdates++;\n      this.waiting_();\n    } else if (currentTime === this.lastRecordedTime) {\n      this.consecutiveUpdates++;\n    } else {\n      this.consecutiveUpdates = 0;\n      this.lastRecordedTime = currentTime;\n    }\n  }\n  /**\n   * Cancels any pending timers and resets the 'timeupdate' mechanism\n   * designed to detect that we are stalled\n   *\n   * @private\n   */\n  ;\n\n  _proto.cancelTimer_ = function cancelTimer_() {\n    this.consecutiveUpdates = 0;\n\n    if (this.timer_) {\n      this.logger_('cancelTimer_');\n      clearTimeout(this.timer_);\n    }\n\n    this.timer_ = null;\n  }\n  /**\n   * Fixes situations where there's a bad seek\n   *\n   * @return {boolean} whether an action was taken to fix the seek\n   * @private\n   */\n  ;\n\n  _proto.fixesBadSeeks_ = function fixesBadSeeks_() {\n    var seeking = this.tech_.seeking();\n\n    if (!seeking) {\n      return false;\n    } // TODO: It's possible that these seekable checks should be moved out of this function\n    // and into a function that runs on seekablechange. It's also possible that we only need\n    // afterSeekableWindow as the buffered check at the bottom is good enough to handle before\n    // seekable range.\n\n\n    var seekable = this.seekable();\n    var currentTime = this.tech_.currentTime();\n    var isAfterSeekableRange = this.afterSeekableWindow_(seekable, currentTime, this.media(), this.allowSeeksWithinUnsafeLiveWindow);\n    var seekTo;\n\n    if (isAfterSeekableRange) {\n      var seekableEnd = seekable.end(seekable.length - 1); // sync to live point (if VOD, our seekable was updated and we're simply adjusting)\n\n      seekTo = seekableEnd;\n    }\n\n    if (this.beforeSeekableWindow_(seekable, currentTime)) {\n      var seekableStart = seekable.start(0); // sync to the beginning of the live window\n      // provide a buffer of .1 seconds to handle rounding/imprecise numbers\n\n      seekTo = seekableStart + ( // if the playlist is too short and the seekable range is an exact time (can\n      // happen in live with a 3 segment playlist), then don't use a time delta\n      seekableStart === seekable.end(0) ? 0 : SAFE_TIME_DELTA);\n    }\n\n    if (typeof seekTo !== 'undefined') {\n      this.logger_(\"Trying to seek outside of seekable at time \" + currentTime + \" with \" + (\"seekable range \" + printableRange(seekable) + \". Seeking to \") + (seekTo + \".\"));\n      this.tech_.setCurrentTime(seekTo);\n      return true;\n    }\n\n    var sourceUpdater = this.masterPlaylistController_.sourceUpdater_;\n    var buffered = this.tech_.buffered();\n    var audioBuffered = sourceUpdater.audioBuffer ? sourceUpdater.audioBuffered() : null;\n    var videoBuffered = sourceUpdater.videoBuffer ? sourceUpdater.videoBuffered() : null;\n    var media = this.media(); // verify that at least two segment durations or one part duration have been\n    // appended before checking for a gap.\n\n    var minAppendedDuration = media.partTargetDuration ? media.partTargetDuration : (media.targetDuration - TIME_FUDGE_FACTOR) * 2; // verify that at least two segment durations have been\n    // appended before checking for a gap.\n\n    var bufferedToCheck = [audioBuffered, videoBuffered];\n\n    for (var i = 0; i < bufferedToCheck.length; i++) {\n      // skip null buffered\n      if (!bufferedToCheck[i]) {\n        continue;\n      }\n\n      var timeAhead = timeAheadOf(bufferedToCheck[i], currentTime); // if we are less than two video/audio segment durations or one part\n      // duration behind we haven't appended enough to call this a bad seek.\n\n      if (timeAhead < minAppendedDuration) {\n        return false;\n      }\n    }\n\n    var nextRange = findNextRange(buffered, currentTime); // we have appended enough content, but we don't have anything buffered\n    // to seek over the gap\n\n    if (nextRange.length === 0) {\n      return false;\n    }\n\n    seekTo = nextRange.start(0) + SAFE_TIME_DELTA;\n    this.logger_(\"Buffered region starts (\" + nextRange.start(0) + \") \" + (\" just beyond seek point (\" + currentTime + \"). Seeking to \" + seekTo + \".\"));\n    this.tech_.setCurrentTime(seekTo);\n    return true;\n  }\n  /**\n   * Handler for situations when we determine the player is waiting.\n   *\n   * @private\n   */\n  ;\n\n  _proto.waiting_ = function waiting_() {\n    if (this.techWaiting_()) {\n      return;\n    } // All tech waiting checks failed. Use last resort correction\n\n\n    var currentTime = this.tech_.currentTime();\n    var buffered = this.tech_.buffered();\n    var currentRange = findRange(buffered, currentTime); // Sometimes the player can stall for unknown reasons within a contiguous buffered\n    // region with no indication that anything is amiss (seen in Firefox). Seeking to\n    // currentTime is usually enough to kickstart the player. This checks that the player\n    // is currently within a buffered region before attempting a corrective seek.\n    // Chrome does not appear to continue `timeupdate` events after a `waiting` event\n    // until there is ~ 3 seconds of forward buffer available. PlaybackWatcher should also\n    // make sure there is ~3 seconds of forward buffer before taking any corrective action\n    // to avoid triggering an `unknownwaiting` event when the network is slow.\n\n    if (currentRange.length && currentTime + 3 <= currentRange.end(0)) {\n      this.cancelTimer_();\n      this.tech_.setCurrentTime(currentTime);\n      this.logger_(\"Stopped at \" + currentTime + \" while inside a buffered region \" + (\"[\" + currentRange.start(0) + \" -> \" + currentRange.end(0) + \"]. Attempting to resume \") + 'playback by seeking to the current time.'); // unknown waiting corrections may be useful for monitoring QoS\n\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-unknown-waiting'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-unknown-waiting'\n      });\n      return;\n    }\n  }\n  /**\n   * Handler for situations when the tech fires a `waiting` event\n   *\n   * @return {boolean}\n   *         True if an action (or none) was needed to correct the waiting. False if no\n   *         checks passed\n   * @private\n   */\n  ;\n\n  _proto.techWaiting_ = function techWaiting_() {\n    var seekable = this.seekable();\n    var currentTime = this.tech_.currentTime();\n\n    if (this.tech_.seeking() || this.timer_ !== null) {\n      // Tech is seeking or already waiting on another action, no action needed\n      return true;\n    }\n\n    if (this.beforeSeekableWindow_(seekable, currentTime)) {\n      var livePoint = seekable.end(seekable.length - 1);\n      this.logger_(\"Fell out of live window at time \" + currentTime + \". Seeking to \" + (\"live point (seekable end) \" + livePoint));\n      this.cancelTimer_();\n      this.tech_.setCurrentTime(livePoint); // live window resyncs may be useful for monitoring QoS\n\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-live-resync'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-live-resync'\n      });\n      return true;\n    }\n\n    var sourceUpdater = this.tech_.vhs.masterPlaylistController_.sourceUpdater_;\n    var buffered = this.tech_.buffered();\n    var videoUnderflow = this.videoUnderflow_({\n      audioBuffered: sourceUpdater.audioBuffered(),\n      videoBuffered: sourceUpdater.videoBuffered(),\n      currentTime: currentTime\n    });\n\n    if (videoUnderflow) {\n      // Even though the video underflowed and was stuck in a gap, the audio overplayed\n      // the gap, leading currentTime into a buffered range. Seeking to currentTime\n      // allows the video to catch up to the audio position without losing any audio\n      // (only suffering ~3 seconds of frozen video and a pause in audio playback).\n      this.cancelTimer_();\n      this.tech_.setCurrentTime(currentTime); // video underflow may be useful for monitoring QoS\n\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'vhs-video-underflow'\n      });\n      this.tech_.trigger({\n        type: 'usage',\n        name: 'hls-video-underflow'\n      });\n      return true;\n    }\n\n    var nextRange = findNextRange(buffered, currentTime); // check for gap\n\n    if (nextRange.length > 0) {\n      var difference = nextRange.start(0) - currentTime;\n      this.logger_(\"Stopped at \" + currentTime + \", setting timer for \" + difference + \", seeking \" + (\"to \" + nextRange.start(0)));\n      this.cancelTimer_();\n      this.timer_ = setTimeout(this.skipTheGap_.bind(this), difference * 1000, currentTime);\n      return true;\n    } // All checks failed. Returning false to indicate failure to correct waiting\n\n\n    return false;\n  };\n\n  _proto.afterSeekableWindow_ = function afterSeekableWindow_(seekable, currentTime, playlist, allowSeeksWithinUnsafeLiveWindow) {\n    if (allowSeeksWithinUnsafeLiveWindow === void 0) {\n      allowSeeksWithinUnsafeLiveWindow = false;\n    }\n\n    if (!seekable.length) {\n      // we can't make a solid case if there's no seekable, default to false\n      return false;\n    }\n\n    var allowedEnd = seekable.end(seekable.length - 1) + SAFE_TIME_DELTA;\n    var isLive = !playlist.endList;\n\n    if (isLive && allowSeeksWithinUnsafeLiveWindow) {\n      allowedEnd = seekable.end(seekable.length - 1) + playlist.targetDuration * 3;\n    }\n\n    if (currentTime > allowedEnd) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.beforeSeekableWindow_ = function beforeSeekableWindow_(seekable, currentTime) {\n    if (seekable.length && // can't fall before 0 and 0 seekable start identifies VOD stream\n    seekable.start(0) > 0 && currentTime < seekable.start(0) - this.liveRangeSafeTimeDelta) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.videoUnderflow_ = function videoUnderflow_(_ref) {\n    var videoBuffered = _ref.videoBuffered,\n        audioBuffered = _ref.audioBuffered,\n        currentTime = _ref.currentTime; // audio only content will not have video underflow :)\n\n    if (!videoBuffered) {\n      return;\n    }\n\n    var gap; // find a gap in demuxed content.\n\n    if (videoBuffered.length && audioBuffered.length) {\n      // in Chrome audio will continue to play for ~3s when we run out of video\n      // so we have to check that the video buffer did have some buffer in the\n      // past.\n      var lastVideoRange = findRange(videoBuffered, currentTime - 3);\n      var videoRange = findRange(videoBuffered, currentTime);\n      var audioRange = findRange(audioBuffered, currentTime);\n\n      if (audioRange.length && !videoRange.length && lastVideoRange.length) {\n        gap = {\n          start: lastVideoRange.end(0),\n          end: audioRange.end(0)\n        };\n      } // find a gap in muxed content.\n\n    } else {\n      var nextRange = findNextRange(videoBuffered, currentTime); // Even if there is no available next range, there is still a possibility we are\n      // stuck in a gap due to video underflow.\n\n      if (!nextRange.length) {\n        gap = this.gapFromVideoUnderflow_(videoBuffered, currentTime);\n      }\n    }\n\n    if (gap) {\n      this.logger_(\"Encountered a gap in video from \" + gap.start + \" to \" + gap.end + \". \" + (\"Seeking to current time \" + currentTime));\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Timer callback. If playback still has not proceeded, then we seek\n   * to the start of the next buffered region.\n   *\n   * @private\n   */\n  ;\n\n  _proto.skipTheGap_ = function skipTheGap_(scheduledCurrentTime) {\n    var buffered = this.tech_.buffered();\n    var currentTime = this.tech_.currentTime();\n    var nextRange = findNextRange(buffered, currentTime);\n    this.cancelTimer_();\n\n    if (nextRange.length === 0 || currentTime !== scheduledCurrentTime) {\n      return;\n    }\n\n    this.logger_('skipTheGap_:', 'currentTime:', currentTime, 'scheduled currentTime:', scheduledCurrentTime, 'nextRange start:', nextRange.start(0)); // only seek if we still have not played\n\n    this.tech_.setCurrentTime(nextRange.start(0) + TIME_FUDGE_FACTOR);\n    this.tech_.trigger({\n      type: 'usage',\n      name: 'vhs-gap-skip'\n    });\n    this.tech_.trigger({\n      type: 'usage',\n      name: 'hls-gap-skip'\n    });\n  };\n\n  _proto.gapFromVideoUnderflow_ = function gapFromVideoUnderflow_(buffered, currentTime) {\n    // At least in Chrome, if there is a gap in the video buffer, the audio will continue\n    // playing for ~3 seconds after the video gap starts. This is done to account for\n    // video buffer underflow/underrun (note that this is not done when there is audio\n    // buffer underflow/underrun -- in that case the video will stop as soon as it\n    // encounters the gap, as audio stalls are more noticeable/jarring to a user than\n    // video stalls). The player's time will reflect the playthrough of audio, so the\n    // time will appear as if we are in a buffered region, even if we are stuck in a\n    // \"gap.\"\n    //\n    // Example:\n    // video buffer:   0 => 10.1, 10.2 => 20\n    // audio buffer:   0 => 20\n    // overall buffer: 0 => 10.1, 10.2 => 20\n    // current time: 13\n    //\n    // Chrome's video froze at 10 seconds, where the video buffer encountered the gap,\n    // however, the audio continued playing until it reached ~3 seconds past the gap\n    // (13 seconds), at which point it stops as well. Since current time is past the\n    // gap, findNextRange will return no ranges.\n    //\n    // To check for this issue, we see if there is a gap that starts somewhere within\n    // a 3 second range (3 seconds +/- 1 second) back from our current time.\n    var gaps = findGaps(buffered);\n\n    for (var i = 0; i < gaps.length; i++) {\n      var start = gaps.start(i);\n      var end = gaps.end(i); // gap is starts no more than 4 seconds back\n\n      if (currentTime - start < 4 && currentTime - start > 2) {\n        return {\n          start: start,\n          end: end\n        };\n      }\n    }\n\n    return null;\n  };\n\n  return PlaybackWatcher;\n}();\n\nvar defaultOptions = {\n  errorInterval: 30,\n  getSource: function getSource(next) {\n    var tech = this.tech({\n      IWillNotUseThisInPlugins: true\n    });\n    var sourceObj = tech.currentSource_ || this.currentSource();\n    return next(sourceObj);\n  }\n};\n/**\n * Main entry point for the plugin\n *\n * @param {Player} player a reference to a videojs Player instance\n * @param {Object} [options] an object with plugin options\n * @private\n */\n\nvar initPlugin = function initPlugin(player, options) {\n  var lastCalled = 0;\n  var seekTo = 0;\n  var localOptions = videojs.mergeOptions(defaultOptions, options);\n  player.ready(function () {\n    player.trigger({\n      type: 'usage',\n      name: 'vhs-error-reload-initialized'\n    });\n    player.trigger({\n      type: 'usage',\n      name: 'hls-error-reload-initialized'\n    });\n  });\n  /**\n   * Player modifications to perform that must wait until `loadedmetadata`\n   * has been triggered\n   *\n   * @private\n   */\n\n  var loadedMetadataHandler = function loadedMetadataHandler() {\n    if (seekTo) {\n      player.currentTime(seekTo);\n    }\n  };\n  /**\n   * Set the source on the player element, play, and seek if necessary\n   *\n   * @param {Object} sourceObj An object specifying the source url and mime-type to play\n   * @private\n   */\n\n\n  var setSource = function setSource(sourceObj) {\n    if (sourceObj === null || sourceObj === undefined) {\n      return;\n    }\n\n    seekTo = player.duration() !== Infinity && player.currentTime() || 0;\n    player.one('loadedmetadata', loadedMetadataHandler);\n    player.src(sourceObj);\n    player.trigger({\n      type: 'usage',\n      name: 'vhs-error-reload'\n    });\n    player.trigger({\n      type: 'usage',\n      name: 'hls-error-reload'\n    });\n    player.play();\n  };\n  /**\n   * Attempt to get a source from either the built-in getSource function\n   * or a custom function provided via the options\n   *\n   * @private\n   */\n\n\n  var errorHandler = function errorHandler() {\n    // Do not attempt to reload the source if a source-reload occurred before\n    // 'errorInterval' time has elapsed since the last source-reload\n    if (Date.now() - lastCalled < localOptions.errorInterval * 1000) {\n      player.trigger({\n        type: 'usage',\n        name: 'vhs-error-reload-canceled'\n      });\n      player.trigger({\n        type: 'usage',\n        name: 'hls-error-reload-canceled'\n      });\n      return;\n    }\n\n    if (!localOptions.getSource || typeof localOptions.getSource !== 'function') {\n      videojs.log.error('ERROR: reloadSourceOnError - The option getSource must be a function!');\n      return;\n    }\n\n    lastCalled = Date.now();\n    return localOptions.getSource.call(player, setSource);\n  };\n  /**\n   * Unbind any event handlers that were bound by the plugin\n   *\n   * @private\n   */\n\n\n  var cleanupEvents = function cleanupEvents() {\n    player.off('loadedmetadata', loadedMetadataHandler);\n    player.off('error', errorHandler);\n    player.off('dispose', cleanupEvents);\n  };\n  /**\n   * Cleanup before re-initializing the plugin\n   *\n   * @param {Object} [newOptions] an object with plugin options\n   * @private\n   */\n\n\n  var reinitPlugin = function reinitPlugin(newOptions) {\n    cleanupEvents();\n    initPlugin(player, newOptions);\n  };\n\n  player.on('error', errorHandler);\n  player.on('dispose', cleanupEvents); // Overwrite the plugin function so that we can correctly cleanup before\n  // initializing the plugin\n\n  player.reloadSourceOnError = reinitPlugin;\n};\n/**\n * Reload the source when an error is detected as long as there\n * wasn't an error previously within the last 30 seconds\n *\n * @param {Object} [options] an object with plugin options\n */\n\n\nvar reloadSourceOnError = function reloadSourceOnError(options) {\n  initPlugin(this, options);\n};\n\nvar version$4 = \"2.13.1\";\nvar version$3 = \"6.0.1\";\nvar version$2 = \"0.21.0\";\nvar version$1 = \"4.7.0\";\nvar version = \"3.1.2\";\nvar Vhs = {\n  PlaylistLoader: PlaylistLoader,\n  Playlist: Playlist,\n  utils: utils,\n  STANDARD_PLAYLIST_SELECTOR: lastBandwidthSelector,\n  INITIAL_PLAYLIST_SELECTOR: lowestBitrateCompatibleVariantSelector,\n  lastBandwidthSelector: lastBandwidthSelector,\n  movingAverageBandwidthSelector: movingAverageBandwidthSelector,\n  comparePlaylistBandwidth: comparePlaylistBandwidth,\n  comparePlaylistResolution: comparePlaylistResolution,\n  xhr: xhrFactory()\n}; // Define getter/setters for config properties\n\nObject.keys(Config).forEach(function (prop) {\n  Object.defineProperty(Vhs, prop, {\n    get: function get() {\n      videojs.log.warn(\"using Vhs.\" + prop + \" is UNSAFE be sure you know what you are doing\");\n      return Config[prop];\n    },\n    set: function set(value) {\n      videojs.log.warn(\"using Vhs.\" + prop + \" is UNSAFE be sure you know what you are doing\");\n\n      if (typeof value !== 'number' || value < 0) {\n        videojs.log.warn(\"value of Vhs.\" + prop + \" must be greater than or equal to 0\");\n        return;\n      }\n\n      Config[prop] = value;\n    }\n  });\n});\nvar LOCAL_STORAGE_KEY = 'videojs-vhs';\n/**\n * Updates the selectedIndex of the QualityLevelList when a mediachange happens in vhs.\n *\n * @param {QualityLevelList} qualityLevels The QualityLevelList to update.\n * @param {PlaylistLoader} playlistLoader PlaylistLoader containing the new media info.\n * @function handleVhsMediaChange\n */\n\nvar handleVhsMediaChange = function handleVhsMediaChange(qualityLevels, playlistLoader) {\n  var newPlaylist = playlistLoader.media();\n  var selectedIndex = -1;\n\n  for (var i = 0; i < qualityLevels.length; i++) {\n    if (qualityLevels[i].id === newPlaylist.id) {\n      selectedIndex = i;\n      break;\n    }\n  }\n\n  qualityLevels.selectedIndex_ = selectedIndex;\n  qualityLevels.trigger({\n    selectedIndex: selectedIndex,\n    type: 'change'\n  });\n};\n/**\n * Adds quality levels to list once playlist metadata is available\n *\n * @param {QualityLevelList} qualityLevels The QualityLevelList to attach events to.\n * @param {Object} vhs Vhs object to listen to for media events.\n * @function handleVhsLoadedMetadata\n */\n\n\nvar handleVhsLoadedMetadata = function handleVhsLoadedMetadata(qualityLevels, vhs) {\n  vhs.representations().forEach(function (rep) {\n    qualityLevels.addQualityLevel(rep);\n  });\n  handleVhsMediaChange(qualityLevels, vhs.playlists);\n}; // HLS is a source handler, not a tech. Make sure attempts to use it\n// as one do not cause exceptions.\n\n\nVhs.canPlaySource = function () {\n  return videojs.log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\nvar emeKeySystems = function emeKeySystems(keySystemOptions, mainPlaylist, audioPlaylist) {\n  if (!keySystemOptions) {\n    return keySystemOptions;\n  }\n\n  var codecs = {};\n\n  if (mainPlaylist && mainPlaylist.attributes && mainPlaylist.attributes.CODECS) {\n    codecs = unwrapCodecList(parseCodecs(mainPlaylist.attributes.CODECS));\n  }\n\n  if (audioPlaylist && audioPlaylist.attributes && audioPlaylist.attributes.CODECS) {\n    codecs.audio = audioPlaylist.attributes.CODECS;\n  }\n\n  var videoContentType = getMimeForCodec(codecs.video);\n  var audioContentType = getMimeForCodec(codecs.audio); // upsert the content types based on the selected playlist\n\n  var keySystemContentTypes = {};\n\n  for (var keySystem in keySystemOptions) {\n    keySystemContentTypes[keySystem] = {};\n\n    if (audioContentType) {\n      keySystemContentTypes[keySystem].audioContentType = audioContentType;\n    }\n\n    if (videoContentType) {\n      keySystemContentTypes[keySystem].videoContentType = videoContentType;\n    } // Default to using the video playlist's PSSH even though they may be different, as\n    // videojs-contrib-eme will only accept one in the options.\n    //\n    // This shouldn't be an issue for most cases as early intialization will handle all\n    // unique PSSH values, and if they aren't, then encrypted events should have the\n    // specific information needed for the unique license.\n\n\n    if (mainPlaylist.contentProtection && mainPlaylist.contentProtection[keySystem] && mainPlaylist.contentProtection[keySystem].pssh) {\n      keySystemContentTypes[keySystem].pssh = mainPlaylist.contentProtection[keySystem].pssh;\n    } // videojs-contrib-eme accepts the option of specifying: 'com.some.cdm': 'url'\n    // so we need to prevent overwriting the URL entirely\n\n\n    if (typeof keySystemOptions[keySystem] === 'string') {\n      keySystemContentTypes[keySystem].url = keySystemOptions[keySystem];\n    }\n  }\n\n  return videojs.mergeOptions(keySystemOptions, keySystemContentTypes);\n};\n/**\n * @typedef {Object} KeySystems\n *\n * keySystems configuration for https://github.com/videojs/videojs-contrib-eme\n * Note: not all options are listed here.\n *\n * @property {Uint8Array} [pssh]\n *           Protection System Specific Header\n */\n\n/**\n * Goes through all the playlists and collects an array of KeySystems options objects\n * containing each playlist's keySystems and their pssh values, if available.\n *\n * @param {Object[]} playlists\n *        The playlists to look through\n * @param {string[]} keySystems\n *        The keySystems to collect pssh values for\n *\n * @return {KeySystems[]}\n *         An array of KeySystems objects containing available key systems and their\n *         pssh values\n */\n\n\nvar getAllPsshKeySystemsOptions = function getAllPsshKeySystemsOptions(playlists, keySystems) {\n  return playlists.reduce(function (keySystemsArr, playlist) {\n    if (!playlist.contentProtection) {\n      return keySystemsArr;\n    }\n\n    var keySystemsOptions = keySystems.reduce(function (keySystemsObj, keySystem) {\n      var keySystemOptions = playlist.contentProtection[keySystem];\n\n      if (keySystemOptions && keySystemOptions.pssh) {\n        keySystemsObj[keySystem] = {\n          pssh: keySystemOptions.pssh\n        };\n      }\n\n      return keySystemsObj;\n    }, {});\n\n    if (Object.keys(keySystemsOptions).length) {\n      keySystemsArr.push(keySystemsOptions);\n    }\n\n    return keySystemsArr;\n  }, []);\n};\n/**\n * Returns a promise that waits for the\n * [eme plugin](https://github.com/videojs/videojs-contrib-eme) to create a key session.\n *\n * Works around https://bugs.chromium.org/p/chromium/issues/detail?id=895449 in non-IE11\n * browsers.\n *\n * As per the above ticket, this is particularly important for Chrome, where, if\n * unencrypted content is appended before encrypted content and the key session has not\n * been created, a MEDIA_ERR_DECODE will be thrown once the encrypted content is reached\n * during playback.\n *\n * @param {Object} player\n *        The player instance\n * @param {Object[]} sourceKeySystems\n *        The key systems options from the player source\n * @param {Object} [audioMedia]\n *        The active audio media playlist (optional)\n * @param {Object[]} mainPlaylists\n *        The playlists found on the master playlist object\n *\n * @return {Object}\n *         Promise that resolves when the key session has been created\n */\n\n\nvar waitForKeySessionCreation = function waitForKeySessionCreation(_ref) {\n  var player = _ref.player,\n      sourceKeySystems = _ref.sourceKeySystems,\n      audioMedia = _ref.audioMedia,\n      mainPlaylists = _ref.mainPlaylists;\n\n  if (!player.eme.initializeMediaKeys) {\n    return Promise.resolve();\n  } // TODO should all audio PSSH values be initialized for DRM?\n  //\n  // All unique video rendition pssh values are initialized for DRM, but here only\n  // the initial audio playlist license is initialized. In theory, an encrypted\n  // event should be fired if the user switches to an alternative audio playlist\n  // where a license is required, but this case hasn't yet been tested. In addition, there\n  // may be many alternate audio playlists unlikely to be used (e.g., multiple different\n  // languages).\n\n\n  var playlists = audioMedia ? mainPlaylists.concat([audioMedia]) : mainPlaylists;\n  var keySystemsOptionsArr = getAllPsshKeySystemsOptions(playlists, Object.keys(sourceKeySystems));\n  var initializationFinishedPromises = [];\n  var keySessionCreatedPromises = []; // Since PSSH values are interpreted as initData, EME will dedupe any duplicates. The\n  // only place where it should not be deduped is for ms-prefixed APIs, but the early\n  // return for IE11 above, and the existence of modern EME APIs in addition to\n  // ms-prefixed APIs on Edge should prevent this from being a concern.\n  // initializeMediaKeys also won't use the webkit-prefixed APIs.\n\n  keySystemsOptionsArr.forEach(function (keySystemsOptions) {\n    keySessionCreatedPromises.push(new Promise(function (resolve, reject) {\n      player.tech_.one('keysessioncreated', resolve);\n    }));\n    initializationFinishedPromises.push(new Promise(function (resolve, reject) {\n      player.eme.initializeMediaKeys({\n        keySystems: keySystemsOptions\n      }, function (err) {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        resolve();\n      });\n    }));\n  }); // The reasons Promise.race is chosen over Promise.any:\n  //\n  // * Promise.any is only available in Safari 14+.\n  // * None of these promises are expected to reject. If they do reject, it might be\n  //   better here for the race to surface the rejection, rather than mask it by using\n  //   Promise.any.\n\n  return Promise.race([// If a session was previously created, these will all finish resolving without\n  // creating a new session, otherwise it will take until the end of all license\n  // requests, which is why the key session check is used (to make setup much faster).\n  Promise.all(initializationFinishedPromises), // Once a single session is created, the browser knows DRM will be used.\n  Promise.race(keySessionCreatedPromises)]);\n};\n/**\n * If the [eme](https://github.com/videojs/videojs-contrib-eme) plugin is available, and\n * there are keySystems on the source, sets up source options to prepare the source for\n * eme.\n *\n * @param {Object} player\n *        The player instance\n * @param {Object[]} sourceKeySystems\n *        The key systems options from the player source\n * @param {Object} media\n *        The active media playlist\n * @param {Object} [audioMedia]\n *        The active audio media playlist (optional)\n *\n * @return {boolean}\n *         Whether or not options were configured and EME is available\n */\n\n\nvar setupEmeOptions = function setupEmeOptions(_ref2) {\n  var player = _ref2.player,\n      sourceKeySystems = _ref2.sourceKeySystems,\n      media = _ref2.media,\n      audioMedia = _ref2.audioMedia;\n  var sourceOptions = emeKeySystems(sourceKeySystems, media, audioMedia);\n\n  if (!sourceOptions) {\n    return false;\n  }\n\n  player.currentSource().keySystems = sourceOptions; // eme handles the rest of the setup, so if it is missing\n  // do nothing.\n\n  if (sourceOptions && !player.eme) {\n    videojs.log.warn('DRM encrypted source cannot be decrypted without a DRM plugin');\n    return false;\n  }\n\n  return true;\n};\n\nvar getVhsLocalStorage = function getVhsLocalStorage() {\n  if (!window$1.localStorage) {\n    return null;\n  }\n\n  var storedObject = window$1.localStorage.getItem(LOCAL_STORAGE_KEY);\n\n  if (!storedObject) {\n    return null;\n  }\n\n  try {\n    return JSON.parse(storedObject);\n  } catch (e) {\n    // someone may have tampered with the value\n    return null;\n  }\n};\n\nvar updateVhsLocalStorage = function updateVhsLocalStorage(options) {\n  if (!window$1.localStorage) {\n    return false;\n  }\n\n  var objectToStore = getVhsLocalStorage();\n  objectToStore = objectToStore ? videojs.mergeOptions(objectToStore, options) : options;\n\n  try {\n    window$1.localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(objectToStore));\n  } catch (e) {\n    // Throws if storage is full (e.g., always on iOS 5+ Safari private mode, where\n    // storage is set to 0).\n    // https://developer.mozilla.org/en-US/docs/Web/API/Storage/setItem#Exceptions\n    // No need to perform any operation.\n    return false;\n  }\n\n  return objectToStore;\n};\n/**\n * Parses VHS-supported media types from data URIs. See\n * https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n * for information on data URIs.\n *\n * @param {string} dataUri\n *        The data URI\n *\n * @return {string|Object}\n *         The parsed object/string, or the original string if no supported media type\n *         was found\n */\n\n\nvar expandDataUri = function expandDataUri(dataUri) {\n  if (dataUri.toLowerCase().indexOf('data:application/vnd.videojs.vhs+json,') === 0) {\n    return JSON.parse(dataUri.substring(dataUri.indexOf(',') + 1));\n  } // no known case for this data URI, return the string as-is\n\n\n  return dataUri;\n};\n/**\n * Whether the browser has built-in HLS support.\n */\n\n\nVhs.supportsNativeHls = function () {\n  if (!document || !document.createElement) {\n    return false;\n  }\n\n  var video = document.createElement('video'); // native HLS is definitely not supported if HTML5 video isn't\n\n  if (!videojs.getTech('Html5').isSupported()) {\n    return false;\n  } // HLS manifests can go by many mime-types\n\n\n  var canPlay = [// Apple santioned\n  'application/vnd.apple.mpegurl', // Apple sanctioned for backwards compatibility\n  'audio/mpegurl', // Very common\n  'audio/x-mpegurl', // Very common\n  'application/x-mpegurl', // Included for completeness\n  'video/x-mpegurl', 'video/mpegurl', 'application/mpegurl'];\n  return canPlay.some(function (canItPlay) {\n    return /maybe|probably/i.test(video.canPlayType(canItPlay));\n  });\n}();\n\nVhs.supportsNativeDash = function () {\n  if (!document || !document.createElement || !videojs.getTech('Html5').isSupported()) {\n    return false;\n  }\n\n  return /maybe|probably/i.test(document.createElement('video').canPlayType('application/dash+xml'));\n}();\n\nVhs.supportsTypeNatively = function (type) {\n  if (type === 'hls') {\n    return Vhs.supportsNativeHls;\n  }\n\n  if (type === 'dash') {\n    return Vhs.supportsNativeDash;\n  }\n\n  return false;\n};\n/**\n * HLS is a source handler, not a tech. Make sure attempts to use it\n * as one do not cause exceptions.\n */\n\n\nVhs.isSupported = function () {\n  return videojs.log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\nvar Component = videojs.getComponent('Component');\n/**\n * The Vhs Handler object, where we orchestrate all of the parts\n * of HLS to interact with video.js\n *\n * @class VhsHandler\n * @extends videojs.Component\n * @param {Object} source the soruce object\n * @param {Tech} tech the parent tech object\n * @param {Object} options optional and required options\n */\n\nvar VhsHandler = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(VhsHandler, _Component);\n\n  function VhsHandler(source, tech, options) {\n    var _this;\n\n    _this = _Component.call(this, tech, videojs.mergeOptions(options.hls, options.vhs)) || this;\n\n    if (options.hls && Object.keys(options.hls).length) {\n      videojs.log.warn('Using hls options is deprecated. Use vhs instead.');\n    } // if a tech level `initialBandwidth` option was passed\n    // use that over the VHS level `bandwidth` option\n\n\n    if (typeof options.initialBandwidth === 'number') {\n      _this.options_.bandwidth = options.initialBandwidth;\n    }\n\n    _this.logger_ = logger('VhsHandler'); // tech.player() is deprecated but setup a reference to HLS for\n    // backwards-compatibility\n\n    if (tech.options_ && tech.options_.playerId) {\n      var _player = videojs(tech.options_.playerId);\n\n      if (!_player.hasOwnProperty('hls')) {\n        Object.defineProperty(_player, 'hls', {\n          get: function get() {\n            videojs.log.warn('player.hls is deprecated. Use player.tech().vhs instead.');\n            tech.trigger({\n              type: 'usage',\n              name: 'hls-player-access'\n            });\n            return _assertThisInitialized(_this);\n          },\n          configurable: true\n        });\n      }\n\n      if (!_player.hasOwnProperty('vhs')) {\n        Object.defineProperty(_player, 'vhs', {\n          get: function get() {\n            videojs.log.warn('player.vhs is deprecated. Use player.tech().vhs instead.');\n            tech.trigger({\n              type: 'usage',\n              name: 'vhs-player-access'\n            });\n            return _assertThisInitialized(_this);\n          },\n          configurable: true\n        });\n      }\n\n      if (!_player.hasOwnProperty('dash')) {\n        Object.defineProperty(_player, 'dash', {\n          get: function get() {\n            videojs.log.warn('player.dash is deprecated. Use player.tech().vhs instead.');\n            return _assertThisInitialized(_this);\n          },\n          configurable: true\n        });\n      }\n\n      _this.player_ = _player;\n    }\n\n    _this.tech_ = tech;\n    _this.source_ = source;\n    _this.stats = {};\n    _this.ignoreNextSeekingEvent_ = false;\n\n    _this.setOptions_();\n\n    if (_this.options_.overrideNative && tech.overrideNativeAudioTracks && tech.overrideNativeVideoTracks) {\n      tech.overrideNativeAudioTracks(true);\n      tech.overrideNativeVideoTracks(true);\n    } else if (_this.options_.overrideNative && (tech.featuresNativeVideoTracks || tech.featuresNativeAudioTracks)) {\n      // overriding native HLS only works if audio tracks have been emulated\n      // error early if we're misconfigured\n      throw new Error('Overriding native HLS requires emulated tracks. ' + 'See https://git.io/vMpjB');\n    } // listen for fullscreenchange events for this player so that we\n    // can adjust our quality selection quickly\n\n\n    _this.on(document, ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'], function (event) {\n      var fullscreenElement = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n\n      if (fullscreenElement && fullscreenElement.contains(_this.tech_.el())) {\n        _this.masterPlaylistController_.fastQualityChange_();\n      } else {\n        // When leaving fullscreen, since the in page pixel dimensions should be smaller\n        // than full screen, see if there should be a rendition switch down to preserve\n        // bandwidth.\n        _this.masterPlaylistController_.checkABR_();\n      }\n    });\n\n    _this.on(_this.tech_, 'seeking', function () {\n      if (this.ignoreNextSeekingEvent_) {\n        this.ignoreNextSeekingEvent_ = false;\n        return;\n      }\n\n      this.setCurrentTime(this.tech_.currentTime());\n    });\n\n    _this.on(_this.tech_, 'error', function () {\n      // verify that the error was real and we are loaded\n      // enough to have mpc loaded.\n      if (this.tech_.error() && this.masterPlaylistController_) {\n        this.masterPlaylistController_.pauseLoading();\n      }\n    });\n\n    _this.on(_this.tech_, 'play', _this.play);\n\n    return _this;\n  }\n\n  var _proto = VhsHandler.prototype;\n\n  _proto.setOptions_ = function setOptions_() {\n    var _this2 = this; // defaults\n\n\n    this.options_.withCredentials = this.options_.withCredentials || false;\n    this.options_.handleManifestRedirects = this.options_.handleManifestRedirects === false ? false : true;\n    this.options_.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions === false ? false : true;\n    this.options_.useDevicePixelRatio = this.options_.useDevicePixelRatio || false;\n    this.options_.smoothQualityChange = this.options_.smoothQualityChange || false;\n    this.options_.useBandwidthFromLocalStorage = typeof this.source_.useBandwidthFromLocalStorage !== 'undefined' ? this.source_.useBandwidthFromLocalStorage : this.options_.useBandwidthFromLocalStorage || false;\n    this.options_.useNetworkInformationApi = this.options_.useNetworkInformationApi || false;\n    this.options_.customTagParsers = this.options_.customTagParsers || [];\n    this.options_.customTagMappers = this.options_.customTagMappers || [];\n    this.options_.cacheEncryptionKeys = this.options_.cacheEncryptionKeys || false;\n\n    if (typeof this.options_.blacklistDuration !== 'number') {\n      this.options_.blacklistDuration = 5 * 60;\n    }\n\n    if (typeof this.options_.bandwidth !== 'number') {\n      if (this.options_.useBandwidthFromLocalStorage) {\n        var storedObject = getVhsLocalStorage();\n\n        if (storedObject && storedObject.bandwidth) {\n          this.options_.bandwidth = storedObject.bandwidth;\n          this.tech_.trigger({\n            type: 'usage',\n            name: 'vhs-bandwidth-from-local-storage'\n          });\n          this.tech_.trigger({\n            type: 'usage',\n            name: 'hls-bandwidth-from-local-storage'\n          });\n        }\n\n        if (storedObject && storedObject.throughput) {\n          this.options_.throughput = storedObject.throughput;\n          this.tech_.trigger({\n            type: 'usage',\n            name: 'vhs-throughput-from-local-storage'\n          });\n          this.tech_.trigger({\n            type: 'usage',\n            name: 'hls-throughput-from-local-storage'\n          });\n        }\n      }\n    } // if bandwidth was not set by options or pulled from local storage, start playlist\n    // selection at a reasonable bandwidth\n\n\n    if (typeof this.options_.bandwidth !== 'number') {\n      this.options_.bandwidth = Config.INITIAL_BANDWIDTH;\n    } // If the bandwidth number is unchanged from the initial setting\n    // then this takes precedence over the enableLowInitialPlaylist option\n\n\n    this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === Config.INITIAL_BANDWIDTH; // grab options passed to player.src\n\n    ['withCredentials', 'useDevicePixelRatio', 'limitRenditionByPlayerDimensions', 'bandwidth', 'smoothQualityChange', 'customTagParsers', 'customTagMappers', 'handleManifestRedirects', 'cacheEncryptionKeys', 'playlistSelector', 'initialPlaylistSelector', 'experimentalBufferBasedABR', 'liveRangeSafeTimeDelta', 'experimentalLLHLS', 'useNetworkInformationApi', 'experimentalExactManifestTimings', 'experimentalLeastPixelDiffSelector'].forEach(function (option) {\n      if (typeof _this2.source_[option] !== 'undefined') {\n        _this2.options_[option] = _this2.source_[option];\n      }\n    });\n    this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions;\n    this.useDevicePixelRatio = this.options_.useDevicePixelRatio;\n  }\n  /**\n   * called when player.src gets called, handle a new source\n   *\n   * @param {Object} src the source object to handle\n   */\n  ;\n\n  _proto.src = function src(_src, type) {\n    var _this3 = this; // do nothing if the src is falsey\n\n\n    if (!_src) {\n      return;\n    }\n\n    this.setOptions_(); // add master playlist controller options\n\n    this.options_.src = expandDataUri(this.source_.src);\n    this.options_.tech = this.tech_;\n    this.options_.externVhs = Vhs;\n    this.options_.sourceType = simpleTypeFromSourceType(type); // Whenever we seek internally, we should update the tech\n\n    this.options_.seekTo = function (time) {\n      _this3.tech_.setCurrentTime(time);\n    };\n\n    if (this.options_.smoothQualityChange) {\n      videojs.log.warn('smoothQualityChange is deprecated and will be removed in the next major version');\n    }\n\n    this.masterPlaylistController_ = new MasterPlaylistController(this.options_);\n    var playbackWatcherOptions = videojs.mergeOptions({\n      liveRangeSafeTimeDelta: SAFE_TIME_DELTA\n    }, this.options_, {\n      seekable: function seekable() {\n        return _this3.seekable();\n      },\n      media: function media() {\n        return _this3.masterPlaylistController_.media();\n      },\n      masterPlaylistController: this.masterPlaylistController_\n    });\n    this.playbackWatcher_ = new PlaybackWatcher(playbackWatcherOptions);\n    this.masterPlaylistController_.on('error', function () {\n      var player = videojs.players[_this3.tech_.options_.playerId];\n      var error = _this3.masterPlaylistController_.error;\n\n      if (_typeof(error) === 'object' && !error.code) {\n        error.code = 3;\n      } else if (typeof error === 'string') {\n        error = {\n          message: error,\n          code: 3\n        };\n      }\n\n      player.error(error);\n    });\n    var defaultSelector = this.options_.experimentalBufferBasedABR ? Vhs.movingAverageBandwidthSelector(0.55) : Vhs.STANDARD_PLAYLIST_SELECTOR; // `this` in selectPlaylist should be the VhsHandler for backwards\n    // compatibility with < v2\n\n    this.masterPlaylistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : defaultSelector.bind(this);\n    this.masterPlaylistController_.selectInitialPlaylist = Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this); // re-expose some internal objects for backwards compatibility with < v2\n\n    this.playlists = this.masterPlaylistController_.masterPlaylistLoader_;\n    this.mediaSource = this.masterPlaylistController_.mediaSource; // Proxy assignment of some properties to the master playlist\n    // controller. Using a custom property for backwards compatibility\n    // with < v2\n\n    Object.defineProperties(this, {\n      selectPlaylist: {\n        get: function get() {\n          return this.masterPlaylistController_.selectPlaylist;\n        },\n        set: function set(selectPlaylist) {\n          this.masterPlaylistController_.selectPlaylist = selectPlaylist.bind(this);\n        }\n      },\n      throughput: {\n        get: function get() {\n          return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;\n        },\n        set: function set(throughput) {\n          this.masterPlaylistController_.mainSegmentLoader_.throughput.rate = throughput; // By setting `count` to 1 the throughput value becomes the starting value\n          // for the cumulative average\n\n          this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1;\n        }\n      },\n      bandwidth: {\n        get: function get() {\n          var playerBandwidthEst = this.masterPlaylistController_.mainSegmentLoader_.bandwidth;\n          var networkInformation = window$1.navigator.connection || window$1.navigator.mozConnection || window$1.navigator.webkitConnection;\n          var tenMbpsAsBitsPerSecond = 10e6;\n\n          if (this.options_.useNetworkInformationApi && networkInformation) {\n            // downlink returns Mbps\n            // https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/downlink\n            var networkInfoBandwidthEstBitsPerSec = networkInformation.downlink * 1000 * 1000; // downlink maxes out at 10 Mbps. In the event that both networkInformationApi and the player\n            // estimate a bandwidth greater than 10 Mbps, use the larger of the two estimates to ensure that\n            // high quality streams are not filtered out.\n\n            if (networkInfoBandwidthEstBitsPerSec >= tenMbpsAsBitsPerSecond && playerBandwidthEst >= tenMbpsAsBitsPerSecond) {\n              playerBandwidthEst = Math.max(playerBandwidthEst, networkInfoBandwidthEstBitsPerSec);\n            } else {\n              playerBandwidthEst = networkInfoBandwidthEstBitsPerSec;\n            }\n          }\n\n          return playerBandwidthEst;\n        },\n        set: function set(bandwidth) {\n          this.masterPlaylistController_.mainSegmentLoader_.bandwidth = bandwidth; // setting the bandwidth manually resets the throughput counter\n          // `count` is set to zero that current value of `rate` isn't included\n          // in the cumulative average\n\n          this.masterPlaylistController_.mainSegmentLoader_.throughput = {\n            rate: 0,\n            count: 0\n          };\n        }\n      },\n\n      /**\n       * `systemBandwidth` is a combination of two serial processes bit-rates. The first\n       * is the network bitrate provided by `bandwidth` and the second is the bitrate of\n       * the entire process after that - decryption, transmuxing, and appending - provided\n       * by `throughput`.\n       *\n       * Since the two process are serial, the overall system bandwidth is given by:\n       *   sysBandwidth = 1 / (1 / bandwidth + 1 / throughput)\n       */\n      systemBandwidth: {\n        get: function get() {\n          var invBandwidth = 1 / (this.bandwidth || 1);\n          var invThroughput;\n\n          if (this.throughput > 0) {\n            invThroughput = 1 / this.throughput;\n          } else {\n            invThroughput = 0;\n          }\n\n          var systemBitrate = Math.floor(1 / (invBandwidth + invThroughput));\n          return systemBitrate;\n        },\n        set: function set() {\n          videojs.log.error('The \"systemBandwidth\" property is read-only');\n        }\n      }\n    });\n\n    if (this.options_.bandwidth) {\n      this.bandwidth = this.options_.bandwidth;\n    }\n\n    if (this.options_.throughput) {\n      this.throughput = this.options_.throughput;\n    }\n\n    Object.defineProperties(this.stats, {\n      bandwidth: {\n        get: function get() {\n          return _this3.bandwidth || 0;\n        },\n        enumerable: true\n      },\n      mediaRequests: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaRequests_() || 0;\n        },\n        enumerable: true\n      },\n      mediaRequestsAborted: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaRequestsAborted_() || 0;\n        },\n        enumerable: true\n      },\n      mediaRequestsTimedout: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaRequestsTimedout_() || 0;\n        },\n        enumerable: true\n      },\n      mediaRequestsErrored: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaRequestsErrored_() || 0;\n        },\n        enumerable: true\n      },\n      mediaTransferDuration: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaTransferDuration_() || 0;\n        },\n        enumerable: true\n      },\n      mediaBytesTransferred: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaBytesTransferred_() || 0;\n        },\n        enumerable: true\n      },\n      mediaSecondsLoaded: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaSecondsLoaded_() || 0;\n        },\n        enumerable: true\n      },\n      mediaAppends: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mediaAppends_() || 0;\n        },\n        enumerable: true\n      },\n      mainAppendsToLoadedData: {\n        get: function get() {\n          return _this3.masterPlaylistController_.mainAppendsToLoadedData_() || 0;\n        },\n        enumerable: true\n      },\n      audioAppendsToLoadedData: {\n        get: function get() {\n          return _this3.masterPlaylistController_.audioAppendsToLoadedData_() || 0;\n        },\n        enumerable: true\n      },\n      appendsToLoadedData: {\n        get: function get() {\n          return _this3.masterPlaylistController_.appendsToLoadedData_() || 0;\n        },\n        enumerable: true\n      },\n      timeToLoadedData: {\n        get: function get() {\n          return _this3.masterPlaylistController_.timeToLoadedData_() || 0;\n        },\n        enumerable: true\n      },\n      buffered: {\n        get: function get() {\n          return timeRangesToArray(_this3.tech_.buffered());\n        },\n        enumerable: true\n      },\n      currentTime: {\n        get: function get() {\n          return _this3.tech_.currentTime();\n        },\n        enumerable: true\n      },\n      currentSource: {\n        get: function get() {\n          return _this3.tech_.currentSource_;\n        },\n        enumerable: true\n      },\n      currentTech: {\n        get: function get() {\n          return _this3.tech_.name_;\n        },\n        enumerable: true\n      },\n      duration: {\n        get: function get() {\n          return _this3.tech_.duration();\n        },\n        enumerable: true\n      },\n      master: {\n        get: function get() {\n          return _this3.playlists.master;\n        },\n        enumerable: true\n      },\n      playerDimensions: {\n        get: function get() {\n          return _this3.tech_.currentDimensions();\n        },\n        enumerable: true\n      },\n      seekable: {\n        get: function get() {\n          return timeRangesToArray(_this3.tech_.seekable());\n        },\n        enumerable: true\n      },\n      timestamp: {\n        get: function get() {\n          return Date.now();\n        },\n        enumerable: true\n      },\n      videoPlaybackQuality: {\n        get: function get() {\n          return _this3.tech_.getVideoPlaybackQuality();\n        },\n        enumerable: true\n      }\n    });\n    this.tech_.one('canplay', this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));\n    this.tech_.on('bandwidthupdate', function () {\n      if (_this3.options_.useBandwidthFromLocalStorage) {\n        updateVhsLocalStorage({\n          bandwidth: _this3.bandwidth,\n          throughput: Math.round(_this3.throughput)\n        });\n      }\n    });\n    this.masterPlaylistController_.on('selectedinitialmedia', function () {\n      // Add the manual rendition mix-in to VhsHandler\n      renditionSelectionMixin(_this3);\n    });\n    this.masterPlaylistController_.sourceUpdater_.on('createdsourcebuffers', function () {\n      _this3.setupEme_();\n    }); // the bandwidth of the primary segment loader is our best\n    // estimate of overall bandwidth\n\n    this.on(this.masterPlaylistController_, 'progress', function () {\n      this.tech_.trigger('progress');\n    }); // In the live case, we need to ignore the very first `seeking` event since\n    // that will be the result of the seek-to-live behavior\n\n    this.on(this.masterPlaylistController_, 'firstplay', function () {\n      this.ignoreNextSeekingEvent_ = true;\n    });\n    this.setupQualityLevels_(); // do nothing if the tech has been disposed already\n    // this can occur if someone sets the src in player.ready(), for instance\n\n    if (!this.tech_.el()) {\n      return;\n    }\n\n    this.mediaSourceUrl_ = window$1.URL.createObjectURL(this.masterPlaylistController_.mediaSource);\n    this.tech_.src(this.mediaSourceUrl_);\n  };\n\n  _proto.createKeySessions_ = function createKeySessions_() {\n    var _this4 = this;\n\n    var audioPlaylistLoader = this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;\n    this.logger_('waiting for EME key session creation');\n    waitForKeySessionCreation({\n      player: this.player_,\n      sourceKeySystems: this.source_.keySystems,\n      audioMedia: audioPlaylistLoader && audioPlaylistLoader.media(),\n      mainPlaylists: this.playlists.master.playlists\n    }).then(function () {\n      _this4.logger_('created EME key session');\n\n      _this4.masterPlaylistController_.sourceUpdater_.initializedEme();\n    })[\"catch\"](function (err) {\n      _this4.logger_('error while creating EME key session', err);\n\n      _this4.player_.error({\n        message: 'Failed to initialize media keys for EME',\n        code: 3\n      });\n    });\n  };\n\n  _proto.handleWaitingForKey_ = function handleWaitingForKey_() {\n    // If waitingforkey is fired, it's possible that the data that's necessary to retrieve\n    // the key is in the manifest. While this should've happened on initial source load, it\n    // may happen again in live streams where the keys change, and the manifest info\n    // reflects the update.\n    //\n    // Because videojs-contrib-eme compares the PSSH data we send to that of PSSH data it's\n    // already requested keys for, we don't have to worry about this generating extraneous\n    // requests.\n    this.logger_('waitingforkey fired, attempting to create any new key sessions');\n    this.createKeySessions_();\n  }\n  /**\n   * If necessary and EME is available, sets up EME options and waits for key session\n   * creation.\n   *\n   * This function also updates the source updater so taht it can be used, as for some\n   * browsers, EME must be configured before content is appended (if appending unencrypted\n   * content before encrypted content).\n   */\n  ;\n\n  _proto.setupEme_ = function setupEme_() {\n    var _this5 = this;\n\n    var audioPlaylistLoader = this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;\n    var didSetupEmeOptions = setupEmeOptions({\n      player: this.player_,\n      sourceKeySystems: this.source_.keySystems,\n      media: this.playlists.media(),\n      audioMedia: audioPlaylistLoader && audioPlaylistLoader.media()\n    });\n    this.player_.tech_.on('keystatuschange', function (e) {\n      if (e.status === 'output-restricted') {\n        _this5.masterPlaylistController_.blacklistCurrentPlaylist({\n          playlist: _this5.masterPlaylistController_.media(),\n          message: \"DRM keystatus changed to \" + e.status + \". Playlist will fail to play. Check for HDCP content.\",\n          blacklistDuration: Infinity\n        });\n      }\n    });\n    this.handleWaitingForKey_ = this.handleWaitingForKey_.bind(this);\n    this.player_.tech_.on('waitingforkey', this.handleWaitingForKey_); // In IE11 this is too early to initialize media keys, and IE11 does not support\n    // promises.\n\n    if (videojs.browser.IE_VERSION === 11 || !didSetupEmeOptions) {\n      // If EME options were not set up, we've done all we could to initialize EME.\n      this.masterPlaylistController_.sourceUpdater_.initializedEme();\n      return;\n    }\n\n    this.createKeySessions_();\n  }\n  /**\n   * Initializes the quality levels and sets listeners to update them.\n   *\n   * @method setupQualityLevels_\n   * @private\n   */\n  ;\n\n  _proto.setupQualityLevels_ = function setupQualityLevels_() {\n    var _this6 = this;\n\n    var player = videojs.players[this.tech_.options_.playerId]; // if there isn't a player or there isn't a qualityLevels plugin\n    // or qualityLevels_ listeners have already been setup, do nothing.\n\n    if (!player || !player.qualityLevels || this.qualityLevels_) {\n      return;\n    }\n\n    this.qualityLevels_ = player.qualityLevels();\n    this.masterPlaylistController_.on('selectedinitialmedia', function () {\n      handleVhsLoadedMetadata(_this6.qualityLevels_, _this6);\n    });\n    this.playlists.on('mediachange', function () {\n      handleVhsMediaChange(_this6.qualityLevels_, _this6.playlists);\n    });\n  }\n  /**\n   * return the version\n   */\n  ;\n\n  VhsHandler.version = function version$5() {\n    return {\n      '@videojs/http-streaming': version$4,\n      'mux.js': version$3,\n      'mpd-parser': version$2,\n      'm3u8-parser': version$1,\n      'aes-decrypter': version\n    };\n  }\n  /**\n   * return the version\n   */\n  ;\n\n  _proto.version = function version() {\n    return this.constructor.version();\n  };\n\n  _proto.canChangeType = function canChangeType() {\n    return SourceUpdater.canChangeType();\n  }\n  /**\n   * Begin playing the video.\n   */\n  ;\n\n  _proto.play = function play() {\n    this.masterPlaylistController_.play();\n  }\n  /**\n   * a wrapper around the function in MasterPlaylistController\n   */\n  ;\n\n  _proto.setCurrentTime = function setCurrentTime(currentTime) {\n    this.masterPlaylistController_.setCurrentTime(currentTime);\n  }\n  /**\n   * a wrapper around the function in MasterPlaylistController\n   */\n  ;\n\n  _proto.duration = function duration() {\n    return this.masterPlaylistController_.duration();\n  }\n  /**\n   * a wrapper around the function in MasterPlaylistController\n   */\n  ;\n\n  _proto.seekable = function seekable() {\n    return this.masterPlaylistController_.seekable();\n  }\n  /**\n   * Abort all outstanding work and cleanup.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    if (this.playbackWatcher_) {\n      this.playbackWatcher_.dispose();\n    }\n\n    if (this.masterPlaylistController_) {\n      this.masterPlaylistController_.dispose();\n    }\n\n    if (this.qualityLevels_) {\n      this.qualityLevels_.dispose();\n    }\n\n    if (this.player_) {\n      delete this.player_.vhs;\n      delete this.player_.dash;\n      delete this.player_.hls;\n    }\n\n    if (this.tech_ && this.tech_.vhs) {\n      delete this.tech_.vhs;\n    } // don't check this.tech_.hls as it will log a deprecated warning\n\n\n    if (this.tech_) {\n      delete this.tech_.hls;\n    }\n\n    if (this.mediaSourceUrl_ && window$1.URL.revokeObjectURL) {\n      window$1.URL.revokeObjectURL(this.mediaSourceUrl_);\n      this.mediaSourceUrl_ = null;\n    }\n\n    if (this.tech_) {\n      this.tech_.off('waitingforkey', this.handleWaitingForKey_);\n    }\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  _proto.convertToProgramTime = function convertToProgramTime(time, callback) {\n    return getProgramTime({\n      playlist: this.masterPlaylistController_.media(),\n      time: time,\n      callback: callback\n    });\n  } // the player must be playing before calling this\n  ;\n\n  _proto.seekToProgramTime = function seekToProgramTime$1(programTime, callback, pauseAfterSeek, retryCount) {\n    if (pauseAfterSeek === void 0) {\n      pauseAfterSeek = true;\n    }\n\n    if (retryCount === void 0) {\n      retryCount = 2;\n    }\n\n    return seekToProgramTime({\n      programTime: programTime,\n      playlist: this.masterPlaylistController_.media(),\n      retryCount: retryCount,\n      pauseAfterSeek: pauseAfterSeek,\n      seekTo: this.options_.seekTo,\n      tech: this.options_.tech,\n      callback: callback\n    });\n  };\n\n  return VhsHandler;\n}(Component);\n/**\n * The Source Handler object, which informs video.js what additional\n * MIME types are supported and sets up playback. It is registered\n * automatically to the appropriate tech based on the capabilities of\n * the browser it is running in. It is not necessary to use or modify\n * this object in normal usage.\n */\n\n\nvar VhsSourceHandler = {\n  name: 'videojs-http-streaming',\n  VERSION: version$4,\n  canHandleSource: function canHandleSource(srcObj, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var localOptions = videojs.mergeOptions(videojs.options, options);\n    return VhsSourceHandler.canPlayType(srcObj.type, localOptions);\n  },\n  handleSource: function handleSource(source, tech, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var localOptions = videojs.mergeOptions(videojs.options, options);\n    tech.vhs = new VhsHandler(source, tech, localOptions);\n\n    if (!videojs.hasOwnProperty('hls')) {\n      Object.defineProperty(tech, 'hls', {\n        get: function get() {\n          videojs.log.warn('player.tech().hls is deprecated. Use player.tech().vhs instead.');\n          return tech.vhs;\n        },\n        configurable: true\n      });\n    }\n\n    tech.vhs.xhr = xhrFactory();\n    tech.vhs.src(source.src, source.type);\n    return tech.vhs;\n  },\n  canPlayType: function canPlayType(type, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _videojs$mergeOptions = videojs.mergeOptions(videojs.options, options),\n        _videojs$mergeOptions2 = _videojs$mergeOptions.vhs;\n\n    _videojs$mergeOptions2 = _videojs$mergeOptions2 === void 0 ? {} : _videojs$mergeOptions2;\n    var _videojs$mergeOptions3 = _videojs$mergeOptions2.overrideNative,\n        overrideNative = _videojs$mergeOptions3 === void 0 ? !videojs.browser.IS_ANY_SAFARI : _videojs$mergeOptions3,\n        _videojs$mergeOptions4 = _videojs$mergeOptions.hls;\n    _videojs$mergeOptions4 = _videojs$mergeOptions4 === void 0 ? {} : _videojs$mergeOptions4;\n    var _videojs$mergeOptions5 = _videojs$mergeOptions4.overrideNative,\n        legacyOverrideNative = _videojs$mergeOptions5 === void 0 ? false : _videojs$mergeOptions5;\n    var supportedType = simpleTypeFromSourceType(type);\n    var canUseMsePlayback = supportedType && (!Vhs.supportsTypeNatively(supportedType) || legacyOverrideNative || overrideNative);\n    return canUseMsePlayback ? 'maybe' : '';\n  }\n};\n/**\n * Check to see if the native MediaSource object exists and supports\n * an MP4 container with both H.264 video and AAC-LC audio.\n *\n * @return {boolean} if  native media sources are supported\n */\n\nvar supportsNativeMediaSources = function supportsNativeMediaSources() {\n  return browserSupportsCodec('avc1.4d400d,mp4a.40.2');\n}; // register source handlers with the appropriate techs\n\n\nif (supportsNativeMediaSources()) {\n  videojs.getTech('Html5').registerSourceHandler(VhsSourceHandler, 0);\n}\n\nvideojs.VhsHandler = VhsHandler;\nObject.defineProperty(videojs, 'HlsHandler', {\n  get: function get() {\n    videojs.log.warn('videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.');\n    return VhsHandler;\n  },\n  configurable: true\n});\nvideojs.VhsSourceHandler = VhsSourceHandler;\nObject.defineProperty(videojs, 'HlsSourceHandler', {\n  get: function get() {\n    videojs.log.warn('videojs.HlsSourceHandler is deprecated. ' + 'Use videojs.VhsSourceHandler instead.');\n    return VhsSourceHandler;\n  },\n  configurable: true\n});\nvideojs.Vhs = Vhs;\nObject.defineProperty(videojs, 'Hls', {\n  get: function get() {\n    videojs.log.warn('videojs.Hls is deprecated. Use videojs.Vhs instead.');\n    return Vhs;\n  },\n  configurable: true\n});\n\nif (!videojs.use) {\n  videojs.registerComponent('Hls', Vhs);\n  videojs.registerComponent('Vhs', Vhs);\n}\n\nvideojs.options.vhs = videojs.options.vhs || {};\nvideojs.options.hls = videojs.options.hls || {};\n\nif (!videojs.getPlugin || !videojs.getPlugin('reloadSourceOnError')) {\n  var registerPlugin = videojs.registerPlugin || videojs.plugin;\n  registerPlugin('reloadSourceOnError', reloadSourceOnError);\n}\n\nexport default videojs;","import window from 'global/window'; // const log2 = Math.log2 ? Math.log2 : (x) => (Math.log(x) / Math.log(2));\n\nvar repeat = function repeat(str, len) {\n  var acc = '';\n\n  while (len--) {\n    acc += str;\n  }\n\n  return acc;\n}; // count the number of bits it would take to represent a number\n// we used to do this with log2 but BigInt does not support builtin math\n// Math.ceil(log2(x));\n\n\nexport var countBits = function countBits(x) {\n  return x.toString(2).length;\n}; // count the number of whole bytes it would take to represent a number\n\nexport var countBytes = function countBytes(x) {\n  return Math.ceil(countBits(x) / 8);\n};\nexport var padStart = function padStart(b, len, str) {\n  if (str === void 0) {\n    str = ' ';\n  }\n\n  return (repeat(str, len) + b.toString()).slice(-len);\n};\nexport var isArrayBufferView = function isArrayBufferView(obj) {\n  if (ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(obj);\n  }\n\n  return obj && obj.buffer instanceof ArrayBuffer;\n};\nexport var isTypedArray = function isTypedArray(obj) {\n  return isArrayBufferView(obj);\n};\nexport var toUint8 = function toUint8(bytes) {\n  if (bytes instanceof Uint8Array) {\n    return bytes;\n  }\n\n  if (!Array.isArray(bytes) && !isTypedArray(bytes) && !(bytes instanceof ArrayBuffer)) {\n    // any non-number or NaN leads to empty uint8array\n    // eslint-disable-next-line\n    if (typeof bytes !== 'number' || typeof bytes === 'number' && bytes !== bytes) {\n      bytes = 0;\n    } else {\n      bytes = [bytes];\n    }\n  }\n\n  return new Uint8Array(bytes && bytes.buffer || bytes, bytes && bytes.byteOffset || 0, bytes && bytes.byteLength || 0);\n};\nexport var toHexString = function toHexString(bytes) {\n  bytes = toUint8(bytes);\n  var str = '';\n\n  for (var i = 0; i < bytes.length; i++) {\n    str += padStart(bytes[i].toString(16), 2, '0');\n  }\n\n  return str;\n};\nexport var toBinaryString = function toBinaryString(bytes) {\n  bytes = toUint8(bytes);\n  var str = '';\n\n  for (var i = 0; i < bytes.length; i++) {\n    str += padStart(bytes[i].toString(2), 8, '0');\n  }\n\n  return str;\n};\nvar BigInt = window.BigInt || Number;\nvar BYTE_TABLE = [BigInt('0x1'), BigInt('0x100'), BigInt('0x10000'), BigInt('0x1000000'), BigInt('0x100000000'), BigInt('0x10000000000'), BigInt('0x1000000000000'), BigInt('0x100000000000000'), BigInt('0x10000000000000000')];\nexport var ENDIANNESS = function () {\n  var a = new Uint16Array([0xFFCC]);\n  var b = new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n\n  if (b[0] === 0xFF) {\n    return 'big';\n  }\n\n  if (b[0] === 0xCC) {\n    return 'little';\n  }\n\n  return 'unknown';\n}();\nexport var IS_BIG_ENDIAN = ENDIANNESS === 'big';\nexport var IS_LITTLE_ENDIAN = ENDIANNESS === 'little';\nexport var bytesToNumber = function bytesToNumber(bytes, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$signed = _ref.signed,\n      signed = _ref$signed === void 0 ? false : _ref$signed,\n      _ref$le = _ref.le,\n      le = _ref$le === void 0 ? false : _ref$le;\n\n  bytes = toUint8(bytes);\n  var fn = le ? 'reduce' : 'reduceRight';\n  var obj = bytes[fn] ? bytes[fn] : Array.prototype[fn];\n  var number = obj.call(bytes, function (total, byte, i) {\n    var exponent = le ? i : Math.abs(i + 1 - bytes.length);\n    return total + BigInt(byte) * BYTE_TABLE[exponent];\n  }, BigInt(0));\n\n  if (signed) {\n    var max = BYTE_TABLE[bytes.length] / BigInt(2) - BigInt(1);\n    number = BigInt(number);\n\n    if (number > max) {\n      number -= max;\n      number -= max;\n      number -= BigInt(2);\n    }\n  }\n\n  return Number(number);\n};\nexport var numberToBytes = function numberToBytes(number, _temp2) {\n  var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$le = _ref2.le,\n      le = _ref2$le === void 0 ? false : _ref2$le; // eslint-disable-next-line\n\n\n  if (typeof number !== 'bigint' && typeof number !== 'number' || typeof number === 'number' && number !== number) {\n    number = 0;\n  }\n\n  number = BigInt(number);\n  var byteCount = countBytes(number);\n  var bytes = new Uint8Array(new ArrayBuffer(byteCount));\n\n  for (var i = 0; i < byteCount; i++) {\n    var byteIndex = le ? i : Math.abs(i + 1 - bytes.length);\n    bytes[byteIndex] = Number(number / BYTE_TABLE[i] & BigInt(0xFF));\n\n    if (number < 0) {\n      bytes[byteIndex] = Math.abs(~bytes[byteIndex]);\n      bytes[byteIndex] -= i === 0 ? 1 : 2;\n    }\n  }\n\n  return bytes;\n};\nexport var bytesToString = function bytesToString(bytes) {\n  if (!bytes) {\n    return '';\n  } // TODO: should toUint8 handle cases where we only have 8 bytes\n  // but report more since this is a Uint16+ Array?\n\n\n  bytes = Array.prototype.slice.call(bytes);\n  var string = String.fromCharCode.apply(null, toUint8(bytes));\n\n  try {\n    return decodeURIComponent(escape(string));\n  } catch (e) {// if decodeURIComponent/escape fails, we are dealing with partial\n    // or full non string data. Just return the potentially garbled string.\n  }\n\n  return string;\n};\nexport var stringToBytes = function stringToBytes(string, stringIsBytes) {\n  if (typeof string !== 'string' && string && typeof string.toString === 'function') {\n    string = string.toString();\n  }\n\n  if (typeof string !== 'string') {\n    return new Uint8Array();\n  } // If the string already is bytes, we don't have to do this\n  // otherwise we do this so that we split multi length characters\n  // into individual bytes\n\n\n  if (!stringIsBytes) {\n    string = unescape(encodeURIComponent(string));\n  }\n\n  var view = new Uint8Array(string.length);\n\n  for (var i = 0; i < string.length; i++) {\n    view[i] = string.charCodeAt(i);\n  }\n\n  return view;\n};\nexport var concatTypedArrays = function concatTypedArrays() {\n  for (var _len = arguments.length, buffers = new Array(_len), _key = 0; _key < _len; _key++) {\n    buffers[_key] = arguments[_key];\n  }\n\n  buffers = buffers.filter(function (b) {\n    return b && (b.byteLength || b.length) && typeof b !== 'string';\n  });\n\n  if (buffers.length <= 1) {\n    // for 0 length we will return empty uint8\n    // for 1 length we return the first uint8\n    return toUint8(buffers[0]);\n  }\n\n  var totalLen = buffers.reduce(function (total, buf, i) {\n    return total + (buf.byteLength || buf.length);\n  }, 0);\n  var tempBuffer = new Uint8Array(totalLen);\n  var offset = 0;\n  buffers.forEach(function (buf) {\n    buf = toUint8(buf);\n    tempBuffer.set(buf, offset);\n    offset += buf.byteLength;\n  });\n  return tempBuffer;\n};\n/**\n * Check if the bytes \"b\" are contained within bytes \"a\".\n *\n * @param {Uint8Array|Array} a\n *        Bytes to check in\n *\n * @param {Uint8Array|Array} b\n *        Bytes to check for\n *\n * @param {Object} options\n *        options\n *\n * @param {Array|Uint8Array} [offset=0]\n *        offset to use when looking at bytes in a\n *\n * @param {Array|Uint8Array} [mask=[]]\n *        mask to use on bytes before comparison.\n *\n * @return {boolean}\n *         If all bytes in b are inside of a, taking into account\n *         bit masks.\n */\n\nexport var bytesMatch = function bytesMatch(a, b, _temp3) {\n  var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      _ref3$offset = _ref3.offset,\n      offset = _ref3$offset === void 0 ? 0 : _ref3$offset,\n      _ref3$mask = _ref3.mask,\n      mask = _ref3$mask === void 0 ? [] : _ref3$mask;\n\n  a = toUint8(a);\n  b = toUint8(b); // ie 11 does not support uint8 every\n\n  var fn = b.every ? b.every : Array.prototype.every;\n  return b.length && a.length - offset >= b.length && // ie 11 doesn't support every on uin8\n  fn.call(b, function (bByte, i) {\n    var aByte = mask[i] ? mask[i] & a[offset + i] : a[offset + i];\n    return bByte === aByte;\n  });\n};\nexport var sliceBytes = function sliceBytes(src, start, end) {\n  if (Uint8Array.prototype.slice) {\n    return Uint8Array.prototype.slice.call(src, start, end);\n  }\n\n  return new Uint8Array(Array.prototype.slice.call(src, start, end));\n};\nexport var reverseBytes = function reverseBytes(src) {\n  if (src.reverse) {\n    return src.reverse();\n  }\n\n  return Array.prototype.reverse.call(src);\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// Pico Search v0.5.1 · The MIT License · Copyright © 2023 Shivam Mishra.\nfunction p(e, t) {\n  if (e.length < t.length) {\n    var n = e;\n    e = t, t = n;\n  }\n\n  var i = e.length,\n      o = t.length;\n  if (!o) return 0;\n  var s = Math.max(1, i / 2) - 1,\n      a = Array(o).fill(!1),\n      m = Array(i).fill(\"\"),\n      r = 0;\n\n  for (var _n = 0; _n < i; _n++) {\n    var u = e[_n];\n\n    for (var h = 0; h < o; h++) {\n      var d = t[h];\n\n      if (h <= _n + s && h + s >= 1 && u === d && !a[h]) {\n        a[h] = !0, m[r++] = u;\n        break;\n      }\n    }\n  }\n\n  if (!r) return 0;\n  var c = 0;\n\n  for (var _n2 = 0, _u = 0; _u < o; _u++) {\n    a[_u] && (t[_u] !== m[_n2] && c++, _n2++);\n  }\n\n  var l = r,\n      g = (l / i + l / o + (l - c / 2) / l) / 3,\n      f = 0;\n  o = Math.min(4, o);\n\n  for (var _n3 = 0; _n3 < o; _n3++) {\n    e[_n3] === t[_n3] && f++;\n  }\n\n  return g + f * .1 * (1 - g);\n}\n\nfunction y(e, t) {\n  if (t && e.length !== t.length) throw new Error(\"The number of values must be equal to the number of weights\");\n  var i = e.reduce(function (s, a, m) {\n    var r = t ? t[m] : 1;\n    return s + a * r;\n  }, 0),\n      o = t ? t.reduce(function (s, a) {\n    return s + a;\n  }, 0) : e.length;\n  return i / o;\n}\n\nfunction S(e) {\n  var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return Math.max(t, Math.min(i, e));\n}\n\nfunction T(e) {\n  return e.split(/\\s+/).filter(function (t, i, o) {\n    return t && o.indexOf(t) === i;\n  });\n}\n\nvar b = {\n  CONTAINS_MATCH: 1.2,\n  FIRST_SIMILARITY: 1.1,\n  STARTS_WITH: 1.05\n};\n\nfunction O(e, t, i, o) {\n  var s = [],\n      a = o && o.threshold || .8,\n      m = t.trim().toLowerCase();\n  return t ? (e.forEach(function (r) {\n    var c = [],\n        l = [];\n\n    var _iterator = _createForOfIteratorHelper(i),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var f = _step.value;\n        var n = typeof f == \"string\" ? f : f.name;\n\n        if (typeof f != \"string\" ? l.push(f.weight) : l.push(1), Object.prototype.hasOwnProperty.call(r, n) && typeof r[n] == \"string\") {\n          var u = r[n].trim().toLowerCase(),\n              h = A(u, m);\n          c.push(h);\n        } else c.push(0);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    var g = y(c, l);\n    g >= a && s.push({\n      object: r,\n      similarity: g\n    });\n  }), s.sort(function (r, c) {\n    return c.similarity - r.similarity;\n  }), s.map(function (r) {\n    return r.object;\n  })) : e;\n}\n\nfunction A(e, t) {\n  var i = T(e),\n      s = T(t).map(function (a) {\n    var m = i.map(function (l) {\n      return W(l, a);\n    }),\n        r = Math.max.apply(Math, _toConsumableArray(m)),\n        c = m[0];\n    return r === c ? r * b.FIRST_SIMILARITY : S(r);\n  });\n  return y(s);\n}\n\nfunction W(e, t) {\n  var i = p(e, t);\n  return e.includes(t) ? i * b.CONTAINS_MATCH : i;\n}\n\nexport { O as picoSearch };","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\nvar fromCharCode = String.fromCharCode;\n// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing\nvar $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\nvar INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length != 1;\n\n// `String.fromCodePoint` method\n// https://tc39.es/ecma262/#sec-string.fromcodepoint\n$({ target: 'String', stat: true, forced: INCORRECT_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  fromCodePoint: function fromCodePoint(x) {\n    var elements = [];\n    var length = arguments.length;\n    var i = 0;\n    var code;\n    while (length > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw RangeError(code + ' is not a valid code point');\n      elements.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00)\n      );\n    } return elements.join('');\n  }\n});\n","'use strict';\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\n\nfunction find(list, predicate, ac) {\n  if (ac === undefined) {\n    ac = Array.prototype;\n  }\n\n  if (list && typeof ac.find === 'function') {\n    return ac.find.call(list, predicate);\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    if (Object.prototype.hasOwnProperty.call(list, i)) {\n      var item = list[i];\n\n      if (predicate.call(undefined, item, i, list)) {\n        return item;\n      }\n    }\n  }\n}\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\n\n\nfunction freeze(object, oc) {\n  if (oc === undefined) {\n    oc = Object;\n  }\n\n  return oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object;\n}\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\n\n\nvar MIME_TYPE = freeze({\n  /**\n   * `text/html`, the only mime type that triggers treating an XML document as HTML.\n   *\n   * @see DOMParser.SupportedType.isHTML\n   * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n   * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n   */\n  HTML: 'text/html',\n\n  /**\n   * Helper method to check a mime type if it indicates an HTML document\n   *\n   * @param {string} [value]\n   * @returns {boolean}\n   *\n   * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n   * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n  isHTML: function isHTML(value) {\n    return value === MIME_TYPE.HTML;\n  },\n\n  /**\n   * `application/xml`, the standard mime type for XML documents.\n   *\n   * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n   * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n   * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n   */\n  XML_APPLICATION: 'application/xml',\n\n  /**\n   * `text/html`, an alias for `application/xml`.\n   *\n   * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n   * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n   * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n   */\n  XML_TEXT: 'text/xml',\n\n  /**\n   * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n   * but is parsed as an XML document.\n   *\n   * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n   * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n   */\n  XML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n  /**\n   * `image/svg+xml`,\n   *\n   * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n   * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n   * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n   */\n  XML_SVG_IMAGE: 'image/svg+xml'\n});\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\n\nvar NAMESPACE = freeze({\n  /**\n   * The XHTML namespace.\n   *\n   * @see http://www.w3.org/1999/xhtml\n   */\n  HTML: 'http://www.w3.org/1999/xhtml',\n\n  /**\n   * Checks if `uri` equals `NAMESPACE.HTML`.\n   *\n   * @param {string} [uri]\n   *\n   * @see NAMESPACE.HTML\n   */\n  isHTML: function isHTML(uri) {\n    return uri === NAMESPACE.HTML;\n  },\n\n  /**\n   * The SVG namespace.\n   *\n   * @see http://www.w3.org/2000/svg\n   */\n  SVG: 'http://www.w3.org/2000/svg',\n\n  /**\n   * The `xml:` namespace.\n   *\n   * @see http://www.w3.org/XML/1998/namespace\n   */\n  XML: 'http://www.w3.org/XML/1998/namespace',\n\n  /**\n   * The `xmlns:` namespace\n   *\n   * @see https://www.w3.org/2000/xmlns/\n   */\n  XMLNS: 'http://www.w3.org/2000/xmlns/'\n});\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;","function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * wavesurfer.js 6.1.0 (2022-03-31)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof2(module)) === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define(\"WaveSurfer\", [], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object') exports[\"WaveSurfer\"] = factory();else root[\"WaveSurfer\"] = factory();\n})(self, function () {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./src/drawer.canvasentry.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.canvasentry.js ***!\n          \\***********************************/\n\n        /***/\n        function srcDrawerCanvasentryJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var _style = _interopRequireDefault(__webpack_require__(\n          /*! ./util/style */\n          \"./src/util/style.js\"));\n\n          var _getId = _interopRequireDefault(__webpack_require__(\n          /*! ./util/get-id */\n          \"./src/util/get-id.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          /**\n           * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n           * and an (optional) progress wave `canvas`.\n           *\n           * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n           * render a waveform, depending on the zoom level.\n           */\n\n\n          var CanvasEntry = /*#__PURE__*/function () {\n            function CanvasEntry() {\n              _classCallCheck(this, CanvasEntry);\n              /**\n               * The wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n\n\n              this.wave = null;\n              /**\n               * The wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.waveCtx = null;\n              /**\n               * The (optional) progress wave node\n               *\n               * @type {HTMLCanvasElement}\n               */\n\n              this.progress = null;\n              /**\n               * The (optional) progress wave canvas rendering context\n               *\n               * @type {CanvasRenderingContext2D}\n               */\n\n              this.progressCtx = null;\n              /**\n               * Start of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.start = 0;\n              /**\n               * End of the area the canvas should render, between 0 and 1\n               *\n               * @type {number}\n               */\n\n              this.end = 1;\n              /**\n               * Unique identifier for this entry\n               *\n               * @type {string}\n               */\n\n              this.id = (0, _getId.default)(typeof this.constructor.name !== 'undefined' ? this.constructor.name.toLowerCase() + '_' : 'canvasentry_');\n              /**\n               * Canvas 2d context attributes\n               *\n               * @type {object}\n               */\n\n              this.canvasContextAttributes = {};\n            }\n            /**\n             * Store the wave canvas element and create the 2D rendering context\n             *\n             * @param {HTMLCanvasElement} element The wave `canvas` element.\n             */\n\n\n            _createClass(CanvasEntry, [{\n              key: \"initWave\",\n              value: function initWave(element) {\n                this.wave = element;\n                this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Store the progress wave canvas element and create the 2D rendering\n               * context\n               *\n               * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n               */\n\n            }, {\n              key: \"initProgress\",\n              value: function initProgress(element) {\n                this.progress = element;\n                this.progressCtx = this.progress.getContext('2d', this.canvasContextAttributes);\n              }\n              /**\n               * Update the dimensions\n               *\n               * @param {number} elementWidth Width of the entry\n               * @param {number} totalWidth Total width of the multi canvas renderer\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(elementWidth, totalWidth, width, height) {\n                // where the canvas starts and ends in the waveform, represented as a\n                // decimal between 0 and 1\n                this.start = this.wave.offsetLeft / totalWidth || 0;\n                this.end = this.start + elementWidth / totalWidth; // set wave canvas dimensions\n\n                this.wave.width = width;\n                this.wave.height = height;\n                var elementSize = {\n                  width: elementWidth + 'px'\n                };\n                (0, _style.default)(this.wave, elementSize);\n\n                if (this.hasProgressCanvas) {\n                  // set progress canvas dimensions\n                  this.progress.width = width;\n                  this.progress.height = height;\n                  (0, _style.default)(this.progress, elementSize);\n                }\n              }\n              /**\n               * Clear the wave and progress rendering contexts\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                // wave\n                this.waveCtx.clearRect(0, 0, this.waveCtx.canvas.width, this.waveCtx.canvas.height); // progress\n\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.clearRect(0, 0, this.progressCtx.canvas.width, this.progressCtx.canvas.height);\n                }\n              }\n              /**\n               * Set the fill styles for wave and progress\n               * @param {string|string[]} waveColor Fill color for the wave canvas,\n               * or an array of colors to apply as a gradient\n               * @param {?string|string[]} progressColor Fill color for the progress canvas,\n               * or an array of colors to apply as a gradient\n               */\n\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(waveColor, progressColor) {\n                this.waveCtx.fillStyle = this.getFillStyle(this.waveCtx, waveColor);\n\n                if (this.hasProgressCanvas) {\n                  this.progressCtx.fillStyle = this.getFillStyle(this.progressCtx, progressColor);\n                }\n              }\n              /**\n               * Utility function to handle wave color arguments\n               *\n               * When the color argument type is a string or CanvasGradient instance,\n               * it will be returned as is. Otherwise, it will be treated as an array,\n               * and a new CanvasGradient will be returned\n               *\n               * @since 6.0.0\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {string|string[]|CanvasGradient} color Either a single fill color\n               *     for the wave canvas, an existing CanvasGradient instance, or an array\n               *     of colors to apply as a gradient\n               * @returns {string|CanvasGradient} Returns a string fillstyle value, or a\n               *     canvas gradient\n               */\n\n            }, {\n              key: \"getFillStyle\",\n              value: function getFillStyle(ctx, color) {\n                if (typeof color == 'string' || color instanceof CanvasGradient) {\n                  return color;\n                }\n\n                var waveGradient = ctx.createLinearGradient(0, 0, 0, ctx.canvas.height);\n                color.forEach(function (value, index) {\n                  return waveGradient.addColorStop(index / color.length, value);\n                });\n                return waveGradient;\n              }\n              /**\n               * Set the canvas transforms for wave and progress\n               *\n               * @param {boolean} vertical Whether to render vertically\n               */\n\n            }, {\n              key: \"applyCanvasTransforms\",\n              value: function applyCanvasTransforms(vertical) {\n                if (vertical) {\n                  // Reflect the waveform across the line y = -x\n                  this.waveCtx.setTransform(0, 1, 1, 0, 0, 0);\n\n                  if (this.hasProgressCanvas) {\n                    this.progressCtx.setTransform(0, 1, 1, 0, 0, 0);\n                  }\n                }\n              }\n              /**\n               * Draw a rectangle for wave and progress\n               *\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n\n            }, {\n              key: \"fillRects\",\n              value: function fillRects(x, y, width, height, radius) {\n                this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n\n                if (this.hasProgressCanvas) {\n                  this.fillRectToContext(this.progressCtx, x, y, width, height, radius);\n                }\n              }\n              /**\n               * Draw the actual rectangle on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number} x X start position\n               * @param {number} y Y start position\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               */\n\n            }, {\n              key: \"fillRectToContext\",\n              value: function fillRectToContext(ctx, x, y, width, height, radius) {\n                if (!ctx) {\n                  return;\n                }\n\n                if (radius) {\n                  this.drawRoundedRect(ctx, x, y, width, height, radius);\n                } else {\n                  ctx.fillRect(x, y, width, height);\n                }\n              }\n              /**\n               * Draw a rounded rectangle on Canvas\n               *\n               * @param {CanvasRenderingContext2D} ctx Canvas context\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               *\n               * @return {void}\n               * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n               */\n\n            }, {\n              key: \"drawRoundedRect\",\n              value: function drawRoundedRect(ctx, x, y, width, height, radius) {\n                if (height === 0) {\n                  return;\n                } // peaks are float values from -1 to 1. Use absolute height values in\n                // order to correctly calculate rounded rectangle coordinates\n\n\n                if (height < 0) {\n                  height *= -1;\n                  y -= height;\n                }\n\n                ctx.beginPath();\n                ctx.moveTo(x + radius, y);\n                ctx.lineTo(x + width - radius, y);\n                ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n                ctx.lineTo(x + width, y + height - radius);\n                ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n                ctx.lineTo(x + radius, y + height);\n                ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n                ctx.lineTo(x, y + radius);\n                ctx.quadraticCurveTo(x, y, x + radius, y);\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Render the actual wave and progress lines\n               *\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n\n            }, {\n              key: \"drawLines\",\n              value: function drawLines(peaks, absmax, halfH, offsetY, start, end) {\n                this.drawLineToContext(this.waveCtx, peaks, absmax, halfH, offsetY, start, end);\n\n                if (this.hasProgressCanvas) {\n                  this.drawLineToContext(this.progressCtx, peaks, absmax, halfH, offsetY, start, end);\n                }\n              }\n              /**\n               * Render the actual waveform line on a `canvas` element\n               *\n               * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n               * @param {number[]} peaks Array with peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               */\n\n            }, {\n              key: \"drawLineToContext\",\n              value: function drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n                if (!ctx) {\n                  return;\n                }\n\n                var length = peaks.length / 2;\n                var first = Math.round(length * this.start); // use one more peak value to make sure we join peaks at ends -- unless,\n                // of course, this is the last canvas\n\n                var last = Math.round(length * this.end) + 1;\n                var canvasStart = first;\n                var canvasEnd = last;\n                var scale = this.wave.width / (canvasEnd - canvasStart - 1); // optimization\n\n                var halfOffset = halfH + offsetY;\n                var absmaxHalf = absmax / halfH;\n                ctx.beginPath();\n                ctx.moveTo((canvasStart - first) * scale, halfOffset);\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf));\n                var i, peak, h;\n\n                for (i = canvasStart; i < canvasEnd; i++) {\n                  peak = peaks[2 * i] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n                } // draw the bottom edge going backwards, to make a single\n                // closed hull to fill\n\n\n                var j = canvasEnd - 1;\n\n                for (j; j >= canvasStart; j--) {\n                  peak = peaks[2 * j + 1] || 0;\n                  h = Math.round(peak / absmaxHalf);\n                  ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n                }\n\n                ctx.lineTo((canvasStart - first) * scale, halfOffset - Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf));\n                ctx.closePath();\n                ctx.fill();\n              }\n              /**\n               * Destroys this entry\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.waveCtx = null;\n                this.wave = null;\n                this.progressCtx = null;\n                this.progress = null;\n              }\n              /**\n               * Return image data of the wave `canvas` element\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise` that\n               * resolves with a `Blob` instance.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|Promise} When using the default `'dataURL'` `type` this\n               * returns a data URL. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with a `Blob` instance.\n               */\n\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                var _this = this;\n\n                if (type === 'blob') {\n                  return new Promise(function (resolve) {\n                    _this.wave.toBlob(resolve, format, quality);\n                  });\n                } else if (type === 'dataURL') {\n                  return this.wave.toDataURL(format, quality);\n                }\n              }\n            }]);\n\n            return CanvasEntry;\n          }();\n\n          exports[\"default\"] = CanvasEntry;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/drawer.js\":\n        /*!***********************!*\\\n          !*** ./src/drawer.js ***!\n          \\***********************/\n\n        /***/\n        function srcDrawerJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * Parent class for renderers\n           *\n           * @extends {Observer}\n           */\n\n\n          var Drawer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(Drawer, _util$Observer);\n\n            var _super = _createSuper(Drawer);\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n\n\n            function Drawer(container, params) {\n              var _this;\n\n              _classCallCheck(this, Drawer);\n\n              _this = _super.call(this);\n              _this.container = util.withOrientation(container, params.vertical);\n              /**\n               * @type {WavesurferParams}\n               */\n\n              _this.params = params;\n              /**\n               * The width of the renderer\n               * @type {number}\n               */\n\n              _this.width = 0;\n              /**\n               * The height of the renderer\n               * @type {number}\n               */\n\n              _this.height = params.height * _this.params.pixelRatio;\n              _this.lastPos = 0;\n              /**\n               * The `<wave>` element which is added to the container\n               * @type {HTMLElement}\n               */\n\n              _this.wrapper = null;\n              return _this;\n            }\n            /**\n             * Alias of `util.style`\n             *\n             * @param {HTMLElement} el The element that the styles will be applied to\n             * @param {Object} styles The map of propName: attribute, both are used as-is\n             * @return {HTMLElement} el\n             */\n\n\n            _createClass(Drawer, [{\n              key: \"style\",\n              value: function style(el, styles) {\n                return util.style(el, styles);\n              }\n              /**\n               * Create the wrapper `<wave>` element, style it and set up the events for\n               * interaction\n               */\n\n            }, {\n              key: \"createWrapper\",\n              value: function createWrapper() {\n                this.wrapper = util.withOrientation(this.container.appendChild(document.createElement('wave')), this.params.vertical);\n                this.style(this.wrapper, {\n                  display: 'block',\n                  position: 'relative',\n                  userSelect: 'none',\n                  webkitUserSelect: 'none',\n                  height: this.params.height + 'px'\n                });\n\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: '100%',\n                    cursor: this.params.hideCursor ? 'none' : 'auto',\n                    overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n                    overflowY: 'hidden'\n                  });\n                }\n\n                this.setupWrapperEvents();\n              }\n              /**\n               * Handle click event\n               *\n               * @param {Event} e Click event\n               * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n               * @return {number} Playback position from 0 to 1\n               */\n\n            }, {\n              key: \"handleEvent\",\n              value: function handleEvent(e, noPrevent) {\n                !noPrevent && e.preventDefault();\n                var clientX = util.withOrientation(e.targetTouches ? e.targetTouches[0] : e, this.params.vertical).clientX;\n                var bbox = this.wrapper.getBoundingClientRect();\n                var nominalWidth = this.width;\n                var parentWidth = this.getWidth();\n                var progressPixels = this.getProgressPixels(bbox, clientX);\n                var progress;\n\n                if (!this.params.fillParent && nominalWidth < parentWidth) {\n                  progress = progressPixels * (this.params.pixelRatio / nominalWidth) || 0;\n                } else {\n                  progress = (progressPixels + this.wrapper.scrollLeft) / this.wrapper.scrollWidth || 0;\n                }\n\n                return util.clamp(progress, 0, 1);\n              }\n            }, {\n              key: \"getProgressPixels\",\n              value: function getProgressPixels(wrapperBbox, clientX) {\n                if (this.params.rtl) {\n                  return wrapperBbox.right - clientX;\n                } else {\n                  return clientX - wrapperBbox.left;\n                }\n              }\n            }, {\n              key: \"setupWrapperEvents\",\n              value: function setupWrapperEvents() {\n                var _this2 = this;\n\n                this.wrapper.addEventListener('click', function (e) {\n                  var orientedEvent = util.withOrientation(e, _this2.params.vertical);\n                  var scrollbarHeight = _this2.wrapper.offsetHeight - _this2.wrapper.clientHeight;\n\n                  if (scrollbarHeight !== 0) {\n                    // scrollbar is visible.  Check if click was on it\n                    var bbox = _this2.wrapper.getBoundingClientRect();\n\n                    if (orientedEvent.clientY >= bbox.bottom - scrollbarHeight) {\n                      // ignore mousedown as it was on the scrollbar\n                      return;\n                    }\n                  }\n\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('click', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('dblclick', function (e) {\n                  if (_this2.params.interact) {\n                    _this2.fireEvent('dblclick', e, _this2.handleEvent(e));\n                  }\n                });\n                this.wrapper.addEventListener('scroll', function (e) {\n                  return _this2.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Draw peaks on the canvas\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} length The width of the area that should be drawn\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawPeaks\",\n              value: function drawPeaks(peaks, length, start, end) {\n                if (!this.setWidth(length)) {\n                  this.clearWave();\n                }\n\n                this.params.barWidth ? this.drawBars(peaks, 0, start, end) : this.drawWave(peaks, 0, start, end);\n              }\n              /**\n               * Scroll to the beginning\n               */\n\n            }, {\n              key: \"resetScroll\",\n              value: function resetScroll() {\n                if (this.wrapper !== null) {\n                  this.wrapper.scrollLeft = 0;\n                }\n              }\n              /**\n               * Recenter the view-port at a certain percent of the waveform\n               *\n               * @param {number} percent Value from 0 to 1 on the waveform\n               */\n\n            }, {\n              key: \"recenter\",\n              value: function recenter(percent) {\n                var position = this.wrapper.scrollWidth * percent;\n                this.recenterOnPosition(position, true);\n              }\n              /**\n               * Recenter the view-port on a position, either scroll there immediately or\n               * in steps of 5 pixels\n               *\n               * @param {number} position X-offset in pixels\n               * @param {boolean} immediate Set to true to immediately scroll somewhere\n               */\n\n            }, {\n              key: \"recenterOnPosition\",\n              value: function recenterOnPosition(position, immediate) {\n                var scrollLeft = this.wrapper.scrollLeft;\n                var half = ~~(this.wrapper.clientWidth / 2);\n                var maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n                var target = position - half;\n                var offset = target - scrollLeft;\n\n                if (maxScroll == 0) {\n                  // no need to continue if scrollbar is not there\n                  return;\n                } // if the cursor is currently visible...\n\n\n                if (!immediate && -half <= offset && offset < half) {\n                  // set rate at which waveform is centered\n                  var rate = this.params.autoCenterRate; // make rate depend on width of view and length of waveform\n\n                  rate /= half;\n                  rate *= maxScroll;\n                  offset = Math.max(-rate, Math.min(rate, offset));\n                  target = scrollLeft + offset;\n                } // limit target to valid range (0 to maxScroll)\n\n\n                target = Math.max(0, Math.min(maxScroll, target)); // no use attempting to scroll if we're not moving\n\n                if (target != scrollLeft) {\n                  this.wrapper.scrollLeft = target;\n                }\n              }\n              /**\n               * Get the current scroll position in pixels\n               *\n               * @return {number} Horizontal scroll position in pixels\n               */\n\n            }, {\n              key: \"getScrollX\",\n              value: function getScrollX() {\n                var x = 0;\n\n                if (this.wrapper) {\n                  var pixelRatio = this.params.pixelRatio;\n                  x = Math.round(this.wrapper.scrollLeft * pixelRatio); // In cases of elastic scroll (safari with mouse wheel) you can\n                  // scroll beyond the limits of the container\n                  // Calculate and floor the scrollable extent to make sure an out\n                  // of bounds value is not returned\n                  // Ticket #1312\n\n                  if (this.params.scrollParent) {\n                    var maxScroll = ~~(this.wrapper.scrollWidth * pixelRatio - this.getWidth());\n                    x = Math.min(maxScroll, Math.max(0, x));\n                  }\n                }\n\n                return x;\n              }\n              /**\n               * Get the width of the container\n               *\n               * @return {number} The width of the container\n               */\n\n            }, {\n              key: \"getWidth\",\n              value: function getWidth() {\n                return Math.round(this.container.clientWidth * this.params.pixelRatio);\n              }\n              /**\n               * Set the width of the container\n               *\n               * @param {number} width The new width of the container\n               * @return {boolean} Whether the width of the container was updated or not\n               */\n\n            }, {\n              key: \"setWidth\",\n              value: function setWidth(width) {\n                if (this.width == width) {\n                  return false;\n                }\n\n                this.width = width;\n\n                if (this.params.fillParent || this.params.scrollParent) {\n                  this.style(this.wrapper, {\n                    width: ''\n                  });\n                } else {\n                  var newWidth = ~~(this.width / this.params.pixelRatio) + 'px';\n                  this.style(this.wrapper, {\n                    width: newWidth\n                  });\n                }\n\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Set the height of the container\n               *\n               * @param {number} height The new height of the container.\n               * @return {boolean} Whether the height of the container was updated or not\n               */\n\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                if (height == this.height) {\n                  return false;\n                }\n\n                this.height = height;\n                this.style(this.wrapper, {\n                  height: ~~(this.height / this.params.pixelRatio) + 'px'\n                });\n                this.updateSize();\n                return true;\n              }\n              /**\n               * Called by wavesurfer when progress should be rendered\n               *\n               * @param {number} progress From 0 to 1\n               */\n\n            }, {\n              key: \"progress\",\n              value: function progress(_progress) {\n                var minPxDelta = 1 / this.params.pixelRatio;\n                var pos = Math.round(_progress * this.width) * minPxDelta;\n\n                if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n                  this.lastPos = pos;\n\n                  if (this.params.scrollParent && this.params.autoCenter) {\n                    var newPos = ~~(this.wrapper.scrollWidth * _progress);\n                    this.recenterOnPosition(newPos, this.params.autoCenterImmediately);\n                  }\n\n                  this.updateProgress(pos);\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.unAll();\n\n                if (this.wrapper) {\n                  if (this.wrapper.parentNode == this.container.domElement) {\n                    this.container.removeChild(this.wrapper.domElement);\n                  }\n\n                  this.wrapper = null;\n                }\n              }\n              /* Renderer-specific methods */\n\n              /**\n               * Called after cursor related params have changed.\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {}\n              /**\n               * Called when the size of the container changes so the renderer can adjust\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {}\n              /**\n               * Draw a waveform with bars\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {}\n              /**\n               * Draw a waveform\n               *\n               * @abstract\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n               * rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               */\n\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {}\n              /**\n               * Clear the waveform\n               *\n               * @abstract\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {}\n              /**\n               * Render the new progress\n               *\n               * @abstract\n               * @param {number} position X-Offset of progress position in pixels\n               */\n\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {}\n            }]);\n\n            return Drawer;\n          }(util.Observer);\n\n          exports[\"default\"] = Drawer;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/drawer.multicanvas.js\":\n        /*!***********************************!*\\\n          !*** ./src/drawer.multicanvas.js ***!\n          \\***********************************/\n\n        /***/\n        function srcDrawerMulticanvasJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var _drawer = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer */\n          \"./src/drawer.js\"));\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          var _drawer2 = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer.canvasentry */\n          \"./src/drawer.canvasentry.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n           * builtin renderer.\n           *\n           * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n           * on the zoom level.\n           */\n\n\n          var MultiCanvas = /*#__PURE__*/function (_Drawer) {\n            _inherits(MultiCanvas, _Drawer);\n\n            var _super = _createSuper(MultiCanvas);\n            /**\n             * @param {HTMLElement} container The container node of the wavesurfer instance\n             * @param {WavesurferParams} params The wavesurfer initialisation options\n             */\n\n\n            function MultiCanvas(container, params) {\n              var _this;\n\n              _classCallCheck(this, MultiCanvas);\n\n              _this = _super.call(this, container, params);\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasWidth = params.maxCanvasWidth;\n              /**\n               * @type {number}\n               */\n\n              _this.maxCanvasElementWidth = Math.round(params.maxCanvasWidth / params.pixelRatio);\n              /**\n               * Whether or not the progress wave is rendered. If the `waveColor`\n               * and `progressColor` are the same color it is not.\n               *\n               * @type {boolean}\n               */\n\n              _this.hasProgressCanvas = params.waveColor != params.progressColor;\n              /**\n               * @type {number}\n               */\n\n              _this.halfPixel = 0.5 / params.pixelRatio;\n              /**\n               * List of `CanvasEntry` instances.\n               *\n               * @type {Array}\n               */\n\n              _this.canvases = [];\n              /**\n               * @type {HTMLElement}\n               */\n\n              _this.progressWave = null;\n              /**\n               * Class used to generate entries.\n               *\n               * @type {function}\n               */\n\n              _this.EntryClass = _drawer2.default;\n              /**\n               * Canvas 2d context attributes.\n               *\n               * @type {object}\n               */\n\n              _this.canvasContextAttributes = params.drawingContextAttributes;\n              /**\n               * Overlap added between entries to prevent vertical white stripes\n               * between `canvas` elements.\n               *\n               * @type {number}\n               */\n\n              _this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n              /**\n               * The radius of the wave bars. Makes bars rounded\n               *\n               * @type {number}\n               */\n\n              _this.barRadius = params.barRadius || 0;\n              /**\n               * Whether to render the waveform vertically. Defaults to false.\n               *\n               * @type {boolean}\n               */\n\n              _this.vertical = params.vertical;\n              return _this;\n            }\n            /**\n             * Initialize the drawer\n             */\n\n\n            _createClass(MultiCanvas, [{\n              key: \"init\",\n              value: function init() {\n                this.createWrapper();\n                this.createElements();\n              }\n              /**\n               * Create the canvas elements and style them\n               *\n               */\n\n            }, {\n              key: \"createElements\",\n              value: function createElements() {\n                this.progressWave = util.withOrientation(this.wrapper.appendChild(document.createElement('wave')), this.params.vertical);\n                this.style(this.progressWave, {\n                  position: 'absolute',\n                  zIndex: 3,\n                  left: 0,\n                  top: 0,\n                  bottom: 0,\n                  overflow: 'hidden',\n                  width: '0',\n                  display: 'none',\n                  boxSizing: 'border-box',\n                  borderRightStyle: 'solid',\n                  pointerEvents: 'none'\n                });\n                this.addCanvas();\n                this.updateCursor();\n              }\n              /**\n               * Update cursor style\n               */\n\n            }, {\n              key: \"updateCursor\",\n              value: function updateCursor() {\n                this.style(this.progressWave, {\n                  borderRightWidth: this.params.cursorWidth + 'px',\n                  borderRightColor: this.params.cursorColor\n                });\n              }\n              /**\n               * Adjust to the updated size by adding or removing canvases\n               */\n\n            }, {\n              key: \"updateSize\",\n              value: function updateSize() {\n                var _this2 = this;\n\n                var totalWidth = Math.round(this.width / this.params.pixelRatio);\n                var requiredCanvases = Math.ceil(totalWidth / (this.maxCanvasElementWidth + this.overlap)); // add required canvases\n\n                while (this.canvases.length < requiredCanvases) {\n                  this.addCanvas();\n                } // remove older existing canvases, if any\n\n\n                while (this.canvases.length > requiredCanvases) {\n                  this.removeCanvas();\n                }\n\n                var canvasWidth = this.maxCanvasWidth + this.overlap;\n                var lastCanvas = this.canvases.length - 1;\n                this.canvases.forEach(function (entry, i) {\n                  if (i == lastCanvas) {\n                    canvasWidth = _this2.width - _this2.maxCanvasWidth * lastCanvas;\n                  }\n\n                  _this2.updateDimensions(entry, canvasWidth, _this2.height);\n\n                  entry.clearWave();\n                });\n              }\n              /**\n               * Add a canvas to the canvas list\n               *\n               */\n\n            }, {\n              key: \"addCanvas\",\n              value: function addCanvas() {\n                var entry = new this.EntryClass();\n                entry.canvasContextAttributes = this.canvasContextAttributes;\n                entry.hasProgressCanvas = this.hasProgressCanvas;\n                entry.halfPixel = this.halfPixel;\n                var leftOffset = this.maxCanvasElementWidth * this.canvases.length; // wave\n\n                var wave = util.withOrientation(this.wrapper.appendChild(document.createElement('canvas')), this.params.vertical);\n                this.style(wave, {\n                  position: 'absolute',\n                  zIndex: 2,\n                  left: leftOffset + 'px',\n                  top: 0,\n                  bottom: 0,\n                  height: '100%',\n                  pointerEvents: 'none'\n                });\n                entry.initWave(wave); // progress\n\n                if (this.hasProgressCanvas) {\n                  var progress = util.withOrientation(this.progressWave.appendChild(document.createElement('canvas')), this.params.vertical);\n                  this.style(progress, {\n                    position: 'absolute',\n                    left: leftOffset + 'px',\n                    top: 0,\n                    bottom: 0,\n                    height: '100%'\n                  });\n                  entry.initProgress(progress);\n                }\n\n                this.canvases.push(entry);\n              }\n              /**\n               * Pop single canvas from the list\n               *\n               */\n\n            }, {\n              key: \"removeCanvas\",\n              value: function removeCanvas() {\n                var lastEntry = this.canvases[this.canvases.length - 1]; // wave\n\n                lastEntry.wave.parentElement.removeChild(lastEntry.wave.domElement); // progress\n\n                if (this.hasProgressCanvas) {\n                  lastEntry.progress.parentElement.removeChild(lastEntry.progress.domElement);\n                } // cleanup\n\n\n                if (lastEntry) {\n                  lastEntry.destroy();\n                  lastEntry = null;\n                }\n\n                this.canvases.pop();\n              }\n              /**\n               * Update the dimensions of a canvas element\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {number} width The new width of the element\n               * @param {number} height The new height of the element\n               */\n\n            }, {\n              key: \"updateDimensions\",\n              value: function updateDimensions(entry, width, height) {\n                var elementWidth = Math.round(width / this.params.pixelRatio);\n                var totalWidth = Math.round(this.width / this.params.pixelRatio); // update canvas dimensions\n\n                entry.updateDimensions(elementWidth, totalWidth, width, height); // style element\n\n                this.style(this.progressWave, {\n                  display: 'block'\n                });\n              }\n              /**\n               * Clear the whole multi-canvas\n               */\n\n            }, {\n              key: \"clearWave\",\n              value: function clearWave() {\n                var _this3 = this;\n\n                util.frame(function () {\n                  _this3.canvases.forEach(function (entry) {\n                    return entry.clearWave();\n                  });\n                })();\n              }\n              /**\n               * Draw a waveform with bars\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0. Must be an integer.\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n\n            }, {\n              key: \"drawBars\",\n              value: function drawBars(peaks, channelIndex, start, end) {\n                var _this4 = this;\n\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref) {\n                  var absmax = _ref.absmax,\n                      hasMinVals = _ref.hasMinVals,\n                      height = _ref.height,\n                      offsetY = _ref.offsetY,\n                      halfH = _ref.halfH,\n                      peaks = _ref.peaks,\n                      ch = _ref.channelIndex; // if drawBars was called within ws.empty we don't pass a start and\n                  // don't want anything to happen\n\n                  if (start === undefined) {\n                    return;\n                  } // Skip every other value if there are negatives.\n\n\n                  var peakIndexScale = hasMinVals ? 2 : 1;\n                  var length = peaks.length / peakIndexScale;\n                  var bar = _this4.params.barWidth * _this4.params.pixelRatio;\n                  var gap = _this4.params.barGap === null ? Math.max(_this4.params.pixelRatio, ~~(bar / 2)) : Math.max(_this4.params.pixelRatio, _this4.params.barGap * _this4.params.pixelRatio);\n                  var step = bar + gap;\n                  var scale = length / _this4.width;\n                  var first = start;\n                  var last = end;\n                  var peakIndex = first;\n\n                  for (peakIndex; peakIndex < last; peakIndex += step) {\n                    // search for the highest peak in the range this bar falls into\n                    var peak = 0;\n                    var peakIndexRange = Math.floor(peakIndex * scale) * peakIndexScale; // start index\n\n                    var peakIndexEnd = Math.floor((peakIndex + step) * scale) * peakIndexScale;\n\n                    do {\n                      // do..while makes sure at least one peak is always evaluated\n                      var newPeak = Math.abs(peaks[peakIndexRange]); // for arrays starting with negative values\n\n                      if (newPeak > peak) {\n                        peak = newPeak; // higher\n                      }\n\n                      peakIndexRange += peakIndexScale; // skip every other value for negatives\n                    } while (peakIndexRange < peakIndexEnd); // calculate the height of this bar according to the highest peak found\n\n\n                    var h = Math.round(peak / absmax * halfH); // in case of silences, allow the user to specify that we\n                    // always draw *something* (normally a 1px high bar)\n\n                    if (h == 0 && _this4.params.barMinHeight) {\n                      h = _this4.params.barMinHeight;\n                    }\n\n                    _this4.fillRect(peakIndex + _this4.halfPixel, halfH - h + offsetY, bar + _this4.halfPixel, h * 2, _this4.barRadius, ch);\n                  }\n                });\n              }\n              /**\n               * Draw a waveform\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n               * for split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered (If this isn't set only a flat line is rendered)\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @returns {void}\n               */\n\n            }, {\n              key: \"drawWave\",\n              value: function drawWave(peaks, channelIndex, start, end) {\n                var _this5 = this;\n\n                return this.prepareDraw(peaks, channelIndex, start, end, function (_ref2) {\n                  var absmax = _ref2.absmax,\n                      hasMinVals = _ref2.hasMinVals,\n                      height = _ref2.height,\n                      offsetY = _ref2.offsetY,\n                      halfH = _ref2.halfH,\n                      peaks = _ref2.peaks,\n                      channelIndex = _ref2.channelIndex;\n\n                  if (!hasMinVals) {\n                    var reflectedPeaks = [];\n                    var len = peaks.length;\n                    var i = 0;\n\n                    for (i; i < len; i++) {\n                      reflectedPeaks[2 * i] = peaks[i];\n                      reflectedPeaks[2 * i + 1] = -peaks[i];\n                    }\n\n                    peaks = reflectedPeaks;\n                  } // if drawWave was called within ws.empty we don't pass a start and\n                  // end and simply want a flat line\n\n\n                  if (start !== undefined) {\n                    _this5.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n                  } // always draw a median line\n\n\n                  _this5.fillRect(0, halfH + offsetY - _this5.halfPixel, _this5.width, _this5.halfPixel, _this5.barRadius, channelIndex);\n                });\n              }\n              /**\n               * Tell the canvas entries to render their portion of the waveform\n               *\n               * @param {number[]} peaks Peaks data\n               * @param {number} absmax Maximum peak value (absolute)\n               * @param {number} halfH Half the height of the waveform\n               * @param {number} offsetY Offset to the top\n               * @param {number} start The x-offset of the beginning of the area that\n               * should be rendered\n               * @param {number} end The x-offset of the end of the area that\n               * should be rendered\n               * @param {channelIndex} channelIndex The channel index of the line drawn\n               */\n\n            }, {\n              key: \"drawLine\",\n              value: function drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n                var _this6 = this;\n\n                var _ref3 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n                    waveColor = _ref3.waveColor,\n                    progressColor = _ref3.progressColor;\n\n                this.canvases.forEach(function (entry, i) {\n                  _this6.setFillStyles(entry, waveColor, progressColor);\n\n                  _this6.applyCanvasTransforms(entry, _this6.params.vertical);\n\n                  entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n                });\n              }\n              /**\n               * Draw a rectangle on the multi-canvas\n               *\n               * @param {number} x X-position of the rectangle\n               * @param {number} y Y-position of the rectangle\n               * @param {number} width Width of the rectangle\n               * @param {number} height Height of the rectangle\n               * @param {number} radius Radius of the rectangle\n               * @param {channelIndex} channelIndex The channel index of the bar drawn\n               */\n\n            }, {\n              key: \"fillRect\",\n              value: function fillRect(x, y, width, height, radius, channelIndex) {\n                var startCanvas = Math.floor(x / this.maxCanvasWidth);\n                var endCanvas = Math.min(Math.ceil((x + width) / this.maxCanvasWidth) + 1, this.canvases.length);\n                var i = startCanvas;\n\n                for (i; i < endCanvas; i++) {\n                  var entry = this.canvases[i];\n                  var leftOffset = i * this.maxCanvasWidth;\n                  var intersection = {\n                    x1: Math.max(x, i * this.maxCanvasWidth),\n                    y1: y,\n                    x2: Math.min(x + width, i * this.maxCanvasWidth + entry.wave.width),\n                    y2: y + height\n                  };\n\n                  if (intersection.x1 < intersection.x2) {\n                    var _ref4 = this.params.splitChannelsOptions.channelColors[channelIndex] || {},\n                        waveColor = _ref4.waveColor,\n                        progressColor = _ref4.progressColor;\n\n                    this.setFillStyles(entry, waveColor, progressColor);\n                    this.applyCanvasTransforms(entry, this.params.vertical);\n                    entry.fillRects(intersection.x1 - leftOffset, intersection.y1, intersection.x2 - intersection.x1, intersection.y2 - intersection.y1, radius);\n                  }\n                }\n              }\n              /**\n               * Returns whether to hide the channel from being drawn based on params.\n               *\n               * @param {number} channelIndex The index of the current channel.\n               * @returns {bool} True to hide the channel, false to draw.\n               */\n\n            }, {\n              key: \"hideChannel\",\n              value: function hideChannel(channelIndex) {\n                return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n              }\n              /**\n               * Performs preparation tasks and calculations which are shared by `drawBars`\n               * and `drawWave`\n               *\n               * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n               * split channel rendering\n               * @param {number} channelIndex The index of the current channel. Normally\n               * should be 0\n               * @param {number?} start The x-offset of the beginning of the area that\n               * should be rendered. If this isn't set only a flat line is rendered\n               * @param {number?} end The x-offset of the end of the area that should be\n               * rendered\n               * @param {function} fn The render function to call, e.g. `drawWave`\n               * @param {number} drawIndex The index of the current channel after filtering.\n               * @param {number?} normalizedMax Maximum modulation value across channels for use with relativeNormalization. Ignored when undefined\n               * @returns {void}\n               */\n\n            }, {\n              key: \"prepareDraw\",\n              value: function prepareDraw(peaks, channelIndex, start, end, fn, drawIndex, normalizedMax) {\n                var _this7 = this;\n\n                return util.frame(function () {\n                  // Split channels and call this function with the channelIndex set\n                  if (peaks[0] instanceof Array) {\n                    var channels = peaks;\n\n                    if (_this7.params.splitChannels) {\n                      var filteredChannels = channels.filter(function (c, i) {\n                        return !_this7.hideChannel(i);\n                      });\n\n                      if (!_this7.params.splitChannelsOptions.overlay) {\n                        _this7.setHeight(Math.max(filteredChannels.length, 1) * _this7.params.height * _this7.params.pixelRatio);\n                      }\n\n                      var overallAbsMax;\n\n                      if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.relativeNormalization) {\n                        // calculate maximum peak across channels to use for normalization\n                        overallAbsMax = util.max(channels.map(function (channelPeaks) {\n                          return util.absMax(channelPeaks);\n                        }));\n                      }\n\n                      return channels.forEach(function (channelPeaks, i) {\n                        return _this7.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks), overallAbsMax);\n                      });\n                    }\n\n                    peaks = channels[0];\n                  } // Return and do not draw channel peaks if hidden.\n\n\n                  if (_this7.hideChannel(channelIndex)) {\n                    return;\n                  } // calculate maximum modulation value, either from the barHeight\n                  // parameter or if normalize=true from the largest value in the peak\n                  // set\n\n\n                  var absmax = 1 / _this7.params.barHeight;\n\n                  if (_this7.params.normalize) {\n                    absmax = normalizedMax === undefined ? util.absMax(peaks) : normalizedMax;\n                  } // Bar wave draws the bottom only as a reflection of the top,\n                  // so we don't need negative values\n\n\n                  var hasMinVals = [].some.call(peaks, function (val) {\n                    return val < 0;\n                  });\n                  var height = _this7.params.height * _this7.params.pixelRatio;\n                  var halfH = height / 2;\n                  var offsetY = height * drawIndex || 0; // Override offsetY if overlay is true\n\n                  if (_this7.params.splitChannelsOptions && _this7.params.splitChannelsOptions.overlay) {\n                    offsetY = 0;\n                  }\n\n                  return fn({\n                    absmax: absmax,\n                    hasMinVals: hasMinVals,\n                    height: height,\n                    offsetY: offsetY,\n                    halfH: halfH,\n                    peaks: peaks,\n                    channelIndex: channelIndex\n                  });\n                })();\n              }\n              /**\n               * Set the fill styles for a certain entry (wave and progress)\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {string} waveColor Wave color to draw this entry\n               * @param {string} progressColor Progress color to draw this entry\n               */\n\n            }, {\n              key: \"setFillStyles\",\n              value: function setFillStyles(entry) {\n                var waveColor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.params.waveColor;\n                var progressColor = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.params.progressColor;\n                entry.setFillStyles(waveColor, progressColor);\n              }\n              /**\n               * Set the canvas transforms for a certain entry (wave and progress)\n               *\n               * @param {CanvasEntry} entry Target entry\n               * @param {boolean} vertical Whether to render the waveform vertically\n               */\n\n            }, {\n              key: \"applyCanvasTransforms\",\n              value: function applyCanvasTransforms(entry) {\n                var vertical = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n                entry.applyCanvasTransforms(vertical);\n              }\n              /**\n               * Return image data of the multi-canvas\n               *\n               * When using a `type` of `'blob'`, this will return a `Promise`.\n               *\n               * @param {string} format='image/png' An optional value of a format type.\n               * @param {number} quality=0.92 An optional value between 0 and 1.\n               * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n               * @return {string|string[]|Promise} When using the default `'dataURL'`\n               * `type` this returns a single data URL or an array of data URLs,\n               * one for each canvas. When using the `'blob'` `type` this returns a\n               * `Promise` that resolves with an array of `Blob` instances, one for each\n               * canvas.\n               */\n\n            }, {\n              key: \"getImage\",\n              value: function getImage(format, quality, type) {\n                if (type === 'blob') {\n                  return Promise.all(this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  }));\n                } else if (type === 'dataURL') {\n                  var images = this.canvases.map(function (entry) {\n                    return entry.getImage(format, quality, type);\n                  });\n                  return images.length > 1 ? images : images[0];\n                }\n              }\n              /**\n               * Render the new progress\n               *\n               * @param {number} position X-offset of progress position in pixels\n               */\n\n            }, {\n              key: \"updateProgress\",\n              value: function updateProgress(position) {\n                this.style(this.progressWave, {\n                  width: position + 'px'\n                });\n              }\n            }]);\n\n            return MultiCanvas;\n          }(_drawer.default);\n\n          exports[\"default\"] = MultiCanvas;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/mediaelement-webaudio.js\":\n        /*!**************************************!*\\\n          !*** ./src/mediaelement-webaudio.js ***!\n          \\**************************************/\n\n        /***/\n        function srcMediaelementWebaudioJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var _mediaelement = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement */\n          \"./src/mediaelement.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          function _get() {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                  return desc.get.call(arguments.length < 3 ? target : receiver);\n                }\n\n                return desc.value;\n              };\n            }\n\n            return _get.apply(this, arguments);\n          }\n\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n\n            return object;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n           * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n           * buffer the entire file in one request, and you still get the filtering and scripting functionality\n           * of the webaudio API.\n           * Note that in order to use range requests and prevent buffering, you must provide peak data.\n           *\n           * @since 3.2.0\n           */\n\n\n          var MediaElementWebAudio = /*#__PURE__*/function (_MediaElement) {\n            _inherits(MediaElementWebAudio, _MediaElement);\n\n            var _super = _createSuper(MediaElementWebAudio);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function MediaElementWebAudio(params) {\n              var _this;\n\n              _classCallCheck(this, MediaElementWebAudio);\n\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /** @private */\n\n              _this.sourceMediaElement = null;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(MediaElementWebAudio, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n              }\n              /**\n               * Private method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @private\n               */\n\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"_load\", this).call(this, media, peaks, preload);\n\n                this.createMediaElementSource(media);\n              }\n              /**\n               * Create MediaElementSource node\n               *\n               * @since 3.2.0\n               * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n               */\n\n            }, {\n              key: \"createMediaElementSource\",\n              value: function createMediaElementSource(mediaElement) {\n                this.sourceMediaElement = this.ac.createMediaElementSource(mediaElement);\n                this.sourceMediaElement.connect(this.analyser);\n              }\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.resumeAudioContext();\n                return _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"play\", this).call(this, start, end);\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                _get(_getPrototypeOf(MediaElementWebAudio.prototype), \"destroy\", this).call(this);\n\n                this.destroyWebAudio();\n              }\n            }]);\n\n            return MediaElementWebAudio;\n          }(_mediaelement.default);\n\n          exports[\"default\"] = MediaElementWebAudio;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/mediaelement.js\":\n        /*!*****************************!*\\\n          !*** ./src/mediaelement.js ***!\n          \\*****************************/\n\n        /***/\n        function srcMediaelementJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var _webaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./webaudio */\n          \"./src/webaudio.js\"));\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          function _get() {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              _get = Reflect.get;\n            } else {\n              _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                  return desc.get.call(arguments.length < 3 ? target : receiver);\n                }\n\n                return desc.value;\n              };\n            }\n\n            return _get.apply(this, arguments);\n          }\n\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = _getPrototypeOf(object);\n              if (object === null) break;\n            }\n\n            return object;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n          /**\n           * MediaElement backend\n           */\n\n\n          var MediaElement = /*#__PURE__*/function (_WebAudio) {\n            _inherits(MediaElement, _WebAudio);\n\n            var _super = _createSuper(MediaElement);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function MediaElement(params) {\n              var _this;\n\n              _classCallCheck(this, MediaElement);\n\n              _this = _super.call(this, params);\n              /** @private */\n\n              _this.params = params;\n              /**\n               * Initially a dummy media element to catch errors. Once `_load` is\n               * called, this will contain the actual `HTMLMediaElement`.\n               * @private\n               */\n\n              _this.media = {\n                currentTime: 0,\n                duration: 0,\n                paused: true,\n                playbackRate: 1,\n                play: function play() {},\n                pause: function pause() {},\n                volume: 0\n              };\n              /** @private */\n\n              _this.mediaType = params.mediaType.toLowerCase();\n              /** @private */\n\n              _this.elementPosition = params.elementPosition;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** @private */\n\n              _this.volume = 1;\n              /** @private */\n\n              _this.isMuted = false;\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.onPlayEnd = null;\n              /** @private */\n\n              _this.mediaListeners = {};\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(MediaElement, [{\n              key: \"init\",\n              value: function init() {\n                this.setPlaybackRate(this.params.audioRate);\n                this.createTimer();\n              }\n              /**\n               * Attach event listeners to media element.\n               */\n\n            }, {\n              key: \"_setupMediaListeners\",\n              value: function _setupMediaListeners() {\n                var _this2 = this;\n\n                this.mediaListeners.error = function () {\n                  _this2.fireEvent('error', 'Error loading media element');\n                };\n\n                this.mediaListeners.canplay = function () {\n                  _this2.fireEvent('canplay');\n                };\n\n                this.mediaListeners.ended = function () {\n                  _this2.fireEvent('finish');\n                }; // listen to and relay play, pause and seeked events to enable\n                // playback control from the external media element\n\n\n                this.mediaListeners.play = function () {\n                  _this2.fireEvent('play');\n                };\n\n                this.mediaListeners.pause = function () {\n                  _this2.fireEvent('pause');\n                };\n\n                this.mediaListeners.seeked = function (event) {\n                  _this2.fireEvent('seek');\n                };\n\n                this.mediaListeners.volumechange = function (event) {\n                  _this2.isMuted = _this2.media.muted;\n\n                  if (_this2.isMuted) {\n                    _this2.volume = 0;\n                  } else {\n                    _this2.volume = _this2.media.volume;\n                  }\n\n                  _this2.fireEvent('volume');\n                }; // reset event listeners\n\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  _this2.media.removeEventListener(id, _this2.mediaListeners[id]);\n\n                  _this2.media.addEventListener(id, _this2.mediaListeners[id]);\n                });\n              }\n              /**\n               * Create a timer to provide a more precise `audioprocess` event.\n               */\n\n            }, {\n              key: \"createTimer\",\n              value: function createTimer() {\n                var _this3 = this;\n\n                var onAudioProcess = function onAudioProcess() {\n                  if (_this3.isPaused()) {\n                    return;\n                  }\n\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime()); // Call again in the next frame\n\n\n                  util.frame(onAudioProcess)();\n                };\n\n                this.on('play', onAudioProcess); // Update the progress one more time to prevent it from being stuck in\n                // case of lower framerates\n\n                this.on('pause', function () {\n                  _this3.fireEvent('audioprocess', _this3.getCurrentTime());\n                });\n              }\n              /**\n               * Create media element with url as its source,\n               * and append to container element.\n               *\n               * @param {string} url Path to media file\n               * @param {HTMLElement} container HTML element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `url` argument is not a valid media\n               * element.\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(url, container, peaks, preload) {\n                var media = document.createElement(this.mediaType);\n                media.controls = this.params.mediaControls;\n                media.autoplay = this.params.autoplay || false;\n                media.preload = preload == null ? 'auto' : preload;\n                media.src = url;\n                media.style.width = '100%';\n                var prevMedia = container.querySelector(this.mediaType);\n\n                if (prevMedia) {\n                  container.removeChild(prevMedia);\n                }\n\n                container.appendChild(media);\n\n                this._load(media, peaks, preload);\n              }\n              /**\n               * Load existing media element.\n               *\n               * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               */\n\n            }, {\n              key: \"loadElt\",\n              value: function loadElt(elt, peaks) {\n                elt.controls = this.params.mediaControls;\n                elt.autoplay = this.params.autoplay || false;\n\n                this._load(elt, peaks, elt.preload);\n              }\n              /**\n               * Method called by both `load` (from url)\n               * and `loadElt` (existing media element) methods.\n               *\n               * @param {HTMLMediaElement} media HTML5 Audio or Video element\n               * @param {number[]|Number.<Array[]>} peaks Array of peak data\n               * @param {string} preload HTML 5 preload attribute value\n               * @throws Will throw an error if the `media` argument is not a valid media\n               * element.\n               * @private\n               */\n\n            }, {\n              key: \"_load\",\n              value: function _load(media, peaks, preload) {\n                // verify media element is valid\n                if (!(media instanceof HTMLMediaElement) || typeof media.addEventListener === 'undefined') {\n                  throw new Error('media parameter is not a valid media element');\n                } // load must be called manually on iOS, otherwise peaks won't draw\n                // until a user interaction triggers load --> 'ready' event\n                //\n                // note that we avoid calling media.load here when given peaks and preload == 'none'\n                // as this almost always triggers some browser fetch of the media.\n\n\n                if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n                  // Resets the media element and restarts the media resource. Any\n                  // pending events are discarded. How much media data is fetched is\n                  // still affected by the preload attribute.\n                  media.load();\n                }\n\n                this.media = media;\n\n                this._setupMediaListeners();\n\n                this.peaks = peaks;\n                this.onPlayEnd = null;\n                this.buffer = null;\n                this.isMuted = media.muted;\n                this.setPlaybackRate(this.playbackRate);\n                this.setVolume(this.volume);\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Media paused or not\n               */\n\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return !this.media || this.media.paused;\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n\n                var duration = (this.buffer || this.media).duration;\n\n                if (duration >= Infinity) {\n                  // streaming audio\n                  duration = this.media.seekable.end(0);\n                }\n\n                return duration;\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} Current time\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.media && this.media.currentTime;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Current position\n               */\n\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.getCurrentTime() / this.getDuration() || 0;\n              }\n              /**\n               * Get the audio source playback rate.\n               *\n               * @return {number} Playback rate\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate || this.media.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value Playback rate\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                this.playbackRate = value || 1;\n                this.media.playbackRate = this.playbackRate;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start) {\n                if (start != null && !isNaN(start)) {\n                  this.media.currentTime = start;\n                }\n\n                this.clearPlayEnd();\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop, relative to the beginning of a clip.\n               * @emits MediaElement#play\n               * @return {Promise} Result\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                this.seekTo(start);\n                var promise = this.media.play();\n                end && this.setPlayEnd(end);\n                return promise;\n              }\n              /**\n               * Pauses the loaded audio.\n               *\n               * @emits MediaElement#pause\n               * @return {Promise} Result\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                var promise;\n\n                if (this.media) {\n                  promise = this.media.pause();\n                }\n\n                this.clearPlayEnd();\n                return promise;\n              }\n              /**\n               * Set the play end\n               *\n               * @param {number} end Where to end\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                var _this4 = this;\n\n                this.clearPlayEnd();\n\n                this._onPlayEnd = function (time) {\n                  if (time >= end) {\n                    _this4.pause();\n\n                    _this4.seekTo(end);\n                  }\n                };\n\n                this.on('audioprocess', this._onPlayEnd);\n              }\n              /** @private */\n\n            }, {\n              key: \"clearPlayEnd\",\n              value: function clearPlayEnd() {\n                if (this._onPlayEnd) {\n                  this.un('audioprocess', this._onPlayEnd);\n                  this._onPlayEnd = null;\n                }\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into\n               * <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n               * arrays of peaks consisting of (max, min) values for each subrange.\n               */\n\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.buffer) {\n                  return _get(_getPrototypeOf(MediaElement.prototype), \"getPeaks\", this).call(this, length, first, last);\n                }\n\n                return this.peaks || [];\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  if (!this.media.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n\n                  return this.media.setSinkId(deviceId);\n                }\n\n                return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.volume;\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.volume = value; // no need to change when it's already at that volume\n\n                if (this.media.volume !== this.volume) {\n                  this.media.volume = this.volume;\n                }\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @since 4.0.0\n               * @param {boolean} muted Specify `true` to mute audio.\n               */\n\n            }, {\n              key: \"setMute\",\n              value: function setMute(muted) {\n                // This causes a volume change to be emitted too through the\n                // volumechange event listener.\n                this.isMuted = this.media.muted = muted;\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               *\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                var _this5 = this;\n\n                this.pause();\n                this.unAll();\n                this.destroyed = true; // cleanup media event listeners\n\n                Object.keys(this.mediaListeners).forEach(function (id) {\n                  if (_this5.media) {\n                    _this5.media.removeEventListener(id, _this5.mediaListeners[id]);\n                  }\n                });\n\n                if (this.params.removeMediaElementOnDestroy && this.media && this.media.parentNode) {\n                  this.media.parentNode.removeChild(this.media);\n                }\n\n                this.media = null;\n              }\n            }]);\n\n            return MediaElement;\n          }(_webaudio.default);\n\n          exports[\"default\"] = MediaElement;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/peakcache.js\":\n        /*!**************************!*\\\n          !*** ./src/peakcache.js ***!\n          \\**************************/\n\n        /***/\n        function srcPeakcacheJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          /**\n           * Caches the decoded peaks data to improve rendering speed for large audio\n           *\n           * Is used if the option parameter `partialRender` is set to `true`\n           */\n\n\n          var PeakCache = /*#__PURE__*/function () {\n            /**\n             * Instantiate cache\n             */\n            function PeakCache() {\n              _classCallCheck(this, PeakCache);\n\n              this.clearPeakCache();\n            }\n            /**\n             * Empty the cache\n             */\n\n\n            _createClass(PeakCache, [{\n              key: \"clearPeakCache\",\n              value: function clearPeakCache() {\n                /**\n                 * Flat array with entries that are always in pairs to mark the\n                 * beginning and end of each subrange.  This is a convenience so we can\n                 * iterate over the pairs for easy set difference operations.\n                 * @private\n                 */\n                this.peakCacheRanges = [];\n                /**\n                 * Length of the entire cachable region, used for resetting the cache\n                 * when this changes (zoom events, for instance).\n                 * @private\n                 */\n\n                this.peakCacheLength = -1;\n              }\n              /**\n               * Add a range of peaks to the cache\n               *\n               * @param {number} length The length of the range\n               * @param {number} start The x offset of the start of the range\n               * @param {number} end The x offset of the end of the range\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n\n            }, {\n              key: \"addRangeToPeakCache\",\n              value: function addRangeToPeakCache(length, start, end) {\n                if (length != this.peakCacheLength) {\n                  this.clearPeakCache();\n                  this.peakCacheLength = length;\n                } // Return ranges that weren't in the cache before the call.\n\n\n                var uncachedRanges = [];\n                var i = 0; // Skip ranges before the current start.\n\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] < start) {\n                  i++;\n                } // If |i| is even, |start| falls after an existing range.  Otherwise,\n                // |start| falls between an existing range, and the uncached region\n                // starts when we encounter the next node in |peakCacheRanges| or\n                // |end|, whichever comes first.\n\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(start);\n                }\n\n                while (i < this.peakCacheRanges.length && this.peakCacheRanges[i] <= end) {\n                  uncachedRanges.push(this.peakCacheRanges[i]);\n                  i++;\n                } // If |i| is even, |end| is after all existing ranges.\n\n\n                if (i % 2 == 0) {\n                  uncachedRanges.push(end);\n                } // Filter out the 0-length ranges.\n\n\n                uncachedRanges = uncachedRanges.filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Merge the two ranges together, uncachedRanges will either contain\n                // wholly new points, or duplicates of points in peakCacheRanges.  If\n                // duplicates are detected, remove both and extend the range.\n\n                this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n                this.peakCacheRanges = this.peakCacheRanges.sort(function (a, b) {\n                  return a - b;\n                }).filter(function (item, pos, arr) {\n                  if (pos == 0) {\n                    return item != arr[pos + 1];\n                  } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                  }\n\n                  return item != arr[pos - 1] && item != arr[pos + 1];\n                }); // Push the uncached ranges into an array of arrays for ease of\n                // iteration in the functions that call this.\n\n                var uncachedRangePairs = [];\n\n                for (i = 0; i < uncachedRanges.length; i += 2) {\n                  uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n                }\n\n                return uncachedRangePairs;\n              }\n              /**\n               * For testing\n               *\n               * @return {Number.<Array[]>} Array with arrays of numbers\n               */\n\n            }, {\n              key: \"getCacheRanges\",\n              value: function getCacheRanges() {\n                var peakCacheRangePairs = [];\n                var i;\n\n                for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n                  peakCacheRangePairs.push([this.peakCacheRanges[i], this.peakCacheRanges[i + 1]]);\n                }\n\n                return peakCacheRangePairs;\n              }\n            }]);\n\n            return PeakCache;\n          }();\n\n          exports[\"default\"] = PeakCache;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/absMax.js\":\n        /*!****************************!*\\\n          !*** ./src/util/absMax.js ***!\n          \\****************************/\n\n        /***/\n        function srcUtilAbsMaxJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = absMax;\n\n          var _max = _interopRequireDefault(__webpack_require__(\n          /*! ./max */\n          \"./src/util/max.js\"));\n\n          var _min = _interopRequireDefault(__webpack_require__(\n          /*! ./min */\n          \"./src/util/min.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /**\r\n           * Get the largest absolute value in an array\r\n           *\r\n           * @param   {Array} values Array of numbers\r\n           * @returns {Number} Largest number found\r\n           * @example console.log(max([-3, 2, 1]), max([-3, 2, 4])); // logs 3 4\r\n           * @since 4.3.0\r\n           */\n\n\n          function absMax(values) {\n            var max = (0, _max.default)(values);\n            var min = (0, _min.default)(values);\n            return -min > max ? -min : max;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/clamp.js\":\n        /*!***************************!*\\\n          !*** ./src/util/clamp.js ***!\n          \\***************************/\n\n        /***/\n        function srcUtilClampJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = clamp;\n          /**\n           * Returns a number limited to the given range.\n           *\n           * @param {number} val The number to be limited to a range\n           * @param {number} min The lower boundary of the limit range\n           * @param {number} max The upper boundary of the limit range\n           * @returns {number} A number in the range [min, max]\n           */\n\n          function clamp(val, min, max) {\n            return Math.min(Math.max(min, val), max);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/fetch.js\":\n        /*!***************************!*\\\n          !*** ./src/util/fetch.js ***!\n          \\***************************/\n\n        /***/\n        function srcUtilFetchJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = fetchFile;\n\n          var _observer = _interopRequireDefault(__webpack_require__(\n          /*! ./observer */\n          \"./src/util/observer.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          var ProgressHandler = /*#__PURE__*/function () {\n            /**\n             * Instantiate ProgressHandler\n             *\n             * @param {Observer} instance The `fetchFile` observer instance.\n             * @param {Number} contentLength Content length.\n             * @param {Response} response Response object.\n             */\n            function ProgressHandler(instance, contentLength, response) {\n              _classCallCheck(this, ProgressHandler);\n\n              this.instance = instance;\n              this.instance._reader = response.body.getReader();\n              this.total = parseInt(contentLength, 10);\n              this.loaded = 0;\n            }\n            /**\n             * A method that is called once, immediately after the `ReadableStream``\n             * is constructed.\n             *\n             * @param {ReadableStreamDefaultController} controller Controller instance\n             *     used to control the stream.\n             */\n\n\n            _createClass(ProgressHandler, [{\n              key: \"start\",\n              value: function start(controller) {\n                var _this = this;\n\n                var read = function read() {\n                  // instance._reader.read() returns a promise that resolves\n                  // when a value has been received\n                  _this.instance._reader.read().then(function (_ref) {\n                    var done = _ref.done,\n                        value = _ref.value; // result objects contain two properties:\n                    // done  - true if the stream has already given you all its data.\n                    // value - some data. Always undefined when done is true.\n\n                    if (done) {\n                      // ensure onProgress called when content-length=0\n                      if (_this.total === 0) {\n                        _this.instance.onProgress.call(_this.instance, {\n                          loaded: _this.loaded,\n                          total: _this.total,\n                          lengthComputable: false\n                        });\n                      } // no more data needs to be consumed, close the stream\n\n\n                      controller.close();\n                      return;\n                    }\n\n                    _this.loaded += value.byteLength;\n\n                    _this.instance.onProgress.call(_this.instance, {\n                      loaded: _this.loaded,\n                      total: _this.total,\n                      lengthComputable: !(_this.total === 0)\n                    }); // enqueue the next data chunk into our target stream\n\n\n                    controller.enqueue(value);\n                    read();\n                  }).catch(function (error) {\n                    controller.error(error);\n                  });\n                };\n\n                read();\n              }\n            }]);\n\n            return ProgressHandler;\n          }();\n          /**\n           * Load a file using `fetch`.\n           *\n           * @param {object} options Request options to use. See example below.\n           * @returns {Observer} Observer instance\n           * @example\n           * // default options\n           * let options = {\n           *     url: undefined,\n           *     method: 'GET',\n           *     mode: 'cors',\n           *     credentials: 'same-origin',\n           *     cache: 'default',\n           *     responseType: 'json',\n           *     requestHeaders: [],\n           *     redirect: 'follow',\n           *     referrer: 'client'\n           * };\n           *\n           * // override some options\n           * options.url = '../media/demo.wav';\n          \n           * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n           * options.responseType = 'arraybuffer';\n           *\n           * // make fetch call\n           * let request = util.fetchFile(options);\n           *\n           * // listen for events\n           * request.on('progress', e => {\n           *     console.log('progress', e);\n           * });\n           *\n           * request.on('success', data => {\n           *     console.log('success!', data);\n           * });\n           *\n           * request.on('error', e => {\n           *     console.warn('fetchFile error: ', e);\n           * });\n           */\n\n\n          function fetchFile(options) {\n            if (!options) {\n              throw new Error('fetch options missing');\n            } else if (!options.url) {\n              throw new Error('fetch url missing');\n            }\n\n            var instance = new _observer.default();\n            var fetchHeaders = new Headers();\n            var fetchRequest = new Request(options.url); // add ability to abort\n\n            instance.controller = new AbortController(); // check if headers have to be added\n\n            if (options && options.requestHeaders) {\n              // add custom request headers\n              options.requestHeaders.forEach(function (header) {\n                fetchHeaders.append(header.key, header.value);\n              });\n            } // parse fetch options\n\n\n            var responseType = options.responseType || 'json';\n            var fetchOptions = {\n              method: options.method || 'GET',\n              headers: fetchHeaders,\n              mode: options.mode || 'cors',\n              credentials: options.credentials || 'same-origin',\n              cache: options.cache || 'default',\n              redirect: options.redirect || 'follow',\n              referrer: options.referrer || 'client',\n              signal: instance.controller.signal\n            };\n            fetch(fetchRequest, fetchOptions).then(function (response) {\n              // store response reference\n              instance.response = response;\n              var progressAvailable = true;\n\n              if (!response.body) {\n                // ReadableStream is not yet supported in this browser\n                // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n                progressAvailable = false;\n              } // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n\n\n              var contentLength = response.headers.get('content-length');\n\n              if (contentLength === null) {\n                // Content-Length server response header missing.\n                // Don't evaluate download progress if we can't compare against a total size\n                // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n                progressAvailable = false;\n              }\n\n              if (!progressAvailable) {\n                // not able to check download progress so skip it\n                return response;\n              } // fire progress event when during load\n\n\n              instance.onProgress = function (e) {\n                instance.fireEvent('progress', e);\n              };\n\n              return new Response(new ReadableStream(new ProgressHandler(instance, contentLength, response)), fetchOptions);\n            }).then(function (response) {\n              var errMsg;\n\n              if (response.ok) {\n                switch (responseType) {\n                  case 'arraybuffer':\n                    return response.arrayBuffer();\n\n                  case 'json':\n                    return response.json();\n\n                  case 'blob':\n                    return response.blob();\n\n                  case 'text':\n                    return response.text();\n\n                  default:\n                    errMsg = 'Unknown responseType: ' + responseType;\n                    break;\n                }\n              }\n\n              if (!errMsg) {\n                errMsg = 'HTTP error status: ' + response.status;\n              }\n\n              throw new Error(errMsg);\n            }).then(function (response) {\n              instance.fireEvent('success', response);\n            }).catch(function (error) {\n              instance.fireEvent('error', error);\n            }); // return the fetch request\n\n            instance.fetchRequest = fetchRequest;\n            return instance;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/frame.js\":\n        /*!***************************!*\\\n          !*** ./src/util/frame.js ***!\n          \\***************************/\n\n        /***/\n        function srcUtilFrameJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = frame;\n\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__(\n          /*! ./request-animation-frame */\n          \"./src/util/request-animation-frame.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /**\n           * Create a function which will be called at the next requestAnimationFrame\n           * cycle\n           *\n           * @param {function} func The function to call\n           *\n           * @return {func} The function wrapped within a requestAnimationFrame\n           */\n\n\n          function frame(func) {\n            return function () {\n              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n              }\n\n              return (0, _requestAnimationFrame.default)(function () {\n                return func.apply(void 0, args);\n              });\n            };\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/get-id.js\":\n        /*!****************************!*\\\n          !*** ./src/util/get-id.js ***!\n          \\****************************/\n\n        /***/\n        function srcUtilGetIdJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = getId;\n          /**\n           * Get a random prefixed ID\n           *\n           * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n           * @returns {String} Random prefixed ID\n           * @example\n           * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n           *\n           * let prefix = 'foo-';\n           * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n           */\n\n          function getId(prefix) {\n            if (prefix === undefined) {\n              prefix = 'wavesurfer_';\n            }\n\n            return prefix + Math.random().toString(32).substring(2);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/index.js\":\n        /*!***************************!*\\\n          !*** ./src/util/index.js ***!\n          \\***************************/\n\n        /***/\n        function srcUtilIndexJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          Object.defineProperty(exports, \"Observer\", {\n            enumerable: true,\n            get: function get() {\n              return _observer.default;\n            }\n          });\n          Object.defineProperty(exports, \"absMax\", {\n            enumerable: true,\n            get: function get() {\n              return _absMax.default;\n            }\n          });\n          Object.defineProperty(exports, \"clamp\", {\n            enumerable: true,\n            get: function get() {\n              return _clamp.default;\n            }\n          });\n          Object.defineProperty(exports, \"debounce\", {\n            enumerable: true,\n            get: function get() {\n              return _debounce.default;\n            }\n          });\n          Object.defineProperty(exports, \"fetchFile\", {\n            enumerable: true,\n            get: function get() {\n              return _fetch.default;\n            }\n          });\n          Object.defineProperty(exports, \"frame\", {\n            enumerable: true,\n            get: function get() {\n              return _frame.default;\n            }\n          });\n          Object.defineProperty(exports, \"getId\", {\n            enumerable: true,\n            get: function get() {\n              return _getId.default;\n            }\n          });\n          Object.defineProperty(exports, \"ignoreSilenceMode\", {\n            enumerable: true,\n            get: function get() {\n              return _silenceMode.default;\n            }\n          });\n          Object.defineProperty(exports, \"max\", {\n            enumerable: true,\n            get: function get() {\n              return _max.default;\n            }\n          });\n          Object.defineProperty(exports, \"min\", {\n            enumerable: true,\n            get: function get() {\n              return _min.default;\n            }\n          });\n          Object.defineProperty(exports, \"preventClick\", {\n            enumerable: true,\n            get: function get() {\n              return _preventClick.default;\n            }\n          });\n          Object.defineProperty(exports, \"requestAnimationFrame\", {\n            enumerable: true,\n            get: function get() {\n              return _requestAnimationFrame.default;\n            }\n          });\n          Object.defineProperty(exports, \"style\", {\n            enumerable: true,\n            get: function get() {\n              return _style.default;\n            }\n          });\n          Object.defineProperty(exports, \"withOrientation\", {\n            enumerable: true,\n            get: function get() {\n              return _orientation.default;\n            }\n          });\n\n          var _getId = _interopRequireDefault(__webpack_require__(\n          /*! ./get-id */\n          \"./src/util/get-id.js\"));\n\n          var _max = _interopRequireDefault(__webpack_require__(\n          /*! ./max */\n          \"./src/util/max.js\"));\n\n          var _min = _interopRequireDefault(__webpack_require__(\n          /*! ./min */\n          \"./src/util/min.js\"));\n\n          var _absMax = _interopRequireDefault(__webpack_require__(\n          /*! ./absMax */\n          \"./src/util/absMax.js\"));\n\n          var _observer = _interopRequireDefault(__webpack_require__(\n          /*! ./observer */\n          \"./src/util/observer.js\"));\n\n          var _style = _interopRequireDefault(__webpack_require__(\n          /*! ./style */\n          \"./src/util/style.js\"));\n\n          var _requestAnimationFrame = _interopRequireDefault(__webpack_require__(\n          /*! ./request-animation-frame */\n          \"./src/util/request-animation-frame.js\"));\n\n          var _frame = _interopRequireDefault(__webpack_require__(\n          /*! ./frame */\n          \"./src/util/frame.js\"));\n\n          var _debounce = _interopRequireDefault(__webpack_require__(\n          /*! debounce */\n          \"./node_modules/debounce/index.js\"));\n\n          var _preventClick = _interopRequireDefault(__webpack_require__(\n          /*! ./prevent-click */\n          \"./src/util/prevent-click.js\"));\n\n          var _fetch = _interopRequireDefault(__webpack_require__(\n          /*! ./fetch */\n          \"./src/util/fetch.js\"));\n\n          var _clamp = _interopRequireDefault(__webpack_require__(\n          /*! ./clamp */\n          \"./src/util/clamp.js\"));\n\n          var _orientation = _interopRequireDefault(__webpack_require__(\n          /*! ./orientation */\n          \"./src/util/orientation.js\"));\n\n          var _silenceMode = _interopRequireDefault(__webpack_require__(\n          /*! ./silence-mode */\n          \"./src/util/silence-mode.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n          /***/\n\n        },\n\n        /***/\n        \"./src/util/max.js\":\n        /*!*************************!*\\\n          !*** ./src/util/max.js ***!\n          \\*************************/\n\n        /***/\n        function srcUtilMaxJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = max;\n          /**\n           * Get the largest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Largest number found\n           * @example console.log(max([1, 2, 3])); // logs 3\n           */\n\n          function max(values) {\n            var largest = -Infinity;\n            Object.keys(values).forEach(function (i) {\n              if (values[i] > largest) {\n                largest = values[i];\n              }\n            });\n            return largest;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/min.js\":\n        /*!*************************!*\\\n          !*** ./src/util/min.js ***!\n          \\*************************/\n\n        /***/\n        function srcUtilMinJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = min;\n          /**\n           * Get the smallest value\n           *\n           * @param   {Array} values Array of numbers\n           * @returns {Number} Smallest number found\n           * @example console.log(min([1, 2, 3])); // logs 1\n           */\n\n          function min(values) {\n            var smallest = Number(Infinity);\n            Object.keys(values).forEach(function (i) {\n              if (values[i] < smallest) {\n                smallest = values[i];\n              }\n            });\n            return smallest;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/observer.js\":\n        /*!******************************!*\\\n          !*** ./src/util/observer.js ***!\n          \\******************************/\n\n        /***/\n        function srcUtilObserverJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          /**\n           * @typedef {Object} ListenerDescriptor\n           * @property {string} name The name of the event\n           * @property {function} callback The callback\n           * @property {function} un The function to call to remove the listener\n           */\n\n          /**\n           * Observer class\n           */\n\n\n          var Observer = /*#__PURE__*/function () {\n            /**\n             * Instantiate Observer\n             */\n            function Observer() {\n              _classCallCheck(this, Observer);\n              /**\n               * @private\n               * @todo Initialise the handlers here already and remove the conditional\n               * assignment in `on()`\n               */\n\n\n              this._disabledEventEmissions = [];\n              this.handlers = null;\n            }\n            /**\n             * Attach a handler function for an event.\n             *\n             * @param {string} event Name of the event to listen to\n             * @param {function} fn The callback to trigger when the event is fired\n             * @return {ListenerDescriptor} The event descriptor\n             */\n\n\n            _createClass(Observer, [{\n              key: \"on\",\n              value: function on(event, fn) {\n                var _this = this;\n\n                if (!this.handlers) {\n                  this.handlers = {};\n                }\n\n                var handlers = this.handlers[event];\n\n                if (!handlers) {\n                  handlers = this.handlers[event] = [];\n                }\n\n                handlers.push(fn); // Return an event descriptor\n\n                return {\n                  name: event,\n                  callback: fn,\n                  un: function un(e, fn) {\n                    return _this.un(e, fn);\n                  }\n                };\n              }\n              /**\n               * Remove an event handler.\n               *\n               * @param {string} event Name of the event the listener that should be\n               * removed listens to\n               * @param {function} fn The callback that should be removed\n               */\n\n            }, {\n              key: \"un\",\n              value: function un(event, fn) {\n                if (!this.handlers) {\n                  return;\n                }\n\n                var handlers = this.handlers[event];\n                var i;\n\n                if (handlers) {\n                  if (fn) {\n                    for (i = handlers.length - 1; i >= 0; i--) {\n                      if (handlers[i] == fn) {\n                        handlers.splice(i, 1);\n                      }\n                    }\n                  } else {\n                    handlers.length = 0;\n                  }\n                }\n              }\n              /**\n               * Remove all event handlers.\n               */\n\n            }, {\n              key: \"unAll\",\n              value: function unAll() {\n                this.handlers = null;\n              }\n              /**\n               * Attach a handler to an event. The handler is executed at most once per\n               * event type.\n               *\n               * @param {string} event The event to listen to\n               * @param {function} handler The callback that is only to be called once\n               * @return {ListenerDescriptor} The event descriptor\n               */\n\n            }, {\n              key: \"once\",\n              value: function once(event, handler) {\n                var _this2 = this;\n\n                var fn = function fn() {\n                  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = arguments[_key];\n                  }\n                  /*  eslint-disable no-invalid-this */\n\n\n                  handler.apply(_this2, args);\n                  /*  eslint-enable no-invalid-this */\n\n                  setTimeout(function () {\n                    _this2.un(event, fn);\n                  }, 0);\n                };\n\n                return this.on(event, fn);\n              }\n              /**\n               * Disable firing a list of events by name. When specified, event handlers for any event type\n               * passed in here will not be called.\n               *\n               * @since 4.0.0\n               * @param {string[]} eventNames an array of event names to disable emissions for\n               * @example\n               * // disable seek and interaction events\n               * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n               */\n\n            }, {\n              key: \"setDisabledEventEmissions\",\n              value: function setDisabledEventEmissions(eventNames) {\n                this._disabledEventEmissions = eventNames;\n              }\n              /**\n               * plugins borrow part of this class without calling the constructor,\n               * so we have to be careful about _disabledEventEmissions\n               */\n\n            }, {\n              key: \"_isDisabledEventEmission\",\n              value: function _isDisabledEventEmission(event) {\n                return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n              }\n              /**\n               * Manually fire an event\n               *\n               * @param {string} event The event to fire manually\n               * @param {...any} args The arguments with which to call the listeners\n               */\n\n            }, {\n              key: \"fireEvent\",\n              value: function fireEvent(event) {\n                for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                  args[_key2 - 1] = arguments[_key2];\n                }\n\n                if (!this.handlers || this._isDisabledEventEmission(event)) {\n                  return;\n                }\n\n                var handlers = this.handlers[event];\n                handlers && handlers.forEach(function (fn) {\n                  fn.apply(void 0, args);\n                });\n              }\n            }]);\n\n            return Observer;\n          }();\n\n          exports[\"default\"] = Observer;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/orientation.js\":\n        /*!*********************************!*\\\n          !*** ./src/util/orientation.js ***!\n          \\*********************************/\n\n        /***/\n        function srcUtilOrientationJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = withOrientation;\n          var verticalPropMap = {\n            width: 'height',\n            height: 'width',\n            overflowX: 'overflowY',\n            overflowY: 'overflowX',\n            clientWidth: 'clientHeight',\n            clientHeight: 'clientWidth',\n            clientX: 'clientY',\n            clientY: 'clientX',\n            scrollWidth: 'scrollHeight',\n            scrollLeft: 'scrollTop',\n            offsetLeft: 'offsetTop',\n            offsetTop: 'offsetLeft',\n            offsetHeight: 'offsetWidth',\n            offsetWidth: 'offsetHeight',\n            left: 'top',\n            right: 'bottom',\n            top: 'left',\n            bottom: 'right',\n            borderRightStyle: 'borderBottomStyle',\n            borderRightWidth: 'borderBottomWidth',\n            borderRightColor: 'borderBottomColor'\n          };\n          /**\n           * Convert a horizontally-oriented property name to a vertical one.\n           *\n           * @param {string} prop A property name\n           * @param {bool} vertical Whether the element is oriented vertically\n           * @returns {string} prop, converted appropriately\n           */\n\n          function mapProp(prop, vertical) {\n            if (Object.prototype.hasOwnProperty.call(verticalPropMap, prop)) {\n              return vertical ? verticalPropMap[prop] : prop;\n            } else {\n              return prop;\n            }\n          }\n\n          var isProxy = Symbol(\"isProxy\");\n          /**\n           * Returns an appropriately oriented object based on vertical.\n           * If vertical is true, attribute getting and setting will be mapped through\n           * verticalPropMap, so that e.g. getting the object's .width will give its\n           * .height instead.\n           * Certain methods of an oriented object will return oriented objects as well.\n           * Oriented objects can't be added to the DOM directly since they are Proxy objects\n           * and thus fail typechecks. Use domElement to get the actual element for this.\n           *\n           * @param {object} target The object to be wrapped and oriented\n           * @param {bool} vertical Whether the element is oriented vertically\n           * @returns {Proxy} An oriented object with attr translation via verticalAttrMap\n           * @since 5.0.0\n           */\n\n          function withOrientation(target, vertical) {\n            if (target[isProxy]) {\n              return target;\n            } else {\n              return new Proxy(target, {\n                get: function get(obj, prop, receiver) {\n                  if (prop === isProxy) {\n                    return true;\n                  } else if (prop === 'domElement') {\n                    return obj;\n                  } else if (prop === 'style') {\n                    return withOrientation(obj.style, vertical);\n                  } else if (prop === 'canvas') {\n                    return withOrientation(obj.canvas, vertical);\n                  } else if (prop === 'getBoundingClientRect') {\n                    return function () {\n                      return withOrientation(obj.getBoundingClientRect.apply(obj, arguments), vertical);\n                    };\n                  } else if (prop === 'getContext') {\n                    return function () {\n                      return withOrientation(obj.getContext.apply(obj, arguments), vertical);\n                    };\n                  } else {\n                    var value = obj[mapProp(prop, vertical)];\n                    return typeof value == 'function' ? value.bind(obj) : value;\n                  }\n                },\n                set: function set(obj, prop, value) {\n                  obj[mapProp(prop, vertical)] = value;\n                  return true;\n                }\n              });\n            }\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/prevent-click.js\":\n        /*!***********************************!*\\\n          !*** ./src/util/prevent-click.js ***!\n          \\***********************************/\n\n        /***/\n        function srcUtilPreventClickJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = preventClick;\n          /**\n           * Stops propagation of click event and removes event listener\n           *\n           * @private\n           * @param {object} event The click event\n           */\n\n          function preventClickHandler(event) {\n            event.stopPropagation();\n            document.body.removeEventListener('click', preventClickHandler, true);\n          }\n          /**\n           * Starts listening for click event and prevent propagation\n           *\n           * @param {object} values Values\n           */\n\n\n          function preventClick(values) {\n            document.body.addEventListener('click', preventClickHandler, true);\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/request-animation-frame.js\":\n        /*!*********************************************!*\\\n          !*** ./src/util/request-animation-frame.js ***!\n          \\*********************************************/\n\n        /***/\n        function srcUtilRequestAnimationFrameJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n          /* eslint-disable valid-jsdoc */\n\n          /**\n           * Returns the `requestAnimationFrame` function for the browser, or a shim with\n           * `setTimeout` if the function is not found\n           *\n           * @return {function} Available `requestAnimationFrame` function for the browser\n           */\n\n          var _default = (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n            return setTimeout(callback, 1000 / 60);\n          }).bind(window);\n\n          exports[\"default\"] = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/silence-mode.js\":\n        /*!**********************************!*\\\n          !*** ./src/util/silence-mode.js ***!\n          \\**********************************/\n\n        /***/\n        function srcUtilSilenceModeJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = ignoreSilenceMode;\n          /**\n           * Ignores device silence mode when using the `WebAudio` backend.\n           *\n           * Many mobile devices contain a hardware button to mute the ringtone for incoming\n           * calls and messages. Unfortunately, on some platforms like iOS, this also mutes\n           * wavesurfer's audio when using the `WebAudio` backend. This function creates a\n           * temporary `<audio>` element that makes sure the WebAudio backend keeps playing\n           * when muting the device ringer.\n           *\n           * @since 5.2.0\n           */\n\n          function ignoreSilenceMode() {\n            // Set the src to a short bit of url encoded as a silent mp3\n            // NOTE The silence MP3 must be high quality, when web audio sounds are played\n            // in parallel the web audio sound is mixed to match the bitrate of the html sound\n            // 0.01 seconds of silence VBR220-260 Joint Stereo 859B\n            var audioData = \"data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==\"; // disable iOS Airplay (setting the attribute in js doesn't work)\n\n            var tmp = document.createElement(\"div\");\n            tmp.innerHTML = '<audio x-webkit-airplay=\"deny\"></audio>';\n            var audioSilentMode = tmp.children.item(0);\n            audioSilentMode.src = audioData;\n            audioSilentMode.preload = \"auto\";\n            audioSilentMode.type = \"audio/mpeg\";\n            audioSilentMode.disableRemotePlayback = true; // play\n\n            audioSilentMode.play(); // cleanup\n\n            audioSilentMode.remove();\n            tmp.remove();\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/util/style.js\":\n        /*!***************************!*\\\n          !*** ./src/util/style.js ***!\n          \\***************************/\n\n        /***/\n        function srcUtilStyleJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = style;\n          /**\n           * Apply a map of styles to an element\n           *\n           * @param {HTMLElement} el The element that the styles will be applied to\n           * @param {Object} styles The map of propName: attribute, both are used as-is\n           *\n           * @return {HTMLElement} el\n           */\n\n          function style(el, styles) {\n            Object.keys(styles).forEach(function (prop) {\n              if (el.style[prop] !== styles[prop]) {\n                el.style[prop] = styles[prop];\n              }\n            });\n            return el;\n          }\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/wavesurfer.js\":\n        /*!***************************!*\\\n          !*** ./src/wavesurfer.js ***!\n          \\***************************/\n\n        /***/\n        function srcWavesurferJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          var _drawer = _interopRequireDefault(__webpack_require__(\n          /*! ./drawer.multicanvas */\n          \"./src/drawer.multicanvas.js\"));\n\n          var _webaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./webaudio */\n          \"./src/webaudio.js\"));\n\n          var _mediaelement = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement */\n          \"./src/mediaelement.js\"));\n\n          var _peakcache = _interopRequireDefault(__webpack_require__(\n          /*! ./peakcache */\n          \"./src/peakcache.js\"));\n\n          var _mediaelementWebaudio = _interopRequireDefault(__webpack_require__(\n          /*! ./mediaelement-webaudio */\n          \"./src/mediaelement-webaudio.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n              });\n            } else {\n              obj[key] = value;\n            }\n\n            return obj;\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          /*\n           * This work is licensed under a BSD-3-Clause License.\n           */\n\n          /** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */\n\n          /** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */\n\n          /** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */\n\n          /** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */\n\n          /** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */\n\n          /** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */\n\n          /** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */\n\n          /**\n           * @typedef {Object} WavesurferParams\n           * @property {AudioContext} audioContext=null Use your own previously\n           * initialized AudioContext or leave blank.\n           * @property {number} audioRate=1 Speed at which to play audio. Lower number is\n           * slower.\n           * @property {ScriptProcessorNode} audioScriptProcessor=null Use your own previously\n           * initialized ScriptProcessorNode or leave blank.\n           * @property {boolean} autoCenter=true If a scrollbar is present, center the\n           * waveform on current progress\n           * @property {number} autoCenterRate=5 If autoCenter is active, rate at which the\n           * waveform is centered\n           * @property {boolean} autoCenterImmediately=false If autoCenter is active, immediately\n           * center waveform on current progress\n           * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'|'MediaElementWebAudio'` In most cases\n           * you don't have to set this manually. MediaElement is a fallback for unsupported browsers.\n           * MediaElementWebAudio allows to use WebAudio API also with big audio files, loading audio like with\n           * MediaElement backend (HTML5 audio tag). You have to use the same methods of MediaElement backend for loading and\n           * playback, giving also peaks, so the audio data are not decoded. In this way you can use WebAudio features, like filters,\n           * also with audio with big duration. For example:\n           * ` wavesurfer.load(url | HTMLMediaElement, peaks, preload, duration);\n           *   wavesurfer.play();\n           *   wavesurfer.setFilter(customFilter);\n           * `\n           * @property {string} backgroundColor=null Change background color of the\n           * waveform container.\n           * @property {number} barHeight=1 The height of the wave bars.\n           * @property {number} barRadius=0 The radius of the wave bars. Makes bars rounded\n           * @property {number} barGap=null The optional spacing between bars of the wave,\n           * if not provided will be calculated in legacy format.\n           * @property {number} barWidth=null Draw the waveform using bars.\n           * @property {number} barMinHeight=null If specified, draw at least a bar of this height,\n           * eliminating waveform gaps\n           * @property {boolean} closeAudioContext=false Close and nullify all audio\n           * contexts when the destroy method is called.\n           * @property {!string|HTMLElement} container CSS selector or HTML element where\n           * the waveform should be drawn. This is the only required parameter.\n           * @property {string} cursorColor='#333' The fill color of the cursor indicating\n           * the playhead position.\n           * @property {number} cursorWidth=1 Measured in pixels.\n           * @property {object} drawingContextAttributes={desynchronized: false} Drawing context\n           * attributes.\n           * @property {number} duration=null Optional audio length so pre-rendered peaks\n           * can be display immediately for example.\n           * @property {boolean} fillParent=true Whether to fill the entire container or\n           * draw only according to `minPxPerSec`.\n           * @property {boolean} forceDecode=false Force decoding of audio using web audio\n           * when zooming to get a more detailed waveform.\n           * @property {number} height=128 The height of the waveform. Measured in\n           * pixels.\n           * @property {boolean} hideScrollbar=false Whether to hide the horizontal\n           * scrollbar when one would normally be shown.\n           * @property {boolean} hideCursor=false Whether to hide the mouse cursor\n           * when one would normally be shown by default.\n           * @property {boolean} ignoreSilenceMode=false If true, ignores device silence mode\n           * when using the `WebAudio` backend.\n           * @property {boolean} interact=true Whether the mouse interaction will be\n           * enabled at initialization. You can switch this parameter at any time later\n           * on.\n           * @property {boolean} loopSelection=true (Use with regions plugin) Enable\n           * looping of selected regions\n           * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in\n           * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next\n           * even integer). If the waveform is longer than this value, additional canvases\n           * will be used to render the waveform, which is useful for very large waveforms\n           * that may be too wide for browsers to draw on a single canvas.\n           * @property {boolean} mediaControls=false (Use with backend `MediaElement` or `MediaElementWebAudio`)\n           * this enables the native controls for the media element\n           * @property {string} mediaType='audio' (Use with backend `MediaElement` or `MediaElementWebAudio`)\n           * `'audio'|'video'` ('video' only for `MediaElement`)\n           * @property {number} minPxPerSec=20 Minimum number of pixels per second of\n           * audio.\n           * @property {boolean} normalize=false If true, normalize by the maximum peak\n           * instead of 1.0.\n           * @property {boolean} partialRender=false Use the PeakCache to improve\n           * rendering speed of large waveforms\n           * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to\n           * calculate display\n           * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to\n           * register during instantiation, they will be directly initialised unless they\n           * are added with the `deferInit` property set to true.\n           * @property {string} progressColor='#555' The fill color of the part of the\n           * waveform behind the cursor. When `progressColor` and `waveColor` are the same\n           * the progress wave is not rendered at all.\n           * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the\n           * media element in the DOM when the player is destroyed. This is useful when\n           * reusing an existing media element via the `loadMediaElement` method.\n           * @property {Object} renderer=MultiCanvas Can be used to inject a custom\n           * renderer.\n           * @property {boolean|number} responsive=false If set to `true` resize the\n           * waveform, when the window is resized. This is debounced with a `100ms`\n           * timeout by default. If this parameter is a number it represents that timeout.\n           * @property {boolean} rtl=false If set to `true`, renders waveform from\n           * right-to-left.\n           * @property {boolean} scrollParent=false Whether to scroll the container with a\n           * lengthy waveform. Otherwise the waveform is shrunk to the container width\n           * (see fillParent).\n           * @property {number} skipLength=2 Number of seconds to skip with the\n           * skipForward() and skipBackward() methods.\n           * @property {boolean} splitChannels=false Render with separate waveforms for\n           * the channels of the audio\n           * @property {SplitChannelOptions} splitChannelsOptions={} Options for splitChannel rendering\n           * @property {boolean} vertical=false Render the waveform vertically instead of horizontally.\n           * @property {string} waveColor='#999' The fill color of the waveform after the\n           * cursor.\n           * @property {object} xhr={} XHR options. For example:\n           * `let xhr = {\n           *     cache: 'default',\n           *     mode: 'cors',\n           *     method: 'GET',\n           *     credentials: 'same-origin',\n           *     redirect: 'follow',\n           *     referrer: 'client',\n           *     requestHeaders: [\n           *         {\n           *             key: 'Authorization',\n           *             value: 'my-token'\n           *         }\n           *     ]\n           * };`\n           */\n\n          /**\n           * @typedef {Object} PluginDefinition\n           * @desc The Object used to describe a plugin\n           * @example wavesurfer.addPlugin(pluginDefinition);\n           * @property {string} name The name of the plugin, the plugin instance will be\n           * added as a property to the wavesurfer instance under this name\n           * @property {?Object} staticProps The properties that should be added to the\n           * wavesurfer instance as static properties\n           * @property {?boolean} deferInit Don't initialise plugin\n           * automatically\n           * @property {Object} params={} The plugin parameters, they are the first parameter\n           * passed to the plugin class constructor function\n           * @property {PluginClass} instance The plugin instance factory, is called with\n           * the dependency specified in extends. Returns the plugin class.\n           */\n\n          /**\n           * @typedef {Object} SplitChannelOptions\n           * @desc parameters applied when splitChannels option is true\n           * @property {boolean} overlay=false determines whether channels are rendered on top of each other or on separate tracks\n           * @property {object} channelColors={} object describing color for each channel. Example:\n           * {\n           *     0: {\n           *         progressColor: 'green',\n           *         waveColor: 'pink'\n           *     },\n           *     1: {\n           *         progressColor: 'orange',\n           *         waveColor: 'purple'\n           *     }\n           * }\n           * @property {number[]} filterChannels=[] indexes of channels to be hidden from rendering\n           * @property {boolean} relativeNormalization=false determines whether\n           * normalization is done per channel or maintains proportionality between\n           * channels. Only applied when normalize and splitChannels are both true.\n           * @since 4.3.0\n           */\n\n          /**\n           * @interface PluginClass\n           *\n           * @desc This is the interface which is implemented by all plugin classes. Note\n           * that this only turns into an observer after being passed through\n           * `wavesurfer.addPlugin`.\n           *\n           * @extends {Observer}\n           */\n\n\n          var PluginClass = /*#__PURE__*/function () {\n            /**\n             * Construct the plugin\n             *\n             * @param {Object} params={} The plugin params (specific to the plugin)\n             * @param {Object} ws The wavesurfer instance\n             */\n            function PluginClass(params, ws) {\n              _classCallCheck(this, PluginClass);\n            }\n            /**\n             * Initialise the plugin\n             *\n             * Start doing something. This is called by\n             * `wavesurfer.initPlugin(pluginName)`\n             */\n\n\n            _createClass(PluginClass, [{\n              key: \"create\",\n              value:\n              /**\n               * Plugin definition factory\n               *\n               * This function must be used to create a plugin definition which can be\n               * used by wavesurfer to correctly instantiate the plugin.\n               *\n               * It returns a `PluginDefinition` object representing the plugin.\n               *\n               * @param {Object} params={} The plugin params (specific to the plugin)\n               */\n              function create(params) {}\n            }, {\n              key: \"init\",\n              value: function init() {}\n              /**\n               * Destroy the plugin instance\n               *\n               * Stop doing something. This is called by\n               * `wavesurfer.destroyPlugin(pluginName)`\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {}\n            }]);\n\n            return PluginClass;\n          }();\n          /**\n           * WaveSurfer core library class\n           *\n           * @extends {Observer}\n           * @example\n           * const params = {\n           *   container: '#waveform',\n           *   waveColor: 'violet',\n           *   progressColor: 'purple'\n           * };\n           *\n           * // initialise like this\n           * const wavesurfer = WaveSurfer.create(params);\n           *\n           * // or like this ...\n           * const wavesurfer = new WaveSurfer(params);\n           * wavesurfer.init();\n           *\n           * // load audio file\n           * wavesurfer.load('example/media/demo.wav');\n           */\n\n\n          var WaveSurfer = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WaveSurfer, _util$Observer);\n\n            var _super = _createSuper(WaveSurfer);\n            /**\n             * Initialise wavesurfer instance\n             *\n             * @param {WavesurferParams} params Instantiation options for wavesurfer\n             * @example\n             * const wavesurfer = new WaveSurfer(params);\n             * @returns {this} Wavesurfer instance\n             */\n\n\n            function WaveSurfer(params) {\n              var _this;\n\n              _classCallCheck(this, WaveSurfer);\n\n              _this = _super.call(this);\n              /**\n               * Extract relevant parameters (or defaults)\n               * @private\n               */\n\n              _defineProperty(_assertThisInitialized(_this), \"defaultParams\", {\n                audioContext: null,\n                audioScriptProcessor: null,\n                audioRate: 1,\n                autoCenter: true,\n                autoCenterRate: 5,\n                autoCenterImmediately: false,\n                backend: 'WebAudio',\n                backgroundColor: null,\n                barHeight: 1,\n                barRadius: 0,\n                barGap: null,\n                barMinHeight: null,\n                container: null,\n                cursorColor: '#333',\n                cursorWidth: 1,\n                dragSelection: true,\n                drawingContextAttributes: {\n                  // Boolean that hints the user agent to reduce the latency\n                  // by desynchronizing the canvas paint cycle from the event\n                  // loop\n                  desynchronized: false\n                },\n                duration: null,\n                fillParent: true,\n                forceDecode: false,\n                height: 128,\n                hideScrollbar: false,\n                hideCursor: false,\n                ignoreSilenceMode: false,\n                interact: true,\n                loopSelection: true,\n                maxCanvasWidth: 4000,\n                mediaContainer: null,\n                mediaControls: false,\n                mediaType: 'audio',\n                minPxPerSec: 20,\n                normalize: false,\n                partialRender: false,\n                pixelRatio: window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n                plugins: [],\n                progressColor: '#555',\n                removeMediaElementOnDestroy: true,\n                renderer: _drawer.default,\n                responsive: false,\n                rtl: false,\n                scrollParent: false,\n                skipLength: 2,\n                splitChannels: false,\n                splitChannelsOptions: {\n                  overlay: false,\n                  channelColors: {},\n                  filterChannels: [],\n                  relativeNormalization: false\n                },\n                vertical: false,\n                waveColor: '#999',\n                xhr: {}\n              });\n\n              _defineProperty(_assertThisInitialized(_this), \"backends\", {\n                MediaElement: _mediaelement.default,\n                WebAudio: _webaudio.default,\n                MediaElementWebAudio: _mediaelementWebaudio.default\n              });\n\n              _defineProperty(_assertThisInitialized(_this), \"util\", util);\n\n              _this.params = Object.assign({}, _this.defaultParams, params);\n              _this.params.splitChannelsOptions = Object.assign({}, _this.defaultParams.splitChannelsOptions, params.splitChannelsOptions);\n              /** @private */\n\n              _this.container = 'string' == typeof params.container ? document.querySelector(_this.params.container) : _this.params.container;\n\n              if (!_this.container) {\n                throw new Error('Container element not found');\n              }\n\n              if (_this.params.mediaContainer == null) {\n                /** @private */\n                _this.mediaContainer = _this.container;\n              } else if (typeof _this.params.mediaContainer == 'string') {\n                /** @private */\n                _this.mediaContainer = document.querySelector(_this.params.mediaContainer);\n              } else {\n                /** @private */\n                _this.mediaContainer = _this.params.mediaContainer;\n              }\n\n              if (!_this.mediaContainer) {\n                throw new Error('Media Container element not found');\n              }\n\n              if (_this.params.maxCanvasWidth <= 1) {\n                throw new Error('maxCanvasWidth must be greater than 1');\n              } else if (_this.params.maxCanvasWidth % 2 == 1) {\n                throw new Error('maxCanvasWidth must be an even number');\n              }\n\n              if (_this.params.rtl === true) {\n                if (_this.params.vertical === true) {\n                  util.style(_this.container, {\n                    transform: 'rotateX(180deg)'\n                  });\n                } else {\n                  util.style(_this.container, {\n                    transform: 'rotateY(180deg)'\n                  });\n                }\n              }\n\n              if (_this.params.backgroundColor) {\n                _this.setBackgroundColor(_this.params.backgroundColor);\n              }\n              /**\n               * @private Used to save the current volume when muting so we can\n               * restore once unmuted\n               * @type {number}\n               */\n\n\n              _this.savedVolume = 0;\n              /**\n               * @private The current muted state\n               * @type {boolean}\n               */\n\n              _this.isMuted = false;\n              /**\n               * @private Will hold a list of event descriptors that need to be\n               * canceled on subsequent loads of audio\n               * @type {Object[]}\n               */\n\n              _this.tmpEvents = [];\n              /**\n               * @private Holds any running audio downloads\n               * @type {Observer}\n               */\n\n              _this.currentRequest = null;\n              /** @private */\n\n              _this.arraybuffer = null;\n              /** @private */\n\n              _this.drawer = null;\n              /** @private */\n\n              _this.backend = null;\n              /** @private */\n\n              _this.peakCache = null; // cache constructor objects\n\n              if (typeof _this.params.renderer !== 'function') {\n                throw new Error('Renderer parameter is invalid');\n              }\n              /**\n               * @private The uninitialised Drawer class\n               */\n\n\n              _this.Drawer = _this.params.renderer;\n              /**\n               * @private The uninitialised Backend class\n               */\n              // Back compat\n\n              if (_this.params.backend == 'AudioElement') {\n                _this.params.backend = 'MediaElement';\n              }\n\n              if ((_this.params.backend == 'WebAudio' || _this.params.backend === 'MediaElementWebAudio') && !_webaudio.default.prototype.supportsWebAudio.call(null)) {\n                _this.params.backend = 'MediaElement';\n              }\n\n              _this.Backend = _this.backends[_this.params.backend];\n              /**\n               * @private map of plugin names that are currently initialised\n               */\n\n              _this.initialisedPluginList = {};\n              /** @private */\n\n              _this.isDestroyed = false;\n              /**\n               * Get the current ready status.\n               *\n               * @example const isReady = wavesurfer.isReady;\n               * @return {boolean}\n               */\n\n              _this.isReady = false; // responsive debounced event listener. If this.params.responsive is not\n              // set, this is never called. Use 100ms or this.params.responsive as\n              // timeout for the debounce function.\n\n              var prevWidth = 0;\n              _this._onResize = util.debounce(function () {\n                if (prevWidth != _this.drawer.wrapper.clientWidth && !_this.params.scrollParent) {\n                  prevWidth = _this.drawer.wrapper.clientWidth;\n\n                  if (prevWidth) {\n                    // redraw only if waveform container is rendered and has a width\n                    _this.drawer.fireEvent('redraw');\n                  }\n                }\n              }, typeof _this.params.responsive === 'number' ? _this.params.responsive : 100);\n              return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n            }\n            /**\n             * Initialise the wave\n             *\n             * @example\n             * var wavesurfer = new WaveSurfer(params);\n             * wavesurfer.init();\n             * @return {this} The wavesurfer instance\n             */\n\n\n            _createClass(WaveSurfer, [{\n              key: \"init\",\n              value: function init() {\n                this.registerPlugins(this.params.plugins);\n                this.createDrawer();\n                this.createBackend();\n                this.createPeakCache();\n                return this;\n              }\n              /**\n               * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n               * this function is called in the init function of wavesurfer\n               *\n               * @param {PluginDefinition[]} plugins An array of plugin definitions\n               * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"registerPlugins\",\n              value: function registerPlugins(plugins) {\n                var _this2 = this; // first instantiate all the plugins\n\n\n                plugins.forEach(function (plugin) {\n                  return _this2.addPlugin(plugin);\n                }); // now run the init functions\n\n                plugins.forEach(function (plugin) {\n                  // call init function of the plugin if deferInit is falsey\n                  // in that case you would manually use initPlugins()\n                  if (!plugin.deferInit) {\n                    _this2.initPlugin(plugin.name);\n                  }\n                });\n                this.fireEvent('plugins-registered', plugins);\n                return this;\n              }\n              /**\n               * Get a map of plugin names that are currently initialised\n               *\n               * @example wavesurfer.getPlugins();\n               * @return {Object} Object with plugin names\n               */\n\n            }, {\n              key: \"getActivePlugins\",\n              value: function getActivePlugins() {\n                return this.initialisedPluginList;\n              }\n              /**\n               * Add a plugin object to wavesurfer\n               *\n               * @param {PluginDefinition} plugin A plugin definition\n               * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n               * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"addPlugin\",\n              value: function addPlugin(plugin) {\n                var _this3 = this;\n\n                if (!plugin.name) {\n                  throw new Error('Plugin does not have a name!');\n                }\n\n                if (!plugin.instance) {\n                  throw new Error(\"Plugin \".concat(plugin.name, \" does not have an instance property!\"));\n                } // staticProps properties are applied to wavesurfer instance\n\n\n                if (plugin.staticProps) {\n                  Object.keys(plugin.staticProps).forEach(function (pluginStaticProp) {\n                    /**\n                     * Properties defined in a plugin definition's `staticProps` property are added as\n                     * staticProps properties of the WaveSurfer instance\n                     */\n                    _this3[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n                  });\n                }\n\n                var Instance = plugin.instance; // turn the plugin instance into an observer\n\n                var observerPrototypeKeys = Object.getOwnPropertyNames(util.Observer.prototype);\n                observerPrototypeKeys.forEach(function (key) {\n                  Instance.prototype[key] = util.Observer.prototype[key];\n                });\n                /**\n                 * Instantiated plugin classes are added as a property of the wavesurfer\n                 * instance\n                 * @type {Object}\n                 */\n\n                this[plugin.name] = new Instance(plugin.params || {}, this);\n                this.fireEvent('plugin-added', plugin.name);\n                return this;\n              }\n              /**\n               * Initialise a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-initialised\n               * @example wavesurfer.initPlugin('minimap');\n               * @return {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"initPlugin\",\n              value: function initPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet!\"));\n                }\n\n                if (this.initialisedPluginList[name]) {\n                  // destroy any already initialised plugins\n                  this.destroyPlugin(name);\n                }\n\n                this[name].init();\n                this.initialisedPluginList[name] = true;\n                this.fireEvent('plugin-initialised', name);\n                return this;\n              }\n              /**\n               * Destroy a plugin\n               *\n               * @param {string} name A plugin name\n               * @emits WaveSurfer#plugin-destroyed\n               * @example wavesurfer.destroyPlugin('minimap');\n               * @returns {this} The wavesurfer instance\n               */\n\n            }, {\n              key: \"destroyPlugin\",\n              value: function destroyPlugin(name) {\n                if (!this[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" has not been added yet and cannot be destroyed!\"));\n                }\n\n                if (!this.initialisedPluginList[name]) {\n                  throw new Error(\"Plugin \".concat(name, \" is not active and cannot be destroyed!\"));\n                }\n\n                if (typeof this[name].destroy !== 'function') {\n                  throw new Error(\"Plugin \".concat(name, \" does not have a destroy function!\"));\n                }\n\n                this[name].destroy();\n                delete this.initialisedPluginList[name];\n                this.fireEvent('plugin-destroyed', name);\n                return this;\n              }\n              /**\n               * Destroy all initialised plugins. Convenience function to use when\n               * wavesurfer is removed\n               *\n               * @private\n               */\n\n            }, {\n              key: \"destroyAllPlugins\",\n              value: function destroyAllPlugins() {\n                var _this4 = this;\n\n                Object.keys(this.initialisedPluginList).forEach(function (name) {\n                  return _this4.destroyPlugin(name);\n                });\n              }\n              /**\n               * Create the drawer and draw the waveform\n               *\n               * @private\n               * @emits WaveSurfer#drawer-created\n               */\n\n            }, {\n              key: \"createDrawer\",\n              value: function createDrawer() {\n                var _this5 = this;\n\n                this.drawer = new this.Drawer(this.container, this.params);\n                this.drawer.init();\n                this.fireEvent('drawer-created', this.drawer);\n\n                if (this.params.responsive !== false) {\n                  window.addEventListener('resize', this._onResize, true);\n                  window.addEventListener('orientationchange', this._onResize, true);\n                }\n\n                this.drawer.on('redraw', function () {\n                  _this5.drawBuffer();\n\n                  _this5.drawer.progress(_this5.backend.getPlayedPercents());\n                }); // Click-to-seek\n\n                this.drawer.on('click', function (e, progress) {\n                  setTimeout(function () {\n                    return _this5.seekTo(progress);\n                  }, 0);\n                }); // Relay the scroll event from the drawer\n\n                this.drawer.on('scroll', function (e) {\n                  if (_this5.params.partialRender) {\n                    _this5.drawBuffer();\n                  }\n\n                  _this5.fireEvent('scroll', e);\n                });\n              }\n              /**\n               * Create the backend\n               *\n               * @private\n               * @emits WaveSurfer#backend-created\n               */\n\n            }, {\n              key: \"createBackend\",\n              value: function createBackend() {\n                var _this6 = this;\n\n                if (this.backend) {\n                  this.backend.destroy();\n                }\n\n                this.backend = new this.Backend(this.params);\n                this.backend.init();\n                this.fireEvent('backend-created', this.backend);\n                this.backend.on('finish', function () {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n                  _this6.fireEvent('finish');\n                });\n                this.backend.on('play', function () {\n                  return _this6.fireEvent('play');\n                });\n                this.backend.on('pause', function () {\n                  return _this6.fireEvent('pause');\n                });\n                this.backend.on('audioprocess', function (time) {\n                  _this6.drawer.progress(_this6.backend.getPlayedPercents());\n\n                  _this6.fireEvent('audioprocess', time);\n                }); // only needed for MediaElement and MediaElementWebAudio backend\n\n                if (this.params.backend === 'MediaElement' || this.params.backend === 'MediaElementWebAudio') {\n                  this.backend.on('seek', function () {\n                    _this6.drawer.progress(_this6.backend.getPlayedPercents());\n                  });\n                  this.backend.on('volume', function () {\n                    var newVolume = _this6.getVolume();\n\n                    _this6.fireEvent('volume', newVolume);\n\n                    if (_this6.backend.isMuted !== _this6.isMuted) {\n                      _this6.isMuted = _this6.backend.isMuted;\n\n                      _this6.fireEvent('mute', _this6.isMuted);\n                    }\n                  });\n                }\n              }\n              /**\n               * Create the peak cache\n               *\n               * @private\n               */\n\n            }, {\n              key: \"createPeakCache\",\n              value: function createPeakCache() {\n                if (this.params.partialRender) {\n                  this.peakCache = new _peakcache.default();\n                }\n              }\n              /**\n               * Get the duration of the audio clip\n               *\n               * @example const duration = wavesurfer.getDuration();\n               * @return {number} Duration in seconds\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                return this.backend.getDuration();\n              }\n              /**\n               * Get the current playback position\n               *\n               * @example const currentTime = wavesurfer.getCurrentTime();\n               * @return {number} Playback position in seconds\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.backend.getCurrentTime();\n              }\n              /**\n               * Set the current play time in seconds.\n               *\n               * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n               * seconds, 60 means 1 minute\n               */\n\n            }, {\n              key: \"setCurrentTime\",\n              value: function setCurrentTime(seconds) {\n                if (seconds >= this.getDuration()) {\n                  this.seekTo(1);\n                } else {\n                  this.seekTo(seconds / this.getDuration());\n                }\n              }\n              /**\n               * Starts playback from the current position. Optional start and end\n               * measured in seconds can be used to set the range of audio to play.\n               *\n               * @param {?number} start Position to start at\n               * @param {?number} end Position to end at\n               * @emits WaveSurfer#interaction\n               * @return {Promise} Result of the backend play method\n               * @example\n               * // play from second 1 to 5\n               * wavesurfer.play(1, 5);\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                var _this7 = this;\n\n                if (this.params.ignoreSilenceMode) {\n                  // ignores device hardware silence mode\n                  util.ignoreSilenceMode();\n                }\n\n                this.fireEvent('interaction', function () {\n                  return _this7.play(start, end);\n                });\n                return this.backend.play(start, end);\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} position Position (in seconds) to stop at\n               * @version 3.3.0\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(position) {\n                this.backend.setPlayEnd(position);\n              }\n              /**\n               * Stops and pauses playback\n               *\n               * @example wavesurfer.pause();\n               * @return {Promise} Result of the backend pause method\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                if (!this.backend.isPaused()) {\n                  return this.backend.pause();\n                }\n              }\n              /**\n               * Toggle playback\n               *\n               * @example wavesurfer.playPause();\n               * @return {Promise} Result of the backend play or pause method\n               */\n\n            }, {\n              key: \"playPause\",\n              value: function playPause() {\n                return this.backend.isPaused() ? this.play() : this.pause();\n              }\n              /**\n               * Get the current playback state\n               *\n               * @example const isPlaying = wavesurfer.isPlaying();\n               * @return {boolean} False if paused, true if playing\n               */\n\n            }, {\n              key: \"isPlaying\",\n              value: function isPlaying() {\n                return !this.backend.isPaused();\n              }\n              /**\n               * Skip backward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipBackward();\n               */\n\n            }, {\n              key: \"skipBackward\",\n              value: function skipBackward(seconds) {\n                this.skip(-seconds || -this.params.skipLength);\n              }\n              /**\n               * Skip forward\n               *\n               * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n               * is used\n               * @example wavesurfer.skipForward();\n               */\n\n            }, {\n              key: \"skipForward\",\n              value: function skipForward(seconds) {\n                this.skip(seconds || this.params.skipLength);\n              }\n              /**\n               * Skip a number of seconds from the current position (use a negative value\n               * to go backwards).\n               *\n               * @param {number} offset Amount to skip back or forwards\n               * @example\n               * // go back 2 seconds\n               * wavesurfer.skip(-2);\n               */\n\n            }, {\n              key: \"skip\",\n              value: function skip(offset) {\n                var duration = this.getDuration() || 1;\n                var position = this.getCurrentTime() || 0;\n                position = Math.max(0, Math.min(duration, position + (offset || 0)));\n                this.seekAndCenter(position / duration);\n              }\n              /**\n               * Seeks to a position and centers the view\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @example\n               * // seek and go to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n\n            }, {\n              key: \"seekAndCenter\",\n              value: function seekAndCenter(progress) {\n                this.seekTo(progress);\n                this.drawer.recenter(progress);\n              }\n              /**\n               * Seeks to a position\n               *\n               * @param {number} progress Between 0 (=beginning) and 1 (=end)\n               * @emits WaveSurfer#interaction\n               * @emits WaveSurfer#seek\n               * @example\n               * // seek to the middle of the audio\n               * wavesurfer.seekTo(0.5);\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(progress) {\n                var _this8 = this; // return an error if progress is not a number between 0 and 1\n\n\n                if (typeof progress !== 'number' || !isFinite(progress) || progress < 0 || progress > 1) {\n                  throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');\n                }\n\n                this.fireEvent('interaction', function () {\n                  return _this8.seekTo(progress);\n                });\n                var isWebAudioBackend = this.params.backend === 'WebAudio';\n                var paused = this.backend.isPaused();\n\n                if (isWebAudioBackend && !paused) {\n                  this.backend.pause();\n                } // avoid small scrolls while paused seeking\n\n\n                var oldScrollParent = this.params.scrollParent;\n                this.params.scrollParent = false;\n                this.backend.seekTo(progress * this.getDuration());\n                this.drawer.progress(progress);\n\n                if (isWebAudioBackend && !paused) {\n                  this.backend.play();\n                }\n\n                this.params.scrollParent = oldScrollParent;\n                this.fireEvent('seek', progress);\n              }\n              /**\n               * Stops and goes to the beginning.\n               *\n               * @example wavesurfer.stop();\n               */\n\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.pause();\n                this.seekTo(0);\n                this.drawer.progress(0);\n              }\n              /**\n               * Sets the ID of the audio device to use for output and returns a Promise.\n               *\n               * @param {string} deviceId String value representing underlying output\n               * device\n               * @returns {Promise} `Promise` that resolves to `undefined` when there are\n               * no errors detected.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                return this.backend.setSinkId(deviceId);\n              }\n              /**\n               * Set the playback volume.\n               *\n               * @param {number} newVolume A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               * @emits WaveSurfer#volume\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(newVolume) {\n                this.backend.setVolume(newVolume);\n                this.fireEvent('volume', newVolume);\n              }\n              /**\n               * Get the playback volume.\n               *\n               * @return {number} A value between 0 and 1, 0 being no\n               * volume and 1 being full volume.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.backend.getVolume();\n              }\n              /**\n               * Set the playback rate.\n               *\n               * @param {number} rate A positive number. E.g. 0.5 means half the normal\n               * speed, 2 means double speed and so on.\n               * @example wavesurfer.setPlaybackRate(2);\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(rate) {\n                this.backend.setPlaybackRate(rate);\n              }\n              /**\n               * Get the playback rate.\n               *\n               * @return {number} The current playback rate.\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.backend.getPlaybackRate();\n              }\n              /**\n               * Toggle the volume on and off. If not currently muted it will save the\n               * current volume value and turn the volume off. If currently muted then it\n               * will restore the volume to the saved value, and then rest the saved\n               * value.\n               *\n               * @example wavesurfer.toggleMute();\n               */\n\n            }, {\n              key: \"toggleMute\",\n              value: function toggleMute() {\n                this.setMute(!this.isMuted);\n              }\n              /**\n               * Enable or disable muted audio\n               *\n               * @param {boolean} mute Specify `true` to mute audio.\n               * @emits WaveSurfer#volume\n               * @emits WaveSurfer#mute\n               * @example\n               * // unmute\n               * wavesurfer.setMute(false);\n               * console.log(wavesurfer.getMute()) // logs false\n               */\n\n            }, {\n              key: \"setMute\",\n              value: function setMute(mute) {\n                // ignore all muting requests if the audio is already in that state\n                if (mute === this.isMuted) {\n                  this.fireEvent('mute', this.isMuted);\n                  return;\n                }\n\n                if (this.backend.setMute) {\n                  // Backends such as the MediaElement backend have their own handling\n                  // of mute, let them handle it.\n                  this.backend.setMute(mute);\n                  this.isMuted = mute;\n                } else {\n                  if (mute) {\n                    // If currently not muted then save current volume,\n                    // turn off the volume and update the mute properties\n                    this.savedVolume = this.backend.getVolume();\n                    this.backend.setVolume(0);\n                    this.isMuted = true;\n                    this.fireEvent('volume', 0);\n                  } else {\n                    // If currently muted then restore to the saved volume\n                    // and update the mute properties\n                    this.backend.setVolume(this.savedVolume);\n                    this.isMuted = false;\n                    this.fireEvent('volume', this.savedVolume);\n                  }\n                }\n\n                this.fireEvent('mute', this.isMuted);\n              }\n              /**\n               * Get the current mute status.\n               *\n               * @example const isMuted = wavesurfer.getMute();\n               * @return {boolean} Current mute status\n               */\n\n            }, {\n              key: \"getMute\",\n              value: function getMute() {\n                return this.isMuted;\n              }\n              /**\n               * Get the list of current set filters as an array.\n               *\n               * Filters must be set with setFilters method first\n               *\n               * @return {array} List of enabled filters\n               */\n\n            }, {\n              key: \"getFilters\",\n              value: function getFilters() {\n                return this.backend.filters || [];\n              }\n              /**\n               * Toggles `scrollParent` and redraws\n               *\n               * @example wavesurfer.toggleScroll();\n               */\n\n            }, {\n              key: \"toggleScroll\",\n              value: function toggleScroll() {\n                this.params.scrollParent = !this.params.scrollParent;\n                this.drawBuffer();\n              }\n              /**\n               * Toggle mouse interaction\n               *\n               * @example wavesurfer.toggleInteraction();\n               */\n\n            }, {\n              key: \"toggleInteraction\",\n              value: function toggleInteraction() {\n                this.params.interact = !this.params.interact;\n              }\n              /**\n               * Get the fill color of the waveform after the cursor.\n               *\n               * @param {?number} channelIdx Optional index of the channel to get its wave color if splitChannels is true\n               * @return {string|object} A CSS color string, or an array of CSS color strings.\n               */\n\n            }, {\n              key: \"getWaveColor\",\n              value: function getWaveColor() {\n                var channelIdx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n                if (this.params.splitChannelsOptions.channelColors[channelIdx]) {\n                  return this.params.splitChannelsOptions.channelColors[channelIdx].waveColor;\n                }\n\n                return this.params.waveColor;\n              }\n              /**\n               * Set the fill color of the waveform after the cursor.\n               *\n               * @param {string|object} color A CSS color string, or an array of CSS color strings.\n               * @param {?number} channelIdx Optional index of the channel to set its wave color if splitChannels is true\n               * @example wavesurfer.setWaveColor('#ddd');\n               */\n\n            }, {\n              key: \"setWaveColor\",\n              value: function setWaveColor(color) {\n                var channelIdx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n                if (this.params.splitChannelsOptions.channelColors[channelIdx]) {\n                  this.params.splitChannelsOptions.channelColors[channelIdx].waveColor = color;\n                } else {\n                  this.params.waveColor = color;\n                }\n\n                this.drawBuffer();\n              }\n              /**\n               * Get the fill color of the waveform behind the cursor.\n               *\n               * @param {?number} channelIdx Optional index of the channel to get its progress color if splitChannels is true\n               * @return {string|object} A CSS color string, or an array of CSS color strings.\n               */\n\n            }, {\n              key: \"getProgressColor\",\n              value: function getProgressColor() {\n                var channelIdx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n                if (this.params.splitChannelsOptions.channelColors[channelIdx]) {\n                  return this.params.splitChannelsOptions.channelColors[channelIdx].progressColor;\n                }\n\n                return this.params.progressColor;\n              }\n              /**\n               * Set the fill color of the waveform behind the cursor.\n               *\n               * @param {string|object} color A CSS color string, or an array of CSS color strings.\n               * @param {?number} channelIdx Optional index of the channel to set its progress color if splitChannels is true\n               * @example wavesurfer.setProgressColor('#400');\n               */\n\n            }, {\n              key: \"setProgressColor\",\n              value: function setProgressColor(color, channelIdx) {\n                if (this.params.splitChannelsOptions.channelColors[channelIdx]) {\n                  this.params.splitChannelsOptions.channelColors[channelIdx].progressColor = color;\n                } else {\n                  this.params.progressColor = color;\n                }\n\n                this.drawBuffer();\n              }\n              /**\n               * Get the background color of the waveform container.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getBackgroundColor\",\n              value: function getBackgroundColor() {\n                return this.params.backgroundColor;\n              }\n              /**\n               * Set the background color of the waveform container.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setBackgroundColor('#FF00FF');\n               */\n\n            }, {\n              key: \"setBackgroundColor\",\n              value: function setBackgroundColor(color) {\n                this.params.backgroundColor = color;\n                util.style(this.container, {\n                  background: this.params.backgroundColor\n                });\n              }\n              /**\n               * Get the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @return {string} A CSS color string.\n               */\n\n            }, {\n              key: \"getCursorColor\",\n              value: function getCursorColor() {\n                return this.params.cursorColor;\n              }\n              /**\n               * Set the fill color of the cursor indicating the playhead\n               * position.\n               *\n               * @param {string} color A CSS color string.\n               * @example wavesurfer.setCursorColor('#222');\n               */\n\n            }, {\n              key: \"setCursorColor\",\n              value: function setCursorColor(color) {\n                this.params.cursorColor = color;\n                this.drawer.updateCursor();\n              }\n              /**\n               * Get the height of the waveform.\n               *\n               * @return {number} Height measured in pixels.\n               */\n\n            }, {\n              key: \"getHeight\",\n              value: function getHeight() {\n                return this.params.height;\n              }\n              /**\n               * Set the height of the waveform.\n               *\n               * @param {number} height Height measured in pixels.\n               * @example wavesurfer.setHeight(200);\n               */\n\n            }, {\n              key: \"setHeight\",\n              value: function setHeight(height) {\n                this.params.height = height;\n                this.drawer.setHeight(height * this.params.pixelRatio);\n                this.drawBuffer();\n              }\n              /**\n               * Hide channels from being drawn on the waveform if splitting channels.\n               *\n               * For example, if we want to draw only the peaks for the right stereo channel:\n               *\n               * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n               * wavesurfer.load('stereo_audio.mp3');\n               *\n               * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n               *\n               * @param {array} channelIndices Channels to be filtered out from drawing.\n               * @version 4.0.0\n               */\n\n            }, {\n              key: \"setFilteredChannels\",\n              value: function setFilteredChannels(channelIndices) {\n                this.params.splitChannelsOptions.filterChannels = channelIndices;\n                this.drawBuffer();\n              }\n              /**\n               * Get the correct peaks for current wave view-port and render wave\n               *\n               * @private\n               * @emits WaveSurfer#redraw\n               */\n\n            }, {\n              key: \"drawBuffer\",\n              value: function drawBuffer() {\n                var nominalWidth = Math.round(this.getDuration() * this.params.minPxPerSec * this.params.pixelRatio);\n                var parentWidth = this.drawer.getWidth();\n                var width = nominalWidth; // always start at 0 after zooming for scrolling : issue redraw left part\n\n                var start = 0;\n                var end = Math.max(start + parentWidth, width); // Fill container\n\n                if (this.params.fillParent && (!this.params.scrollParent || nominalWidth < parentWidth)) {\n                  width = parentWidth;\n                  start = 0;\n                  end = width;\n                }\n\n                var peaks;\n\n                if (this.params.partialRender) {\n                  var newRanges = this.peakCache.addRangeToPeakCache(width, start, end);\n                  var i;\n\n                  for (i = 0; i < newRanges.length; i++) {\n                    peaks = this.backend.getPeaks(width, newRanges[i][0], newRanges[i][1]);\n                    this.drawer.drawPeaks(peaks, width, newRanges[i][0], newRanges[i][1]);\n                  }\n                } else {\n                  peaks = this.backend.getPeaks(width, start, end);\n                  this.drawer.drawPeaks(peaks, width, start, end);\n                }\n\n                this.fireEvent('redraw', peaks, width);\n              }\n              /**\n               * Horizontally zooms the waveform in and out. It also changes the parameter\n               * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n               * with a falsey parameter will reset the zoom state.\n               *\n               * @param {?number} pxPerSec Number of horizontal pixels per second of\n               * audio, if none is set the waveform returns to unzoomed state\n               * @emits WaveSurfer#zoom\n               * @example wavesurfer.zoom(20);\n               */\n\n            }, {\n              key: \"zoom\",\n              value: function zoom(pxPerSec) {\n                if (!pxPerSec) {\n                  this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n                  this.params.scrollParent = false;\n                } else {\n                  this.params.minPxPerSec = pxPerSec;\n                  this.params.scrollParent = true;\n                }\n\n                this.drawBuffer();\n                this.drawer.progress(this.backend.getPlayedPercents());\n                this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n                this.fireEvent('zoom', pxPerSec);\n              }\n              /**\n               * Decode buffer and load\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer Buffer to process\n               */\n\n            }, {\n              key: \"loadArrayBuffer\",\n              value: function loadArrayBuffer(arraybuffer) {\n                var _this9 = this;\n\n                this.decodeArrayBuffer(arraybuffer, function (data) {\n                  if (!_this9.isDestroyed) {\n                    _this9.loadDecodedBuffer(data);\n                  }\n                });\n              }\n              /**\n               * Directly load an externally decoded AudioBuffer\n               *\n               * @private\n               * @param {AudioBuffer} buffer Buffer to process\n               * @emits WaveSurfer#ready\n               */\n\n            }, {\n              key: \"loadDecodedBuffer\",\n              value: function loadDecodedBuffer(buffer) {\n                this.backend.load(buffer);\n                this.drawBuffer();\n                this.isReady = true;\n                this.fireEvent('ready');\n              }\n              /**\n               * Loads audio data from a Blob or File object\n               *\n               * @param {Blob|File} blob Audio data\n               * @example\n               */\n\n            }, {\n              key: \"loadBlob\",\n              value: function loadBlob(blob) {\n                var _this10 = this; // Create file reader\n\n\n                var reader = new FileReader();\n                reader.addEventListener('progress', function (e) {\n                  return _this10.onProgress(e);\n                });\n                reader.addEventListener('load', function (e) {\n                  return _this10.loadArrayBuffer(e.target.result);\n                });\n                reader.addEventListener('error', function () {\n                  return _this10.fireEvent('error', 'Error reading file');\n                });\n                reader.readAsArrayBuffer(blob);\n                this.empty();\n              }\n              /**\n               * Loads audio and re-renders the waveform.\n               *\n               * @param {string|HTMLMediaElement} url The url of the audio file or the\n               * audio element with the audio\n               * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n               * the audio to render the waveform if this is specified\n               * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n               * `'none'|'metadata'|'auto'` Preload attribute for the media element\n               * @param {?number} duration The duration of the audio. This is used to\n               * render the peaks data in the correct size for the audio duration (as\n               * befits the current `minPxPerSec` and zoom value) without having to decode\n               * the audio.\n               * @returns {void}\n               * @throws Will throw an error if the `url` argument is empty.\n               * @example\n               * // uses fetch or media element to load file (depending on backend)\n               * wavesurfer.load('http://example.com/demo.wav');\n               *\n               * // setting preload attribute with media element backend and supplying\n               * // peaks\n               * wavesurfer.load(\n               *   'http://example.com/demo.wav',\n               *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n               *   true\n               * );\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(url, peaks, preload, duration) {\n                if (!url) {\n                  throw new Error('url parameter cannot be empty');\n                }\n\n                this.empty();\n\n                if (preload) {\n                  // check whether the preload attribute will be usable and if not log\n                  // a warning listing the reasons why not and nullify the variable\n                  var preloadIgnoreReasons = {\n                    \"Preload is not 'auto', 'none' or 'metadata'\": ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n                    'Peaks are not provided': !peaks,\n                    \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\": ['MediaElement', 'MediaElementWebAudio'].indexOf(this.params.backend) === -1,\n                    'Url is not of type string': typeof url !== 'string'\n                  };\n                  var activeReasons = Object.keys(preloadIgnoreReasons).filter(function (reason) {\n                    return preloadIgnoreReasons[reason];\n                  });\n\n                  if (activeReasons.length) {\n                    // eslint-disable-next-line no-console\n                    console.warn('Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' + activeReasons.join('\\n\\t- ')); // stop invalid values from being used\n\n                    preload = null;\n                  }\n                } // loadBuffer(url, peaks, duration) requires that url is a string\n                // but users can pass in a HTMLMediaElement to WaveSurfer\n\n\n                if (this.params.backend === 'WebAudio' && url instanceof HTMLMediaElement) {\n                  url = url.src;\n                }\n\n                switch (this.params.backend) {\n                  case 'WebAudio':\n                    return this.loadBuffer(url, peaks, duration);\n\n                  case 'MediaElement':\n                  case 'MediaElementWebAudio':\n                    return this.loadMediaElement(url, peaks, preload, duration);\n                }\n              }\n              /**\n               * Loads audio using Web Audio buffer backend.\n               *\n               * @private\n               * @emits WaveSurfer#waveform-ready\n               * @param {string} url URL of audio file\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Optional duration of audio file\n               * @returns {void}\n               */\n\n            }, {\n              key: \"loadBuffer\",\n              value: function loadBuffer(url, peaks, duration) {\n                var _this11 = this;\n\n                var load = function load(action) {\n                  if (action) {\n                    _this11.tmpEvents.push(_this11.once('ready', action));\n                  }\n\n                  return _this11.getArrayBuffer(url, function (data) {\n                    return _this11.loadArrayBuffer(data);\n                  });\n                };\n\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                  this.fireEvent('waveform-ready');\n                  this.tmpEvents.push(this.once('interaction', load));\n                } else {\n                  return load();\n                }\n              }\n              /**\n               * Either create a media element, or load an existing media element.\n               *\n               * @private\n               * @emits WaveSurfer#waveform-ready\n               * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n               * existing HTML5 Audio/Video Element\n               * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n               * dependency\n               * @param {?boolean} preload Set to true if the preload attribute of the\n               * audio element should be enabled\n               * @param {?number} duration Optional duration of audio file\n               */\n\n            }, {\n              key: \"loadMediaElement\",\n              value: function loadMediaElement(urlOrElt, peaks, preload, duration) {\n                var _this12 = this;\n\n                var url = urlOrElt;\n\n                if (typeof urlOrElt === 'string') {\n                  this.backend.load(url, this.mediaContainer, peaks, preload);\n                } else {\n                  var elt = urlOrElt;\n                  this.backend.loadElt(elt, peaks); // If peaks are not provided,\n                  // url = element.src so we can get peaks with web audio\n\n                  url = elt.src;\n                }\n\n                this.tmpEvents.push(this.backend.once('canplay', function () {\n                  // ignore when backend was already destroyed\n                  if (!_this12.backend.destroyed) {\n                    _this12.drawBuffer();\n\n                    _this12.isReady = true;\n\n                    _this12.fireEvent('ready');\n                  }\n                }), this.backend.once('error', function (err) {\n                  return _this12.fireEvent('error', err);\n                })); // If peaks are provided, render them and fire the `waveform-ready` event.\n\n                if (peaks) {\n                  this.backend.setPeaks(peaks, duration);\n                  this.drawBuffer();\n                  this.fireEvent('waveform-ready');\n                } // If no pre-decoded peaks are provided, or are provided with\n                // forceDecode flag, attempt to download the audio file and decode it\n                // with Web Audio.\n\n\n                if ((!peaks || this.params.forceDecode) && this.backend.supportsWebAudio()) {\n                  this.getArrayBuffer(url, function (arraybuffer) {\n                    _this12.decodeArrayBuffer(arraybuffer, function (buffer) {\n                      _this12.backend.buffer = buffer;\n\n                      _this12.backend.setPeaks(null);\n\n                      _this12.drawBuffer();\n\n                      _this12.fireEvent('waveform-ready');\n                    });\n                  });\n                }\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {Object} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete\n               */\n\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback) {\n                var _this13 = this;\n\n                if (!this.isDestroyed) {\n                  this.arraybuffer = arraybuffer;\n                  this.backend.decodeArrayBuffer(arraybuffer, function (data) {\n                    // Only use the decoded data if we haven't been destroyed or\n                    // another decode started in the meantime\n                    if (!_this13.isDestroyed && _this13.arraybuffer == arraybuffer) {\n                      callback(data);\n                      _this13.arraybuffer = null;\n                    }\n                  }, function () {\n                    return _this13.fireEvent('error', 'Error decoding audiobuffer');\n                  });\n                }\n              }\n              /**\n               * Load an array buffer using fetch and pass the result to a callback\n               *\n               * @param {string} url The URL of the file object\n               * @param {function} callback The function to call on complete\n               * @returns {util.fetchFile} fetch call\n               * @private\n               */\n\n            }, {\n              key: \"getArrayBuffer\",\n              value: function getArrayBuffer(url, callback) {\n                var _this14 = this;\n\n                var options = Object.assign({\n                  url: url,\n                  responseType: 'arraybuffer'\n                }, this.params.xhr);\n                var request = util.fetchFile(options);\n                this.currentRequest = request;\n                this.tmpEvents.push(request.on('progress', function (e) {\n                  _this14.onProgress(e);\n                }), request.on('success', function (data) {\n                  callback(data);\n                  _this14.currentRequest = null;\n                }), request.on('error', function (e) {\n                  _this14.fireEvent('error', e);\n\n                  _this14.currentRequest = null;\n                }));\n                return request;\n              }\n              /**\n               * Called while the audio file is loading\n               *\n               * @private\n               * @param {Event} e Progress event\n               * @emits WaveSurfer#loading\n               */\n\n            }, {\n              key: \"onProgress\",\n              value: function onProgress(e) {\n                var percentComplete;\n\n                if (e.lengthComputable) {\n                  percentComplete = e.loaded / e.total;\n                } else {\n                  // Approximate progress with an asymptotic\n                  // function, and assume downloads in the 1-3 MB range.\n                  percentComplete = e.loaded / (e.loaded + 1000000);\n                }\n\n                this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n              }\n              /**\n               * Exports PCM data into a JSON array and optionally opens in a new window\n               * as valid JSON Blob instance.\n               *\n               * @param {number} length=1024 The scale in which to export the peaks\n               * @param {number} accuracy=10000\n               * @param {?boolean} noWindow Set to true to disable opening a new\n               * window with the JSON\n               * @param {number} start Start index\n               * @param {number} end End index\n               * @return {Promise} Promise that resolves with array of peaks\n               */\n\n            }, {\n              key: \"exportPCM\",\n              value: function exportPCM(length, accuracy, noWindow, start, end) {\n                length = length || 1024;\n                start = start || 0;\n                accuracy = accuracy || 10000;\n                noWindow = noWindow || false;\n                var peaks = this.backend.getPeaks(length, start, end);\n                var arr = [].map.call(peaks, function (val) {\n                  return Math.round(val * accuracy) / accuracy;\n                });\n                return new Promise(function (resolve, reject) {\n                  if (!noWindow) {\n                    var blobJSON = new Blob([JSON.stringify(arr)], {\n                      type: 'application/json;charset=utf-8'\n                    });\n                    var objURL = URL.createObjectURL(blobJSON);\n                    window.open(objURL);\n                    URL.revokeObjectURL(objURL);\n                  }\n\n                  resolve(arr);\n                });\n              }\n              /**\n               * Save waveform image as data URI.\n               *\n               * The default format is `'image/png'`. Other supported types are\n               * `'image/jpeg'` and `'image/webp'`.\n               *\n               * @param {string} format='image/png' A string indicating the image format.\n               * The default format type is `'image/png'`.\n               * @param {number} quality=1 A number between 0 and 1 indicating the image\n               * quality to use for image formats that use lossy compression such as\n               * `'image/jpeg'`` and `'image/webp'`.\n               * @param {string} type Image data type to return. Either 'dataURL' (default)\n               * or 'blob'.\n               * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n               * a single data URL or an array of data URLs, one for each canvas. When using\n               * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n               * instances, one for each canvas.\n               */\n\n            }, {\n              key: \"exportImage\",\n              value: function exportImage(format, quality, type) {\n                if (!format) {\n                  format = 'image/png';\n                }\n\n                if (!quality) {\n                  quality = 1;\n                }\n\n                if (!type) {\n                  type = 'dataURL';\n                }\n\n                return this.drawer.getImage(format, quality, type);\n              }\n              /**\n               * Cancel any fetch request currently in progress\n               */\n\n            }, {\n              key: \"cancelAjax\",\n              value: function cancelAjax() {\n                if (this.currentRequest && this.currentRequest.controller) {\n                  // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n                  // See: Wavesurfer issue #2042\n                  // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n                  if (this.currentRequest._reader) {\n                    // Ignoring exceptions thrown by call to cancel()\n                    this.currentRequest._reader.cancel().catch(function (err) {});\n                  }\n\n                  this.currentRequest.controller.abort();\n                  this.currentRequest = null;\n                }\n              }\n              /**\n               * @private\n               */\n\n            }, {\n              key: \"clearTmpEvents\",\n              value: function clearTmpEvents() {\n                this.tmpEvents.forEach(function (e) {\n                  return e.un();\n                });\n              }\n              /**\n               * Display empty waveform.\n               */\n\n            }, {\n              key: \"empty\",\n              value: function empty() {\n                if (!this.backend.isPaused()) {\n                  this.stop();\n                  this.backend.disconnectSource();\n                }\n\n                this.isReady = false;\n                this.cancelAjax();\n                this.clearTmpEvents(); // empty drawer\n\n                this.drawer.progress(0);\n                this.drawer.setWidth(0);\n                this.drawer.drawPeaks({\n                  length: this.drawer.getWidth()\n                }, 0);\n              }\n              /**\n               * Remove events, elements and disconnect WebAudio nodes.\n               *\n               * @emits WaveSurfer#destroy\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                this.destroyAllPlugins();\n                this.fireEvent('destroy');\n                this.cancelAjax();\n                this.clearTmpEvents();\n                this.unAll();\n\n                if (this.params.responsive !== false) {\n                  window.removeEventListener('resize', this._onResize, true);\n                  window.removeEventListener('orientationchange', this._onResize, true);\n                }\n\n                if (this.backend) {\n                  this.backend.destroy(); // clears memory usage\n\n                  this.backend = null;\n                }\n\n                if (this.drawer) {\n                  this.drawer.destroy();\n                }\n\n                this.isDestroyed = true;\n                this.isReady = false;\n                this.arraybuffer = null;\n              }\n            }], [{\n              key: \"create\",\n              value:\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Instantiate this class, call its `init` function and returns it\n               *\n               * @param {WavesurferParams} params The wavesurfer parameters\n               * @return {Object} WaveSurfer instance\n               * @example const wavesurfer = WaveSurfer.create(params);\n               */\n              function create(params) {\n                var wavesurfer = new WaveSurfer(params);\n                return wavesurfer.init();\n              }\n              /**\n               * The library version number is available as a static property of the\n               * WaveSurfer class\n               *\n               * @type {String}\n               * @example\n               * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n               */\n\n            }]);\n\n            return WaveSurfer;\n          }(util.Observer);\n\n          exports[\"default\"] = WaveSurfer;\n\n          _defineProperty(WaveSurfer, \"VERSION\", \"6.1.0\");\n\n          _defineProperty(WaveSurfer, \"util\", util);\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/webaudio.js\":\n        /*!*************************!*\\\n          !*** ./src/webaudio.js ***!\n          \\*************************/\n\n        /***/\n        function srcWebaudioJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n              return typeof obj;\n            } : function (obj) {\n              return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            }, _typeof(obj);\n          }\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          var util = _interopRequireWildcard(__webpack_require__(\n          /*! ./util */\n          \"./src/util/index.js\"));\n\n          function _getRequireWildcardCache(nodeInterop) {\n            if (typeof WeakMap !== \"function\") return null;\n            var cacheBabelInterop = new WeakMap();\n            var cacheNodeInterop = new WeakMap();\n            return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n              return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n            })(nodeInterop);\n          }\n\n          function _interopRequireWildcard(obj, nodeInterop) {\n            if (!nodeInterop && obj && obj.__esModule) {\n              return obj;\n            }\n\n            if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n              return {\n                default: obj\n              };\n            }\n\n            var cache = _getRequireWildcardCache(nodeInterop);\n\n            if (cache && cache.has(obj)) {\n              return cache.get(obj);\n            }\n\n            var newObj = {};\n            var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n            for (var key in obj) {\n              if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n                var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n                if (desc && (desc.get || desc.set)) {\n                  Object.defineProperty(newObj, key, desc);\n                } else {\n                  newObj[key] = obj[key];\n                }\n              }\n            }\n\n            newObj.default = obj;\n\n            if (cache) {\n              cache.set(obj, newObj);\n            }\n\n            return newObj;\n          }\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            Object.defineProperty(subClass, \"prototype\", {\n              writable: false\n            });\n            if (superClass) _setPrototypeOf(subClass, superClass);\n          }\n\n          function _setPrototypeOf(o, p) {\n            _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = _getPrototypeOf(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = _getPrototypeOf(this).constructor;\n\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return _possibleConstructorReturn(this, result);\n            };\n          }\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            } else if (call !== void 0) {\n              throw new TypeError(\"Derived constructors may only return object or undefined\");\n            }\n\n            return _assertThisInitialized(self);\n          }\n\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          function _getPrototypeOf(o) {\n            _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          function _defineProperty(obj, key, value) {\n            if (key in obj) {\n              Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true\n              });\n            } else {\n              obj[key] = value;\n            }\n\n            return obj;\n          } // using constants to prevent someone writing the string wrong\n\n\n          var PLAYING = 'playing';\n          var PAUSED = 'paused';\n          var FINISHED = 'finished';\n          /**\n           * WebAudio backend\n           *\n           * @extends {Observer}\n           */\n\n          var WebAudio = /*#__PURE__*/function (_util$Observer) {\n            _inherits(WebAudio, _util$Observer);\n\n            var _super = _createSuper(WebAudio);\n            /**\n             * Construct the backend\n             *\n             * @param {WavesurferParams} params Wavesurfer parameters\n             */\n\n\n            function WebAudio(params) {\n              var _defineProperty2, _this$states;\n\n              var _this;\n\n              _classCallCheck(this, WebAudio);\n\n              _this = _super.call(this);\n              /** @private */\n\n              _defineProperty(_assertThisInitialized(_this), \"audioContext\", null);\n\n              _defineProperty(_assertThisInitialized(_this), \"offlineAudioContext\", null);\n\n              _defineProperty(_assertThisInitialized(_this), \"stateBehaviors\", (_defineProperty2 = {}, _defineProperty(_defineProperty2, PLAYING, {\n                init: function init() {\n                  this.addOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition + this.getPlayedTime();\n                }\n              }), _defineProperty(_defineProperty2, PAUSED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  var duration = this.getDuration();\n                  return this.getCurrentTime() / duration || 0;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.startPosition;\n                }\n              }), _defineProperty(_defineProperty2, FINISHED, {\n                init: function init() {\n                  this.removeOnAudioProcess();\n                  this.fireEvent('finish');\n                },\n                getPlayedPercents: function getPlayedPercents() {\n                  return 1;\n                },\n                getCurrentTime: function getCurrentTime() {\n                  return this.getDuration();\n                }\n              }), _defineProperty2));\n\n              _this.params = params;\n              /** ac: Audio Context instance */\n\n              _this.ac = params.audioContext || (_this.supportsWebAudio() ? _this.getAudioContext() : {});\n              /**@private */\n\n              _this.lastPlay = _this.ac.currentTime;\n              /** @private */\n\n              _this.startPosition = 0;\n              /** @private */\n\n              _this.scheduledPause = null;\n              /** @private */\n\n              _this.states = (_this$states = {}, _defineProperty(_this$states, PLAYING, Object.create(_this.stateBehaviors[PLAYING])), _defineProperty(_this$states, PAUSED, Object.create(_this.stateBehaviors[PAUSED])), _defineProperty(_this$states, FINISHED, Object.create(_this.stateBehaviors[FINISHED])), _this$states);\n              /** @private */\n\n              _this.buffer = null;\n              /** @private */\n\n              _this.filters = [];\n              /** gainNode: allows to control audio volume */\n\n              _this.gainNode = null;\n              /** @private */\n\n              _this.mergedPeaks = null;\n              /** @private */\n\n              _this.offlineAc = null;\n              /** @private */\n\n              _this.peaks = null;\n              /** @private */\n\n              _this.playbackRate = 1;\n              /** analyser: provides audio analysis information */\n\n              _this.analyser = null;\n              /** scriptNode: allows processing audio */\n\n              _this.scriptNode = null;\n              /** @private */\n\n              _this.source = null;\n              /** @private */\n\n              _this.splitPeaks = [];\n              /** @private */\n\n              _this.state = null;\n              /** @private */\n\n              _this.explicitDuration = params.duration;\n              /** @private */\n\n              _this.sinkStreamDestination = null;\n              /** @private */\n\n              _this.sinkAudioElement = null;\n              /**\n               * Boolean indicating if the backend was destroyed.\n               */\n\n              _this.destroyed = false;\n              return _this;\n            }\n            /**\n             * Initialise the backend, called in `wavesurfer.createBackend()`\n             */\n\n\n            _createClass(WebAudio, [{\n              key: \"supportsWebAudio\",\n              value:\n              /** scriptBufferSize: size of the processing buffer */\n\n              /** audioContext: allows to process audio with WebAudio API */\n\n              /** @private */\n\n              /** @private */\n\n              /**\n               * Does the browser support this backend\n               *\n               * @return {boolean} Whether or not this browser supports this backend\n               */\n              function supportsWebAudio() {\n                return !!(window.AudioContext || window.webkitAudioContext);\n              }\n              /**\n               * Get the audio context used by this backend or create one\n               *\n               * @return {AudioContext} Existing audio context, or creates a new one\n               */\n\n            }, {\n              key: \"getAudioContext\",\n              value: function getAudioContext() {\n                if (!window.WaveSurferAudioContext) {\n                  window.WaveSurferAudioContext = new (window.AudioContext || window.webkitAudioContext)();\n                }\n\n                return window.WaveSurferAudioContext;\n              }\n              /**\n               * Get the offline audio context used by this backend or create one\n               *\n               * @param {number} sampleRate The sample rate to use\n               * @return {OfflineAudioContext} Existing offline audio context, or creates\n               * a new one\n               */\n\n            }, {\n              key: \"getOfflineAudioContext\",\n              value: function getOfflineAudioContext(sampleRate) {\n                if (!window.WaveSurferOfflineAudioContext) {\n                  window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext || window.webkitOfflineAudioContext)(1, 2, sampleRate);\n                }\n\n                return window.WaveSurferOfflineAudioContext;\n              }\n            }, {\n              key: \"init\",\n              value: function init() {\n                this.createVolumeNode();\n                this.createScriptNode();\n                this.createAnalyserNode();\n                this.setState(PAUSED);\n                this.setPlaybackRate(this.params.audioRate);\n                this.setLength(0);\n              }\n              /** @private */\n\n            }, {\n              key: \"disconnectFilters\",\n              value: function disconnectFilters() {\n                if (this.filters) {\n                  this.filters.forEach(function (filter) {\n                    filter && filter.disconnect();\n                  });\n                  this.filters = null; // Reconnect direct path\n\n                  this.analyser.connect(this.gainNode);\n                }\n              }\n              /**\n               * @private\n               *\n               * @param {string} state The new state\n               */\n\n            }, {\n              key: \"setState\",\n              value: function setState(state) {\n                if (this.state !== this.states[state]) {\n                  this.state = this.states[state];\n                  this.state.init.call(this);\n                }\n              }\n              /**\n               * Unpacked `setFilters()`\n               *\n               * @param {...AudioNode} filters One or more filters to set\n               */\n\n            }, {\n              key: \"setFilter\",\n              value: function setFilter() {\n                for (var _len = arguments.length, filters = new Array(_len), _key = 0; _key < _len; _key++) {\n                  filters[_key] = arguments[_key];\n                }\n\n                this.setFilters(filters);\n              }\n              /**\n               * Insert custom Web Audio nodes into the graph\n               *\n               * @param {AudioNode[]} filters Packed filters array\n               * @example\n               * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n               * wavesurfer.backend.setFilter(lowpass);\n               */\n\n            }, {\n              key: \"setFilters\",\n              value: function setFilters(filters) {\n                // Remove existing filters\n                this.disconnectFilters(); // Insert filters if filter array not empty\n\n                if (filters && filters.length) {\n                  this.filters = filters; // Disconnect direct path before inserting filters\n\n                  this.analyser.disconnect(); // Connect each filter in turn\n\n                  filters.reduce(function (prev, curr) {\n                    prev.connect(curr);\n                    return curr;\n                  }, this.analyser).connect(this.gainNode);\n                }\n              }\n              /** Create ScriptProcessorNode to process audio */\n\n            }, {\n              key: \"createScriptNode\",\n              value: function createScriptNode() {\n                if (this.params.audioScriptProcessor) {\n                  this.scriptNode = this.params.audioScriptProcessor;\n                } else {\n                  if (this.ac.createScriptProcessor) {\n                    this.scriptNode = this.ac.createScriptProcessor(WebAudio.scriptBufferSize);\n                  } else {\n                    this.scriptNode = this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);\n                  }\n                }\n\n                this.scriptNode.connect(this.ac.destination);\n              }\n              /** @private */\n\n            }, {\n              key: \"addOnAudioProcess\",\n              value: function addOnAudioProcess() {\n                var _this2 = this;\n\n                this.scriptNode.onaudioprocess = function () {\n                  var time = _this2.getCurrentTime();\n\n                  if (time >= _this2.getDuration()) {\n                    _this2.setState(FINISHED);\n\n                    _this2.fireEvent('pause');\n                  } else if (time >= _this2.scheduledPause) {\n                    _this2.pause();\n                  } else if (_this2.state === _this2.states[PLAYING]) {\n                    _this2.fireEvent('audioprocess', time);\n                  }\n                };\n              }\n              /** @private */\n\n            }, {\n              key: \"removeOnAudioProcess\",\n              value: function removeOnAudioProcess() {\n                this.scriptNode.onaudioprocess = null;\n              }\n              /** Create analyser node to perform audio analysis */\n\n            }, {\n              key: \"createAnalyserNode\",\n              value: function createAnalyserNode() {\n                this.analyser = this.ac.createAnalyser();\n                this.analyser.connect(this.gainNode);\n              }\n              /**\n               * Create the gain node needed to control the playback volume.\n               *\n               */\n\n            }, {\n              key: \"createVolumeNode\",\n              value: function createVolumeNode() {\n                // Create gain node using the AudioContext\n                if (this.ac.createGain) {\n                  this.gainNode = this.ac.createGain();\n                } else {\n                  this.gainNode = this.ac.createGainNode();\n                } // Add the gain node to the graph\n\n\n                this.gainNode.connect(this.ac.destination);\n              }\n              /**\n               * Set the sink id for the media player\n               *\n               * @param {string} deviceId String value representing audio device id.\n               * @returns {Promise} A Promise that resolves to `undefined` when there\n               * are no errors.\n               */\n\n            }, {\n              key: \"setSinkId\",\n              value: function setSinkId(deviceId) {\n                if (deviceId) {\n                  /**\n                   * The webaudio API doesn't currently support setting the device\n                   * output. Here we create an HTMLAudioElement, connect the\n                   * webaudio stream to that element and setSinkId there.\n                   */\n                  if (!this.sinkAudioElement) {\n                    this.sinkAudioElement = new window.Audio(); // autoplay is necessary since we're not invoking .play()\n\n                    this.sinkAudioElement.autoplay = true;\n                  }\n\n                  if (!this.sinkAudioElement.setSinkId) {\n                    return Promise.reject(new Error('setSinkId is not supported in your browser'));\n                  }\n\n                  if (!this.sinkStreamDestination) {\n                    this.sinkStreamDestination = this.ac.createMediaStreamDestination();\n                  }\n\n                  this.gainNode.disconnect();\n                  this.gainNode.connect(this.sinkStreamDestination);\n                  this.sinkAudioElement.srcObject = this.sinkStreamDestination.stream;\n                  return this.sinkAudioElement.setSinkId(deviceId);\n                } else {\n                  return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n                }\n              }\n              /**\n               * Set the audio volume\n               *\n               * @param {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"setVolume\",\n              value: function setVolume(value) {\n                this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n              }\n              /**\n               * Get the current volume\n               *\n               * @return {number} value A floating point value between 0 and 1.\n               */\n\n            }, {\n              key: \"getVolume\",\n              value: function getVolume() {\n                return this.gainNode.gain.value;\n              }\n              /**\n               * Decode an array buffer and pass data to a callback\n               *\n               * @private\n               * @param {ArrayBuffer} arraybuffer The array buffer to decode\n               * @param {function} callback The function to call on complete.\n               * @param {function} errback The function to call on error.\n               */\n\n            }, {\n              key: \"decodeArrayBuffer\",\n              value: function decodeArrayBuffer(arraybuffer, callback, errback) {\n                if (!this.offlineAc) {\n                  this.offlineAc = this.getOfflineAudioContext(this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100);\n                }\n\n                if ('webkitAudioContext' in window) {\n                  // Safari: no support for Promise-based decodeAudioData enabled\n                  // Enable it in Safari using the Experimental Features > Modern WebAudio API option\n                  this.offlineAc.decodeAudioData(arraybuffer, function (data) {\n                    return callback(data);\n                  }, errback);\n                } else {\n                  this.offlineAc.decodeAudioData(arraybuffer).then(function (data) {\n                    return callback(data);\n                  }).catch(function (err) {\n                    return errback(err);\n                  });\n                }\n              }\n              /**\n               * Set pre-decoded peaks\n               *\n               * @param {number[]|Number.<Array[]>} peaks Peaks data\n               * @param {?number} duration Explicit duration\n               */\n\n            }, {\n              key: \"setPeaks\",\n              value: function setPeaks(peaks, duration) {\n                if (duration != null) {\n                  this.explicitDuration = duration;\n                }\n\n                this.peaks = peaks;\n              }\n              /**\n               * Set the rendered length (different from the length of the audio)\n               *\n               * @param {number} length The rendered length\n               */\n\n            }, {\n              key: \"setLength\",\n              value: function setLength(length) {\n                // No resize, we can preserve the cached peaks.\n                if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n                  return;\n                }\n\n                this.splitPeaks = [];\n                this.mergedPeaks = []; // Set the last element of the sparse array so the peak arrays are\n                // appropriately sized for other calculations.\n\n                var channels = this.buffer ? this.buffer.numberOfChannels : 1;\n                var c;\n\n                for (c = 0; c < channels; c++) {\n                  this.splitPeaks[c] = [];\n                  this.splitPeaks[c][2 * (length - 1)] = 0;\n                  this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n                }\n\n                this.mergedPeaks[2 * (length - 1)] = 0;\n                this.mergedPeaks[2 * (length - 1) + 1] = 0;\n              }\n              /**\n               * Compute the max and min value of the waveform when broken into <length> subranges.\n               *\n               * @param {number} length How many subranges to break the waveform into.\n               * @param {number} first First sample in the required range.\n               * @param {number} last Last sample in the required range.\n               * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n               * peaks consisting of (max, min) values for each subrange.\n               */\n\n            }, {\n              key: \"getPeaks\",\n              value: function getPeaks(length, first, last) {\n                if (this.peaks) {\n                  return this.peaks;\n                }\n\n                if (!this.buffer) {\n                  return [];\n                }\n\n                first = first || 0;\n                last = last || length - 1;\n                this.setLength(length);\n\n                if (!this.buffer) {\n                  return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n                }\n                /**\n                 * The following snippet fixes a buffering data issue on the Safari\n                 * browser which returned undefined It creates the missing buffer based\n                 * on 1 channel, 4096 samples and the sampleRate from the current\n                 * webaudio context 4096 samples seemed to be the best fit for rendering\n                 * will review this code once a stable version of Safari TP is out\n                 */\n\n\n                if (!this.buffer.length) {\n                  var newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n                  this.buffer = newBuffer.buffer;\n                }\n\n                var sampleSize = this.buffer.length / length;\n                var sampleStep = ~~(sampleSize / 10) || 1;\n                var channels = this.buffer.numberOfChannels;\n                var c;\n\n                for (c = 0; c < channels; c++) {\n                  var peaks = this.splitPeaks[c];\n                  var chan = this.buffer.getChannelData(c);\n                  var i = void 0;\n\n                  for (i = first; i <= last; i++) {\n                    var start = ~~(i * sampleSize);\n                    var end = ~~(start + sampleSize);\n                    /**\n                     * Initialize the max and min to the first sample of this\n                     * subrange, so that even if the samples are entirely\n                     * on one side of zero, we still return the true max and\n                     * min values in the subrange.\n                     */\n\n                    var min = chan[start];\n                    var max = min;\n                    var j = void 0;\n\n                    for (j = start; j < end; j += sampleStep) {\n                      var value = chan[j];\n\n                      if (value > max) {\n                        max = value;\n                      }\n\n                      if (value < min) {\n                        min = value;\n                      }\n                    }\n\n                    peaks[2 * i] = max;\n                    peaks[2 * i + 1] = min;\n\n                    if (c == 0 || max > this.mergedPeaks[2 * i]) {\n                      this.mergedPeaks[2 * i] = max;\n                    }\n\n                    if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n                      this.mergedPeaks[2 * i + 1] = min;\n                    }\n                  }\n                }\n\n                return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n              }\n              /**\n               * Get the position from 0 to 1\n               *\n               * @return {number} Position\n               */\n\n            }, {\n              key: \"getPlayedPercents\",\n              value: function getPlayedPercents() {\n                return this.state.getPlayedPercents.call(this);\n              }\n              /** @private */\n\n            }, {\n              key: \"disconnectSource\",\n              value: function disconnectSource() {\n                if (this.source) {\n                  this.source.disconnect();\n                }\n              }\n              /**\n               * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n               */\n\n            }, {\n              key: \"destroyWebAudio\",\n              value: function destroyWebAudio() {\n                this.disconnectFilters();\n                this.disconnectSource();\n                this.gainNode.disconnect();\n                this.scriptNode.disconnect();\n                this.analyser.disconnect(); // close the audioContext if closeAudioContext option is set to true\n\n                if (this.params.closeAudioContext) {\n                  // check if browser supports AudioContext.close()\n                  if (typeof this.ac.close === 'function' && this.ac.state != 'closed') {\n                    this.ac.close();\n                  } // clear the reference to the audiocontext\n\n\n                  this.ac = null; // clear the actual audiocontext, either passed as param or the\n                  // global singleton\n\n                  if (!this.params.audioContext) {\n                    window.WaveSurferAudioContext = null;\n                  } else {\n                    this.params.audioContext = null;\n                  } // clear the offlineAudioContext\n\n\n                  window.WaveSurferOfflineAudioContext = null;\n                } // disconnect resources used by setSinkId\n\n\n                if (this.sinkStreamDestination) {\n                  this.sinkAudioElement.pause();\n                  this.sinkAudioElement.srcObject = null;\n                  this.sinkStreamDestination.disconnect();\n                  this.sinkStreamDestination = null;\n                }\n              }\n              /**\n               * This is called when wavesurfer is destroyed\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                if (!this.isPaused()) {\n                  this.pause();\n                }\n\n                this.unAll();\n                this.buffer = null;\n                this.destroyed = true;\n                this.destroyWebAudio();\n              }\n              /**\n               * Loaded a decoded audio buffer\n               *\n               * @param {Object} buffer Decoded audio buffer to load\n               */\n\n            }, {\n              key: \"load\",\n              value: function load(buffer) {\n                this.startPosition = 0;\n                this.lastPlay = this.ac.currentTime;\n                this.buffer = buffer;\n                this.createSource();\n              }\n              /** @private */\n\n            }, {\n              key: \"createSource\",\n              value: function createSource() {\n                this.disconnectSource();\n                this.source = this.ac.createBufferSource(); // adjust for old browsers\n\n                this.source.start = this.source.start || this.source.noteGrainOn;\n                this.source.stop = this.source.stop || this.source.noteOff;\n                this.setPlaybackRate(this.playbackRate);\n                this.source.buffer = this.buffer;\n                this.source.connect(this.analyser);\n              }\n              /**\n               * @private\n               *\n               * some browsers require an explicit call to #resume before they will play back audio\n               */\n\n            }, {\n              key: \"resumeAudioContext\",\n              value: function resumeAudioContext() {\n                if (this.ac.state == 'suspended') {\n                  this.ac.resume && this.ac.resume();\n                }\n              }\n              /**\n               * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n               *\n               * @return {boolean} Whether or not this backend is currently paused\n               */\n\n            }, {\n              key: \"isPaused\",\n              value: function isPaused() {\n                return this.state !== this.states[PLAYING];\n              }\n              /**\n               * Used by `wavesurfer.getDuration()`\n               *\n               * @return {number} Duration of loaded buffer\n               */\n\n            }, {\n              key: \"getDuration\",\n              value: function getDuration() {\n                if (this.explicitDuration) {\n                  return this.explicitDuration;\n                }\n\n                if (!this.buffer) {\n                  return 0;\n                }\n\n                return this.buffer.duration;\n              }\n              /**\n               * Used by `wavesurfer.seekTo()`\n               *\n               * @param {number} start Position to start at in seconds\n               * @param {number} end Position to end at in seconds\n               * @return {{start: number, end: number}} Object containing start and end\n               * positions\n               */\n\n            }, {\n              key: \"seekTo\",\n              value: function seekTo(start, end) {\n                if (!this.buffer) {\n                  return;\n                }\n\n                this.scheduledPause = null;\n\n                if (start == null) {\n                  start = this.getCurrentTime();\n\n                  if (start >= this.getDuration()) {\n                    start = 0;\n                  }\n                }\n\n                if (end == null) {\n                  end = this.getDuration();\n                }\n\n                this.startPosition = start;\n                this.lastPlay = this.ac.currentTime;\n\n                if (this.state === this.states[FINISHED]) {\n                  this.setState(PAUSED);\n                }\n\n                return {\n                  start: start,\n                  end: end\n                };\n              }\n              /**\n               * Get the playback position in seconds\n               *\n               * @return {number} The playback position in seconds\n               */\n\n            }, {\n              key: \"getPlayedTime\",\n              value: function getPlayedTime() {\n                return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n              }\n              /**\n               * Plays the loaded audio region.\n               *\n               * @param {number} start Start offset in seconds, relative to the beginning\n               * of a clip.\n               * @param {number} end When to stop relative to the beginning of a clip.\n               */\n\n            }, {\n              key: \"play\",\n              value: function play(start, end) {\n                if (!this.buffer) {\n                  return;\n                } // need to re-create source on each playback\n\n\n                this.createSource();\n                var adjustedTime = this.seekTo(start, end);\n                start = adjustedTime.start;\n                end = adjustedTime.end;\n                this.scheduledPause = end;\n                this.source.start(0, start);\n                this.resumeAudioContext();\n                this.setState(PLAYING);\n                this.fireEvent('play');\n              }\n              /**\n               * Pauses the loaded audio.\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.scheduledPause = null;\n                this.startPosition += this.getPlayedTime();\n\n                try {\n                  this.source && this.source.stop(0);\n                } catch (err) {// Calling stop can throw the following 2 errors:\n                  // - RangeError (The value specified for when is negative.)\n                  // - InvalidStateNode (The node has not been started by calling start().)\n                  // We can safely ignore both errors, because:\n                  // - The range is surely correct\n                  // - The node might not have been started yet, in which case we just want to carry on without causing any trouble.\n                }\n\n                this.setState(PAUSED);\n                this.fireEvent('pause');\n              }\n              /**\n               * Returns the current time in seconds relative to the audio-clip's\n               * duration.\n               *\n               * @return {number} The current time in seconds\n               */\n\n            }, {\n              key: \"getCurrentTime\",\n              value: function getCurrentTime() {\n                return this.state.getCurrentTime.call(this);\n              }\n              /**\n               * Returns the current playback rate. (0=no playback, 1=normal playback)\n               *\n               * @return {number} The current playback rate\n               */\n\n            }, {\n              key: \"getPlaybackRate\",\n              value: function getPlaybackRate() {\n                return this.playbackRate;\n              }\n              /**\n               * Set the audio source playback rate.\n               *\n               * @param {number} value The playback rate to use\n               */\n\n            }, {\n              key: \"setPlaybackRate\",\n              value: function setPlaybackRate(value) {\n                this.playbackRate = value || 1;\n                this.source && this.source.playbackRate.setValueAtTime(this.playbackRate, this.ac.currentTime);\n              }\n              /**\n               * Set a point in seconds for playback to stop at.\n               *\n               * @param {number} end Position to end at\n               * @version 3.3.0\n               */\n\n            }, {\n              key: \"setPlayEnd\",\n              value: function setPlayEnd(end) {\n                this.scheduledPause = end;\n              }\n            }]);\n\n            return WebAudio;\n          }(util.Observer);\n\n          exports[\"default\"] = WebAudio;\n\n          _defineProperty(WebAudio, \"scriptBufferSize\", 256);\n\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/debounce/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/debounce/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesDebounceIndexJs(module) {\n          /**\n           * Returns a function, that, as long as it continues to be invoked, will not\n           * be triggered. The function will be called after it stops being called for\n           * N milliseconds. If `immediate` is passed, trigger the function on the\n           * leading edge, instead of the trailing. The function also has a property 'clear' \n           * that is a function which will clear the timer to prevent previously scheduled executions. \n           *\n           * @source underscore.js\n           * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n           * @param {Function} function to wrap\n           * @param {Number} timeout in ms (`100`)\n           * @param {Boolean} whether to execute at the beginning (`false`)\n           * @api public\n           */\n          function debounce(func, wait, immediate) {\n            var timeout, args, context, timestamp, result;\n            if (null == wait) wait = 100;\n\n            function later() {\n              var last = Date.now() - timestamp;\n\n              if (last < wait && last >= 0) {\n                timeout = setTimeout(later, wait - last);\n              } else {\n                timeout = null;\n\n                if (!immediate) {\n                  result = func.apply(context, args);\n                  context = args = null;\n                }\n              }\n            }\n\n            ;\n\n            var debounced = function debounced() {\n              context = this;\n              args = arguments;\n              timestamp = Date.now();\n              var callNow = immediate && !timeout;\n              if (!timeout) timeout = setTimeout(later, wait);\n\n              if (callNow) {\n                result = func.apply(context, args);\n                context = args = null;\n              }\n\n              return result;\n            };\n\n            debounced.clear = function () {\n              if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n\n            debounced.flush = function () {\n              if (timeout) {\n                result = func.apply(context, args);\n                context = args = null;\n                clearTimeout(timeout);\n                timeout = null;\n              }\n            };\n\n            return debounced;\n          }\n\n          ; // Adds compatibility for ES modules\n\n          debounce.debounce = debounce;\n          module.exports = debounce;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(\"./src/wavesurfer.js\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var topLevel = typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n\nvar minDoc = require('min-document');\n\nvar doccy;\n\nif (typeof document !== 'undefined') {\n  doccy = document;\n} else {\n  doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n  if (!doccy) {\n    doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n  }\n}\n\nmodule.exports = doccy;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inheritsLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import URLToolkit from 'url-toolkit';\nimport window from 'global/window';\nvar DEFAULT_LOCATION = 'http://example.com';\n\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if baseUrl is a data URI, ignore it and resolve everything relative to window.location\n\n\n  if (/^data:/.test(baseUrl)) {\n    baseUrl = window.location && window.location.href || '';\n  } // IE11 supports URL but not the URL constructor\n  // feature detect the behavior we want\n\n\n  var nativeURL = typeof window.URL === 'function';\n  var protocolLess = /^\\/\\//.test(baseUrl); // remove location if window.location isn't available (i.e. we're in node)\n  // and if baseUrl isn't an absolute url\n\n  var removeLocation = !window.location && !/\\/\\//i.test(baseUrl); // if the base URL is relative then combine with the current location\n\n  if (nativeURL) {\n    baseUrl = new window.URL(baseUrl, window.location || DEFAULT_LOCATION);\n  } else if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit.buildAbsoluteURL(window.location && window.location.href || '', baseUrl);\n  }\n\n  if (nativeURL) {\n    var newUrl = new URL(relativeUrl, baseUrl); // if we're a protocol-less url, remove the protocol\n    // and if we're location-less, remove the location\n    // otherwise, return the url unmodified\n\n    if (removeLocation) {\n      return newUrl.href.slice(DEFAULT_LOCATION.length);\n    } else if (protocolLess) {\n      return newUrl.href.slice(newUrl.protocol.length);\n    }\n\n    return newUrl.href;\n  }\n\n  return URLToolkit.buildAbsoluteURL(baseUrl, relativeUrl);\n};\n\nexport default resolveUrl;","import window from 'global/window';\n\nvar atob = function atob(s) {\n  return window.atob ? window.atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nexport default function decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\n\nfunction notEmptyString(input) {\n  return input !== '';\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\n\n\nfunction splitOnASCIIWhitespace(input) {\n  // U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n  return input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : [];\n}\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\n\n\nfunction orderedSetReducer(current, element) {\n  if (!current.hasOwnProperty(element)) {\n    current[element] = true;\n  }\n\n  return current;\n}\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\n\n\nfunction toOrderedSet(input) {\n  if (!input) return [];\n  var list = splitOnASCIIWhitespace(input);\n  return Object.keys(list.reduce(orderedSetReducer, {}));\n}\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\n\n\nfunction arrayIncludes(list) {\n  return function (element) {\n    return list && list.indexOf(element) !== -1;\n  };\n}\n\nfunction copy(src, dest) {\n  for (var p in src) {\n    if (Object.prototype.hasOwnProperty.call(src, p)) {\n      dest[p] = src[p];\n    }\n  }\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\n\n\nfunction _extends(Class, Super) {\n  var pt = Class.prototype;\n\n  if (!(pt instanceof Super)) {\n    function t() {}\n\n    ;\n    t.prototype = Super.prototype;\n    t = new t();\n    copy(pt, t);\n    Class.prototype = pt = t;\n  }\n\n  if (pt.constructor != Class) {\n    if (typeof Class != 'function') {\n      console.error(\"unknown Class:\" + Class);\n    }\n\n    pt.constructor = Class;\n  }\n} // Node Types\n\n\nvar NodeType = {};\nvar ELEMENT_NODE = NodeType.ELEMENT_NODE = 1;\nvar ATTRIBUTE_NODE = NodeType.ATTRIBUTE_NODE = 2;\nvar TEXT_NODE = NodeType.TEXT_NODE = 3;\nvar CDATA_SECTION_NODE = NodeType.CDATA_SECTION_NODE = 4;\nvar ENTITY_REFERENCE_NODE = NodeType.ENTITY_REFERENCE_NODE = 5;\nvar ENTITY_NODE = NodeType.ENTITY_NODE = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE = NodeType.COMMENT_NODE = 8;\nvar DOCUMENT_NODE = NodeType.DOCUMENT_NODE = 9;\nvar DOCUMENT_TYPE_NODE = NodeType.DOCUMENT_TYPE_NODE = 10;\nvar DOCUMENT_FRAGMENT_NODE = NodeType.DOCUMENT_FRAGMENT_NODE = 11;\nvar NOTATION_NODE = NodeType.NOTATION_NODE = 12; // ExceptionCode\n\nvar ExceptionCode = {};\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR = ExceptionCode.INDEX_SIZE_ERR = (ExceptionMessage[1] = \"Index size error\", 1);\nvar DOMSTRING_SIZE_ERR = ExceptionCode.DOMSTRING_SIZE_ERR = (ExceptionMessage[2] = \"DOMString size error\", 2);\nvar HIERARCHY_REQUEST_ERR = ExceptionCode.HIERARCHY_REQUEST_ERR = (ExceptionMessage[3] = \"Hierarchy request error\", 3);\nvar WRONG_DOCUMENT_ERR = ExceptionCode.WRONG_DOCUMENT_ERR = (ExceptionMessage[4] = \"Wrong document\", 4);\nvar INVALID_CHARACTER_ERR = ExceptionCode.INVALID_CHARACTER_ERR = (ExceptionMessage[5] = \"Invalid character\", 5);\nvar NO_DATA_ALLOWED_ERR = ExceptionCode.NO_DATA_ALLOWED_ERR = (ExceptionMessage[6] = \"No data allowed\", 6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = (ExceptionMessage[7] = \"No modification allowed\", 7);\nvar NOT_FOUND_ERR = ExceptionCode.NOT_FOUND_ERR = (ExceptionMessage[8] = \"Not found\", 8);\nvar NOT_SUPPORTED_ERR = ExceptionCode.NOT_SUPPORTED_ERR = (ExceptionMessage[9] = \"Not supported\", 9);\nvar INUSE_ATTRIBUTE_ERR = ExceptionCode.INUSE_ATTRIBUTE_ERR = (ExceptionMessage[10] = \"Attribute in use\", 10); //level2\n\nvar INVALID_STATE_ERR = ExceptionCode.INVALID_STATE_ERR = (ExceptionMessage[11] = \"Invalid state\", 11);\nvar SYNTAX_ERR = ExceptionCode.SYNTAX_ERR = (ExceptionMessage[12] = \"Syntax error\", 12);\nvar INVALID_MODIFICATION_ERR = ExceptionCode.INVALID_MODIFICATION_ERR = (ExceptionMessage[13] = \"Invalid modification\", 13);\nvar NAMESPACE_ERR = ExceptionCode.NAMESPACE_ERR = (ExceptionMessage[14] = \"Invalid namespace\", 14);\nvar INVALID_ACCESS_ERR = ExceptionCode.INVALID_ACCESS_ERR = (ExceptionMessage[15] = \"Invalid access\", 15);\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\n\nfunction DOMException(code, message) {\n  if (message instanceof Error) {\n    var error = message;\n  } else {\n    error = this;\n    Error.call(this, ExceptionMessage[code]);\n    this.message = ExceptionMessage[code];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n  }\n\n  error.code = code;\n  if (message) this.message = this.message + \": \" + message;\n  return error;\n}\n\n;\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode, DOMException);\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\n\nfunction NodeList() {}\n\n;\nNodeList.prototype = {\n  /**\n   * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n   * @standard level1\n   */\n  length: 0,\n\n  /**\n   * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n   * @standard level1\n   * @param index  unsigned long\n   *   Index into the collection.\n   * @return Node\n   * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n   */\n  item: function item(index) {\n    return this[index] || null;\n  },\n  toString: function toString(isHTML, nodeFilter) {\n    for (var buf = [], i = 0; i < this.length; i++) {\n      serializeToString(this[i], buf, isHTML, nodeFilter);\n    }\n\n    return buf.join('');\n  },\n\n  /**\n   * @private\n   * @param {function (Node):boolean} predicate\n   * @returns {Node[]}\n   */\n  filter: function filter(predicate) {\n    return Array.prototype.filter.call(this, predicate);\n  },\n\n  /**\n   * @private\n   * @param {Node} item\n   * @returns {number}\n   */\n  indexOf: function indexOf(item) {\n    return Array.prototype.indexOf.call(this, item);\n  }\n};\n\nfunction LiveNodeList(node, refresh) {\n  this._node = node;\n  this._refresh = refresh;\n\n  _updateLiveList(this);\n}\n\nfunction _updateLiveList(list) {\n  var inc = list._node._inc || list._node.ownerDocument._inc;\n\n  if (list._inc != inc) {\n    var ls = list._refresh(list._node); //console.log(ls.length)\n\n\n    __set__(list, 'length', ls.length);\n\n    copy(ls, list);\n    list._inc = inc;\n  }\n}\n\nLiveNodeList.prototype.item = function (i) {\n  _updateLiveList(this);\n\n  return this[i];\n};\n\n_extends(LiveNodeList, NodeList);\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\n\n\nfunction NamedNodeMap() {}\n\n;\n\nfunction _findNodeIndex(list, node) {\n  var i = list.length;\n\n  while (i--) {\n    if (list[i] === node) {\n      return i;\n    }\n  }\n}\n\nfunction _addNamedNode(el, list, newAttr, oldAttr) {\n  if (oldAttr) {\n    list[_findNodeIndex(list, oldAttr)] = newAttr;\n  } else {\n    list[list.length++] = newAttr;\n  }\n\n  if (el) {\n    newAttr.ownerElement = el;\n    var doc = el.ownerDocument;\n\n    if (doc) {\n      oldAttr && _onRemoveAttribute(doc, el, oldAttr);\n\n      _onAddAttribute(doc, el, newAttr);\n    }\n  }\n}\n\nfunction _removeNamedNode(el, list, attr) {\n  //console.log('remove attr:'+attr)\n  var i = _findNodeIndex(list, attr);\n\n  if (i >= 0) {\n    var lastIndex = list.length - 1;\n\n    while (i < lastIndex) {\n      list[i] = list[++i];\n    }\n\n    list.length = lastIndex;\n\n    if (el) {\n      var doc = el.ownerDocument;\n\n      if (doc) {\n        _onRemoveAttribute(doc, el, attr);\n\n        attr.ownerElement = null;\n      }\n    }\n  } else {\n    throw new DOMException(NOT_FOUND_ERR, new Error(el.tagName + '@' + attr));\n  }\n}\n\nNamedNodeMap.prototype = {\n  length: 0,\n  item: NodeList.prototype.item,\n  getNamedItem: function getNamedItem(key) {\n    //\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n    //\t\t\treturn null;\n    //\t\t}\n    //console.log()\n    var i = this.length;\n\n    while (i--) {\n      var attr = this[i]; //console.log(attr.nodeName,key)\n\n      if (attr.nodeName == key) {\n        return attr;\n      }\n    }\n  },\n  setNamedItem: function setNamedItem(attr) {\n    var el = attr.ownerElement;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    var oldAttr = this.getNamedItem(attr.nodeName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  setNamedItemNS: function setNamedItemNS(attr) {\n    // raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n    var el = attr.ownerElement,\n        oldAttr;\n\n    if (el && el != this._ownerElement) {\n      throw new DOMException(INUSE_ATTRIBUTE_ERR);\n    }\n\n    oldAttr = this.getNamedItemNS(attr.namespaceURI, attr.localName);\n\n    _addNamedNode(this._ownerElement, this, attr, oldAttr);\n\n    return oldAttr;\n  },\n\n  /* returns Node */\n  removeNamedItem: function removeNamedItem(key) {\n    var attr = this.getNamedItem(key);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  // raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n  //for level2\n  removeNamedItemNS: function removeNamedItemNS(namespaceURI, localName) {\n    var attr = this.getNamedItemNS(namespaceURI, localName);\n\n    _removeNamedNode(this._ownerElement, this, attr);\n\n    return attr;\n  },\n  getNamedItemNS: function getNamedItemNS(namespaceURI, localName) {\n    var i = this.length;\n\n    while (i--) {\n      var node = this[i];\n\n      if (node.localName == localName && node.namespaceURI == namespaceURI) {\n        return node;\n      }\n    }\n\n    return null;\n  }\n};\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\n\nfunction DOMImplementation() {}\n\nDOMImplementation.prototype = {\n  /**\n   * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n   * The different implementations fairly diverged in what kind of features were reported.\n   * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n   *\n   * @deprecated It is deprecated and modern browsers return true in all cases.\n   *\n   * @param {string} feature\n   * @param {string} [version]\n   * @returns {boolean} always true\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n   * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n   */\n  hasFeature: function hasFeature(feature, version) {\n    return true;\n  },\n\n  /**\n   * Creates an XML Document object of the specified type with its document element.\n   *\n   * __It behaves slightly different from the description in the living standard__:\n   * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n   * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n   * - this implementation is not validating names or qualified names\n   *   (when parsing XML strings, the SAX parser takes care of that)\n   *\n   * @param {string|null} namespaceURI\n   * @param {string} qualifiedName\n   * @param {DocumentType=null} doctype\n   * @returns {Document}\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n   * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n   *\n   * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n   * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n   * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n   */\n  createDocument: function createDocument(namespaceURI, qualifiedName, doctype) {\n    var doc = new Document();\n    doc.implementation = this;\n    doc.childNodes = new NodeList();\n    doc.doctype = doctype || null;\n\n    if (doctype) {\n      doc.appendChild(doctype);\n    }\n\n    if (qualifiedName) {\n      var root = doc.createElementNS(namespaceURI, qualifiedName);\n      doc.appendChild(root);\n    }\n\n    return doc;\n  },\n\n  /**\n   * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n   *\n   * __This behavior is slightly different from the in the specs__:\n   * - this implementation is not validating names or qualified names\n   *   (when parsing XML strings, the SAX parser takes care of that)\n   *\n   * @param {string} qualifiedName\n   * @param {string} [publicId]\n   * @param {string} [systemId]\n   * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n   * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n   * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n   * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n   *\n   * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n   * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n   * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n   */\n  createDocumentType: function createDocumentType(qualifiedName, publicId, systemId) {\n    var node = new DocumentType();\n    node.name = qualifiedName;\n    node.nodeName = qualifiedName;\n    node.publicId = publicId || '';\n    node.systemId = systemId || '';\n    return node;\n  }\n};\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {}\n\n;\nNode.prototype = {\n  firstChild: null,\n  lastChild: null,\n  previousSibling: null,\n  nextSibling: null,\n  attributes: null,\n  parentNode: null,\n  childNodes: null,\n  ownerDocument: null,\n  nodeValue: null,\n  namespaceURI: null,\n  prefix: null,\n  localName: null,\n  // Modified in DOM Level 2:\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises\n    return _insertBefore(this, newChild, refChild);\n  },\n  replaceChild: function replaceChild(newChild, oldChild) {\n    //raises\n    _insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\n    if (oldChild) {\n      this.removeChild(oldChild);\n    }\n  },\n  removeChild: function removeChild(oldChild) {\n    return _removeChild(this, oldChild);\n  },\n  appendChild: function appendChild(newChild) {\n    return this.insertBefore(newChild, null);\n  },\n  hasChildNodes: function hasChildNodes() {\n    return this.firstChild != null;\n  },\n  cloneNode: function cloneNode(deep) {\n    return _cloneNode(this.ownerDocument || this, this, deep);\n  },\n  // Modified in DOM Level 2:\n  normalize: function normalize() {\n    var child = this.firstChild;\n\n    while (child) {\n      var next = child.nextSibling;\n\n      if (next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE) {\n        this.removeChild(next);\n        child.appendData(next.data);\n      } else {\n        child.normalize();\n        child = next;\n      }\n    }\n  },\n  // Introduced in DOM Level 2:\n  isSupported: function isSupported(feature, version) {\n    return this.ownerDocument.implementation.hasFeature(feature, version);\n  },\n  // Introduced in DOM Level 2:\n  hasAttributes: function hasAttributes() {\n    return this.attributes.length > 0;\n  },\n\n  /**\n   * Look up the prefix associated to the given namespace URI, starting from this node.\n   * **The default namespace declarations are ignored by this method.**\n   * See Namespace Prefix Lookup for details on the algorithm used by this method.\n   *\n   * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n   *\n   * @param {string | null} namespaceURI\n   * @returns {string | null}\n   * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n   * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n   * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n   * @see https://github.com/xmldom/xmldom/issues/322\n   */\n  lookupPrefix: function lookupPrefix(namespaceURI) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        for (var n in map) {\n          if (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n            return n;\n          }\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  lookupNamespaceURI: function lookupNamespaceURI(prefix) {\n    var el = this;\n\n    while (el) {\n      var map = el._nsMap; //console.dir(map)\n\n      if (map) {\n        if (prefix in map) {\n          if (Object.prototype.hasOwnProperty.call(map, prefix)) {\n            return map[prefix];\n          }\n        }\n      }\n\n      el = el.nodeType == ATTRIBUTE_NODE ? el.ownerDocument : el.parentNode;\n    }\n\n    return null;\n  },\n  // Introduced in DOM Level 3:\n  isDefaultNamespace: function isDefaultNamespace(namespaceURI) {\n    var prefix = this.lookupPrefix(namespaceURI);\n    return prefix == null;\n  }\n};\n\nfunction _xmlEncoder(c) {\n  return c == '<' && '&lt;' || c == '>' && '&gt;' || c == '&' && '&amp;' || c == '\"' && '&quot;' || '&#' + c.charCodeAt() + ';';\n}\n\ncopy(NodeType, Node);\ncopy(NodeType, Node.prototype);\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\n\nfunction _visitNode(node, callback) {\n  if (callback(node)) {\n    return true;\n  }\n\n  if (node = node.firstChild) {\n    do {\n      if (_visitNode(node, callback)) {\n        return true;\n      }\n    } while (node = node.nextSibling);\n  }\n}\n\nfunction Document() {\n  this.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc, el, newAttr) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns === NAMESPACE.XMLNS) {\n    //update namespace\n    el._nsMap[newAttr.prefix ? newAttr.localName : ''] = newAttr.value;\n  }\n}\n\nfunction _onRemoveAttribute(doc, el, newAttr, remove) {\n  doc && doc._inc++;\n  var ns = newAttr.namespaceURI;\n\n  if (ns === NAMESPACE.XMLNS) {\n    //update namespace\n    delete el._nsMap[newAttr.prefix ? newAttr.localName : ''];\n  }\n}\n\nfunction _onUpdateChild(doc, el, newChild) {\n  if (doc && doc._inc) {\n    doc._inc++; //update childNodes\n\n    var cs = el.childNodes;\n\n    if (newChild) {\n      cs[cs.length++] = newChild;\n    } else {\n      //console.log(1)\n      var child = el.firstChild;\n      var i = 0;\n\n      while (child) {\n        cs[i++] = child;\n        child = child.nextSibling;\n      }\n\n      cs.length = i;\n      delete cs[cs.length];\n    }\n  }\n}\n/**\n * attributes;\n * children;\n *\n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\n\n\nfunction _removeChild(parentNode, child) {\n  var previous = child.previousSibling;\n  var next = child.nextSibling;\n\n  if (previous) {\n    previous.nextSibling = next;\n  } else {\n    parentNode.firstChild = next;\n  }\n\n  if (next) {\n    next.previousSibling = previous;\n  } else {\n    parentNode.lastChild = previous;\n  }\n\n  child.parentNode = null;\n  child.previousSibling = null;\n  child.nextSibling = null;\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode);\n\n  return child;\n}\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\n\n\nfunction hasValidParentNodeType(node) {\n  return node && (node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\n\n\nfunction hasInsertableNodeType(node) {\n  return node && (isElementNode(node) || isTextNode(node) || isDocTypeNode(node) || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.COMMENT_NODE || node.nodeType === Node.PROCESSING_INSTRUCTION_NODE);\n}\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\n\n\nfunction isDocTypeNode(node) {\n  return node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\n\n\nfunction isElementNode(node) {\n  return node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\n\n\nfunction isTextNode(node) {\n  return node && node.nodeType === Node.TEXT_NODE;\n}\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\n\n\nfunction isElementInsertionPossible(doc, child) {\n  var parentChildNodes = doc.childNodes || [];\n\n  if (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n    return false;\n  }\n\n  var docTypeNode = find(parentChildNodes, isDocTypeNode);\n  return !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\n\n\nfunction isElementReplacementPossible(doc, child) {\n  var parentChildNodes = doc.childNodes || [];\n\n  function hasElementChildThatIsNotChild(node) {\n    return isElementNode(node) && node !== child;\n  }\n\n  if (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n    return false;\n  }\n\n  var docTypeNode = find(parentChildNodes, isDocTypeNode);\n  return !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\n\n\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n  // 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n  if (!hasValidParentNodeType(parent)) {\n    throw new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n  } // 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n  // not implemented!\n  // 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\n\n  if (child && child.parentNode !== parent) {\n    throw new DOMException(NOT_FOUND_ERR, 'child not in parent');\n  }\n\n  if ( // 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n  !hasInsertableNodeType(node) || // 5. If either `node` is a Text node and `parent` is a document,\n  // the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n  // || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n  // or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n  isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE) {\n    throw new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType);\n  }\n}\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\n\n\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n  var parentChildNodes = parent.childNodes || [];\n  var nodeChildNodes = node.childNodes || []; // DocumentFragment\n\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    var nodeChildElements = nodeChildNodes.filter(isElementNode); // If node has more than one element child or has a Text node child.\n\n    if (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n    } // Otherwise, if `node` has one element child and either `parent` has an element child,\n    // `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\n\n    if (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n    }\n  } // Element\n\n\n  if (isElementNode(node)) {\n    // `parent` has an element child, `child` is a doctype,\n    // or `child` is non-null and a doctype is following `child`.\n    if (!isElementInsertionPossible(parent, child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n    }\n  } // DocumentType\n\n\n  if (isDocTypeNode(node)) {\n    // `parent` has a doctype child,\n    if (find(parentChildNodes, isDocTypeNode)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n    }\n\n    var parentElementChild = find(parentChildNodes, isElementNode); // `child` is non-null and an element is preceding `child`,\n\n    if (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n    } // or `child` is null and `parent` has an element child.\n\n\n    if (!child && parentElementChild) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n    }\n  }\n}\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\n\n\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n  var parentChildNodes = parent.childNodes || [];\n  var nodeChildNodes = node.childNodes || []; // DocumentFragment\n\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    var nodeChildElements = nodeChildNodes.filter(isElementNode); // If `node` has more than one element child or has a Text node child.\n\n    if (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n    } // Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\n\n    if (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n    }\n  } // Element\n\n\n  if (isElementNode(node)) {\n    // `parent` has an element child that is not `child` or a doctype is following `child`.\n    if (!isElementReplacementPossible(parent, child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n    }\n  } // DocumentType\n\n\n  if (isDocTypeNode(node)) {\n    function hasDoctypeChildThatIsNotChild(node) {\n      return isDocTypeNode(node) && node !== child;\n    } // `parent` has a doctype child that is not `child`,\n\n\n    if (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n    }\n\n    var parentElementChild = find(parentChildNodes, isElementNode); // or an element is preceding `child`.\n\n    if (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n      throw new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n    }\n  }\n}\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\n\n\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n  // To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n  assertPreInsertionValidity1to5(parent, node, child); // If parent is a document, and any of the statements below, switched on the interface node implements,\n  // are true, then throw a \"HierarchyRequestError\" DOMException.\n\n  if (parent.nodeType === Node.DOCUMENT_NODE) {\n    (_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n  }\n\n  var cp = node.parentNode;\n\n  if (cp) {\n    cp.removeChild(node); //remove and update\n  }\n\n  if (node.nodeType === DOCUMENT_FRAGMENT_NODE) {\n    var newFirst = node.firstChild;\n\n    if (newFirst == null) {\n      return node;\n    }\n\n    var newLast = node.lastChild;\n  } else {\n    newFirst = newLast = node;\n  }\n\n  var pre = child ? child.previousSibling : parent.lastChild;\n  newFirst.previousSibling = pre;\n  newLast.nextSibling = child;\n\n  if (pre) {\n    pre.nextSibling = newFirst;\n  } else {\n    parent.firstChild = newFirst;\n  }\n\n  if (child == null) {\n    parent.lastChild = newLast;\n  } else {\n    child.previousSibling = newLast;\n  }\n\n  do {\n    newFirst.parentNode = parent;\n  } while (newFirst !== newLast && (newFirst = newFirst.nextSibling));\n\n  _onUpdateChild(parent.ownerDocument || parent, parent); //console.log(parent.lastChild.nextSibling == null)\n\n\n  if (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n    node.firstChild = node.lastChild = null;\n  }\n\n  return node;\n}\n\nfunction _appendSingleChild(parentNode, newChild) {\n  if (newChild.parentNode) {\n    newChild.parentNode.removeChild(newChild);\n  }\n\n  newChild.parentNode = parentNode;\n  newChild.previousSibling = parentNode.lastChild;\n  newChild.nextSibling = null;\n\n  if (newChild.previousSibling) {\n    newChild.previousSibling.nextSibling = newChild;\n  } else {\n    parentNode.firstChild = newChild;\n  }\n\n  parentNode.lastChild = newChild;\n\n  _onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\n  return newChild;\n}\n\nDocument.prototype = {\n  //implementation : null,\n  nodeName: '#document',\n  nodeType: DOCUMENT_NODE,\n\n  /**\n   * The DocumentType node of the document.\n   *\n   * @readonly\n   * @type DocumentType\n   */\n  doctype: null,\n  documentElement: null,\n  _inc: 1,\n  insertBefore: function insertBefore(newChild, refChild) {\n    //raises\n    if (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n      var child = newChild.firstChild;\n\n      while (child) {\n        var next = child.nextSibling;\n        this.insertBefore(child, refChild);\n        child = next;\n      }\n\n      return newChild;\n    }\n\n    _insertBefore(this, newChild, refChild);\n\n    newChild.ownerDocument = this;\n\n    if (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n      this.documentElement = newChild;\n    }\n\n    return newChild;\n  },\n  removeChild: function removeChild(oldChild) {\n    if (this.documentElement == oldChild) {\n      this.documentElement = null;\n    }\n\n    return _removeChild(this, oldChild);\n  },\n  replaceChild: function replaceChild(newChild, oldChild) {\n    //raises\n    _insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\n    newChild.ownerDocument = this;\n\n    if (oldChild) {\n      this.removeChild(oldChild);\n    }\n\n    if (isElementNode(newChild)) {\n      this.documentElement = newChild;\n    }\n  },\n  // Introduced in DOM Level 2:\n  importNode: function importNode(importedNode, deep) {\n    return _importNode(this, importedNode, deep);\n  },\n  // Introduced in DOM Level 2:\n  getElementById: function getElementById(id) {\n    var rtv = null;\n\n    _visitNode(this.documentElement, function (node) {\n      if (node.nodeType == ELEMENT_NODE) {\n        if (node.getAttribute('id') == id) {\n          rtv = node;\n          return true;\n        }\n      }\n    });\n\n    return rtv;\n  },\n\n  /**\n   * The `getElementsByClassName` method of `Document` interface returns an array-like object\n   * of all child elements which have **all** of the given class name(s).\n   *\n   * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n   *\n   *\n   * Warning: This is a live LiveNodeList.\n   * Changes in the DOM will reflect in the array as the changes occur.\n   * If an element selected by this array no longer qualifies for the selector,\n   * it will automatically be removed. Be aware of this for iteration purposes.\n   *\n   * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n   * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n   */\n  getElementsByClassName: function getElementsByClassName(classNames) {\n    var classNamesSet = toOrderedSet(classNames);\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      if (classNamesSet.length > 0) {\n        _visitNode(base.documentElement, function (node) {\n          if (node !== base && node.nodeType === ELEMENT_NODE) {\n            var nodeClassNames = node.getAttribute('class'); // can be null if the attribute does not exist\n\n            if (nodeClassNames) {\n              // before splitting and iterating just compare them for the most common case\n              var matches = classNames === nodeClassNames;\n\n              if (!matches) {\n                var nodeClassNamesSet = toOrderedSet(nodeClassNames);\n                matches = classNamesSet.every(arrayIncludes(nodeClassNamesSet));\n              }\n\n              if (matches) {\n                ls.push(node);\n              }\n            }\n          }\n        });\n      }\n\n      return ls;\n    });\n  },\n  //document factory method:\n  createElement: function createElement(tagName) {\n    var node = new Element();\n    node.ownerDocument = this;\n    node.nodeName = tagName;\n    node.tagName = tagName;\n    node.localName = tagName;\n    node.childNodes = new NodeList();\n    var attrs = node.attributes = new NamedNodeMap();\n    attrs._ownerElement = node;\n    return node;\n  },\n  createDocumentFragment: function createDocumentFragment() {\n    var node = new DocumentFragment();\n    node.ownerDocument = this;\n    node.childNodes = new NodeList();\n    return node;\n  },\n  createTextNode: function createTextNode(data) {\n    var node = new Text();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createComment: function createComment(data) {\n    var node = new Comment();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createCDATASection: function createCDATASection(data) {\n    var node = new CDATASection();\n    node.ownerDocument = this;\n    node.appendData(data);\n    return node;\n  },\n  createProcessingInstruction: function createProcessingInstruction(target, data) {\n    var node = new ProcessingInstruction();\n    node.ownerDocument = this;\n    node.tagName = node.target = target;\n    node.nodeValue = node.data = data;\n    return node;\n  },\n  createAttribute: function createAttribute(name) {\n    var node = new Attr();\n    node.ownerDocument = this;\n    node.name = name;\n    node.nodeName = name;\n    node.localName = name;\n    node.specified = true;\n    return node;\n  },\n  createEntityReference: function createEntityReference(name) {\n    var node = new EntityReference();\n    node.ownerDocument = this;\n    node.nodeName = name;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createElementNS: function createElementNS(namespaceURI, qualifiedName) {\n    var node = new Element();\n    var pl = qualifiedName.split(':');\n    var attrs = node.attributes = new NamedNodeMap();\n    node.childNodes = new NodeList();\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.tagName = qualifiedName;\n    node.namespaceURI = namespaceURI;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    attrs._ownerElement = node;\n    return node;\n  },\n  // Introduced in DOM Level 2:\n  createAttributeNS: function createAttributeNS(namespaceURI, qualifiedName) {\n    var node = new Attr();\n    var pl = qualifiedName.split(':');\n    node.ownerDocument = this;\n    node.nodeName = qualifiedName;\n    node.name = qualifiedName;\n    node.namespaceURI = namespaceURI;\n    node.specified = true;\n\n    if (pl.length == 2) {\n      node.prefix = pl[0];\n      node.localName = pl[1];\n    } else {\n      //el.prefix = null;\n      node.localName = qualifiedName;\n    }\n\n    return node;\n  }\n};\n\n_extends(Document, Node);\n\nfunction Element() {\n  this._nsMap = {};\n}\n\n;\nElement.prototype = {\n  nodeType: ELEMENT_NODE,\n  hasAttribute: function hasAttribute(name) {\n    return this.getAttributeNode(name) != null;\n  },\n  getAttribute: function getAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    return attr && attr.value || '';\n  },\n  getAttributeNode: function getAttributeNode(name) {\n    return this.attributes.getNamedItem(name);\n  },\n  setAttribute: function setAttribute(name, value) {\n    var attr = this.ownerDocument.createAttribute(name);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  removeAttribute: function removeAttribute(name) {\n    var attr = this.getAttributeNode(name);\n    attr && this.removeAttributeNode(attr);\n  },\n  //four real opeartion method\n  appendChild: function appendChild(newChild) {\n    if (newChild.nodeType === DOCUMENT_FRAGMENT_NODE) {\n      return this.insertBefore(newChild, null);\n    } else {\n      return _appendSingleChild(this, newChild);\n    }\n  },\n  setAttributeNode: function setAttributeNode(newAttr) {\n    return this.attributes.setNamedItem(newAttr);\n  },\n  setAttributeNodeNS: function setAttributeNodeNS(newAttr) {\n    return this.attributes.setNamedItemNS(newAttr);\n  },\n  removeAttributeNode: function removeAttributeNode(oldAttr) {\n    //console.log(this == oldAttr.ownerElement)\n    return this.attributes.removeNamedItem(oldAttr.nodeName);\n  },\n  //get real attribute name,and remove it by removeAttributeNode\n  removeAttributeNS: function removeAttributeNS(namespaceURI, localName) {\n    var old = this.getAttributeNodeNS(namespaceURI, localName);\n    old && this.removeAttributeNode(old);\n  },\n  hasAttributeNS: function hasAttributeNS(namespaceURI, localName) {\n    return this.getAttributeNodeNS(namespaceURI, localName) != null;\n  },\n  getAttributeNS: function getAttributeNS(namespaceURI, localName) {\n    var attr = this.getAttributeNodeNS(namespaceURI, localName);\n    return attr && attr.value || '';\n  },\n  setAttributeNS: function setAttributeNS(namespaceURI, qualifiedName, value) {\n    var attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n    attr.value = attr.nodeValue = \"\" + value;\n    this.setAttributeNode(attr);\n  },\n  getAttributeNodeNS: function getAttributeNodeNS(namespaceURI, localName) {\n    return this.attributes.getNamedItemNS(namespaceURI, localName);\n  },\n  getElementsByTagName: function getElementsByTagName(tagName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  },\n  getElementsByTagNameNS: function getElementsByTagNameNS(namespaceURI, localName) {\n    return new LiveNodeList(this, function (base) {\n      var ls = [];\n\n      _visitNode(base, function (node) {\n        if (node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)) {\n          ls.push(node);\n        }\n      });\n\n      return ls;\n    });\n  }\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n_extends(Element, Node);\n\nfunction Attr() {}\n\n;\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n\n_extends(Attr, Node);\n\nfunction CharacterData() {}\n\n;\nCharacterData.prototype = {\n  data: '',\n  substringData: function substringData(offset, count) {\n    return this.data.substring(offset, offset + count);\n  },\n  appendData: function appendData(text) {\n    text = this.data + text;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  },\n  insertData: function insertData(offset, text) {\n    this.replaceData(offset, 0, text);\n  },\n  appendChild: function appendChild(newChild) {\n    throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);\n  },\n  deleteData: function deleteData(offset, count) {\n    this.replaceData(offset, count, \"\");\n  },\n  replaceData: function replaceData(offset, count, text) {\n    var start = this.data.substring(0, offset);\n    var end = this.data.substring(offset + count);\n    text = start + text + end;\n    this.nodeValue = this.data = text;\n    this.length = text.length;\n  }\n};\n\n_extends(CharacterData, Node);\n\nfunction Text() {}\n\n;\nText.prototype = {\n  nodeName: \"#text\",\n  nodeType: TEXT_NODE,\n  splitText: function splitText(offset) {\n    var text = this.data;\n    var newText = text.substring(offset);\n    text = text.substring(0, offset);\n    this.data = this.nodeValue = text;\n    this.length = text.length;\n    var newNode = this.ownerDocument.createTextNode(newText);\n\n    if (this.parentNode) {\n      this.parentNode.insertBefore(newNode, this.nextSibling);\n    }\n\n    return newNode;\n  }\n};\n\n_extends(Text, CharacterData);\n\nfunction Comment() {}\n\n;\nComment.prototype = {\n  nodeName: \"#comment\",\n  nodeType: COMMENT_NODE\n};\n\n_extends(Comment, CharacterData);\n\nfunction CDATASection() {}\n\n;\nCDATASection.prototype = {\n  nodeName: \"#cdata-section\",\n  nodeType: CDATA_SECTION_NODE\n};\n\n_extends(CDATASection, CharacterData);\n\nfunction DocumentType() {}\n\n;\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n\n_extends(DocumentType, Node);\n\nfunction Notation() {}\n\n;\nNotation.prototype.nodeType = NOTATION_NODE;\n\n_extends(Notation, Node);\n\nfunction Entity() {}\n\n;\nEntity.prototype.nodeType = ENTITY_NODE;\n\n_extends(Entity, Node);\n\nfunction EntityReference() {}\n\n;\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n\n_extends(EntityReference, Node);\n\nfunction DocumentFragment() {}\n\n;\nDocumentFragment.prototype.nodeName = \"#document-fragment\";\nDocumentFragment.prototype.nodeType = DOCUMENT_FRAGMENT_NODE;\n\n_extends(DocumentFragment, Node);\n\nfunction ProcessingInstruction() {}\n\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n\n_extends(ProcessingInstruction, Node);\n\nfunction XMLSerializer() {}\n\nXMLSerializer.prototype.serializeToString = function (node, isHtml, nodeFilter) {\n  return nodeSerializeToString.call(node, isHtml, nodeFilter);\n};\n\nNode.prototype.toString = nodeSerializeToString;\n\nfunction nodeSerializeToString(isHtml, nodeFilter) {\n  var buf = [];\n  var refNode = this.nodeType == 9 && this.documentElement || this;\n  var prefix = refNode.prefix;\n  var uri = refNode.namespaceURI;\n\n  if (uri && prefix == null) {\n    //console.log(prefix)\n    var prefix = refNode.lookupPrefix(uri);\n\n    if (prefix == null) {\n      //isHTML = true;\n      var visibleNamespaces = [{\n        namespace: uri,\n        prefix: null\n      } //{namespace:uri,prefix:''}\n      ];\n    }\n  }\n\n  serializeToString(this, buf, isHtml, nodeFilter, visibleNamespaces); //console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\n  return buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n  var prefix = node.prefix || '';\n  var uri = node.namespaceURI; // According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n  // and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n  // > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n  // in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n  // and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n  // > [...] Furthermore, the attribute value [...] must not be an empty string.\n  // so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\n  if (!uri) {\n    return false;\n  }\n\n  if (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n    return false;\n  }\n\n  var i = visibleNamespaces.length;\n\n  while (i--) {\n    var ns = visibleNamespaces[i]; // get namespace prefix\n\n    if (ns.prefix === prefix) {\n      return ns.namespace !== uri;\n    }\n  }\n\n  return true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * The replacement text of any entity referred to directly or indirectly in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml/#CleanAttrVals\n * @see https://www.w3.org/TR/xml/#NT-AttValue\n */\n\n\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n  buf.push(' ', qualifiedName, '=\"', value.replace(/[<&\"]/g, _xmlEncoder), '\"');\n}\n\nfunction serializeToString(node, buf, isHTML, nodeFilter, visibleNamespaces) {\n  if (!visibleNamespaces) {\n    visibleNamespaces = [];\n  }\n\n  if (nodeFilter) {\n    node = nodeFilter(node);\n\n    if (node) {\n      if (typeof node == 'string') {\n        buf.push(node);\n        return;\n      }\n    } else {\n      return;\n    } //buf.sort.apply(attrs, attributeSorter);\n\n  }\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var len = attrs.length;\n      var child = node.firstChild;\n      var nodeName = node.tagName;\n      isHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML;\n      var prefixedNodeName = nodeName;\n\n      if (!isHTML && !node.prefix && node.namespaceURI) {\n        var defaultNS; // lookup current default ns from `xmlns` attribute\n\n        for (var ai = 0; ai < attrs.length; ai++) {\n          if (attrs.item(ai).name === 'xmlns') {\n            defaultNS = attrs.item(ai).value;\n            break;\n          }\n        }\n\n        if (!defaultNS) {\n          // lookup current default ns in visibleNamespaces\n          for (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n            var namespace = visibleNamespaces[nsi];\n\n            if (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n              defaultNS = namespace.namespace;\n              break;\n            }\n          }\n        }\n\n        if (defaultNS !== node.namespaceURI) {\n          for (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n            var namespace = visibleNamespaces[nsi];\n\n            if (namespace.namespace === node.namespaceURI) {\n              if (namespace.prefix) {\n                prefixedNodeName = namespace.prefix + ':' + nodeName;\n              }\n\n              break;\n            }\n          }\n        }\n      }\n\n      buf.push('<', prefixedNodeName);\n\n      for (var i = 0; i < len; i++) {\n        // add namespaces for attributes\n        var attr = attrs.item(i);\n\n        if (attr.prefix == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: attr.localName,\n            namespace: attr.value\n          });\n        } else if (attr.nodeName == 'xmlns') {\n          visibleNamespaces.push({\n            prefix: '',\n            namespace: attr.value\n          });\n        }\n      }\n\n      for (var i = 0; i < len; i++) {\n        var attr = attrs.item(i);\n\n        if (needNamespaceDefine(attr, isHTML, visibleNamespaces)) {\n          var prefix = attr.prefix || '';\n          var uri = attr.namespaceURI;\n          addSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n          visibleNamespaces.push({\n            prefix: prefix,\n            namespace: uri\n          });\n        }\n\n        serializeToString(attr, buf, isHTML, nodeFilter, visibleNamespaces);\n      } // add namespace for current node\n\n\n      if (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n        var prefix = node.prefix || '';\n        var uri = node.namespaceURI;\n        addSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n        visibleNamespaces.push({\n          prefix: prefix,\n          namespace: uri\n        });\n      }\n\n      if (child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)) {\n        buf.push('>'); //if is cdata child node\n\n        if (isHTML && /^script$/i.test(nodeName)) {\n          while (child) {\n            if (child.data) {\n              buf.push(child.data);\n            } else {\n              serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n            }\n\n            child = child.nextSibling;\n          }\n        } else {\n          while (child) {\n            serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n            child = child.nextSibling;\n          }\n        }\n\n        buf.push('</', prefixedNodeName, '>');\n      } else {\n        buf.push('/>');\n      } // remove added visible namespaces\n      //visibleNamespaces.length = startVisibleNamespaces;\n\n\n      return;\n\n    case DOCUMENT_NODE:\n    case DOCUMENT_FRAGMENT_NODE:\n      var child = node.firstChild;\n\n      while (child) {\n        serializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n        child = child.nextSibling;\n      }\n\n      return;\n\n    case ATTRIBUTE_NODE:\n      return addSerializedAttribute(buf, node.name, node.value);\n\n    case TEXT_NODE:\n      /**\n       * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n       * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n       * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n       * `&amp;` and `&lt;` respectively.\n       * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n       * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n       * when that string is not marking the end of a CDATA section.\n       *\n       * In the content of elements, character data is any string of characters\n       * which does not contain the start-delimiter of any markup\n       * and does not include the CDATA-section-close delimiter, `]]>`.\n       *\n       * @see https://www.w3.org/TR/xml/#NT-CharData\n       */\n      return buf.push(node.data.replace(/[<&]/g, _xmlEncoder).replace(/]]>/g, ']]&gt;'));\n\n    case CDATA_SECTION_NODE:\n      return buf.push('<![CDATA[', node.data, ']]>');\n\n    case COMMENT_NODE:\n      return buf.push(\"<!--\", node.data, \"-->\");\n\n    case DOCUMENT_TYPE_NODE:\n      var pubid = node.publicId;\n      var sysid = node.systemId;\n      buf.push('<!DOCTYPE ', node.name);\n\n      if (pubid) {\n        buf.push(' PUBLIC ', pubid);\n\n        if (sysid && sysid != '.') {\n          buf.push(' ', sysid);\n        }\n\n        buf.push('>');\n      } else if (sysid && sysid != '.') {\n        buf.push(' SYSTEM ', sysid, '>');\n      } else {\n        var sub = node.internalSubset;\n\n        if (sub) {\n          buf.push(\" [\", sub, \"]\");\n        }\n\n        buf.push(\">\");\n      }\n\n      return;\n\n    case PROCESSING_INSTRUCTION_NODE:\n      return buf.push(\"<?\", node.target, \" \", node.data, \"?>\");\n\n    case ENTITY_REFERENCE_NODE:\n      return buf.push('&', node.nodeName, ';');\n    //case ENTITY_NODE:\n    //case NOTATION_NODE:\n\n    default:\n      buf.push('??', node.nodeName);\n  }\n}\n\nfunction _importNode(doc, node, deep) {\n  var node2;\n\n  switch (node.nodeType) {\n    case ELEMENT_NODE:\n      node2 = node.cloneNode(false);\n      node2.ownerDocument = doc;\n    //var attrs = node2.attributes;\n    //var len = attrs.length;\n    //for(var i=0;i<len;i++){\n    //node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n    //}\n\n    case DOCUMENT_FRAGMENT_NODE:\n      break;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n      break;\n    //case ENTITY_REFERENCE_NODE:\n    //case PROCESSING_INSTRUCTION_NODE:\n    ////case TEXT_NODE:\n    //case CDATA_SECTION_NODE:\n    //case COMMENT_NODE:\n    //\tdeep = false;\n    //\tbreak;\n    //case DOCUMENT_NODE:\n    //case DOCUMENT_TYPE_NODE:\n    //cannot be imported.\n    //case ENTITY_NODE:\n    //case NOTATION_NODE：\n    //can not hit in level3\n    //default:throw e;\n  }\n\n  if (!node2) {\n    node2 = node.cloneNode(false); //false\n  }\n\n  node2.ownerDocument = doc;\n  node2.parentNode = null;\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_importNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n} //\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\n\n\nfunction _cloneNode(doc, node, deep) {\n  var node2 = new node.constructor();\n\n  for (var n in node) {\n    if (Object.prototype.hasOwnProperty.call(node, n)) {\n      var v = node[n];\n\n      if (_typeof(v) != \"object\") {\n        if (v != node2[n]) {\n          node2[n] = v;\n        }\n      }\n    }\n  }\n\n  if (node.childNodes) {\n    node2.childNodes = new NodeList();\n  }\n\n  node2.ownerDocument = doc;\n\n  switch (node2.nodeType) {\n    case ELEMENT_NODE:\n      var attrs = node.attributes;\n      var attrs2 = node2.attributes = new NamedNodeMap();\n      var len = attrs.length;\n      attrs2._ownerElement = node2;\n\n      for (var i = 0; i < len; i++) {\n        node2.setAttributeNode(_cloneNode(doc, attrs.item(i), true));\n      }\n\n      break;\n      ;\n\n    case ATTRIBUTE_NODE:\n      deep = true;\n  }\n\n  if (deep) {\n    var child = node.firstChild;\n\n    while (child) {\n      node2.appendChild(_cloneNode(doc, child, deep));\n      child = child.nextSibling;\n    }\n  }\n\n  return node2;\n}\n\nfunction __set__(object, key, value) {\n  object[key] = value;\n} //do dynamic\n\n\ntry {\n  if (Object.defineProperty) {\n    Object.defineProperty(LiveNodeList.prototype, 'length', {\n      get: function get() {\n        _updateLiveList(this);\n\n        return this.$$length;\n      }\n    });\n    Object.defineProperty(Node.prototype, 'textContent', {\n      get: function get() {\n        return getTextContent(this);\n      },\n      set: function set(data) {\n        switch (this.nodeType) {\n          case ELEMENT_NODE:\n          case DOCUMENT_FRAGMENT_NODE:\n            while (this.firstChild) {\n              this.removeChild(this.firstChild);\n            }\n\n            if (data || String(data)) {\n              this.appendChild(this.ownerDocument.createTextNode(data));\n            }\n\n            break;\n\n          default:\n            this.data = data;\n            this.value = data;\n            this.nodeValue = data;\n        }\n      }\n    });\n\n    function getTextContent(node) {\n      switch (node.nodeType) {\n        case ELEMENT_NODE:\n        case DOCUMENT_FRAGMENT_NODE:\n          var buf = [];\n          node = node.firstChild;\n\n          while (node) {\n            if (node.nodeType !== 7 && node.nodeType !== 8) {\n              buf.push(getTextContent(node));\n            }\n\n            node = node.nextSibling;\n          }\n\n          return buf.join('');\n\n        default:\n          return node.nodeValue;\n      }\n    }\n\n    __set__ = function __set__(object, key, value) {\n      //console.log(value)\n      object['$$' + key] = value;\n    };\n  }\n} catch (e) {//ie8\n} //if(typeof require == 'function'){\n\n\nexports.DocumentType = DocumentType;\nexports.DOMException = DOMException;\nexports.DOMImplementation = DOMImplementation;\nexports.Element = Element;\nexports.Node = Node;\nexports.NodeList = NodeList;\nexports.XMLSerializer = XMLSerializer; //}","import { toUint8, bytesMatch } from './byte-helpers.js';\nvar ID3 = toUint8([0x49, 0x44, 0x33]);\nexport var getId3Size = function getId3Size(bytes, offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  bytes = toUint8(bytes);\n  var flags = bytes[offset + 5];\n  var returnSize = bytes[offset + 6] << 21 | bytes[offset + 7] << 14 | bytes[offset + 8] << 7 | bytes[offset + 9];\n  var footerPresent = (flags & 16) >> 4;\n\n  if (footerPresent) {\n    return returnSize + 20;\n  }\n\n  return returnSize + 10;\n};\nexport var getId3Offset = function getId3Offset(bytes, offset) {\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  bytes = toUint8(bytes);\n\n  if (bytes.length - offset < 10 || !bytesMatch(bytes, ID3, {\n    offset: offset\n  })) {\n    return offset;\n  }\n\n  offset += getId3Size(bytes, offset); // recursive check for id3 tags as some files\n  // have multiple ID3 tag sections even though\n  // they should not.\n\n  return getId3Offset(bytes, offset);\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n!function (e, t) {\n  \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) && \"object\" == (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == (typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) ? exports.Recorder = t() : e.Recorder = t();\n}(\"undefined\" != typeof self ? self : this, function () {\n  return function (e) {\n    var t = {};\n\n    function o(n) {\n      if (t[n]) return t[n].exports;\n      var i = t[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return e[n].call(i.exports, i, i.exports, o), i.l = !0, i.exports;\n    }\n\n    return o.m = e, o.c = t, o.d = function (e, t, n) {\n      o.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: n\n      });\n    }, o.r = function (e) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(e, \"__esModule\", {\n        value: !0\n      });\n    }, o.t = function (e, t) {\n      if (1 & t && (e = o(e)), 8 & t) return e;\n      if (4 & t && \"object\" == _typeof(e) && e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (o.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: e\n      }), 2 & t && \"string\" != typeof e) for (var i in e) {\n        o.d(n, i, function (t) {\n          return e[t];\n        }.bind(null, i));\n      }\n      return n;\n    }, o.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e.default;\n      } : function () {\n        return e;\n      };\n      return o.d(t, \"a\", t), t;\n    }, o.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, o.p = \"\", o(o.s = 0);\n  }([function (e, t, o) {\n    \"use strict\";\n\n    (function (t) {\n      function o(e, t) {\n        if (null == e) return {};\n\n        var o,\n            n,\n            i = function (e, t) {\n          if (null == e) return {};\n          var o,\n              n,\n              i = {},\n              r = Object.keys(e);\n\n          for (n = 0; n < r.length; n++) {\n            o = r[n], t.indexOf(o) >= 0 || (i[o] = e[o]);\n          }\n\n          return i;\n        }(e, t);\n\n        if (Object.getOwnPropertySymbols) {\n          var r = Object.getOwnPropertySymbols(e);\n\n          for (n = 0; n < r.length; n++) {\n            o = r[n], t.indexOf(o) >= 0 || Object.prototype.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n          }\n        }\n\n        return i;\n      }\n\n      var n = t.AudioContext || t.webkitAudioContext,\n          i = function e() {\n        var t = this,\n            o = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};\n        if (!e.isRecordingSupported()) throw new Error(\"Recording is not supported in this browser\");\n        this.state = \"inactive\", this.config = Object.assign({\n          bufferLength: 4096,\n          encoderApplication: 2049,\n          encoderFrameSize: 20,\n          encoderPath: \"encoderWorker.min.js\",\n          encoderSampleRate: 48e3,\n          maxFramesPerPage: 40,\n          mediaTrackConstraints: !0,\n          monitorGain: 0,\n          numberOfChannels: 1,\n          recordingGain: 1,\n          resampleQuality: 3,\n          streamPages: !1,\n          wavBitDepth: 16,\n          sourceNode: {\n            context: null\n          }\n        }, o), this.encodedSamplePosition = 0, this.initAudioContext(), this.initialize = this.initWorklet().then(function () {\n          return t.initEncoder();\n        });\n      };\n\n      i.isRecordingSupported = function () {\n        var e = t.navigator && t.navigator.mediaDevices && t.navigator.mediaDevices.getUserMedia;\n        return n && e && t.WebAssembly;\n      }, i.version = \"8.0.5\", i.prototype.clearStream = function () {\n        this.stream && (this.stream.getTracks ? this.stream.getTracks().forEach(function (e) {\n          return e.stop();\n        }) : this.stream.stop());\n      }, i.prototype.close = function () {\n        return this.monitorGainNode.disconnect(), this.recordingGainNode.disconnect(), this.sourceNode && this.sourceNode.disconnect(), this.clearStream(), this.encoder && (this.encoderNode.disconnect(), this.encoder.postMessage({\n          command: \"close\"\n        })), this.config.sourceNode.context ? Promise.resolve() : this.audioContext.close();\n      }, i.prototype.encodeBuffers = function (e) {\n        if (\"recording\" === this.state) {\n          for (var t = [], o = 0; o < e.numberOfChannels; o++) {\n            t[o] = e.getChannelData(o);\n          }\n\n          this.encoder.postMessage({\n            command: \"encode\",\n            buffers: t\n          });\n        }\n      }, i.prototype.initAudioContext = function () {\n        this.audioContext = this.config.sourceNode.context ? this.config.sourceNode.context : new n(), this.monitorGainNode = this.audioContext.createGain(), this.setMonitorGain(this.config.monitorGain), this.recordingGainNode = this.audioContext.createGain(), this.setRecordingGain(this.config.recordingGain);\n      }, i.prototype.initEncoder = function () {\n        var e = this;\n        this.audioContext.audioWorklet ? (this.encoderNode = new AudioWorkletNode(this.audioContext, \"encoder-worklet\", {\n          numberOfOutputs: 0\n        }), this.encoder = this.encoderNode.port) : (console.log(\"audioWorklet support not detected. Falling back to scriptProcessor\"), this.encodeBuffers = function () {\n          return delete e.encodeBuffers;\n        }, this.encoderNode = this.audioContext.createScriptProcessor(this.config.bufferLength, this.config.numberOfChannels, this.config.numberOfChannels), this.encoderNode.onaudioprocess = function (t) {\n          var o = t.inputBuffer;\n          return e.encodeBuffers(o);\n        }, this.encoderNode.connect(this.audioContext.destination), this.encoder = new t.Worker(this.config.encoderPath));\n      }, i.prototype.initSourceNode = function () {\n        var e = this;\n        return this.config.sourceNode.context ? (this.sourceNode = this.config.sourceNode, Promise.resolve()) : t.navigator.mediaDevices.getUserMedia({\n          audio: this.config.mediaTrackConstraints\n        }).then(function (t) {\n          e.stream = t, e.sourceNode = e.audioContext.createMediaStreamSource(t);\n        });\n      }, i.prototype.initWorker = function () {\n        var e = this,\n            t = (this.config.streamPages ? this.streamPage : this.storePage).bind(this);\n        return this.recordedPages = [], this.totalLength = 0, new Promise(function (n) {\n          e.encoder.addEventListener(\"message\", function o(i) {\n            var r = i.data;\n\n            switch (r.message) {\n              case \"ready\":\n                n();\n                break;\n\n              case \"page\":\n                e.encodedSamplePosition = r.samplePosition, t(r.page);\n                break;\n\n              case \"done\":\n                e.encoder.removeEventListener(\"message\", o), e.finish();\n            }\n          }), e.encoder.start && e.encoder.start();\n          var i = e.config,\n              r = (i.sourceNode, o(i, [\"sourceNode\"]));\n          e.encoder.postMessage(Object.assign({\n            command: \"init\",\n            originalSampleRate: e.audioContext.sampleRate,\n            wavSampleRate: e.audioContext.sampleRate\n          }, r));\n        });\n      }, i.prototype.initWorklet = function () {\n        return this.audioContext.audioWorklet ? this.audioContext.audioWorklet.addModule(this.config.encoderPath) : Promise.resolve();\n      }, i.prototype.pause = function (e) {\n        var t = this;\n        if (\"recording\" === this.state) return this.state = \"paused\", this.recordingGainNode.disconnect(), e && this.config.streamPages ? new Promise(function (e) {\n          t.encoder.addEventListener(\"message\", function o(n) {\n            \"flushed\" === n.data.message && (t.encoder.removeEventListener(\"message\", o), t.onpause(), e());\n          }), t.encoder.start && t.encoder.start(), t.encoder.postMessage({\n            command: \"flush\"\n          });\n        }) : (this.onpause(), Promise.resolve());\n      }, i.prototype.resume = function () {\n        \"paused\" === this.state && (this.state = \"recording\", this.recordingGainNode.connect(this.encoderNode), this.onresume());\n      }, i.prototype.setRecordingGain = function (e) {\n        this.config.recordingGain = e, this.recordingGainNode && this.audioContext && this.recordingGainNode.gain.setTargetAtTime(e, this.audioContext.currentTime, .01);\n      }, i.prototype.setMonitorGain = function (e) {\n        this.config.monitorGain = e, this.monitorGainNode && this.audioContext && this.monitorGainNode.gain.setTargetAtTime(e, this.audioContext.currentTime, .01);\n      }, i.prototype.start = function () {\n        var e = this;\n        return \"inactive\" === this.state ? (this.state = \"loading\", this.encodedSamplePosition = 0, this.audioContext.resume().then(function () {\n          return e.initialize;\n        }).then(function () {\n          return Promise.all([e.initSourceNode(), e.initWorker()]);\n        }).then(function () {\n          e.state = \"recording\", e.encoder.postMessage({\n            command: \"getHeaderPages\"\n          }), e.sourceNode.connect(e.monitorGainNode), e.sourceNode.connect(e.recordingGainNode), e.monitorGainNode.connect(e.audioContext.destination), e.recordingGainNode.connect(e.encoderNode), e.onstart();\n        }).catch(function (t) {\n          throw e.state = \"inactive\", t;\n        })) : Promise.resolve();\n      }, i.prototype.stop = function () {\n        var e = this;\n        return \"paused\" === this.state || \"recording\" === this.state ? (this.state = \"inactive\", this.recordingGainNode.connect(this.encoderNode), this.monitorGainNode.disconnect(), this.clearStream(), new Promise(function (t) {\n          e.encoder.addEventListener(\"message\", function o(n) {\n            \"done\" === n.data.message && (e.encoder.removeEventListener(\"message\", o), t());\n          }), e.encoder.start && e.encoder.start(), e.encoder.postMessage({\n            command: \"done\"\n          });\n        })) : Promise.resolve();\n      }, i.prototype.storePage = function (e) {\n        this.recordedPages.push(e), this.totalLength += e.length;\n      }, i.prototype.streamPage = function (e) {\n        this.ondataavailable(e);\n      }, i.prototype.finish = function () {\n        if (!this.config.streamPages) {\n          var e = new Uint8Array(this.totalLength);\n          this.recordedPages.reduce(function (t, o) {\n            return e.set(o, t), t + o.length;\n          }, 0), this.ondataavailable(e);\n        }\n\n        this.onstop();\n      }, i.prototype.ondataavailable = function () {}, i.prototype.onpause = function () {}, i.prototype.onresume = function () {}, i.prototype.onstart = function () {}, i.prototype.onstop = function () {}, e.exports = i;\n    }).call(this, o(1));\n  }, function (e, t) {\n    var o;\n\n    o = function () {\n      return this;\n    }();\n\n    try {\n      o = o || new Function(\"return this\")();\n    } catch (e) {\n      \"object\" == (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) && (o = window);\n    }\n\n    e.exports = o;\n  }]);\n});","export default __webpack_public_path__ + \"encoderWorker.min.js\";","export default __webpack_public_path__ + \"waveWorker.min.js\";","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*!\n * wavesurfer.js microphone plugin 6.1.0 (2022-03-31)\n * https://wavesurfer-js.org\n * @license BSD-3-Clause\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === 'object') module.exports = factory();else if (typeof define === 'function' && define.amd) define(\"WaveSurfer\", [], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object') exports[\"WaveSurfer\"] = factory();else root[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"microphone\"] = factory();\n})(self, function () {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      \"use strict\";\n      /******/\n\n      var __webpack_modules__ = {\n        /***/\n        \"./src/plugin/microphone/index.js\":\n        /*!****************************************!*\\\n          !*** ./src/plugin/microphone/index.js ***!\n          \\****************************************/\n\n        /***/\n        function srcPluginMicrophoneIndexJs(module, exports) {\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports[\"default\"] = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            Object.defineProperty(Constructor, \"prototype\", {\n              writable: false\n            });\n            return Constructor;\n          }\n          /**\n           * @typedef {Object} MicrophonePluginParams\n           * @property {MediaStreamConstraints} constraints The constraints parameter is a\n           * MediaStreamConstaints object with two members: video and audio, describing\n           * the media types requested. Either or both must be specified.\n           * @property {number} bufferSize=4096 The buffer size in units of sample-frames.\n           * If specified, the bufferSize must be one of the following values: `256`,\n           * `512`, `1024`, `2048`, `4096`, `8192`, `16384`\n           * @property {number} numberOfInputChannels=1 Integer specifying the number of\n           * channels for this node's input. Values of up to 32 are supported.\n           * @property {number} numberOfOutputChannels=1 Integer specifying the number of\n           * channels for this node's output.\n           * @property {?boolean} deferInit Set to true to manually call\n           * `initPlugin('microphone')`\n           */\n\n          /**\n           * Visualize microphone input in a wavesurfer instance.\n           *\n           * @implements {PluginClass}\n           * @extends {Observer}\n           * @example\n           * // es6\n           * import MicrophonePlugin from 'wavesurfer.microphone.js';\n           *\n           * // commonjs\n           * var MicrophonePlugin = require('wavesurfer.microphone.js');\n           *\n           * // if you are using <script> tags\n           * var MicrophonePlugin = window.WaveSurfer.microphone;\n           *\n           * // ... initialising wavesurfer with the plugin\n           * var wavesurfer = WaveSurfer.create({\n           *   // wavesurfer options ...\n           *   plugins: [\n           *     MicrophonePlugin.create({\n           *       // plugin options ...\n           *     })\n           *   ]\n           * });\n           */\n\n\n          var MicrophonePlugin = /*#__PURE__*/function () {\n            function MicrophonePlugin(params, ws) {\n              var _this = this;\n\n              _classCallCheck(this, MicrophonePlugin);\n\n              this.params = params;\n              this.wavesurfer = ws;\n              this.active = false;\n              this.paused = false;\n              this.browser = this.detectBrowser();\n\n              this.reloadBufferFunction = function (e) {\n                return _this.reloadBuffer(e);\n              }; // cross-browser getUserMedia\n\n\n              var promisifiedOldGUM = function promisifiedOldGUM(constraints, successCallback, errorCallback) {\n                // get a hold of getUserMedia, if present\n                var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia; // Some browsers just don't implement it - return a rejected\n                // promise with an error to keep a consistent interface\n\n                if (!getUserMedia) {\n                  return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                } // otherwise, wrap the call to the old navigator.getUserMedia with\n                // a Promise\n\n\n                return new Promise(function (successCallback, errorCallback) {\n                  getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n                });\n              }; // Older browsers might not implement mediaDevices at all, so we set an\n              // empty object first\n\n\n              if (navigator.mediaDevices === undefined) {\n                navigator.mediaDevices = {};\n              } // Some browsers partially implement mediaDevices. We can't just assign\n              // an object with getUserMedia as it would overwrite existing\n              // properties. Here, we will just add the getUserMedia property if it's\n              // missing.\n\n\n              if (navigator.mediaDevices.getUserMedia === undefined) {\n                navigator.mediaDevices.getUserMedia = promisifiedOldGUM;\n              }\n\n              this.constraints = this.params.constraints || {\n                video: false,\n                audio: true\n              };\n              this.bufferSize = this.params.bufferSize || 4096;\n              this.numberOfInputChannels = this.params.numberOfInputChannels || 1;\n              this.numberOfOutputChannels = this.params.numberOfOutputChannels || 1;\n\n              this._onBackendCreated = function () {\n                // wavesurfer's AudioContext where we'll route the mic signal to\n                _this.micContext = _this.wavesurfer.backend.getAudioContext();\n              };\n            }\n\n            _createClass(MicrophonePlugin, [{\n              key: \"init\",\n              value: function init() {\n                this.wavesurfer.on('backend-created', this._onBackendCreated);\n\n                if (this.wavesurfer.backend) {\n                  this._onBackendCreated();\n                }\n              }\n              /**\n               * Destroy the microphone plugin.\n               */\n\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                // make sure the buffer is not redrawn during\n                // cleanup and demolition of this plugin.\n                this.paused = true;\n                this.wavesurfer.un('backend-created', this._onBackendCreated);\n                this.stop();\n              }\n              /**\n               * Allow user to select audio input device, e.g. microphone, and\n               * start the visualization.\n               */\n\n            }, {\n              key: \"start\",\n              value: function start() {\n                var _this2 = this;\n\n                navigator.mediaDevices.getUserMedia(this.constraints).then(function (data) {\n                  return _this2.gotStream(data);\n                }).catch(function (data) {\n                  return _this2.deviceError(data);\n                });\n              }\n              /**\n               * Pause/resume visualization.\n               */\n\n            }, {\n              key: \"togglePlay\",\n              value: function togglePlay() {\n                if (!this.active) {\n                  // start it first\n                  this.start();\n                } else {\n                  // toggle paused\n                  this.paused = !this.paused;\n\n                  if (this.paused) {\n                    this.pause();\n                  } else {\n                    this.play();\n                  }\n                }\n              }\n              /**\n               * Play visualization.\n               */\n\n            }, {\n              key: \"play\",\n              value: function play() {\n                this.paused = false;\n                this.connect();\n              }\n              /**\n               * Pause visualization.\n               */\n\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.paused = true; // disconnect sources so they can be used elsewhere\n                // (eg. during audio playback)\n\n                this.disconnect();\n              }\n              /**\n               * Stop the device stream and remove any remaining waveform drawing from\n               * the wavesurfer canvas.\n               */\n\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                if (this.active) {\n                  // stop visualization and device\n                  this.stopDevice(); // empty last frame\n\n                  this.wavesurfer.empty();\n                }\n              }\n              /**\n               * Stop the device and the visualization.\n               */\n\n            }, {\n              key: \"stopDevice\",\n              value: function stopDevice() {\n                this.active = false; // stop visualization\n\n                this.disconnect(); // stop stream from device\n\n                if (this.stream && this.stream.getTracks) {\n                  this.stream.getTracks().forEach(function (stream) {\n                    return stream.stop();\n                  });\n                }\n              }\n              /**\n               * Connect the media sources that feed the visualization.\n               */\n\n            }, {\n              key: \"connect\",\n              value: function connect() {\n                if (this.stream !== undefined) {\n                  // Create a local buffer for data to be copied to the Wavesurfer buffer for Edge\n                  if (this.browser.browser === 'edge') {\n                    this.localAudioBuffer = this.micContext.createBuffer(this.numberOfInputChannels, this.bufferSize, this.micContext.sampleRate);\n                  } // Create an AudioNode from the stream.\n\n\n                  this.mediaStreamSource = this.micContext.createMediaStreamSource(this.stream);\n                  this.levelChecker = this.micContext.createScriptProcessor(this.bufferSize, this.numberOfInputChannels, this.numberOfOutputChannels);\n                  this.mediaStreamSource.connect(this.levelChecker);\n                  this.levelChecker.connect(this.micContext.destination);\n                  this.levelChecker.onaudioprocess = this.reloadBufferFunction;\n                }\n              }\n              /**\n               * Disconnect the media sources that feed the visualization.\n               */\n\n            }, {\n              key: \"disconnect\",\n              value: function disconnect() {\n                if (this.mediaStreamSource !== undefined) {\n                  this.mediaStreamSource.disconnect();\n                }\n\n                if (this.levelChecker !== undefined) {\n                  this.levelChecker.disconnect();\n                  this.levelChecker.onaudioprocess = undefined;\n                }\n\n                if (this.localAudioBuffer !== undefined) {\n                  this.localAudioBuffer = undefined;\n                }\n              }\n              /**\n               * Redraw the waveform.\n               *\n               * @param {object} event Audioprocess event\n               */\n\n            }, {\n              key: \"reloadBuffer\",\n              value: function reloadBuffer(event) {\n                if (!this.paused) {\n                  this.wavesurfer.empty();\n\n                  if (this.browser.browser === 'edge') {\n                    // copy audio data to a local audio buffer,\n                    // from https://github.com/audiojs/audio-buffer-utils\n                    var channel, l;\n\n                    for (channel = 0, l = Math.min(this.localAudioBuffer.numberOfChannels, event.inputBuffer.numberOfChannels); channel < l; channel++) {\n                      this.localAudioBuffer.getChannelData(channel).set(event.inputBuffer.getChannelData(channel));\n                    }\n\n                    this.wavesurfer.loadDecodedBuffer(this.localAudioBuffer);\n                  } else {\n                    this.wavesurfer.loadDecodedBuffer(event.inputBuffer);\n                  }\n                }\n              }\n              /**\n               * Audio input device is ready.\n               *\n               * @param {MediaStream} stream The microphone's media stream.\n               */\n\n            }, {\n              key: \"gotStream\",\n              value: function gotStream(stream) {\n                this.stream = stream;\n                this.active = true; // start visualization\n\n                this.play(); // notify listeners\n\n                this.fireEvent('deviceReady', stream);\n              }\n              /**\n               * Device error callback.\n               *\n               * @param {string} code Error message\n               */\n\n            }, {\n              key: \"deviceError\",\n              value: function deviceError(code) {\n                // notify listeners\n                this.fireEvent('deviceError', code);\n              }\n              /**\n               * Extract browser version out of the provided user agent string.\n               * @param {!string} uastring userAgent string.\n               * @param {!string} expr Regular expression used as match criteria.\n               * @param {!number} pos position in the version string to be returned.\n               * @return {!number} browser version.\n               */\n\n            }, {\n              key: \"extractVersion\",\n              value: function extractVersion(uastring, expr, pos) {\n                var match = uastring.match(expr);\n                return match && match.length >= pos && parseInt(match[pos], 10);\n              }\n              /**\n               * Browser detector.\n               * @return {object} result containing browser, version and minVersion\n               *     properties.\n               */\n\n            }, {\n              key: \"detectBrowser\",\n              value: function detectBrowser() {\n                // Returned result object.\n                var result = {};\n                result.browser = null;\n                result.version = null;\n                result.minVersion = null; // Non supported browser.\n\n                if (typeof window === 'undefined' || !window.navigator) {\n                  result.browser = 'Not a supported browser.';\n                  return result;\n                }\n\n                if (navigator.mozGetUserMedia) {\n                  // Firefox\n                  result.browser = 'firefox';\n                  result.version = this.extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n                  result.minVersion = 31;\n                  return result;\n                } else if (navigator.webkitGetUserMedia) {\n                  // Chrome/Chromium/Webview/Opera\n                  result.browser = 'chrome';\n                  result.version = this.extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n                  result.minVersion = 38;\n                  return result;\n                } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n                  // Edge\n                  result.browser = 'edge';\n                  result.version = this.extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n                  result.minVersion = 10547;\n                  return result;\n                } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n                  // Safari\n                  result.browser = 'safari';\n                  result.minVersion = 11;\n                  result.version = this.extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n                  return result;\n                } // Non supported browser default.\n\n\n                result.browser = 'Not a supported browser.';\n                return result;\n              }\n            }], [{\n              key: \"create\",\n              value:\n              /**\n               * Microphone plugin definition factory\n               *\n               * This function must be used to create a plugin definition which can be\n               * used by wavesurfer to correctly instantiate the plugin.\n               *\n               * @param  {MicrophonePluginParams} params parameters use to initialise the plugin\n               * @return {PluginDefinition} an object representing the plugin\n               */\n              function create(params) {\n                return {\n                  name: 'microphone',\n                  deferInit: params && params.deferInit ? params.deferInit : false,\n                  params: params,\n                  instance: MicrophonePlugin\n                };\n              }\n            }]);\n\n            return MicrophonePlugin;\n          }();\n\n          exports[\"default\"] = MicrophonePlugin;\n          module.exports = exports.default;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(\"./src/plugin/microphone/index.js\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * videojs-wavesurfer\n * @version 3.8.0\n * @see https://github.com/collab-project/videojs-wavesurfer\n * @copyright 2014-2021 Collab\n * @license MIT\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof2(module)) === 'object') module.exports = factory(require(\"video.js\"), require(\"wavesurfer.js\"));else if (typeof define === 'function' && define.amd) define(\"VideojsWavesurfer\", [\"video.js\", \"wavesurfer.js\"], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object') exports[\"VideojsWavesurfer\"] = factory(require(\"video.js\"), require(\"wavesurfer.js\"));else root[\"VideojsWavesurfer\"] = factory(root[\"videojs\"], root[\"WaveSurfer\"]);\n})(self, function (__WEBPACK_EXTERNAL_MODULE_video_js__, __WEBPACK_EXTERNAL_MODULE_wavesurfer_js__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./node_modules/add-zero/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/add-zero/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesAddZeroIndexJs(module, exports, __webpack_require__) {\n          var __WEBPACK_AMD_DEFINE_RESULT__;\n\n          (function (exports) {\n            'use strict';\n\n            function addZero(value, digits) {\n              digits = digits || 2;\n              var isNegative = Number(value) < 0;\n              var buffer = value.toString();\n              var size = 0; // Strip minus sign if number is negative\n\n              if (isNegative) {\n                buffer = buffer.slice(1);\n              }\n\n              size = digits - buffer.length + 1;\n              buffer = new Array(size).join('0').concat(buffer); // Adds back minus sign if needed\n\n              return (isNegative ? '-' : '') + buffer;\n            }\n\n            if (true) {\n              !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n                return addZero;\n              }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n            } else {}\n          })(this);\n          /***/\n\n        },\n\n        /***/\n        \"./src/js/defaults.js\":\n        /*!****************************!*\\\n          !*** ./src/js/defaults.js ***!\n          \\****************************/\n\n        /***/\n        function srcJsDefaultsJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var pluginDefaultOptions = {\n            debug: false,\n            displayMilliseconds: true\n          };\n          var _default = pluginDefaultOptions;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/event.js\":\n        /*!*************************!*\\\n          !*** ./src/js/event.js ***!\n          \\*************************/\n\n        /***/\n        function srcJsEventJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          var Event = function Event() {\n            _classCallCheck(this, Event);\n          };\n\n          Event.READY = 'ready';\n          Event.ERROR = 'error';\n          Event.VOLUMECHANGE = 'volumechange';\n          Event.FULLSCREENCHANGE = 'fullscreenchange';\n          Event.TIMEUPDATE = 'timeupdate';\n          Event.ENDED = 'ended';\n          Event.PAUSE = 'pause';\n          Event.FINISH = 'finish';\n          Event.SEEK = 'seek';\n          Event.REDRAW = 'redraw';\n          Event.AUDIOPROCESS = 'audioprocess';\n          Event.DEVICE_READY = 'deviceReady';\n          Event.DEVICE_ERROR = 'deviceError';\n          Event.AUDIO_OUTPUT_READY = 'audioOutputReady';\n          Event.WAVE_READY = 'waveReady';\n          Event.PLAYBACK_FINISH = 'playbackFinish';\n          Event.ABORT = 'abort';\n          Event.RESIZE = 'resize';\n          Object.freeze(Event);\n          var _default = Event;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/middleware.js\":\n        /*!******************************!*\\\n          !*** ./src/js/middleware.js ***!\n          \\******************************/\n\n        /***/\n        function srcJsMiddlewareJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var WavesurferMiddleware = {\n            setSource: function setSource(srcObj, next) {\n              if (this.player.usingPlugin('wavesurfer')) {\n                var backend = this.player.wavesurfer().surfer.params.backend;\n                var src = srcObj.src;\n                var peaks = srcObj.peaks;\n\n                switch (backend) {\n                  case 'WebAudio':\n                    this.player.wavesurfer().load(src);\n                    break;\n\n                  default:\n                    next(null, srcObj);\n                    var element = this.player.tech_.el();\n\n                    if (peaks === undefined) {\n                      this.player.wavesurfer().load(element);\n                    } else {\n                      this.player.wavesurfer().load(element, peaks);\n                    }\n\n                    break;\n                }\n              } else {\n                next(null, srcObj);\n              }\n            }\n          };\n          var _default = WavesurferMiddleware;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/format-time.js\":\n        /*!*************************************!*\\\n          !*** ./src/js/utils/format-time.js ***!\n          \\*************************************/\n\n        /***/\n        function srcJsUtilsFormatTimeJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _addZero = _interopRequireDefault(__webpack_require__(\n          /*! add-zero */\n          \"./node_modules/add-zero/index.js\"));\n\n          var _parseMs = _interopRequireDefault(__webpack_require__(\n          /*! parse-ms */\n          \"./node_modules/parse-ms/index.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          var formatTime = function formatTime(seconds, guide) {\n            var displayMilliseconds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n            seconds = seconds < 0 ? 0 : seconds;\n\n            if (isNaN(seconds) || seconds === Infinity) {\n              seconds = 0;\n            }\n\n            var inputTime = (0, _parseMs.default)(seconds * 1000);\n            var guideTime = inputTime;\n\n            if (guide !== undefined) {\n              guideTime = (0, _parseMs.default)(guide * 1000);\n            }\n\n            var hr = (0, _addZero.default)(inputTime.hours);\n            var min = (0, _addZero.default)(inputTime.minutes);\n            var sec = (0, _addZero.default)(inputTime.seconds);\n            var ms = (0, _addZero.default)(inputTime.milliseconds, 3);\n\n            if (inputTime.days > 0 || guideTime.days > 0) {\n              var day = (0, _addZero.default)(inputTime.days);\n              return \"\".concat(day, \":\").concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (inputTime.hours > 0 || guideTime.hours > 0) {\n              return \"\".concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (displayMilliseconds) {\n              return \"\".concat(min, \":\").concat(sec, \":\").concat(ms);\n            }\n\n            return \"\".concat(min, \":\").concat(sec);\n          };\n\n          var _default = formatTime;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/log.js\":\n        /*!*****************************!*\\\n          !*** ./src/js/utils/log.js ***!\n          \\*****************************/\n\n        /***/\n        function srcJsUtilsLogJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              default: obj\n            };\n          }\n\n          var ERROR = 'error';\n          var WARN = 'warn';\n\n          var log = function log(args, logType, debug) {\n            if (debug === true) {\n              if (logType === ERROR) {\n                _video.default.log.error(args);\n              } else if (logType === WARN) {\n                _video.default.log.warn(args);\n              } else {\n                _video.default.log(args);\n              }\n            }\n          };\n\n          var _default = log;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/global/window.js\":\n        /*!***************************************!*\\\n          !*** ./node_modules/global/window.js ***!\n          \\***************************************/\n\n        /***/\n        function node_modulesGlobalWindowJs(module, __unused_webpack_exports, __webpack_require__) {\n          var win;\n\n          if (typeof window !== \"undefined\") {\n            win = window;\n          } else if (typeof __webpack_require__.g !== \"undefined\") {\n            win = __webpack_require__.g;\n          } else if (typeof self !== \"undefined\") {\n            win = self;\n          } else {\n            win = {};\n          }\n\n          module.exports = win;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/parse-ms/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/parse-ms/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesParseMsIndexJs(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {\n          \"use strict\";\n\n          __webpack_require__.r(__webpack_exports__);\n          /* harmony export */\n\n\n          __webpack_require__.d(__webpack_exports__, {\n            /* harmony export */\n            \"default\": function _default() {\n              return (\n                /* binding */\n                parseMilliseconds\n              );\n            }\n            /* harmony export */\n\n          });\n\n          function parseMilliseconds(milliseconds) {\n            if (typeof milliseconds !== 'number') {\n              throw new TypeError('Expected a number');\n            }\n\n            var roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil;\n            return {\n              days: roundTowardsZero(milliseconds / 86400000),\n              hours: roundTowardsZero(milliseconds / 3600000) % 24,\n              minutes: roundTowardsZero(milliseconds / 60000) % 60,\n              seconds: roundTowardsZero(milliseconds / 1000) % 60,\n              milliseconds: roundTowardsZero(milliseconds) % 1000,\n              microseconds: roundTowardsZero(milliseconds * 1000) % 1000,\n              nanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000\n            };\n          }\n          /***/\n\n        },\n\n        /***/\n        \"video.js\":\n        /*!*************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"video.js\",\"commonjs2\":\"video.js\",\"amd\":\"video.js\",\"root\":\"videojs\"} ***!\n          \\*************************************************************************************************/\n\n        /***/\n        function videoJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n          /***/\n        },\n\n        /***/\n        \"wavesurfer.js\":\n        /*!*******************************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"wavesurfer.js\",\"commonjs2\":\"wavesurfer.js\",\"amd\":\"wavesurfer.js\",\"root\":\"WaveSurfer\"} ***!\n          \\*******************************************************************************************************************/\n\n        /***/\n        function wavesurferJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_wavesurfer_js__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /* webpack/runtime/define property getters */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define getter functions for harmony exports\n\n        /******/\n        __webpack_require__.d = function (exports, definition) {\n          /******/\n          for (var key in definition) {\n            /******/\n            if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n              /******/\n              Object.defineProperty(exports, key, {\n                enumerable: true,\n                get: definition[key]\n              });\n              /******/\n            }\n            /******/\n\n          }\n          /******/\n\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/global */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.g = function () {\n          /******/\n          if ((typeof globalThis === \"undefined\" ? \"undefined\" : _typeof2(globalThis)) === 'object') return globalThis;\n          /******/\n\n          try {\n            /******/\n            return this || new Function('return this')();\n            /******/\n          } catch (e) {\n            /******/\n            if ((typeof window === \"undefined\" ? \"undefined\" : _typeof2(window)) === 'object') return window;\n            /******/\n          }\n          /******/\n\n        }();\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/hasOwnProperty shorthand */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.o = function (obj, prop) {\n          return Object.prototype.hasOwnProperty.call(obj, prop);\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/make namespace object */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define __esModule on exports\n\n        /******/\n        __webpack_require__.r = function (exports) {\n          /******/\n          if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            /******/\n            Object.defineProperty(exports, Symbol.toStringTag, {\n              value: 'Module'\n            });\n            /******/\n          }\n          /******/\n\n\n          Object.defineProperty(exports, '__esModule', {\n            value: true\n          });\n          /******/\n        };\n        /******/\n\n      })();\n      /******/\n\n      /************************************************************************/\n\n\n      var __webpack_exports__ = {}; // This entry need to be wrapped in an IIFE because it need to be in strict mode.\n\n      (function () {\n        \"use strict\";\n\n        var exports = __webpack_exports__;\n        /*!**************************************!*\\\n          !*** ./src/js/videojs.wavesurfer.js ***!\n          \\**************************************/\n\n        function _typeof(obj) {\n          \"@babel/helpers - typeof\";\n\n          if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n            _typeof = function _typeof(obj) {\n              return typeof obj;\n            };\n          } else {\n            _typeof = function _typeof(obj) {\n              return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n            };\n          }\n\n          return _typeof(obj);\n        }\n\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n        exports.Wavesurfer = void 0;\n\n        var _event = _interopRequireDefault(__webpack_require__(\n        /*! ./event */\n        \"./src/js/event.js\"));\n\n        var _log2 = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/log */\n        \"./src/js/utils/log.js\"));\n\n        var _formatTime = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/format-time */\n        \"./src/js/utils/format-time.js\"));\n\n        var _defaults = _interopRequireDefault(__webpack_require__(\n        /*! ./defaults */\n        \"./src/js/defaults.js\"));\n\n        var _middleware = _interopRequireDefault(__webpack_require__(\n        /*! ./middleware */\n        \"./src/js/middleware.js\"));\n\n        var _window = _interopRequireDefault(__webpack_require__(\n        /*! global/window */\n        \"./node_modules/global/window.js\"));\n\n        var _video = _interopRequireDefault(__webpack_require__(\n        /*! video.js */\n        \"video.js\"));\n\n        var _wavesurfer = _interopRequireDefault(__webpack_require__(\n        /*! wavesurfer.js */\n        \"wavesurfer.js\"));\n\n        function _interopRequireDefault(obj) {\n          return obj && obj.__esModule ? obj : {\n            default: obj\n          };\n        }\n\n        function _classCallCheck(instance, Constructor) {\n          if (!(instance instanceof Constructor)) {\n            throw new TypeError(\"Cannot call a class as a function\");\n          }\n        }\n\n        function _defineProperties(target, props) {\n          for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if (\"value\" in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n          }\n        }\n\n        function _createClass(Constructor, protoProps, staticProps) {\n          if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n          if (staticProps) _defineProperties(Constructor, staticProps);\n          return Constructor;\n        }\n\n        function _inherits(subClass, superClass) {\n          if (typeof superClass !== \"function\" && superClass !== null) {\n            throw new TypeError(\"Super expression must either be null or a function\");\n          }\n\n          subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n              value: subClass,\n              writable: true,\n              configurable: true\n            }\n          });\n          if (superClass) _setPrototypeOf(subClass, superClass);\n        }\n\n        function _setPrototypeOf(o, p) {\n          _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n            o.__proto__ = p;\n            return o;\n          };\n\n          return _setPrototypeOf(o, p);\n        }\n\n        function _createSuper(Derived) {\n          var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n          return function _createSuperInternal() {\n            var Super = _getPrototypeOf(Derived),\n                result;\n\n            if (hasNativeReflectConstruct) {\n              var NewTarget = _getPrototypeOf(this).constructor;\n\n              result = Reflect.construct(Super, arguments, NewTarget);\n            } else {\n              result = Super.apply(this, arguments);\n            }\n\n            return _possibleConstructorReturn(this, result);\n          };\n        }\n\n        function _possibleConstructorReturn(self, call) {\n          if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n            return call;\n          }\n\n          return _assertThisInitialized(self);\n        }\n\n        function _assertThisInitialized(self) {\n          if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n          }\n\n          return self;\n        }\n\n        function _isNativeReflectConstruct() {\n          if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n          if (Reflect.construct.sham) return false;\n          if (typeof Proxy === \"function\") return true;\n\n          try {\n            Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n\n        function _getPrototypeOf(o) {\n          _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n            return o.__proto__ || Object.getPrototypeOf(o);\n          };\n          return _getPrototypeOf(o);\n        }\n\n        var Plugin = _video.default.getPlugin('plugin');\n\n        var wavesurferPluginName = 'wavesurfer';\n        var wavesurferClassName = 'vjs-wavedisplay';\n        var wavesurferStyleName = 'vjs-wavesurfer';\n        var WEBAUDIO = 'WebAudio';\n        var MEDIAELEMENT = 'MediaElement';\n        var MEDIAELEMENT_WEBAUDIO = 'MediaElementWebAudio';\n\n        var Wavesurfer = function (_Plugin) {\n          _inherits(Wavesurfer, _Plugin);\n\n          var _super = _createSuper(Wavesurfer);\n\n          function Wavesurfer(player, options) {\n            var _this;\n\n            _classCallCheck(this, Wavesurfer);\n\n            _this = _super.call(this, player, options);\n            player.addClass(wavesurferStyleName);\n            options = _video.default.mergeOptions(_defaults.default, options);\n            _this.waveReady = false;\n            _this.waveFinished = false;\n            _this.liveMode = false;\n            _this.backend = null;\n            _this.debug = options.debug.toString() === 'true';\n            _this.textTracksEnabled = _this.player.options_.tracks.length > 0;\n            _this.displayMilliseconds = options.displayMilliseconds;\n\n            if (options.formatTime && typeof options.formatTime === 'function') {\n              _this.setFormatTime(options.formatTime);\n            } else {\n              _this.setFormatTime(function (seconds, guide) {\n                return (0, _formatTime.default)(seconds, guide, _this.displayMilliseconds);\n              });\n            }\n\n            _this.player.one(_event.default.READY, _this.initialize.bind(_assertThisInitialized(_this)));\n\n            return _this;\n          }\n\n          _createClass(Wavesurfer, [{\n            key: \"initialize\",\n            value: function initialize() {\n              var _this2 = this;\n\n              if (this.player.bigPlayButton !== undefined) {\n                this.player.bigPlayButton.hide();\n              }\n\n              var mergedOptions = this.parseOptions(this.player.options_.plugins.wavesurfer);\n\n              if (this.player.options_.controls === true) {\n                this.player.controlBar.show();\n                this.player.controlBar.el_.style.display = 'flex';\n\n                if (this.backend === WEBAUDIO && this.player.controlBar.progressControl !== undefined) {\n                  this.player.controlBar.progressControl.hide();\n                }\n\n                if (this.player.controlBar.pictureInPictureToggle !== undefined) {\n                  this.player.controlBar.pictureInPictureToggle.hide();\n                }\n\n                var uiElements = ['currentTimeDisplay', 'timeDivider', 'durationDisplay'];\n                uiElements.forEach(function (element) {\n                  element = _this2.player.controlBar[element];\n\n                  if (element !== undefined) {\n                    element.el_.style.display = 'block';\n                    element.show();\n                  }\n                });\n\n                if (this.player.controlBar.remainingTimeDisplay !== undefined) {\n                  this.player.controlBar.remainingTimeDisplay.hide();\n                }\n\n                if (this.backend === WEBAUDIO && this.player.controlBar.playToggle !== undefined) {\n                  this.player.controlBar.playToggle.on(['tap', 'click'], this.onPlayToggle.bind(this));\n                  this.player.controlBar.playToggle.hide();\n                }\n              }\n\n              this.surfer = _wavesurfer.default.create(mergedOptions);\n              this.surfer.on(_event.default.ERROR, this.onWaveError.bind(this));\n              this.surfer.on(_event.default.FINISH, this.onWaveFinish.bind(this));\n              this.backend = this.surfer.params.backend;\n              this.log('Using wavesurfer.js ' + this.backend + ' backend.');\n\n              if ('microphone' in this.player.wavesurfer().surfer.getActivePlugins()) {\n                this.liveMode = true;\n                this.waveReady = true;\n                this.log('wavesurfer.js microphone plugin enabled.');\n                this.player.controlBar.playToggle.show();\n                this.surfer.microphone.on(_event.default.DEVICE_ERROR, this.onWaveError.bind(this));\n              }\n\n              this.surferReady = this.onWaveReady.bind(this);\n\n              if (this.backend === WEBAUDIO) {\n                this.surferProgress = this.onWaveProgress.bind(this);\n                this.surferSeek = this.onWaveSeek.bind(this);\n\n                if (this.player.muted()) {\n                  this.setVolume(0);\n                }\n              }\n\n              if (!this.liveMode) {\n                this.setupPlaybackEvents(true);\n              }\n\n              this.player.on(_event.default.VOLUMECHANGE, this.onVolumeChange.bind(this));\n              this.player.on(_event.default.FULLSCREENCHANGE, this.onScreenChange.bind(this));\n\n              if (this.player.options_.fluid === true) {\n                this.surfer.drawer.wrapper.className = wavesurferClassName;\n              }\n            }\n          }, {\n            key: \"parseOptions\",\n            value: function parseOptions() {\n              var surferOpts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n              var rect = this.player.el_.getBoundingClientRect();\n              this.originalWidth = this.player.options_.width || rect.width;\n              this.originalHeight = this.player.options_.height || rect.height;\n              var controlBarHeight = this.player.controlBar.height();\n\n              if (this.player.options_.controls === true && controlBarHeight === 0) {\n                controlBarHeight = 30;\n              }\n\n              if (surferOpts.container === undefined) {\n                surferOpts.container = this.player.el_;\n              }\n\n              if (surferOpts.waveformHeight === undefined) {\n                var playerHeight = rect.height;\n                surferOpts.height = playerHeight - controlBarHeight;\n              } else {\n                surferOpts.height = surferOpts.waveformHeight;\n              }\n\n              if (surferOpts.splitChannels && surferOpts.splitChannels === true) {\n                surferOpts.height /= 2;\n              }\n\n              if ('backend' in surferOpts) {\n                this.backend = surferOpts.backend;\n              } else {\n                surferOpts.backend = this.backend = MEDIAELEMENT;\n              }\n\n              return surferOpts;\n            }\n          }, {\n            key: \"setupPlaybackEvents\",\n            value: function setupPlaybackEvents(enable) {\n              if (enable === false) {\n                this.surfer.un(_event.default.READY, this.surferReady);\n\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.un(_event.default.AUDIOPROCESS, this.surferProgress);\n                  this.surfer.un(_event.default.SEEK, this.surferSeek);\n                }\n              } else if (enable === true) {\n                this.surfer.on(_event.default.READY, this.surferReady);\n\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.on(_event.default.AUDIOPROCESS, this.surferProgress);\n                  this.surfer.on(_event.default.SEEK, this.surferSeek);\n                }\n              }\n            }\n          }, {\n            key: \"load\",\n            value: function load(url, peaks) {\n              if (url instanceof Blob || url instanceof File) {\n                this.log('Loading object: ' + JSON.stringify(url));\n                this.surfer.loadBlob(url);\n              } else {\n                if (peaks !== undefined) {\n                  this.loadPeaks(url, peaks);\n                } else {\n                  if (typeof url === 'string') {\n                    this.log('Loading URL: ' + url);\n                  } else {\n                    this.log('Loading element: ' + url);\n                  }\n\n                  this.surfer.load(url);\n                }\n              }\n            }\n          }, {\n            key: \"loadPeaks\",\n            value: function loadPeaks(url, peaks) {\n              var _this3 = this;\n\n              if (Array.isArray(peaks)) {\n                this.log('Loading URL with array of peaks: ' + url);\n                this.surfer.load(url, peaks);\n              } else {\n                var requestOptions = {\n                  url: peaks,\n                  responseType: 'json'\n                };\n\n                if (this.player.options_.plugins.wavesurfer.xhr !== undefined) {\n                  requestOptions.xhr = this.player.options_.plugins.wavesurfer.xhr;\n                }\n\n                var request = _wavesurfer.default.util.fetchFile(requestOptions);\n\n                request.once('success', function (data) {\n                  _this3.log('Loaded Peak Data URL: ' + peaks);\n\n                  if (data && data.data) {\n                    _this3.surfer.load(url, data.data);\n                  } else {\n                    _this3.player.trigger(_event.default.ERROR, 'Could not load peaks data from ' + peaks);\n\n                    _this3.log(err, 'error');\n                  }\n                });\n                request.once('error', function (e) {\n                  _this3.player.trigger(_event.default.ERROR, 'Unable to retrieve peak data from ' + peaks + '. Status code: ' + request.response.status);\n                });\n              }\n            }\n          }, {\n            key: \"play\",\n            value: function play() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                this.player.controlBar.playToggle.handlePlay();\n              }\n\n              if (this.liveMode) {\n                if (!this.surfer.microphone.active) {\n                  this.log('Start microphone');\n                  this.surfer.microphone.start();\n                } else {\n                  var paused = !this.surfer.microphone.paused;\n\n                  if (paused) {\n                    this.pause();\n                  } else {\n                    this.log('Resume microphone');\n                    this.surfer.microphone.play();\n                  }\n                }\n              } else {\n                this.log('Start playback');\n                this.player.play();\n                this.surfer.play();\n              }\n            }\n          }, {\n            key: \"pause\",\n            value: function pause() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                this.player.controlBar.playToggle.handlePause();\n              }\n\n              if (this.liveMode) {\n                this.log('Pause microphone');\n                this.surfer.microphone.pause();\n              } else {\n                this.log('Pause playback');\n\n                if (!this.waveFinished) {\n                  this.surfer.pause();\n                } else {\n                  this.waveFinished = false;\n                }\n\n                this.setCurrentTime();\n              }\n            }\n          }, {\n            key: \"dispose\",\n            value: function dispose() {\n              if (this.surfer) {\n                if (this.liveMode && this.surfer.microphone) {\n                  this.surfer.microphone.destroy();\n                  this.log('Destroyed microphone plugin');\n                }\n\n                this.surfer.destroy();\n              }\n\n              this.log('Destroyed plugin');\n            }\n          }, {\n            key: \"isDestroyed\",\n            value: function isDestroyed() {\n              return this.player && this.player.children() === null;\n            }\n          }, {\n            key: \"destroy\",\n            value: function destroy() {\n              this.player.dispose();\n            }\n          }, {\n            key: \"setVolume\",\n            value: function setVolume(volume) {\n              if (volume !== undefined) {\n                this.log('Changing volume to: ' + volume);\n                this.player.volume(volume);\n              }\n            }\n          }, {\n            key: \"exportImage\",\n            value: function exportImage(format, quality) {\n              var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'blob';\n              return this.surfer.exportImage(format, quality, type);\n            }\n          }, {\n            key: \"setAudioOutput\",\n            value: function setAudioOutput(deviceId) {\n              var _this4 = this;\n\n              if (deviceId) {\n                this.surfer.setSinkId(deviceId).then(function (result) {\n                  _this4.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n                }).catch(function (err) {\n                  _this4.player.trigger(_event.default.ERROR, err);\n\n                  _this4.log(err, 'error');\n                });\n              }\n            }\n          }, {\n            key: \"getCurrentTime\",\n            value: function getCurrentTime() {\n              var currentTime = this.surfer.getCurrentTime();\n              currentTime = isNaN(currentTime) ? 0 : currentTime;\n              return currentTime;\n            }\n          }, {\n            key: \"setCurrentTime\",\n            value: function setCurrentTime(currentTime, duration) {\n              if (currentTime === undefined) {\n                currentTime = this.surfer.getCurrentTime();\n              }\n\n              if (duration === undefined) {\n                duration = this.surfer.getDuration();\n              }\n\n              currentTime = isNaN(currentTime) ? 0 : currentTime;\n              duration = isNaN(duration) ? 0 : duration;\n\n              if (this.player.controlBar.currentTimeDisplay && this.player.controlBar.currentTimeDisplay.contentEl() && this.player.controlBar.currentTimeDisplay.contentEl().lastChild) {\n                var time = Math.min(currentTime, duration);\n                this.player.controlBar.currentTimeDisplay.formattedTime_ = this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent = this._formatTime(time, duration, this.displayMilliseconds);\n              }\n\n              if (this.textTracksEnabled && this.player.tech_ && this.player.tech_.el_) {\n                this.player.tech_.setCurrentTime(currentTime);\n              }\n            }\n          }, {\n            key: \"getDuration\",\n            value: function getDuration() {\n              var duration = this.surfer.getDuration();\n              duration = isNaN(duration) ? 0 : duration;\n              return duration;\n            }\n          }, {\n            key: \"setDuration\",\n            value: function setDuration(duration) {\n              if (duration === undefined) {\n                duration = this.surfer.getDuration();\n              }\n\n              duration = isNaN(duration) ? 0 : duration;\n\n              if (this.player.controlBar.durationDisplay && this.player.controlBar.durationDisplay.contentEl() && this.player.controlBar.durationDisplay.contentEl().lastChild) {\n                this.player.controlBar.durationDisplay.formattedTime_ = this.player.controlBar.durationDisplay.contentEl().lastChild.textContent = this._formatTime(duration, duration, this.displayMilliseconds);\n              }\n            }\n          }, {\n            key: \"onWaveReady\",\n            value: function onWaveReady() {\n              var _this5 = this;\n\n              this.waveReady = true;\n              this.waveFinished = false;\n              this.liveMode = false;\n              this.log('Waveform is ready');\n              this.player.trigger(_event.default.WAVE_READY);\n\n              if (this.backend === WEBAUDIO) {\n                this.setCurrentTime();\n                this.setDuration();\n\n                if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.contentEl()) {\n                  this.player.controlBar.playToggle.show();\n                }\n              }\n\n              if (this.player.loadingSpinner.contentEl()) {\n                this.player.loadingSpinner.hide();\n              }\n\n              if (this.player.options_.autoplay === true) {\n                this.setVolume(0);\n\n                if (this.backend === WEBAUDIO) {\n                  this.play();\n                } else {\n                  this.player.play().catch(function (e) {\n                    _this5.onWaveError(e);\n                  });\n                }\n              }\n            }\n          }, {\n            key: \"onWaveFinish\",\n            value: function onWaveFinish() {\n              var _this6 = this;\n\n              this.log('Finished playback');\n              this.player.trigger(_event.default.PLAYBACK_FINISH);\n\n              if (this.player.options_.loop === true) {\n                if (this.backend === WEBAUDIO) {\n                  this.surfer.stop();\n                  this.play();\n                }\n              } else {\n                this.waveFinished = true;\n\n                if (this.backend === WEBAUDIO) {\n                  this.pause();\n                  this.player.trigger(_event.default.ENDED);\n                  this.surfer.once(_event.default.SEEK, function () {\n                    if (_this6.player.controlBar.playToggle !== undefined) {\n                      _this6.player.controlBar.playToggle.removeClass('vjs-ended');\n                    }\n\n                    _this6.player.trigger(_event.default.PAUSE);\n                  });\n                }\n              }\n            }\n          }, {\n            key: \"onWaveProgress\",\n            value: function onWaveProgress(time) {\n              this.setCurrentTime();\n            }\n          }, {\n            key: \"onWaveSeek\",\n            value: function onWaveSeek() {\n              this.setCurrentTime();\n            }\n          }, {\n            key: \"onWaveError\",\n            value: function onWaveError(error) {\n              if (error.name && error.name === 'AbortError' || error.name === 'DOMException' && error.message.startsWith('The operation was aborted')) {\n                this.player.trigger(_event.default.ABORT, error);\n              } else {\n                this.player.trigger(_event.default.ERROR, error);\n                this.log(error, 'error');\n              }\n            }\n          }, {\n            key: \"onPlayToggle\",\n            value: function onPlayToggle() {\n              if (this.player.controlBar.playToggle !== undefined && this.player.controlBar.playToggle.hasClass('vjs-ended')) {\n                this.player.controlBar.playToggle.removeClass('vjs-ended');\n              }\n\n              if (this.surfer.isPlaying()) {\n                this.pause();\n              } else {\n                this.play();\n              }\n            }\n          }, {\n            key: \"onVolumeChange\",\n            value: function onVolumeChange() {\n              var volume = this.player.volume();\n\n              if (this.player.muted()) {\n                volume = 0;\n              }\n\n              this.surfer.setVolume(volume);\n            }\n          }, {\n            key: \"onScreenChange\",\n            value: function onScreenChange() {\n              var _this7 = this;\n\n              var fullscreenDelay = this.player.setInterval(function () {\n                var isFullscreen = _this7.player.isFullscreen();\n\n                var newWidth, newHeight;\n\n                if (!isFullscreen) {\n                  newWidth = _this7.originalWidth;\n                  newHeight = _this7.originalHeight;\n                }\n\n                if (_this7.waveReady) {\n                  if (_this7.liveMode && !_this7.surfer.microphone.active) {\n                    return;\n                  }\n\n                  _this7.redrawWaveform(newWidth, newHeight);\n                }\n\n                _this7.player.clearInterval(fullscreenDelay);\n              }, 100);\n            }\n          }, {\n            key: \"redrawWaveform\",\n            value: function redrawWaveform(newWidth, newHeight) {\n              if (!this.isDestroyed()) {\n                if (this.player.el_) {\n                  var rect = this.player.el_.getBoundingClientRect();\n\n                  if (newWidth === undefined) {\n                    newWidth = rect.width;\n                  }\n\n                  if (newHeight === undefined) {\n                    newHeight = rect.height;\n                  }\n                }\n\n                this.surfer.drawer.destroy();\n                this.surfer.params.width = newWidth;\n                this.surfer.params.height = newHeight - this.player.controlBar.height();\n                this.surfer.createDrawer();\n                this.surfer.drawer.wrapper.className = wavesurferClassName;\n                this.surfer.drawBuffer();\n                this.surfer.drawer.progress(this.surfer.backend.getPlayedPercents());\n              }\n            }\n          }, {\n            key: \"log\",\n            value: function log(args, logType) {\n              (0, _log2.default)(args, logType, this.debug);\n            }\n          }, {\n            key: \"setFormatTime\",\n            value: function setFormatTime(customImplementation) {\n              this._formatTime = customImplementation;\n\n              _video.default.setFormatTime(this._formatTime);\n            }\n          }]);\n\n          return Wavesurfer;\n        }(Plugin);\n\n        exports.Wavesurfer = Wavesurfer;\n        Wavesurfer.VERSION = \"3.8.0\";\n        _video.default.Wavesurfer = Wavesurfer;\n\n        if (_video.default.getPlugin(wavesurferPluginName) === undefined) {\n          _video.default.registerPlugin(wavesurferPluginName, Wavesurfer);\n        }\n\n        _video.default.use('*', function (player) {\n          _middleware.default.player = player;\n          return _middleware.default;\n        });\n      })();\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","function _typeof3(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof3 = function _typeof3(obj) { return typeof obj; }; } else { _typeof3 = function _typeof3(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof3(obj); }\n\n/*!\n * videojs-record\n * @version 4.5.0\n * @see https://github.com/collab-project/videojs-record\n * @copyright 2014-2021 Collab\n * @license MIT\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof3(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof3(module)) === 'object') module.exports = factory(require(\"recordrtc\"), require(\"video.js\"));else if (typeof define === 'function' && define.amd) define(\"VideojsRecord\", [\"recordrtc\", \"video.js\"], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof3(exports)) === 'object') exports[\"VideojsRecord\"] = factory(require(\"recordrtc\"), require(\"video.js\"));else root[\"VideojsRecord\"] = factory(root[\"RecordRTC\"], root[\"videojs\"]);\n})(self, function (__WEBPACK_EXTERNAL_MODULE_recordrtc__, __WEBPACK_EXTERNAL_MODULE_video_js__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersAssertThisInitializedJs(module) {\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          module.exports = _assertThisInitialized;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\":\n        /*!*****************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/asyncToGenerator.js ***!\n          \\*****************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersAsyncToGeneratorJs(module) {\n          function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n            try {\n              var info = gen[key](arg);\n              var value = info.value;\n            } catch (error) {\n              reject(error);\n              return;\n            }\n\n            if (info.done) {\n              resolve(value);\n            } else {\n              Promise.resolve(value).then(_next, _throw);\n            }\n          }\n\n          function _asyncToGenerator(fn) {\n            return function () {\n              var self = this,\n                  args = arguments;\n              return new Promise(function (resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                  asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n                }\n\n                function _throw(err) {\n                  asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n                }\n\n                _next(undefined);\n              });\n            };\n          }\n\n          module.exports = _asyncToGenerator;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/classCallCheck.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersClassCallCheckJs(module) {\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          module.exports = _classCallCheck;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/createClass.js\":\n        /*!************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!\n          \\************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersCreateClassJs(module) {\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          module.exports = _createClass;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/get.js\":\n        /*!****************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/get.js ***!\n          \\****************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersGetJs(module, __unused_webpack_exports, __webpack_require__) {\n          var superPropBase = __webpack_require__(\n          /*! ./superPropBase */\n          \"./node_modules/@babel/runtime/helpers/superPropBase.js\");\n\n          function _get(target, property, receiver) {\n            if (typeof Reflect !== \"undefined\" && Reflect.get) {\n              module.exports = _get = Reflect.get;\n            } else {\n              module.exports = _get = function _get(target, property, receiver) {\n                var base = superPropBase(target, property);\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                  return desc.get.call(receiver);\n                }\n\n                return desc.value;\n              };\n            }\n\n            return _get(target, property, receiver || target);\n          }\n\n          module.exports = _get;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersGetPrototypeOfJs(module) {\n          function _getPrototypeOf(o) {\n            module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          module.exports = _getPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/inherits.js\":\n        /*!*********************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!\n          \\*********************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInheritsJs(module, __unused_webpack_exports, __webpack_require__) {\n          var setPrototypeOf = __webpack_require__(\n          /*! ./setPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) setPrototypeOf(subClass, superClass);\n          }\n\n          module.exports = _inherits;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInteropRequireDefaultJs(module) {\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              \"default\": obj\n            };\n          }\n\n          module.exports = _interopRequireDefault;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\":\n        /*!**************************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!\n          \\**************************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersPossibleConstructorReturnJs(module, __unused_webpack_exports, __webpack_require__) {\n          var _typeof = __webpack_require__(\n          /*! ../helpers/typeof */\n          \"./node_modules/@babel/runtime/helpers/typeof.js\");\n\n          var assertThisInitialized = __webpack_require__(\n          /*! ./assertThisInitialized */\n          \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n\n            return assertThisInitialized(self);\n          }\n\n          module.exports = _possibleConstructorReturn;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersSetPrototypeOfJs(module) {\n          function _setPrototypeOf(o, p) {\n            module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          module.exports = _setPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/superPropBase.js\":\n        /*!**************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/superPropBase.js ***!\n          \\**************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersSuperPropBaseJs(module, __unused_webpack_exports, __webpack_require__) {\n          var getPrototypeOf = __webpack_require__(\n          /*! ./getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n\n          function _superPropBase(object, property) {\n            while (!Object.prototype.hasOwnProperty.call(object, property)) {\n              object = getPrototypeOf(object);\n              if (object === null) break;\n            }\n\n            return object;\n          }\n\n          module.exports = _superPropBase;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/typeof.js\":\n        /*!*******************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!\n          \\*******************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersTypeofJs(module) {\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              module.exports = _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              module.exports = _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          module.exports = _typeof;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/regenerator/index.js\":\n        /*!**********************************************************!*\\\n          !*** ./node_modules/@babel/runtime/regenerator/index.js ***!\n          \\**********************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeRegeneratorIndexJs(module, __unused_webpack_exports, __webpack_require__) {\n          module.exports = __webpack_require__(\n          /*! regenerator-runtime */\n          \"./node_modules/regenerator-runtime/runtime.js\");\n          /***/\n        },\n\n        /***/\n        \"./node_modules/add-zero/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/add-zero/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesAddZeroIndexJs(module, exports, __webpack_require__) {\n          var __WEBPACK_AMD_DEFINE_RESULT__;\n\n          (function (exports) {\n            'use strict';\n\n            function addZero(value, digits) {\n              digits = digits || 2;\n              var isNegative = Number(value) < 0;\n              var buffer = value.toString();\n              var size = 0; // Strip minus sign if number is negative\n\n              if (isNegative) {\n                buffer = buffer.slice(1);\n              }\n\n              size = digits - buffer.length + 1;\n              buffer = new Array(size).join('0').concat(buffer); // Adds back minus sign if needed\n\n              return (isNegative ? '-' : '') + buffer;\n            }\n\n            if (true) {\n              !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n                return addZero;\n              }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n            } else {}\n          })(this);\n          /***/\n\n        },\n\n        /***/\n        \"./src/js/controls/animation-display.js\":\n        /*!**********************************************!*\\\n          !*** ./src/js/controls/animation-display.js ***!\n          \\**********************************************/\n\n        /***/\n        function srcJsControlsAnimationDisplayJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var AnimationDisplay = function (_Component) {\n            (0, _inherits2.default)(AnimationDisplay, _Component);\n\n            var _super = _createSuper(AnimationDisplay);\n\n            function AnimationDisplay() {\n              (0, _classCallCheck2.default)(this, AnimationDisplay);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(AnimationDisplay, [{\n              key: \"createEl\",\n              value: function createEl() {\n                var imgElement = _video.default.dom.createEl('img');\n\n                var el = (0, _get2.default)((0, _getPrototypeOf2.default)(AnimationDisplay.prototype), \"createEl\", this).call(this, 'div', {\n                  className: 'vjs-animation-display',\n                  dir: 'ltr'\n                });\n                el.appendChild(imgElement);\n                return el;\n              }\n            }]);\n            return AnimationDisplay;\n          }(Component);\n\n          Component.registerComponent('AnimationDisplay', AnimationDisplay);\n          var _default = AnimationDisplay;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/camera-button.js\":\n        /*!******************************************!*\\\n          !*** ./src/js/controls/camera-button.js ***!\n          \\******************************************/\n\n        /***/\n        function srcJsControlsCameraButtonJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Button = _video.default.getComponent('Button');\n\n          var Component = _video.default.getComponent('Component');\n\n          var CameraButton = function (_Button) {\n            (0, _inherits2.default)(CameraButton, _Button);\n\n            var _super = _createSuper(CameraButton);\n\n            function CameraButton() {\n              (0, _classCallCheck2.default)(this, CameraButton);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(CameraButton, [{\n              key: \"buildCSSClass\",\n              value: function buildCSSClass() {\n                return 'vjs-camera-button vjs-control vjs-button vjs-icon-photo-camera';\n              }\n            }, {\n              key: \"enable\",\n              value: function enable() {\n                (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), \"enable\", this).call(this);\n                this.on(this.player_, _event.default.START_RECORD, this.onStart);\n                this.on(this.player_, _event.default.STOP_RECORD, this.onStop);\n              }\n            }, {\n              key: \"disable\",\n              value: function disable() {\n                (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), \"disable\", this).call(this);\n                this.off(this.player_, _event.default.START_RECORD, this.onStart);\n                this.off(this.player_, _event.default.STOP_RECORD, this.onStop);\n              }\n            }, {\n              key: \"show\",\n              value: function show() {\n                if (this.layoutExclude && this.layoutExclude === true) {\n                  return;\n                }\n\n                (0, _get2.default)((0, _getPrototypeOf2.default)(CameraButton.prototype), \"show\", this).call(this);\n              }\n            }, {\n              key: \"handleClick\",\n              value: function handleClick(event) {\n                var recorder = this.player_.record();\n\n                if (!recorder.isProcessing()) {\n                  recorder.start();\n                } else {\n                  recorder.retrySnapshot();\n                  this.onStop();\n                  this.player_.trigger(_event.default.RETRY);\n                }\n              }\n            }, {\n              key: \"onStart\",\n              value: function onStart(event) {\n                this.removeClass('vjs-icon-photo-camera');\n                this.addClass('vjs-icon-replay');\n                this.controlText('Retry');\n              }\n            }, {\n              key: \"onStop\",\n              value: function onStop(event) {\n                this.removeClass('vjs-icon-replay');\n                this.addClass('vjs-icon-photo-camera');\n                this.controlText('Image');\n              }\n            }]);\n            return CameraButton;\n          }(Button);\n\n          CameraButton.prototype.controlText_ = 'Image';\n          Component.registerComponent('CameraButton', CameraButton);\n          var _default = CameraButton;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/device-button.js\":\n        /*!******************************************!*\\\n          !*** ./src/js/controls/device-button.js ***!\n          \\******************************************/\n\n        /***/\n        function srcJsControlsDeviceButtonJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Button = _video.default.getComponent('Button');\n\n          var Component = _video.default.getComponent('Component');\n\n          var DeviceButton = function (_Button) {\n            (0, _inherits2.default)(DeviceButton, _Button);\n\n            var _super = _createSuper(DeviceButton);\n\n            function DeviceButton() {\n              (0, _classCallCheck2.default)(this, DeviceButton);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(DeviceButton, [{\n              key: \"handleClick\",\n              value: function handleClick(event) {\n                this.player_.record().getDevice();\n              }\n            }, {\n              key: \"show\",\n              value: function show() {\n                if (this.layoutExclude && this.layoutExclude === true) {\n                  return;\n                }\n\n                (0, _get2.default)((0, _getPrototypeOf2.default)(DeviceButton.prototype), \"show\", this).call(this);\n              }\n            }]);\n            return DeviceButton;\n          }(Button);\n\n          DeviceButton.prototype.controlText_ = 'Device';\n          Component.registerComponent('DeviceButton', DeviceButton);\n          var _default = DeviceButton;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/picture-in-picture-toggle.js\":\n        /*!******************************************************!*\\\n          !*** ./src/js/controls/picture-in-picture-toggle.js ***!\n          \\******************************************************/\n\n        /***/\n        function srcJsControlsPictureInPictureToggleJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _regenerator = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/regenerator */\n          \"./node_modules/@babel/runtime/regenerator/index.js\"));\n\n          var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/asyncToGenerator */\n          \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\"));\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Button = _video.default.getComponent('Button');\n\n          var Component = _video.default.getComponent('Component');\n\n          var PictureInPictureToggle = function (_Button) {\n            (0, _inherits2.default)(PictureInPictureToggle, _Button);\n\n            var _super = _createSuper(PictureInPictureToggle);\n\n            function PictureInPictureToggle(player, options) {\n              var _this;\n\n              (0, _classCallCheck2.default)(this, PictureInPictureToggle);\n              _this = _super.call(this, player, options);\n\n              _this.on(_this.player_, _event.default.ENTER_PIP, _this.onStart);\n\n              _this.on(_this.player_, _event.default.LEAVE_PIP, _this.onStop);\n\n              return _this;\n            }\n\n            (0, _createClass2.default)(PictureInPictureToggle, [{\n              key: \"buildCSSClass\",\n              value: function buildCSSClass() {\n                return 'vjs-pip-button vjs-control vjs-button vjs-icon-picture-in-picture-start';\n              }\n            }, {\n              key: \"show\",\n              value: function show() {\n                if (this.layoutExclude && this.layoutExclude === true) {\n                  return;\n                }\n\n                (0, _get2.default)((0, _getPrototypeOf2.default)(PictureInPictureToggle.prototype), \"show\", this).call(this);\n              }\n            }, {\n              key: \"handleClick\",\n              value: function () {\n                var _handleClick = (0, _asyncToGenerator2.default)(_regenerator.default.mark(function _callee(event) {\n                  var recorder;\n                  return _regenerator.default.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          recorder = this.player_.record();\n                          this.disable();\n                          _context.prev = 2;\n\n                          if (!(recorder.mediaElement !== document.pictureInPictureElement)) {\n                            _context.next = 8;\n                            break;\n                          }\n\n                          _context.next = 6;\n                          return recorder.mediaElement.requestPictureInPicture();\n\n                        case 6:\n                          _context.next = 10;\n                          break;\n\n                        case 8:\n                          _context.next = 10;\n                          return document.exitPictureInPicture();\n\n                        case 10:\n                          _context.next = 15;\n                          break;\n\n                        case 12:\n                          _context.prev = 12;\n                          _context.t0 = _context[\"catch\"](2);\n                          this.player_.trigger(_event.default.ERROR, _context.t0);\n\n                        case 15:\n                          _context.prev = 15;\n                          this.enable();\n                          return _context.finish(15);\n\n                        case 18:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee, this, [[2, 12, 15, 18]]);\n                }));\n\n                function handleClick(_x) {\n                  return _handleClick.apply(this, arguments);\n                }\n\n                return handleClick;\n              }()\n            }, {\n              key: \"onStart\",\n              value: function onStart(event) {\n                this.removeClass('vjs-icon-picture-in-picture-start');\n                this.addClass('vjs-icon-picture-in-picture-stop');\n              }\n            }, {\n              key: \"onStop\",\n              value: function onStop(event) {\n                this.removeClass('vjs-icon-picture-in-picture-stop');\n                this.addClass('vjs-icon-picture-in-picture-start');\n              }\n            }]);\n            return PictureInPictureToggle;\n          }(Button);\n\n          PictureInPictureToggle.prototype.controlText_ = 'Picture in Picture';\n          Component.registerComponent('PictureInPictureToggle', PictureInPictureToggle);\n          var _default = PictureInPictureToggle;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/record-canvas.js\":\n        /*!******************************************!*\\\n          !*** ./src/js/controls/record-canvas.js ***!\n          \\******************************************/\n\n        /***/\n        function srcJsControlsRecordCanvasJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var RecordCanvas = function (_Component) {\n            (0, _inherits2.default)(RecordCanvas, _Component);\n\n            var _super = _createSuper(RecordCanvas);\n\n            function RecordCanvas() {\n              (0, _classCallCheck2.default)(this, RecordCanvas);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(RecordCanvas, [{\n              key: \"createEl\",\n              value: function createEl() {\n                var canvasElement = _video.default.dom.createEl('canvas');\n\n                var el = (0, _get2.default)((0, _getPrototypeOf2.default)(RecordCanvas.prototype), \"createEl\", this).call(this, 'div', {\n                  className: 'vjs-record-canvas',\n                  dir: 'ltr'\n                });\n                el.appendChild(canvasElement);\n                return el;\n              }\n            }]);\n            return RecordCanvas;\n          }(Component);\n\n          Component.registerComponent('RecordCanvas', RecordCanvas);\n          var _default = RecordCanvas;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/record-indicator.js\":\n        /*!*********************************************!*\\\n          !*** ./src/js/controls/record-indicator.js ***!\n          \\*********************************************/\n\n        /***/\n        function srcJsControlsRecordIndicatorJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var RecordIndicator = function (_Component) {\n            (0, _inherits2.default)(RecordIndicator, _Component);\n\n            var _super = _createSuper(RecordIndicator);\n\n            function RecordIndicator(player, options) {\n              var _this;\n\n              (0, _classCallCheck2.default)(this, RecordIndicator);\n              _this = _super.call(this, player, options);\n\n              _this.enable();\n\n              return _this;\n            }\n\n            (0, _createClass2.default)(RecordIndicator, [{\n              key: \"createEl\",\n              value: function createEl() {\n                var props = {\n                  className: 'vjs-record-indicator vjs-control',\n                  dir: 'ltr'\n                };\n                var attr = {\n                  'data-label': this.localize('REC')\n                };\n                return (0, _get2.default)((0, _getPrototypeOf2.default)(RecordIndicator.prototype), \"createEl\", this).call(this, 'div', props, attr);\n              }\n            }, {\n              key: \"enable\",\n              value: function enable() {\n                this.on(this.player_, _event.default.START_RECORD, this.show);\n                this.on(this.player_, _event.default.STOP_RECORD, this.hide);\n              }\n            }, {\n              key: \"disable\",\n              value: function disable() {\n                this.off(this.player_, _event.default.START_RECORD, this.show);\n                this.off(this.player_, _event.default.STOP_RECORD, this.hide);\n              }\n            }, {\n              key: \"show\",\n              value: function show() {\n                if (this.layoutExclude && this.layoutExclude === true) {\n                  return;\n                }\n\n                (0, _get2.default)((0, _getPrototypeOf2.default)(RecordIndicator.prototype), \"show\", this).call(this);\n              }\n            }]);\n            return RecordIndicator;\n          }(Component);\n\n          Component.registerComponent('RecordIndicator', RecordIndicator);\n          var _default = RecordIndicator;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/controls/record-toggle.js\":\n        /*!******************************************!*\\\n          !*** ./src/js/controls/record-toggle.js ***!\n          \\******************************************/\n\n        /***/\n        function srcJsControlsRecordToggleJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Button = _video.default.getComponent('Button');\n\n          var Component = _video.default.getComponent('Component');\n\n          var RecordToggle = function (_Button) {\n            (0, _inherits2.default)(RecordToggle, _Button);\n\n            var _super = _createSuper(RecordToggle);\n\n            function RecordToggle() {\n              (0, _classCallCheck2.default)(this, RecordToggle);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(RecordToggle, [{\n              key: \"buildCSSClass\",\n              value: function buildCSSClass() {\n                return 'vjs-record-button vjs-control vjs-button vjs-icon-record-start';\n              }\n            }, {\n              key: \"enable\",\n              value: function enable() {\n                (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), \"enable\", this).call(this);\n                this.on(this.player_, _event.default.START_RECORD, this.onStart);\n                this.on(this.player_, _event.default.STOP_RECORD, this.onStop);\n              }\n            }, {\n              key: \"disable\",\n              value: function disable() {\n                (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), \"disable\", this).call(this);\n                this.off(this.player_, _event.default.START_RECORD, this.onStart);\n                this.off(this.player_, _event.default.STOP_RECORD, this.onStop);\n              }\n            }, {\n              key: \"show\",\n              value: function show() {\n                if (this.layoutExclude && this.layoutExclude === true) {\n                  return;\n                }\n\n                (0, _get2.default)((0, _getPrototypeOf2.default)(RecordToggle.prototype), \"show\", this).call(this);\n              }\n            }, {\n              key: \"handleClick\",\n              value: function handleClick(event) {\n                var recorder = this.player_.record();\n\n                if (!recorder.isRecording()) {\n                  recorder.start();\n                } else {\n                  recorder.stop();\n                }\n              }\n            }, {\n              key: \"onStart\",\n              value: function onStart(event) {\n                this.removeClass('vjs-icon-record-start');\n                this.addClass('vjs-icon-record-stop');\n                this.controlText('Stop');\n              }\n            }, {\n              key: \"onStop\",\n              value: function onStop(event) {\n                this.removeClass('vjs-icon-record-stop');\n                this.addClass('vjs-icon-record-start');\n                this.controlText('Record');\n              }\n            }]);\n            return RecordToggle;\n          }(Button);\n\n          RecordToggle.prototype.controlText_ = 'Record';\n          Component.registerComponent('RecordToggle', RecordToggle);\n          var _default = RecordToggle;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/defaults.js\":\n        /*!****************************!*\\\n          !*** ./src/js/defaults.js ***!\n          \\****************************/\n\n        /***/\n        function srcJsDefaultsJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var pluginDefaultOptions = {\n            image: false,\n            audio: false,\n            video: false,\n            animation: false,\n            screen: false,\n            maxLength: 10,\n            maxFileSize: 0,\n            displayMilliseconds: false,\n            formatTime: undefined,\n            frameWidth: 320,\n            frameHeight: 240,\n            debug: false,\n            pip: false,\n            autoMuteDevice: false,\n            videoBitRate: 1200,\n            videoEngine: 'recordrtc',\n            videoFrameRate: 30,\n            videoMimeType: 'video/webm',\n            videoRecorderType: 'auto',\n            videoWorkerURL: '',\n            videoWebAssemblyURL: '',\n            audioEngine: 'recordrtc',\n            audioRecorderType: 'auto',\n            audioMimeType: 'auto',\n            audioBufferSize: 4096,\n            audioSampleRate: 44100,\n            audioBitRate: 128,\n            audioChannels: 2,\n            audioWorkerURL: '',\n            audioWebAssemblyURL: '',\n            audioBufferUpdate: false,\n            animationFrameRate: 200,\n            animationQuality: 10,\n            imageOutputType: 'dataURL',\n            imageOutputFormat: 'image/png',\n            imageOutputQuality: 0.92,\n            timeSlice: 0,\n            convertEngine: '',\n            convertWorkerURL: '',\n            convertOptions: [],\n            convertAuto: true,\n            hotKeys: false,\n            pluginLibraryOptions: {}\n          };\n          var _default = pluginDefaultOptions;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/engine/convert-engine.js\":\n        /*!*****************************************!*\\\n          !*** ./src/js/engine/convert-engine.js ***!\n          \\*****************************************/\n\n        /***/\n        function srcJsEngineConvertEngineJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.FFMPEGWASM = exports.FFMPEGJS = exports.TSEBML = exports.CONVERT_PLUGINS = exports.ConvertEngine = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _fileUtil = __webpack_require__(\n          /*! ../utils/file-util */\n          \"./src/js/utils/file-util.js\");\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var TSEBML = 'ts-ebml';\n          exports.TSEBML = TSEBML;\n          var FFMPEGJS = 'ffmpeg.js';\n          exports.FFMPEGJS = FFMPEGJS;\n          var FFMPEGWASM = 'ffmpeg.wasm';\n          exports.FFMPEGWASM = FFMPEGWASM;\n          var CONVERT_PLUGINS = [TSEBML, FFMPEGJS, FFMPEGWASM];\n          exports.CONVERT_PLUGINS = CONVERT_PLUGINS;\n\n          var ConvertEngine = function (_Component) {\n            (0, _inherits2.default)(ConvertEngine, _Component);\n\n            var _super = _createSuper(ConvertEngine);\n\n            function ConvertEngine(player, options) {\n              (0, _classCallCheck2.default)(this, ConvertEngine);\n              options.evented = true;\n              return _super.call(this, player, options);\n            }\n\n            (0, _createClass2.default)(ConvertEngine, [{\n              key: \"setup\",\n              value: function setup(mediaType, debug) {\n                this.mediaType = mediaType;\n                this.debug = debug;\n              }\n            }, {\n              key: \"loadBlob\",\n              value: function loadBlob(data) {\n                return (0, _fileUtil.blobToArrayBuffer)(data);\n              }\n            }, {\n              key: \"addFileInfo\",\n              value: function addFileInfo(fileObj, now) {\n                (0, _fileUtil.addFileInfo)(fileObj, now);\n              }\n            }, {\n              key: \"saveAs\",\n              value: function saveAs(name) {\n                var fileName = name[Object.keys(name)[0]];\n                (0, _fileUtil.downloadBlob)(fileName, this.player().convertedData);\n              }\n            }]);\n            return ConvertEngine;\n          }(Component);\n\n          exports.ConvertEngine = ConvertEngine;\n          _video.default.ConvertEngine = ConvertEngine;\n          Component.registerComponent('ConvertEngine', ConvertEngine);\n          /***/\n        },\n\n        /***/\n        \"./src/js/engine/engine-loader.js\":\n        /*!****************************************!*\\\n          !*** ./src/js/engine/engine-loader.js ***!\n          \\****************************************/\n\n        /***/\n        function srcJsEngineEngineLoaderJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.getConvertEngine = exports.getVideoEngine = exports.isAudioPluginActive = exports.getAudioEngine = void 0;\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _recordRtc = _interopRequireDefault(__webpack_require__(\n          /*! ./record-rtc */\n          \"./src/js/engine/record-rtc.js\"));\n\n          var _convertEngine = __webpack_require__(\n          /*! ./convert-engine */\n          \"./src/js/engine/convert-engine.js\");\n\n          var _recordEngine = __webpack_require__(\n          /*! ./record-engine */\n          \"./src/js/engine/record-engine.js\");\n\n          var getAudioEngine = function getAudioEngine(audioEngine) {\n            var AudioEngineClass;\n\n            switch (audioEngine) {\n              case _recordEngine.RECORDRTC:\n                AudioEngineClass = _recordRtc.default;\n                break;\n\n              case _recordEngine.LIBVORBISJS:\n                AudioEngineClass = _video.default.LibVorbisEngine;\n                break;\n\n              case _recordEngine.RECORDERJS:\n                AudioEngineClass = _video.default.RecorderjsEngine;\n                break;\n\n              case _recordEngine.LAMEJS:\n                AudioEngineClass = _video.default.LamejsEngine;\n                break;\n\n              case _recordEngine.OPUSRECORDER:\n                AudioEngineClass = _video.default.OpusRecorderEngine;\n                break;\n\n              case _recordEngine.OPUSMEDIARECORDER:\n                AudioEngineClass = _video.default.OpusMediaRecorderEngine;\n                break;\n\n              case _recordEngine.VMSG:\n                AudioEngineClass = _video.default.VmsgEngine;\n                break;\n\n              default:\n                throw new Error('Unknown audioEngine: ' + audioEngine);\n            }\n\n            return AudioEngineClass;\n          };\n\n          exports.getAudioEngine = getAudioEngine;\n\n          var getVideoEngine = function getVideoEngine(videoEngine) {\n            var VideoEngineClass;\n\n            switch (videoEngine) {\n              case _recordEngine.RECORDRTC:\n                VideoEngineClass = _recordRtc.default;\n                break;\n\n              case _recordEngine.WEBMWASM:\n                VideoEngineClass = _video.default.WebmWasmEngine;\n                break;\n\n              default:\n                throw new Error('Unknown videoEngine: ' + videoEngine);\n            }\n\n            return VideoEngineClass;\n          };\n\n          exports.getVideoEngine = getVideoEngine;\n\n          var isAudioPluginActive = function isAudioPluginActive(audioEngine) {\n            return _recordEngine.AUDIO_PLUGINS.indexOf(audioEngine) > -1;\n          };\n\n          exports.isAudioPluginActive = isAudioPluginActive;\n\n          var getConvertEngine = function getConvertEngine(convertEngine) {\n            var ConvertEngineClass;\n\n            switch (convertEngine) {\n              case '':\n                break;\n\n              case _convertEngine.TSEBML:\n                ConvertEngineClass = _video.default.TsEBMLEngine;\n                break;\n\n              case _convertEngine.FFMPEGJS:\n                ConvertEngineClass = _video.default.FFmpegjsEngine;\n                break;\n\n              case _convertEngine.FFMPEGWASM:\n                ConvertEngineClass = _video.default.FFmpegWasmEngine;\n                break;\n\n              default:\n                throw new Error('Unknown convertEngine: ' + convertEngine);\n            }\n\n            return ConvertEngineClass;\n          };\n\n          exports.getConvertEngine = getConvertEngine;\n          /***/\n        },\n\n        /***/\n        \"./src/js/engine/record-engine.js\":\n        /*!****************************************!*\\\n          !*** ./src/js/engine/record-engine.js ***!\n          \\****************************************/\n\n        /***/\n        function srcJsEngineRecordEngineJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.WEBMWASM = exports.VMSG = exports.OPUSMEDIARECORDER = exports.OPUSRECORDER = exports.LAMEJS = exports.RECORDERJS = exports.LIBVORBISJS = exports.RECORDRTC = exports.VIDEO_PLUGINS = exports.AUDIO_PLUGINS = exports.RECORD_PLUGINS = exports.RecordEngine = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          var _fileUtil = __webpack_require__(\n          /*! ../utils/file-util */\n          \"./src/js/utils/file-util.js\");\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var RECORDRTC = 'recordrtc';\n          exports.RECORDRTC = RECORDRTC;\n          var LIBVORBISJS = 'libvorbis.js';\n          exports.LIBVORBISJS = LIBVORBISJS;\n          var RECORDERJS = 'recorder.js';\n          exports.RECORDERJS = RECORDERJS;\n          var LAMEJS = 'lamejs';\n          exports.LAMEJS = LAMEJS;\n          var OPUSRECORDER = 'opus-recorder';\n          exports.OPUSRECORDER = OPUSRECORDER;\n          var OPUSMEDIARECORDER = 'opus-media-recorder';\n          exports.OPUSMEDIARECORDER = OPUSMEDIARECORDER;\n          var VMSG = 'vmsg';\n          exports.VMSG = VMSG;\n          var WEBMWASM = 'webm-wasm';\n          exports.WEBMWASM = WEBMWASM;\n          var AUDIO_PLUGINS = [LIBVORBISJS, RECORDERJS, LAMEJS, OPUSRECORDER, OPUSMEDIARECORDER, VMSG];\n          exports.AUDIO_PLUGINS = AUDIO_PLUGINS;\n          var VIDEO_PLUGINS = [WEBMWASM];\n          exports.VIDEO_PLUGINS = VIDEO_PLUGINS;\n          var RECORD_PLUGINS = AUDIO_PLUGINS.concat(VIDEO_PLUGINS);\n          exports.RECORD_PLUGINS = RECORD_PLUGINS;\n\n          var RecordEngine = function (_Component) {\n            (0, _inherits2.default)(RecordEngine, _Component);\n\n            var _super = _createSuper(RecordEngine);\n\n            function RecordEngine(player, options) {\n              (0, _classCallCheck2.default)(this, RecordEngine);\n              options.evented = true;\n              return _super.call(this, player, options);\n            }\n\n            (0, _createClass2.default)(RecordEngine, [{\n              key: \"dispose\",\n              value: function dispose() {\n                if (this.recordedData !== undefined) {\n                  URL.revokeObjectURL(this.recordedData);\n                }\n              }\n            }, {\n              key: \"destroy\",\n              value: function destroy() {}\n            }, {\n              key: \"addFileInfo\",\n              value: function addFileInfo(fileObj) {\n                (0, _fileUtil.addFileInfo)(fileObj);\n              }\n            }, {\n              key: \"onStopRecording\",\n              value: function onStopRecording(data) {\n                this.recordedData = data;\n                this.addFileInfo(this.recordedData);\n                this.dispose();\n                this.trigger(_event.default.RECORD_COMPLETE);\n              }\n            }, {\n              key: \"saveAs\",\n              value: function saveAs(name) {\n                var fileName = name[Object.keys(name)[0]];\n                (0, _fileUtil.downloadBlob)(fileName, this.recordedData);\n              }\n            }]);\n            return RecordEngine;\n          }(Component);\n\n          exports.RecordEngine = RecordEngine;\n          _video.default.RecordEngine = RecordEngine;\n          Component.registerComponent('RecordEngine', RecordEngine);\n          /***/\n        },\n\n        /***/\n        \"./src/js/engine/record-mode.js\":\n        /*!**************************************!*\\\n          !*** ./src/js/engine/record-mode.js ***!\n          \\**************************************/\n\n        /***/\n        function srcJsEngineRecordModeJs(__unused_webpack_module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.AUDIO_SCREEN = exports.SCREEN_ONLY = exports.ANIMATION = exports.AUDIO_VIDEO = exports.VIDEO_ONLY = exports.AUDIO_ONLY = exports.IMAGE_ONLY = exports.getRecorderMode = void 0;\n          var IMAGE_ONLY = 'image_only';\n          exports.IMAGE_ONLY = IMAGE_ONLY;\n          var AUDIO_ONLY = 'audio_only';\n          exports.AUDIO_ONLY = AUDIO_ONLY;\n          var VIDEO_ONLY = 'video_only';\n          exports.VIDEO_ONLY = VIDEO_ONLY;\n          var AUDIO_VIDEO = 'audio_video';\n          exports.AUDIO_VIDEO = AUDIO_VIDEO;\n          var AUDIO_SCREEN = 'audio_screen';\n          exports.AUDIO_SCREEN = AUDIO_SCREEN;\n          var ANIMATION = 'animation';\n          exports.ANIMATION = ANIMATION;\n          var SCREEN_ONLY = 'screen_only';\n          exports.SCREEN_ONLY = SCREEN_ONLY;\n\n          var getRecorderMode = function getRecorderMode(image, audio, video, animation, screen) {\n            if (isModeEnabled(image)) {\n              return IMAGE_ONLY;\n            } else if (isModeEnabled(animation)) {\n              return ANIMATION;\n            } else if (isModeEnabled(audio) && isModeEnabled(video)) {\n              return AUDIO_VIDEO;\n            } else if (isModeEnabled(audio) && isModeEnabled(screen)) {\n              return AUDIO_SCREEN;\n            } else if (!isModeEnabled(audio) && isModeEnabled(screen)) {\n              return SCREEN_ONLY;\n            } else if (isModeEnabled(audio) && !isModeEnabled(video)) {\n              return AUDIO_ONLY;\n            } else if (!isModeEnabled(audio) && isModeEnabled(video)) {\n              return VIDEO_ONLY;\n            }\n          };\n\n          exports.getRecorderMode = getRecorderMode;\n\n          var isModeEnabled = function isModeEnabled(mode) {\n            return mode === Object(mode) || mode === true;\n          };\n          /***/\n\n        },\n\n        /***/\n        \"./src/js/engine/record-rtc.js\":\n        /*!*************************************!*\\\n          !*** ./src/js/engine/record-rtc.js ***!\n          \\*************************************/\n\n        /***/\n        function srcJsEngineRecordRtcJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _get2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/get */\n          \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          var _recordrtc = _interopRequireDefault(__webpack_require__(\n          /*! recordrtc */\n          \"recordrtc\"));\n\n          var _event = _interopRequireDefault(__webpack_require__(\n          /*! ../event */\n          \"./src/js/event.js\"));\n\n          var _recordEngine = __webpack_require__(\n          /*! ./record-engine */\n          \"./src/js/engine/record-engine.js\");\n\n          var _detectBrowser = __webpack_require__(\n          /*! ../utils/detect-browser */\n          \"./src/js/utils/detect-browser.js\");\n\n          var _recordMode = __webpack_require__(\n          /*! ./record-mode */\n          \"./src/js/engine/record-mode.js\");\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var Component = _video.default.getComponent('Component');\n\n          var RecordRTCEngine = function (_RecordEngine) {\n            (0, _inherits2.default)(RecordRTCEngine, _RecordEngine);\n\n            var _super = _createSuper(RecordRTCEngine);\n\n            function RecordRTCEngine() {\n              (0, _classCallCheck2.default)(this, RecordRTCEngine);\n              return _super.apply(this, arguments);\n            }\n\n            (0, _createClass2.default)(RecordRTCEngine, [{\n              key: \"setup\",\n              value: function setup(stream, mediaType, debug) {\n                this.inputStream = stream;\n                this.mediaType = mediaType;\n                this.debug = debug;\n\n                if ('screen' in this.mediaType) {\n                  this.mediaType.video = true;\n                }\n\n                if (this.recorderType !== undefined) {\n                  this.mediaType.video = this.recorderType;\n                }\n\n                this.engine = new _recordrtc.default.MRecordRTC();\n                this.engine.mediaType = this.mediaType;\n                this.engine.disableLogs = !this.debug;\n                this.engine.mimeType = this.mimeType;\n                this.engine.bufferSize = this.bufferSize;\n                this.engine.sampleRate = this.sampleRate;\n                this.engine.numberOfAudioChannels = this.audioChannels;\n                this.engine.video = this.video;\n                this.engine.canvas = this.canvas;\n                this.engine.bitrate = this.bitRate;\n                this.engine.quality = this.quality;\n                this.engine.frameRate = this.frameRate;\n\n                if (this.timeSlice !== undefined) {\n                  this.engine.timeSlice = this.timeSlice;\n                  this.engine.onTimeStamp = this.onTimeStamp.bind(this);\n                }\n\n                this.engine.workerPath = this.workerPath;\n                this.engine.webAssemblyPath = this.videoWebAssemblyURL;\n                this.engine.addStream(this.inputStream);\n              }\n            }, {\n              key: \"dispose\",\n              value: function dispose() {\n                (0, _get2.default)((0, _getPrototypeOf2.default)(RecordRTCEngine.prototype), \"dispose\", this).call(this);\n                this.destroy();\n              }\n            }, {\n              key: \"destroy\",\n              value: function destroy() {\n                if (this.engine && typeof this.engine.destroy === 'function') {\n                  this.engine.destroy();\n                }\n              }\n            }, {\n              key: \"start\",\n              value: function start() {\n                this.engine.startRecording();\n              }\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.engine.stopRecording(this.onStopRecording.bind(this));\n              }\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.engine.pauseRecording();\n              }\n            }, {\n              key: \"resume\",\n              value: function resume() {\n                this.engine.resumeRecording();\n              }\n            }, {\n              key: \"saveAs\",\n              value: function saveAs(name) {\n                if (this.engine && name !== undefined) {\n                  this.engine.save(name);\n                }\n              }\n            }, {\n              key: \"onStopRecording\",\n              value: function onStopRecording(audioVideoURL, type) {\n                var _this = this;\n\n                URL.revokeObjectURL(audioVideoURL);\n                var recordType = this.player().record().getRecordType();\n                this.engine.getBlob(function (recording) {\n                  switch (recordType) {\n                    case _recordMode.AUDIO_ONLY:\n                      if (recording.audio !== undefined) {\n                        _this.recordedData = recording.audio;\n                      }\n\n                      break;\n\n                    case _recordMode.VIDEO_ONLY:\n                    case _recordMode.AUDIO_VIDEO:\n                    case _recordMode.AUDIO_SCREEN:\n                    case _recordMode.SCREEN_ONLY:\n                      if (recording.video !== undefined) {\n                        _this.recordedData = recording.video;\n                      }\n\n                      break;\n\n                    case _recordMode.ANIMATION:\n                      if (recording.gif !== undefined) {\n                        _this.recordedData = recording.gif;\n                      }\n\n                      break;\n                  }\n\n                  _this.addFileInfo(_this.recordedData);\n\n                  _this.trigger(_event.default.RECORD_COMPLETE);\n                });\n              }\n            }, {\n              key: \"onTimeStamp\",\n              value: function onTimeStamp(current, all) {\n                this.player().currentTimestamp = current;\n                this.player().allTimestamps = all;\n                var internal;\n\n                switch (this.player().record().getRecordType()) {\n                  case _recordMode.AUDIO_ONLY:\n                    internal = this.engine.audioRecorder;\n                    break;\n\n                  case _recordMode.ANIMATION:\n                    internal = this.engine.gifRecorder;\n                    break;\n\n                  default:\n                    internal = this.engine.videoRecorder;\n                }\n\n                var maxFileSizeReached = false;\n\n                if (internal) {\n                  internal = internal.getInternalRecorder();\n                }\n\n                if (internal instanceof _recordrtc.default.MediaStreamRecorder === true) {\n                  this.player().recordedData = internal.getArrayOfBlobs();\n                  this.addFileInfo(this.player().recordedData[this.player_.recordedData.length - 1]);\n\n                  if (this.maxFileSize > 0) {\n                    var currentSize = new Blob(this.player().recordedData).size;\n\n                    if (currentSize >= this.maxFileSize) {\n                      maxFileSizeReached = true;\n                    }\n                  }\n                }\n\n                this.player().trigger(_event.default.TIMESTAMP);\n\n                if (maxFileSizeReached) {\n                  this.player().record().stop();\n                }\n              }\n            }]);\n            return RecordRTCEngine;\n          }(_recordEngine.RecordEngine);\n\n          _video.default.RecordRTCEngine = RecordRTCEngine;\n          Component.registerComponent('RecordRTCEngine', RecordRTCEngine);\n          var _default = RecordRTCEngine;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/event.js\":\n        /*!*************************!*\\\n          !*** ./src/js/event.js ***!\n          \\*************************/\n\n        /***/\n        function srcJsEventJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var Event = function Event() {\n            (0, _classCallCheck2.default)(this, Event);\n          };\n\n          Event.READY = 'ready';\n          Event.ERROR = 'error';\n          Event.PLAYING = 'playing';\n          Event.LOADEDMETADATA = 'loadedmetadata';\n          Event.LOADSTART = 'loadstart';\n          Event.USERINACTIVE = 'userinactive';\n          Event.TIMEUPDATE = 'timeupdate';\n          Event.DURATIONCHANGE = 'durationchange';\n          Event.ENDED = 'ended';\n          Event.PAUSE = 'pause';\n          Event.PLAY = 'play';\n          Event.DEVICE_READY = 'deviceReady';\n          Event.DEVICE_ERROR = 'deviceError';\n          Event.START_RECORD = 'startRecord';\n          Event.STOP_RECORD = 'stopRecord';\n          Event.FINISH_RECORD = 'finishRecord';\n          Event.RECORD_COMPLETE = 'recordComplete';\n          Event.PROGRESS_RECORD = 'progressRecord';\n          Event.TIMESTAMP = 'timestamp';\n          Event.ENUMERATE_READY = 'enumerateReady';\n          Event.ENUMERATE_ERROR = 'enumerateError';\n          Event.AUDIO_BUFFER_UPDATE = 'audioBufferUpdate';\n          Event.AUDIO_OUTPUT_READY = 'audioOutputReady';\n          Event.START_CONVERT = 'startConvert';\n          Event.FINISH_CONVERT = 'finishConvert';\n          Event.ENTER_PIP = 'enterPIP';\n          Event.LEAVE_PIP = 'leavePIP';\n          Event.RETRY = 'retry';\n          Event.ENTERPICTUREINPICTURE = 'enterpictureinpicture';\n          Event.LEAVEPICTUREINPICTURE = 'leavepictureinpicture';\n          Object.freeze(Event);\n          var _default = Event;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/hot-keys.js\":\n        /*!****************************!*\\\n          !*** ./src/js/hot-keys.js ***!\n          \\****************************/\n\n        /***/\n        function srcJsHotKeysJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _recordMode = __webpack_require__(\n          /*! ./engine/record-mode */\n          \"./src/js/engine/record-mode.js\");\n\n          var X_KEY = 88;\n          var P_KEY = 80;\n          var C_KEY = 67;\n\n          var defaultKeyHandler = function defaultKeyHandler(event) {\n            switch (event.which) {\n              case X_KEY:\n                switch (this.player_.record().getRecordType()) {\n                  case _recordMode.IMAGE_ONLY:\n                    this.player_.cameraButton.trigger('click');\n                    break;\n\n                  default:\n                    this.player_.recordToggle.trigger('click');\n                }\n\n                break;\n\n              case P_KEY:\n                if (this.player_.record().pictureInPicture === true) {\n                  this.player_.pipToggle.trigger('click');\n                }\n\n                break;\n\n              case C_KEY:\n                if (this.player_.controlBar.playToggle && this.player_.controlBar.playToggle.contentEl()) {\n                  player.controlBar.playToggle.trigger('click');\n                }\n\n                break;\n            }\n          };\n\n          var _default = defaultKeyHandler;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/browser-shim.js\":\n        /*!**************************************!*\\\n          !*** ./src/js/utils/browser-shim.js ***!\n          \\**************************************/\n\n        /***/\n        function srcJsUtilsBrowserShimJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var setSrcObject = function setSrcObject(stream, element) {\n            if ('srcObject' in element) {\n              element.srcObject = stream;\n            } else if ('mozSrcObject' in element) {\n              element.mozSrcObject = stream;\n            } else {\n              element.srcObject = stream;\n            }\n          };\n\n          var _default = setSrcObject;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/compare-version.js\":\n        /*!*****************************************!*\\\n          !*** ./src/js/utils/compare-version.js ***!\n          \\*****************************************/\n\n        /***/\n        function srcJsUtilsCompareVersionJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var compareVersion = function compareVersion(v1, v2) {\n            if (typeof v1 !== 'string') return false;\n            if (typeof v2 !== 'string') return false;\n            v1 = v1.split('.');\n            v2 = v2.split('.');\n            var k = Math.min(v1.length, v2.length);\n            var i = 0;\n\n            for (i; i < k; ++i) {\n              v1[i] = parseInt(v1[i], 10);\n              v2[i] = parseInt(v2[i], 10);\n              if (v1[i] > v2[i]) return 1;\n              if (v1[i] < v2[i]) return -1;\n            }\n\n            return v1.length === v2.length ? 0 : v1.length < v2.length ? -1 : 1;\n          };\n\n          var _default = compareVersion;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/detect-browser.js\":\n        /*!****************************************!*\\\n          !*** ./src/js/utils/detect-browser.js ***!\n          \\****************************************/\n\n        /***/\n        function srcJsUtilsDetectBrowserJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.isFirefox = exports.isSafari = exports.isChrome = exports.isOpera = exports.isEdge = exports.detectBrowser = void 0;\n\n          var _window = _interopRequireDefault(__webpack_require__(\n          /*! global/window */\n          \"./node_modules/global/window.js\"));\n\n          var detectBrowser = function detectBrowser() {\n            var result = {};\n            result.browser = null;\n            result.version = null;\n            result.minVersion = null;\n\n            if (typeof _window.default === 'undefined' || !_window.default.navigator) {\n              result.browser = 'Not a supported browser.';\n              return result;\n            }\n\n            if (navigator.mozGetUserMedia) {\n              result.browser = 'firefox';\n              result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n              result.minVersion = 31;\n            } else if (navigator.webkitGetUserMedia) {\n              result.browser = 'chrome';\n              result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n              result.minVersion = 38;\n            } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n              result.browser = 'edge';\n              result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n              result.minVersion = 10547;\n            } else if (_window.default.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n              result.browser = 'safari';\n              result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n            } else {\n              result.browser = 'Not a supported browser.';\n              return result;\n            }\n\n            return result;\n          };\n\n          exports.detectBrowser = detectBrowser;\n\n          var extractVersion = function extractVersion(uastring, expr, pos) {\n            var match = uastring.match(expr);\n            return match && match.length >= pos && parseInt(match[pos], 10);\n          };\n\n          var isEdge = function isEdge() {\n            return detectBrowser().browser === 'edge';\n          };\n\n          exports.isEdge = isEdge;\n\n          var isSafari = function isSafari() {\n            return detectBrowser().browser === 'safari';\n          };\n\n          exports.isSafari = isSafari;\n\n          var isOpera = function isOpera() {\n            return !!_window.default.opera || navigator.userAgent.indexOf('OPR/') !== -1;\n          };\n\n          exports.isOpera = isOpera;\n\n          var isChrome = function isChrome() {\n            return detectBrowser().browser === 'chrome';\n          };\n\n          exports.isChrome = isChrome;\n\n          var isFirefox = function isFirefox() {\n            return detectBrowser().browser === 'firefox';\n          };\n\n          exports.isFirefox = isFirefox;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/file-util.js\":\n        /*!***********************************!*\\\n          !*** ./src/js/utils/file-util.js ***!\n          \\***********************************/\n\n        /***/\n        function srcJsUtilsFileUtilJs(__unused_webpack_module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.addFileInfo = exports.blobToArrayBuffer = exports.downloadBlob = void 0;\n\n          var _mime = _interopRequireDefault(__webpack_require__(\n          /*! ./mime */\n          \"./src/js/utils/mime.js\"));\n\n          var downloadBlob = function downloadBlob(fileName, data) {\n            if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n              return navigator.msSaveOrOpenBlob(data, fileName);\n            } else if (typeof navigator.msSaveBlob !== 'undefined') {\n              return navigator.msSaveBlob(data, fileName);\n            }\n\n            var hyperlink = document.createElement('a');\n            hyperlink.href = URL.createObjectURL(data);\n            hyperlink.download = fileName;\n            hyperlink.style = 'display:none;opacity:0;color:transparent;';\n            (document.body || document.documentElement).appendChild(hyperlink);\n\n            if (typeof hyperlink.click === 'function') {\n              hyperlink.click();\n            } else {\n              hyperlink.target = '_blank';\n              hyperlink.dispatchEvent(new MouseEvent('click', {\n                view: window,\n                bubbles: true,\n                cancelable: true\n              }));\n            }\n\n            URL.revokeObjectURL(hyperlink.href);\n          };\n\n          exports.downloadBlob = downloadBlob;\n\n          var blobToArrayBuffer = function blobToArrayBuffer(fileObj) {\n            return new Promise(function (resolve, reject) {\n              var reader = new FileReader();\n\n              reader.onloadend = function () {\n                resolve(reader.result);\n              };\n\n              reader.onerror = function (ev) {\n                reject(ev.error);\n              };\n\n              reader.readAsArrayBuffer(fileObj);\n            });\n          };\n\n          exports.blobToArrayBuffer = blobToArrayBuffer;\n\n          var addFileInfo = function addFileInfo(fileObj, dateObj, fileExtension) {\n            if (fileObj instanceof Blob || fileObj instanceof File) {\n              if (dateObj === undefined) {\n                dateObj = new Date();\n              }\n\n              try {\n                fileObj.lastModified = dateObj.getTime();\n                fileObj.lastModifiedDate = dateObj;\n              } catch (e) {\n                if (e instanceof TypeError) {} else {\n                  throw e;\n                }\n              }\n\n              if (fileExtension === undefined) {\n                fileExtension = '.' + (0, _mime.default)(fileObj.type);\n              }\n\n              try {\n                fileObj.name = dateObj.getTime() + fileExtension;\n              } catch (e) {\n                if (e instanceof TypeError) {} else {\n                  throw e;\n                }\n              }\n            }\n          };\n\n          exports.addFileInfo = addFileInfo;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/format-time.js\":\n        /*!*************************************!*\\\n          !*** ./src/js/utils/format-time.js ***!\n          \\*************************************/\n\n        /***/\n        function srcJsUtilsFormatTimeJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _parseMs = _interopRequireDefault(__webpack_require__(\n          /*! parse-ms */\n          \"./node_modules/parse-ms/index.js\"));\n\n          var _addZero = _interopRequireDefault(__webpack_require__(\n          /*! add-zero */\n          \"./node_modules/add-zero/index.js\"));\n\n          var formatTime = function formatTime(seconds, guide) {\n            var displayMilliseconds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n            seconds = seconds < 0 ? 0 : seconds;\n\n            if (isNaN(seconds) || seconds === Infinity) {\n              seconds = 0;\n            }\n\n            var inputTime = (0, _parseMs.default)(seconds * 1000);\n            var guideTime = inputTime;\n\n            if (guide !== undefined) {\n              guideTime = (0, _parseMs.default)(guide * 1000);\n            }\n\n            var hr = (0, _addZero.default)(inputTime.hours);\n            var min = (0, _addZero.default)(inputTime.minutes);\n            var sec = (0, _addZero.default)(inputTime.seconds);\n            var ms = (0, _addZero.default)(inputTime.milliseconds, 3);\n\n            if (inputTime.days > 0 || guideTime.days > 0) {\n              var day = (0, _addZero.default)(inputTime.days);\n              return \"\".concat(day, \":\").concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (inputTime.hours > 0 || guideTime.hours > 0) {\n              return \"\".concat(hr, \":\").concat(min, \":\").concat(sec);\n            }\n\n            if (displayMilliseconds) {\n              return \"\".concat(min, \":\").concat(sec, \":\").concat(ms);\n            }\n\n            return \"\".concat(min, \":\").concat(sec);\n          };\n\n          var _default = formatTime;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./src/js/utils/mime.js\":\n        /*!******************************!*\\\n          !*** ./src/js/utils/mime.js ***!\n          \\******************************/\n\n        /***/\n        function srcJsUtilsMimeJs(module, exports) {\n          \"use strict\";\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n          var EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/;\n          var Mimetypes = {\n            'video/ogg': 'ogv',\n            'video/mp4': 'mp4',\n            'video/x-matroska': 'mkv',\n            'video/webm': 'webm',\n            'audio/mp4': 'm4a',\n            'audio/mpeg': 'mp3',\n            'audio/aac': 'aac',\n            'audio/flac': 'flac',\n            'audio/ogg': 'oga',\n            'audio/wav': 'wav',\n            'audio/webm': 'webm',\n            'application/x-mpegURL': 'm3u8',\n            'image/jpeg': 'jpg',\n            'image/gif': 'gif',\n            'image/png': 'png',\n            'image/svg+xml': 'svg',\n            'image/webp': 'webp'\n          };\n\n          var getExtension = function getExtension(mimeType) {\n            var match = EXTRACT_TYPE_REGEXP.exec(mimeType);\n            var result = match && match[1].toLowerCase();\n            return Mimetypes[result];\n          };\n\n          var _default = getExtension;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/global/window.js\":\n        /*!***************************************!*\\\n          !*** ./node_modules/global/window.js ***!\n          \\***************************************/\n\n        /***/\n        function node_modulesGlobalWindowJs(module, __unused_webpack_exports, __webpack_require__) {\n          var win;\n\n          if (typeof window !== \"undefined\") {\n            win = window;\n          } else if (typeof __webpack_require__.g !== \"undefined\") {\n            win = __webpack_require__.g;\n          } else if (typeof self !== \"undefined\") {\n            win = self;\n          } else {\n            win = {};\n          }\n\n          module.exports = win;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/parse-ms/index.js\":\n        /*!****************************************!*\\\n          !*** ./node_modules/parse-ms/index.js ***!\n          \\****************************************/\n\n        /***/\n        function node_modulesParseMsIndexJs(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {\n          \"use strict\";\n\n          __webpack_require__.r(__webpack_exports__);\n          /* harmony export */\n\n\n          __webpack_require__.d(__webpack_exports__, {\n            /* harmony export */\n            \"default\": function _default() {\n              return (\n                /* binding */\n                parseMilliseconds\n              );\n            }\n            /* harmony export */\n\n          });\n\n          function parseMilliseconds(milliseconds) {\n            if (typeof milliseconds !== 'number') {\n              throw new TypeError('Expected a number');\n            }\n\n            var roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil;\n            return {\n              days: roundTowardsZero(milliseconds / 86400000),\n              hours: roundTowardsZero(milliseconds / 3600000) % 24,\n              minutes: roundTowardsZero(milliseconds / 60000) % 60,\n              seconds: roundTowardsZero(milliseconds / 1000) % 60,\n              milliseconds: roundTowardsZero(milliseconds) % 1000,\n              microseconds: roundTowardsZero(milliseconds * 1000) % 1000,\n              nanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000\n            };\n          }\n          /***/\n\n        },\n\n        /***/\n        \"./node_modules/regenerator-runtime/runtime.js\":\n        /*!*****************************************************!*\\\n          !*** ./node_modules/regenerator-runtime/runtime.js ***!\n          \\*****************************************************/\n\n        /***/\n        function node_modulesRegeneratorRuntimeRuntimeJs(module) {\n          /**\n           * Copyright (c) 2014-present, Facebook, Inc.\n           *\n           * This source code is licensed under the MIT license found in the\n           * LICENSE file in the root directory of this source tree.\n           */\n          var runtime = function (exports) {\n            \"use strict\";\n\n            var Op = Object.prototype;\n            var hasOwn = Op.hasOwnProperty;\n            var undefined; // More compressible than void 0.\n\n            var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n            var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n            var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n            var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n            function wrap(innerFn, outerFn, self, tryLocsList) {\n              // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n              var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n              var generator = Object.create(protoGenerator.prototype);\n              var context = new Context(tryLocsList || []); // The ._invoke method unifies the implementations of the .next,\n              // .throw, and .return methods.\n\n              generator._invoke = makeInvokeMethod(innerFn, self, context);\n              return generator;\n            }\n\n            exports.wrap = wrap; // Try/catch helper to minimize deoptimizations. Returns a completion\n            // record like context.tryEntries[i].completion. This interface could\n            // have been (and was previously) designed to take a closure to be\n            // invoked without arguments, but in all the cases we care about we\n            // already have an existing method we want to call, so there's no need\n            // to create a new function object. We can even get away with assuming\n            // the method takes exactly one argument, since that happens to be true\n            // in every case, so we don't have to touch the arguments object. The\n            // only additional allocation required is the completion record, which\n            // has a stable shape and so hopefully should be cheap to allocate.\n\n            function tryCatch(fn, obj, arg) {\n              try {\n                return {\n                  type: \"normal\",\n                  arg: fn.call(obj, arg)\n                };\n              } catch (err) {\n                return {\n                  type: \"throw\",\n                  arg: err\n                };\n              }\n            }\n\n            var GenStateSuspendedStart = \"suspendedStart\";\n            var GenStateSuspendedYield = \"suspendedYield\";\n            var GenStateExecuting = \"executing\";\n            var GenStateCompleted = \"completed\"; // Returning this object from the innerFn has the same effect as\n            // breaking out of the dispatch switch statement.\n\n            var ContinueSentinel = {}; // Dummy constructor functions that we use as the .constructor and\n            // .constructor.prototype properties for functions that return Generator\n            // objects. For full spec compliance, you may wish to configure your\n            // minifier not to mangle the names of these two functions.\n\n            function Generator() {}\n\n            function GeneratorFunction() {}\n\n            function GeneratorFunctionPrototype() {} // This is a polyfill for %IteratorPrototype% for environments that\n            // don't natively support it.\n\n\n            var IteratorPrototype = {};\n\n            IteratorPrototype[iteratorSymbol] = function () {\n              return this;\n            };\n\n            var getProto = Object.getPrototypeOf;\n            var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n\n            if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n              // This environment has a native %IteratorPrototype%; use it instead\n              // of the polyfill.\n              IteratorPrototype = NativeIteratorPrototype;\n            }\n\n            var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n            GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n            GeneratorFunctionPrototype.constructor = GeneratorFunction;\n            GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\"; // Helper for defining the .next, .throw, and .return methods of the\n            // Iterator interface in terms of a single ._invoke method.\n\n            function defineIteratorMethods(prototype) {\n              [\"next\", \"throw\", \"return\"].forEach(function (method) {\n                prototype[method] = function (arg) {\n                  return this._invoke(method, arg);\n                };\n              });\n            }\n\n            exports.isGeneratorFunction = function (genFun) {\n              var ctor = typeof genFun === \"function\" && genFun.constructor;\n              return ctor ? ctor === GeneratorFunction || // For the native GeneratorFunction constructor, the best we can\n              // do is to check its .name property.\n              (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n            };\n\n            exports.mark = function (genFun) {\n              if (Object.setPrototypeOf) {\n                Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n              } else {\n                genFun.__proto__ = GeneratorFunctionPrototype;\n\n                if (!(toStringTagSymbol in genFun)) {\n                  genFun[toStringTagSymbol] = \"GeneratorFunction\";\n                }\n              }\n\n              genFun.prototype = Object.create(Gp);\n              return genFun;\n            }; // Within the body of any async function, `await x` is transformed to\n            // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n            // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n            // meant to be awaited.\n\n\n            exports.awrap = function (arg) {\n              return {\n                __await: arg\n              };\n            };\n\n            function AsyncIterator(generator, PromiseImpl) {\n              function invoke(method, arg, resolve, reject) {\n                var record = tryCatch(generator[method], generator, arg);\n\n                if (record.type === \"throw\") {\n                  reject(record.arg);\n                } else {\n                  var result = record.arg;\n                  var value = result.value;\n\n                  if (value && _typeof3(value) === \"object\" && hasOwn.call(value, \"__await\")) {\n                    return PromiseImpl.resolve(value.__await).then(function (value) {\n                      invoke(\"next\", value, resolve, reject);\n                    }, function (err) {\n                      invoke(\"throw\", err, resolve, reject);\n                    });\n                  }\n\n                  return PromiseImpl.resolve(value).then(function (unwrapped) {\n                    // When a yielded Promise is resolved, its final value becomes\n                    // the .value of the Promise<{value,done}> result for the\n                    // current iteration.\n                    result.value = unwrapped;\n                    resolve(result);\n                  }, function (error) {\n                    // If a rejected Promise was yielded, throw the rejection back\n                    // into the async generator function so it can be handled there.\n                    return invoke(\"throw\", error, resolve, reject);\n                  });\n                }\n              }\n\n              var previousPromise;\n\n              function enqueue(method, arg) {\n                function callInvokeWithMethodAndArg() {\n                  return new PromiseImpl(function (resolve, reject) {\n                    invoke(method, arg, resolve, reject);\n                  });\n                }\n\n                return previousPromise = // If enqueue has been called before, then we want to wait until\n                // all previous Promises have been resolved before calling invoke,\n                // so that results are always delivered in the correct order. If\n                // enqueue has not been called before, then it is important to\n                // call invoke immediately, without waiting on a callback to fire,\n                // so that the async generator function has the opportunity to do\n                // any necessary setup in a predictable way. This predictability\n                // is why the Promise constructor synchronously invokes its\n                // executor callback, and why async functions synchronously\n                // execute code before the first await. Since we implement simple\n                // async functions in terms of async generators, it is especially\n                // important to get this right, even though it requires care.\n                previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, // Avoid propagating failures to Promises returned by later\n                // invocations of the iterator.\n                callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n              } // Define the unified helper method that is used to implement .next,\n              // .throw, and .return (see defineIteratorMethods).\n\n\n              this._invoke = enqueue;\n            }\n\n            defineIteratorMethods(AsyncIterator.prototype);\n\n            AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n              return this;\n            };\n\n            exports.AsyncIterator = AsyncIterator; // Note that simple async functions are implemented on top of\n            // AsyncIterator objects; they just return a Promise for the value of\n            // the final result produced by the iterator.\n\n            exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n              if (PromiseImpl === void 0) PromiseImpl = Promise;\n              var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n              return exports.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n              : iter.next().then(function (result) {\n                return result.done ? result.value : iter.next();\n              });\n            };\n\n            function makeInvokeMethod(innerFn, self, context) {\n              var state = GenStateSuspendedStart;\n              return function invoke(method, arg) {\n                if (state === GenStateExecuting) {\n                  throw new Error(\"Generator is already running\");\n                }\n\n                if (state === GenStateCompleted) {\n                  if (method === \"throw\") {\n                    throw arg;\n                  } // Be forgiving, per 25.3.3.3.3 of the spec:\n                  // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n\n\n                  return doneResult();\n                }\n\n                context.method = method;\n                context.arg = arg;\n\n                while (true) {\n                  var delegate = context.delegate;\n\n                  if (delegate) {\n                    var delegateResult = maybeInvokeDelegate(delegate, context);\n\n                    if (delegateResult) {\n                      if (delegateResult === ContinueSentinel) continue;\n                      return delegateResult;\n                    }\n                  }\n\n                  if (context.method === \"next\") {\n                    // Setting context._sent for legacy support of Babel's\n                    // function.sent implementation.\n                    context.sent = context._sent = context.arg;\n                  } else if (context.method === \"throw\") {\n                    if (state === GenStateSuspendedStart) {\n                      state = GenStateCompleted;\n                      throw context.arg;\n                    }\n\n                    context.dispatchException(context.arg);\n                  } else if (context.method === \"return\") {\n                    context.abrupt(\"return\", context.arg);\n                  }\n\n                  state = GenStateExecuting;\n                  var record = tryCatch(innerFn, self, context);\n\n                  if (record.type === \"normal\") {\n                    // If an exception is thrown from innerFn, we leave state ===\n                    // GenStateExecuting and loop back for another invocation.\n                    state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n                    if (record.arg === ContinueSentinel) {\n                      continue;\n                    }\n\n                    return {\n                      value: record.arg,\n                      done: context.done\n                    };\n                  } else if (record.type === \"throw\") {\n                    state = GenStateCompleted; // Dispatch the exception by looping back around to the\n                    // context.dispatchException(context.arg) call above.\n\n                    context.method = \"throw\";\n                    context.arg = record.arg;\n                  }\n                }\n              };\n            } // Call delegate.iterator[context.method](context.arg) and handle the\n            // result, either by returning a { value, done } result from the\n            // delegate iterator, or by modifying context.method and context.arg,\n            // setting context.delegate to null, and returning the ContinueSentinel.\n\n\n            function maybeInvokeDelegate(delegate, context) {\n              var method = delegate.iterator[context.method];\n\n              if (method === undefined) {\n                // A .throw or .return when the delegate iterator has no .throw\n                // method always terminates the yield* loop.\n                context.delegate = null;\n\n                if (context.method === \"throw\") {\n                  // Note: [\"return\"] must be used for ES3 parsing compatibility.\n                  if (delegate.iterator[\"return\"]) {\n                    // If the delegate iterator has a return method, give it a\n                    // chance to clean up.\n                    context.method = \"return\";\n                    context.arg = undefined;\n                    maybeInvokeDelegate(delegate, context);\n\n                    if (context.method === \"throw\") {\n                      // If maybeInvokeDelegate(context) changed context.method from\n                      // \"return\" to \"throw\", let that override the TypeError below.\n                      return ContinueSentinel;\n                    }\n                  }\n\n                  context.method = \"throw\";\n                  context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n                }\n\n                return ContinueSentinel;\n              }\n\n              var record = tryCatch(method, delegate.iterator, context.arg);\n\n              if (record.type === \"throw\") {\n                context.method = \"throw\";\n                context.arg = record.arg;\n                context.delegate = null;\n                return ContinueSentinel;\n              }\n\n              var info = record.arg;\n\n              if (!info) {\n                context.method = \"throw\";\n                context.arg = new TypeError(\"iterator result is not an object\");\n                context.delegate = null;\n                return ContinueSentinel;\n              }\n\n              if (info.done) {\n                // Assign the result of the finished delegate to the temporary\n                // variable specified by delegate.resultName (see delegateYield).\n                context[delegate.resultName] = info.value; // Resume execution at the desired location (see delegateYield).\n\n                context.next = delegate.nextLoc; // If context.method was \"throw\" but the delegate handled the\n                // exception, let the outer generator proceed normally. If\n                // context.method was \"next\", forget context.arg since it has been\n                // \"consumed\" by the delegate iterator. If context.method was\n                // \"return\", allow the original .return call to continue in the\n                // outer generator.\n\n                if (context.method !== \"return\") {\n                  context.method = \"next\";\n                  context.arg = undefined;\n                }\n              } else {\n                // Re-yield the result returned by the delegate method.\n                return info;\n              } // The delegate iterator is finished, so forget it and continue with\n              // the outer generator.\n\n\n              context.delegate = null;\n              return ContinueSentinel;\n            } // Define Generator.prototype.{next,throw,return} in terms of the\n            // unified ._invoke helper method.\n\n\n            defineIteratorMethods(Gp);\n            Gp[toStringTagSymbol] = \"Generator\"; // A Generator should always return itself as the iterator object when the\n            // @@iterator function is called on it. Some browsers' implementations of the\n            // iterator prototype chain incorrectly implement this, causing the Generator\n            // object to not be returned from this call. This ensures that doesn't happen.\n            // See https://github.com/facebook/regenerator/issues/274 for more details.\n\n            Gp[iteratorSymbol] = function () {\n              return this;\n            };\n\n            Gp.toString = function () {\n              return \"[object Generator]\";\n            };\n\n            function pushTryEntry(locs) {\n              var entry = {\n                tryLoc: locs[0]\n              };\n\n              if (1 in locs) {\n                entry.catchLoc = locs[1];\n              }\n\n              if (2 in locs) {\n                entry.finallyLoc = locs[2];\n                entry.afterLoc = locs[3];\n              }\n\n              this.tryEntries.push(entry);\n            }\n\n            function resetTryEntry(entry) {\n              var record = entry.completion || {};\n              record.type = \"normal\";\n              delete record.arg;\n              entry.completion = record;\n            }\n\n            function Context(tryLocsList) {\n              // The root entry object (effectively a try statement without a catch\n              // or a finally block) gives us a place to store values thrown from\n              // locations where there is no enclosing try statement.\n              this.tryEntries = [{\n                tryLoc: \"root\"\n              }];\n              tryLocsList.forEach(pushTryEntry, this);\n              this.reset(true);\n            }\n\n            exports.keys = function (object) {\n              var keys = [];\n\n              for (var key in object) {\n                keys.push(key);\n              }\n\n              keys.reverse(); // Rather than returning an object with a next method, we keep\n              // things simple and return the next function itself.\n\n              return function next() {\n                while (keys.length) {\n                  var key = keys.pop();\n\n                  if (key in object) {\n                    next.value = key;\n                    next.done = false;\n                    return next;\n                  }\n                } // To avoid creating an additional object, we just hang the .value\n                // and .done properties off the next function object itself. This\n                // also ensures that the minifier will not anonymize the function.\n\n\n                next.done = true;\n                return next;\n              };\n            };\n\n            function values(iterable) {\n              if (iterable) {\n                var iteratorMethod = iterable[iteratorSymbol];\n\n                if (iteratorMethod) {\n                  return iteratorMethod.call(iterable);\n                }\n\n                if (typeof iterable.next === \"function\") {\n                  return iterable;\n                }\n\n                if (!isNaN(iterable.length)) {\n                  var i = -1,\n                      next = function next() {\n                    while (++i < iterable.length) {\n                      if (hasOwn.call(iterable, i)) {\n                        next.value = iterable[i];\n                        next.done = false;\n                        return next;\n                      }\n                    }\n\n                    next.value = undefined;\n                    next.done = true;\n                    return next;\n                  };\n\n                  return next.next = next;\n                }\n              } // Return an iterator with no values.\n\n\n              return {\n                next: doneResult\n              };\n            }\n\n            exports.values = values;\n\n            function doneResult() {\n              return {\n                value: undefined,\n                done: true\n              };\n            }\n\n            Context.prototype = {\n              constructor: Context,\n              reset: function reset(skipTempReset) {\n                this.prev = 0;\n                this.next = 0; // Resetting context._sent for legacy support of Babel's\n                // function.sent implementation.\n\n                this.sent = this._sent = undefined;\n                this.done = false;\n                this.delegate = null;\n                this.method = \"next\";\n                this.arg = undefined;\n                this.tryEntries.forEach(resetTryEntry);\n\n                if (!skipTempReset) {\n                  for (var name in this) {\n                    // Not sure about the optimal order of these conditions:\n                    if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n                      this[name] = undefined;\n                    }\n                  }\n                }\n              },\n              stop: function stop() {\n                this.done = true;\n                var rootEntry = this.tryEntries[0];\n                var rootRecord = rootEntry.completion;\n\n                if (rootRecord.type === \"throw\") {\n                  throw rootRecord.arg;\n                }\n\n                return this.rval;\n              },\n              dispatchException: function dispatchException(exception) {\n                if (this.done) {\n                  throw exception;\n                }\n\n                var context = this;\n\n                function handle(loc, caught) {\n                  record.type = \"throw\";\n                  record.arg = exception;\n                  context.next = loc;\n\n                  if (caught) {\n                    // If the dispatched exception was caught by a catch block,\n                    // then let that catch block handle the exception normally.\n                    context.method = \"next\";\n                    context.arg = undefined;\n                  }\n\n                  return !!caught;\n                }\n\n                for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n                  var entry = this.tryEntries[i];\n                  var record = entry.completion;\n\n                  if (entry.tryLoc === \"root\") {\n                    // Exception thrown outside of any try block that could handle\n                    // it, so set the completion value of the entire function to\n                    // throw the exception.\n                    return handle(\"end\");\n                  }\n\n                  if (entry.tryLoc <= this.prev) {\n                    var hasCatch = hasOwn.call(entry, \"catchLoc\");\n                    var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n                    if (hasCatch && hasFinally) {\n                      if (this.prev < entry.catchLoc) {\n                        return handle(entry.catchLoc, true);\n                      } else if (this.prev < entry.finallyLoc) {\n                        return handle(entry.finallyLoc);\n                      }\n                    } else if (hasCatch) {\n                      if (this.prev < entry.catchLoc) {\n                        return handle(entry.catchLoc, true);\n                      }\n                    } else if (hasFinally) {\n                      if (this.prev < entry.finallyLoc) {\n                        return handle(entry.finallyLoc);\n                      }\n                    } else {\n                      throw new Error(\"try statement without catch or finally\");\n                    }\n                  }\n                }\n              },\n              abrupt: function abrupt(type, arg) {\n                for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n                  var entry = this.tryEntries[i];\n\n                  if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n                    var finallyEntry = entry;\n                    break;\n                  }\n                }\n\n                if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n                  // Ignore the finally entry if control is not jumping to a\n                  // location outside the try/catch block.\n                  finallyEntry = null;\n                }\n\n                var record = finallyEntry ? finallyEntry.completion : {};\n                record.type = type;\n                record.arg = arg;\n\n                if (finallyEntry) {\n                  this.method = \"next\";\n                  this.next = finallyEntry.finallyLoc;\n                  return ContinueSentinel;\n                }\n\n                return this.complete(record);\n              },\n              complete: function complete(record, afterLoc) {\n                if (record.type === \"throw\") {\n                  throw record.arg;\n                }\n\n                if (record.type === \"break\" || record.type === \"continue\") {\n                  this.next = record.arg;\n                } else if (record.type === \"return\") {\n                  this.rval = this.arg = record.arg;\n                  this.method = \"return\";\n                  this.next = \"end\";\n                } else if (record.type === \"normal\" && afterLoc) {\n                  this.next = afterLoc;\n                }\n\n                return ContinueSentinel;\n              },\n              finish: function finish(finallyLoc) {\n                for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n                  var entry = this.tryEntries[i];\n\n                  if (entry.finallyLoc === finallyLoc) {\n                    this.complete(entry.completion, entry.afterLoc);\n                    resetTryEntry(entry);\n                    return ContinueSentinel;\n                  }\n                }\n              },\n              \"catch\": function _catch(tryLoc) {\n                for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n                  var entry = this.tryEntries[i];\n\n                  if (entry.tryLoc === tryLoc) {\n                    var record = entry.completion;\n\n                    if (record.type === \"throw\") {\n                      var thrown = record.arg;\n                      resetTryEntry(entry);\n                    }\n\n                    return thrown;\n                  }\n                } // The context.catch method must only be called with a location\n                // argument that corresponds to a known catch block.\n\n\n                throw new Error(\"illegal catch attempt\");\n              },\n              delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n                this.delegate = {\n                  iterator: values(iterable),\n                  resultName: resultName,\n                  nextLoc: nextLoc\n                };\n\n                if (this.method === \"next\") {\n                  // Deliberately forget the last sent value so that we don't\n                  // accidentally pass it on to the delegate.\n                  this.arg = undefined;\n                }\n\n                return ContinueSentinel;\n              }\n            }; // Regardless of whether this script is executing as a CommonJS module\n            // or not, return the runtime object so that we can declare the variable\n            // regeneratorRuntime in the outer scope, which allows this module to be\n            // injected easily by `bin/regenerator --include-runtime script.js`.\n\n            return exports;\n          }( // If this script is executing as a CommonJS module, use module.exports\n          // as the regeneratorRuntime namespace. Otherwise create a new empty\n          // object. Either way, the resulting object will be used to initialize\n          // the regeneratorRuntime variable at the top of this file.\n          true ? module.exports : 0);\n\n          try {\n            regeneratorRuntime = runtime;\n          } catch (accidentalStrictMode) {\n            // This module should not be running in strict mode, so the above\n            // assignment should always work unless something is misconfigured. Just\n            // in case runtime.js accidentally runs in strict mode, we can escape\n            // strict mode using a global Function call. This could conceivably fail\n            // if a Content Security Policy forbids using Function, but in that case\n            // the proper solution is to fix the accidental strict mode problem. If\n            // you've misconfigured your bundler to force strict mode and applied a\n            // CSP to forbid Function, and you're not willing to fix either of those\n            // problems, please detail your unique predicament in a GitHub issue.\n            Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n          }\n          /***/\n\n        },\n\n        /***/\n        \"recordrtc\":\n        /*!******************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"recordrtc\",\"commonjs2\":\"recordrtc\",\"amd\":\"recordrtc\",\"root\":\"RecordRTC\"} ***!\n          \\******************************************************************************************************/\n\n        /***/\n        function recordrtc(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_recordrtc__;\n          /***/\n        },\n\n        /***/\n        \"video.js\":\n        /*!*************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"video.js\",\"commonjs2\":\"video.js\",\"amd\":\"video.js\",\"root\":\"videojs\"} ***!\n          \\*************************************************************************************************/\n\n        /***/\n        function videoJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /* webpack/runtime/define property getters */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define getter functions for harmony exports\n\n        /******/\n        __webpack_require__.d = function (exports, definition) {\n          /******/\n          for (var key in definition) {\n            /******/\n            if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n              /******/\n              Object.defineProperty(exports, key, {\n                enumerable: true,\n                get: definition[key]\n              });\n              /******/\n            }\n            /******/\n\n          }\n          /******/\n\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/global */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.g = function () {\n          /******/\n          if ((typeof globalThis === \"undefined\" ? \"undefined\" : _typeof3(globalThis)) === 'object') return globalThis;\n          /******/\n\n          try {\n            /******/\n            return this || new Function('return this')();\n            /******/\n          } catch (e) {\n            /******/\n            if ((typeof window === \"undefined\" ? \"undefined\" : _typeof3(window)) === 'object') return window;\n            /******/\n          }\n          /******/\n\n        }();\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/hasOwnProperty shorthand */\n\n      /******/\n\n\n      (function () {\n        /******/\n        __webpack_require__.o = function (obj, prop) {\n          return Object.prototype.hasOwnProperty.call(obj, prop);\n        };\n        /******/\n\n      })();\n      /******/\n\n      /******/\n\n      /* webpack/runtime/make namespace object */\n\n      /******/\n\n\n      (function () {\n        /******/\n        // define __esModule on exports\n\n        /******/\n        __webpack_require__.r = function (exports) {\n          /******/\n          if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n            /******/\n            Object.defineProperty(exports, Symbol.toStringTag, {\n              value: 'Module'\n            });\n            /******/\n          }\n          /******/\n\n\n          Object.defineProperty(exports, '__esModule', {\n            value: true\n          });\n          /******/\n        };\n        /******/\n\n      })();\n      /******/\n\n      /************************************************************************/\n\n\n      var __webpack_exports__ = {}; // This entry need to be wrapped in an IIFE because it need to be in strict mode.\n\n      (function () {\n        \"use strict\";\n\n        var exports = __webpack_exports__;\n        /*!**********************************!*\\\n          !*** ./src/js/videojs.record.js ***!\n          \\**********************************/\n\n        var _interopRequireDefault = __webpack_require__(\n        /*! @babel/runtime/helpers/interopRequireDefault */\n        \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n        Object.defineProperty(exports, \"__esModule\", {\n          value: true\n        });\n        exports.Record = void 0;\n\n        var _typeof2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/typeof */\n        \"./node_modules/@babel/runtime/helpers/typeof.js\"));\n\n        var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/classCallCheck */\n        \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n        var _createClass2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/createClass */\n        \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n        var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/assertThisInitialized */\n        \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\"));\n\n        var _get2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/get */\n        \"./node_modules/@babel/runtime/helpers/get.js\"));\n\n        var _inherits2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/inherits */\n        \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n        var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/possibleConstructorReturn */\n        \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n        var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n        /*! @babel/runtime/helpers/getPrototypeOf */\n        \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n        var _video = _interopRequireDefault(__webpack_require__(\n        /*! video.js */\n        \"video.js\"));\n\n        var _animationDisplay = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/animation-display */\n        \"./src/js/controls/animation-display.js\"));\n\n        var _recordCanvas = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/record-canvas */\n        \"./src/js/controls/record-canvas.js\"));\n\n        var _deviceButton = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/device-button */\n        \"./src/js/controls/device-button.js\"));\n\n        var _cameraButton = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/camera-button */\n        \"./src/js/controls/camera-button.js\"));\n\n        var _recordToggle = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/record-toggle */\n        \"./src/js/controls/record-toggle.js\"));\n\n        var _recordIndicator = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/record-indicator */\n        \"./src/js/controls/record-indicator.js\"));\n\n        var _pictureInPictureToggle = _interopRequireDefault(__webpack_require__(\n        /*! ./controls/picture-in-picture-toggle */\n        \"./src/js/controls/picture-in-picture-toggle.js\"));\n\n        var _event = _interopRequireDefault(__webpack_require__(\n        /*! ./event */\n        \"./src/js/event.js\"));\n\n        var _hotKeys = _interopRequireDefault(__webpack_require__(\n        /*! ./hot-keys */\n        \"./src/js/hot-keys.js\"));\n\n        var _defaults = _interopRequireDefault(__webpack_require__(\n        /*! ./defaults */\n        \"./src/js/defaults.js\"));\n\n        var _formatTime = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/format-time */\n        \"./src/js/utils/format-time.js\"));\n\n        var _browserShim = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/browser-shim */\n        \"./src/js/utils/browser-shim.js\"));\n\n        var _compareVersion = _interopRequireDefault(__webpack_require__(\n        /*! ./utils/compare-version */\n        \"./src/js/utils/compare-version.js\"));\n\n        var _detectBrowser = __webpack_require__(\n        /*! ./utils/detect-browser */\n        \"./src/js/utils/detect-browser.js\");\n\n        var _engineLoader = __webpack_require__(\n        /*! ./engine/engine-loader */\n        \"./src/js/engine/engine-loader.js\");\n\n        var _recordMode = __webpack_require__(\n        /*! ./engine/record-mode */\n        \"./src/js/engine/record-mode.js\");\n\n        function _createSuper(Derived) {\n          var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n          return function _createSuperInternal() {\n            var Super = (0, _getPrototypeOf2.default)(Derived),\n                result;\n\n            if (hasNativeReflectConstruct) {\n              var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n              result = Reflect.construct(Super, arguments, NewTarget);\n            } else {\n              result = Super.apply(this, arguments);\n            }\n\n            return (0, _possibleConstructorReturn2.default)(this, result);\n          };\n        }\n\n        function _isNativeReflectConstruct() {\n          if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n          if (Reflect.construct.sham) return false;\n          if (typeof Proxy === \"function\") return true;\n\n          try {\n            Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }\n\n        var Plugin = _video.default.getPlugin('plugin');\n\n        var Player = _video.default.getComponent('Player');\n\n        var AUTO = 'auto';\n\n        var Record = function (_Plugin) {\n          (0, _inherits2.default)(Record, _Plugin);\n\n          var _super = _createSuper(Record);\n\n          function Record(player, options) {\n            var _this;\n\n            (0, _classCallCheck2.default)(this, Record);\n            _this = _super.call(this, player, options);\n\n            Player.prototype.play = function play() {\n              var retval = this.techGet_('play');\n\n              if (retval !== undefined && typeof retval.then === 'function') {\n                retval.then(null, function (e) {});\n              }\n\n              return retval;\n            };\n\n            player.addClass('vjs-record');\n\n            _this.loadOptions();\n\n            _this.resetState();\n\n            if (options.formatTime && typeof options.formatTime === 'function') {\n              _this.setFormatTime(options.formatTime);\n            } else {\n              _this.setFormatTime(function (seconds, guide) {\n                return (0, _formatTime.default)(seconds, guide, _this.displayMilliseconds);\n              });\n            }\n\n            var deviceIcon = 'av-perm';\n\n            switch (_this.getRecordType()) {\n              case _recordMode.IMAGE_ONLY:\n              case _recordMode.VIDEO_ONLY:\n              case _recordMode.ANIMATION:\n                deviceIcon = 'video-perm';\n                break;\n\n              case _recordMode.AUDIO_ONLY:\n                deviceIcon = 'audio-perm';\n                break;\n\n              case _recordMode.SCREEN_ONLY:\n                deviceIcon = 'screen-perm';\n                break;\n\n              case _recordMode.AUDIO_SCREEN:\n                deviceIcon = 'sv-perm';\n                break;\n            }\n\n            _deviceButton.default.prototype.buildCSSClass = function () {\n              return 'vjs-record vjs-device-button vjs-control vjs-icon-' + deviceIcon;\n            };\n\n            player.deviceButton = new _deviceButton.default(player, options);\n            player.addChild(player.deviceButton);\n            player.recordIndicator = new _recordIndicator.default(player, options);\n            player.recordIndicator.hide();\n            player.addChild(player.recordIndicator);\n            player.recordCanvas = new _recordCanvas.default(player, options);\n            player.recordCanvas.hide();\n            player.addChild(player.recordCanvas);\n            player.animationDisplay = new _animationDisplay.default(player, options);\n            player.animationDisplay.hide();\n            player.addChild(player.animationDisplay);\n            player.cameraButton = new _cameraButton.default(player, options);\n            player.cameraButton.hide();\n            player.recordToggle = new _recordToggle.default(player, options);\n            player.recordToggle.hide();\n            var oldVideoJS = _video.default.VERSION === undefined || (0, _compareVersion.default)(_video.default.VERSION, '7.6.0') === -1;\n\n            if (!('pictureInPictureEnabled' in document)) {\n              _this.pictureInPicture = false;\n            }\n\n            if (_this.pictureInPicture === true) {\n              if (oldVideoJS) {\n                player.pipToggle = new _pictureInPictureToggle.default(player, options);\n                player.pipToggle.hide();\n              }\n\n              _this.onEnterPiPHandler = _this.onEnterPiP.bind((0, _assertThisInitialized2.default)(_this));\n              _this.onLeavePiPHandler = _this.onLeavePiP.bind((0, _assertThisInitialized2.default)(_this));\n            }\n\n            if (_this.player.options_.controlBar) {\n              var customUIElements = ['deviceButton', 'recordIndicator', 'cameraButton', 'recordToggle'];\n\n              if (player.pipToggle) {\n                customUIElements.push('pipToggle');\n              }\n\n              customUIElements.forEach(function (element) {\n                if (_this.player.options_.controlBar[element] !== undefined) {\n                  _this.player[element].layoutExclude = true;\n\n                  _this.player[element].hide();\n                }\n              });\n            }\n\n            _this.player.one(_event.default.READY, _this.setupUI.bind((0, _assertThisInitialized2.default)(_this)));\n\n            return _this;\n          }\n\n          (0, _createClass2.default)(Record, [{\n            key: \"loadOptions\",\n            value: function loadOptions() {\n              var newOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n              var recordOptions = _video.default.mergeOptions(_defaults.default, this.player.options_.plugins.record, newOptions);\n\n              this.recordImage = recordOptions.image;\n              this.recordAudio = recordOptions.audio;\n              this.recordVideo = recordOptions.video;\n              this.recordAnimation = recordOptions.animation;\n              this.recordScreen = recordOptions.screen;\n              this.maxLength = recordOptions.maxLength;\n              this.maxFileSize = recordOptions.maxFileSize;\n              this.displayMilliseconds = recordOptions.displayMilliseconds;\n              this.debug = recordOptions.debug;\n              this.pictureInPicture = recordOptions.pip;\n              this.recordTimeSlice = recordOptions.timeSlice;\n              this.autoMuteDevice = recordOptions.autoMuteDevice;\n              this.pluginLibraryOptions = recordOptions.pluginLibraryOptions;\n              this.videoFrameWidth = recordOptions.frameWidth;\n              this.videoFrameHeight = recordOptions.frameHeight;\n              this.videoFrameRate = recordOptions.videoFrameRate;\n              this.videoBitRate = recordOptions.videoBitRate;\n              this.videoEngine = recordOptions.videoEngine;\n              this.videoRecorderType = recordOptions.videoRecorderType;\n              this.videoMimeType = recordOptions.videoMimeType;\n              this.videoWorkerURL = recordOptions.videoWorkerURL;\n              this.videoWebAssemblyURL = recordOptions.videoWebAssemblyURL;\n              this.convertEngine = recordOptions.convertEngine;\n              this.convertAuto = recordOptions.convertAuto;\n              this.convertWorkerURL = recordOptions.convertWorkerURL;\n              this.convertOptions = recordOptions.convertOptions;\n              this.audioEngine = recordOptions.audioEngine;\n              this.audioRecorderType = recordOptions.audioRecorderType;\n              this.audioWorkerURL = recordOptions.audioWorkerURL;\n              this.audioWebAssemblyURL = recordOptions.audioWebAssemblyURL;\n              this.audioBufferSize = recordOptions.audioBufferSize;\n              this.audioSampleRate = recordOptions.audioSampleRate;\n              this.audioBitRate = recordOptions.audioBitRate;\n              this.audioChannels = recordOptions.audioChannels;\n              this.audioMimeType = recordOptions.audioMimeType;\n              this.audioBufferUpdate = recordOptions.audioBufferUpdate;\n              this.imageOutputType = recordOptions.imageOutputType;\n              this.imageOutputFormat = recordOptions.imageOutputFormat;\n              this.imageOutputQuality = recordOptions.imageOutputQuality;\n              this.animationFrameRate = recordOptions.animationFrameRate;\n              this.animationQuality = recordOptions.animationQuality;\n            }\n          }, {\n            key: \"setupUI\",\n            value: function setupUI() {\n              var _this2 = this;\n\n              this.player.controlBar.addChild(this.player.cameraButton);\n              this.player.controlBar.el().insertBefore(this.player.cameraButton.el(), this.player.controlBar.el().firstChild);\n              this.player.controlBar.el().insertBefore(this.player.recordToggle.el(), this.player.controlBar.el().firstChild);\n\n              if (this.pictureInPicture === true) {\n                if (this.player.controlBar.pictureInPictureToggle === undefined && this.player.pipToggle !== undefined) {\n                  this.player.controlBar.addChild(this.player.pipToggle);\n                } else if (this.player.controlBar.pictureInPictureToggle !== undefined) {\n                  this.player.pipToggle = this.player.controlBar.pictureInPictureToggle;\n                  this.player.pipToggle.hide();\n                }\n              } else if (this.pictureInPicture === false && this.player.controlBar.pictureInPictureToggle !== undefined) {\n                this.player.controlBar.pictureInPictureToggle.hide();\n              }\n\n              if (this.player.controlBar.remainingTimeDisplay !== undefined) {\n                this.player.controlBar.remainingTimeDisplay.el().style.display = 'none';\n              }\n\n              if (this.player.controlBar.liveDisplay !== undefined) {\n                this.player.controlBar.liveDisplay.el().style.display = 'none';\n              }\n\n              this.player.loop(false);\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer = this.player.wavesurfer();\n                  this.surfer.setFormatTime(this._formatTime);\n                  break;\n\n                case _recordMode.IMAGE_ONLY:\n                case _recordMode.VIDEO_ONLY:\n                case _recordMode.AUDIO_VIDEO:\n                case _recordMode.ANIMATION:\n                case _recordMode.SCREEN_ONLY:\n                case _recordMode.AUDIO_SCREEN:\n                  if (this.player.bigPlayButton !== undefined) {\n                    this.player.bigPlayButton.hide();\n                  }\n\n                  this.player.one(_event.default.LOADEDMETADATA, function () {\n                    _this2.setDuration(_this2.maxLength);\n                  });\n                  this.player.one(_event.default.LOADSTART, function () {\n                    _this2.setDuration(_this2.maxLength);\n                  });\n\n                  if (this.player.usingNativeControls_ === true) {\n                    if (this.player.tech_.el_ !== undefined) {\n                      this.player.tech_.el_.controls = false;\n                    }\n                  }\n\n                  this.player.removeTechControlsListeners_();\n\n                  if (this.player.options_.controls) {\n                    if (this.player.controlBar.progressControl !== undefined) {\n                      this.player.controlBar.progressControl.hide();\n                    }\n\n                    this.player.on(_event.default.USERINACTIVE, function (event) {\n                      _this2.player.userActive(true);\n                    });\n                    this.player.controlBar.show();\n                    this.player.controlBar.el().style.display = 'flex';\n                  }\n\n                  break;\n              }\n\n              this.player.off(_event.default.TIMEUPDATE);\n              this.player.off(_event.default.DURATIONCHANGE);\n              this.player.off(_event.default.LOADEDMETADATA);\n              this.player.off(_event.default.LOADSTART);\n              this.player.off(_event.default.ENDED);\n              this.setDuration(this.maxLength);\n\n              if (this.player.options_.plugins.record && this.player.options_.plugins.record.hotKeys && this.player.options_.plugins.record.hotKeys !== false) {\n                var handler = this.player.options_.plugins.record.hotKeys;\n\n                if (handler === true) {\n                  handler = _hotKeys.default;\n                }\n\n                this.player.options_.userActions = {\n                  hotkeys: handler\n                };\n              }\n\n              if (this.player.controlBar.playToggle !== undefined) {\n                this.player.controlBar.playToggle.hide();\n              }\n            }\n          }, {\n            key: \"isRecording\",\n            value: function isRecording() {\n              return this._recording;\n            }\n          }, {\n            key: \"isProcessing\",\n            value: function isProcessing() {\n              return this._processing;\n            }\n          }, {\n            key: \"isDestroyed\",\n            value: function isDestroyed() {\n              var destroyed = this.player === null;\n\n              if (destroyed === false) {\n                destroyed = this.player.children() === null;\n              }\n\n              return destroyed;\n            }\n          }, {\n            key: \"getDevice\",\n            value: function getDevice() {\n              var _this3 = this;\n\n              if (this.deviceReadyCallback === undefined) {\n                this.deviceReadyCallback = this.onDeviceReady.bind(this);\n              }\n\n              if (this.deviceErrorCallback === undefined) {\n                this.deviceErrorCallback = this.onDeviceError.bind(this);\n              }\n\n              if (this.engineStopCallback === undefined) {\n                this.engineStopCallback = this.onRecordComplete.bind(this);\n              }\n\n              if (this.streamVisibleCallback === undefined) {\n                this.streamVisibleCallback = this.onStreamVisible.bind(this);\n              }\n\n              if (this.getRecordType() === _recordMode.SCREEN_ONLY || this.getRecordType() === _recordMode.AUDIO_SCREEN) {\n                if (navigator.mediaDevices === undefined || navigator.mediaDevices.getDisplayMedia === undefined) {\n                  this.player.trigger(_event.default.ERROR, 'This browser does not support navigator.mediaDevices.getDisplayMedia');\n                  return;\n                }\n              } else {\n                if (navigator.mediaDevices === undefined || navigator.mediaDevices.getUserMedia === undefined) {\n                  this.player.trigger(_event.default.ERROR, 'This browser does not support navigator.mediaDevices.getUserMedia');\n                  return;\n                }\n              }\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.mediaType = {\n                    audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n                    video: false\n                  };\n                  this.surfer.surfer.microphone.un(_event.default.DEVICE_READY, this.deviceReadyCallback);\n                  this.surfer.surfer.microphone.un(_event.default.DEVICE_ERROR, this.deviceErrorCallback);\n                  this.surfer.surfer.microphone.on(_event.default.DEVICE_READY, this.deviceReadyCallback);\n                  this.surfer.surfer.microphone.on(_event.default.DEVICE_ERROR, this.deviceErrorCallback);\n                  this.surfer.setupPlaybackEvents(false);\n                  this.surfer.liveMode = true;\n                  this.surfer.surfer.microphone.paused = false;\n\n                  if (this.surfer.surfer.backend.ac.state === 'suspended') {\n                    this.surfer.surfer.backend.ac.resume();\n                  }\n\n                  if (this.audioBufferUpdate === true) {\n                    this.surfer.surfer.microphone.reloadBufferFunction = function (event) {\n                      if (!_this3.surfer.surfer.microphone.paused) {\n                        _this3.surfer.surfer.empty();\n\n                        _this3.surfer.surfer.loadDecodedBuffer(event.inputBuffer);\n\n                        _this3.player.recordedData = event.inputBuffer;\n\n                        _this3.player.trigger(_event.default.AUDIO_BUFFER_UPDATE);\n                      }\n                    };\n                  }\n\n                  this.surfer.surfer.microphone.start();\n                  break;\n\n                case _recordMode.IMAGE_ONLY:\n                case _recordMode.VIDEO_ONLY:\n                  if (this.getRecordType() === _recordMode.IMAGE_ONLY) {\n                    this.player.el().firstChild.addEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n                  }\n\n                  this.mediaType = {\n                    audio: false,\n                    video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n                  };\n                  navigator.mediaDevices.getUserMedia({\n                    audio: false,\n                    video: this.getRecordType() === _recordMode.IMAGE_ONLY ? this.recordImage : this.recordVideo\n                  }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n                  break;\n\n                case _recordMode.AUDIO_SCREEN:\n                  this.mediaType = {\n                    audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n                    video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n                  };\n                  var audioScreenConstraints = {};\n\n                  if (this.recordScreen === true) {\n                    audioScreenConstraints = {\n                      video: true\n                    };\n                  } else if ((0, _typeof2.default)(this.recordScreen) === 'object' && this.recordScreen.constructor === Object) {\n                    audioScreenConstraints = this.recordScreen;\n                  }\n\n                  navigator.mediaDevices.getDisplayMedia(audioScreenConstraints).then(function (screenStream) {\n                    navigator.mediaDevices.getUserMedia({\n                      audio: _this3.recordAudio\n                    }).then(function (mic) {\n                      screenStream.addTrack(mic.getTracks()[0]);\n\n                      _this3.onDeviceReady.bind(_this3)(screenStream);\n                    }).catch(function (code) {\n                      if (screenStream.active) {\n                        screenStream.stop();\n                      }\n\n                      _this3.onDeviceError(code);\n                    });\n                  }).catch(this.onDeviceError.bind(this));\n                  break;\n\n                case _recordMode.AUDIO_VIDEO:\n                  this.mediaType = {\n                    audio: this.audioRecorderType === AUTO ? true : this.audioRecorderType,\n                    video: this.videoRecorderType === AUTO ? true : this.videoRecorderType\n                  };\n                  navigator.mediaDevices.getUserMedia({\n                    audio: this.recordAudio,\n                    video: this.recordVideo\n                  }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n                  break;\n\n                case _recordMode.ANIMATION:\n                  this.mediaType = {\n                    audio: false,\n                    video: false,\n                    gif: true\n                  };\n                  navigator.mediaDevices.getUserMedia({\n                    audio: false,\n                    video: this.recordAnimation\n                  }).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n                  break;\n\n                case _recordMode.SCREEN_ONLY:\n                  this.mediaType = {\n                    audio: false,\n                    video: false,\n                    screen: true,\n                    gif: false\n                  };\n                  var screenOnlyConstraints = {};\n\n                  if (this.recordScreen === true) {\n                    screenOnlyConstraints = {\n                      video: true\n                    };\n                  } else if ((0, _typeof2.default)(this.recordScreen) === 'object' && this.recordScreen.constructor === Object) {\n                    screenOnlyConstraints = this.recordScreen;\n                  }\n\n                  navigator.mediaDevices.getDisplayMedia(screenOnlyConstraints).then(this.onDeviceReady.bind(this)).catch(this.onDeviceError.bind(this));\n                  break;\n              }\n            }\n          }, {\n            key: \"onDeviceReady\",\n            value: function onDeviceReady(stream) {\n              var _this4 = this;\n\n              this._deviceActive = true;\n\n              if (this.stream !== undefined && this.stream.active) {\n                this.stream.stop();\n              }\n\n              this.stream = stream;\n              this.player.deviceButton.hide();\n              this.setDuration(this.maxLength);\n              this.setCurrentTime(0);\n\n              if (this.player.controlBar.playToggle !== undefined) {\n                this.player.controlBar.playToggle.hide();\n              }\n\n              this.off(this.player, _event.default.TIMEUPDATE, this.playbackTimeUpdate);\n              this.off(this.player, _event.default.ENDED, this.playbackTimeUpdate);\n\n              if (this.getRecordType() !== _recordMode.IMAGE_ONLY) {\n                if (this.getRecordType() !== _recordMode.AUDIO_ONLY && (0, _engineLoader.isAudioPluginActive)(this.audioEngine)) {\n                  throw new Error('Currently ' + this.audioEngine + ' is only supported in audio-only mode.');\n                }\n\n                var EngineClass, engineType;\n\n                switch (this.getRecordType()) {\n                  case _recordMode.AUDIO_ONLY:\n                    EngineClass = (0, _engineLoader.getAudioEngine)(this.audioEngine);\n                    engineType = this.audioEngine;\n                    break;\n\n                  default:\n                    EngineClass = (0, _engineLoader.getVideoEngine)(this.videoEngine);\n                    engineType = this.videoEngine;\n                }\n\n                try {\n                  this.engine = new EngineClass(this.player, this.player.options_);\n                } catch (err) {\n                  throw new Error('Could not load ' + engineType + ' plugin');\n                }\n\n                this.engine.on(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n                this.engine.bufferSize = this.audioBufferSize;\n                this.engine.sampleRate = this.audioSampleRate;\n                this.engine.bitRate = this.audioBitRate;\n                this.engine.audioChannels = this.audioChannels;\n                this.engine.audioWorkerURL = this.audioWorkerURL;\n                this.engine.audioWebAssemblyURL = this.audioWebAssemblyURL;\n                this.engine.mimeType = {\n                  video: this.videoMimeType,\n                  gif: 'image/gif'\n                };\n\n                if (this.audioMimeType !== null && this.audioMimeType !== AUTO) {\n                  this.engine.mimeType.audio = this.audioMimeType;\n                }\n\n                this.engine.videoWorkerURL = this.videoWorkerURL;\n                this.engine.videoWebAssemblyURL = this.videoWebAssemblyURL;\n                this.engine.videoBitRate = this.videoBitRate;\n                this.engine.videoFrameRate = this.videoFrameRate;\n                this.engine.video = {\n                  width: this.videoFrameWidth,\n                  height: this.videoFrameHeight\n                };\n                this.engine.canvas = {\n                  width: this.videoFrameWidth,\n                  height: this.videoFrameHeight\n                };\n                this.engine.quality = this.animationQuality;\n                this.engine.frameRate = this.animationFrameRate;\n\n                if (this.recordTimeSlice && this.recordTimeSlice > 0) {\n                  this.engine.timeSlice = this.recordTimeSlice;\n                  this.engine.maxFileSize = this.maxFileSize;\n                }\n\n                this.engine.pluginLibraryOptions = this.pluginLibraryOptions;\n                this.engine.setup(this.stream, this.mediaType, this.debug);\n\n                if (this.convertEngine !== '') {\n                  var ConvertEngineClass = (0, _engineLoader.getConvertEngine)(this.convertEngine);\n\n                  try {\n                    this.converter = new ConvertEngineClass(this.player, this.player.options_);\n                  } catch (err) {\n                    throw new Error('Could not load ' + this.convertEngine + ' plugin');\n                  }\n\n                  this.converter.convertAuto = this.convertAuto;\n                  this.converter.convertWorkerURL = this.convertWorkerURL;\n                  this.converter.convertOptions = this.convertOptions;\n                  this.converter.pluginLibraryOptions = this.pluginLibraryOptions;\n                  this.converter.setup(this.mediaType, this.debug);\n                }\n\n                var uiElements = ['currentTimeDisplay', 'timeDivider', 'durationDisplay'];\n                uiElements.forEach(function (element) {\n                  element = _this4.player.controlBar[element];\n\n                  if (element !== undefined) {\n                    element.el().style.display = 'block';\n                    element.show();\n                  }\n                });\n                this.player.recordToggle.show();\n              } else {\n                this.player.recordIndicator.disable();\n                this.retrySnapshot();\n              }\n\n              if (this.getRecordType() !== _recordMode.AUDIO_ONLY) {\n                this.mediaElement = this.player.el().firstChild;\n                this.mediaElement.controls = false;\n                this.mediaElement.muted = true;\n                this.displayVolumeControl(false);\n\n                if (this.pictureInPicture === true) {\n                  this.player.pipToggle.show();\n                  this.mediaElement.removeEventListener(_event.default.ENTERPICTUREINPICTURE, this.onEnterPiPHandler);\n                  this.mediaElement.removeEventListener(_event.default.LEAVEPICTUREINPICTURE, this.onLeavePiPHandler);\n                  this.mediaElement.addEventListener(_event.default.ENTERPICTUREINPICTURE, this.onEnterPiPHandler);\n                  this.mediaElement.addEventListener(_event.default.LEAVEPICTUREINPICTURE, this.onLeavePiPHandler);\n                }\n\n                this.load(this.stream);\n                this.player.one(_event.default.LOADEDMETADATA, function () {\n                  _this4.mediaElement.play();\n\n                  _this4.player.trigger(_event.default.DEVICE_READY);\n                });\n              } else {\n                this.player.trigger(_event.default.DEVICE_READY);\n              }\n            }\n          }, {\n            key: \"onDeviceError\",\n            value: function onDeviceError(code) {\n              this._deviceActive = false;\n\n              if (!this.isDestroyed()) {\n                this.player.deviceErrorCode = code;\n                this.player.trigger(_event.default.DEVICE_ERROR);\n              }\n            }\n          }, {\n            key: \"start\",\n            value: function start() {\n              var _this5 = this;\n\n              if (!this.isProcessing()) {\n                if (this.stream && this.stream.active === false) {\n                  this.getDevice();\n                  return;\n                }\n\n                this._recording = true;\n\n                if (this.player.controlBar.playToggle !== undefined) {\n                  this.player.controlBar.playToggle.hide();\n                }\n\n                this.off(this.player, _event.default.TIMEUPDATE, this.playbackTimeUpdate);\n                this.off(this.player, _event.default.ENDED, this.playbackTimeUpdate);\n\n                switch (this.getRecordType()) {\n                  case _recordMode.AUDIO_ONLY:\n                    this.surfer.setupPlaybackEvents(false);\n                    this.surfer.surfer.microphone.paused = false;\n                    this.surfer.liveMode = true;\n                    this.surfer.surfer.microphone.play();\n                    break;\n\n                  case _recordMode.VIDEO_ONLY:\n                  case _recordMode.AUDIO_VIDEO:\n                  case _recordMode.AUDIO_SCREEN:\n                  case _recordMode.SCREEN_ONLY:\n                    this.startVideoPreview();\n                    break;\n\n                  case _recordMode.ANIMATION:\n                    this.player.recordCanvas.hide();\n                    this.player.animationDisplay.hide();\n                    this.mediaElement.style.display = 'block';\n                    this.captureFrame().then(function (result) {\n                      _this5.startVideoPreview();\n                    });\n                    break;\n                }\n\n                if (this.autoMuteDevice) {\n                  this.muteTracks(false);\n                }\n\n                switch (this.getRecordType()) {\n                  case _recordMode.IMAGE_ONLY:\n                    this.createSnapshot();\n                    this.player.trigger(_event.default.START_RECORD);\n                    break;\n\n                  case _recordMode.VIDEO_ONLY:\n                  case _recordMode.AUDIO_VIDEO:\n                  case _recordMode.AUDIO_SCREEN:\n                  case _recordMode.ANIMATION:\n                  case _recordMode.SCREEN_ONLY:\n                    this.player.one(_event.default.LOADEDMETADATA, function () {\n                      _this5.startRecording();\n                    });\n                    break;\n\n                  default:\n                    this.startRecording();\n                }\n              }\n            }\n          }, {\n            key: \"startRecording\",\n            value: function startRecording() {\n              this.paused = false;\n              this.pauseTime = this.pausedTime = 0;\n              this.startTime = performance.now();\n              var COUNTDOWN_SPEED = 100;\n              this.countDown = this.player.setInterval(this.onCountDown.bind(this), COUNTDOWN_SPEED);\n\n              if (this.engine !== undefined) {\n                this.engine.dispose();\n              }\n\n              this.engine.start();\n              this.player.trigger(_event.default.START_RECORD);\n            }\n          }, {\n            key: \"stop\",\n            value: function stop() {\n              if (!this.isProcessing()) {\n                this._recording = false;\n                this._processing = true;\n\n                if (this.getRecordType() !== _recordMode.IMAGE_ONLY) {\n                  this.player.trigger(_event.default.STOP_RECORD);\n                  this.player.clearInterval(this.countDown);\n\n                  if (this.engine) {\n                    this.engine.stop();\n                  }\n\n                  if (this.autoMuteDevice) {\n                    this.muteTracks(true);\n                  }\n                } else {\n                  if (this.player.recordedData) {\n                    this.player.trigger(_event.default.FINISH_RECORD);\n                  }\n                }\n              }\n            }\n          }, {\n            key: \"stopDevice\",\n            value: function stopDevice() {\n              if (this.isRecording()) {\n                this.player.one(_event.default.FINISH_RECORD, this.stopStream.bind(this));\n                this.stop();\n              } else {\n                this.stopStream();\n              }\n            }\n          }, {\n            key: \"stopStream\",\n            value: function stopStream() {\n              if (this.stream) {\n                this._deviceActive = false;\n\n                if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n                  this.surfer.surfer.microphone.stopDevice();\n                  return;\n                }\n\n                this.stream.getTracks().forEach(function (stream) {\n                  stream.stop();\n                });\n              }\n            }\n          }, {\n            key: \"pause\",\n            value: function pause() {\n              if (!this.paused) {\n                this.pauseTime = performance.now();\n                this.paused = true;\n                this.engine.pause();\n              }\n            }\n          }, {\n            key: \"resume\",\n            value: function resume() {\n              if (this.paused) {\n                this.pausedTime += performance.now() - this.pauseTime;\n                this.engine.resume();\n                this.paused = false;\n              }\n            }\n          }, {\n            key: \"onRecordComplete\",\n            value: function onRecordComplete() {\n              var _this6 = this;\n\n              this.player.recordedData = this.engine.recordedData;\n\n              if (this.player.controlBar.playToggle !== undefined) {\n                this.player.controlBar.playToggle.removeClass('vjs-ended');\n                this.player.controlBar.playToggle.show();\n              }\n\n              if (this.convertAuto === true) {\n                this.convert();\n              }\n\n              this.player.trigger(_event.default.FINISH_RECORD);\n\n              if (this.isDestroyed()) {\n                return;\n              }\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.pause();\n                  this.surfer.setupPlaybackEvents(true);\n                  this.player.loadingSpinner.show();\n                  this.surfer.surfer.once(_event.default.READY, function () {\n                    _this6._processing = false;\n                  });\n                  this.load(this.player.recordedData);\n                  break;\n\n                case _recordMode.VIDEO_ONLY:\n                case _recordMode.AUDIO_VIDEO:\n                case _recordMode.AUDIO_SCREEN:\n                case _recordMode.SCREEN_ONLY:\n                  this.player.one(_event.default.PAUSE, function () {\n                    _this6._processing = false;\n\n                    _this6.player.loadingSpinner.hide();\n\n                    _this6.setDuration(_this6.streamDuration);\n\n                    _this6.on(_this6.player, _event.default.TIMEUPDATE, _this6.playbackTimeUpdate);\n\n                    _this6.on(_this6.player, _event.default.ENDED, _this6.playbackTimeUpdate);\n\n                    if (_this6.getRecordType() === _recordMode.AUDIO_VIDEO || _this6.getRecordType() === _recordMode.AUDIO_SCREEN) {\n                      _this6.mediaElement.muted = false;\n\n                      _this6.displayVolumeControl(true);\n                    }\n\n                    _this6.load(_this6.player.recordedData);\n                  });\n                  this.player.pause();\n                  break;\n\n                case _recordMode.ANIMATION:\n                  this._processing = false;\n                  this.player.loadingSpinner.hide();\n                  this.setDuration(this.streamDuration);\n                  this.mediaElement.style.display = 'none';\n                  this.player.recordCanvas.show();\n                  this.player.pause();\n                  this.on(this.player, _event.default.PLAY, this.showAnimation);\n                  this.on(this.player, _event.default.PAUSE, this.hideAnimation);\n                  break;\n              }\n            }\n          }, {\n            key: \"onCountDown\",\n            value: function onCountDown() {\n              if (!this.paused) {\n                var now = performance.now();\n                var duration = this.maxLength;\n                var currentTime = (now - (this.startTime + this.pausedTime)) / 1000;\n                this.streamDuration = currentTime;\n\n                if (currentTime >= duration) {\n                  currentTime = duration;\n                  this.stop();\n                }\n\n                this.setDuration(duration);\n                this.setCurrentTime(currentTime, duration);\n                this.player.trigger(_event.default.PROGRESS_RECORD);\n              }\n            }\n          }, {\n            key: \"getCurrentTime\",\n            value: function getCurrentTime() {\n              var currentTime = isNaN(this.streamCurrentTime) ? 0 : this.streamCurrentTime;\n\n              if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n                currentTime = this.surfer.getCurrentTime();\n              }\n\n              return currentTime;\n            }\n          }, {\n            key: \"setCurrentTime\",\n            value: function setCurrentTime(currentTime, duration) {\n              currentTime = isNaN(currentTime) ? 0 : currentTime;\n              duration = isNaN(duration) ? 0 : duration;\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.setCurrentTime(currentTime, duration);\n                  break;\n\n                case _recordMode.VIDEO_ONLY:\n                case _recordMode.AUDIO_VIDEO:\n                case _recordMode.AUDIO_SCREEN:\n                case _recordMode.ANIMATION:\n                case _recordMode.SCREEN_ONLY:\n                  if (this.player.controlBar.currentTimeDisplay && this.player.controlBar.currentTimeDisplay.contentEl() && this.player.controlBar.currentTimeDisplay.contentEl().lastChild) {\n                    this.streamCurrentTime = Math.min(currentTime, duration);\n                    this.player.controlBar.currentTimeDisplay.formattedTime_ = this.player.controlBar.currentTimeDisplay.contentEl().lastChild.textContent = this._formatTime(this.streamCurrentTime, duration, this.displayMilliseconds);\n                  }\n\n                  break;\n              }\n            }\n          }, {\n            key: \"getDuration\",\n            value: function getDuration() {\n              var duration = isNaN(this.streamDuration) ? 0 : this.streamDuration;\n              return duration;\n            }\n          }, {\n            key: \"setDuration\",\n            value: function setDuration(duration) {\n              duration = isNaN(duration) ? 0 : duration;\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.setDuration(duration);\n                  break;\n\n                case _recordMode.VIDEO_ONLY:\n                case _recordMode.AUDIO_VIDEO:\n                case _recordMode.AUDIO_SCREEN:\n                case _recordMode.ANIMATION:\n                case _recordMode.SCREEN_ONLY:\n                  if (this.player.controlBar.durationDisplay && this.player.controlBar.durationDisplay.contentEl() && this.player.controlBar.durationDisplay.contentEl().lastChild) {\n                    this.player.controlBar.durationDisplay.formattedTime_ = this.player.controlBar.durationDisplay.contentEl().lastChild.textContent = this._formatTime(duration, duration, this.displayMilliseconds);\n                  }\n\n                  break;\n              }\n            }\n          }, {\n            key: \"load\",\n            value: function load(url) {\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.load(url);\n                  break;\n\n                case _recordMode.IMAGE_ONLY:\n                case _recordMode.VIDEO_ONLY:\n                case _recordMode.AUDIO_VIDEO:\n                case _recordMode.AUDIO_SCREEN:\n                case _recordMode.ANIMATION:\n                case _recordMode.SCREEN_ONLY:\n                  if (url instanceof Blob || url instanceof File) {\n                    this.mediaElement.srcObject = null;\n                    this.mediaElement.src = URL.createObjectURL(url);\n                  } else {\n                    (0, _browserShim.default)(url, this.mediaElement);\n                  }\n\n                  break;\n              }\n            }\n          }, {\n            key: \"saveAs\",\n            value: function saveAs(name) {\n              var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'record';\n\n              if (type === 'record') {\n                if (this.engine && name !== undefined) {\n                  this.engine.saveAs(name);\n                }\n              } else if (type === 'convert') {\n                if (this.converter && name !== undefined) {\n                  this.converter.saveAs(name);\n                }\n              }\n            }\n          }, {\n            key: \"dispose\",\n            value: function dispose() {\n              this.player.off(_event.default.READY);\n              this.player.off(_event.default.USERINACTIVE);\n              this.player.off(_event.default.LOADEDMETADATA);\n\n              if (this.engine) {\n                this.engine.dispose();\n                this.engine.destroy();\n                this.engine.off(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n              }\n\n              this.stop();\n              this.stopDevice();\n              this.removeRecording();\n              this.player.clearInterval(this.countDown);\n\n              if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n                if (this.surfer) {\n                  this.surfer.destroy();\n                }\n              } else if (this.getRecordType() === _recordMode.IMAGE_ONLY) {\n                if (this.mediaElement && this.streamVisibleCallback) {\n                  this.mediaElement.removeEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n                }\n              }\n\n              this.resetState();\n              (0, _get2.default)((0, _getPrototypeOf2.default)(Record.prototype), \"dispose\", this).call(this);\n            }\n          }, {\n            key: \"destroy\",\n            value: function destroy() {\n              this.player.dispose();\n            }\n          }, {\n            key: \"reset\",\n            value: function reset() {\n              var _this7 = this;\n\n              if (this.engine) {\n                this.engine.dispose();\n                this.engine.off(_event.default.RECORD_COMPLETE, this.engineStopCallback);\n              }\n\n              this.stop();\n              this.stopDevice();\n              this.player.clearInterval(this.countDown);\n              this.removeRecording();\n              this.loadOptions();\n              this.resetState();\n              this.setDuration(this.maxLength);\n              this.setCurrentTime(0);\n              this.player.reset();\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  if (this.surfer && this.surfer.surfer) {\n                    this.surfer.surfer.empty();\n                  }\n\n                  break;\n\n                case _recordMode.IMAGE_ONLY:\n                case _recordMode.ANIMATION:\n                  this.player.recordCanvas.hide();\n                  this.player.cameraButton.hide();\n                  break;\n              }\n\n              if (this.player.controlBar.playToggle !== undefined) {\n                this.player.controlBar.playToggle.hide();\n              }\n\n              this.player.deviceButton.show();\n              this.player.recordToggle.hide();\n              this.player.one(_event.default.LOADEDMETADATA, function () {\n                _this7.setDuration(_this7.maxLength);\n              });\n            }\n          }, {\n            key: \"resetState\",\n            value: function resetState() {\n              this._recording = false;\n              this._processing = false;\n              this._deviceActive = false;\n              this.devices = [];\n            }\n          }, {\n            key: \"removeRecording\",\n            value: function removeRecording() {\n              if (this.mediaElement && this.mediaElement.src && this.mediaElement.src.startsWith('blob:') === true) {\n                URL.revokeObjectURL(this.mediaElement.src);\n                this.mediaElement.src = '';\n              }\n            }\n          }, {\n            key: \"exportImage\",\n            value: function exportImage() {\n              var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'image/png';\n              var quality = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n              if (this.getRecordType() === _recordMode.AUDIO_ONLY) {\n                return this.surfer.surfer.exportImage(format, quality, 'blob');\n              } else {\n                var recordCanvas = this.player.recordCanvas.el().firstChild;\n                this.drawCanvas(recordCanvas, this.mediaElement);\n                return new Promise(function (resolve) {\n                  recordCanvas.toBlob(resolve, format, quality);\n                });\n              }\n            }\n          }, {\n            key: \"muteTracks\",\n            value: function muteTracks(mute) {\n              if ((this.getRecordType() === _recordMode.AUDIO_ONLY || this.getRecordType() === _recordMode.AUDIO_SCREEN || this.getRecordType() === _recordMode.AUDIO_VIDEO) && this.stream.getAudioTracks().length > 0) {\n                this.stream.getAudioTracks()[0].enabled = !mute;\n              }\n\n              if (this.getRecordType() !== _recordMode.AUDIO_ONLY && this.stream.getVideoTracks().length > 0) {\n                this.stream.getVideoTracks()[0].enabled = !mute;\n              }\n            }\n          }, {\n            key: \"getRecordType\",\n            value: function getRecordType() {\n              return (0, _recordMode.getRecorderMode)(this.recordImage, this.recordAudio, this.recordVideo, this.recordAnimation, this.recordScreen);\n            }\n          }, {\n            key: \"convert\",\n            value: function convert() {\n              if (this.converter !== undefined) {\n                this.converter.convert(this.player.recordedData);\n              }\n            }\n          }, {\n            key: \"createSnapshot\",\n            value: function createSnapshot() {\n              var _this8 = this;\n\n              this.captureFrame().then(function (result) {\n                if (_this8.imageOutputType === 'blob') {\n                  result.toBlob(function (blob) {\n                    _this8.player.recordedData = blob;\n\n                    _this8.displaySnapshot();\n                  });\n                } else if (_this8.imageOutputType === 'dataURL') {\n                  _this8.player.recordedData = result.toDataURL(_this8.imageOutputFormat, _this8.imageOutputQuality);\n\n                  _this8.displaySnapshot();\n                }\n              }, this.imageOutputFormat, this.imageOutputQuality);\n            }\n          }, {\n            key: \"displaySnapshot\",\n            value: function displaySnapshot() {\n              this.mediaElement.style.display = 'none';\n              this.player.recordCanvas.show();\n              this.stop();\n            }\n          }, {\n            key: \"retrySnapshot\",\n            value: function retrySnapshot() {\n              this._processing = false;\n              this.player.recordCanvas.hide();\n              this.player.el().firstChild.style.display = 'block';\n            }\n          }, {\n            key: \"captureFrame\",\n            value: function captureFrame() {\n              var _this9 = this;\n\n              var detected = (0, _detectBrowser.detectBrowser)();\n              var recordCanvas = this.player.recordCanvas.el().firstChild;\n              var track = this.stream.getVideoTracks()[0];\n              var settings = track.getSettings();\n              recordCanvas.width = settings.width;\n              recordCanvas.height = settings.height;\n              return new Promise(function (resolve, reject) {\n                var cameraAspectRatio = settings.width / settings.height;\n\n                var playerAspectRatio = _this9.player.width() / _this9.player.height();\n\n                var imagePreviewHeight = 0;\n                var imagePreviewWidth = 0;\n                var imageXPosition = 0;\n                var imageYPosition = 0;\n\n                if (cameraAspectRatio >= playerAspectRatio) {\n                  imagePreviewHeight = settings.height * (_this9.player.width() / settings.width);\n                  imagePreviewWidth = _this9.player.width();\n                  imageYPosition = _this9.player.height() / 2 - imagePreviewHeight / 2;\n                } else {\n                  imagePreviewHeight = _this9.player.height();\n                  imagePreviewWidth = settings.width * (_this9.player.height() / settings.height);\n                  imageXPosition = _this9.player.width() / 2 - imagePreviewWidth / 2;\n                }\n\n                if (detected.browser === 'chrome' && detected.version >= 60 && (typeof ImageCapture === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(ImageCapture)) === (typeof Function === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(Function))) {\n                  try {\n                    var imageCapture = new ImageCapture(track);\n                    imageCapture.grabFrame().then(function (imageBitmap) {\n                      _this9.drawCanvas(recordCanvas, imageBitmap, imagePreviewWidth, imagePreviewHeight, imageXPosition, imageYPosition);\n\n                      resolve(recordCanvas);\n                    }).catch(function (error) {});\n                  } catch (err) {}\n                }\n\n                _this9.drawCanvas(recordCanvas, _this9.mediaElement, imagePreviewWidth, imagePreviewHeight, imageXPosition, imageYPosition);\n\n                resolve(recordCanvas);\n              });\n            }\n          }, {\n            key: \"drawCanvas\",\n            value: function drawCanvas(canvas, element, width, height) {\n              var x = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n              var y = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n              if (width === undefined) {\n                width = canvas.width;\n              }\n\n              if (height === undefined) {\n                height = canvas.height;\n              }\n\n              canvas.getContext('2d').drawImage(element, x, y, width, height);\n            }\n          }, {\n            key: \"startVideoPreview\",\n            value: function startVideoPreview() {\n              this.off(_event.default.TIMEUPDATE);\n              this.off(_event.default.DURATIONCHANGE);\n              this.off(_event.default.LOADEDMETADATA);\n              this.off(_event.default.PLAY);\n              this.mediaElement.muted = true;\n              this.displayVolumeControl(false);\n              this.removeRecording();\n              this.load(this.stream);\n              this.mediaElement.play();\n            }\n          }, {\n            key: \"showAnimation\",\n            value: function showAnimation() {\n              var animationDisplay = this.player.animationDisplay.el().firstChild;\n              animationDisplay.width = this.player.width();\n              animationDisplay.height = this.player.height();\n              this.player.recordCanvas.hide();\n              (0, _browserShim.default)(this.player.recordedData, animationDisplay);\n              this.player.animationDisplay.show();\n            }\n          }, {\n            key: \"hideAnimation\",\n            value: function hideAnimation() {\n              this.player.recordCanvas.show();\n              this.player.animationDisplay.hide();\n            }\n          }, {\n            key: \"playbackTimeUpdate\",\n            value: function playbackTimeUpdate() {\n              this.setCurrentTime(this.player.currentTime(), this.streamDuration);\n            }\n          }, {\n            key: \"enumerateDevices\",\n            value: function enumerateDevices() {\n              var _this10 = this;\n\n              if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n                this.player.enumerateErrorCode = 'enumerateDevices() not supported.';\n                this.player.trigger(_event.default.ENUMERATE_ERROR);\n                return;\n              }\n\n              navigator.mediaDevices.enumerateDevices(this).then(function (devices) {\n                _this10.devices = [];\n                devices.forEach(function (device) {\n                  _this10.devices.push(device);\n                });\n\n                _this10.player.trigger(_event.default.ENUMERATE_READY);\n              }).catch(function (err) {\n                _this10.player.enumerateErrorCode = err;\n\n                _this10.player.trigger(_event.default.ENUMERATE_ERROR);\n              });\n            }\n          }, {\n            key: \"setVideoInput\",\n            value: function setVideoInput(deviceId) {\n              if (this.recordVideo === Object(this.recordVideo)) {\n                this.recordVideo.deviceId = {\n                  exact: deviceId\n                };\n              } else if (this.recordVideo === true) {\n                this.recordVideo = {\n                  deviceId: {\n                    exact: deviceId\n                  }\n                };\n              }\n\n              this.stopDevice();\n              this.getDevice();\n            }\n          }, {\n            key: \"setAudioInput\",\n            value: function setAudioInput(deviceId) {\n              if (this.recordAudio === Object(this.recordAudio)) {\n                this.recordAudio.deviceId = {\n                  exact: deviceId\n                };\n              } else if (this.recordAudio === true) {\n                this.recordAudio = {\n                  deviceId: {\n                    exact: deviceId\n                  }\n                };\n              }\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.surfer.microphone.constraints = {\n                    video: false,\n                    audio: this.recordAudio\n                  };\n                  break;\n              }\n\n              this.stopDevice();\n              this.getDevice();\n            }\n          }, {\n            key: \"setAudioOutput\",\n            value: function setAudioOutput(deviceId) {\n              var _this11 = this;\n\n              var errorMessage;\n\n              switch (this.getRecordType()) {\n                case _recordMode.AUDIO_ONLY:\n                  this.surfer.surfer.setSinkId(deviceId).then(function (result) {\n                    _this11.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n\n                    return;\n                  }).catch(function (err) {\n                    errorMessage = err;\n                  });\n                  break;\n\n                default:\n                  var element = player.tech_.el_;\n\n                  if (deviceId) {\n                    if (typeof element.sinkId !== 'undefined') {\n                      element.setSinkId(deviceId).then(function (result) {\n                        _this11.player.trigger(_event.default.AUDIO_OUTPUT_READY);\n\n                        return;\n                      }).catch(function (err) {\n                        errorMessage = err;\n                      });\n                    } else {\n                      errorMessage = 'Browser does not support audio output device selection.';\n                    }\n                  } else {\n                    errorMessage = \"Invalid deviceId: \".concat(deviceId);\n                  }\n\n                  break;\n              }\n\n              this.player.trigger(_event.default.ERROR, errorMessage);\n            }\n          }, {\n            key: \"setFormatTime\",\n            value: function setFormatTime(customImplementation) {\n              this._formatTime = customImplementation;\n\n              _video.default.setFormatTime(this._formatTime);\n\n              if (this.surfer) {\n                this.surfer.setFormatTime(this._formatTime);\n              }\n            }\n          }, {\n            key: \"displayVolumeControl\",\n            value: function displayVolumeControl(display) {\n              if (this.player.controlBar.volumePanel !== undefined) {\n                if (display === true) {\n                  display = 'flex';\n                } else {\n                  display = 'none';\n                }\n\n                this.player.controlBar.volumePanel.el().style.display = display;\n              }\n            }\n          }, {\n            key: \"onStreamVisible\",\n            value: function onStreamVisible(event) {\n              this.mediaElement.removeEventListener(_event.default.PLAYING, this.streamVisibleCallback);\n              this.player.cameraButton.onStop();\n              this.player.cameraButton.show();\n            }\n          }, {\n            key: \"onEnterPiP\",\n            value: function onEnterPiP(event) {\n              this.player.trigger(_event.default.ENTER_PIP, event);\n            }\n          }, {\n            key: \"onLeavePiP\",\n            value: function onLeavePiP(event) {\n              this.player.trigger(_event.default.LEAVE_PIP);\n            }\n          }]);\n          return Record;\n        }(Plugin);\n\n        exports.Record = Record;\n        Record.VERSION = \"4.5.0\";\n        _video.default.Record = Record;\n\n        if (_video.default.getPlugin('record') === undefined) {\n          _video.default.registerPlugin('record', Record);\n        }\n      })();\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","'use strict'; // Last time updated: 2021-03-09 3:20:22 AM UTC\n// ________________\n// RecordRTC v5.6.2\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n// ____________\n// RecordRTC.js\n\n/**\r\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. \r\n * @summary Record audio, video or screen inside the browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTC\r\n * @class\r\n * @example\r\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\r\n *     type: 'video', // audio or video or gif or canvas\r\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\r\n * });\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\r\n */\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction RecordRTC(mediaStream, config) {\n  if (!mediaStream) {\n    throw 'First parameter is required.';\n  }\n\n  config = config || {\n    type: 'video'\n  };\n  config = new RecordRTCConfiguration(mediaStream, config); // a reference to user's recordRTC object\n\n  var self = this;\n\n  function startRecording(config2) {\n    if (!config.disableLogs) {\n      console.log('RecordRTC version: ', self.version);\n    }\n\n    if (!!config2) {\n      // allow users to set options using startRecording method\n      // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\n      config = new RecordRTCConfiguration(mediaStream, config2);\n    }\n\n    if (!config.disableLogs) {\n      console.log('started recording ' + config.type + ' stream.');\n    }\n\n    if (mediaRecorder) {\n      mediaRecorder.clearRecordedData();\n      mediaRecorder.record();\n      setState('recording');\n\n      if (self.recordingDuration) {\n        handleRecordingDuration();\n      }\n\n      return self;\n    }\n\n    initRecorder(function () {\n      if (self.recordingDuration) {\n        handleRecordingDuration();\n      }\n    });\n    return self;\n  }\n\n  function initRecorder(initCallback) {\n    if (initCallback) {\n      config.initCallback = function () {\n        initCallback();\n        initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\n      };\n    }\n\n    var Recorder = new GetRecorderType(mediaStream, config);\n    mediaRecorder = new Recorder(mediaStream, config);\n    mediaRecorder.record();\n    setState('recording');\n\n    if (!config.disableLogs) {\n      console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\n    }\n  }\n\n  function stopRecording(callback) {\n    callback = callback || function () {};\n\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state === 'paused') {\n      self.resumeRecording();\n      setTimeout(function () {\n        stopRecording(callback);\n      }, 1);\n      return;\n    }\n\n    if (self.state !== 'recording' && !config.disableLogs) {\n      console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\n    }\n\n    if (!config.disableLogs) {\n      console.log('Stopped recording ' + config.type + ' stream.');\n    }\n\n    if (config.type !== 'gif') {\n      mediaRecorder.stop(_callback);\n    } else {\n      mediaRecorder.stop();\n\n      _callback();\n    }\n\n    setState('stopped');\n\n    function _callback(__blob) {\n      if (!mediaRecorder) {\n        if (typeof callback.call === 'function') {\n          callback.call(self, '');\n        } else {\n          callback('');\n        }\n\n        return;\n      }\n\n      Object.keys(mediaRecorder).forEach(function (key) {\n        if (typeof mediaRecorder[key] === 'function') {\n          return;\n        }\n\n        self[key] = mediaRecorder[key];\n      });\n      var blob = mediaRecorder.blob;\n\n      if (!blob) {\n        if (__blob) {\n          mediaRecorder.blob = blob = __blob;\n        } else {\n          throw 'Recording failed.';\n        }\n      }\n\n      if (blob && !config.disableLogs) {\n        console.log(blob.type, '->', bytesToSize(blob.size));\n      }\n\n      if (callback) {\n        var url;\n\n        try {\n          url = URL.createObjectURL(blob);\n        } catch (e) {}\n\n        if (typeof callback.call === 'function') {\n          callback.call(self, url);\n        } else {\n          callback(url);\n        }\n      }\n\n      if (!config.autoWriteToDisk) {\n        return;\n      }\n\n      getDataURL(function (dataURL) {\n        var parameter = {};\n        parameter[config.type + 'Blob'] = dataURL;\n        DiskStorage.Store(parameter);\n      });\n    }\n  }\n\n  function pauseRecording() {\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state !== 'recording') {\n      if (!config.disableLogs) {\n        console.warn('Unable to pause the recording. Recording state: ', self.state);\n      }\n\n      return;\n    }\n\n    setState('paused');\n    mediaRecorder.pause();\n\n    if (!config.disableLogs) {\n      console.log('Paused recording.');\n    }\n  }\n\n  function resumeRecording() {\n    if (!mediaRecorder) {\n      warningLog();\n      return;\n    }\n\n    if (self.state !== 'paused') {\n      if (!config.disableLogs) {\n        console.warn('Unable to resume the recording. Recording state: ', self.state);\n      }\n\n      return;\n    }\n\n    setState('recording'); // not all libs have this method yet\n\n    mediaRecorder.resume();\n\n    if (!config.disableLogs) {\n      console.log('Resumed recording.');\n    }\n  }\n\n  function readFile(_blob) {\n    postMessage(new FileReaderSync().readAsDataURL(_blob));\n  }\n\n  function getDataURL(callback, _mediaRecorder) {\n    if (!callback) {\n      throw 'Pass a callback function over getDataURL.';\n    }\n\n    var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\n\n    if (!blob) {\n      if (!config.disableLogs) {\n        console.warn('Blob encoder did not finish its job yet.');\n      }\n\n      setTimeout(function () {\n        getDataURL(callback, _mediaRecorder);\n      }, 1000);\n      return;\n    }\n\n    if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\n      var webWorker = processInWebWorker(readFile);\n\n      webWorker.onmessage = function (event) {\n        callback(event.data);\n      };\n\n      webWorker.postMessage(blob);\n    } else {\n      var reader = new FileReader();\n      reader.readAsDataURL(blob);\n\n      reader.onload = function (event) {\n        callback(event.target.result);\n      };\n    }\n\n    function processInWebWorker(_function) {\n      try {\n        var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n          type: 'application/javascript'\n        }));\n        var worker = new Worker(blob);\n        URL.revokeObjectURL(blob);\n        return worker;\n      } catch (e) {}\n    }\n  }\n\n  function handleRecordingDuration(counter) {\n    counter = counter || 0;\n\n    if (self.state === 'paused') {\n      setTimeout(function () {\n        handleRecordingDuration(counter);\n      }, 1000);\n      return;\n    }\n\n    if (self.state === 'stopped') {\n      return;\n    }\n\n    if (counter >= self.recordingDuration) {\n      stopRecording(self.onRecordingStopped);\n      return;\n    }\n\n    counter += 1000; // 1-second\n\n    setTimeout(function () {\n      handleRecordingDuration(counter);\n    }, 1000);\n  }\n\n  function setState(state) {\n    if (!self) {\n      return;\n    }\n\n    self.state = state;\n\n    if (typeof self.onStateChanged.call === 'function') {\n      self.onStateChanged.call(self, state);\n    } else {\n      self.onStateChanged(state);\n    }\n  }\n\n  var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\n\n  function warningLog() {\n    if (config.disableLogs === true) {\n      return;\n    }\n\n    console.warn(WARNING);\n  }\n\n  var mediaRecorder;\n  var returnObject = {\n    /**\r\n     * This method starts the recording.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * var recorder = RecordRTC(mediaStream, {\r\n     *     type: 'video'\r\n     * });\r\n     * recorder.startRecording();\r\n     */\n    startRecording: startRecording,\n\n    /**\r\n     * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\r\n     * @param {function} callback - Callback to get the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     // use either \"this\" or \"recorder\" object; both are identical\r\n     *     video.src = this.toURL();\r\n     *     var blob = this.getBlob();\r\n     * });\r\n     */\n    stopRecording: stopRecording,\n\n    /**\r\n     * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @todo Firefox is unable to pause the recording. Fix it.\r\n     * @example\r\n     * recorder.pauseRecording();  // pause the recording\r\n     * recorder.resumeRecording(); // resume again\r\n     */\n    pauseRecording: pauseRecording,\n\n    /**\r\n     * This method resumes the recording.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.pauseRecording();  // first of all, pause the recording\r\n     * recorder.resumeRecording(); // now resume it\r\n     */\n    resumeRecording: resumeRecording,\n\n    /**\r\n     * This method initializes the recording.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @todo This method should be deprecated.\r\n     * @example\r\n     * recorder.initRecorder();\r\n     */\n    initRecorder: initRecorder,\n\n    /**\r\n     * Ask RecordRTC to auto-stop the recording after 5 minutes.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * var fiveMinutes = 5 * 1000 * 60;\r\n     * recorder.setRecordingDuration(fiveMinutes, function() {\r\n     *    var blob = this.getBlob();\r\n     *    video.src = this.toURL();\r\n     * });\r\n     * \r\n     * // or otherwise\r\n     * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\r\n     *    var blob = this.getBlob();\r\n     *    video.src = this.toURL();\r\n     * });\r\n     */\n    setRecordingDuration: function setRecordingDuration(recordingDuration, callback) {\n      if (typeof recordingDuration === 'undefined') {\n        throw 'recordingDuration is required.';\n      }\n\n      if (typeof recordingDuration !== 'number') {\n        throw 'recordingDuration must be a number.';\n      }\n\n      self.recordingDuration = recordingDuration;\n\n      self.onRecordingStopped = callback || function () {};\n\n      return {\n        onRecordingStopped: function onRecordingStopped(callback) {\n          self.onRecordingStopped = callback;\n        }\n      };\n    },\n\n    /**\r\n     * This method can be used to clear/reset all the recorded data.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\n    clearRecordedData: function clearRecordedData() {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      mediaRecorder.clearRecordedData();\n\n      if (!config.disableLogs) {\n        console.log('Cleared old recorded data.');\n      }\n    },\n\n    /**\r\n     * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     var blob = this.getBlob();\r\n     *\r\n     *     var file = new File([blob], 'filename.webm', {\r\n     *         type: 'video/webm'\r\n     *     });\r\n     *\r\n     *     var formData = new FormData();\r\n     *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\r\n     *     uploadToServer(formData);\r\n     * });\r\n     * @returns {Blob} Returns recorded data as \"Blob\" object.\r\n     */\n    getBlob: function getBlob() {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      return mediaRecorder.blob;\n    },\n\n    /**\r\n     * Get data-URI instead of Blob.\r\n     * @param {function} callback - Callback to get the Data-URI.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     recorder.getDataURL(function(dataURI) {\r\n     *         video.src = dataURI;\r\n     *     });\r\n     * });\r\n     */\n    getDataURL: getDataURL,\n\n    /**\r\n     * Get virtual/temporary URL. Usage of this URL is limited to current tab.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     video.src = this.toURL();\r\n     * });\r\n     * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\r\n     */\n    toURL: function toURL() {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      return URL.createObjectURL(mediaRecorder.blob);\n    },\n\n    /**\r\n     * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * var internalRecorder = recorder.getInternalRecorder();\r\n     * if(internalRecorder instanceof MultiStreamRecorder) {\r\n     *     internalRecorder.addStreams([newAudioStream]);\r\n     *     internalRecorder.resetVideoStreams([screenStream]);\r\n     * }\r\n     * @returns {Object} Returns internal recording object.\r\n     */\n    getInternalRecorder: function getInternalRecorder() {\n      return mediaRecorder;\n    },\n\n    /**\r\n     * Invoke save-as dialog to save the recorded blob into your disk.\r\n     * @param {string} fileName - Set your own file name.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     this.save('file-name');\r\n     *\r\n     *     // or manually:\r\n     *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\r\n     * });\r\n     */\n    save: function save(fileName) {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      invokeSaveAsDialog(mediaRecorder.blob, fileName);\n    },\n\n    /**\r\n     * This method gets a blob from indexed-DB storage.\r\n     * @param {function} callback - Callback to get the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.getFromDisk(function(dataURL) {\r\n     *     video.src = dataURL;\r\n     * });\r\n     */\n    getFromDisk: function getFromDisk(callback) {\n      if (!mediaRecorder) {\n        warningLog();\n        return;\n      }\n\n      RecordRTC.getFromDisk(config.type, callback);\n    },\n\n    /**\r\n     * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\r\n     * @type {Array.<Array>}\r\n     * @param {Array} arrayOfWebPImages - Array of webp images.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @todo This method should be deprecated.\r\n     * @example\r\n     * var arrayOfWebPImages = [];\r\n     * arrayOfWebPImages.push({\r\n     *     duration: index,\r\n     *     image: 'data:image/webp;base64,...'\r\n     * });\r\n     * recorder.setAdvertisementArray(arrayOfWebPImages);\r\n     */\n    setAdvertisementArray: function setAdvertisementArray(arrayOfWebPImages) {\n      config.advertisement = [];\n      var length = arrayOfWebPImages.length;\n\n      for (var i = 0; i < length; i++) {\n        config.advertisement.push({\n          duration: i,\n          image: arrayOfWebPImages[i]\n        });\n      }\n    },\n\n    /**\r\n     * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\r\n     * @property {Blob} blob - Recorded Blob can be accessed using this property.\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @readonly\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     var blob = this.blob;\r\n     *\r\n     *     // below one is recommended\r\n     *     var blob = this.getBlob();\r\n     * });\r\n     */\n    blob: null,\n\n    /**\r\n     * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n     * @property {number} bufferSize - Buffer-size used to encode the WAV container\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @readonly\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     alert('Recorder used this buffer-size: ' + this.bufferSize);\r\n     * });\r\n     */\n    bufferSize: 0,\n\n    /**\r\n     * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n     * @property {number} sampleRate - Sample-rates used to encode the WAV container\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @readonly\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     alert('Recorder used these sample-rates: ' + this.sampleRate);\r\n     * });\r\n     */\n    sampleRate: 0,\n\n    /**\r\n     * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\r\n     * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @readonly\r\n     * @example\r\n     * recorder.stopRecording(function() {\r\n     *     var arrayBuffer = this.buffer;\r\n     *     alert(arrayBuffer.byteLength);\r\n     * });\r\n     */\n    buffer: null,\n\n    /**\r\n     * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.reset();\r\n     * recorder.startRecording();\r\n     */\n    reset: function reset() {\n      if (self.state === 'recording' && !config.disableLogs) {\n        console.warn('Stop an active recorder.');\n      }\n\n      if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\n        mediaRecorder.clearRecordedData();\n      }\n\n      mediaRecorder = null;\n      setState('inactive');\n      self.blob = null;\n    },\n\n    /**\r\n     * This method is called whenever recorder's state changes. Use this as an \"event\".\r\n     * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @instance\r\n     * @example\r\n     * recorder.onStateChanged = function(state) {\r\n     *     console.log('Recorder state: ', state);\r\n     * };\r\n     */\n    onStateChanged: function onStateChanged(state) {\n      if (!config.disableLogs) {\n        console.log('Recorder state changed:', state);\n      }\n    },\n\n    /**\r\n     * A recorder can have inactive, recording, paused or stopped states.\r\n     * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n     * @memberof RecordRTC\r\n     * @static\r\n     * @readonly\r\n     * @example\r\n     * // this looper function will keep you updated about the recorder's states.\r\n     * (function looper() {\r\n     *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\r\n     *     if(recorder.state === 'stopped') return; // ignore+stop\r\n     *     setTimeout(looper, 1000); // update after every 3-seconds\r\n     * })();\r\n     * recorder.startRecording();\r\n     */\n    state: 'inactive',\n\n    /**\r\n     * Get recorder's readonly state.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @example\r\n     * var state = recorder.getState();\r\n     * @returns {String} Returns recording state.\r\n     */\n    getState: function getState() {\n      return self.state;\n    },\n\n    /**\r\n     * Destroy RecordRTC instance. Clear all recorders and objects.\r\n     * @method\r\n     * @memberof RecordRTC\r\n     * @example\r\n     * recorder.destroy();\r\n     */\n    destroy: function destroy() {\n      var disableLogsCache = config.disableLogs;\n      config = {\n        disableLogs: true\n      };\n      self.reset();\n      setState('destroyed');\n      returnObject = self = null;\n\n      if (Storage.AudioContextConstructor) {\n        Storage.AudioContextConstructor.close();\n        Storage.AudioContextConstructor = null;\n      }\n\n      config.disableLogs = disableLogsCache;\n\n      if (!config.disableLogs) {\n        console.log('RecordRTC is destroyed.');\n      }\n    },\n\n    /**\r\n     * RecordRTC version number\r\n     * @property {String} version - Release version number.\r\n     * @memberof RecordRTC\r\n     * @static\r\n     * @readonly\r\n     * @example\r\n     * alert(recorder.version);\r\n     */\n    version: '5.6.2'\n  };\n\n  if (!this) {\n    self = returnObject;\n    return returnObject;\n  } // if someone wants to use RecordRTC with the \"new\" keyword.\n\n\n  for (var prop in returnObject) {\n    this[prop] = returnObject[prop];\n  }\n\n  self = this;\n  return returnObject;\n}\n\nRecordRTC.version = '5.6.2';\n\nif (typeof module !== 'undefined'\n/* && !!module.exports*/\n) {\n    module.exports = RecordRTC;\n  }\n\nif (typeof define === 'function' && define.amd) {\n  define('RecordRTC', [], function () {\n    return RecordRTC;\n  });\n}\n\nRecordRTC.getFromDisk = function (type, callback) {\n  if (!callback) {\n    throw 'callback is mandatory.';\n  }\n\n  console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\n  DiskStorage.Fetch(function (dataURL, _type) {\n    if (type !== 'all' && _type === type + 'Blob' && callback) {\n      callback(dataURL);\n    }\n\n    if (type === 'all' && callback) {\n      callback(dataURL, _type.replace('Blob', ''));\n    }\n  });\n};\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof RecordRTC\r\n * @example\r\n * RecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\n\n\nRecordRTC.writeToDisk = function (options) {\n  console.log('Writing recorded blob(s) to disk!');\n  options = options || {};\n\n  if (options.audio && options.video && options.gif) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.video.getDataURL(function (videoDataURL) {\n        options.gif.getDataURL(function (gifDataURL) {\n          DiskStorage.Store({\n            audioBlob: audioDataURL,\n            videoBlob: videoDataURL,\n            gifBlob: gifDataURL\n          });\n        });\n      });\n    });\n  } else if (options.audio && options.video) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.video.getDataURL(function (videoDataURL) {\n        DiskStorage.Store({\n          audioBlob: audioDataURL,\n          videoBlob: videoDataURL\n        });\n      });\n    });\n  } else if (options.audio && options.gif) {\n    options.audio.getDataURL(function (audioDataURL) {\n      options.gif.getDataURL(function (gifDataURL) {\n        DiskStorage.Store({\n          audioBlob: audioDataURL,\n          gifBlob: gifDataURL\n        });\n      });\n    });\n  } else if (options.video && options.gif) {\n    options.video.getDataURL(function (videoDataURL) {\n      options.gif.getDataURL(function (gifDataURL) {\n        DiskStorage.Store({\n          videoBlob: videoDataURL,\n          gifBlob: gifDataURL\n        });\n      });\n    });\n  } else if (options.audio) {\n    options.audio.getDataURL(function (audioDataURL) {\n      DiskStorage.Store({\n        audioBlob: audioDataURL\n      });\n    });\n  } else if (options.video) {\n    options.video.getDataURL(function (videoDataURL) {\n      DiskStorage.Store({\n        videoBlob: videoDataURL\n      });\n    });\n  } else if (options.gif) {\n    options.gif.getDataURL(function (gifDataURL) {\n      DiskStorage.Store({\n        gifBlob: gifDataURL\n      });\n    });\n  }\n}; // __________________________\n// RecordRTC-Configuration.js\n\n/**\r\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCConfiguration\r\n * @class\r\n * @example\r\n * var options = RecordRTCConfiguration(mediaStream, options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\r\n */\n\n\nfunction RecordRTCConfiguration(mediaStream, config) {\n  if (!config.recorderType && !config.type) {\n    if (!!config.audio && !!config.video) {\n      config.type = 'video';\n    } else if (!!config.audio && !config.video) {\n      config.type = 'audio';\n    }\n  }\n\n  if (config.recorderType && !config.type) {\n    if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder) {\n      config.type = 'video';\n    } else if (config.recorderType === GifRecorder) {\n      config.type = 'gif';\n    } else if (config.recorderType === StereoAudioRecorder) {\n      config.type = 'audio';\n    } else if (config.recorderType === MediaStreamRecorder) {\n      if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n        config.type = 'video';\n      } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\n        config.type = 'video';\n      } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\n        config.type = 'audio';\n      } else {// config.type = 'UnKnown';\n      }\n    }\n  }\n\n  if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n    if (!config.mimeType) {\n      config.mimeType = 'video/webm';\n    }\n\n    if (!config.type) {\n      config.type = config.mimeType.split('/')[0];\n    }\n\n    if (!config.bitsPerSecond) {// config.bitsPerSecond = 128000;\n    }\n  } // consider default type=audio\n\n\n  if (!config.type) {\n    if (config.mimeType) {\n      config.type = config.mimeType.split('/')[0];\n    }\n\n    if (!config.type) {\n      config.type = 'audio';\n    }\n  }\n\n  return config;\n} // __________________\n// GetRecorderType.js\n\n/**\r\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It returns best recorder-type available for your browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GetRecorderType\r\n * @class\r\n * @example\r\n * var RecorderType = GetRecorderType(options);\r\n * var recorder = new RecorderType(options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n */\n\n\nfunction GetRecorderType(mediaStream, config) {\n  var recorder; // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\n  // todo: detect if it is Edge, then auto use: StereoAudioRecorder\n\n  if (isChrome || isEdge || isOpera) {\n    // Media Stream Recording API has not been implemented in chrome yet;\n    // That's why using WebAudio API to record stereo audio in WAV format\n    recorder = StereoAudioRecorder;\n  }\n\n  if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\n    recorder = MediaStreamRecorder;\n  } // video recorder (in WebM format)\n\n\n  if (config.type === 'video' && (isChrome || isOpera)) {\n    recorder = WhammyRecorder;\n\n    if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\n      recorder = WebAssemblyRecorder;\n    }\n  } // video recorder (in Gif format)\n\n\n  if (config.type === 'gif') {\n    recorder = GifRecorder;\n  } // html2canvas recording!\n\n\n  if (config.type === 'canvas') {\n    recorder = CanvasRecorder;\n  }\n\n  if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\n    if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\n      // audio-only recording\n      if (config.type === 'audio') {\n        if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\n          recorder = MediaStreamRecorder;\n        } // else recorder = StereoAudioRecorder;\n\n      } else {\n        // video or screen tracks\n        if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\n          recorder = MediaStreamRecorder;\n        }\n      }\n    }\n  }\n\n  if (mediaStream instanceof Array && mediaStream.length) {\n    recorder = MultiStreamRecorder;\n  }\n\n  if (config.recorderType) {\n    recorder = config.recorderType;\n  }\n\n  if (!config.disableLogs && !!recorder && !!recorder.name) {\n    console.log('Using recorderType:', recorder.name || recorder.constructor.name);\n  }\n\n  if (!recorder && isSafari) {\n    recorder = MediaStreamRecorder;\n  }\n\n  return recorder;\n} // _____________\n// MRecordRTC.js\n\n/**\r\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\r\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MRecordRTC\r\n * @class\r\n * @example\r\n * var recorder = new MRecordRTC();\r\n * recorder.addStream(MediaStream);\r\n * recorder.mediaType = {\r\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\r\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n *     gif: true    // or GifRecorder\r\n * };\r\n * // mimeType is optional and should be set only in advance cases.\r\n * recorder.mimeType = {\r\n *     audio: 'audio/wav',\r\n *     video: 'video/webm',\r\n *     gif:   'image/gif'\r\n * };\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @requires {@link RecordRTC}\r\n */\n\n\nfunction MRecordRTC(mediaStream) {\n  /**\r\n   * This method attaches MediaStream object to {@link MRecordRTC}.\r\n   * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.addStream(MediaStream);\r\n   */\n  this.addStream = function (_mediaStream) {\n    if (_mediaStream) {\n      mediaStream = _mediaStream;\n    }\n  };\n  /**\r\n   * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\r\n   * @property {object} mediaType - {audio: true, video: true, gif: true}\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * var recorder = new MRecordRTC();\r\n   * recorder.mediaType = {\r\n   *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\r\n   *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n   *     gif  : true  // TRUE or GifRecorder\r\n   * };\r\n   */\n\n\n  this.mediaType = {\n    audio: true,\n    video: true\n  };\n  /**\r\n   * This method starts recording.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.startRecording();\r\n   */\n\n  this.startRecording = function () {\n    var mediaType = this.mediaType;\n    var recorderType;\n    var mimeType = this.mimeType || {\n      audio: null,\n      video: null,\n      gif: null\n    };\n\n    if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\n      mediaType.audio = false;\n    }\n\n    if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n      mediaType.video = false;\n    }\n\n    if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\n      mediaType.gif = false;\n    }\n\n    if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\n      throw 'MediaStream must have either audio or video tracks.';\n    }\n\n    if (!!mediaType.audio) {\n      recorderType = null;\n\n      if (typeof mediaType.audio === 'function') {\n        recorderType = mediaType.audio;\n      }\n\n      this.audioRecorder = new RecordRTC(mediaStream, {\n        type: 'audio',\n        bufferSize: this.bufferSize,\n        sampleRate: this.sampleRate,\n        numberOfAudioChannels: this.numberOfAudioChannels || 2,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.audio,\n        timeSlice: this.timeSlice,\n        onTimeStamp: this.onTimeStamp\n      });\n\n      if (!mediaType.video) {\n        this.audioRecorder.startRecording();\n      }\n    }\n\n    if (!!mediaType.video) {\n      recorderType = null;\n\n      if (typeof mediaType.video === 'function') {\n        recorderType = mediaType.video;\n      }\n\n      var newStream = mediaStream;\n\n      if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\n        var videoTrack = getTracks(mediaStream, 'video')[0];\n\n        if (isFirefox) {\n          newStream = new MediaStream();\n          newStream.addTrack(videoTrack);\n\n          if (recorderType && recorderType === WhammyRecorder) {\n            // Firefox does NOT supports webp-encoding yet\n            // But Firefox do supports WebAssemblyRecorder\n            recorderType = MediaStreamRecorder;\n          }\n        } else {\n          newStream = new MediaStream();\n          newStream.addTrack(videoTrack);\n        }\n      }\n\n      this.videoRecorder = new RecordRTC(newStream, {\n        type: 'video',\n        video: this.video,\n        canvas: this.canvas,\n        frameInterval: this.frameInterval || 10,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.video,\n        timeSlice: this.timeSlice,\n        onTimeStamp: this.onTimeStamp,\n        workerPath: this.workerPath,\n        webAssemblyPath: this.webAssemblyPath,\n        frameRate: this.frameRate,\n        // used by WebAssemblyRecorder; values: usually 30; accepts any.\n        bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\n\n      });\n\n      if (!mediaType.audio) {\n        this.videoRecorder.startRecording();\n      }\n    }\n\n    if (!!mediaType.audio && !!mediaType.video) {\n      var self = this;\n      var isSingleRecorder = isMediaRecorderCompatible() === true;\n\n      if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\n        isSingleRecorder = false;\n      } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\n        isSingleRecorder = false;\n      }\n\n      if (isSingleRecorder === true) {\n        self.audioRecorder = null;\n        self.videoRecorder.startRecording();\n      } else {\n        self.videoRecorder.initRecorder(function () {\n          self.audioRecorder.initRecorder(function () {\n            // Both recorders are ready to record things accurately\n            self.videoRecorder.startRecording();\n            self.audioRecorder.startRecording();\n          });\n        });\n      }\n    }\n\n    if (!!mediaType.gif) {\n      recorderType = null;\n\n      if (typeof mediaType.gif === 'function') {\n        recorderType = mediaType.gif;\n      }\n\n      this.gifRecorder = new RecordRTC(mediaStream, {\n        type: 'gif',\n        frameRate: this.frameRate || 200,\n        quality: this.quality || 10,\n        disableLogs: this.disableLogs,\n        recorderType: recorderType,\n        mimeType: mimeType.gif\n      });\n      this.gifRecorder.startRecording();\n    }\n  };\n  /**\r\n   * This method stops recording.\r\n   * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.stopRecording(function(recording){\r\n   *     var audioBlob = recording.audio;\r\n   *     var videoBlob = recording.video;\r\n   *     var gifBlob   = recording.gif;\r\n   * });\r\n   */\n\n\n  this.stopRecording = function (callback) {\n    callback = callback || function () {};\n\n    if (this.audioRecorder) {\n      this.audioRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'audio');\n      });\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'video');\n      });\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.stopRecording(function (blobURL) {\n        callback(blobURL, 'gif');\n      });\n    }\n  };\n  /**\r\n   * This method pauses recording.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.pauseRecording();\r\n   */\n\n\n  this.pauseRecording = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.pauseRecording();\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.pauseRecording();\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.pauseRecording();\n    }\n  };\n  /**\r\n   * This method resumes recording.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.resumeRecording();\r\n   */\n\n\n  this.resumeRecording = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.resumeRecording();\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.resumeRecording();\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.resumeRecording();\n    }\n  };\n  /**\r\n   * This method can be used to manually get all recorded blobs.\r\n   * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.getBlob(function(recording){\r\n   *     var audioBlob = recording.audio;\r\n   *     var videoBlob = recording.video;\r\n   *     var gifBlob   = recording.gif;\r\n   * });\r\n   * // or\r\n   * var audioBlob = recorder.getBlob().audio;\r\n   * var videoBlob = recorder.getBlob().video;\r\n   */\n\n\n  this.getBlob = function (callback) {\n    var output = {};\n\n    if (this.audioRecorder) {\n      output.audio = this.audioRecorder.getBlob();\n    }\n\n    if (this.videoRecorder) {\n      output.video = this.videoRecorder.getBlob();\n    }\n\n    if (this.gifRecorder) {\n      output.gif = this.gifRecorder.getBlob();\n    }\n\n    if (callback) {\n      callback(output);\n    }\n\n    return output;\n  };\n  /**\r\n   * Destroy all recorder instances.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.destroy();\r\n   */\n\n\n  this.destroy = function () {\n    if (this.audioRecorder) {\n      this.audioRecorder.destroy();\n      this.audioRecorder = null;\n    }\n\n    if (this.videoRecorder) {\n      this.videoRecorder.destroy();\n      this.videoRecorder = null;\n    }\n\n    if (this.gifRecorder) {\n      this.gifRecorder.destroy();\n      this.gifRecorder = null;\n    }\n  };\n  /**\r\n   * This method can be used to manually get all recorded blobs' DataURLs.\r\n   * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.getDataURL(function(recording){\r\n   *     var audioDataURL = recording.audio;\r\n   *     var videoDataURL = recording.video;\r\n   *     var gifDataURL   = recording.gif;\r\n   * });\r\n   */\n\n\n  this.getDataURL = function (callback) {\n    this.getBlob(function (blob) {\n      if (blob.audio && blob.video) {\n        getDataURL(blob.audio, function (_audioDataURL) {\n          getDataURL(blob.video, function (_videoDataURL) {\n            callback({\n              audio: _audioDataURL,\n              video: _videoDataURL\n            });\n          });\n        });\n      } else if (blob.audio) {\n        getDataURL(blob.audio, function (_audioDataURL) {\n          callback({\n            audio: _audioDataURL\n          });\n        });\n      } else if (blob.video) {\n        getDataURL(blob.video, function (_videoDataURL) {\n          callback({\n            video: _videoDataURL\n          });\n        });\n      }\n    });\n\n    function getDataURL(blob, callback00) {\n      if (typeof Worker !== 'undefined') {\n        var webWorker = processInWebWorker(function readFile(_blob) {\n          postMessage(new FileReaderSync().readAsDataURL(_blob));\n        });\n\n        webWorker.onmessage = function (event) {\n          callback00(event.data);\n        };\n\n        webWorker.postMessage(blob);\n      } else {\n        var reader = new FileReader();\n        reader.readAsDataURL(blob);\n\n        reader.onload = function (event) {\n          callback00(event.target.result);\n        };\n      }\n    }\n\n    function processInWebWorker(_function) {\n      var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n        type: 'application/javascript'\n      }));\n      var worker = new Worker(blob);\n      var url;\n\n      if (typeof URL !== 'undefined') {\n        url = URL;\n      } else if (typeof webkitURL !== 'undefined') {\n        url = webkitURL;\n      } else {\n        throw 'Neither URL nor webkitURL detected.';\n      }\n\n      url.revokeObjectURL(blob);\n      return worker;\n    }\n  };\n  /**\r\n   * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.writeToDisk();\r\n   */\n\n\n  this.writeToDisk = function () {\n    RecordRTC.writeToDisk({\n      audio: this.audioRecorder,\n      video: this.videoRecorder,\n      gif: this.gifRecorder\n    });\n  };\n  /**\r\n   * This method can be used to invoke a save-as dialog for all recorded blobs.\r\n   * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\r\n   * @method\r\n   * @memberof MRecordRTC\r\n   * @example\r\n   * recorder.save({\r\n   *     audio: 'audio-file-name',\r\n   *     video: 'video-file-name',\r\n   *     gif  : 'gif-file-name'\r\n   * });\r\n   */\n\n\n  this.save = function (args) {\n    args = args || {\n      audio: true,\n      video: true,\n      gif: true\n    };\n\n    if (!!args.audio && this.audioRecorder) {\n      this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\n    }\n\n    if (!!args.video && this.videoRecorder) {\n      this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\n    }\n\n    if (!!args.gif && this.gifRecorder) {\n      this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\n    }\n  };\n}\n/**\r\n * This method can be used to get all recorded blobs from IndexedDB storage.\r\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\r\n * @param {function} callback - Callback function to get all stored blobs.\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\r\n *     if(type === 'audio') { }\r\n *     if(type === 'video') { }\r\n *     if(type === 'gif')   { }\r\n * });\r\n */\n\n\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\n\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MRecordRTC = MRecordRTC;\n}\n\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n(function (that) {\n  if (!that) {\n    return;\n  }\n\n  if (typeof window !== 'undefined') {\n    return;\n  }\n\n  if (typeof global === 'undefined') {\n    return;\n  }\n\n  global.navigator = {\n    userAgent: browserFakeUserAgent,\n    getUserMedia: function getUserMedia() {}\n  };\n\n  if (!global.console) {\n    global.console = {};\n  }\n\n  if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\n    global.console.error = global.console.log = global.console.log || function () {\n      console.log(arguments);\n    };\n  }\n\n  if (typeof document === 'undefined') {\n    /*global document:true */\n    that.document = {\n      documentElement: {\n        appendChild: function appendChild() {\n          return '';\n        }\n      }\n    };\n\n    document.createElement = document.captureStream = document.mozCaptureStream = function () {\n      var obj = {\n        getContext: function getContext() {\n          return obj;\n        },\n        play: function play() {},\n        pause: function pause() {},\n        drawImage: function drawImage() {},\n        toDataURL: function toDataURL() {\n          return '';\n        },\n        style: {}\n      };\n      return obj;\n    };\n\n    that.HTMLVideoElement = function () {};\n  }\n\n  if (typeof location === 'undefined') {\n    /*global location:true */\n    that.location = {\n      protocol: 'file:',\n      href: '',\n      hash: ''\n    };\n  }\n\n  if (typeof screen === 'undefined') {\n    /*global screen:true */\n    that.screen = {\n      width: 0,\n      height: 0\n    };\n  }\n\n  if (typeof URL === 'undefined') {\n    /*global screen:true */\n    that.URL = {\n      createObjectURL: function createObjectURL() {\n        return '';\n      },\n      revokeObjectURL: function revokeObjectURL() {\n        return '';\n      }\n    };\n  }\n  /*global window:true */\n\n\n  that.window = global;\n})(typeof global !== 'undefined' ? global : null); // _____________________________\n// Cross-Browser-Declarations.js\n// animation-frame used in WebM recording\n\n/*jshint -W079 */\n\n\nvar requestAnimationFrame = window.requestAnimationFrame;\n\nif (typeof requestAnimationFrame === 'undefined') {\n  if (typeof webkitRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = webkitRequestAnimationFrame;\n  } else if (typeof mozRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = mozRequestAnimationFrame;\n  } else if (typeof msRequestAnimationFrame !== 'undefined') {\n    /*global requestAnimationFrame:true */\n    requestAnimationFrame = msRequestAnimationFrame;\n  } else if (typeof requestAnimationFrame === 'undefined') {\n    // via: https://gist.github.com/paulirish/1579671\n    var lastTime = 0;\n    /*global requestAnimationFrame:true */\n\n    requestAnimationFrame = function requestAnimationFrame(callback, element) {\n      var currTime = new Date().getTime();\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n      var id = setTimeout(function () {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n      lastTime = currTime + timeToCall;\n      return id;\n    };\n  }\n}\n/*jshint -W079 */\n\n\nvar cancelAnimationFrame = window.cancelAnimationFrame;\n\nif (typeof cancelAnimationFrame === 'undefined') {\n  if (typeof webkitCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = webkitCancelAnimationFrame;\n  } else if (typeof mozCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = mozCancelAnimationFrame;\n  } else if (typeof msCancelAnimationFrame !== 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = msCancelAnimationFrame;\n  } else if (typeof cancelAnimationFrame === 'undefined') {\n    /*global cancelAnimationFrame:true */\n    cancelAnimationFrame = function cancelAnimationFrame(id) {\n      clearTimeout(id);\n    };\n  }\n} // WebAudio API representer\n\n\nvar AudioContext = window.AudioContext;\n\nif (typeof AudioContext === 'undefined') {\n  if (typeof webkitAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = webkitAudioContext;\n  }\n\n  if (typeof mozAudioContext !== 'undefined') {\n    /*global AudioContext:true */\n    AudioContext = mozAudioContext;\n  }\n}\n/*jshint -W079 */\n\n\nvar URL = window.URL;\n\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n  /*global URL:true */\n  URL = webkitURL;\n}\n\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') {\n  // maybe window.navigator?\n  if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.webkitGetUserMedia;\n  }\n\n  if (typeof navigator.mozGetUserMedia !== 'undefined') {\n    navigator.getUserMedia = navigator.mozGetUserMedia;\n  }\n}\n\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && 'netscape' in window && / rv:/.test(navigator.userAgent);\nvar isChrome = !isOpera && !isEdge && !!navigator.webkitGetUserMedia || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\n  isSafari = false;\n  isChrome = true;\n}\n\nvar MediaStream = window.MediaStream;\n\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n  MediaStream = webkitMediaStream;\n}\n/*global MediaStream:true */\n\n\nif (typeof MediaStream !== 'undefined') {\n  // override \"stop\" method for all browsers\n  if (typeof MediaStream.prototype.stop === 'undefined') {\n    MediaStream.prototype.stop = function () {\n      this.getTracks().forEach(function (track) {\n        track.stop();\n      });\n    };\n  }\n} // below function via: http://goo.gl/B3ae8c\n\n/**\r\n * Return human-readable file size.\r\n * @param {number} bytes - Pass bytes and get formatted string.\r\n * @returns {string} - formatted string\r\n * @example\r\n * bytesToSize(1024*1024*5) === '5 GB'\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nfunction bytesToSize(bytes) {\n  var k = 1000;\n  var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n\n  if (bytes === 0) {\n    return '0 Bytes';\n  }\n\n  var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\n  return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\n}\n/**\r\n * @param {Blob} file - File or Blob object. This parameter is required.\r\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\r\n * @example\r\n * invokeSaveAsDialog(blob or file, [optional] fileName);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nfunction invokeSaveAsDialog(file, fileName) {\n  if (!file) {\n    throw 'Blob object is required.';\n  }\n\n  if (!file.type) {\n    try {\n      file.type = 'video/webm';\n    } catch (e) {}\n  }\n\n  var fileExtension = (file.type || 'video/webm').split('/')[1];\n\n  if (fileExtension.indexOf(';') !== -1) {\n    // extended mimetype, e.g. 'video/webm;codecs=vp8,opus'\n    fileExtension = fileExtension.split(';')[0];\n  }\n\n  if (fileName && fileName.indexOf('.') !== -1) {\n    var splitted = fileName.split('.');\n    fileName = splitted[0];\n    fileExtension = splitted[1];\n  }\n\n  var fileFullName = (fileName || Math.round(Math.random() * 9999999999) + 888888888) + '.' + fileExtension;\n\n  if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\n    return navigator.msSaveOrOpenBlob(file, fileFullName);\n  } else if (typeof navigator.msSaveBlob !== 'undefined') {\n    return navigator.msSaveBlob(file, fileFullName);\n  }\n\n  var hyperlink = document.createElement('a');\n  hyperlink.href = URL.createObjectURL(file);\n  hyperlink.download = fileFullName;\n  hyperlink.style = 'display:none;opacity:0;color:transparent;';\n  (document.body || document.documentElement).appendChild(hyperlink);\n\n  if (typeof hyperlink.click === 'function') {\n    hyperlink.click();\n  } else {\n    hyperlink.target = '_blank';\n    hyperlink.dispatchEvent(new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true\n    }));\n  }\n\n  URL.revokeObjectURL(hyperlink.href);\n}\n/**\r\n * from: https://github.com/cheton/is-electron/blob/master/index.js\r\n **/\n\n\nfunction isElectron() {\n  // Renderer process\n  if (typeof window !== 'undefined' && _typeof(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  } // Main process\n\n\n  if (typeof process !== 'undefined' && _typeof(process.versions) === 'object' && !!process.versions.electron) {\n    return true;\n  } // Detect the user agent when the `nodeIntegration` option is set to true\n\n\n  if ((typeof navigator === \"undefined\" ? \"undefined\" : _typeof(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction getTracks(stream, kind) {\n  if (!stream || !stream.getTracks) {\n    return [];\n  }\n\n  return stream.getTracks().filter(function (t) {\n    return t.kind === (kind || 'audio');\n  });\n}\n\nfunction setSrcObject(stream, element) {\n  if ('srcObject' in element) {\n    element.srcObject = stream;\n  } else if ('mozSrcObject' in element) {\n    element.mozSrcObject = stream;\n  } else {\n    element.srcObject = stream;\n  }\n}\n/**\r\n * @param {Blob} file - File or Blob object.\r\n * @param {function} callback - Callback function.\r\n * @example\r\n * getSeekableBlob(blob or file, callback);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nfunction getSeekableBlob(inputBlob, callback) {\n  // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\n  if (typeof EBML === 'undefined') {\n    throw new Error('Please link: https://www.webrtc-experiment.com/EBML.js');\n  }\n\n  var reader = new EBML.Reader();\n  var decoder = new EBML.Decoder();\n  var tools = EBML.tools;\n  var fileReader = new FileReader();\n\n  fileReader.onload = function (e) {\n    var ebmlElms = decoder.decode(this.result);\n    ebmlElms.forEach(function (element) {\n      reader.read(element);\n    });\n    reader.stop();\n    var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\n    var body = this.result.slice(reader.metadataSize);\n    var newBlob = new Blob([refinedMetadataBuf, body], {\n      type: 'video/webm'\n    });\n    callback(newBlob);\n  };\n\n  fileReader.readAsArrayBuffer(inputBlob);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.invokeSaveAsDialog = invokeSaveAsDialog;\n  RecordRTC.getTracks = getTracks;\n  RecordRTC.getSeekableBlob = getSeekableBlob;\n  RecordRTC.bytesToSize = bytesToSize;\n  RecordRTC.isElectron = isElectron;\n} // __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\n// Storage.js\n\n/**\r\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * Storage.AudioContext === webkitAudioContext\r\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nvar Storage = {};\n\nif (typeof AudioContext !== 'undefined') {\n  Storage.AudioContext = AudioContext;\n} else if (typeof webkitAudioContext !== 'undefined') {\n  Storage.AudioContext = webkitAudioContext;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.Storage = Storage;\n}\n\nfunction isMediaRecorderCompatible() {\n  if (isFirefox || isSafari || isEdge) {\n    return true;\n  }\n\n  var nVer = navigator.appVersion;\n  var nAgt = navigator.userAgent;\n  var fullVersion = '' + parseFloat(navigator.appVersion);\n  var majorVersion = parseInt(navigator.appVersion, 10);\n  var nameOffset, verOffset, ix;\n\n  if (isChrome || isOpera) {\n    verOffset = nAgt.indexOf('Chrome');\n    fullVersion = nAgt.substring(verOffset + 7);\n  } // trim the fullVersion string at semicolon/space if present\n\n\n  if ((ix = fullVersion.indexOf(';')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  if ((ix = fullVersion.indexOf(' ')) !== -1) {\n    fullVersion = fullVersion.substring(0, ix);\n  }\n\n  majorVersion = parseInt('' + fullVersion, 10);\n\n  if (isNaN(majorVersion)) {\n    fullVersion = '' + parseFloat(navigator.appVersion);\n    majorVersion = parseInt(navigator.appVersion, 10);\n  }\n\n  return majorVersion >= 49;\n} // ______________________\n// MediaStreamRecorder.js\n\n/**\r\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\r\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\r\n * @typedef MediaStreamRecorder\r\n * @class\r\n * @example\r\n * var config = {\r\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\r\n *     audioBitsPerSecond : 256 * 8 * 1024,\r\n *     videoBitsPerSecond : 256 * 8 * 1024,\r\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\r\n *     checkForInactiveTracks: true,\r\n *     timeSlice: 1000, // concatenate intervals based blobs\r\n *     ondataavailable: function() {} // get intervals based blobs\r\n * }\r\n * var recorder = new MediaStreamRecorder(mediaStream, config);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\r\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\r\n */\n\n\nfunction MediaStreamRecorder(mediaStream, config) {\n  var self = this;\n\n  if (typeof mediaStream === 'undefined') {\n    throw 'First argument \"MediaStream\" is required.';\n  }\n\n  if (typeof MediaRecorder === 'undefined') {\n    throw 'Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\n  }\n\n  config = config || {\n    // bitsPerSecond: 256 * 8 * 1024,\n    mimeType: 'video/webm'\n  };\n\n  if (config.type === 'audio') {\n    if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\n      var stream;\n\n      if (!!navigator.mozGetUserMedia) {\n        stream = new MediaStream();\n        stream.addTrack(getTracks(mediaStream, 'audio')[0]);\n      } else {\n        // webkitMediaStream\n        stream = new MediaStream(getTracks(mediaStream, 'audio'));\n      }\n\n      mediaStream = stream;\n    }\n\n    if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\n      config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\n    }\n\n    if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\n      // forcing better codecs on Firefox (via #166)\n      config.mimeType = 'audio/ogg';\n    }\n  }\n\n  var arrayOfBlobs = [];\n  /**\r\n   * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * var arrayOfBlobs = recorder.getArrayOfBlobs();\r\n   * @returns {Array} Returns array of recorded blobs.\r\n   */\n\n  this.getArrayOfBlobs = function () {\n    return arrayOfBlobs;\n  };\n  /**\r\n   * This method records MediaStream.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n\n  this.record = function () {\n    // set defaults\n    self.blob = null;\n    self.clearRecordedData();\n    self.timestamps = [];\n    allStates = [];\n    arrayOfBlobs = [];\n    var recorderHints = config;\n\n    if (!config.disableLogs) {\n      console.log('Passing following config over MediaRecorder API.', recorderHints);\n    }\n\n    if (mediaRecorder) {\n      // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\n      mediaRecorder = null;\n    }\n\n    if (isChrome && !isMediaRecorderCompatible()) {\n      // to support video-only recording on stable\n      recorderHints = 'video/vp8';\n    }\n\n    if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\n      if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\n        if (!config.disableLogs) {\n          console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n        }\n\n        recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\n      }\n    } // using MediaRecorder API here\n\n\n    try {\n      mediaRecorder = new MediaRecorder(mediaStream, recorderHints); // reset\n\n      config.mimeType = recorderHints.mimeType;\n    } catch (e) {\n      // chrome-based fallback\n      mediaRecorder = new MediaRecorder(mediaStream);\n    } // old hack?\n\n\n    if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\n      if (!config.disableLogs) {\n        console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\n      }\n    } // Dispatching OnDataAvailable Handler\n\n\n    mediaRecorder.ondataavailable = function (e) {\n      if (e.data) {\n        allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\n      }\n\n      if (typeof config.timeSlice === 'number') {\n        if (e.data && e.data.size) {\n          arrayOfBlobs.push(e.data);\n          updateTimeStamp();\n\n          if (typeof config.ondataavailable === 'function') {\n            // intervals based blobs\n            var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n              type: getMimeType(recorderHints)\n            });\n            config.ondataavailable(blob);\n          }\n        }\n\n        return;\n      }\n\n      if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\n        // make sure that stopRecording always getting fired\n        // even if there is invalid data\n        if (self.recordingCallback) {\n          self.recordingCallback(new Blob([], {\n            type: getMimeType(recorderHints)\n          }));\n          self.recordingCallback = null;\n        }\n\n        return;\n      }\n\n      self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\n        type: getMimeType(recorderHints)\n      });\n\n      if (self.recordingCallback) {\n        self.recordingCallback(self.blob);\n        self.recordingCallback = null;\n      }\n    };\n\n    mediaRecorder.onstart = function () {\n      allStates.push('started');\n    };\n\n    mediaRecorder.onpause = function () {\n      allStates.push('paused');\n    };\n\n    mediaRecorder.onresume = function () {\n      allStates.push('resumed');\n    };\n\n    mediaRecorder.onstop = function () {\n      allStates.push('stopped');\n    };\n\n    mediaRecorder.onerror = function (error) {\n      if (!error) {\n        return;\n      }\n\n      if (!error.name) {\n        error.name = 'UnknownError';\n      }\n\n      allStates.push('error: ' + error);\n\n      if (!config.disableLogs) {\n        // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\n        if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\n          console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\n        } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\n          console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\n        } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\n          console.error('MediaRecorder security error', error);\n        } // older code below\n        else if (error.name === 'OutOfMemory') {\n            console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'IllegalStreamModification') {\n            console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'OtherRecordingError') {\n            console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\n          } else if (error.name === 'GenericError') {\n            console.error('The UA cannot provide the codec or recording option that has been requested.', error);\n          } else {\n            console.error('MediaRecorder Error', error);\n          }\n      }\n\n      (function (looper) {\n        if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\n          delete config.timeslice; // 10 minutes, enough?\n\n          mediaRecorder.start(10 * 60 * 1000);\n          return;\n        }\n\n        setTimeout(looper, 1000);\n      })();\n\n      if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\n        mediaRecorder.stop();\n      }\n    };\n\n    if (typeof config.timeSlice === 'number') {\n      updateTimeStamp();\n      mediaRecorder.start(config.timeSlice);\n    } else {\n      // default is 60 minutes; enough?\n      // use config => {timeSlice: 1000} otherwise\n      mediaRecorder.start(3.6e+6);\n    }\n\n    if (config.initCallback) {\n      config.initCallback(); // old code\n    }\n  };\n  /**\r\n   * @property {Array} timestamps - Array of time stamps\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * console.log(recorder.timestamps);\r\n   */\n\n\n  this.timestamps = [];\n\n  function updateTimeStamp() {\n    self.timestamps.push(new Date().getTime());\n\n    if (typeof config.onTimeStamp === 'function') {\n      config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\n    }\n  }\n\n  function getMimeType(secondObject) {\n    if (mediaRecorder && mediaRecorder.mimeType) {\n      return mediaRecorder.mimeType;\n    }\n\n    return secondObject.mimeType || 'video/webm';\n  }\n  /**\r\n   * This method stops recording MediaStream.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    self.manuallyStopped = true; // used inside the mediaRecorder.onerror\n\n    if (!mediaRecorder) {\n      return;\n    }\n\n    this.recordingCallback = callback;\n\n    if (mediaRecorder.state === 'recording') {\n      mediaRecorder.stop();\n    }\n\n    if (typeof config.timeSlice === 'number') {\n      setTimeout(function () {\n        self.blob = new Blob(arrayOfBlobs, {\n          type: getMimeType(config)\n        });\n        self.recordingCallback(self.blob);\n      }, 100);\n    }\n  };\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n\n  this.pause = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'recording') {\n      mediaRecorder.pause();\n    }\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    if (mediaRecorder.state === 'paused') {\n      mediaRecorder.resume();\n    }\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    if (mediaRecorder && mediaRecorder.state === 'recording') {\n      self.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    arrayOfBlobs = [];\n    mediaRecorder = null;\n    self.timestamps = [];\n  } // Reference to \"MediaRecorder\" object\n\n\n  var mediaRecorder;\n  /**\r\n   * Access to native MediaRecorder API\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @instance\r\n   * @example\r\n   * var internal = recorder.getInternalRecorder();\r\n   * internal.ondataavailable = function() {}; // override\r\n   * internal.stream, internal.onpause, internal.onstop, etc.\r\n   * @returns {Object} Returns internal recording object.\r\n   */\n\n  this.getInternalRecorder = function () {\n    return mediaRecorder;\n  };\n\n  function isMediaStreamActive() {\n    if ('active' in mediaStream) {\n      if (!mediaStream.active) {\n        return false;\n      }\n    } else if ('ended' in mediaStream) {\n      // old hack\n      if (mediaStream.ended) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n  /**\r\n   * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * recorder.stop(function() {\r\n   *     var blob = recorder.blob;\r\n   * });\r\n   */\n\n\n  this.blob = null;\n  /**\r\n   * Get MediaRecorder readonly state.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * var state = recorder.getState();\r\n   * @returns {String} Returns recording state.\r\n   */\n\n  this.getState = function () {\n    if (!mediaRecorder) {\n      return 'inactive';\n    }\n\n    return mediaRecorder.state || 'inactive';\n  }; // list of all recording states\n\n\n  var allStates = [];\n  /**\r\n   * Get MediaRecorder all recording states.\r\n   * @method\r\n   * @memberof MediaStreamRecorder\r\n   * @example\r\n   * var state = recorder.getAllStates();\r\n   * @returns {Array} Returns all recording states\r\n   */\n\n  this.getAllStates = function () {\n    return allStates;\n  }; // if any Track within the MediaStream is muted or not enabled at any time, \n  // the browser will only record black frames \n  // or silence since that is the content produced by the Track\n  // so we need to stopRecording as soon as any single track ends.\n\n\n  if (typeof config.checkForInactiveTracks === 'undefined') {\n    config.checkForInactiveTracks = false; // disable to minimize CPU usage\n  }\n\n  var self = this; // this method checks if media stream is stopped\n  // or if any track is ended.\n\n  (function looper() {\n    if (!mediaRecorder || config.checkForInactiveTracks === false) {\n      return;\n    }\n\n    if (isMediaStreamActive() === false) {\n      if (!config.disableLogs) {\n        console.log('MediaStream seems stopped.');\n      }\n\n      self.stop();\n      return;\n    }\n\n    setTimeout(looper, 1000); // check every second\n  })(); // for debugging\n\n\n  this.name = 'MediaStreamRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\n} // source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\n// https://github.com/mattdiamond/Recorderjs#license-mit\n// ______________________\n// StereoAudioRecorder.js\n\n/**\r\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\r\n * @summary JavaScript standalone object for stereo audio recording.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef StereoAudioRecorder\r\n * @class\r\n * @example\r\n * var recorder = new StereoAudioRecorder(MediaStream, {\r\n *     sampleRate: 44100,\r\n *     bufferSize: 4096\r\n * });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\r\n */\n\n\nfunction StereoAudioRecorder(mediaStream, config) {\n  if (!getTracks(mediaStream, 'audio').length) {\n    throw 'Your stream has no audio tracks.';\n  }\n\n  config = config || {};\n  var self = this; // variables\n\n  var leftchannel = [];\n  var rightchannel = [];\n  var recording = false;\n  var recordingLength = 0;\n  var jsAudioNode;\n  var numberOfAudioChannels = 2;\n  /**\r\n   * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\r\n   * @property {number} desiredSampRate - Desired Bits per sample * 1000\r\n   * @memberof StereoAudioRecorder\r\n   * @instance\r\n   * @example\r\n   * var recorder = StereoAudioRecorder(mediaStream, {\r\n   *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\r\n   * });\r\n   */\n\n  var desiredSampRate = config.desiredSampRate; // backward compatibility\n\n  if (config.leftChannel === true) {\n    numberOfAudioChannels = 1;\n  }\n\n  if (config.numberOfAudioChannels === 1) {\n    numberOfAudioChannels = 1;\n  }\n\n  if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\n    numberOfAudioChannels = 2;\n  }\n\n  if (!config.disableLogs) {\n    console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\n  } // if any Track within the MediaStream is muted or not enabled at any time, \n  // the browser will only record black frames \n  // or silence since that is the content produced by the Track\n  // so we need to stopRecording as soon as any single track ends.\n\n\n  if (typeof config.checkForInactiveTracks === 'undefined') {\n    config.checkForInactiveTracks = true;\n  }\n\n  function isMediaStreamActive() {\n    if (config.checkForInactiveTracks === false) {\n      // always return \"true\"\n      return true;\n    }\n\n    if ('active' in mediaStream) {\n      if (!mediaStream.active) {\n        return false;\n      }\n    } else if ('ended' in mediaStream) {\n      // old hack\n      if (mediaStream.ended) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n  /**\r\n   * This method records MediaStream.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n\n  this.record = function () {\n    if (isMediaStreamActive() === false) {\n      throw 'Please make sure MediaStream is active.';\n    }\n\n    resetVariables();\n    isAudioProcessStarted = isPaused = false;\n    recording = true;\n\n    if (typeof config.timeSlice !== 'undefined') {\n      looper();\n    }\n  };\n\n  function mergeLeftRightBuffers(config, callback) {\n    function mergeAudioBuffers(config, cb) {\n      var numberOfAudioChannels = config.numberOfAudioChannels; // todo: \"slice(0)\" --- is it causes loop? Should be removed?\n\n      var leftBuffers = config.leftBuffers.slice(0);\n      var rightBuffers = config.rightBuffers.slice(0);\n      var sampleRate = config.sampleRate;\n      var internalInterleavedLength = config.internalInterleavedLength;\n      var desiredSampRate = config.desiredSampRate;\n\n      if (numberOfAudioChannels === 2) {\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n        rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\n\n        if (desiredSampRate) {\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n          rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\n        }\n      }\n\n      if (numberOfAudioChannels === 1) {\n        leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\n\n        if (desiredSampRate) {\n          leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\n        }\n      } // set sample rate as desired sample rate\n\n\n      if (desiredSampRate) {\n        sampleRate = desiredSampRate;\n      } // for changing the sampling rate, reference:\n      // http://stackoverflow.com/a/28977136/552182\n\n\n      function interpolateArray(data, newSampleRate, oldSampleRate) {\n        var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\n        var newData = [];\n        var springFactor = Number((data.length - 1) / (fitCount - 1));\n        newData[0] = data[0];\n\n        for (var i = 1; i < fitCount - 1; i++) {\n          var tmp = i * springFactor;\n          var before = Number(Math.floor(tmp)).toFixed();\n          var after = Number(Math.ceil(tmp)).toFixed();\n          var atPoint = tmp - before;\n          newData[i] = linearInterpolate(data[before], data[after], atPoint);\n        }\n\n        newData[fitCount - 1] = data[data.length - 1];\n        return newData;\n      }\n\n      function linearInterpolate(before, after, atPoint) {\n        return before + (after - before) * atPoint;\n      }\n\n      function mergeBuffers(channelBuffer, rLength) {\n        var result = new Float64Array(rLength);\n        var offset = 0;\n        var lng = channelBuffer.length;\n\n        for (var i = 0; i < lng; i++) {\n          var buffer = channelBuffer[i];\n          result.set(buffer, offset);\n          offset += buffer.length;\n        }\n\n        return result;\n      }\n\n      function interleave(leftChannel, rightChannel) {\n        var length = leftChannel.length + rightChannel.length;\n        var result = new Float64Array(length);\n        var inputIndex = 0;\n\n        for (var index = 0; index < length;) {\n          result[index++] = leftChannel[inputIndex];\n          result[index++] = rightChannel[inputIndex];\n          inputIndex++;\n        }\n\n        return result;\n      }\n\n      function writeUTFBytes(view, offset, string) {\n        var lng = string.length;\n\n        for (var i = 0; i < lng; i++) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      } // interleave both channels together\n\n\n      var interleaved;\n\n      if (numberOfAudioChannels === 2) {\n        interleaved = interleave(leftBuffers, rightBuffers);\n      }\n\n      if (numberOfAudioChannels === 1) {\n        interleaved = leftBuffers;\n      }\n\n      var interleavedLength = interleaved.length; // create wav file\n\n      var resultingBufferLength = 44 + interleavedLength * 2;\n      var buffer = new ArrayBuffer(resultingBufferLength);\n      var view = new DataView(buffer); // RIFF chunk descriptor/identifier \n\n      writeUTFBytes(view, 0, 'RIFF'); // RIFF chunk length\n      // changed \"44\" to \"36\" via #401\n\n      view.setUint32(4, 36 + interleavedLength * 2, true); // RIFF type \n\n      writeUTFBytes(view, 8, 'WAVE'); // format chunk identifier \n      // FMT sub-chunk\n\n      writeUTFBytes(view, 12, 'fmt '); // format chunk length \n\n      view.setUint32(16, 16, true); // sample format (raw)\n\n      view.setUint16(20, 1, true); // stereo (2 channels)\n\n      view.setUint16(22, numberOfAudioChannels, true); // sample rate \n\n      view.setUint32(24, sampleRate, true); // byte rate (sample rate * block align)\n\n      view.setUint32(28, sampleRate * numberOfAudioChannels * 2, true); // block align (channel count * bytes per sample) \n\n      view.setUint16(32, numberOfAudioChannels * 2, true); // bits per sample \n\n      view.setUint16(34, 16, true); // data sub-chunk\n      // data chunk identifier \n\n      writeUTFBytes(view, 36, 'data'); // data chunk length \n\n      view.setUint32(40, interleavedLength * 2, true); // write the PCM samples\n\n      var lng = interleavedLength;\n      var index = 44;\n      var volume = 1;\n\n      for (var i = 0; i < lng; i++) {\n        view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\n        index += 2;\n      }\n\n      if (cb) {\n        return cb({\n          buffer: buffer,\n          view: view\n        });\n      }\n\n      postMessage({\n        buffer: buffer,\n        view: view\n      });\n    }\n\n    if (config.noWorker) {\n      mergeAudioBuffers(config, function (data) {\n        callback(data.buffer, data.view);\n      });\n      return;\n    }\n\n    var webWorker = processInWebWorker(mergeAudioBuffers);\n\n    webWorker.onmessage = function (event) {\n      callback(event.data.buffer, event.data.view); // release memory\n\n      URL.revokeObjectURL(webWorker.workerURL); // kill webworker (or Chrome will kill your page after ~25 calls)\n\n      webWorker.terminate();\n    };\n\n    webWorker.postMessage(config);\n  }\n\n  function processInWebWorker(_function) {\n    var workerURL = URL.createObjectURL(new Blob([_function.toString(), ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n      type: 'application/javascript'\n    }));\n    var worker = new Worker(workerURL);\n    worker.workerURL = workerURL;\n    return worker;\n  }\n  /**\r\n   * This method stops recording MediaStream.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {}; // stop recording\n\n\n    recording = false;\n    mergeLeftRightBuffers({\n      desiredSampRate: desiredSampRate,\n      sampleRate: sampleRate,\n      numberOfAudioChannels: numberOfAudioChannels,\n      internalInterleavedLength: recordingLength,\n      leftBuffers: leftchannel,\n      rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\n      noWorker: config.noWorker\n    }, function (buffer, view) {\n      /**\r\n       * @property {Blob} blob - The recorded blob object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n       *     var blob = recorder.blob;\r\n       * });\r\n       */\n      self.blob = new Blob([view], {\n        type: 'audio/wav'\n      });\n      /**\r\n       * @property {ArrayBuffer} buffer - The recorded buffer object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n       *     var buffer = recorder.buffer;\r\n       * });\r\n       */\n\n      self.buffer = new ArrayBuffer(view.buffer.byteLength);\n      /**\r\n       * @property {DataView} view - The recorded data-view object.\r\n       * @memberof StereoAudioRecorder\r\n       * @example\r\n       * recorder.stop(function(){\r\n       *     var view = recorder.view;\r\n       * });\r\n       */\n\n      self.view = view;\n      self.sampleRate = desiredSampRate || sampleRate;\n      self.bufferSize = bufferSize; // recorded audio length\n\n      self.length = recordingLength;\n      isAudioProcessStarted = false;\n\n      if (callback) {\n        callback(self.blob);\n      }\n    });\n  };\n\n  if (typeof RecordRTC.Storage === 'undefined') {\n    RecordRTC.Storage = {\n      AudioContextConstructor: null,\n      AudioContext: window.AudioContext || window.webkitAudioContext\n    };\n  }\n\n  if (!RecordRTC.Storage.AudioContextConstructor || RecordRTC.Storage.AudioContextConstructor.state === 'closed') {\n    RecordRTC.Storage.AudioContextConstructor = new RecordRTC.Storage.AudioContext();\n  }\n\n  var context = RecordRTC.Storage.AudioContextConstructor; // creates an audio node from the microphone incoming stream\n\n  var audioInput = context.createMediaStreamSource(mediaStream);\n  var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\n  /**\r\n   * From the spec: This value controls how frequently the audioprocess event is\r\n   * dispatched and how many sample-frames need to be processed each call.\r\n   * Lower values for buffer size will result in a lower (better) latency.\r\n   * Higher values will be necessary to avoid audio breakup and glitches\r\n   * The size of the buffer (in sample-frames) which needs to\r\n   * be processed each time onprocessaudio is called.\r\n   * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\r\n   * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder = new StereoAudioRecorder(mediaStream, {\r\n   *     bufferSize: 4096\r\n   * });\r\n   */\n  // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\n\n  var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\n\n  if (legalBufferValues.indexOf(bufferSize) === -1) {\n    if (!config.disableLogs) {\n      console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\n    }\n  }\n\n  if (context.createJavaScriptNode) {\n    jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n  } else if (context.createScriptProcessor) {\n    jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\n  } else {\n    throw 'WebAudio API has no support on this browser.';\n  } // connect the stream to the script processor\n\n\n  audioInput.connect(jsAudioNode);\n\n  if (!config.bufferSize) {\n    bufferSize = jsAudioNode.bufferSize; // device buffer-size\n  }\n  /**\r\n   * The sample rate (in sample-frames per second) at which the\r\n   * AudioContext handles audio. It is assumed that all AudioNodes\r\n   * in the context run at this rate. In making this assumption,\r\n   * sample-rate converters or \"varispeed\" processors are not supported\r\n   * in real-time processing.\r\n   * The sampleRate parameter describes the sample-rate of the\r\n   * linear PCM audio data in the buffer in sample-frames per second.\r\n   * An implementation must support sample-rates in at least\r\n   * the range 22050 to 96000.\r\n   * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder = new StereoAudioRecorder(mediaStream, {\r\n   *     sampleRate: 44100\r\n   * });\r\n   */\n\n\n  var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\n\n  if (sampleRate < 22050 || sampleRate > 96000) {\n    // Ref: http://stackoverflow.com/a/26303918/552182\n    if (!config.disableLogs) {\n      console.log('sample-rate must be under range 22050 and 96000.');\n    }\n  }\n\n  if (!config.disableLogs) {\n    if (config.desiredSampRate) {\n      console.log('Desired sample-rate: ' + config.desiredSampRate);\n    }\n  }\n\n  var isPaused = false;\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n  this.pause = function () {\n    isPaused = true;\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    if (isMediaStreamActive() === false) {\n      throw 'Please make sure MediaStream is active.';\n    }\n\n    if (!recording) {\n      if (!config.disableLogs) {\n        console.log('Seems recording has been restarted.');\n      }\n\n      this.record();\n      return;\n    }\n\n    isPaused = false;\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof StereoAudioRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    config.checkForInactiveTracks = false;\n\n    if (recording) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function resetVariables() {\n    leftchannel = [];\n    rightchannel = [];\n    recordingLength = 0;\n    isAudioProcessStarted = false;\n    recording = false;\n    isPaused = false;\n    context = null;\n    self.leftchannel = leftchannel;\n    self.rightchannel = rightchannel;\n    self.numberOfAudioChannels = numberOfAudioChannels;\n    self.desiredSampRate = desiredSampRate;\n    self.sampleRate = sampleRate;\n    self.recordingLength = recordingLength;\n    intervalsBasedBuffers = {\n      left: [],\n      right: [],\n      recordingLength: 0\n    };\n  }\n\n  function clearRecordedDataCB() {\n    if (jsAudioNode) {\n      jsAudioNode.onaudioprocess = null;\n      jsAudioNode.disconnect();\n      jsAudioNode = null;\n    }\n\n    if (audioInput) {\n      audioInput.disconnect();\n      audioInput = null;\n    }\n\n    resetVariables();\n  } // for debugging\n\n\n  this.name = 'StereoAudioRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var isAudioProcessStarted = false;\n\n  function onAudioProcessDataAvailable(e) {\n    if (isPaused) {\n      return;\n    }\n\n    if (isMediaStreamActive() === false) {\n      if (!config.disableLogs) {\n        console.log('MediaStream seems stopped.');\n      }\n\n      jsAudioNode.disconnect();\n      recording = false;\n    }\n\n    if (!recording) {\n      if (audioInput) {\n        audioInput.disconnect();\n        audioInput = null;\n      }\n\n      return;\n    }\n    /**\r\n     * This method is called on \"onaudioprocess\" event's first invocation.\r\n     * @method {function} onAudioProcessStarted\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.onAudioProcessStarted: function() { };\r\n     */\n\n\n    if (!isAudioProcessStarted) {\n      isAudioProcessStarted = true;\n\n      if (config.onAudioProcessStarted) {\n        config.onAudioProcessStarted();\n      }\n\n      if (config.initCallback) {\n        config.initCallback();\n      }\n    }\n\n    var left = e.inputBuffer.getChannelData(0); // we clone the samples\n\n    var chLeft = new Float32Array(left);\n    leftchannel.push(chLeft);\n\n    if (numberOfAudioChannels === 2) {\n      var right = e.inputBuffer.getChannelData(1);\n      var chRight = new Float32Array(right);\n      rightchannel.push(chRight);\n    }\n\n    recordingLength += bufferSize; // export raw PCM\n\n    self.recordingLength = recordingLength;\n\n    if (typeof config.timeSlice !== 'undefined') {\n      intervalsBasedBuffers.recordingLength += bufferSize;\n      intervalsBasedBuffers.left.push(chLeft);\n\n      if (numberOfAudioChannels === 2) {\n        intervalsBasedBuffers.right.push(chRight);\n      }\n    }\n  }\n\n  jsAudioNode.onaudioprocess = onAudioProcessDataAvailable; // to prevent self audio to be connected with speakers\n\n  if (context.createMediaStreamDestination) {\n    jsAudioNode.connect(context.createMediaStreamDestination());\n  } else {\n    jsAudioNode.connect(context.destination);\n  } // export raw PCM\n\n\n  this.leftchannel = leftchannel;\n  this.rightchannel = rightchannel;\n  this.numberOfAudioChannels = numberOfAudioChannels;\n  this.desiredSampRate = desiredSampRate;\n  this.sampleRate = sampleRate;\n  self.recordingLength = recordingLength; // helper for intervals based blobs\n\n  var intervalsBasedBuffers = {\n    left: [],\n    right: [],\n    recordingLength: 0\n  }; // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\n\n  function looper() {\n    if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\n      return;\n    }\n\n    if (intervalsBasedBuffers.left.length) {\n      mergeLeftRightBuffers({\n        desiredSampRate: desiredSampRate,\n        sampleRate: sampleRate,\n        numberOfAudioChannels: numberOfAudioChannels,\n        internalInterleavedLength: intervalsBasedBuffers.recordingLength,\n        leftBuffers: intervalsBasedBuffers.left,\n        rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\n      }, function (buffer, view) {\n        var blob = new Blob([view], {\n          type: 'audio/wav'\n        });\n        config.ondataavailable(blob);\n        setTimeout(looper, config.timeSlice);\n      });\n      intervalsBasedBuffers = {\n        left: [],\n        right: [],\n        recordingLength: 0\n      };\n    } else {\n      setTimeout(looper, config.timeSlice);\n    }\n  }\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\n} // _________________\n// CanvasRecorder.js\n\n/**\r\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\r\n * @summary HTML2Canvas recording into video WebM.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef CanvasRecorder\r\n * @class\r\n * @example\r\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\r\n * @param {object} config - {disableLogs:true, initCallback: function}\r\n */\n\n\nfunction CanvasRecorder(htmlElement, config) {\n  if (typeof html2canvas === 'undefined') {\n    throw 'Please link: https://www.webrtc-experiment.com/screenshot.js';\n  }\n\n  config = config || {};\n\n  if (!config.frameInterval) {\n    config.frameInterval = 10;\n  } // via DetectRTC.js\n\n\n  var isCanvasSupportsStreamCapturing = false;\n  ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function (item) {\n    if (item in document.createElement('canvas')) {\n      isCanvasSupportsStreamCapturing = true;\n    }\n  });\n\n  var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\n\n  var chromeVersion = 50;\n  var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n\n  if (_isChrome && matchArray && matchArray[2]) {\n    chromeVersion = parseInt(matchArray[2], 10);\n  }\n\n  if (_isChrome && chromeVersion < 52) {\n    isCanvasSupportsStreamCapturing = false;\n  }\n\n  if (config.useWhammyRecorder) {\n    isCanvasSupportsStreamCapturing = false;\n  }\n\n  var globalCanvas, mediaStreamRecorder;\n\n  if (isCanvasSupportsStreamCapturing) {\n    if (!config.disableLogs) {\n      console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\n    }\n\n    if (htmlElement instanceof HTMLCanvasElement) {\n      globalCanvas = htmlElement;\n    } else if (htmlElement instanceof CanvasRenderingContext2D) {\n      globalCanvas = htmlElement.canvas;\n    } else {\n      throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\n    }\n  } else if (!!navigator.mozGetUserMedia) {\n    if (!config.disableLogs) {\n      console.error('Canvas recording is NOT supported in Firefox.');\n    }\n  }\n\n  var isRecording;\n  /**\r\n   * This method records Canvas.\r\n   * @method\r\n   * @memberof CanvasRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n  this.record = function () {\n    isRecording = true;\n\n    if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\n      // CanvasCaptureMediaStream\n      var canvasMediaStream;\n\n      if ('captureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\n      } else if ('mozCaptureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.mozCaptureStream(25);\n      } else if ('webkitCaptureStream' in globalCanvas) {\n        canvasMediaStream = globalCanvas.webkitCaptureStream(25);\n      }\n\n      try {\n        var mdStream = new MediaStream();\n        mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\n        canvasMediaStream = mdStream;\n      } catch (e) {}\n\n      if (!canvasMediaStream) {\n        throw 'captureStream API are NOT available.';\n      } // Note: Jan 18, 2016 status is that, \n      // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\n\n\n      mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\n        mimeType: config.mimeType || 'video/webm'\n      });\n      mediaStreamRecorder.record();\n    } else {\n      whammy.frames = [];\n      lastTime = new Date().getTime();\n      drawCanvasFrame();\n    }\n\n    if (config.initCallback) {\n      config.initCallback();\n    }\n  };\n\n  this.getWebPImages = function (callback) {\n    if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\n      callback();\n      return;\n    }\n\n    var framesLength = whammy.frames.length;\n    whammy.frames.forEach(function (frame, idx) {\n      var framesRemaining = framesLength - idx;\n\n      if (!config.disableLogs) {\n        console.log(framesRemaining + '/' + framesLength + ' frames remaining');\n      }\n\n      if (config.onEncodingCallback) {\n        config.onEncodingCallback(framesRemaining, framesLength);\n      }\n\n      var webp = frame.image.toDataURL('image/webp', 1);\n      whammy.frames[idx].image = webp;\n    });\n\n    if (!config.disableLogs) {\n      console.log('Generating WebM');\n    }\n\n    callback();\n  };\n  /**\r\n   * This method stops recording Canvas.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof CanvasRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n\n  this.stop = function (callback) {\n    isRecording = false;\n    var that = this;\n\n    if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\n      mediaStreamRecorder.stop(callback);\n      return;\n    }\n\n    this.getWebPImages(function () {\n      /**\r\n       * @property {Blob} blob - Recorded frames in video/webm blob.\r\n       * @memberof CanvasRecorder\r\n       * @example\r\n       * recorder.stop(function() {\r\n       *     var blob = recorder.blob;\r\n       * });\r\n       */\n      whammy.compile(function (blob) {\n        if (!config.disableLogs) {\n          console.log('Recording finished!');\n        }\n\n        that.blob = blob;\n\n        if (that.blob.forEach) {\n          that.blob = new Blob([], {\n            type: 'video/webm'\n          });\n        }\n\n        if (callback) {\n          callback(that.blob);\n        }\n\n        whammy.frames = [];\n      });\n    });\n  };\n\n  var isPausedRecording = false;\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof CanvasRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n\n    if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n      mediaStreamRecorder.pause();\n      return;\n    }\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof CanvasRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n\n    if (mediaStreamRecorder instanceof MediaStreamRecorder) {\n      mediaStreamRecorder.resume();\n      return;\n    }\n\n    if (!isRecording) {\n      this.record();\n    }\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof CanvasRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    if (isRecording) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    whammy.frames = [];\n    isRecording = false;\n    isPausedRecording = false;\n  } // for debugging\n\n\n  this.name = 'CanvasRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  function cloneCanvas() {\n    //create a new canvas\n    var newCanvas = document.createElement('canvas');\n    var context = newCanvas.getContext('2d'); //set dimensions\n\n    newCanvas.width = htmlElement.width;\n    newCanvas.height = htmlElement.height; //apply the old canvas to the new one\n\n    context.drawImage(htmlElement, 0, 0); //return the new canvas\n\n    return newCanvas;\n  }\n\n  function drawCanvasFrame() {\n    if (isPausedRecording) {\n      lastTime = new Date().getTime();\n      return setTimeout(drawCanvasFrame, 500);\n    }\n\n    if (htmlElement.nodeName.toLowerCase() === 'canvas') {\n      var duration = new Date().getTime() - lastTime; // via #206, by Jack i.e. @Seymourr\n\n      lastTime = new Date().getTime();\n      whammy.frames.push({\n        image: cloneCanvas(),\n        duration: duration\n      });\n\n      if (isRecording) {\n        setTimeout(drawCanvasFrame, config.frameInterval);\n      }\n\n      return;\n    }\n\n    html2canvas(htmlElement, {\n      grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\n      onrendered: function onrendered(canvas) {\n        var duration = new Date().getTime() - lastTime;\n\n        if (!duration) {\n          return setTimeout(drawCanvasFrame, config.frameInterval);\n        } // via #206, by Jack i.e. @Seymourr\n\n\n        lastTime = new Date().getTime();\n        whammy.frames.push({\n          image: canvas.toDataURL('image/webp', 1),\n          duration: duration\n        });\n\n        if (isRecording) {\n          setTimeout(drawCanvasFrame, config.frameInterval);\n        }\n      }\n    });\n  }\n\n  var lastTime = new Date().getTime();\n  var whammy = new Whammy.Video(100);\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.CanvasRecorder = CanvasRecorder;\n} // _________________\n// WhammyRecorder.js\n\n/**\r\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\r\n * @summary Video recording feature in Chrome.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WhammyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WhammyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\r\n */\n\n\nfunction WhammyRecorder(mediaStream, config) {\n  config = config || {};\n\n  if (!config.frameInterval) {\n    config.frameInterval = 10;\n  }\n\n  if (!config.disableLogs) {\n    console.log('Using frames-interval:', config.frameInterval);\n  }\n  /**\r\n   * This method records video.\r\n   * @method\r\n   * @memberof WhammyRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n\n  this.record = function () {\n    if (!config.width) {\n      config.width = 320;\n    }\n\n    if (!config.height) {\n      config.height = 240;\n    }\n\n    if (!config.video) {\n      config.video = {\n        width: config.width,\n        height: config.height\n      };\n    }\n\n    if (!config.canvas) {\n      config.canvas = {\n        width: config.width,\n        height: config.height\n      };\n    }\n\n    canvas.width = config.canvas.width || 320;\n    canvas.height = config.canvas.height || 240;\n    context = canvas.getContext('2d'); // setting defaults\n\n    if (config.video && config.video instanceof HTMLVideoElement) {\n      video = config.video.cloneNode();\n\n      if (config.initCallback) {\n        config.initCallback();\n      }\n    } else {\n      video = document.createElement('video');\n      setSrcObject(mediaStream, video);\n\n      video.onloadedmetadata = function () {\n        // \"onloadedmetadata\" may NOT work in FF?\n        if (config.initCallback) {\n          config.initCallback();\n        }\n      };\n\n      video.width = config.video.width;\n      video.height = config.video.height;\n    }\n\n    video.muted = true;\n    video.play();\n    lastTime = new Date().getTime();\n    whammy = new Whammy.Video();\n\n    if (!config.disableLogs) {\n      console.log('canvas resolutions', canvas.width, '*', canvas.height);\n      console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\n    }\n\n    drawFrames(config.frameInterval);\n  };\n  /**\r\n   * Draw and push frames to Whammy\r\n   * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\r\n   */\n\n\n  function drawFrames(frameInterval) {\n    frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\n    var duration = new Date().getTime() - lastTime;\n\n    if (!duration) {\n      return setTimeout(drawFrames, frameInterval, frameInterval);\n    }\n\n    if (isPausedRecording) {\n      lastTime = new Date().getTime();\n      return setTimeout(drawFrames, 100);\n    } // via #206, by Jack i.e. @Seymourr\n\n\n    lastTime = new Date().getTime();\n\n    if (video.paused) {\n      // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n      // Tweak for Android Chrome\n      video.play();\n    }\n\n    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n    whammy.frames.push({\n      duration: duration,\n      image: canvas.toDataURL('image/webp')\n    });\n\n    if (!isStopDrawing) {\n      setTimeout(drawFrames, frameInterval, frameInterval);\n    }\n  }\n\n  function asyncLoop(o) {\n    var i = -1,\n        length = o.length;\n\n    (function loop() {\n      i++;\n\n      if (i === length) {\n        o.callback();\n        return;\n      } // \"setTimeout\" added by Jim McLeod\n\n\n      setTimeout(function () {\n        o.functionToLoop(loop, i);\n      }, 1);\n    })();\n  }\n  /**\r\n   * remove black frames from the beginning to the specified frame\r\n   * @param {Array} _frames - array of frames to be checked\r\n   * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\r\n   * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\r\n   * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\r\n   * @returns {Array} - array of frames\r\n   */\n  // pull#293 by @volodalexey\n\n\n  function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, _callback2) {\n    var localCanvas = document.createElement('canvas');\n    localCanvas.width = canvas.width;\n    localCanvas.height = canvas.height;\n    var context2d = localCanvas.getContext('2d');\n    var resultFrames = [];\n    var checkUntilNotBlack = _framesToCheck === -1;\n    var endCheckFrame = _framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length ? _framesToCheck : _frames.length;\n    var sampleColor = {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n    var maxColorDifference = Math.sqrt(Math.pow(255, 2) + Math.pow(255, 2) + Math.pow(255, 2));\n    var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\n    var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\n    var doNotCheckNext = false;\n    asyncLoop({\n      length: endCheckFrame,\n      functionToLoop: function functionToLoop(loop, f) {\n        var matchPixCount, endPixCheck, maxPixCount;\n\n        var finishImage = function finishImage() {\n          if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {// console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\n          } else {\n            // console.log('frame is passed : ' + f);\n            if (checkUntilNotBlack) {\n              doNotCheckNext = true;\n            }\n\n            resultFrames.push(_frames[f]);\n          }\n\n          loop();\n        };\n\n        if (!doNotCheckNext) {\n          var image = new Image();\n\n          image.onload = function () {\n            context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\n            var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\n            matchPixCount = 0;\n            endPixCheck = imageData.data.length;\n            maxPixCount = imageData.data.length / 4;\n\n            for (var pix = 0; pix < endPixCheck; pix += 4) {\n              var currentColor = {\n                r: imageData.data[pix],\n                g: imageData.data[pix + 1],\n                b: imageData.data[pix + 2]\n              };\n              var colorDifference = Math.sqrt(Math.pow(currentColor.r - sampleColor.r, 2) + Math.pow(currentColor.g - sampleColor.g, 2) + Math.pow(currentColor.b - sampleColor.b, 2)); // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\n\n              if (colorDifference <= maxColorDifference * pixTolerance) {\n                matchPixCount++;\n              }\n            }\n\n            finishImage();\n          };\n\n          image.src = _frames[f].image;\n        } else {\n          finishImage();\n        }\n      },\n      callback: function callback() {\n        resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\n\n        if (resultFrames.length <= 0) {\n          // at least one last frame should be available for next manipulation\n          // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\n          resultFrames.push(_frames[_frames.length - 1]);\n        }\n\n        _callback2(resultFrames);\n      }\n    });\n  }\n\n  var isStopDrawing = false;\n  /**\r\n   * This method stops recording video.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof WhammyRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    isStopDrawing = true;\n\n    var _this = this; // analyse of all frames takes some time!\n\n\n    setTimeout(function () {\n      // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\n      // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\n      // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\n      dropBlackFrames(whammy.frames, -1, null, null, function (frames) {\n        whammy.frames = frames; // to display advertisement images!\n\n        if (config.advertisement && config.advertisement.length) {\n          whammy.frames = config.advertisement.concat(whammy.frames);\n        }\n        /**\r\n         * @property {Blob} blob - Recorded frames in video/webm blob.\r\n         * @memberof WhammyRecorder\r\n         * @example\r\n         * recorder.stop(function() {\r\n         *     var blob = recorder.blob;\r\n         * });\r\n         */\n\n\n        whammy.compile(function (blob) {\n          _this.blob = blob;\n\n          if (_this.blob.forEach) {\n            _this.blob = new Blob([], {\n              type: 'video/webm'\n            });\n          }\n\n          if (callback) {\n            callback(_this.blob);\n          }\n        });\n      });\n    }, 10);\n  };\n\n  var isPausedRecording = false;\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof WhammyRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof WhammyRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n\n    if (isStopDrawing) {\n      this.record();\n    }\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof WhammyRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    if (!isStopDrawing) {\n      this.stop(clearRecordedDataCB);\n    }\n\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    whammy.frames = [];\n    isStopDrawing = true;\n    isPausedRecording = false;\n  } // for debugging\n\n\n  this.name = 'WhammyRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  var video;\n  var lastTime;\n  var whammy;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.WhammyRecorder = WhammyRecorder;\n} // https://github.com/antimatter15/whammy/blob/master/LICENSE\n// _________\n// Whammy.js\n// todo: Firefox now supports webp for webm containers!\n// their MediaRecorder implementation works well!\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\n\n/**\r\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\r\n * @summary A real time javascript webm encoder based on a canvas hack.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef Whammy\r\n * @class\r\n * @example\r\n * var recorder = new Whammy().Video(15);\r\n * recorder.add(context || canvas || dataURL);\r\n * var output = recorder.compile();\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nvar Whammy = function () {\n  // a more abstract-ish API\n  function WhammyVideo(duration) {\n    this.frames = [];\n    this.duration = duration || 1;\n    this.quality = 0.8;\n  }\n  /**\r\n   * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\r\n   * @method\r\n   * @memberof Whammy\r\n   * @example\r\n   * recorder = new Whammy().Video(0.8, 100);\r\n   * recorder.add(canvas || context || 'image/webp');\r\n   * @param {string} frame - Canvas || Context || image/webp\r\n   * @param {number} duration - Stick a duration (in milliseconds)\r\n   */\n\n\n  WhammyVideo.prototype.add = function (frame, duration) {\n    if ('canvas' in frame) {\n      //CanvasRenderingContext2D\n      frame = frame.canvas;\n    }\n\n    if ('toDataURL' in frame) {\n      frame = frame.toDataURL('image/webp', this.quality);\n    }\n\n    if (!/^data:image\\/webp;base64,/ig.test(frame)) {\n      throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\n    }\n\n    this.frames.push({\n      image: frame,\n      duration: duration || this.duration\n    });\n  };\n\n  function processInWebWorker(_function) {\n    var blob = URL.createObjectURL(new Blob([_function.toString(), 'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'], {\n      type: 'application/javascript'\n    }));\n    var worker = new Worker(blob);\n    URL.revokeObjectURL(blob);\n    return worker;\n  }\n\n  function whammyInWebWorker(frames) {\n    function ArrayToWebM(frames) {\n      var info = checkFrames(frames);\n\n      if (!info) {\n        return [];\n      }\n\n      var clusterMaxDuration = 30000;\n      var EBML = [{\n        'id': 0x1a45dfa3,\n        // EBML\n        'data': [{\n          'data': 1,\n          'id': 0x4286 // EBMLVersion\n\n        }, {\n          'data': 1,\n          'id': 0x42f7 // EBMLReadVersion\n\n        }, {\n          'data': 4,\n          'id': 0x42f2 // EBMLMaxIDLength\n\n        }, {\n          'data': 8,\n          'id': 0x42f3 // EBMLMaxSizeLength\n\n        }, {\n          'data': 'webm',\n          'id': 0x4282 // DocType\n\n        }, {\n          'data': 2,\n          'id': 0x4287 // DocTypeVersion\n\n        }, {\n          'data': 2,\n          'id': 0x4285 // DocTypeReadVersion\n\n        }]\n      }, {\n        'id': 0x18538067,\n        // Segment\n        'data': [{\n          'id': 0x1549a966,\n          // Info\n          'data': [{\n            'data': 1e6,\n            //do things in millisecs (num of nanosecs for duration scale)\n            'id': 0x2ad7b1 // TimecodeScale\n\n          }, {\n            'data': 'whammy',\n            'id': 0x4d80 // MuxingApp\n\n          }, {\n            'data': 'whammy',\n            'id': 0x5741 // WritingApp\n\n          }, {\n            'data': doubleToString(info.duration),\n            'id': 0x4489 // Duration\n\n          }]\n        }, {\n          'id': 0x1654ae6b,\n          // Tracks\n          'data': [{\n            'id': 0xae,\n            // TrackEntry\n            'data': [{\n              'data': 1,\n              'id': 0xd7 // TrackNumber\n\n            }, {\n              'data': 1,\n              'id': 0x73c5 // TrackUID\n\n            }, {\n              'data': 0,\n              'id': 0x9c // FlagLacing\n\n            }, {\n              'data': 'und',\n              'id': 0x22b59c // Language\n\n            }, {\n              'data': 'V_VP8',\n              'id': 0x86 // CodecID\n\n            }, {\n              'data': 'VP8',\n              'id': 0x258688 // CodecName\n\n            }, {\n              'data': 1,\n              'id': 0x83 // TrackType\n\n            }, {\n              'id': 0xe0,\n              // Video\n              'data': [{\n                'data': info.width,\n                'id': 0xb0 // PixelWidth\n\n              }, {\n                'data': info.height,\n                'id': 0xba // PixelHeight\n\n              }]\n            }]\n          }]\n        }]\n      }]; //Generate clusters (max duration)\n\n      var frameNumber = 0;\n      var clusterTimecode = 0;\n\n      while (frameNumber < frames.length) {\n        var clusterFrames = [];\n        var clusterDuration = 0;\n\n        do {\n          clusterFrames.push(frames[frameNumber]);\n          clusterDuration += frames[frameNumber].duration;\n          frameNumber++;\n        } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\n\n        var clusterCounter = 0;\n        var cluster = {\n          'id': 0x1f43b675,\n          // Cluster\n          'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\n        }; //Add cluster to segment\n\n        EBML[1].data.push(cluster);\n        clusterTimecode += clusterDuration;\n      }\n\n      return generateEBML(EBML);\n    }\n\n    function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\n      return [{\n        'data': clusterTimecode,\n        'id': 0xe7 // Timecode\n\n      }].concat(clusterFrames.map(function (webp) {\n        var block = makeSimpleBlock({\n          discardable: 0,\n          frame: webp.data.slice(4),\n          invisible: 0,\n          keyframe: 1,\n          lacing: 0,\n          trackNum: 1,\n          timecode: Math.round(clusterCounter)\n        });\n        clusterCounter += webp.duration;\n        return {\n          data: block,\n          id: 0xa3\n        };\n      }));\n    } // sums the lengths of all the frames and gets the duration\n\n\n    function checkFrames(frames) {\n      if (!frames[0]) {\n        postMessage({\n          error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\n        });\n        return;\n      }\n\n      var width = frames[0].width,\n          height = frames[0].height,\n          duration = frames[0].duration;\n\n      for (var i = 1; i < frames.length; i++) {\n        duration += frames[i].duration;\n      }\n\n      return {\n        duration: duration,\n        width: width,\n        height: height\n      };\n    }\n\n    function numToBuffer(num) {\n      var parts = [];\n\n      while (num > 0) {\n        parts.push(num & 0xff);\n        num = num >> 8;\n      }\n\n      return new Uint8Array(parts.reverse());\n    }\n\n    function strToBuffer(str) {\n      return new Uint8Array(str.split('').map(function (e) {\n        return e.charCodeAt(0);\n      }));\n    }\n\n    function bitsToBuffer(bits) {\n      var data = [];\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data.push(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return new Uint8Array(data);\n    }\n\n    function generateEBML(json) {\n      var ebml = [];\n\n      for (var i = 0; i < json.length; i++) {\n        var data = json[i].data;\n\n        if (_typeof(data) === 'object') {\n          data = generateEBML(data);\n        }\n\n        if (typeof data === 'number') {\n          data = bitsToBuffer(data.toString(2));\n        }\n\n        if (typeof data === 'string') {\n          data = strToBuffer(data);\n        }\n\n        var len = data.size || data.byteLength || data.length;\n        var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\n        var sizeToString = len.toString(2);\n        var padded = new Array(zeroes * 7 + 7 + 1 - sizeToString.length).join('0') + sizeToString;\n        var size = new Array(zeroes).join('0') + '1' + padded;\n        ebml.push(numToBuffer(json[i].id));\n        ebml.push(bitsToBuffer(size));\n        ebml.push(data);\n      }\n\n      return new Blob(ebml, {\n        type: 'video/webm'\n      });\n    }\n\n    function toBinStrOld(bits) {\n      var data = '';\n      var pad = bits.length % 8 ? new Array(1 + 8 - bits.length % 8).join('0') : '';\n      bits = pad + bits;\n\n      for (var i = 0; i < bits.length; i += 8) {\n        data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\n      }\n\n      return data;\n    }\n\n    function makeSimpleBlock(data) {\n      var flags = 0;\n\n      if (data.keyframe) {\n        flags |= 128;\n      }\n\n      if (data.invisible) {\n        flags |= 8;\n      }\n\n      if (data.lacing) {\n        flags |= data.lacing << 1;\n      }\n\n      if (data.discardable) {\n        flags |= 1;\n      }\n\n      if (data.trackNum > 127) {\n        throw 'TrackNumber > 127 not supported';\n      }\n\n      var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function (e) {\n        return String.fromCharCode(e);\n      }).join('') + data.frame;\n      return out;\n    }\n\n    function parseWebP(riff) {\n      var VP8 = riff.RIFF[0].WEBP[0];\n      var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\n\n      for (var i = 0, c = []; i < 4; i++) {\n        c[i] = VP8.charCodeAt(frameStart + 3 + i);\n      }\n\n      var width, height, tmp; //the code below is literally copied verbatim from the bitstream spec\n\n      tmp = c[1] << 8 | c[0];\n      width = tmp & 0x3FFF;\n      tmp = c[3] << 8 | c[2];\n      height = tmp & 0x3FFF;\n      return {\n        width: width,\n        height: height,\n        data: VP8,\n        riff: riff\n      };\n    }\n\n    function getStrLength(string, offset) {\n      return parseInt(string.substr(offset + 4, 4).split('').map(function (i) {\n        var unpadded = i.charCodeAt(0).toString(2);\n        return new Array(8 - unpadded.length + 1).join('0') + unpadded;\n      }).join(''), 2);\n    }\n\n    function parseRIFF(string) {\n      var offset = 0;\n      var chunks = {};\n\n      while (offset < string.length) {\n        var id = string.substr(offset, 4);\n        var len = getStrLength(string, offset);\n        var data = string.substr(offset + 4 + 4, len);\n        offset += 4 + 4 + len;\n        chunks[id] = chunks[id] || [];\n\n        if (id === 'RIFF' || id === 'LIST') {\n          chunks[id].push(parseRIFF(data));\n        } else {\n          chunks[id].push(data);\n        }\n      }\n\n      return chunks;\n    }\n\n    function doubleToString(num) {\n      return [].slice.call(new Uint8Array(new Float64Array([num]).buffer), 0).map(function (e) {\n        return String.fromCharCode(e);\n      }).reverse().join('');\n    }\n\n    var webm = new ArrayToWebM(frames.map(function (frame) {\n      var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\n      webp.duration = frame.duration;\n      return webp;\n    }));\n    postMessage(webm);\n  }\n  /**\r\n   * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof Whammy\r\n   * @example\r\n   * recorder = new Whammy().Video(0.8, 100);\r\n   * recorder.compile(function(blob) {\r\n   *    // blob.size - blob.type\r\n   * });\r\n   */\n\n\n  WhammyVideo.prototype.compile = function (callback) {\n    var webWorker = processInWebWorker(whammyInWebWorker);\n\n    webWorker.onmessage = function (event) {\n      if (event.data.error) {\n        console.error(event.data.error);\n        return;\n      }\n\n      callback(event.data);\n    };\n\n    webWorker.postMessage(this.frames);\n  };\n\n  return {\n    /**\r\n     * A more abstract-ish API.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * @param {?number} speed - 0.8\r\n     * @param {?number} quality - 100\r\n     */\n    Video: WhammyVideo\n  };\n}();\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.Whammy = Whammy;\n} // ______________ (indexed-db)\n// DiskStorage.js\n\n/**\r\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\r\n * @summary Writing blobs into IndexedDB.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * DiskStorage.Store({\r\n *     audioBlob: yourAudioBlob,\r\n *     videoBlob: yourVideoBlob,\r\n *     gifBlob  : yourGifBlob\r\n * });\r\n * DiskStorage.Fetch(function(dataURL, type) {\r\n *     if(type === 'audioBlob') { }\r\n *     if(type === 'videoBlob') { }\r\n *     if(type === 'gifBlob')   { }\r\n * });\r\n * // DiskStorage.dataStoreName = 'recordRTC';\r\n * // DiskStorage.onError = function(error) { };\r\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\r\n * @property {function} Store - This method stores blobs in IndexedDB.\r\n * @property {function} onError - This function is invoked for any known/unknown error.\r\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\n\n\nvar DiskStorage = {\n  /**\r\n   * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n   * @method\r\n   * @memberof DiskStorage\r\n   * @internal\r\n   * @example\r\n   * DiskStorage.init();\r\n   */\n  init: function init() {\n    var self = this;\n\n    if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\n      console.error('IndexedDB API are not available in this browser.');\n      return;\n    }\n\n    var dbVersion = 1;\n    var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\n        db;\n    var request = indexedDB.open(dbName, dbVersion);\n\n    function createObjectStore(dataBase) {\n      dataBase.createObjectStore(self.dataStoreName);\n    }\n\n    function putInDB() {\n      var transaction = db.transaction([self.dataStoreName], 'readwrite');\n\n      if (self.videoBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\n      }\n\n      if (self.gifBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\n      }\n\n      if (self.audioBlob) {\n        transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\n      }\n\n      function getFromStore(portionName) {\n        transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function (event) {\n          if (self.callback) {\n            self.callback(event.target.result, portionName);\n          }\n        };\n      }\n\n      getFromStore('audioBlob');\n      getFromStore('videoBlob');\n      getFromStore('gifBlob');\n    }\n\n    request.onerror = self.onError;\n\n    request.onsuccess = function () {\n      db = request.result;\n      db.onerror = self.onError;\n\n      if (db.setVersion) {\n        if (db.version !== dbVersion) {\n          var setVersion = db.setVersion(dbVersion);\n\n          setVersion.onsuccess = function () {\n            createObjectStore(db);\n            putInDB();\n          };\n        } else {\n          putInDB();\n        }\n      } else {\n        putInDB();\n      }\n    };\n\n    request.onupgradeneeded = function (event) {\n      createObjectStore(event.target.result);\n    };\n  },\n\n  /**\r\n   * This method fetches stored blobs from IndexedDB.\r\n   * @method\r\n   * @memberof DiskStorage\r\n   * @internal\r\n   * @example\r\n   * DiskStorage.Fetch(function(dataURL, type) {\r\n   *     if(type === 'audioBlob') { }\r\n   *     if(type === 'videoBlob') { }\r\n   *     if(type === 'gifBlob')   { }\r\n   * });\r\n   */\n  Fetch: function Fetch(callback) {\n    this.callback = callback;\n    this.init();\n    return this;\n  },\n\n  /**\r\n   * This method stores blobs in IndexedDB.\r\n   * @method\r\n   * @memberof DiskStorage\r\n   * @internal\r\n   * @example\r\n   * DiskStorage.Store({\r\n   *     audioBlob: yourAudioBlob,\r\n   *     videoBlob: yourVideoBlob,\r\n   *     gifBlob  : yourGifBlob\r\n   * });\r\n   */\n  Store: function Store(config) {\n    this.audioBlob = config.audioBlob;\n    this.videoBlob = config.videoBlob;\n    this.gifBlob = config.gifBlob;\n    this.init();\n    return this;\n  },\n\n  /**\r\n   * This function is invoked for any known/unknown error.\r\n   * @method\r\n   * @memberof DiskStorage\r\n   * @internal\r\n   * @example\r\n   * DiskStorage.onError = function(error){\r\n   *     alerot( JSON.stringify(error) );\r\n   * };\r\n   */\n  onError: function onError(error) {\n    console.error(JSON.stringify(error, null, '\\t'));\n  },\n\n  /**\r\n   * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n   * @memberof DiskStorage\r\n   * @internal\r\n   * @example\r\n   * DiskStorage.dataStoreName = 'recordRTC';\r\n   */\n  dataStoreName: 'recordRTC',\n  dbName: null\n};\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.DiskStorage = DiskStorage;\n} // ______________\n// GifRecorder.js\n\n/**\r\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GifRecorder\r\n * @class\r\n * @example\r\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     img.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\r\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\r\n */\n\n\nfunction GifRecorder(mediaStream, config) {\n  if (typeof GIFEncoder === 'undefined') {\n    var script = document.createElement('script');\n    script.src = 'https://www.webrtc-experiment.com/gif-recorder.js';\n    (document.body || document.documentElement).appendChild(script);\n  }\n\n  config = config || {};\n  var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\n  /**\r\n   * This method records MediaStream.\r\n   * @method\r\n   * @memberof GifRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n  this.record = function () {\n    if (typeof GIFEncoder === 'undefined') {\n      setTimeout(self.record, 1000);\n      return;\n    }\n\n    if (!isLoadedMetaData) {\n      setTimeout(self.record, 1000);\n      return;\n    }\n\n    if (!isHTMLObject) {\n      if (!config.width) {\n        config.width = video.offsetWidth || 320;\n      }\n\n      if (!config.height) {\n        config.height = video.offsetHeight || 240;\n      }\n\n      if (!config.video) {\n        config.video = {\n          width: config.width,\n          height: config.height\n        };\n      }\n\n      if (!config.canvas) {\n        config.canvas = {\n          width: config.width,\n          height: config.height\n        };\n      }\n\n      canvas.width = config.canvas.width || 320;\n      canvas.height = config.canvas.height || 240;\n      video.width = config.video.width || 320;\n      video.height = config.video.height || 240;\n    } // external library to record as GIF images\n\n\n    gifEncoder = new GIFEncoder(); // void setRepeat(int iter) \n    // Sets the number of times the set of GIF frames should be played. \n    // Default is 1; 0 means play indefinitely.\n\n    gifEncoder.setRepeat(0); // void setFrameRate(Number fps) \n    // Sets frame rate in frames per second. \n    // Equivalent to setDelay(1000/fps).\n    // Using \"setDelay\" instead of \"setFrameRate\"\n\n    gifEncoder.setDelay(config.frameRate || 200); // void setQuality(int quality) \n    // Sets quality of color quantization (conversion of images to the \n    // maximum 256 colors allowed by the GIF specification). \n    // Lower values (minimum = 1) produce better colors, \n    // but slow processing significantly. 10 is the default, \n    // and produces good color mapping at reasonable speeds. \n    // Values greater than 20 do not yield significant improvements in speed.\n\n    gifEncoder.setQuality(config.quality || 10); // Boolean start() \n    // This writes the GIF Header and returns false if it fails.\n\n    gifEncoder.start();\n\n    if (typeof config.onGifRecordingStarted === 'function') {\n      config.onGifRecordingStarted();\n    }\n\n    startTime = Date.now();\n\n    function drawVideoFrame(time) {\n      if (self.clearedRecordedData === true) {\n        return;\n      }\n\n      if (isPausedRecording) {\n        return setTimeout(function () {\n          drawVideoFrame(time);\n        }, 100);\n      }\n\n      lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n      if (_typeof(lastFrameTime) === undefined) {\n        lastFrameTime = time;\n      } // ~10 fps\n\n\n      if (time - lastFrameTime < 90) {\n        return;\n      }\n\n      if (!isHTMLObject && video.paused) {\n        // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\n        // Tweak for Android Chrome\n        video.play();\n      }\n\n      if (!isHTMLObject) {\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n      }\n\n      if (config.onGifPreview) {\n        config.onGifPreview(canvas.toDataURL('image/png'));\n      }\n\n      gifEncoder.addFrame(context);\n      lastFrameTime = time;\n    }\n\n    lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\n\n    if (config.initCallback) {\n      config.initCallback();\n    }\n  };\n  /**\r\n   * This method stops recording MediaStream.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof GifRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     img.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n\n  this.stop = function (callback) {\n    callback = callback || function () {};\n\n    if (lastAnimationFrame) {\n      cancelAnimationFrame(lastAnimationFrame);\n    }\n\n    endTime = Date.now();\n    /**\r\n     * @property {Blob} blob - The recorded blob object.\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.stop(function(){\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\n\n    this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\n      type: 'image/gif'\n    });\n    callback(this.blob); // bug: find a way to clear old recorded blobs\n\n    gifEncoder.stream().bin = [];\n  };\n\n  var isPausedRecording = false;\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof GifRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n  this.pause = function () {\n    isPausedRecording = true;\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof GifRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    isPausedRecording = false;\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof GifRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    self.clearedRecordedData = true;\n    clearRecordedDataCB();\n  };\n\n  function clearRecordedDataCB() {\n    if (gifEncoder) {\n      gifEncoder.stream().bin = [];\n    }\n  } // for debugging\n\n\n  this.name = 'GifRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n\n  if (isHTMLObject) {\n    if (mediaStream instanceof CanvasRenderingContext2D) {\n      context = mediaStream;\n      canvas = context.canvas;\n    } else if (mediaStream instanceof HTMLCanvasElement) {\n      context = mediaStream.getContext('2d');\n      canvas = mediaStream;\n    }\n  }\n\n  var isLoadedMetaData = true;\n\n  if (!isHTMLObject) {\n    var video = document.createElement('video');\n    video.muted = true;\n    video.autoplay = true;\n    video.playsInline = true;\n    isLoadedMetaData = false;\n\n    video.onloadedmetadata = function () {\n      isLoadedMetaData = true;\n    };\n\n    setSrcObject(mediaStream, video);\n    video.play();\n  }\n\n  var lastAnimationFrame = null;\n  var startTime, endTime, lastFrameTime;\n  var gifEncoder;\n  var self = this;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.GifRecorder = GifRecorder;\n} // Last time updated: 2019-06-21 4:09:42 AM UTC\n// ________________________\n// MultiStreamsMixer v1.2.2\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\n// --------------------------------------------------\n// Muaz Khan     - www.MuazKhan.com\n// MIT License   - www.WebRTC-Experiment.com/licence\n// --------------------------------------------------\n\n\nfunction MultiStreamsMixer(arrayOfMediaStreams, elementClass) {\n  var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\n\n  (function (that) {\n    if (typeof RecordRTC !== 'undefined') {\n      return;\n    }\n\n    if (!that) {\n      return;\n    }\n\n    if (typeof window !== 'undefined') {\n      return;\n    }\n\n    if (typeof global === 'undefined') {\n      return;\n    }\n\n    global.navigator = {\n      userAgent: browserFakeUserAgent,\n      getUserMedia: function getUserMedia() {}\n    };\n\n    if (!global.console) {\n      global.console = {};\n    }\n\n    if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\n      global.console.error = global.console.log = global.console.log || function () {\n        console.log(arguments);\n      };\n    }\n\n    if (typeof document === 'undefined') {\n      /*global document:true */\n      that.document = {\n        documentElement: {\n          appendChild: function appendChild() {\n            return '';\n          }\n        }\n      };\n\n      document.createElement = document.captureStream = document.mozCaptureStream = function () {\n        var obj = {\n          getContext: function getContext() {\n            return obj;\n          },\n          play: function play() {},\n          pause: function pause() {},\n          drawImage: function drawImage() {},\n          toDataURL: function toDataURL() {\n            return '';\n          },\n          style: {}\n        };\n        return obj;\n      };\n\n      that.HTMLVideoElement = function () {};\n    }\n\n    if (typeof location === 'undefined') {\n      /*global location:true */\n      that.location = {\n        protocol: 'file:',\n        href: '',\n        hash: ''\n      };\n    }\n\n    if (typeof screen === 'undefined') {\n      /*global screen:true */\n      that.screen = {\n        width: 0,\n        height: 0\n      };\n    }\n\n    if (typeof URL === 'undefined') {\n      /*global screen:true */\n      that.URL = {\n        createObjectURL: function createObjectURL() {\n          return '';\n        },\n        revokeObjectURL: function revokeObjectURL() {\n          return '';\n        }\n      };\n    }\n    /*global window:true */\n\n\n    that.window = global;\n  })(typeof global !== 'undefined' ? global : null); // requires: chrome://flags/#enable-experimental-web-platform-features\n\n\n  elementClass = elementClass || 'multi-streams-mixer';\n  var videos = [];\n  var isStopDrawingFrames = false;\n  var canvas = document.createElement('canvas');\n  var context = canvas.getContext('2d');\n  canvas.style.opacity = 0;\n  canvas.style.position = 'absolute';\n  canvas.style.zIndex = -1;\n  canvas.style.top = '-1000em';\n  canvas.style.left = '-1000em';\n  canvas.className = elementClass;\n  (document.body || document.documentElement).appendChild(canvas);\n  this.disableLogs = false;\n  this.frameInterval = 10;\n  this.width = 360;\n  this.height = 240; // use gain node to prevent echo\n\n  this.useGainNode = true;\n  var self = this; // _____________________________\n  // Cross-Browser-Declarations.js\n  // WebAudio API representer\n\n  var AudioContext = window.AudioContext;\n\n  if (typeof AudioContext === 'undefined') {\n    if (typeof webkitAudioContext !== 'undefined') {\n      /*global AudioContext:true */\n      AudioContext = webkitAudioContext;\n    }\n\n    if (typeof mozAudioContext !== 'undefined') {\n      /*global AudioContext:true */\n      AudioContext = mozAudioContext;\n    }\n  }\n  /*jshint -W079 */\n\n\n  var URL = window.URL;\n\n  if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\n    /*global URL:true */\n    URL = webkitURL;\n  }\n\n  if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') {\n    // maybe window.navigator?\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\n      navigator.getUserMedia = navigator.webkitGetUserMedia;\n    }\n\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\n      navigator.getUserMedia = navigator.mozGetUserMedia;\n    }\n  }\n\n  var MediaStream = window.MediaStream;\n\n  if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\n    MediaStream = webkitMediaStream;\n  }\n  /*global MediaStream:true */\n\n\n  if (typeof MediaStream !== 'undefined') {\n    // override \"stop\" method for all browsers\n    if (typeof MediaStream.prototype.stop === 'undefined') {\n      MediaStream.prototype.stop = function () {\n        this.getTracks().forEach(function (track) {\n          track.stop();\n        });\n      };\n    }\n  }\n\n  var Storage = {};\n\n  if (typeof AudioContext !== 'undefined') {\n    Storage.AudioContext = AudioContext;\n  } else if (typeof webkitAudioContext !== 'undefined') {\n    Storage.AudioContext = webkitAudioContext;\n  }\n\n  function setSrcObject(stream, element) {\n    if ('srcObject' in element) {\n      element.srcObject = stream;\n    } else if ('mozSrcObject' in element) {\n      element.mozSrcObject = stream;\n    } else {\n      element.srcObject = stream;\n    }\n  }\n\n  this.startDrawingFrames = function () {\n    drawVideosToCanvas();\n  };\n\n  function drawVideosToCanvas() {\n    if (isStopDrawingFrames) {\n      return;\n    }\n\n    var videosLength = videos.length;\n    var fullcanvas = false;\n    var remaining = [];\n    videos.forEach(function (video) {\n      if (!video.stream) {\n        video.stream = {};\n      }\n\n      if (video.stream.fullcanvas) {\n        fullcanvas = video;\n      } else {\n        // todo: video.stream.active or video.stream.live to fix blank frames issues?\n        remaining.push(video);\n      }\n    });\n\n    if (fullcanvas) {\n      canvas.width = fullcanvas.stream.width;\n      canvas.height = fullcanvas.stream.height;\n    } else if (remaining.length) {\n      canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\n      var height = 1;\n\n      if (videosLength === 3 || videosLength === 4) {\n        height = 2;\n      }\n\n      if (videosLength === 5 || videosLength === 6) {\n        height = 3;\n      }\n\n      if (videosLength === 7 || videosLength === 8) {\n        height = 4;\n      }\n\n      if (videosLength === 9 || videosLength === 10) {\n        height = 5;\n      }\n\n      canvas.height = remaining[0].height * height;\n    } else {\n      canvas.width = self.width || 360;\n      canvas.height = self.height || 240;\n    }\n\n    if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\n      drawImage(fullcanvas);\n    }\n\n    remaining.forEach(function (video, idx) {\n      drawImage(video, idx);\n    });\n    setTimeout(drawVideosToCanvas, self.frameInterval);\n  }\n\n  function drawImage(video, idx) {\n    if (isStopDrawingFrames) {\n      return;\n    }\n\n    var x = 0;\n    var y = 0;\n    var width = video.width;\n    var height = video.height;\n\n    if (idx === 1) {\n      x = video.width;\n    }\n\n    if (idx === 2) {\n      y = video.height;\n    }\n\n    if (idx === 3) {\n      x = video.width;\n      y = video.height;\n    }\n\n    if (idx === 4) {\n      y = video.height * 2;\n    }\n\n    if (idx === 5) {\n      x = video.width;\n      y = video.height * 2;\n    }\n\n    if (idx === 6) {\n      y = video.height * 3;\n    }\n\n    if (idx === 7) {\n      x = video.width;\n      y = video.height * 3;\n    }\n\n    if (typeof video.stream.left !== 'undefined') {\n      x = video.stream.left;\n    }\n\n    if (typeof video.stream.top !== 'undefined') {\n      y = video.stream.top;\n    }\n\n    if (typeof video.stream.width !== 'undefined') {\n      width = video.stream.width;\n    }\n\n    if (typeof video.stream.height !== 'undefined') {\n      height = video.stream.height;\n    }\n\n    context.drawImage(video, x, y, width, height);\n\n    if (typeof video.stream.onRender === 'function') {\n      video.stream.onRender(context, x, y, width, height, idx);\n    }\n  }\n\n  function getMixedStream() {\n    isStopDrawingFrames = false;\n    var mixedVideoStream = getMixedVideoStream();\n    var mixedAudioStream = getMixedAudioStream();\n\n    if (mixedAudioStream) {\n      mixedAudioStream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).forEach(function (track) {\n        mixedVideoStream.addTrack(track);\n      });\n    }\n\n    var fullcanvas;\n    arrayOfMediaStreams.forEach(function (stream) {\n      if (stream.fullcanvas) {\n        fullcanvas = true;\n      }\n    }); // mixedVideoStream.prototype.appendStreams = appendStreams;\n    // mixedVideoStream.prototype.resetVideoStreams = resetVideoStreams;\n    // mixedVideoStream.prototype.clearRecordedData = clearRecordedData;\n\n    return mixedVideoStream;\n  }\n\n  function getMixedVideoStream() {\n    resetVideoStreams();\n    var capturedStream;\n\n    if ('captureStream' in canvas) {\n      capturedStream = canvas.captureStream();\n    } else if ('mozCaptureStream' in canvas) {\n      capturedStream = canvas.mozCaptureStream();\n    } else if (!self.disableLogs) {\n      console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\n    }\n\n    var videoStream = new MediaStream();\n    capturedStream.getTracks().filter(function (t) {\n      return t.kind === 'video';\n    }).forEach(function (track) {\n      videoStream.addTrack(track);\n    });\n    canvas.stream = videoStream;\n    return videoStream;\n  }\n\n  function getMixedAudioStream() {\n    // via: @pehrsons\n    if (!Storage.AudioContextConstructor) {\n      Storage.AudioContextConstructor = new Storage.AudioContext();\n    }\n\n    self.audioContext = Storage.AudioContextConstructor;\n    self.audioSources = [];\n\n    if (self.useGainNode === true) {\n      self.gainNode = self.audioContext.createGain();\n      self.gainNode.connect(self.audioContext.destination);\n      self.gainNode.gain.value = 0; // don't hear self\n    }\n\n    var audioTracksLength = 0;\n    arrayOfMediaStreams.forEach(function (stream) {\n      if (!stream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).length) {\n        return;\n      }\n\n      audioTracksLength++;\n      var audioSource = self.audioContext.createMediaStreamSource(stream);\n\n      if (self.useGainNode === true) {\n        audioSource.connect(self.gainNode);\n      }\n\n      self.audioSources.push(audioSource);\n    });\n\n    if (!audioTracksLength) {\n      // because \"self.audioContext\" is not initialized\n      // that's why we've to ignore rest of the code\n      return;\n    }\n\n    self.audioDestination = self.audioContext.createMediaStreamDestination();\n    self.audioSources.forEach(function (audioSource) {\n      audioSource.connect(self.audioDestination);\n    });\n    return self.audioDestination.stream;\n  }\n\n  function getVideo(stream) {\n    var video = document.createElement('video');\n    setSrcObject(stream, video);\n    video.className = elementClass;\n    video.muted = true;\n    video.volume = 0;\n    video.width = stream.width || self.width || 360;\n    video.height = stream.height || self.height || 240;\n    video.play();\n    return video;\n  }\n\n  this.appendStreams = function (streams) {\n    if (!streams) {\n      throw 'First parameter is required.';\n    }\n\n    if (!(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    streams.forEach(function (stream) {\n      var newStream = new MediaStream();\n\n      if (stream.getTracks().filter(function (t) {\n        return t.kind === 'video';\n      }).length) {\n        var video = getVideo(stream);\n        video.stream = stream;\n        videos.push(video);\n        newStream.addTrack(stream.getTracks().filter(function (t) {\n          return t.kind === 'video';\n        })[0]);\n      }\n\n      if (stream.getTracks().filter(function (t) {\n        return t.kind === 'audio';\n      }).length) {\n        var audioSource = self.audioContext.createMediaStreamSource(stream);\n        self.audioDestination = self.audioContext.createMediaStreamDestination();\n        audioSource.connect(self.audioDestination);\n        newStream.addTrack(self.audioDestination.stream.getTracks().filter(function (t) {\n          return t.kind === 'audio';\n        })[0]);\n      }\n\n      arrayOfMediaStreams.push(newStream);\n    });\n  };\n\n  this.releaseStreams = function () {\n    videos = [];\n    isStopDrawingFrames = true;\n\n    if (self.gainNode) {\n      self.gainNode.disconnect();\n      self.gainNode = null;\n    }\n\n    if (self.audioSources.length) {\n      self.audioSources.forEach(function (source) {\n        source.disconnect();\n      });\n      self.audioSources = [];\n    }\n\n    if (self.audioDestination) {\n      self.audioDestination.disconnect();\n      self.audioDestination = null;\n    }\n\n    if (self.audioContext) {\n      self.audioContext.close();\n    }\n\n    self.audioContext = null;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (canvas.stream) {\n      canvas.stream.stop();\n      canvas.stream = null;\n    }\n  };\n\n  this.resetVideoStreams = function (streams) {\n    if (streams && !(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    resetVideoStreams(streams);\n  };\n\n  function resetVideoStreams(streams) {\n    videos = [];\n    streams = streams || arrayOfMediaStreams; // via: @adrian-ber\n\n    streams.forEach(function (stream) {\n      if (!stream.getTracks().filter(function (t) {\n        return t.kind === 'video';\n      }).length) {\n        return;\n      }\n\n      var video = getVideo(stream);\n      video.stream = stream;\n      videos.push(video);\n    });\n  } // for debugging\n\n\n  this.name = 'MultiStreamsMixer';\n\n  this.toString = function () {\n    return this.name;\n  };\n\n  this.getMixedStream = getMixedStream;\n}\n\nif (typeof RecordRTC === 'undefined') {\n  if (typeof module !== 'undefined'\n  /* && !!module.exports*/\n  ) {\n      module.exports = MultiStreamsMixer;\n    }\n\n  if (typeof define === 'function' && define.amd) {\n    define('MultiStreamsMixer', [], function () {\n      return MultiStreamsMixer;\n    });\n  }\n} // ______________________\n// MultiStreamRecorder.js\n\n/*\r\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\r\n */\n\n/**\r\n * MultiStreamRecorder can record multiple videos in single container.\r\n * @summary Multi-videos recorder.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MultiStreamRecorder\r\n * @class\r\n * @example\r\n * var options = {\r\n *     mimeType: 'video/webm'\r\n * }\r\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\r\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\r\n */\n\n\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\n  arrayOfMediaStreams = arrayOfMediaStreams || [];\n  var self = this;\n  var mixer;\n  var mediaRecorder;\n  options = options || {\n    elementClass: 'multi-streams-mixer',\n    mimeType: 'video/webm',\n    video: {\n      width: 360,\n      height: 240\n    }\n  };\n\n  if (!options.frameInterval) {\n    options.frameInterval = 10;\n  }\n\n  if (!options.video) {\n    options.video = {};\n  }\n\n  if (!options.video.width) {\n    options.video.width = 360;\n  }\n\n  if (!options.video.height) {\n    options.video.height = 240;\n  }\n  /**\r\n   * This method records all MediaStreams.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n\n  this.record = function () {\n    // github/muaz-khan/MultiStreamsMixer\n    mixer = new MultiStreamsMixer(arrayOfMediaStreams, options.elementClass || 'multi-streams-mixer');\n\n    if (getAllVideoTracks().length) {\n      mixer.frameInterval = options.frameInterval || 10;\n      mixer.width = options.video.width || 360;\n      mixer.height = options.video.height || 240;\n      mixer.startDrawingFrames();\n    }\n\n    if (options.previewStream && typeof options.previewStream === 'function') {\n      options.previewStream(mixer.getMixedStream());\n    } // record using MediaRecorder API\n\n\n    mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\n    mediaRecorder.record();\n  };\n\n  function getAllVideoTracks() {\n    var tracks = [];\n    arrayOfMediaStreams.forEach(function (stream) {\n      getTracks(stream, 'video').forEach(function (track) {\n        tracks.push(track);\n      });\n    });\n    return tracks;\n  }\n  /**\r\n   * This method stops recording MediaStream.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n\n  this.stop = function (callback) {\n    if (!mediaRecorder) {\n      return;\n    }\n\n    mediaRecorder.stop(function (blob) {\n      self.blob = blob;\n      callback(blob);\n      self.clearRecordedData();\n    });\n  };\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n\n  this.pause = function () {\n    if (mediaRecorder) {\n      mediaRecorder.pause();\n    }\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    if (mediaRecorder) {\n      mediaRecorder.resume();\n    }\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    if (mediaRecorder) {\n      mediaRecorder.clearRecordedData();\n      mediaRecorder = null;\n    }\n\n    if (mixer) {\n      mixer.releaseStreams();\n      mixer = null;\n    }\n  };\n  /**\r\n   * Add extra media-streams to existing recordings.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n   * @example\r\n   * recorder.addStreams([newAudioStream, newVideoStream]);\r\n   */\n\n\n  this.addStreams = function (streams) {\n    if (!streams) {\n      throw 'First parameter is required.';\n    }\n\n    if (!(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    arrayOfMediaStreams.concat(streams);\n\n    if (!mediaRecorder || !mixer) {\n      return;\n    }\n\n    mixer.appendStreams(streams);\n\n    if (options.previewStream && typeof options.previewStream === 'function') {\n      options.previewStream(mixer.getMixedStream());\n    }\n  };\n  /**\r\n   * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n   * @example\r\n   * recorder.resetVideoStreams([newVideo1, newVideo2]);\r\n   */\n\n\n  this.resetVideoStreams = function (streams) {\n    if (!mixer) {\n      return;\n    }\n\n    if (streams && !(streams instanceof Array)) {\n      streams = [streams];\n    }\n\n    mixer.resetVideoStreams(streams);\n  };\n  /**\r\n   * Returns MultiStreamsMixer\r\n   * @method\r\n   * @memberof MultiStreamRecorder\r\n   * @example\r\n   * let mixer = recorder.getMixer();\r\n   * mixer.appendStreams([newStream]);\r\n   */\n\n\n  this.getMixer = function () {\n    return mixer;\n  }; // for debugging\n\n\n  this.name = 'MultiStreamRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\n} // _____________________\n// RecordRTC.promises.js\n\n/**\r\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\r\n * @summary Promises for {@link RecordRTC}\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCPromisesHandler\r\n * @class\r\n * @example\r\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\r\n * recorder.startRecording()\r\n *         .then(successCB)\r\n *         .catch(errorCB);\r\n * // Note: You can access all RecordRTC API using \"recorder.recordRTC\" e.g. \r\n * recorder.recordRTC.onStateChanged = function(state) {};\r\n * recorder.recordRTC.setRecordingDuration(5000);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\r\n * @requires {@link RecordRTC}\r\n */\n\n\nfunction RecordRTCPromisesHandler(mediaStream, options) {\n  if (!this) {\n    throw 'Use \"new RecordRTCPromisesHandler()\"';\n  }\n\n  if (typeof mediaStream === 'undefined') {\n    throw 'First argument \"MediaStream\" is required.';\n  }\n\n  var self = this;\n  /**\r\n   * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * let internal = recorder.recordRTC.getInternalRecorder();\r\n   * alert(internal instanceof MediaStreamRecorder);\r\n   * recorder.recordRTC.onStateChanged = function(state) {};\r\n   */\n\n  self.recordRTC = new RecordRTC(mediaStream, options);\n  /**\r\n   * This method records MediaStream.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.startRecording()\r\n   *         .then(successCB)\r\n   *         .catch(errorCB);\r\n   */\n\n  this.startRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.startRecording();\n        resolve();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method stops the recording.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.stopRecording().then(function() {\r\n   *     var blob = recorder.getBlob();\r\n   * }).catch(errorCB);\r\n   */\n\n\n  this.stopRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.stopRecording(function (url) {\n          self.blob = self.recordRTC.getBlob();\n\n          if (!self.blob || !self.blob.size) {\n            reject('Empty blob.', self.blob);\n            return;\n          }\n\n          resolve(url);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.pauseRecording()\r\n   *         .then(successCB)\r\n   *         .catch(errorCB);\r\n   */\n\n\n  this.pauseRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.pauseRecording();\n        resolve();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method resumes the recording.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.resumeRecording()\r\n   *         .then(successCB)\r\n   *         .catch(errorCB);\r\n   */\n\n\n  this.resumeRecording = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.resumeRecording();\n        resolve();\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method returns data-url for the recorded blob.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.stopRecording().then(function() {\r\n   *     recorder.getDataURL().then(function(dataURL) {\r\n   *         window.open(dataURL);\r\n   *     }).catch(errorCB);;\r\n   * }).catch(errorCB);\r\n   */\n\n\n  this.getDataURL = function (callback) {\n    return new Promise(function (resolve, reject) {\n      try {\n        self.recordRTC.getDataURL(function (dataURL) {\n          resolve(dataURL);\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method returns the recorded blob.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.stopRecording().then(function() {\r\n   *     recorder.getBlob().then(function(blob) {})\r\n   * }).catch(errorCB);\r\n   */\n\n\n  this.getBlob = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.getBlob());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method returns the internal recording object.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * let internalRecorder = await recorder.getInternalRecorder();\r\n   * if(internalRecorder instanceof MultiStreamRecorder) {\r\n   *     internalRecorder.addStreams([newAudioStream]);\r\n   *     internalRecorder.resetVideoStreams([screenStream]);\r\n   * }\r\n   * @returns {Object} \r\n   */\n\n\n  this.getInternalRecorder = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.getInternalRecorder());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * await recorder.reset();\r\n   * recorder.startRecording(); // record again\r\n   */\n\n\n  this.reset = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.reset());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * Destroy RecordRTC instance. Clear all recorders and objects.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * recorder.destroy().then(successCB).catch(errorCB);\r\n   */\n\n\n  this.destroy = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.destroy());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * Get recorder's readonly state.\r\n   * @method\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * let state = await recorder.getState();\r\n   * // or\r\n   * recorder.getState().then(state => { console.log(state); })\r\n   * @returns {String} Returns recording state.\r\n   */\n\n\n  this.getState = function () {\n    return new Promise(function (resolve, reject) {\n      try {\n        resolve(self.recordRTC.getState());\n      } catch (e) {\n        reject(e);\n      }\n    });\n  };\n  /**\r\n   * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @example\r\n   * await recorder.stopRecording();\r\n   * let blob = recorder.getBlob(); // or \"recorder.recordRTC.blob\"\r\n   * invokeSaveAsDialog(blob);\r\n   */\n\n\n  this.blob = null;\n  /**\r\n   * RecordRTC version number\r\n   * @property {String} version - Release version number.\r\n   * @memberof RecordRTCPromisesHandler\r\n   * @static\r\n   * @readonly\r\n   * @example\r\n   * alert(recorder.version);\r\n   */\n\n  this.version = '5.6.2';\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\n} // ______________________\n// WebAssemblyRecorder.js\n\n/**\r\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\r\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WebAssemblyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WebAssemblyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}\r\n */\n\n\nfunction WebAssemblyRecorder(stream, config) {\n  // based on: github.com/GoogleChromeLabs/webm-wasm\n  if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\n    // because it fixes readable/writable streams issues\n    console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\n  }\n\n  config = config || {};\n  config.width = config.width || 640;\n  config.height = config.height || 480;\n  config.frameRate = config.frameRate || 30;\n  config.bitrate = config.bitrate || 1200;\n  config.realtime = config.realtime || true;\n\n  function createBufferURL(buffer, type) {\n    return URL.createObjectURL(new Blob([buffer], {\n      type: type || ''\n    }));\n  }\n\n  var finished;\n\n  function cameraStream() {\n    return new ReadableStream({\n      start: function start(controller) {\n        var cvs = document.createElement('canvas');\n        var video = document.createElement('video');\n        var first = true;\n        video.srcObject = stream;\n        video.muted = true;\n        video.height = config.height;\n        video.width = config.width;\n        video.volume = 0;\n\n        video.onplaying = function () {\n          cvs.width = config.width;\n          cvs.height = config.height;\n          var ctx = cvs.getContext('2d');\n          var frameTimeout = 1000 / config.frameRate;\n          var cameraTimer = setInterval(function f() {\n            if (finished) {\n              clearInterval(cameraTimer);\n              controller.close();\n            }\n\n            if (first) {\n              first = false;\n\n              if (config.onVideoProcessStarted) {\n                config.onVideoProcessStarted();\n              }\n            }\n\n            ctx.drawImage(video, 0, 0);\n\n            if (controller._controlledReadableStream.state !== 'closed') {\n              try {\n                controller.enqueue(ctx.getImageData(0, 0, config.width, config.height));\n              } catch (e) {}\n            }\n          }, frameTimeout);\n        };\n\n        video.play();\n      }\n    });\n  }\n\n  var worker;\n\n  function startRecording(stream, buffer) {\n    if (!config.workerPath && !buffer) {\n      finished = false; // is it safe to use @latest ?\n\n      fetch('https://unpkg.com/webm-wasm@latest/dist/webm-worker.js').then(function (r) {\n        r.arrayBuffer().then(function (buffer) {\n          startRecording(stream, buffer);\n        });\n      });\n      return;\n    }\n\n    if (!config.workerPath && buffer instanceof ArrayBuffer) {\n      var blob = new Blob([buffer], {\n        type: 'text/javascript'\n      });\n      config.workerPath = URL.createObjectURL(blob);\n    }\n\n    if (!config.workerPath) {\n      console.error('workerPath parameter is missing.');\n    }\n\n    worker = new Worker(config.workerPath);\n    worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\n    worker.addEventListener('message', function (event) {\n      if (event.data === 'READY') {\n        worker.postMessage({\n          width: config.width,\n          height: config.height,\n          bitrate: config.bitrate || 1200,\n          timebaseDen: config.frameRate || 30,\n          realtime: config.realtime\n        });\n        cameraStream().pipeTo(new WritableStream({\n          write: function write(image) {\n            if (finished) {\n              console.error('Got image, but recorder is finished!');\n              return;\n            }\n\n            worker.postMessage(image.data.buffer, [image.data.buffer]);\n          }\n        }));\n      } else if (!!event.data) {\n        if (!isPaused) {\n          arrayOfBuffers.push(event.data);\n        }\n      }\n    });\n  }\n  /**\r\n   * This method records video.\r\n   * @method\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.record();\r\n   */\n\n\n  this.record = function () {\n    arrayOfBuffers = [];\n    isPaused = false;\n    this.blob = null;\n    startRecording(stream);\n\n    if (typeof config.initCallback === 'function') {\n      config.initCallback();\n    }\n  };\n\n  var isPaused;\n  /**\r\n   * This method pauses the recording process.\r\n   * @method\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.pause();\r\n   */\n\n  this.pause = function () {\n    isPaused = true;\n  };\n  /**\r\n   * This method resumes the recording process.\r\n   * @method\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.resume();\r\n   */\n\n\n  this.resume = function () {\n    isPaused = false;\n  };\n\n  function terminate(callback) {\n    if (!worker) {\n      if (callback) {\n        callback();\n      }\n\n      return;\n    } // Wait for null event data to indicate that the encoding is complete\n\n\n    worker.addEventListener('message', function (event) {\n      if (event.data === null) {\n        worker.terminate();\n        worker = null;\n\n        if (callback) {\n          callback();\n        }\n      }\n    });\n    worker.postMessage(null);\n  }\n\n  var arrayOfBuffers = [];\n  /**\r\n   * This method stops recording video.\r\n   * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n   * @method\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.stop(function(blob) {\r\n   *     video.src = URL.createObjectURL(blob);\r\n   * });\r\n   */\n\n  this.stop = function (callback) {\n    finished = true;\n    var recorder = this;\n    terminate(function () {\n      recorder.blob = new Blob(arrayOfBuffers, {\n        type: 'video/webm'\n      });\n      callback(recorder.blob);\n    });\n  }; // for debugging\n\n\n  this.name = 'WebAssemblyRecorder';\n\n  this.toString = function () {\n    return this.name;\n  };\n  /**\r\n   * This method resets currently recorded data.\r\n   * @method\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.clearRecordedData();\r\n   */\n\n\n  this.clearRecordedData = function () {\n    arrayOfBuffers = [];\n    isPaused = false;\n    this.blob = null; // todo: if recording-ON then STOP it first\n  };\n  /**\r\n   * @property {Blob} blob - The recorded blob object.\r\n   * @memberof WebAssemblyRecorder\r\n   * @example\r\n   * recorder.stop(function(){\r\n   *     var blob = recorder.blob;\r\n   * });\r\n   */\n\n\n  this.blob = null;\n}\n\nif (typeof RecordRTC !== 'undefined') {\n  RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\n}","function _typeof2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\n/*!\n * opus-recorder plugin for videojs-record\n * @version 4.5.0\n * @see https://github.com/collab-project/videojs-record\n * @copyright 2014-2021 Collab\n * @license MIT\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof2(module)) === 'object') module.exports = factory(require(\"video.js\"));else if (typeof define === 'function' && define.amd) define(\"VideojsRecord\", [\"video.js\"], factory);else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof2(exports)) === 'object') exports[\"VideojsRecord\"] = factory(require(\"video.js\"));else root[\"VideojsRecord\"] = root[\"VideojsRecord\"] || {}, root[\"VideojsRecord\"][\"opus-recorder\"] = factory(root[\"videojs\"]);\n})(self, function (__WEBPACK_EXTERNAL_MODULE_video_js__) {\n  return (\n    /******/\n    function () {\n      // webpackBootstrap\n\n      /******/\n      var __webpack_modules__ = {\n        /***/\n        \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersAssertThisInitializedJs(module) {\n          function _assertThisInitialized(self) {\n            if (self === void 0) {\n              throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n            }\n\n            return self;\n          }\n\n          module.exports = _assertThisInitialized;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/classCallCheck.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersClassCallCheckJs(module) {\n          function _classCallCheck(instance, Constructor) {\n            if (!(instance instanceof Constructor)) {\n              throw new TypeError(\"Cannot call a class as a function\");\n            }\n          }\n\n          module.exports = _classCallCheck;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/createClass.js\":\n        /*!************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!\n          \\************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersCreateClassJs(module) {\n          function _defineProperties(target, props) {\n            for (var i = 0; i < props.length; i++) {\n              var descriptor = props[i];\n              descriptor.enumerable = descriptor.enumerable || false;\n              descriptor.configurable = true;\n              if (\"value\" in descriptor) descriptor.writable = true;\n              Object.defineProperty(target, descriptor.key, descriptor);\n            }\n          }\n\n          function _createClass(Constructor, protoProps, staticProps) {\n            if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n            if (staticProps) _defineProperties(Constructor, staticProps);\n            return Constructor;\n          }\n\n          module.exports = _createClass;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersGetPrototypeOfJs(module) {\n          function _getPrototypeOf(o) {\n            module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n              return o.__proto__ || Object.getPrototypeOf(o);\n            };\n            return _getPrototypeOf(o);\n          }\n\n          module.exports = _getPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/inherits.js\":\n        /*!*********************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!\n          \\*********************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInheritsJs(module, __unused_webpack_exports, __webpack_require__) {\n          var setPrototypeOf = __webpack_require__(\n          /*! ./setPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\n          function _inherits(subClass, superClass) {\n            if (typeof superClass !== \"function\" && superClass !== null) {\n              throw new TypeError(\"Super expression must either be null or a function\");\n            }\n\n            subClass.prototype = Object.create(superClass && superClass.prototype, {\n              constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true\n              }\n            });\n            if (superClass) setPrototypeOf(subClass, superClass);\n          }\n\n          module.exports = _inherits;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\":\n        /*!**********************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/interopRequireDefault.js ***!\n          \\**********************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersInteropRequireDefaultJs(module) {\n          function _interopRequireDefault(obj) {\n            return obj && obj.__esModule ? obj : {\n              \"default\": obj\n            };\n          }\n\n          module.exports = _interopRequireDefault;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\":\n        /*!**************************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!\n          \\**************************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersPossibleConstructorReturnJs(module, __unused_webpack_exports, __webpack_require__) {\n          var _typeof = __webpack_require__(\n          /*! ../helpers/typeof */\n          \"./node_modules/@babel/runtime/helpers/typeof.js\");\n\n          var assertThisInitialized = __webpack_require__(\n          /*! ./assertThisInitialized */\n          \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n\n          function _possibleConstructorReturn(self, call) {\n            if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n              return call;\n            }\n\n            return assertThisInitialized(self);\n          }\n\n          module.exports = _possibleConstructorReturn;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\":\n        /*!***************************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!\n          \\***************************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersSetPrototypeOfJs(module) {\n          function _setPrototypeOf(o, p) {\n            module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n              o.__proto__ = p;\n              return o;\n            };\n\n            return _setPrototypeOf(o, p);\n          }\n\n          module.exports = _setPrototypeOf;\n          /***/\n        },\n\n        /***/\n        \"./node_modules/@babel/runtime/helpers/typeof.js\":\n        /*!*******************************************************!*\\\n          !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!\n          \\*******************************************************/\n\n        /***/\n        function node_modulesBabelRuntimeHelpersTypeofJs(module) {\n          function _typeof(obj) {\n            \"@babel/helpers - typeof\";\n\n            if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n              module.exports = _typeof = function _typeof(obj) {\n                return typeof obj;\n              };\n            } else {\n              module.exports = _typeof = function _typeof(obj) {\n                return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n              };\n            }\n\n            return _typeof(obj);\n          }\n\n          module.exports = _typeof;\n          /***/\n        },\n\n        /***/\n        \"./src/js/plugins/opus-recorder-plugin.js\":\n        /*!************************************************!*\\\n          !*** ./src/js/plugins/opus-recorder-plugin.js ***!\n          \\************************************************/\n\n        /***/\n        function srcJsPluginsOpusRecorderPluginJs(module, exports, __webpack_require__) {\n          \"use strict\";\n\n          var _interopRequireDefault = __webpack_require__(\n          /*! @babel/runtime/helpers/interopRequireDefault */\n          \"./node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\n\n          Object.defineProperty(exports, \"__esModule\", {\n            value: true\n          });\n          exports.default = void 0;\n\n          var _classCallCheck2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/classCallCheck */\n          \"./node_modules/@babel/runtime/helpers/classCallCheck.js\"));\n\n          var _createClass2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/createClass */\n          \"./node_modules/@babel/runtime/helpers/createClass.js\"));\n\n          var _inherits2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/inherits */\n          \"./node_modules/@babel/runtime/helpers/inherits.js\"));\n\n          var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/possibleConstructorReturn */\n          \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\"));\n\n          var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__(\n          /*! @babel/runtime/helpers/getPrototypeOf */\n          \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\"));\n\n          var _video = _interopRequireDefault(__webpack_require__(\n          /*! video.js */\n          \"video.js\"));\n\n          function _createSuper(Derived) {\n            var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n            return function _createSuperInternal() {\n              var Super = (0, _getPrototypeOf2.default)(Derived),\n                  result;\n\n              if (hasNativeReflectConstruct) {\n                var NewTarget = (0, _getPrototypeOf2.default)(this).constructor;\n                result = Reflect.construct(Super, arguments, NewTarget);\n              } else {\n                result = Super.apply(this, arguments);\n              }\n\n              return (0, _possibleConstructorReturn2.default)(this, result);\n            };\n          }\n\n          function _isNativeReflectConstruct() {\n            if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n            if (Reflect.construct.sham) return false;\n            if (typeof Proxy === \"function\") return true;\n\n            try {\n              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n              return true;\n            } catch (e) {\n              return false;\n            }\n          }\n\n          var RecordEngine = _video.default.getComponent('RecordEngine');\n\n          var OpusRecorderEngine = function (_RecordEngine) {\n            (0, _inherits2.default)(OpusRecorderEngine, _RecordEngine);\n\n            var _super = _createSuper(OpusRecorderEngine);\n\n            function OpusRecorderEngine(player, options) {\n              var _this;\n\n              (0, _classCallCheck2.default)(this, OpusRecorderEngine);\n              _this = _super.call(this, player, options);\n              _this.debug = false;\n              _this.audioChannels = 1;\n              _this.bufferSize = 4096;\n              _this.sampleRate = 48000;\n              _this.audioWorkerURL = 'encoderWorker.min.js';\n              _this.audioType = 'audio/ogg';\n              _this.pluginLibraryOptions = {};\n              return _this;\n            }\n\n            (0, _createClass2.default)(OpusRecorderEngine, [{\n              key: \"setup\",\n              value: function setup(stream, mediaType, debug) {\n                this.inputStream = stream;\n                this.mediaType = mediaType;\n                this.debug = debug;\n                var AudioContext = window.AudioContext || window.webkitAudioContext;\n                this.audioContext = new AudioContext();\n                this.audioSourceNode = this.audioContext.createMediaStreamSource(this.inputStream);\n                this.config = {\n                  numberOfChannels: this.audioChannels,\n                  bufferLength: this.bufferSize,\n                  encoderSampleRate: this.sampleRate,\n                  encoderPath: this.audioWorkerURL,\n                  sourceNode: this.audioSourceNode\n                };\n                this.config = Object.assign(this.config, this.pluginLibraryOptions);\n                this.engine = new Recorder(this.config);\n                this.engine.ondataavailable = this.onRecordingAvailable.bind(this);\n              }\n            }, {\n              key: \"start\",\n              value: function start() {\n                var _this2 = this;\n\n                this.engine.start().then(function () {}).catch(function (err) {\n                  _this2.player().trigger('error', err);\n                });\n              }\n            }, {\n              key: \"stop\",\n              value: function stop() {\n                this.engine.stop();\n              }\n            }, {\n              key: \"pause\",\n              value: function pause() {\n                this.engine.pause();\n              }\n            }, {\n              key: \"resume\",\n              value: function resume() {\n                this.engine.resume();\n              }\n            }, {\n              key: \"onRecordingAvailable\",\n              value: function onRecordingAvailable(data) {\n                var blob = new Blob([data], {\n                  type: this.audioType\n                });\n                this.onStopRecording(blob);\n              }\n            }]);\n            return OpusRecorderEngine;\n          }(RecordEngine);\n\n          _video.default.OpusRecorderEngine = OpusRecorderEngine;\n          var _default = OpusRecorderEngine;\n          exports.default = _default;\n          module.exports = exports.default;\n          /***/\n        },\n\n        /***/\n        \"video.js\":\n        /*!*************************************************************************************************!*\\\n          !*** external {\"commonjs\":\"video.js\",\"commonjs2\":\"video.js\",\"amd\":\"video.js\",\"root\":\"videojs\"} ***!\n          \\*************************************************************************************************/\n\n        /***/\n        function videoJs(module) {\n          \"use strict\";\n\n          module.exports = __WEBPACK_EXTERNAL_MODULE_video_js__;\n          /***/\n        }\n        /******/\n\n      };\n      /************************************************************************/\n\n      /******/\n      // The module cache\n\n      /******/\n\n      var __webpack_module_cache__ = {};\n      /******/\n\n      /******/\n      // The require function\n\n      /******/\n\n      function __webpack_require__(moduleId) {\n        /******/\n        // Check if module is in cache\n\n        /******/\n        var cachedModule = __webpack_module_cache__[moduleId];\n        /******/\n\n        if (cachedModule !== undefined) {\n          /******/\n          return cachedModule.exports;\n          /******/\n        }\n        /******/\n        // Create a new module (and put it into the cache)\n\n        /******/\n\n\n        var module = __webpack_module_cache__[moduleId] = {\n          /******/\n          // no module.id needed\n\n          /******/\n          // no module.loaded needed\n\n          /******/\n          exports: {}\n          /******/\n\n        };\n        /******/\n\n        /******/\n        // Execute the module function\n\n        /******/\n\n        __webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n        /******/\n\n        /******/\n        // Return the exports of the module\n\n        /******/\n\n\n        return module.exports;\n        /******/\n      }\n      /******/\n\n      /************************************************************************/\n\n      /******/\n\n      /******/\n      // startup\n\n      /******/\n      // Load entry module and return exports\n\n      /******/\n      // This entry module is referenced by other modules so it can't be inlined\n\n      /******/\n\n\n      var __webpack_exports__ = __webpack_require__(\"./src/js/plugins/opus-recorder-plugin.js\");\n      /******/\n\n      /******/\n\n\n      return __webpack_exports__;\n      /******/\n    }()\n  );\n});","import Vue from 'vue';\nimport { sanitize } from 'lettersanitizer';\nvar script = Vue.extend({\n  name: 'Letter',\n  props: {\n    className: String,\n    html: String,\n    text: String,\n    useIframe: Boolean,\n    iframeTitle: String,\n    rewriteExternalLinks: Function,\n    rewriteExternalResources: Function,\n    allowedSchemas: Array,\n    preserveCssPriority: Boolean\n  },\n  computed: {\n    sanitizerOptions: function sanitizerOptions() {\n      return {\n        rewriteExternalResources: this.rewriteExternalResources,\n        rewriteExternalLinks: this.rewriteExternalLinks,\n        allowedSchemas: this.allowedSchemas,\n        preserveCssPriority: this.preserveCssPriority\n      };\n    },\n    sanitizedHtml: function sanitizedHtml() {\n      return sanitize(this.html, this.text, this.sanitizerOptions);\n    },\n    iframeSrc: function iframeSrc() {\n      return 'data:text/html;charset=utf-8,' + encodeURIComponent(this.sanitizedHtml);\n    }\n  }\n});\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function (context) {\n      style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n/* script */\n\n\nvar __vue_script__ = script;\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return !_vm.useIframe ? _c(\"div\", {\n    class: [_vm.className],\n    domProps: {\n      innerHTML: _vm._s(_vm.sanitizedHtml)\n    }\n  }) : _vm.useIframe ? _c(\"div\", {\n    class: [_vm.className]\n  }, [_c(\"iframe\", {\n    attrs: {\n      src: _vm.iframeSrc,\n      title: _vm.iframeTitle\n    }\n  })]) : _vm._e();\n};\n\nvar __vue_staticRenderFns__ = [];\n__vue_render__._withStripped = true;\n/* style */\n\nvar __vue_inject_styles__ = undefined;\n/* scoped */\n\nvar __vue_scope_id__ = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = false;\n/* style inject */\n\n/* style inject SSR */\n\n/* style inject shadow dom */\n\nvar __vue_component__ = /*#__PURE__*/normalizeComponent({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, undefined, undefined, undefined); // Declare install function executed by Vue.use()\n\n\nfunction install(Vue) {\n  if (install.installed) {\n    return;\n  }\n\n  install.installed = true;\n  Vue.component('Letter', __vue_component__);\n} // Create module definition for Vue.use()\n\n\nvar plugin = {\n  install: install\n}; // Auto-install when vue is found (eg. in browser via <script> tag)\n\nvar GlobalVue = null;\n\nif (typeof window !== 'undefined') {\n  GlobalVue = window.Vue;\n} else if (typeof global !== 'undefined') {\n  GlobalVue = global.Vue;\n}\n\nif (GlobalVue) {\n  GlobalVue.use(plugin);\n}\n\nexport default __vue_component__;\nexport { install };","import toInteger from \"../_lib/toInteger/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_HOUR = 3600000;\nvar MILLISECONDS_IN_MINUTE = 60000;\nvar DEFAULT_ADDITIONAL_DIGITS = 2;\nvar patterns = {\n  dateTimeDelimiter: /[T ]/,\n  timeZoneDelimiter: /[Z ]/i,\n  timezone: /([Z+-].*)$/\n};\nvar dateRegex = /^-?(?:(\\d{3})|(\\d{2})(?:-?(\\d{2}))?|W(\\d{2})(?:-?(\\d{1}))?|)$/;\nvar timeRegex = /^(\\d{2}(?:[.,]\\d*)?)(?::?(\\d{2}(?:[.,]\\d*)?))?(?::?(\\d{2}(?:[.,]\\d*)?))?$/;\nvar timezoneRegex = /^([+-])(\\d{2})(?::?(\\d{2}))?$/;\n/**\n * @name parseISO\n * @category Common Helpers\n * @summary Parse ISO string\n *\n * @description\n * Parse the given string in ISO 8601 format and return an instance of Date.\n *\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If the argument isn't a string, the function cannot parse the string or\n * the values are invalid, it returns Invalid Date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The previous `parse` implementation was renamed to `parseISO`.\n *\n *   ```javascript\n *   // Before v2.0.0\n *   parse('2016-01-01')\n *\n *   // v2.0.0 onward\n *   parseISO('2016-01-01')\n *   ```\n *\n * - `parseISO` now validates separate date and time values in ISO-8601 strings\n *   and returns `Invalid Date` if the date is invalid.\n *\n *   ```javascript\n *   parseISO('2018-13-32')\n *   //=> Invalid Date\n *   ```\n *\n * - `parseISO` now doesn't fall back to `new Date` constructor\n *   if it fails to parse a string argument. Instead, it returns `Invalid Date`.\n *\n * @param {String} argument - the value to convert\n * @param {Object} [options] - an object with options.\n * @param {0|1|2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parseISO('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert string '+02014101' to date,\n * // if the additional number of digits in the extended year format is 1:\n * var result = parseISO('+02014101', { additionalDigits: 1 })\n * //=> Fri Apr 11 2014 00:00:00\n */\n\nexport default function parseISO(argument, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var additionalDigits = options.additionalDigits == null ? DEFAULT_ADDITIONAL_DIGITS : toInteger(options.additionalDigits);\n\n  if (additionalDigits !== 2 && additionalDigits !== 1 && additionalDigits !== 0) {\n    throw new RangeError('additionalDigits must be 0, 1 or 2');\n  }\n\n  if (!(typeof argument === 'string' || Object.prototype.toString.call(argument) === '[object String]')) {\n    return new Date(NaN);\n  }\n\n  var dateStrings = splitDateString(argument);\n  var date;\n\n  if (dateStrings.date) {\n    var parseYearResult = parseYear(dateStrings.date, additionalDigits);\n    date = parseDate(parseYearResult.restDateString, parseYearResult.year);\n  }\n\n  if (isNaN(date) || !date) {\n    return new Date(NaN);\n  }\n\n  var timestamp = date.getTime();\n  var time = 0;\n  var offset;\n\n  if (dateStrings.time) {\n    time = parseTime(dateStrings.time);\n\n    if (isNaN(time) || time === null) {\n      return new Date(NaN);\n    }\n  }\n\n  if (dateStrings.timezone) {\n    offset = parseTimezone(dateStrings.timezone);\n\n    if (isNaN(offset)) {\n      return new Date(NaN);\n    }\n  } else {\n    var dirtyDate = new Date(timestamp + time); // js parsed string assuming it's in UTC timezone\n    // but we need it to be parsed in our timezone\n    // so we use utc values to build date in our timezone.\n    // Year values from 0 to 99 map to the years 1900 to 1999\n    // so set year explicitly with setFullYear.\n\n    var result = new Date(0);\n    result.setFullYear(dirtyDate.getUTCFullYear(), dirtyDate.getUTCMonth(), dirtyDate.getUTCDate());\n    result.setHours(dirtyDate.getUTCHours(), dirtyDate.getUTCMinutes(), dirtyDate.getUTCSeconds(), dirtyDate.getUTCMilliseconds());\n    return result;\n  }\n\n  return new Date(timestamp + time + offset);\n}\n\nfunction splitDateString(dateString) {\n  var dateStrings = {};\n  var array = dateString.split(patterns.dateTimeDelimiter);\n  var timeString; // The regex match should only return at maximum two array elements.\n  // [date], [time], or [date, time].\n\n  if (array.length > 2) {\n    return dateStrings;\n  }\n\n  if (/:/.test(array[0])) {\n    dateStrings.date = null;\n    timeString = array[0];\n  } else {\n    dateStrings.date = array[0];\n    timeString = array[1];\n\n    if (patterns.timeZoneDelimiter.test(dateStrings.date)) {\n      dateStrings.date = dateString.split(patterns.timeZoneDelimiter)[0];\n      timeString = dateString.substr(dateStrings.date.length, dateString.length);\n    }\n  }\n\n  if (timeString) {\n    var token = patterns.timezone.exec(timeString);\n\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '');\n      dateStrings.timezone = token[1];\n    } else {\n      dateStrings.time = timeString;\n    }\n  }\n\n  return dateStrings;\n}\n\nfunction parseYear(dateString, additionalDigits) {\n  var regex = new RegExp('^(?:(\\\\d{4}|[+-]\\\\d{' + (4 + additionalDigits) + '})|(\\\\d{2}|[+-]\\\\d{' + (2 + additionalDigits) + '})$)');\n  var captures = dateString.match(regex); // Invalid ISO-formatted year\n\n  if (!captures) return {\n    year: null\n  };\n  var year = captures[1] && parseInt(captures[1]);\n  var century = captures[2] && parseInt(captures[2]);\n  return {\n    year: century == null ? year : century * 100,\n    restDateString: dateString.slice((captures[1] || captures[2]).length)\n  };\n}\n\nfunction parseDate(dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) return null;\n  var captures = dateString.match(dateRegex); // Invalid ISO-formatted string\n\n  if (!captures) return null;\n  var isWeekDate = !!captures[4];\n  var dayOfYear = parseDateUnit(captures[1]);\n  var month = parseDateUnit(captures[2]) - 1;\n  var day = parseDateUnit(captures[3]);\n  var week = parseDateUnit(captures[4]);\n  var dayOfWeek = parseDateUnit(captures[5]) - 1;\n\n  if (isWeekDate) {\n    if (!validateWeekDate(year, week, dayOfWeek)) {\n      return new Date(NaN);\n    }\n\n    return dayOfISOWeekYear(year, week, dayOfWeek);\n  } else {\n    var date = new Date(0);\n\n    if (!validateDate(year, month, day) || !validateDayOfYearDate(year, dayOfYear)) {\n      return new Date(NaN);\n    }\n\n    date.setUTCFullYear(year, month, Math.max(dayOfYear, day));\n    return date;\n  }\n}\n\nfunction parseDateUnit(value) {\n  return value ? parseInt(value) : 1;\n}\n\nfunction parseTime(timeString) {\n  var captures = timeString.match(timeRegex);\n  if (!captures) return null; // Invalid ISO-formatted time\n\n  var hours = parseTimeUnit(captures[1]);\n  var minutes = parseTimeUnit(captures[2]);\n  var seconds = parseTimeUnit(captures[3]);\n\n  if (!validateTime(hours, minutes, seconds)) {\n    return NaN;\n  }\n\n  return hours * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE + seconds * 1000;\n}\n\nfunction parseTimeUnit(value) {\n  return value && parseFloat(value.replace(',', '.')) || 0;\n}\n\nfunction parseTimezone(timezoneString) {\n  if (timezoneString === 'Z') return 0;\n  var captures = timezoneString.match(timezoneRegex);\n  if (!captures) return 0;\n  var sign = captures[1] === '+' ? -1 : 1;\n  var hours = parseInt(captures[2]);\n  var minutes = captures[3] && parseInt(captures[3]) || 0;\n\n  if (!validateTimezone(hours, minutes)) {\n    return NaN;\n  }\n\n  return sign * (hours * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE);\n}\n\nfunction dayOfISOWeekYear(isoWeekYear, week, day) {\n  var date = new Date(0);\n  date.setUTCFullYear(isoWeekYear, 0, 4);\n  var fourthOfJanuaryDay = date.getUTCDay() || 7;\n  var diff = (week - 1) * 7 + day + 1 - fourthOfJanuaryDay;\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date;\n} // Validation functions\n// February is null to handle the leap year (using ||)\n\n\nvar daysInMonths = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nfunction isLeapYearIndex(year) {\n  return year % 400 === 0 || year % 4 === 0 && year % 100;\n}\n\nfunction validateDate(year, month, date) {\n  return month >= 0 && month <= 11 && date >= 1 && date <= (daysInMonths[month] || (isLeapYearIndex(year) ? 29 : 28));\n}\n\nfunction validateDayOfYearDate(year, dayOfYear) {\n  return dayOfYear >= 1 && dayOfYear <= (isLeapYearIndex(year) ? 366 : 365);\n}\n\nfunction validateWeekDate(_year, week, day) {\n  return week >= 1 && week <= 53 && day >= 0 && day <= 6;\n}\n\nfunction validateTime(hours, minutes, seconds) {\n  if (hours === 24) {\n    return minutes === 0 && seconds === 0;\n  }\n\n  return seconds >= 0 && seconds < 60 && minutes >= 0 && minutes < 60 && hours >= 0 && hours < 25;\n}\n\nfunction validateTimezone(_hours, minutes) {\n  return minutes >= 0 && minutes <= 59;\n}","import toDate from \"../toDate/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @param {Object} [options] - an object with options.\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @returns {Date} the start of a week\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\n\nexport default function startOfWeek(dirtyDate, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn); // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');\n  }\n\n  var date = toDate(dirtyDate);\n  var day = date.getDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  date.setDate(date.getDate() - diff);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addDays from \"../addDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of week to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of weeks to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the weeks added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\n\nexport default function addWeeks(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  var days = amount * 7;\n  return addDays(dirtyDate, days);\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isMonday\n * @category Weekday Helpers\n * @summary Is the given date Monday?\n *\n * @description\n * Is the given date Monday?\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to check\n * @returns {Boolean} the date is Monday\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Is 22 September 2014 Monday?\n * var result = isMonday(new Date(2014, 8, 22))\n * //=> true\n */\n\nexport default function isMonday(date) {\n  requiredArgs(1, arguments);\n  return toDate(date).getDay() === 1;\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a month\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\n\nexport default function startOfMonth(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name setSeconds\n * @category Second Helpers\n * @summary Set the seconds to the given date.\n *\n * @description\n * Set the seconds to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} seconds - the seconds of the new date\n * @returns {Date} the new date with the seconds set\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Set 45 seconds to 1 September 2014 11:30:40:\n * const result = setSeconds(new Date(2014, 8, 1, 11, 30, 40), 45)\n * //=> Mon Sep 01 2014 11:30:45\n */\n\nexport default function setSeconds(dirtyDate, dirtySeconds) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var seconds = toInteger(dirtySeconds);\n  date.setSeconds(seconds);\n  return date;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name setMinutes\n * @category Minute Helpers\n * @summary Set the minutes to the given date.\n *\n * @description\n * Set the minutes to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} minutes - the minutes of the new date\n * @returns {Date} the new date with the minutes set\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Set 45 minutes to 1 September 2014 11:30:40:\n * var result = setMinutes(new Date(2014, 8, 1, 11, 30, 40), 45)\n * //=> Mon Sep 01 2014 11:45:40\n */\n\nexport default function setMinutes(dirtyDate, dirtyMinutes) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var minutes = toInteger(dirtyMinutes);\n  date.setMinutes(minutes);\n  return date;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name setHours\n * @category Hour Helpers\n * @summary Set the hours to the given date.\n *\n * @description\n * Set the hours to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} hours - the hours of the new date\n * @returns {Date} the new date with the hours set\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Set 4 hours to 1 September 2014 11:30:00:\n * var result = setHours(new Date(2014, 8, 1, 11, 30), 4)\n * //=> Mon Sep 01 2014 04:30:00\n */\n\nexport default function setHours(dirtyDate, dirtyHours) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var hours = toInteger(dirtyHours);\n  date.setHours(hours);\n  return date;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === _typeof(searchInput)) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  } // Numbers\n\n\n  if ('number' === typeof searchInput) return names[searchInput]; // Everything else (cast to string)\n\n  var search = String(searchInput); // check codes\n\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // check aliases\n\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey; // weird character?\n\n  if (search.length === 1) return search.charCodeAt(0);\n  return undefined;\n}\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\n\n\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === _typeof(event)) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n\n    if (keyCode === null || keyCode === undefined) {\n      return false;\n    }\n\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      } // check aliases\n\n\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n\n      if (foundNamedKey) {\n        return foundNamedKey === keyCode;\n      }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n}; // Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '⇧': 16,\n  '⌥': 18,\n  '⌃': 17,\n  '⌘': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n/*!\n * Programatically add the following\n */\n// lower case chars\n\nfor (i = 97; i < 123; i++) {\n  codes[String.fromCharCode(i)] = i - 32;\n} // numbers\n\n\nfor (var i = 48; i < 58; i++) {\n  codes[i - 48] = i;\n} // function keys\n\n\nfor (i = 1; i < 13; i++) {\n  codes['f' + i] = i + 111;\n} // numpad keys\n\n\nfor (i = 0; i < 10; i++) {\n  codes['numpad ' + i] = i + 96;\n}\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n// Create reverse mapping\n\nfor (i in codes) {\n  names[codes[i]] = i;\n} // Add aliases\n\n\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}","module.exports = SafeParseTuple;\n\nfunction SafeParseTuple(obj, reviver) {\n  var json;\n  var error = null;\n\n  try {\n    json = JSON.parse(obj, reviver);\n  } catch (err) {\n    error = err;\n  }\n\n  return [error, json];\n}","\"use strict\";\n\nvar window = require(\"global/window\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar isFunction = require('is-function');\n\ncreateXHR.httpHandler = require('./http-handler.js');\n/**\n * @license\n * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>\n * Copyright (c) 2014 David Björklund\n * Available under the MIT license\n * <https://github.com/kesla/parse-headers/blob/master/LICENCE>\n */\n\nvar parseHeaders = function parseHeaders(headers) {\n  var result = {};\n\n  if (!headers) {\n    return result;\n  }\n\n  headers.trim().split('\\n').forEach(function (row) {\n    var index = row.indexOf(':');\n    var key = row.slice(0, index).trim().toLowerCase();\n    var value = row.slice(index + 1).trim();\n\n    if (typeof result[key] === 'undefined') {\n      result[key] = value;\n    } else if (Array.isArray(result[key])) {\n      result[key].push(value);\n    } else {\n      result[key] = [result[key], value];\n    }\n  });\n  return result;\n};\n\nmodule.exports = createXHR; // Allow use of default import syntax in TypeScript\n\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop;\ncreateXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window.XDomainRequest;\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function (method) {\n  createXHR[method === \"delete\" ? \"del\" : method] = function (uri, options, callback) {\n    options = initParams(uri, options, callback);\n    options.method = method.toUpperCase();\n    return _createXHR(options);\n  };\n});\n\nfunction forEachArray(array, iterator) {\n  for (var i = 0; i < array.length; i++) {\n    iterator(array[i]);\n  }\n}\n\nfunction isEmpty(obj) {\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) return false;\n  }\n\n  return true;\n}\n\nfunction initParams(uri, options, callback) {\n  var params = uri;\n\n  if (isFunction(options)) {\n    callback = options;\n\n    if (typeof uri === \"string\") {\n      params = {\n        uri: uri\n      };\n    }\n  } else {\n    params = _extends({}, options, {\n      uri: uri\n    });\n  }\n\n  params.callback = callback;\n  return params;\n}\n\nfunction createXHR(uri, options, callback) {\n  options = initParams(uri, options, callback);\n  return _createXHR(options);\n}\n\nfunction _createXHR(options) {\n  if (typeof options.callback === \"undefined\") {\n    throw new Error(\"callback argument missing\");\n  }\n\n  var called = false;\n\n  var callback = function cbOnce(err, response, body) {\n    if (!called) {\n      called = true;\n      options.callback(err, response, body);\n    }\n  };\n\n  function readystatechange() {\n    if (xhr.readyState === 4) {\n      setTimeout(loadFunc, 0);\n    }\n  }\n\n  function getBody() {\n    // Chrome with requestType=blob throws errors arround when even testing access to responseText\n    var body = undefined;\n\n    if (xhr.response) {\n      body = xhr.response;\n    } else {\n      body = xhr.responseText || getXml(xhr);\n    }\n\n    if (isJson) {\n      try {\n        body = JSON.parse(body);\n      } catch (e) {}\n    }\n\n    return body;\n  }\n\n  function errorFunc(evt) {\n    clearTimeout(timeoutTimer);\n\n    if (!(evt instanceof Error)) {\n      evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n    }\n\n    evt.statusCode = 0;\n    return callback(evt, failureResponse);\n  } // will load the data & process the response in a special response object\n\n\n  function loadFunc() {\n    if (aborted) return;\n    var status;\n    clearTimeout(timeoutTimer);\n\n    if (options.useXDR && xhr.status === undefined) {\n      //IE8 CORS GET successful response doesn't have a status field, but body is fine\n      status = 200;\n    } else {\n      status = xhr.status === 1223 ? 204 : xhr.status;\n    }\n\n    var response = failureResponse;\n    var err = null;\n\n    if (status !== 0) {\n      response = {\n        body: getBody(),\n        statusCode: status,\n        method: method,\n        headers: {},\n        url: uri,\n        rawRequest: xhr\n      };\n\n      if (xhr.getAllResponseHeaders) {\n        //remember xhr can in fact be XDR for CORS in IE\n        response.headers = parseHeaders(xhr.getAllResponseHeaders());\n      }\n    } else {\n      err = new Error(\"Internal XMLHttpRequest Error\");\n    }\n\n    return callback(err, response, response.body);\n  }\n\n  var xhr = options.xhr || null;\n\n  if (!xhr) {\n    if (options.cors || options.useXDR) {\n      xhr = new createXHR.XDomainRequest();\n    } else {\n      xhr = new createXHR.XMLHttpRequest();\n    }\n  }\n\n  var key;\n  var aborted;\n  var uri = xhr.url = options.uri || options.url;\n  var method = xhr.method = options.method || \"GET\";\n  var body = options.body || options.data;\n  var headers = xhr.headers = options.headers || {};\n  var sync = !!options.sync;\n  var isJson = false;\n  var timeoutTimer;\n  var failureResponse = {\n    body: undefined,\n    headers: {},\n    statusCode: 0,\n    method: method,\n    url: uri,\n    rawRequest: xhr\n  };\n\n  if (\"json\" in options && options.json !== false) {\n    isJson = true;\n    headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n    if (method !== \"GET\" && method !== \"HEAD\") {\n      headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\"); //Don't override existing accept header declared by user\n\n      body = JSON.stringify(options.json === true ? body : options.json);\n    }\n  }\n\n  xhr.onreadystatechange = readystatechange;\n  xhr.onload = loadFunc;\n  xhr.onerror = errorFunc; // IE9 must have onprogress be set to a unique function.\n\n  xhr.onprogress = function () {// IE must die\n  };\n\n  xhr.onabort = function () {\n    aborted = true;\n  };\n\n  xhr.ontimeout = errorFunc;\n  xhr.open(method, uri, !sync, options.username, options.password); //has to be after open\n\n  if (!sync) {\n    xhr.withCredentials = !!options.withCredentials;\n  } // Cannot set timeout with sync request\n  // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n  // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n\n\n  if (!sync && options.timeout > 0) {\n    timeoutTimer = setTimeout(function () {\n      if (aborted) return;\n      aborted = true; //IE9 may still call readystatechange\n\n      xhr.abort(\"timeout\");\n      var e = new Error(\"XMLHttpRequest timeout\");\n      e.code = \"ETIMEDOUT\";\n      errorFunc(e);\n    }, options.timeout);\n  }\n\n  if (xhr.setRequestHeader) {\n    for (key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  } else if (options.headers && !isEmpty(options.headers)) {\n    throw new Error(\"Headers cannot be set on an XDomainRequest object\");\n  }\n\n  if (\"responseType\" in options) {\n    xhr.responseType = options.responseType;\n  }\n\n  if (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n    options.beforeSend(xhr);\n  } // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n  // XMLHttpRequest spec says to pass null as body to indicate no body\n  // See https://github.com/naugtur/xhr/issues/100.\n\n\n  xhr.send(body || null);\n  return xhr;\n}\n\nfunction getXml(xhr) {\n  // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n  // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n  try {\n    if (xhr.responseType === \"document\") {\n      return xhr.responseXML;\n    }\n\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\";\n\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n      return xhr.responseXML;\n    }\n  } catch (e) {}\n\n  return null;\n}\n\nfunction noop() {}","module.exports = isFunction;\nvar toString = Object.prototype.toString;\n\nfunction isFunction(fn) {\n  if (!fn) {\n    return false;\n  }\n\n  var string = toString.call(fn);\n  return string === '[object Function]' || typeof fn === 'function' && string !== '[object RegExp]' || typeof window !== 'undefined' && ( // IE8 and below\n  fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n}\n\n;","\"use strict\";\n\nvar window = require('global/window');\n\nvar httpResponseHandler = function httpResponseHandler(callback, decodeResponseBody) {\n  if (decodeResponseBody === void 0) {\n    decodeResponseBody = false;\n  }\n\n  return function (err, response, responseBody) {\n    // if the XHR failed, return that error\n    if (err) {\n      callback(err);\n      return;\n    } // if the HTTP status code is 4xx or 5xx, the request also failed\n\n\n    if (response.statusCode >= 400 && response.statusCode <= 599) {\n      var cause = responseBody;\n\n      if (decodeResponseBody) {\n        if (window.TextDecoder) {\n          var charset = getCharset(response.headers && response.headers['content-type']);\n\n          try {\n            cause = new TextDecoder(charset).decode(responseBody);\n          } catch (e) {}\n        } else {\n          cause = String.fromCharCode.apply(null, new Uint8Array(responseBody));\n        }\n      }\n\n      callback({\n        cause: cause\n      });\n      return;\n    } // otherwise, request succeeded\n\n\n    callback(null, responseBody);\n  };\n};\n\nfunction getCharset(contentTypeHeader) {\n  if (contentTypeHeader === void 0) {\n    contentTypeHeader = '';\n  }\n\n  return contentTypeHeader.toLowerCase().split(';').reduce(function (charset, contentType) {\n    var _contentType$split = contentType.split('='),\n        type = _contentType$split[0],\n        value = _contentType$split[1];\n\n    if (type.trim() === 'charset') {\n      return value.trim();\n    }\n\n    return charset;\n  }, 'utf-8');\n}\n\nmodule.exports = httpResponseHandler;","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\nvar window = require('global/window');\n\nvar vttjs = module.exports = {\n  WebVTT: require(\"./vtt.js\"),\n  VTTCue: require(\"./vttcue.js\"),\n  VTTRegion: require(\"./vttregion.js\")\n};\nwindow.vttjs = vttjs;\nwindow.WebVTT = vttjs.WebVTT;\nvar cueShim = vttjs.VTTCue;\nvar regionShim = vttjs.VTTRegion;\nvar nativeVTTCue = window.VTTCue;\nvar nativeVTTRegion = window.VTTRegion;\n\nvttjs.shim = function () {\n  window.VTTCue = cueShim;\n  window.VTTRegion = regionShim;\n};\n\nvttjs.restore = function () {\n  window.VTTCue = nativeVTTCue;\n  window.VTTRegion = nativeVTTRegion;\n};\n\nif (!window.VTTCue) {\n  vttjs.shim();\n}","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\nvar document = require('global/document');\n\nvar _objCreate = Object.create || function () {\n  function F() {}\n\n  return function (o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n\n    F.prototype = o;\n    return new F();\n  };\n}(); // Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\n\n\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\n\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError; // ParsingError metadata for acceptable ParsingErrors.\n\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n}; // Try to parse input as a time stamp.\n\nfunction parseTimeStamp(input) {\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{1,2})(:\\d{1,2})?\\.(\\d{3})/);\n\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0, m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n} // A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\n\n\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function set(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function get(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function has(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function alt(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function integer(k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function percent(k, v) {\n    var m;\n\n    if (m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n      v = parseFloat(v);\n\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n\n    return false;\n  }\n}; // Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\n\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n\n    var kv = groups[i].split(keyValueDelim);\n\n    if (kv.length !== 2) {\n      continue;\n    }\n\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input; // 4.1 WebVTT timestamp\n\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed timestamp: \" + oInput);\n    } // Remove time stamp from input.\n\n\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  } // 4.4.2 WebVTT cue settings\n\n\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n    parseOptions(input, function (k, v) {\n      switch (k) {\n        case \"region\":\n          // Find the last region we parsed with the same region id.\n          for (var i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n\n          break;\n\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n\n        case \"line\":\n          var vals = v.split(\",\"),\n              vals0 = vals[0];\n          settings.integer(k, vals0);\n          settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n          settings.alt(k, vals0, [\"auto\"]);\n\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n          }\n\n          break;\n\n        case \"size\":\n          settings.percent(k, v);\n          break;\n\n        case \"align\":\n          settings.alt(k, v, [\"start\", \"center\", \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/); // Apply default values for any missing fields.\n\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n\n    try {\n      cue.line = settings.get(\"line\", \"auto\");\n    } catch (e) {}\n\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100); // Safari still uses the old middle value and won't accept center\n\n    try {\n      cue.align = settings.get(\"align\", \"center\");\n    } catch (e) {\n      cue.align = settings.get(\"align\", \"middle\");\n    }\n\n    try {\n      cue.position = settings.get(\"position\", \"auto\");\n    } catch (e) {\n      cue.position = settings.get(\"position\", {\n        start: 0,\n        left: 0,\n        center: 50,\n        middle: 50,\n        end: 100,\n        right: 100\n      }, cue.align);\n    }\n\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      center: \"center\",\n      middle: \"center\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  } // 4.1 WebVTT cue timings.\n\n\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp(); // (1) collect cue start time\n\n  skipWhitespace();\n\n  if (input.substr(0, 3) !== \"-->\") {\n    // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp, \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp(); // (5) collect cue end time\n  // 4.1 WebVTT cue settings list.\n\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n} // When evaluating this file as part of a Webpack bundle for server\n// side rendering, `document` is an empty object.\n\n\nvar TEXTAREA_ELEMENT = document.createElement && document.createElement(\"textarea\");\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n}; // 5.1 default text color\n// 5.2 default text background color is equivalent to text color with bg_ prefix\n\nvar DEFAULT_COLOR_CLASS = {\n  white: 'rgba(255,255,255,1)',\n  lime: 'rgba(0,255,0,1)',\n  cyan: 'rgba(0,255,255,1)',\n  red: 'rgba(255,0,0,1)',\n  yellow: 'rgba(255,255,0,1)',\n  magenta: 'rgba(255,0,255,1)',\n  blue: 'rgba(0,0,255,1)',\n  black: 'rgba(0,0,0,1)'\n};\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n}; // Parse content into a document fragment.\n\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    } // Consume 'n' characters from the input.\n\n\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]*>?)?/); // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  function unescape(s) {\n    TEXTAREA_ELEMENT.innerHTML = s;\n    s = TEXTAREA_ELEMENT.textContent;\n    TEXTAREA_ELEMENT.textContent = \"\";\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current.localName;\n  } // Create an element for this tag.\n\n\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n\n    if (!tagName) {\n      return null;\n    }\n\n    var element = window.document.createElement(tagName);\n    var name = TAG_ANNOTATION[type];\n\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        } // Otherwise just ignore the end tag.\n\n\n        continue;\n      }\n\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node;\n\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/); // If we can't parse the tag, skip to the next tag.\n\n      if (!m) {\n        continue;\n      } // Try to construct an element, and ignore the tag if we couldn't.\n\n\n      node = createElement(m[1], m[3]);\n\n      if (!node) {\n        continue;\n      } // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n\n\n      if (!shouldAdd(current, node)) {\n        continue;\n      } // Set the class list (as a list of classes, separated by space).\n\n\n      if (m[2]) {\n        var classes = m[2].split('.');\n        classes.forEach(function (cl) {\n          var bgColor = /^bg_/.test(cl); // slice out `bg_` if it's a background color\n\n          var colorName = bgColor ? cl.slice(3) : cl;\n\n          if (DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)) {\n            var propName = bgColor ? 'background-color' : 'color';\n            var propValue = DEFAULT_COLOR_CLASS[colorName];\n            node.style[propName] = propValue;\n          }\n        });\n        node.className = classes.join(' ');\n      } // Append the node to the current node, and enter the scope of the new\n      // node.\n\n\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    } // Text nodes are leaf nodes.\n\n\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n} // This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\n\n\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6], [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d], [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6], [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5], [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815], [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858], [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f], [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c], [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1], [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc], [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808], [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855], [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f], [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13], [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58], [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72], [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f], [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32], [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42], [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f], [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59], [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62], [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77], [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b], [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n\n      return text;\n    }\n\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n\n  while (text = nextTextNode(nodeStack)) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n    return cue.line;\n  }\n\n  if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n\n  var track = cue.track,\n      trackList = track.textTrackList,\n      count = 0;\n\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n\n  return ++count * -1;\n}\n\nfunction StyleBox() {} // Apply styles to a div. If there is no div passed then it defaults to the\n// div on 'this'.\n\n\nStyleBox.prototype.applyStyles = function (styles, div) {\n  div = div || this.div;\n\n  for (var prop in styles) {\n    if (styles.hasOwnProperty(prop)) {\n      div.style[prop] = styles[prop];\n    }\n  }\n};\n\nStyleBox.prototype.formatStyle = function (val, unit) {\n  return val === 0 ? 0 : val + unit;\n}; // Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\n\n\nfunction CueStyleBox(window, cue, styleOptions) {\n  StyleBox.call(this);\n  this.cue = cue; // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n  // have inline positioning and will function as the cue background box.\n\n  this.cueDiv = parseContent(window, cue.text);\n  var styles = {\n    color: \"rgba(255, 255, 255, 1)\",\n    backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n    position: \"relative\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"inline\",\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\"\n  };\n  this.applyStyles(styles, this.cueDiv); // Create an absolutely positioned div that will be used to position the cue\n  // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n  // mirrors of them except middle instead of center on Safari.\n\n  this.div = window.document.createElement(\"div\");\n  styles = {\n    direction: determineBidi(this.cueDiv),\n    writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n    unicodeBidi: \"plaintext\",\n    textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n    font: styleOptions.font,\n    whiteSpace: \"pre-line\",\n    position: \"absolute\"\n  };\n  this.applyStyles(styles);\n  this.div.appendChild(this.cueDiv); // Calculate the distance from the reference edge of the viewport to the text\n  // position of the cue box. The reference edge will be resolved later when\n  // the box orientation styles are applied.\n\n  var textPos = 0;\n\n  switch (cue.positionAlign) {\n    case \"start\":\n      textPos = cue.position;\n      break;\n\n    case \"center\":\n      textPos = cue.position - cue.size / 2;\n      break;\n\n    case \"end\":\n      textPos = cue.position - cue.size;\n      break;\n  } // Horizontal box orientation; textPos is the distance from the left edge of the\n  // area to the left edge of the box and cue.size is the distance extending to\n  // the right from there.\n\n\n  if (cue.vertical === \"\") {\n    this.applyStyles({\n      left: this.formatStyle(textPos, \"%\"),\n      width: this.formatStyle(cue.size, \"%\")\n    }); // Vertical box orientation; textPos is the distance from the top edge of the\n    // area to the top edge of the box and cue.size is the height extending\n    // downwards from there.\n  } else {\n    this.applyStyles({\n      top: this.formatStyle(textPos, \"%\"),\n      height: this.formatStyle(cue.size, \"%\")\n    });\n  }\n\n  this.move = function (box) {\n    this.applyStyles({\n      top: this.formatStyle(box.top, \"px\"),\n      bottom: this.formatStyle(box.bottom, \"px\"),\n      left: this.formatStyle(box.left, \"px\"),\n      right: this.formatStyle(box.right, \"px\"),\n      height: this.formatStyle(box.height, \"px\"),\n      width: this.formatStyle(box.width, \"px\")\n    });\n  };\n}\n\nCueStyleBox.prototype = _objCreate(StyleBox.prototype);\nCueStyleBox.prototype.constructor = CueStyleBox; // Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\n\nfunction BoxPosition(obj) {\n  // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n  // was passed in and we need to copy the results of 'getBoundingClientRect'\n  // as the object returned is readonly. All co-ordinate values are in reference\n  // to the viewport origin (top left).\n  var lh, height, width, top;\n\n  if (obj.div) {\n    height = obj.div.offsetHeight;\n    width = obj.div.offsetWidth;\n    top = obj.div.offsetTop;\n    var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n    obj = obj.div.getBoundingClientRect(); // In certain cases the outter div will be slightly larger then the sum of\n    // the inner div's lines. This could be due to bold text, etc, on some platforms.\n    // In this case we should get the average line height and use that. This will\n    // result in the desired behaviour.\n\n    lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n  }\n\n  this.left = obj.left;\n  this.right = obj.right;\n  this.top = obj.top || top;\n  this.height = obj.height || height;\n  this.bottom = obj.bottom || top + (obj.height || height);\n  this.width = obj.width || width;\n  this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n} // Move the box along a particular axis. Optionally pass in an amount to move\n// the box. If no amount is passed then the default is the line height of the\n// box.\n\n\nBoxPosition.prototype.move = function (axis, toMove) {\n  toMove = toMove !== undefined ? toMove : this.lineHeight;\n\n  switch (axis) {\n    case \"+x\":\n      this.left += toMove;\n      this.right += toMove;\n      break;\n\n    case \"-x\":\n      this.left -= toMove;\n      this.right -= toMove;\n      break;\n\n    case \"+y\":\n      this.top += toMove;\n      this.bottom += toMove;\n      break;\n\n    case \"-y\":\n      this.top -= toMove;\n      this.bottom -= toMove;\n      break;\n  }\n}; // Check if this box overlaps another box, b2.\n\n\nBoxPosition.prototype.overlaps = function (b2) {\n  return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n}; // Check if this box overlaps any other boxes in boxes.\n\n\nBoxPosition.prototype.overlapsAny = function (boxes) {\n  for (var i = 0; i < boxes.length; i++) {\n    if (this.overlaps(boxes[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // Check if this box is within another box.\n\n\nBoxPosition.prototype.within = function (container) {\n  return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n}; // Check if this box is entirely within the container or it is overlapping\n// on the edge opposite of the axis direction passed. For example, if \"+x\" is\n// passed and the box is overlapping on the left edge of the container, then\n// return true.\n\n\nBoxPosition.prototype.overlapsOppositeAxis = function (container, axis) {\n  switch (axis) {\n    case \"+x\":\n      return this.left < container.left;\n\n    case \"-x\":\n      return this.right > container.right;\n\n    case \"+y\":\n      return this.top < container.top;\n\n    case \"-y\":\n      return this.bottom > container.bottom;\n  }\n}; // Find the percentage of the area that this box is overlapping with another\n// box.\n\n\nBoxPosition.prototype.intersectPercentage = function (b2) {\n  var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n  return intersectArea / (this.height * this.width);\n}; // Convert the positions from this box to CSS compatible positions using\n// the reference container's positions. This has to be done because this\n// box's positions are in reference to the viewport origin, whereas, CSS\n// values are in referecne to their respective edges.\n\n\nBoxPosition.prototype.toCSSCompatValues = function (reference) {\n  return {\n    top: this.top - reference.top,\n    bottom: reference.bottom - this.bottom,\n    left: this.left - reference.left,\n    right: reference.right - this.right,\n    height: this.height,\n    width: this.width\n  };\n}; // Get an object that represents the box's position without anything extra.\n// Can pass a StyleBox, HTMLElement, or another BoxPositon.\n\n\nBoxPosition.getSimpleBoxPosition = function (obj) {\n  var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n  var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n  var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n  obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n  var ret = {\n    left: obj.left,\n    right: obj.right,\n    top: obj.top || top,\n    height: obj.height || height,\n    bottom: obj.bottom || top + (obj.height || height),\n    width: obj.width || width\n  };\n  return ret;\n}; // Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\n\n\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n        b.move(axis[i]);\n      } // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n\n\n      if (b.within(containerBox)) {\n        return b;\n      }\n\n      var p = b.intersectPercentage(containerBox); // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      } // Reset the box position to the specified position.\n\n\n      b = new BoxPosition(specifiedPosition);\n    }\n\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = []; // If we have a line number to align the cue to.\n\n  if (cue.snapToLines) {\n    var size;\n\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0]; // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    } // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n\n\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    } // Move the box to the specified position. This may not be its best\n    // position.\n\n\n    boxPosition.move(initialAxis, position);\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n\n    switch (cue.lineAlign) {\n      case \"center\":\n        linePos -= calculatedPercentage / 2;\n        break;\n\n      case \"end\":\n        linePos -= calculatedPercentage;\n        break;\n    } // Apply initial line position to the cue box.\n\n\n    switch (cue.vertical) {\n      case \"\":\n        styleBox.applyStyles({\n          top: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"rl\":\n        styleBox.applyStyles({\n          left: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n\n      case \"lr\":\n        styleBox.applyStyles({\n          right: styleBox.formatStyle(linePos, \"%\")\n        });\n        break;\n    }\n\n    axis = [\"+y\", \"-x\", \"+x\", \"-y\"]; // Get the box position again after we've applied the specified positioning\n    // to it.\n\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction WebVTT() {// Nothing\n} // Helper to allow strings to be decoded instead of the default binary utf8 data.\n\n\nWebVTT.StringDecoder = function () {\n  return {\n    decode: function decode(data) {\n      if (!data) {\n        return \"\";\n      }\n\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nWebVTT.convertCueToDOMTree = function (window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n\n  return parseContent(window, cuetext);\n};\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\"; // Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\n\nWebVTT.processCues = function (window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  } // Remove all previous children.\n\n\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay); // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n\n    return false;\n  } // We don't need to recompute the cues' display states. Just reuse them.\n\n\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize + \"px \" + FONT_STYLE\n  };\n\n  (function () {\n    var styleBox, cue;\n\n    for (var i = 0; i < cues.length; i++) {\n      cue = cues[i]; // Compute the intial position and styles of the cue div.\n\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div); // Move the cue div to it's correct line position.\n\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions); // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n\n      cue.displayState = styleBox.div;\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nWebVTT.Parser = function (window, vttjs, decoder) {\n  if (!decoder) {\n    decoder = vttjs;\n    vttjs = {};\n  }\n\n  if (!vttjs) {\n    vttjs = {};\n  }\n\n  this.window = window;\n  this.vttjs = vttjs;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nWebVTT.Parser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function reportOrThrowError(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function parse(data) {\n    var self = this; // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {\n        stream: true\n      });\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n\n      var line = buffer.substr(0, pos); // Advance the buffer early in case we fail below.\n\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n\n      self.buffer = buffer.substr(pos);\n      return line;\n    } // 3.4 WebVTT region and WebVTT region settings syntax\n\n\n    function parseRegion(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"id\":\n            settings.set(k, v);\n            break;\n\n          case \"width\":\n            settings.percent(k, v);\n            break;\n\n          case \"lines\":\n            settings.integer(k, v);\n            break;\n\n          case \"regionanchor\":\n          case \"viewportanchor\":\n            var xy = v.split(',');\n\n            if (xy.length !== 2) {\n              break;\n            } // We have to make sure both x and y parse, so use a temporary\n            // settings object here.\n\n\n            var anchor = new Settings();\n            anchor.percent(\"x\", xy[0]);\n            anchor.percent(\"y\", xy[1]);\n\n            if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n              break;\n            }\n\n            settings.set(k + \"X\", anchor.get(\"x\"));\n            settings.set(k + \"Y\", anchor.get(\"y\"));\n            break;\n\n          case \"scroll\":\n            settings.alt(k, v, [\"up\"]);\n            break;\n        }\n      }, /=/, /\\s/); // Create the region, using default values for any values that were not\n      // specified.\n\n      if (settings.has(\"id\")) {\n        var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\"); // Register the region.\n\n        self.onregion && self.onregion(region); // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    } // draft-pantos-http-live-streaming-20\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-20#section-3.5\n    // 3.5 WebVTT\n\n\n    function parseTimestampMap(input) {\n      var settings = new Settings();\n      parseOptions(input, function (k, v) {\n        switch (k) {\n          case \"MPEGT\":\n            settings.integer(k + 'S', v);\n            break;\n\n          case \"LOCA\":\n            settings.set(k + 'L', parseTimeStamp(v));\n            break;\n        }\n      }, /[^\\d]:/, /,/);\n      self.ontimestampmap && self.ontimestampmap({\n        \"MPEGTS\": settings.get(\"MPEGTS\"),\n        \"LOCAL\": settings.get(\"LOCAL\")\n      });\n    } // 3.2 WebVTT metadata header syntax\n\n\n    function parseHeader(input) {\n      if (input.match(/X-TIMESTAMP-MAP/)) {\n        // This line contains HLS X-TIMESTAMP-MAP metadata\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"X-TIMESTAMP-MAP\":\n              parseTimestampMap(v);\n              break;\n          }\n        }, /=/);\n      } else {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n            case \"Region\":\n              // 3.3 WebVTT region metadata header syntax\n              parseRegion(v);\n              break;\n          }\n        }, /:/);\n      }\n    } // 5.1 WebVTT file parsing.\n\n\n    try {\n      var line;\n\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n          case \"HEADER\":\n            // 13-18 - Allow a header (metadata) under the WEBVTT line.\n            if (/:/.test(line)) {\n              parseHeader(line);\n            } else if (!line) {\n              // An empty line terminates the header and starts the body (cues).\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"NOTE\":\n            // Ignore NOTE blocks.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n\n          case \"ID\":\n            // Check for the start of NOTE blocks.\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              self.state = \"NOTE\";\n              break;\n            } // 19-29 - Allow any number of line terminators, then initialize new cue values.\n\n\n            if (!line) {\n              continue;\n            }\n\n            self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\"); // Safari still uses the old middle value and won't accept center\n\n            try {\n              self.cue.align = \"center\";\n            } catch (e) {\n              self.cue.align = \"middle\";\n            }\n\n            self.state = \"CUE\"; // 30-39 - Check if self line contains an optional identifier or timing data.\n\n            if (line.indexOf(\"-->\") === -1) {\n              self.cue.id = line;\n              continue;\n            }\n\n          // Process line as start of a cue.\n\n          /*falls through*/\n\n          case \"CUE\":\n            // 40 - Collect cue timings and settings.\n            try {\n              parseCue(line, self.cue, self.regionList);\n            } catch (e) {\n              self.reportOrThrowError(e); // In case of an error ignore rest of the cue.\n\n              self.cue = null;\n              self.state = \"BADCUE\";\n              continue;\n            }\n\n            self.state = \"CUETEXT\";\n            continue;\n\n          case \"CUETEXT\":\n            var hasSubstring = line.indexOf(\"-->\") !== -1; // 34 - If we have an empty line then report the cue.\n            // 35 - If we have the special substring '-->' then report the cue,\n            // but do not collect the line as we need to process the current\n            // one as a new cue.\n\n            if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n              // We are done parsing self cue.\n              self.oncue && self.oncue(self.cue);\n              self.cue = null;\n              self.state = \"ID\";\n              continue;\n            }\n\n            if (self.cue.text) {\n              self.cue.text += \"\\n\";\n            }\n\n            self.cue.text += line.replace(/\\u2028/g, '\\n').replace(/u2029/g, '\\n');\n            continue;\n\n          case \"BADCUE\":\n            // BADCUE\n            // 54-62 - Collect and discard the remaining cue.\n            if (!line) {\n              self.state = \"ID\";\n            }\n\n            continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e); // If we are currently parsing a cue, report what we have.\n\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n\n      self.cue = null; // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n\n    return this;\n  },\n  flush: function flush() {\n    var self = this;\n\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode(); // Synthesize the end of the current cue or region.\n\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      } // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n\n\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n    }\n\n    self.onflush && self.onflush();\n    return this;\n  }\n};\nmodule.exports = WebVTT;","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": 1,\n  \"lr\": 1,\n  \"rl\": 1\n};\nvar alignSetting = {\n  \"start\": 1,\n  \"center\": 1,\n  \"end\": 1,\n  \"left\": 1,\n  \"right\": 1,\n  \"auto\": 1,\n  \"line-left\": 1,\n  \"line-right\": 1\n};\n\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\nfunction VTTCue(startTime, endTime, text) {\n  /**\n   * Shim implementation specific properties. These properties are not in\n   * the spec.\n   */\n  // Lets us know when the VTTCue's data has changed in such a way that we need\n  // to recompute its display state. This lets us compute its display state\n  // lazily.\n  this.hasBeenReset = false;\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n\n  var _id = \"\";\n  var _pauseOnExit = false;\n  var _startTime = startTime;\n  var _endTime = endTime;\n  var _text = text;\n  var _region = null;\n  var _vertical = \"\";\n  var _snapToLines = true;\n  var _line = \"auto\";\n  var _lineAlign = \"start\";\n  var _position = \"auto\";\n  var _positionAlign = \"auto\";\n  var _size = 100;\n  var _align = \"center\";\n  Object.defineProperties(this, {\n    \"id\": {\n      enumerable: true,\n      get: function get() {\n        return _id;\n      },\n      set: function set(value) {\n        _id = \"\" + value;\n      }\n    },\n    \"pauseOnExit\": {\n      enumerable: true,\n      get: function get() {\n        return _pauseOnExit;\n      },\n      set: function set(value) {\n        _pauseOnExit = !!value;\n      }\n    },\n    \"startTime\": {\n      enumerable: true,\n      get: function get() {\n        return _startTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"endTime\": {\n      enumerable: true,\n      get: function get() {\n        return _endTime;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"text\": {\n      enumerable: true,\n      get: function get() {\n        return _text;\n      },\n      set: function set(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"region\": {\n      enumerable: true,\n      get: function get() {\n        return _region;\n      },\n      set: function set(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"vertical\": {\n      enumerable: true,\n      get: function get() {\n        return _vertical;\n      },\n      set: function set(value) {\n        var setting = findDirectionSetting(value); // Have to check for false because the setting an be an empty string.\n\n        if (setting === false) {\n          throw new SyntaxError(\"Vertical: an invalid or illegal direction string was specified.\");\n        }\n\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    },\n    \"snapToLines\": {\n      enumerable: true,\n      get: function get() {\n        return _snapToLines;\n      },\n      set: function set(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"line\": {\n      enumerable: true,\n      get: function get() {\n        return _line;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\" && value !== autoKeyword) {\n          throw new SyntaxError(\"Line: an invalid number or illegal string was specified.\");\n        }\n\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"lineAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _lineAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"lineAlign: an invalid or illegal string was specified.\");\n        } else {\n          _lineAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"position\": {\n      enumerable: true,\n      get: function get() {\n        return _position;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"positionAlign\": {\n      enumerable: true,\n      get: function get() {\n        return _positionAlign;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          console.warn(\"positionAlign: an invalid or illegal string was specified.\");\n        } else {\n          _positionAlign = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    },\n    \"size\": {\n      enumerable: true,\n      get: function get() {\n        return _size;\n      },\n      set: function set(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    },\n    \"align\": {\n      enumerable: true,\n      get: function get() {\n        return _align;\n      },\n      set: function set(value) {\n        var setting = findAlignSetting(value);\n\n        if (!setting) {\n          throw new SyntaxError(\"align: an invalid or illegal alignment string was specified.\");\n        }\n\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }\n  });\n  /**\n   * Other <track> spec defined properties\n   */\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n\n  this.displayState = undefined;\n}\n/**\n * VTTCue methods\n */\n\n\nVTTCue.prototype.getCueAsHTML = function () {\n  // Assume WebVTT.convertCueToDOMTree is on the global.\n  return WebVTT.convertCueToDOMTree(window, this.text);\n};\n\nmodule.exports = VTTCue;","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar scrollSetting = {\n  \"\": true,\n  \"up\": true\n};\n\nfunction findScrollSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\nfunction isValidPercentValue(value) {\n  return typeof value === \"number\" && value >= 0 && value <= 100;\n} // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\n\n\nfunction VTTRegion() {\n  var _width = 100;\n  var _lines = 3;\n  var _regionAnchorX = 0;\n  var _regionAnchorY = 100;\n  var _viewportAnchorX = 0;\n  var _viewportAnchorY = 100;\n  var _scroll = \"\";\n  Object.defineProperties(this, {\n    \"width\": {\n      enumerable: true,\n      get: function get() {\n        return _width;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"Width must be between 0 and 100.\");\n        }\n\n        _width = value;\n      }\n    },\n    \"lines\": {\n      enumerable: true,\n      get: function get() {\n        return _lines;\n      },\n      set: function set(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Lines must be set to a number.\");\n        }\n\n        _lines = value;\n      }\n    },\n    \"regionAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n        }\n\n        _regionAnchorY = value;\n      }\n    },\n    \"regionAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _regionAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n        }\n\n        _regionAnchorX = value;\n      }\n    },\n    \"viewportAnchorY\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorY;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n        }\n\n        _viewportAnchorY = value;\n      }\n    },\n    \"viewportAnchorX\": {\n      enumerable: true,\n      get: function get() {\n        return _viewportAnchorX;\n      },\n      set: function set(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n        }\n\n        _viewportAnchorX = value;\n      }\n    },\n    \"scroll\": {\n      enumerable: true,\n      get: function get() {\n        return _scroll;\n      },\n      set: function set(value) {\n        var setting = findScrollSetting(value); // Have to check for false as an empty string is a legal value.\n\n        if (setting === false) {\n          console.warn(\"Scroll: an invalid or illegal string was specified.\");\n        } else {\n          _scroll = setting;\n        }\n      }\n    }\n  });\n}\n\nmodule.exports = VTTRegion;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// see https://tools.ietf.org/html/rfc1808\n(function (root) {\n  var URL_REGEX = /^(?=((?:[a-zA-Z0-9+\\-.]+:)?))\\1(?=((?:\\/\\/[^\\/?#]*)?))\\2(?=((?:(?:[^?#\\/]*\\/)*[^;?#\\/]*)?))\\3((?:;[^?#]*)?)(\\?[^#]*)?(#[^]*)?$/;\n  var FIRST_SEGMENT_REGEX = /^(?=([^\\/?#]*))\\1([^]*)$/;\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n  var URLToolkit = {\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n    // E.g\n    // With opts.alwaysNormalize = false (default, spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n    // With opts.alwaysNormalize = true (not spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n    buildAbsoluteURL: function buildAbsoluteURL(baseURL, relativeURL, opts) {\n      opts = opts || {}; // remove any remaining space and CRLF\n\n      baseURL = baseURL.trim();\n      relativeURL = relativeURL.trim();\n\n      if (!relativeURL) {\n        // 2a) If the embedded URL is entirely empty, it inherits the\n        // entire base URL (i.e., is set equal to the base URL)\n        // and we are done.\n        if (!opts.alwaysNormalize) {\n          return baseURL;\n        }\n\n        var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n\n        if (!basePartsForNormalise) {\n          throw new Error('Error trying to parse base URL.');\n        }\n\n        basePartsForNormalise.path = URLToolkit.normalizePath(basePartsForNormalise.path);\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\n      }\n\n      var relativeParts = URLToolkit.parseURL(relativeURL);\n\n      if (!relativeParts) {\n        throw new Error('Error trying to parse relative URL.');\n      }\n\n      if (relativeParts.scheme) {\n        // 2b) If the embedded URL starts with a scheme name, it is\n        // interpreted as an absolute URL and we are done.\n        if (!opts.alwaysNormalize) {\n          return relativeURL;\n        }\n\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n        return URLToolkit.buildURLFromParts(relativeParts);\n      }\n\n      var baseParts = URLToolkit.parseURL(baseURL);\n\n      if (!baseParts) {\n        throw new Error('Error trying to parse base URL.');\n      }\n\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n        baseParts.netLoc = pathParts[1];\n        baseParts.path = pathParts[2];\n      }\n\n      if (baseParts.netLoc && !baseParts.path) {\n        baseParts.path = '/';\n      }\n\n      var builtParts = {\n        // 2c) Otherwise, the embedded URL inherits the scheme of\n        // the base URL.\n        scheme: baseParts.scheme,\n        netLoc: relativeParts.netLoc,\n        path: null,\n        params: relativeParts.params,\n        query: relativeParts.query,\n        fragment: relativeParts.fragment\n      };\n\n      if (!relativeParts.netLoc) {\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\n        // (if any) of the base URL.\n        builtParts.netLoc = baseParts.netLoc; // 4) If the embedded URL path is preceded by a slash \"/\", the\n        // path is not relative and we skip to Step 7.\n\n        if (relativeParts.path[0] !== '/') {\n          if (!relativeParts.path) {\n            // 5) If the embedded URL path is empty (and not preceded by a\n            // slash), then the embedded URL inherits the base URL path\n            builtParts.path = baseParts.path; // 5a) if the embedded URL's <params> is non-empty, we skip to\n            // step 7; otherwise, it inherits the <params> of the base\n            // URL (if any) and\n\n            if (!relativeParts.params) {\n              builtParts.params = baseParts.params; // 5b) if the embedded URL's <query> is non-empty, we skip to\n              // step 7; otherwise, it inherits the <query> of the base\n              // URL (if any) and we skip to step 7.\n\n              if (!relativeParts.query) {\n                builtParts.query = baseParts.query;\n              }\n            }\n          } else {\n            // 6) The last segment of the base URL's path (anything\n            // following the rightmost slash \"/\", or the entire path if no\n            // slash is present) is removed and the embedded URL's path is\n            // appended in its place.\n            var baseURLPath = baseParts.path;\n            var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) + relativeParts.path;\n            builtParts.path = URLToolkit.normalizePath(newPath);\n          }\n        }\n      }\n\n      if (builtParts.path === null) {\n        builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;\n      }\n\n      return URLToolkit.buildURLFromParts(builtParts);\n    },\n    parseURL: function parseURL(url) {\n      var parts = URL_REGEX.exec(url);\n\n      if (!parts) {\n        return null;\n      }\n\n      return {\n        scheme: parts[1] || '',\n        netLoc: parts[2] || '',\n        path: parts[3] || '',\n        params: parts[4] || '',\n        query: parts[5] || '',\n        fragment: parts[6] || ''\n      };\n    },\n    normalizePath: function normalizePath(path) {\n      // The following operations are\n      // then applied, in order, to the new path:\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\n      // segment, are removed.\n      // 6b) If the path ends with \".\" as a complete path segment,\n      // that \".\" is removed.\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, ''); // 6c) All occurrences of \"<segment>/../\", where <segment> is a\n      // complete path segment not equal to \"..\", are removed.\n      // Removal of these path segments is performed iteratively,\n      // removing the leftmost matching pattern on each iteration,\n      // until no matching pattern remains.\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\n      // complete path segment not equal to \"..\", that\n      // \"<segment>/..\" is removed.\n\n      while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length) {}\n\n      return path.split('').reverse().join('');\n    },\n    buildURLFromParts: function buildURLFromParts(parts) {\n      return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;\n    }\n  };\n  if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object' && (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === 'object') module.exports = URLToolkit;else if (typeof define === 'function' && define.amd) define([], function () {\n    return URLToolkit;\n  });else if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === 'object') exports['URLToolkit'] = URLToolkit;else root['URLToolkit'] = URLToolkit;\n})(this);","import window from 'global/window';\nvar regexs = {\n  // to determine mime types\n  mp4: /^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,\n  webm: /^(vp0?[89]|av0?1|opus|vorbis)/,\n  ogg: /^(vp0?[89]|theora|flac|opus|vorbis)/,\n  // to determine if a codec is audio or video\n  video: /^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,\n  audio: /^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,\n  text: /^(stpp.ttml.im1t)/,\n  // mux.js support regex\n  muxerVideo: /^(avc0?1)/,\n  muxerAudio: /^(mp4a)/,\n  // match nothing as muxer does not support text right now.\n  // there cannot never be a character before the start of a string\n  // so this matches nothing.\n  muxerText: /a^/\n};\nvar mediaTypes = ['video', 'audio', 'text'];\nvar upperMediaTypes = ['Video', 'Audio', 'Text'];\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec string with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {string} codec\n *        Codec string to translate\n * @return {string}\n *         The translated codec string\n */\n\nexport var translateLegacyCodec = function translateLegacyCodec(codec) {\n  if (!codec) {\n    return codec;\n  }\n\n  return codec.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (orig, profile, avcLevel) {\n    var profileHex = ('00' + Number(profile).toString(16)).slice(-2);\n    var avcLevelHex = ('00' + Number(avcLevel).toString(16)).slice(-2);\n    return 'avc1.' + profileHex + '00' + avcLevelHex;\n  });\n};\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec strings with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {string[]} codecs\n *        An array of codec strings to translate\n * @return {string[]}\n *         The translated array of codec strings\n */\n\nexport var translateLegacyCodecs = function translateLegacyCodecs(codecs) {\n  return codecs.map(translateLegacyCodec);\n};\n/**\n * Replace codecs in the codec string with the old apple-style `avc1.<dd>.<dd>` to the\n * standard `avc1.<hhhhhh>`.\n *\n * @param {string} codecString\n *        The codec string\n * @return {string}\n *         The codec string with old apple-style codecs replaced\n *\n * @private\n */\n\nexport var mapLegacyAvcCodecs = function mapLegacyAvcCodecs(codecString) {\n  return codecString.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (match) {\n    return translateLegacyCodecs([match])[0];\n  });\n};\n/**\n * @typedef {Object} ParsedCodecInfo\n * @property {number} codecCount\n *           Number of codecs parsed\n * @property {string} [videoCodec]\n *           Parsed video codec (if found)\n * @property {string} [videoObjectTypeIndicator]\n *           Video object type indicator (if found)\n * @property {string|null} audioProfile\n *           Audio profile\n */\n\n/**\n * Parses a codec string to retrieve the number of codecs specified, the video codec and\n * object type indicator, and the audio profile.\n *\n * @param {string} [codecString]\n *        The codec string to parse\n * @return {ParsedCodecInfo}\n *         Parsed codec info\n */\n\nexport var parseCodecs = function parseCodecs(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  var codecs = codecString.split(',');\n  var result = [];\n  codecs.forEach(function (codec) {\n    codec = codec.trim();\n    var codecType;\n    mediaTypes.forEach(function (name) {\n      var match = regexs[name].exec(codec.toLowerCase());\n\n      if (!match || match.length <= 1) {\n        return;\n      }\n\n      codecType = name; // maintain codec case\n\n      var type = codec.substring(0, match[1].length);\n      var details = codec.replace(type, '');\n      result.push({\n        type: type,\n        details: details,\n        mediaType: name\n      });\n    });\n\n    if (!codecType) {\n      result.push({\n        type: codec,\n        details: '',\n        mediaType: 'unknown'\n      });\n    }\n  });\n  return result;\n};\n/**\n * Returns a ParsedCodecInfo object for the default alternate audio playlist if there is\n * a default alternate audio playlist for the provided audio group.\n *\n * @param {Object} master\n *        The master playlist\n * @param {string} audioGroupId\n *        ID of the audio group for which to find the default codec info\n * @return {ParsedCodecInfo}\n *         Parsed codec info\n */\n\nexport var codecsFromDefault = function codecsFromDefault(master, audioGroupId) {\n  if (!master.mediaGroups.AUDIO || !audioGroupId) {\n    return null;\n  }\n\n  var audioGroup = master.mediaGroups.AUDIO[audioGroupId];\n\n  if (!audioGroup) {\n    return null;\n  }\n\n  for (var name in audioGroup) {\n    var audioType = audioGroup[name];\n\n    if (audioType.default && audioType.playlists) {\n      // codec should be the same for all playlists within the audio type\n      return parseCodecs(audioType.playlists[0].attributes.CODECS);\n    }\n  }\n\n  return null;\n};\nexport var isVideoCodec = function isVideoCodec(codec) {\n  if (codec === void 0) {\n    codec = '';\n  }\n\n  return regexs.video.test(codec.trim().toLowerCase());\n};\nexport var isAudioCodec = function isAudioCodec(codec) {\n  if (codec === void 0) {\n    codec = '';\n  }\n\n  return regexs.audio.test(codec.trim().toLowerCase());\n};\nexport var isTextCodec = function isTextCodec(codec) {\n  if (codec === void 0) {\n    codec = '';\n  }\n\n  return regexs.text.test(codec.trim().toLowerCase());\n};\nexport var getMimeForCodec = function getMimeForCodec(codecString) {\n  if (!codecString || typeof codecString !== 'string') {\n    return;\n  }\n\n  var codecs = codecString.toLowerCase().split(',').map(function (c) {\n    return translateLegacyCodec(c.trim());\n  }); // default to video type\n\n  var type = 'video'; // only change to audio type if the only codec we have is\n  // audio\n\n  if (codecs.length === 1 && isAudioCodec(codecs[0])) {\n    type = 'audio';\n  } else if (codecs.length === 1 && isTextCodec(codecs[0])) {\n    // text uses application/<container> for now\n    type = 'application';\n  } // default the container to mp4\n\n\n  var container = 'mp4'; // every codec must be able to go into the container\n  // for that container to be the correct one\n\n  if (codecs.every(function (c) {\n    return regexs.mp4.test(c);\n  })) {\n    container = 'mp4';\n  } else if (codecs.every(function (c) {\n    return regexs.webm.test(c);\n  })) {\n    container = 'webm';\n  } else if (codecs.every(function (c) {\n    return regexs.ogg.test(c);\n  })) {\n    container = 'ogg';\n  }\n\n  return type + \"/\" + container + \";codecs=\\\"\" + codecString + \"\\\"\";\n};\nexport var browserSupportsCodec = function browserSupportsCodec(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  return window.MediaSource && window.MediaSource.isTypeSupported && window.MediaSource.isTypeSupported(getMimeForCodec(codecString)) || false;\n};\nexport var muxerSupportsCodec = function muxerSupportsCodec(codecString) {\n  if (codecString === void 0) {\n    codecString = '';\n  }\n\n  return codecString.toLowerCase().split(',').every(function (codec) {\n    codec = codec.trim(); // any match is supported.\n\n    for (var i = 0; i < upperMediaTypes.length; i++) {\n      var type = upperMediaTypes[i];\n\n      if (regexs[\"muxer\" + type].test(codec)) {\n        return true;\n      }\n    }\n\n    return false;\n  });\n};\nexport var DEFAULT_AUDIO_CODEC = 'mp4a.40.2';\nexport var DEFAULT_VIDEO_CODEC = 'avc1.4d400d';","var MPEGURL_REGEX = /^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i;\nvar DASH_REGEX = /^application\\/dash\\+xml/i;\n/**\n * Returns a string that describes the type of source based on a video source object's\n * media type.\n *\n * @see {@link https://dev.w3.org/html5/pf-summary/video.html#dom-source-type|Source Type}\n *\n * @param {string} type\n *        Video source object media type\n * @return {('hls'|'dash'|'vhs-json'|null)}\n *         VHS source type string\n */\n\nexport var simpleTypeFromSourceType = function simpleTypeFromSourceType(type) {\n  if (MPEGURL_REGEX.test(type)) {\n    return 'hls';\n  }\n\n  if (DASH_REGEX.test(type)) {\n    return 'dash';\n  } // Denotes the special case of a manifest object passed to http-streaming instead of a\n  // source URL.\n  //\n  // See https://en.wikipedia.org/wiki/Media_type for details on specifying media types.\n  //\n  // In this case, vnd stands for vendor, video.js for the organization, VHS for this\n  // project, and the +json suffix identifies the structure of the media type.\n\n\n  if (type === 'application/vnd.videojs.vhs+json') {\n    return 'vhs-json';\n  }\n\n  return null;\n};","var dom = require('./dom');\n\nexports.DOMImplementation = dom.DOMImplementation;\nexports.XMLSerializer = dom.XMLSerializer;\nexports.DOMParser = require('./dom-parser').DOMParser;","var conventions = require(\"./conventions\");\n\nvar dom = require('./dom');\n\nvar entities = require('./entities');\n\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\nvar NAMESPACE = conventions.NAMESPACE;\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\nfunction DOMParser(options) {\n  this.options = options || {\n    locator: {}\n  };\n}\n\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n  var options = this.options;\n  var sax = new XMLReader();\n  var domBuilder = options.domBuilder || new DOMHandler(); //contentHandler and LexicalHandler\n\n  var errorHandler = options.errorHandler;\n  var locator = options.locator;\n  var defaultNSMap = options.xmlns || {};\n  var isHTML = /\\/x?html?$/.test(mimeType); //mimeType.toLowerCase().indexOf('html') > -1;\n\n  var entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\n  if (locator) {\n    domBuilder.setDocumentLocator(locator);\n  }\n\n  sax.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);\n  sax.domBuilder = options.domBuilder || domBuilder;\n\n  if (isHTML) {\n    defaultNSMap[''] = NAMESPACE.HTML;\n  }\n\n  defaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\n  if (source && typeof source === 'string') {\n    sax.parse(source, defaultNSMap, entityMap);\n  } else {\n    sax.errorHandler.error(\"invalid doc source\");\n  }\n\n  return domBuilder.doc;\n};\n\nfunction buildErrorHandler(errorImpl, domBuilder, locator) {\n  if (!errorImpl) {\n    if (domBuilder instanceof DOMHandler) {\n      return domBuilder;\n    }\n\n    errorImpl = domBuilder;\n  }\n\n  var errorHandler = {};\n  var isCallback = errorImpl instanceof Function;\n  locator = locator || {};\n\n  function build(key) {\n    var fn = errorImpl[key];\n\n    if (!fn && isCallback) {\n      fn = errorImpl.length == 2 ? function (msg) {\n        errorImpl(key, msg);\n      } : errorImpl;\n    }\n\n    errorHandler[key] = fn && function (msg) {\n      fn('[xmldom ' + key + ']\\t' + msg + _locator(locator));\n    } || function () {};\n  }\n\n  build('warning');\n  build('error');\n  build('fatalError');\n  return errorHandler;\n} //console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\n\n\nfunction DOMHandler() {\n  this.cdata = false;\n}\n\nfunction position(locator, node) {\n  node.lineNumber = locator.lineNumber;\n  node.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\n\n\nDOMHandler.prototype = {\n  startDocument: function startDocument() {\n    this.doc = new DOMImplementation().createDocument(null, null, null);\n\n    if (this.locator) {\n      this.doc.documentURI = this.locator.systemId;\n    }\n  },\n  startElement: function startElement(namespaceURI, localName, qName, attrs) {\n    var doc = this.doc;\n    var el = doc.createElementNS(namespaceURI, qName || localName);\n    var len = attrs.length;\n    appendElement(this, el);\n    this.currentElement = el;\n    this.locator && position(this.locator, el);\n\n    for (var i = 0; i < len; i++) {\n      var namespaceURI = attrs.getURI(i);\n      var value = attrs.getValue(i);\n      var qName = attrs.getQName(i);\n      var attr = doc.createAttributeNS(namespaceURI, qName);\n      this.locator && position(attrs.getLocator(i), attr);\n      attr.value = attr.nodeValue = value;\n      el.setAttributeNode(attr);\n    }\n  },\n  endElement: function endElement(namespaceURI, localName, qName) {\n    var current = this.currentElement;\n    var tagName = current.tagName;\n    this.currentElement = current.parentNode;\n  },\n  startPrefixMapping: function startPrefixMapping(prefix, uri) {},\n  endPrefixMapping: function endPrefixMapping(prefix) {},\n  processingInstruction: function processingInstruction(target, data) {\n    var ins = this.doc.createProcessingInstruction(target, data);\n    this.locator && position(this.locator, ins);\n    appendElement(this, ins);\n  },\n  ignorableWhitespace: function ignorableWhitespace(ch, start, length) {},\n  characters: function characters(chars, start, length) {\n    chars = _toString.apply(this, arguments); //console.log(chars)\n\n    if (chars) {\n      if (this.cdata) {\n        var charNode = this.doc.createCDATASection(chars);\n      } else {\n        var charNode = this.doc.createTextNode(chars);\n      }\n\n      if (this.currentElement) {\n        this.currentElement.appendChild(charNode);\n      } else if (/^\\s*$/.test(chars)) {\n        this.doc.appendChild(charNode); //process xml\n      }\n\n      this.locator && position(this.locator, charNode);\n    }\n  },\n  skippedEntity: function skippedEntity(name) {},\n  endDocument: function endDocument() {\n    this.doc.normalize();\n  },\n  setDocumentLocator: function setDocumentLocator(locator) {\n    if (this.locator = locator) {\n      // && !('lineNumber' in locator)){\n      locator.lineNumber = 0;\n    }\n  },\n  //LexicalHandler\n  comment: function comment(chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    var comm = this.doc.createComment(chars);\n    this.locator && position(this.locator, comm);\n    appendElement(this, comm);\n  },\n  startCDATA: function startCDATA() {\n    //used in characters() methods\n    this.cdata = true;\n  },\n  endCDATA: function endCDATA() {\n    this.cdata = false;\n  },\n  startDTD: function startDTD(name, publicId, systemId) {\n    var impl = this.doc.implementation;\n\n    if (impl && impl.createDocumentType) {\n      var dt = impl.createDocumentType(name, publicId, systemId);\n      this.locator && position(this.locator, dt);\n      appendElement(this, dt);\n      this.doc.doctype = dt;\n    }\n  },\n\n  /**\n   * @see org.xml.sax.ErrorHandler\n   * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n   */\n  warning: function warning(error) {\n    console.warn('[xmldom warning]\\t' + error, _locator(this.locator));\n  },\n  error: function error(_error) {\n    console.error('[xmldom error]\\t' + _error, _locator(this.locator));\n  },\n  fatalError: function fatalError(error) {\n    throw new ParseError(error, this.locator);\n  }\n};\n\nfunction _locator(l) {\n  if (l) {\n    return '\\n@' + (l.systemId || '') + '#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n  }\n}\n\nfunction _toString(chars, start, length) {\n  if (typeof chars == 'string') {\n    return chars.substr(start, length);\n  } else {\n    //java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n    if (chars.length >= start + length || start) {\n      return new java.lang.String(chars, start, length) + '';\n    }\n\n    return chars;\n  }\n}\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\n\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (key) {\n  DOMHandler.prototype[key] = function () {\n    return null;\n  };\n});\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\n\nfunction appendElement(hander, node) {\n  if (!hander.currentElement) {\n    hander.doc.appendChild(node);\n  } else {\n    hander.currentElement.appendChild(node);\n  }\n} //appendChild and setAttributeNS are preformance key\n\n\nexports.__DOMHandler = DOMHandler;\nexports.DOMParser = DOMParser;\n/**\n * @deprecated Import/require from main entry point instead\n */\n\nexports.DOMImplementation = dom.DOMImplementation;\n/**\n * @deprecated Import/require from main entry point instead\n */\n\nexports.XMLSerializer = dom.XMLSerializer;","var freeze = require('./conventions').freeze;\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\n\n\nexports.XML_ENTITIES = freeze({\n  amp: '&',\n  apos: \"'\",\n  gt: '>',\n  lt: '<',\n  quot: '\"'\n});\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\n\nexports.HTML_ENTITIES = freeze({\n  lt: '<',\n  gt: '>',\n  amp: '&',\n  quot: '\"',\n  apos: \"'\",\n  Agrave: \"À\",\n  Aacute: \"Á\",\n  Acirc: \"Â\",\n  Atilde: \"Ã\",\n  Auml: \"Ä\",\n  Aring: \"Å\",\n  AElig: \"Æ\",\n  Ccedil: \"Ç\",\n  Egrave: \"È\",\n  Eacute: \"É\",\n  Ecirc: \"Ê\",\n  Euml: \"Ë\",\n  Igrave: \"Ì\",\n  Iacute: \"Í\",\n  Icirc: \"Î\",\n  Iuml: \"Ï\",\n  ETH: \"Ð\",\n  Ntilde: \"Ñ\",\n  Ograve: \"Ò\",\n  Oacute: \"Ó\",\n  Ocirc: \"Ô\",\n  Otilde: \"Õ\",\n  Ouml: \"Ö\",\n  Oslash: \"Ø\",\n  Ugrave: \"Ù\",\n  Uacute: \"Ú\",\n  Ucirc: \"Û\",\n  Uuml: \"Ü\",\n  Yacute: \"Ý\",\n  THORN: \"Þ\",\n  szlig: \"ß\",\n  agrave: \"à\",\n  aacute: \"á\",\n  acirc: \"â\",\n  atilde: \"ã\",\n  auml: \"ä\",\n  aring: \"å\",\n  aelig: \"æ\",\n  ccedil: \"ç\",\n  egrave: \"è\",\n  eacute: \"é\",\n  ecirc: \"ê\",\n  euml: \"ë\",\n  igrave: \"ì\",\n  iacute: \"í\",\n  icirc: \"î\",\n  iuml: \"ï\",\n  eth: \"ð\",\n  ntilde: \"ñ\",\n  ograve: \"ò\",\n  oacute: \"ó\",\n  ocirc: \"ô\",\n  otilde: \"õ\",\n  ouml: \"ö\",\n  oslash: \"ø\",\n  ugrave: \"ù\",\n  uacute: \"ú\",\n  ucirc: \"û\",\n  uuml: \"ü\",\n  yacute: \"ý\",\n  thorn: \"þ\",\n  yuml: \"ÿ\",\n  nbsp: \"\\xA0\",\n  iexcl: \"¡\",\n  cent: \"¢\",\n  pound: \"£\",\n  curren: \"¤\",\n  yen: \"¥\",\n  brvbar: \"¦\",\n  sect: \"§\",\n  uml: \"¨\",\n  copy: \"©\",\n  ordf: \"ª\",\n  laquo: \"«\",\n  not: \"¬\",\n  shy: \"­­\",\n  reg: \"®\",\n  macr: \"¯\",\n  deg: \"°\",\n  plusmn: \"±\",\n  sup2: \"²\",\n  sup3: \"³\",\n  acute: \"´\",\n  micro: \"µ\",\n  para: \"¶\",\n  middot: \"·\",\n  cedil: \"¸\",\n  sup1: \"¹\",\n  ordm: \"º\",\n  raquo: \"»\",\n  frac14: \"¼\",\n  frac12: \"½\",\n  frac34: \"¾\",\n  iquest: \"¿\",\n  times: \"×\",\n  divide: \"÷\",\n  forall: \"∀\",\n  part: \"∂\",\n  exist: \"∃\",\n  empty: \"∅\",\n  nabla: \"∇\",\n  isin: \"∈\",\n  notin: \"∉\",\n  ni: \"∋\",\n  prod: \"∏\",\n  sum: \"∑\",\n  minus: \"−\",\n  lowast: \"∗\",\n  radic: \"√\",\n  prop: \"∝\",\n  infin: \"∞\",\n  ang: \"∠\",\n  and: \"∧\",\n  or: \"∨\",\n  cap: \"∩\",\n  cup: \"∪\",\n  'int': \"∫\",\n  there4: \"∴\",\n  sim: \"∼\",\n  cong: \"≅\",\n  asymp: \"≈\",\n  ne: \"≠\",\n  equiv: \"≡\",\n  le: \"≤\",\n  ge: \"≥\",\n  sub: \"⊂\",\n  sup: \"⊃\",\n  nsub: \"⊄\",\n  sube: \"⊆\",\n  supe: \"⊇\",\n  oplus: \"⊕\",\n  otimes: \"⊗\",\n  perp: \"⊥\",\n  sdot: \"⋅\",\n  Alpha: \"Α\",\n  Beta: \"Β\",\n  Gamma: \"Γ\",\n  Delta: \"Δ\",\n  Epsilon: \"Ε\",\n  Zeta: \"Ζ\",\n  Eta: \"Η\",\n  Theta: \"Θ\",\n  Iota: \"Ι\",\n  Kappa: \"Κ\",\n  Lambda: \"Λ\",\n  Mu: \"Μ\",\n  Nu: \"Ν\",\n  Xi: \"Ξ\",\n  Omicron: \"Ο\",\n  Pi: \"Π\",\n  Rho: \"Ρ\",\n  Sigma: \"Σ\",\n  Tau: \"Τ\",\n  Upsilon: \"Υ\",\n  Phi: \"Φ\",\n  Chi: \"Χ\",\n  Psi: \"Ψ\",\n  Omega: \"Ω\",\n  alpha: \"α\",\n  beta: \"β\",\n  gamma: \"γ\",\n  delta: \"δ\",\n  epsilon: \"ε\",\n  zeta: \"ζ\",\n  eta: \"η\",\n  theta: \"θ\",\n  iota: \"ι\",\n  kappa: \"κ\",\n  lambda: \"λ\",\n  mu: \"μ\",\n  nu: \"ν\",\n  xi: \"ξ\",\n  omicron: \"ο\",\n  pi: \"π\",\n  rho: \"ρ\",\n  sigmaf: \"ς\",\n  sigma: \"σ\",\n  tau: \"τ\",\n  upsilon: \"υ\",\n  phi: \"φ\",\n  chi: \"χ\",\n  psi: \"ψ\",\n  omega: \"ω\",\n  thetasym: \"ϑ\",\n  upsih: \"ϒ\",\n  piv: \"ϖ\",\n  OElig: \"Œ\",\n  oelig: \"œ\",\n  Scaron: \"Š\",\n  scaron: \"š\",\n  Yuml: \"Ÿ\",\n  fnof: \"ƒ\",\n  circ: \"ˆ\",\n  tilde: \"˜\",\n  ensp: \" \",\n  emsp: \" \",\n  thinsp: \" \",\n  zwnj: \"‌\",\n  zwj: \"‍\",\n  lrm: \"‎\",\n  rlm: \"‏\",\n  ndash: \"–\",\n  mdash: \"—\",\n  lsquo: \"‘\",\n  rsquo: \"’\",\n  sbquo: \"‚\",\n  ldquo: \"“\",\n  rdquo: \"”\",\n  bdquo: \"„\",\n  dagger: \"†\",\n  Dagger: \"‡\",\n  bull: \"•\",\n  hellip: \"…\",\n  permil: \"‰\",\n  prime: \"′\",\n  Prime: \"″\",\n  lsaquo: \"‹\",\n  rsaquo: \"›\",\n  oline: \"‾\",\n  euro: \"€\",\n  trade: \"™\",\n  larr: \"←\",\n  uarr: \"↑\",\n  rarr: \"→\",\n  darr: \"↓\",\n  harr: \"↔\",\n  crarr: \"↵\",\n  lceil: \"⌈\",\n  rceil: \"⌉\",\n  lfloor: \"⌊\",\n  rfloor: \"⌋\",\n  loz: \"◊\",\n  spades: \"♠\",\n  clubs: \"♣\",\n  hearts: \"♥\",\n  diams: \"♦\"\n});\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\n\nexports.entityMap = exports.HTML_ENTITIES;","var NAMESPACE = require(\"./conventions\").NAMESPACE; //[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\n\n\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/; //\\u10000-\\uEFFFF\n\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\" + nameStartChar.source.slice(1, -1) + \"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^' + nameStartChar.source + nameChar.source + '*(?:\\:' + nameStartChar.source + nameChar.source + '*)?$'); //var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\nvar S_TAG = 0; //tag name offerring\n\nvar S_ATTR = 1; //attr name offerring \n\nvar S_ATTR_SPACE = 2; //attr name end and space offer\n\nvar S_EQ = 3; //=space?\n\nvar S_ATTR_NOQUOT_VALUE = 4; //attr value(no quot value only)\n\nvar S_ATTR_END = 5; //attr value end and no space(quot end)\n\nvar S_TAG_SPACE = 6; //(attr value end || tag end ) && (space offer)\n\nvar S_TAG_CLOSE = 7; //closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\n\nfunction ParseError(message, locator) {\n  this.message = message;\n  this.locator = locator;\n  if (Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\n\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name;\n\nfunction XMLReader() {}\n\nXMLReader.prototype = {\n  parse: function parse(source, defaultNSMap, entityMap) {\n    var domBuilder = this.domBuilder;\n    domBuilder.startDocument();\n\n    _copy(defaultNSMap, defaultNSMap = {});\n\n    _parse(source, defaultNSMap, entityMap, domBuilder, this.errorHandler);\n\n    domBuilder.endDocument();\n  }\n};\n\nfunction _parse(source, defaultNSMapCopy, entityMap, domBuilder, errorHandler) {\n  function fixedFromCharCode(code) {\n    // String.prototype.fromCharCode does not supports\n    // > 2 bytes unicode chars directly\n    if (code > 0xffff) {\n      code -= 0x10000;\n      var surrogate1 = 0xd800 + (code >> 10),\n          surrogate2 = 0xdc00 + (code & 0x3ff);\n      return String.fromCharCode(surrogate1, surrogate2);\n    } else {\n      return String.fromCharCode(code);\n    }\n  }\n\n  function entityReplacer(a) {\n    var k = a.slice(1, -1);\n\n    if (k in entityMap) {\n      return entityMap[k];\n    } else if (k.charAt(0) === '#') {\n      return fixedFromCharCode(parseInt(k.substr(1).replace('x', '0x')));\n    } else {\n      errorHandler.error('entity not found:' + a);\n      return a;\n    }\n  }\n\n  function appendText(end) {\n    //has some bugs\n    if (end > start) {\n      var xt = source.substring(start, end).replace(/&#?\\w+;/g, entityReplacer);\n      locator && position(start);\n      domBuilder.characters(xt, 0, end - start);\n      start = end;\n    }\n  }\n\n  function position(p, m) {\n    while (p >= lineEnd && (m = linePattern.exec(source))) {\n      lineStart = m.index;\n      lineEnd = lineStart + m[0].length;\n      locator.lineNumber++; //console.log('line++:',locator,startPos,endPos)\n    }\n\n    locator.columnNumber = p - lineStart + 1;\n  }\n\n  var lineStart = 0;\n  var lineEnd = 0;\n  var linePattern = /.*(?:\\r\\n?|\\n)|.*$/g;\n  var locator = domBuilder.locator;\n  var parseStack = [{\n    currentNSMap: defaultNSMapCopy\n  }];\n  var closeMap = {};\n  var start = 0;\n\n  while (true) {\n    try {\n      var tagStart = source.indexOf('<', start);\n\n      if (tagStart < 0) {\n        if (!source.substr(start).match(/^\\s*$/)) {\n          var doc = domBuilder.doc;\n          var text = doc.createTextNode(source.substr(start));\n          doc.appendChild(text);\n          domBuilder.currentElement = text;\n        }\n\n        return;\n      }\n\n      if (tagStart > start) {\n        appendText(tagStart);\n      }\n\n      switch (source.charAt(tagStart + 1)) {\n        case '/':\n          var end = source.indexOf('>', tagStart + 3);\n          var tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n          var config = parseStack.pop();\n\n          if (end < 0) {\n            tagName = source.substring(tagStart + 2).replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' is not complete:' + config.tagName);\n            end = tagStart + 1 + tagName.length;\n          } else if (tagName.match(/\\s</)) {\n            tagName = tagName.replace(/[\\s<].*/, '');\n            errorHandler.error(\"end tag name: \" + tagName + ' maybe not complete');\n            end = tagStart + 1 + tagName.length;\n          }\n\n          var localNSMap = config.localNSMap;\n          var endMatch = config.tagName == tagName;\n          var endIgnoreCaseMach = endMatch || config.tagName && config.tagName.toLowerCase() == tagName.toLowerCase();\n\n          if (endIgnoreCaseMach) {\n            domBuilder.endElement(config.uri, config.localName, tagName);\n\n            if (localNSMap) {\n              for (var prefix in localNSMap) {\n                if (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n                  domBuilder.endPrefixMapping(prefix);\n                }\n              }\n            }\n\n            if (!endMatch) {\n              errorHandler.fatalError(\"end tag name: \" + tagName + ' is not match the current start tagName:' + config.tagName); // No known test case\n            }\n          } else {\n            parseStack.push(config);\n          }\n\n          end++;\n          break;\n        // end elment\n\n        case '?':\n          // <?...?>\n          locator && position(tagStart);\n          end = parseInstruction(source, tagStart, domBuilder);\n          break;\n\n        case '!':\n          // <!doctype,<![CDATA,<!--\n          locator && position(tagStart);\n          end = parseDCC(source, tagStart, domBuilder, errorHandler);\n          break;\n\n        default:\n          locator && position(tagStart);\n          var el = new ElementAttributes();\n          var currentNSMap = parseStack[parseStack.length - 1].currentNSMap; //elStartEnd\n\n          var end = parseElementStartPart(source, tagStart, el, currentNSMap, entityReplacer, errorHandler);\n          var len = el.length;\n\n          if (!el.closed && fixSelfClosed(source, end, el.tagName, closeMap)) {\n            el.closed = true;\n\n            if (!entityMap.nbsp) {\n              errorHandler.warning('unclosed xml attribute');\n            }\n          }\n\n          if (locator && len) {\n            var locator2 = copyLocator(locator, {}); //try{//attribute position fixed\n\n            for (var i = 0; i < len; i++) {\n              var a = el[i];\n              position(a.offset);\n              a.locator = copyLocator(locator, {});\n            }\n\n            domBuilder.locator = locator2;\n\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n\n            domBuilder.locator = locator;\n          } else {\n            if (appendElement(el, domBuilder, currentNSMap)) {\n              parseStack.push(el);\n            }\n          }\n\n          if (NAMESPACE.isHTML(el.uri) && !el.closed) {\n            end = parseHtmlSpecialContent(source, end, el.tagName, entityReplacer, domBuilder);\n          } else {\n            end++;\n          }\n\n      }\n    } catch (e) {\n      if (e instanceof ParseError) {\n        throw e;\n      }\n\n      errorHandler.error('element parse error: ' + e);\n      end = -1;\n    }\n\n    if (end > start) {\n      start = end;\n    } else {\n      //TODO: 这里有可能sax回退，有位置错误风险\n      appendText(Math.max(tagStart, start) + 1);\n    }\n  }\n}\n\nfunction copyLocator(f, t) {\n  t.lineNumber = f.lineNumber;\n  t.columnNumber = f.columnNumber;\n  return t;\n}\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\n\n\nfunction parseElementStartPart(source, start, el, currentNSMap, entityReplacer, errorHandler) {\n  /**\n   * @param {string} qname\n   * @param {string} value\n   * @param {number} startIndex\n   */\n  function addAttribute(qname, value, startIndex) {\n    if (el.attributeNames.hasOwnProperty(qname)) {\n      errorHandler.fatalError('Attribute ' + qname + ' redefined');\n    }\n\n    el.addValue(qname, value, startIndex);\n  }\n\n  var attrName;\n  var value;\n  var p = ++start;\n  var s = S_TAG; //status\n\n  while (true) {\n    var c = source.charAt(p);\n\n    switch (c) {\n      case '=':\n        if (s === S_ATTR) {\n          //attrName\n          attrName = source.slice(start, p);\n          s = S_EQ;\n        } else if (s === S_ATTR_SPACE) {\n          s = S_EQ;\n        } else {\n          //fatalError: equal must after attrName or space after attrName\n          throw new Error('attribute equal must after attrName'); // No known test case\n        }\n\n        break;\n\n      case '\\'':\n      case '\"':\n        if (s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n        ) {\n            //equal\n            if (s === S_ATTR) {\n              errorHandler.warning('attribute value must after \"=\"');\n              attrName = source.slice(start, p);\n            }\n\n            start = p + 1;\n            p = source.indexOf(c, start);\n\n            if (p > 0) {\n              value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              addAttribute(attrName, value, start - 1);\n              s = S_ATTR_END;\n            } else {\n              //fatalError: no end quot match\n              throw new Error('attribute value no end \\'' + c + '\\' match');\n            }\n          } else if (s == S_ATTR_NOQUOT_VALUE) {\n          value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer); //console.log(attrName,value,start,p)\n\n          addAttribute(attrName, value, start); //console.dir(el)\n\n          errorHandler.warning('attribute \"' + attrName + '\" missed start quot(' + c + ')!!');\n          start = p + 1;\n          s = S_ATTR_END;\n        } else {\n          //fatalError: no equal before\n          throw new Error('attribute value must after \"=\"'); // No known test case\n        }\n\n        break;\n\n      case '/':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            s = S_TAG_CLOSE;\n            el.closed = true;\n\n          case S_ATTR_NOQUOT_VALUE:\n          case S_ATTR:\n          case S_ATTR_SPACE:\n            break;\n          //case S_EQ:\n\n          default:\n            throw new Error(\"attribute invalid close char('/')\");\n          // No known test case\n        }\n\n        break;\n\n      case '':\n        //end document\n        errorHandler.error('unexpected end of input');\n\n        if (s == S_TAG) {\n          el.setTagName(source.slice(start, p));\n        }\n\n        return p;\n\n      case '>':\n        switch (s) {\n          case S_TAG:\n            el.setTagName(source.slice(start, p));\n\n          case S_ATTR_END:\n          case S_TAG_SPACE:\n          case S_TAG_CLOSE:\n            break;\n          //normal\n\n          case S_ATTR_NOQUOT_VALUE: //Compatible state\n\n          case S_ATTR:\n            value = source.slice(start, p);\n\n            if (value.slice(-1) === '/') {\n              el.closed = true;\n              value = value.slice(0, -1);\n            }\n\n          case S_ATTR_SPACE:\n            if (s === S_ATTR_SPACE) {\n              value = attrName;\n            }\n\n            if (s == S_ATTR_NOQUOT_VALUE) {\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!');\n              addAttribute(attrName, value.replace(/&#?\\w+;/g, entityReplacer), start);\n            } else {\n              if (!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + value + '\" missed value!! \"' + value + '\" instead!!');\n              }\n\n              addAttribute(value, value, start);\n            }\n\n            break;\n\n          case S_EQ:\n            throw new Error('attribute value missed!!');\n        } //\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\n\n        return p;\n\n      /*xml space '\\x20' | #x9 | #xD | #xA; */\n\n      case \"\\x80\":\n        c = ' ';\n\n      default:\n        if (c <= ' ') {\n          //space\n          switch (s) {\n            case S_TAG:\n              el.setTagName(source.slice(start, p)); //tagName\n\n              s = S_TAG_SPACE;\n              break;\n\n            case S_ATTR:\n              attrName = source.slice(start, p);\n              s = S_ATTR_SPACE;\n              break;\n\n            case S_ATTR_NOQUOT_VALUE:\n              var value = source.slice(start, p).replace(/&#?\\w+;/g, entityReplacer);\n              errorHandler.warning('attribute \"' + value + '\" missed quot(\")!!');\n              addAttribute(attrName, value, start);\n\n            case S_ATTR_END:\n              s = S_TAG_SPACE;\n              break;\n            //case S_TAG_SPACE:\n            //case S_EQ:\n            //case S_ATTR_SPACE:\n            //\tvoid();break;\n            //case S_TAG_CLOSE:\n            //ignore warning\n          }\n        } else {\n          //not space\n          //S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n          //S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n          switch (s) {\n            //case S_TAG:void();break;\n            //case S_ATTR:void();break;\n            //case S_ATTR_NOQUOT_VALUE:void();break;\n            case S_ATTR_SPACE:\n              var tagName = el.tagName;\n\n              if (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n                errorHandler.warning('attribute \"' + attrName + '\" missed value!! \"' + attrName + '\" instead2!!');\n              }\n\n              addAttribute(attrName, attrName, start);\n              start = p;\n              s = S_ATTR;\n              break;\n\n            case S_ATTR_END:\n              errorHandler.warning('attribute space is required\"' + attrName + '\"!!');\n\n            case S_TAG_SPACE:\n              s = S_ATTR;\n              start = p;\n              break;\n\n            case S_EQ:\n              s = S_ATTR_NOQUOT_VALUE;\n              start = p;\n              break;\n\n            case S_TAG_CLOSE:\n              throw new Error(\"elements closed character '/' and '>' must be connected to\");\n          }\n        }\n\n    } //end outer switch\n    //console.log('p++',p)\n\n\n    p++;\n  }\n}\n/**\n * @return true if has new namespace define\n */\n\n\nfunction appendElement(el, domBuilder, currentNSMap) {\n  var tagName = el.tagName;\n  var localNSMap = null; //var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\n  var i = el.length;\n\n  while (i--) {\n    var a = el[i];\n    var qName = a.qName;\n    var value = a.value;\n    var nsp = qName.indexOf(':');\n\n    if (nsp > 0) {\n      var prefix = a.prefix = qName.slice(0, nsp);\n      var localName = qName.slice(nsp + 1);\n      var nsPrefix = prefix === 'xmlns' && localName;\n    } else {\n      localName = qName;\n      prefix = null;\n      nsPrefix = qName === 'xmlns' && '';\n    } //can not set prefix,because prefix !== ''\n\n\n    a.localName = localName; //prefix == null for no ns prefix attribute \n\n    if (nsPrefix !== false) {\n      //hack!!\n      if (localNSMap == null) {\n        localNSMap = {}; //console.log(currentNSMap,0)\n\n        _copy(currentNSMap, currentNSMap = {}); //console.log(currentNSMap,1)\n\n      }\n\n      currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n      a.uri = NAMESPACE.XMLNS;\n      domBuilder.startPrefixMapping(nsPrefix, value);\n    }\n  }\n\n  var i = el.length;\n\n  while (i--) {\n    a = el[i];\n    var prefix = a.prefix;\n\n    if (prefix) {\n      //no prefix attribute has no namespace\n      if (prefix === 'xml') {\n        a.uri = NAMESPACE.XML;\n      }\n\n      if (prefix !== 'xmlns') {\n        a.uri = currentNSMap[prefix || '']; //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n      }\n    }\n  }\n\n  var nsp = tagName.indexOf(':');\n\n  if (nsp > 0) {\n    prefix = el.prefix = tagName.slice(0, nsp);\n    localName = el.localName = tagName.slice(nsp + 1);\n  } else {\n    prefix = null; //important!!\n\n    localName = el.localName = tagName;\n  } //no prefix element has default namespace\n\n\n  var ns = el.uri = currentNSMap[prefix || ''];\n  domBuilder.startElement(ns, localName, tagName, el); //endPrefixMapping and startPrefixMapping have not any help for dom builder\n  //localNSMap = null\n\n  if (el.closed) {\n    domBuilder.endElement(ns, localName, tagName);\n\n    if (localNSMap) {\n      for (prefix in localNSMap) {\n        if (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n          domBuilder.endPrefixMapping(prefix);\n        }\n      }\n    }\n  } else {\n    el.currentNSMap = currentNSMap;\n    el.localNSMap = localNSMap; //parseStack.push(el);\n\n    return true;\n  }\n}\n\nfunction parseHtmlSpecialContent(source, elStartEnd, tagName, entityReplacer, domBuilder) {\n  if (/^(?:script|textarea)$/i.test(tagName)) {\n    var elEndStart = source.indexOf('</' + tagName + '>', elStartEnd);\n    var text = source.substring(elStartEnd + 1, elEndStart);\n\n    if (/[&<]/.test(text)) {\n      if (/^script$/i.test(tagName)) {\n        //if(!/\\]\\]>/.test(text)){\n        //lexHandler.startCDATA();\n        domBuilder.characters(text, 0, text.length); //lexHandler.endCDATA();\n\n        return elEndStart; //}\n      } //}else{//text area\n\n\n      text = text.replace(/&#?\\w+;/g, entityReplacer);\n      domBuilder.characters(text, 0, text.length);\n      return elEndStart; //}\n    }\n  }\n\n  return elStartEnd + 1;\n}\n\nfunction fixSelfClosed(source, elStartEnd, tagName, closeMap) {\n  //if(tagName in closeMap){\n  var pos = closeMap[tagName];\n\n  if (pos == null) {\n    //console.log(tagName)\n    pos = source.lastIndexOf('</' + tagName + '>');\n\n    if (pos < elStartEnd) {\n      //忘记闭合\n      pos = source.lastIndexOf('</' + tagName);\n    }\n\n    closeMap[tagName] = pos;\n  }\n\n  return pos < elStartEnd; //} \n}\n\nfunction _copy(source, target) {\n  for (var n in source) {\n    if (Object.prototype.hasOwnProperty.call(source, n)) {\n      target[n] = source[n];\n    }\n  }\n}\n\nfunction parseDCC(source, start, domBuilder, errorHandler) {\n  //sure start with '<!'\n  var next = source.charAt(start + 2);\n\n  switch (next) {\n    case '-':\n      if (source.charAt(start + 3) === '-') {\n        var end = source.indexOf('-->', start + 4); //append comment source.substring(4,end)//<!--\n\n        if (end > start) {\n          domBuilder.comment(source, start + 4, end - start - 4);\n          return end + 3;\n        } else {\n          errorHandler.error(\"Unclosed comment\");\n          return -1;\n        }\n      } else {\n        //error\n        return -1;\n      }\n\n    default:\n      if (source.substr(start + 3, 6) == 'CDATA[') {\n        var end = source.indexOf(']]>', start + 9);\n        domBuilder.startCDATA();\n        domBuilder.characters(source, start + 9, end - start - 9);\n        domBuilder.endCDATA();\n        return end + 3;\n      } //<!DOCTYPE\n      //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \n\n\n      var matchs = split(source, start);\n      var len = matchs.length;\n\n      if (len > 1 && /!doctype/i.test(matchs[0][0])) {\n        var name = matchs[1][0];\n        var pubid = false;\n        var sysid = false;\n\n        if (len > 3) {\n          if (/^public$/i.test(matchs[2][0])) {\n            pubid = matchs[3][0];\n            sysid = len > 4 && matchs[4][0];\n          } else if (/^system$/i.test(matchs[2][0])) {\n            sysid = matchs[3][0];\n          }\n        }\n\n        var lastMatch = matchs[len - 1];\n        domBuilder.startDTD(name, pubid, sysid);\n        domBuilder.endDTD();\n        return lastMatch.index + lastMatch[0].length;\n      }\n\n  }\n\n  return -1;\n}\n\nfunction parseInstruction(source, start, domBuilder) {\n  var end = source.indexOf('?>', start);\n\n  if (end) {\n    var match = source.substring(start, end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\n    if (match) {\n      var len = match[0].length;\n      domBuilder.processingInstruction(match[1], match[2]);\n      return end + 2;\n    } else {\n      //error\n      return -1;\n    }\n  }\n\n  return -1;\n}\n\nfunction ElementAttributes() {\n  this.attributeNames = {};\n}\n\nElementAttributes.prototype = {\n  setTagName: function setTagName(tagName) {\n    if (!tagNamePattern.test(tagName)) {\n      throw new Error('invalid tagName:' + tagName);\n    }\n\n    this.tagName = tagName;\n  },\n  addValue: function addValue(qName, value, offset) {\n    if (!tagNamePattern.test(qName)) {\n      throw new Error('invalid attribute:' + qName);\n    }\n\n    this.attributeNames[qName] = this.length;\n    this[this.length++] = {\n      qName: qName,\n      value: value,\n      offset: offset\n    };\n  },\n  length: 0,\n  getLocalName: function getLocalName(i) {\n    return this[i].localName;\n  },\n  getLocator: function getLocator(i) {\n    return this[i].locator;\n  },\n  getQName: function getQName(i) {\n    return this[i].qName;\n  },\n  getURI: function getURI(i) {\n    return this[i].uri;\n  },\n  getValue: function getValue(i) {\n    return this[i].value;\n  } //\t,getIndex:function(uri, localName)){\n  //\t\tif(localName){\n  //\t\t\t\n  //\t\t}else{\n  //\t\t\tvar qName = uri\n  //\t\t}\n  //\t},\n  //\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n  //\tgetType:function(uri,localName){}\n  //\tgetType:function(i){},\n\n};\n\nfunction split(source, start) {\n  var match;\n  var buf = [];\n  var reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n  reg.lastIndex = start;\n  reg.exec(source); //skip <\n\n  while (match = reg.exec(source)) {\n    buf.push(match);\n    if (match[1]) return buf;\n  }\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;","var getUint64 = require('../utils/numbers.js').getUint64;\n\nvar parseSidx = function parseSidx(data) {\n  var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\n      result = {\n    version: data[0],\n    flags: new Uint8Array(data.subarray(1, 4)),\n    references: [],\n    referenceId: view.getUint32(4),\n    timescale: view.getUint32(8)\n  },\n      i = 12;\n\n  if (result.version === 0) {\n    result.earliestPresentationTime = view.getUint32(i);\n    result.firstOffset = view.getUint32(i + 4);\n    i += 8;\n  } else {\n    // read 64 bits\n    result.earliestPresentationTime = getUint64(data.subarray(i));\n    result.firstOffset = getUint64(data.subarray(i + 8));\n    i += 16;\n  }\n\n  i += 2; // reserved\n\n  var referenceCount = view.getUint16(i);\n  i += 2; // start of references\n\n  for (; referenceCount > 0; i += 12, referenceCount--) {\n    result.references.push({\n      referenceType: (data[i] & 0x80) >>> 7,\n      referencedSize: view.getUint32(i) & 0x7FFFFFFF,\n      subsegmentDuration: view.getUint32(i + 4),\n      startsWithSap: !!(data[i + 8] & 0x80),\n      sapType: (data[i + 8] & 0x70) >>> 4,\n      sapDeltaTime: view.getUint32(i + 8) & 0x0FFFFFFF\n    });\n  }\n\n  return result;\n};\n\nmodule.exports = parseSidx;","var MAX_UINT32 = Math.pow(2, 32);\n\nvar getUint64 = function getUint64(uint8) {\n  var dv = new DataView(uint8.buffer, uint8.byteOffset, uint8.byteLength);\n  var value;\n\n  if (dv.getBigUint64) {\n    value = dv.getBigUint64(0);\n\n    if (value < Number.MAX_SAFE_INTEGER) {\n      return Number(value);\n    }\n\n    return value;\n  }\n\n  return dv.getUint32(0) * MAX_UINT32 + dv.getUint32(4);\n};\n\nmodule.exports = {\n  getUint64: getUint64,\n  MAX_UINT32: MAX_UINT32\n};","/**\n * mux.js\n *\n * Copyright (c) Brightcove\n * Licensed Apache-2.0 https://github.com/videojs/mux.js/blob/master/LICENSE\n */\nvar ONE_SECOND_IN_TS = 90000,\n    // 90kHz clock\nsecondsToVideoTs,\n    secondsToAudioTs,\n    videoTsToSeconds,\n    audioTsToSeconds,\n    audioTsToVideoTs,\n    videoTsToAudioTs,\n    metadataTsToSeconds;\n\nsecondsToVideoTs = function secondsToVideoTs(seconds) {\n  return seconds * ONE_SECOND_IN_TS;\n};\n\nsecondsToAudioTs = function secondsToAudioTs(seconds, sampleRate) {\n  return seconds * sampleRate;\n};\n\nvideoTsToSeconds = function videoTsToSeconds(timestamp) {\n  return timestamp / ONE_SECOND_IN_TS;\n};\n\naudioTsToSeconds = function audioTsToSeconds(timestamp, sampleRate) {\n  return timestamp / sampleRate;\n};\n\naudioTsToVideoTs = function audioTsToVideoTs(timestamp, sampleRate) {\n  return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n};\n\nvideoTsToAudioTs = function videoTsToAudioTs(timestamp, sampleRate) {\n  return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n};\n/**\n * Adjust ID3 tag or caption timing information by the timeline pts values\n * (if keepOriginalTimestamps is false) and convert to seconds\n */\n\n\nmetadataTsToSeconds = function metadataTsToSeconds(timestamp, timelineStartPts, keepOriginalTimestamps) {\n  return videoTsToSeconds(keepOriginalTimestamps ? timestamp : timestamp - timelineStartPts);\n};\n\nmodule.exports = {\n  ONE_SECOND_IN_TS: ONE_SECOND_IN_TS,\n  secondsToVideoTs: secondsToVideoTs,\n  secondsToAudioTs: secondsToAudioTs,\n  videoTsToSeconds: videoTsToSeconds,\n  audioTsToSeconds: audioTsToSeconds,\n  audioTsToVideoTs: audioTsToVideoTs,\n  videoTsToAudioTs: videoTsToAudioTs,\n  metadataTsToSeconds: metadataTsToSeconds\n};","\"use strict\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitize = void 0;\n\nvar constants_1 = require(\"./constants\");\n\nfunction prependIdToSelectorText(selectorText, id) {\n  if (!id) return selectorText;\n  return selectorText.split(',').map(function (selector) {\n    return selector.trim();\n  }).map(function (selector) {\n    var s = selector.replace(/\\./g, '.' + id + '_').replace(/#/g, '#' + id + '_');\n\n    if (s.toLowerCase().startsWith('body')) {\n      return '#' + id + ' ' + s.substring(4);\n    } else {\n      return '#' + id + ' ' + s;\n    }\n  }).join(',');\n}\n\nfunction sanitizeCssValue(cssValue, allowedSchemas, rewriteExternalResources) {\n  return cssValue.trim().replace(/expression\\((.*?)\\)/g, '').replace(/url\\([\"']?(.*?)[\"']?\\)/g, function (match, url) {\n    var quote = '';\n\n    if (match.startsWith('url(\"')) {\n      quote = '\"';\n    } else if (match.startsWith(\"url('\")) {\n      quote = \"'\";\n    }\n\n    if (allowedSchemas.includes(url.toLowerCase().split(':')[0])) {\n      if (rewriteExternalResources) {\n        return 'url(' + quote + rewriteExternalResources(url) + quote + ')';\n      } else {\n        return match;\n      }\n    } else {\n      return '';\n    }\n  });\n}\n\nfunction sanitizeCssStyle(style, allowedSchemas, preserveCssPriority, rewriteExternalResources) {\n  if (!style) {\n    return;\n  }\n\n  var properties = [];\n\n  for (var i = 0; i < style.length; i++) {\n    var name = style[i];\n    properties.push(name);\n  }\n\n  for (var _i = 0, _properties = properties; _i < _properties.length; _i++) {\n    var _name = _properties[_i];\n\n    if (constants_1.allowedCssProperties.includes(_name)) {\n      var value = style.getPropertyValue(_name);\n      style.setProperty(_name, sanitizeCssValue(value, allowedSchemas, rewriteExternalResources), preserveCssPriority ? style.getPropertyPriority(_name) : undefined);\n    } else {\n      style.removeProperty(_name);\n    }\n  }\n}\n\nfunction sanitizeCssRule(rule, id, allowedSchemas, preserveCssPriority, rewriteExternalResources) {\n  rule.selectorText = prependIdToSelectorText(rule.selectorText, id);\n  sanitizeCssStyle(rule.style, allowedSchemas, preserveCssPriority, rewriteExternalResources);\n}\n\nvar defaultAllowedSchemas = ['http', 'https', 'mailto'];\n\nfunction sanitizeHtml(input, _ref) {\n  var _ref$dropAllHtmlTags = _ref.dropAllHtmlTags,\n      dropAllHtmlTags = _ref$dropAllHtmlTags === void 0 ? false : _ref$dropAllHtmlTags,\n      rewriteExternalLinks = _ref.rewriteExternalLinks,\n      rewriteExternalResources = _ref.rewriteExternalResources,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'msg_' + String.fromCharCode.apply(String, _toConsumableArray(new Array(24).fill(undefined).map(function () {\n    return Math.random() * 25 % 25 + 65;\n  }))) : _ref$id,\n      _ref$allowedSchemas = _ref.allowedSchemas,\n      allowedSchemas = _ref$allowedSchemas === void 0 ? defaultAllowedSchemas : _ref$allowedSchemas,\n      _ref$preserveCssPrior = _ref.preserveCssPriority,\n      preserveCssPriority = _ref$preserveCssPrior === void 0 ? true : _ref$preserveCssPrior,\n      _ref$noWrapper = _ref.noWrapper,\n      noWrapper = _ref$noWrapper === void 0 ? false : _ref$noWrapper;\n\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n\n  if (noWrapper) id = '';\n  var doc = new DOMParser().parseFromString(input, 'text/html'); // Ensure allowed schemas are lower case.\n\n  allowedSchemas = Array.isArray(allowedSchemas) ? allowedSchemas.map(function (schema) {\n    return schema.toLowerCase();\n  }) : defaultAllowedSchemas; // Remove comments.\n\n  var commentIter = doc.createNodeIterator(doc.documentElement, NodeFilter.SHOW_COMMENT);\n  var node;\n\n  while (node = commentIter.nextNode()) {\n    (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(node);\n  }\n\n  var removeTags = _toConsumableArray(constants_1.removeWithContents);\n\n  if (dropAllHtmlTags) {\n    removeTags.push('style');\n  } // Remove disallowed tags.\n\n\n  var disallowedList = doc.querySelectorAll(removeTags.join(', '));\n  disallowedList.forEach(function (element) {\n    return element.remove();\n  }); // Move styles from head to body.\n\n  var styleList = doc.querySelectorAll('head > style');\n  styleList.forEach(function (element) {\n    doc.body.appendChild(element);\n  }); // Filter other tags.\n\n  var toRemove = [];\n  var elementIter = doc.createNodeIterator(doc.body, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: function acceptNode() {\n      return NodeFilter.FILTER_ACCEPT;\n    }\n  });\n\n  while (node = elementIter.nextNode()) {\n    var element = node;\n    var tagName = element.tagName.toLowerCase();\n\n    if (tagName === 'body' || tagName === 'html') {\n      continue;\n    }\n\n    if (dropAllHtmlTags) {\n      if (node.textContent) {\n        var textNode = doc.createTextNode(node.textContent);\n        (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.replaceChild(textNode, node);\n      } else {\n        (_c = node.parentNode) === null || _c === void 0 ? void 0 : _c.removeChild(node);\n      }\n\n      continue;\n    }\n\n    if (tagName in constants_1.allowedTags) {\n      var allowedAttributes = constants_1.allowedTags[tagName];\n\n      var _iterator = _createForOfIteratorHelper(element.getAttributeNames()),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var attribute = _step.value;\n\n          if (!allowedAttributes.includes(attribute)) {\n            element.removeAttribute(attribute);\n          } else if (attribute === 'class' && !noWrapper) {\n            element.setAttribute(attribute, (_e = (_d = element.getAttribute(attribute)) === null || _d === void 0 ? void 0 : _d.split(' ').map(function (className) {\n              return id + '_' + className;\n            }).join(' ')) !== null && _e !== void 0 ? _e : '');\n          } else if (attribute === 'id' && !noWrapper) {\n            element.setAttribute(attribute, id + '_' + ((_f = element.getAttribute(attribute)) !== null && _f !== void 0 ? _f : ''));\n          } else if (attribute === 'href' || attribute === 'src') {\n            var value = (_g = element.getAttribute(attribute)) !== null && _g !== void 0 ? _g : '';\n\n            if (!allowedSchemas.includes(value.toLowerCase().split(':')[0])) {\n              element.removeAttribute(attribute);\n            } else if (attribute === 'href' && rewriteExternalLinks) {\n              element.setAttribute(attribute, rewriteExternalLinks(value));\n            } else if (attribute === 'src' && rewriteExternalResources) {\n              element.setAttribute(attribute, rewriteExternalResources(value));\n            }\n          }\n        } // Sanitize CSS.\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      sanitizeCssStyle(element.style, allowedSchemas, preserveCssPriority, rewriteExternalResources);\n\n      if (tagName === 'a') {\n        // Add rel=\"noopener noreferrer\" to <a>\n        element.setAttribute('rel', 'noopener noreferrer'); // Add target=\"_blank\" to <a>\n\n        element.setAttribute('target', '_blank');\n      }\n    } else {\n      element.insertAdjacentHTML('afterend', element.innerHTML);\n      toRemove.push(element);\n    }\n  }\n\n  for (var _i2 = 0, _toRemove = toRemove; _i2 < _toRemove.length; _i2++) {\n    var _element = _toRemove[_i2];\n\n    try {\n      try {\n        (_h = _element.parentNode) === null || _h === void 0 ? void 0 : _h.removeChild(_element);\n      } catch (_j) {\n        _element.outerHTML = '';\n      }\n    } catch (_k) {\n      try {\n        _element.remove();\n      } catch (_l) {}\n    }\n  } // Prepend wrapper ID.\n\n\n  var bodyStyleList = doc.querySelectorAll('body style');\n  bodyStyleList.forEach(function (element) {\n    var styleElement = element;\n    var stylesheet = styleElement.sheet;\n    var newRules = [];\n\n    if (!stylesheet.cssRules) {\n      styleElement.textContent = '';\n      return;\n    }\n\n    for (var i = 0; i < stylesheet.cssRules.length; i++) {\n      var rule = stylesheet.cssRules[i];\n\n      if ('selectorText' in rule) {\n        sanitizeCssRule(rule, id, allowedSchemas, preserveCssPriority, rewriteExternalResources);\n        newRules.push(rule);\n      } else if ('cssRules' in rule && 'media' in rule) {\n        // According to https://www.caniemail.com/,\n        // out of all at-rules, Gmail only supports @media.\n        var mediaRule = rule;\n        var newRulesMedia = [];\n\n        for (var _i3 = 0; _i3 < mediaRule.cssRules.length; _i3++) {\n          var _rule = mediaRule.cssRules[_i3];\n\n          if (_rule.type === _rule.STYLE_RULE) {\n            sanitizeCssRule(_rule, id, allowedSchemas, preserveCssPriority, rewriteExternalResources);\n            newRulesMedia.push(_rule);\n          }\n        }\n\n        while (mediaRule.cssRules.length > 0) {\n          mediaRule.deleteRule(0);\n        }\n\n        for (var _i4 = 0, _newRulesMedia = newRulesMedia; _i4 < _newRulesMedia.length; _i4++) {\n          var _rule2 = _newRulesMedia[_i4];\n          mediaRule.insertRule(_rule2.cssText, mediaRule.cssRules.length);\n        }\n\n        newRules.push(mediaRule);\n      }\n    }\n\n    styleElement.textContent = newRules.map(function (rule) {\n      return rule.cssText;\n    }).join('\\n');\n  }); // Wrap body inside of a div with the generated ID.\n\n  if (noWrapper) {\n    return doc.body.innerHTML;\n  } else {\n    var div = doc.createElement('div');\n    div.id = id;\n    div.innerHTML = doc.body.innerHTML;\n    return div.outerHTML;\n  }\n}\n\nfunction sanitizeText(text) {\n  var div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nfunction sanitize(html, text, options) {\n  var contents = html !== null && html !== void 0 ? html : '';\n\n  if ((contents === null || contents === void 0 ? void 0 : contents.length) === 0 && text) {\n    contents = sanitizeText(text).split('\\n').map(function (line) {\n      return '<p>' + line + '</p>';\n    }).join('\\n');\n  }\n\n  return sanitizeHtml(contents, options !== null && options !== void 0 ? options : {});\n}\n\nexports.sanitize = sanitize;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.allowedCssProperties = exports.removeWithContents = exports.allowedTags = void 0;\nexports.allowedTags = {\n  a: ['class', 'href', 'id', 'style', 'target'],\n  address: ['class', 'id', 'style'],\n  b: ['class', 'id', 'style'],\n  blockquote: ['class', 'id', 'style'],\n  br: ['class', 'id', 'style'],\n  caption: ['class', 'id', 'style'],\n  cite: ['class', 'id', 'style'],\n  code: ['class', 'id', 'style'],\n  col: ['align', 'bgcolor', 'char', 'charoff', 'class', 'id', 'style', 'valign', 'width'],\n  colgroup: ['align', 'bgcolor', 'char', 'charoff', 'class', 'id', 'style', 'valign', 'width'],\n  center: ['class', 'id', 'style'],\n  dd: ['class', 'id', 'style'],\n  div: ['align', 'class', 'dir', 'id', 'style'],\n  dt: ['class', 'id', 'style'],\n  em: ['class', 'id', 'style'],\n  font: ['class', 'color', 'face', 'id', 'size', 'style'],\n  h1: ['align', 'class', 'dir', 'id', 'style'],\n  h2: ['align', 'class', 'dir', 'id', 'style'],\n  h3: ['align', 'class', 'dir', 'id', 'style'],\n  h4: ['align', 'class', 'dir', 'id', 'style'],\n  h5: ['align', 'class', 'dir', 'id', 'style'],\n  h6: ['align', 'class', 'dir', 'id', 'style'],\n  hr: ['align', 'size', 'width'],\n  i: ['class', 'id', 'style'],\n  img: ['align', 'alt', 'border', 'class', 'height', 'hspace', 'id', 'src', 'style', 'usemap', 'vspace', 'width'],\n  label: ['class', 'id', 'style'],\n  legend: ['class', 'id', 'style'],\n  li: ['class', 'dir', 'id', 'style', 'type'],\n  ol: ['class', 'dir', 'id', 'style', 'type', 'start', 'reversed'],\n  p: ['align', 'class', 'dir', 'id', 'style'],\n  pre: ['class', 'id', 'style'],\n  span: ['class', 'id', 'style'],\n  strong: ['class', 'id', 'style'],\n  style: [],\n  sub: ['class', 'id', 'style'],\n  sup: ['class', 'id', 'style'],\n  table: ['align', 'bgcolor', 'border', 'cellpadding', 'cellspacing', 'class', 'dir', 'frame', 'id', 'rules', 'style', 'width'],\n  tbody: ['class', 'id', 'style'],\n  td: ['abbr', 'align', 'bgcolor', 'class', 'colspan', 'dir', 'height', 'id', 'lang', 'rowspan', 'scope', 'style', 'valign', 'width'],\n  tfoot: ['align', 'bgcolor', 'char', 'charoff', 'class', 'id', 'style', 'valign'],\n  th: ['abbr', 'align', 'bgcolor', 'class', 'colspan', 'dir', 'height', 'id', 'lang', 'rowspan', 'scope', 'style', 'valign', 'width'],\n  thead: ['align', 'bgcolol', 'char', 'charoff', 'class', 'id', 'style', 'valign'],\n  tr: ['align', 'bgcolor', 'char', 'charoff', 'class', 'dir', 'id', 'style', 'valign'],\n  u: ['class', 'id', 'style'],\n  ul: ['class', 'dir', 'id', 'style']\n};\nexports.removeWithContents = ['script', 'iframe', 'textarea', 'title', 'noscript', 'noembed', 'svg'];\nexports.allowedCssProperties = ['azimuth', 'background', 'background-blend-mode', 'background-clip', 'background-color', 'background-image', 'background-origin', 'background-position', 'background-position-x', 'background-position-y', 'background-repeat', 'background-repeat-x', 'background-repeat-y', 'background-size', 'border', 'border-bottom', 'border-bottom-color', 'border-bottom-left-radius', 'border-bottom-right-radius', 'border-bottom-style', 'border-bottom-width', 'border-collapse', 'border-color', 'border-left', 'border-left-color', 'border-left-style', 'border-left-width', 'border-radius', 'border-right', 'border-right-color', 'border-right-style', 'border-right-width', 'border-spacing', 'border-style', 'border-top', 'border-top-color', 'border-top-left-radius', 'border-top-right-radius', 'border-top-style', 'border-top-width', 'border-width', 'box-sizing', 'break-after', 'break-before', 'break-inside', 'caption-side', 'clear', 'color', 'column-count', 'column-fill', 'column-gap', 'column-rule', 'column-rule-color', 'column-rule-style', 'column-rule-width', 'column-span', 'column-width', 'columns', 'direction', 'display', 'elevation', 'empty-cells', 'float', 'font', 'font-family', 'font-feature-settings', 'font-kerning', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-synthesis', 'font-variant', 'font-variant-alternates', 'font-variant-caps', 'font-variant-east-asian', 'font-variant-ligatures', 'font-variant-numeric', 'font-weight', 'height', 'image-orientation', 'image-resolution', 'ime-mode', 'isolation', 'layout-flow', 'layout-grid', 'layout-grid-char', 'layout-grid-char-spacing', 'layout-grid-line', 'layout-grid-mode', 'layout-grid-type', 'letter-spacing', 'line-break', 'line-height', 'list-style', 'list-style-position', 'list-style-type', 'margin', 'margin-bottom', 'margin-left', 'margin-right', 'margin-top', 'marker-offset', 'max-height', 'max-width', 'min-height', 'min-width', 'mix-blend-mode', 'object-fit', 'object-position', 'opacity', 'outline', 'outline-color', 'outline-style', 'outline-width', 'overflow', 'overflow-x', 'overflow-y', 'padding', 'padding-bottom', 'padding-left', 'padding-right', 'padding-top', 'page-break-after', 'page-break-before', 'page-break-inside', 'pause', 'pause-after', 'pause-before', 'pitch', 'pitch-range', 'quotes', 'richness', 'speak', 'speak-header', 'speak-numeral', 'speak-punctuation', 'speech-rate', 'stress', 'table-layout', 'text-align', 'text-align-last', 'text-autospace', 'text-combine-upright', 'text-decoration', 'text-decoration-color', 'text-decoration-line', 'text-decoration-skip', 'text-decoration-style', 'text-emphasis', 'text-emphasis-color', 'text-emphasis-style', 'text-indent', 'text-justify', 'text-kashida-space', 'text-orientation', 'text-overflow', 'text-transform', 'text-underline-position', 'unicode-bidi', 'vertical-align', 'voice-family', 'white-space', 'width', 'word-break', 'word-spacing', 'word-wrap', 'writing-mode', 'zoom'];","import { stringToBytes, toUint8, bytesMatch, bytesToString, toHexString, padStart, bytesToNumber } from './byte-helpers.js';\nimport { getAvcCodec, getHvcCodec, getAv1Codec } from './codec-helpers.js';\nimport { parseOpusHead } from './opus-helpers.js';\n\nvar normalizePath = function normalizePath(path) {\n  if (typeof path === 'string') {\n    return stringToBytes(path);\n  }\n\n  if (typeof path === 'number') {\n    return path;\n  }\n\n  return path;\n};\n\nvar normalizePaths = function normalizePaths(paths) {\n  if (!Array.isArray(paths)) {\n    return [normalizePath(paths)];\n  }\n\n  return paths.map(function (p) {\n    return normalizePath(p);\n  });\n};\n\nvar DESCRIPTORS;\nexport var parseDescriptors = function parseDescriptors(bytes) {\n  bytes = toUint8(bytes);\n  var results = [];\n  var i = 0;\n\n  while (bytes.length > i) {\n    var tag = bytes[i];\n    var size = 0;\n    var headerSize = 0; // tag\n\n    headerSize++;\n    var byte = bytes[headerSize]; // first byte\n\n    headerSize++;\n\n    while (byte & 0x80) {\n      size = (byte & 0x7F) << 7;\n      byte = bytes[headerSize];\n      headerSize++;\n    }\n\n    size += byte & 0x7F;\n\n    for (var z = 0; z < DESCRIPTORS.length; z++) {\n      var _DESCRIPTORS$z = DESCRIPTORS[z],\n          id = _DESCRIPTORS$z.id,\n          parser = _DESCRIPTORS$z.parser;\n\n      if (tag === id) {\n        results.push(parser(bytes.subarray(headerSize, headerSize + size)));\n        break;\n      }\n    }\n\n    i += size + headerSize;\n  }\n\n  return results;\n};\nDESCRIPTORS = [{\n  id: 0x03,\n  parser: function parser(bytes) {\n    var desc = {\n      tag: 0x03,\n      id: bytes[0] << 8 | bytes[1],\n      flags: bytes[2],\n      size: 3,\n      dependsOnEsId: 0,\n      ocrEsId: 0,\n      descriptors: [],\n      url: ''\n    }; // depends on es id\n\n    if (desc.flags & 0x80) {\n      desc.dependsOnEsId = bytes[desc.size] << 8 | bytes[desc.size + 1];\n      desc.size += 2;\n    } // url\n\n\n    if (desc.flags & 0x40) {\n      var len = bytes[desc.size];\n      desc.url = bytesToString(bytes.subarray(desc.size + 1, desc.size + 1 + len));\n      desc.size += len;\n    } // ocr es id\n\n\n    if (desc.flags & 0x20) {\n      desc.ocrEsId = bytes[desc.size] << 8 | bytes[desc.size + 1];\n      desc.size += 2;\n    }\n\n    desc.descriptors = parseDescriptors(bytes.subarray(desc.size)) || [];\n    return desc;\n  }\n}, {\n  id: 0x04,\n  parser: function parser(bytes) {\n    // DecoderConfigDescriptor\n    var desc = {\n      tag: 0x04,\n      oti: bytes[0],\n      streamType: bytes[1],\n      bufferSize: bytes[2] << 16 | bytes[3] << 8 | bytes[4],\n      maxBitrate: bytes[5] << 24 | bytes[6] << 16 | bytes[7] << 8 | bytes[8],\n      avgBitrate: bytes[9] << 24 | bytes[10] << 16 | bytes[11] << 8 | bytes[12],\n      descriptors: parseDescriptors(bytes.subarray(13))\n    };\n    return desc;\n  }\n}, {\n  id: 0x05,\n  parser: function parser(bytes) {\n    // DecoderSpecificInfo\n    return {\n      tag: 0x05,\n      bytes: bytes\n    };\n  }\n}, {\n  id: 0x06,\n  parser: function parser(bytes) {\n    // SLConfigDescriptor\n    return {\n      tag: 0x06,\n      bytes: bytes\n    };\n  }\n}];\n/**\n * find any number of boxes by name given a path to it in an iso bmff\n * such as mp4.\n *\n * @param {TypedArray} bytes\n *        bytes for the iso bmff to search for boxes in\n *\n * @param {Uint8Array[]|string[]|string|Uint8Array} name\n *        An array of paths or a single path representing the name\n *        of boxes to search through in bytes. Paths may be\n *        uint8 (character codes) or strings.\n *\n * @param {boolean} [complete=false]\n *        Should we search only for complete boxes on the final path.\n *        This is very useful when you do not want to get back partial boxes\n *        in the case of streaming files.\n *\n * @return {Uint8Array[]}\n *         An array of the end paths that we found.\n */\n\nexport var findBox = function findBox(bytes, paths, complete) {\n  if (complete === void 0) {\n    complete = false;\n  }\n\n  paths = normalizePaths(paths);\n  bytes = toUint8(bytes);\n  var results = [];\n\n  if (!paths.length) {\n    // short-circuit the search for empty paths\n    return results;\n  }\n\n  var i = 0;\n\n  while (i < bytes.length) {\n    var size = (bytes[i] << 24 | bytes[i + 1] << 16 | bytes[i + 2] << 8 | bytes[i + 3]) >>> 0;\n    var type = bytes.subarray(i + 4, i + 8); // invalid box format.\n\n    if (size === 0) {\n      break;\n    }\n\n    var end = i + size;\n\n    if (end > bytes.length) {\n      // this box is bigger than the number of bytes we have\n      // and complete is set, we cannot find any more boxes.\n      if (complete) {\n        break;\n      }\n\n      end = bytes.length;\n    }\n\n    var data = bytes.subarray(i + 8, end);\n\n    if (bytesMatch(type, paths[0])) {\n      if (paths.length === 1) {\n        // this is the end of the path and we've found the box we were\n        // looking for\n        results.push(data);\n      } else {\n        // recursively search for the next box along the path\n        results.push.apply(results, findBox(data, paths.slice(1), complete));\n      }\n    }\n\n    i = end;\n  } // we've finished searching all of bytes\n\n\n  return results;\n};\n/**\n * Search for a single matching box by name in an iso bmff format like\n * mp4. This function is useful for finding codec boxes which\n * can be placed arbitrarily in sample descriptions depending\n * on the version of the file or file type.\n *\n * @param {TypedArray} bytes\n *        bytes for the iso bmff to search for boxes in\n *\n * @param {string|Uint8Array} name\n *        The name of the box to find.\n *\n * @return {Uint8Array[]}\n *         a subarray of bytes representing the name boxed we found.\n */\n\nexport var findNamedBox = function findNamedBox(bytes, name) {\n  name = normalizePath(name);\n\n  if (!name.length) {\n    // short-circuit the search for empty paths\n    return bytes.subarray(bytes.length);\n  }\n\n  var i = 0;\n\n  while (i < bytes.length) {\n    if (bytesMatch(bytes.subarray(i, i + name.length), name)) {\n      var size = (bytes[i - 4] << 24 | bytes[i - 3] << 16 | bytes[i - 2] << 8 | bytes[i - 1]) >>> 0;\n      var end = size > 1 ? i + size : bytes.byteLength;\n      return bytes.subarray(i + 4, end);\n    }\n\n    i++;\n  } // we've finished searching all of bytes\n\n\n  return bytes.subarray(bytes.length);\n};\n\nvar parseSamples = function parseSamples(data, entrySize, parseEntry) {\n  if (entrySize === void 0) {\n    entrySize = 4;\n  }\n\n  if (parseEntry === void 0) {\n    parseEntry = function parseEntry(d) {\n      return bytesToNumber(d);\n    };\n  }\n\n  var entries = [];\n\n  if (!data || !data.length) {\n    return entries;\n  }\n\n  var entryCount = bytesToNumber(data.subarray(4, 8));\n\n  for (var i = 8; entryCount; i += entrySize, entryCount--) {\n    entries.push(parseEntry(data.subarray(i, i + entrySize)));\n  }\n\n  return entries;\n};\n\nexport var buildFrameTable = function buildFrameTable(stbl, timescale) {\n  var keySamples = parseSamples(findBox(stbl, ['stss'])[0]);\n  var chunkOffsets = parseSamples(findBox(stbl, ['stco'])[0]);\n  var timeToSamples = parseSamples(findBox(stbl, ['stts'])[0], 8, function (entry) {\n    return {\n      sampleCount: bytesToNumber(entry.subarray(0, 4)),\n      sampleDelta: bytesToNumber(entry.subarray(4, 8))\n    };\n  });\n  var samplesToChunks = parseSamples(findBox(stbl, ['stsc'])[0], 12, function (entry) {\n    return {\n      firstChunk: bytesToNumber(entry.subarray(0, 4)),\n      samplesPerChunk: bytesToNumber(entry.subarray(4, 8)),\n      sampleDescriptionIndex: bytesToNumber(entry.subarray(8, 12))\n    };\n  });\n  var stsz = findBox(stbl, ['stsz'])[0]; // stsz starts with a 4 byte sampleSize which we don't need\n\n  var sampleSizes = parseSamples(stsz && stsz.length && stsz.subarray(4) || null);\n  var frames = [];\n\n  for (var chunkIndex = 0; chunkIndex < chunkOffsets.length; chunkIndex++) {\n    var samplesInChunk = void 0;\n\n    for (var i = 0; i < samplesToChunks.length; i++) {\n      var sampleToChunk = samplesToChunks[i];\n      var isThisOne = chunkIndex + 1 >= sampleToChunk.firstChunk && (i + 1 >= samplesToChunks.length || chunkIndex + 1 < samplesToChunks[i + 1].firstChunk);\n\n      if (isThisOne) {\n        samplesInChunk = sampleToChunk.samplesPerChunk;\n        break;\n      }\n    }\n\n    var chunkOffset = chunkOffsets[chunkIndex];\n\n    for (var _i = 0; _i < samplesInChunk; _i++) {\n      var frameEnd = sampleSizes[frames.length]; // if we don't have key samples every frame is a keyframe\n\n      var keyframe = !keySamples.length;\n\n      if (keySamples.length && keySamples.indexOf(frames.length + 1) !== -1) {\n        keyframe = true;\n      }\n\n      var frame = {\n        keyframe: keyframe,\n        start: chunkOffset,\n        end: chunkOffset + frameEnd\n      };\n\n      for (var k = 0; k < timeToSamples.length; k++) {\n        var _timeToSamples$k = timeToSamples[k],\n            sampleCount = _timeToSamples$k.sampleCount,\n            sampleDelta = _timeToSamples$k.sampleDelta;\n\n        if (frames.length <= sampleCount) {\n          // ms to ns\n          var lastTimestamp = frames.length ? frames[frames.length - 1].timestamp : 0;\n          frame.timestamp = lastTimestamp + sampleDelta / timescale * 1000;\n          frame.duration = sampleDelta;\n          break;\n        }\n      }\n\n      frames.push(frame);\n      chunkOffset += frameEnd;\n    }\n  }\n\n  return frames;\n};\nexport var addSampleDescription = function addSampleDescription(track, bytes) {\n  var codec = bytesToString(bytes.subarray(0, 4));\n\n  if (track.type === 'video') {\n    track.info = track.info || {};\n    track.info.width = bytes[28] << 8 | bytes[29];\n    track.info.height = bytes[30] << 8 | bytes[31];\n  } else if (track.type === 'audio') {\n    track.info = track.info || {};\n    track.info.channels = bytes[20] << 8 | bytes[21];\n    track.info.bitDepth = bytes[22] << 8 | bytes[23];\n    track.info.sampleRate = bytes[28] << 8 | bytes[29];\n  }\n\n  if (codec === 'avc1') {\n    var avcC = findNamedBox(bytes, 'avcC'); // AVCDecoderConfigurationRecord\n\n    codec += \".\" + getAvcCodec(avcC);\n    track.info.avcC = avcC; // TODO: do we need to parse all this?\n\n    /* {\n      configurationVersion: avcC[0],\n      profile: avcC[1],\n      profileCompatibility: avcC[2],\n      level: avcC[3],\n      lengthSizeMinusOne: avcC[4] & 0x3\n    };\n     let spsNalUnitCount = avcC[5] & 0x1F;\n    const spsNalUnits = track.info.avc.spsNalUnits = [];\n     // past spsNalUnitCount\n    let offset = 6;\n     while (spsNalUnitCount--) {\n      const nalLen = avcC[offset] << 8 | avcC[offset + 1];\n       spsNalUnits.push(avcC.subarray(offset + 2, offset + 2 + nalLen));\n       offset += nalLen + 2;\n    }\n    let ppsNalUnitCount = avcC[offset];\n    const ppsNalUnits = track.info.avc.ppsNalUnits = [];\n     // past ppsNalUnitCount\n    offset += 1;\n     while (ppsNalUnitCount--) {\n      const nalLen = avcC[offset] << 8 | avcC[offset + 1];\n       ppsNalUnits.push(avcC.subarray(offset + 2, offset + 2 + nalLen));\n       offset += nalLen + 2;\n    }*/\n    // HEVCDecoderConfigurationRecord\n  } else if (codec === 'hvc1' || codec === 'hev1') {\n    codec += \".\" + getHvcCodec(findNamedBox(bytes, 'hvcC'));\n  } else if (codec === 'mp4a' || codec === 'mp4v') {\n    var esds = findNamedBox(bytes, 'esds');\n    var esDescriptor = parseDescriptors(esds.subarray(4))[0];\n    var decoderConfig = esDescriptor && esDescriptor.descriptors.filter(function (_ref) {\n      var tag = _ref.tag;\n      return tag === 0x04;\n    })[0];\n\n    if (decoderConfig) {\n      // most codecs do not have a further '.'\n      // such as 0xa5 for ac-3 and 0xa6 for e-ac-3\n      codec += '.' + toHexString(decoderConfig.oti);\n\n      if (decoderConfig.oti === 0x40) {\n        codec += '.' + (decoderConfig.descriptors[0].bytes[0] >> 3).toString();\n      } else if (decoderConfig.oti === 0x20) {\n        codec += '.' + decoderConfig.descriptors[0].bytes[4].toString();\n      } else if (decoderConfig.oti === 0xdd) {\n        codec = 'vorbis';\n      }\n    } else if (track.type === 'audio') {\n      codec += '.40.2';\n    } else {\n      codec += '.20.9';\n    }\n  } else if (codec === 'av01') {\n    // AV1DecoderConfigurationRecord\n    codec += \".\" + getAv1Codec(findNamedBox(bytes, 'av1C'));\n  } else if (codec === 'vp09') {\n    // VPCodecConfigurationRecord\n    var vpcC = findNamedBox(bytes, 'vpcC'); // https://www.webmproject.org/vp9/mp4/\n\n    var profile = vpcC[0];\n    var level = vpcC[1];\n    var bitDepth = vpcC[2] >> 4;\n    var chromaSubsampling = (vpcC[2] & 0x0F) >> 1;\n    var videoFullRangeFlag = (vpcC[2] & 0x0F) >> 3;\n    var colourPrimaries = vpcC[3];\n    var transferCharacteristics = vpcC[4];\n    var matrixCoefficients = vpcC[5];\n    codec += \".\" + padStart(profile, 2, '0');\n    codec += \".\" + padStart(level, 2, '0');\n    codec += \".\" + padStart(bitDepth, 2, '0');\n    codec += \".\" + padStart(chromaSubsampling, 2, '0');\n    codec += \".\" + padStart(colourPrimaries, 2, '0');\n    codec += \".\" + padStart(transferCharacteristics, 2, '0');\n    codec += \".\" + padStart(matrixCoefficients, 2, '0');\n    codec += \".\" + padStart(videoFullRangeFlag, 2, '0');\n  } else if (codec === 'theo') {\n    codec = 'theora';\n  } else if (codec === 'spex') {\n    codec = 'speex';\n  } else if (codec === '.mp3') {\n    codec = 'mp4a.40.34';\n  } else if (codec === 'msVo') {\n    codec = 'vorbis';\n  } else if (codec === 'Opus') {\n    codec = 'opus';\n    var dOps = findNamedBox(bytes, 'dOps');\n    track.info.opus = parseOpusHead(dOps); // TODO: should this go into the webm code??\n    // Firefox requires a codecDelay for opus playback\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=1276238\n\n    track.info.codecDelay = 6500000;\n  } else {\n    codec = codec.toLowerCase();\n  }\n  /* eslint-enable */\n  // flac, ac-3, ec-3, opus\n\n\n  track.codec = codec;\n};\nexport var parseTracks = function parseTracks(bytes, frameTable) {\n  if (frameTable === void 0) {\n    frameTable = true;\n  }\n\n  bytes = toUint8(bytes);\n  var traks = findBox(bytes, ['moov', 'trak'], true);\n  var tracks = [];\n  traks.forEach(function (trak) {\n    var track = {\n      bytes: trak\n    };\n    var mdia = findBox(trak, ['mdia'])[0];\n    var hdlr = findBox(mdia, ['hdlr'])[0];\n    var trakType = bytesToString(hdlr.subarray(8, 12));\n\n    if (trakType === 'soun') {\n      track.type = 'audio';\n    } else if (trakType === 'vide') {\n      track.type = 'video';\n    } else {\n      track.type = trakType;\n    }\n\n    var tkhd = findBox(trak, ['tkhd'])[0];\n\n    if (tkhd) {\n      var view = new DataView(tkhd.buffer, tkhd.byteOffset, tkhd.byteLength);\n      var tkhdVersion = view.getUint8(0);\n      track.number = tkhdVersion === 0 ? view.getUint32(12) : view.getUint32(20);\n    }\n\n    var mdhd = findBox(mdia, ['mdhd'])[0];\n\n    if (mdhd) {\n      // mdhd is a FullBox, meaning it will have its own version as the first byte\n      var version = mdhd[0];\n      var index = version === 0 ? 12 : 20;\n      track.timescale = (mdhd[index] << 24 | mdhd[index + 1] << 16 | mdhd[index + 2] << 8 | mdhd[index + 3]) >>> 0;\n    }\n\n    var stbl = findBox(mdia, ['minf', 'stbl'])[0];\n    var stsd = findBox(stbl, ['stsd'])[0];\n    var descriptionCount = bytesToNumber(stsd.subarray(4, 8));\n    var offset = 8; // add codec and codec info\n\n    while (descriptionCount--) {\n      var len = bytesToNumber(stsd.subarray(offset, offset + 4));\n      var sampleDescriptor = stsd.subarray(offset + 4, offset + 4 + len);\n      addSampleDescription(track, sampleDescriptor);\n      offset += 4 + len;\n    }\n\n    if (frameTable) {\n      track.frameTable = buildFrameTable(stbl, track.timescale);\n    } // codec has no sub parameters\n\n\n    tracks.push(track);\n  });\n  return tracks;\n};\nexport var parseMediaInfo = function parseMediaInfo(bytes) {\n  var mvhd = findBox(bytes, ['moov', 'mvhd'], true)[0];\n\n  if (!mvhd || !mvhd.length) {\n    return;\n  }\n\n  var info = {}; // ms to ns\n  // mvhd v1 has 8 byte duration and other fields too\n\n  if (mvhd[0] === 1) {\n    info.timestampScale = bytesToNumber(mvhd.subarray(20, 24));\n    info.duration = bytesToNumber(mvhd.subarray(24, 32));\n  } else {\n    info.timestampScale = bytesToNumber(mvhd.subarray(12, 16));\n    info.duration = bytesToNumber(mvhd.subarray(16, 20));\n  }\n\n  info.bytes = mvhd;\n  return info;\n};","export var OPUS_HEAD = new Uint8Array([// O, p, u, s\n0x4f, 0x70, 0x75, 0x73, // H, e, a, d\n0x48, 0x65, 0x61, 0x64]); // https://wiki.xiph.org/OggOpus\n// https://vfrmaniac.fushizen.eu/contents/opus_in_isobmff.html\n// https://opus-codec.org/docs/opusfile_api-0.7/structOpusHead.html\n\nexport var parseOpusHead = function parseOpusHead(bytes) {\n  var view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n  var version = view.getUint8(0); // version 0, from mp4, does not use littleEndian.\n\n  var littleEndian = version !== 0;\n  var config = {\n    version: version,\n    channels: view.getUint8(1),\n    preSkip: view.getUint16(2, littleEndian),\n    sampleRate: view.getUint32(4, littleEndian),\n    outputGain: view.getUint16(8, littleEndian),\n    channelMappingFamily: view.getUint8(10)\n  };\n\n  if (config.channelMappingFamily > 0 && bytes.length > 10) {\n    config.streamCount = view.getUint8(11);\n    config.twoChannelStreamCount = view.getUint8(12);\n    config.channelMapping = [];\n\n    for (var c = 0; c < config.channels; c++) {\n      config.channelMapping.push(view.getUint8(13 + c));\n    }\n  }\n\n  return config;\n};\nexport var setOpusHead = function setOpusHead(config) {\n  var size = config.channelMappingFamily <= 0 ? 11 : 12 + config.channels;\n  var view = new DataView(new ArrayBuffer(size));\n  var littleEndian = config.version !== 0;\n  view.setUint8(0, config.version);\n  view.setUint8(1, config.channels);\n  view.setUint16(2, config.preSkip, littleEndian);\n  view.setUint32(4, config.sampleRate, littleEndian);\n  view.setUint16(8, config.outputGain, littleEndian);\n  view.setUint8(10, config.channelMappingFamily);\n\n  if (config.channelMappingFamily > 0) {\n    view.setUint8(11, config.streamCount);\n    config.channelMapping.foreach(function (cm, i) {\n      view.setUint8(12 + i, cm);\n    });\n  }\n\n  return new Uint8Array(view.buffer);\n};","import { toUint8, bytesToNumber, bytesMatch, bytesToString, numberToBytes, padStart } from './byte-helpers';\nimport { getAvcCodec, getHvcCodec, getAv1Codec } from './codec-helpers.js'; // relevant specs for this parser:\n// https://matroska-org.github.io/libebml/specs.html\n// https://www.matroska.org/technical/elements.html\n// https://www.webmproject.org/docs/container/\n\nexport var EBML_TAGS = {\n  EBML: toUint8([0x1A, 0x45, 0xDF, 0xA3]),\n  DocType: toUint8([0x42, 0x82]),\n  Segment: toUint8([0x18, 0x53, 0x80, 0x67]),\n  SegmentInfo: toUint8([0x15, 0x49, 0xA9, 0x66]),\n  Tracks: toUint8([0x16, 0x54, 0xAE, 0x6B]),\n  Track: toUint8([0xAE]),\n  TrackNumber: toUint8([0xd7]),\n  DefaultDuration: toUint8([0x23, 0xe3, 0x83]),\n  TrackEntry: toUint8([0xAE]),\n  TrackType: toUint8([0x83]),\n  FlagDefault: toUint8([0x88]),\n  CodecID: toUint8([0x86]),\n  CodecPrivate: toUint8([0x63, 0xA2]),\n  VideoTrack: toUint8([0xe0]),\n  AudioTrack: toUint8([0xe1]),\n  // Not used yet, but will be used for live webm/mkv\n  // see https://www.matroska.org/technical/basics.html#block-structure\n  // see https://www.matroska.org/technical/basics.html#simpleblock-structure\n  Cluster: toUint8([0x1F, 0x43, 0xB6, 0x75]),\n  Timestamp: toUint8([0xE7]),\n  TimestampScale: toUint8([0x2A, 0xD7, 0xB1]),\n  BlockGroup: toUint8([0xA0]),\n  BlockDuration: toUint8([0x9B]),\n  Block: toUint8([0xA1]),\n  SimpleBlock: toUint8([0xA3])\n};\n/**\n * This is a simple table to determine the length\n * of things in ebml. The length is one based (starts at 1,\n * rather than zero) and for every zero bit before a one bit\n * we add one to length. We also need this table because in some\n * case we have to xor all the length bits from another value.\n */\n\nvar LENGTH_TABLE = [128, 64, 32, 16, 8, 4, 2, 1];\n\nvar getLength = function getLength(byte) {\n  var len = 1;\n\n  for (var i = 0; i < LENGTH_TABLE.length; i++) {\n    if (byte & LENGTH_TABLE[i]) {\n      break;\n    }\n\n    len++;\n  }\n\n  return len;\n}; // length in ebml is stored in the first 4 to 8 bits\n// of the first byte. 4 for the id length and 8 for the\n// data size length. Length is measured by converting the number to binary\n// then 1 + the number of zeros before a 1 is encountered starting\n// from the left.\n\n\nvar getvint = function getvint(bytes, offset, removeLength, signed) {\n  if (removeLength === void 0) {\n    removeLength = true;\n  }\n\n  if (signed === void 0) {\n    signed = false;\n  }\n\n  var length = getLength(bytes[offset]);\n  var valueBytes = bytes.subarray(offset, offset + length); // NOTE that we do **not** subarray here because we need to copy these bytes\n  // as they will be modified below to remove the dataSizeLen bits and we do not\n  // want to modify the original data. normally we could just call slice on\n  // uint8array but ie 11 does not support that...\n\n  if (removeLength) {\n    valueBytes = Array.prototype.slice.call(bytes, offset, offset + length);\n    valueBytes[0] ^= LENGTH_TABLE[length - 1];\n  }\n\n  return {\n    length: length,\n    value: bytesToNumber(valueBytes, {\n      signed: signed\n    }),\n    bytes: valueBytes\n  };\n};\n\nvar normalizePath = function normalizePath(path) {\n  if (typeof path === 'string') {\n    return path.match(/.{1,2}/g).map(function (p) {\n      return normalizePath(p);\n    });\n  }\n\n  if (typeof path === 'number') {\n    return numberToBytes(path);\n  }\n\n  return path;\n};\n\nvar normalizePaths = function normalizePaths(paths) {\n  if (!Array.isArray(paths)) {\n    return [normalizePath(paths)];\n  }\n\n  return paths.map(function (p) {\n    return normalizePath(p);\n  });\n};\n\nvar getInfinityDataSize = function getInfinityDataSize(id, bytes, offset) {\n  if (offset >= bytes.length) {\n    return bytes.length;\n  }\n\n  var innerid = getvint(bytes, offset, false);\n\n  if (bytesMatch(id.bytes, innerid.bytes)) {\n    return offset;\n  }\n\n  var dataHeader = getvint(bytes, offset + innerid.length);\n  return getInfinityDataSize(id, bytes, offset + dataHeader.length + dataHeader.value + innerid.length);\n};\n/**\n * Notes on the EBLM format.\n *\n * EBLM uses \"vints\" tags. Every vint tag contains\n * two parts\n *\n * 1. The length from the first byte. You get this by\n *    converting the byte to binary and counting the zeros\n *    before a 1. Then you add 1 to that. Examples\n *    00011111 = length 4 because there are 3 zeros before a 1.\n *    00100000 = length 3 because there are 2 zeros before a 1.\n *    00000011 = length 7 because there are 6 zeros before a 1.\n *\n * 2. The bits used for length are removed from the first byte\n *    Then all the bytes are merged into a value. NOTE: this\n *    is not the case for id ebml tags as there id includes\n *    length bits.\n *\n */\n\n\nexport var findEbml = function findEbml(bytes, paths) {\n  paths = normalizePaths(paths);\n  bytes = toUint8(bytes);\n  var results = [];\n\n  if (!paths.length) {\n    return results;\n  }\n\n  var i = 0;\n\n  while (i < bytes.length) {\n    var id = getvint(bytes, i, false);\n    var dataHeader = getvint(bytes, i + id.length);\n    var dataStart = i + id.length + dataHeader.length; // dataSize is unknown or this is a live stream\n\n    if (dataHeader.value === 0x7f) {\n      dataHeader.value = getInfinityDataSize(id, bytes, dataStart);\n\n      if (dataHeader.value !== bytes.length) {\n        dataHeader.value -= dataStart;\n      }\n    }\n\n    var dataEnd = dataStart + dataHeader.value > bytes.length ? bytes.length : dataStart + dataHeader.value;\n    var data = bytes.subarray(dataStart, dataEnd);\n\n    if (bytesMatch(paths[0], id.bytes)) {\n      if (paths.length === 1) {\n        // this is the end of the paths and we've found the tag we were\n        // looking for\n        results.push(data);\n      } else {\n        // recursively search for the next tag inside of the data\n        // of this one\n        results = results.concat(findEbml(data, paths.slice(1)));\n      }\n    }\n\n    var totalLength = id.length + dataHeader.length + data.length; // move past this tag entirely, we are not looking for it\n\n    i += totalLength;\n  }\n\n  return results;\n}; // see https://www.matroska.org/technical/basics.html#block-structure\n\nexport var decodeBlock = function decodeBlock(block, type, timestampScale, clusterTimestamp) {\n  var duration;\n\n  if (type === 'group') {\n    duration = findEbml(block, [EBML_TAGS.BlockDuration])[0];\n\n    if (duration) {\n      duration = bytesToNumber(duration);\n      duration = 1 / timestampScale * duration * timestampScale / 1000;\n    }\n\n    block = findEbml(block, [EBML_TAGS.Block])[0];\n    type = 'block'; // treat data as a block after this point\n  }\n\n  var dv = new DataView(block.buffer, block.byteOffset, block.byteLength);\n  var trackNumber = getvint(block, 0);\n  var timestamp = dv.getInt16(trackNumber.length, false);\n  var flags = block[trackNumber.length + 2];\n  var data = block.subarray(trackNumber.length + 3); // pts/dts in seconds\n\n  var ptsdts = 1 / timestampScale * (clusterTimestamp + timestamp) * timestampScale / 1000; // return the frame\n\n  var parsed = {\n    duration: duration,\n    trackNumber: trackNumber.value,\n    keyframe: type === 'simple' && flags >> 7 === 1,\n    invisible: (flags & 0x08) >> 3 === 1,\n    lacing: (flags & 0x06) >> 1,\n    discardable: type === 'simple' && (flags & 0x01) === 1,\n    frames: [],\n    pts: ptsdts,\n    dts: ptsdts,\n    timestamp: timestamp\n  };\n\n  if (!parsed.lacing) {\n    parsed.frames.push(data);\n    return parsed;\n  }\n\n  var numberOfFrames = data[0] + 1;\n  var frameSizes = [];\n  var offset = 1; // Fixed\n\n  if (parsed.lacing === 2) {\n    var sizeOfFrame = (data.length - offset) / numberOfFrames;\n\n    for (var i = 0; i < numberOfFrames; i++) {\n      frameSizes.push(sizeOfFrame);\n    }\n  } // xiph\n\n\n  if (parsed.lacing === 1) {\n    for (var _i = 0; _i < numberOfFrames - 1; _i++) {\n      var size = 0;\n\n      do {\n        size += data[offset];\n        offset++;\n      } while (data[offset - 1] === 0xFF);\n\n      frameSizes.push(size);\n    }\n  } // ebml\n\n\n  if (parsed.lacing === 3) {\n    // first vint is unsinged\n    // after that vints are singed and\n    // based on a compounding size\n    var _size = 0;\n\n    for (var _i2 = 0; _i2 < numberOfFrames - 1; _i2++) {\n      var vint = _i2 === 0 ? getvint(data, offset) : getvint(data, offset, true, true);\n      _size += vint.value;\n      frameSizes.push(_size);\n      offset += vint.length;\n    }\n  }\n\n  frameSizes.forEach(function (size) {\n    parsed.frames.push(data.subarray(offset, offset + size));\n    offset += size;\n  });\n  return parsed;\n}; // VP9 Codec Feature Metadata (CodecPrivate)\n// https://www.webmproject.org/docs/container/\n\nvar parseVp9Private = function parseVp9Private(bytes) {\n  var i = 0;\n  var params = {};\n\n  while (i < bytes.length) {\n    var id = bytes[i] & 0x7f;\n    var len = bytes[i + 1];\n    var val = void 0;\n\n    if (len === 1) {\n      val = bytes[i + 2];\n    } else {\n      val = bytes.subarray(i + 2, i + 2 + len);\n    }\n\n    if (id === 1) {\n      params.profile = val;\n    } else if (id === 2) {\n      params.level = val;\n    } else if (id === 3) {\n      params.bitDepth = val;\n    } else if (id === 4) {\n      params.chromaSubsampling = val;\n    } else {\n      params[id] = val;\n    }\n\n    i += 2 + len;\n  }\n\n  return params;\n};\n\nexport var parseTracks = function parseTracks(bytes) {\n  bytes = toUint8(bytes);\n  var decodedTracks = [];\n  var tracks = findEbml(bytes, [EBML_TAGS.Segment, EBML_TAGS.Tracks, EBML_TAGS.Track]);\n\n  if (!tracks.length) {\n    tracks = findEbml(bytes, [EBML_TAGS.Tracks, EBML_TAGS.Track]);\n  }\n\n  if (!tracks.length) {\n    tracks = findEbml(bytes, [EBML_TAGS.Track]);\n  }\n\n  if (!tracks.length) {\n    return decodedTracks;\n  }\n\n  tracks.forEach(function (track) {\n    var trackType = findEbml(track, EBML_TAGS.TrackType)[0];\n\n    if (!trackType || !trackType.length) {\n      return;\n    } // 1 is video, 2 is audio, 17 is subtitle\n    // other values are unimportant in this context\n\n\n    if (trackType[0] === 1) {\n      trackType = 'video';\n    } else if (trackType[0] === 2) {\n      trackType = 'audio';\n    } else if (trackType[0] === 17) {\n      trackType = 'subtitle';\n    } else {\n      return;\n    } // todo parse language\n\n\n    var decodedTrack = {\n      rawCodec: bytesToString(findEbml(track, [EBML_TAGS.CodecID])[0]),\n      type: trackType,\n      codecPrivate: findEbml(track, [EBML_TAGS.CodecPrivate])[0],\n      number: bytesToNumber(findEbml(track, [EBML_TAGS.TrackNumber])[0]),\n      defaultDuration: bytesToNumber(findEbml(track, [EBML_TAGS.DefaultDuration])[0]),\n      default: findEbml(track, [EBML_TAGS.FlagDefault])[0],\n      rawData: track\n    };\n    var codec = '';\n\n    if (/V_MPEG4\\/ISO\\/AVC/.test(decodedTrack.rawCodec)) {\n      codec = \"avc1.\" + getAvcCodec(decodedTrack.codecPrivate);\n    } else if (/V_MPEGH\\/ISO\\/HEVC/.test(decodedTrack.rawCodec)) {\n      codec = \"hev1.\" + getHvcCodec(decodedTrack.codecPrivate);\n    } else if (/V_MPEG4\\/ISO\\/ASP/.test(decodedTrack.rawCodec)) {\n      if (decodedTrack.codecPrivate) {\n        codec = 'mp4v.20.' + decodedTrack.codecPrivate[4].toString();\n      } else {\n        codec = 'mp4v.20.9';\n      }\n    } else if (/^V_THEORA/.test(decodedTrack.rawCodec)) {\n      codec = 'theora';\n    } else if (/^V_VP8/.test(decodedTrack.rawCodec)) {\n      codec = 'vp8';\n    } else if (/^V_VP9/.test(decodedTrack.rawCodec)) {\n      if (decodedTrack.codecPrivate) {\n        var _parseVp9Private = parseVp9Private(decodedTrack.codecPrivate),\n            profile = _parseVp9Private.profile,\n            level = _parseVp9Private.level,\n            bitDepth = _parseVp9Private.bitDepth,\n            chromaSubsampling = _parseVp9Private.chromaSubsampling;\n\n        codec = 'vp09.';\n        codec += padStart(profile, 2, '0') + \".\";\n        codec += padStart(level, 2, '0') + \".\";\n        codec += padStart(bitDepth, 2, '0') + \".\";\n        codec += \"\" + padStart(chromaSubsampling, 2, '0'); // Video -> Colour -> Ebml name\n\n        var matrixCoefficients = findEbml(track, [0xE0, [0x55, 0xB0], [0x55, 0xB1]])[0] || [];\n        var videoFullRangeFlag = findEbml(track, [0xE0, [0x55, 0xB0], [0x55, 0xB9]])[0] || [];\n        var transferCharacteristics = findEbml(track, [0xE0, [0x55, 0xB0], [0x55, 0xBA]])[0] || [];\n        var colourPrimaries = findEbml(track, [0xE0, [0x55, 0xB0], [0x55, 0xBB]])[0] || []; // if we find any optional codec parameter specify them all.\n\n        if (matrixCoefficients.length || videoFullRangeFlag.length || transferCharacteristics.length || colourPrimaries.length) {\n          codec += \".\" + padStart(colourPrimaries[0], 2, '0');\n          codec += \".\" + padStart(transferCharacteristics[0], 2, '0');\n          codec += \".\" + padStart(matrixCoefficients[0], 2, '0');\n          codec += \".\" + padStart(videoFullRangeFlag[0], 2, '0');\n        }\n      } else {\n        codec = 'vp9';\n      }\n    } else if (/^V_AV1/.test(decodedTrack.rawCodec)) {\n      codec = \"av01.\" + getAv1Codec(decodedTrack.codecPrivate);\n    } else if (/A_ALAC/.test(decodedTrack.rawCodec)) {\n      codec = 'alac';\n    } else if (/A_MPEG\\/L2/.test(decodedTrack.rawCodec)) {\n      codec = 'mp2';\n    } else if (/A_MPEG\\/L3/.test(decodedTrack.rawCodec)) {\n      codec = 'mp3';\n    } else if (/^A_AAC/.test(decodedTrack.rawCodec)) {\n      if (decodedTrack.codecPrivate) {\n        codec = 'mp4a.40.' + (decodedTrack.codecPrivate[0] >>> 3).toString();\n      } else {\n        codec = 'mp4a.40.2';\n      }\n    } else if (/^A_AC3/.test(decodedTrack.rawCodec)) {\n      codec = 'ac-3';\n    } else if (/^A_PCM/.test(decodedTrack.rawCodec)) {\n      codec = 'pcm';\n    } else if (/^A_MS\\/ACM/.test(decodedTrack.rawCodec)) {\n      codec = 'speex';\n    } else if (/^A_EAC3/.test(decodedTrack.rawCodec)) {\n      codec = 'ec-3';\n    } else if (/^A_VORBIS/.test(decodedTrack.rawCodec)) {\n      codec = 'vorbis';\n    } else if (/^A_FLAC/.test(decodedTrack.rawCodec)) {\n      codec = 'flac';\n    } else if (/^A_OPUS/.test(decodedTrack.rawCodec)) {\n      codec = 'opus';\n    }\n\n    decodedTrack.codec = codec;\n    decodedTracks.push(decodedTrack);\n  });\n  return decodedTracks.sort(function (a, b) {\n    return a.number - b.number;\n  });\n};\nexport var parseData = function parseData(data, tracks) {\n  var allBlocks = [];\n  var segment = findEbml(data, [EBML_TAGS.Segment])[0];\n  var timestampScale = findEbml(segment, [EBML_TAGS.SegmentInfo, EBML_TAGS.TimestampScale])[0]; // in nanoseconds, defaults to 1ms\n\n  if (timestampScale && timestampScale.length) {\n    timestampScale = bytesToNumber(timestampScale);\n  } else {\n    timestampScale = 1000000;\n  }\n\n  var clusters = findEbml(segment, [EBML_TAGS.Cluster]);\n\n  if (!tracks) {\n    tracks = parseTracks(segment);\n  }\n\n  clusters.forEach(function (cluster, ci) {\n    var simpleBlocks = findEbml(cluster, [EBML_TAGS.SimpleBlock]).map(function (b) {\n      return {\n        type: 'simple',\n        data: b\n      };\n    });\n    var blockGroups = findEbml(cluster, [EBML_TAGS.BlockGroup]).map(function (b) {\n      return {\n        type: 'group',\n        data: b\n      };\n    });\n    var timestamp = findEbml(cluster, [EBML_TAGS.Timestamp])[0] || 0;\n\n    if (timestamp && timestamp.length) {\n      timestamp = bytesToNumber(timestamp);\n    } // get all blocks then sort them into the correct order\n\n\n    var blocks = simpleBlocks.concat(blockGroups).sort(function (a, b) {\n      return a.data.byteOffset - b.data.byteOffset;\n    });\n    blocks.forEach(function (block, bi) {\n      var decoded = decodeBlock(block.data, block.type, timestampScale, timestamp);\n      allBlocks.push(decoded);\n    });\n  });\n  return {\n    tracks: tracks,\n    blocks: allBlocks\n  };\n};","import { bytesMatch, toUint8 } from './byte-helpers.js';\nexport var NAL_TYPE_ONE = toUint8([0x00, 0x00, 0x00, 0x01]);\nexport var NAL_TYPE_TWO = toUint8([0x00, 0x00, 0x01]);\nexport var EMULATION_PREVENTION = toUint8([0x00, 0x00, 0x03]);\n/**\n * Expunge any \"Emulation Prevention\" bytes from a \"Raw Byte\n * Sequence Payload\"\n *\n * @param data {Uint8Array} the bytes of a RBSP from a NAL\n * unit\n * @return {Uint8Array} the RBSP without any Emulation\n * Prevention Bytes\n */\n\nexport var discardEmulationPreventionBytes = function discardEmulationPreventionBytes(bytes) {\n  var positions = [];\n  var i = 1; // Find all `Emulation Prevention Bytes`\n\n  while (i < bytes.length - 2) {\n    if (bytesMatch(bytes.subarray(i, i + 3), EMULATION_PREVENTION)) {\n      positions.push(i + 2);\n      i++;\n    }\n\n    i++;\n  } // If no Emulation Prevention Bytes were found just return the original\n  // array\n\n\n  if (positions.length === 0) {\n    return bytes;\n  } // Create a new array to hold the NAL unit data\n\n\n  var newLength = bytes.length - positions.length;\n  var newData = new Uint8Array(newLength);\n  var sourceIndex = 0;\n\n  for (i = 0; i < newLength; sourceIndex++, i++) {\n    if (sourceIndex === positions[0]) {\n      // Skip this byte\n      sourceIndex++; // Remove this position index\n\n      positions.shift();\n    }\n\n    newData[i] = bytes[sourceIndex];\n  }\n\n  return newData;\n};\nexport var findNal = function findNal(bytes, dataType, types, nalLimit) {\n  if (nalLimit === void 0) {\n    nalLimit = Infinity;\n  }\n\n  bytes = toUint8(bytes);\n  types = [].concat(types);\n  var i = 0;\n  var nalStart;\n  var nalsFound = 0; // keep searching until:\n  // we reach the end of bytes\n  // we reach the maximum number of nals they want to seach\n  // NOTE: that we disregard nalLimit when we have found the start\n  // of the nal we want so that we can find the end of the nal we want.\n\n  while (i < bytes.length && (nalsFound < nalLimit || nalStart)) {\n    var nalOffset = void 0;\n\n    if (bytesMatch(bytes.subarray(i), NAL_TYPE_ONE)) {\n      nalOffset = 4;\n    } else if (bytesMatch(bytes.subarray(i), NAL_TYPE_TWO)) {\n      nalOffset = 3;\n    } // we are unsynced,\n    // find the next nal unit\n\n\n    if (!nalOffset) {\n      i++;\n      continue;\n    }\n\n    nalsFound++;\n\n    if (nalStart) {\n      return discardEmulationPreventionBytes(bytes.subarray(nalStart, i));\n    }\n\n    var nalType = void 0;\n\n    if (dataType === 'h264') {\n      nalType = bytes[i + nalOffset] & 0x1f;\n    } else if (dataType === 'h265') {\n      nalType = bytes[i + nalOffset] >> 1 & 0x3f;\n    }\n\n    if (types.indexOf(nalType) !== -1) {\n      nalStart = i + nalOffset;\n    } // nal header is 1 length for h264, and 2 for h265\n\n\n    i += nalOffset + (dataType === 'h264' ? 1 : 2);\n  }\n\n  return bytes.subarray(0, 0);\n};\nexport var findH264Nal = function findH264Nal(bytes, type, nalLimit) {\n  return findNal(bytes, 'h264', type, nalLimit);\n};\nexport var findH265Nal = function findH265Nal(bytes, type, nalLimit) {\n  return findNal(bytes, 'h265', type, nalLimit);\n};","import { toUint8, bytesMatch } from './byte-helpers.js';\nimport { findBox } from './mp4-helpers.js';\nimport { findEbml, EBML_TAGS } from './ebml-helpers.js';\nimport { getId3Offset } from './id3-helpers.js';\nimport { findH264Nal, findH265Nal } from './nal-helpers.js';\nvar CONSTANTS = {\n  // \"webm\" string literal in hex\n  'webm': toUint8([0x77, 0x65, 0x62, 0x6d]),\n  // \"matroska\" string literal in hex\n  'matroska': toUint8([0x6d, 0x61, 0x74, 0x72, 0x6f, 0x73, 0x6b, 0x61]),\n  // \"fLaC\" string literal in hex\n  'flac': toUint8([0x66, 0x4c, 0x61, 0x43]),\n  // \"OggS\" string literal in hex\n  'ogg': toUint8([0x4f, 0x67, 0x67, 0x53]),\n  // ac-3 sync byte, also works for ec-3 as that is simply a codec\n  // of ac-3\n  'ac3': toUint8([0x0b, 0x77]),\n  // \"RIFF\" string literal in hex used for wav and avi\n  'riff': toUint8([0x52, 0x49, 0x46, 0x46]),\n  // \"AVI\" string literal in hex\n  'avi': toUint8([0x41, 0x56, 0x49]),\n  // \"WAVE\" string literal in hex\n  'wav': toUint8([0x57, 0x41, 0x56, 0x45]),\n  // \"ftyp3g\" string literal in hex\n  '3gp': toUint8([0x66, 0x74, 0x79, 0x70, 0x33, 0x67]),\n  // \"ftyp\" string literal in hex\n  'mp4': toUint8([0x66, 0x74, 0x79, 0x70]),\n  // \"styp\" string literal in hex\n  'fmp4': toUint8([0x73, 0x74, 0x79, 0x70]),\n  // \"ftypqt\" string literal in hex\n  'mov': toUint8([0x66, 0x74, 0x79, 0x70, 0x71, 0x74]),\n  // moov string literal in hex\n  'moov': toUint8([0x6D, 0x6F, 0x6F, 0x76]),\n  // moof string literal in hex\n  'moof': toUint8([0x6D, 0x6F, 0x6F, 0x66])\n};\nvar _isLikely = {\n  aac: function aac(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytesMatch(bytes, [0xFF, 0x10], {\n      offset: offset,\n      mask: [0xFF, 0x16]\n    });\n  },\n  mp3: function mp3(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytesMatch(bytes, [0xFF, 0x02], {\n      offset: offset,\n      mask: [0xFF, 0x06]\n    });\n  },\n  webm: function webm(bytes) {\n    var docType = findEbml(bytes, [EBML_TAGS.EBML, EBML_TAGS.DocType])[0]; // check if DocType EBML tag is webm\n\n    return bytesMatch(docType, CONSTANTS.webm);\n  },\n  mkv: function mkv(bytes) {\n    var docType = findEbml(bytes, [EBML_TAGS.EBML, EBML_TAGS.DocType])[0]; // check if DocType EBML tag is matroska\n\n    return bytesMatch(docType, CONSTANTS.matroska);\n  },\n  mp4: function mp4(bytes) {\n    // if this file is another base media file format, it is not mp4\n    if (_isLikely['3gp'](bytes) || _isLikely.mov(bytes)) {\n      return false;\n    } // if this file starts with a ftyp or styp box its mp4\n\n\n    if (bytesMatch(bytes, CONSTANTS.mp4, {\n      offset: 4\n    }) || bytesMatch(bytes, CONSTANTS.fmp4, {\n      offset: 4\n    })) {\n      return true;\n    } // if this file starts with a moof/moov box its mp4\n\n\n    if (bytesMatch(bytes, CONSTANTS.moof, {\n      offset: 4\n    }) || bytesMatch(bytes, CONSTANTS.moov, {\n      offset: 4\n    })) {\n      return true;\n    }\n  },\n  mov: function mov(bytes) {\n    return bytesMatch(bytes, CONSTANTS.mov, {\n      offset: 4\n    });\n  },\n  '3gp': function gp(bytes) {\n    return bytesMatch(bytes, CONSTANTS['3gp'], {\n      offset: 4\n    });\n  },\n  ac3: function ac3(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytesMatch(bytes, CONSTANTS.ac3, {\n      offset: offset\n    });\n  },\n  ts: function ts(bytes) {\n    if (bytes.length < 189 && bytes.length >= 1) {\n      return bytes[0] === 0x47;\n    }\n\n    var i = 0; // check the first 376 bytes for two matching sync bytes\n\n    while (i + 188 < bytes.length && i < 188) {\n      if (bytes[i] === 0x47 && bytes[i + 188] === 0x47) {\n        return true;\n      }\n\n      i += 1;\n    }\n\n    return false;\n  },\n  flac: function flac(bytes) {\n    var offset = getId3Offset(bytes);\n    return bytesMatch(bytes, CONSTANTS.flac, {\n      offset: offset\n    });\n  },\n  ogg: function ogg(bytes) {\n    return bytesMatch(bytes, CONSTANTS.ogg);\n  },\n  avi: function avi(bytes) {\n    return bytesMatch(bytes, CONSTANTS.riff) && bytesMatch(bytes, CONSTANTS.avi, {\n      offset: 8\n    });\n  },\n  wav: function wav(bytes) {\n    return bytesMatch(bytes, CONSTANTS.riff) && bytesMatch(bytes, CONSTANTS.wav, {\n      offset: 8\n    });\n  },\n  'h264': function h264(bytes) {\n    // find seq_parameter_set_rbsp\n    return findH264Nal(bytes, 7, 3).length;\n  },\n  'h265': function h265(bytes) {\n    // find video_parameter_set_rbsp or seq_parameter_set_rbsp\n    return findH265Nal(bytes, [32, 33], 3).length;\n  }\n}; // get all the isLikely functions\n// but make sure 'ts' is above h264 and h265\n// but below everything else as it is the least specific\n\nvar isLikelyTypes = Object.keys(_isLikely) // remove ts, h264, h265\n.filter(function (t) {\n  return t !== 'ts' && t !== 'h264' && t !== 'h265';\n}) // add it back to the bottom\n.concat(['ts', 'h264', 'h265']); // make sure we are dealing with uint8 data.\n\nisLikelyTypes.forEach(function (type) {\n  var isLikelyFn = _isLikely[type];\n\n  _isLikely[type] = function (bytes) {\n    return isLikelyFn(toUint8(bytes));\n  };\n}); // export after wrapping\n\nexport var isLikely = _isLikely; // A useful list of file signatures can be found here\n// https://en.wikipedia.org/wiki/List_of_file_signatures\n\nexport var detectContainerForBytes = function detectContainerForBytes(bytes) {\n  bytes = toUint8(bytes);\n\n  for (var i = 0; i < isLikelyTypes.length; i++) {\n    var type = isLikelyTypes[i];\n\n    if (isLikely[type](bytes)) {\n      return type;\n    }\n  }\n\n  return '';\n}; // fmp4 is not a container\n\nexport var isLikelyFmp4MediaSegment = function isLikelyFmp4MediaSegment(bytes) {\n  return findBox(bytes, ['moof']).length > 0;\n};","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the months added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n */\n\nexport default function addMonths(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  var dayOfMonth = date.getDate(); // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n\n  var endOfDesiredMonth = new Date(date.getTime());\n  endOfDesiredMonth.setMonth(date.getMonth() + amount + 1, 0);\n  var daysInMonth = endOfDesiredMonth.getDate();\n\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return date;\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport addDays from \"../addDays/index.js\";\nimport addMonths from \"../addMonths/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport toInteger from \"../_lib/toInteger/index.js\";\n/**\n * @name add\n * @category Common Helpers\n * @summary Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @description\n * Add the specified years, months, weeks, days, hours, minutes and seconds to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Duration} duration - the object with years, months, weeks, days, hours, minutes and seconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n *\n * | Key            | Description                        |\n * |----------------|------------------------------------|\n * | years          | Amount of years to be added        |\n * | months         | Amount of months to be added       |\n * | weeks          | Amount of weeks to be added       |\n * | days           | Amount of days to be added         |\n * | hours          | Amount of hours to be added        |\n * | minutes        | Amount of minutes to be added      |\n * | seconds        | Amount of seconds to be added      |\n *\n * All values default to 0\n *\n * @returns {Date} the new date with the seconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add the following duration to 1 September 2014, 10:19:50\n * const result = add(new Date(2014, 8, 1, 10, 19, 50), {\n *   years: 2,\n *   months: 9,\n *   weeks: 1,\n *   days: 7,\n *   hours: 5,\n *   minutes: 9,\n *   seconds: 30,\n * })\n * //=> Thu Jun 15 2017 15:29:20\n */\n\nexport default function add(dirtyDate, duration) {\n  requiredArgs(2, arguments);\n  if (!duration || _typeof(duration) !== 'object') return new Date(NaN);\n  var years = 'years' in duration ? toInteger(duration.years) : 0;\n  var months = 'months' in duration ? toInteger(duration.months) : 0;\n  var weeks = 'weeks' in duration ? toInteger(duration.weeks) : 0;\n  var days = 'days' in duration ? toInteger(duration.days) : 0;\n  var hours = 'hours' in duration ? toInteger(duration.hours) : 0;\n  var minutes = 'minutes' in duration ? toInteger(duration.minutes) : 0;\n  var seconds = 'seconds' in duration ? toInteger(duration.seconds) : 0; // Add years and months\n\n  var date = toDate(dirtyDate);\n  var dateWithMonths = months || years ? addMonths(date, months + years * 12) : date; // Add weeks and days\n\n  var dateWithDays = days || weeks ? addDays(dateWithMonths, days + weeks * 7) : dateWithMonths; // Add days, hours, minutes and seconds\n\n  var minutesToAdd = minutes + hours * 60;\n  var secondsToAdd = seconds + minutesToAdd * 60;\n  var msToAdd = secondsToAdd * 1000;\n  var finalDate = new Date(dateWithDays.getTime() + msToAdd);\n  return finalDate;\n}","/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nexport { Stream as default };","/*! @name m3u8-parser @version 4.7.0 @license Apache-2.0 */\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport Stream from '@videojs/vhs-utils/es/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array.js';\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n\nvar TAB = String.fromCharCode(0x09);\n\nvar parseByterange = function parseByterange(byterangeString) {\n  // optionally match and capture 0+ digits before `@`\n  // optionally match and capture 0+ digits after `@`\n  var match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || '');\n  var result = {};\n\n  if (match[1]) {\n    result.length = parseInt(match[1], 10);\n  }\n\n  if (match[2]) {\n    result.offset = parseInt(match[2], 10);\n  }\n\n  return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = _extends(parseByterange(match[1]), {\n          type: 'tag',\n          tagType: 'byterange'\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            event.byterange = parseByterange(attributes.BYTERANGE);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'skip'\n        };\n        event.attributes = parseAttributes(match[1]);\n\n        if (event.attributes.hasOwnProperty('SKIPPED-SEGMENTS')) {\n          event.attributes['SKIPPED-SEGMENTS'] = parseInt(event.attributes['SKIPPED-SEGMENTS'], 10);\n        }\n\n        if (event.attributes.hasOwnProperty('RECENTLY-REMOVED-DATERANGES')) {\n          event.attributes['RECENTLY-REMOVED-DATERANGES'] = event.attributes['RECENTLY-REMOVED-DATERANGES'].split(TAB);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['DURATION'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['INDEPENDENT', 'GAP'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        if (event.attributes.hasOwnProperty('BYTERANGE')) {\n          event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'server-control'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['CAN-SKIP-UNTIL', 'PART-HOLD-BACK', 'HOLD-BACK'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['CAN-SKIP-DATERANGES', 'CAN-BLOCK-RELOAD'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part-inf'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['PART-TARGET'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'preload-hint'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['BYTERANGE-START', 'BYTERANGE-LENGTH'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n            var subkey = key === 'BYTERANGE-LENGTH' ? 'length' : 'offset';\n            event.attributes.byterange = event.attributes.byterange || {};\n            event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n\n            delete event.attributes[key];\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'rendition-report'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['LAST-MSN', 'LAST-PART'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\nvar camelCase = function camelCase(str) {\n  return str.toLowerCase().replace(/-(\\w)/g, function (a) {\n    return a[1].toUpperCase();\n  });\n};\n\nvar camelCaseKeys = function camelCaseKeys(attributes) {\n  var result = {};\n  Object.keys(attributes).forEach(function (key) {\n    result[camelCase(key)] = attributes[key];\n  });\n  return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\n\n\nvar setHoldBack = function setHoldBack(manifest) {\n  var serverControl = manifest.serverControl,\n      targetDuration = manifest.targetDuration,\n      partTargetDuration = manifest.partTargetDuration;\n\n  if (!serverControl) {\n    return;\n  }\n\n  var tag = '#EXT-X-SERVER-CONTROL';\n  var hb = 'holdBack';\n  var phb = 'partHoldBack';\n  var minTargetDuration = targetDuration && targetDuration * 3;\n  var minPartDuration = partTargetDuration && partTargetDuration * 2;\n\n  if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n    serverControl[hb] = minTargetDuration;\n    this.trigger('info', {\n      message: tag + \" defaulting HOLD-BACK to targetDuration * 3 (\" + minTargetDuration + \").\"\n    });\n  }\n\n  if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping HOLD-BACK (\" + serverControl[hb] + \") to targetDuration * 3 (\" + minTargetDuration + \")\"\n    });\n    serverControl[hb] = minTargetDuration;\n  } // default no part hold back to part target duration * 3\n\n\n  if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n    serverControl[phb] = partTargetDuration * 3;\n    this.trigger('info', {\n      message: tag + \" defaulting PART-HOLD-BACK to partTargetDuration * 3 (\" + serverControl[phb] + \").\"\n    });\n  } // if part hold back is too small default it to part target duration * 2\n\n\n  if (partTargetDuration && serverControl[phb] < minPartDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping PART-HOLD-BACK (\" + serverControl[phb] + \") to partTargetDuration * 2 (\" + minPartDuration + \").\"\n    });\n    serverControl[phb] = minPartDuration;\n  }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nvar Parser = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var hasParts = false;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    var lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n\n    var lastPartByterangeEnd = 0;\n\n    _this.on('end', function () {\n      // only add preloadSegment if we don't yet have a uri for it.\n      // and we actually have parts/preloadHints\n      if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n        return;\n      }\n\n      if (!currentUri.map && currentMap) {\n        currentUri.map = currentMap;\n      }\n\n      if (!currentUri.key && _key) {\n        currentUri.key = _key;\n      }\n\n      if (!currentUri.timeline && typeof currentTimeline === 'number') {\n        currentUri.timeline = currentTimeline;\n      }\n\n      _this.manifest.preloadSegment = currentUri;\n    }); // update the manifest with the m3u8 entry from the parse stream\n\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            version: function version() {\n              if (entry.version) {\n                this.manifest.version = entry.version;\n              }\n            },\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.apple.streamingkeydelivery') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.apple.fps.1_0'] = {\n                  attributes: entry.attributes\n                };\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                this.manifest.contentProtection['com.widevine.alpha'] = {\n                  attributes: {\n                    schemeIdUri: entry.attributes.KEYFORMAT,\n                    // remove '0x' from the key id string\n                    keyId: entry.attributes.KEYID.substring(2)\n                  },\n                  // decode the base64-encoded PSSH box\n                  pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n\n              if (_key) {\n                currentMap.key = _key;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n              setHoldBack.call(this, this.manifest);\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            },\n            'skip': function skip() {\n              this.manifest.skip = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-SKIP', entry.attributes, ['SKIPPED-SEGMENTS']);\n            },\n            'part': function part() {\n              var _this2 = this;\n\n              hasParts = true; // parts are always specifed before a segment\n\n              var segmentIndex = this.manifest.segments.length;\n              var part = camelCaseKeys(entry.attributes);\n              currentUri.parts = currentUri.parts || [];\n              currentUri.parts.push(part);\n\n              if (part.byterange) {\n                if (!part.byterange.hasOwnProperty('offset')) {\n                  part.byterange.offset = lastPartByterangeEnd;\n                }\n\n                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n              }\n\n              var partIndex = currentUri.parts.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PART #\" + partIndex + \" for segment #\" + segmentIndex, entry.attributes, ['URI', 'DURATION']);\n\n              if (this.manifest.renditionReports) {\n                this.manifest.renditionReports.forEach(function (r, i) {\n                  if (!r.hasOwnProperty('lastPart')) {\n                    _this2.trigger('warn', {\n                      message: \"#EXT-X-RENDITION-REPORT #\" + i + \" lacks required attribute(s): LAST-PART\"\n                    });\n                  }\n                });\n              }\n            },\n            'server-control': function serverControl() {\n              var attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n\n              if (!attrs.hasOwnProperty('canBlockReload')) {\n                attrs.canBlockReload = false;\n                this.trigger('info', {\n                  message: '#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false'\n                });\n              }\n\n              setHoldBack.call(this, this.manifest);\n\n              if (attrs.canSkipDateranges && !attrs.hasOwnProperty('canSkipUntil')) {\n                this.trigger('warn', {\n                  message: '#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set'\n                });\n              }\n            },\n            'preload-hint': function preloadHint() {\n              // parts are always specifed before a segment\n              var segmentIndex = this.manifest.segments.length;\n              var hint = camelCaseKeys(entry.attributes);\n              var isPart = hint.type && hint.type === 'PART';\n              currentUri.preloadHints = currentUri.preloadHints || [];\n              currentUri.preloadHints.push(hint);\n\n              if (hint.byterange) {\n                if (!hint.byterange.hasOwnProperty('offset')) {\n                  // use last part byterange end or zero if not a part.\n                  hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n\n                  if (isPart) {\n                    lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                  }\n                }\n              }\n\n              var index = currentUri.preloadHints.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex, entry.attributes, ['TYPE', 'URI']);\n\n              if (!hint.type) {\n                return;\n              } // search through all preload hints except for the current one for\n              // a duplicate type.\n\n\n              for (var i = 0; i < currentUri.preloadHints.length - 1; i++) {\n                var otherHint = currentUri.preloadHints[i];\n\n                if (!otherHint.type) {\n                  continue;\n                }\n\n                if (otherHint.type === hint.type) {\n                  this.trigger('warn', {\n                    message: \"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex + \" has the same TYPE \" + hint.type + \" as preload hint #\" + i\n                  });\n                }\n              }\n            },\n            'rendition-report': function renditionReport() {\n              var report = camelCaseKeys(entry.attributes);\n              this.manifest.renditionReports = this.manifest.renditionReports || [];\n              this.manifest.renditionReports.push(report);\n              var index = this.manifest.renditionReports.length - 1;\n              var required = ['LAST-MSN', 'URI'];\n\n              if (hasParts) {\n                required.push('LAST-PART');\n              }\n\n              this.warnOnMissingAttributes_(\"#EXT-X-RENDITION-REPORT #\" + index, entry.attributes, required);\n            },\n            'part-inf': function partInf() {\n              this.manifest.partInf = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-PART-INF', entry.attributes, ['PART-TARGET']);\n\n              if (this.manifest.partInf.partTarget) {\n                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n              }\n\n              setHoldBack.call(this, this.manifest);\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // reset the last byterange end as it needs to be 0 between parts\n\n\n          lastPartByterangeEnd = 0; // prepare for the next URI\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n\n  var _proto = Parser.prototype;\n\n  _proto.warnOnMissingAttributes_ = function warnOnMissingAttributes_(identifier, attributes, required) {\n    var missing = [];\n    required.forEach(function (key) {\n      if (!attributes.hasOwnProperty(key)) {\n        missing.push(key);\n      }\n    });\n\n    if (missing.length) {\n      this.trigger('warn', {\n        message: identifier + \" lacks required attribute(s): \" + missing.join(', ')\n      });\n    }\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n  ;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n    this.trigger('end');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*! @name mpd-parser @version 0.21.0 @license Apache-2.0 */\nimport resolveUrl from '@videojs/vhs-utils/es/resolve-url';\nimport window from 'global/window';\nimport { forEachMediaGroup } from '@videojs/vhs-utils/es/media-groups';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array';\nimport { DOMParser } from '@xmldom/xmldom';\nvar version = \"0.21.0\";\n\nvar isObject = function isObject(obj) {\n  return !!obj && _typeof(obj) === 'object';\n};\n\nvar merge = function merge() {\n  for (var _len = arguments.length, objects = new Array(_len), _key = 0; _key < _len; _key++) {\n    objects[_key] = arguments[_key];\n  }\n\n  return objects.reduce(function (result, source) {\n    if (_typeof(source) !== 'object') {\n      return result;\n    }\n\n    Object.keys(source).forEach(function (key) {\n      if (Array.isArray(result[key]) && Array.isArray(source[key])) {\n        result[key] = result[key].concat(source[key]);\n      } else if (isObject(result[key]) && isObject(source[key])) {\n        result[key] = merge(result[key], source[key]);\n      } else {\n        result[key] = source[key];\n      }\n    });\n    return result;\n  }, {});\n};\n\nvar values = function values(o) {\n  return Object.keys(o).map(function (k) {\n    return o[k];\n  });\n};\n\nvar range = function range(start, end) {\n  var result = [];\n\n  for (var i = start; i < end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\n\nvar flatten = function flatten(lists) {\n  return lists.reduce(function (x, y) {\n    return x.concat(y);\n  }, []);\n};\n\nvar from = function from(list) {\n  if (!list.length) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var i = 0; i < list.length; i++) {\n    result.push(list[i]);\n  }\n\n  return result;\n};\n\nvar findIndexes = function findIndexes(l, key) {\n  return l.reduce(function (a, e, i) {\n    if (e[key]) {\n      a.push(i);\n    }\n\n    return a;\n  }, []);\n};\n/**\n * Returns the first index that satisfies the matching function, or -1 if not found.\n *\n * Only necessary because of IE11 support.\n *\n * @param {Array} list - the list to search through\n * @param {Function} matchingFunction - the matching function\n *\n * @return {number} the matching index or -1 if not found\n */\n\n\nvar findIndex = function findIndex(list, matchingFunction) {\n  for (var i = 0; i < list.length; i++) {\n    if (matchingFunction(list[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n/**\n * Returns a union of the included lists provided each element can be identified by a key.\n *\n * @param {Array} list - list of lists to get the union of\n * @param {Function} keyFunction - the function to use as a key for each element\n *\n * @return {Array} the union of the arrays\n */\n\n\nvar union = function union(lists, keyFunction) {\n  return values(lists.reduce(function (acc, list) {\n    list.forEach(function (el) {\n      acc[keyFunction(el)] = el;\n    });\n    return acc;\n  }, {}));\n};\n\nvar errors = {\n  INVALID_NUMBER_OF_PERIOD: 'INVALID_NUMBER_OF_PERIOD',\n  DASH_EMPTY_MANIFEST: 'DASH_EMPTY_MANIFEST',\n  DASH_INVALID_XML: 'DASH_INVALID_XML',\n  NO_BASE_URL: 'NO_BASE_URL',\n  MISSING_SEGMENT_INFORMATION: 'MISSING_SEGMENT_INFORMATION',\n  SEGMENT_TIME_UNSPECIFIED: 'SEGMENT_TIME_UNSPECIFIED',\n  UNSUPPORTED_UTC_TIMING_SCHEME: 'UNSUPPORTED_UTC_TIMING_SCHEME'\n};\n/**\n * @typedef {Object} SingleUri\n * @property {string} uri - relative location of segment\n * @property {string} resolvedUri - resolved location of segment\n * @property {Object} byterange - Object containing information on how to make byte range\n *   requests following byte-range-spec per RFC2616.\n * @property {String} byterange.length - length of range request\n * @property {String} byterange.offset - byte offset of range request\n *\n * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1\n */\n\n/**\n * Converts a URLType node (5.3.9.2.3 Table 13) to a segment object\n * that conforms to how m3u8-parser is structured\n *\n * @see https://github.com/videojs/m3u8-parser\n *\n * @param {string} baseUrl - baseUrl provided by <BaseUrl> nodes\n * @param {string} source - source url for segment\n * @param {string} range - optional range used for range calls,\n *   follows  RFC 2616, Clause 14.35.1\n * @return {SingleUri} full segment information transformed into a format similar\n *   to m3u8-parser\n */\n\nvar urlTypeToSegment = function urlTypeToSegment(_ref) {\n  var _ref$baseUrl = _ref.baseUrl,\n      baseUrl = _ref$baseUrl === void 0 ? '' : _ref$baseUrl,\n      _ref$source = _ref.source,\n      source = _ref$source === void 0 ? '' : _ref$source,\n      _ref$range = _ref.range,\n      range = _ref$range === void 0 ? '' : _ref$range,\n      _ref$indexRange = _ref.indexRange,\n      indexRange = _ref$indexRange === void 0 ? '' : _ref$indexRange;\n  var segment = {\n    uri: source,\n    resolvedUri: resolveUrl(baseUrl || '', source)\n  };\n\n  if (range || indexRange) {\n    var rangeStr = range ? range : indexRange;\n    var ranges = rangeStr.split('-'); // default to parsing this as a BigInt if possible\n\n    var startRange = window.BigInt ? window.BigInt(ranges[0]) : parseInt(ranges[0], 10);\n    var endRange = window.BigInt ? window.BigInt(ranges[1]) : parseInt(ranges[1], 10); // convert back to a number if less than MAX_SAFE_INTEGER\n\n    if (startRange < Number.MAX_SAFE_INTEGER && typeof startRange === 'bigint') {\n      startRange = Number(startRange);\n    }\n\n    if (endRange < Number.MAX_SAFE_INTEGER && typeof endRange === 'bigint') {\n      endRange = Number(endRange);\n    }\n\n    var length;\n\n    if (typeof endRange === 'bigint' || typeof startRange === 'bigint') {\n      length = window.BigInt(endRange) - window.BigInt(startRange) + window.BigInt(1);\n    } else {\n      length = endRange - startRange + 1;\n    }\n\n    if (typeof length === 'bigint' && length < Number.MAX_SAFE_INTEGER) {\n      length = Number(length);\n    } // byterange should be inclusive according to\n    // RFC 2616, Clause 14.35.1\n\n\n    segment.byterange = {\n      length: length,\n      offset: startRange\n    };\n  }\n\n  return segment;\n};\n\nvar byteRangeToString = function byteRangeToString(byterange) {\n  // `endRange` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  var endRange;\n\n  if (typeof byterange.offset === 'bigint' || typeof byterange.length === 'bigint') {\n    endRange = window.BigInt(byterange.offset) + window.BigInt(byterange.length) - window.BigInt(1);\n  } else {\n    endRange = byterange.offset + byterange.length - 1;\n  }\n\n  return byterange.offset + \"-\" + endRange;\n};\n/**\n * parse the end number attribue that can be a string\n * number, or undefined.\n *\n * @param {string|number|undefined} endNumber\n *        The end number attribute.\n *\n * @return {number|null}\n *          The result of parsing the end number.\n */\n\n\nvar parseEndNumber = function parseEndNumber(endNumber) {\n  if (endNumber && typeof endNumber !== 'number') {\n    endNumber = parseInt(endNumber, 10);\n  }\n\n  if (isNaN(endNumber)) {\n    return null;\n  }\n\n  return endNumber;\n};\n/**\n * Functions for calculating the range of available segments in static and dynamic\n * manifests.\n */\n\n\nvar segmentRange = {\n  /**\n   * Returns the entire range of available segments for a static MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  static: function _static(attributes) {\n    var duration = attributes.duration,\n        _attributes$timescale = attributes.timescale,\n        timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n        sourceDuration = attributes.sourceDuration,\n        periodDuration = attributes.periodDuration;\n    var endNumber = parseEndNumber(attributes.endNumber);\n    var segmentDuration = duration / timescale;\n\n    if (typeof endNumber === 'number') {\n      return {\n        start: 0,\n        end: endNumber\n      };\n    }\n\n    if (typeof periodDuration === 'number') {\n      return {\n        start: 0,\n        end: periodDuration / segmentDuration\n      };\n    }\n\n    return {\n      start: 0,\n      end: sourceDuration / segmentDuration\n    };\n  },\n\n  /**\n   * Returns the current live window range of available segments for a dynamic MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  dynamic: function dynamic(attributes) {\n    var NOW = attributes.NOW,\n        clientOffset = attributes.clientOffset,\n        availabilityStartTime = attributes.availabilityStartTime,\n        _attributes$timescale2 = attributes.timescale,\n        timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n        duration = attributes.duration,\n        _attributes$periodSta = attributes.periodStart,\n        periodStart = _attributes$periodSta === void 0 ? 0 : _attributes$periodSta,\n        _attributes$minimumUp = attributes.minimumUpdatePeriod,\n        minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp,\n        _attributes$timeShift = attributes.timeShiftBufferDepth,\n        timeShiftBufferDepth = _attributes$timeShift === void 0 ? Infinity : _attributes$timeShift;\n    var endNumber = parseEndNumber(attributes.endNumber); // clientOffset is passed in at the top level of mpd-parser and is an offset calculated\n    // after retrieving UTC server time.\n\n    var now = (NOW + clientOffset) / 1000; // WC stands for Wall Clock.\n    // Convert the period start time to EPOCH.\n\n    var periodStartWC = availabilityStartTime + periodStart; // Period end in EPOCH is manifest's retrieval time + time until next update.\n\n    var periodEndWC = now + minimumUpdatePeriod;\n    var periodDuration = periodEndWC - periodStartWC;\n    var segmentCount = Math.ceil(periodDuration * timescale / duration);\n    var availableStart = Math.floor((now - periodStartWC - timeShiftBufferDepth) * timescale / duration);\n    var availableEnd = Math.floor((now - periodStartWC) * timescale / duration);\n    return {\n      start: Math.max(0, availableStart),\n      end: typeof endNumber === 'number' ? endNumber : Math.min(segmentCount, availableEnd)\n    };\n  }\n};\n/**\n * Maps a range of numbers to objects with information needed to build the corresponding\n * segment list\n *\n * @name toSegmentsCallback\n * @function\n * @param {number} number\n *        Number of the segment\n * @param {number} index\n *        Index of the number in the range list\n * @return {{ number: Number, duration: Number, timeline: Number, time: Number }}\n *         Object with segment timing and duration info\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping a range of numbers to\n * information needed to build the segment list.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {toSegmentsCallback}\n *         Callback map function\n */\n\nvar toSegments = function toSegments(attributes) {\n  return function (number) {\n    var duration = attributes.duration,\n        _attributes$timescale3 = attributes.timescale,\n        timescale = _attributes$timescale3 === void 0 ? 1 : _attributes$timescale3,\n        periodStart = attributes.periodStart,\n        _attributes$startNumb = attributes.startNumber,\n        startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb;\n    return {\n      number: startNumber + number,\n      duration: duration / timescale,\n      timeline: periodStart,\n      time: number * duration\n    };\n  };\n};\n/**\n * Returns a list of objects containing segment timing and duration info used for\n * building the list of segments. This uses the @duration attribute specified\n * in the MPD manifest to derive the range of segments.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByDuration = function parseByDuration(attributes) {\n  var type = attributes.type,\n      duration = attributes.duration,\n      _attributes$timescale4 = attributes.timescale,\n      timescale = _attributes$timescale4 === void 0 ? 1 : _attributes$timescale4,\n      periodDuration = attributes.periodDuration,\n      sourceDuration = attributes.sourceDuration;\n\n  var _segmentRange$type = segmentRange[type](attributes),\n      start = _segmentRange$type.start,\n      end = _segmentRange$type.end;\n\n  var segments = range(start, end).map(toSegments(attributes));\n\n  if (type === 'static') {\n    var index = segments.length - 1; // section is either a period or the full source\n\n    var sectionDuration = typeof periodDuration === 'number' ? periodDuration : sourceDuration; // final segment may be less than full segment duration\n\n    segments[index].duration = sectionDuration - duration / timescale * index;\n  }\n\n  return segments;\n};\n/**\n * Translates SegmentBase into a set of segments.\n * (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromBase = function segmentsFromBase(attributes) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$indexRang = attributes.indexRange,\n      indexRange = _attributes$indexRang === void 0 ? '' : _attributes$indexRang,\n      periodStart = attributes.periodStart,\n      presentationTime = attributes.presentationTime,\n      _attributes$number = attributes.number,\n      number = _attributes$number === void 0 ? 0 : _attributes$number,\n      duration = attributes.duration; // base url is required for SegmentBase to work, per spec (Section 5.3.9.2.1)\n\n  if (!baseUrl) {\n    throw new Error(errors.NO_BASE_URL);\n  }\n\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: baseUrl,\n    indexRange: indexRange\n  });\n  segment.map = initSegment; // If there is a duration, use it, otherwise use the given duration of the source\n  // (since SegmentBase is only for one total segment)\n\n  if (duration) {\n    var segmentTimeInfo = parseByDuration(attributes);\n\n    if (segmentTimeInfo.length) {\n      segment.duration = segmentTimeInfo[0].duration;\n      segment.timeline = segmentTimeInfo[0].timeline;\n    }\n  } else if (sourceDuration) {\n    segment.duration = sourceDuration;\n    segment.timeline = periodStart;\n  } // If presentation time is provided, these segments are being generated by SIDX\n  // references, and should use the time provided. For the general case of SegmentBase,\n  // there should only be one segment in the period, so its presentation time is the same\n  // as its period start.\n\n\n  segment.presentationTime = presentationTime || periodStart;\n  segment.number = number;\n  return [segment];\n};\n/**\n * Given a playlist, a sidx box, and a baseUrl, update the segment list of the playlist\n * according to the sidx information given.\n *\n * playlist.sidx has metadadata about the sidx where-as the sidx param\n * is the parsed sidx box itself.\n *\n * @param {Object} playlist the playlist to update the sidx information for\n * @param {Object} sidx the parsed sidx box\n * @return {Object} the playlist object with the updated sidx information\n */\n\n\nvar addSidxSegmentsToPlaylist$1 = function addSidxSegmentsToPlaylist(playlist, sidx, baseUrl) {\n  // Retain init segment information\n  var initSegment = playlist.sidx.map ? playlist.sidx.map : null; // Retain source duration from initial main manifest parsing\n\n  var sourceDuration = playlist.sidx.duration; // Retain source timeline\n\n  var timeline = playlist.timeline || 0;\n  var sidxByteRange = playlist.sidx.byterange;\n  var sidxEnd = sidxByteRange.offset + sidxByteRange.length; // Retain timescale of the parsed sidx\n\n  var timescale = sidx.timescale; // referenceType 1 refers to other sidx boxes\n\n  var mediaReferences = sidx.references.filter(function (r) {\n    return r.referenceType !== 1;\n  });\n  var segments = [];\n  var type = playlist.endList ? 'static' : 'dynamic';\n  var periodStart = playlist.sidx.timeline;\n  var presentationTime = periodStart;\n  var number = playlist.mediaSequence || 0; // firstOffset is the offset from the end of the sidx box\n\n  var startIndex; // eslint-disable-next-line\n\n  if (typeof sidx.firstOffset === 'bigint') {\n    startIndex = window.BigInt(sidxEnd) + sidx.firstOffset;\n  } else {\n    startIndex = sidxEnd + sidx.firstOffset;\n  }\n\n  for (var i = 0; i < mediaReferences.length; i++) {\n    var reference = sidx.references[i]; // size of the referenced (sub)segment\n\n    var size = reference.referencedSize; // duration of the referenced (sub)segment, in  the  timescale\n    // this will be converted to seconds when generating segments\n\n    var duration = reference.subsegmentDuration; // should be an inclusive range\n\n    var endIndex = void 0; // eslint-disable-next-line\n\n    if (typeof startIndex === 'bigint') {\n      endIndex = startIndex + window.BigInt(size) - window.BigInt(1);\n    } else {\n      endIndex = startIndex + size - 1;\n    }\n\n    var indexRange = startIndex + \"-\" + endIndex;\n    var attributes = {\n      baseUrl: baseUrl,\n      timescale: timescale,\n      timeline: timeline,\n      periodStart: periodStart,\n      presentationTime: presentationTime,\n      number: number,\n      duration: duration,\n      sourceDuration: sourceDuration,\n      indexRange: indexRange,\n      type: type\n    };\n    var segment = segmentsFromBase(attributes)[0];\n\n    if (initSegment) {\n      segment.map = initSegment;\n    }\n\n    segments.push(segment);\n\n    if (typeof startIndex === 'bigint') {\n      startIndex += window.BigInt(size);\n    } else {\n      startIndex += size;\n    }\n\n    presentationTime += duration / timescale;\n    number++;\n  }\n\n  playlist.segments = segments;\n  return playlist;\n};\n\nvar SUPPORTED_MEDIA_TYPES = ['AUDIO', 'SUBTITLES']; // allow one 60fps frame as leniency (arbitrarily chosen)\n\nvar TIME_FUDGE = 1 / 60;\n/**\n * Given a list of timelineStarts, combines, dedupes, and sorts them.\n *\n * @param {TimelineStart[]} timelineStarts - list of timeline starts\n *\n * @return {TimelineStart[]} the combined and deduped timeline starts\n */\n\nvar getUniqueTimelineStarts = function getUniqueTimelineStarts(timelineStarts) {\n  return union(timelineStarts, function (_ref) {\n    var timeline = _ref.timeline;\n    return timeline;\n  }).sort(function (a, b) {\n    return a.timeline > b.timeline ? 1 : -1;\n  });\n};\n/**\n * Finds the playlist with the matching NAME attribute.\n *\n * @param {Array} playlists - playlists to search through\n * @param {string} name - the NAME attribute to search for\n *\n * @return {Object|null} the matching playlist object, or null\n */\n\n\nvar findPlaylistWithName = function findPlaylistWithName(playlists, name) {\n  for (var i = 0; i < playlists.length; i++) {\n    if (playlists[i].attributes.NAME === name) {\n      return playlists[i];\n    }\n  }\n\n  return null;\n};\n/**\n * Gets a flattened array of media group playlists.\n *\n * @param {Object} manifest - the main manifest object\n *\n * @return {Array} the media group playlists\n */\n\n\nvar getMediaGroupPlaylists = function getMediaGroupPlaylists(manifest) {\n  var mediaGroupPlaylists = [];\n  forEachMediaGroup(manifest, SUPPORTED_MEDIA_TYPES, function (properties, type, group, label) {\n    mediaGroupPlaylists = mediaGroupPlaylists.concat(properties.playlists || []);\n  });\n  return mediaGroupPlaylists;\n};\n/**\n * Updates the playlist's media sequence numbers.\n *\n * @param {Object} config - options object\n * @param {Object} config.playlist - the playlist to update\n * @param {number} config.mediaSequence - the mediaSequence number to start with\n */\n\n\nvar updateMediaSequenceForPlaylist = function updateMediaSequenceForPlaylist(_ref2) {\n  var playlist = _ref2.playlist,\n      mediaSequence = _ref2.mediaSequence;\n  playlist.mediaSequence = mediaSequence;\n  playlist.segments.forEach(function (segment, index) {\n    segment.number = playlist.mediaSequence + index;\n  });\n};\n/**\n * Updates the media and discontinuity sequence numbers of newPlaylists given oldPlaylists\n * and a complete list of timeline starts.\n *\n * If no matching playlist is found, only the discontinuity sequence number of the playlist\n * will be updated.\n *\n * Since early available timelines are not supported, at least one segment must be present.\n *\n * @param {Object} config - options object\n * @param {Object[]} oldPlaylists - the old playlists to use as a reference\n * @param {Object[]} newPlaylists - the new playlists to update\n * @param {Object} timelineStarts - all timelineStarts seen in the stream to this point\n */\n\n\nvar updateSequenceNumbers = function updateSequenceNumbers(_ref3) {\n  var oldPlaylists = _ref3.oldPlaylists,\n      newPlaylists = _ref3.newPlaylists,\n      timelineStarts = _ref3.timelineStarts;\n  newPlaylists.forEach(function (playlist) {\n    playlist.discontinuitySequence = findIndex(timelineStarts, function (_ref4) {\n      var timeline = _ref4.timeline;\n      return timeline === playlist.timeline;\n    }); // Playlists NAMEs come from DASH Representation IDs, which are mandatory\n    // (see ISO_23009-1-2012 5.3.5.2).\n    //\n    // If the same Representation existed in a prior Period, it will retain the same NAME.\n\n    var oldPlaylist = findPlaylistWithName(oldPlaylists, playlist.attributes.NAME);\n\n    if (!oldPlaylist) {\n      // Since this is a new playlist, the media sequence values can start from 0 without\n      // consequence.\n      return;\n    } // TODO better support for live SIDX\n    //\n    // As of this writing, mpd-parser does not support multiperiod SIDX (in live or VOD).\n    // This is evident by a playlist only having a single SIDX reference. In a multiperiod\n    // playlist there would need to be multiple SIDX references. In addition, live SIDX is\n    // not supported when the SIDX properties change on refreshes.\n    //\n    // In the future, if support needs to be added, the merging logic here can be called\n    // after SIDX references are resolved. For now, exit early to prevent exceptions being\n    // thrown due to undefined references.\n\n\n    if (playlist.sidx) {\n      return;\n    } // Since we don't yet support early available timelines, we don't need to support\n    // playlists with no segments.\n\n\n    var firstNewSegment = playlist.segments[0];\n    var oldMatchingSegmentIndex = findIndex(oldPlaylist.segments, function (oldSegment) {\n      return Math.abs(oldSegment.presentationTime - firstNewSegment.presentationTime) < TIME_FUDGE;\n    }); // No matching segment from the old playlist means the entire playlist was refreshed.\n    // In this case the media sequence should account for this update, and the new segments\n    // should be marked as discontinuous from the prior content, since the last prior\n    // timeline was removed.\n\n    if (oldMatchingSegmentIndex === -1) {\n      updateMediaSequenceForPlaylist({\n        playlist: playlist,\n        mediaSequence: oldPlaylist.mediaSequence + oldPlaylist.segments.length\n      });\n      playlist.segments[0].discontinuity = true;\n      playlist.discontinuityStarts.unshift(0); // No matching segment does not necessarily mean there's missing content.\n      //\n      // If the new playlist's timeline is the same as the last seen segment's timeline,\n      // then a discontinuity can be added to identify that there's potentially missing\n      // content. If there's no missing content, the discontinuity should still be rather\n      // harmless. It's possible that if segment durations are accurate enough, that the\n      // existence of a gap can be determined using the presentation times and durations,\n      // but if the segment timing info is off, it may introduce more problems than simply\n      // adding the discontinuity.\n      //\n      // If the new playlist's timeline is different from the last seen segment's timeline,\n      // then a discontinuity can be added to identify that this is the first seen segment\n      // of a new timeline. However, the logic at the start of this function that\n      // determined the disconinuity sequence by timeline index is now off by one (the\n      // discontinuity of the newest timeline hasn't yet fallen off the manifest...since\n      // we added it), so the disconinuity sequence must be decremented.\n      //\n      // A period may also have a duration of zero, so the case of no segments is handled\n      // here even though we don't yet support early available periods.\n\n      if (!oldPlaylist.segments.length && playlist.timeline > oldPlaylist.timeline || oldPlaylist.segments.length && playlist.timeline > oldPlaylist.segments[oldPlaylist.segments.length - 1].timeline) {\n        playlist.discontinuitySequence--;\n      }\n\n      return;\n    } // If the first segment matched with a prior segment on a discontinuity (it's matching\n    // on the first segment of a period), then the discontinuitySequence shouldn't be the\n    // timeline's matching one, but instead should be the one prior, and the first segment\n    // of the new manifest should be marked with a discontinuity.\n    //\n    // The reason for this special case is that discontinuity sequence shows how many\n    // discontinuities have fallen off of the playlist, and discontinuities are marked on\n    // the first segment of a new \"timeline.\" Because of this, while DASH will retain that\n    // Period while the \"timeline\" exists, HLS keeps track of it via the discontinuity\n    // sequence, and that first segment is an indicator, but can be removed before that\n    // timeline is gone.\n\n\n    var oldMatchingSegment = oldPlaylist.segments[oldMatchingSegmentIndex];\n\n    if (oldMatchingSegment.discontinuity && !firstNewSegment.discontinuity) {\n      firstNewSegment.discontinuity = true;\n      playlist.discontinuityStarts.unshift(0);\n      playlist.discontinuitySequence--;\n    }\n\n    updateMediaSequenceForPlaylist({\n      playlist: playlist,\n      mediaSequence: oldPlaylist.segments[oldMatchingSegmentIndex].number\n    });\n  });\n};\n/**\n * Given an old parsed manifest object and a new parsed manifest object, updates the\n * sequence and timing values within the new manifest to ensure that it lines up with the\n * old.\n *\n * @param {Array} oldManifest - the old main manifest object\n * @param {Array} newManifest - the new main manifest object\n *\n * @return {Object} the updated new manifest object\n */\n\n\nvar positionManifestOnTimeline = function positionManifestOnTimeline(_ref5) {\n  var oldManifest = _ref5.oldManifest,\n      newManifest = _ref5.newManifest; // Starting from v4.1.2 of the IOP, section 4.4.3.3 states:\n  //\n  // \"MPD@availabilityStartTime and Period@start shall not be changed over MPD updates.\"\n  //\n  // This was added from https://github.com/Dash-Industry-Forum/DASH-IF-IOP/issues/160\n  //\n  // Because of this change, and the difficulty of supporting periods with changing start\n  // times, periods with changing start times are not supported. This makes the logic much\n  // simpler, since periods with the same start time can be considerred the same period\n  // across refreshes.\n  //\n  // To give an example as to the difficulty of handling periods where the start time may\n  // change, if a single period manifest is refreshed with another manifest with a single\n  // period, and both the start and end times are increased, then the only way to determine\n  // if it's a new period or an old one that has changed is to look through the segments of\n  // each playlist and determine the presentation time bounds to find a match. In addition,\n  // if the period start changed to exceed the old period end, then there would be no\n  // match, and it would not be possible to determine whether the refreshed period is a new\n  // one or the old one.\n\n  var oldPlaylists = oldManifest.playlists.concat(getMediaGroupPlaylists(oldManifest));\n  var newPlaylists = newManifest.playlists.concat(getMediaGroupPlaylists(newManifest)); // Save all seen timelineStarts to the new manifest. Although this potentially means that\n  // there's a \"memory leak\" in that it will never stop growing, in reality, only a couple\n  // of properties are saved for each seen Period. Even long running live streams won't\n  // generate too many Periods, unless the stream is watched for decades. In the future,\n  // this can be optimized by mapping to discontinuity sequence numbers for each timeline,\n  // but it may not become an issue, and the additional info can be useful for debugging.\n\n  newManifest.timelineStarts = getUniqueTimelineStarts([oldManifest.timelineStarts, newManifest.timelineStarts]);\n  updateSequenceNumbers({\n    oldPlaylists: oldPlaylists,\n    newPlaylists: newPlaylists,\n    timelineStarts: newManifest.timelineStarts\n  });\n  return newManifest;\n};\n\nvar generateSidxKey = function generateSidxKey(sidx) {\n  return sidx && sidx.uri + '-' + byteRangeToString(sidx.byterange);\n};\n\nvar mergeDiscontiguousPlaylists = function mergeDiscontiguousPlaylists(playlists) {\n  var mergedPlaylists = values(playlists.reduce(function (acc, playlist) {\n    // assuming playlist IDs are the same across periods\n    // TODO: handle multiperiod where representation sets are not the same\n    // across periods\n    var name = playlist.attributes.id + (playlist.attributes.lang || '');\n\n    if (!acc[name]) {\n      // First Period\n      acc[name] = playlist;\n      acc[name].attributes.timelineStarts = [];\n    } else {\n      // Subsequent Periods\n      if (playlist.segments) {\n        var _acc$name$segments; // first segment of subsequent periods signal a discontinuity\n\n\n        if (playlist.segments[0]) {\n          playlist.segments[0].discontinuity = true;\n        }\n\n        (_acc$name$segments = acc[name].segments).push.apply(_acc$name$segments, playlist.segments);\n      } // bubble up contentProtection, this assumes all DRM content\n      // has the same contentProtection\n\n\n      if (playlist.attributes.contentProtection) {\n        acc[name].attributes.contentProtection = playlist.attributes.contentProtection;\n      }\n    }\n\n    acc[name].attributes.timelineStarts.push({\n      // Although they represent the same number, it's important to have both to make it\n      // compatible with HLS potentially having a similar attribute.\n      start: playlist.attributes.periodStart,\n      timeline: playlist.attributes.periodStart\n    });\n    return acc;\n  }, {}));\n  return mergedPlaylists.map(function (playlist) {\n    playlist.discontinuityStarts = findIndexes(playlist.segments || [], 'discontinuity');\n    return playlist;\n  });\n};\n\nvar addSidxSegmentsToPlaylist = function addSidxSegmentsToPlaylist(playlist, sidxMapping) {\n  var sidxKey = generateSidxKey(playlist.sidx);\n  var sidxMatch = sidxKey && sidxMapping[sidxKey] && sidxMapping[sidxKey].sidx;\n\n  if (sidxMatch) {\n    addSidxSegmentsToPlaylist$1(playlist, sidxMatch, playlist.sidx.resolvedUri);\n  }\n\n  return playlist;\n};\n\nvar addSidxSegmentsToPlaylists = function addSidxSegmentsToPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (!Object.keys(sidxMapping).length) {\n    return playlists;\n  }\n\n  for (var i in playlists) {\n    playlists[i] = addSidxSegmentsToPlaylist(playlists[i], sidxMapping);\n  }\n\n  return playlists;\n};\n\nvar formatAudioPlaylist = function formatAudioPlaylist(_ref, isAudioOnly) {\n  var _attributes;\n\n  var attributes = _ref.attributes,\n      segments = _ref.segments,\n      sidx = _ref.sidx,\n      mediaSequence = _ref.mediaSequence,\n      discontinuitySequence = _ref.discontinuitySequence,\n      discontinuityStarts = _ref.discontinuityStarts;\n  var playlist = {\n    attributes: (_attributes = {\n      NAME: attributes.id,\n      BANDWIDTH: attributes.bandwidth,\n      CODECS: attributes.codecs\n    }, _attributes['PROGRAM-ID'] = 1, _attributes),\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    discontinuitySequence: discontinuitySequence,\n    discontinuityStarts: discontinuityStarts,\n    timelineStarts: attributes.timelineStarts,\n    mediaSequence: mediaSequence,\n    segments: segments\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  if (isAudioOnly) {\n    playlist.attributes.AUDIO = 'audio';\n    playlist.attributes.SUBTITLES = 'subs';\n  }\n\n  return playlist;\n};\n\nvar formatVttPlaylist = function formatVttPlaylist(_ref2) {\n  var _m3u8Attributes;\n\n  var attributes = _ref2.attributes,\n      segments = _ref2.segments,\n      mediaSequence = _ref2.mediaSequence,\n      discontinuityStarts = _ref2.discontinuityStarts,\n      discontinuitySequence = _ref2.discontinuitySequence;\n\n  if (typeof segments === 'undefined') {\n    // vtt tracks may use single file in BaseURL\n    segments = [{\n      uri: attributes.baseUrl,\n      timeline: attributes.periodStart,\n      resolvedUri: attributes.baseUrl || '',\n      duration: attributes.sourceDuration,\n      number: 0\n    }]; // targetDuration should be the same duration as the only segment\n\n    attributes.duration = attributes.sourceDuration;\n  }\n\n  var m3u8Attributes = (_m3u8Attributes = {\n    NAME: attributes.id,\n    BANDWIDTH: attributes.bandwidth\n  }, _m3u8Attributes['PROGRAM-ID'] = 1, _m3u8Attributes);\n\n  if (attributes.codecs) {\n    m3u8Attributes.CODECS = attributes.codecs;\n  }\n\n  return {\n    attributes: m3u8Attributes,\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: attributes.baseUrl || '',\n    targetDuration: attributes.duration,\n    timelineStarts: attributes.timelineStarts,\n    discontinuityStarts: discontinuityStarts,\n    discontinuitySequence: discontinuitySequence,\n    mediaSequence: mediaSequence,\n    segments: segments\n  };\n};\n\nvar organizeAudioPlaylists = function organizeAudioPlaylists(playlists, sidxMapping, isAudioOnly) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  if (isAudioOnly === void 0) {\n    isAudioOnly = false;\n  }\n\n  var mainPlaylist;\n  var formattedPlaylists = playlists.reduce(function (a, playlist) {\n    var role = playlist.attributes.role && playlist.attributes.role.value || '';\n    var language = playlist.attributes.lang || '';\n    var label = playlist.attributes.label || 'main';\n\n    if (language && !playlist.attributes.label) {\n      var roleLabel = role ? \" (\" + role + \")\" : '';\n      label = \"\" + playlist.attributes.lang + roleLabel;\n    }\n\n    if (!a[label]) {\n      a[label] = {\n        language: language,\n        autoselect: true,\n        default: role === 'main',\n        playlists: [],\n        uri: ''\n      };\n    }\n\n    var formatted = addSidxSegmentsToPlaylist(formatAudioPlaylist(playlist, isAudioOnly), sidxMapping);\n    a[label].playlists.push(formatted);\n\n    if (typeof mainPlaylist === 'undefined' && role === 'main') {\n      mainPlaylist = playlist;\n      mainPlaylist.default = true;\n    }\n\n    return a;\n  }, {}); // if no playlists have role \"main\", mark the first as main\n\n  if (!mainPlaylist) {\n    var firstLabel = Object.keys(formattedPlaylists)[0];\n    formattedPlaylists[firstLabel].default = true;\n  }\n\n  return formattedPlaylists;\n};\n\nvar organizeVttPlaylists = function organizeVttPlaylists(playlists, sidxMapping) {\n  if (sidxMapping === void 0) {\n    sidxMapping = {};\n  }\n\n  return playlists.reduce(function (a, playlist) {\n    var label = playlist.attributes.lang || 'text';\n\n    if (!a[label]) {\n      a[label] = {\n        language: label,\n        default: false,\n        autoselect: false,\n        playlists: [],\n        uri: ''\n      };\n    }\n\n    a[label].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(playlist), sidxMapping));\n    return a;\n  }, {});\n};\n\nvar organizeCaptionServices = function organizeCaptionServices(captionServices) {\n  return captionServices.reduce(function (svcObj, svc) {\n    if (!svc) {\n      return svcObj;\n    }\n\n    svc.forEach(function (service) {\n      var channel = service.channel,\n          language = service.language;\n      svcObj[language] = {\n        autoselect: false,\n        default: false,\n        instreamId: channel,\n        language: language\n      };\n\n      if (service.hasOwnProperty('aspectRatio')) {\n        svcObj[language].aspectRatio = service.aspectRatio;\n      }\n\n      if (service.hasOwnProperty('easyReader')) {\n        svcObj[language].easyReader = service.easyReader;\n      }\n\n      if (service.hasOwnProperty('3D')) {\n        svcObj[language]['3D'] = service['3D'];\n      }\n    });\n    return svcObj;\n  }, {});\n};\n\nvar formatVideoPlaylist = function formatVideoPlaylist(_ref3) {\n  var _attributes2;\n\n  var attributes = _ref3.attributes,\n      segments = _ref3.segments,\n      sidx = _ref3.sidx,\n      discontinuityStarts = _ref3.discontinuityStarts;\n  var playlist = {\n    attributes: (_attributes2 = {\n      NAME: attributes.id,\n      AUDIO: 'audio',\n      SUBTITLES: 'subs',\n      RESOLUTION: {\n        width: attributes.width,\n        height: attributes.height\n      },\n      CODECS: attributes.codecs,\n      BANDWIDTH: attributes.bandwidth\n    }, _attributes2['PROGRAM-ID'] = 1, _attributes2),\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    discontinuityStarts: discontinuityStarts,\n    timelineStarts: attributes.timelineStarts,\n    segments: segments\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nvar videoOnly = function videoOnly(_ref4) {\n  var attributes = _ref4.attributes;\n  return attributes.mimeType === 'video/mp4' || attributes.mimeType === 'video/webm' || attributes.contentType === 'video';\n};\n\nvar audioOnly = function audioOnly(_ref5) {\n  var attributes = _ref5.attributes;\n  return attributes.mimeType === 'audio/mp4' || attributes.mimeType === 'audio/webm' || attributes.contentType === 'audio';\n};\n\nvar vttOnly = function vttOnly(_ref6) {\n  var attributes = _ref6.attributes;\n  return attributes.mimeType === 'text/vtt' || attributes.contentType === 'text';\n};\n/**\n * Contains start and timeline properties denoting a timeline start. For DASH, these will\n * be the same number.\n *\n * @typedef {Object} TimelineStart\n * @property {number} start - the start time of the timeline\n * @property {number} timeline - the timeline number\n */\n\n/**\n * Adds appropriate media and discontinuity sequence values to the segments and playlists.\n *\n * Throughout mpd-parser, the `number` attribute is used in relation to `startNumber`, a\n * DASH specific attribute used in constructing segment URI's from templates. However, from\n * an HLS perspective, the `number` attribute on a segment would be its `mediaSequence`\n * value, which should start at the original media sequence value (or 0) and increment by 1\n * for each segment thereafter. Since DASH's `startNumber` values are independent per\n * period, it doesn't make sense to use it for `number`. Instead, assume everything starts\n * from a 0 mediaSequence value and increment from there.\n *\n * Note that VHS currently doesn't use the `number` property, but it can be helpful for\n * debugging and making sense of the manifest.\n *\n * For live playlists, to account for values increasing in manifests when periods are\n * removed on refreshes, merging logic should be used to update the numbers to their\n * appropriate values (to ensure they're sequential and increasing).\n *\n * @param {Object[]} playlists - the playlists to update\n * @param {TimelineStart[]} timelineStarts - the timeline starts for the manifest\n */\n\n\nvar addMediaSequenceValues = function addMediaSequenceValues(playlists, timelineStarts) {\n  // increment all segments sequentially\n  playlists.forEach(function (playlist) {\n    playlist.mediaSequence = 0;\n    playlist.discontinuitySequence = findIndex(timelineStarts, function (_ref7) {\n      var timeline = _ref7.timeline;\n      return timeline === playlist.timeline;\n    });\n\n    if (!playlist.segments) {\n      return;\n    }\n\n    playlist.segments.forEach(function (segment, index) {\n      segment.number = index;\n    });\n  });\n};\n/**\n * Given a media group object, flattens all playlists within the media group into a single\n * array.\n *\n * @param {Object} mediaGroupObject - the media group object\n *\n * @return {Object[]}\n *         The media group playlists\n */\n\n\nvar flattenMediaGroupPlaylists = function flattenMediaGroupPlaylists(mediaGroupObject) {\n  if (!mediaGroupObject) {\n    return [];\n  }\n\n  return Object.keys(mediaGroupObject).reduce(function (acc, label) {\n    var labelContents = mediaGroupObject[label];\n    return acc.concat(labelContents.playlists);\n  }, []);\n};\n\nvar toM3u8 = function toM3u8(_ref8) {\n  var _mediaGroups;\n\n  var dashPlaylists = _ref8.dashPlaylists,\n      locations = _ref8.locations,\n      _ref8$sidxMapping = _ref8.sidxMapping,\n      sidxMapping = _ref8$sidxMapping === void 0 ? {} : _ref8$sidxMapping,\n      previousManifest = _ref8.previousManifest;\n\n  if (!dashPlaylists.length) {\n    return {};\n  } // grab all main manifest attributes\n\n\n  var _dashPlaylists$0$attr = dashPlaylists[0].attributes,\n      duration = _dashPlaylists$0$attr.sourceDuration,\n      type = _dashPlaylists$0$attr.type,\n      suggestedPresentationDelay = _dashPlaylists$0$attr.suggestedPresentationDelay,\n      minimumUpdatePeriod = _dashPlaylists$0$attr.minimumUpdatePeriod;\n  var videoPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);\n  var audioPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));\n  var vttPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(vttOnly));\n  var captions = dashPlaylists.map(function (playlist) {\n    return playlist.attributes.captionServices;\n  }).filter(Boolean);\n  var manifest = {\n    allowCache: true,\n    discontinuityStarts: [],\n    segments: [],\n    endList: true,\n    mediaGroups: (_mediaGroups = {\n      AUDIO: {},\n      VIDEO: {}\n    }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {}, _mediaGroups),\n    uri: '',\n    duration: duration,\n    playlists: addSidxSegmentsToPlaylists(videoPlaylists, sidxMapping)\n  };\n\n  if (minimumUpdatePeriod >= 0) {\n    manifest.minimumUpdatePeriod = minimumUpdatePeriod * 1000;\n  }\n\n  if (locations) {\n    manifest.locations = locations;\n  }\n\n  if (type === 'dynamic') {\n    manifest.suggestedPresentationDelay = suggestedPresentationDelay;\n  }\n\n  var isAudioOnly = manifest.playlists.length === 0;\n  var organizedAudioGroup = audioPlaylists.length ? organizeAudioPlaylists(audioPlaylists, sidxMapping, isAudioOnly) : null;\n  var organizedVttGroup = vttPlaylists.length ? organizeVttPlaylists(vttPlaylists, sidxMapping) : null;\n  var formattedPlaylists = videoPlaylists.concat(flattenMediaGroupPlaylists(organizedAudioGroup), flattenMediaGroupPlaylists(organizedVttGroup));\n  var playlistTimelineStarts = formattedPlaylists.map(function (_ref9) {\n    var timelineStarts = _ref9.timelineStarts;\n    return timelineStarts;\n  });\n  manifest.timelineStarts = getUniqueTimelineStarts(playlistTimelineStarts);\n  addMediaSequenceValues(formattedPlaylists, manifest.timelineStarts);\n\n  if (organizedAudioGroup) {\n    manifest.mediaGroups.AUDIO.audio = organizedAudioGroup;\n  }\n\n  if (organizedVttGroup) {\n    manifest.mediaGroups.SUBTITLES.subs = organizedVttGroup;\n  }\n\n  if (captions.length) {\n    manifest.mediaGroups['CLOSED-CAPTIONS'].cc = organizeCaptionServices(captions);\n  }\n\n  if (previousManifest) {\n    return positionManifestOnTimeline({\n      oldManifest: previousManifest,\n      newManifest: manifest\n    });\n  }\n\n  return manifest;\n};\n/**\n * Calculates the R (repetition) value for a live stream (for the final segment\n * in a manifest where the r value is negative 1)\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {number} time\n *        current time (typically the total time up until the final segment)\n * @param {number} duration\n *        duration property for the given <S />\n *\n * @return {number}\n *        R value to reach the end of the given period\n */\n\n\nvar getLiveRValue = function getLiveRValue(attributes, time, duration) {\n  var NOW = attributes.NOW,\n      clientOffset = attributes.clientOffset,\n      availabilityStartTime = attributes.availabilityStartTime,\n      _attributes$timescale = attributes.timescale,\n      timescale = _attributes$timescale === void 0 ? 1 : _attributes$timescale,\n      _attributes$periodSta = attributes.periodStart,\n      periodStart = _attributes$periodSta === void 0 ? 0 : _attributes$periodSta,\n      _attributes$minimumUp = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp === void 0 ? 0 : _attributes$minimumUp;\n  var now = (NOW + clientOffset) / 1000;\n  var periodStartWC = availabilityStartTime + periodStart;\n  var periodEndWC = now + minimumUpdatePeriod;\n  var periodDuration = periodEndWC - periodStartWC;\n  return Math.ceil((periodDuration * timescale - time) / duration);\n};\n/**\n * Uses information provided by SegmentTemplate.SegmentTimeline to determine segment\n * timing and duration\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseByTimeline = function parseByTimeline(attributes, segmentTimeline) {\n  var type = attributes.type,\n      _attributes$minimumUp2 = attributes.minimumUpdatePeriod,\n      minimumUpdatePeriod = _attributes$minimumUp2 === void 0 ? 0 : _attributes$minimumUp2,\n      _attributes$media = attributes.media,\n      media = _attributes$media === void 0 ? '' : _attributes$media,\n      sourceDuration = attributes.sourceDuration,\n      _attributes$timescale2 = attributes.timescale,\n      timescale = _attributes$timescale2 === void 0 ? 1 : _attributes$timescale2,\n      _attributes$startNumb = attributes.startNumber,\n      startNumber = _attributes$startNumb === void 0 ? 1 : _attributes$startNumb,\n      timeline = attributes.periodStart;\n  var segments = [];\n  var time = -1;\n\n  for (var sIndex = 0; sIndex < segmentTimeline.length; sIndex++) {\n    var S = segmentTimeline[sIndex];\n    var duration = S.d;\n    var repeat = S.r || 0;\n    var segmentTime = S.t || 0;\n\n    if (time < 0) {\n      // first segment\n      time = segmentTime;\n    }\n\n    if (segmentTime && segmentTime > time) {\n      // discontinuity\n      // TODO: How to handle this type of discontinuity\n      // timeline++ here would treat it like HLS discontuity and content would\n      // get appended without gap\n      // E.G.\n      //  <S t=\"0\" d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S t=\"5\" d=\"1\" />\n      // would have $Time$ values of [0, 1, 2, 5]\n      // should this be appened at time positions [0, 1, 2, 3],(#EXT-X-DISCONTINUITY)\n      // or [0, 1, 2, gap, gap, 5]? (#EXT-X-GAP)\n      // does the value of sourceDuration consider this when calculating arbitrary\n      // negative @r repeat value?\n      // E.G. Same elements as above with this added at the end\n      //  <S d=\"1\" r=\"-1\" />\n      //  with a sourceDuration of 10\n      // Would the 2 gaps be included in the time duration calculations resulting in\n      // 8 segments with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9] or 10 segments\n      // with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9, 10, 11] ?\n      time = segmentTime;\n    }\n\n    var count = void 0;\n\n    if (repeat < 0) {\n      var nextS = sIndex + 1;\n\n      if (nextS === segmentTimeline.length) {\n        // last segment\n        if (type === 'dynamic' && minimumUpdatePeriod > 0 && media.indexOf('$Number$') > 0) {\n          count = getLiveRValue(attributes, time, duration);\n        } else {\n          // TODO: This may be incorrect depending on conclusion of TODO above\n          count = (sourceDuration * timescale - time) / duration;\n        }\n      } else {\n        count = (segmentTimeline[nextS].t - time) / duration;\n      }\n    } else {\n      count = repeat + 1;\n    }\n\n    var end = startNumber + segments.length + count;\n    var number = startNumber + segments.length;\n\n    while (number < end) {\n      segments.push({\n        number: number,\n        duration: duration / timescale,\n        time: time,\n        timeline: timeline\n      });\n      time += duration;\n      number++;\n    }\n  }\n\n  return segments;\n};\n\nvar identifierPattern = /\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g;\n/**\n * Replaces template identifiers with corresponding values. To be used as the callback\n * for String.prototype.replace\n *\n * @name replaceCallback\n * @function\n * @param {string} match\n *        Entire match of identifier\n * @param {string} identifier\n *        Name of matched identifier\n * @param {string} format\n *        Format tag string. Its presence indicates that padding is expected\n * @param {string} width\n *        Desired length of the replaced value. Values less than this width shall be left\n *        zero padded\n * @return {string}\n *         Replacement for the matched identifier\n */\n\n/**\n * Returns a function to be used as a callback for String.prototype.replace to replace\n * template identifiers\n *\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {replaceCallback}\n *         Callback to be used with String.prototype.replace to replace identifiers\n */\n\nvar identifierReplacement = function identifierReplacement(values) {\n  return function (match, identifier, format, width) {\n    if (match === '$$') {\n      // escape sequence\n      return '$';\n    }\n\n    if (typeof values[identifier] === 'undefined') {\n      return match;\n    }\n\n    var value = '' + values[identifier];\n\n    if (identifier === 'RepresentationID') {\n      // Format tag shall not be present with RepresentationID\n      return value;\n    }\n\n    if (!format) {\n      width = 1;\n    } else {\n      width = parseInt(width, 10);\n    }\n\n    if (value.length >= width) {\n      return value;\n    }\n\n    return \"\" + new Array(width - value.length + 1).join('0') + value;\n  };\n};\n/**\n * Constructs a segment url from a template string\n *\n * @param {string} url\n *        Template string to construct url from\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {string}\n *         Segment url with identifiers replaced\n */\n\n\nvar constructTemplateUrl = function constructTemplateUrl(url, values) {\n  return url.replace(identifierPattern, identifierReplacement(values));\n};\n/**\n * Generates a list of objects containing timing and duration information about each\n * segment needed to generate segment uris and the complete segment object\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nvar parseTemplateInfo = function parseTemplateInfo(attributes, segmentTimeline) {\n  if (!attributes.duration && !segmentTimeline) {\n    // if neither @duration or SegmentTimeline are present, then there shall be exactly\n    // one media segment\n    return [{\n      number: attributes.startNumber || 1,\n      duration: attributes.sourceDuration,\n      time: 0,\n      timeline: attributes.periodStart\n    }];\n  }\n\n  if (attributes.duration) {\n    return parseByDuration(attributes);\n  }\n\n  return parseByTimeline(attributes, segmentTimeline);\n};\n/**\n * Generates a list of segments using information provided by the SegmentTemplate element\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object[]}\n *         List of segment objects\n */\n\n\nvar segmentsFromTemplate = function segmentsFromTemplate(attributes, segmentTimeline) {\n  var templateValues = {\n    RepresentationID: attributes.id,\n    Bandwidth: attributes.bandwidth || 0\n  };\n  var _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {\n    sourceURL: '',\n    range: ''\n  } : _attributes$initializ;\n  var mapSegment = urlTypeToSegment({\n    baseUrl: attributes.baseUrl,\n    source: constructTemplateUrl(initialization.sourceURL, templateValues),\n    range: initialization.range\n  });\n  var segments = parseTemplateInfo(attributes, segmentTimeline);\n  return segments.map(function (segment) {\n    templateValues.Number = segment.number;\n    templateValues.Time = segment.time;\n    var uri = constructTemplateUrl(attributes.media || '', templateValues); // See DASH spec section 5.3.9.2.2\n    // - if timescale isn't present on any level, default to 1.\n\n    var timescale = attributes.timescale || 1; // - if presentationTimeOffset isn't present on any level, default to 0\n\n    var presentationTimeOffset = attributes.presentationTimeOffset || 0;\n    var presentationTime = // Even if the @t attribute is not specified for the segment, segment.time is\n    // calculated in mpd-parser prior to this, so it's assumed to be available.\n    attributes.periodStart + (segment.time - presentationTimeOffset) / timescale;\n    var map = {\n      uri: uri,\n      timeline: segment.timeline,\n      duration: segment.duration,\n      resolvedUri: resolveUrl(attributes.baseUrl || '', uri),\n      map: mapSegment,\n      number: segment.number,\n      presentationTime: presentationTime\n    };\n    return map;\n  });\n};\n/**\n * Converts a <SegmentUrl> (of type URLType from the DASH spec 5.3.9.2 Table 14)\n * to an object that matches the output of a segment in videojs/mpd-parser\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object} segmentUrl\n *   <SegmentURL> node to translate into a segment object\n * @return {Object} translated segment object\n */\n\n\nvar SegmentURLToSegmentObject = function SegmentURLToSegmentObject(attributes, segmentUrl) {\n  var baseUrl = attributes.baseUrl,\n      _attributes$initializ = attributes.initialization,\n      initialization = _attributes$initializ === void 0 ? {} : _attributes$initializ;\n  var initSegment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  var segment = urlTypeToSegment({\n    baseUrl: baseUrl,\n    source: segmentUrl.media,\n    range: segmentUrl.mediaRange\n  });\n  segment.map = initSegment;\n  return segment;\n};\n/**\n * Generates a list of segments using information provided by the SegmentList element\n * SegmentList (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object.<Array>} list of segments\n */\n\n\nvar segmentsFromList = function segmentsFromList(attributes, segmentTimeline) {\n  var duration = attributes.duration,\n      _attributes$segmentUr = attributes.segmentUrls,\n      segmentUrls = _attributes$segmentUr === void 0 ? [] : _attributes$segmentUr,\n      periodStart = attributes.periodStart; // Per spec (5.3.9.2.1) no way to determine segment duration OR\n  // if both SegmentTimeline and @duration are defined, it is outside of spec.\n\n  if (!duration && !segmentTimeline || duration && segmentTimeline) {\n    throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);\n  }\n\n  var segmentUrlMap = segmentUrls.map(function (segmentUrlObject) {\n    return SegmentURLToSegmentObject(attributes, segmentUrlObject);\n  });\n  var segmentTimeInfo;\n\n  if (duration) {\n    segmentTimeInfo = parseByDuration(attributes);\n  }\n\n  if (segmentTimeline) {\n    segmentTimeInfo = parseByTimeline(attributes, segmentTimeline);\n  }\n\n  var segments = segmentTimeInfo.map(function (segmentTime, index) {\n    if (segmentUrlMap[index]) {\n      var segment = segmentUrlMap[index]; // See DASH spec section 5.3.9.2.2\n      // - if timescale isn't present on any level, default to 1.\n\n      var timescale = attributes.timescale || 1; // - if presentationTimeOffset isn't present on any level, default to 0\n\n      var presentationTimeOffset = attributes.presentationTimeOffset || 0;\n      segment.timeline = segmentTime.timeline;\n      segment.duration = segmentTime.duration;\n      segment.number = segmentTime.number;\n      segment.presentationTime = periodStart + (segmentTime.time - presentationTimeOffset) / timescale;\n      return segment;\n    } // Since we're mapping we should get rid of any blank segments (in case\n    // the given SegmentTimeline is handling for more elements than we have\n    // SegmentURLs for).\n\n  }).filter(function (segment) {\n    return segment;\n  });\n  return segments;\n};\n\nvar generateSegments = function generateSegments(_ref) {\n  var attributes = _ref.attributes,\n      segmentInfo = _ref.segmentInfo;\n  var segmentAttributes;\n  var segmentsFn;\n\n  if (segmentInfo.template) {\n    segmentsFn = segmentsFromTemplate;\n    segmentAttributes = merge(attributes, segmentInfo.template);\n  } else if (segmentInfo.base) {\n    segmentsFn = segmentsFromBase;\n    segmentAttributes = merge(attributes, segmentInfo.base);\n  } else if (segmentInfo.list) {\n    segmentsFn = segmentsFromList;\n    segmentAttributes = merge(attributes, segmentInfo.list);\n  }\n\n  var segmentsInfo = {\n    attributes: attributes\n  };\n\n  if (!segmentsFn) {\n    return segmentsInfo;\n  }\n\n  var segments = segmentsFn(segmentAttributes, segmentInfo.segmentTimeline); // The @duration attribute will be used to determin the playlist's targetDuration which\n  // must be in seconds. Since we've generated the segment list, we no longer need\n  // @duration to be in @timescale units, so we can convert it here.\n\n  if (segmentAttributes.duration) {\n    var _segmentAttributes = segmentAttributes,\n        duration = _segmentAttributes.duration,\n        _segmentAttributes$ti = _segmentAttributes.timescale,\n        timescale = _segmentAttributes$ti === void 0 ? 1 : _segmentAttributes$ti;\n    segmentAttributes.duration = duration / timescale;\n  } else if (segments.length) {\n    // if there is no @duration attribute, use the largest segment duration as\n    // as target duration\n    segmentAttributes.duration = segments.reduce(function (max, segment) {\n      return Math.max(max, Math.ceil(segment.duration));\n    }, 0);\n  } else {\n    segmentAttributes.duration = 0;\n  }\n\n  segmentsInfo.attributes = segmentAttributes;\n  segmentsInfo.segments = segments; // This is a sidx box without actual segment information\n\n  if (segmentInfo.base && segmentAttributes.indexRange) {\n    segmentsInfo.sidx = segments[0];\n    segmentsInfo.segments = [];\n  }\n\n  return segmentsInfo;\n};\n\nvar toPlaylists = function toPlaylists(representations) {\n  return representations.map(generateSegments);\n};\n\nvar findChildren = function findChildren(element, name) {\n  return from(element.childNodes).filter(function (_ref) {\n    var tagName = _ref.tagName;\n    return tagName === name;\n  });\n};\n\nvar getContent = function getContent(element) {\n  return element.textContent.trim();\n};\n\nvar parseDuration = function parseDuration(str) {\n  var SECONDS_IN_YEAR = 365 * 24 * 60 * 60;\n  var SECONDS_IN_MONTH = 30 * 24 * 60 * 60;\n  var SECONDS_IN_DAY = 24 * 60 * 60;\n  var SECONDS_IN_HOUR = 60 * 60;\n  var SECONDS_IN_MIN = 60; // P10Y10M10DT10H10M10.1S\n\n  var durationRegex = /P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/;\n  var match = durationRegex.exec(str);\n\n  if (!match) {\n    return 0;\n  }\n\n  var _match$slice = match.slice(1),\n      year = _match$slice[0],\n      month = _match$slice[1],\n      day = _match$slice[2],\n      hour = _match$slice[3],\n      minute = _match$slice[4],\n      second = _match$slice[5];\n\n  return parseFloat(year || 0) * SECONDS_IN_YEAR + parseFloat(month || 0) * SECONDS_IN_MONTH + parseFloat(day || 0) * SECONDS_IN_DAY + parseFloat(hour || 0) * SECONDS_IN_HOUR + parseFloat(minute || 0) * SECONDS_IN_MIN + parseFloat(second || 0);\n};\n\nvar parseDate = function parseDate(str) {\n  // Date format without timezone according to ISO 8601\n  // YYY-MM-DDThh:mm:ss.ssssss\n  var dateRegex = /^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/; // If the date string does not specifiy a timezone, we must specifiy UTC. This is\n  // expressed by ending with 'Z'\n\n  if (dateRegex.test(str)) {\n    str += 'Z';\n  }\n\n  return Date.parse(str);\n};\n\nvar parsers = {\n  /**\n   * Specifies the duration of the entire Media Presentation. Format is a duration string\n   * as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  mediaPresentationDuration: function mediaPresentationDuration(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the Segment availability start time for all Segments referred to in this\n   * MPD. For a dynamic manifest, it specifies the anchor for the earliest availability\n   * time. Format is a date string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The date as seconds from unix epoch\n   */\n  availabilityStartTime: function availabilityStartTime(value) {\n    return parseDate(value) / 1000;\n  },\n\n  /**\n   * Specifies the smallest period between potential changes to the MPD. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  minimumUpdatePeriod: function minimumUpdatePeriod(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the suggested presentation delay. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  suggestedPresentationDelay: function suggestedPresentationDelay(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * specifices the type of mpd. Can be either \"static\" or \"dynamic\"\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   *\n   * @return {string}\n   *         The type as a string\n   */\n  type: function type(value) {\n    return value;\n  },\n\n  /**\n   * Specifies the duration of the smallest time shifting buffer for any Representation\n   * in the MPD. Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  timeShiftBufferDepth: function timeShiftBufferDepth(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the PeriodStart time of the Period relative to the availabilityStarttime.\n   * Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  start: function start(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the width of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed width\n   */\n  width: function width(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the height of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed height\n   */\n  height: function height(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the bitrate of the representation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed bandwidth\n   */\n  bandwidth: function bandwidth(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the number of the first Media Segment in this Representation in the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  startNumber: function startNumber(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the timescale in units per seconds\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed timescale\n   */\n  timescale: function timescale(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the presentationTimeOffset.\n   *\n   * @param {string} value\n   *        value of the attribute as a string\n   *\n   * @return {number}\n   *         The parsed presentationTimeOffset\n   */\n  presentationTimeOffset: function presentationTimeOffset(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the constant approximate Segment duration\n   * NOTE: The <Period> element also contains an @duration attribute. This duration\n   *       specifies the duration of the Period. This attribute is currently not\n   *       supported by the rest of the parser, however we still check for it to prevent\n   *       errors.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  duration: function duration(value) {\n    var parsedValue = parseInt(value, 10);\n\n    if (isNaN(parsedValue)) {\n      return parseDuration(value);\n    }\n\n    return parsedValue;\n  },\n\n  /**\n   * Specifies the Segment duration, in units of the value of the @timescale.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  d: function d(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the MPD start time, in @timescale units, the first Segment in the series\n   * starts relative to the beginning of the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed time\n   */\n  t: function t(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the repeat count of the number of following contiguous Segments with the\n   * same duration expressed by the value of @d\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  r: function r(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Default parser for all other attributes. Acts as a no-op and just returns the value\n   * as a string\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {string}\n   *         Unparsed value\n   */\n  DEFAULT: function DEFAULT(value) {\n    return value;\n  }\n};\n/**\n * Gets all the attributes and values of the provided node, parses attributes with known\n * types, and returns an object with attribute names mapped to values.\n *\n * @param {Node} el\n *        The node to parse attributes from\n * @return {Object}\n *         Object with all attributes of el parsed\n */\n\nvar parseAttributes = function parseAttributes(el) {\n  if (!(el && el.attributes)) {\n    return {};\n  }\n\n  return from(el.attributes).reduce(function (a, e) {\n    var parseFn = parsers[e.name] || parsers.DEFAULT;\n    a[e.name] = parseFn(e.value);\n    return a;\n  }, {});\n};\n\nvar keySystemsMap = {\n  'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey',\n  'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha',\n  'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready',\n  'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime'\n};\n/**\n * Builds a list of urls that is the product of the reference urls and BaseURL values\n *\n * @param {string[]} referenceUrls\n *        List of reference urls to resolve to\n * @param {Node[]} baseUrlElements\n *        List of BaseURL nodes from the mpd\n * @return {string[]}\n *         List of resolved urls\n */\n\nvar buildBaseUrls = function buildBaseUrls(referenceUrls, baseUrlElements) {\n  if (!baseUrlElements.length) {\n    return referenceUrls;\n  }\n\n  return flatten(referenceUrls.map(function (reference) {\n    return baseUrlElements.map(function (baseUrlElement) {\n      return resolveUrl(reference, getContent(baseUrlElement));\n    });\n  }));\n};\n/**\n * Contains all Segment information for its containing AdaptationSet\n *\n * @typedef {Object} SegmentInformation\n * @property {Object|undefined} template\n *           Contains the attributes for the SegmentTemplate node\n * @property {Object[]|undefined} segmentTimeline\n *           Contains a list of atrributes for each S node within the SegmentTimeline node\n * @property {Object|undefined} list\n *           Contains the attributes for the SegmentList node\n * @property {Object|undefined} base\n *           Contains the attributes for the SegmentBase node\n */\n\n/**\n * Returns all available Segment information contained within the AdaptationSet node\n *\n * @param {Node} adaptationSet\n *        The AdaptationSet node to get Segment information from\n * @return {SegmentInformation}\n *         The Segment information contained within the provided AdaptationSet\n */\n\n\nvar getSegmentInformation = function getSegmentInformation(adaptationSet) {\n  var segmentTemplate = findChildren(adaptationSet, 'SegmentTemplate')[0];\n  var segmentList = findChildren(adaptationSet, 'SegmentList')[0];\n  var segmentUrls = segmentList && findChildren(segmentList, 'SegmentURL').map(function (s) {\n    return merge({\n      tag: 'SegmentURL'\n    }, parseAttributes(s));\n  });\n  var segmentBase = findChildren(adaptationSet, 'SegmentBase')[0];\n  var segmentTimelineParentNode = segmentList || segmentTemplate;\n  var segmentTimeline = segmentTimelineParentNode && findChildren(segmentTimelineParentNode, 'SegmentTimeline')[0];\n  var segmentInitializationParentNode = segmentList || segmentBase || segmentTemplate;\n  var segmentInitialization = segmentInitializationParentNode && findChildren(segmentInitializationParentNode, 'Initialization')[0]; // SegmentTemplate is handled slightly differently, since it can have both\n  // @initialization and an <Initialization> node.  @initialization can be templated,\n  // while the node can have a url and range specified.  If the <SegmentTemplate> has\n  // both @initialization and an <Initialization> subelement we opt to override with\n  // the node, as this interaction is not defined in the spec.\n\n  var template = segmentTemplate && parseAttributes(segmentTemplate);\n\n  if (template && segmentInitialization) {\n    template.initialization = segmentInitialization && parseAttributes(segmentInitialization);\n  } else if (template && template.initialization) {\n    // If it is @initialization we convert it to an object since this is the format that\n    // later functions will rely on for the initialization segment.  This is only valid\n    // for <SegmentTemplate>\n    template.initialization = {\n      sourceURL: template.initialization\n    };\n  }\n\n  var segmentInfo = {\n    template: template,\n    segmentTimeline: segmentTimeline && findChildren(segmentTimeline, 'S').map(function (s) {\n      return parseAttributes(s);\n    }),\n    list: segmentList && merge(parseAttributes(segmentList), {\n      segmentUrls: segmentUrls,\n      initialization: parseAttributes(segmentInitialization)\n    }),\n    base: segmentBase && merge(parseAttributes(segmentBase), {\n      initialization: parseAttributes(segmentInitialization)\n    })\n  };\n  Object.keys(segmentInfo).forEach(function (key) {\n    if (!segmentInfo[key]) {\n      delete segmentInfo[key];\n    }\n  });\n  return segmentInfo;\n};\n/**\n * Contains Segment information and attributes needed to construct a Playlist object\n * from a Representation\n *\n * @typedef {Object} RepresentationInformation\n * @property {SegmentInformation} segmentInfo\n *           Segment information for this Representation\n * @property {Object} attributes\n *           Inherited attributes for this Representation\n */\n\n/**\n * Maps a Representation node to an object containing Segment information and attributes\n *\n * @name inheritBaseUrlsCallback\n * @function\n * @param {Node} representation\n *        Representation node from the mpd\n * @return {RepresentationInformation}\n *         Representation information needed to construct a Playlist object\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Representation nodes to\n * Segment information and attributes using inherited BaseURL nodes.\n *\n * @param {Object} adaptationSetAttributes\n *        Contains attributes inherited by the AdaptationSet\n * @param {string[]} adaptationSetBaseUrls\n *        Contains list of resolved base urls inherited by the AdaptationSet\n * @param {SegmentInformation} adaptationSetSegmentInfo\n *        Contains Segment information for the AdaptationSet\n * @return {inheritBaseUrlsCallback}\n *         Callback map function\n */\n\n\nvar inheritBaseUrls = function inheritBaseUrls(adaptationSetAttributes, adaptationSetBaseUrls, adaptationSetSegmentInfo) {\n  return function (representation) {\n    var repBaseUrlElements = findChildren(representation, 'BaseURL');\n    var repBaseUrls = buildBaseUrls(adaptationSetBaseUrls, repBaseUrlElements);\n    var attributes = merge(adaptationSetAttributes, parseAttributes(representation));\n    var representationSegmentInfo = getSegmentInformation(representation);\n    return repBaseUrls.map(function (baseUrl) {\n      return {\n        segmentInfo: merge(adaptationSetSegmentInfo, representationSegmentInfo),\n        attributes: merge(attributes, {\n          baseUrl: baseUrl\n        })\n      };\n    });\n  };\n};\n/**\n * Tranforms a series of content protection nodes to\n * an object containing pssh data by key system\n *\n * @param {Node[]} contentProtectionNodes\n *        Content protection nodes\n * @return {Object}\n *        Object containing pssh data by key system\n */\n\n\nvar generateKeySystemInformation = function generateKeySystemInformation(contentProtectionNodes) {\n  return contentProtectionNodes.reduce(function (acc, node) {\n    var attributes = parseAttributes(node);\n    var keySystem = keySystemsMap[attributes.schemeIdUri];\n\n    if (keySystem) {\n      acc[keySystem] = {\n        attributes: attributes\n      };\n      var psshNode = findChildren(node, 'cenc:pssh')[0];\n\n      if (psshNode) {\n        var pssh = getContent(psshNode);\n        var psshBuffer = pssh && decodeB64ToUint8Array(pssh);\n        acc[keySystem].pssh = psshBuffer;\n      }\n    }\n\n    return acc;\n  }, {});\n}; // defined in ANSI_SCTE 214-1 2016\n\n\nvar parseCaptionServiceMetadata = function parseCaptionServiceMetadata(service) {\n  // 608 captions\n  if (service.schemeIdUri === 'urn:scte:dash:cc:cea-608:2015') {\n    var values = typeof service.value !== 'string' ? [] : service.value.split(';');\n    return values.map(function (value) {\n      var channel;\n      var language; // default language to value\n\n      language = value;\n\n      if (/^CC\\d=/.test(value)) {\n        var _value$split = value.split('=');\n\n        channel = _value$split[0];\n        language = _value$split[1];\n      } else if (/^CC\\d$/.test(value)) {\n        channel = value;\n      }\n\n      return {\n        channel: channel,\n        language: language\n      };\n    });\n  } else if (service.schemeIdUri === 'urn:scte:dash:cc:cea-708:2015') {\n    var _values = typeof service.value !== 'string' ? [] : service.value.split(';');\n\n    return _values.map(function (value) {\n      var flags = {\n        // service or channel number 1-63\n        'channel': undefined,\n        // language is a 3ALPHA per ISO 639.2/B\n        // field is required\n        'language': undefined,\n        // BIT 1/0 or ?\n        // default value is 1, meaning 16:9 aspect ratio, 0 is 4:3, ? is unknown\n        'aspectRatio': 1,\n        // BIT 1/0\n        // easy reader flag indicated the text is tailed to the needs of beginning readers\n        // default 0, or off\n        'easyReader': 0,\n        // BIT 1/0\n        // If 3d metadata is present (CEA-708.1) then 1\n        // default 0\n        '3D': 0\n      };\n\n      if (/=/.test(value)) {\n        var _value$split2 = value.split('='),\n            channel = _value$split2[0],\n            _value$split2$ = _value$split2[1],\n            opts = _value$split2$ === void 0 ? '' : _value$split2$;\n\n        flags.channel = channel;\n        flags.language = value;\n        opts.split(',').forEach(function (opt) {\n          var _opt$split = opt.split(':'),\n              name = _opt$split[0],\n              val = _opt$split[1];\n\n          if (name === 'lang') {\n            flags.language = val; // er for easyReadery\n          } else if (name === 'er') {\n            flags.easyReader = Number(val); // war for wide aspect ratio\n          } else if (name === 'war') {\n            flags.aspectRatio = Number(val);\n          } else if (name === '3D') {\n            flags['3D'] = Number(val);\n          }\n        });\n      } else {\n        flags.language = value;\n      }\n\n      if (flags.channel) {\n        flags.channel = 'SERVICE' + flags.channel;\n      }\n\n      return flags;\n    });\n  }\n};\n/**\n * Maps an AdaptationSet node to a list of Representation information objects\n *\n * @name toRepresentationsCallback\n * @function\n * @param {Node} adaptationSet\n *        AdaptationSet node from the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping AdaptationSet nodes to a list of\n * Representation information objects\n *\n * @param {Object} periodAttributes\n *        Contains attributes inherited by the Period\n * @param {string[]} periodBaseUrls\n *        Contains list of resolved base urls inherited by the Period\n * @param {string[]} periodSegmentInfo\n *        Contains Segment Information at the period level\n * @return {toRepresentationsCallback}\n *         Callback map function\n */\n\n\nvar toRepresentations = function toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo) {\n  return function (adaptationSet) {\n    var adaptationSetAttributes = parseAttributes(adaptationSet);\n    var adaptationSetBaseUrls = buildBaseUrls(periodBaseUrls, findChildren(adaptationSet, 'BaseURL'));\n    var role = findChildren(adaptationSet, 'Role')[0];\n    var roleAttributes = {\n      role: parseAttributes(role)\n    };\n    var attrs = merge(periodAttributes, adaptationSetAttributes, roleAttributes);\n    var accessibility = findChildren(adaptationSet, 'Accessibility')[0];\n    var captionServices = parseCaptionServiceMetadata(parseAttributes(accessibility));\n\n    if (captionServices) {\n      attrs = merge(attrs, {\n        captionServices: captionServices\n      });\n    }\n\n    var label = findChildren(adaptationSet, 'Label')[0];\n\n    if (label && label.childNodes.length) {\n      var labelVal = label.childNodes[0].nodeValue.trim();\n      attrs = merge(attrs, {\n        label: labelVal\n      });\n    }\n\n    var contentProtection = generateKeySystemInformation(findChildren(adaptationSet, 'ContentProtection'));\n\n    if (Object.keys(contentProtection).length) {\n      attrs = merge(attrs, {\n        contentProtection: contentProtection\n      });\n    }\n\n    var segmentInfo = getSegmentInformation(adaptationSet);\n    var representations = findChildren(adaptationSet, 'Representation');\n    var adaptationSetSegmentInfo = merge(periodSegmentInfo, segmentInfo);\n    return flatten(representations.map(inheritBaseUrls(attrs, adaptationSetBaseUrls, adaptationSetSegmentInfo)));\n  };\n};\n/**\n * Contains all period information for mapping nodes onto adaptation sets.\n *\n * @typedef {Object} PeriodInformation\n * @property {Node} period.node\n *           Period node from the mpd\n * @property {Object} period.attributes\n *           Parsed period attributes from node plus any added\n */\n\n/**\n * Maps a PeriodInformation object to a list of Representation information objects for all\n * AdaptationSet nodes contained within the Period.\n *\n * @name toAdaptationSetsCallback\n * @function\n * @param {PeriodInformation} period\n *        Period object containing necessary period information\n * @param {number} periodStart\n *        Start time of the Period within the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Period nodes to a list of\n * Representation information objects\n *\n * @param {Object} mpdAttributes\n *        Contains attributes inherited by the mpd\n * @param {string[]} mpdBaseUrls\n *        Contains list of resolved base urls inherited by the mpd\n * @return {toAdaptationSetsCallback}\n *         Callback map function\n */\n\n\nvar toAdaptationSets = function toAdaptationSets(mpdAttributes, mpdBaseUrls) {\n  return function (period, index) {\n    var periodBaseUrls = buildBaseUrls(mpdBaseUrls, findChildren(period.node, 'BaseURL'));\n    var periodAttributes = merge(mpdAttributes, {\n      periodStart: period.attributes.start\n    });\n\n    if (typeof period.attributes.duration === 'number') {\n      periodAttributes.periodDuration = period.attributes.duration;\n    }\n\n    var adaptationSets = findChildren(period.node, 'AdaptationSet');\n    var periodSegmentInfo = getSegmentInformation(period.node);\n    return flatten(adaptationSets.map(toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo)));\n  };\n};\n/**\n * Gets Period@start property for a given period.\n *\n * @param {Object} options\n *        Options object\n * @param {Object} options.attributes\n *        Period attributes\n * @param {Object} [options.priorPeriodAttributes]\n *        Prior period attributes (if prior period is available)\n * @param {string} options.mpdType\n *        The MPD@type these periods came from\n * @return {number|null}\n *         The period start, or null if it's an early available period or error\n */\n\n\nvar getPeriodStart = function getPeriodStart(_ref) {\n  var attributes = _ref.attributes,\n      priorPeriodAttributes = _ref.priorPeriodAttributes,\n      mpdType = _ref.mpdType; // Summary of period start time calculation from DASH spec section 5.3.2.1\n  //\n  // A period's start is the first period's start + time elapsed after playing all\n  // prior periods to this one. Periods continue one after the other in time (without\n  // gaps) until the end of the presentation.\n  //\n  // The value of Period@start should be:\n  // 1. if Period@start is present: value of Period@start\n  // 2. if previous period exists and it has @duration: previous Period@start +\n  //    previous Period@duration\n  // 3. if this is first period and MPD@type is 'static': 0\n  // 4. in all other cases, consider the period an \"early available period\" (note: not\n  //    currently supported)\n  // (1)\n\n  if (typeof attributes.start === 'number') {\n    return attributes.start;\n  } // (2)\n\n\n  if (priorPeriodAttributes && typeof priorPeriodAttributes.start === 'number' && typeof priorPeriodAttributes.duration === 'number') {\n    return priorPeriodAttributes.start + priorPeriodAttributes.duration;\n  } // (3)\n\n\n  if (!priorPeriodAttributes && mpdType === 'static') {\n    return 0;\n  } // (4)\n  // There is currently no logic for calculating the Period@start value if there is\n  // no Period@start or prior Period@start and Period@duration available. This is not made\n  // explicit by the DASH interop guidelines or the DASH spec, however, since there's\n  // nothing about any other resolution strategies, it's implied. Thus, this case should\n  // be considered an early available period, or error, and null should suffice for both\n  // of those cases.\n\n\n  return null;\n};\n/**\n * Traverses the mpd xml tree to generate a list of Representation information objects\n * that have inherited attributes from parent nodes\n *\n * @param {Node} mpd\n *        The root node of the mpd\n * @param {Object} options\n *        Available options for inheritAttributes\n * @param {string} options.manifestUri\n *        The uri source of the mpd\n * @param {number} options.NOW\n *        Current time per DASH IOP.  Default is current time in ms since epoch\n * @param {number} options.clientOffset\n *        Client time difference from NOW (in milliseconds)\n * @return {RepresentationInformation[]}\n *         List of objects containing Representation information\n */\n\n\nvar inheritAttributes = function inheritAttributes(mpd, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$manifestUri = _options.manifestUri,\n      manifestUri = _options$manifestUri === void 0 ? '' : _options$manifestUri,\n      _options$NOW = _options.NOW,\n      NOW = _options$NOW === void 0 ? Date.now() : _options$NOW,\n      _options$clientOffset = _options.clientOffset,\n      clientOffset = _options$clientOffset === void 0 ? 0 : _options$clientOffset;\n  var periodNodes = findChildren(mpd, 'Period');\n\n  if (!periodNodes.length) {\n    throw new Error(errors.INVALID_NUMBER_OF_PERIOD);\n  }\n\n  var locations = findChildren(mpd, 'Location');\n  var mpdAttributes = parseAttributes(mpd);\n  var mpdBaseUrls = buildBaseUrls([manifestUri], findChildren(mpd, 'BaseURL')); // See DASH spec section 5.3.1.2, Semantics of MPD element. Default type to 'static'.\n\n  mpdAttributes.type = mpdAttributes.type || 'static';\n  mpdAttributes.sourceDuration = mpdAttributes.mediaPresentationDuration || 0;\n  mpdAttributes.NOW = NOW;\n  mpdAttributes.clientOffset = clientOffset;\n\n  if (locations.length) {\n    mpdAttributes.locations = locations.map(getContent);\n  }\n\n  var periods = []; // Since toAdaptationSets acts on individual periods right now, the simplest approach to\n  // adding properties that require looking at prior periods is to parse attributes and add\n  // missing ones before toAdaptationSets is called. If more such properties are added, it\n  // may be better to refactor toAdaptationSets.\n\n  periodNodes.forEach(function (node, index) {\n    var attributes = parseAttributes(node); // Use the last modified prior period, as it may contain added information necessary\n    // for this period.\n\n    var priorPeriod = periods[index - 1];\n    attributes.start = getPeriodStart({\n      attributes: attributes,\n      priorPeriodAttributes: priorPeriod ? priorPeriod.attributes : null,\n      mpdType: mpdAttributes.type\n    });\n    periods.push({\n      node: node,\n      attributes: attributes\n    });\n  });\n  return {\n    locations: mpdAttributes.locations,\n    representationInfo: flatten(periods.map(toAdaptationSets(mpdAttributes, mpdBaseUrls)))\n  };\n};\n\nvar stringToMpdXml = function stringToMpdXml(manifestString) {\n  if (manifestString === '') {\n    throw new Error(errors.DASH_EMPTY_MANIFEST);\n  }\n\n  var parser = new DOMParser();\n  var xml;\n  var mpd;\n\n  try {\n    xml = parser.parseFromString(manifestString, 'application/xml');\n    mpd = xml && xml.documentElement.tagName === 'MPD' ? xml.documentElement : null;\n  } catch (e) {// ie 11 throwsw on invalid xml\n  }\n\n  if (!mpd || mpd && mpd.getElementsByTagName('parsererror').length > 0) {\n    throw new Error(errors.DASH_INVALID_XML);\n  }\n\n  return mpd;\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} mpd\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTimingScheme = function parseUTCTimingScheme(mpd) {\n  var UTCTimingNode = findChildren(mpd, 'UTCTiming')[0];\n\n  if (!UTCTimingNode) {\n    return null;\n  }\n\n  var attributes = parseAttributes(UTCTimingNode);\n\n  switch (attributes.schemeIdUri) {\n    case 'urn:mpeg:dash:utc:http-head:2014':\n    case 'urn:mpeg:dash:utc:http-head:2012':\n      attributes.method = 'HEAD';\n      break;\n\n    case 'urn:mpeg:dash:utc:http-xsdate:2014':\n    case 'urn:mpeg:dash:utc:http-iso:2014':\n    case 'urn:mpeg:dash:utc:http-xsdate:2012':\n    case 'urn:mpeg:dash:utc:http-iso:2012':\n      attributes.method = 'GET';\n      break;\n\n    case 'urn:mpeg:dash:utc:direct:2014':\n    case 'urn:mpeg:dash:utc:direct:2012':\n      attributes.method = 'DIRECT';\n      attributes.value = Date.parse(attributes.value);\n      break;\n\n    case 'urn:mpeg:dash:utc:http-ntp:2014':\n    case 'urn:mpeg:dash:utc:ntp:2014':\n    case 'urn:mpeg:dash:utc:sntp:2014':\n    default:\n      throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);\n  }\n\n  return attributes;\n};\n\nvar VERSION = version;\n/*\n * Given a DASH manifest string and options, parses the DASH manifest into an object in the\n * form outputed by m3u8-parser and accepted by videojs/http-streaming.\n *\n * For live DASH manifests, if `previousManifest` is provided in options, then the newly\n * parsed DASH manifest will have its media sequence and discontinuity sequence values\n * updated to reflect its position relative to the prior manifest.\n *\n * @param {string} manifestString - the DASH manifest as a string\n * @param {options} [options] - any options\n *\n * @return {Object} the manifest object\n */\n\nvar parse = function parse(manifestString, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var parsedManifestInfo = inheritAttributes(stringToMpdXml(manifestString), options);\n  var playlists = toPlaylists(parsedManifestInfo.representationInfo);\n  return toM3u8({\n    dashPlaylists: playlists,\n    locations: parsedManifestInfo.locations,\n    sidxMapping: options.sidxMapping,\n    previousManifest: options.previousManifest\n  });\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} manifestString\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nvar parseUTCTiming = function parseUTCTiming(manifestString) {\n  return parseUTCTimingScheme(stringToMpdXml(manifestString));\n};\n\nexport { VERSION, addSidxSegmentsToPlaylist$1 as addSidxSegmentsToPlaylist, generateSidxKey, inheritAttributes, parse, parseUTCTiming, stringToMpdXml, toM3u8, toPlaylists };","/**\n * Loops through all supported media groups in master and calls the provided\n * callback for each group\n *\n * @param {Object} master\n *        The parsed master manifest object\n * @param {string[]} groups\n *        The media groups to call the callback for\n * @param {Function} callback\n *        Callback to call for each media group\n */\nexport var forEachMediaGroup = function forEachMediaGroup(master, groups, callback) {\n  groups.forEach(function (mediaType) {\n    for (var groupKey in master.mediaGroups[mediaType]) {\n      for (var labelKey in master.mediaGroups[mediaType][groupKey]) {\n        var mediaProperties = master.mediaGroups[mediaType][groupKey][labelKey];\n        callback(mediaProperties, mediaType, groupKey, labelKey);\n      }\n    }\n  });\n};","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMilliseconds from \"../addMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addSeconds\n * @category Second Helpers\n * @summary Add the specified number of seconds to the given date.\n *\n * @description\n * Add the specified number of seconds to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of seconds to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the seconds added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 30 seconds to 10 July 2014 12:45:00:\n * const result = addSeconds(new Date(2014, 6, 10, 12, 45, 0), 30)\n * //=> Thu Jul 10 2014 12:45:30\n */\n\nexport default function addSeconds(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, amount * 1000);\n}"],"sourceRoot":""}