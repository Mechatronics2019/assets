(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{2637:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return d}));var n={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},i={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},r={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[i.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[i.DAY,i.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[i.DAY,i.WEEK,i.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[i.WEEK,i.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[i.WEEK,i.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[i.DAY,i.WEEK,i.MONTH,i.YEAR]}},s='PlusJakarta,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',o={type:"bar",backgroundColor:"rgb(31, 147, 255)"},c={datasets:[o],scales:{xAxes:[{ticks:{fontFamily:s},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:s,beginAtZero:!0,stepSize:1,callback:function(t,e,a){return e&&e!==a.length-1?"":t}},gridLines:{drawOnChartArea:!1}}]}},l={datasets:[o],scales:{xAxes:[{ticks:{fontFamily:s},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:s,callback:function(t,e,a){return e&&e!==a.length-1?"":function(t){if(!t)return"";if(t<60)return"".concat(t,"s");if(t<3600){var e=Math.floor(t/60);return"".concat(e,"m")}if(t<86400){var a=Math.floor(t/3600);return"".concat(a,"h")}var n=Math.floor(t/86400);return"".concat(n,"d")}(t)}},gridLines:{drawOnChartArea:!1}}]}},u={conversations_count:c,incoming_messages_count:c,outgoing_messages_count:c,avg_first_response_time:l,reply_time:l,avg_resolution_time:l,resolutions_count:c,bot_resolutions_count:c,bot_handoffs_count:c},d={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"}},2956:function(t,e,a){},2957:function(t,e,a){},2958:function(t,e,a){},3188:function(t,e,a){"use strict";a(2956)},3189:function(t,e,a){"use strict";a(2957)},3190:function(t,e,a){"use strict";a(2958)},3329:function(t,e,a){"use strict";a.r(e);a(10),a(11),a(5),a(9),a(12),a(13);var n=a(27),i=(a(51),a(78),a(40),a(153),a(2813)),r=a(187),s=a(1914),o=a(1777),c=a(268),l={name:"AgentTable",components:{EmptyState:s.a,Spinner:r.a,VeTable:i.VeTable,VePagination:i.VePagination},mixins:[o.a],props:{agents:{type:Array,default:function(){return[]}},agentMetrics:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1},pageIndex:{type:Number,default:1}},computed:{tableData:function(){var t=this;return this.agentMetrics.map((function(e){var a=t.getAgentInformation(e.id);return{agent:a.name,email:a.email,thumbnail:a.thumbnail,open:e.metric.open||0,unattended:e.metric.unattended||0,status:a.availability_status}}))},columns:function(){var t=this.$createElement;return[{field:"agent",key:"agent",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.AGENT"),fixed:"left",align:this.isRTLView?"right":"left",width:25,renderBodyCell:function(e){var a=e.row;return t("div",{class:"row-user-block"},[t(c.a,{attrs:{src:a.thumbnail,size:"32px",username:a.agent,status:a.status}}),t("div",{class:"user-block"},[t("h6",{class:"title overflow-hidden whitespace-nowrap text-ellipsis"},[a.agent]),t("span",{class:"sub-title"},[a.email])])])}},{field:"open",key:"open",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.OPEN"),align:this.isRTLView?"right":"left",width:10},{field:"unattended",key:"unattended",title:this.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.TABLE_HEADER.UNATTENDED"),align:this.isRTLView?"right":"left",width:10}]}},methods:{onPageNumberChange:function(t){this.$emit("page-change",t)},getAgentInformation:function(t){return this.agents.find((function(e){return e.id===Number(t)}))}}},u=(a(3188),a(7)),d=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"agent-table-container"},[e("ve-table",{attrs:{"max-height":"calc(100vh - 21.875rem)","fixed-header":!0,columns:t.columns,"table-data":t.tableData}}),t._v(" "),t.isLoading?e("div",{staticClass:"agents-loader"},[e("spinner"),t._v(" "),e("span",[t._v(t._s(t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.LOADING_MESSAGE")))])],1):t.isLoading||t.agentMetrics.length?t._e():e("empty-state",{attrs:{title:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.NO_AGENTS")}}),t._v(" "),t.agentMetrics.length>0?e("div",{staticClass:"table-pagination"},[e("ve-pagination",{attrs:{total:t.agents.length,"page-index":t.pageIndex,"page-size":25,"page-size-option":[25]},on:{"on-page-number-change":t.onPageNumberChange}})],1):t._e()],1)}),[],!1,null,"06e319f8",null).exports,f={name:"MetricCard",components:{Spinner:r.a},props:{header:{type:String,default:""},isLoading:{type:Boolean,default:!1},loadingMessage:{type:String,default:""}}},p=(a(3189),Object(u.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"metric-card flex flex-col m-2 p-4 border border-solid overflow-hidden rounded-md flex-grow shadow-sm text-slate-700 dark:text-slate-100 bg-white dark:bg-slate-800 border-slate-75 dark:border-slate-700 min-h-[10rem]"},[e("div",{staticClass:"card-header"},[t._t("header",(function(){return[e("div",{staticClass:"flex items-center gap-0.5 flex-row"},[e("h5",{staticClass:"mb-0 text-slate-800 dark:text-slate-100 font-medium text-xl"},[t._v("\n          "+t._s(t.header)+"\n        ")]),t._v(" "),e("span",{staticClass:"flex flex-row items-center pr-2 pl-2 m-1 rounded-sm text-green-400 dark:text-green-400 text-xs bg-green-100/30 dark:bg-green-100/20"},[e("span",{staticClass:"bg-green-500 dark:bg-green-500 h-1 w-1 rounded-full mr-1 rtl:mr-0 rtl:ml-0"}),t._v(" "),e("span",[t._v("\n            "+t._s(t.$t("OVERVIEW_REPORTS.LIVE"))+"\n          ")])])]),t._v(" "),e("div",{staticClass:"card-header--control-area"},[t._t("control")],2)]}))],2),t._v(" "),t.isLoading?t.isLoading?e("div",{staticClass:"items-center flex text-base justify-center px-12 py-6"},[e("spinner"),t._v(" "),e("span",{staticClass:"text-slate-300 dark:text-slate-200"},[t._v("\n      "+t._s(t.loadingMessage)+"\n    ")])],1):t._e():e("div",{staticClass:"card-body max-w-full w-full ml-auto mr-auto justify-between flex"},[t._t("default")],2)])}),[],!1,null,"a2e7d924",null).exports),_=a(2637),g=(a(277),a(43),a(32),a(8),a(35),a(19),a(21),a(22),a(71),a(66),a(274)),O=a(283),E=a(28),m=a(17);var h=a(1796);function A(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return v(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var T={name:"Heatmap",props:{heatData:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1}},computed:{processedData:function(){return Object(h.b)(this.heatData)},quantileRange:function(){var t=this.heatData.map((function(t){return t.value}));return Object(g.g)(t,[.2,.4,.6,.8,.9,.99])}},methods:{getCountTooltip:function(t){return t?1===t?this.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATION",{count:t}):this.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.CONVERSATIONS",{count:t}):this.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.NO_CONVERSATIONS")},formatDate:function(t){return Object(O.a)(new Date(t),"MMM d, yyyy")},getDayOfTheWeek:function(t){var e=function(t){return Object(m.a)(1,arguments),Object(E.a)(t).getDay()}(t);return[this.$t("DAYS_OF_WEEK.SUNDAY"),this.$t("DAYS_OF_WEEK.MONDAY"),this.$t("DAYS_OF_WEEK.TUESDAY"),this.$t("DAYS_OF_WEEK.WEDNESDAY"),this.$t("DAYS_OF_WEEK.THURSDAY"),this.$t("DAYS_OF_WEEK.FRIDAY"),this.$t("DAYS_OF_WEEK.SATURDAY")][e]},getHeatmapLevelClass:function(t){if(!t)return"";var e=[].concat(A(this.quantileRange),[1/0]).findIndex((function(e){return t<=e&&t>0}));return e>6?"l6":"l".concat(e)}}},S=T,R=(a(3190),Object(u.a)(S,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"heatmap-container"},[t.isLoading?[e("div",{staticClass:"heatmap-labels"},t._l(7,(function(t){return e("div",{key:t,staticClass:"loading-cell heatmap-axis-label"})})),0),t._v(" "),e("div",{staticClass:"heatmap-grid"},t._l(7,(function(a){return e("div",{key:a,staticClass:"heatmap-grid-row"},t._l(24,(function(t){return e("div",{key:t,staticClass:"heatmap-tile loading-cell"},[e("div",{staticClass:"heatmap-tile__label loading-cell"})])})),0)})),0),t._v(" "),e("div",{staticClass:"heatmap-timeline"}),t._v(" "),e("div",{staticClass:"heatmap-markers"},t._l(24,(function(a){return e("div",{key:a},[t._v(t._s(a-1)+" \u2013 "+t._s(a))])})),0)]:[e("div",{staticClass:"heatmap-labels"},t._l(t.processedData.keys(),(function(a){return e("div",{key:a,staticClass:"heatmap-axis-label"},[t._v("\n        "+t._s(t.getDayOfTheWeek(new Date(a)))+"\n        "),e("time",[t._v(t._s(t.formatDate(a)))])])})),0),t._v(" "),e("div",{staticClass:"heatmap-grid"},t._l(t.processedData.keys(),(function(a){return e("div",{key:a,staticClass:"heatmap-grid-row"},t._l(t.processedData.get(a),(function(a){return e("div",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:t.getCountTooltip(a.value),expression:"getCountTooltip(data.value)",modifiers:{top:!0}}],key:a.timestamp,staticClass:"heatmap-tile",class:t.getHeatmapLevelClass(a.value)},[e("div",{staticClass:"heatmap-tile__label"})])})),0)})),0),t._v(" "),e("div",{staticClass:"heatmap-timeline"}),t._v(" "),e("div",{staticClass:"heatmap-markers"},t._l(24,(function(a){return e("div",{key:a},[t._v(t._s(a-1)+" \u2013 "+t._s(a))])})),0)]],2)}),[],!1,null,"68613025",null).exports),y=a(524),b=a(1767),C=a(181),N=a(1775);function D(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?D(Object(a),!0).forEach((function(e){x(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function x(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var I={name:"LiveReports",components:{AgentTable:d,MetricCard:p,ReportHeatmap:R},data:function(){return{pageIndex:1}},computed:w(w({},Object(n.mapGetters)({agentStatus:"agents/getAgentStatus",agents:"agents/getAgents",accountConversationMetric:"getAccountConversationMetric",agentConversationMetric:"getAgentConversationMetric",accountConversationHeatmap:"getAccountConversationHeatmapData",uiFlags:"getOverviewUIFlags"})),{},{agentStatusMetrics:function(){var t=this,e={};return Object.keys(this.agentStatus).forEach((function(a){var n=t.$t("OVERVIEW_REPORTS.AGENT_STATUS.".concat(_.e[a]));e[n]=t.agentStatus[a]})),e},conversationMetrics:function(){var t=this,e={};return Object.keys(this.accountConversationMetric).forEach((function(a){var n=t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.".concat(_.e[a]));e[n]=t.accountConversationMetric[a]})),e}}),mounted:function(){var t=this;this.$store.dispatch("agents/get"),this.fetchAllData(),bus.$on("fetch_overview_reports",(function(){t.fetchAllData()}))},methods:{fetchAllData:function(){this.fetchAccountConversationMetric(),this.fetchAgentConversationMetric(),this.fetchHeatmapData()},downloadHeatmapData:function(){var t=Object(y.a)(new Date);this.$store.dispatch("downloadAccountConversationHeatmap",{to:Object(b.a)(t)})},fetchHeatmapData:function(){if(!this.uiFlags.isFetchingAccountConversationsHeatmap){var t=Object(y.a)(new Date),e=Object(C.a)(Object(N.a)(t,6));this.accountConversationHeatmap.length&&(t=Object(y.a)(new Date),e=Object(C.a)(t)),this.$store.dispatch("fetchAccountConversationHeatmap",{metric:"conversations_count",from:Object(b.a)(e),to:Object(b.a)(t),groupBy:"hour",businessHours:!1})}},fetchAccountConversationMetric:function(){this.$store.dispatch("fetchAccountConversationMetric",{type:"account"})},fetchAgentConversationMetric:function(){this.$store.dispatch("fetchAgentConversationMetric",{type:"agent",page:this.pageIndex})},onPageNumberChange:function(t){this.pageIndex=t,this.fetchAgentConversationMetric()}}},P=Object(u.a)(I,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 overflow-auto p-4"},[e("div",{staticClass:"flex flex-col md:flex-row items-center"},[e("div",{staticClass:"flex-1 w-full max-w-full md:w-[65%] md:max-w-[65%] conversation-metric"},[e("metric-card",{attrs:{header:t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.HEADER"),"is-loading":t.uiFlags.isFetchingAccountConversationMetric,"loading-message":t.$t("OVERVIEW_REPORTS.ACCOUNT_CONVERSATIONS.LOADING_MESSAGE")}},t._l(t.conversationMetrics,(function(a,n,i){return e("div",{key:i,staticClass:"metric-content flex-1 min-w-0"},[e("h3",{staticClass:"heading"},[t._v("\n            "+t._s(n)+"\n          ")]),t._v(" "),e("p",{staticClass:"metric"},[t._v(t._s(a))])])})),0)],1),t._v(" "),e("div",{staticClass:"flex-1 w-full max-w-full md:w-[35%] md:max-w-[35%]"},[e("metric-card",{attrs:{header:t.$t("OVERVIEW_REPORTS.AGENT_STATUS.HEADER")}},t._l(t.agentStatusMetrics,(function(a,n,i){return e("div",{key:i,staticClass:"metric-content flex-1 min-w-0"},[e("h3",{staticClass:"heading"},[t._v("\n            "+t._s(n)+"\n          ")]),t._v(" "),e("p",{staticClass:"metric"},[t._v(t._s(a))])])})),0)],1)]),t._v(" "),e("div",{staticClass:"max-w-full flex flex-wrap flex-row ml-auto mr-auto"},[e("metric-card",{attrs:{header:t.$t("OVERVIEW_REPORTS.CONVERSATION_HEATMAP.HEADER")},scopedSlots:t._u([{key:"control",fn:function(){return[e("woot-button",{attrs:{icon:"arrow-download",size:"small",variant:"smooth","color-scheme":"secondary"},on:{click:t.downloadHeatmapData}},[t._v("\n          Download Report\n        ")])]},proxy:!0}])},[t._v(" "),e("report-heatmap",{attrs:{"heat-data":t.accountConversationHeatmap,"is-loading":t.uiFlags.isFetchingAccountConversationsHeatmap}})],1)],1),t._v(" "),e("div",{staticClass:"max-w-full flex flex-wrap flex-row ml-auto mr-auto"},[e("metric-card",{attrs:{header:t.$t("OVERVIEW_REPORTS.AGENT_CONVERSATIONS.HEADER")}},[e("agent-table",{attrs:{agents:t.agents,"agent-metrics":t.agentConversationMetric,"page-index":t.pageIndex,"is-loading":t.uiFlags.isFetchingAgentConversationMetric},on:{"page-change":t.onPageNumberChange}})],1)],1)])}),[],!1,null,null,null);e.default=P.exports}}]);
//# sourceMappingURL=57-0836808e041e939d77b9.chunk.js.map